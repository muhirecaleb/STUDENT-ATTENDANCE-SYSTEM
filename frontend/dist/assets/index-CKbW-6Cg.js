function $q(e,t){for(var i=0;i<t.length;i++){const n=t[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();function NH(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var JR={exports:{}},ey={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xB;function Yq(){if(xB)return ey;xB=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(n,s,o){var r=null;if(o!==void 0&&(r=""+o),s.key!==void 0&&(r=""+s.key),"key"in s){o={};for(var a in s)a!=="key"&&(o[a]=s[a])}else o=s;return s=o.ref,{$$typeof:e,type:n,key:r,ref:s!==void 0?s:null,props:o}}return ey.Fragment=t,ey.jsx=i,ey.jsxs=i,ey}var MB;function Kq(){return MB||(MB=1,JR.exports=Yq()),JR.exports}var F=Kq(),eE={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DB;function qq(){if(DB)return gt;DB=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),r=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function m(V){return V===null||typeof V!="object"?null:(V=g&&V[g]||V["@@iterator"],typeof V=="function"?V:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function w(V,W,ee){this.props=V,this.context=W,this.refs=C,this.updater=ee||y}w.prototype.isReactComponent={},w.prototype.setState=function(V,W){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,W,"setState")},w.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function x(){}x.prototype=w.prototype;function M(V,W,ee){this.props=V,this.context=W,this.refs=C,this.updater=ee||y}var E=M.prototype=new x;E.constructor=M,b(E,w.prototype),E.isPureReactComponent=!0;var I=Array.isArray;function N(){}var T={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function O(V,W,ee){var pe=ee.ref;return{$$typeof:e,type:V,key:W,ref:pe!==void 0?pe:null,props:ee}}function G(V,W){return O(V.type,W,V.props)}function B(V){return typeof V=="object"&&V!==null&&V.$$typeof===e}function z(V){var W={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ee){return W[ee]})}var j=/\/+/g;function X(V,W){return typeof V=="object"&&V!==null&&V.key!=null?z(""+V.key):W.toString(36)}function q(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(N,N):(V.status="pending",V.then(function(W){V.status==="pending"&&(V.status="fulfilled",V.value=W)},function(W){V.status==="pending"&&(V.status="rejected",V.reason=W)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function H(V,W,ee,pe,be){var Ce=typeof V;(Ce==="undefined"||Ce==="boolean")&&(V=null);var Fe=!1;if(V===null)Fe=!0;else switch(Ce){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(V.$$typeof){case e:case t:Fe=!0;break;case d:return Fe=V._init,H(Fe(V._payload),W,ee,pe,be)}}if(Fe)return be=be(V),Fe=pe===""?"."+X(V,0):pe,I(be)?(ee="",Fe!=null&&(ee=Fe.replace(j,"$&/")+"/"),H(be,W,ee,"",function(Ee){return Ee})):be!=null&&(B(be)&&(be=G(be,ee+(be.key==null||V&&V.key===be.key?"":(""+be.key).replace(j,"$&/")+"/")+Fe)),W.push(be)),1;Fe=0;var xe=pe===""?".":pe+":";if(I(V))for(var De=0;De<V.length;De++)pe=V[De],Ce=xe+X(pe,De),Fe+=H(pe,W,ee,Ce,be);else if(De=m(V),typeof De=="function")for(V=De.call(V),De=0;!(pe=V.next()).done;)pe=pe.value,Ce=xe+X(pe,De++),Fe+=H(pe,W,ee,Ce,be);else if(Ce==="object"){if(typeof V.then=="function")return H(q(V),W,ee,pe,be);throw W=String(V),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function K(V,W,ee){if(V==null)return V;var pe=[],be=0;return H(V,pe,"","",function(Ce){return W.call(ee,Ce,be++)}),pe}function U(V){if(V._status===-1){var W=V._result;W=W(),W.then(function(ee){(V._status===0||V._status===-1)&&(V._status=1,V._result=ee)},function(ee){(V._status===0||V._status===-1)&&(V._status=2,V._result=ee)}),V._status===-1&&(V._status=0,V._result=W)}if(V._status===1)return V._result.default;throw V._result}var de=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},te={map:K,forEach:function(V,W,ee){K(V,function(){W.apply(this,arguments)},ee)},count:function(V){var W=0;return K(V,function(){W++}),W},toArray:function(V){return K(V,function(W){return W})||[]},only:function(V){if(!B(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return gt.Activity=p,gt.Children=te,gt.Component=w,gt.Fragment=i,gt.Profiler=s,gt.PureComponent=M,gt.StrictMode=n,gt.Suspense=l,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,gt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return T.H.useMemoCache(V)}},gt.cache=function(V){return function(){return V.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function(V,W,ee){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var pe=b({},V.props),be=V.key;if(W!=null)for(Ce in W.key!==void 0&&(be=""+W.key),W)!P.call(W,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&W.ref===void 0||(pe[Ce]=W[Ce]);var Ce=arguments.length-2;if(Ce===1)pe.children=ee;else if(1<Ce){for(var Fe=Array(Ce),xe=0;xe<Ce;xe++)Fe[xe]=arguments[xe+2];pe.children=Fe}return O(V.type,be,pe)},gt.createContext=function(V){return V={$$typeof:r,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},gt.createElement=function(V,W,ee){var pe,be={},Ce=null;if(W!=null)for(pe in W.key!==void 0&&(Ce=""+W.key),W)P.call(W,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(be[pe]=W[pe]);var Fe=arguments.length-2;if(Fe===1)be.children=ee;else if(1<Fe){for(var xe=Array(Fe),De=0;De<Fe;De++)xe[De]=arguments[De+2];be.children=xe}if(V&&V.defaultProps)for(pe in Fe=V.defaultProps,Fe)be[pe]===void 0&&(be[pe]=Fe[pe]);return O(V,Ce,be)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(V){return{$$typeof:a,render:V}},gt.isValidElement=B,gt.lazy=function(V){return{$$typeof:d,_payload:{_status:-1,_result:V},_init:U}},gt.memo=function(V,W){return{$$typeof:c,type:V,compare:W===void 0?null:W}},gt.startTransition=function(V){var W=T.T,ee={};T.T=ee;try{var pe=V(),be=T.S;be!==null&&be(ee,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(N,de)}catch(Ce){de(Ce)}finally{W!==null&&ee.types!==null&&(W.types=ee.types),T.T=W}},gt.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},gt.use=function(V){return T.H.use(V)},gt.useActionState=function(V,W,ee){return T.H.useActionState(V,W,ee)},gt.useCallback=function(V,W){return T.H.useCallback(V,W)},gt.useContext=function(V){return T.H.useContext(V)},gt.useDebugValue=function(){},gt.useDeferredValue=function(V,W){return T.H.useDeferredValue(V,W)},gt.useEffect=function(V,W){return T.H.useEffect(V,W)},gt.useEffectEvent=function(V){return T.H.useEffectEvent(V)},gt.useId=function(){return T.H.useId()},gt.useImperativeHandle=function(V,W,ee){return T.H.useImperativeHandle(V,W,ee)},gt.useInsertionEffect=function(V,W){return T.H.useInsertionEffect(V,W)},gt.useLayoutEffect=function(V,W){return T.H.useLayoutEffect(V,W)},gt.useMemo=function(V,W){return T.H.useMemo(V,W)},gt.useOptimistic=function(V,W){return T.H.useOptimistic(V,W)},gt.useReducer=function(V,W,ee){return T.H.useReducer(V,W,ee)},gt.useRef=function(V){return T.H.useRef(V)},gt.useState=function(V){return T.H.useState(V)},gt.useSyncExternalStore=function(V,W,ee){return T.H.useSyncExternalStore(V,W,ee)},gt.useTransition=function(){return T.H.useTransition()},gt.version="19.2.0",gt}var AB;function Wk(){return AB||(AB=1,eE.exports=qq()),eE.exports}var R=Wk();const Y=NH(R),FH=$q({__proto__:null,default:Y},[R]);var tE={exports:{}},ty={},iE={exports:{}},nE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RB;function Zq(){return RB||(RB=1,(function(e){function t(H,K){var U=H.length;H.push(K);e:for(;0<U;){var de=U-1>>>1,te=H[de];if(0<s(te,K))H[de]=K,H[U]=te,U=de;else break e}}function i(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var K=H[0],U=H.pop();if(U!==K){H[0]=U;e:for(var de=0,te=H.length,V=te>>>1;de<V;){var W=2*(de+1)-1,ee=H[W],pe=W+1,be=H[pe];if(0>s(ee,U))pe<te&&0>s(be,ee)?(H[de]=be,H[pe]=U,de=pe):(H[de]=ee,H[W]=U,de=W);else if(pe<te&&0>s(be,U))H[de]=be,H[pe]=U,de=pe;else break e}}return K}function s(H,K){var U=H.sortIndex-K.sortIndex;return U!==0?U:H.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var r=Date,a=r.now();e.unstable_now=function(){return r.now()-a}}var l=[],c=[],d=1,p=null,g=3,m=!1,y=!1,b=!1,C=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function E(H){for(var K=i(c);K!==null;){if(K.callback===null)n(c);else if(K.startTime<=H)n(c),K.sortIndex=K.expirationTime,t(l,K);else break;K=i(c)}}function I(H){if(b=!1,E(H),!y)if(i(l)!==null)y=!0,N||(N=!0,z());else{var K=i(c);K!==null&&q(I,K.startTime-H)}}var N=!1,T=-1,P=5,O=-1;function G(){return C?!0:!(e.unstable_now()-O<P)}function B(){if(C=!1,N){var H=e.unstable_now();O=H;var K=!0;try{e:{y=!1,b&&(b=!1,x(T),T=-1),m=!0;var U=g;try{t:{for(E(H),p=i(l);p!==null&&!(p.expirationTime>H&&G());){var de=p.callback;if(typeof de=="function"){p.callback=null,g=p.priorityLevel;var te=de(p.expirationTime<=H);if(H=e.unstable_now(),typeof te=="function"){p.callback=te,E(H),K=!0;break t}p===i(l)&&n(l),E(H)}else n(l);p=i(l)}if(p!==null)K=!0;else{var V=i(c);V!==null&&q(I,V.startTime-H),K=!1}}break e}finally{p=null,g=U,m=!1}K=void 0}}finally{K?z():N=!1}}}var z;if(typeof M=="function")z=function(){M(B)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,X=j.port2;j.port1.onmessage=B,z=function(){X.postMessage(null)}}else z=function(){w(B,0)};function q(H,K){T=w(function(){H(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(H){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var U=g;g=K;try{return H()}finally{g=U}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var U=g;g=H;try{return K()}finally{g=U}},e.unstable_scheduleCallback=function(H,K,U){var de=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?de+U:de):U=de,H){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=U+te,H={id:d++,callback:K,priorityLevel:H,startTime:U,expirationTime:te,sortIndex:-1},U>de?(H.sortIndex=U,t(c,H),i(l)===null&&H===i(c)&&(b?(x(T),T=-1):b=!0,q(I,U-de))):(H.sortIndex=te,t(l,H),y||m||(y=!0,N||(N=!0,z()))),H},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(H){var K=g;return function(){var U=g;g=K;try{return H.apply(this,arguments)}finally{g=U}}}})(nE)),nE}var EB;function Xq(){return EB||(EB=1,iE.exports=Zq()),iE.exports}var sE={exports:{}},vs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TB;function Qq(){if(TB)return vs;TB=1;var e=Wk();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var n={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(l,c,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:l,containerInfo:c,implementation:d}}var r=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return vs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,vs.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return o(l,c,null,d)},vs.flushSync=function(l){var c=r.T,d=n.p;try{if(r.T=null,n.p=2,l)return l()}finally{r.T=c,n.p=d,n.d.f()}},vs.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},vs.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},vs.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,p=a(d,c.crossOrigin),g=typeof c.integrity=="string"?c.integrity:void 0,m=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:m}):d==="script"&&n.d.X(l,{crossOrigin:p,integrity:g,fetchPriority:m,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},vs.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=a(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},vs.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,p=a(d,c.crossOrigin);n.d.L(l,d,{crossOrigin:p,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},vs.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=a(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},vs.requestFormReset=function(l){n.d.r(l)},vs.unstable_batchedUpdates=function(l,c){return l(c)},vs.useFormState=function(l,c,d){return r.H.useFormState(l,c,d)},vs.useFormStatus=function(){return r.H.useHostTransitionStatus()},vs.version="19.2.0",vs}var IB;function OH(){if(IB)return sE.exports;IB=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),sE.exports=Qq(),sE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kB;function Jq(){if(kB)return ty;kB=1;var e=Xq(),t=Wk(),i=OH();function n(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function o(u){var h=u,f=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(f=h.return),u=h.return;while(u)}return h.tag===3?f:null}function r(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function a(u){if(u.tag===31){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function l(u){if(o(u)!==u)throw Error(n(188))}function c(u){var h=u.alternate;if(!h){if(h=o(u),h===null)throw Error(n(188));return h!==u?null:u}for(var f=u,v=h;;){var S=f.return;if(S===null)break;var D=S.alternate;if(D===null){if(v=S.return,v!==null){f=v;continue}break}if(S.child===D.child){for(D=S.child;D;){if(D===f)return l(S),u;if(D===v)return l(S),h;D=D.sibling}throw Error(n(188))}if(f.return!==v.return)f=S,v=D;else{for(var L=!1,_=S.child;_;){if(_===f){L=!0,f=S,v=D;break}if(_===v){L=!0,v=S,f=D;break}_=_.sibling}if(!L){for(_=D.child;_;){if(_===f){L=!0,f=D,v=S;break}if(_===v){L=!0,v=D,f=S;break}_=_.sibling}if(!L)throw Error(n(189))}}if(f.alternate!==v)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?u:h}function d(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=d(u),h!==null)return h;u=u.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),M=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function z(u){return u===null||typeof u!="object"?null:(u=B&&u[B]||u["@@iterator"],typeof u=="function"?u:null)}var j=Symbol.for("react.client.reference");function X(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===j?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case b:return"Fragment";case w:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList";case O:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case y:return"Portal";case M:return u.displayName||"Context";case x:return(u._context.displayName||"Context")+".Consumer";case E:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case T:return h=u.displayName||null,h!==null?h:X(u.type)||"Memo";case P:h=u._payload,u=u._init;try{return X(u(h))}catch{}}return null}var q=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},de=[],te=-1;function V(u){return{current:u}}function W(u){0>te||(u.current=de[te],de[te]=null,te--)}function ee(u,h){te++,de[te]=u.current,u.current=h}var pe=V(null),be=V(null),Ce=V(null),Fe=V(null);function xe(u,h){switch(ee(Ce,h),ee(be,u),ee(pe,null),h.nodeType){case 9:case 11:u=(u=h.documentElement)&&(u=u.namespaceURI)?$2(u):0;break;default:if(u=h.tagName,h=h.namespaceURI)h=$2(h),u=Y2(h,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}W(pe),ee(pe,u)}function De(){W(pe),W(be),W(Ce)}function Ee(u){u.memoizedState!==null&&ee(Fe,u);var h=pe.current,f=Y2(h,u.type);h!==f&&(ee(be,u),ee(pe,f))}function Je(u){be.current===u&&(W(pe),W(be)),Fe.current===u&&(W(Fe),Zm._currentValue=U)}var ze,ct;function Xe(u){if(ze===void 0)try{throw Error()}catch(f){var h=f.stack.trim().match(/\n( *(at )?)/);ze=h&&h[1]||"",ct=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ze+u+ct}var pt=!1;function Ge(u,h){if(!u||pt)return"";pt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(h){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(le){var re=le}Reflect.construct(u,[],ve)}else{try{ve.call()}catch(le){re=le}u.call(ve.prototype)}}else{try{throw Error()}catch(le){re=le}(ve=u())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(le){if(le&&re&&typeof le.stack=="string")return[le.stack,re.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=v.DetermineComponentFrameRoot(),L=D[0],_=D[1];if(L&&_){var $=L.split(`
`),se=_.split(`
`);for(S=v=0;v<$.length&&!$[v].includes("DetermineComponentFrameRoot");)v++;for(;S<se.length&&!se[S].includes("DetermineComponentFrameRoot");)S++;if(v===$.length||S===se.length)for(v=$.length-1,S=se.length-1;1<=v&&0<=S&&$[v]!==se[S];)S--;for(;1<=v&&0<=S;v--,S--)if($[v]!==se[S]){if(v!==1||S!==1)do if(v--,S--,0>S||$[v]!==se[S]){var ge=`
`+$[v].replace(" at new "," at ");return u.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",u.displayName)),ge}while(1<=v&&0<=S);break}}}finally{pt=!1,Error.prepareStackTrace=f}return(f=u?u.displayName||u.name:"")?Xe(f):""}function lt(u,h){switch(u.tag){case 26:case 27:case 5:return Xe(u.type);case 16:return Xe("Lazy");case 13:return u.child!==h&&h!==null?Xe("Suspense Fallback"):Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 15:return Ge(u.type,!1);case 11:return Ge(u.type.render,!1);case 1:return Ge(u.type,!0);case 31:return Xe("Activity");default:return""}}function kt(u){try{var h="",f=null;do h+=lt(u,f),f=u,u=u.return;while(u);return h}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var wt=Object.prototype.hasOwnProperty,Ve=e.unstable_scheduleCallback,ot=e.unstable_cancelCallback,Lt=e.unstable_shouldYield,li=e.unstable_requestPaint,dt=e.unstable_now,ci=e.unstable_getCurrentPriorityLevel,_s=e.unstable_ImmediatePriority,Zi=e.unstable_UserBlockingPriority,Ot=e.unstable_NormalPriority,wi=e.unstable_LowPriority,da=e.unstable_IdlePriority,ap=e.log,VD=e.unstable_setDisableYieldValue,lm=null,So=null;function Tc(u){if(typeof ap=="function"&&VD(u),So&&typeof So.setStrictMode=="function")try{So.setStrictMode(lm,u)}catch{}}var xo=Math.clz32?Math.clz32:L8,I8=Math.log,k8=Math.LN2;function L8(u){return u>>>=0,u===0?32:31-(I8(u)/k8|0)|0}var yC=256,vC=262144,bC=4194304;function nd(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function CC(u,h,f){var v=u.pendingLanes;if(v===0)return 0;var S=0,D=u.suspendedLanes,L=u.pingedLanes;u=u.warmLanes;var _=v&134217727;return _!==0?(v=_&~D,v!==0?S=nd(v):(L&=_,L!==0?S=nd(L):f||(f=_&~u,f!==0&&(S=nd(f))))):(_=v&~D,_!==0?S=nd(_):L!==0?S=nd(L):f||(f=v&~u,f!==0&&(S=nd(f)))),S===0?0:h!==0&&h!==S&&(h&D)===0&&(D=S&-S,f=h&-h,D>=f||D===32&&(f&4194048)!==0)?h:S}function cm(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function P8(u,h){switch(u){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RN(){var u=bC;return bC<<=1,(bC&62914560)===0&&(bC=4194304),u}function zD(u){for(var h=[],f=0;31>f;f++)h.push(u);return h}function um(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function N8(u,h,f,v,S,D){var L=u.pendingLanes;u.pendingLanes=f,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=f,u.entangledLanes&=f,u.errorRecoveryDisabledLanes&=f,u.shellSuspendCounter=0;var _=u.entanglements,$=u.expirationTimes,se=u.hiddenUpdates;for(f=L&~f;0<f;){var ge=31-xo(f),ve=1<<ge;_[ge]=0,$[ge]=-1;var re=se[ge];if(re!==null)for(se[ge]=null,ge=0;ge<re.length;ge++){var le=re[ge];le!==null&&(le.lane&=-536870913)}f&=~ve}v!==0&&EN(u,v,0),D!==0&&S===0&&u.tag!==0&&(u.suspendedLanes|=D&~(L&~h))}function EN(u,h,f){u.pendingLanes|=h,u.suspendedLanes&=~h;var v=31-xo(h);u.entangledLanes|=h,u.entanglements[v]=u.entanglements[v]|1073741824|f&261930}function TN(u,h){var f=u.entangledLanes|=h;for(u=u.entanglements;f;){var v=31-xo(f),S=1<<v;S&h|u[v]&h&&(u[v]|=h),f&=~S}}function IN(u,h){var f=h&-h;return f=(f&42)!==0?1:HD(f),(f&(u.suspendedLanes|h))!==0?0:f}function HD(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function jD(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function kN(){var u=K.p;return u!==0?u:(u=window.event,u===void 0?32:mB(u.type))}function LN(u,h){var f=K.p;try{return K.p=u,h()}finally{K.p=f}}var Ic=Math.random().toString(36).slice(2),qn="__reactFiber$"+Ic,Qs="__reactProps$"+Ic,lp="__reactContainer$"+Ic,WD="__reactEvents$"+Ic,F8="__reactListeners$"+Ic,O8="__reactHandles$"+Ic,PN="__reactResources$"+Ic,dm="__reactMarker$"+Ic;function UD(u){delete u[qn],delete u[Qs],delete u[WD],delete u[F8],delete u[O8]}function cp(u){var h=u[qn];if(h)return h;for(var f=u.parentNode;f;){if(h=f[lp]||f[qn]){if(f=h.alternate,h.child!==null||f!==null&&f.child!==null)for(u=eB(u);u!==null;){if(f=u[qn])return f;u=eB(u)}return h}u=f,f=u.parentNode}return null}function up(u){if(u=u[qn]||u[lp]){var h=u.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return u}return null}function hm(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u.stateNode;throw Error(n(33))}function dp(u){var h=u[PN];return h||(h=u[PN]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function jn(u){u[dm]=!0}var NN=new Set,FN={};function sd(u,h){hp(u,h),hp(u+"Capture",h)}function hp(u,h){for(FN[u]=h,u=0;u<h.length;u++)NN.add(h[u])}var B8=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ON={},BN={};function G8(u){return wt.call(BN,u)?!0:wt.call(ON,u)?!1:B8.test(u)?BN[u]=!0:(ON[u]=!0,!1)}function wC(u,h,f){if(G8(h))if(f===null)u.removeAttribute(h);else{switch(typeof f){case"undefined":case"function":case"symbol":u.removeAttribute(h);return;case"boolean":var v=h.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){u.removeAttribute(h);return}}u.setAttribute(h,""+f)}}function SC(u,h,f){if(f===null)u.removeAttribute(h);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(h);return}u.setAttribute(h,""+f)}}function cl(u,h,f,v){if(v===null)u.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttributeNS(h,f,""+v)}}function qo(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function GN(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function _8(u,h,f){var v=Object.getOwnPropertyDescriptor(u.constructor.prototype,h);if(!u.hasOwnProperty(h)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var S=v.get,D=v.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return S.call(this)},set:function(L){f=""+L,D.call(this,L)}}),Object.defineProperty(u,h,{enumerable:v.enumerable}),{getValue:function(){return f},setValue:function(L){f=""+L},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function $D(u){if(!u._valueTracker){var h=GN(u)?"checked":"value";u._valueTracker=_8(u,h,""+u[h])}}function _N(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var f=h.getValue(),v="";return u&&(v=GN(u)?u.checked?"true":"false":u.value),u=v,u!==f?(h.setValue(u),!0):!1}function xC(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var V8=/[\n"\\]/g;function Zo(u){return u.replace(V8,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function YD(u,h,f,v,S,D,L,_){u.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?u.type=L:u.removeAttribute("type"),h!=null?L==="number"?(h===0&&u.value===""||u.value!=h)&&(u.value=""+qo(h)):u.value!==""+qo(h)&&(u.value=""+qo(h)):L!=="submit"&&L!=="reset"||u.removeAttribute("value"),h!=null?KD(u,L,qo(h)):f!=null?KD(u,L,qo(f)):v!=null&&u.removeAttribute("value"),S==null&&D!=null&&(u.defaultChecked=!!D),S!=null&&(u.checked=S&&typeof S!="function"&&typeof S!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?u.name=""+qo(_):u.removeAttribute("name")}function VN(u,h,f,v,S,D,L,_){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(u.type=D),h!=null||f!=null){if(!(D!=="submit"&&D!=="reset"||h!=null)){$D(u);return}f=f!=null?""+qo(f):"",h=h!=null?""+qo(h):f,_||h===u.value||(u.value=h),u.defaultValue=h}v=v??S,v=typeof v!="function"&&typeof v!="symbol"&&!!v,u.checked=_?u.checked:!!v,u.defaultChecked=!!v,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(u.name=L),$D(u)}function KD(u,h,f){h==="number"&&xC(u.ownerDocument)===u||u.defaultValue===""+f||(u.defaultValue=""+f)}function pp(u,h,f,v){if(u=u.options,h){h={};for(var S=0;S<f.length;S++)h["$"+f[S]]=!0;for(f=0;f<u.length;f++)S=h.hasOwnProperty("$"+u[f].value),u[f].selected!==S&&(u[f].selected=S),S&&v&&(u[f].defaultSelected=!0)}else{for(f=""+qo(f),h=null,S=0;S<u.length;S++){if(u[S].value===f){u[S].selected=!0,v&&(u[S].defaultSelected=!0);return}h!==null||u[S].disabled||(h=u[S])}h!==null&&(h.selected=!0)}}function zN(u,h,f){if(h!=null&&(h=""+qo(h),h!==u.value&&(u.value=h),f==null)){u.defaultValue!==h&&(u.defaultValue=h);return}u.defaultValue=f!=null?""+qo(f):""}function HN(u,h,f,v){if(h==null){if(v!=null){if(f!=null)throw Error(n(92));if(q(v)){if(1<v.length)throw Error(n(93));v=v[0]}f=v}f==null&&(f=""),h=f}f=qo(h),u.defaultValue=f,v=u.textContent,v===f&&v!==""&&v!==null&&(u.value=v),$D(u)}function gp(u,h){if(h){var f=u.firstChild;if(f&&f===u.lastChild&&f.nodeType===3){f.nodeValue=h;return}}u.textContent=h}var z8=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jN(u,h,f){var v=h.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?v?u.setProperty(h,""):h==="float"?u.cssFloat="":u[h]="":v?u.setProperty(h,f):typeof f!="number"||f===0||z8.has(h)?h==="float"?u.cssFloat=f:u[h]=(""+f).trim():u[h]=f+"px"}function WN(u,h,f){if(h!=null&&typeof h!="object")throw Error(n(62));if(u=u.style,f!=null){for(var v in f)!f.hasOwnProperty(v)||h!=null&&h.hasOwnProperty(v)||(v.indexOf("--")===0?u.setProperty(v,""):v==="float"?u.cssFloat="":u[v]="");for(var S in h)v=h[S],h.hasOwnProperty(S)&&f[S]!==v&&jN(u,S,v)}else for(var D in h)h.hasOwnProperty(D)&&jN(u,D,h[D])}function qD(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var H8=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),j8=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function MC(u){return j8.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function ul(){}var ZD=null;function XD(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var fp=null,mp=null;function UN(u){var h=up(u);if(h&&(u=h.stateNode)){var f=u[Qs]||null;e:switch(u=h.stateNode,h.type){case"input":if(YD(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),h=f.name,f.type==="radio"&&h!=null){for(f=u;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Zo(""+h)+'"][type="radio"]'),h=0;h<f.length;h++){var v=f[h];if(v!==u&&v.form===u.form){var S=v[Qs]||null;if(!S)throw Error(n(90));YD(v,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(h=0;h<f.length;h++)v=f[h],v.form===u.form&&_N(v)}break e;case"textarea":zN(u,f.value,f.defaultValue);break e;case"select":h=f.value,h!=null&&pp(u,!!f.multiple,h,!1)}}}var QD=!1;function $N(u,h,f){if(QD)return u(h,f);QD=!0;try{var v=u(h);return v}finally{if(QD=!1,(fp!==null||mp!==null)&&(dw(),fp&&(h=fp,u=mp,mp=fp=null,UN(h),u)))for(h=0;h<u.length;h++)UN(u[h])}}function pm(u,h){var f=u.stateNode;if(f===null)return null;var v=f[Qs]||null;if(v===null)return null;f=v[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(u=u.type,v=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!v;break e;default:u=!1}if(u)return null;if(f&&typeof f!="function")throw Error(n(231,h,typeof f));return f}var dl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),JD=!1;if(dl)try{var gm={};Object.defineProperty(gm,"passive",{get:function(){JD=!0}}),window.addEventListener("test",gm,gm),window.removeEventListener("test",gm,gm)}catch{JD=!1}var kc=null,eA=null,DC=null;function YN(){if(DC)return DC;var u,h=eA,f=h.length,v,S="value"in kc?kc.value:kc.textContent,D=S.length;for(u=0;u<f&&h[u]===S[u];u++);var L=f-u;for(v=1;v<=L&&h[f-v]===S[D-v];v++);return DC=S.slice(u,1<v?1-v:void 0)}function AC(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function RC(){return!0}function KN(){return!1}function Js(u){function h(f,v,S,D,L){this._reactName=f,this._targetInst=S,this.type=v,this.nativeEvent=D,this.target=L,this.currentTarget=null;for(var _ in u)u.hasOwnProperty(_)&&(f=u[_],this[_]=f?f(D):D[_]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?RC:KN,this.isPropagationStopped=KN,this}return p(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=RC)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=RC)},persist:function(){},isPersistent:RC}),h}var od={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},EC=Js(od),fm=p({},od,{view:0,detail:0}),W8=Js(fm),tA,iA,mm,TC=p({},fm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sA,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==mm&&(mm&&u.type==="mousemove"?(tA=u.screenX-mm.screenX,iA=u.screenY-mm.screenY):iA=tA=0,mm=u),tA)},movementY:function(u){return"movementY"in u?u.movementY:iA}}),qN=Js(TC),U8=p({},TC,{dataTransfer:0}),$8=Js(U8),Y8=p({},fm,{relatedTarget:0}),nA=Js(Y8),K8=p({},od,{animationName:0,elapsedTime:0,pseudoElement:0}),q8=Js(K8),Z8=p({},od,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),X8=Js(Z8),Q8=p({},od,{data:0}),ZN=Js(Q8),J8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i9(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=t9[u])?!!h[u]:!1}function sA(){return i9}var n9=p({},fm,{key:function(u){if(u.key){var h=J8[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=AC(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?e9[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sA,charCode:function(u){return u.type==="keypress"?AC(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?AC(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),s9=Js(n9),o9=p({},TC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),XN=Js(o9),r9=p({},fm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sA}),a9=Js(r9),l9=p({},od,{propertyName:0,elapsedTime:0,pseudoElement:0}),c9=Js(l9),u9=p({},TC,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),d9=Js(u9),h9=p({},od,{newState:0,oldState:0}),p9=Js(h9),g9=[9,13,27,32],oA=dl&&"CompositionEvent"in window,ym=null;dl&&"documentMode"in document&&(ym=document.documentMode);var f9=dl&&"TextEvent"in window&&!ym,QN=dl&&(!oA||ym&&8<ym&&11>=ym),JN=" ",eF=!1;function tF(u,h){switch(u){case"keyup":return g9.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iF(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var yp=!1;function m9(u,h){switch(u){case"compositionend":return iF(h);case"keypress":return h.which!==32?null:(eF=!0,JN);case"textInput":return u=h.data,u===JN&&eF?null:u;default:return null}}function y9(u,h){if(yp)return u==="compositionend"||!oA&&tF(u,h)?(u=YN(),DC=eA=kc=null,yp=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return QN&&h.locale!=="ko"?null:h.data;default:return null}}var v9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nF(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!v9[u.type]:h==="textarea"}function sF(u,h,f,v){fp?mp?mp.push(v):mp=[v]:fp=v,h=vw(h,"onChange"),0<h.length&&(f=new EC("onChange","change",null,f,v),u.push({event:f,listeners:h}))}var vm=null,bm=null;function b9(u){V2(u,0)}function IC(u){var h=hm(u);if(_N(h))return u}function oF(u,h){if(u==="change")return h}var rF=!1;if(dl){var rA;if(dl){var aA="oninput"in document;if(!aA){var aF=document.createElement("div");aF.setAttribute("oninput","return;"),aA=typeof aF.oninput=="function"}rA=aA}else rA=!1;rF=rA&&(!document.documentMode||9<document.documentMode)}function lF(){vm&&(vm.detachEvent("onpropertychange",cF),bm=vm=null)}function cF(u){if(u.propertyName==="value"&&IC(bm)){var h=[];sF(h,bm,u,XD(u)),$N(b9,h)}}function C9(u,h,f){u==="focusin"?(lF(),vm=h,bm=f,vm.attachEvent("onpropertychange",cF)):u==="focusout"&&lF()}function w9(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return IC(bm)}function S9(u,h){if(u==="click")return IC(h)}function x9(u,h){if(u==="input"||u==="change")return IC(h)}function M9(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var Mo=typeof Object.is=="function"?Object.is:M9;function Cm(u,h){if(Mo(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var f=Object.keys(u),v=Object.keys(h);if(f.length!==v.length)return!1;for(v=0;v<f.length;v++){var S=f[v];if(!wt.call(h,S)||!Mo(u[S],h[S]))return!1}return!0}function uF(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function dF(u,h){var f=uF(u);u=0;for(var v;f;){if(f.nodeType===3){if(v=u+f.textContent.length,u<=h&&v>=h)return{node:f,offset:h-u};u=v}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=uF(f)}}function hF(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?hF(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function pF(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var h=xC(u.document);h instanceof u.HTMLIFrameElement;){try{var f=typeof h.contentWindow.location.href=="string"}catch{f=!1}if(f)u=h.contentWindow;else break;h=xC(u.document)}return h}function lA(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}var D9=dl&&"documentMode"in document&&11>=document.documentMode,vp=null,cA=null,wm=null,uA=!1;function gF(u,h,f){var v=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;uA||vp==null||vp!==xC(v)||(v=vp,"selectionStart"in v&&lA(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),wm&&Cm(wm,v)||(wm=v,v=vw(cA,"onSelect"),0<v.length&&(h=new EC("onSelect","select",null,h,f),u.push({event:h,listeners:v}),h.target=vp)))}function rd(u,h){var f={};return f[u.toLowerCase()]=h.toLowerCase(),f["Webkit"+u]="webkit"+h,f["Moz"+u]="moz"+h,f}var bp={animationend:rd("Animation","AnimationEnd"),animationiteration:rd("Animation","AnimationIteration"),animationstart:rd("Animation","AnimationStart"),transitionrun:rd("Transition","TransitionRun"),transitionstart:rd("Transition","TransitionStart"),transitioncancel:rd("Transition","TransitionCancel"),transitionend:rd("Transition","TransitionEnd")},dA={},fF={};dl&&(fF=document.createElement("div").style,"AnimationEvent"in window||(delete bp.animationend.animation,delete bp.animationiteration.animation,delete bp.animationstart.animation),"TransitionEvent"in window||delete bp.transitionend.transition);function ad(u){if(dA[u])return dA[u];if(!bp[u])return u;var h=bp[u],f;for(f in h)if(h.hasOwnProperty(f)&&f in fF)return dA[u]=h[f];return u}var mF=ad("animationend"),yF=ad("animationiteration"),vF=ad("animationstart"),A9=ad("transitionrun"),R9=ad("transitionstart"),E9=ad("transitioncancel"),bF=ad("transitionend"),CF=new Map,hA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hA.push("scrollEnd");function Nr(u,h){CF.set(u,h),sd(h,[u])}var kC=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Xo=[],Cp=0,pA=0;function LC(){for(var u=Cp,h=pA=Cp=0;h<u;){var f=Xo[h];Xo[h++]=null;var v=Xo[h];Xo[h++]=null;var S=Xo[h];Xo[h++]=null;var D=Xo[h];if(Xo[h++]=null,v!==null&&S!==null){var L=v.pending;L===null?S.next=S:(S.next=L.next,L.next=S),v.pending=S}D!==0&&wF(f,S,D)}}function PC(u,h,f,v){Xo[Cp++]=u,Xo[Cp++]=h,Xo[Cp++]=f,Xo[Cp++]=v,pA|=v,u.lanes|=v,u=u.alternate,u!==null&&(u.lanes|=v)}function gA(u,h,f,v){return PC(u,h,f,v),NC(u)}function ld(u,h){return PC(u,null,null,h),NC(u)}function wF(u,h,f){u.lanes|=f;var v=u.alternate;v!==null&&(v.lanes|=f);for(var S=!1,D=u.return;D!==null;)D.childLanes|=f,v=D.alternate,v!==null&&(v.childLanes|=f),D.tag===22&&(u=D.stateNode,u===null||u._visibility&1||(S=!0)),u=D,D=D.return;return u.tag===3?(D=u.stateNode,S&&h!==null&&(S=31-xo(f),u=D.hiddenUpdates,v=u[S],v===null?u[S]=[h]:v.push(h),h.lane=f|536870912),D):null}function NC(u){if(50<jm)throw jm=0,xR=null,Error(n(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}var wp={};function T9(u,h,f,v){this.tag=u,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Do(u,h,f,v){return new T9(u,h,f,v)}function fA(u){return u=u.prototype,!(!u||!u.isReactComponent)}function hl(u,h){var f=u.alternate;return f===null?(f=Do(u.tag,h,u.key,u.mode),f.elementType=u.elementType,f.type=u.type,f.stateNode=u.stateNode,f.alternate=u,u.alternate=f):(f.pendingProps=h,f.type=u.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=u.flags&65011712,f.childLanes=u.childLanes,f.lanes=u.lanes,f.child=u.child,f.memoizedProps=u.memoizedProps,f.memoizedState=u.memoizedState,f.updateQueue=u.updateQueue,h=u.dependencies,f.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},f.sibling=u.sibling,f.index=u.index,f.ref=u.ref,f.refCleanup=u.refCleanup,f}function SF(u,h){u.flags&=65011714;var f=u.alternate;return f===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=f.childLanes,u.lanes=f.lanes,u.child=f.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=f.memoizedProps,u.memoizedState=f.memoizedState,u.updateQueue=f.updateQueue,u.type=f.type,h=f.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function FC(u,h,f,v,S,D){var L=0;if(v=u,typeof u=="function")fA(u)&&(L=1);else if(typeof u=="string")L=Nq(u,f,pe.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case O:return u=Do(31,f,h,S),u.elementType=O,u.lanes=D,u;case b:return cd(f.children,S,D,h);case C:L=8,S|=24;break;case w:return u=Do(12,f,h,S|2),u.elementType=w,u.lanes=D,u;case I:return u=Do(13,f,h,S),u.elementType=I,u.lanes=D,u;case N:return u=Do(19,f,h,S),u.elementType=N,u.lanes=D,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case M:L=10;break e;case x:L=9;break e;case E:L=11;break e;case T:L=14;break e;case P:L=16,v=null;break e}L=29,f=Error(n(130,u===null?"null":typeof u,"")),v=null}return h=Do(L,f,h,S),h.elementType=u,h.type=v,h.lanes=D,h}function cd(u,h,f,v){return u=Do(7,u,v,h),u.lanes=f,u}function mA(u,h,f){return u=Do(6,u,null,h),u.lanes=f,u}function xF(u){var h=Do(18,null,null,0);return h.stateNode=u,h}function yA(u,h,f){return h=Do(4,u.children!==null?u.children:[],u.key,h),h.lanes=f,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}var MF=new WeakMap;function Qo(u,h){if(typeof u=="object"&&u!==null){var f=MF.get(u);return f!==void 0?f:(h={value:u,source:h,stack:kt(h)},MF.set(u,h),h)}return{value:u,source:h,stack:kt(h)}}var Sp=[],xp=0,OC=null,Sm=0,Jo=[],er=0,Lc=null,ha=1,pa="";function pl(u,h){Sp[xp++]=Sm,Sp[xp++]=OC,OC=u,Sm=h}function DF(u,h,f){Jo[er++]=ha,Jo[er++]=pa,Jo[er++]=Lc,Lc=u;var v=ha;u=pa;var S=32-xo(v)-1;v&=~(1<<S),f+=1;var D=32-xo(h)+S;if(30<D){var L=S-S%5;D=(v&(1<<L)-1).toString(32),v>>=L,S-=L,ha=1<<32-xo(h)+S|f<<S|v,pa=D+u}else ha=1<<D|f<<S|v,pa=u}function vA(u){u.return!==null&&(pl(u,1),DF(u,1,0))}function bA(u){for(;u===OC;)OC=Sp[--xp],Sp[xp]=null,Sm=Sp[--xp],Sp[xp]=null;for(;u===Lc;)Lc=Jo[--er],Jo[er]=null,pa=Jo[--er],Jo[er]=null,ha=Jo[--er],Jo[er]=null}function AF(u,h){Jo[er++]=ha,Jo[er++]=pa,Jo[er++]=Lc,ha=h.id,pa=h.overflow,Lc=u}var Zn=null,Si=null,Pt=!1,Pc=null,tr=!1,CA=Error(n(519));function Nc(u){var h=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xm(Qo(h,u)),CA}function RF(u){var h=u.stateNode,f=u.type,v=u.memoizedProps;switch(h[qn]=u,h[Qs]=v,f){case"dialog":xt("cancel",h),xt("close",h);break;case"iframe":case"object":case"embed":xt("load",h);break;case"video":case"audio":for(f=0;f<Um.length;f++)xt(Um[f],h);break;case"source":xt("error",h);break;case"img":case"image":case"link":xt("error",h),xt("load",h);break;case"details":xt("toggle",h);break;case"input":xt("invalid",h),VN(h,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":xt("invalid",h);break;case"textarea":xt("invalid",h),HN(h,v.value,v.defaultValue,v.children)}f=v.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||h.textContent===""+f||v.suppressHydrationWarning===!0||W2(h.textContent,f)?(v.popover!=null&&(xt("beforetoggle",h),xt("toggle",h)),v.onScroll!=null&&xt("scroll",h),v.onScrollEnd!=null&&xt("scrollend",h),v.onClick!=null&&(h.onclick=ul),h=!0):h=!1,h||Nc(u,!0)}function EF(u){for(Zn=u.return;Zn;)switch(Zn.tag){case 5:case 31:case 13:tr=!1;return;case 27:case 3:tr=!0;return;default:Zn=Zn.return}}function Mp(u){if(u!==Zn)return!1;if(!Pt)return EF(u),Pt=!0,!1;var h=u.tag,f;if((f=h!==3&&h!==27)&&((f=h===5)&&(f=u.type,f=!(f!=="form"&&f!=="button")||GR(u.type,u.memoizedProps)),f=!f),f&&Si&&Nc(u),EF(u),h===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));Si=J2(u)}else if(h===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));Si=J2(u)}else h===27?(h=Si,Kc(u.type)?(u=jR,jR=null,Si=u):Si=h):Si=Zn?nr(u.stateNode.nextSibling):null;return!0}function ud(){Si=Zn=null,Pt=!1}function wA(){var u=Pc;return u!==null&&(no===null?no=u:no.push.apply(no,u),Pc=null),u}function xm(u){Pc===null?Pc=[u]:Pc.push(u)}var SA=V(null),dd=null,gl=null;function Fc(u,h,f){ee(SA,h._currentValue),h._currentValue=f}function fl(u){u._currentValue=SA.current,W(SA)}function xA(u,h,f){for(;u!==null;){var v=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,v!==null&&(v.childLanes|=h)):v!==null&&(v.childLanes&h)!==h&&(v.childLanes|=h),u===f)break;u=u.return}}function MA(u,h,f,v){var S=u.child;for(S!==null&&(S.return=u);S!==null;){var D=S.dependencies;if(D!==null){var L=S.child;D=D.firstContext;e:for(;D!==null;){var _=D;D=S;for(var $=0;$<h.length;$++)if(_.context===h[$]){D.lanes|=f,_=D.alternate,_!==null&&(_.lanes|=f),xA(D.return,f,u),v||(L=null);break e}D=_.next}}else if(S.tag===18){if(L=S.return,L===null)throw Error(n(341));L.lanes|=f,D=L.alternate,D!==null&&(D.lanes|=f),xA(L,f,u),L=null}else L=S.child;if(L!==null)L.return=S;else for(L=S;L!==null;){if(L===u){L=null;break}if(S=L.sibling,S!==null){S.return=L.return,L=S;break}L=L.return}S=L}}function Dp(u,h,f,v){u=null;for(var S=h,D=!1;S!==null;){if(!D){if((S.flags&524288)!==0)D=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var L=S.alternate;if(L===null)throw Error(n(387));if(L=L.memoizedProps,L!==null){var _=S.type;Mo(S.pendingProps.value,L.value)||(u!==null?u.push(_):u=[_])}}else if(S===Fe.current){if(L=S.alternate,L===null)throw Error(n(387));L.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(u!==null?u.push(Zm):u=[Zm])}S=S.return}u!==null&&MA(h,u,f,v),h.flags|=262144}function BC(u){for(u=u.firstContext;u!==null;){if(!Mo(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function hd(u){dd=u,gl=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Xn(u){return TF(dd,u)}function GC(u,h){return dd===null&&hd(u),TF(u,h)}function TF(u,h){var f=h._currentValue;if(h={context:h,memoizedValue:f,next:null},gl===null){if(u===null)throw Error(n(308));gl=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else gl=gl.next=h;return f}var I9=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(f,v){u.push(v)}};this.abort=function(){h.aborted=!0,u.forEach(function(f){return f()})}},k9=e.unstable_scheduleCallback,L9=e.unstable_NormalPriority,bn={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function DA(){return{controller:new I9,data:new Map,refCount:0}}function Mm(u){u.refCount--,u.refCount===0&&k9(L9,function(){u.controller.abort()})}var Dm=null,AA=0,Ap=0,Rp=null;function P9(u,h){if(Dm===null){var f=Dm=[];AA=0,Ap=TR(),Rp={status:"pending",value:void 0,then:function(v){f.push(v)}}}return AA++,h.then(IF,IF),h}function IF(){if(--AA===0&&Dm!==null){Rp!==null&&(Rp.status="fulfilled");var u=Dm;Dm=null,Ap=0,Rp=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function N9(u,h){var f=[],v={status:"pending",value:null,reason:null,then:function(S){f.push(S)}};return u.then(function(){v.status="fulfilled",v.value=h;for(var S=0;S<f.length;S++)(0,f[S])(h)},function(S){for(v.status="rejected",v.reason=S,S=0;S<f.length;S++)(0,f[S])(void 0)}),v}var kF=H.S;H.S=function(u,h){g2=dt(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&P9(u,h),kF!==null&&kF(u,h)};var pd=V(null);function RA(){var u=pd.current;return u!==null?u:mi.pooledCache}function _C(u,h){h===null?ee(pd,pd.current):ee(pd,h.pool)}function LF(){var u=RA();return u===null?null:{parent:bn._currentValue,pool:u}}var Ep=Error(n(460)),EA=Error(n(474)),VC=Error(n(542)),zC={then:function(){}};function PF(u){return u=u.status,u==="fulfilled"||u==="rejected"}function NF(u,h,f){switch(f=u[f],f===void 0?u.push(h):f!==h&&(h.then(ul,ul),h=f),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,OF(u),u;default:if(typeof h.status=="string")h.then(ul,ul);else{if(u=mi,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=h,u.status="pending",u.then(function(v){if(h.status==="pending"){var S=h;S.status="fulfilled",S.value=v}},function(v){if(h.status==="pending"){var S=h;S.status="rejected",S.reason=v}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,OF(u),u}throw fd=h,Ep}}function gd(u){try{var h=u._init;return h(u._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(fd=f,Ep):f}}var fd=null;function FF(){if(fd===null)throw Error(n(459));var u=fd;return fd=null,u}function OF(u){if(u===Ep||u===VC)throw Error(n(483))}var Tp=null,Am=0;function HC(u){var h=Am;return Am+=1,Tp===null&&(Tp=[]),NF(Tp,u,h)}function Rm(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function jC(u,h){throw h.$$typeof===g?Error(n(525)):(u=Object.prototype.toString.call(h),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function BF(u){function h(ie,Q){if(u){var ne=ie.deletions;ne===null?(ie.deletions=[Q],ie.flags|=16):ne.push(Q)}}function f(ie,Q){if(!u)return null;for(;Q!==null;)h(ie,Q),Q=Q.sibling;return null}function v(ie){for(var Q=new Map;ie!==null;)ie.key!==null?Q.set(ie.key,ie):Q.set(ie.index,ie),ie=ie.sibling;return Q}function S(ie,Q){return ie=hl(ie,Q),ie.index=0,ie.sibling=null,ie}function D(ie,Q,ne){return ie.index=ne,u?(ne=ie.alternate,ne!==null?(ne=ne.index,ne<Q?(ie.flags|=67108866,Q):ne):(ie.flags|=67108866,Q)):(ie.flags|=1048576,Q)}function L(ie){return u&&ie.alternate===null&&(ie.flags|=67108866),ie}function _(ie,Q,ne,me){return Q===null||Q.tag!==6?(Q=mA(ne,ie.mode,me),Q.return=ie,Q):(Q=S(Q,ne),Q.return=ie,Q)}function $(ie,Q,ne,me){var Ke=ne.type;return Ke===b?ge(ie,Q,ne.props.children,me,ne.key):Q!==null&&(Q.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===P&&gd(Ke)===Q.type)?(Q=S(Q,ne.props),Rm(Q,ne),Q.return=ie,Q):(Q=FC(ne.type,ne.key,ne.props,null,ie.mode,me),Rm(Q,ne),Q.return=ie,Q)}function se(ie,Q,ne,me){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ne.containerInfo||Q.stateNode.implementation!==ne.implementation?(Q=yA(ne,ie.mode,me),Q.return=ie,Q):(Q=S(Q,ne.children||[]),Q.return=ie,Q)}function ge(ie,Q,ne,me,Ke){return Q===null||Q.tag!==7?(Q=cd(ne,ie.mode,me,Ke),Q.return=ie,Q):(Q=S(Q,ne),Q.return=ie,Q)}function ve(ie,Q,ne){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=mA(""+Q,ie.mode,ne),Q.return=ie,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:return ne=FC(Q.type,Q.key,Q.props,null,ie.mode,ne),Rm(ne,Q),ne.return=ie,ne;case y:return Q=yA(Q,ie.mode,ne),Q.return=ie,Q;case P:return Q=gd(Q),ve(ie,Q,ne)}if(q(Q)||z(Q))return Q=cd(Q,ie.mode,ne,null),Q.return=ie,Q;if(typeof Q.then=="function")return ve(ie,HC(Q),ne);if(Q.$$typeof===M)return ve(ie,GC(ie,Q),ne);jC(ie,Q)}return null}function re(ie,Q,ne,me){var Ke=Q!==null?Q.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ke!==null?null:_(ie,Q,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case m:return ne.key===Ke?$(ie,Q,ne,me):null;case y:return ne.key===Ke?se(ie,Q,ne,me):null;case P:return ne=gd(ne),re(ie,Q,ne,me)}if(q(ne)||z(ne))return Ke!==null?null:ge(ie,Q,ne,me,null);if(typeof ne.then=="function")return re(ie,Q,HC(ne),me);if(ne.$$typeof===M)return re(ie,Q,GC(ie,ne),me);jC(ie,ne)}return null}function le(ie,Q,ne,me,Ke){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return ie=ie.get(ne)||null,_(Q,ie,""+me,Ke);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case m:return ie=ie.get(me.key===null?ne:me.key)||null,$(Q,ie,me,Ke);case y:return ie=ie.get(me.key===null?ne:me.key)||null,se(Q,ie,me,Ke);case P:return me=gd(me),le(ie,Q,ne,me,Ke)}if(q(me)||z(me))return ie=ie.get(ne)||null,ge(Q,ie,me,Ke,null);if(typeof me.then=="function")return le(ie,Q,ne,HC(me),Ke);if(me.$$typeof===M)return le(ie,Q,ne,GC(Q,me),Ke);jC(Q,me)}return null}function _e(ie,Q,ne,me){for(var Ke=null,zt=null,He=Q,vt=Q=0,At=null;He!==null&&vt<ne.length;vt++){He.index>vt?(At=He,He=null):At=He.sibling;var Ht=re(ie,He,ne[vt],me);if(Ht===null){He===null&&(He=At);break}u&&He&&Ht.alternate===null&&h(ie,He),Q=D(Ht,Q,vt),zt===null?Ke=Ht:zt.sibling=Ht,zt=Ht,He=At}if(vt===ne.length)return f(ie,He),Pt&&pl(ie,vt),Ke;if(He===null){for(;vt<ne.length;vt++)He=ve(ie,ne[vt],me),He!==null&&(Q=D(He,Q,vt),zt===null?Ke=He:zt.sibling=He,zt=He);return Pt&&pl(ie,vt),Ke}for(He=v(He);vt<ne.length;vt++)At=le(He,ie,vt,ne[vt],me),At!==null&&(u&&At.alternate!==null&&He.delete(At.key===null?vt:At.key),Q=D(At,Q,vt),zt===null?Ke=At:zt.sibling=At,zt=At);return u&&He.forEach(function(Jc){return h(ie,Jc)}),Pt&&pl(ie,vt),Ke}function et(ie,Q,ne,me){if(ne==null)throw Error(n(151));for(var Ke=null,zt=null,He=Q,vt=Q=0,At=null,Ht=ne.next();He!==null&&!Ht.done;vt++,Ht=ne.next()){He.index>vt?(At=He,He=null):At=He.sibling;var Jc=re(ie,He,Ht.value,me);if(Jc===null){He===null&&(He=At);break}u&&He&&Jc.alternate===null&&h(ie,He),Q=D(Jc,Q,vt),zt===null?Ke=Jc:zt.sibling=Jc,zt=Jc,He=At}if(Ht.done)return f(ie,He),Pt&&pl(ie,vt),Ke;if(He===null){for(;!Ht.done;vt++,Ht=ne.next())Ht=ve(ie,Ht.value,me),Ht!==null&&(Q=D(Ht,Q,vt),zt===null?Ke=Ht:zt.sibling=Ht,zt=Ht);return Pt&&pl(ie,vt),Ke}for(He=v(He);!Ht.done;vt++,Ht=ne.next())Ht=le(He,ie,vt,Ht.value,me),Ht!==null&&(u&&Ht.alternate!==null&&He.delete(Ht.key===null?vt:Ht.key),Q=D(Ht,Q,vt),zt===null?Ke=Ht:zt.sibling=Ht,zt=Ht);return u&&He.forEach(function(Uq){return h(ie,Uq)}),Pt&&pl(ie,vt),Ke}function hi(ie,Q,ne,me){if(typeof ne=="object"&&ne!==null&&ne.type===b&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case m:e:{for(var Ke=ne.key;Q!==null;){if(Q.key===Ke){if(Ke=ne.type,Ke===b){if(Q.tag===7){f(ie,Q.sibling),me=S(Q,ne.props.children),me.return=ie,ie=me;break e}}else if(Q.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===P&&gd(Ke)===Q.type){f(ie,Q.sibling),me=S(Q,ne.props),Rm(me,ne),me.return=ie,ie=me;break e}f(ie,Q);break}else h(ie,Q);Q=Q.sibling}ne.type===b?(me=cd(ne.props.children,ie.mode,me,ne.key),me.return=ie,ie=me):(me=FC(ne.type,ne.key,ne.props,null,ie.mode,me),Rm(me,ne),me.return=ie,ie=me)}return L(ie);case y:e:{for(Ke=ne.key;Q!==null;){if(Q.key===Ke)if(Q.tag===4&&Q.stateNode.containerInfo===ne.containerInfo&&Q.stateNode.implementation===ne.implementation){f(ie,Q.sibling),me=S(Q,ne.children||[]),me.return=ie,ie=me;break e}else{f(ie,Q);break}else h(ie,Q);Q=Q.sibling}me=yA(ne,ie.mode,me),me.return=ie,ie=me}return L(ie);case P:return ne=gd(ne),hi(ie,Q,ne,me)}if(q(ne))return _e(ie,Q,ne,me);if(z(ne)){if(Ke=z(ne),typeof Ke!="function")throw Error(n(150));return ne=Ke.call(ne),et(ie,Q,ne,me)}if(typeof ne.then=="function")return hi(ie,Q,HC(ne),me);if(ne.$$typeof===M)return hi(ie,Q,GC(ie,ne),me);jC(ie,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,Q!==null&&Q.tag===6?(f(ie,Q.sibling),me=S(Q,ne),me.return=ie,ie=me):(f(ie,Q),me=mA(ne,ie.mode,me),me.return=ie,ie=me),L(ie)):f(ie,Q)}return function(ie,Q,ne,me){try{Am=0;var Ke=hi(ie,Q,ne,me);return Tp=null,Ke}catch(He){if(He===Ep||He===VC)throw He;var zt=Do(29,He,null,ie.mode);return zt.lanes=me,zt.return=ie,zt}finally{}}}var md=BF(!0),GF=BF(!1),Oc=!1;function TA(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function IA(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Bc(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Gc(u,h,f){var v=u.updateQueue;if(v===null)return null;if(v=v.shared,(Wt&2)!==0){var S=v.pending;return S===null?h.next=h:(h.next=S.next,S.next=h),v.pending=h,h=NC(u),wF(u,null,f),h}return PC(u,v,h,f),NC(u)}function Em(u,h,f){if(h=h.updateQueue,h!==null&&(h=h.shared,(f&4194048)!==0)){var v=h.lanes;v&=u.pendingLanes,f|=v,h.lanes=f,TN(u,f)}}function kA(u,h){var f=u.updateQueue,v=u.alternate;if(v!==null&&(v=v.updateQueue,f===v)){var S=null,D=null;if(f=f.firstBaseUpdate,f!==null){do{var L={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};D===null?S=D=L:D=D.next=L,f=f.next}while(f!==null);D===null?S=D=h:D=D.next=h}else S=D=h;f={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:D,shared:v.shared,callbacks:v.callbacks},u.updateQueue=f;return}u=f.lastBaseUpdate,u===null?f.firstBaseUpdate=h:u.next=h,f.lastBaseUpdate=h}var LA=!1;function Tm(){if(LA){var u=Rp;if(u!==null)throw u}}function Im(u,h,f,v){LA=!1;var S=u.updateQueue;Oc=!1;var D=S.firstBaseUpdate,L=S.lastBaseUpdate,_=S.shared.pending;if(_!==null){S.shared.pending=null;var $=_,se=$.next;$.next=null,L===null?D=se:L.next=se,L=$;var ge=u.alternate;ge!==null&&(ge=ge.updateQueue,_=ge.lastBaseUpdate,_!==L&&(_===null?ge.firstBaseUpdate=se:_.next=se,ge.lastBaseUpdate=$))}if(D!==null){var ve=S.baseState;L=0,ge=se=$=null,_=D;do{var re=_.lane&-536870913,le=re!==_.lane;if(le?(Dt&re)===re:(v&re)===re){re!==0&&re===Ap&&(LA=!0),ge!==null&&(ge=ge.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var _e=u,et=_;re=h;var hi=f;switch(et.tag){case 1:if(_e=et.payload,typeof _e=="function"){ve=_e.call(hi,ve,re);break e}ve=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=et.payload,re=typeof _e=="function"?_e.call(hi,ve,re):_e,re==null)break e;ve=p({},ve,re);break e;case 2:Oc=!0}}re=_.callback,re!==null&&(u.flags|=64,le&&(u.flags|=8192),le=S.callbacks,le===null?S.callbacks=[re]:le.push(re))}else le={lane:re,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ge===null?(se=ge=le,$=ve):ge=ge.next=le,L|=re;if(_=_.next,_===null){if(_=S.shared.pending,_===null)break;le=_,_=le.next,le.next=null,S.lastBaseUpdate=le,S.shared.pending=null}}while(!0);ge===null&&($=ve),S.baseState=$,S.firstBaseUpdate=se,S.lastBaseUpdate=ge,D===null&&(S.shared.lanes=0),jc|=L,u.lanes=L,u.memoizedState=ve}}function _F(u,h){if(typeof u!="function")throw Error(n(191,u));u.call(h)}function VF(u,h){var f=u.callbacks;if(f!==null)for(u.callbacks=null,u=0;u<f.length;u++)_F(f[u],h)}var Ip=V(null),WC=V(0);function zF(u,h){u=Ml,ee(WC,u),ee(Ip,h),Ml=u|h.baseLanes}function PA(){ee(WC,Ml),ee(Ip,Ip.current)}function NA(){Ml=WC.current,W(Ip),W(WC)}var Ao=V(null),ir=null;function _c(u){var h=u.alternate;ee(an,an.current&1),ee(Ao,u),ir===null&&(h===null||Ip.current!==null||h.memoizedState!==null)&&(ir=u)}function FA(u){ee(an,an.current),ee(Ao,u),ir===null&&(ir=u)}function HF(u){u.tag===22?(ee(an,an.current),ee(Ao,u),ir===null&&(ir=u)):Vc()}function Vc(){ee(an,an.current),ee(Ao,Ao.current)}function Ro(u){W(Ao),ir===u&&(ir=null),W(an)}var an=V(0);function UC(u){for(var h=u;h!==null;){if(h.tag===13){var f=h.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||zR(f)||HR(f)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var ml=0,mt=null,ui=null,Cn=null,$C=!1,kp=!1,yd=!1,YC=0,km=0,Lp=null,F9=0;function Xi(){throw Error(n(321))}function OA(u,h){if(h===null)return!1;for(var f=0;f<h.length&&f<u.length;f++)if(!Mo(u[f],h[f]))return!1;return!0}function BA(u,h,f,v,S,D){return ml=D,mt=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,H.H=u===null||u.memoizedState===null?DO:QA,yd=!1,D=f(v,S),yd=!1,kp&&(D=WF(h,f,v,S)),jF(u),D}function jF(u){H.H=Nm;var h=ui!==null&&ui.next!==null;if(ml=0,Cn=ui=mt=null,$C=!1,km=0,Lp=null,h)throw Error(n(300));u===null||wn||(u=u.dependencies,u!==null&&BC(u)&&(wn=!0))}function WF(u,h,f,v){mt=u;var S=0;do{if(kp&&(Lp=null),km=0,kp=!1,25<=S)throw Error(n(301));if(S+=1,Cn=ui=null,u.updateQueue!=null){var D=u.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}H.H=AO,D=h(f,v)}while(kp);return D}function O9(){var u=H.H,h=u.useState()[0];return h=typeof h.then=="function"?Lm(h):h,u=u.useState()[0],(ui!==null?ui.memoizedState:null)!==u&&(mt.flags|=1024),h}function GA(){var u=YC!==0;return YC=0,u}function _A(u,h,f){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~f}function VA(u){if($C){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}$C=!1}ml=0,Cn=ui=mt=null,kp=!1,km=YC=0,Lp=null}function Vs(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?mt.memoizedState=Cn=u:Cn=Cn.next=u,Cn}function ln(){if(ui===null){var u=mt.alternate;u=u!==null?u.memoizedState:null}else u=ui.next;var h=Cn===null?mt.memoizedState:Cn.next;if(h!==null)Cn=h,ui=u;else{if(u===null)throw mt.alternate===null?Error(n(467)):Error(n(310));ui=u,u={memoizedState:ui.memoizedState,baseState:ui.baseState,baseQueue:ui.baseQueue,queue:ui.queue,next:null},Cn===null?mt.memoizedState=Cn=u:Cn=Cn.next=u}return Cn}function KC(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lm(u){var h=km;return km+=1,Lp===null&&(Lp=[]),u=NF(Lp,u,h),h=mt,(Cn===null?h.memoizedState:Cn.next)===null&&(h=h.alternate,H.H=h===null||h.memoizedState===null?DO:QA),u}function qC(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Lm(u);if(u.$$typeof===M)return Xn(u)}throw Error(n(438,String(u)))}function zA(u){var h=null,f=mt.updateQueue;if(f!==null&&(h=f.memoCache),h==null){var v=mt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(h={data:v.data.map(function(S){return S.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),f===null&&(f=KC(),mt.updateQueue=f),f.memoCache=h,f=h.data[h.index],f===void 0)for(f=h.data[h.index]=Array(u),v=0;v<u;v++)f[v]=G;return h.index++,f}function yl(u,h){return typeof h=="function"?h(u):h}function ZC(u){var h=ln();return HA(h,ui,u)}function HA(u,h,f){var v=u.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=f;var S=u.baseQueue,D=v.pending;if(D!==null){if(S!==null){var L=S.next;S.next=D.next,D.next=L}h.baseQueue=S=D,v.pending=null}if(D=u.baseState,S===null)u.memoizedState=D;else{h=S.next;var _=L=null,$=null,se=h,ge=!1;do{var ve=se.lane&-536870913;if(ve!==se.lane?(Dt&ve)===ve:(ml&ve)===ve){var re=se.revertLane;if(re===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ve===Ap&&(ge=!0);else if((ml&re)===re){se=se.next,re===Ap&&(ge=!0);continue}else ve={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},$===null?(_=$=ve,L=D):$=$.next=ve,mt.lanes|=re,jc|=re;ve=se.action,yd&&f(D,ve),D=se.hasEagerState?se.eagerState:f(D,ve)}else re={lane:ve,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},$===null?(_=$=re,L=D):$=$.next=re,mt.lanes|=ve,jc|=ve;se=se.next}while(se!==null&&se!==h);if($===null?L=D:$.next=_,!Mo(D,u.memoizedState)&&(wn=!0,ge&&(f=Rp,f!==null)))throw f;u.memoizedState=D,u.baseState=L,u.baseQueue=$,v.lastRenderedState=D}return S===null&&(v.lanes=0),[u.memoizedState,v.dispatch]}function jA(u){var h=ln(),f=h.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=u;var v=f.dispatch,S=f.pending,D=h.memoizedState;if(S!==null){f.pending=null;var L=S=S.next;do D=u(D,L.action),L=L.next;while(L!==S);Mo(D,h.memoizedState)||(wn=!0),h.memoizedState=D,h.baseQueue===null&&(h.baseState=D),f.lastRenderedState=D}return[D,v]}function UF(u,h,f){var v=mt,S=ln(),D=Pt;if(D){if(f===void 0)throw Error(n(407));f=f()}else f=h();var L=!Mo((ui||S).memoizedState,f);if(L&&(S.memoizedState=f,wn=!0),S=S.queue,$A(KF.bind(null,v,S,u),[u]),S.getSnapshot!==h||L||Cn!==null&&Cn.memoizedState.tag&1){if(v.flags|=2048,Pp(9,{destroy:void 0},YF.bind(null,v,S,f,h),null),mi===null)throw Error(n(349));D||(ml&127)!==0||$F(v,h,f)}return f}function $F(u,h,f){u.flags|=16384,u={getSnapshot:h,value:f},h=mt.updateQueue,h===null?(h=KC(),mt.updateQueue=h,h.stores=[u]):(f=h.stores,f===null?h.stores=[u]:f.push(u))}function YF(u,h,f,v){h.value=f,h.getSnapshot=v,qF(h)&&ZF(u)}function KF(u,h,f){return f(function(){qF(h)&&ZF(u)})}function qF(u){var h=u.getSnapshot;u=u.value;try{var f=h();return!Mo(u,f)}catch{return!0}}function ZF(u){var h=ld(u,2);h!==null&&so(h,u,2)}function WA(u){var h=Vs();if(typeof u=="function"){var f=u;if(u=f(),yd){Tc(!0);try{f()}finally{Tc(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:u},h}function XF(u,h,f,v){return u.baseState=f,HA(u,ui,typeof v=="function"?v:yl)}function B9(u,h,f,v,S){if(JC(u))throw Error(n(485));if(u=h.action,u!==null){var D={payload:S,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){D.listeners.push(L)}};H.T!==null?f(!0):D.isTransition=!1,v(D),f=h.pending,f===null?(D.next=h.pending=D,QF(h,D)):(D.next=f.next,h.pending=f.next=D)}}function QF(u,h){var f=h.action,v=h.payload,S=u.state;if(h.isTransition){var D=H.T,L={};H.T=L;try{var _=f(S,v),$=H.S;$!==null&&$(L,_),JF(u,h,_)}catch(se){UA(u,h,se)}finally{D!==null&&L.types!==null&&(D.types=L.types),H.T=D}}else try{D=f(S,v),JF(u,h,D)}catch(se){UA(u,h,se)}}function JF(u,h,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(v){eO(u,h,v)},function(v){return UA(u,h,v)}):eO(u,h,f)}function eO(u,h,f){h.status="fulfilled",h.value=f,tO(h),u.state=f,h=u.pending,h!==null&&(f=h.next,f===h?u.pending=null:(f=f.next,h.next=f,QF(u,f)))}function UA(u,h,f){var v=u.pending;if(u.pending=null,v!==null){v=v.next;do h.status="rejected",h.reason=f,tO(h),h=h.next;while(h!==v)}u.action=null}function tO(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function iO(u,h){return h}function nO(u,h){if(Pt){var f=mi.formState;if(f!==null){e:{var v=mt;if(Pt){if(Si){t:{for(var S=Si,D=tr;S.nodeType!==8;){if(!D){S=null;break t}if(S=nr(S.nextSibling),S===null){S=null;break t}}D=S.data,S=D==="F!"||D==="F"?S:null}if(S){Si=nr(S.nextSibling),v=S.data==="F!";break e}}Nc(v)}v=!1}v&&(h=f[0])}}return f=Vs(),f.memoizedState=f.baseState=h,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iO,lastRenderedState:h},f.queue=v,f=SO.bind(null,mt,v),v.dispatch=f,v=WA(!1),D=XA.bind(null,mt,!1,v.queue),v=Vs(),S={state:h,dispatch:null,action:u,pending:null},v.queue=S,f=B9.bind(null,mt,S,D,f),S.dispatch=f,v.memoizedState=u,[h,f,!1]}function sO(u){var h=ln();return oO(h,ui,u)}function oO(u,h,f){if(h=HA(u,h,iO)[0],u=ZC(yl)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var v=Lm(h)}catch(L){throw L===Ep?VC:L}else v=h;h=ln();var S=h.queue,D=S.dispatch;return f!==h.memoizedState&&(mt.flags|=2048,Pp(9,{destroy:void 0},G9.bind(null,S,f),null)),[v,D,u]}function G9(u,h){u.action=h}function rO(u){var h=ln(),f=ui;if(f!==null)return oO(h,f,u);ln(),h=h.memoizedState,f=ln();var v=f.queue.dispatch;return f.memoizedState=u,[h,v,!1]}function Pp(u,h,f,v){return u={tag:u,create:f,deps:v,inst:h,next:null},h=mt.updateQueue,h===null&&(h=KC(),mt.updateQueue=h),f=h.lastEffect,f===null?h.lastEffect=u.next=u:(v=f.next,f.next=u,u.next=v,h.lastEffect=u),u}function aO(){return ln().memoizedState}function XC(u,h,f,v){var S=Vs();mt.flags|=u,S.memoizedState=Pp(1|h,{destroy:void 0},f,v===void 0?null:v)}function QC(u,h,f,v){var S=ln();v=v===void 0?null:v;var D=S.memoizedState.inst;ui!==null&&v!==null&&OA(v,ui.memoizedState.deps)?S.memoizedState=Pp(h,D,f,v):(mt.flags|=u,S.memoizedState=Pp(1|h,D,f,v))}function lO(u,h){XC(8390656,8,u,h)}function $A(u,h){QC(2048,8,u,h)}function _9(u){mt.flags|=4;var h=mt.updateQueue;if(h===null)h=KC(),mt.updateQueue=h,h.events=[u];else{var f=h.events;f===null?h.events=[u]:f.push(u)}}function cO(u){var h=ln().memoizedState;return _9({ref:h,nextImpl:u}),function(){if((Wt&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}function uO(u,h){return QC(4,2,u,h)}function dO(u,h){return QC(4,4,u,h)}function hO(u,h){if(typeof h=="function"){u=u();var f=h(u);return function(){typeof f=="function"?f():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function pO(u,h,f){f=f!=null?f.concat([u]):null,QC(4,4,hO.bind(null,h,u),f)}function YA(){}function gO(u,h){var f=ln();h=h===void 0?null:h;var v=f.memoizedState;return h!==null&&OA(h,v[1])?v[0]:(f.memoizedState=[u,h],u)}function fO(u,h){var f=ln();h=h===void 0?null:h;var v=f.memoizedState;if(h!==null&&OA(h,v[1]))return v[0];if(v=u(),yd){Tc(!0);try{u()}finally{Tc(!1)}}return f.memoizedState=[v,h],v}function KA(u,h,f){return f===void 0||(ml&1073741824)!==0&&(Dt&261930)===0?u.memoizedState=h:(u.memoizedState=f,u=m2(),mt.lanes|=u,jc|=u,f)}function mO(u,h,f,v){return Mo(f,h)?f:Ip.current!==null?(u=KA(u,f,v),Mo(u,h)||(wn=!0),u):(ml&42)===0||(ml&1073741824)!==0&&(Dt&261930)===0?(wn=!0,u.memoizedState=f):(u=m2(),mt.lanes|=u,jc|=u,h)}function yO(u,h,f,v,S){var D=K.p;K.p=D!==0&&8>D?D:8;var L=H.T,_={};H.T=_,XA(u,!1,h,f);try{var $=S(),se=H.S;if(se!==null&&se(_,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ge=N9($,v);Pm(u,h,ge,Io(u))}else Pm(u,h,v,Io(u))}catch(ve){Pm(u,h,{then:function(){},status:"rejected",reason:ve},Io())}finally{K.p=D,L!==null&&_.types!==null&&(L.types=_.types),H.T=L}}function V9(){}function qA(u,h,f,v){if(u.tag!==5)throw Error(n(476));var S=vO(u).queue;yO(u,S,h,U,f===null?V9:function(){return bO(u),f(v)})}function vO(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:U},next:null};var f={};return h.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:f},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function bO(u){var h=vO(u);h.next===null&&(h=u.alternate.memoizedState),Pm(u,h.next.queue,{},Io())}function ZA(){return Xn(Zm)}function CO(){return ln().memoizedState}function wO(){return ln().memoizedState}function z9(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var f=Io();u=Bc(f);var v=Gc(h,u,f);v!==null&&(so(v,h,f),Em(v,h,f)),h={cache:DA()},u.payload=h;return}h=h.return}}function H9(u,h,f){var v=Io();f={lane:v,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},JC(u)?xO(h,f):(f=gA(u,h,f,v),f!==null&&(so(f,u,v),MO(f,h,v)))}function SO(u,h,f){var v=Io();Pm(u,h,f,v)}function Pm(u,h,f,v){var S={lane:v,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(JC(u))xO(h,S);else{var D=u.alternate;if(u.lanes===0&&(D===null||D.lanes===0)&&(D=h.lastRenderedReducer,D!==null))try{var L=h.lastRenderedState,_=D(L,f);if(S.hasEagerState=!0,S.eagerState=_,Mo(_,L))return PC(u,h,S,0),mi===null&&LC(),!1}catch{}finally{}if(f=gA(u,h,S,v),f!==null)return so(f,u,v),MO(f,h,v),!0}return!1}function XA(u,h,f,v){if(v={lane:2,revertLane:TR(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},JC(u)){if(h)throw Error(n(479))}else h=gA(u,f,v,2),h!==null&&so(h,u,2)}function JC(u){var h=u.alternate;return u===mt||h!==null&&h===mt}function xO(u,h){kp=$C=!0;var f=u.pending;f===null?h.next=h:(h.next=f.next,f.next=h),u.pending=h}function MO(u,h,f){if((f&4194048)!==0){var v=h.lanes;v&=u.pendingLanes,f|=v,h.lanes=f,TN(u,f)}}var Nm={readContext:Xn,use:qC,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useLayoutEffect:Xi,useInsertionEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useSyncExternalStore:Xi,useId:Xi,useHostTransitionStatus:Xi,useFormState:Xi,useActionState:Xi,useOptimistic:Xi,useMemoCache:Xi,useCacheRefresh:Xi};Nm.useEffectEvent=Xi;var DO={readContext:Xn,use:qC,useCallback:function(u,h){return Vs().memoizedState=[u,h===void 0?null:h],u},useContext:Xn,useEffect:lO,useImperativeHandle:function(u,h,f){f=f!=null?f.concat([u]):null,XC(4194308,4,hO.bind(null,h,u),f)},useLayoutEffect:function(u,h){return XC(4194308,4,u,h)},useInsertionEffect:function(u,h){XC(4,2,u,h)},useMemo:function(u,h){var f=Vs();h=h===void 0?null:h;var v=u();if(yd){Tc(!0);try{u()}finally{Tc(!1)}}return f.memoizedState=[v,h],v},useReducer:function(u,h,f){var v=Vs();if(f!==void 0){var S=f(h);if(yd){Tc(!0);try{f(h)}finally{Tc(!1)}}}else S=h;return v.memoizedState=v.baseState=S,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:S},v.queue=u,u=u.dispatch=H9.bind(null,mt,u),[v.memoizedState,u]},useRef:function(u){var h=Vs();return u={current:u},h.memoizedState=u},useState:function(u){u=WA(u);var h=u.queue,f=SO.bind(null,mt,h);return h.dispatch=f,[u.memoizedState,f]},useDebugValue:YA,useDeferredValue:function(u,h){var f=Vs();return KA(f,u,h)},useTransition:function(){var u=WA(!1);return u=yO.bind(null,mt,u.queue,!0,!1),Vs().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,f){var v=mt,S=Vs();if(Pt){if(f===void 0)throw Error(n(407));f=f()}else{if(f=h(),mi===null)throw Error(n(349));(Dt&127)!==0||$F(v,h,f)}S.memoizedState=f;var D={value:f,getSnapshot:h};return S.queue=D,lO(KF.bind(null,v,D,u),[u]),v.flags|=2048,Pp(9,{destroy:void 0},YF.bind(null,v,D,f,h),null),f},useId:function(){var u=Vs(),h=mi.identifierPrefix;if(Pt){var f=pa,v=ha;f=(v&~(1<<32-xo(v)-1)).toString(32)+f,h="_"+h+"R_"+f,f=YC++,0<f&&(h+="H"+f.toString(32)),h+="_"}else f=F9++,h="_"+h+"r_"+f.toString(32)+"_";return u.memoizedState=h},useHostTransitionStatus:ZA,useFormState:nO,useActionState:nO,useOptimistic:function(u){var h=Vs();h.memoizedState=h.baseState=u;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=f,h=XA.bind(null,mt,!0,f),f.dispatch=h,[u,h]},useMemoCache:zA,useCacheRefresh:function(){return Vs().memoizedState=z9.bind(null,mt)},useEffectEvent:function(u){var h=Vs(),f={impl:u};return h.memoizedState=f,function(){if((Wt&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},QA={readContext:Xn,use:qC,useCallback:gO,useContext:Xn,useEffect:$A,useImperativeHandle:pO,useInsertionEffect:uO,useLayoutEffect:dO,useMemo:fO,useReducer:ZC,useRef:aO,useState:function(){return ZC(yl)},useDebugValue:YA,useDeferredValue:function(u,h){var f=ln();return mO(f,ui.memoizedState,u,h)},useTransition:function(){var u=ZC(yl)[0],h=ln().memoizedState;return[typeof u=="boolean"?u:Lm(u),h]},useSyncExternalStore:UF,useId:CO,useHostTransitionStatus:ZA,useFormState:sO,useActionState:sO,useOptimistic:function(u,h){var f=ln();return XF(f,ui,u,h)},useMemoCache:zA,useCacheRefresh:wO};QA.useEffectEvent=cO;var AO={readContext:Xn,use:qC,useCallback:gO,useContext:Xn,useEffect:$A,useImperativeHandle:pO,useInsertionEffect:uO,useLayoutEffect:dO,useMemo:fO,useReducer:jA,useRef:aO,useState:function(){return jA(yl)},useDebugValue:YA,useDeferredValue:function(u,h){var f=ln();return ui===null?KA(f,u,h):mO(f,ui.memoizedState,u,h)},useTransition:function(){var u=jA(yl)[0],h=ln().memoizedState;return[typeof u=="boolean"?u:Lm(u),h]},useSyncExternalStore:UF,useId:CO,useHostTransitionStatus:ZA,useFormState:rO,useActionState:rO,useOptimistic:function(u,h){var f=ln();return ui!==null?XF(f,ui,u,h):(f.baseState=u,[u,f.queue.dispatch])},useMemoCache:zA,useCacheRefresh:wO};AO.useEffectEvent=cO;function JA(u,h,f,v){h=u.memoizedState,f=f(v,h),f=f==null?h:p({},h,f),u.memoizedState=f,u.lanes===0&&(u.updateQueue.baseState=f)}var eR={enqueueSetState:function(u,h,f){u=u._reactInternals;var v=Io(),S=Bc(v);S.payload=h,f!=null&&(S.callback=f),h=Gc(u,S,v),h!==null&&(so(h,u,v),Em(h,u,v))},enqueueReplaceState:function(u,h,f){u=u._reactInternals;var v=Io(),S=Bc(v);S.tag=1,S.payload=h,f!=null&&(S.callback=f),h=Gc(u,S,v),h!==null&&(so(h,u,v),Em(h,u,v))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var f=Io(),v=Bc(f);v.tag=2,h!=null&&(v.callback=h),h=Gc(u,v,f),h!==null&&(so(h,u,f),Em(h,u,f))}};function RO(u,h,f,v,S,D,L){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(v,D,L):h.prototype&&h.prototype.isPureReactComponent?!Cm(f,v)||!Cm(S,D):!0}function EO(u,h,f,v){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(f,v),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(f,v),h.state!==u&&eR.enqueueReplaceState(h,h.state,null)}function vd(u,h){var f=h;if("ref"in h){f={};for(var v in h)v!=="ref"&&(f[v]=h[v])}if(u=u.defaultProps){f===h&&(f=p({},f));for(var S in u)f[S]===void 0&&(f[S]=u[S])}return f}function TO(u){kC(u)}function IO(u){console.error(u)}function kO(u){kC(u)}function ew(u,h){try{var f=u.onUncaughtError;f(h.value,{componentStack:h.stack})}catch(v){setTimeout(function(){throw v})}}function LO(u,h,f){try{var v=u.onCaughtError;v(f.value,{componentStack:f.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function tR(u,h,f){return f=Bc(f),f.tag=3,f.payload={element:null},f.callback=function(){ew(u,h)},f}function PO(u){return u=Bc(u),u.tag=3,u}function NO(u,h,f,v){var S=f.type.getDerivedStateFromError;if(typeof S=="function"){var D=v.value;u.payload=function(){return S(D)},u.callback=function(){LO(h,f,v)}}var L=f.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(u.callback=function(){LO(h,f,v),typeof S!="function"&&(Wc===null?Wc=new Set([this]):Wc.add(this));var _=v.stack;this.componentDidCatch(v.value,{componentStack:_!==null?_:""})})}function j9(u,h,f,v,S){if(f.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(h=f.alternate,h!==null&&Dp(h,f,S,!0),f=Ao.current,f!==null){switch(f.tag){case 31:case 13:return ir===null?hw():f.alternate===null&&Qi===0&&(Qi=3),f.flags&=-257,f.flags|=65536,f.lanes=S,v===zC?f.flags|=16384:(h=f.updateQueue,h===null?f.updateQueue=new Set([v]):h.add(v),AR(u,v,S)),!1;case 22:return f.flags|=65536,v===zC?f.flags|=16384:(h=f.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([v])},f.updateQueue=h):(f=h.retryQueue,f===null?h.retryQueue=new Set([v]):f.add(v)),AR(u,v,S)),!1}throw Error(n(435,f.tag))}return AR(u,v,S),hw(),!1}if(Pt)return h=Ao.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=S,v!==CA&&(u=Error(n(422),{cause:v}),xm(Qo(u,f)))):(v!==CA&&(h=Error(n(423),{cause:v}),xm(Qo(h,f))),u=u.current.alternate,u.flags|=65536,S&=-S,u.lanes|=S,v=Qo(v,f),S=tR(u.stateNode,v,S),kA(u,S),Qi!==4&&(Qi=2)),!1;var D=Error(n(520),{cause:v});if(D=Qo(D,f),Hm===null?Hm=[D]:Hm.push(D),Qi!==4&&(Qi=2),h===null)return!0;v=Qo(v,f),f=h;do{switch(f.tag){case 3:return f.flags|=65536,u=S&-S,f.lanes|=u,u=tR(f.stateNode,v,u),kA(f,u),!1;case 1:if(h=f.type,D=f.stateNode,(f.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Wc===null||!Wc.has(D))))return f.flags|=65536,S&=-S,f.lanes|=S,S=PO(S),NO(S,u,f,v),kA(f,S),!1}f=f.return}while(f!==null);return!1}var iR=Error(n(461)),wn=!1;function Qn(u,h,f,v){h.child=u===null?GF(h,null,f,v):md(h,u.child,f,v)}function FO(u,h,f,v,S){f=f.render;var D=h.ref;if("ref"in v){var L={};for(var _ in v)_!=="ref"&&(L[_]=v[_])}else L=v;return hd(h),v=BA(u,h,f,L,D,S),_=GA(),u!==null&&!wn?(_A(u,h,S),vl(u,h,S)):(Pt&&_&&vA(h),h.flags|=1,Qn(u,h,v,S),h.child)}function OO(u,h,f,v,S){if(u===null){var D=f.type;return typeof D=="function"&&!fA(D)&&D.defaultProps===void 0&&f.compare===null?(h.tag=15,h.type=D,BO(u,h,D,v,S)):(u=FC(f.type,null,v,h,h.mode,S),u.ref=h.ref,u.return=h,h.child=u)}if(D=u.child,!uR(u,S)){var L=D.memoizedProps;if(f=f.compare,f=f!==null?f:Cm,f(L,v)&&u.ref===h.ref)return vl(u,h,S)}return h.flags|=1,u=hl(D,v),u.ref=h.ref,u.return=h,h.child=u}function BO(u,h,f,v,S){if(u!==null){var D=u.memoizedProps;if(Cm(D,v)&&u.ref===h.ref)if(wn=!1,h.pendingProps=v=D,uR(u,S))(u.flags&131072)!==0&&(wn=!0);else return h.lanes=u.lanes,vl(u,h,S)}return nR(u,h,f,v,S)}function GO(u,h,f,v){var S=v.children,D=u!==null?u.memoizedState:null;if(u===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((h.flags&128)!==0){if(D=D!==null?D.baseLanes|f:f,u!==null){for(v=h.child=u.child,S=0;v!==null;)S=S|v.lanes|v.childLanes,v=v.sibling;v=S&~D}else v=0,h.child=null;return _O(u,h,D,f,v)}if((f&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&_C(h,D!==null?D.cachePool:null),D!==null?zF(h,D):PA(),HF(h);else return v=h.lanes=536870912,_O(u,h,D!==null?D.baseLanes|f:f,f,v)}else D!==null?(_C(h,D.cachePool),zF(h,D),Vc(),h.memoizedState=null):(u!==null&&_C(h,null),PA(),Vc());return Qn(u,h,S,f),h.child}function Fm(u,h){return u!==null&&u.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function _O(u,h,f,v,S){var D=RA();return D=D===null?null:{parent:bn._currentValue,pool:D},h.memoizedState={baseLanes:f,cachePool:D},u!==null&&_C(h,null),PA(),HF(h),u!==null&&Dp(u,h,v,!0),h.childLanes=S,null}function tw(u,h){return h=nw({mode:h.mode,children:h.children},u.mode),h.ref=u.ref,u.child=h,h.return=u,h}function VO(u,h,f){return md(h,u.child,null,f),u=tw(h,h.pendingProps),u.flags|=2,Ro(h),h.memoizedState=null,u}function W9(u,h,f){var v=h.pendingProps,S=(h.flags&128)!==0;if(h.flags&=-129,u===null){if(Pt){if(v.mode==="hidden")return u=tw(h,v),h.lanes=536870912,Fm(null,u);if(FA(h),(u=Si)?(u=Q2(u,tr),u=u!==null&&u.data==="&"?u:null,u!==null&&(h.memoizedState={dehydrated:u,treeContext:Lc!==null?{id:ha,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},f=xF(u),f.return=h,h.child=f,Zn=h,Si=null)):u=null,u===null)throw Nc(h);return h.lanes=536870912,null}return tw(h,v)}var D=u.memoizedState;if(D!==null){var L=D.dehydrated;if(FA(h),S)if(h.flags&256)h.flags&=-257,h=VO(u,h,f);else if(h.memoizedState!==null)h.child=u.child,h.flags|=128,h=null;else throw Error(n(558));else if(wn||Dp(u,h,f,!1),S=(f&u.childLanes)!==0,wn||S){if(v=mi,v!==null&&(L=IN(v,f),L!==0&&L!==D.retryLane))throw D.retryLane=L,ld(u,L),so(v,u,L),iR;hw(),h=VO(u,h,f)}else u=D.treeContext,Si=nr(L.nextSibling),Zn=h,Pt=!0,Pc=null,tr=!1,u!==null&&AF(h,u),h=tw(h,v),h.flags|=4096;return h}return u=hl(u.child,{mode:v.mode,children:v.children}),u.ref=h.ref,h.child=u,u.return=h,u}function iw(u,h){var f=h.ref;if(f===null)u!==null&&u.ref!==null&&(h.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(u===null||u.ref!==f)&&(h.flags|=4194816)}}function nR(u,h,f,v,S){return hd(h),f=BA(u,h,f,v,void 0,S),v=GA(),u!==null&&!wn?(_A(u,h,S),vl(u,h,S)):(Pt&&v&&vA(h),h.flags|=1,Qn(u,h,f,S),h.child)}function zO(u,h,f,v,S,D){return hd(h),h.updateQueue=null,f=WF(h,v,f,S),jF(u),v=GA(),u!==null&&!wn?(_A(u,h,D),vl(u,h,D)):(Pt&&v&&vA(h),h.flags|=1,Qn(u,h,f,D),h.child)}function HO(u,h,f,v,S){if(hd(h),h.stateNode===null){var D=wp,L=f.contextType;typeof L=="object"&&L!==null&&(D=Xn(L)),D=new f(v,D),h.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=eR,h.stateNode=D,D._reactInternals=h,D=h.stateNode,D.props=v,D.state=h.memoizedState,D.refs={},TA(h),L=f.contextType,D.context=typeof L=="object"&&L!==null?Xn(L):wp,D.state=h.memoizedState,L=f.getDerivedStateFromProps,typeof L=="function"&&(JA(h,f,L,v),D.state=h.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(L=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),L!==D.state&&eR.enqueueReplaceState(D,D.state,null),Im(h,v,D,S),Tm(),D.state=h.memoizedState),typeof D.componentDidMount=="function"&&(h.flags|=4194308),v=!0}else if(u===null){D=h.stateNode;var _=h.memoizedProps,$=vd(f,_);D.props=$;var se=D.context,ge=f.contextType;L=wp,typeof ge=="object"&&ge!==null&&(L=Xn(ge));var ve=f.getDerivedStateFromProps;ge=typeof ve=="function"||typeof D.getSnapshotBeforeUpdate=="function",_=h.pendingProps!==_,ge||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(_||se!==L)&&EO(h,D,v,L),Oc=!1;var re=h.memoizedState;D.state=re,Im(h,v,D,S),Tm(),se=h.memoizedState,_||re!==se||Oc?(typeof ve=="function"&&(JA(h,f,ve,v),se=h.memoizedState),($=Oc||RO(h,f,$,v,re,se,L))?(ge||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(h.flags|=4194308)):(typeof D.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=v,h.memoizedState=se),D.props=v,D.state=se,D.context=L,v=$):(typeof D.componentDidMount=="function"&&(h.flags|=4194308),v=!1)}else{D=h.stateNode,IA(u,h),L=h.memoizedProps,ge=vd(f,L),D.props=ge,ve=h.pendingProps,re=D.context,se=f.contextType,$=wp,typeof se=="object"&&se!==null&&($=Xn(se)),_=f.getDerivedStateFromProps,(se=typeof _=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(L!==ve||re!==$)&&EO(h,D,v,$),Oc=!1,re=h.memoizedState,D.state=re,Im(h,v,D,S),Tm();var le=h.memoizedState;L!==ve||re!==le||Oc||u!==null&&u.dependencies!==null&&BC(u.dependencies)?(typeof _=="function"&&(JA(h,f,_,v),le=h.memoizedState),(ge=Oc||RO(h,f,ge,v,re,le,$)||u!==null&&u.dependencies!==null&&BC(u.dependencies))?(se||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(v,le,$),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(v,le,$)),typeof D.componentDidUpdate=="function"&&(h.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof D.componentDidUpdate!="function"||L===u.memoizedProps&&re===u.memoizedState||(h.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||L===u.memoizedProps&&re===u.memoizedState||(h.flags|=1024),h.memoizedProps=v,h.memoizedState=le),D.props=v,D.state=le,D.context=$,v=ge):(typeof D.componentDidUpdate!="function"||L===u.memoizedProps&&re===u.memoizedState||(h.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||L===u.memoizedProps&&re===u.memoizedState||(h.flags|=1024),v=!1)}return D=v,iw(u,h),v=(h.flags&128)!==0,D||v?(D=h.stateNode,f=v&&typeof f.getDerivedStateFromError!="function"?null:D.render(),h.flags|=1,u!==null&&v?(h.child=md(h,u.child,null,S),h.child=md(h,null,f,S)):Qn(u,h,f,S),h.memoizedState=D.state,u=h.child):u=vl(u,h,S),u}function jO(u,h,f,v){return ud(),h.flags|=256,Qn(u,h,f,v),h.child}var sR={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function oR(u){return{baseLanes:u,cachePool:LF()}}function rR(u,h,f){return u=u!==null?u.childLanes&~f:0,h&&(u|=To),u}function WO(u,h,f){var v=h.pendingProps,S=!1,D=(h.flags&128)!==0,L;if((L=D)||(L=u!==null&&u.memoizedState===null?!1:(an.current&2)!==0),L&&(S=!0,h.flags&=-129),L=(h.flags&32)!==0,h.flags&=-33,u===null){if(Pt){if(S?_c(h):Vc(),(u=Si)?(u=Q2(u,tr),u=u!==null&&u.data!=="&"?u:null,u!==null&&(h.memoizedState={dehydrated:u,treeContext:Lc!==null?{id:ha,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},f=xF(u),f.return=h,h.child=f,Zn=h,Si=null)):u=null,u===null)throw Nc(h);return HR(u)?h.lanes=32:h.lanes=536870912,null}var _=v.children;return v=v.fallback,S?(Vc(),S=h.mode,_=nw({mode:"hidden",children:_},S),v=cd(v,S,f,null),_.return=h,v.return=h,_.sibling=v,h.child=_,v=h.child,v.memoizedState=oR(f),v.childLanes=rR(u,L,f),h.memoizedState=sR,Fm(null,v)):(_c(h),aR(h,_))}var $=u.memoizedState;if($!==null&&(_=$.dehydrated,_!==null)){if(D)h.flags&256?(_c(h),h.flags&=-257,h=lR(u,h,f)):h.memoizedState!==null?(Vc(),h.child=u.child,h.flags|=128,h=null):(Vc(),_=v.fallback,S=h.mode,v=nw({mode:"visible",children:v.children},S),_=cd(_,S,f,null),_.flags|=2,v.return=h,_.return=h,v.sibling=_,h.child=v,md(h,u.child,null,f),v=h.child,v.memoizedState=oR(f),v.childLanes=rR(u,L,f),h.memoizedState=sR,h=Fm(null,v));else if(_c(h),HR(_)){if(L=_.nextSibling&&_.nextSibling.dataset,L)var se=L.dgst;L=se,v=Error(n(419)),v.stack="",v.digest=L,xm({value:v,source:null,stack:null}),h=lR(u,h,f)}else if(wn||Dp(u,h,f,!1),L=(f&u.childLanes)!==0,wn||L){if(L=mi,L!==null&&(v=IN(L,f),v!==0&&v!==$.retryLane))throw $.retryLane=v,ld(u,v),so(L,u,v),iR;zR(_)||hw(),h=lR(u,h,f)}else zR(_)?(h.flags|=192,h.child=u.child,h=null):(u=$.treeContext,Si=nr(_.nextSibling),Zn=h,Pt=!0,Pc=null,tr=!1,u!==null&&AF(h,u),h=aR(h,v.children),h.flags|=4096);return h}return S?(Vc(),_=v.fallback,S=h.mode,$=u.child,se=$.sibling,v=hl($,{mode:"hidden",children:v.children}),v.subtreeFlags=$.subtreeFlags&65011712,se!==null?_=hl(se,_):(_=cd(_,S,f,null),_.flags|=2),_.return=h,v.return=h,v.sibling=_,h.child=v,Fm(null,v),v=h.child,_=u.child.memoizedState,_===null?_=oR(f):(S=_.cachePool,S!==null?($=bn._currentValue,S=S.parent!==$?{parent:$,pool:$}:S):S=LF(),_={baseLanes:_.baseLanes|f,cachePool:S}),v.memoizedState=_,v.childLanes=rR(u,L,f),h.memoizedState=sR,Fm(u.child,v)):(_c(h),f=u.child,u=f.sibling,f=hl(f,{mode:"visible",children:v.children}),f.return=h,f.sibling=null,u!==null&&(L=h.deletions,L===null?(h.deletions=[u],h.flags|=16):L.push(u)),h.child=f,h.memoizedState=null,f)}function aR(u,h){return h=nw({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function nw(u,h){return u=Do(22,u,null,h),u.lanes=0,u}function lR(u,h,f){return md(h,u.child,null,f),u=aR(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function UO(u,h,f){u.lanes|=h;var v=u.alternate;v!==null&&(v.lanes|=h),xA(u.return,h,f)}function cR(u,h,f,v,S,D){var L=u.memoizedState;L===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:v,tail:f,tailMode:S,treeForkCount:D}:(L.isBackwards=h,L.rendering=null,L.renderingStartTime=0,L.last=v,L.tail=f,L.tailMode=S,L.treeForkCount=D)}function $O(u,h,f){var v=h.pendingProps,S=v.revealOrder,D=v.tail;v=v.children;var L=an.current,_=(L&2)!==0;if(_?(L=L&1|2,h.flags|=128):L&=1,ee(an,L),Qn(u,h,v,f),v=Pt?Sm:0,!_&&u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&UO(u,f,h);else if(u.tag===19)UO(u,f,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(S){case"forwards":for(f=h.child,S=null;f!==null;)u=f.alternate,u!==null&&UC(u)===null&&(S=f),f=f.sibling;f=S,f===null?(S=h.child,h.child=null):(S=f.sibling,f.sibling=null),cR(h,!1,S,f,D,v);break;case"backwards":case"unstable_legacy-backwards":for(f=null,S=h.child,h.child=null;S!==null;){if(u=S.alternate,u!==null&&UC(u)===null){h.child=S;break}u=S.sibling,S.sibling=f,f=S,S=u}cR(h,!0,f,null,D,v);break;case"together":cR(h,!1,null,null,void 0,v);break;default:h.memoizedState=null}return h.child}function vl(u,h,f){if(u!==null&&(h.dependencies=u.dependencies),jc|=h.lanes,(f&h.childLanes)===0)if(u!==null){if(Dp(u,h,f,!1),(f&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(n(153));if(h.child!==null){for(u=h.child,f=hl(u,u.pendingProps),h.child=f,f.return=h;u.sibling!==null;)u=u.sibling,f=f.sibling=hl(u,u.pendingProps),f.return=h;f.sibling=null}return h.child}function uR(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&BC(u)))}function U9(u,h,f){switch(h.tag){case 3:xe(h,h.stateNode.containerInfo),Fc(h,bn,u.memoizedState.cache),ud();break;case 27:case 5:Ee(h);break;case 4:xe(h,h.stateNode.containerInfo);break;case 10:Fc(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,FA(h),null;break;case 13:var v=h.memoizedState;if(v!==null)return v.dehydrated!==null?(_c(h),h.flags|=128,null):(f&h.child.childLanes)!==0?WO(u,h,f):(_c(h),u=vl(u,h,f),u!==null?u.sibling:null);_c(h);break;case 19:var S=(u.flags&128)!==0;if(v=(f&h.childLanes)!==0,v||(Dp(u,h,f,!1),v=(f&h.childLanes)!==0),S){if(v)return $O(u,h,f);h.flags|=128}if(S=h.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),ee(an,an.current),v)break;return null;case 22:return h.lanes=0,GO(u,h,f,h.pendingProps);case 24:Fc(h,bn,u.memoizedState.cache)}return vl(u,h,f)}function YO(u,h,f){if(u!==null)if(u.memoizedProps!==h.pendingProps)wn=!0;else{if(!uR(u,f)&&(h.flags&128)===0)return wn=!1,U9(u,h,f);wn=(u.flags&131072)!==0}else wn=!1,Pt&&(h.flags&1048576)!==0&&DF(h,Sm,h.index);switch(h.lanes=0,h.tag){case 16:e:{var v=h.pendingProps;if(u=gd(h.elementType),h.type=u,typeof u=="function")fA(u)?(v=vd(u,v),h.tag=1,h=HO(null,h,u,v,f)):(h.tag=0,h=nR(null,h,u,v,f));else{if(u!=null){var S=u.$$typeof;if(S===E){h.tag=11,h=FO(null,h,u,v,f);break e}else if(S===T){h.tag=14,h=OO(null,h,u,v,f);break e}}throw h=X(u)||u,Error(n(306,h,""))}}return h;case 0:return nR(u,h,h.type,h.pendingProps,f);case 1:return v=h.type,S=vd(v,h.pendingProps),HO(u,h,v,S,f);case 3:e:{if(xe(h,h.stateNode.containerInfo),u===null)throw Error(n(387));v=h.pendingProps;var D=h.memoizedState;S=D.element,IA(u,h),Im(h,v,null,f);var L=h.memoizedState;if(v=L.cache,Fc(h,bn,v),v!==D.cache&&MA(h,[bn],f,!0),Tm(),v=L.element,D.isDehydrated)if(D={element:v,isDehydrated:!1,cache:L.cache},h.updateQueue.baseState=D,h.memoizedState=D,h.flags&256){h=jO(u,h,v,f);break e}else if(v!==S){S=Qo(Error(n(424)),h),xm(S),h=jO(u,h,v,f);break e}else{switch(u=h.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Si=nr(u.firstChild),Zn=h,Pt=!0,Pc=null,tr=!0,f=GF(h,null,v,f),h.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(ud(),v===S){h=vl(u,h,f);break e}Qn(u,h,v,f)}h=h.child}return h;case 26:return iw(u,h),u===null?(f=sB(h.type,null,h.pendingProps,null))?h.memoizedState=f:Pt||(f=h.type,u=h.pendingProps,v=bw(Ce.current).createElement(f),v[qn]=h,v[Qs]=u,Jn(v,f,u),jn(v),h.stateNode=v):h.memoizedState=sB(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:return Ee(h),u===null&&Pt&&(v=h.stateNode=tB(h.type,h.pendingProps,Ce.current),Zn=h,tr=!0,S=Si,Kc(h.type)?(jR=S,Si=nr(v.firstChild)):Si=S),Qn(u,h,h.pendingProps.children,f),iw(u,h),u===null&&(h.flags|=4194304),h.child;case 5:return u===null&&Pt&&((S=v=Si)&&(v=wq(v,h.type,h.pendingProps,tr),v!==null?(h.stateNode=v,Zn=h,Si=nr(v.firstChild),tr=!1,S=!0):S=!1),S||Nc(h)),Ee(h),S=h.type,D=h.pendingProps,L=u!==null?u.memoizedProps:null,v=D.children,GR(S,D)?v=null:L!==null&&GR(S,L)&&(h.flags|=32),h.memoizedState!==null&&(S=BA(u,h,O9,null,null,f),Zm._currentValue=S),iw(u,h),Qn(u,h,v,f),h.child;case 6:return u===null&&Pt&&((u=f=Si)&&(f=Sq(f,h.pendingProps,tr),f!==null?(h.stateNode=f,Zn=h,Si=null,u=!0):u=!1),u||Nc(h)),null;case 13:return WO(u,h,f);case 4:return xe(h,h.stateNode.containerInfo),v=h.pendingProps,u===null?h.child=md(h,null,v,f):Qn(u,h,v,f),h.child;case 11:return FO(u,h,h.type,h.pendingProps,f);case 7:return Qn(u,h,h.pendingProps,f),h.child;case 8:return Qn(u,h,h.pendingProps.children,f),h.child;case 12:return Qn(u,h,h.pendingProps.children,f),h.child;case 10:return v=h.pendingProps,Fc(h,h.type,v.value),Qn(u,h,v.children,f),h.child;case 9:return S=h.type._context,v=h.pendingProps.children,hd(h),S=Xn(S),v=v(S),h.flags|=1,Qn(u,h,v,f),h.child;case 14:return OO(u,h,h.type,h.pendingProps,f);case 15:return BO(u,h,h.type,h.pendingProps,f);case 19:return $O(u,h,f);case 31:return W9(u,h,f);case 22:return GO(u,h,f,h.pendingProps);case 24:return hd(h),v=Xn(bn),u===null?(S=RA(),S===null&&(S=mi,D=DA(),S.pooledCache=D,D.refCount++,D!==null&&(S.pooledCacheLanes|=f),S=D),h.memoizedState={parent:v,cache:S},TA(h),Fc(h,bn,S)):((u.lanes&f)!==0&&(IA(u,h),Im(h,null,null,f),Tm()),S=u.memoizedState,D=h.memoizedState,S.parent!==v?(S={parent:v,cache:v},h.memoizedState=S,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=S),Fc(h,bn,v)):(v=D.cache,Fc(h,bn,v),v!==S.cache&&MA(h,[bn],f,!0))),Qn(u,h,h.pendingProps.children,f),h.child;case 29:throw h.pendingProps}throw Error(n(156,h.tag))}function bl(u){u.flags|=4}function dR(u,h,f,v,S){if((h=(u.mode&32)!==0)&&(h=!1),h){if(u.flags|=16777216,(S&335544128)===S)if(u.stateNode.complete)u.flags|=8192;else if(C2())u.flags|=8192;else throw fd=zC,EA}else u.flags&=-16777217}function KO(u,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!cB(h))if(C2())u.flags|=8192;else throw fd=zC,EA}function sw(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?RN():536870912,u.lanes|=h,Bp|=h)}function Om(u,h){if(!Pt)switch(u.tailMode){case"hidden":h=u.tail;for(var f=null;h!==null;)h.alternate!==null&&(f=h),h=h.sibling;f===null?u.tail=null:f.sibling=null;break;case"collapsed":f=u.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:v.sibling=null}}function xi(u){var h=u.alternate!==null&&u.alternate.child===u.child,f=0,v=0;if(h)for(var S=u.child;S!==null;)f|=S.lanes|S.childLanes,v|=S.subtreeFlags&65011712,v|=S.flags&65011712,S.return=u,S=S.sibling;else for(S=u.child;S!==null;)f|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=u,S=S.sibling;return u.subtreeFlags|=v,u.childLanes=f,h}function $9(u,h,f){var v=h.pendingProps;switch(bA(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xi(h),null;case 1:return xi(h),null;case 3:return f=h.stateNode,v=null,u!==null&&(v=u.memoizedState.cache),h.memoizedState.cache!==v&&(h.flags|=2048),fl(bn),De(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(u===null||u.child===null)&&(Mp(h)?bl(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,wA())),xi(h),null;case 26:var S=h.type,D=h.memoizedState;return u===null?(bl(h),D!==null?(xi(h),KO(h,D)):(xi(h),dR(h,S,null,v,f))):D?D!==u.memoizedState?(bl(h),xi(h),KO(h,D)):(xi(h),h.flags&=-16777217):(u=u.memoizedProps,u!==v&&bl(h),xi(h),dR(h,S,u,v,f)),null;case 27:if(Je(h),f=Ce.current,S=h.type,u!==null&&h.stateNode!=null)u.memoizedProps!==v&&bl(h);else{if(!v){if(h.stateNode===null)throw Error(n(166));return xi(h),null}u=pe.current,Mp(h)?RF(h):(u=tB(S,v,f),h.stateNode=u,bl(h))}return xi(h),null;case 5:if(Je(h),S=h.type,u!==null&&h.stateNode!=null)u.memoizedProps!==v&&bl(h);else{if(!v){if(h.stateNode===null)throw Error(n(166));return xi(h),null}if(D=pe.current,Mp(h))RF(h);else{var L=bw(Ce.current);switch(D){case 1:D=L.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:D=L.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":D=L.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":D=L.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":D=L.createElement("div"),D.innerHTML="<script><\/script>",D=D.removeChild(D.firstChild);break;case"select":D=typeof v.is=="string"?L.createElement("select",{is:v.is}):L.createElement("select"),v.multiple?D.multiple=!0:v.size&&(D.size=v.size);break;default:D=typeof v.is=="string"?L.createElement(S,{is:v.is}):L.createElement(S)}}D[qn]=h,D[Qs]=v;e:for(L=h.child;L!==null;){if(L.tag===5||L.tag===6)D.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===h)break e;for(;L.sibling===null;){if(L.return===null||L.return===h)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}h.stateNode=D;e:switch(Jn(D,S,v),S){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&bl(h)}}return xi(h),dR(h,h.type,u===null?null:u.memoizedProps,h.pendingProps,f),null;case 6:if(u&&h.stateNode!=null)u.memoizedProps!==v&&bl(h);else{if(typeof v!="string"&&h.stateNode===null)throw Error(n(166));if(u=Ce.current,Mp(h)){if(u=h.stateNode,f=h.memoizedProps,v=null,S=Zn,S!==null)switch(S.tag){case 27:case 5:v=S.memoizedProps}u[qn]=h,u=!!(u.nodeValue===f||v!==null&&v.suppressHydrationWarning===!0||W2(u.nodeValue,f)),u||Nc(h,!0)}else u=bw(u).createTextNode(v),u[qn]=h,h.stateNode=u}return xi(h),null;case 31:if(f=h.memoizedState,u===null||u.memoizedState!==null){if(v=Mp(h),f!==null){if(u===null){if(!v)throw Error(n(318));if(u=h.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(557));u[qn]=h}else ud(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;xi(h),u=!1}else f=wA(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=f),u=!0;if(!u)return h.flags&256?(Ro(h),h):(Ro(h),null);if((h.flags&128)!==0)throw Error(n(558))}return xi(h),null;case 13:if(v=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(S=Mp(h),v!==null&&v.dehydrated!==null){if(u===null){if(!S)throw Error(n(318));if(S=h.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[qn]=h}else ud(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;xi(h),S=!1}else S=wA(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=S),S=!0;if(!S)return h.flags&256?(Ro(h),h):(Ro(h),null)}return Ro(h),(h.flags&128)!==0?(h.lanes=f,h):(f=v!==null,u=u!==null&&u.memoizedState!==null,f&&(v=h.child,S=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(S=v.alternate.memoizedState.cachePool.pool),D=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(D=v.memoizedState.cachePool.pool),D!==S&&(v.flags|=2048)),f!==u&&f&&(h.child.flags|=8192),sw(h,h.updateQueue),xi(h),null);case 4:return De(),u===null&&PR(h.stateNode.containerInfo),xi(h),null;case 10:return fl(h.type),xi(h),null;case 19:if(W(an),v=h.memoizedState,v===null)return xi(h),null;if(S=(h.flags&128)!==0,D=v.rendering,D===null)if(S)Om(v,!1);else{if(Qi!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(D=UC(u),D!==null){for(h.flags|=128,Om(v,!1),u=D.updateQueue,h.updateQueue=u,sw(h,u),h.subtreeFlags=0,u=f,f=h.child;f!==null;)SF(f,u),f=f.sibling;return ee(an,an.current&1|2),Pt&&pl(h,v.treeForkCount),h.child}u=u.sibling}v.tail!==null&&dt()>cw&&(h.flags|=128,S=!0,Om(v,!1),h.lanes=4194304)}else{if(!S)if(u=UC(D),u!==null){if(h.flags|=128,S=!0,u=u.updateQueue,h.updateQueue=u,sw(h,u),Om(v,!0),v.tail===null&&v.tailMode==="hidden"&&!D.alternate&&!Pt)return xi(h),null}else 2*dt()-v.renderingStartTime>cw&&f!==536870912&&(h.flags|=128,S=!0,Om(v,!1),h.lanes=4194304);v.isBackwards?(D.sibling=h.child,h.child=D):(u=v.last,u!==null?u.sibling=D:h.child=D,v.last=D)}return v.tail!==null?(u=v.tail,v.rendering=u,v.tail=u.sibling,v.renderingStartTime=dt(),u.sibling=null,f=an.current,ee(an,S?f&1|2:f&1),Pt&&pl(h,v.treeForkCount),u):(xi(h),null);case 22:case 23:return Ro(h),NA(),v=h.memoizedState!==null,u!==null?u.memoizedState!==null!==v&&(h.flags|=8192):v&&(h.flags|=8192),v?(f&536870912)!==0&&(h.flags&128)===0&&(xi(h),h.subtreeFlags&6&&(h.flags|=8192)):xi(h),f=h.updateQueue,f!==null&&sw(h,f.retryQueue),f=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(f=u.memoizedState.cachePool.pool),v=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==f&&(h.flags|=2048),u!==null&&W(pd),null;case 24:return f=null,u!==null&&(f=u.memoizedState.cache),h.memoizedState.cache!==f&&(h.flags|=2048),fl(bn),xi(h),null;case 25:return null;case 30:return null}throw Error(n(156,h.tag))}function Y9(u,h){switch(bA(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return fl(bn),De(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return Je(h),null;case 31:if(h.memoizedState!==null){if(Ro(h),h.alternate===null)throw Error(n(340));ud()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 13:if(Ro(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(n(340));ud()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return W(an),null;case 4:return De(),null;case 10:return fl(h.type),null;case 22:case 23:return Ro(h),NA(),u!==null&&W(pd),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return fl(bn),null;case 25:return null;default:return null}}function qO(u,h){switch(bA(h),h.tag){case 3:fl(bn),De();break;case 26:case 27:case 5:Je(h);break;case 4:De();break;case 31:h.memoizedState!==null&&Ro(h);break;case 13:Ro(h);break;case 19:W(an);break;case 10:fl(h.type);break;case 22:case 23:Ro(h),NA(),u!==null&&W(pd);break;case 24:fl(bn)}}function Bm(u,h){try{var f=h.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var S=v.next;f=S;do{if((f.tag&u)===u){v=void 0;var D=f.create,L=f.inst;v=D(),L.destroy=v}f=f.next}while(f!==S)}}catch(_){ti(h,h.return,_)}}function zc(u,h,f){try{var v=h.updateQueue,S=v!==null?v.lastEffect:null;if(S!==null){var D=S.next;v=D;do{if((v.tag&u)===u){var L=v.inst,_=L.destroy;if(_!==void 0){L.destroy=void 0,S=h;var $=f,se=_;try{se()}catch(ge){ti(S,$,ge)}}}v=v.next}while(v!==D)}}catch(ge){ti(h,h.return,ge)}}function ZO(u){var h=u.updateQueue;if(h!==null){var f=u.stateNode;try{VF(h,f)}catch(v){ti(u,u.return,v)}}}function XO(u,h,f){f.props=vd(u.type,u.memoizedProps),f.state=u.memoizedState;try{f.componentWillUnmount()}catch(v){ti(u,h,v)}}function Gm(u,h){try{var f=u.ref;if(f!==null){switch(u.tag){case 26:case 27:case 5:var v=u.stateNode;break;case 30:v=u.stateNode;break;default:v=u.stateNode}typeof f=="function"?u.refCleanup=f(v):f.current=v}}catch(S){ti(u,h,S)}}function ga(u,h){var f=u.ref,v=u.refCleanup;if(f!==null)if(typeof v=="function")try{v()}catch(S){ti(u,h,S)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(S){ti(u,h,S)}else f.current=null}function QO(u){var h=u.type,f=u.memoizedProps,v=u.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":f.autoFocus&&v.focus();break e;case"img":f.src?v.src=f.src:f.srcSet&&(v.srcset=f.srcSet)}}catch(S){ti(u,u.return,S)}}function hR(u,h,f){try{var v=u.stateNode;fq(v,u.type,f,h),v[Qs]=h}catch(S){ti(u,u.return,S)}}function JO(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Kc(u.type)||u.tag===4}function pR(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||JO(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Kc(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function gR(u,h,f){var v=u.tag;if(v===5||v===6)u=u.stateNode,h?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(u,h):(h=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,h.appendChild(u),f=f._reactRootContainer,f!=null||h.onclick!==null||(h.onclick=ul));else if(v!==4&&(v===27&&Kc(u.type)&&(f=u.stateNode,h=null),u=u.child,u!==null))for(gR(u,h,f),u=u.sibling;u!==null;)gR(u,h,f),u=u.sibling}function ow(u,h,f){var v=u.tag;if(v===5||v===6)u=u.stateNode,h?f.insertBefore(u,h):f.appendChild(u);else if(v!==4&&(v===27&&Kc(u.type)&&(f=u.stateNode),u=u.child,u!==null))for(ow(u,h,f),u=u.sibling;u!==null;)ow(u,h,f),u=u.sibling}function e2(u){var h=u.stateNode,f=u.memoizedProps;try{for(var v=u.type,S=h.attributes;S.length;)h.removeAttributeNode(S[0]);Jn(h,v,f),h[qn]=u,h[Qs]=f}catch(D){ti(u,u.return,D)}}var Cl=!1,Sn=!1,fR=!1,t2=typeof WeakSet=="function"?WeakSet:Set,Wn=null;function K9(u,h){if(u=u.containerInfo,OR=Aw,u=pF(u),lA(u)){if("selectionStart"in u)var f={start:u.selectionStart,end:u.selectionEnd};else e:{f=(f=u.ownerDocument)&&f.defaultView||window;var v=f.getSelection&&f.getSelection();if(v&&v.rangeCount!==0){f=v.anchorNode;var S=v.anchorOffset,D=v.focusNode;v=v.focusOffset;try{f.nodeType,D.nodeType}catch{f=null;break e}var L=0,_=-1,$=-1,se=0,ge=0,ve=u,re=null;t:for(;;){for(var le;ve!==f||S!==0&&ve.nodeType!==3||(_=L+S),ve!==D||v!==0&&ve.nodeType!==3||($=L+v),ve.nodeType===3&&(L+=ve.nodeValue.length),(le=ve.firstChild)!==null;)re=ve,ve=le;for(;;){if(ve===u)break t;if(re===f&&++se===S&&(_=L),re===D&&++ge===v&&($=L),(le=ve.nextSibling)!==null)break;ve=re,re=ve.parentNode}ve=le}f=_===-1||$===-1?null:{start:_,end:$}}else f=null}f=f||{start:0,end:0}}else f=null;for(BR={focusedElem:u,selectionRange:f},Aw=!1,Wn=h;Wn!==null;)if(h=Wn,u=h.child,(h.subtreeFlags&1028)!==0&&u!==null)u.return=h,Wn=u;else for(;Wn!==null;){switch(h=Wn,D=h.alternate,u=h.flags,h.tag){case 0:if((u&4)!==0&&(u=h.updateQueue,u=u!==null?u.events:null,u!==null))for(f=0;f<u.length;f++)S=u[f],S.ref.impl=S.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&D!==null){u=void 0,f=h,S=D.memoizedProps,D=D.memoizedState,v=f.stateNode;try{var _e=vd(f.type,S);u=v.getSnapshotBeforeUpdate(_e,D),v.__reactInternalSnapshotBeforeUpdate=u}catch(et){ti(f,f.return,et)}}break;case 3:if((u&1024)!==0){if(u=h.stateNode.containerInfo,f=u.nodeType,f===9)VR(u);else if(f===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":VR(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(n(163))}if(u=h.sibling,u!==null){u.return=h.return,Wn=u;break}Wn=h.return}}function i2(u,h,f){var v=f.flags;switch(f.tag){case 0:case 11:case 15:Sl(u,f),v&4&&Bm(5,f);break;case 1:if(Sl(u,f),v&4)if(u=f.stateNode,h===null)try{u.componentDidMount()}catch(L){ti(f,f.return,L)}else{var S=vd(f.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(S,h,u.__reactInternalSnapshotBeforeUpdate)}catch(L){ti(f,f.return,L)}}v&64&&ZO(f),v&512&&Gm(f,f.return);break;case 3:if(Sl(u,f),v&64&&(u=f.updateQueue,u!==null)){if(h=null,f.child!==null)switch(f.child.tag){case 27:case 5:h=f.child.stateNode;break;case 1:h=f.child.stateNode}try{VF(u,h)}catch(L){ti(f,f.return,L)}}break;case 27:h===null&&v&4&&e2(f);case 26:case 5:Sl(u,f),h===null&&v&4&&QO(f),v&512&&Gm(f,f.return);break;case 12:Sl(u,f);break;case 31:Sl(u,f),v&4&&o2(u,f);break;case 13:Sl(u,f),v&4&&r2(u,f),v&64&&(u=f.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(f=nq.bind(null,f),xq(u,f))));break;case 22:if(v=f.memoizedState!==null||Cl,!v){h=h!==null&&h.memoizedState!==null||Sn,S=Cl;var D=Sn;Cl=v,(Sn=h)&&!D?xl(u,f,(f.subtreeFlags&8772)!==0):Sl(u,f),Cl=S,Sn=D}break;case 30:break;default:Sl(u,f)}}function n2(u){var h=u.alternate;h!==null&&(u.alternate=null,n2(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&UD(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Ri=null,eo=!1;function wl(u,h,f){for(f=f.child;f!==null;)s2(u,h,f),f=f.sibling}function s2(u,h,f){if(So&&typeof So.onCommitFiberUnmount=="function")try{So.onCommitFiberUnmount(lm,f)}catch{}switch(f.tag){case 26:Sn||ga(f,h),wl(u,h,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Sn||ga(f,h);var v=Ri,S=eo;Kc(f.type)&&(Ri=f.stateNode,eo=!1),wl(u,h,f),Ym(f.stateNode),Ri=v,eo=S;break;case 5:Sn||ga(f,h);case 6:if(v=Ri,S=eo,Ri=null,wl(u,h,f),Ri=v,eo=S,Ri!==null)if(eo)try{(Ri.nodeType===9?Ri.body:Ri.nodeName==="HTML"?Ri.ownerDocument.body:Ri).removeChild(f.stateNode)}catch(D){ti(f,h,D)}else try{Ri.removeChild(f.stateNode)}catch(D){ti(f,h,D)}break;case 18:Ri!==null&&(eo?(u=Ri,Z2(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,f.stateNode),Up(u)):Z2(Ri,f.stateNode));break;case 4:v=Ri,S=eo,Ri=f.stateNode.containerInfo,eo=!0,wl(u,h,f),Ri=v,eo=S;break;case 0:case 11:case 14:case 15:zc(2,f,h),Sn||zc(4,f,h),wl(u,h,f);break;case 1:Sn||(ga(f,h),v=f.stateNode,typeof v.componentWillUnmount=="function"&&XO(f,h,v)),wl(u,h,f);break;case 21:wl(u,h,f);break;case 22:Sn=(v=Sn)||f.memoizedState!==null,wl(u,h,f),Sn=v;break;default:wl(u,h,f)}}function o2(u,h){if(h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{Up(u)}catch(f){ti(h,h.return,f)}}}function r2(u,h){if(h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Up(u)}catch(f){ti(h,h.return,f)}}function q9(u){switch(u.tag){case 31:case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new t2),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new t2),h;default:throw Error(n(435,u.tag))}}function rw(u,h){var f=q9(u);h.forEach(function(v){if(!f.has(v)){f.add(v);var S=sq.bind(null,u,v);v.then(S,S)}})}function to(u,h){var f=h.deletions;if(f!==null)for(var v=0;v<f.length;v++){var S=f[v],D=u,L=h,_=L;e:for(;_!==null;){switch(_.tag){case 27:if(Kc(_.type)){Ri=_.stateNode,eo=!1;break e}break;case 5:Ri=_.stateNode,eo=!1;break e;case 3:case 4:Ri=_.stateNode.containerInfo,eo=!0;break e}_=_.return}if(Ri===null)throw Error(n(160));s2(D,L,S),Ri=null,eo=!1,D=S.alternate,D!==null&&(D.return=null),S.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)a2(h,u),h=h.sibling}var Fr=null;function a2(u,h){var f=u.alternate,v=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:to(h,u),io(u),v&4&&(zc(3,u,u.return),Bm(3,u),zc(5,u,u.return));break;case 1:to(h,u),io(u),v&512&&(Sn||f===null||ga(f,f.return)),v&64&&Cl&&(u=u.updateQueue,u!==null&&(v=u.callbacks,v!==null&&(f=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=f===null?v:f.concat(v))));break;case 26:var S=Fr;if(to(h,u),io(u),v&512&&(Sn||f===null||ga(f,f.return)),v&4){var D=f!==null?f.memoizedState:null;if(v=u.memoizedState,f===null)if(v===null)if(u.stateNode===null){e:{v=u.type,f=u.memoizedProps,S=S.ownerDocument||S;t:switch(v){case"title":D=S.getElementsByTagName("title")[0],(!D||D[dm]||D[qn]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=S.createElement(v),S.head.insertBefore(D,S.querySelector("head > title"))),Jn(D,v,f),D[qn]=u,jn(D),v=D;break e;case"link":var L=aB("link","href",S).get(v+(f.href||""));if(L){for(var _=0;_<L.length;_++)if(D=L[_],D.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&D.getAttribute("rel")===(f.rel==null?null:f.rel)&&D.getAttribute("title")===(f.title==null?null:f.title)&&D.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){L.splice(_,1);break t}}D=S.createElement(v),Jn(D,v,f),S.head.appendChild(D);break;case"meta":if(L=aB("meta","content",S).get(v+(f.content||""))){for(_=0;_<L.length;_++)if(D=L[_],D.getAttribute("content")===(f.content==null?null:""+f.content)&&D.getAttribute("name")===(f.name==null?null:f.name)&&D.getAttribute("property")===(f.property==null?null:f.property)&&D.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&D.getAttribute("charset")===(f.charSet==null?null:f.charSet)){L.splice(_,1);break t}}D=S.createElement(v),Jn(D,v,f),S.head.appendChild(D);break;default:throw Error(n(468,v))}D[qn]=u,jn(D),v=D}u.stateNode=v}else lB(S,u.type,u.stateNode);else u.stateNode=rB(S,v,u.memoizedProps);else D!==v?(D===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):D.count--,v===null?lB(S,u.type,u.stateNode):rB(S,v,u.memoizedProps)):v===null&&u.stateNode!==null&&hR(u,u.memoizedProps,f.memoizedProps)}break;case 27:to(h,u),io(u),v&512&&(Sn||f===null||ga(f,f.return)),f!==null&&v&4&&hR(u,u.memoizedProps,f.memoizedProps);break;case 5:if(to(h,u),io(u),v&512&&(Sn||f===null||ga(f,f.return)),u.flags&32){S=u.stateNode;try{gp(S,"")}catch(_e){ti(u,u.return,_e)}}v&4&&u.stateNode!=null&&(S=u.memoizedProps,hR(u,S,f!==null?f.memoizedProps:S)),v&1024&&(fR=!0);break;case 6:if(to(h,u),io(u),v&4){if(u.stateNode===null)throw Error(n(162));v=u.memoizedProps,f=u.stateNode;try{f.nodeValue=v}catch(_e){ti(u,u.return,_e)}}break;case 3:if(Sw=null,S=Fr,Fr=Cw(h.containerInfo),to(h,u),Fr=S,io(u),v&4&&f!==null&&f.memoizedState.isDehydrated)try{Up(h.containerInfo)}catch(_e){ti(u,u.return,_e)}fR&&(fR=!1,l2(u));break;case 4:v=Fr,Fr=Cw(u.stateNode.containerInfo),to(h,u),io(u),Fr=v;break;case 12:to(h,u),io(u);break;case 31:to(h,u),io(u),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,rw(u,v)));break;case 13:to(h,u),io(u),u.child.flags&8192&&u.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(lw=dt()),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,rw(u,v)));break;case 22:S=u.memoizedState!==null;var $=f!==null&&f.memoizedState!==null,se=Cl,ge=Sn;if(Cl=se||S,Sn=ge||$,to(h,u),Sn=ge,Cl=se,io(u),v&8192)e:for(h=u.stateNode,h._visibility=S?h._visibility&-2:h._visibility|1,S&&(f===null||$||Cl||Sn||bd(u)),f=null,h=u;;){if(h.tag===5||h.tag===26){if(f===null){$=f=h;try{if(D=$.stateNode,S)L=D.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{_=$.stateNode;var ve=$.memoizedProps.style,re=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;_.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(_e){ti($,$.return,_e)}}}else if(h.tag===6){if(f===null){$=h;try{$.stateNode.nodeValue=S?"":$.memoizedProps}catch(_e){ti($,$.return,_e)}}}else if(h.tag===18){if(f===null){$=h;try{var le=$.stateNode;S?X2(le,!0):X2($.stateNode,!1)}catch(_e){ti($,$.return,_e)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}v&4&&(v=u.updateQueue,v!==null&&(f=v.retryQueue,f!==null&&(v.retryQueue=null,rw(u,f))));break;case 19:to(h,u),io(u),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,rw(u,v)));break;case 30:break;case 21:break;default:to(h,u),io(u)}}function io(u){var h=u.flags;if(h&2){try{for(var f,v=u.return;v!==null;){if(JO(v)){f=v;break}v=v.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var S=f.stateNode,D=pR(u);ow(u,D,S);break;case 5:var L=f.stateNode;f.flags&32&&(gp(L,""),f.flags&=-33);var _=pR(u);ow(u,_,L);break;case 3:case 4:var $=f.stateNode.containerInfo,se=pR(u);gR(u,se,$);break;default:throw Error(n(161))}}catch(ge){ti(u,u.return,ge)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function l2(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;l2(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),u=u.sibling}}function Sl(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)i2(u,h.alternate,h),h=h.sibling}function bd(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:zc(4,h,h.return),bd(h);break;case 1:ga(h,h.return);var f=h.stateNode;typeof f.componentWillUnmount=="function"&&XO(h,h.return,f),bd(h);break;case 27:Ym(h.stateNode);case 26:case 5:ga(h,h.return),bd(h);break;case 22:h.memoizedState===null&&bd(h);break;case 30:bd(h);break;default:bd(h)}u=u.sibling}}function xl(u,h,f){for(f=f&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var v=h.alternate,S=u,D=h,L=D.flags;switch(D.tag){case 0:case 11:case 15:xl(S,D,f),Bm(4,D);break;case 1:if(xl(S,D,f),v=D,S=v.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(se){ti(v,v.return,se)}if(v=D,S=v.updateQueue,S!==null){var _=v.stateNode;try{var $=S.shared.hiddenCallbacks;if($!==null)for(S.shared.hiddenCallbacks=null,S=0;S<$.length;S++)_F($[S],_)}catch(se){ti(v,v.return,se)}}f&&L&64&&ZO(D),Gm(D,D.return);break;case 27:e2(D);case 26:case 5:xl(S,D,f),f&&v===null&&L&4&&QO(D),Gm(D,D.return);break;case 12:xl(S,D,f);break;case 31:xl(S,D,f),f&&L&4&&o2(S,D);break;case 13:xl(S,D,f),f&&L&4&&r2(S,D);break;case 22:D.memoizedState===null&&xl(S,D,f),Gm(D,D.return);break;case 30:break;default:xl(S,D,f)}h=h.sibling}}function mR(u,h){var f=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(f=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==f&&(u!=null&&u.refCount++,f!=null&&Mm(f))}function yR(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Mm(u))}function Or(u,h,f,v){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)c2(u,h,f,v),h=h.sibling}function c2(u,h,f,v){var S=h.flags;switch(h.tag){case 0:case 11:case 15:Or(u,h,f,v),S&2048&&Bm(9,h);break;case 1:Or(u,h,f,v);break;case 3:Or(u,h,f,v),S&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&Mm(u)));break;case 12:if(S&2048){Or(u,h,f,v),u=h.stateNode;try{var D=h.memoizedProps,L=D.id,_=D.onPostCommit;typeof _=="function"&&_(L,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch($){ti(h,h.return,$)}}else Or(u,h,f,v);break;case 31:Or(u,h,f,v);break;case 13:Or(u,h,f,v);break;case 23:break;case 22:D=h.stateNode,L=h.alternate,h.memoizedState!==null?D._visibility&2?Or(u,h,f,v):_m(u,h):D._visibility&2?Or(u,h,f,v):(D._visibility|=2,Np(u,h,f,v,(h.subtreeFlags&10256)!==0||!1)),S&2048&&mR(L,h);break;case 24:Or(u,h,f,v),S&2048&&yR(h.alternate,h);break;default:Or(u,h,f,v)}}function Np(u,h,f,v,S){for(S=S&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var D=u,L=h,_=f,$=v,se=L.flags;switch(L.tag){case 0:case 11:case 15:Np(D,L,_,$,S),Bm(8,L);break;case 23:break;case 22:var ge=L.stateNode;L.memoizedState!==null?ge._visibility&2?Np(D,L,_,$,S):_m(D,L):(ge._visibility|=2,Np(D,L,_,$,S)),S&&se&2048&&mR(L.alternate,L);break;case 24:Np(D,L,_,$,S),S&&se&2048&&yR(L.alternate,L);break;default:Np(D,L,_,$,S)}h=h.sibling}}function _m(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var f=u,v=h,S=v.flags;switch(v.tag){case 22:_m(f,v),S&2048&&mR(v.alternate,v);break;case 24:_m(f,v),S&2048&&yR(v.alternate,v);break;default:_m(f,v)}h=h.sibling}}var Vm=8192;function Fp(u,h,f){if(u.subtreeFlags&Vm)for(u=u.child;u!==null;)u2(u,h,f),u=u.sibling}function u2(u,h,f){switch(u.tag){case 26:Fp(u,h,f),u.flags&Vm&&u.memoizedState!==null&&Fq(f,Fr,u.memoizedState,u.memoizedProps);break;case 5:Fp(u,h,f);break;case 3:case 4:var v=Fr;Fr=Cw(u.stateNode.containerInfo),Fp(u,h,f),Fr=v;break;case 22:u.memoizedState===null&&(v=u.alternate,v!==null&&v.memoizedState!==null?(v=Vm,Vm=16777216,Fp(u,h,f),Vm=v):Fp(u,h,f));break;default:Fp(u,h,f)}}function d2(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function zm(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var f=0;f<h.length;f++){var v=h[f];Wn=v,p2(v,u)}d2(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)h2(u),u=u.sibling}function h2(u){switch(u.tag){case 0:case 11:case 15:zm(u),u.flags&2048&&zc(9,u,u.return);break;case 3:zm(u);break;case 12:zm(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&2&&(u.return===null||u.return.tag!==13)?(h._visibility&=-3,aw(u)):zm(u);break;default:zm(u)}}function aw(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var f=0;f<h.length;f++){var v=h[f];Wn=v,p2(v,u)}d2(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:zc(8,h,h.return),aw(h);break;case 22:f=h.stateNode,f._visibility&2&&(f._visibility&=-3,aw(h));break;default:aw(h)}u=u.sibling}}function p2(u,h){for(;Wn!==null;){var f=Wn;switch(f.tag){case 0:case 11:case 15:zc(8,f,h);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var v=f.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Mm(f.memoizedState.cache)}if(v=f.child,v!==null)v.return=f,Wn=v;else e:for(f=u;Wn!==null;){v=Wn;var S=v.sibling,D=v.return;if(n2(v),v===f){Wn=null;break e}if(S!==null){S.return=D,Wn=S;break e}Wn=D}}}var Z9={getCacheForType:function(u){var h=Xn(bn),f=h.data.get(u);return f===void 0&&(f=u(),h.data.set(u,f)),f},cacheSignal:function(){return Xn(bn).controller.signal}},X9=typeof WeakMap=="function"?WeakMap:Map,Wt=0,mi=null,St=null,Dt=0,ei=0,Eo=null,Hc=!1,Op=!1,vR=!1,Ml=0,Qi=0,jc=0,Cd=0,bR=0,To=0,Bp=0,Hm=null,no=null,CR=!1,lw=0,g2=0,cw=1/0,uw=null,Wc=null,Ln=0,Uc=null,Gp=null,Dl=0,wR=0,SR=null,f2=null,jm=0,xR=null;function Io(){return(Wt&2)!==0&&Dt!==0?Dt&-Dt:H.T!==null?TR():kN()}function m2(){if(To===0)if((Dt&536870912)===0||Pt){var u=vC;vC<<=1,(vC&3932160)===0&&(vC=262144),To=u}else To=536870912;return u=Ao.current,u!==null&&(u.flags|=32),To}function so(u,h,f){(u===mi&&(ei===2||ei===9)||u.cancelPendingCommit!==null)&&(_p(u,0),$c(u,Dt,To,!1)),um(u,f),((Wt&2)===0||u!==mi)&&(u===mi&&((Wt&2)===0&&(Cd|=f),Qi===4&&$c(u,Dt,To,!1)),fa(u))}function y2(u,h,f){if((Wt&6)!==0)throw Error(n(327));var v=!f&&(h&127)===0&&(h&u.expiredLanes)===0||cm(u,h),S=v?eq(u,h):DR(u,h,!0),D=v;do{if(S===0){Op&&!v&&$c(u,h,0,!1);break}else{if(f=u.current.alternate,D&&!Q9(f)){S=DR(u,h,!1),D=!1;continue}if(S===2){if(D=h,u.errorRecoveryDisabledLanes&D)var L=0;else L=u.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){h=L;e:{var _=u;S=Hm;var $=_.current.memoizedState.isDehydrated;if($&&(_p(_,L).flags|=256),L=DR(_,L,!1),L!==2){if(vR&&!$){_.errorRecoveryDisabledLanes|=D,Cd|=D,S=4;break e}D=no,no=S,D!==null&&(no===null?no=D:no.push.apply(no,D))}S=L}if(D=!1,S!==2)continue}}if(S===1){_p(u,0),$c(u,h,0,!0);break}e:{switch(v=u,D=S,D){case 0:case 1:throw Error(n(345));case 4:if((h&4194048)!==h)break;case 6:$c(v,h,To,!Hc);break e;case 2:no=null;break;case 3:case 5:break;default:throw Error(n(329))}if((h&62914560)===h&&(S=lw+300-dt(),10<S)){if($c(v,h,To,!Hc),CC(v,0,!0)!==0)break e;Dl=h,v.timeoutHandle=K2(v2.bind(null,v,f,no,uw,CR,h,To,Cd,Bp,Hc,D,"Throttled",-0,0),S);break e}v2(v,f,no,uw,CR,h,To,Cd,Bp,Hc,D,null,-0,0)}}break}while(!0);fa(u)}function v2(u,h,f,v,S,D,L,_,$,se,ge,ve,re,le){if(u.timeoutHandle=-1,ve=h.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ul},u2(h,D,ve);var _e=(D&62914560)===D?lw-dt():(D&4194048)===D?g2-dt():0;if(_e=Oq(ve,_e),_e!==null){Dl=D,u.cancelPendingCommit=_e(A2.bind(null,u,h,D,f,v,S,L,_,$,ge,ve,null,re,le)),$c(u,D,L,!se);return}}A2(u,h,D,f,v,S,L,_,$)}function Q9(u){for(var h=u;;){var f=h.tag;if((f===0||f===11||f===15)&&h.flags&16384&&(f=h.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var v=0;v<f.length;v++){var S=f[v],D=S.getSnapshot;S=S.value;try{if(!Mo(D(),S))return!1}catch{return!1}}if(f=h.child,h.subtreeFlags&16384&&f!==null)f.return=h,h=f;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function $c(u,h,f,v){h&=~bR,h&=~Cd,u.suspendedLanes|=h,u.pingedLanes&=~h,v&&(u.warmLanes|=h),v=u.expirationTimes;for(var S=h;0<S;){var D=31-xo(S),L=1<<D;v[D]=-1,S&=~L}f!==0&&EN(u,f,h)}function dw(){return(Wt&6)===0?(Wm(0),!1):!0}function MR(){if(St!==null){if(ei===0)var u=St.return;else u=St,gl=dd=null,VA(u),Tp=null,Am=0,u=St;for(;u!==null;)qO(u.alternate,u),u=u.return;St=null}}function _p(u,h){var f=u.timeoutHandle;f!==-1&&(u.timeoutHandle=-1,vq(f)),f=u.cancelPendingCommit,f!==null&&(u.cancelPendingCommit=null,f()),Dl=0,MR(),mi=u,St=f=hl(u.current,null),Dt=h,ei=0,Eo=null,Hc=!1,Op=cm(u,h),vR=!1,Bp=To=bR=Cd=jc=Qi=0,no=Hm=null,CR=!1,(h&8)!==0&&(h|=h&32);var v=u.entangledLanes;if(v!==0)for(u=u.entanglements,v&=h;0<v;){var S=31-xo(v),D=1<<S;h|=u[S],v&=~D}return Ml=h,LC(),f}function b2(u,h){mt=null,H.H=Nm,h===Ep||h===VC?(h=FF(),ei=3):h===EA?(h=FF(),ei=4):ei=h===iR?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Eo=h,St===null&&(Qi=1,ew(u,Qo(h,u.current)))}function C2(){var u=Ao.current;return u===null?!0:(Dt&4194048)===Dt?ir===null:(Dt&62914560)===Dt||(Dt&536870912)!==0?u===ir:!1}function w2(){var u=H.H;return H.H=Nm,u===null?Nm:u}function S2(){var u=H.A;return H.A=Z9,u}function hw(){Qi=4,Hc||(Dt&4194048)!==Dt&&Ao.current!==null||(Op=!0),(jc&134217727)===0&&(Cd&134217727)===0||mi===null||$c(mi,Dt,To,!1)}function DR(u,h,f){var v=Wt;Wt|=2;var S=w2(),D=S2();(mi!==u||Dt!==h)&&(uw=null,_p(u,h)),h=!1;var L=Qi;e:do try{if(ei!==0&&St!==null){var _=St,$=Eo;switch(ei){case 8:MR(),L=6;break e;case 3:case 2:case 9:case 6:Ao.current===null&&(h=!0);var se=ei;if(ei=0,Eo=null,Vp(u,_,$,se),f&&Op){L=0;break e}break;default:se=ei,ei=0,Eo=null,Vp(u,_,$,se)}}J9(),L=Qi;break}catch(ge){b2(u,ge)}while(!0);return h&&u.shellSuspendCounter++,gl=dd=null,Wt=v,H.H=S,H.A=D,St===null&&(mi=null,Dt=0,LC()),L}function J9(){for(;St!==null;)x2(St)}function eq(u,h){var f=Wt;Wt|=2;var v=w2(),S=S2();mi!==u||Dt!==h?(uw=null,cw=dt()+500,_p(u,h)):Op=cm(u,h);e:do try{if(ei!==0&&St!==null){h=St;var D=Eo;t:switch(ei){case 1:ei=0,Eo=null,Vp(u,h,D,1);break;case 2:case 9:if(PF(D)){ei=0,Eo=null,M2(h);break}h=function(){ei!==2&&ei!==9||mi!==u||(ei=7),fa(u)},D.then(h,h);break e;case 3:ei=7;break e;case 4:ei=5;break e;case 7:PF(D)?(ei=0,Eo=null,M2(h)):(ei=0,Eo=null,Vp(u,h,D,7));break;case 5:var L=null;switch(St.tag){case 26:L=St.memoizedState;case 5:case 27:var _=St;if(L?cB(L):_.stateNode.complete){ei=0,Eo=null;var $=_.sibling;if($!==null)St=$;else{var se=_.return;se!==null?(St=se,pw(se)):St=null}break t}}ei=0,Eo=null,Vp(u,h,D,5);break;case 6:ei=0,Eo=null,Vp(u,h,D,6);break;case 8:MR(),Qi=6;break e;default:throw Error(n(462))}}tq();break}catch(ge){b2(u,ge)}while(!0);return gl=dd=null,H.H=v,H.A=S,Wt=f,St!==null?0:(mi=null,Dt=0,LC(),Qi)}function tq(){for(;St!==null&&!Lt();)x2(St)}function x2(u){var h=YO(u.alternate,u,Ml);u.memoizedProps=u.pendingProps,h===null?pw(u):St=h}function M2(u){var h=u,f=h.alternate;switch(h.tag){case 15:case 0:h=zO(f,h,h.pendingProps,h.type,void 0,Dt);break;case 11:h=zO(f,h,h.pendingProps,h.type.render,h.ref,Dt);break;case 5:VA(h);default:qO(f,h),h=St=SF(h,Ml),h=YO(f,h,Ml)}u.memoizedProps=u.pendingProps,h===null?pw(u):St=h}function Vp(u,h,f,v){gl=dd=null,VA(h),Tp=null,Am=0;var S=h.return;try{if(j9(u,S,h,f,Dt)){Qi=1,ew(u,Qo(f,u.current)),St=null;return}}catch(D){if(S!==null)throw St=S,D;Qi=1,ew(u,Qo(f,u.current)),St=null;return}h.flags&32768?(Pt||v===1?u=!0:Op||(Dt&536870912)!==0?u=!1:(Hc=u=!0,(v===2||v===9||v===3||v===6)&&(v=Ao.current,v!==null&&v.tag===13&&(v.flags|=16384))),D2(h,u)):pw(h)}function pw(u){var h=u;do{if((h.flags&32768)!==0){D2(h,Hc);return}u=h.return;var f=$9(h.alternate,h,Ml);if(f!==null){St=f;return}if(h=h.sibling,h!==null){St=h;return}St=h=u}while(h!==null);Qi===0&&(Qi=5)}function D2(u,h){do{var f=Y9(u.alternate,u);if(f!==null){f.flags&=32767,St=f;return}if(f=u.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!h&&(u=u.sibling,u!==null)){St=u;return}St=u=f}while(u!==null);Qi=6,St=null}function A2(u,h,f,v,S,D,L,_,$){u.cancelPendingCommit=null;do gw();while(Ln!==0);if((Wt&6)!==0)throw Error(n(327));if(h!==null){if(h===u.current)throw Error(n(177));if(D=h.lanes|h.childLanes,D|=pA,N8(u,f,D,L,_,$),u===mi&&(St=mi=null,Dt=0),Gp=h,Uc=u,Dl=f,wR=D,SR=S,f2=v,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,oq(Ot,function(){return k2(),null})):(u.callbackNode=null,u.callbackPriority=0),v=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||v){v=H.T,H.T=null,S=K.p,K.p=2,L=Wt,Wt|=4;try{K9(u,h,f)}finally{Wt=L,K.p=S,H.T=v}}Ln=1,R2(),E2(),T2()}}function R2(){if(Ln===1){Ln=0;var u=Uc,h=Gp,f=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var v=K.p;K.p=2;var S=Wt;Wt|=4;try{a2(h,u);var D=BR,L=pF(u.containerInfo),_=D.focusedElem,$=D.selectionRange;if(L!==_&&_&&_.ownerDocument&&hF(_.ownerDocument.documentElement,_)){if($!==null&&lA(_)){var se=$.start,ge=$.end;if(ge===void 0&&(ge=se),"selectionStart"in _)_.selectionStart=se,_.selectionEnd=Math.min(ge,_.value.length);else{var ve=_.ownerDocument||document,re=ve&&ve.defaultView||window;if(re.getSelection){var le=re.getSelection(),_e=_.textContent.length,et=Math.min($.start,_e),hi=$.end===void 0?et:Math.min($.end,_e);!le.extend&&et>hi&&(L=hi,hi=et,et=L);var ie=dF(_,et),Q=dF(_,hi);if(ie&&Q&&(le.rangeCount!==1||le.anchorNode!==ie.node||le.anchorOffset!==ie.offset||le.focusNode!==Q.node||le.focusOffset!==Q.offset)){var ne=ve.createRange();ne.setStart(ie.node,ie.offset),le.removeAllRanges(),et>hi?(le.addRange(ne),le.extend(Q.node,Q.offset)):(ne.setEnd(Q.node,Q.offset),le.addRange(ne))}}}}for(ve=[],le=_;le=le.parentNode;)le.nodeType===1&&ve.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ve.length;_++){var me=ve[_];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Aw=!!OR,BR=OR=null}finally{Wt=S,K.p=v,H.T=f}}u.current=h,Ln=2}}function E2(){if(Ln===2){Ln=0;var u=Uc,h=Gp,f=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var v=K.p;K.p=2;var S=Wt;Wt|=4;try{i2(u,h.alternate,h)}finally{Wt=S,K.p=v,H.T=f}}Ln=3}}function T2(){if(Ln===4||Ln===3){Ln=0,li();var u=Uc,h=Gp,f=Dl,v=f2;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Ln=5:(Ln=0,Gp=Uc=null,I2(u,u.pendingLanes));var S=u.pendingLanes;if(S===0&&(Wc=null),jD(f),h=h.stateNode,So&&typeof So.onCommitFiberRoot=="function")try{So.onCommitFiberRoot(lm,h,void 0,(h.current.flags&128)===128)}catch{}if(v!==null){h=H.T,S=K.p,K.p=2,H.T=null;try{for(var D=u.onRecoverableError,L=0;L<v.length;L++){var _=v[L];D(_.value,{componentStack:_.stack})}}finally{H.T=h,K.p=S}}(Dl&3)!==0&&gw(),fa(u),S=u.pendingLanes,(f&261930)!==0&&(S&42)!==0?u===xR?jm++:(jm=0,xR=u):jm=0,Wm(0)}}function I2(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,Mm(h)))}function gw(){return R2(),E2(),T2(),k2()}function k2(){if(Ln!==5)return!1;var u=Uc,h=wR;wR=0;var f=jD(Dl),v=H.T,S=K.p;try{K.p=32>f?32:f,H.T=null,f=SR,SR=null;var D=Uc,L=Dl;if(Ln=0,Gp=Uc=null,Dl=0,(Wt&6)!==0)throw Error(n(331));var _=Wt;if(Wt|=4,h2(D.current),c2(D,D.current,L,f),Wt=_,Wm(0,!1),So&&typeof So.onPostCommitFiberRoot=="function")try{So.onPostCommitFiberRoot(lm,D)}catch{}return!0}finally{K.p=S,H.T=v,I2(u,h)}}function L2(u,h,f){h=Qo(f,h),h=tR(u.stateNode,h,2),u=Gc(u,h,2),u!==null&&(um(u,2),fa(u))}function ti(u,h,f){if(u.tag===3)L2(u,u,f);else for(;h!==null;){if(h.tag===3){L2(h,u,f);break}else if(h.tag===1){var v=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Wc===null||!Wc.has(v))){u=Qo(f,u),f=PO(2),v=Gc(h,f,2),v!==null&&(NO(f,v,h,u),um(v,2),fa(v));break}}h=h.return}}function AR(u,h,f){var v=u.pingCache;if(v===null){v=u.pingCache=new X9;var S=new Set;v.set(h,S)}else S=v.get(h),S===void 0&&(S=new Set,v.set(h,S));S.has(f)||(vR=!0,S.add(f),u=iq.bind(null,u,h,f),h.then(u,u))}function iq(u,h,f){var v=u.pingCache;v!==null&&v.delete(h),u.pingedLanes|=u.suspendedLanes&f,u.warmLanes&=~f,mi===u&&(Dt&f)===f&&(Qi===4||Qi===3&&(Dt&62914560)===Dt&&300>dt()-lw?(Wt&2)===0&&_p(u,0):bR|=f,Bp===Dt&&(Bp=0)),fa(u)}function P2(u,h){h===0&&(h=RN()),u=ld(u,h),u!==null&&(um(u,h),fa(u))}function nq(u){var h=u.memoizedState,f=0;h!==null&&(f=h.retryLane),P2(u,f)}function sq(u,h){var f=0;switch(u.tag){case 31:case 13:var v=u.stateNode,S=u.memoizedState;S!==null&&(f=S.retryLane);break;case 19:v=u.stateNode;break;case 22:v=u.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(h),P2(u,f)}function oq(u,h){return Ve(u,h)}var fw=null,zp=null,RR=!1,mw=!1,ER=!1,Yc=0;function fa(u){u!==zp&&u.next===null&&(zp===null?fw=zp=u:zp=zp.next=u),mw=!0,RR||(RR=!0,aq())}function Wm(u,h){if(!ER&&mw){ER=!0;do for(var f=!1,v=fw;v!==null;){if(u!==0){var S=v.pendingLanes;if(S===0)var D=0;else{var L=v.suspendedLanes,_=v.pingedLanes;D=(1<<31-xo(42|u)+1)-1,D&=S&~(L&~_),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(f=!0,B2(v,D))}else D=Dt,D=CC(v,v===mi?D:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(D&3)===0||cm(v,D)||(f=!0,B2(v,D));v=v.next}while(f);ER=!1}}function rq(){N2()}function N2(){mw=RR=!1;var u=0;Yc!==0&&yq()&&(u=Yc);for(var h=dt(),f=null,v=fw;v!==null;){var S=v.next,D=F2(v,h);D===0?(v.next=null,f===null?fw=S:f.next=S,S===null&&(zp=f)):(f=v,(u!==0||(D&3)!==0)&&(mw=!0)),v=S}Ln!==0&&Ln!==5||Wm(u),Yc!==0&&(Yc=0)}function F2(u,h){for(var f=u.suspendedLanes,v=u.pingedLanes,S=u.expirationTimes,D=u.pendingLanes&-62914561;0<D;){var L=31-xo(D),_=1<<L,$=S[L];$===-1?((_&f)===0||(_&v)!==0)&&(S[L]=P8(_,h)):$<=h&&(u.expiredLanes|=_),D&=~_}if(h=mi,f=Dt,f=CC(u,u===h?f:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),v=u.callbackNode,f===0||u===h&&(ei===2||ei===9)||u.cancelPendingCommit!==null)return v!==null&&v!==null&&ot(v),u.callbackNode=null,u.callbackPriority=0;if((f&3)===0||cm(u,f)){if(h=f&-f,h===u.callbackPriority)return h;switch(v!==null&&ot(v),jD(f)){case 2:case 8:f=Zi;break;case 32:f=Ot;break;case 268435456:f=da;break;default:f=Ot}return v=O2.bind(null,u),f=Ve(f,v),u.callbackPriority=h,u.callbackNode=f,h}return v!==null&&v!==null&&ot(v),u.callbackPriority=2,u.callbackNode=null,2}function O2(u,h){if(Ln!==0&&Ln!==5)return u.callbackNode=null,u.callbackPriority=0,null;var f=u.callbackNode;if(gw()&&u.callbackNode!==f)return null;var v=Dt;return v=CC(u,u===mi?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),v===0?null:(y2(u,v,h),F2(u,dt()),u.callbackNode!=null&&u.callbackNode===f?O2.bind(null,u):null)}function B2(u,h){if(gw())return null;y2(u,h,!0)}function aq(){bq(function(){(Wt&6)!==0?Ve(_s,rq):N2()})}function TR(){if(Yc===0){var u=Ap;u===0&&(u=yC,yC<<=1,(yC&261888)===0&&(yC=256)),Yc=u}return Yc}function G2(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:MC(""+u)}function _2(u,h){var f=h.ownerDocument.createElement("input");return f.name=h.name,f.value=h.value,u.id&&f.setAttribute("form",u.id),h.parentNode.insertBefore(f,h),u=new FormData(u),f.parentNode.removeChild(f),u}function lq(u,h,f,v,S){if(h==="submit"&&f&&f.stateNode===S){var D=G2((S[Qs]||null).action),L=v.submitter;L&&(h=(h=L[Qs]||null)?G2(h.formAction):L.getAttribute("formAction"),h!==null&&(D=h,L=null));var _=new EC("action","action",null,v,S);u.push({event:_,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Yc!==0){var $=L?_2(S,L):new FormData(S);qA(f,{pending:!0,data:$,method:S.method,action:D},null,$)}}else typeof D=="function"&&(_.preventDefault(),$=L?_2(S,L):new FormData(S),qA(f,{pending:!0,data:$,method:S.method,action:D},D,$))},currentTarget:S}]})}}for(var IR=0;IR<hA.length;IR++){var kR=hA[IR],cq=kR.toLowerCase(),uq=kR[0].toUpperCase()+kR.slice(1);Nr(cq,"on"+uq)}Nr(mF,"onAnimationEnd"),Nr(yF,"onAnimationIteration"),Nr(vF,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(A9,"onTransitionRun"),Nr(R9,"onTransitionStart"),Nr(E9,"onTransitionCancel"),Nr(bF,"onTransitionEnd"),hp("onMouseEnter",["mouseout","mouseover"]),hp("onMouseLeave",["mouseout","mouseover"]),hp("onPointerEnter",["pointerout","pointerover"]),hp("onPointerLeave",["pointerout","pointerover"]),sd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sd("onBeforeInput",["compositionend","keypress","textInput","paste"]),sd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Um="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Um));function V2(u,h){h=(h&4)!==0;for(var f=0;f<u.length;f++){var v=u[f],S=v.event;v=v.listeners;e:{var D=void 0;if(h)for(var L=v.length-1;0<=L;L--){var _=v[L],$=_.instance,se=_.currentTarget;if(_=_.listener,$!==D&&S.isPropagationStopped())break e;D=_,S.currentTarget=se;try{D(S)}catch(ge){kC(ge)}S.currentTarget=null,D=$}else for(L=0;L<v.length;L++){if(_=v[L],$=_.instance,se=_.currentTarget,_=_.listener,$!==D&&S.isPropagationStopped())break e;D=_,S.currentTarget=se;try{D(S)}catch(ge){kC(ge)}S.currentTarget=null,D=$}}}}function xt(u,h){var f=h[WD];f===void 0&&(f=h[WD]=new Set);var v=u+"__bubble";f.has(v)||(z2(h,u,2,!1),f.add(v))}function LR(u,h,f){var v=0;h&&(v|=4),z2(f,u,v,h)}var yw="_reactListening"+Math.random().toString(36).slice(2);function PR(u){if(!u[yw]){u[yw]=!0,NN.forEach(function(f){f!=="selectionchange"&&(dq.has(f)||LR(f,!1,u),LR(f,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[yw]||(h[yw]=!0,LR("selectionchange",!1,h))}}function z2(u,h,f,v){switch(mB(h)){case 2:var S=_q;break;case 8:S=Vq;break;default:S=KR}f=S.bind(null,h,f,u),S=void 0,!JD||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(S=!0),v?S!==void 0?u.addEventListener(h,f,{capture:!0,passive:S}):u.addEventListener(h,f,!0):S!==void 0?u.addEventListener(h,f,{passive:S}):u.addEventListener(h,f,!1)}function NR(u,h,f,v,S){var D=v;if((h&1)===0&&(h&2)===0&&v!==null)e:for(;;){if(v===null)return;var L=v.tag;if(L===3||L===4){var _=v.stateNode.containerInfo;if(_===S)break;if(L===4)for(L=v.return;L!==null;){var $=L.tag;if(($===3||$===4)&&L.stateNode.containerInfo===S)return;L=L.return}for(;_!==null;){if(L=cp(_),L===null)return;if($=L.tag,$===5||$===6||$===26||$===27){v=D=L;continue e}_=_.parentNode}}v=v.return}$N(function(){var se=D,ge=XD(f),ve=[];e:{var re=CF.get(u);if(re!==void 0){var le=EC,_e=u;switch(u){case"keypress":if(AC(f)===0)break e;case"keydown":case"keyup":le=s9;break;case"focusin":_e="focus",le=nA;break;case"focusout":_e="blur",le=nA;break;case"beforeblur":case"afterblur":le=nA;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=qN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=$8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=a9;break;case mF:case yF:case vF:le=q8;break;case bF:le=c9;break;case"scroll":case"scrollend":le=W8;break;case"wheel":le=d9;break;case"copy":case"cut":case"paste":le=X8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=XN;break;case"toggle":case"beforetoggle":le=p9}var et=(h&4)!==0,hi=!et&&(u==="scroll"||u==="scrollend"),ie=et?re!==null?re+"Capture":null:re;et=[];for(var Q=se,ne;Q!==null;){var me=Q;if(ne=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||ne===null||ie===null||(me=pm(Q,ie),me!=null&&et.push($m(Q,me,ne))),hi)break;Q=Q.return}0<et.length&&(re=new le(re,_e,null,f,ge),ve.push({event:re,listeners:et}))}}if((h&7)===0){e:{if(re=u==="mouseover"||u==="pointerover",le=u==="mouseout"||u==="pointerout",re&&f!==ZD&&(_e=f.relatedTarget||f.fromElement)&&(cp(_e)||_e[lp]))break e;if((le||re)&&(re=ge.window===ge?ge:(re=ge.ownerDocument)?re.defaultView||re.parentWindow:window,le?(_e=f.relatedTarget||f.toElement,le=se,_e=_e?cp(_e):null,_e!==null&&(hi=o(_e),et=_e.tag,_e!==hi||et!==5&&et!==27&&et!==6)&&(_e=null)):(le=null,_e=se),le!==_e)){if(et=qN,me="onMouseLeave",ie="onMouseEnter",Q="mouse",(u==="pointerout"||u==="pointerover")&&(et=XN,me="onPointerLeave",ie="onPointerEnter",Q="pointer"),hi=le==null?re:hm(le),ne=_e==null?re:hm(_e),re=new et(me,Q+"leave",le,f,ge),re.target=hi,re.relatedTarget=ne,me=null,cp(ge)===se&&(et=new et(ie,Q+"enter",_e,f,ge),et.target=ne,et.relatedTarget=hi,me=et),hi=me,le&&_e)t:{for(et=hq,ie=le,Q=_e,ne=0,me=ie;me;me=et(me))ne++;me=0;for(var Ke=Q;Ke;Ke=et(Ke))me++;for(;0<ne-me;)ie=et(ie),ne--;for(;0<me-ne;)Q=et(Q),me--;for(;ne--;){if(ie===Q||Q!==null&&ie===Q.alternate){et=ie;break t}ie=et(ie),Q=et(Q)}et=null}else et=null;le!==null&&H2(ve,re,le,et,!1),_e!==null&&hi!==null&&H2(ve,hi,_e,et,!0)}}e:{if(re=se?hm(se):window,le=re.nodeName&&re.nodeName.toLowerCase(),le==="select"||le==="input"&&re.type==="file")var zt=oF;else if(nF(re))if(rF)zt=x9;else{zt=w9;var He=C9}else le=re.nodeName,!le||le.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?se&&qD(se.elementType)&&(zt=oF):zt=S9;if(zt&&(zt=zt(u,se))){sF(ve,zt,f,ge);break e}He&&He(u,re,se),u==="focusout"&&se&&re.type==="number"&&se.memoizedProps.value!=null&&KD(re,"number",re.value)}switch(He=se?hm(se):window,u){case"focusin":(nF(He)||He.contentEditable==="true")&&(vp=He,cA=se,wm=null);break;case"focusout":wm=cA=vp=null;break;case"mousedown":uA=!0;break;case"contextmenu":case"mouseup":case"dragend":uA=!1,gF(ve,f,ge);break;case"selectionchange":if(D9)break;case"keydown":case"keyup":gF(ve,f,ge)}var vt;if(oA)e:{switch(u){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else yp?tF(u,f)&&(At="onCompositionEnd"):u==="keydown"&&f.keyCode===229&&(At="onCompositionStart");At&&(QN&&f.locale!=="ko"&&(yp||At!=="onCompositionStart"?At==="onCompositionEnd"&&yp&&(vt=YN()):(kc=ge,eA="value"in kc?kc.value:kc.textContent,yp=!0)),He=vw(se,At),0<He.length&&(At=new ZN(At,u,null,f,ge),ve.push({event:At,listeners:He}),vt?At.data=vt:(vt=iF(f),vt!==null&&(At.data=vt)))),(vt=f9?m9(u,f):y9(u,f))&&(At=vw(se,"onBeforeInput"),0<At.length&&(He=new ZN("onBeforeInput","beforeinput",null,f,ge),ve.push({event:He,listeners:At}),He.data=vt)),lq(ve,u,se,f,ge)}V2(ve,h)})}function $m(u,h,f){return{instance:u,listener:h,currentTarget:f}}function vw(u,h){for(var f=h+"Capture",v=[];u!==null;){var S=u,D=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||D===null||(S=pm(u,f),S!=null&&v.unshift($m(u,S,D)),S=pm(u,h),S!=null&&v.push($m(u,S,D))),u.tag===3)return v;u=u.return}return[]}function hq(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function H2(u,h,f,v,S){for(var D=h._reactName,L=[];f!==null&&f!==v;){var _=f,$=_.alternate,se=_.stateNode;if(_=_.tag,$!==null&&$===v)break;_!==5&&_!==26&&_!==27||se===null||($=se,S?(se=pm(f,D),se!=null&&L.unshift($m(f,se,$))):S||(se=pm(f,D),se!=null&&L.push($m(f,se,$)))),f=f.return}L.length!==0&&u.push({event:h,listeners:L})}var pq=/\r\n?/g,gq=/\u0000|\uFFFD/g;function j2(u){return(typeof u=="string"?u:""+u).replace(pq,`
`).replace(gq,"")}function W2(u,h){return h=j2(h),j2(u)===h}function di(u,h,f,v,S,D){switch(f){case"children":typeof v=="string"?h==="body"||h==="textarea"&&v===""||gp(u,v):(typeof v=="number"||typeof v=="bigint")&&h!=="body"&&gp(u,""+v);break;case"className":SC(u,"class",v);break;case"tabIndex":SC(u,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":SC(u,f,v);break;case"style":WN(u,v,D);break;case"data":if(h!=="object"){SC(u,"data",v);break}case"src":case"href":if(v===""&&(h!=="a"||f!=="href")){u.removeAttribute(f);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){u.removeAttribute(f);break}v=MC(""+v),u.setAttribute(f,v);break;case"action":case"formAction":if(typeof v=="function"){u.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(f==="formAction"?(h!=="input"&&di(u,h,"name",S.name,S,null),di(u,h,"formEncType",S.formEncType,S,null),di(u,h,"formMethod",S.formMethod,S,null),di(u,h,"formTarget",S.formTarget,S,null)):(di(u,h,"encType",S.encType,S,null),di(u,h,"method",S.method,S,null),di(u,h,"target",S.target,S,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){u.removeAttribute(f);break}v=MC(""+v),u.setAttribute(f,v);break;case"onClick":v!=null&&(u.onclick=ul);break;case"onScroll":v!=null&&xt("scroll",u);break;case"onScrollEnd":v!=null&&xt("scrollend",u);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(f=v.__html,f!=null){if(S.children!=null)throw Error(n(60));u.innerHTML=f}}break;case"multiple":u.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":u.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){u.removeAttribute("xlink:href");break}f=MC(""+v),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(f,""+v):u.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(f,""):u.removeAttribute(f);break;case"capture":case"download":v===!0?u.setAttribute(f,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(f,v):u.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?u.setAttribute(f,v):u.removeAttribute(f);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?u.removeAttribute(f):u.setAttribute(f,v);break;case"popover":xt("beforetoggle",u),xt("toggle",u),wC(u,"popover",v);break;case"xlinkActuate":cl(u,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":cl(u,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":cl(u,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":cl(u,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":cl(u,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":cl(u,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":cl(u,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":cl(u,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":cl(u,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":wC(u,"is",v);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=H8.get(f)||f,wC(u,f,v))}}function FR(u,h,f,v,S,D){switch(f){case"style":WN(u,v,D);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(f=v.__html,f!=null){if(S.children!=null)throw Error(n(60));u.innerHTML=f}}break;case"children":typeof v=="string"?gp(u,v):(typeof v=="number"||typeof v=="bigint")&&gp(u,""+v);break;case"onScroll":v!=null&&xt("scroll",u);break;case"onScrollEnd":v!=null&&xt("scrollend",u);break;case"onClick":v!=null&&(u.onclick=ul);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!FN.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(S=f.endsWith("Capture"),h=f.slice(2,S?f.length-7:void 0),D=u[Qs]||null,D=D!=null?D[f]:null,typeof D=="function"&&u.removeEventListener(h,D,S),typeof v=="function")){typeof D!="function"&&D!==null&&(f in u?u[f]=null:u.hasAttribute(f)&&u.removeAttribute(f)),u.addEventListener(h,v,S);break e}f in u?u[f]=v:v===!0?u.setAttribute(f,""):wC(u,f,v)}}}function Jn(u,h,f){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",u),xt("load",u);var v=!1,S=!1,D;for(D in f)if(f.hasOwnProperty(D)){var L=f[D];if(L!=null)switch(D){case"src":v=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,h));default:di(u,h,D,L,f,null)}}S&&di(u,h,"srcSet",f.srcSet,f,null),v&&di(u,h,"src",f.src,f,null);return;case"input":xt("invalid",u);var _=D=L=S=null,$=null,se=null;for(v in f)if(f.hasOwnProperty(v)){var ge=f[v];if(ge!=null)switch(v){case"name":S=ge;break;case"type":L=ge;break;case"checked":$=ge;break;case"defaultChecked":se=ge;break;case"value":D=ge;break;case"defaultValue":_=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(n(137,h));break;default:di(u,h,v,ge,f,null)}}VN(u,D,_,$,se,L,S,!1);return;case"select":xt("invalid",u),v=L=D=null;for(S in f)if(f.hasOwnProperty(S)&&(_=f[S],_!=null))switch(S){case"value":D=_;break;case"defaultValue":L=_;break;case"multiple":v=_;default:di(u,h,S,_,f,null)}h=D,f=L,u.multiple=!!v,h!=null?pp(u,!!v,h,!1):f!=null&&pp(u,!!v,f,!0);return;case"textarea":xt("invalid",u),D=S=v=null;for(L in f)if(f.hasOwnProperty(L)&&(_=f[L],_!=null))switch(L){case"value":v=_;break;case"defaultValue":S=_;break;case"children":D=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:di(u,h,L,_,f,null)}HN(u,v,S,D);return;case"option":for($ in f)if(f.hasOwnProperty($)&&(v=f[$],v!=null))switch($){case"selected":u.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:di(u,h,$,v,f,null)}return;case"dialog":xt("beforetoggle",u),xt("toggle",u),xt("cancel",u),xt("close",u);break;case"iframe":case"object":xt("load",u);break;case"video":case"audio":for(v=0;v<Um.length;v++)xt(Um[v],u);break;case"image":xt("error",u),xt("load",u);break;case"details":xt("toggle",u);break;case"embed":case"source":case"link":xt("error",u),xt("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in f)if(f.hasOwnProperty(se)&&(v=f[se],v!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,h));default:di(u,h,se,v,f,null)}return;default:if(qD(h)){for(ge in f)f.hasOwnProperty(ge)&&(v=f[ge],v!==void 0&&FR(u,h,ge,v,f,void 0));return}}for(_ in f)f.hasOwnProperty(_)&&(v=f[_],v!=null&&di(u,h,_,v,f,null))}function fq(u,h,f,v){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,D=null,L=null,_=null,$=null,se=null,ge=null;for(le in f){var ve=f[le];if(f.hasOwnProperty(le)&&ve!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":$=ve;default:v.hasOwnProperty(le)||di(u,h,le,null,v,ve)}}for(var re in v){var le=v[re];if(ve=f[re],v.hasOwnProperty(re)&&(le!=null||ve!=null))switch(re){case"type":D=le;break;case"name":S=le;break;case"checked":se=le;break;case"defaultChecked":ge=le;break;case"value":L=le;break;case"defaultValue":_=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(n(137,h));break;default:le!==ve&&di(u,h,re,le,v,ve)}}YD(u,L,_,$,se,ge,D,S);return;case"select":le=L=_=re=null;for(D in f)if($=f[D],f.hasOwnProperty(D)&&$!=null)switch(D){case"value":break;case"multiple":le=$;default:v.hasOwnProperty(D)||di(u,h,D,null,v,$)}for(S in v)if(D=v[S],$=f[S],v.hasOwnProperty(S)&&(D!=null||$!=null))switch(S){case"value":re=D;break;case"defaultValue":_=D;break;case"multiple":L=D;default:D!==$&&di(u,h,S,D,v,$)}h=_,f=L,v=le,re!=null?pp(u,!!f,re,!1):!!v!=!!f&&(h!=null?pp(u,!!f,h,!0):pp(u,!!f,f?[]:"",!1));return;case"textarea":le=re=null;for(_ in f)if(S=f[_],f.hasOwnProperty(_)&&S!=null&&!v.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:di(u,h,_,null,v,S)}for(L in v)if(S=v[L],D=f[L],v.hasOwnProperty(L)&&(S!=null||D!=null))switch(L){case"value":re=S;break;case"defaultValue":le=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==D&&di(u,h,L,S,v,D)}zN(u,re,le);return;case"option":for(var _e in f)if(re=f[_e],f.hasOwnProperty(_e)&&re!=null&&!v.hasOwnProperty(_e))switch(_e){case"selected":u.selected=!1;break;default:di(u,h,_e,null,v,re)}for($ in v)if(re=v[$],le=f[$],v.hasOwnProperty($)&&re!==le&&(re!=null||le!=null))switch($){case"selected":u.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:di(u,h,$,re,v,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var et in f)re=f[et],f.hasOwnProperty(et)&&re!=null&&!v.hasOwnProperty(et)&&di(u,h,et,null,v,re);for(se in v)if(re=v[se],le=f[se],v.hasOwnProperty(se)&&re!==le&&(re!=null||le!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(n(137,h));break;default:di(u,h,se,re,v,le)}return;default:if(qD(h)){for(var hi in f)re=f[hi],f.hasOwnProperty(hi)&&re!==void 0&&!v.hasOwnProperty(hi)&&FR(u,h,hi,void 0,v,re);for(ge in v)re=v[ge],le=f[ge],!v.hasOwnProperty(ge)||re===le||re===void 0&&le===void 0||FR(u,h,ge,re,v,le);return}}for(var ie in f)re=f[ie],f.hasOwnProperty(ie)&&re!=null&&!v.hasOwnProperty(ie)&&di(u,h,ie,null,v,re);for(ve in v)re=v[ve],le=f[ve],!v.hasOwnProperty(ve)||re===le||re==null&&le==null||di(u,h,ve,re,v,le)}function U2(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mq(){if(typeof performance.getEntriesByType=="function"){for(var u=0,h=0,f=performance.getEntriesByType("resource"),v=0;v<f.length;v++){var S=f[v],D=S.transferSize,L=S.initiatorType,_=S.duration;if(D&&_&&U2(L)){for(L=0,_=S.responseEnd,v+=1;v<f.length;v++){var $=f[v],se=$.startTime;if(se>_)break;var ge=$.transferSize,ve=$.initiatorType;ge&&U2(ve)&&($=$.responseEnd,L+=ge*($<_?1:(_-se)/($-se)))}if(--v,h+=8*(D+L)/(S.duration/1e3),u++,10<u)break}}if(0<u)return h/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var OR=null,BR=null;function bw(u){return u.nodeType===9?u:u.ownerDocument}function $2(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Y2(u,h){if(u===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&h==="foreignObject"?0:u}function GR(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var _R=null;function yq(){var u=window.event;return u&&u.type==="popstate"?u===_R?!1:(_R=u,!0):(_R=null,!1)}var K2=typeof setTimeout=="function"?setTimeout:void 0,vq=typeof clearTimeout=="function"?clearTimeout:void 0,q2=typeof Promise=="function"?Promise:void 0,bq=typeof queueMicrotask=="function"?queueMicrotask:typeof q2<"u"?function(u){return q2.resolve(null).then(u).catch(Cq)}:K2;function Cq(u){setTimeout(function(){throw u})}function Kc(u){return u==="head"}function Z2(u,h){var f=h,v=0;do{var S=f.nextSibling;if(u.removeChild(f),S&&S.nodeType===8)if(f=S.data,f==="/$"||f==="/&"){if(v===0){u.removeChild(S),Up(h);return}v--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")v++;else if(f==="html")Ym(u.ownerDocument.documentElement);else if(f==="head"){f=u.ownerDocument.head,Ym(f);for(var D=f.firstChild;D;){var L=D.nextSibling,_=D.nodeName;D[dm]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&D.rel.toLowerCase()==="stylesheet"||f.removeChild(D),D=L}}else f==="body"&&Ym(u.ownerDocument.body);f=S}while(f);Up(h)}function X2(u,h){var f=u;u=0;do{var v=f.nextSibling;if(f.nodeType===1?h?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(h?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),v&&v.nodeType===8)if(f=v.data,f==="/$"){if(u===0)break;u--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||u++;f=v}while(f)}function VR(u){var h=u.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var f=h;switch(h=h.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":VR(f),UD(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}u.removeChild(f)}}function wq(u,h,f,v){for(;u.nodeType===1;){var S=f;if(u.nodeName.toLowerCase()!==h.toLowerCase()){if(!v&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(v){if(!u[dm])switch(h){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(D=u.getAttribute("rel"),D==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(D!==S.rel||u.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||u.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||u.getAttribute("title")!==(S.title==null?null:S.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(D=u.getAttribute("src"),(D!==(S.src==null?null:S.src)||u.getAttribute("type")!==(S.type==null?null:S.type)||u.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&D&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(h==="input"&&u.type==="hidden"){var D=S.name==null?null:""+S.name;if(S.type==="hidden"&&u.getAttribute("name")===D)return u}else return u;if(u=nr(u.nextSibling),u===null)break}return null}function Sq(u,h,f){if(h==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!f||(u=nr(u.nextSibling),u===null))return null;return u}function Q2(u,h){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!h||(u=nr(u.nextSibling),u===null))return null;return u}function zR(u){return u.data==="$?"||u.data==="$~"}function HR(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function xq(u,h){var f=u.ownerDocument;if(u.data==="$~")u._reactRetry=h;else if(u.data!=="$?"||f.readyState!=="loading")h();else{var v=function(){h(),f.removeEventListener("DOMContentLoaded",v)};f.addEventListener("DOMContentLoaded",v),u._reactRetry=v}}function nr(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return u}var jR=null;function J2(u){u=u.nextSibling;for(var h=0;u;){if(u.nodeType===8){var f=u.data;if(f==="/$"||f==="/&"){if(h===0)return nr(u.nextSibling);h--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||h++}u=u.nextSibling}return null}function eB(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var f=u.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(h===0)return u;h--}else f!=="/$"&&f!=="/&"||h++}u=u.previousSibling}return null}function tB(u,h,f){switch(h=bw(f),u){case"html":if(u=h.documentElement,!u)throw Error(n(452));return u;case"head":if(u=h.head,!u)throw Error(n(453));return u;case"body":if(u=h.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function Ym(u){for(var h=u.attributes;h.length;)u.removeAttributeNode(h[0]);UD(u)}var sr=new Map,iB=new Set;function Cw(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Al=K.d;K.d={f:Mq,r:Dq,D:Aq,C:Rq,L:Eq,m:Tq,X:kq,S:Iq,M:Lq};function Mq(){var u=Al.f(),h=dw();return u||h}function Dq(u){var h=up(u);h!==null&&h.tag===5&&h.type==="form"?bO(h):Al.r(u)}var Hp=typeof document>"u"?null:document;function nB(u,h,f){var v=Hp;if(v&&typeof h=="string"&&h){var S=Zo(h);S='link[rel="'+u+'"][href="'+S+'"]',typeof f=="string"&&(S+='[crossorigin="'+f+'"]'),iB.has(S)||(iB.add(S),u={rel:u,crossOrigin:f,href:h},v.querySelector(S)===null&&(h=v.createElement("link"),Jn(h,"link",u),jn(h),v.head.appendChild(h)))}}function Aq(u){Al.D(u),nB("dns-prefetch",u,null)}function Rq(u,h){Al.C(u,h),nB("preconnect",u,h)}function Eq(u,h,f){Al.L(u,h,f);var v=Hp;if(v&&u&&h){var S='link[rel="preload"][as="'+Zo(h)+'"]';h==="image"&&f&&f.imageSrcSet?(S+='[imagesrcset="'+Zo(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(S+='[imagesizes="'+Zo(f.imageSizes)+'"]')):S+='[href="'+Zo(u)+'"]';var D=S;switch(h){case"style":D=jp(u);break;case"script":D=Wp(u)}sr.has(D)||(u=p({rel:"preload",href:h==="image"&&f&&f.imageSrcSet?void 0:u,as:h},f),sr.set(D,u),v.querySelector(S)!==null||h==="style"&&v.querySelector(Km(D))||h==="script"&&v.querySelector(qm(D))||(h=v.createElement("link"),Jn(h,"link",u),jn(h),v.head.appendChild(h)))}}function Tq(u,h){Al.m(u,h);var f=Hp;if(f&&u){var v=h&&typeof h.as=="string"?h.as:"script",S='link[rel="modulepreload"][as="'+Zo(v)+'"][href="'+Zo(u)+'"]',D=S;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=Wp(u)}if(!sr.has(D)&&(u=p({rel:"modulepreload",href:u},h),sr.set(D,u),f.querySelector(S)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(qm(D)))return}v=f.createElement("link"),Jn(v,"link",u),jn(v),f.head.appendChild(v)}}}function Iq(u,h,f){Al.S(u,h,f);var v=Hp;if(v&&u){var S=dp(v).hoistableStyles,D=jp(u);h=h||"default";var L=S.get(D);if(!L){var _={loading:0,preload:null};if(L=v.querySelector(Km(D)))_.loading=5;else{u=p({rel:"stylesheet",href:u,"data-precedence":h},f),(f=sr.get(D))&&WR(u,f);var $=L=v.createElement("link");jn($),Jn($,"link",u),$._p=new Promise(function(se,ge){$.onload=se,$.onerror=ge}),$.addEventListener("load",function(){_.loading|=1}),$.addEventListener("error",function(){_.loading|=2}),_.loading|=4,ww(L,h,v)}L={type:"stylesheet",instance:L,count:1,state:_},S.set(D,L)}}}function kq(u,h){Al.X(u,h);var f=Hp;if(f&&u){var v=dp(f).hoistableScripts,S=Wp(u),D=v.get(S);D||(D=f.querySelector(qm(S)),D||(u=p({src:u,async:!0},h),(h=sr.get(S))&&UR(u,h),D=f.createElement("script"),jn(D),Jn(D,"link",u),f.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},v.set(S,D))}}function Lq(u,h){Al.M(u,h);var f=Hp;if(f&&u){var v=dp(f).hoistableScripts,S=Wp(u),D=v.get(S);D||(D=f.querySelector(qm(S)),D||(u=p({src:u,async:!0,type:"module"},h),(h=sr.get(S))&&UR(u,h),D=f.createElement("script"),jn(D),Jn(D,"link",u),f.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},v.set(S,D))}}function sB(u,h,f,v){var S=(S=Ce.current)?Cw(S):null;if(!S)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(h=jp(f.href),f=dp(S).hoistableStyles,v=f.get(h),v||(v={type:"style",instance:null,count:0,state:null},f.set(h,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){u=jp(f.href);var D=dp(S).hoistableStyles,L=D.get(u);if(L||(S=S.ownerDocument||S,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(u,L),(D=S.querySelector(Km(u)))&&!D._p&&(L.instance=D,L.state.loading=5),sr.has(u)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},sr.set(u,f),D||Pq(S,u,f,L.state))),h&&v===null)throw Error(n(528,""));return L}if(h&&v!==null)throw Error(n(529,""));return null;case"script":return h=f.async,f=f.src,typeof f=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Wp(f),f=dp(S).hoistableScripts,v=f.get(h),v||(v={type:"script",instance:null,count:0,state:null},f.set(h,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function jp(u){return'href="'+Zo(u)+'"'}function Km(u){return'link[rel="stylesheet"]['+u+"]"}function oB(u){return p({},u,{"data-precedence":u.precedence,precedence:null})}function Pq(u,h,f,v){u.querySelector('link[rel="preload"][as="style"]['+h+"]")?v.loading=1:(h=u.createElement("link"),v.preload=h,h.addEventListener("load",function(){return v.loading|=1}),h.addEventListener("error",function(){return v.loading|=2}),Jn(h,"link",f),jn(h),u.head.appendChild(h))}function Wp(u){return'[src="'+Zo(u)+'"]'}function qm(u){return"script[async]"+u}function rB(u,h,f){if(h.count++,h.instance===null)switch(h.type){case"style":var v=u.querySelector('style[data-href~="'+Zo(f.href)+'"]');if(v)return h.instance=v,jn(v),v;var S=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return v=(u.ownerDocument||u).createElement("style"),jn(v),Jn(v,"style",S),ww(v,f.precedence,u),h.instance=v;case"stylesheet":S=jp(f.href);var D=u.querySelector(Km(S));if(D)return h.state.loading|=4,h.instance=D,jn(D),D;v=oB(f),(S=sr.get(S))&&WR(v,S),D=(u.ownerDocument||u).createElement("link"),jn(D);var L=D;return L._p=new Promise(function(_,$){L.onload=_,L.onerror=$}),Jn(D,"link",v),h.state.loading|=4,ww(D,f.precedence,u),h.instance=D;case"script":return D=Wp(f.src),(S=u.querySelector(qm(D)))?(h.instance=S,jn(S),S):(v=f,(S=sr.get(D))&&(v=p({},f),UR(v,S)),u=u.ownerDocument||u,S=u.createElement("script"),jn(S),Jn(S,"link",v),u.head.appendChild(S),h.instance=S);case"void":return null;default:throw Error(n(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(v=h.instance,h.state.loading|=4,ww(v,f.precedence,u));return h.instance}function ww(u,h,f){for(var v=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=v.length?v[v.length-1]:null,D=S,L=0;L<v.length;L++){var _=v[L];if(_.dataset.precedence===h)D=_;else if(D!==S)break}D?D.parentNode.insertBefore(u,D.nextSibling):(h=f.nodeType===9?f.head:f,h.insertBefore(u,h.firstChild))}function WR(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.title==null&&(u.title=h.title)}function UR(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.integrity==null&&(u.integrity=h.integrity)}var Sw=null;function aB(u,h,f){if(Sw===null){var v=new Map,S=Sw=new Map;S.set(f,v)}else S=Sw,v=S.get(f),v||(v=new Map,S.set(f,v));if(v.has(u))return v;for(v.set(u,null),f=f.getElementsByTagName(u),S=0;S<f.length;S++){var D=f[S];if(!(D[dm]||D[qn]||u==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var L=D.getAttribute(h)||"";L=u+L;var _=v.get(L);_?_.push(D):v.set(L,[D])}}return v}function lB(u,h,f){u=u.ownerDocument||u,u.head.insertBefore(f,h==="title"?u.querySelector("head > title"):null)}function Nq(u,h,f){if(f===1||h.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return u=h.disabled,typeof h.precedence=="string"&&u==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function cB(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function Fq(u,h,f,v){if(f.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var S=jp(v.href),D=h.querySelector(Km(S));if(D){h=D._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(u.count++,u=xw.bind(u),h.then(u,u)),f.state.loading|=4,f.instance=D,jn(D);return}D=h.ownerDocument||h,v=oB(v),(S=sr.get(S))&&WR(v,S),D=D.createElement("link"),jn(D);var L=D;L._p=new Promise(function(_,$){L.onload=_,L.onerror=$}),Jn(D,"link",v),f.instance=D}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(f,h),(h=f.state.preload)&&(f.state.loading&3)===0&&(u.count++,f=xw.bind(u),h.addEventListener("load",f),h.addEventListener("error",f))}}var $R=0;function Oq(u,h){return u.stylesheets&&u.count===0&&Dw(u,u.stylesheets),0<u.count||0<u.imgCount?function(f){var v=setTimeout(function(){if(u.stylesheets&&Dw(u,u.stylesheets),u.unsuspend){var D=u.unsuspend;u.unsuspend=null,D()}},6e4+h);0<u.imgBytes&&$R===0&&($R=62500*mq());var S=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&Dw(u,u.stylesheets),u.unsuspend)){var D=u.unsuspend;u.unsuspend=null,D()}},(u.imgBytes>$R?50:800)+h);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(v),clearTimeout(S)}}:null}function xw(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dw(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Mw=null;function Dw(u,h){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Mw=new Map,h.forEach(Bq,u),Mw=null,xw.call(u))}function Bq(u,h){if(!(h.state.loading&4)){var f=Mw.get(u);if(f)var v=f.get(null);else{f=new Map,Mw.set(u,f);for(var S=u.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<S.length;D++){var L=S[D];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(f.set(L.dataset.precedence,L),v=L)}v&&f.set(null,v)}S=h.instance,L=S.getAttribute("data-precedence"),D=f.get(L)||v,D===v&&f.set(null,S),f.set(L,S),this.count++,v=xw.bind(this),S.addEventListener("load",v),S.addEventListener("error",v),D?D.parentNode.insertBefore(S,D.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(S,u.firstChild)),h.state.loading|=4}}var Zm={$$typeof:M,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function Gq(u,h,f,v,S,D,L,_,$){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zD(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zD(0),this.hiddenUpdates=zD(null),this.identifierPrefix=v,this.onUncaughtError=S,this.onCaughtError=D,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function uB(u,h,f,v,S,D,L,_,$,se,ge,ve){return u=new Gq(u,h,f,L,$,se,ge,ve,_),h=1,D===!0&&(h|=24),D=Do(3,null,null,h),u.current=D,D.stateNode=u,h=DA(),h.refCount++,u.pooledCache=h,h.refCount++,D.memoizedState={element:v,isDehydrated:f,cache:h},TA(D),u}function dB(u){return u?(u=wp,u):wp}function hB(u,h,f,v,S,D){S=dB(S),v.context===null?v.context=S:v.pendingContext=S,v=Bc(h),v.payload={element:f},D=D===void 0?null:D,D!==null&&(v.callback=D),f=Gc(u,v,h),f!==null&&(so(f,u,h),Em(f,u,h))}function pB(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var f=u.retryLane;u.retryLane=f!==0&&f<h?f:h}}function YR(u,h){pB(u,h),(u=u.alternate)&&pB(u,h)}function gB(u){if(u.tag===13||u.tag===31){var h=ld(u,67108864);h!==null&&so(h,u,67108864),YR(u,67108864)}}function fB(u){if(u.tag===13||u.tag===31){var h=Io();h=HD(h);var f=ld(u,h);f!==null&&so(f,u,h),YR(u,h)}}var Aw=!0;function _q(u,h,f,v){var S=H.T;H.T=null;var D=K.p;try{K.p=2,KR(u,h,f,v)}finally{K.p=D,H.T=S}}function Vq(u,h,f,v){var S=H.T;H.T=null;var D=K.p;try{K.p=8,KR(u,h,f,v)}finally{K.p=D,H.T=S}}function KR(u,h,f,v){if(Aw){var S=qR(v);if(S===null)NR(u,h,v,Rw,f),yB(u,v);else if(Hq(S,u,h,f,v))v.stopPropagation();else if(yB(u,v),h&4&&-1<zq.indexOf(u)){for(;S!==null;){var D=up(S);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var L=nd(D.pendingLanes);if(L!==0){var _=D;for(_.pendingLanes|=2,_.entangledLanes|=2;L;){var $=1<<31-xo(L);_.entanglements[1]|=$,L&=~$}fa(D),(Wt&6)===0&&(cw=dt()+500,Wm(0))}}break;case 31:case 13:_=ld(D,2),_!==null&&so(_,D,2),dw(),YR(D,2)}if(D=qR(v),D===null&&NR(u,h,v,Rw,f),D===S)break;S=D}S!==null&&v.stopPropagation()}else NR(u,h,v,null,f)}}function qR(u){return u=XD(u),ZR(u)}var Rw=null;function ZR(u){if(Rw=null,u=cp(u),u!==null){var h=o(u);if(h===null)u=null;else{var f=h.tag;if(f===13){if(u=r(h),u!==null)return u;u=null}else if(f===31){if(u=a(h),u!==null)return u;u=null}else if(f===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null)}}return Rw=u,null}function mB(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ci()){case _s:return 2;case Zi:return 8;case Ot:case wi:return 32;case da:return 268435456;default:return 32}default:return 32}}var XR=!1,qc=null,Zc=null,Xc=null,Xm=new Map,Qm=new Map,Qc=[],zq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yB(u,h){switch(u){case"focusin":case"focusout":qc=null;break;case"dragenter":case"dragleave":Zc=null;break;case"mouseover":case"mouseout":Xc=null;break;case"pointerover":case"pointerout":Xm.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qm.delete(h.pointerId)}}function Jm(u,h,f,v,S,D){return u===null||u.nativeEvent!==D?(u={blockedOn:h,domEventName:f,eventSystemFlags:v,nativeEvent:D,targetContainers:[S]},h!==null&&(h=up(h),h!==null&&gB(h)),u):(u.eventSystemFlags|=v,h=u.targetContainers,S!==null&&h.indexOf(S)===-1&&h.push(S),u)}function Hq(u,h,f,v,S){switch(h){case"focusin":return qc=Jm(qc,u,h,f,v,S),!0;case"dragenter":return Zc=Jm(Zc,u,h,f,v,S),!0;case"mouseover":return Xc=Jm(Xc,u,h,f,v,S),!0;case"pointerover":var D=S.pointerId;return Xm.set(D,Jm(Xm.get(D)||null,u,h,f,v,S)),!0;case"gotpointercapture":return D=S.pointerId,Qm.set(D,Jm(Qm.get(D)||null,u,h,f,v,S)),!0}return!1}function vB(u){var h=cp(u.target);if(h!==null){var f=o(h);if(f!==null){if(h=f.tag,h===13){if(h=r(f),h!==null){u.blockedOn=h,LN(u.priority,function(){fB(f)});return}}else if(h===31){if(h=a(f),h!==null){u.blockedOn=h,LN(u.priority,function(){fB(f)});return}}else if(h===3&&f.stateNode.current.memoizedState.isDehydrated){u.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Ew(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var f=qR(u.nativeEvent);if(f===null){f=u.nativeEvent;var v=new f.constructor(f.type,f);ZD=v,f.target.dispatchEvent(v),ZD=null}else return h=up(f),h!==null&&gB(h),u.blockedOn=f,!1;h.shift()}return!0}function bB(u,h,f){Ew(u)&&f.delete(h)}function jq(){XR=!1,qc!==null&&Ew(qc)&&(qc=null),Zc!==null&&Ew(Zc)&&(Zc=null),Xc!==null&&Ew(Xc)&&(Xc=null),Xm.forEach(bB),Qm.forEach(bB)}function Tw(u,h){u.blockedOn===h&&(u.blockedOn=null,XR||(XR=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,jq)))}var Iw=null;function CB(u){Iw!==u&&(Iw=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Iw===u&&(Iw=null);for(var h=0;h<u.length;h+=3){var f=u[h],v=u[h+1],S=u[h+2];if(typeof v!="function"){if(ZR(v||f)===null)continue;break}var D=up(f);D!==null&&(u.splice(h,3),h-=3,qA(D,{pending:!0,data:S,method:f.method,action:v},v,S))}}))}function Up(u){function h($){return Tw($,u)}qc!==null&&Tw(qc,u),Zc!==null&&Tw(Zc,u),Xc!==null&&Tw(Xc,u),Xm.forEach(h),Qm.forEach(h);for(var f=0;f<Qc.length;f++){var v=Qc[f];v.blockedOn===u&&(v.blockedOn=null)}for(;0<Qc.length&&(f=Qc[0],f.blockedOn===null);)vB(f),f.blockedOn===null&&Qc.shift();if(f=(u.ownerDocument||u).$$reactFormReplay,f!=null)for(v=0;v<f.length;v+=3){var S=f[v],D=f[v+1],L=S[Qs]||null;if(typeof D=="function")L||CB(f);else if(L){var _=null;if(D&&D.hasAttribute("formAction")){if(S=D,L=D[Qs]||null)_=L.formAction;else if(ZR(S)!==null)continue}else _=L.action;typeof _=="function"?f[v+1]=_:(f.splice(v,3),v-=3),CB(f)}}}function wB(){function u(D){D.canIntercept&&D.info==="react-transition"&&D.intercept({handler:function(){return new Promise(function(L){return S=L})},focusReset:"manual",scroll:"manual"})}function h(){S!==null&&(S(),S=null),v||setTimeout(f,20)}function f(){if(!v&&!navigation.transition){var D=navigation.currentEntry;D&&D.url!=null&&navigation.navigate(D.url,{state:D.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,S=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(f,100),function(){v=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),S!==null&&(S(),S=null)}}}function QR(u){this._internalRoot=u}kw.prototype.render=QR.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(n(409));var f=h.current,v=Io();hB(f,v,u,h,null,null)},kw.prototype.unmount=QR.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;hB(u.current,2,null,u,null,null),dw(),h[lp]=null}};function kw(u){this._internalRoot=u}kw.prototype.unstable_scheduleHydration=function(u){if(u){var h=kN();u={blockedOn:null,target:u,priority:h};for(var f=0;f<Qc.length&&h!==0&&h<Qc[f].priority;f++);Qc.splice(f,0,u),f===0&&vB(u)}};var SB=t.version;if(SB!=="19.2.0")throw Error(n(527,SB,"19.2.0"));K.findDOMNode=function(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=c(h),u=u!==null?d(u):null,u=u===null?null:u.stateNode,u};var Wq={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lw.isDisabled&&Lw.supportsFiber)try{lm=Lw.inject(Wq),So=Lw}catch{}}return ty.createRoot=function(u,h){if(!s(u))throw Error(n(299));var f=!1,v="",S=TO,D=IO,L=kO;return h!=null&&(h.unstable_strictMode===!0&&(f=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(S=h.onUncaughtError),h.onCaughtError!==void 0&&(D=h.onCaughtError),h.onRecoverableError!==void 0&&(L=h.onRecoverableError)),h=uB(u,1,!1,null,null,f,v,null,S,D,L,wB),u[lp]=h.current,PR(u),new QR(h)},ty.hydrateRoot=function(u,h,f){if(!s(u))throw Error(n(299));var v=!1,S="",D=TO,L=IO,_=kO,$=null;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(D=f.onUncaughtError),f.onCaughtError!==void 0&&(L=f.onCaughtError),f.onRecoverableError!==void 0&&(_=f.onRecoverableError),f.formState!==void 0&&($=f.formState)),h=uB(u,1,!0,h,f??null,v,S,$,D,L,_,wB),h.context=dB(null),f=h.current,v=Io(),v=HD(v),S=Bc(v),S.callback=null,Gc(f,S,v),f=v,h.current.lanes=f,um(h,f),fa(h),u[lp]=h.current,PR(u),new kw(h)},ty.version="19.2.0",ty}var LB;function e7(){if(LB)return tE.exports;LB=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),tE.exports=Jq(),tE.exports}var t7=e7();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PB="popstate";function i7(e={}){function t(n,s){let{pathname:o,search:r,hash:a}=n.location;return ZT("",{pathname:o,search:r,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function i(n,s){return typeof s=="string"?s:nv(s)}return s7(t,i,null,e)}function Ti(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function n7(){return Math.random().toString(36).substring(2,10)}function NB(e,t){return{usr:e.state,key:e.key,idx:t}}function ZT(e,t,i=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ef(t):t,state:i,key:t&&t.key||n||n7()}}function nv({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ef(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function s7(e,t,i,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,r=s.history,a="POP",l=null,c=d();c==null&&(c=0,r.replaceState({...r.state,idx:c},""));function d(){return(r.state||{idx:null}).idx}function p(){a="POP";let C=d(),w=C==null?null:C-c;c=C,l&&l({action:a,location:b.location,delta:w})}function g(C,w){a="PUSH";let x=ZT(b.location,C,w);c=d()+1;let M=NB(x,c),E=b.createHref(x);try{r.pushState(M,"",E)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(E)}o&&l&&l({action:a,location:b.location,delta:1})}function m(C,w){a="REPLACE";let x=ZT(b.location,C,w);c=d();let M=NB(x,c),E=b.createHref(x);r.replaceState(M,"",E),o&&l&&l({action:a,location:b.location,delta:0})}function y(C){return o7(C)}let b={get action(){return a},get location(){return e(s,r)},listen(C){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(PB,p),l=C,()=>{s.removeEventListener(PB,p),l=null}},createHref(C){return t(s,C)},createURL:y,encodeLocation(C){let w=y(C);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:m,go(C){return r.go(C)}};return b}function o7(e,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Ti(i,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:nv(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=i+n),new URL(n,i)}function BH(e,t,i="/"){return r7(e,t,i,!1)}function r7(e,t,i,n){let s=typeof t=="string"?Ef(t):t,o=ic(s.pathname||"/",i);if(o==null)return null;let r=GH(e);a7(r);let a=null;for(let l=0;a==null&&l<r.length;++l){let c=v7(o);a=m7(r[l],c,n)}return a}function GH(e,t=[],i=[],n="",s=!1){let o=(r,a,l=s,c)=>{let d={relativePath:c===void 0?r.path||"":c,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&l)return;Ti(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let p=Hl([n,d.relativePath]),g=i.concat(d);r.children&&r.children.length>0&&(Ti(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),GH(r.children,t,g,p,l)),!(r.path==null&&!r.index)&&t.push({path:p,score:g7(p,r.index),routesMeta:g})};return e.forEach((r,a)=>{if(r.path===""||!r.path?.includes("?"))o(r,a);else for(let l of _H(r.path))o(r,a,!0,l)}),t}function _H(e){let t=e.split("/");if(t.length===0)return[];let[i,...n]=t,s=i.endsWith("?"),o=i.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let r=_H(n.join("/")),a=[];return a.push(...r.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...r),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function a7(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:f7(t.routesMeta.map(n=>n.childrenIndex),i.routesMeta.map(n=>n.childrenIndex)))}var l7=/^:[\w-]+$/,c7=3,u7=2,d7=1,h7=10,p7=-2,FB=e=>e==="*";function g7(e,t){let i=e.split("/"),n=i.length;return i.some(FB)&&(n+=p7),t&&(n+=u7),i.filter(s=>!FB(s)).reduce((s,o)=>s+(l7.test(o)?c7:o===""?d7:h7),n)}function f7(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function m7(e,t,i=!1){let{routesMeta:n}=e,s={},o="/",r=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=o==="/"?t:t.slice(o.length)||"/",p=vx({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),g=l.route;if(!p&&c&&i&&!n[n.length-1].route.index&&(p=vx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!p)return null;Object.assign(s,p.params),r.push({params:s,pathname:Hl([o,p.pathname]),pathnameBase:S7(Hl([o,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(o=Hl([o,p.pathnameBase]))}return r}function vx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,n]=y7(e.path,e.caseSensitive,e.end),s=t.match(i);if(!s)return null;let o=s[0],r=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,{paramName:d,isOptional:p},g)=>{if(d==="*"){let y=a[g]||"";r=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const m=a[g];return p&&!m?c[d]=void 0:c[d]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:r,pattern:e}}function y7(e,t=!1,i=!0){Kr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function v7(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ic(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,n=e.charAt(i);return n&&n!=="/"?null:e.slice(i)||"/"}function b7(e,t="/"){let{pathname:i,search:n="",hash:s=""}=typeof e=="string"?Ef(e):e;return{pathname:i?i.startsWith("/")?i:C7(i,t):t,search:x7(n),hash:M7(s)}}function C7(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?i.length>1&&i.pop():s!=="."&&i.push(s)}),i.length>1?i.join("/"):"/"}function oE(e,t,i,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function w7(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function Uk(e){let t=w7(e);return t.map((i,n)=>n===t.length-1?i.pathname:i.pathnameBase)}function $k(e,t,i,n=!1){let s;typeof e=="string"?s=Ef(e):(s={...e},Ti(!s.pathname||!s.pathname.includes("?"),oE("?","pathname","search",s)),Ti(!s.pathname||!s.pathname.includes("#"),oE("#","pathname","hash",s)),Ti(!s.search||!s.search.includes("#"),oE("#","search","hash",s)));let o=e===""||s.pathname==="",r=o?"/":s.pathname,a;if(r==null)a=i;else{let p=t.length-1;if(!n&&r.startsWith("..")){let g=r.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}a=p>=0?t[p]:"/"}let l=b7(s,a),c=r&&r!=="/"&&r.endsWith("/"),d=(o||r===".")&&i.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var Hl=e=>e.join("/").replace(/\/\/+/g,"/"),S7=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),x7=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,M7=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function D7(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var VH=["POST","PUT","PATCH","DELETE"];new Set(VH);var A7=["GET",...VH];new Set(A7);var Tf=R.createContext(null);Tf.displayName="DataRouter";var F0=R.createContext(null);F0.displayName="DataRouterState";R.createContext(!1);var zH=R.createContext({isTransitioning:!1});zH.displayName="ViewTransition";var R7=R.createContext(new Map);R7.displayName="Fetchers";var E7=R.createContext(null);E7.displayName="Await";var ta=R.createContext(null);ta.displayName="Navigation";var Qv=R.createContext(null);Qv.displayName="Location";var Ja=R.createContext({outlet:null,matches:[],isDataRoute:!1});Ja.displayName="Route";var Yk=R.createContext(null);Yk.displayName="RouteError";function T7(e,{relative:t}={}){Ti(If(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:n}=R.useContext(ta),{hash:s,pathname:o,search:r}=Jv(e,{relative:t}),a=o;return i!=="/"&&(a=o==="/"?i:Hl([i,o])),n.createHref({pathname:a,search:r,hash:s})}function If(){return R.useContext(Qv)!=null}function Bu(){return Ti(If(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Qv).location}var HH="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jH(e){R.useContext(ta).static||R.useLayoutEffect(e)}function O0(){let{isDataRoute:e}=R.useContext(Ja);return e?H7():I7()}function I7(){Ti(If(),"useNavigate() may be used only in the context of a <Router> component.");let e=R.useContext(Tf),{basename:t,navigator:i}=R.useContext(ta),{matches:n}=R.useContext(Ja),{pathname:s}=Bu(),o=JSON.stringify(Uk(n)),r=R.useRef(!1);return jH(()=>{r.current=!0}),R.useCallback((l,c={})=>{if(Kr(r.current,HH),!r.current)return;if(typeof l=="number"){i.go(l);return}let d=$k(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Hl([t,d.pathname])),(c.replace?i.replace:i.push)(d,c.state,c)},[t,i,o,s,e])}R.createContext(null);function Jv(e,{relative:t}={}){let{matches:i}=R.useContext(Ja),{pathname:n}=Bu(),s=JSON.stringify(Uk(i));return R.useMemo(()=>$k(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function k7(e,t){return WH(e,t)}function WH(e,t,i,n,s){Ti(If(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=R.useContext(ta),{matches:r}=R.useContext(Ja),a=r[r.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",p=a&&a.route;{let x=p&&p.path||"";UH(c,!p||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let g=Bu(),m;if(t){let x=typeof t=="string"?Ef(t):t;Ti(d==="/"||x.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${x.pathname}" was given in the \`location\` prop.`),m=x}else m=g;let y=m.pathname||"/",b=y;if(d!=="/"){let x=d.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(x.length).join("/")}let C=BH(e,{pathname:b});Kr(p||C!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Kr(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=O7(C&&C.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Hl([d,o.encodeLocation?o.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:Hl([d,o.encodeLocation?o.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),r,i,n,s);return t&&w?R.createElement(Qv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},w):w}function L7(){let e=z7(),t=D7(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},r=null;return console.error("Error handled by React Router default ErrorBoundary:",e),r=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:o},"ErrorBoundary")," or"," ",R.createElement("code",{style:o},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),i?R.createElement("pre",{style:s},i):null,r)}var P7=R.createElement(L7,null),N7=class extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?R.createElement(Ja.Provider,{value:this.props.routeContext},R.createElement(Yk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function F7({routeContext:e,match:t,children:i}){let n=R.useContext(Tf);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(Ja.Provider,{value:e},i)}function O7(e,t=[],i=null,n=null,s=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let o=e,r=i?.errors;if(r!=null){let c=o.findIndex(d=>d.route.id&&r?.[d.route.id]!==void 0);Ti(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),o=o.slice(0,Math.min(o.length,c+1))}let a=!1,l=-1;if(i)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:p,errors:g}=i,m=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||m){a=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,d,p)=>{let g,m=!1,y=null,b=null;i&&(g=r&&d.route.id?r[d.route.id]:void 0,y=d.route.errorElement||P7,a&&(l<0&&p===0?(UH("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,b=null):l===p&&(m=!0,b=d.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,p+1)),w=()=>{let x;return g?x=y:m?x=b:d.route.Component?x=R.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,R.createElement(F7,{match:d,routeContext:{outlet:c,matches:C,isDataRoute:i!=null},children:x})};return i&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?R.createElement(N7,{location:i.location,revalidation:i.revalidation,component:y,error:g,children:w(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:n}):w()},null)}function Kk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function B7(e){let t=R.useContext(Tf);return Ti(t,Kk(e)),t}function G7(e){let t=R.useContext(F0);return Ti(t,Kk(e)),t}function _7(e){let t=R.useContext(Ja);return Ti(t,Kk(e)),t}function qk(e){let t=_7(e),i=t.matches[t.matches.length-1];return Ti(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function V7(){return qk("useRouteId")}function z7(){let e=R.useContext(Yk),t=G7("useRouteError"),i=qk("useRouteError");return e!==void 0?e:t.errors?.[i]}function H7(){let{router:e}=B7("useNavigate"),t=qk("useNavigate"),i=R.useRef(!1);return jH(()=>{i.current=!0}),R.useCallback(async(s,o={})=>{Kr(i.current,HH),i.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...o}))},[e,t])}var OB={};function UH(e,t,i){!t&&!OB[e]&&(OB[e]=!0,Kr(!1,i))}R.memo(j7);function j7({routes:e,future:t,state:i,unstable_onError:n}){return WH(e,void 0,i,n,t)}function bg({to:e,replace:t,state:i,relative:n}){Ti(If(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=R.useContext(ta);Kr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=R.useContext(Ja),{pathname:r}=Bu(),a=O0(),l=$k(e,Uk(o),r,n==="path"),c=JSON.stringify(l);return R.useEffect(()=>{a(JSON.parse(c),{replace:t,state:i,relative:n})},[a,c,n,t,i]),null}function Mn(e){Ti(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function W7({basename:e="/",children:t=null,location:i,navigationType:n="POP",navigator:s,static:o=!1}){Ti(!If(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let r=e.replace(/^\/*/,"/"),a=R.useMemo(()=>({basename:r,navigator:s,static:o,future:{}}),[r,s,o]);typeof i=="string"&&(i=Ef(i));let{pathname:l="/",search:c="",hash:d="",state:p=null,key:g="default"}=i,m=R.useMemo(()=>{let y=ic(l,r);return y==null?null:{location:{pathname:y,search:c,hash:d,state:p,key:g},navigationType:n}},[r,l,c,d,p,g,n]);return Kr(m!=null,`<Router basename="${r}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:R.createElement(ta.Provider,{value:a},R.createElement(Qv.Provider,{children:t,value:m}))}function Pw({children:e,location:t}){return k7(XT(e),t)}function XT(e,t=[]){let i=[];return R.Children.forEach(e,(n,s)=>{if(!R.isValidElement(n))return;let o=[...t,s];if(n.type===R.Fragment){i.push.apply(i,XT(n.props.children,o));return}Ti(n.type===Mn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ti(!n.props.index||!n.props.children,"An index route cannot have child routes.");let r={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(r.children=XT(n.props.children,o)),i.push(r)}),i}var bS="get",CS="application/x-www-form-urlencoded";function B0(e){return e!=null&&typeof e.tagName=="string"}function U7(e){return B0(e)&&e.tagName.toLowerCase()==="button"}function $7(e){return B0(e)&&e.tagName.toLowerCase()==="form"}function Y7(e){return B0(e)&&e.tagName.toLowerCase()==="input"}function K7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function q7(e,t){return e.button===0&&(!t||t==="_self")&&!K7(e)}var Nw=null;function Z7(){if(Nw===null)try{new FormData(document.createElement("form"),0),Nw=!1}catch{Nw=!0}return Nw}var X7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rE(e){return e!=null&&!X7.has(e)?(Kr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${CS}"`),null):e}function Q7(e,t){let i,n,s,o,r;if($7(e)){let a=e.getAttribute("action");n=a?ic(a,t):null,i=e.getAttribute("method")||bS,s=rE(e.getAttribute("enctype"))||CS,o=new FormData(e)}else if(U7(e)||Y7(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(n=l?ic(l,t):null,i=e.getAttribute("formmethod")||a.getAttribute("method")||bS,s=rE(e.getAttribute("formenctype"))||rE(a.getAttribute("enctype"))||CS,o=new FormData(a,e),!Z7()){let{name:c,type:d,value:p}=e;if(d==="image"){let g=c?`${c}.`:"";o.append(`${g}x`,"0"),o.append(`${g}y`,"0")}else c&&o.append(c,p)}}else{if(B0(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=bS,n=null,s=CS,r=e}return o&&s==="text/plain"&&(r=o,o=void 0),{action:n,method:i.toLowerCase(),encType:s,formData:o,body:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Zk(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function J7(e,t,i){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${i}`:t&&ic(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${i}`,n}async function eZ(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function tZ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function iZ(e,t,i){let n=await Promise.all(e.map(async s=>{let o=t.routes[s.route.id];if(o){let r=await eZ(o,i);return r.links?r.links():[]}return[]}));return rZ(n.flat(1).filter(tZ).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function BB(e,t,i,n,s,o){let r=(l,c)=>i[c]?l.route.id!==i[c].route.id:!0,a=(l,c)=>i[c].pathname!==l.pathname||i[c].route.path?.endsWith("*")&&i[c].params["*"]!==l.params["*"];return o==="assets"?t.filter((l,c)=>r(l,c)||a(l,c)):o==="data"?t.filter((l,c)=>{let d=n.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(r(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function nZ(e,t,{includeHydrateFallback:i}={}){return sZ(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),i&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function sZ(e){return[...new Set(e)]}function oZ(e){let t={},i=Object.keys(e).sort();for(let n of i)t[n]=e[n];return t}function rZ(e,t){let i=new Set;return new Set(t),e.reduce((n,s)=>{let o=JSON.stringify(oZ(s));return i.has(o)||(i.add(o),n.push({key:o,link:s})),n},[])}function $H(){let e=R.useContext(Tf);return Zk(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function aZ(){let e=R.useContext(F0);return Zk(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Xk=R.createContext(void 0);Xk.displayName="FrameworkContext";function YH(){let e=R.useContext(Xk);return Zk(e,"You must render this element inside a <HydratedRouter> element"),e}function lZ(e,t){let i=R.useContext(Xk),[n,s]=R.useState(!1),[o,r]=R.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:p}=t,g=R.useRef(null);R.useEffect(()=>{if(e==="render"&&r(!0),e==="viewport"){let b=w=>{w.forEach(x=>{r(x.isIntersecting)})},C=new IntersectionObserver(b,{threshold:.5});return g.current&&C.observe(g.current),()=>{C.disconnect()}}},[e]),R.useEffect(()=>{if(n){let b=setTimeout(()=>{r(!0)},100);return()=>{clearTimeout(b)}}},[n]);let m=()=>{s(!0)},y=()=>{s(!1),r(!1)};return i?e!=="intent"?[o,g,{}]:[o,g,{onFocus:iy(a,m),onBlur:iy(l,y),onMouseEnter:iy(c,m),onMouseLeave:iy(d,y),onTouchStart:iy(p,m)}]:[!1,g,{}]}function iy(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function cZ({page:e,...t}){let{router:i}=$H(),n=R.useMemo(()=>BH(i.routes,e,i.basename),[i.routes,e,i.basename]);return n?R.createElement(dZ,{page:e,matches:n,...t}):null}function uZ(e){let{manifest:t,routeModules:i}=YH(),[n,s]=R.useState([]);return R.useEffect(()=>{let o=!1;return iZ(e,t,i).then(r=>{o||s(r)}),()=>{o=!0}},[e,t,i]),n}function dZ({page:e,matches:t,...i}){let n=Bu(),{manifest:s,routeModules:o}=YH(),{basename:r}=$H(),{loaderData:a,matches:l}=aZ(),c=R.useMemo(()=>BB(e,t,l,s,n,"data"),[e,t,l,s,n]),d=R.useMemo(()=>BB(e,t,l,s,n,"assets"),[e,t,l,s,n]),p=R.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let y=new Set,b=!1;if(t.forEach(w=>{let x=s.routes[w.route.id];!x||!x.hasLoader||(!c.some(M=>M.route.id===w.route.id)&&w.route.id in a&&o[w.route.id]?.shouldRevalidate||x.hasClientLoader?b=!0:y.add(w.route.id))}),y.size===0)return[];let C=J7(e,r,"data");return b&&y.size>0&&C.searchParams.set("_routes",t.filter(w=>y.has(w.route.id)).map(w=>w.route.id).join(",")),[C.pathname+C.search]},[r,a,n,s,c,t,e,o]),g=R.useMemo(()=>nZ(d,s),[d,s]),m=uZ(d);return R.createElement(R.Fragment,null,p.map(y=>R.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...i})),g.map(y=>R.createElement("link",{key:y,rel:"modulepreload",href:y,...i})),m.map(({key:y,link:b})=>R.createElement("link",{key:y,nonce:i.nonce,...b})))}function hZ(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var KH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{KH&&(window.__reactRouterVersion="7.9.4")}catch{}function pZ({basename:e,children:t,window:i}){let n=R.useRef();n.current==null&&(n.current=i7({window:i,v5Compat:!0}));let s=n.current,[o,r]=R.useState({action:s.action,location:s.location}),a=R.useCallback(l=>{R.startTransition(()=>r(l))},[r]);return R.useLayoutEffect(()=>s.listen(a),[s,a]),R.createElement(W7,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}var qH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZH=R.forwardRef(function({onClick:t,discover:i="render",prefetch:n="none",relative:s,reloadDocument:o,replace:r,state:a,target:l,to:c,preventScrollReset:d,viewTransition:p,...g},m){let{basename:y}=R.useContext(ta),b=typeof c=="string"&&qH.test(c),C,w=!1;if(typeof c=="string"&&b&&(C=c,KH))try{let O=new URL(window.location.href),G=c.startsWith("//")?new URL(O.protocol+c):new URL(c),B=ic(G.pathname,y);G.origin===O.origin&&B!=null?c=B+G.search+G.hash:w=!0}catch{Kr(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=T7(c,{relative:s}),[M,E,I]=lZ(n,g),N=mZ(c,{replace:r,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:p});function T(O){t&&t(O),O.defaultPrevented||N(O)}let P=R.createElement("a",{...g,...I,href:C||x,onClick:w||o?t:T,ref:hZ(m,E),target:l,"data-discover":!b&&i==="render"?"true":void 0});return M&&!b?R.createElement(R.Fragment,null,P,R.createElement(cZ,{page:x})):P});ZH.displayName="Link";var XH=R.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:n="",end:s=!1,style:o,to:r,viewTransition:a,children:l,...c},d){let p=Jv(r,{relative:c.relative}),g=Bu(),m=R.useContext(F0),{navigator:y,basename:b}=R.useContext(ta),C=m!=null&&wZ(p)&&a===!0,w=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,x=g.pathname,M=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;i||(x=x.toLowerCase(),M=M?M.toLowerCase():null,w=w.toLowerCase()),M&&b&&(M=ic(M,b)||M);const E=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let I=x===w||!s&&x.startsWith(w)&&x.charAt(E)==="/",N=M!=null&&(M===w||!s&&M.startsWith(w)&&M.charAt(w.length)==="/"),T={isActive:I,isPending:N,isTransitioning:C},P=I?t:void 0,O;typeof n=="function"?O=n(T):O=[n,I?"active":null,N?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let G=typeof o=="function"?o(T):o;return R.createElement(ZH,{...c,"aria-current":P,className:O,ref:d,style:G,to:r,viewTransition:a},typeof l=="function"?l(T):l)});XH.displayName="NavLink";var gZ=R.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:n,replace:s,state:o,method:r=bS,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:p,...g},m)=>{let y=bZ(),b=CZ(a,{relative:c}),C=r.toLowerCase()==="get"?"get":"post",w=typeof a=="string"&&qH.test(a),x=M=>{if(l&&l(M),M.defaultPrevented)return;M.preventDefault();let E=M.nativeEvent.submitter,I=E?.getAttribute("formmethod")||r;y(E||M.currentTarget,{fetcherKey:t,method:I,navigate:i,replace:s,state:o,relative:c,preventScrollReset:d,viewTransition:p})};return R.createElement("form",{ref:m,method:C,action:b,onSubmit:n?l:x,...g,"data-discover":!w&&e==="render"?"true":void 0})});gZ.displayName="Form";function fZ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QH(e){let t=R.useContext(Tf);return Ti(t,fZ(e)),t}function mZ(e,{target:t,replace:i,state:n,preventScrollReset:s,relative:o,viewTransition:r}={}){let a=O0(),l=Bu(),c=Jv(e,{relative:o});return R.useCallback(d=>{if(q7(d,t)){d.preventDefault();let p=i!==void 0?i:nv(l)===nv(c);a(e,{replace:p,state:n,preventScrollReset:s,relative:o,viewTransition:r})}},[l,a,c,i,n,t,e,s,o,r])}var yZ=0,vZ=()=>`__${String(++yZ)}__`;function bZ(){let{router:e}=QH("useSubmit"),{basename:t}=R.useContext(ta),i=V7();return R.useCallback(async(n,s={})=>{let{action:o,method:r,encType:a,formData:l,body:c}=Q7(n,t);if(s.navigate===!1){let d=s.fetcherKey||vZ();await e.fetch(d,i,s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||r,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||r,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:i,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,i])}function CZ(e,{relative:t}={}){let{basename:i}=R.useContext(ta),n=R.useContext(Ja);Ti(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...Jv(e||".",{relative:t})},r=Bu();if(e==null){o.search=r.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(p=>p).forEach(p=>a.append("index",p));let d=a.toString();o.search=d?`?${d}`:""}}return(!e||e===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(o.pathname=o.pathname==="/"?i:Hl([i,o.pathname])),nv(o)}function wZ(e,{relative:t}={}){let i=R.useContext(zH);Ti(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=QH("useViewTransitionState"),s=Jv(e,{relative:t});if(!i.isTransitioning)return!1;let o=ic(i.currentLocation.pathname,n)||i.currentLocation.pathname,r=ic(i.nextLocation.pathname,n)||i.nextLocation.pathname;return vx(s.pathname,r)!=null||vx(s.pathname,o)!=null}var G0=OH();const JH=NH(G0),ej="/assets/intango-logo-Bwk5HiGO.png";function tj(e){var t,i,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(i=tj(e[t]))&&(n&&(n+=" "),n+=i)}else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}function Mi(){for(var e,t,i=0,n="",s=arguments.length;i<s;i++)(e=arguments[i])&&(t=tj(e))&&(n&&(n+=" "),n+=t);return n}const GB=({type:e,name:t,setEmail:i,setPassword:n,isEmptyEmail:s,isEmptyPassword:o})=>F.jsx("input",{onChange:r=>{i?i(r.target.value):n(r.target.value)},type:e,placeholder:t,className:Mi("w-full p-3 my-2 outline-none bg-gray-50 border rounded focus:border-[#6c62ff] transition-all duration-100",s&&"border-red-500",o&&"border-red-500")}),_B=e=>{let t;const i=new Set,n=(c,d)=>{const p=typeof c=="function"?c(t):c;if(!Object.is(p,t)){const g=t;t=d??(typeof p!="object"||p===null)?p:Object.assign({},t,p),i.forEach(m=>m(t,g))}},s=()=>t,a={setState:n,getState:s,getInitialState:()=>l,subscribe:c=>(i.add(c),()=>i.delete(c))},l=t=e(n,s,a);return a},SZ=(e=>e?_B(e):_B),xZ=e=>e;function MZ(e,t=xZ){const i=Y.useSyncExternalStore(e.subscribe,Y.useCallback(()=>t(e.getState()),[e,t]),Y.useCallback(()=>t(e.getInitialState()),[e,t]));return Y.useDebugValue(i),i}const VB=e=>{const t=SZ(e),i=n=>MZ(t,n);return Object.assign(i,t),i},eb=(e=>e?VB(e):VB);function ij(e,t){return function(){return e.apply(t,arguments)}}const{toString:DZ}=Object.prototype,{getPrototypeOf:Qk}=Object,{iterator:_0,toStringTag:nj}=Symbol,V0=(e=>t=>{const i=DZ.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),ia=e=>(e=e.toLowerCase(),t=>V0(t)===e),z0=e=>t=>typeof t===e,{isArray:kf}=Array,Kg=z0("undefined");function tb(e){return e!==null&&!Kg(e)&&e.constructor!==null&&!Kg(e.constructor)&&fo(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const sj=ia("ArrayBuffer");function AZ(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&sj(e.buffer),t}const RZ=z0("string"),fo=z0("function"),oj=z0("number"),ib=e=>e!==null&&typeof e=="object",EZ=e=>e===!0||e===!1,wS=e=>{if(V0(e)!=="object")return!1;const t=Qk(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(nj in e)&&!(_0 in e)},TZ=e=>{if(!ib(e)||tb(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},IZ=ia("Date"),kZ=ia("File"),LZ=ia("Blob"),PZ=ia("FileList"),NZ=e=>ib(e)&&fo(e.pipe),FZ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||fo(e.append)&&((t=V0(e))==="formdata"||t==="object"&&fo(e.toString)&&e.toString()==="[object FormData]"))},OZ=ia("URLSearchParams"),[BZ,GZ,_Z,VZ]=["ReadableStream","Request","Response","Headers"].map(ia),zZ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nb(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),kf(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(tb(e))return;const o=i?Object.getOwnPropertyNames(e):Object.keys(e),r=o.length;let a;for(n=0;n<r;n++)a=o[n],t.call(null,e[a],a,e)}}function rj(e,t){if(tb(e))return null;t=t.toLowerCase();const i=Object.keys(e);let n=i.length,s;for(;n-- >0;)if(s=i[n],t===s.toLowerCase())return s;return null}const _d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,aj=e=>!Kg(e)&&e!==_d;function QT(){const{caseless:e,skipUndefined:t}=aj(this)&&this||{},i={},n=(s,o)=>{const r=e&&rj(i,o)||o;wS(i[r])&&wS(s)?i[r]=QT(i[r],s):wS(s)?i[r]=QT({},s):kf(s)?i[r]=s.slice():(!t||!Kg(s))&&(i[r]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&nb(arguments[s],n);return i}const HZ=(e,t,i,{allOwnKeys:n}={})=>(nb(t,(s,o)=>{i&&fo(s)?e[o]=ij(s,i):e[o]=s},{allOwnKeys:n}),e),jZ=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),WZ=(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},UZ=(e,t,i,n)=>{let s,o,r;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)r=s[o],(!n||n(r,e,t))&&!a[r]&&(t[r]=e[r],a[r]=!0);e=i!==!1&&Qk(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},$Z=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return n!==-1&&n===i},YZ=e=>{if(!e)return null;if(kf(e))return e;let t=e.length;if(!oj(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},KZ=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Qk(Uint8Array)),qZ=(e,t)=>{const n=(e&&e[_0]).call(e);let s;for(;(s=n.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},ZZ=(e,t)=>{let i;const n=[];for(;(i=e.exec(t))!==null;)n.push(i);return n},XZ=ia("HTMLFormElement"),QZ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,n,s){return n.toUpperCase()+s}),zB=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),JZ=ia("RegExp"),lj=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};nb(i,(s,o)=>{let r;(r=t(s,o,e))!==!1&&(n[o]=r||s)}),Object.defineProperties(e,n)},eX=e=>{lj(e,(t,i)=>{if(fo(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const n=e[i];if(fo(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},tX=(e,t)=>{const i={},n=s=>{s.forEach(o=>{i[o]=!0})};return kf(e)?n(e):n(String(e).split(t)),i},iX=()=>{},nX=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function sX(e){return!!(e&&fo(e.append)&&e[nj]==="FormData"&&e[_0])}const oX=e=>{const t=new Array(10),i=(n,s)=>{if(ib(n)){if(t.indexOf(n)>=0)return;if(tb(n))return n;if(!("toJSON"in n)){t[s]=n;const o=kf(n)?[]:{};return nb(n,(r,a)=>{const l=i(r,s+1);!Kg(l)&&(o[a]=l)}),t[s]=void 0,o}}return n};return i(e,0)},rX=ia("AsyncFunction"),aX=e=>e&&(ib(e)||fo(e))&&fo(e.then)&&fo(e.catch),cj=((e,t)=>e?setImmediate:t?((i,n)=>(_d.addEventListener("message",({source:s,data:o})=>{s===_d&&o===i&&n.length&&n.shift()()},!1),s=>{n.push(s),_d.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",fo(_d.postMessage)),lX=typeof queueMicrotask<"u"?queueMicrotask.bind(_d):typeof process<"u"&&process.nextTick||cj,cX=e=>e!=null&&fo(e[_0]),ae={isArray:kf,isArrayBuffer:sj,isBuffer:tb,isFormData:FZ,isArrayBufferView:AZ,isString:RZ,isNumber:oj,isBoolean:EZ,isObject:ib,isPlainObject:wS,isEmptyObject:TZ,isReadableStream:BZ,isRequest:GZ,isResponse:_Z,isHeaders:VZ,isUndefined:Kg,isDate:IZ,isFile:kZ,isBlob:LZ,isRegExp:JZ,isFunction:fo,isStream:NZ,isURLSearchParams:OZ,isTypedArray:KZ,isFileList:PZ,forEach:nb,merge:QT,extend:HZ,trim:zZ,stripBOM:jZ,inherits:WZ,toFlatObject:UZ,kindOf:V0,kindOfTest:ia,endsWith:$Z,toArray:YZ,forEachEntry:qZ,matchAll:ZZ,isHTMLForm:XZ,hasOwnProperty:zB,hasOwnProp:zB,reduceDescriptors:lj,freezeMethods:eX,toObjectSet:tX,toCamelCase:QZ,noop:iX,toFiniteNumber:nX,findKey:rj,global:_d,isContextDefined:aj,isSpecCompliantForm:sX,toJSONObject:oX,isAsyncFn:rX,isThenable:aX,setImmediate:cj,asap:lX,isIterable:cX};function yt(e,t,i,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}ae.inherits(yt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ae.toJSONObject(this.config),code:this.code,status:this.status}}});const uj=yt.prototype,dj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{dj[e]={value:e}});Object.defineProperties(yt,dj);Object.defineProperty(uj,"isAxiosError",{value:!0});yt.from=(e,t,i,n,s,o)=>{const r=Object.create(uj);ae.toFlatObject(e,r,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const a=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return yt.call(r,a,l,i,n,s),e&&r.cause==null&&Object.defineProperty(r,"cause",{value:e,configurable:!0}),r.name=e&&e.name||"Error",o&&Object.assign(r,o),r};const uX=null;function JT(e){return ae.isPlainObject(e)||ae.isArray(e)}function hj(e){return ae.endsWith(e,"[]")?e.slice(0,-2):e}function HB(e,t,i){return e?e.concat(t).map(function(s,o){return s=hj(s),!i&&o?"["+s+"]":s}).join(i?".":""):t}function dX(e){return ae.isArray(e)&&!e.some(JT)}const hX=ae.toFlatObject(ae,{},null,function(t){return/^is[A-Z]/.test(t)});function H0(e,t,i){if(!ae.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=ae.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,C){return!ae.isUndefined(C[b])});const n=i.metaTokens,s=i.visitor||d,o=i.dots,r=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&ae.isSpecCompliantForm(t);if(!ae.isFunction(s))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(ae.isDate(y))return y.toISOString();if(ae.isBoolean(y))return y.toString();if(!l&&ae.isBlob(y))throw new yt("Blob is not supported. Use a Buffer instead.");return ae.isArrayBuffer(y)||ae.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,b,C){let w=y;if(y&&!C&&typeof y=="object"){if(ae.endsWith(b,"{}"))b=n?b:b.slice(0,-2),y=JSON.stringify(y);else if(ae.isArray(y)&&dX(y)||(ae.isFileList(y)||ae.endsWith(b,"[]"))&&(w=ae.toArray(y)))return b=hj(b),w.forEach(function(M,E){!(ae.isUndefined(M)||M===null)&&t.append(r===!0?HB([b],E,o):r===null?b:b+"[]",c(M))}),!1}return JT(y)?!0:(t.append(HB(C,b,o),c(y)),!1)}const p=[],g=Object.assign(hX,{defaultVisitor:d,convertValue:c,isVisitable:JT});function m(y,b){if(!ae.isUndefined(y)){if(p.indexOf(y)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(y),ae.forEach(y,function(w,x){(!(ae.isUndefined(w)||w===null)&&s.call(t,w,ae.isString(x)?x.trim():x,b,g))===!0&&m(w,b?b.concat(x):[x])}),p.pop()}}if(!ae.isObject(e))throw new TypeError("data must be an object");return m(e),t}function jB(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Jk(e,t){this._pairs=[],e&&H0(e,this,t)}const pj=Jk.prototype;pj.append=function(t,i){this._pairs.push([t,i])};pj.toString=function(t){const i=t?function(n){return t.call(this,n,jB)}:jB;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function pX(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function gj(e,t,i){if(!t)return e;const n=i&&i.encode||pX;ae.isFunction(i)&&(i={serialize:i});const s=i&&i.serialize;let o;if(s?o=s(t,i):o=ae.isURLSearchParams(t)?t.toString():new Jk(t,i).toString(n),o){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class WB{constructor(){this.handlers=[]}use(t,i,n){return this.handlers.push({fulfilled:t,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ae.forEach(this.handlers,function(n){n!==null&&t(n)})}}const fj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gX=typeof URLSearchParams<"u"?URLSearchParams:Jk,fX=typeof FormData<"u"?FormData:null,mX=typeof Blob<"u"?Blob:null,yX={isBrowser:!0,classes:{URLSearchParams:gX,FormData:fX,Blob:mX},protocols:["http","https","file","blob","url","data"]},e1=typeof window<"u"&&typeof document<"u",eI=typeof navigator=="object"&&navigator||void 0,vX=e1&&(!eI||["ReactNative","NativeScript","NS"].indexOf(eI.product)<0),bX=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",CX=e1&&window.location.href||"http://localhost",wX=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:e1,hasStandardBrowserEnv:vX,hasStandardBrowserWebWorkerEnv:bX,navigator:eI,origin:CX},Symbol.toStringTag,{value:"Module"})),Rs={...wX,...yX};function SX(e,t){return H0(e,new Rs.classes.URLSearchParams,{visitor:function(i,n,s,o){return Rs.isNode&&ae.isBuffer(i)?(this.append(n,i.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function xX(e){return ae.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function MX(e){const t={},i=Object.keys(e);let n;const s=i.length;let o;for(n=0;n<s;n++)o=i[n],t[o]=e[o];return t}function mj(e){function t(i,n,s,o){let r=i[o++];if(r==="__proto__")return!0;const a=Number.isFinite(+r),l=o>=i.length;return r=!r&&ae.isArray(s)?s.length:r,l?(ae.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!a):((!s[r]||!ae.isObject(s[r]))&&(s[r]=[]),t(i,n,s[r],o)&&ae.isArray(s[r])&&(s[r]=MX(s[r])),!a)}if(ae.isFormData(e)&&ae.isFunction(e.entries)){const i={};return ae.forEachEntry(e,(n,s)=>{t(xX(n),s,i,0)}),i}return null}function DX(e,t,i){if(ae.isString(e))try{return(t||JSON.parse)(e),ae.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(e)}const sb={transitional:fj,adapter:["xhr","http","fetch"],transformRequest:[function(t,i){const n=i.getContentType()||"",s=n.indexOf("application/json")>-1,o=ae.isObject(t);if(o&&ae.isHTMLForm(t)&&(t=new FormData(t)),ae.isFormData(t))return s?JSON.stringify(mj(t)):t;if(ae.isArrayBuffer(t)||ae.isBuffer(t)||ae.isStream(t)||ae.isFile(t)||ae.isBlob(t)||ae.isReadableStream(t))return t;if(ae.isArrayBufferView(t))return t.buffer;if(ae.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return SX(t,this.formSerializer).toString();if((a=ae.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return H0(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||s?(i.setContentType("application/json",!1),DX(t)):t}],transformResponse:[function(t){const i=this.transitional||sb.transitional,n=i&&i.forcedJSONParsing,s=this.responseType==="json";if(ae.isResponse(t)||ae.isReadableStream(t))return t;if(t&&ae.isString(t)&&(n&&!this.responseType||s)){const r=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(a){if(r)throw a.name==="SyntaxError"?yt.from(a,yt.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rs.classes.FormData,Blob:Rs.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ae.forEach(["delete","get","head","post","put","patch"],e=>{sb.headers[e]={}});const AX=ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),RX=e=>{const t={};let i,n,s;return e&&e.split(`
`).forEach(function(r){s=r.indexOf(":"),i=r.substring(0,s).trim().toLowerCase(),n=r.substring(s+1).trim(),!(!i||t[i]&&AX[i])&&(i==="set-cookie"?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+", "+n:n)}),t},UB=Symbol("internals");function ny(e){return e&&String(e).trim().toLowerCase()}function SS(e){return e===!1||e==null?e:ae.isArray(e)?e.map(SS):String(e)}function EX(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}const TX=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function aE(e,t,i,n,s){if(ae.isFunction(n))return n.call(this,t,i);if(s&&(t=i),!!ae.isString(t)){if(ae.isString(n))return t.indexOf(n)!==-1;if(ae.isRegExp(n))return n.test(t)}}function IX(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,n)=>i.toUpperCase()+n)}function kX(e,t){const i=ae.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+i,{value:function(s,o,r){return this[n].call(this,t,s,o,r)},configurable:!0})})}let mo=class{constructor(t){t&&this.set(t)}set(t,i,n){const s=this;function o(a,l,c){const d=ny(l);if(!d)throw new Error("header name must be a non-empty string");const p=ae.findKey(s,d);(!p||s[p]===void 0||c===!0||c===void 0&&s[p]!==!1)&&(s[p||l]=SS(a))}const r=(a,l)=>ae.forEach(a,(c,d)=>o(c,d,l));if(ae.isPlainObject(t)||t instanceof this.constructor)r(t,i);else if(ae.isString(t)&&(t=t.trim())&&!TX(t))r(RX(t),i);else if(ae.isObject(t)&&ae.isIterable(t)){let a={},l,c;for(const d of t){if(!ae.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[c=d[0]]=(l=a[c])?ae.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}r(a,i)}else t!=null&&o(i,t,n);return this}get(t,i){if(t=ny(t),t){const n=ae.findKey(this,t);if(n){const s=this[n];if(!i)return s;if(i===!0)return EX(s);if(ae.isFunction(i))return i.call(this,s,n);if(ae.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=ny(t),t){const n=ae.findKey(this,t);return!!(n&&this[n]!==void 0&&(!i||aE(this,this[n],n,i)))}return!1}delete(t,i){const n=this;let s=!1;function o(r){if(r=ny(r),r){const a=ae.findKey(n,r);a&&(!i||aE(n,n[a],a,i))&&(delete n[a],s=!0)}}return ae.isArray(t)?t.forEach(o):o(t),s}clear(t){const i=Object.keys(this);let n=i.length,s=!1;for(;n--;){const o=i[n];(!t||aE(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const i=this,n={};return ae.forEach(this,(s,o)=>{const r=ae.findKey(n,o);if(r){i[r]=SS(s),delete i[o];return}const a=t?IX(o):String(o).trim();a!==o&&delete i[o],i[a]=SS(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return ae.forEach(this,(n,s)=>{n!=null&&n!==!1&&(i[s]=t&&ae.isArray(n)?n.join(", "):n)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const n=new this(t);return i.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[UB]=this[UB]={accessors:{}}).accessors,s=this.prototype;function o(r){const a=ny(r);n[a]||(kX(s,r),n[a]=!0)}return ae.isArray(t)?t.forEach(o):o(t),this}};mo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ae.reduceDescriptors(mo.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[i]=n}}});ae.freezeMethods(mo);function lE(e,t){const i=this||sb,n=t||i,s=mo.from(n.headers);let o=n.data;return ae.forEach(e,function(a){o=a.call(i,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function yj(e){return!!(e&&e.__CANCEL__)}function Lf(e,t,i){yt.call(this,e??"canceled",yt.ERR_CANCELED,t,i),this.name="CanceledError"}ae.inherits(Lf,yt,{__CANCEL__:!0});function vj(e,t,i){const n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):t(new yt("Request failed with status code "+i.status,[yt.ERR_BAD_REQUEST,yt.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function LX(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function PX(e,t){e=e||10;const i=new Array(e),n=new Array(e);let s=0,o=0,r;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),d=n[o];r||(r=c),i[s]=l,n[s]=c;let p=o,g=0;for(;p!==s;)g+=i[p++],p=p%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-r<t)return;const m=d&&c-d;return m?Math.round(g*1e3/m):void 0}}function NX(e,t){let i=0,n=1e3/t,s,o;const r=(c,d=Date.now())=>{i=d,s=null,o&&(clearTimeout(o),o=null),e(...c)};return[(...c)=>{const d=Date.now(),p=d-i;p>=n?r(c,d):(s=c,o||(o=setTimeout(()=>{o=null,r(s)},n-p)))},()=>s&&r(s)]}const bx=(e,t,i=3)=>{let n=0;const s=PX(50,250);return NX(o=>{const r=o.loaded,a=o.lengthComputable?o.total:void 0,l=r-n,c=s(l),d=r<=a;n=r;const p={loaded:r,total:a,progress:a?r/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-r)/c:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(p)},i)},$B=(e,t)=>{const i=e!=null;return[n=>t[0]({lengthComputable:i,total:e,loaded:n}),t[1]]},YB=e=>(...t)=>ae.asap(()=>e(...t)),FX=Rs.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,Rs.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL(Rs.origin),Rs.navigator&&/(msie|trident)/i.test(Rs.navigator.userAgent)):()=>!0,OX=Rs.hasStandardBrowserEnv?{write(e,t,i,n,s,o){const r=[e+"="+encodeURIComponent(t)];ae.isNumber(i)&&r.push("expires="+new Date(i).toGMTString()),ae.isString(n)&&r.push("path="+n),ae.isString(s)&&r.push("domain="+s),o===!0&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function BX(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function GX(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function bj(e,t,i){let n=!BX(t);return e&&(n||i==!1)?GX(e,t):t}const KB=e=>e instanceof mo?{...e}:e;function gh(e,t){t=t||{};const i={};function n(c,d,p,g){return ae.isPlainObject(c)&&ae.isPlainObject(d)?ae.merge.call({caseless:g},c,d):ae.isPlainObject(d)?ae.merge({},d):ae.isArray(d)?d.slice():d}function s(c,d,p,g){if(ae.isUndefined(d)){if(!ae.isUndefined(c))return n(void 0,c,p,g)}else return n(c,d,p,g)}function o(c,d){if(!ae.isUndefined(d))return n(void 0,d)}function r(c,d){if(ae.isUndefined(d)){if(!ae.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function a(c,d,p){if(p in t)return n(c,d);if(p in e)return n(void 0,c)}const l={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(c,d,p)=>s(KB(c),KB(d),p,!0)};return ae.forEach(Object.keys({...e,...t}),function(d){const p=l[d]||s,g=p(e[d],t[d],d);ae.isUndefined(g)&&p!==a||(i[d]=g)}),i}const Cj=e=>{const t=gh({},e);let{data:i,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:r,auth:a}=t;if(t.headers=r=mo.from(r),t.url=gj(bj(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&r.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),ae.isFormData(i)){if(Rs.hasStandardBrowserEnv||Rs.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if(ae.isFunction(i.getHeaders)){const l=i.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,p])=>{c.includes(d.toLowerCase())&&r.set(d,p)})}}if(Rs.hasStandardBrowserEnv&&(n&&ae.isFunction(n)&&(n=n(t)),n||n!==!1&&FX(t.url))){const l=s&&o&&OX.read(o);l&&r.set(s,l)}return t},_X=typeof XMLHttpRequest<"u",VX=_X&&function(e){return new Promise(function(i,n){const s=Cj(e);let o=s.data;const r=mo.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,d,p,g,m,y;function b(){m&&m(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let C=new XMLHttpRequest;C.open(s.method.toUpperCase(),s.url,!0),C.timeout=s.timeout;function w(){if(!C)return;const M=mo.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),I={data:!a||a==="text"||a==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:M,config:e,request:C};vj(function(T){i(T),b()},function(T){n(T),b()},I),C=null}"onloadend"in C?C.onloadend=w:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(w)},C.onabort=function(){C&&(n(new yt("Request aborted",yt.ECONNABORTED,e,C)),C=null)},C.onerror=function(E){const I=E&&E.message?E.message:"Network Error",N=new yt(I,yt.ERR_NETWORK,e,C);N.event=E||null,n(N),C=null},C.ontimeout=function(){let E=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const I=s.transitional||fj;s.timeoutErrorMessage&&(E=s.timeoutErrorMessage),n(new yt(E,I.clarifyTimeoutError?yt.ETIMEDOUT:yt.ECONNABORTED,e,C)),C=null},o===void 0&&r.setContentType(null),"setRequestHeader"in C&&ae.forEach(r.toJSON(),function(E,I){C.setRequestHeader(I,E)}),ae.isUndefined(s.withCredentials)||(C.withCredentials=!!s.withCredentials),a&&a!=="json"&&(C.responseType=s.responseType),c&&([g,y]=bx(c,!0),C.addEventListener("progress",g)),l&&C.upload&&([p,m]=bx(l),C.upload.addEventListener("progress",p),C.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(d=M=>{C&&(n(!M||M.type?new Lf(null,e,C):M),C.abort(),C=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const x=LX(s.url);if(x&&Rs.protocols.indexOf(x)===-1){n(new yt("Unsupported protocol "+x+":",yt.ERR_BAD_REQUEST,e));return}C.send(o||null)})},zX=(e,t)=>{const{length:i}=e=e?e.filter(Boolean):[];if(t||i){let n=new AbortController,s;const o=function(c){if(!s){s=!0,a();const d=c instanceof Error?c:this.reason;n.abort(d instanceof yt?d:new Lf(d instanceof Error?d.message:d))}};let r=t&&setTimeout(()=>{r=null,o(new yt(`timeout ${t} of ms exceeded`,yt.ETIMEDOUT))},t);const a=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),e=null)};e.forEach(c=>c.addEventListener("abort",o));const{signal:l}=n;return l.unsubscribe=()=>ae.asap(a),l}},HX=function*(e,t){let i=e.byteLength;if(i<t){yield e;return}let n=0,s;for(;n<i;)s=n+t,yield e.slice(n,s),n=s},jX=async function*(e,t){for await(const i of WX(e))yield*HX(i,t)},WX=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:i,value:n}=await t.read();if(i)break;yield n}}finally{await t.cancel()}},qB=(e,t,i,n)=>{const s=jX(e,t);let o=0,r,a=l=>{r||(r=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await s.next();if(c){a(),l.close();return}let p=d.byteLength;if(i){let g=o+=p;i(g)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},ZB=64*1024,{isFunction:Fw}=ae,UX=(({Request:e,Response:t})=>({Request:e,Response:t}))(ae.global),{ReadableStream:XB,TextEncoder:QB}=ae.global,JB=(e,...t)=>{try{return!!e(...t)}catch{return!1}},$X=e=>{e=ae.merge.call({skipUndefined:!0},UX,e);const{fetch:t,Request:i,Response:n}=e,s=t?Fw(t):typeof fetch=="function",o=Fw(i),r=Fw(n);if(!s)return!1;const a=s&&Fw(XB),l=s&&(typeof QB=="function"?(y=>b=>y.encode(b))(new QB):async y=>new Uint8Array(await new i(y).arrayBuffer())),c=o&&a&&JB(()=>{let y=!1;const b=new i(Rs.origin,{body:new XB,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!b}),d=r&&a&&JB(()=>ae.isReadableStream(new n("").body)),p={stream:d&&(y=>y.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!p[y]&&(p[y]=(b,C)=>{let w=b&&b[y];if(w)return w.call(b);throw new yt(`Response type '${y}' is not supported`,yt.ERR_NOT_SUPPORT,C)})});const g=async y=>{if(y==null)return 0;if(ae.isBlob(y))return y.size;if(ae.isSpecCompliantForm(y))return(await new i(Rs.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(ae.isArrayBufferView(y)||ae.isArrayBuffer(y))return y.byteLength;if(ae.isURLSearchParams(y)&&(y=y+""),ae.isString(y))return(await l(y)).byteLength},m=async(y,b)=>{const C=ae.toFiniteNumber(y.getContentLength());return C??g(b)};return async y=>{let{url:b,method:C,data:w,signal:x,cancelToken:M,timeout:E,onDownloadProgress:I,onUploadProgress:N,responseType:T,headers:P,withCredentials:O="same-origin",fetchOptions:G}=Cj(y),B=t||fetch;T=T?(T+"").toLowerCase():"text";let z=zX([x,M&&M.toAbortSignal()],E),j=null;const X=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let q;try{if(N&&c&&C!=="get"&&C!=="head"&&(q=await m(P,w))!==0){let V=new i(b,{method:"POST",body:w,duplex:"half"}),W;if(ae.isFormData(w)&&(W=V.headers.get("content-type"))&&P.setContentType(W),V.body){const[ee,pe]=$B(q,bx(YB(N)));w=qB(V.body,ZB,ee,pe)}}ae.isString(O)||(O=O?"include":"omit");const H=o&&"credentials"in i.prototype,K={...G,signal:z,method:C.toUpperCase(),headers:P.normalize().toJSON(),body:w,duplex:"half",credentials:H?O:void 0};j=o&&new i(b,K);let U=await(o?B(j,G):B(b,K));const de=d&&(T==="stream"||T==="response");if(d&&(I||de&&X)){const V={};["status","statusText","headers"].forEach(be=>{V[be]=U[be]});const W=ae.toFiniteNumber(U.headers.get("content-length")),[ee,pe]=I&&$B(W,bx(YB(I),!0))||[];U=new n(qB(U.body,ZB,ee,()=>{pe&&pe(),X&&X()}),V)}T=T||"text";let te=await p[ae.findKey(p,T)||"text"](U,y);return!de&&X&&X(),await new Promise((V,W)=>{vj(V,W,{data:te,headers:mo.from(U.headers),status:U.status,statusText:U.statusText,config:y,request:j})})}catch(H){throw X&&X(),H&&H.name==="TypeError"&&/Load failed|fetch/i.test(H.message)?Object.assign(new yt("Network Error",yt.ERR_NETWORK,y,j),{cause:H.cause||H}):yt.from(H,H&&H.code,y,j)}}},YX=new Map,wj=e=>{let t=e?e.env:{};const{fetch:i,Request:n,Response:s}=t,o=[n,s,i];let r=o.length,a=r,l,c,d=YX;for(;a--;)l=o[a],c=d.get(l),c===void 0&&d.set(l,c=a?new Map:$X(t)),d=c;return c};wj();const tI={http:uX,xhr:VX,fetch:{get:wj}};ae.forEach(tI,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const eG=e=>`- ${e}`,KX=e=>ae.isFunction(e)||e===null||e===!1,Sj={getAdapter:(e,t)=>{e=ae.isArray(e)?e:[e];const{length:i}=e;let n,s;const o={};for(let r=0;r<i;r++){n=e[r];let a;if(s=n,!KX(n)&&(s=tI[(a=String(n)).toLowerCase()],s===void 0))throw new yt(`Unknown adapter '${a}'`);if(s&&(ae.isFunction(s)||(s=s.get(t))))break;o[a||"#"+r]=s}if(!s){const r=Object.entries(o).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=i?r.length>1?`since :
`+r.map(eG).join(`
`):" "+eG(r[0]):"as no adapter specified";throw new yt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:tI};function cE(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Lf(null,e)}function tG(e){return cE(e),e.headers=mo.from(e.headers),e.data=lE.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Sj.getAdapter(e.adapter||sb.adapter,e)(e).then(function(n){return cE(e),n.data=lE.call(e,e.transformResponse,n),n.headers=mo.from(n.headers),n},function(n){return yj(n)||(cE(e),n&&n.response&&(n.response.data=lE.call(e,e.transformResponse,n.response),n.response.headers=mo.from(n.response.headers))),Promise.reject(n)})}const xj="1.12.2",j0={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{j0[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const iG={};j0.transitional=function(t,i,n){function s(o,r){return"[Axios v"+xj+"] Transitional option '"+o+"'"+r+(n?". "+n:"")}return(o,r,a)=>{if(t===!1)throw new yt(s(r," has been removed"+(i?" in "+i:"")),yt.ERR_DEPRECATED);return i&&!iG[r]&&(iG[r]=!0,console.warn(s(r," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(o,r,a):!0}};j0.spelling=function(t){return(i,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function qX(e,t,i){if(typeof e!="object")throw new yt("options must be an object",yt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const o=n[s],r=t[o];if(r){const a=e[o],l=a===void 0||r(a,o,e);if(l!==!0)throw new yt("option "+o+" must be "+l,yt.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new yt("Unknown option "+o,yt.ERR_BAD_OPTION)}}const xS={assertOptions:qX,validators:j0},ma=xS.validators;let Zd=class{constructor(t){this.defaults=t||{},this.interceptors={request:new WB,response:new WB}}async request(t,i){try{return await this._request(t,i)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=gh(this.defaults,i);const{transitional:n,paramsSerializer:s,headers:o}=i;n!==void 0&&xS.assertOptions(n,{silentJSONParsing:ma.transitional(ma.boolean),forcedJSONParsing:ma.transitional(ma.boolean),clarifyTimeoutError:ma.transitional(ma.boolean)},!1),s!=null&&(ae.isFunction(s)?i.paramsSerializer={serialize:s}:xS.assertOptions(s,{encode:ma.function,serialize:ma.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),xS.assertOptions(i,{baseUrl:ma.spelling("baseURL"),withXsrfToken:ma.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let r=o&&ae.merge(o.common,o[i.method]);o&&ae.forEach(["delete","get","head","post","put","patch","common"],y=>{delete o[y]}),i.headers=mo.concat(r,o);const a=[];let l=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(i)===!1||(l=l&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const c=[];this.interceptors.response.forEach(function(b){c.push(b.fulfilled,b.rejected)});let d,p=0,g;if(!l){const y=[tG.bind(this),void 0];for(y.unshift(...a),y.push(...c),g=y.length,d=Promise.resolve(i);p<g;)d=d.then(y[p++],y[p++]);return d}g=a.length;let m=i;for(;p<g;){const y=a[p++],b=a[p++];try{m=y(m)}catch(C){b.call(this,C);break}}try{d=tG.call(this,m)}catch(y){return Promise.reject(y)}for(p=0,g=c.length;p<g;)d=d.then(c[p++],c[p++]);return d}getUri(t){t=gh(this.defaults,t);const i=bj(t.baseURL,t.url,t.allowAbsoluteUrls);return gj(i,t.params,t.paramsSerializer)}};ae.forEach(["delete","get","head","options"],function(t){Zd.prototype[t]=function(i,n){return this.request(gh(n||{},{method:t,url:i,data:(n||{}).data}))}});ae.forEach(["post","put","patch"],function(t){function i(n){return function(o,r,a){return this.request(gh(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:r}))}}Zd.prototype[t]=i(),Zd.prototype[t+"Form"]=i(!0)});let ZX=class Mj{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(o){i=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const r=new Promise(a=>{n.subscribe(a),o=a}).then(s);return r.cancel=function(){n.unsubscribe(o)},r},t(function(o,r,a){n.reason||(n.reason=new Lf(o,r,a),i(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const t=new AbortController,i=n=>{t.abort(n)};return this.subscribe(i),t.signal.unsubscribe=()=>this.unsubscribe(i),t.signal}static source(){let t;return{token:new Mj(function(s){t=s}),cancel:t}}};function XX(e){return function(i){return e.apply(null,i)}}function QX(e){return ae.isObject(e)&&e.isAxiosError===!0}const iI={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(iI).forEach(([e,t])=>{iI[t]=e});function Dj(e){const t=new Zd(e),i=ij(Zd.prototype.request,t);return ae.extend(i,Zd.prototype,t,{allOwnKeys:!0}),ae.extend(i,t,null,{allOwnKeys:!0}),i.create=function(s){return Dj(gh(e,s))},i}const nt=Dj(sb);nt.Axios=Zd;nt.CanceledError=Lf;nt.CancelToken=ZX;nt.isCancel=yj;nt.VERSION=xj;nt.toFormData=H0;nt.AxiosError=yt;nt.Cancel=nt.CanceledError;nt.all=function(t){return Promise.all(t)};nt.spread=XX;nt.isAxiosError=QX;nt.mergeConfig=gh;nt.AxiosHeaders=mo;nt.formToJSON=e=>mj(ae.isHTMLForm(e)?new FormData(e):e);nt.getAdapter=Sj.getAdapter;nt.HttpStatusCode=iI;nt.default=nt;const{Axios:q1e,AxiosError:Z1e,CanceledError:X1e,isCancel:Q1e,CancelToken:J1e,VERSION:eLe,all:tLe,Cancel:iLe,isAxiosError:nLe,spread:sLe,toFormData:oLe,AxiosHeaders:rLe,HttpStatusCode:aLe,formToJSON:lLe,getAdapter:cLe,mergeConfig:uLe}=nt,JX="http://localhost:4000/api/admin",nG="http://localhost:4000/api/auth";nt.defaults.withCredentials=!0;const Es=eb((e,t)=>({isLoading:!1,error:null,isAuthorized:!1,isCheckingAuth:!1,token:localStorage.getItem("token")||null,user:null,adminLogin:async(i,n)=>{e({isLoading:!0,error:!1});try{const{data:s}=await nt.post(JX+"/login",{email:i,password:n});return localStorage.setItem("token",s.token),e({user:s.user,isAuthorized:!0}),s}catch(s){console.log("error to login",s.response.data),e({error:s.response.data})}finally{e({isLoading:!1})}},login:async(i,n)=>{e({isLoading:!0,error:!1});try{const{data:s}=await nt.post(nG+"/login",{email:i,password:n});return localStorage.setItem("token",s.token),console.log(s),e({user:s.user,isAuthorized:!0}),s}catch(s){console.log("error to login",s.response.data),e({error:s.response.data})}finally{e({isLoading:!1})}},checkAuth:async()=>{e({isCheckingAuth:!0});try{const i=t().token,{data:n}=await nt.post(nG+"/checkAuth",{token:i});console.log(n),console.log(n.user.role),e({user:n.user.userInfo||n.user,isAuthorized:!0})}catch(i){console.log("error to check auth",i.response.data)}finally{e({isCheckingAuth:!1})}}}));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eQ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tQ=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,n)=>n?n.toUpperCase():i.toLowerCase()),sG=e=>{const t=tQ(e);return t.charAt(0).toUpperCase()+t.slice(1)},Aj=(...e)=>e.filter((t,i,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===i).join(" ").trim(),iQ=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nQ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:r,...a},l)=>R.createElement("svg",{ref:l,...nQ,width:t,height:t,stroke:e,strokeWidth:n?Number(i)*24/Number(t):i,className:Aj("lucide",s),...!o&&!iQ(a)&&{"aria-hidden":"true"},...a},[...r.map(([c,d])=>R.createElement(c,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=(e,t)=>{const i=R.forwardRef(({className:n,...s},o)=>R.createElement(sQ,{ref:o,iconNode:t,className:Aj(`lucide-${eQ(sG(e))}`,`lucide-${e}`,n),...s}));return i.displayName=sG(e),i};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],MS=Hn("calendar",oQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]],Rj=Hn("captions",rQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ej=Hn("download",aQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],t1=Hn("graduation-cap",lQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],uE=Hn("layout-dashboard",cQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],dE=Hn("list-checks",uQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],En=Hn("loader",dQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],pQ=Hn("log-out",hQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],fQ=Hn("menu",gQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],yQ=Hn("panel-left",mQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bQ=Hn("plus",vQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Py=Hn("school",CQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],W0=Hn("search",wQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],i1=Hn("square-pen",SQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],MQ=Hn("trash-2",xQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],n1=Hn("trash",DQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQ=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],RQ=Hn("upload",AQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Tj=Hn("users",EQ);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],IQ=Hn("x",TQ);let kQ={data:""},LQ=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||kQ},PQ=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,NQ=/\/\*[^]*?\*\/|  +/g,oG=/\n+/g,pu=(e,t)=>{let i="",n="",s="";for(let o in e){let r=e[o];o[0]=="@"?o[1]=="i"?i=o+" "+r+";":n+=o[1]=="f"?pu(r,o):o+"{"+pu(r,o[1]=="k"?"":t)+"}":typeof r=="object"?n+=pu(r,t?t.replace(/([^,])+/g,a=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):o):r!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=pu.p?pu.p(o,r):o+":"+r+";")}return i+(t&&s?t+"{"+s+"}":s)+n},Rl={},Ij=e=>{if(typeof e=="object"){let t="";for(let i in e)t+=i+Ij(e[i]);return t}return e},FQ=(e,t,i,n,s)=>{let o=Ij(e),r=Rl[o]||(Rl[o]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(o));if(!Rl[r]){let l=o!==e?e:(c=>{let d,p,g=[{}];for(;d=PQ.exec(c.replace(NQ,""));)d[4]?g.shift():d[3]?(p=d[3].replace(oG," ").trim(),g.unshift(g[0][p]=g[0][p]||{})):g[0][d[1]]=d[2].replace(oG," ").trim();return g[0]})(e);Rl[r]=pu(s?{["@keyframes "+r]:l}:l,i?"":"."+r)}let a=i&&Rl.g?Rl.g:null;return i&&(Rl.g=Rl[r]),((l,c,d,p)=>{p?c.data=c.data.replace(p,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(Rl[r],t,n,a),r},OQ=(e,t,i)=>e.reduce((n,s,o)=>{let r=t[o];if(r&&r.call){let a=r(i),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;r=l?"."+l:a&&typeof a=="object"?a.props?"":pu(a,""):a===!1?"":a}return n+s+(r??"")},"");function U0(e){let t=this||{},i=e.call?e(t.p):e;return FQ(i.unshift?i.raw?OQ(i,[].slice.call(arguments,1),t.p):i.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):i,LQ(t.target),t.g,t.o,t.k)}let kj,nI,sI;U0.bind({g:1});let nc=U0.bind({k:1});function BQ(e,t,i,n){pu.p=t,kj=e,nI=i,sI=n}function Gu(e,t){let i=this||{};return function(){let n=arguments;function s(o,r){let a=Object.assign({},o),l=a.className||s.className;i.p=Object.assign({theme:nI&&nI()},a),i.o=/ *go\d+/.test(l),a.className=U0.apply(i,n)+(l?" "+l:"");let c=e;return e[0]&&(c=a.as||e,delete a.as),sI&&c[0]&&sI(a),kj(c,a)}return s}}var GQ=e=>typeof e=="function",Cx=(e,t)=>GQ(e)?e(t):e,_Q=(()=>{let e=0;return()=>(++e).toString()})(),Lj=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),VQ=20,s1="default",Pj=(e,t)=>{let{toastLimit:i}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,i)};case 1:return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case 2:let{toast:n}=t;return Pj(e,{type:e.toasts.find(r=>r.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(r=>r.id===s||s===void 0?{...r,dismissed:!0,visible:!1}:r)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(r=>({...r,pauseDuration:r.pauseDuration+o}))}}},DS=[],Nj={toasts:[],pausedAt:void 0,settings:{toastLimit:VQ}},ka={},Fj=(e,t=s1)=>{ka[t]=Pj(ka[t]||Nj,e),DS.forEach(([i,n])=>{i===t&&n(ka[t])})},Oj=e=>Object.keys(ka).forEach(t=>Fj(e,t)),zQ=e=>Object.keys(ka).find(t=>ka[t].toasts.some(i=>i.id===e)),$0=(e=s1)=>t=>{Fj(t,e)},HQ={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},jQ=(e={},t=s1)=>{let[i,n]=R.useState(ka[t]||Nj),s=R.useRef(ka[t]);R.useEffect(()=>(s.current!==ka[t]&&n(ka[t]),DS.push([t,n]),()=>{let r=DS.findIndex(([a])=>a===t);r>-1&&DS.splice(r,1)}),[t]);let o=i.toasts.map(r=>{var a,l,c;return{...e,...e[r.type],...r,removeDelay:r.removeDelay||((a=e[r.type])==null?void 0:a.removeDelay)||e?.removeDelay,duration:r.duration||((l=e[r.type])==null?void 0:l.duration)||e?.duration||HQ[r.type],style:{...e.style,...(c=e[r.type])==null?void 0:c.style,...r.style}}});return{...i,toasts:o}},WQ=(e,t="blank",i)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...i,id:i?.id||_Q()}),ob=e=>(t,i)=>{let n=WQ(t,e,i);return $0(n.toasterId||zQ(n.id))({type:2,toast:n}),n.id},qe=(e,t)=>ob("blank")(e,t);qe.error=ob("error");qe.success=ob("success");qe.loading=ob("loading");qe.custom=ob("custom");qe.dismiss=(e,t)=>{let i={type:3,toastId:e};t?$0(t)(i):Oj(i)};qe.dismissAll=e=>qe.dismiss(void 0,e);qe.remove=(e,t)=>{let i={type:4,toastId:e};t?$0(t)(i):Oj(i)};qe.removeAll=e=>qe.remove(void 0,e);qe.promise=(e,t,i)=>{let n=qe.loading(t.loading,{...i,...i?.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let o=t.success?Cx(t.success,s):void 0;return o?qe.success(o,{id:n,...i,...i?.success}):qe.dismiss(n),s}).catch(s=>{let o=t.error?Cx(t.error,s):void 0;o?qe.error(o,{id:n,...i,...i?.error}):qe.dismiss(n)}),e};var UQ=1e3,$Q=(e,t="default")=>{let{toasts:i,pausedAt:n}=jQ(e,t),s=R.useRef(new Map).current,o=R.useCallback((p,g=UQ)=>{if(s.has(p))return;let m=setTimeout(()=>{s.delete(p),r({type:4,toastId:p})},g);s.set(p,m)},[]);R.useEffect(()=>{if(n)return;let p=Date.now(),g=i.map(m=>{if(m.duration===1/0)return;let y=(m.duration||0)+m.pauseDuration-(p-m.createdAt);if(y<0){m.visible&&qe.dismiss(m.id);return}return setTimeout(()=>qe.dismiss(m.id,t),y)});return()=>{g.forEach(m=>m&&clearTimeout(m))}},[i,n,t]);let r=R.useCallback($0(t),[t]),a=R.useCallback(()=>{r({type:5,time:Date.now()})},[r]),l=R.useCallback((p,g)=>{r({type:1,toast:{id:p,height:g}})},[r]),c=R.useCallback(()=>{n&&r({type:6,time:Date.now()})},[n,r]),d=R.useCallback((p,g)=>{let{reverseOrder:m=!1,gutter:y=8,defaultPosition:b}=g||{},C=i.filter(M=>(M.position||b)===(p.position||b)&&M.height),w=C.findIndex(M=>M.id===p.id),x=C.filter((M,E)=>E<w&&M.visible).length;return C.filter(M=>M.visible).slice(...m?[x+1]:[0,x]).reduce((M,E)=>M+(E.height||0)+y,0)},[i]);return R.useEffect(()=>{i.forEach(p=>{if(p.dismissed)o(p.id,p.removeDelay);else{let g=s.get(p.id);g&&(clearTimeout(g),s.delete(p.id))}})},[i,o]),{toasts:i,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:d}}},YQ=nc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,KQ=nc`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qQ=nc`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ZQ=Gu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${YQ} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${KQ} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${qQ} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,XQ=nc`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,QQ=Gu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${XQ} 1s linear infinite;
`,JQ=nc`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,eJ=nc`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,tJ=Gu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${JQ} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${eJ} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,iJ=Gu("div")`
  position: absolute;
`,nJ=Gu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,sJ=nc`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,oJ=Gu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${sJ} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,rJ=({toast:e})=>{let{icon:t,type:i,iconTheme:n}=e;return t!==void 0?typeof t=="string"?R.createElement(oJ,null,t):t:i==="blank"?null:R.createElement(nJ,null,R.createElement(QQ,{...n}),i!=="loading"&&R.createElement(iJ,null,i==="error"?R.createElement(ZQ,{...n}):R.createElement(tJ,{...n})))},aJ=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,lJ=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,cJ="0%{opacity:0;} 100%{opacity:1;}",uJ="0%{opacity:1;} 100%{opacity:0;}",dJ=Gu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,hJ=Gu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,pJ=(e,t)=>{let i=e.includes("top")?1:-1,[n,s]=Lj()?[cJ,uJ]:[aJ(i),lJ(i)];return{animation:t?`${nc(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${nc(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},gJ=R.memo(({toast:e,position:t,style:i,children:n})=>{let s=e.height?pJ(e.position||t||"top-center",e.visible):{opacity:0},o=R.createElement(rJ,{toast:e}),r=R.createElement(hJ,{...e.ariaProps},Cx(e.message,e));return R.createElement(dJ,{className:e.className,style:{...s,...i,...e.style}},typeof n=="function"?n({icon:o,message:r}):R.createElement(R.Fragment,null,o,r))});BQ(R.createElement);var fJ=({id:e,className:t,style:i,onHeightUpdate:n,children:s})=>{let o=R.useCallback(r=>{if(r){let a=()=>{let l=r.getBoundingClientRect().height;n(e,l)};a(),new MutationObserver(a).observe(r,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return R.createElement("div",{ref:o,className:t,style:i},s)},mJ=(e,t)=>{let i=e.includes("top"),n=i?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Lj()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(i?1:-1)}px)`,...n,...s}},yJ=U0`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ow=16,vJ=({reverseOrder:e,position:t="top-center",toastOptions:i,gutter:n,children:s,toasterId:o,containerStyle:r,containerClassName:a})=>{let{toasts:l,handlers:c}=$Q(i,o);return R.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Ow,left:Ow,right:Ow,bottom:Ow,pointerEvents:"none",...r},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let p=d.position||t,g=c.calculateOffset(d,{reverseOrder:e,gutter:n,defaultPosition:t}),m=mJ(p,g);return R.createElement(fJ,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?yJ:"",style:m},d.type==="custom"?Cx(d.message,d):s?s(d):R.createElement(gJ,{toast:d,position:p}))}))},Oi=qe;const bJ=()=>{const[e,t]=R.useState(""),[i,n]=R.useState(!1),[s,o]=R.useState(!1),[r,a]=R.useState(""),[l,c]=R.useState(""),{adminLogin:d,isLoading:p,error:g,login:m,user:y}=Es(),b=O0(),C=async w=>{if(w.preventDefault(),r===""||l===""){r===""&&n(!0),l===""&&o(!0);return}try{if(e==="Admin")await d(r,l)&&(qe.success("Logged in successfully"),b("/"));else{const x=await m(r,l);x&&(qe.success("Logged in successfully"),x.user.role==="teacher"?b("/teacher"):x.user.role==="student"&&b("/student"))}}catch(x){console.log("error to login",x)}};return R.useEffect(()=>{n(!1)},[r]),R.useEffect(()=>{o(!1)},[l]),F.jsx("div",{className:"bg-[#f3f2f8] min-h-screen w-full",children:F.jsxs("div",{className:"flex justify-center items-center h-screen flex-col px-5",children:[F.jsxs("div",{className:"flex flex-col justify-center items-center",children:[F.jsx("img",{className:"w-[100px]",src:ej,alt:"image logo"}),F.jsx("h2",{className:"font-semibold text-2xl py-4",children:"Sign In into your account"})]}),F.jsx("div",{className:"bg-white shadow-xl w-[400px]  flex flex-col items-center rounded",children:F.jsxs("form",{onSubmit:C,className:"w-full p-5 flex flex-col",children:[F.jsx("label",{className:"text-lg",htmlFor:"email",children:"Email"}),F.jsx(GB,{type:"email",name:"Enter  your email",setEmail:a,isEmptyEmail:i,setIsEmptyEmail:n,id:"email"}),F.jsx("label",{className:"text-lg",htmlFor:"password",children:"Password"}),F.jsx(GB,{type:"password",name:"Enter  your password",setPassword:c,isEmptyPassword:s,setIsEmptyPassword:o,id:"password"}),g&&F.jsx("div",{className:"w-full bg-red-100 border-2 border-red-200 p-4 rounded",children:F.jsx("p",{className:"text-red-500",children:g.message})}),F.jsx("button",{disabled:p,type:"submit",className:Mi("mt-6 w-full p-3 rounded font-semibold text-white bg-[#6c62ff] cursor-pointer flex justify-center",p&&"opacity-65 hover:cursor-not-allowed"),children:p?F.jsx(En,{className:"animate-spin text-center"}):"Login"}),F.jsxs("p",{className:"mt-5",children:["Sign In as?"," ",F.jsx("span",{onClick:()=>t(w=>w==="Admin"?"":"Admin"),className:Mi("text-[#6c62ff] cursor-pointer",e==="Admin"&&"underline"),children:"Admin"})," "]})]})})]})})},Vd=({name:e,count:t,icon:i,color:n})=>F.jsxs("div",{className:"fade-up rounded-sm flex flex-1 flex-col  p-6 bg-white hover:shadow transition-all border duration-300",children:[F.jsxs("div",{className:"flex gap-3 items-center mb-4",children:[F.jsx("div",{children:i}),F.jsx("h3",{className:"text-2xl",children:e})]}),F.jsx("p",{className:"text-xl font-semibold text-gray-700",children:t})]}),Bj=6048e5,CJ=864e5,Y0=6e4,K0=36e5,wJ=1e3,rG=Symbol.for("constructDateFrom");function ri(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&rG in e?e[rG](t):e instanceof Date?new e.constructor(t):new Date(t)}function We(e,t){return ri(t||e,e)}function Ur(e,t,i){const n=We(e,i?.in);return isNaN(t)?ri(i?.in||e,NaN):(t&&n.setDate(n.getDate()+t),n)}function qr(e,t,i){const n=We(e,i?.in);if(isNaN(t))return ri(e,NaN);if(!t)return n;const s=n.getDate(),o=ri(e,n.getTime());o.setMonth(n.getMonth()+t+1,0);const r=o.getDate();return s>=r?o:(n.setFullYear(o.getFullYear(),o.getMonth(),s),n)}function Gj(e,t,i){return ri(e,+We(e)+t)}function SJ(e,t,i){return Gj(e,t*K0)}let xJ={};function Lh(){return xJ}function sc(e,t){const i=Lh(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,s=We(e,t?.in),o=s.getDay(),r=(o<n?7:0)+o-n;return s.setDate(s.getDate()-r),s.setHours(0,0,0,0),s}function qg(e,t){return sc(e,{...t,weekStartsOn:1})}function _j(e,t){const i=We(e,t?.in),n=i.getFullYear(),s=ri(i,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const o=qg(s),r=ri(i,0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);const a=qg(r);return i.getTime()>=o.getTime()?n+1:i.getTime()>=a.getTime()?n:n-1}function wx(e){const t=We(e),i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return i.setUTCFullYear(t.getFullYear()),+e-+i}function dc(e,...t){const i=ri.bind(null,t.find(n=>typeof n=="object"));return t.map(i)}function fh(e,t){const i=We(e,t?.in);return i.setHours(0,0,0,0),i}function Zg(e,t,i){const[n,s]=dc(i?.in,e,t),o=fh(n),r=fh(s),a=+o-wx(o),l=+r-wx(r);return Math.round((a-l)/CJ)}function MJ(e,t){const i=_j(e,t),n=ri(e,0);return n.setFullYear(i,0,4),n.setHours(0,0,0,0),qg(n)}function oI(e,t,i){const n=We(e,i?.in);return n.setTime(n.getTime()+t*Y0),n}function o1(e,t,i){return qr(e,t*3,i)}function DJ(e,t,i){return Gj(e,t*1e3)}function Sx(e,t,i){return Ur(e,t*7,i)}function jl(e,t,i){return qr(e,t*12,i)}function aG(e,t){let i,n=t?.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=ri.bind(null,s));const o=We(s,n);(!i||i<o||isNaN(+o))&&(i=o)}),ri(n,i||NaN)}function lG(e,t){let i,n=t?.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=ri.bind(null,s));const o=We(s,n);(!i||i>o||isNaN(+o))&&(i=o)}),ri(n,i||NaN)}function AJ(e,t,i){const[n,s]=dc(i?.in,e,t);return+fh(n)==+fh(s)}function Wl(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function xx(e){return!(!Wl(e)&&typeof e!="number"||isNaN(+We(e)))}function Mx(e,t,i){const[n,s]=dc(i?.in,e,t),o=n.getFullYear()-s.getFullYear(),r=n.getMonth()-s.getMonth();return o*12+r}function Xd(e,t){const i=We(e,t?.in);return Math.trunc(i.getMonth()/3)+1}function Dx(e,t,i){const[n,s]=dc(i?.in,e,t),o=n.getFullYear()-s.getFullYear(),r=Xd(n)-Xd(s);return o*4+r}function Ax(e,t,i){const[n,s]=dc(i?.in,e,t);return n.getFullYear()-s.getFullYear()}function RJ(e,t,i){const[n,s]=dc(i?.in,e,t),o=cG(n,s),r=Math.abs(Zg(n,s));n.setDate(n.getDate()-o*r);const a=+(cG(n,s)===-o),l=o*(r-a);return l===0?0:l}function cG(e,t){const i=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return i<0?-1:i>0?1:i}function Vj(e,t){const i=We(e,t?.in);return i.setHours(23,59,59,999),i}function zj(e,t){const i=We(e,t?.in),n=i.getMonth();return i.setFullYear(i.getFullYear(),n+1,0),i.setHours(23,59,59,999),i}function rI(e,t){const i=We(e,t?.in),n=i.getMonth(),s=n-n%3;return i.setMonth(s,1),i.setHours(0,0,0,0),i}function Hj(e,t){const i=We(e,t?.in);return i.setDate(1),i.setHours(0,0,0,0),i}function jj(e,t){const i=We(e,t?.in),n=i.getFullYear();return i.setFullYear(n+1,0,0),i.setHours(23,59,59,999),i}function q0(e,t){const i=We(e,t?.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}function EJ(e,t){const i=Lh(),n=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,s=We(e,t?.in),o=s.getDay(),r=(o<n?-7:0)+6-(o-n);return s.setDate(s.getDate()+r),s.setHours(23,59,59,999),s}const TJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},IJ=(e,t,i)=>{let n;const s=TJ[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+n:n+" ago":n};function hE(e){return(t={})=>{const i=t.width?String(t.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}const kJ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},LJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},PJ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},NJ={date:hE({formats:kJ,defaultWidth:"full"}),time:hE({formats:LJ,defaultWidth:"full"}),dateTime:hE({formats:PJ,defaultWidth:"full"})},FJ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},OJ=(e,t,i,n)=>FJ[e];function sy(e){return(t,i)=>{const n=i?.context?String(i.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const r=e.defaultFormattingWidth||e.defaultWidth,a=i?.width?String(i.width):r;s=e.formattingValues[a]||e.formattingValues[r]}else{const r=e.defaultWidth,a=i?.width?String(i.width):e.defaultWidth;s=e.values[a]||e.values[r]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const BJ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},GJ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_J={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},VJ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},HJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},jJ=(e,t)=>{const i=Number(e),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},WJ={ordinalNumber:jJ,era:sy({values:BJ,defaultWidth:"wide"}),quarter:sy({values:GJ,defaultWidth:"wide",argumentCallback:e=>e-1}),month:sy({values:_J,defaultWidth:"wide"}),day:sy({values:VJ,defaultWidth:"wide"}),dayPeriod:sy({values:zJ,defaultWidth:"wide",formattingValues:HJ,defaultFormattingWidth:"wide"})};function oy(e){return(t,i={})=>{const n=i.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const r=o[0],a=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?$J(a,p=>p.test(r)):UJ(a,p=>p.test(r));let c;c=e.valueCallback?e.valueCallback(l):l,c=i.valueCallback?i.valueCallback(c):c;const d=t.slice(r.length);return{value:c,rest:d}}}function UJ(e,t){for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return i}function $J(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i}function YJ(e){return(t,i={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],o=t.match(e.parsePattern);if(!o)return null;let r=e.valueCallback?e.valueCallback(o[0]):o[0];r=i.valueCallback?i.valueCallback(r):r;const a=t.slice(s.length);return{value:r,rest:a}}}const KJ=/^(\d+)(th|st|nd|rd)?/i,qJ=/\d+/i,ZJ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},XJ={any:[/^b/i,/^(a|c)/i]},QJ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},JJ={any:[/1/i,/2/i,/3/i,/4/i]},eee={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tee={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nee={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},see={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},oee={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ree={ordinalNumber:YJ({matchPattern:KJ,parsePattern:qJ,valueCallback:e=>parseInt(e,10)}),era:oy({matchPatterns:ZJ,defaultMatchWidth:"wide",parsePatterns:XJ,defaultParseWidth:"any"}),quarter:oy({matchPatterns:QJ,defaultMatchWidth:"wide",parsePatterns:JJ,defaultParseWidth:"any",valueCallback:e=>e+1}),month:oy({matchPatterns:eee,defaultMatchWidth:"wide",parsePatterns:tee,defaultParseWidth:"any"}),day:oy({matchPatterns:iee,defaultMatchWidth:"wide",parsePatterns:nee,defaultParseWidth:"any"}),dayPeriod:oy({matchPatterns:see,defaultMatchWidth:"any",parsePatterns:oee,defaultParseWidth:"any"})},Wj={code:"en-US",formatDistance:IJ,formatLong:NJ,formatRelative:OJ,localize:WJ,match:ree,options:{weekStartsOn:0,firstWeekContainsDate:1}};function aee(e,t){const i=We(e,t?.in);return Zg(i,q0(i))+1}function r1(e,t){const i=We(e,t?.in),n=+qg(i)-+MJ(i);return Math.round(n/Bj)+1}function a1(e,t){const i=We(e,t?.in),n=i.getFullYear(),s=Lh(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,r=ri(t?.in||e,0);r.setFullYear(n+1,0,o),r.setHours(0,0,0,0);const a=sc(r,t),l=ri(t?.in||e,0);l.setFullYear(n,0,o),l.setHours(0,0,0,0);const c=sc(l,t);return+i>=+a?n+1:+i>=+c?n:n-1}function lee(e,t){const i=Lh(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=a1(e,t),o=ri(t?.in||e,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),sc(o,t)}function Uj(e,t){const i=We(e,t?.in),n=+sc(i,t)-+lee(i,t);return Math.round(n/Bj)+1}function ii(e,t){const i=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return i+n}const eu={y(e,t){const i=e.getFullYear(),n=i>0?i:1-i;return ii(t==="yy"?n%100:n,t.length)},M(e,t){const i=e.getMonth();return t==="M"?String(i+1):ii(i+1,2)},d(e,t){return ii(e.getDate(),t.length)},a(e,t){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h(e,t){return ii(e.getHours()%12||12,t.length)},H(e,t){return ii(e.getHours(),t.length)},m(e,t){return ii(e.getMinutes(),t.length)},s(e,t){return ii(e.getSeconds(),t.length)},S(e,t){const i=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,i-3));return ii(s,t.length)}},$p={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},uG={G:function(e,t,i){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})}},y:function(e,t,i){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return i.ordinalNumber(s,{unit:"year"})}return eu.y(e,t)},Y:function(e,t,i,n){const s=a1(e,n),o=s>0?s:1-s;if(t==="YY"){const r=o%100;return ii(r,2)}return t==="Yo"?i.ordinalNumber(o,{unit:"year"}):ii(o,t.length)},R:function(e,t){const i=_j(e);return ii(i,t.length)},u:function(e,t){const i=e.getFullYear();return ii(i,t.length)},Q:function(e,t,i){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ii(n,2);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,i){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ii(n,2);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,i){const n=e.getMonth();switch(t){case"M":case"MM":return eu.M(e,t);case"Mo":return i.ordinalNumber(n+1,{unit:"month"});case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,i){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return ii(n+1,2);case"Lo":return i.ordinalNumber(n+1,{unit:"month"});case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,i,n){const s=Uj(e,n);return t==="wo"?i.ordinalNumber(s,{unit:"week"}):ii(s,t.length)},I:function(e,t,i){const n=r1(e);return t==="Io"?i.ordinalNumber(n,{unit:"week"}):ii(n,t.length)},d:function(e,t,i){return t==="do"?i.ordinalNumber(e.getDate(),{unit:"date"}):eu.d(e,t)},D:function(e,t,i){const n=aee(e);return t==="Do"?i.ordinalNumber(n,{unit:"dayOfYear"}):ii(n,t.length)},E:function(e,t,i){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,i,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return ii(o,2);case"eo":return i.ordinalNumber(o,{unit:"day"});case"eee":return i.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(s,{width:"short",context:"formatting"});case"eeee":default:return i.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,i,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return ii(o,t.length);case"co":return i.ordinalNumber(o,{unit:"day"});case"ccc":return i.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(s,{width:"narrow",context:"standalone"});case"cccccc":return i.day(s,{width:"short",context:"standalone"});case"cccc":default:return i.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,i){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return ii(s,t.length);case"io":return i.ordinalNumber(s,{unit:"day"});case"iii":return i.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(n,{width:"short",context:"formatting"});case"iiii":default:return i.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,i){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,i){const n=e.getHours();let s;switch(n===12?s=$p.noon:n===0?s=$p.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,i){const n=e.getHours();let s;switch(n>=17?s=$p.evening:n>=12?s=$p.afternoon:n>=4?s=$p.morning:s=$p.night,t){case"B":case"BB":case"BBB":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,i){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),i.ordinalNumber(n,{unit:"hour"})}return eu.h(e,t)},H:function(e,t,i){return t==="Ho"?i.ordinalNumber(e.getHours(),{unit:"hour"}):eu.H(e,t)},K:function(e,t,i){const n=e.getHours()%12;return t==="Ko"?i.ordinalNumber(n,{unit:"hour"}):ii(n,t.length)},k:function(e,t,i){let n=e.getHours();return n===0&&(n=24),t==="ko"?i.ordinalNumber(n,{unit:"hour"}):ii(n,t.length)},m:function(e,t,i){return t==="mo"?i.ordinalNumber(e.getMinutes(),{unit:"minute"}):eu.m(e,t)},s:function(e,t,i){return t==="so"?i.ordinalNumber(e.getSeconds(),{unit:"second"}):eu.s(e,t)},S:function(e,t){return eu.S(e,t)},X:function(e,t,i){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return hG(n);case"XXXX":case"XX":return Ld(n);case"XXXXX":case"XXX":default:return Ld(n,":")}},x:function(e,t,i){const n=e.getTimezoneOffset();switch(t){case"x":return hG(n);case"xxxx":case"xx":return Ld(n);case"xxxxx":case"xxx":default:return Ld(n,":")}},O:function(e,t,i){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+dG(n,":");case"OOOO":default:return"GMT"+Ld(n,":")}},z:function(e,t,i){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+dG(n,":");case"zzzz":default:return"GMT"+Ld(n,":")}},t:function(e,t,i){const n=Math.trunc(+e/1e3);return ii(n,t.length)},T:function(e,t,i){return ii(+e,t.length)}};function dG(e,t=""){const i=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),o=n%60;return o===0?i+String(s):i+String(s)+t+ii(o,2)}function hG(e,t){return e%60===0?(e>0?"-":"+")+ii(Math.abs(e)/60,2):Ld(e,t)}function Ld(e,t=""){const i=e>0?"-":"+",n=Math.abs(e),s=ii(Math.trunc(n/60),2),o=ii(n%60,2);return i+s+t+o}const pG=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},$j=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},cee=(e,t)=>{const i=e.match(/(P+)(p+)?/)||[],n=i[1],s=i[2];if(!s)return pG(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",pG(n,t)).replace("{{time}}",$j(s,t))},aI={p:$j,P:cee},uee=/^D+$/,dee=/^Y+$/,hee=["D","DD","YY","YYYY"];function pee(e){return uee.test(e)}function gee(e){return dee.test(e)}function fee(e,t,i){const n=mee(e,t,i);if(console.warn(n),hee.includes(e))throw new RangeError(n)}function mee(e,t,i){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const yee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,bee=/^'([^]*?)'?$/,Cee=/''/g,wee=/[a-zA-Z]/;function gG(e,t,i){const n=Lh(),s=i?.locale??n.locale??Wj,o=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=We(e,i?.in);if(!xx(a))throw new RangeError("Invalid time value");let l=t.match(vee).map(d=>{const p=d[0];if(p==="p"||p==="P"){const g=aI[p];return g(d,s.formatLong)}return d}).join("").match(yee).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const p=d[0];if(p==="'")return{isToken:!1,value:See(d)};if(uG[p])return{isToken:!0,value:d};if(p.match(wee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:d}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:o,weekStartsOn:r,locale:s};return l.map(d=>{if(!d.isToken)return d.value;const p=d.value;(!i?.useAdditionalWeekYearTokens&&gee(p)||!i?.useAdditionalDayOfYearTokens&&pee(p))&&fee(p,t,String(e));const g=uG[p[0]];return g(a,p,s.localize,c)}).join("")}function See(e){const t=e.match(bee);return t?t[1].replace(Cee,"'"):e}function fG(e,t){return We(e,t?.in).getDate()}function xee(e,t){return We(e,t?.in).getDay()}function Mee(e,t){const i=We(e,t?.in),n=i.getFullYear(),s=i.getMonth(),o=ri(i,0);return o.setFullYear(n,s+1,0),o.setHours(0,0,0,0),o.getDate()}function Dee(){return Object.assign({},Lh())}function Ul(e,t){return We(e,t?.in).getHours()}function Aee(e,t){const i=We(e,t?.in).getDay();return i===0?7:i}function $l(e,t){return We(e,t?.in).getMinutes()}function Ts(e,t){return We(e,t?.in).getMonth()}function Cu(e){return We(e).getSeconds()}function lI(e){return+We(e)}function bt(e,t){return We(e,t?.in).getFullYear()}function Ru(e,t){return+We(e)>+We(t)}function La(e,t){return+We(e)<+We(t)}function Ree(e,t){return+We(e)==+We(t)}function Eee(e,t){const i=Tee(t)?new t(0):ri(t,0);return i.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),i.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),i}function Tee(e){return typeof e=="function"&&e.prototype?.constructor===e}const Iee=10;class Yj{subPriority=0;validate(t,i){return!0}}class kee extends Yj{constructor(t,i,n,s,o){super(),this.value=t,this.validateValue=i,this.setValue=n,this.priority=s,o&&(this.subPriority=o)}validate(t,i){return this.validateValue(t,this.value,i)}set(t,i,n){return this.setValue(t,i,this.value,n)}}class Lee extends Yj{priority=Iee;subPriority=-1;constructor(t,i){super(),this.context=t||(n=>ri(i,n))}set(t,i){return i.timestampIsSet?t:ri(t,Eee(t,this.context))}}class Yt{run(t,i,n,s){const o=this.parse(t,i,n,s);return o?{setter:new kee(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(t,i,n){return!0}}class Pee extends Yt{priority=140;parse(t,i,n){switch(i){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}}set(t,i,n){return i.era=n,t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}const pn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Da={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function gn(e,t){return e&&{value:t(e.value),rest:e.rest}}function Vi(e,t){const i=t.match(e);return i?{value:parseInt(i[0],10),rest:t.slice(i[0].length)}:null}function Aa(e,t){const i=t.match(e);if(!i)return null;if(i[0]==="Z")return{value:0,rest:t.slice(1)};const n=i[1]==="+"?1:-1,s=i[2]?parseInt(i[2],10):0,o=i[3]?parseInt(i[3],10):0,r=i[5]?parseInt(i[5],10):0;return{value:n*(s*K0+o*Y0+r*wJ),rest:t.slice(i[0].length)}}function Kj(e){return Vi(pn.anyDigitsSigned,e)}function nn(e,t){switch(e){case 1:return Vi(pn.singleDigit,t);case 2:return Vi(pn.twoDigits,t);case 3:return Vi(pn.threeDigits,t);case 4:return Vi(pn.fourDigits,t);default:return Vi(new RegExp("^\\d{1,"+e+"}"),t)}}function Rx(e,t){switch(e){case 1:return Vi(pn.singleDigitSigned,t);case 2:return Vi(pn.twoDigitsSigned,t);case 3:return Vi(pn.threeDigitsSigned,t);case 4:return Vi(pn.fourDigitsSigned,t);default:return Vi(new RegExp("^-?\\d{1,"+e+"}"),t)}}function l1(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function qj(e,t){const i=t>0,n=i?t:1-t;let s;if(n<=50)s=e||100;else{const o=n+50,r=Math.trunc(o/100)*100,a=e>=o%100;s=e+r-(a?100:0)}return i?s:1-s}function Zj(e){return e%400===0||e%4===0&&e%100!==0}class Nee extends Yt{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,i,n){const s=o=>({year:o,isTwoDigitYear:i==="yy"});switch(i){case"y":return gn(nn(4,t),s);case"yo":return gn(n.ordinalNumber(t,{unit:"year"}),s);default:return gn(nn(i.length,t),s)}}validate(t,i){return i.isTwoDigitYear||i.year>0}set(t,i,n){const s=t.getFullYear();if(n.isTwoDigitYear){const r=qj(n.year,s);return t.setFullYear(r,0,1),t.setHours(0,0,0,0),t}const o=!("era"in i)||i.era===1?n.year:1-n.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}class Fee extends Yt{priority=130;parse(t,i,n){const s=o=>({year:o,isTwoDigitYear:i==="YY"});switch(i){case"Y":return gn(nn(4,t),s);case"Yo":return gn(n.ordinalNumber(t,{unit:"year"}),s);default:return gn(nn(i.length,t),s)}}validate(t,i){return i.isTwoDigitYear||i.year>0}set(t,i,n,s){const o=a1(t,s);if(n.isTwoDigitYear){const a=qj(n.year,o);return t.setFullYear(a,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),sc(t,s)}const r=!("era"in i)||i.era===1?n.year:1-n.year;return t.setFullYear(r,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),sc(t,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Oee extends Yt{priority=130;parse(t,i){return Rx(i==="R"?4:i.length,t)}set(t,i,n){const s=ri(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),qg(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Bee extends Yt{priority=130;parse(t,i){return Rx(i==="u"?4:i.length,t)}set(t,i,n){return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Gee extends Yt{priority=120;parse(t,i,n){switch(i){case"Q":case"QQ":return nn(i.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=1&&i<=4}set(t,i,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class _ee extends Yt{priority=120;parse(t,i,n){switch(i){case"q":case"qq":return nn(i.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=1&&i<=4}set(t,i,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Vee extends Yt{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,i,n){const s=o=>o-1;switch(i){case"M":return gn(Vi(pn.month,t),s);case"MM":return gn(nn(2,t),s);case"Mo":return gn(n.ordinalNumber(t,{unit:"month"}),s);case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=11}set(t,i,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}class zee extends Yt{priority=110;parse(t,i,n){const s=o=>o-1;switch(i){case"L":return gn(Vi(pn.month,t),s);case"LL":return gn(nn(2,t),s);case"Lo":return gn(n.ordinalNumber(t,{unit:"month"}),s);case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=0&&i<=11}set(t,i,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Hee(e,t,i){const n=We(e,i?.in),s=Uj(n,i)-t;return n.setDate(n.getDate()-s*7),We(n,i?.in)}class jee extends Yt{priority=100;parse(t,i,n){switch(i){case"w":return Vi(pn.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return nn(i.length,t)}}validate(t,i){return i>=1&&i<=53}set(t,i,n,s){return sc(Hee(t,n,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function Wee(e,t,i){const n=We(e,i?.in),s=r1(n,i)-t;return n.setDate(n.getDate()-s*7),n}class Uee extends Yt{priority=100;parse(t,i,n){switch(i){case"I":return Vi(pn.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return nn(i.length,t)}}validate(t,i){return i>=1&&i<=53}set(t,i,n){return qg(Wee(t,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const $ee=[31,28,31,30,31,30,31,31,30,31,30,31],Yee=[31,29,31,30,31,30,31,31,30,31,30,31];class Kee extends Yt{priority=90;subPriority=1;parse(t,i,n){switch(i){case"d":return Vi(pn.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return nn(i.length,t)}}validate(t,i){const n=t.getFullYear(),s=Zj(n),o=t.getMonth();return s?i>=1&&i<=Yee[o]:i>=1&&i<=$ee[o]}set(t,i,n){return t.setDate(n),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class qee extends Yt{priority=90;subpriority=1;parse(t,i,n){switch(i){case"D":case"DD":return Vi(pn.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return nn(i.length,t)}}validate(t,i){const n=t.getFullYear();return Zj(n)?i>=1&&i<=366:i>=1&&i<=365}set(t,i,n){return t.setMonth(0,n),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function c1(e,t,i){const n=Lh(),s=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=We(e,i?.in),r=o.getDay(),l=(t%7+7)%7,c=7-s,d=t<0||t>6?t-(r+c)%7:(l+c)%7-(r+c)%7;return Ur(o,d,i)}class Zee extends Yt{priority=90;parse(t,i,n){switch(i){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=6}set(t,i,n,s){return t=c1(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]}class Xee extends Yt{priority=90;parse(t,i,n,s){const o=r=>{const a=Math.floor((r-1)/7)*7;return(r+s.weekStartsOn+6)%7+a};switch(i){case"e":case"ee":return gn(nn(i.length,t),o);case"eo":return gn(n.ordinalNumber(t,{unit:"day"}),o);case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=6}set(t,i,n,s){return t=c1(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class Qee extends Yt{priority=90;parse(t,i,n,s){const o=r=>{const a=Math.floor((r-1)/7)*7;return(r+s.weekStartsOn+6)%7+a};switch(i){case"c":case"cc":return gn(nn(i.length,t),o);case"co":return gn(n.ordinalNumber(t,{unit:"day"}),o);case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=0&&i<=6}set(t,i,n,s){return t=c1(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function Jee(e,t,i){const n=We(e,i?.in),s=Aee(n,i),o=t-s;return Ur(n,o,i)}class ete extends Yt{priority=90;parse(t,i,n){const s=o=>o===0?7:o;switch(i){case"i":case"ii":return nn(i.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return gn(n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return gn(n.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return gn(n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return gn(n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,i){return i>=1&&i<=7}set(t,i,n){return t=Jee(t,n),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class tte extends Yt{priority=80;parse(t,i,n){switch(i){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,n){return t.setHours(l1(n),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}class ite extends Yt{priority=80;parse(t,i,n){switch(i){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,n){return t.setHours(l1(n),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}class nte extends Yt{priority=80;parse(t,i,n){switch(i){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,n){return t.setHours(l1(n),0,0,0),t}incompatibleTokens=["a","b","t","T"]}class ste extends Yt{priority=70;parse(t,i,n){switch(i){case"h":return Vi(pn.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return nn(i.length,t)}}validate(t,i){return i>=1&&i<=12}set(t,i,n){const s=t.getHours()>=12;return s&&n<12?t.setHours(n+12,0,0,0):!s&&n===12?t.setHours(0,0,0,0):t.setHours(n,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}class ote extends Yt{priority=70;parse(t,i,n){switch(i){case"H":return Vi(pn.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return nn(i.length,t)}}validate(t,i){return i>=0&&i<=23}set(t,i,n){return t.setHours(n,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}class rte extends Yt{priority=70;parse(t,i,n){switch(i){case"K":return Vi(pn.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return nn(i.length,t)}}validate(t,i){return i>=0&&i<=11}set(t,i,n){return t.getHours()>=12&&n<12?t.setHours(n+12,0,0,0):t.setHours(n,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}class ate extends Yt{priority=70;parse(t,i,n){switch(i){case"k":return Vi(pn.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return nn(i.length,t)}}validate(t,i){return i>=1&&i<=24}set(t,i,n){const s=n<=24?n%24:n;return t.setHours(s,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}class lte extends Yt{priority=60;parse(t,i,n){switch(i){case"m":return Vi(pn.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return nn(i.length,t)}}validate(t,i){return i>=0&&i<=59}set(t,i,n){return t.setMinutes(n,0,0),t}incompatibleTokens=["t","T"]}class cte extends Yt{priority=50;parse(t,i,n){switch(i){case"s":return Vi(pn.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return nn(i.length,t)}}validate(t,i){return i>=0&&i<=59}set(t,i,n){return t.setSeconds(n,0),t}incompatibleTokens=["t","T"]}class ute extends Yt{priority=30;parse(t,i){const n=s=>Math.trunc(s*Math.pow(10,-i.length+3));return gn(nn(i.length,t),n)}set(t,i,n){return t.setMilliseconds(n),t}incompatibleTokens=["t","T"]}class dte extends Yt{priority=10;parse(t,i){switch(i){case"X":return Aa(Da.basicOptionalMinutes,t);case"XX":return Aa(Da.basic,t);case"XXXX":return Aa(Da.basicOptionalSeconds,t);case"XXXXX":return Aa(Da.extendedOptionalSeconds,t);case"XXX":default:return Aa(Da.extended,t)}}set(t,i,n){return i.timestampIsSet?t:ri(t,t.getTime()-wx(t)-n)}incompatibleTokens=["t","T","x"]}class hte extends Yt{priority=10;parse(t,i){switch(i){case"x":return Aa(Da.basicOptionalMinutes,t);case"xx":return Aa(Da.basic,t);case"xxxx":return Aa(Da.basicOptionalSeconds,t);case"xxxxx":return Aa(Da.extendedOptionalSeconds,t);case"xxx":default:return Aa(Da.extended,t)}}set(t,i,n){return i.timestampIsSet?t:ri(t,t.getTime()-wx(t)-n)}incompatibleTokens=["t","T","X"]}class pte extends Yt{priority=40;parse(t){return Kj(t)}set(t,i,n){return[ri(t,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class gte extends Yt{priority=20;parse(t){return Kj(t)}set(t,i,n){return[ri(t,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const fte={G:new Pee,y:new Nee,Y:new Fee,R:new Oee,u:new Bee,Q:new Gee,q:new _ee,M:new Vee,L:new zee,w:new jee,I:new Uee,d:new Kee,D:new qee,E:new Zee,e:new Xee,c:new Qee,i:new ete,a:new tte,b:new ite,B:new nte,h:new ste,H:new ote,K:new rte,k:new ate,m:new lte,s:new cte,S:new ute,X:new dte,x:new hte,t:new pte,T:new gte},mte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yte=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vte=/^'([^]*?)'?$/,bte=/''/g,Cte=/\S/,wte=/[a-zA-Z]/;function Ste(e,t,i,n){const s=()=>ri(n?.in||i,NaN),o=Dee(),r=n?.locale??o.locale??Wj,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;if(!t)return e?s():We(i,n?.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:r},d=[new Lee(n?.in,i)],p=t.match(yte).map(C=>{const w=C[0];if(w in aI){const x=aI[w];return x(C,r.formatLong)}return C}).join("").match(mte),g=[];for(let C of p){const w=C[0],x=fte[w];if(x){const{incompatibleTokens:M}=x;if(Array.isArray(M)){const I=g.find(N=>M.includes(N.token)||N.token===w);if(I)throw new RangeError(`The format string mustn't contain \`${I.fullToken}\` and \`${C}\` at the same time`)}else if(x.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${C}\` and any other token at the same time`);g.push({token:w,fullToken:C});const E=x.run(e,C,r.match,c);if(!E)return s();d.push(E.setter),e=E.rest}else{if(w.match(wte))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");if(C==="''"?C="'":w==="'"&&(C=xte(C)),e.indexOf(C)===0)e=e.slice(C.length);else return s()}}if(e.length>0&&Cte.test(e))return s();const m=d.map(C=>C.priority).sort((C,w)=>w-C).filter((C,w,x)=>x.indexOf(C)===w).map(C=>d.filter(w=>w.priority===C).sort((w,x)=>x.subPriority-w.subPriority)).map(C=>C[0]);let y=We(i,n?.in);if(isNaN(+y))return s();const b={};for(const C of m){if(!C.validate(y,c))return s();const w=C.set(y,b,c);Array.isArray(w)?(y=w[0],Object.assign(b,w[1])):y=w}return y}function xte(e){return e.match(vte)[1].replace(bte,"'")}function Mte(e,t,i){const[n,s]=dc(i?.in,e,t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function Dte(e,t,i){const[n,s]=dc(i?.in,e,t);return+rI(n)==+rI(s)}function Ate(e,t,i){const[n,s]=dc(i?.in,e,t);return n.getFullYear()===s.getFullYear()}function sv(e,t,i){const n=+We(e,i?.in),[s,o]=[+We(t.start,i?.in),+We(t.end,i?.in)].sort((r,a)=>r-a);return n>=s&&n<=o}function Rte(e,t,i){return Ur(e,-1,i)}function Ete(e,t){const i=()=>ri(t?.in,NaN),s=Lte(e);let o;if(s.date){const c=Pte(s.date,2);o=Nte(c.restDateString,c.year)}if(!o||isNaN(+o))return i();const r=+o;let a=0,l;if(s.time&&(a=Fte(s.time),isNaN(a)))return i();if(s.timezone){if(l=Ote(s.timezone),isNaN(l))return i()}else{const c=new Date(r+a),d=We(0,t?.in);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return We(r+a+l,t?.in)}const Bw={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Tte=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ite=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,kte=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Lte(e){const t={},i=e.split(Bw.dateTimeDelimiter);let n;if(i.length>2)return t;if(/:/.test(i[0])?n=i[0]:(t.date=i[0],n=i[1],Bw.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Bw.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=Bw.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function Pte(e,t){const i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(i);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?s:o*100,restDateString:e.slice((n[1]||n[2]).length)}}function Nte(e,t){if(t===null)return new Date(NaN);const i=e.match(Tte);if(!i)return new Date(NaN);const n=!!i[4],s=ry(i[1]),o=ry(i[2])-1,r=ry(i[3]),a=ry(i[4]),l=ry(i[5])-1;if(n)return zte(t,a,l)?Bte(t,a,l):new Date(NaN);{const c=new Date(0);return!_te(t,o,r)||!Vte(t,s)?new Date(NaN):(c.setUTCFullYear(t,o,Math.max(s,r)),c)}}function ry(e){return e?parseInt(e):1}function Fte(e){const t=e.match(Ite);if(!t)return NaN;const i=pE(t[1]),n=pE(t[2]),s=pE(t[3]);return Hte(i,n,s)?i*K0+n*Y0+s*1e3:NaN}function pE(e){return e&&parseFloat(e.replace(",","."))||0}function Ote(e){if(e==="Z")return 0;const t=e.match(kte);if(!t)return 0;const i=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return jte(n,s)?i*(n*K0+s*Y0):NaN}function Bte(e,t,i){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,o=(t-1)*7+i+1-s;return n.setUTCDate(n.getUTCDate()+o),n}const Gte=[31,null,31,30,31,30,31,31,30,31,30,31];function Xj(e){return e%400===0||e%4===0&&e%100!==0}function _te(e,t,i){return t>=0&&t<=11&&i>=1&&i<=(Gte[t]||(Xj(e)?29:28))}function Vte(e,t){return t>=1&&t<=(Xj(e)?366:365)}function zte(e,t,i){return t>=1&&t<=53&&i>=0&&i<=6}function Hte(e,t,i){return e===24?t===0&&i===0:i>=0&&i<60&&t>=0&&t<60&&e>=0&&e<25}function jte(e,t){return t>=0&&t<=59}function No(e,t,i){const n=We(e,i?.in),s=n.getFullYear(),o=n.getDate(),r=ri(e,0);r.setFullYear(s,t,15),r.setHours(0,0,0,0);const a=Mee(r);return n.setMonth(t,Math.min(o,a)),n}function AS(e,t,i){const n=We(e,i?.in);return n.setHours(t),n}function RS(e,t,i){const n=We(e,i?.in);return n.setMinutes(t),n}function rg(e,t,i){const n=We(e,i?.in),s=Math.trunc(n.getMonth()/3)+1,o=t-s;return No(n,n.getMonth()+o*3)}function ES(e,t,i){const n=We(e,i?.in);return n.setSeconds(t),n}function wa(e,t,i){const n=We(e,i?.in);return isNaN(+n)?ri(e,NaN):(n.setFullYear(t),n)}function Qd(e,t,i){return qr(e,-t,i)}function Qj(e,t,i){return o1(e,-1,i)}function mG(e,t,i){return Sx(e,-1,i)}function Xg(e,t,i){return jl(e,-t,i)}function Z0(){return typeof window<"u"}function Pf(e){return Jj(e)?(e.nodeName||"").toLowerCase():"#document"}function Go(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function el(e){var t;return(t=(Jj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Jj(e){return Z0()?e instanceof Node||e instanceof Go(e).Node:!1}function $s(e){return Z0()?e instanceof Element||e instanceof Go(e).Element:!1}function Ua(e){return Z0()?e instanceof HTMLElement||e instanceof Go(e).HTMLElement:!1}function yG(e){return!Z0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Go(e).ShadowRoot}const Wte=new Set(["inline","contents"]);function rb(e){const{overflow:t,overflowX:i,overflowY:n,display:s}=Mr(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+i)&&!Wte.has(s)}const Ute=new Set(["table","td","th"]);function $te(e){return Ute.has(Pf(e))}const Yte=[":popover-open",":modal"];function X0(e){return Yte.some(t=>{try{return e.matches(t)}catch{return!1}})}const Kte=["transform","translate","scale","rotate","perspective"],qte=["transform","translate","scale","rotate","perspective","filter"],Zte=["paint","layout","strict","content"];function u1(e){const t=d1(),i=$s(e)?Mr(e):e;return Kte.some(n=>i[n]?i[n]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!t&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!t&&(i.filter?i.filter!=="none":!1)||qte.some(n=>(i.willChange||"").includes(n))||Zte.some(n=>(i.contain||"").includes(n))}function Xte(e){let t=Eu(e);for(;Ua(t)&&!Qg(t);){if(u1(t))return t;if(X0(t))return null;t=Eu(t)}return null}function d1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Qte=new Set(["html","body","#document"]);function Qg(e){return Qte.has(Pf(e))}function Mr(e){return Go(e).getComputedStyle(e)}function Q0(e){return $s(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Eu(e){if(Pf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||yG(e)&&e.host||el(e);return yG(t)?t.host:t}function e4(e){const t=Eu(e);return Qg(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ua(t)&&rb(t)?t:e4(t)}function ov(e,t,i){var n;t===void 0&&(t=[]),i===void 0&&(i=!0);const s=e4(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),r=Go(s);if(o){const a=cI(r);return t.concat(r,r.visualViewport||[],rb(s)?s:[],a&&i?ov(a):[])}return t.concat(s,ov(s,[],i))}function cI(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Jg=Math.min,Jd=Math.max,Ex=Math.round,Gw=Math.floor,Ba=e=>({x:e,y:e}),Jte={left:"right",right:"left",bottom:"top",top:"bottom"},eie={start:"end",end:"start"};function tie(e,t,i){return Jd(e,Jg(t,i))}function J0(e,t){return typeof e=="function"?e(t):e}function ef(e){return e.split("-")[0]}function ab(e){return e.split("-")[1]}function iie(e){return e==="x"?"y":"x"}function h1(e){return e==="y"?"height":"width"}const nie=new Set(["top","bottom"]);function zd(e){return nie.has(ef(e))?"y":"x"}function p1(e){return iie(zd(e))}function sie(e,t,i){i===void 0&&(i=!1);const n=ab(e),s=p1(e),o=h1(s);let r=s==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(r=Tx(r)),[r,Tx(r)]}function oie(e){const t=Tx(e);return[uI(e),t,uI(t)]}function uI(e){return e.replace(/start|end/g,t=>eie[t])}const vG=["left","right"],bG=["right","left"],rie=["top","bottom"],aie=["bottom","top"];function lie(e,t,i){switch(e){case"top":case"bottom":return i?t?bG:vG:t?vG:bG;case"left":case"right":return t?rie:aie;default:return[]}}function cie(e,t,i,n){const s=ab(e);let o=lie(ef(e),i==="start",n);return s&&(o=o.map(r=>r+"-"+s),t&&(o=o.concat(o.map(uI)))),o}function Tx(e){return e.replace(/left|right|bottom|top/g,t=>Jte[t])}function uie(e){return{top:0,right:0,bottom:0,left:0,...e}}function t4(e){return typeof e!="number"?uie(e):{top:e,right:e,bottom:e,left:e}}function Ix(e){const{x:t,y:i,width:n,height:s}=e;return{width:n,height:s,top:i,left:t,right:t+n,bottom:i+s,x:t,y:i}}var die=typeof document<"u",hie=function(){},kx=die?R.useLayoutEffect:hie;const pie={...FH},gie=pie.useInsertionEffect,fie=gie||(e=>e());function mie(e){const t=R.useRef(()=>{});return fie(()=>{t.current=e}),R.useCallback(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}function CG(e,t,i){let{reference:n,floating:s}=e;const o=zd(t),r=p1(t),a=h1(r),l=ef(t),c=o==="y",d=n.x+n.width/2-s.width/2,p=n.y+n.height/2-s.height/2,g=n[a]/2-s[a]/2;let m;switch(l){case"top":m={x:d,y:n.y-s.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:p};break;case"left":m={x:n.x-s.width,y:p};break;default:m={x:n.x,y:n.y}}switch(ab(t)){case"start":m[r]-=g*(i&&c?-1:1);break;case"end":m[r]+=g*(i&&c?-1:1);break}return m}const yie=async(e,t,i)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:r}=i,a=o.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(t));let c=await r.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:p}=CG(c,n,l),g=n,m={},y=0;for(let b=0;b<a.length;b++){const{name:C,fn:w}=a[b],{x,y:M,data:E,reset:I}=await w({x:d,y:p,initialPlacement:n,placement:g,strategy:s,middlewareData:m,rects:c,platform:r,elements:{reference:e,floating:t}});d=x??d,p=M??p,m={...m,[C]:{...m[C],...E}},I&&y<=50&&(y++,typeof I=="object"&&(I.placement&&(g=I.placement),I.rects&&(c=I.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:s}):I.rects),{x:d,y:p}=CG(c,g,l)),b=-1)}return{x:d,y:p,placement:g,strategy:s,middlewareData:m}};async function vie(e,t){var i;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:r,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:g=!1,padding:m=0}=J0(t,e),y=t4(m),C=a[g?p==="floating"?"reference":"floating":p],w=Ix(await o.getClippingRect({element:(i=await(o.isElement==null?void 0:o.isElement(C)))==null||i?C:C.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),x=p==="floating"?{x:n,y:s,width:r.floating.width,height:r.floating.height}:r.reference,M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),E=await(o.isElement==null?void 0:o.isElement(M))?await(o.getScale==null?void 0:o.getScale(M))||{x:1,y:1}:{x:1,y:1},I=Ix(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:M,strategy:l}):x);return{top:(w.top-I.top+y.top)/E.y,bottom:(I.bottom-w.bottom+y.bottom)/E.y,left:(w.left-I.left+y.left)/E.x,right:(I.right-w.right+y.right)/E.x}}const bie=e=>({name:"arrow",options:e,async fn(t){const{x:i,y:n,placement:s,rects:o,platform:r,elements:a,middlewareData:l}=t,{element:c,padding:d=0}=J0(e,t)||{};if(c==null)return{};const p=t4(d),g={x:i,y:n},m=p1(s),y=h1(m),b=await r.getDimensions(c),C=m==="y",w=C?"top":"left",x=C?"bottom":"right",M=C?"clientHeight":"clientWidth",E=o.reference[y]+o.reference[m]-g[m]-o.floating[y],I=g[m]-o.reference[m],N=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c));let T=N?N[M]:0;(!T||!await(r.isElement==null?void 0:r.isElement(N)))&&(T=a.floating[M]||o.floating[y]);const P=E/2-I/2,O=T/2-b[y]/2-1,G=Jg(p[w],O),B=Jg(p[x],O),z=G,j=T-b[y]-B,X=T/2-b[y]/2+P,q=tie(z,X,j),H=!l.arrow&&ab(s)!=null&&X!==q&&o.reference[y]/2-(X<z?G:B)-b[y]/2<0,K=H?X<z?X-z:X-j:0;return{[m]:g[m]+K,data:{[m]:q,centerOffset:X-q-K,...H&&{alignmentOffset:K}},reset:H}}}),Cie=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i,n;const{placement:s,middlewareData:o,rects:r,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...C}=J0(e,t);if((i=o.arrow)!=null&&i.alignmentOffset)return{};const w=ef(s),x=zd(a),M=ef(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),I=g||(M||!b?[Tx(a)]:oie(a)),N=y!=="none";!g&&N&&I.push(...cie(a,b,y,E));const T=[a,...I],P=await vie(t,C),O=[];let G=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&O.push(P[w]),p){const X=sie(s,r,E);O.push(P[X[0]],P[X[1]])}if(G=[...G,{placement:s,overflows:O}],!O.every(X=>X<=0)){var B,z;const X=(((B=o.flip)==null?void 0:B.index)||0)+1,q=T[X];if(q&&(!(p==="alignment"?x!==zd(q):!1)||G.every(U=>zd(U.placement)===x?U.overflows[0]>0:!0)))return{data:{index:X,overflows:G},reset:{placement:q}};let H=(z=G.filter(K=>K.overflows[0]<=0).sort((K,U)=>K.overflows[1]-U.overflows[1])[0])==null?void 0:z.placement;if(!H)switch(m){case"bestFit":{var j;const K=(j=G.filter(U=>{if(N){const de=zd(U.placement);return de===x||de==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(de=>de>0).reduce((de,te)=>de+te,0)]).sort((U,de)=>U[1]-de[1])[0])==null?void 0:j[0];K&&(H=K);break}case"initialPlacement":H=a;break}if(s!==H)return{reset:{placement:H}}}return{}}}},wie=new Set(["left","top"]);async function Sie(e,t){const{placement:i,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),r=ef(i),a=ab(i),l=zd(i)==="y",c=wie.has(r)?-1:1,d=o&&l?-1:1,p=J0(t,e);let{mainAxis:g,crossAxis:m,alignmentAxis:y}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof y=="number"&&(m=a==="end"?y*-1:y),l?{x:m*d,y:g*c}:{x:g*c,y:m*d}}const xie=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,n;const{x:s,y:o,placement:r,middlewareData:a}=t,l=await Sie(t,e);return r===((i=a.offset)==null?void 0:i.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:r}}}}};function i4(e){const t=Mr(e);let i=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Ua(e),o=s?e.offsetWidth:i,r=s?e.offsetHeight:n,a=Ex(i)!==o||Ex(n)!==r;return a&&(i=o,n=r),{width:i,height:n,$:a}}function g1(e){return $s(e)?e:e.contextElement}function Rg(e){const t=g1(e);if(!Ua(t))return Ba(1);const i=t.getBoundingClientRect(),{width:n,height:s,$:o}=i4(t);let r=(o?Ex(i.width):i.width)/n,a=(o?Ex(i.height):i.height)/s;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}const Mie=Ba(0);function n4(e){const t=Go(e);return!d1()||!t.visualViewport?Mie:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Die(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==Go(e)?!1:t}function mh(e,t,i,n){t===void 0&&(t=!1),i===void 0&&(i=!1);const s=e.getBoundingClientRect(),o=g1(e);let r=Ba(1);t&&(n?$s(n)&&(r=Rg(n)):r=Rg(e));const a=Die(o,i,n)?n4(o):Ba(0);let l=(s.left+a.x)/r.x,c=(s.top+a.y)/r.y,d=s.width/r.x,p=s.height/r.y;if(o){const g=Go(o),m=n&&$s(n)?Go(n):n;let y=g,b=cI(y);for(;b&&n&&m!==y;){const C=Rg(b),w=b.getBoundingClientRect(),x=Mr(b),M=w.left+(b.clientLeft+parseFloat(x.paddingLeft))*C.x,E=w.top+(b.clientTop+parseFloat(x.paddingTop))*C.y;l*=C.x,c*=C.y,d*=C.x,p*=C.y,l+=M,c+=E,y=Go(b),b=cI(y)}}return Ix({width:d,height:p,x:l,y:c})}function eM(e,t){const i=Q0(e).scrollLeft;return t?t.left+i:mh(el(e)).left+i}function s4(e,t){const i=e.getBoundingClientRect(),n=i.left+t.scrollLeft-eM(e,i),s=i.top+t.scrollTop;return{x:n,y:s}}function Aie(e){let{elements:t,rect:i,offsetParent:n,strategy:s}=e;const o=s==="fixed",r=el(n),a=t?X0(t.floating):!1;if(n===r||a&&o)return i;let l={scrollLeft:0,scrollTop:0},c=Ba(1);const d=Ba(0),p=Ua(n);if((p||!p&&!o)&&((Pf(n)!=="body"||rb(r))&&(l=Q0(n)),Ua(n))){const m=mh(n);c=Rg(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const g=r&&!p&&!o?s4(r,l):Ba(0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+d.x+g.x,y:i.y*c.y-l.scrollTop*c.y+d.y+g.y}}function Rie(e){return Array.from(e.getClientRects())}function Eie(e){const t=el(e),i=Q0(e),n=e.ownerDocument.body,s=Jd(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=Jd(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let r=-i.scrollLeft+eM(e);const a=-i.scrollTop;return Mr(n).direction==="rtl"&&(r+=Jd(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:r,y:a}}const wG=25;function Tie(e,t){const i=Go(e),n=el(e),s=i.visualViewport;let o=n.clientWidth,r=n.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;const d=d1();(!d||d&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=eM(n);if(c<=0){const d=n.ownerDocument,p=d.body,g=getComputedStyle(p),m=d.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,y=Math.abs(n.clientWidth-p.clientWidth-m);y<=wG&&(o-=y)}else c<=wG&&(o+=c);return{width:o,height:r,x:a,y:l}}const Iie=new Set(["absolute","fixed"]);function kie(e,t){const i=mh(e,!0,t==="fixed"),n=i.top+e.clientTop,s=i.left+e.clientLeft,o=Ua(e)?Rg(e):Ba(1),r=e.clientWidth*o.x,a=e.clientHeight*o.y,l=s*o.x,c=n*o.y;return{width:r,height:a,x:l,y:c}}function SG(e,t,i){let n;if(t==="viewport")n=Tie(e,i);else if(t==="document")n=Eie(el(e));else if($s(t))n=kie(t,i);else{const s=n4(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Ix(n)}function o4(e,t){const i=Eu(e);return i===t||!$s(i)||Qg(i)?!1:Mr(i).position==="fixed"||o4(i,t)}function Lie(e,t){const i=t.get(e);if(i)return i;let n=ov(e,[],!1).filter(a=>$s(a)&&Pf(a)!=="body"),s=null;const o=Mr(e).position==="fixed";let r=o?Eu(e):e;for(;$s(r)&&!Qg(r);){const a=Mr(r),l=u1(r);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&Iie.has(s.position)||rb(r)&&!l&&o4(e,r))?n=n.filter(d=>d!==r):s=a,r=Eu(r)}return t.set(e,n),n}function Pie(e){let{element:t,boundary:i,rootBoundary:n,strategy:s}=e;const r=[...i==="clippingAncestors"?X0(t)?[]:Lie(t,this._c):[].concat(i),n],a=r[0],l=r.reduce((c,d)=>{const p=SG(t,d,s);return c.top=Jd(p.top,c.top),c.right=Jg(p.right,c.right),c.bottom=Jg(p.bottom,c.bottom),c.left=Jd(p.left,c.left),c},SG(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Nie(e){const{width:t,height:i}=i4(e);return{width:t,height:i}}function Fie(e,t,i){const n=Ua(t),s=el(t),o=i==="fixed",r=mh(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Ba(0);function c(){l.x=eM(s)}if(n||!n&&!o)if((Pf(t)!=="body"||rb(s))&&(a=Q0(t)),n){const m=mh(t,!0,o,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else s&&c();o&&!n&&s&&c();const d=s&&!n&&!o?s4(s,a):Ba(0),p=r.left+a.scrollLeft-l.x-d.x,g=r.top+a.scrollTop-l.y-d.y;return{x:p,y:g,width:r.width,height:r.height}}function gE(e){return Mr(e).position==="static"}function xG(e,t){if(!Ua(e)||Mr(e).position==="fixed")return null;if(t)return t(e);let i=e.offsetParent;return el(e)===i&&(i=i.ownerDocument.body),i}function r4(e,t){const i=Go(e);if(X0(e))return i;if(!Ua(e)){let s=Eu(e);for(;s&&!Qg(s);){if($s(s)&&!gE(s))return s;s=Eu(s)}return i}let n=xG(e,t);for(;n&&$te(n)&&gE(n);)n=xG(n,t);return n&&Qg(n)&&gE(n)&&!u1(n)?i:n||Xte(e)||i}const Oie=async function(e){const t=this.getOffsetParent||r4,i=this.getDimensions,n=await i(e.floating);return{reference:Fie(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Bie(e){return Mr(e).direction==="rtl"}const Gie={convertOffsetParentRelativeRectToViewportRelativeRect:Aie,getDocumentElement:el,getClippingRect:Pie,getOffsetParent:r4,getElementRects:Oie,getClientRects:Rie,getDimensions:Nie,getScale:Rg,isElement:$s,isRTL:Bie};function a4(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function _ie(e,t){let i=null,n;const s=el(e);function o(){var a;clearTimeout(n),(a=i)==null||a.disconnect(),i=null}function r(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const c=e.getBoundingClientRect(),{left:d,top:p,width:g,height:m}=c;if(a||t(),!g||!m)return;const y=Gw(p),b=Gw(s.clientWidth-(d+g)),C=Gw(s.clientHeight-(p+m)),w=Gw(d),M={rootMargin:-y+"px "+-b+"px "+-C+"px "+-w+"px",threshold:Jd(0,Jg(1,l))||1};let E=!0;function I(N){const T=N[0].intersectionRatio;if(T!==l){if(!E)return r();T?r(!1,T):n=setTimeout(()=>{r(!1,1e-7)},1e3)}T===1&&!a4(c,e.getBoundingClientRect())&&r(),E=!1}try{i=new IntersectionObserver(I,{...M,root:s.ownerDocument})}catch{i=new IntersectionObserver(I,M)}i.observe(e)}return r(!0),o}function Vie(e,t,i,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=g1(e),d=s||o?[...c?ov(c):[],...ov(t)]:[];d.forEach(w=>{s&&w.addEventListener("scroll",i,{passive:!0}),o&&w.addEventListener("resize",i)});const p=c&&a?_ie(c,i):null;let g=-1,m=null;r&&(m=new ResizeObserver(w=>{let[x]=w;x&&x.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var M;(M=m)==null||M.observe(t)})),i()}),c&&!l&&m.observe(c),m.observe(t));let y,b=l?mh(e):null;l&&C();function C(){const w=mh(e);b&&!a4(b,w)&&i(),b=w,y=requestAnimationFrame(C)}return i(),()=>{var w;d.forEach(x=>{s&&x.removeEventListener("scroll",i),o&&x.removeEventListener("resize",i)}),p?.(),(w=m)==null||w.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const zie=xie,Hie=Cie,MG=bie,jie=(e,t,i)=>{const n=new Map,s={platform:Gie,...i},o={...s.platform,_c:n};return yie(e,t,{...s,platform:o})};var Wie=typeof document<"u",Uie=function(){},TS=Wie?R.useLayoutEffect:Uie;function Lx(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let i,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==t.length)return!1;for(n=i;n--!==0;)if(!Lx(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(n=i;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=i;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!Lx(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function l4(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function DG(e,t){const i=l4(e);return Math.round(t*i)/i}function fE(e){const t=R.useRef(e);return TS(()=>{t.current=e}),t}function $ie(e){e===void 0&&(e={});const{placement:t="bottom",strategy:i="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:r}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[d,p]=R.useState({x:0,y:0,strategy:i,placement:t,middlewareData:{},isPositioned:!1}),[g,m]=R.useState(n);Lx(g,n)||m(n);const[y,b]=R.useState(null),[C,w]=R.useState(null),x=R.useCallback(U=>{U!==N.current&&(N.current=U,b(U))},[]),M=R.useCallback(U=>{U!==T.current&&(T.current=U,w(U))},[]),E=o||y,I=r||C,N=R.useRef(null),T=R.useRef(null),P=R.useRef(d),O=l!=null,G=fE(l),B=fE(s),z=fE(c),j=R.useCallback(()=>{if(!N.current||!T.current)return;const U={placement:t,strategy:i,middleware:g};B.current&&(U.platform=B.current),jie(N.current,T.current,U).then(de=>{const te={...de,isPositioned:z.current!==!1};X.current&&!Lx(P.current,te)&&(P.current=te,G0.flushSync(()=>{p(te)}))})},[g,t,i,B,z]);TS(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,p(U=>({...U,isPositioned:!1})))},[c]);const X=R.useRef(!1);TS(()=>(X.current=!0,()=>{X.current=!1}),[]),TS(()=>{if(E&&(N.current=E),I&&(T.current=I),E&&I){if(G.current)return G.current(E,I,j);j()}},[E,I,j,G,O]);const q=R.useMemo(()=>({reference:N,floating:T,setReference:x,setFloating:M}),[x,M]),H=R.useMemo(()=>({reference:E,floating:I}),[E,I]),K=R.useMemo(()=>{const U={position:i,left:0,top:0};if(!H.floating)return U;const de=DG(H.floating,d.x),te=DG(H.floating,d.y);return a?{...U,transform:"translate("+de+"px, "+te+"px)",...l4(H.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:de,top:te}},[i,a,H.floating,d.x,d.y]);return R.useMemo(()=>({...d,update:j,refs:q,elements:H,floatingStyles:K}),[d,j,q,H,K])}const Yie=e=>{function t(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){const{element:n,padding:s}=typeof e=="function"?e(i):e;return n&&t(n)?n.current!=null?MG({element:n.current,padding:s}).fn(i):{}:n?MG({element:n,padding:s}).fn(i):{}}}},Kie=(e,t)=>({...zie(e),options:[e,t]}),qie=(e,t)=>({...Hie(e),options:[e,t]}),Zie=(e,t)=>({...Yie(e),options:[e,t]}),Xie={...FH};let AG=!1,Qie=0;const RG=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Qie++;function Jie(){const[e,t]=R.useState(()=>AG?RG():void 0);return kx(()=>{e==null&&t(RG())},[]),R.useEffect(()=>{AG=!0},[]),e}const ene=Xie.useId,c4=ene||Jie,tne=R.forwardRef(function(t,i){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:o,shift:r}},width:a=14,height:l=7,tipRadius:c=0,strokeWidth:d=0,staticOffset:p,stroke:g,d:m,style:{transform:y,...b}={},...C}=t,w=c4(),[x,M]=R.useState(!1);if(kx(()=>{if(!s)return;Mr(s).direction==="rtl"&&M(!0)},[s]),!s)return null;const[E,I]=n.split("-"),N=E==="top"||E==="bottom";let T=p;(N&&r!=null&&r.x||!N&&r!=null&&r.y)&&(T=null);const P=d*2,O=P/2,G=a/2*(c/-8+1),B=l/2*c/4,z=!!m,j=T&&I==="end"?"bottom":"top";let X=T&&I==="end"?"right":"left";T&&x&&(X=I==="end"?"left":"right");const q=o?.x!=null?T||o.x:"",H=o?.y!=null?T||o.y:"",K=m||"M0,0"+(" H"+a)+(" L"+(a-G)+","+(l-B))+(" Q"+a/2+","+l+" "+G+","+(l-B))+" Z",U={top:z?"rotate(180deg)":"",left:z?"rotate(90deg)":"rotate(-90deg)",bottom:z?"":"rotate(180deg)",right:z?"rotate(-90deg)":"rotate(90deg)"}[E];return F.jsxs("svg",{...C,"aria-hidden":!0,ref:i,width:z?a:a+P,height:a,viewBox:"0 0 "+a+" "+(l>a?l:a),style:{position:"absolute",pointerEvents:"none",[X]:q,[j]:H,[E]:N||z?"100%":"calc(100% - "+P/2+"px)",transform:[U,y].filter(de=>!!de).join(" "),...b},children:[P>0&&F.jsx("path",{clipPath:"url(#"+w+")",fill:"none",stroke:g,strokeWidth:P+(m?0:1),d:K}),F.jsx("path",{stroke:P&&!m?C.fill:"none",d:K}),F.jsx("clipPath",{id:w,children:F.jsx("rect",{x:-O,y:O*(z?-1:1),width:a+P,height:a})})]})});function ine(){const e=new Map;return{emit(t,i){var n;(n=e.get(t))==null||n.forEach(s=>s(i))},on(t,i){e.has(t)||e.set(t,new Set),e.get(t).add(i)},off(t,i){var n;(n=e.get(t))==null||n.delete(i)}}}const nne=R.createContext(null),sne=R.createContext(null),one=()=>{var e;return((e=R.useContext(nne))==null?void 0:e.id)||null},rne=()=>R.useContext(sne);function ane(e){const{open:t=!1,onOpenChange:i,elements:n}=e,s=c4(),o=R.useRef({}),[r]=R.useState(()=>ine()),a=one()!=null,[l,c]=R.useState(n.reference),d=mie((m,y,b)=>{o.current.openEvent=m?y:void 0,r.emit("openchange",{open:m,event:y,reason:b,nested:a}),i?.(m,y,b)}),p=R.useMemo(()=>({setPositionReference:c}),[]),g=R.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return R.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:g,events:r,floatingId:s,refs:p}),[t,d,g,r,s,p])}function lne(e){e===void 0&&(e={});const{nodeId:t}=e,i=ane({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||i,s=n.elements,[o,r]=R.useState(null),[a,l]=R.useState(null),d=s?.domReference||o,p=R.useRef(null),g=rne();kx(()=>{d&&(p.current=d)},[d]);const m=$ie({...e,elements:{...s,...a&&{reference:a}}}),y=R.useCallback(M=>{const E=$s(M)?{getBoundingClientRect:()=>M.getBoundingClientRect(),getClientRects:()=>M.getClientRects(),contextElement:M}:M;l(E),m.refs.setReference(E)},[m.refs]),b=R.useCallback(M=>{($s(M)||M===null)&&(p.current=M,r(M)),($s(m.refs.reference.current)||m.refs.reference.current===null||M!==null&&!$s(M))&&m.refs.setReference(M)},[m.refs]),C=R.useMemo(()=>({...m.refs,setReference:b,setPositionReference:y,domReference:p}),[m.refs,b,y]),w=R.useMemo(()=>({...m.elements,domReference:d}),[m.elements,d]),x=R.useMemo(()=>({...m,...n,refs:C,elements:w,nodeId:t}),[m,C,w,t,n]);return kx(()=>{n.dataRef.current.floatingContext=x;const M=g?.nodesRef.current.find(E=>E.id===t);M&&(M.context=x)}),R.useMemo(()=>({...m,context:x,refs:C,elements:w}),[m,C,w,x])}/*!
  react-datepicker v8.8.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var dI=function(t,i){return dI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},dI(t,i)};function fs(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");dI(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var Et=function(){return Et=Object.assign||function(i){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Et.apply(this,arguments)};function Pa(e,t,i){if(i||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var cne=function(e){var t=e.showTimeSelectOnly,i=t===void 0?!1:t,n=e.showTime,s=n===void 0?!1:n,o=e.className,r=e.children,a=i?"Choose Time":"Choose Date".concat(s?" and Time":"");return Y.createElement("div",{className:o,role:"dialog","aria-label":a,"aria-modal":"true"},r)},une=function(e,t){var i=R.useRef(null),n=R.useRef(e);n.current=e;var s=R.useCallback(function(o){var r,a=o.composed&&o.composedPath&&o.composedPath().find(function(l){return l instanceof Node})||o.target;i.current&&!i.current.contains(a)&&(t&&a instanceof HTMLElement&&a.classList.contains(t)||(r=n.current)===null||r===void 0||r.call(n,o))},[t]);return R.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),i},tM=function(e){var t=e.children,i=e.onClickOutside,n=e.className,s=e.containerRef,o=e.style,r=e.ignoreClass,a=une(i,r);return Y.createElement("div",{className:n,style:o,ref:function(l){a.current=l,s&&(s.current=l)}},t)},Oe;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(Oe||(Oe={}));function u4(){var e=typeof window<"u"?window:globalThis;return e}var lb=12;function qt(e){if(e==null)return new Date;var t=typeof e=="string"?Ete(e):We(e);return iM(t)?t:new Date}function mE(e,t,i,n,s){s===void 0&&(s=qt());for(var o=tf(i)||tf(f1()),r=Array.isArray(t)?t:[t],a=0,l=r;a<l.length;a++){var c=l[a],d=Ste(e,c,s,{locale:o});if(iM(d)&&(!n||e===Di(d,c,i)))return d}return null}function iM(e,t){return xx(e)&&!La(e,new Date("1/1/1800"))}function Di(e,t,i){if(i==="en")return gG(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=i?tf(i):void 0;return i&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(i,'"].')),n=n||tf(f1()),gG(e,t,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Po(e,t){var i=t.dateFormat,n=t.locale,s=Array.isArray(i)&&i.length>0?i[0]:i;return e&&Di(e,s,n)||""}var d4=" - ";function dne(e,t,i){if(!e&&!t)return"";var n=e?Po(e,i):"",s=t?Po(t,i):"",o=i.rangeSeparator||d4;return"".concat(n).concat(o).concat(s)}function hne(e,t){if(!e?.length)return"";var i=e[0]?Po(e[0],t):"";if(e.length===1)return i;if(e.length===2&&e[1]){var n=Po(e[1],t);return"".concat(i,", ").concat(n)}var s=e.length-1;return"".concat(i," (+").concat(s,")")}function yE(e,t){var i=t.hour,n=i===void 0?0:i,s=t.minute,o=s===void 0?0:s,r=t.second,a=r===void 0?0:r;return AS(RS(ES(e,a),o),n)}function pne(e){return r1(e)}function gne(e,t){return Di(e,"ddd",t)}function IS(e){return fh(e)}function wu(e,t,i){var n=tf(t||f1());return sc(e,{locale:n,weekStartsOn:i})}function Yl(e){return Hj(e)}function Sy(e){return q0(e)}function EG(e){return rI(e)}function TG(){return fh(qt())}function IG(e){return Vj(e)}function fne(e){return EJ(e)}function mne(e){return zj(e)}function Ma(e,t){return e&&t?Ate(e,t):!e&&!t}function Hs(e,t){return e&&t?Mte(e,t):!e&&!t}function Px(e,t){return e&&t?Dte(e,t):!e&&!t}function Rt(e,t){return e&&t?AJ(e,t):!e&&!t}function Hd(e,t){return e&&t?Ree(e,t):!e&&!t}function Pd(e,t,i){var n,s=fh(t),o=Vj(i);try{n=sv(e,{start:s,end:o})}catch{n=!1}return n}function f1(){var e=u4();return e.__localeId__}function tf(e){if(typeof e=="string"){var t=u4();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function yne(e,t,i){return t(Di(e,"EEEE",i))}function vne(e,t){return Di(e,"EEEEEE",t)}function bne(e,t){return Di(e,"EEE",t)}function m1(e,t){return Di(No(qt(),e),"LLLL",t)}function h4(e,t){return Di(No(qt(),e),"LLL",t)}function Cne(e,t){return Di(rg(qt(),e),"QQQ",t)}function mr(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.maxDate,o=i.excludeDates,r=i.excludeDateIntervals,a=i.includeDates,l=i.includeDateIntervals,c=i.filterDate,d=i.disabled;return d?!0:cb(e,{minDate:n,maxDate:s})||o&&o.some(function(p){return p instanceof Date?Rt(e,p):Rt(e,p.date)})||r&&r.some(function(p){var g=p.start,m=p.end;return sv(e,{start:g,end:m})})||a&&!a.some(function(p){return Rt(e,p)})||l&&!l.some(function(p){var g=p.start,m=p.end;return sv(e,{start:g,end:m})})||c&&!c(qt(e))||!1}function y1(e,t){var i=t===void 0?{}:t,n=i.excludeDates,s=i.excludeDateIntervals;return s&&s.length>0?s.some(function(o){var r=o.start,a=o.end;return sv(e,{start:r,end:a})}):n&&n.some(function(o){var r;return o instanceof Date?Rt(e,o):Rt(e,(r=o.date)!==null&&r!==void 0?r:new Date)})||!1}function p4(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.maxDate,o=i.excludeDates,r=i.includeDates,a=i.filterDate;return cb(e,{minDate:n?Hj(n):void 0,maxDate:s?zj(s):void 0})||o?.some(function(l){return Hs(e,l instanceof Date?l:l.date)})||r&&!r.some(function(l){return Hs(e,l)})||a&&!a(qt(e))||!1}function _w(e,t,i,n){var s=bt(e),o=Ts(e),r=bt(t),a=Ts(t),l=bt(n);return s===r&&s===l?o<=i&&i<=a:s<r?l===s&&o<=i||l===r&&a>=i||l<r&&l>s:!1}function wne(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.maxDate,o=i.excludeDates,r=i.includeDates;return cb(e,{minDate:n,maxDate:s})||o&&o.some(function(a){return Hs(a instanceof Date?a:a.date,e)})||r&&!r.some(function(a){return Hs(a,e)})||!1}function Vw(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.maxDate,o=i.excludeDates,r=i.includeDates,a=i.filterDate,l=i.disabled;return l?!0:cb(e,{minDate:n,maxDate:s})||o?.some(function(c){return Px(e,c instanceof Date?c:c.date)})||r&&!r.some(function(c){return Px(e,c)})||a&&!a(qt(e))||!1}function zw(e,t,i){if(!t||!i||!xx(t)||!xx(i))return!1;var n=bt(t),s=bt(i);return n<=e&&s>=e}function kS(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.maxDate,o=i.excludeDates,r=i.includeDates,a=i.filterDate,l=i.disabled;if(l)return!0;var c=new Date(e,0,1);return cb(c,{minDate:n?q0(n):void 0,maxDate:s?jj(s):void 0})||o?.some(function(d){return Ma(c,d instanceof Date?d:d.date)})||r&&!r.some(function(d){return Ma(c,d)})||a&&!a(qt(c))||!1}function Hw(e,t,i,n){var s=bt(e),o=Xd(e),r=bt(t),a=Xd(t),l=bt(n);return s===r&&s===l?o<=i&&i<=a:s<r?l===s&&o<=i||l===r&&a>=i||l<r&&l>s:!1}function cb(e,t){var i,n=t===void 0?{}:t,s=n.minDate,o=n.maxDate;return(i=s&&Zg(e,s)<0||o&&Zg(e,o)>0)!==null&&i!==void 0?i:!1}function kG(e,t){return t.some(function(i){return Ul(i)===Ul(e)&&$l(i)===$l(e)&&Cu(i)===Cu(e)})}function LG(e,t){var i=t===void 0?{}:t,n=i.excludeTimes,s=i.includeTimes,o=i.filterTime;return n&&kG(e,n)||s&&!kG(e,s)||o&&!o(e)||!1}function PG(e,t){var i=t.minTime,n=t.maxTime;if(!i||!n)throw new Error("Both minTime and maxTime props required");var s=qt();s=AS(s,Ul(e)),s=RS(s,$l(e)),s=ES(s,Cu(e));var o=qt();o=AS(o,Ul(i)),o=RS(o,$l(i)),o=ES(o,Cu(i));var r=qt();r=AS(r,Ul(n)),r=RS(r,$l(n)),r=ES(r,Cu(n));var a;try{a=!sv(s,{start:o,end:r})}catch{a=!1}return a}function NG(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.includeDates,o=Qd(e,1);return n&&Mx(n,o)>0||s&&s.every(function(r){return Mx(r,o)>0})||!1}function FG(e,t){var i=t===void 0?{}:t,n=i.maxDate,s=i.includeDates,o=qr(e,1);return n&&Mx(o,n)>0||s&&s.every(function(r){return Mx(o,r)>0})||!1}function Sne(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.includeDates,o=q0(e),r=Qj(o);return n&&Dx(n,r)>0||s&&s.every(function(a){return Dx(a,r)>0})||!1}function xne(e,t){var i=t===void 0?{}:t,n=i.maxDate,s=i.includeDates,o=jj(e),r=o1(o,1);return n&&Dx(r,n)>0||s&&s.every(function(a){return Dx(r,a)>0})||!1}function OG(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.includeDates,o=Xg(e,1);return n&&Ax(n,o)>0||s&&s.every(function(r){return Ax(r,o)>0})||!1}function Mne(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.yearItemNumber,o=s===void 0?lb:s,r=Sy(Xg(e,o)),a=_l(r,o).endPeriod,l=n&&bt(n);return l&&l>a||!1}function BG(e,t){var i=t===void 0?{}:t,n=i.maxDate,s=i.includeDates,o=jl(e,1);return n&&Ax(o,n)>0||s&&s.every(function(r){return Ax(o,r)>0})||!1}function Dne(e,t){var i=t===void 0?{}:t,n=i.maxDate,s=i.yearItemNumber,o=s===void 0?lb:s,r=jl(e,o),a=_l(r,o).startPeriod,l=n&&bt(n);return l&&l<a||!1}function g4(e){var t=e.minDate,i=e.includeDates;if(i&&t){var n=i.filter(function(s){return Zg(s,t)>=0});return lG(n)}else return i?lG(i):t}function f4(e){var t=e.maxDate,i=e.includeDates;if(i&&t){var n=i.filter(function(s){return Zg(s,t)<=0});return aG(n)}else return i?aG(i):t}function GG(e,t){var i;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var n=new Map,s=0,o=e.length;s<o;s++){var r=e[s];if(Wl(r)){var a=Di(r,"MM.dd.yyyy"),l=n.get(a)||[];l.includes(t)||(l.push(t),n.set(a,l))}else if(typeof r=="object"){var c=Object.keys(r),d=(i=c[0])!==null&&i!==void 0?i:"",p=r[d];if(typeof d=="string"&&Array.isArray(p))for(var g=0,m=p.length;g<m;g++){var y=p[g];if(y){var a=Di(y,"MM.dd.yyyy"),l=n.get(a)||[];l.includes(d)||(l.push(d),n.set(a,l))}}}}return n}function Ane(e,t){return e.length!==t.length?!1:e.every(function(i,n){return i===t[n]})}function Rne(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var i=new Map;return e.forEach(function(n){var s=n.date,o=n.holidayName;if(Wl(s)){var r=Di(s,"MM.dd.yyyy"),a=i.get(r)||{className:"",holidayNames:[]};if(!("className"in a&&a.className===t&&Ane(a.holidayNames,[o]))){a.className=t;var l=a.holidayNames;a.holidayNames=l?Pa(Pa([],l,!0),[o],!1):[o],i.set(r,a)}}}),i}function Ene(e,t,i,n,s){for(var o=s.length,r=[],a=0;a<o;a++){var l=e,c=s[a];c&&(l=SJ(l,Ul(c)),l=oI(l,$l(c)),l=DJ(l,Cu(c)));var d=oI(e,(i+1)*n);Ru(l,t)&&La(l,d)&&c!=null&&r.push(c)}return r}function _G(e){return e<10?"0".concat(e):"".concat(e)}function _l(e,t){t===void 0&&(t=lb);var i=Math.ceil(bt(e)/t)*t,n=i-(t-1);return{startPeriod:n,endPeriod:i}}function Tne(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+i-+t)/36e5)}function VG(e){var t=e.getSeconds(),i=e.getMilliseconds();return We(e.getTime()-t*1e3-i)}function Ine(e,t){return VG(e).getTime()===VG(t).getTime()}function zG(e){if(!Wl(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function vE(e,t){if(!Wl(e)||!Wl(t))throw new Error("Invalid date received");var i=zG(e),n=zG(t);return La(i,n)}function m4(e){return e.key===Oe.Space}var kne=(function(e){fs(t,e);function t(i){var n=e.call(this,i)||this;return n.inputRef=Y.createRef(),n.onTimeChange=function(s){var o,r;n.setState({time:s});var a=n.props.date,l=a instanceof Date&&!isNaN(+a),c=l?a:new Date;if(s?.includes(":")){var d=s.split(":"),p=d[0],g=d[1];c.setHours(Number(p)),c.setMinutes(Number(g))}(r=(o=n.props).onChange)===null||r===void 0||r.call(o,c)},n.renderTimeInput=function(){var s=n.state.time,o=n.props,r=o.date,a=o.timeString,l=o.customTimeInput;return l?R.cloneElement(l,{date:r,value:s,onChange:n.onTimeChange}):Y.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var c;(c=n.inputRef.current)===null||c===void 0||c.focus()},required:!0,value:s,onChange:function(c){n.onTimeChange(c.target.value||a)}})},n.state={time:n.props.timeString},n}return t.getDerivedStateFromProps=function(i,n){return i.timeString!==n.time?{time:i.timeString}:null},t.prototype.render=function(){return Y.createElement("div",{className:"react-datepicker__input-time-container"},Y.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Y.createElement("div",{className:"react-datepicker-time__input-container"},Y.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t})(R.Component),Lne=(function(e){fs(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.dayEl=R.createRef(),i.handleClick=function(n){!i.isDisabled()&&i.props.onClick&&i.props.onClick(n)},i.handleMouseEnter=function(n){!i.isDisabled()&&i.props.onMouseEnter&&i.props.onMouseEnter(n)},i.handleOnKeyDown=function(n){var s,o,r=n.key;r===Oe.Space&&(n.preventDefault(),n.key=Oe.Enter),(o=(s=i.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},i.isSameDay=function(n){return Rt(i.props.day,n)},i.isKeyboardSelected=function(){var n;if(i.props.disabledKeyboardNavigation)return!1;var s=i.props.selectsMultiple?(n=i.props.selectedDates)===null||n===void 0?void 0:n.some(function(r){return i.isSameDayOrWeek(r)}):i.isSameDayOrWeek(i.props.selected),o=i.props.preSelection&&i.isDisabled(i.props.preSelection);return!s&&i.isSameDayOrWeek(i.props.preSelection)&&!o},i.isDisabled=function(n){return n===void 0&&(n=i.props.day),mr(n,{minDate:i.props.minDate,maxDate:i.props.maxDate,excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals,includeDateIntervals:i.props.includeDateIntervals,includeDates:i.props.includeDates,filterDate:i.props.filterDate,disabled:i.props.disabled})},i.isExcluded=function(){return y1(i.props.day,{excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals})},i.isStartOfWeek=function(){return Rt(i.props.day,wu(i.props.day,i.props.locale,i.props.calendarStartDay))},i.isSameWeek=function(n){return i.props.showWeekPicker&&Rt(n,wu(i.props.day,i.props.locale,i.props.calendarStartDay))},i.isSameDayOrWeek=function(n){return i.isSameDay(n)||i.isSameWeek(n)},i.getHighLightedClass=function(){var n=i.props,s=n.day,o=n.highlightDates;if(!o)return!1;var r=Di(s,"MM.dd.yyyy");return o.get(r)},i.getHolidaysClass=function(){var n,s=i.props,o=s.day,r=s.holidays;if(!r)return[void 0];var a=Di(o,"MM.dd.yyyy");return r.has(a)?[(n=r.get(a))===null||n===void 0?void 0:n.className]:[void 0]},i.isInRange=function(){var n=i.props,s=n.day,o=n.startDate,r=n.endDate;return!o||!r?!1:Pd(s,o,r)},i.isInSelectingRange=function(){var n,s=i.props,o=s.day,r=s.selectsStart,a=s.selectsEnd,l=s.selectsRange,c=s.selectsDisabledDaysInRange,d=s.startDate,p=s.swapRange,g=s.endDate,m=(n=i.props.selectingDate)!==null&&n!==void 0?n:i.props.preSelection;if(!(r||a||l)||!m||!c&&i.isDisabled())return!1;if(r&&g&&(La(m,g)||Hd(m,g)))return Pd(o,m,g);if(a&&d&&(Ru(m,d)||Hd(m,d)))return Pd(o,d,m);if(l&&d&&!g){if(Hd(m,d)||Ru(m,d))return Pd(o,d,m);if(p&&La(m,d))return Pd(o,m,d)}return!1},i.isSelectingRangeStart=function(){var n;if(!i.isInSelectingRange())return!1;var s=i.props,o=s.day,r=s.startDate,a=s.selectsStart,l=s.swapRange,c=s.selectsRange,d=(n=i.props.selectingDate)!==null&&n!==void 0?n:i.props.preSelection;return a?Rt(o,d):c&&l&&r&&d?Rt(o,La(d,r)?d:r):Rt(o,r)},i.isSelectingRangeEnd=function(){var n;if(!i.isInSelectingRange())return!1;var s=i.props,o=s.day,r=s.endDate,a=s.selectsEnd,l=s.selectsRange,c=s.swapRange,d=s.startDate,p=(n=i.props.selectingDate)!==null&&n!==void 0?n:i.props.preSelection;return a?Rt(o,p):l&&c&&d&&p?Rt(o,La(p,d)?d:p):l?Rt(o,p):Rt(o,r)},i.isRangeStart=function(){var n=i.props,s=n.day,o=n.startDate,r=n.endDate;return!o||!r?!1:Rt(o,s)},i.isRangeEnd=function(){var n=i.props,s=n.day,o=n.startDate,r=n.endDate;return!o||!r?!1:Rt(r,s)},i.isWeekend=function(){var n=xee(i.props.day);return n===0||n===6},i.isAfterMonth=function(){return i.props.month!==void 0&&(i.props.month+1)%12===Ts(i.props.day)},i.isBeforeMonth=function(){return i.props.month!==void 0&&(Ts(i.props.day)+1)%12===i.props.month},i.isCurrentDay=function(){return i.isSameDay(qt())},i.isSelected=function(){var n;return i.props.selectsMultiple?(n=i.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return i.isSameDayOrWeek(s)}):i.isSameDayOrWeek(i.props.selected)},i.getClassNames=function(n){var s=i.props.dayClassName?i.props.dayClassName(n):void 0;return Mi("react-datepicker__day",s,"react-datepicker__day--"+gne(i.props.day),{"react-datepicker__day--disabled":i.isDisabled(),"react-datepicker__day--excluded":i.isExcluded(),"react-datepicker__day--selected":i.isSelected(),"react-datepicker__day--keyboard-selected":i.isKeyboardSelected(),"react-datepicker__day--range-start":i.isRangeStart(),"react-datepicker__day--range-end":i.isRangeEnd(),"react-datepicker__day--in-range":i.isInRange(),"react-datepicker__day--in-selecting-range":i.isInSelectingRange(),"react-datepicker__day--selecting-range-start":i.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":i.isSelectingRangeEnd(),"react-datepicker__day--today":i.isCurrentDay(),"react-datepicker__day--weekend":i.isWeekend(),"react-datepicker__day--outside-month":i.isAfterMonth()||i.isBeforeMonth()},i.getHighLightedClass(),i.getHolidaysClass())},i.getAriaLabel=function(){var n=i.props,s=n.day,o=n.ariaLabelPrefixWhenEnabled,r=o===void 0?"Choose":o,a=n.ariaLabelPrefixWhenDisabled,l=a===void 0?"Not available":a,c=i.isDisabled()||i.isExcluded()?l:r;return"".concat(c," ").concat(Di(s,"PPPP",i.props.locale))},i.getTitle=function(){var n=i.props,s=n.day,o=n.holidays,r=o===void 0?new Map:o,a=n.excludeDates,l=Di(s,"MM.dd.yyyy"),c=[];return r.has(l)&&c.push.apply(c,r.get(l).holidayNames),i.isExcluded()&&c.push(a?.filter(function(d){return d instanceof Date?Rt(d,s):Rt(d?.date,s)}).map(function(d){if(!(d instanceof Date))return d?.message})),c.join(", ")},i.getTabIndex=function(){var n=i.props.selected,s=i.props.preSelection,o=!(i.props.showWeekPicker&&(i.props.showWeekNumber||!i.isStartOfWeek()))&&(i.isKeyboardSelected()||i.isSameDay(n)&&Rt(s,n))?0:-1;return o},i.handleFocusDay=function(){var n;i.shouldFocusDay()&&((n=i.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},i.renderDayContents=function(){return i.props.monthShowsDuplicateDaysEnd&&i.isAfterMonth()||i.props.monthShowsDuplicateDaysStart&&i.isBeforeMonth()?null:i.props.renderDayContents?i.props.renderDayContents(fG(i.props.day),i.props.day):fG(i.props.day)},i.render=function(){return Y.createElement("div",{ref:i.dayEl,className:i.getClassNames(i.props.day),onKeyDown:i.handleOnKeyDown,onClick:i.handleClick,onMouseEnter:i.props.usePointerEvent?void 0:i.handleMouseEnter,onPointerEnter:i.props.usePointerEvent?i.handleMouseEnter:void 0,tabIndex:i.getTabIndex(),"aria-label":i.getAriaLabel(),role:"gridcell",title:i.getTitle(),"aria-disabled":i.isDisabled(),"aria-current":i.isCurrentDay()?"date":void 0,"aria-selected":i.isSelected()||i.isInRange()},i.renderDayContents(),i.getTitle()!==""&&Y.createElement("span",{className:"overlay"},i.getTitle()))},i}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var i=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(i=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(i=!1),this.isDayActiveElement()&&(i=!0),this.isDuplicateDay()&&(i=!1)),i},t.prototype.isDayActiveElement=function(){var i,n,s;return((n=(i=this.props.containerRef)===null||i===void 0?void 0:i.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t})(R.Component),Pne=(function(e){fs(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.weekNumberEl=R.createRef(),i.handleClick=function(n){i.props.onClick&&i.props.onClick(n)},i.handleOnKeyDown=function(n){var s,o,r=n.key;r===Oe.Space&&(n.preventDefault(),n.key=Oe.Enter),(o=(s=i.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},i.isKeyboardSelected=function(){return!i.props.disabledKeyboardNavigation&&!Rt(i.props.date,i.props.selected)&&Rt(i.props.date,i.props.preSelection)},i.getTabIndex=function(){return i.props.showWeekPicker&&i.props.showWeekNumber&&(i.isKeyboardSelected()||Rt(i.props.date,i.props.selected)&&Rt(i.props.preSelection,i.props.selected))?0:-1},i.handleFocusWeekNumber=function(n){var s=!1;i.getTabIndex()===0&&!n?.isInputFocused&&Rt(i.props.date,i.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),i.props.inline&&!i.props.shouldFocusDayInline&&(s=!1),i.props.containerRef&&i.props.containerRef.current&&i.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&i.weekNumberEl.current&&i.weekNumberEl.current.focus({preventScroll:!0})},i}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(i){this.handleFocusWeekNumber(i)},t.prototype.render=function(){var i=this.props,n=i.weekNumber,s=i.isWeekDisabled,o=i.ariaLabelPrefix,r=o===void 0?t.defaultProps.ariaLabelPrefix:o,a=i.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!a&&!s,"react-datepicker__week-number--selected":!!a&&Rt(this.props.date,this.props.selected)};return Y.createElement("div",{ref:this.weekNumberEl,className:Mi(l),"aria-label":"".concat(r," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},n)},t})(R.Component),Nne=(function(e){fs(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.isDisabled=function(n){return mr(n,{minDate:i.props.minDate,maxDate:i.props.maxDate,excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals,includeDateIntervals:i.props.includeDateIntervals,includeDates:i.props.includeDates,filterDate:i.props.filterDate})},i.handleDayClick=function(n,s){i.props.onDayClick&&i.props.onDayClick(n,s)},i.handleDayMouseEnter=function(n){i.props.onDayMouseEnter&&i.props.onDayMouseEnter(n)},i.handleWeekClick=function(n,s,o){for(var r,a,l,c=new Date(n),d=0;d<7;d++){var p=new Date(n);p.setDate(p.getDate()+d);var g=!i.isDisabled(p);if(g){c=p;break}}typeof i.props.onWeekSelect=="function"&&i.props.onWeekSelect(c,s,o),i.props.showWeekPicker&&i.handleDayClick(c,o),((r=i.props.shouldCloseOnSelect)!==null&&r!==void 0?r:t.defaultProps.shouldCloseOnSelect)&&((l=(a=i.props).setOpen)===null||l===void 0||l.call(a,!1))},i.formatWeekNumber=function(n){return i.props.formatWeekNumber?i.props.formatWeekNumber(n):pne(n)},i.isWeekDisabled=function(){for(var n=i.startOfWeek(),s=Ur(n,6),o=new Date(n);o<=s;){if(!i.isDisabled(o))return!1;o=Ur(o,1)}return!0},i.renderDays=function(){var n=i.startOfWeek(),s=[],o=i.formatWeekNumber(n);if(i.props.showWeekNumber){var r=i.props.onWeekSelect||i.props.showWeekPicker?i.handleWeekClick.bind(i,n,o):void 0;s.push(Y.createElement(Pne,Et({key:"W"},t.defaultProps,i.props,{weekNumber:o,isWeekDisabled:i.isWeekDisabled(),date:n,onClick:r})))}return s.concat([0,1,2,3,4,5,6].map(function(a){var l=Ur(n,a);return Y.createElement(Lne,Et({},t.defaultProps,i.props,{ariaLabelPrefixWhenEnabled:i.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:i.props.disabledDayAriaLabelPrefix,key:l.valueOf(),day:l,onClick:i.handleDayClick.bind(i,l),onMouseEnter:i.handleDayMouseEnter.bind(i,l)}))}))},i.startOfWeek=function(){return wu(i.props.day,i.props.locale,i.props.calendarStartDay)},i.isKeyboardSelected=function(){return!i.props.disabledKeyboardNavigation&&!Rt(i.startOfWeek(),i.props.selected)&&Rt(i.startOfWeek(),i.props.preSelection)},i}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var i={"react-datepicker__week":!0,"react-datepicker__week--selected":Rt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},n=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return Y.createElement("div",{className:Mi(i,n),role:"row"},this.renderDays())},t})(R.Component),ay,Fne=6,Eg={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},bE=(ay={},ay[Eg.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},ay[Eg.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},ay[Eg.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},ay),jw=1;function HG(e,t){return e?Eg.FOUR_COLUMNS:t?Eg.TWO_COLUMNS:Eg.THREE_COLUMNS}var One=(function(e){fs(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.MONTH_REFS=Pa([],Array(12),!0).map(function(){return R.createRef()}),i.QUARTER_REFS=Pa([],Array(4),!0).map(function(){return R.createRef()}),i.isDisabled=function(n){return mr(n,{minDate:i.props.minDate,maxDate:i.props.maxDate,excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals,includeDateIntervals:i.props.includeDateIntervals,includeDates:i.props.includeDates,filterDate:i.props.filterDate,disabled:i.props.disabled})},i.isExcluded=function(n){return y1(n,{excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals})},i.handleDayClick=function(n,s){var o,r;(r=(o=i.props).onDayClick)===null||r===void 0||r.call(o,n,s,i.props.orderInDisplay)},i.handleDayMouseEnter=function(n){var s,o;(o=(s=i.props).onDayMouseEnter)===null||o===void 0||o.call(s,n)},i.handleMouseLeave=function(){var n,s;(s=(n=i.props).onMouseLeave)===null||s===void 0||s.call(n)},i.isRangeStartMonth=function(n){var s=i.props,o=s.day,r=s.startDate,a=s.endDate;return!r||!a?!1:Hs(No(o,n),r)},i.isRangeStartQuarter=function(n){var s=i.props,o=s.day,r=s.startDate,a=s.endDate;return!r||!a?!1:Px(rg(o,n),r)},i.isRangeEndMonth=function(n){var s=i.props,o=s.day,r=s.startDate,a=s.endDate;return!r||!a?!1:Hs(No(o,n),a)},i.isRangeEndQuarter=function(n){var s=i.props,o=s.day,r=s.startDate,a=s.endDate;return!r||!a?!1:Px(rg(o,n),a)},i.isInSelectingRangeMonth=function(n){var s,o=i.props,r=o.day,a=o.selectsStart,l=o.selectsEnd,c=o.selectsRange,d=o.startDate,p=o.endDate,g=(s=i.props.selectingDate)!==null&&s!==void 0?s:i.props.preSelection;return!(a||l||c)||!g?!1:a&&p?_w(g,p,n,r):l&&d||c&&d&&!p?_w(d,g,n,r):!1},i.isSelectingMonthRangeStart=function(n){var s;if(!i.isInSelectingRangeMonth(n))return!1;var o=i.props,r=o.day,a=o.startDate,l=o.selectsStart,c=No(r,n),d=(s=i.props.selectingDate)!==null&&s!==void 0?s:i.props.preSelection;return l?Hs(c,d):Hs(c,a)},i.isSelectingMonthRangeEnd=function(n){var s;if(!i.isInSelectingRangeMonth(n))return!1;var o=i.props,r=o.day,a=o.endDate,l=o.selectsEnd,c=o.selectsRange,d=No(r,n),p=(s=i.props.selectingDate)!==null&&s!==void 0?s:i.props.preSelection;return l||c?Hs(d,p):Hs(d,a)},i.isInSelectingRangeQuarter=function(n){var s,o=i.props,r=o.day,a=o.selectsStart,l=o.selectsEnd,c=o.selectsRange,d=o.startDate,p=o.endDate,g=(s=i.props.selectingDate)!==null&&s!==void 0?s:i.props.preSelection;return!(a||l||c)||!g?!1:a&&p?Hw(g,p,n,r):l&&d||c&&d&&!p?Hw(d,g,n,r):!1},i.isWeekInMonth=function(n){var s=i.props.day,o=Ur(n,6);return Hs(n,s)||Hs(o,s)},i.isCurrentMonth=function(n,s){return bt(n)===bt(qt())&&s===Ts(qt())},i.isCurrentQuarter=function(n,s){return bt(n)===bt(qt())&&s===Xd(qt())},i.isSelectedMonth=function(n,s,o){return Ts(o)===s&&bt(n)===bt(o)},i.isSelectMonthInList=function(n,s,o){return o.some(function(r){return i.isSelectedMonth(n,s,r)})},i.isSelectedQuarter=function(n,s,o){return Xd(n)===s&&bt(n)===bt(o)},i.isMonthSelected=function(){var n=i.props,s=n.day,o=n.selected,r=n.selectedDates,a=n.selectsMultiple,l=Ts(s);return a?r?.some(function(c){return i.isSelectedMonth(s,l,c)}):!!o&&i.isSelectedMonth(s,l,o)},i.renderWeeks=function(){for(var n=[],s=i.props.fixedHeight,o=0,r=!1,a=wu(Yl(i.props.day),i.props.locale,i.props.calendarStartDay),l=function(y){return i.props.showWeekPicker?wu(y,i.props.locale,i.props.calendarStartDay):i.props.preSelection},c=function(y){return i.props.showWeekPicker?wu(y,i.props.locale,i.props.calendarStartDay):i.props.selected},d=i.props.selected?c(i.props.selected):void 0,p=i.props.preSelection?l(i.props.preSelection):void 0;n.push(Y.createElement(Nne,Et({},i.props,{ariaLabelPrefix:i.props.weekAriaLabelPrefix,key:o,day:a,month:Ts(i.props.day),onDayClick:i.handleDayClick,onDayMouseEnter:i.handleDayMouseEnter,selected:d,preSelection:p,showWeekNumber:i.props.showWeekNumbers}))),!r;){o++,a=Sx(a,1);var g=s&&o>=Fne,m=!s&&!i.isWeekInMonth(a);if(g||m)if(i.props.peekNextMonth)r=!0;else break}return n},i.onMonthClick=function(n,s){var o=i.isMonthDisabledForLabelDate(s),r=o.isDisabled,a=o.labelDate;r||i.handleDayClick(Yl(a),n)},i.onMonthMouseEnter=function(n){var s=i.isMonthDisabledForLabelDate(n),o=s.isDisabled,r=s.labelDate;o||i.handleDayMouseEnter(Yl(r))},i.handleMonthNavigation=function(n,s){var o,r,a,l;(r=(o=i.props).setPreSelection)===null||r===void 0||r.call(o,s),(l=(a=i.MONTH_REFS[n])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus()},i.handleKeyboardNavigation=function(n,s,o){var r,a=i.props,l=a.selected,c=a.preSelection,d=a.setPreSelection,p=a.minDate,g=a.maxDate,m=a.showFourColumnMonthYearPicker,y=a.showTwoColumnMonthYearPicker;if(c){var b=HG(m,y),C=i.getVerticalOffset(b),w=(r=bE[b])===null||r===void 0?void 0:r.grid,x=function(T,P,O){var G,B,z=P,j=O;switch(T){case Oe.ArrowRight:z=qr(P,jw),j=O===11?0:O+jw;break;case Oe.ArrowLeft:z=Qd(P,jw),j=O===0?11:O-jw;break;case Oe.ArrowUp:z=Qd(P,C),j=!((G=w?.[0])===null||G===void 0)&&G.includes(O)?O+12-C:O-C;break;case Oe.ArrowDown:z=qr(P,C),j=!((B=w?.[w.length-1])===null||B===void 0)&&B.includes(O)?O-12+C:O+C;break}return{newCalculatedDate:z,newCalculatedMonth:j}},M=function(T,P,O){for(var G=40,B=T,z=!1,j=0,X=x(B,P,O),q=X.newCalculatedDate,H=X.newCalculatedMonth;!z;){if(j>=G){q=P,H=O;break}if(p&&q<p){B=Oe.ArrowRight;var K=x(B,q,H);q=K.newCalculatedDate,H=K.newCalculatedMonth}if(g&&q>g){B=Oe.ArrowLeft;var K=x(B,q,H);q=K.newCalculatedDate,H=K.newCalculatedMonth}if(wne(q,i.props)){var K=x(B,q,H);q=K.newCalculatedDate,H=K.newCalculatedMonth}else z=!0;j++}return{newCalculatedDate:q,newCalculatedMonth:H}};if(s===Oe.Enter){i.isMonthDisabled(o)||(i.onMonthClick(n,o),d?.(l));return}var E=M(s,c,o),I=E.newCalculatedDate,N=E.newCalculatedMonth;switch(s){case Oe.ArrowRight:case Oe.ArrowLeft:case Oe.ArrowUp:case Oe.ArrowDown:i.handleMonthNavigation(N,I);break}}},i.getVerticalOffset=function(n){var s,o;return(o=(s=bE[n])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&o!==void 0?o:0},i.onMonthKeyDown=function(n,s){var o=i.props,r=o.disabledKeyboardNavigation,a=o.handleOnMonthKeyDown,l=n.key;l!==Oe.Tab&&n.preventDefault(),r||i.handleKeyboardNavigation(n,l,s),a&&a(n)},i.onQuarterClick=function(n,s){var o=rg(i.props.day,s);Vw(o,i.props)||i.handleDayClick(EG(o),n)},i.onQuarterMouseEnter=function(n){var s=rg(i.props.day,n);Vw(s,i.props)||i.handleDayMouseEnter(EG(s))},i.handleQuarterNavigation=function(n,s){var o,r,a,l;i.isDisabled(s)||i.isExcluded(s)||((r=(o=i.props).setPreSelection)===null||r===void 0||r.call(o,s),(l=(a=i.QUARTER_REFS[n-1])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus())},i.onQuarterKeyDown=function(n,s){var o,r,a=n.key;if(!i.props.disabledKeyboardNavigation)switch(a){case Oe.Enter:i.onQuarterClick(n,s),(r=(o=i.props).setPreSelection)===null||r===void 0||r.call(o,i.props.selected);break;case Oe.ArrowRight:if(!i.props.preSelection)break;i.handleQuarterNavigation(s===4?1:s+1,o1(i.props.preSelection,1));break;case Oe.ArrowLeft:if(!i.props.preSelection)break;i.handleQuarterNavigation(s===1?4:s-1,Qj(i.props.preSelection));break}},i.isMonthDisabledForLabelDate=function(n){var s,o=i.props,r=o.day,a=o.disabled,l=o.minDate,c=o.maxDate,d=o.excludeDates,p=o.includeDates,g=No(r,n);return a?{isDisabled:!0,labelDate:No(r,n)}:{isDisabled:(s=(l||c||d||p)&&p4(g,i.props))!==null&&s!==void 0?s:!1,labelDate:g}},i.isMonthDisabled=function(n){var s=i.isMonthDisabledForLabelDate(n).isDisabled;return s},i.getMonthClassNames=function(n){var s=i.props,o=s.day,r=s.startDate,a=s.endDate,l=s.preSelection,c=s.monthClassName,d=c?c(No(o,n)):void 0,p=i.getSelection();return Mi("react-datepicker__month-text","react-datepicker__month-".concat(n),d,{"react-datepicker__month-text--disabled":i.isMonthDisabled(n),"react-datepicker__month-text--selected":p?i.isSelectMonthInList(o,n,p):void 0,"react-datepicker__month-text--keyboard-selected":!i.props.disabledKeyboardNavigation&&l&&i.isSelectedMonth(o,n,l)&&!i.isMonthSelected()&&!i.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":i.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":r&&a?_w(r,a,n,o):void 0,"react-datepicker__month-text--range-start":i.isRangeStartMonth(n),"react-datepicker__month-text--range-end":i.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":i.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":i.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":i.isCurrentMonth(o,n)})},i.getTabIndex=function(n){if(i.props.preSelection==null)return"-1";var s=Ts(i.props.preSelection),o=i.isMonthDisabledForLabelDate(s).isDisabled,r=n===s&&!(o||i.props.disabledKeyboardNavigation)?"0":"-1";return r},i.getQuarterTabIndex=function(n){if(i.props.preSelection==null)return"-1";var s=Xd(i.props.preSelection),o=Vw(i.props.day,i.props),r=n===s&&!(o||i.props.disabledKeyboardNavigation)?"0":"-1";return r},i.getAriaLabel=function(n){var s=i.props,o=s.chooseDayAriaLabelPrefix,r=o===void 0?"Choose":o,a=s.disabledDayAriaLabelPrefix,l=a===void 0?"Not available":a,c=s.day,d=s.locale,p=No(c,n),g=i.isDisabled(p)||i.isExcluded(p)?l:r;return"".concat(g," ").concat(Di(p,"MMMM yyyy",d))},i.getQuarterClassNames=function(n){var s=i.props,o=s.day,r=s.startDate,a=s.endDate,l=s.selected,c=s.minDate,d=s.maxDate,p=s.excludeDates,g=s.includeDates,m=s.filterDate,y=s.preSelection,b=s.disabledKeyboardNavigation,C=s.disabled,w=(c||d||p||g||m||C)&&Vw(rg(o,n),i.props);return Mi("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":w,"react-datepicker__quarter-text--selected":l?i.isSelectedQuarter(o,n,l):void 0,"react-datepicker__quarter-text--keyboard-selected":!b&&y&&i.isSelectedQuarter(o,n,y)&&!w,"react-datepicker__quarter-text--in-selecting-range":i.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":r&&a?Hw(r,a,n,o):void 0,"react-datepicker__quarter-text--range-start":i.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":i.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":i.isCurrentQuarter(o,n)})},i.getMonthContent=function(n){var s=i.props,o=s.showFullMonthYearPicker,r=s.renderMonthContent,a=s.locale,l=s.day,c=h4(n,a),d=m1(n,a);return r?r(n,c,d,l):o?d:c},i.getQuarterContent=function(n){var s,o=i.props,r=o.renderQuarterContent,a=o.locale,l=Cne(n,a);return(s=r?.(n,l))!==null&&s!==void 0?s:l},i.renderMonths=function(){var n,s=i.props,o=s.showTwoColumnMonthYearPicker,r=s.showFourColumnMonthYearPicker,a=s.day,l=s.selected,c=(n=bE[HG(r,o)])===null||n===void 0?void 0:n.grid;return c?.map(function(d,p){return Y.createElement("div",{className:"react-datepicker__month-wrapper",key:p},d.map(function(g,m){return Y.createElement("div",{ref:i.MONTH_REFS[g],key:m,onClick:function(y){i.onMonthClick(y,g)},onKeyDown:function(y){m4(y)&&(y.preventDefault(),y.key=Oe.Enter),i.onMonthKeyDown(y,g)},onMouseEnter:i.props.usePointerEvent?void 0:function(){return i.onMonthMouseEnter(g)},onPointerEnter:i.props.usePointerEvent?function(){return i.onMonthMouseEnter(g)}:void 0,tabIndex:Number(i.getTabIndex(g)),className:i.getMonthClassNames(g),"aria-disabled":i.isMonthDisabled(g),role:"option","aria-label":i.getAriaLabel(g),"aria-current":i.isCurrentMonth(a,g)?"date":void 0,"aria-selected":l?i.isSelectedMonth(a,g,l):void 0},i.getMonthContent(g))}))})},i.renderQuarters=function(){var n=i.props,s=n.day,o=n.selected,r=[1,2,3,4];return Y.createElement("div",{className:"react-datepicker__quarter-wrapper"},r.map(function(a,l){return Y.createElement("div",{key:l,ref:i.QUARTER_REFS[l],role:"option",onClick:function(c){i.onQuarterClick(c,a)},onKeyDown:function(c){i.onQuarterKeyDown(c,a)},onMouseEnter:i.props.usePointerEvent?void 0:function(){return i.onQuarterMouseEnter(a)},onPointerEnter:i.props.usePointerEvent?function(){return i.onQuarterMouseEnter(a)}:void 0,className:i.getQuarterClassNames(a),"aria-selected":o?i.isSelectedQuarter(s,a,o):void 0,tabIndex:Number(i.getQuarterTabIndex(a)),"aria-current":i.isCurrentQuarter(s,a)?"date":void 0},i.getQuarterContent(a))}))},i.getClassNames=function(){var n=i.props,s=n.selectingDate,o=n.selectsStart,r=n.selectsEnd,a=n.showMonthYearPicker,l=n.showQuarterYearPicker,c=n.showWeekPicker;return Mi("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(o||r)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":l},{"react-datepicker__weekPicker":c})},i}return t.prototype.getSelection=function(){var i=this.props,n=i.selected,s=i.selectedDates,o=i.selectsMultiple;if(o)return s;if(n)return[n]},t.prototype.render=function(){var i=this.props,n=i.showMonthYearPicker,s=i.showQuarterYearPicker,o=i.day,r=i.ariaLabelPrefix,a=r===void 0?"Month ":r,l=a?a.trim()+" ":"",c=n||s;return c?Y.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(l).concat(Di(o,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():this.renderQuarters()):Y.createElement("div",{role:"table"},this.props.dayNamesHeader&&Y.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),Y.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(l).concat(Di(o,"MMMM, yyyy",this.props.locale)),role:"rowgroup"},this.renderWeeks()))},t})(R.Component),Bne=(function(e){fs(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.monthOptionButtonsRef={},i.isSelectedMonth=function(n){return i.props.month===n},i.handleOptionKeyDown=function(n,s){var o;switch(s.key){case"Enter":s.preventDefault(),i.onChange(n);break;case"Escape":s.preventDefault(),i.props.onCancel();break;case"ArrowUp":case"ArrowDown":{s.preventDefault();var r=(n+(s.key==="ArrowUp"?-1:1)+i.props.monthNames.length)%i.props.monthNames.length;(o=i.monthOptionButtonsRef[r])===null||o===void 0||o.focus();break}}},i.renderOptions=function(){return i.monthOptionButtonsRef={},i.props.monthNames.map(function(n,s){return Y.createElement("div",{ref:function(o){i.monthOptionButtonsRef[s]=o,i.isSelectedMonth(s)&&o?.focus()},role:"button",tabIndex:0,className:i.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:i.onChange.bind(i,s),onKeyDown:i.handleOptionKeyDown.bind(i,s),"aria-selected":i.isSelectedMonth(s)?"true":void 0},i.isSelectedMonth(s)?Y.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},i.onChange=function(n){return i.props.onChange(n)},i.handleClickOutside=function(){return i.props.onCancel()},i}return t.prototype.render=function(){return Y.createElement(tM,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t})(R.Component),Gne=(function(e){fs(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={dropdownVisible:!1},i.renderSelectOptions=function(n){return n.map(function(s,o){return Y.createElement("option",{key:s,value:o},s)})},i.renderSelectMode=function(n){return Y.createElement("select",{value:i.props.month,className:"react-datepicker__month-select",onChange:function(s){return i.onChange(parseInt(s.target.value))}},i.renderSelectOptions(n))},i.renderReadView=function(n,s){return Y.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:i.toggleDropdown},Y.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Y.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[i.props.month]))},i.renderDropdown=function(n){return Y.createElement(Bne,Et({key:"dropdown"},i.props,{monthNames:n,onChange:i.onChange,onCancel:i.toggleDropdown}))},i.renderScrollMode=function(n){var s=i.state.dropdownVisible,o=[i.renderReadView(!s,n)];return s&&o.unshift(i.renderDropdown(n)),o},i.onChange=function(n){i.toggleDropdown(),n!==i.props.month&&i.props.onChange(n)},i.toggleDropdown=function(){return i.setState({dropdownVisible:!i.state.dropdownVisible})},i}return t.prototype.render=function(){var i=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return h4(o,i.props.locale)}:function(o){return m1(o,i.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(n);break;case"select":s=this.renderSelectMode(n);break}return Y.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t})(R.Component);function _ne(e,t){for(var i=[],n=Yl(e),s=Yl(t);!Ru(n,s);)i.push(qt(n)),n=qr(n,1);return i}var Vne=(function(e){fs(t,e);function t(i){var n=e.call(this,i)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(s){var o=lI(s),r=Ma(n.props.date,s)&&Hs(n.props.date,s);return Y.createElement("div",{className:r?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:n.onChange.bind(n,o),"aria-selected":r?"true":void 0},r?Y.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",Di(s,n.props.dateFormat,n.props.locale))})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:_ne(n.props.minDate,n.props.maxDate)},n}return t.prototype.render=function(){var i=Mi({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Y.createElement(tM,{className:i,onClickOutside:this.handleClickOutside},this.renderOptions())},t})(R.Component),zne=(function(e){fs(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={dropdownVisible:!1},i.renderSelectOptions=function(){for(var n=Yl(i.props.minDate),s=Yl(i.props.maxDate),o=[];!Ru(n,s);){var r=lI(n);o.push(Y.createElement("option",{key:r,value:r},Di(n,i.props.dateFormat,i.props.locale))),n=qr(n,1)}return o},i.onSelectChange=function(n){i.onChange(parseInt(n.target.value))},i.renderSelectMode=function(){return Y.createElement("select",{value:lI(Yl(i.props.date)),className:"react-datepicker__month-year-select",onChange:i.onSelectChange},i.renderSelectOptions())},i.renderReadView=function(n){var s=Di(i.props.date,i.props.dateFormat,i.props.locale);return Y.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:i.toggleDropdown},Y.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Y.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},i.renderDropdown=function(){return Y.createElement(Vne,Et({key:"dropdown"},i.props,{onChange:i.onChange,onCancel:i.toggleDropdown}))},i.renderScrollMode=function(){var n=i.state.dropdownVisible,s=[i.renderReadView(!n)];return n&&s.unshift(i.renderDropdown()),s},i.onChange=function(n){i.toggleDropdown();var s=qt(n);Ma(i.props.date,s)&&Hs(i.props.date,s)||i.props.onChange(s)},i.toggleDropdown=function(){return i.setState({dropdownVisible:!i.state.dropdownVisible})},i}return t.prototype.render=function(){var i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode();break;case"select":i=this.renderSelectMode();break}return Y.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},i)},t})(R.Component),Hne=(function(e){fs(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={height:null},i.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,s,o;i.list&&(i.list.scrollTop=(o=i.centerLi&&t.calcCenterPosition(i.props.monthRef?i.props.monthRef.clientHeight-((s=(n=i.header)===null||n===void 0?void 0:n.clientHeight)!==null&&s!==void 0?s:0):i.list.clientHeight,i.centerLi))!==null&&o!==void 0?o:0)})},i.handleClick=function(n){var s,o;(i.props.minTime||i.props.maxTime)&&PG(n,i.props)||(i.props.excludeTimes||i.props.includeTimes||i.props.filterTime)&&LG(n,i.props)||(o=(s=i.props).onChange)===null||o===void 0||o.call(s,n)},i.isSelectedTime=function(n){return i.props.selected&&Ine(i.props.selected,n)},i.isDisabledTime=function(n){return(i.props.minTime||i.props.maxTime)&&PG(n,i.props)||(i.props.excludeTimes||i.props.includeTimes||i.props.filterTime)&&LG(n,i.props)},i.liClasses=function(n){var s,o=["react-datepicker__time-list-item",i.props.timeClassName?i.props.timeClassName(n):void 0];return i.isSelectedTime(n)&&o.push("react-datepicker__time-list-item--selected"),i.isDisabledTime(n)&&o.push("react-datepicker__time-list-item--disabled"),i.props.injectTimes&&(Ul(n)*3600+$l(n)*60+Cu(n))%(((s=i.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&o.push("react-datepicker__time-list-item--injected"),o.join(" ")},i.handleOnKeyDown=function(n,s){var o,r;n.key===Oe.Space&&(n.preventDefault(),n.key=Oe.Enter),(n.key===Oe.ArrowUp||n.key===Oe.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===Oe.ArrowDown||n.key===Oe.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===Oe.Enter&&i.handleClick(s),(r=(o=i.props).handleOnKeyDown)===null||r===void 0||r.call(o,n)},i.renderTimes=function(){for(var n,s=[],o=typeof i.props.format=="string"?i.props.format:"p",r=(n=i.props.intervals)!==null&&n!==void 0?n:t.defaultProps.intervals,a=i.props.selected||i.props.openToDate||qt(),l=IS(a),c=i.props.injectTimes&&i.props.injectTimes.sort(function(C,w){return C.getTime()-w.getTime()}),d=60*Tne(a),p=d/r,g=0;g<p;g++){var m=oI(l,g*r);if(s.push(m),c){var y=Ene(l,m,g,r,c);s=s.concat(y)}}var b=s.reduce(function(C,w){return w.getTime()<=a.getTime()?w:C},s[0]);return s.map(function(C){return Y.createElement("li",{key:C.valueOf(),onClick:i.handleClick.bind(i,C),className:i.liClasses(C),ref:function(w){C===b&&(i.centerLi=w)},onKeyDown:function(w){i.handleOnKeyDown(w,C)},tabIndex:C===b?0:-1,role:"option","aria-selected":i.isSelectedTime(C)?"true":void 0,"aria-disabled":i.isDisabledTime(C)?"true":void 0},Di(C,o,i.props.locale))})},i.renderTimeCaption=function(){return i.props.showTimeCaption===!1?Y.createElement(Y.Fragment,null):Y.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(i.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){i.header=n}},Y.createElement("div",{className:"react-datepicker-time__header"},i.props.timeCaption))},i}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var i;(i=this.resizeObserver)===null||i===void 0||i.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var i=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){i.updateContainerHeight()}),this.resizeObserver.observe(n))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var i=this,n,s=this.state.height;return Y.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),Y.createElement("div",{className:"react-datepicker__time"},Y.createElement("div",{className:"react-datepicker__time-box"},Y.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){i.list=o},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(i,n){return n.offsetTop-(i/2-n.clientHeight/2)},t})(R.Component),jG=3,jne=(function(e){fs(t,e);function t(i){var n=e.call(this,i)||this;return n.YEAR_REFS=Pa([],Array(n.props.yearItemNumber),!0).map(function(){return R.createRef()}),n.isDisabled=function(s){return mr(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return y1(s,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var s;return(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection},n.updateFocusOnPaginate=function(s){var o=function(){var r,a;(a=(r=n.YEAR_REFS[s])===null||r===void 0?void 0:r.current)===null||a===void 0||a.focus()};window.requestAnimationFrame(o)},n.handleYearClick=function(s,o){n.props.onDayClick&&n.props.onDayClick(s,o)},n.handleYearNavigation=function(s,o){var r,a,l,c,d=n.props,p=d.date,g=d.yearItemNumber;if(!(p===void 0||g===void 0)){var m=_l(p,g).startPeriod;n.isDisabled(o)||n.isExcluded(o)||((a=(r=n.props).setPreSelection)===null||a===void 0||a.call(r,o),s-m<0?n.updateFocusOnPaginate(g-(m-s)):s-m>=g?n.updateFocusOnPaginate(Math.abs(g-(s-m))):(c=(l=n.YEAR_REFS[s-m])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())}},n.isSameDay=function(s,o){return Rt(s,o)},n.isCurrentYear=function(s){return s===bt(qt())},n.isRangeStart=function(s){return n.props.startDate&&n.props.endDate&&Ma(wa(qt(),s),n.props.startDate)},n.isRangeEnd=function(s){return n.props.startDate&&n.props.endDate&&Ma(wa(qt(),s),n.props.endDate)},n.isInRange=function(s){return zw(s,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(s){var o=n.props,r=o.selectsStart,a=o.selectsEnd,l=o.selectsRange,c=o.startDate,d=o.endDate;return!(r||a||l)||!n.selectingDate()?!1:r&&d?zw(s,n.selectingDate(),d):a&&c||l&&c&&!d?zw(s,c,n.selectingDate()):!1},n.isSelectingRangeStart=function(s){var o;if(!n.isInSelectingRange(s))return!1;var r=n.props,a=r.startDate,l=r.selectsStart,c=wa(qt(),s);return l?Ma(c,(o=n.selectingDate())!==null&&o!==void 0?o:null):Ma(c,a??null)},n.isSelectingRangeEnd=function(s){var o;if(!n.isInSelectingRange(s))return!1;var r=n.props,a=r.endDate,l=r.selectsEnd,c=r.selectsRange,d=wa(qt(),s);return l||c?Ma(d,(o=n.selectingDate())!==null&&o!==void 0?o:null):Ma(d,a??null)},n.isKeyboardSelected=function(s){if(!(n.props.disabledKeyboardNavigation||n.props.date===void 0||n.props.preSelection==null)){var o=n.props,r=o.minDate,a=o.maxDate,l=o.excludeDates,c=o.includeDates,d=o.filterDate,p=o.selected,g=Sy(wa(n.props.date,s)),m=(r||a||l||c||d)&&kS(s,n.props),y=!!p&&Rt(g,Sy(p)),b=Rt(g,Sy(n.props.preSelection));return!n.props.inline&&!y&&b&&!m}},n.isSelectedYear=function(s){var o=n.props,r=o.selectsMultiple,a=o.selected,l=o.selectedDates;return r?l?.some(function(c){return s===bt(c)}):!!a&&s===bt(a)},n.onYearClick=function(s,o){var r=n.props.date;r!==void 0&&n.handleYearClick(Sy(wa(r,o)),s)},n.onYearKeyDown=function(s,o){var r,a,l=s.key,c=n.props,d=c.date,p=c.yearItemNumber,g=c.handleOnKeyDown;if(l!==Oe.Tab&&s.preventDefault(),!n.props.disabledKeyboardNavigation)switch(l){case Oe.Enter:if(n.props.selected==null)break;n.onYearClick(s,o),(a=(r=n.props).setPreSelection)===null||a===void 0||a.call(r,n.props.selected);break;case Oe.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(o+1,jl(n.props.preSelection,1));break;case Oe.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(o-1,Xg(n.props.preSelection,1));break;case Oe.ArrowUp:{if(d===void 0||p===void 0||n.props.preSelection==null)break;var m=_l(d,p).startPeriod,y=jG,b=o-y;if(b<m){var C=p%y;o>=m&&o<m+C?y=C:y+=C,b=o-y}n.handleYearNavigation(b,Xg(n.props.preSelection,y));break}case Oe.ArrowDown:{if(d===void 0||p===void 0||n.props.preSelection==null)break;var w=_l(d,p).endPeriod,y=jG,b=o+y;if(b>w){var C=p%y;o<=w&&o>w-C?y=C:y+=C,b=o+y}n.handleYearNavigation(b,jl(n.props.preSelection,y));break}}g&&g(s)},n.getYearClassNames=function(s){var o=n.props,r=o.date,a=o.disabled,l=o.minDate,c=o.maxDate,d=o.excludeDates,p=o.includeDates,g=o.filterDate,m=o.yearClassName;return Mi("react-datepicker__year-text","react-datepicker__year-".concat(s),r?m?.(wa(r,s)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(s),"react-datepicker__year-text--disabled":(l||c||d||p||g||a)&&kS(s,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(s),"react-datepicker__year-text--range-start":n.isRangeStart(s),"react-datepicker__year-text--range-end":n.isRangeEnd(s),"react-datepicker__year-text--in-range":n.isInRange(s),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(s),"react-datepicker__year-text--today":n.isCurrentYear(s)})},n.getYearTabIndex=function(s){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var o=bt(n.props.preSelection),r=kS(s,n.props);return s===o&&!r?"0":"-1"},n.getYearContent=function(s){return n.props.renderYearContent?n.props.renderYearContent(s):s},n}return t.prototype.render=function(){var i=this,n=[],s=this.props,o=s.date,r=s.yearItemNumber,a=s.onYearMouseEnter,l=s.onYearMouseLeave;if(o===void 0)return null;for(var c=_l(o,r),d=c.startPeriod,p=c.endPeriod,g=function(b){n.push(Y.createElement("div",{ref:m.YEAR_REFS[b-d],onClick:function(C){i.onYearClick(C,b)},onKeyDown:function(C){m4(C)&&(C.preventDefault(),C.key=Oe.Enter),i.onYearKeyDown(C,b)},tabIndex:Number(m.getYearTabIndex(b)),className:m.getYearClassNames(b),onMouseEnter:m.props.usePointerEvent?void 0:function(C){return a(C,b)},onPointerEnter:m.props.usePointerEvent?function(C){return a(C,b)}:void 0,onMouseLeave:m.props.usePointerEvent?void 0:function(C){return l(C,b)},onPointerLeave:m.props.usePointerEvent?function(C){return l(C,b)}:void 0,key:b,"aria-current":m.isCurrentYear(b)?"date":void 0},m.getYearContent(b)))},m=this,y=d;y<=p;y++)g(y);return Y.createElement("div",{className:"react-datepicker__year"},Y.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},t})(R.Component);function Wne(e,t,i,n){for(var s=[],o=0;o<2*t+1;o++){var r=e+t-o,a=!0;i&&(a=bt(i)<=r),n&&a&&(a=bt(n)>=r),a&&s.push(r)}return s}var Une=(function(e){fs(t,e);function t(i){var n=e.call(this,i)||this;n.yearOptionButtonsRef={},n.handleOptionKeyDown=function(a,l){var c;switch(l.key){case"Enter":l.preventDefault(),n.onChange(a);break;case"Escape":l.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{l.preventDefault();var d=a+(l.key==="ArrowUp"?1:-1);n.yearOptionButtonsRef[d]&&((c=n.yearOptionButtonsRef[d])===null||c===void 0||c.focus());break}}},n.renderOptions=function(){n.yearOptionButtonsRef={};var a=n.props.year,l=n.state.yearsList.map(function(p){return Y.createElement("div",{ref:function(g){n.yearOptionButtonsRef[p]=g,p===a&&g?.focus()},role:"button",tabIndex:0,className:a===p?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:p,onClick:n.onChange.bind(n,p),onKeyDown:n.handleOptionKeyDown.bind(n,p),"aria-selected":a===p?"true":void 0},a===p?Y.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",p)}),c=n.props.minDate?bt(n.props.minDate):null,d=n.props.maxDate?bt(n.props.maxDate):null;return(!d||!n.state.yearsList.find(function(p){return p===d}))&&l.unshift(Y.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},Y.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!c||!n.state.yearsList.find(function(p){return p===c}))&&l.push(Y.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},Y.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),l},n.onChange=function(a){n.props.onChange(a)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(a){var l=n.state.yearsList.map(function(c){return c+a});n.setState({yearsList:l})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var s=i.yearDropdownItemNumber,o=i.scrollableYearDropdown,r=s||(o?10:5);return n.state={yearsList:Wne(n.props.year,r,n.props.minDate,n.props.maxDate)},n.dropdownRef=R.createRef(),n}return t.prototype.componentDidMount=function(){var i=this.dropdownRef.current;if(i){var n=i.children?Array.from(i.children):null,s=n?n.find(function(o){return o.ariaSelected}):null;i.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-i.clientHeight)/2:(i.scrollHeight-i.clientHeight)/2}},t.prototype.render=function(){var i=Mi({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Y.createElement(tM,{className:i,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t})(R.Component),$ne=(function(e){fs(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={dropdownVisible:!1},i.renderSelectOptions=function(){for(var n=i.props.minDate?bt(i.props.minDate):1900,s=i.props.maxDate?bt(i.props.maxDate):2100,o=[],r=n;r<=s;r++)o.push(Y.createElement("option",{key:r,value:r},r));return o},i.onSelectChange=function(n){i.onChange(parseInt(n.target.value))},i.renderSelectMode=function(){return Y.createElement("select",{value:i.props.year,className:"react-datepicker__year-select",onChange:i.onSelectChange},i.renderSelectOptions())},i.renderReadView=function(n){return Y.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:i.toggleDropdown},Y.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Y.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},i.props.year))},i.renderDropdown=function(){return Y.createElement(Une,Et({key:"dropdown"},i.props,{onChange:i.onChange,onCancel:i.toggleDropdown}))},i.renderScrollMode=function(){var n=i.state.dropdownVisible,s=[i.renderReadView(!n)];return n&&s.unshift(i.renderDropdown()),s},i.onChange=function(n){i.toggleDropdown(),n!==i.props.year&&i.props.onChange(n)},i.toggleDropdown=function(n){i.setState({dropdownVisible:!i.state.dropdownVisible},function(){i.props.adjustDateOnChange&&i.handleYearChange(i.props.date,n)})},i.handleYearChange=function(n,s){var o;(o=i.onSelect)===null||o===void 0||o.call(i,n,s),i.setOpen()},i.onSelect=function(n,s){var o,r;(r=(o=i.props).onSelect)===null||r===void 0||r.call(o,n,s)},i.setOpen=function(){var n,s;(s=(n=i.props).setOpen)===null||s===void 0||s.call(n,!0)},i}return t.prototype.render=function(){var i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode();break;case"select":i=this.renderSelectMode();break}return Y.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},i)},t})(R.Component),Yne=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],y4="react-datepicker-ignore-onclickoutside",Kne=function(e){var t=(e.className||"").split(/\s+/);return Yne.some(function(i){return t.indexOf(i)>=0})},qne=(function(e){fs(t,e);function t(i){var n=e.call(this,i)||this;return n.monthContainer=void 0,n.handleClickOutside=function(s){n.props.onClickOutside(s)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(s){var o,r;Kne(s.target)&&((r=(o=n.props).onDropdownFocus)===null||r===void 0||r.call(o,s))},n.getDateInView=function(){var s=n.props,o=s.preSelection,r=s.selected,a=s.openToDate,l=g4(n.props),c=f4(n.props),d=qt(),p=a||r||o;return p||(l&&La(d,l)?l:c&&Ru(d,c)?c:d)},n.increaseMonth=function(){n.setState(function(s){var o=s.date;return{date:qr(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(s){var o=s.date;return{date:Qd(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(s,o,r){n.props.onSelect(s,o,r),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleDayMouseEnter=function(s){n.setState({selectingDate:s}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(s,o){n.setState({selectingDate:wa(qt(),o)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(s,o)},n.handleYearMouseLeave=function(s,o){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(s,o)},n.handleYearChange=function(s){var o,r,a,l;(r=(o=n.props).onYearChange)===null||r===void 0||r.call(o,s),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(s),(l=(a=n.props).setOpen)===null||l===void 0||l.call(a,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.getEnabledPreSelectionDateForMonth=function(s){if(!mr(s,n.props))return s;for(var o=Yl(s),r=mne(s),a=RJ(r,o),l=null,c=0;c<=a;c++){var d=Ur(o,c);if(!mr(d,n.props)){l=d;break}}return l},n.handleMonthChange=function(s){var o,r,a,l=(o=n.getEnabledPreSelectionDateForMonth(s))!==null&&o!==void 0?o:s;n.handleCustomMonthChange(l),n.props.adjustDateOnChange&&(n.props.onSelect(l),(a=(r=n.props).setOpen)===null||a===void 0||a.call(r,!0)),n.props.setPreSelection&&n.props.setPreSelection(l)},n.handleCustomMonthChange=function(s){var o,r;(r=(o=n.props).onMonthChange)===null||r===void 0||r.call(o,s),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(s){n.handleYearChange(s),n.handleMonthChange(s)},n.changeYear=function(s){n.setState(function(o){var r=o.date;return{date:wa(r,Number(s))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(s){n.setState(function(o){var r=o.date;return{date:No(r,Number(s))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(s){n.setState(function(o){var r=o.date;return{date:wa(No(r,Ts(s)),bt(s))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(s){s===void 0&&(s=n.state.date);var o=n.props.disabled,r=wu(s,n.props.locale,n.props.calendarStartDay),a=[];return n.props.showWeekNumbers&&a.push(Y.createElement("div",{key:"W",className:"react-datepicker__day-name ".concat(o?"react-datepicker__day-name--disabled":""),role:"columnheader"},Y.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),Y.createElement("span",{"aria-hidden":"true"},n.props.weekLabel||"#"))),a.concat([0,1,2,3,4,5,6].map(function(l){var c=Ur(r,l),d=n.formatWeekday(c,n.props.locale),p=n.props.weekDayClassName?n.props.weekDayClassName(c):void 0;return Y.createElement("div",{key:l,role:"columnheader",className:Mi("react-datepicker__day-name",p,o?"react-datepicker__day-name--disabled":"")},Y.createElement("span",{className:"react-datepicker__sr-only"},Di(c,"EEEE",n.props.locale)),Y.createElement("span",{"aria-hidden":"true"},d))}))},n.formatWeekday=function(s,o){return n.props.formatWeekDay?yne(s,n.props.formatWeekDay,o):n.props.useWeekdaysShort?bne(s,o):vne(s,o)},n.decreaseYear=function(){n.setState(function(s){var o,r=s.date;return{date:Xg(r,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var s,o,r;if(!n.props.renderCustomHeader){var a=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,l=n.props.showPreviousMonths?a-1:0,c=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:l,d=Qd(n.state.date,c),p;switch(!0){case n.props.disabled:p=!0;break;case n.props.showMonthYearPicker:p=OG(n.state.date,n.props);break;case n.props.showYearPicker:p=Mne(n.state.date,n.props);break;case n.props.showQuarterYearPicker:p=Sne(n.state.date,n.props);break;default:p=NG(d,n.props);break}if(!(!((r=n.props.forceShowMonthNavigation)!==null&&r!==void 0?r:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&p||n.props.showTimeSelectOnly)){var g=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],m=["react-datepicker__navigation","react-datepicker__navigation--previous"],y=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(y=n.decreaseYear),p&&n.props.showDisabledMonthNavigation&&(m.push("react-datepicker__navigation--previous--disabled"),y=void 0);var b=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,C=n.props,w=C.previousMonthButtonLabel,x=w===void 0?t.defaultProps.previousMonthButtonLabel:w,M=C.previousYearButtonLabel,E=M===void 0?t.defaultProps.previousYearButtonLabel:M,I=n.props,N=I.previousMonthAriaLabel,T=N===void 0?typeof x=="string"?x:"Previous Month":N,P=I.previousYearAriaLabel,O=P===void 0?typeof E=="string"?E:"Previous Year":P;return Y.createElement("button",{type:"button",className:m.join(" "),onClick:y,onKeyDown:n.props.handleOnKeyDown,"aria-label":b?O:T},Y.createElement("span",{className:g.join(" ")},b?E:x))}}},n.increaseYear=function(){n.setState(function(s){var o,r=s.date;return{date:jl(r,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var s;if(!n.props.renderCustomHeader){var o;switch(!0){case n.props.disabled:o=!0;break;case n.props.showMonthYearPicker:o=BG(n.state.date,n.props);break;case n.props.showYearPicker:o=Dne(n.state.date,n.props);break;case n.props.showQuarterYearPicker:o=xne(n.state.date,n.props);break;default:o=FG(n.state.date,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&o||n.props.showTimeSelectOnly)){var r=["react-datepicker__navigation","react-datepicker__navigation--next"],a=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&r.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&r.push("react-datepicker__navigation--next--with-today-button");var l=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(l=n.increaseYear),o&&n.props.showDisabledMonthNavigation&&(r.push("react-datepicker__navigation--next--disabled"),l=void 0);var c=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,d=n.props,p=d.nextMonthButtonLabel,g=p===void 0?t.defaultProps.nextMonthButtonLabel:p,m=d.nextYearButtonLabel,y=m===void 0?t.defaultProps.nextYearButtonLabel:m,b=n.props,C=b.nextMonthAriaLabel,w=C===void 0?typeof g=="string"?g:"Next Month":C,x=b.nextYearAriaLabel,M=x===void 0?typeof y=="string"?y:"Next Year":x;return Y.createElement("button",{type:"button",className:r.join(" "),onClick:l,onKeyDown:n.props.handleOnKeyDown,"aria-label":c?M:w},Y.createElement("span",{className:a.join(" ")},c?y:g))}}},n.renderCurrentMonth=function(s){s===void 0&&(s=n.state.date);var o=["react-datepicker__current-month"];return n.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),Y.createElement("h2",{className:o.join(" ")},Di(s,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showYearDropdown||s))return Y.createElement($ne,Et({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:bt(n.state.date)}))},n.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthDropdown||s))return Y.createElement(Gne,Et({},t.defaultProps,n.props,{month:Ts(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthYearDropdown||s))return Y.createElement(zne,Et({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(s){n.props.onSelect(TG(),s),n.props.setPreSelection&&n.props.setPreSelection(TG())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return Y.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDayNamesHeader=function(s){return Y.createElement("div",{className:"react-datepicker__day-names",role:"row"},n.header(s))},n.renderDefaultHeader=function(s){var o=s.monthDate,r=s.i;return Y.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(o),Y.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(r!==0),n.renderMonthYearDropdown(r!==0),n.renderYearDropdown(r!==0)))},n.renderCustomHeader=function(s){var o,r,a=s.monthDate,l=s.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var c=n.props,d=c.showYearPicker,p=c.yearItemNumber,g;if(d){var m=_l(a,p),y=m.startPeriod,b=m.endPeriod;g={startYear:y,endYear:b}}var C=NG(n.state.date,n.props),w=FG(n.state.date,n.props),x=OG(n.state.date,n.props),M=BG(n.state.date,n.props);return Y.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(r=(o=n.props).renderCustomHeader)===null||r===void 0?void 0:r.call(o,Et(Et(Et({},n.state),d&&{visibleYearsRange:g}),{customHeaderCount:l,monthDate:a,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:C,nextMonthButtonDisabled:w,prevYearButtonDisabled:x,nextYearButtonDisabled:M})))},n.renderYearHeader=function(s){var o=s.monthDate,r=n.props,a=r.showYearPicker,l=r.yearItemNumber,c=l===void 0?t.defaultProps.yearItemNumber:l,d=_l(o,c),p=d.startPeriod,g=d.endPeriod;return Y.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},a?"".concat(p," - ").concat(g):bt(o))},n.renderHeader=function(s){var o=s.monthDate,r=s.i,a=r===void 0?0:r,l={monthDate:o,i:a};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(l);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(l);default:return n.renderDefaultHeader(l)}},n.renderMonths=function(){var s,o;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var r=[],a=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,l=n.props.showPreviousMonths?a-1:0,c=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?jl(n.state.date,l):Qd(n.state.date,l),d=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:l,p=0;p<a;++p){var g=p-d+l,m=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?jl(c,g):qr(c,g),y="month-".concat(p),b=p<a-1,C=p>0;r.push(Y.createElement("div",{key:y,ref:function(w){n.monthContainer=w??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:m,i:p}),Y.createElement(One,Et({},t.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:m,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:p,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:b,monthShowsDuplicateDaysStart:C,dayNamesHeader:n.renderDayNamesHeader(m)}))))}return r}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return Y.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),Y.createElement(jne,Et({},t.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return Y.createElement(Hne,Et({},t.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var s=n.props.selected?new Date(n.props.selected):void 0,o=s&&iM(s)&&!!n.props.selected,r=o?"".concat(_G(s.getHours()),":").concat(_G(s.getMinutes())):"";if(n.props.showTimeInput)return Y.createElement(kne,Et({},t.defaultProps,n.props,{date:s,timeString:r,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var s,o=_l(n.state.date,(s=n.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),r=o.startPeriod,a=o.endPeriod,l;return n.props.showYearPicker?l="".concat(r," - ").concat(a):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?l=bt(n.state.date):l="".concat(m1(Ts(n.state.date),n.props.locale)," ").concat(bt(n.state.date)),Y.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&l)},n.renderChildren=function(){if(n.props.children)return Y.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=R.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:y4,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:lb}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var i=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){i.setState({monthContainer:i.monthContainer})})())},t.prototype.componentDidUpdate=function(i){var n=this;if(this.props.preSelection&&(!Rt(this.props.preSelection,i.preSelection)||this.props.monthSelectedIn!==i.monthSelectedIn)){var s=!Hs(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!Rt(this.props.openToDate,i.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var i=this.props.container||cne;return Y.createElement(tM,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},Y.createElement("div",{style:{display:"contents"},ref:this.containerRef},Y.createElement(i,{className:Mi("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t})(R.Component),Zne=function(e){var t=e.icon,i=e.className,n=i===void 0?"":i,s=e.onClick,o="react-datepicker__calendar-icon";if(typeof t=="string")return Y.createElement("i",{className:"".concat(o," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:s});if(Y.isValidElement(t)){var r=t;return Y.cloneElement(r,{className:"".concat(r.props.className||""," ").concat(o," ").concat(n),onClick:function(a){typeof r.props.onClick=="function"&&r.props.onClick(a),typeof s=="function"&&s(a)}})}return Y.createElement("svg",{className:"".concat(o," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},Y.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},v4=(function(e){fs(t,e);function t(i){var n=e.call(this,i)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return JH.createPortal(this.props.children,this.el)},t})(R.Component),Xne="[tabindex], a, button, input, select, textarea",Qne=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},b4=(function(e){fs(t,e);function t(i){var n=e.call(this,i)||this;return n.getTabChildren=function(){var s;return Array.prototype.slice.call((s=n.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(Xne),1,-1).filter(Qne)},n.handleFocusStart=function(){var s=n.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},n.handleFocusEnd=function(){var s=n.getTabChildren();s&&s.length>1&&s[0].focus()},n.tabLoopRef=R.createRef(),n}return t.prototype.render=function(){var i;return((i=this.props.enableTabLoop)!==null&&i!==void 0?i:t.defaultProps.enableTabLoop)?Y.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Y.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,Y.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t})(R.Component);function Jne(e){function t(i){var n,s=typeof i.hidePopper=="boolean"?i.hidePopper:!0,o=R.useRef(null),r=lne(Et({open:!s,whileElementsMounted:Vie,placement:i.popperPlacement,middleware:Pa([qie({padding:15}),Kie(10),Zie({element:o})],(n=i.popperModifiers)!==null&&n!==void 0?n:[],!0)},i.popperProps)),a=Et(Et({},i),{hidePopper:s,popperProps:Et(Et({},r),{arrowRef:o})});return Y.createElement(e,Et({},a))}return t.displayName="withFloating(".concat(e.displayName||e.name||"Component",")"),t}var ese=function(e){var t=e.className,i=e.wrapperClassName,n=e.hidePopper,s=n===void 0?!0:n,o=e.popperComponent,r=e.targetComponent,a=e.enableTabLoop,l=e.popperOnKeyDown,c=e.portalId,d=e.portalHost,p=e.popperProps,g=e.showArrow,m=void 0;if(!s){var y=Mi("react-datepicker-popper",t);m=Y.createElement(b4,{enableTabLoop:a},Y.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:y,"data-placement":p.placement,onKeyDown:l},o,g&&Y.createElement(tne,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}e.popperContainer&&(m=R.createElement(e.popperContainer,{},m)),c&&!s&&(m=Y.createElement(v4,{portalId:c,portalHost:d},m));var b=Mi("react-datepicker-wrapper",i);return Y.createElement(Y.Fragment,null,Y.createElement("div",{ref:p.refs.setReference,className:b},r),m)},tse=Jne(ese);function ise(e,t){return e&&t?Ts(e)!==Ts(t)||bt(e)!==bt(t):e!==t}var CE="Date input not valid.",C4=(function(e){fs(t,e);function t(i){var n=e.call(this,i)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:qt()},n.modifyHolidays=function(){var s;return(s=n.props.holidays)===null||s===void 0?void 0:s.reduce(function(o,r){var a=new Date(r.date);return iM(a)?Pa(Pa([],o,!0),[Et(Et({},r),{date:a})],!1):o},[])},n.calcInitialState=function(){var s,o=n.getPreSelection(),r=g4(n.props),a=f4(n.props),l=r&&La(o,IS(r))?r:a&&Ru(o,IG(a))?a:o;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&s!==void 0?s:l,highlightDates:GG(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.getInputValue=function(){var s,o=n.props,r=o.locale,a=o.startDate,l=o.endDate,c=o.rangeSeparator,d=o.selected,p=o.selectedDates,g=o.selectsMultiple,m=o.selectsRange,y=o.value,b=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,C=n.state.inputValue;return typeof y=="string"?y:typeof C=="string"?C:m?dne(a,l,{dateFormat:b,locale:r,rangeSeparator:c}):g?hne(p??[],{dateFormat:b,locale:r}):Po(d,{dateFormat:b,locale:r})},n.resetHiddenStatus=function(){n.setState(Et(Et({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(Et(Et({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.focus)===null||o===void 0||o.call(s,{preventScroll:!0})},n.setBlur=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.blur)===null||o===void 0||o.call(s),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(s,o){o===void 0&&(o=!1),n.setState({open:s,preSelection:s&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:wE},function(){s||n.setState(function(r){return{focused:o?r.focused:!1}},function(){!o&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Wl(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(s){var o,r,a=n.state.wasHidden,l=a?n.state.open:!0;a&&n.resetHiddenStatus(),n.state.preventFocus||((r=(o=n.props).onFocus)===null||r===void 0||r.call(o,s),l&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.resetInputValue=function(){n.setState(Et(Et({},n.state),{inputValue:null}))},n.handleBlur=function(s){var o,r;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((r=(o=n.props).onBlur)===null||r===void 0||r.call(o,s)),n.resetInputValue(),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(s){var o,r;n.props.inline||n.setOpen(!1),(r=(o=n.props).onClickOutside)===null||r===void 0||r.call(o,s),n.props.withPortal&&s.preventDefault()},n.handleChange=function(){for(var s,o,r,a,l,c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var p=c[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,c),!p||typeof p.isDefaultPrevented!="function"||p.isDefaultPrevented()))){n.setState({inputValue:p?.target instanceof HTMLInputElement?p.target.value:null,lastPreSelectChange:nse});var g=n.props,m=g.selectsRange,y=g.startDate,b=g.endDate,C=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,w=(o=n.props.strictParsing)!==null&&o!==void 0?o:t.defaultProps.strictParsing,x=p?.target instanceof HTMLInputElement?p.target.value:"";if(m){var M=n.props.rangeSeparator,E=M.trim(),I=x.split(C.includes(E)?M:E,2).map(function(j){return j.trim()}),N=I[0],T=I[1],P=mE(N??"",C,n.props.locale,w),O=P?mE(T??"",C,n.props.locale,w):null,G=y?.getTime()!==P?.getTime(),B=b?.getTime()!==O?.getTime();if(!G&&!B||P&&mr(P,n.props)||O&&mr(O,n.props))return;(a=(r=n.props).onChange)===null||a===void 0||a.call(r,[P,O],p)}else{var z=mE(x,C,n.props.locale,w,(l=n.props.selected)!==null&&l!==void 0?l:void 0);(z||!x)&&n.setSelected(z,p,!0)}}},n.handleSelect=function(s,o,r){var a;if(!n.props.readOnly){var l=n.props,c=l.selectsRange,d=l.startDate,p=l.endDate,g=l.locale,m=l.swapRange,y=(a=n.props.dateFormat)!==null&&a!==void 0?a:t.defaultProps.dateFormat,b=!c||d&&!p&&(m||!vE(s,d));if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&b&&n.sendFocusBackToInput(),n.props.onChangeRaw){var C=Po(s,{dateFormat:y,locale:g});n.props.onChangeRaw(o,{date:s,formattedDate:C})}n.setSelected(s,o,!1,r),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect?n.setPreSelection(s):b&&n.setOpen(!1)}},n.setSelected=function(s,o,r,a){var l,c,d=s;if(n.props.showYearPicker){if(d!==null&&kS(bt(d),n.props))return}else if(n.props.showMonthYearPicker){if(d!==null&&p4(d,n.props))return}else if(d!==null&&mr(d,n.props))return;var p=n.props,g=p.onChange,m=p.selectsRange,y=p.startDate,b=p.endDate,C=p.selectsMultiple,w=p.selectedDates,x=p.minTime,M=p.swapRange;if(!Hd(n.props.selected,d)||n.props.allowSameDay||m||C)if(d!==null&&(n.props.selected&&(!r||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(d=yE(d,{hour:Ul(n.props.selected),minute:$l(n.props.selected),second:Cu(n.props.selected)})),!r&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&x&&(d=yE(d,{hour:x.getHours(),minute:x.getMinutes(),second:x.getSeconds()})),n.props.inline||n.setState({preSelection:d}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:a})),m){var E=!y&&!b,I=y&&!b,N=!y&&!!b,T=y&&b;E?g?.([d,null],o):I?d===null?g?.([null,null],o):vE(d,y)?g?.(M?[d,y]:[d,null],o):g?.([y,d],o):N&&(d&&vE(d,b)?g?.([d,b],o):g?.([d,null],o)),T&&g?.([d,null],o)}else if(C){if(d!==null)if(!w?.length)g?.([d],o);else{var P=w.some(function(G){return Rt(G,d)});if(P){var O=w.filter(function(G){return!Rt(G,d)});g?.(O,o)}else g?.(Pa(Pa([],w,!0),[d],!1),o)}}else g?.(d,o);r||((c=(l=n.props).onSelect)===null||c===void 0||c.call(l,d,o),n.setState({inputValue:null}))},n.setPreSelection=function(s){if(!n.props.readOnly){var o=Wl(n.props.minDate),r=Wl(n.props.maxDate),a=!0;if(s){var l=IS(s);if(o&&r)a=Pd(s,n.props.minDate,n.props.maxDate);else if(o){var c=IS(n.props.minDate);a=Ru(s,c)||Hd(l,c)}else if(r){var d=IG(n.props.maxDate);a=La(s,d)||Hd(l,d)}}a&&n.setState({preSelection:s})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(s){var o,r;if(!(n.props.selectsRange||n.props.selectsMultiple)){var a=n.props.selected?n.props.selected:n.getPreSelection(),l=n.props.selected?s:yE(a,{hour:Ul(s),minute:$l(s)});n.setState({preSelection:l}),(r=(o=n.props).onChange)===null||r===void 0||r.call(o,l),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var s,o;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(o=(s=n.props).onInputClick)===null||o===void 0||o.call(s)},n.onInputKeyDown=function(s){var o,r,a,l,c,d;(r=(o=n.props).onKeyDown)===null||r===void 0||r.call(o,s);var p=s.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(p===Oe.ArrowDown||p===Oe.ArrowUp||p===Oe.Enter)&&((a=n.onInputClick)===null||a===void 0||a.call(n));return}if(n.state.open){if(p===Oe.ArrowDown||p===Oe.ArrowUp){s.preventDefault();var g=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',m=((l=n.calendar)===null||l===void 0?void 0:l.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(g);m instanceof HTMLElement&&m.focus({preventScroll:!0});return}var y=qt(n.state.preSelection);p===Oe.Enter?(s.preventDefault(),s.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===wE?(n.handleSelect(y,s),!n.props.shouldCloseOnSelect&&n.setPreSelection(y)):n.setOpen(!1)):p===Oe.Escape?(s.preventDefault(),s.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):p===Oe.Tab&&n.setOpen(!1),n.inputOk()||(d=(c=n.props).onInputError)===null||d===void 0||d.call(c,{code:1,msg:CE})}},n.onPortalKeyDown=function(s){var o=s.key;o===Oe.Escape&&(s.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(s){var o,r,a,l,c,d,p=n.props,g=p.minDate,m=p.maxDate,y=p.disabledKeyboardNavigation,b=p.showWeekPicker,C=p.shouldCloseOnSelect,w=p.locale,x=p.calendarStartDay,M=p.adjustDateOnChange,E=p.inline;if((r=(o=n.props).onKeyDown)===null||r===void 0||r.call(o,s),!y){var I=s.key,N=s.shiftKey,T=qt(n.state.preSelection),P=function(q,H){var K=H;switch(q){case Oe.ArrowRight:K=b?Sx(H,1):Ur(H,1);break;case Oe.ArrowLeft:K=b?mG(H):Rte(H);break;case Oe.ArrowUp:K=mG(H);break;case Oe.ArrowDown:K=Sx(H,1);break;case Oe.PageUp:K=N?Xg(H,1):Qd(H,1);break;case Oe.PageDown:K=N?jl(H,1):qr(H,1);break;case Oe.Home:K=wu(H,w,x);break;case Oe.End:K=fne(H);break}return K},O=function(q,H){for(var K=40,U=q,de=!1,te=0,V=P(q,H);!de;){if(te>=K){V=H;break}g&&V<g&&(U=Oe.ArrowRight,V=mr(g,n.props)?P(U,V):g),m&&V>m&&(U=Oe.ArrowLeft,V=mr(m,n.props)?P(U,V):m),mr(V,n.props)?((U===Oe.PageUp||U===Oe.Home)&&(U=Oe.ArrowRight),(U===Oe.PageDown||U===Oe.End)&&(U=Oe.ArrowLeft),V=P(U,V)):de=!0,te++}return V};if(I===Oe.Enter){s.preventDefault(),n.handleSelect(T,s),!C&&n.setPreSelection(T);return}else if(I===Oe.Escape){s.preventDefault(),n.setOpen(!1),n.inputOk()||(l=(a=n.props).onInputError)===null||l===void 0||l.call(a,{code:1,msg:CE});return}var G=null;switch(I){case Oe.ArrowLeft:case Oe.ArrowRight:case Oe.ArrowUp:case Oe.ArrowDown:case Oe.PageUp:case Oe.PageDown:case Oe.Home:case Oe.End:G=O(I,T);break}if(!G){(d=(c=n.props).onInputError)===null||d===void 0||d.call(c,{code:1,msg:CE});return}if(s.preventDefault(),n.setState({lastPreSelectChange:wE}),M&&n.setSelected(G),n.setPreSelection(G),E){var B=Ts(T),z=Ts(G),j=bt(T),X=bt(G);B!==z||j!==X?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(s){var o=s.key;o===Oe.Escape&&(s.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),n.sendFocusBackToInput();var o=n.props,r=o.selectsRange,a=o.onChange;a?.(r?[null,null]:null,s),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(s){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(s)&&n.setOpen(!1)},n.renderCalendar=function(){var s,o;return!n.props.inline&&!n.isCalendarOpen()?null:Y.createElement(qne,Et({showMonthYearDropdown:void 0,ref:function(r){n.calendar=r}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(s=n.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:Rne(n.modifyHolidays()),outsideClickIgnoreClass:n.props.outsideClickIgnoreClass,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(o=n.props.dropdownMode)!==null&&o!==void 0?o:t.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var s,o=n.props.locale,r=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,a=n.props.showTimeInput||n.props.showTimeSelect,l=a?"PPPPp":"PPPP",c;return n.props.selectsRange?c="Selected start date: ".concat(Po(n.props.startDate,{dateFormat:l,locale:o}),". ").concat(n.props.endDate?"End date: "+Po(n.props.endDate,{dateFormat:l,locale:o}):""):n.props.showTimeSelectOnly?c="Selected time: ".concat(Po(n.props.selected,{dateFormat:r,locale:o})):n.props.showYearPicker?c="Selected year: ".concat(Po(n.props.selected,{dateFormat:"yyyy",locale:o})):n.props.showMonthYearPicker?c="Selected month: ".concat(Po(n.props.selected,{dateFormat:"MMMM yyyy",locale:o})):n.props.showQuarterYearPicker?c="Selected quarter: ".concat(Po(n.props.selected,{dateFormat:"yyyy, QQQ",locale:o})):c="Selected date: ".concat(Po(n.props.selected,{dateFormat:l,locale:o})),Y.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},c)},n.renderDateInput=function(){var s,o,r=Mi(n.props.className,(s={},s[n.props.outsideClickIgnoreClass||t.defaultProps.outsideClickIgnoreClass]=n.state.open,s)),a=n.props.customInput||Y.createElement("input",{type:"text"}),l=n.props.customInputRef||"ref";return R.cloneElement(a,(o={},o[l]=function(c){n.input=c},o.value=n.getInputValue(),o.onBlur=n.handleBlur,o.onChange=n.handleChange,o.onClick=n.onInputClick,o.onFocus=n.handleFocus,o.onKeyDown=n.onInputKeyDown,o.id=n.props.id,o.name=n.props.name,o.form=n.props.form,o.autoFocus=n.props.autoFocus,o.placeholder=n.props.placeholderText,o.disabled=n.props.disabled,o.autoComplete=n.props.autoComplete,o.className=Mi(a.props.className,r),o.title=n.props.title,o.readOnly=n.props.readOnly,o.required=n.props.required,o.tabIndex=n.props.tabIndex,o["aria-describedby"]=n.props.ariaDescribedBy,o["aria-invalid"]=n.props.ariaInvalid,o["aria-labelledby"]=n.props.ariaLabelledBy,o["aria-required"]=n.props.ariaRequired,o))},n.renderClearButton=function(){var s=n.props,o=s.isClearable,r=s.disabled,a=s.selected,l=s.startDate,c=s.endDate,d=s.clearButtonTitle,p=s.clearButtonClassName,g=p===void 0?"":p,m=s.ariaLabelClose,y=m===void 0?"Close":m,b=s.selectedDates,C=s.readOnly;return o&&!C&&(a!=null||l!=null||c!=null||b?.length)?Y.createElement("button",{type:"button",className:Mi("react-datepicker__close-icon",g,{"react-datepicker__close-icon--disabled":r}),disabled:r,"aria-label":y,onClick:n.onClearClick,title:d,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:y4,readOnly:!1,rangeSeparator:d4,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:lb,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(i,n){var s,o,r,a;i.inline&&ise(i.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&i.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),i.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:GG(this.props.highlightDates)}),!n.focused&&!Hd(i.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((o=(s=this.props).onCalendarOpen)===null||o===void 0||o.call(s)),n.open===!0&&this.state.open===!1&&((a=(r=this.props).onCalendarClose)===null||a===void 0||a.call(r)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var i=this.props,n=i.showIcon,s=i.icon,o=i.calendarIconClassname,r=i.calendarIconClassName,a=i.toggleCalendarOnIconClick,l=this.state.open;return o&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),Y.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&Y.createElement(Zne,Et({icon:s,className:Mi(r,!r&&o,l&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var i=this.renderCalendar();if(this.props.inline)return i;if(this.props.withPortal){var n=this.state.open?Y.createElement(b4,{enableTabLoop:this.props.enableTabLoop},Y.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},i)):null;return this.state.open&&this.props.portalId&&(n=Y.createElement(v4,Et({portalId:this.props.portalId},this.props),n)),Y.createElement("div",null,this.renderInputContainer(),n)}return Y.createElement(tse,Et({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:i,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t})(R.Component),nse="input",wE="navigate";const bs="http://localhost:4000/api/admin",ub=eb(e=>({isLoading:!1,isLoadingAttendance:!1,addClass:async({name:t,subjectIds:i})=>{e({isLoading:!0});try{const{data:n}=await nt.post(bs+"/add-class",{name:t,subjectIds:i});return n}catch(n){return console.error("Error to add a class: ",n),{success:!1,message:n.response?.data?.message||"Failed to add class"}}finally{e({isLoading:!1})}},getClasses:async()=>{e({isLoading:!0});try{const{data:t}=await nt.get(bs+"/classes");return t}catch(t){return console.error("Error to get all classes: ",t),{success:!1,message:t.response?.data?.message||"Failed to get classes"}}finally{e({isLoading:!1})}},addStudent:async({email:t,password:i,firstName:n,secondName:s,classId:o})=>{e({isLoading:!0});try{const{data:r}=await nt.post(bs+"/add-student",{email:t,password:i,firstName:n,secondName:s,classId:o});return r}catch(r){return console.error("Error to add a student: ",r),{success:!1,message:r.response?.data?.message||"Failed to add student"}}finally{e({isLoading:!1})}},addTeacher:async({email:t,firstName:i,secondName:n,password:s,classes:o,subjectIds:r})=>{e({isLoading:!0});try{const{data:a}=await nt.post(bs+"/add-teacher",{email:t,password:s,firstName:i,secondName:n,classes:o,subjectIds:r});return a}catch(a){return console.error("Error to add a teacher: ",a),{success:!1,message:a.response?.data?.message||"Failed to add teacher"}}finally{e({isLoading:!1})}},getAllClasses:async()=>{e({isLoading:!0});try{const{data:t}=await nt.get(bs+"/classesById");return t}catch(t){return console.error("Error toget all class: ",t),{success:!1,message:t.response?.data?.message||"Failed to get classes"}}finally{e({isLoading:!1})}},getAllTeachers:async()=>{e({isLoading:!0});try{const{data:t}=await nt.get(bs+"/teachers");return t}catch(t){return console.error("Error to get all teachers: ",t),{success:!1,message:t.response?.data?.message||"Failed to get teachers"}}finally{e({isLoading:!1})}},getStudentsByClass:async t=>{e({isLoading:!0});try{const{data:i}=await nt.post(bs+"/getStudentsByClass",{id:t});return i}catch(i){return console.error("Error to get all class: ",i),{success:!1,message:i.response?.data?.message||"Failed to get classes"}}finally{e({isLoading:!1})}},updateStudent:async t=>{e({isLoading:!0});try{const{data:i}=await nt.post(bs+"/updateStudent",t);return i}catch(i){return console.error("Error updating student",i),{success:!1,message:i.response?.data?.message||"Failed to update student"}}finally{e({isLoading:!1})}},deleteStudent:async t=>{e({isLoading:!0});try{const{data:i}=await nt.delete(bs+"/student/"+t);return i}catch(i){return console.error("Error deleting student",i),{success:!1,message:i.response?.data?.message||"Failed to delete student"}}finally{e({isLoading:!1})}},getClassesAndSubjects:async()=>{e({isLoading:!0});try{const{data:t}=await nt.get(bs+"/getClassesAndSubjects");return console.log(t),t}catch(t){return console.error("Error to get all classes and subjects: ",t),{success:!1,message:t.response?.data?.message||"Failed to get classes and subjects"}}finally{e({isLoading:!1})}},deleteTeacher:async t=>{e({isLoading:!0});try{const{data:i}=await nt.delete(bs+"/teacher",{data:{email:t}});return i}catch(i){return console.error("Error deleting teacher",i),{success:!1,message:i.response?.data?.message||"Failed to delete teacher"}}finally{e({isLoading:!1})}},updateTeacher:async t=>{e({isLoading:!0});try{const{data:i}=await nt.post(bs+"/updateTeacher",t);return i}catch(i){return console.error("Error updating teacher",i),{success:!1,message:i.response?.data?.message||"Failed to update teacher"}}finally{e({isLoading:!1})}},deleteClass:async t=>{e({isLoading:!0});try{const{data:i}=await nt.delete(bs+"/class/"+t);return i}catch(i){return console.error("Error deleting class",i),{success:!1,message:i.response?.data?.message||"Failed to delete class"}}finally{e({isLoading:!1})}},updateClass:async t=>{e({isLoading:!0});try{const{data:i}=await nt.post(bs+"/updateClass",t);return i}catch(i){return console.error("Error updating class",i),{success:!1,message:i.response?.data?.message||"Failed to update class"}}finally{e({isLoading:!1})}},getMonthlyAttendance:async t=>{e({isLoadingAttendance:!0});try{const{data:i}=await nt.post(bs+"/getMonthlyAttendance",{year:t});return i}catch(i){return console.error("Error getting monthly attendance",i),{success:!1,message:i.response?.data?.message||"Failed to get monthly attendance"}}finally{e({isLoadingAttendance:!1})}},getCounts:async()=>{e({isLoading:!0});try{const{data:t}=await nt.get(bs+"/counts");return t}catch(t){return console.error("Error getting count",t),{success:!1,message:t.response?.data?.message||"Failed to get count"}}finally{e({isLoading:!1})}}}));var sse=Object.defineProperty,w4=(e,t)=>{for(var i in t)sse(e,i,{get:t[i],enumerable:!0})},fe={};w4(fe,{error:()=>S4,errorOnce:()=>ase,log:()=>ose,logGroup:()=>cse,reset:()=>lse,table:()=>rse,warn:()=>v1,warnOnce:()=>rv});var hI=new Set;function ose(...e){console.log(...e)}function v1(e,...t){console.warn(`AG Charts - ${e}`,...t)}function S4(e,...t){typeof e=="object"?console.error("AG Charts error",e,...t):console.error(`AG Charts - ${e}`,...t)}function rse(...e){console.table(...e)}function x4(e,t,i){let n;e instanceof Error?n=e.message:typeof e=="string"?n=e:typeof e=="object"?n=JSON.stringify(e):n=String(e);const s=`${t}: ${n}`;hI.has(s)||(i(e),hI.add(s))}function rv(e,...t){x4(e,"Logger.warn",i=>v1(i,...t))}function ase(e,...t){x4(e,"Logger.error",i=>S4(i,...t))}function lse(){hI.clear()}function cse(e,t){console.groupCollapsed(e);try{return t()}finally{console.groupEnd()}}var zs={};w4(zs,{detectChartDefinition:()=>gse,getAxisModule:()=>fse,getPresetModule:()=>mse,getSeriesModule:()=>yse,hasModule:()=>hse,listModulesByType:()=>pse,register:()=>M4,registerMany:()=>use,reset:()=>dse});var LS=(e=>(e.Axis="axis",e.Chart="chart",e.Preset="preset",e.Plugin="plugin",e.Series="series",e))(LS||{}),Ga=new Map;function M4(e,t){const{def:i,version:n}=Ga.get(e.name)??{};if(!i){Ga.set(e.name,{def:e,version:t});return}if(!i.enterprise&&e.enterprise&&t===n){Ga.set(e.name,{def:e,version:t});return}if(n===t){v1([`AG Charts - Module '${e.name}' already registered,',
                'ignoring (version: ${n}).`,"Check your code for duplicate loading of charts NPM modules."].join(" "));return}throw new Error([`AG Charts - Module '${e.name}' already registered with different version:`,`${n} vs ${t}`,"","Check your package.json for conflicting dependencies - depending on your package manager","one of these commands may help:","- npm ls ag-charts-community","- yarn why ag-charts-community"].join(`
`))}function use(e,t){for(const i of e)M4(i,t)}function dse(){Ga.clear()}function hse(e){return Ga.has(e)}function*pse(e){for(const t of Ga.values())db(e,t.def)&&(yield t.def)}function gse(e){for(const t of Ga.values())if(db("chart",t.def)&&t.def.detect(e))return t.def;throw new Error("AG Charts - Unknown chart type; Check options are correctly structured and series types are specified")}function fse(e){const t=Ga.get(e);if(db("axis",t?.def))return t?.def}function mse(e){const t=Ga.get(e);if(db("preset",t?.def))return t?.def}function yse(e){const t=Ga.get(e);if(db("series",t?.def))return t?.def}function db(e,t){return t?.type===e}var _u=class{constructor(){this.events=new Map}on(e,t){return this.events.has(e)||this.events.set(e,new Set),this.events.get(e)?.add(t),()=>this.off(e,t)}off(e,t){const i=this.events.get(e);i&&(i.delete(t),i.size===0&&this.events.delete(e))}emit(e,t){const i=this.events.get(e);if(i)for(const n of i)n(t)}clear(e){e?this.events.delete(e):this.events.clear()}},b1=class{constructor(e){if(this.maxCacheSize=e,this.store=new Map,e<=0)throw new Error("LRUCache size must be greater than 0")}get(e){if(!this.store.has(e))return;const t=this.store.get(e);return this.store.delete(e),this.store.set(e,t),t}has(e){return this.store.has(e)}set(e,t){return this.store.set(e,t),this.store.size>this.maxCacheSize&&this.store.delete(this.store.keys().next().value),t}clear(){this.store.clear()}};function st(e,t,i){return Math.min(i,Math.max(e,t))}function vse(e,t,i=1e-10){return e>=t[0]-i&&e<=t[1]+i}function ho(e,t,i=1e-10){return e===t||Math.abs(e-t)<i}function C1(e){return Math.sign(e)===-1||Object.is(e,-0)}function bse(e){return e%1===0}function WG(e,t=2){const i=10**t;return Math.round(e*i)/i}function Cse(e,t){return Math.floor(e%t+(e<0?Math.abs(t):0))}function w1(e){if(Math.floor(e)===e)return 0;let t=String(e),i=0;if(e<1e-6||e>=1e21){let s;[t,s]=t.split("e"),s!=null&&(i=Number(s))}const n=t.split(".")[1]?.length??0;return Math.max(n-i,0)}var oc={};typeof globalThis.window<"u"&&(oc.window=globalThis.window);typeof document<"u"?oc.document=document:typeof globalThis.global<"u"&&(oc.document=globalThis.document);function $a(e){return e?oc.document?.[e]:oc.document}function $t(e){return e?oc.window?.[e]:oc.window}function wse(e){oc.document=e}function Sse(e){oc.window=e}function ft(e,t,i){const n=$a().createElement(e);if(typeof t=="object"&&(i=t,t=void 0),t)for(const s of t.split(" "))n.classList.add(s);return i&&Object.assign(n.style,i),n}function tn(e){return $a().createElementNS("http://www.w3.org/2000/svg",e)}function xse(e,t){const i=$a("body"),n=ft("a",{display:"none"});n.href=e,n.download=t,i.appendChild(n),n.click(),setTimeout(()=>n.remove())}function ni(e,t,i,n){return e.addEventListener(t,i,n),()=>e.removeEventListener(t,i,n)}var ly;function Mse(e){if(ly==null){const i=$t("Option");ly=new i().style}ly.color=e;const t=ly.color||null;return ly.color="",t}function Ny(e){return e!=null}function ht(e){return Array.isArray(e)}function Dse(e){return typeof e=="boolean"}function Ph(e){return e instanceof Date}function S1(e){return Ph(e)&&!Number.isNaN(Number(e))}function Ase(e){return e instanceof RegExp}function hc(e){return typeof e=="function"}function Zt(e){return typeof e=="object"&&e!==null&&!ht(e)}function Nx(e){return ht(e)||Qt(e)}function Qt(e){return typeof e=="object"&&e!==null&&e.constructor?.name==="Object"}function PS(e){if(typeof e!="object"||e===null)return!1;for(const t in e)return!1;return!0}function fn(e){return typeof e=="string"}function av(e){return typeof e=="number"}function Kt(e){return Number.isFinite(e)}function Rse(e){return typeof globalThis.window<"u"&&e instanceof HTMLElement}function NS(e){return typeof e=="symbol"}function Ese(e){return fn(e)&&(e==="none"||Mse(e)!=null)}var D4=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,A4=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/;function Tse(e){if(!fn(e))return!1;const t=A4.exec(e);return D4.test(t?t[2]:e)}function x1(e){let t,i;const n=A4.exec(e);n&&([,t,e,i]=n);const s=D4.exec(e);if(!s){fe.warnOnce(`The number formatter is invalid: ${e}`);return}const[,o,r,a,l,c,d,p,g,m,y]=s;return{fill:o,align:r,sign:a,symbol:l,zero:c,width:Number.parseInt(d),comma:p,precision:Number.parseInt(g),trim:!!m,type:y,prefix:t,suffix:i}}function R4(e){const t=typeof e=="string"?x1(e):e;if(t==null)return;const{fill:i,align:n,sign:s="-",symbol:o,zero:r,width:a,comma:l,type:c,prefix:d="",suffix:p="",precision:g}=t;let{trim:m}=t;const y=g==null||Number.isNaN(g);let b;if(!c)b=gr.g,m=!0;else if(c in gr&&c in Cg)b=y?Cg[c]:gr[c];else if(c in gr)b=gr[c];else if(c in Cg)b=Cg[c];else throw new Error(`The number formatter type is invalid: ${c}`);const C=c?6:12;let w;return y||(w=g),(x,M)=>{let E=b(x,w??M??C);return m&&(E=Lse(E)),l&&(E=Pse(E,l)),E=Fse(x,E,s),o&&o!=="#"&&(E=`${o}${E}`),o==="#"&&c==="x"&&(E=`0x${E}`),c==="s"&&(E=`${E}${Nse(x)}`),(c==="%"||c==="p")&&(E=`${E}%`),a!=null&&!Number.isNaN(a)&&(E=Ose(E,a,i??r,n)),E=`${d}${E}${p}`,E}}var Cg={b:e=>Ww(e).toString(2),c:e=>String.fromCodePoint(e),d:e=>Math.round(Math.abs(e)).toFixed(0),o:e=>Ww(e).toString(8),x:e=>Ww(e).toString(16),X:e=>Cg.x(e).toUpperCase(),n:e=>Cg.d(e),"%":e=>`${Ww(e*100).toFixed(0)}`},gr={e:(e,t)=>Math.abs(e).toExponential(t),E:(e,t)=>gr.e(e,t).toUpperCase(),f:(e,t)=>Math.abs(e).toFixed(t),F:(e,t)=>gr.f(e,t).toUpperCase(),g:(e,t)=>{if(e===0)return"0";const i=Math.abs(e),n=Math.floor(Math.log10(i));return n>=-4&&n<t?i.toFixed(t-1-n):i.toExponential(t-1)},G:(e,t)=>gr.g(e,t).toUpperCase(),n:(e,t)=>gr.g(e,t),p:(e,t)=>gr.r(e*100,t),r:(e,t)=>{if(e===0)return"0";const i=Math.abs(e),s=Math.floor(Math.log10(i))-(t-1);if(s<=0)return i.toFixed(-s);const o=10**s;return(Math.round(i/o)*o).toFixed()},s:(e,t)=>{const i=I4(e);return gr.r(e/10**i,t)},"%":(e,t)=>gr.f(e*100,t)},E4=-24,T4=24,Ise={[E4]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[T4]:"Y"},kse="";function Ww(e){return Math.floor(Math.abs(e))}function Lse(e){if(!e.endsWith("0")||!e.includes("."))return e;let t=e.length-1;for(;t>0;)if(e[t]=="0")t-=1;else if(e[t]=="."){t-=1;break}else break;return e.substring(0,t+1)}function Pse(e,t){let i=e.indexOf(".");i<0&&(i=e.length);const n=e.substring(0,i).split(""),s=e.substring(i);for(let o=n.length-3;o>0;o-=3)n.splice(o,0,t);return`${n.join("")}${s}`}function Nse(e){return Ise[I4(e)]}function I4(e){return st(E4,e?Math.floor(Math.log10(Math.abs(e))/3)*3:0,T4)}function Fse(e,t,i=""){if(i==="(")return e>=0?t:`(${t})`;const n=i==="+"?"+":"";return`${e>=0?n:kse}${t}`}function Ose(e,t,i=" ",n=">"){let s=e;if(n===">"||!n)s=s.padStart(t,i);else if(n==="<")s=s.padEnd(t,i);else if(n==="^"){const o=Math.max(0,t-s.length),r=Math.ceil(o/2),a=Math.floor(o/2);s=s.padStart(r+s.length,i),s=s.padEnd(a+s.length,i)}return s}var Uw={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function M1(e,t=new Date(e.getFullYear(),0,1)){const i=e.getTimezoneOffset()-t.getTimezoneOffset(),n=e.getTime()-t.getTime()+i*6e4,s=36e5*24;return Math.floor(n/s)}function UG(e,t){const n=new Date(e.getFullYear(),0,1).getDay(),s=(t-n+7)%7,o=new Date(e.getFullYear(),0,s+1);return o<=e?Math.floor(M1(e,o)/7)+1:0}var Bse=0,k4=1,$G=4;function L4(e,t=e.getFullYear()){const n=new Date(t,0,1).getDay(),s=($G-n+7)%7,o=new Date(t,0,s-($G-k4)+1);return o<=e?Math.floor(M1(e,o)/7)+1:L4(e,t-1)}function Gse(e){const t=e.getTimezoneOffset(),i=Math.abs(t);return`${t>0?"-":"+"}${as(Math.floor(i/60),2,"0")}${as(Math.floor(i%60),2,"0")}`}var _se={a:e=>Uw.shortDays[e.getDay()],A:e=>Uw.days[e.getDay()],b:e=>Uw.shortMonths[e.getMonth()],B:e=>Uw.months[e.getMonth()],c:"%x, %X",d:(e,t)=>as(e.getDate(),2,t??"0"),e:"%_d",f:(e,t)=>as(e.getMilliseconds()*1e3,6,t??"0"),H:(e,t)=>as(e.getHours(),2,t??"0"),I:(e,t)=>{const i=e.getHours()%12;return i===0?"12":as(i,2,t??"0")},j:(e,t)=>as(M1(e)+1,3,t??"0"),m:(e,t)=>as(e.getMonth()+1,2,t??"0"),M:(e,t)=>as(e.getMinutes(),2,t??"0"),L:(e,t)=>as(e.getMilliseconds(),3,t??"0"),p:e=>e.getHours()<12?"AM":"PM",Q:e=>String(e.getTime()),s:e=>String(Math.floor(e.getTime()/1e3)),S:(e,t)=>as(e.getSeconds(),2,t??"0"),u:e=>{let t=e.getDay();return t<1&&(t+=7),String(t%7)},U:(e,t)=>as(UG(e,Bse),2,t??"0"),V:(e,t)=>as(L4(e),2,t??"0"),w:(e,t)=>as(e.getDay(),2,t??"0"),W:(e,t)=>as(UG(e,k4),2,t??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(e,t)=>as(e.getFullYear()%100,2,t??"0"),Y:(e,t)=>as(e.getFullYear(),4,t??"0"),Z:e=>Gse(e),"%":()=>"%"},Vse={_:" ",0:"0","-":""};function as(e,t,i){const n=String(Math.floor(e));return n.length>=t?n:`${i.repeat(t-n.length)}${n}`}function lv(e){const t=[];for(;e.length>0;){let i=e.indexOf("%");if(i!==0){const a=i>0?e.substring(0,i):e;t.push(a)}if(i<0)break;const n=e[i+1],s=Vse[n];s!=null&&i++;const o=e[i+1],r=_se[o];if(typeof r=="function")t.push([r,s]);else if(typeof r=="string"){const a=lv(r);t.push([a,s])}else t.push(`${s??""}${o}`);e=e.substring(i+2)}return i=>{const n=typeof i=="number"?new Date(i):i;return t.map(s=>typeof s=="string"?s:s[0](n,s[1])).join("")}}function YG(e,t,i){const{leading:n=!0,trailing:s=!0}=i??{};let o,r,a=!1;function l(){s&&r?(o=setTimeout(l,t),e(...r)):a=!1,r=null}function c(...d){a?r=d:(a=!0,o=setTimeout(l,t),n?e(...d):r=d)}return Object.assign(c,{cancel(){clearTimeout(o),a=!1,r=null}})}function P4(e,t,i=""){try{return e(...t)}catch(n){const s=i?` \`${i}\``:"";rv(`Uncaught exception in user callback${s}`,n)}}function cv(e,t="and",i=String,n=1/0){if(e.length===0)return"";if(e.length===1)return i(e[0]);e=e.map(i);const s=e.pop();if(e.length>=n){const o=e.length-(n-1);return`${e.slice(0,n-1).join(", ")}, and ${o} more ${t} ${s}`}return`${e.join(", ")} ${t} ${s}`}function D1(e,t=1/0){if(typeof e=="number"){if(Number.isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity"}const i=JSON.stringify(e)??typeof e;return i.length>t?`${i.slice(0,t)}... (+${i.length-t} characters)`:i}function zse(e){let t=1;for(let i=0;i<e.length;i++)e.codePointAt(i)===10&&t++;return t}function Hse(e,t){if(e===t)return 0;const[i,n]=e.length<t.length?[e,t]:[t,e],s=i.length,o=n.length;let r=new Array(s+1).fill(0).map((l,c)=>c),a=new Array(s+1);for(let l=1;l<=o;l++){a[0]=l;for(let c=1;c<=s;c++){const d=n[l-1]===i[c-1]?0:1;a[c]=Math.min(r[c]+1,a[c-1]+1,r[c-1]+d)}[r,a]=[a,r]}return r[s]}function jse(e){return e.replaceAll(Wse,(t,i)=>(i>0?"-":"")+t.toLowerCase())}var Wse=/[A-Z]+(?![a-z])|[A-Z]/g;function _n(e,t=""){return e==null?t:ht(e)?e.map(i=>i.text).join(""):fn(e)?e:String(e)}var Ho=Symbol("description"),N4=Symbol("required"),Fx=Symbol("marked"),nM=Symbol("undocumented"),Ox=Symbol("union"),Use=[["placement","position"],["padding","spacing","gap"],["color","fill","stroke"],["whisker","wick"],["nodeClick","seriesNodeClick"],["nodeDoubleClick","seriesNodeDoubleClick"],["src","url"]].reduce((e,t)=>{for(const i of t)e.set(i.toLowerCase(),new Set(t.filter(n=>n!==i)));return e},new Map),A1=(e=>(e.Invalid="invalid",e.Required="required",e.Unknown="unknown",e))(A1||{});function uv(e,t){return Kt(t)?`${e}[${t}]`:e?`${e}.${t}`:t}var eh=class{constructor(e,t,i,n,s){this.type=e,this.description=t,this.value=i,this.path=n,this.key=s}setUnionType(e,t){if(this.path.startsWith(t)){const i=this.path.slice(t.length);this.altPath=`${t}[type=${e}]${i}`}}getPrefix(){const{altPath:e=this.path,key:t}=this;return!e&&!t?"Value":`Option \`${t?uv(e,t):e}\``}toString(){const{description:e="unknown",type:t,value:i}=this;return t==="required"&&i==null?`${this.getPrefix()} is required and has not been provided; expecting ${e}, ignoring.`:`${this.getPrefix()} cannot be set to \`${D1(i,50)}\`; expecting ${e}, ignoring.`}},R1=class extends eh{constructor(e,t,i,n){super("unknown",void 0,t,i,n),this.suggestions=e,this.key=n}getPrefix(){return`Unknown option \`${uv(this.altPath??this.path,this.key)}\``}getPostfix(){const e=cv($se(this.key,this.suggestions),"or",t=>`\`${t}\``);return e?`; Did you mean ${e}? Ignoring.`:", ignoring."}toString(){return`${this.getPrefix()}${this.getPostfix()}`}};function Is(e,t,i=""){if(!Zt(e))return{cleared:null,invalid:[new eh("required","an object",e,i)]};const n={},s=[],o=new Set(Object.keys(e)),r=[];if(Ox in t){const a=Object.keys(t),l=t[Ox];if(e.type!=null&&a.includes(e.type)||e.type==null&&l!=null){const{type:c=l,...d}=e,p=Is(d,t[c],i);Object.assign(n,{type:c},p.cleared);for(const g of p.invalid)g.setUnionType(c,i);s.push(...p.invalid)}else{const c=cv(a,"or",d=>`'${d}'`);s.push(new eh("required",`a keyword such as ${c}`,e.type,i,"type"))}return{cleared:n,invalid:s}}for(const a of Object.keys(t)){const l=t[a],c=l[N4],d=e[a];if(o.delete(a),d===void 0&&(l[nM]||r.push(a),!c))continue;const p=uv(i,a);if(hc(l)){const m=l(d,{options:e,path:p});if(typeof m=="object"){if(s.push(...m.invalid),m.valid){n[a]=m.cleared;continue}else if(Tg(m.invalid,p))continue}else if(m){n[a]=d;continue}s.push(new eh(c?"required":"invalid",l[Ho],d,i,a))}else{const g=Is(d,l,p);g.cleared!=null&&(n[a]=g.cleared),s.push(...g.invalid)}}for(const a of o){const l=e[a];l!==void 0&&s.push(new R1(r,l,i,a))}return{cleared:n,invalid:s}}function $se(e,t,i=2){const n=[],s=e.toLowerCase(),o=Use.get(s);for(const r of t){const a=r.toLowerCase();(o?.has(r)||a.includes(s)||Hse(s,a)<=i)&&n.push(r)}return n}function It(e,t){if(hc(e)){let i=function(n,s){return e(n,s)};return i[Ho]=t,i}else return{...e,[Ho]:t}}function Te(e){return Object.assign(hc(e)?(t,i)=>e(t,i):Wi(e),{[N4]:!0,[Ho]:e[Ho]})}function Ze(e){return Object.assign(hc(e)?(t,i)=>e(t,i):Wi(e),{[nM]:!0,[Ho]:e[Ho]})}var Wi=(e,t="an object",i=!1)=>It((n,s)=>{const o=Is(n,e,s.path),r=!Tg(o.invalid,s.path);return{valid:r,cleared:r||!i?o.cleared:null,invalid:o.invalid}},t),hb=(e,t,i)=>({...e,[Ho]:t,[Ox]:i}),gi=(...e)=>It((t,i)=>{const n=[];for(const s of e){const o=s(t,i);if(typeof o=="object"){if(n.push(...o.invalid),!o.valid)return{valid:!1,cleared:t,invalid:n};t=o.cleared}else if(!o)return!1}return{valid:!0,cleared:t,invalid:n}},e.filter(t=>!t[nM]).map(t=>t[Ho]).filter(Boolean).join(" and ")),rt=(...e)=>It((t,i)=>{for(const n of e){const s=n(t,i);if(typeof s=="object"?s.valid:s)return s}return!1},e.filter(t=>!t[nM]).map(t=>t[Ho]).filter(Boolean).join(" or ")),nf=e=>Kt(e)||S1(e),Yse=e=>Ph(e)||(Kt(e)||fn(e))&&S1(new Date(e)),tl=It(ht,"an array"),Z=It(Dse,"a boolean"),Fi=It(hc,"a function"),Re=It(Ese,"a color string"),Ya=It(Yse,"a date"),Ue=It(Ny,"a defined value"),ue=It(Kt,"a number"),sM=It(Zt,"an object"),ce=It(fn,"a string"),F4=It(e=>typeof HTMLElement>"u"||e instanceof HTMLElement,"an html element"),Nh=(e,t=1/0)=>{let i;return t===1/0?i=`an array of at least ${e} items`:e===t?i=`an array of exactly ${e} items`:i=`an array of at least ${e} and no more than ${t} items`,It(n=>ht(n)&&n.length>=e&&n.length<=t,i)},O4=(e,t=1/0)=>{let i;return t===1/0?i=`a string of at least ${e} characters`:e===t?i=`an string of exactly ${e} characters`:i=`an string of at least ${e} and no more than ${t} characters`,It(n=>fn(n)&&n.length>=e&&n.length<=t,i)},B4=(e,t=!0)=>It(i=>Kt(i)&&(i>e||t&&i===e),`a number greater than ${t?"or equal to ":""}${e}`),Kse=(e,t)=>It(i=>Kt(i)&&i>=e&&i<=t,`a number between ${e} and ${t} inclusive`),J=B4(0),dv=B4(0,!1),Be=Kse(0,1),_a=e=>It((t,{options:i})=>!nf(t)||!nf(i[e])||t<i[e],`the value to be less than \`${e}\``),qse=e=>It((t,{options:i})=>!nf(t)||!nf(i[e])||t<=i[e],`the value to be less than or equal to \`${e}\``),Va=e=>It((t,{options:i})=>!nf(t)||!nf(i[e])||t>i[e],`the value to be greater than \`${e}\``);function ye(...e){Zt(e[0])&&(e=Object.values(e[0]));const t=cv(e,"or",i=>`'${i}'`);return It(i=>e.includes(i),`a keyword such as ${t}`)}var bi=e=>It(t=>e===t,`the value ${JSON.stringify(e)}`),Ye=(e,t,i=!0)=>It((n,s)=>{if(!ht(n))return!1;let o=i;const r=[],a=[],l=c=>o=i?o&&c:o||c;if(n.length===0)return{valid:!0,cleared:r,invalid:a};for(let c=0;c<n.length;c++){const d=n[c],p=e(d,{options:d,path:`${s.path}[${c}]`});typeof p=="object"?(o=l(p.valid),a.push(...p.invalid),p.cleared!=null&&r.push(p.cleared)):(o=l(p),p&&r.push(d))}return{valid:o,cleared:o||!i?r:null,invalid:a}},t??`${e[Ho]} array`),Vn=(e,t="an object array")=>It((i,n)=>{if(!ht(i))return!1;const s=[],o=[];for(let r=0;r<i.length;r++){const a=`${n.path}[${r}]`,l=Is(i[r],e,a);Tg(l.invalid,a)||s.push(l.cleared),o.push(...l.invalid)}return{valid:!0,cleared:s,invalid:o}},t),Ks=(e,t)=>It((i,n)=>hc(i)?Fx in i?!0:{valid:!0,cleared:Object.assign((...o)=>{const r=P4(i,o);if(r==null)return;const a=e(r,{options:r,path:""});if(typeof a=="object"){for(const l of a.invalid)G4(n,e[Ho])(l);if(a.valid)return a.cleared}else{if(a)return r;rv(`Callback \`${n.path}\` returned an invalid value \`${D1(r,50)}\`; expecting ${e[Ho]}, ignoring.`)}},{[Fx]:!0}),invalid:[]}:!1,"a function"),Vt=(e,t="an object")=>It((i,n)=>hc(i)?Fx in i?!0:{valid:!0,cleared:Object.assign((...o)=>{const r=P4(i,o,n.path);if(r==null)return;const a=Is(r,e);for(const l of a.invalid)G4(n,t)(l);return a.cleared},{[Fx]:!0}),invalid:[]}:!1,"a function");function Tg(e,t){return e.some(i=>i.type==="required"&&i.path===t)}function G4(e,t){return i=>{if(i instanceof R1)return rv(`Callback \`${e.path}\` returned an unknown property \`${uv(i.path,i.key)}\`${i.getPostfix()}`);const n=D1(i.value,50);rv(i.key?`Callback \`${e.path}\` returned an invalid property \`${uv(i.path,i.key)}\`: \`${n}\`; expecting ${i.description}, ignoring.`:`Callback \`${e.path}\` returned an invalid value \`${n}\`; expecting ${t??i.description}, ignoring.`)}}var Bx=e=>{if(!Zt(e))return!1;const t=Object.keys(e);return t.length===1&&t[0].startsWith("$")},Zse=Wi({color:Re,stop:Be},""),_4=It(e=>{let t=-1/0;for(const i of e)if(i?.stop!=null){if(i.stop<t)return!1;t=i.stop}return!0},"color stops to be defined in ascending order"),E1=gi(Nh(2),Ye(Zse),_4),T1=ye("axis","item","series"),SE=Wi({type:Te(bi("gradient")),colorStops:Te(E1),rotation:ue,gradient:Ze(ye("linear","radial","conic")),bounds:Ze(T1),reverse:Ze(Z),colorSpace:Ze(ye("rgb","oklch"))},"a gradient object with color stops"),we={stroke:Re,strokeWidth:J,strokeOpacity:Be},Xse=Wi({type:Te(bi("gradient")),gradient:Te(ye("linear","radial","conic")),bounds:Te(T1),colorStops:Te(rt(E1,gi(Nh(2),Ye(Re)))),rotation:Te(ue),reverse:Te(Z),colorSpace:Te(ye("rgb","oklch"))}),Qse=Wi({type:Te(bi("pattern")),pattern:Te(ye("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses")),path:O4(2),width:Te(J),height:Te(J),fill:Te(Re),fillOpacity:Te(Be),backgroundFill:Te(Re),backgroundFillOpacity:Te(Be),padding:Te(J),rotation:Te(ue),scale:Te(J),stroke:Te(Re),strokeWidth:Te(J),strokeOpacity:Te(Be)}),Jse=Wi({type:Te(bi("image")),url:ce,width:J,height:J,rotation:Te(ue),backgroundFill:Te(Re),backgroundFillOpacity:Be,fit:Te(ye("stretch","contain","cover")),repeat:Te(ye("repeat","repeat-x","repeat-y","no-repeat"))}),eoe=hb({gradient:{colorStops:E1,rotation:ue,gradient:Ze(ye("linear","radial","conic")),bounds:Ze(T1),reverse:Ze(Z),colorSpace:Ze(ye("rgb","oklch"))},pattern:{pattern:ye("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses"),path:O4(2),width:J,height:J,rotation:ue,scale:J,fill:Re,fillOpacity:Be,backgroundFill:Re,backgroundFillOpacity:Be,...we,padding:Ze(J)},image:{url:Te(ce),backgroundFill:Re,backgroundFillOpacity:Be,width:J,height:J,fit:ye("stretch","contain","cover","none"),repeat:ye("repeat","repeat-x","repeat-y","no-repeat"),rotation:ue}},"a color object"),Dr=rt(Re,Wi(eoe,"a color object")),Ie={fill:Dr,fillOpacity:Be};Ie.fillGradientDefaults=Ze(Xse);Ie.fillPatternDefaults=Ze(Qse);Ie.fillImageDefaults=Ze(Jse);var Ne={lineDash:Ye(J),lineDashOffset:ue},Ka={...Ie,...we,...Ne,opacity:Be,cornerRadius:J},yh={...we,...Ne,opacity:Be},Ai={...Ie,...we,...Ne,opacity:Be};function V4(e){return{enabled:Z,range:ye("tooltip","node"),highlightedItem:e,unhighlightedItem:e}}function sn(e,t){return{enabled:Z,range:ye("tooltip","node"),highlightedItem:e,unhighlightedItem:e,highlightedSeries:t,unhighlightedSeries:t,bringToFront:Z}}var toe={start:Ue,stop:Ue,...we,...Ie,...Ne},ioe={start:Ue,stop:Ue,...we,...Ne},pb=Wi({enabled:Z,key:Te(ye("x","y")),segments:Vn(toe,"path segments array")},"a segmentation object",!0),noe=Wi({enabled:Z,key:Te(ye("x","y")),segments:Vn(ioe,"path segments array")},"a segmentation object",!0),KG=Wi({googleFont:ce},"google font"),pI=rt(ce,Bx,KG,Ye(rt(ce,KG))),Xt={color:Re,fontFamily:pI,fontSize:J,fontStyle:ye("normal","italic","oblique"),fontWeight:rt(J,ye("normal","bold","bolder","lighter"))},soe=Wi({top:ue,right:ue,bottom:ue,left:ue},"padding object"),FS=rt(ue,soe),OS={enabled:Z,stroke:Re,strokeWidth:J,strokeOpacity:Be},Hr={border:{...OS},cornerRadius:ue,padding:FS,...Ie};function ooe(e,t,i=1/0){const n=t,s=i,o=e%180*(Math.PI/180),r=Math.abs(Math.sin(o)),a=Math.abs(Math.cos(o));if(r===0)return{width:n,height:s};if(a===0)return{width:s,height:n};if(!Number.isFinite(s)){const c=a/r,d=n/(a+c*r);return{width:d,height:c*d}}const l=a*a-r*r;if(l===0){const c=Math.min(n,s)/Math.SQRT2;return{width:c,height:c}}return{width:Math.abs((n*a-s*r)/l),height:Math.abs((s*a-n*r)/l)}}function z4(e,t,i,n=0,s=0){const o=Math.cos(i),r=Math.sin(i),a=e-n,l=t-s;return{x:n+a*o-l*r,y:s+a*r+l*o}}function Gx(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function roe(e){return Array.from(new Set(e))}function I1(e,t){return e.reduce((i,n)=>{const s=t(n);return i[s]??(i[s]=[]),i[s].push(n),i},{})}function Kl(e,t){if(e==null||t==null||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(Array.isArray(e[i])&&Array.isArray(t[i])){if(!Kl(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1;return!0}function Ra(e,t,i=0){if(e.length===0)return[];const n=[];for(let s=0;s<t;s++)n.push(e.at((s+i)%e.length));return n}function aoe(e,t){const i=new Map;for(const[n,s]of t.entries())i.set(s,n);return e.sort((n,s)=>{const o=i.get(n)??1/0,r=i.get(s)??1/0;return o-r})}function loe(e,t){let i=0;for(;i<e.length&&t(e[i]);)i+=1;const n=i;n!==0&&e.splice(0,n)}function coe(e,t){let i=e.length-1;for(;i>=0&&t(e[i]);)i-=1;const n=e.length-1-i;n!==0&&e.splice(e.length-n,n)}function uoe(e,t,i){const n=[e],s=Math.round((t-e)/(i-1));if(s>0)for(let o=e+s;o<t&&!(n.push(o)>=i-1);o+=s);return n.push(t),n}var qG=class{constructor(){this.queue=[]}await(e=50){return new Promise(t=>{const i=()=>{clearTimeout(s),t(!0)},s=setTimeout(()=>{const o=this.queue.indexOf(i);o<0||(this.queue.splice(o,1),t(!1))},e);this.queue.push(i)})}notify(){for(const e of this.queue.splice(0))e()}};function ZG(e=0){return new Promise(t=>{setTimeout(t,e)})}function*wg(...e){for(const t of e)t!=null&&(t[Symbol.iterator]?yield*t:yield t)}function doe(e){return e!=null&&typeof e=="object"&&Symbol.iterator in e?e:[e]}function ya(e){for(const t of e)return t;throw new Error("AG Charts - no first() value found")}function*$r(e){const t=[void 0,void 0];for(const i of Object.keys(e))t[0]=i,t[1]=e[i],yield t}function tu(e){return e==="true"}function hoe(e){return Number(e)}function ko(e){return e}var poe={role:ko,"aria-checked":tu,"aria-controls":ko,"aria-describedby":ko,"aria-disabled":tu,"aria-expanded":tu,"aria-haspopup":ko,"aria-hidden":tu,"aria-label":ko,"aria-labelledby":ko,"aria-live":ko,"aria-orientation":ko,"aria-selected":tu,"data-focus-override":tu,"data-focus-visible-override":tu,"data-preventdefault":tu,class:ko,for:ko,id:ko,tabindex:hoe,title:ko,placeholder:ko};function Tt(e,t,i){i==null||i===""||i===""?e?.removeAttribute(t):e?.setAttribute(t,i.toString())}function sf(e,t){if(t!=null)for(const[i,n]of $r(t))i!=="class"&&Tt(e,i,n)}function Ig(e,t,i){if(!(e instanceof HTMLElement))return;const n=e.getAttribute(t);return n===null?i:poe[t]?.(n)??void 0}function Na(e,t,i){e!=null&&(i==null?e.style.removeProperty(t):e.style.setProperty(t,i.toString()))}function goe(e,t){for(const[i,n]of $r(t))Na(e,i,n)}function H4(e,t,i,n,s){return t<e.x+e.width&&t+n>e.x&&i<e.y+e.height&&i+s>e.y}function k1(e,t,i,n=0,s=0){return t>=e.x&&t+n<=e.x+e.width&&i>=e.y&&i+s<=e.y+e.height}function foe(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function jd(e,t,i){if(e>t)return;let n;for(;t>=e;){const s=Math.floor((t+e)/2);i(s)?(n=s,e=s+1):t=s-1}return n}function hv(e,t,i){if(e>t)return;let n;for(;t>=e;){const s=Math.floor((t+e)/2);i(s)?(n=s,t=s-1):e=s+1}return n}function moe(e=0,t=0){return new OffscreenCanvas(e,t).getContext("2d")}var yoe=class{constructor(e){this.getter=e}get(){let e=this.result?.deref();return e||(e=this.getter(),this.result=new WeakRef(e),e)}clear(){this.result=void 0}},Ui=class{constructor(){this.callbacks=new Set}flush(){for(const e of this.callbacks)e();this.callbacks.clear()}merge(e){for(const t of e.callbacks)this.callbacks.add(t)}register(...e){for(const t of e)t&&this.callbacks.add(t)}};function voe(e,t){const i=Math.max(e.length,t.length),n=new Set,s=new Set;for(let o=0;o<i;o++){const r=e[o],a=t[o];r!==a&&(s.has(a)?s.delete(a):a&&n.add(a),n.has(r)?n.delete(r):r&&s.add(r))}return{changed:n.size>0||s.size>0,added:n,removed:s}}function j4(e){return Array.isArray(e)&&e.length>=2&&e.every(Kt)}function BS(e){return Array.isArray(e)&&e.length>=2&&e.every(j4)}function boe(e){const t=e[0],i=e.at(-1);return i===void 0?!1:ho(t[0],i[0],.001)&&ho(t[1],i[1],.001)}function XG(e){return Array.isArray(e)&&e.every(BS)&&e.every(boe)}function W4(e){if(e===null)return!0;if(!Zt(e)||e.type==null)return!1;const{type:t,coordinates:i}=e;switch(t){case"GeometryCollection":return Array.isArray(e.geometries)&&e.geometries.every(W4);case"MultiPolygon":return Array.isArray(i)&&i.every(XG);case"Polygon":return XG(i);case"MultiLineString":return Array.isArray(i)&&i.every(BS);case"LineString":return BS(i);case"MultiPoint":return BS(i);case"Point":return j4(i);default:return!1}}function Coe(e){return Zt(e)&&e.type==="Feature"&&W4(e.geometry)}function woe(e){return Zt(e)&&e.type==="FeatureCollection"&&Array.isArray(e.features)&&e.features.every(Coe)}var Soe=It(woe,"a GeoJSON object"),xoe=class{constructor(e,t,i){this._vertexCount=0,this._edgeCount=0,this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[],this.cachedNeighboursEdge=e,this.processedEdge=t,this.singleValueEdges=i}clear(){this._vertexCount=0,this._edgeCount=0,this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[],this.singleValueEdges?.clear()}getVertexCount(){return this._vertexCount}getEdgeCount(){return this._edgeCount}addVertex(e){const t=new Moe(e);return this._vertexCount++,t}addEdge(e,t,i){i===this.cachedNeighboursEdge?e.updateCachedNeighbours().set(t.value,t):i===this.processedEdge&&(this.pendingProcessingEdgesFrom.push(e),this.pendingProcessingEdgesTo.push(t));const{edges:n}=e,s=n.get(i);s?s.includes(t)||(this.singleValueEdges?.has(i)?n.set(i,[t]):(s.push(t),this._edgeCount++)):(n.set(i,[t]),this._edgeCount++)}removeVertex(e){this._vertexCount--;const t=e.edges;if(t){for(const[,i]of t)this._vertexCount-=i.length;e.clear()}}removeEdge(e,t,i){const n=e.edges.get(i);if(!n)return;const s=n.indexOf(t);s!==-1&&(n.splice(s,1),n.length===0&&e.edges.delete(i),this._edgeCount--,i===this.cachedNeighboursEdge&&e.readCachedNeighbours()?.delete(t.value))}removeEdges(e,t){e.edges.delete(t)}getVertexValue(e){return e.value}*neighbours(e){for(const[,t]of e.edges)for(const i of t)yield i}*neighboursAndEdges(e){for(const[t,i]of e.edges)for(const n of i)yield[n,t]}neighboursWithEdgeValue(e,t){return e.edges.get(t)}findNeighbour(e,t){return e.edges.get(t)?.[0]}findNeighbourValue(e,t){const i=this.findNeighbour(e,t);if(i)return this.getVertexValue(i)}findNeighbourWithValue(e,t,i){const n=i==null?this.neighbours(e):this.neighboursWithEdgeValue(e,i);if(n){for(const s of n)if(this.getVertexValue(s)===t)return s}}findVertexAlongEdge(e,t,i){if(i===this.cachedNeighboursEdge){let s;for(const o of t)if(s=(s??e).readCachedNeighbours()?.get(o),!s)return;return s}if(t.length===0)return;let n=e;for(const s of t){const o=n?this.neighboursWithEdgeValue(n,i):void 0;if(!o)return;n=o.find(r=>r.value===s)}return n}adjacent(e,t){for(const[,i]of e.edges)if(i.includes(t))return!0;return!1}},Moe=class{constructor(e){this.value=e,this.edges=new Map}readCachedNeighbours(){return this._cachedNeighbours}updateCachedNeighbours(){return this._cachedNeighbours??(this._cachedNeighbours=new Map),this._cachedNeighbours}clear(){this.edges.clear(),this._cachedNeighbours?.clear()}},QG=new Map,Doe=1;function na(e){const t=e.constructor,i=Object.hasOwn(t,"className")?t.className:t.name;if(!i)throw new Error(`The ${t} is missing the 'className' property.`);const n=(QG.get(i)??0)+1;return QG.set(i,n),`${i}-${n}`}function _x(){return`ag-charts-${Doe++}`}function xE(){return crypto.randomUUID?.()??Aoe()}function Aoe(){const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let t="";for(let i=0;i<e.length;i++)(i===4||i===6||i===8||i===10)&&(t+="-"),t+=e[i].toString(16).padStart(2,"0");return t}function Roe(e,t,i){let n=e,s=n;for(const o of t)if(n==null||i(n.value,o)>0)n={value:o,next:n},s=n;else{for(s=s;s.next!=null&&i(s.next.value,o)<=0;)s=s.next;s.next={value:o,next:s.next}}return n}var oM="",of=/\r?\n/g,Vx="";function U4({fontSize:e,fontStyle:t,fontWeight:i,fontFamily:n}){let s="";return t&&t!=="normal"&&(s+=`${t} `),i&&i!=="normal"&&i!==400&&(s+=`${i} `),s+=`${e}px`,s+=` ${n}`,s}function JG(e,t=1.15){return Math.round(e*t)}var Eoe=/[\s.,;:-]{1,5}$/;function e_(e){return e.replace(Eoe,"")+oM}function Toe(e){return Vx+e+Vx}function Ioe(e){return e.replaceAll(Vx,"")}function gb(e){return e.endsWith(oM)}function $4(e){return e?.text.endsWith(oM)??!1}var Y4=class{constructor(e,t){this.ctx=e,this.measureTextCached=t,this.baselineMap=new Map,this.charMap=new Map,this.lineHeightCache=null}baselineDistance(e){if(e==="alphabetic")return 0;if(this.baselineMap.has(e))return this.baselineMap.get(e);this.ctx.textBaseline=e;const{alphabeticBaseline:t}=this.ctx.measureText("");return this.baselineMap.set(e,t),this.ctx.textBaseline="alphabetic",t}lineHeight(){return this.lineHeightCache??(this.lineHeightCache=this.measureText("").height),this.lineHeightCache}measureText(e){const t=this.measureTextCached?.(e)??this.ctx.measureText(e),{width:i,fontBoundingBoxAscent:n=t.emHeightAscent,fontBoundingBoxDescent:s=t.emHeightDescent}=t,o=n+s;return{width:i,height:o,ascent:n,descent:s}}measureLines(e){const t=typeof e=="string"?e.split(of):e;let i=0,n=0;const s=t.map(o=>{const r=this.measureText(o);return i<r.width&&(i=r.width),n+=r.height,{text:o,...r}});return{width:i,height:n,lineMetrics:s}}textWidth(e,t){if(t){let i=0;for(let n=0;n<e.length;n++)i+=this.textWidth(e.charAt(n));return i}return e.length>1?this.ctx.measureText(e).width:this.charMap.get(e)??this.charWidth(e)}charWidth(e){const{width:t}=this.ctx.measureText(e);return this.charMap.set(e,t),t}},gI=new b1(50);function yo(e){typeof e=="object"&&(e=U4(e));let t=gI.get(e);if(t)return t;const i=new b1(1e4),n=moe();return n.font=e,t=new Y4(n,s=>{let o=i.get(s);return o||(o=n.measureText(s),i.set(s,o),o)}),gI.set(e,t),t}yo.clear=()=>gI.clear();function th(e,t){let i={segments:[],width:0,height:0,ascent:0,descent:0};const n=[i];for(const r of e){const{text:a,fontSize:l=t.fontSize,fontStyle:c=t.fontStyle,fontWeight:d=t.fontWeight,fontFamily:p=t.fontFamily,...g}=r,m={fontSize:l,fontStyle:c,fontWeight:d,fontFamily:p},y=yo(m),b=a.split(of);for(let C=0;C<b.length;C++){const w=b[C],x=y.measureText(w);C>0&&(i={segments:[],width:0,height:0,ascent:0,descent:0},n.push(i)),w&&(i.width+=x.width,i.ascent=Math.max(i.ascent,x.ascent),i.descent=Math.max(i.descent,x.descent),i.height=Math.max(i.height,i.ascent+i.descent),i.segments.push({...m,...g,text:w,textMetrics:x}))}}let s=0,o=0;for(const r of n)s=Math.max(s,r.width),o+=r.height;return{width:s,height:o,lineMetrics:n}}function t_(e,t){return t.overflow==="hide"&&e.some(gb)}function L1(e,t){return ht(e)?q4(e,t):K4(e,t).join(`
`)}function koe(e,t){return K4(e,t).join(`
`)}function K4(e,t){return GS(e,t)}function kg(e,t,i,n){const s=t.textWidth(oM);let o=0,r=0;for(;r<e.length;r++){const a=t.textWidth(e.charAt(r));if(o+a>i)break;o+=a}if(e.length===r&&(!n||o+s<=i))return n?e_(e):e;for(e=e.slice(0,r).trimEnd();e.length&&t.textWidth(e)+s>i;)e=e.slice(0,-1).trimEnd();return e_(e)}function GS(e,t,i=0){const n=e.split(of),s=yo(t.font),o=[];if(t.textWrap==="never"){for(const c of n){const d=kg(c.trimEnd(),s,Math.max(0,t.maxWidth-i));if(!d)break;o.push(d),i=0}return t_(o,t)?[]:o}const r=t.textWrap==="hyphenate",a=t.textWrap==null||t.textWrap==="on-space";for(const c of n){let d=c.trimEnd();if(d===""){o.push(d);continue}let p=0,g=0,m=0;for(o.length||(g=i);p<d.length;){const y=d.charAt(p);if(y===" "&&(m=p),g+=s.textWidth(y),g>t.maxWidth){if(p===0){d="";break}let b=s.textWidth(d.slice(0,p+1));if(o.length||(b+=i),b<=t.maxWidth){g=b,p++;continue}if(m){const x=Loe(d,m+1),M=s.textWidth(x);if(M<=t.maxWidth){o.push(d.slice(0,m).trimEnd()),d=d.slice(m).trimStart(),p=0,g=0,m=0;continue}else a&&M>t.maxWidth&&o.push(d.slice(0,m).trimEnd(),kg(d.slice(m).trimStart(),s,t.maxWidth,!0))}else if(a){const x=kg(d,s,t.maxWidth,!0);x&&o.push(x)}if(a){d="";break}const C=r?"-":"";let w=d.slice(0,p).trim();for(;w.length&&s.textWidth(w+C)>t.maxWidth;)w=w.slice(0,-1).trimEnd();if(w&&w!==Vx)o.push(w+C);else{d="";break}d=d.slice(w.length).trimStart(),p=-1,g=0,m=0}p++}d&&o.push(d)}Noe(o,s,t);const l=Poe(o,s,t);return t_(l,t)?[]:l}function Loe(e,t){const i=e.indexOf(" ",t);return i===-1?e.slice(t):e.slice(t,i)}function Poe(e,t,i){if(!Kt(i.maxHeight))return e;const{height:n,lineMetrics:s}=t.measureLines(e);if(n<=i.maxHeight)return e;for(let o=0,r=0;o<s.length;o++)if(r+=s[o].height,r>i.maxHeight){if(i.overflow==="hide"||o===0)return[];const a=e.slice(0,o),l=a.pop();return a.concat(gb(l)?l:kg(l,t,i.maxWidth,!0))}return e}function Noe(e,t,i){if(i.avoidOrphans===!1||e.length<2)return;const{length:n}=e,s=e[n-1],o=e[n-2];if(o.length<s.length)return;const r=o.lastIndexOf(" ");if(r===-1||r===o.indexOf(" ")||s.includes(" "))return;const a=o.slice(r+1);t.textWidth(s+a)<=i.maxWidth&&(e[n-2]=o.slice(0,r),e[n-1]=a+" "+s)}function q4(e,t){const{maxHeight:i=1/0}=t,n=[];let s=0,o=0;function r(){const a=n.pop();if(!a)return;const l=yo(a),c=kg(a.text,l,t.maxWidth,!0),d=l.measureText(c);n.push({...a,text:c,textMetrics:d})}for(const{width:a,height:l,segments:c}of th(e,t.font).lineMetrics){if(o+l>i){n.length&&r();break}if(s+a<=t.maxWidth){s+=a,o+=l,n.push(...c);continue}for(const d of c){if(s+d.textMetrics.width<=t.maxWidth){s+=d.textMetrics.width,n.push(d);continue}const p=yo(d),g=Toe(d.text),m={...t,font:d,maxHeight:i-o};let y=GS(g,{...m,overflow:"hide"},s);if(y.length===0)if(t.textWrap==="never")y=GS(g,m,s);else{y=GS(g,m);const w=n.at(-1);w&&(w.text+=`
`,s=0)}if(y.length===0){r();break}const b=y.findIndex(gb);b!==-1&&(y=y.slice(0,b+1));const C=y.at(-1);for(const w of y){const x=Ioe(w),M=p.measureText(x),E={...d,text:x,textMetrics:M};w===C?s+=M.width:(E.text+=`
`,s=0),o+=M.height,n.push(E)}if(b!==-1)break}}return n}var Z4=Object.defineProperty,Foe=Object.getOwnPropertyDescriptor,il=(e,t)=>{for(var i in t)Z4(e,i,{get:t[i],enumerable:!0})},A=(e,t,i,n)=>{for(var s=n>1?void 0:n?Foe(t,i):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(s=(n?r(t,i,s):r(s))||s);return n&&s&&Z4(t,i,s),s},rM=class{constructor(){this.cleanup=new Ui}destroy(){this.cleanup.flush()}},Ooe=class{constructor(){this.modules=[],this.dependencies=new Map,this.modulesByOptionKey=new Map}register(...t){for(const i of t){this.registerDependencies(i);const n=this.modules.find(s=>i.type===s.type&&("optionsKey"in i&&"optionsKey"in s?i.optionsKey===s.optionsKey:!0)&&i.identifier===s.identifier);if(n){if(i.packageType==="enterprise"&&n.packageType==="community"){const s=this.modules.indexOf(n);this.modules.splice(s,1,i),"optionsKey"in i&&this.modulesByOptionKey.set(i.optionsKey,i)}}else this.modules.push(i),"optionsKey"in i&&this.modulesByOptionKey.set(i.optionsKey,i)}}hasEnterpriseModules(){return this.modules.some(t=>t.packageType==="enterprise")}*byType(...t){const i=new Set,n=this.modules.filter(r=>t.includes(r.type)),s=r=>{const a=this.dependencies.get(r);return a?.flatMap(s).concat(a)??[]},o=[];for(const r of n){const a="optionsKey"in r?r.optionsKey:r.contextKey;if(!i.has(a)){for(const l of s(a)){if(i.has(l))continue;const c=this.modulesByOptionKey.get(l);if(!c){o.push(l);continue}t.includes(c.type)&&(yield c,i.add(l))}yield r,i.add(a)}}if(o.length>0)throw new Error(`Could not resolve module dependencies: ${o}`)}registerDependencies(t){if(t.dependencies==null||t.dependencies.length===0)return;const i="optionsKey"in t?t.optionsKey:t.contextKey;this.dependencies.set(i,t.dependencies)}},za=new Ooe,aM=Symbol("interpolate"),zx=e=>e[aM]!=null;function lM(e,t,i,n=1/0){const s={nearest:void 0,distanceSquared:n};for(const o of i){const r=o.distanceSquared(e,t);if(r===0)return{nearest:o,distanceSquared:0};r<s.distanceSquared&&(s.nearest=o,s.distanceSquared=r)}return s}function Boe(e,t,i,n=1/0){const{x:s=e,y:o=t}=i.transformPoint?.(e,t)??{},r={nearest:void 0,distanceSquared:n};for(const a of i.children){const{nearest:l,distanceSquared:c}=a.nearestSquared(s,o,r.distanceSquared);if(c===0)return{nearest:l,distanceSquared:c};c<r.distanceSquared&&(r.nearest=l,r.distanceSquared=c)}return r}var pv=class ag{constructor(t,i,n,s){this.x=t,this.y=i,this.width=n,this.height=s}static fromObject({x:t,y:i,width:n,height:s}){return new ag(t,i,n,s)}static merge(t){let i=1/0,n=1/0,s=-1/0,o=-1/0;for(const r of t)r.x<i&&(i=r.x),r.y<n&&(n=r.y),Cs(r.x,r.width)>s&&(s=Cs(r.x,r.width)),Cs(r.y,r.height)>o&&(o=Cs(r.y,r.height));return new ag(i,n,s-i,o-n)}static nearestBox(t,i,n){return lM(t,i,n)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:Cs(this.x,this.width),bottom:Cs(this.y,this.height),toJSON(){return{}}}}clone(){const{x:t,y:i,width:n,height:s}=this;return new ag(t,i,n,s)}equals(t){return foe(this,t)}containsPoint(t,i){return k1(this,t,i)}intersection(t){const i=Math.max(this.x,t.x),n=Math.max(this.y,t.y),s=Math.min(Cs(this.x,this.width),Cs(t.x,t.width)),o=Math.min(Cs(this.y,this.height),Cs(t.y,t.height));if(!(i>s||n>o))return new ag(i,n,s-i,o-n)}collidesBBox(t){return this.x<Cs(t.x,t.width)&&Cs(this.x,this.width)>t.x&&this.y<Cs(t.y,t.height)&&Cs(this.y,this.height)>t.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(t,i){if(this.containsPoint(t,i))return 0;const n=t-st(this.x,t,Cs(this.x,this.width)),s=i-st(this.y,i,Cs(this.y,this.height));return n*n+s*s}shrink(t,i){if(typeof t=="number")this.applyMargin(t,i);else for(const n of Object.keys(t)){const s=t[n];typeof s=="number"&&this.applyMargin(s,n)}return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(t,i){if(typeof t=="number")this.applyMargin(-t,i);else for(const n of Object.keys(t)){const s=t[n];typeof s=="number"&&this.applyMargin(-s,n)}return this}applyMargin(t,i){switch(i){case"top":this.y+=t;case"bottom":this.height-=t;break;case"left":this.x+=t;case"right":this.width-=t;break;case"vertical":this.y+=t,this.height-=t*2;break;case"horizontal":this.x+=t,this.width-=t*2;break;case void 0:this.x+=t,this.y+=t,this.width-=t*2,this.height-=t*2;break}}translate(t,i){return this.x+=t,this.y+=i,this}[aM](t,i){return new ag(this.x*(1-i)+t.x*i,this.y*(1-i)+t.y*i,this.width*(1-i)+t.width*i,this.height*(1-i)+t.height*i)}};pv.zero=Object.freeze(new pv(0,0,0,0));pv.NaN=Object.freeze(new pv(Number.NaN,Number.NaN,Number.NaN,Number.NaN));var Le=pv;function Cs(e,t){return e===-1/0&&t===1/0?1/0:e+t}var Goe=2e3,i_=Date.now(),_oe=()=>{const e=Date.now()-i_;if(e>Goe){const t=(Math.floor(e/100)/10).toFixed(1);fe.log(`**** ${t}s since last log message ****`)}i_=Date.now()},at={create(...e){return Object.assign((...i)=>{at.check(...e)&&(typeof i[0]=="function"&&(i=Gx(i[0]())),_oe(),fe.log(...i))},{check:()=>at.check(...e),group:(i,n)=>at.check(...e)?fe.logGroup(i,n):n()})},check(...e){return e.length===0&&e.push(!0),Gx($t("agChartsDebug")).some(i=>e.includes(i))},inDevelopmentMode(e){if(at.check("dev"))return e()}};function X4({context:e,pixelRatio:t,width:i,height:n}){e.save();try{e.resetTransform(),e.clearRect(0,0,Math.ceil(i*t),Math.ceil(n*t))}finally{e.restore()}}function Q4(e){if(at.check("canvas")){const t=e.save.bind(e),i=e.restore.bind(e);let n=0;Object.assign(e,{save(){t(),n++},restore(){if(n===0)throw new Error("AG Charts - Unable to restore() past depth 0");i(),n--},verifyDepthZero(){if(n!==0)throw new Error(`AG Charts - Save/restore depth is non-zero: ${n}`)}})}}function n_(e,t,i){return[Math.floor(e*i),Math.floor(t*i)]}var P1=class{constructor(e){const{width:t,height:i,pixelRatio:n,willReadFrequently:s=!1}=e;this.width=t,this.height=i,this.pixelRatio=n;const[o,r]=n_(t,i,n);this.canvas=new OffscreenCanvas(o,r),this.context=this.canvas.getContext("2d",{willReadFrequently:s}),this.context.setTransform(n,0,0,n,0,0),Q4(this.context)}drawImage(e,t=0,i=0){return e.drawImage(this.canvas,t,i)}transferToImageBitmap(){return this.canvas.transferToImageBitmap()}resize(e,t,i){if(!(e>0&&t>0))return;const{canvas:n,context:s}=this;if(e!==this.width||t!==this.height||i!==this.pixelRatio){const[o,r]=n_(e,t,i);n.width=o,n.height=r}s.setTransform(i,0,0,i,0,0),this.width=e,this.height=t,this.pixelRatio=i}clear(){X4(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}},fI=Symbol("BREAK"),Fy="__decorator_config",$w="__decorator_accessors";function k(e,t){N1(e,t).optional=!0}function N1(e,t){if(Object.getOwnPropertyDescriptor(e,Fy)==null&&Object.defineProperty(e,Fy,{value:{}}),Object.getOwnPropertyDescriptor(e,$w)==null){const d=Object.getPrototypeOf(e)?.[$w]?.slice()??[];Object.defineProperty(e,$w,{value:d})}const i=e[Fy],n=t.toString();if(i[n]!=null)return i[n];i[n]={setters:[],getters:[],observers:[]};const s=Object.getOwnPropertyDescriptor(e,t);let o=s?.get,r=s?.set;if(o==null||r==null){const c=e[$w];let d=c.indexOf(t);d===-1&&(d=c.push(t)-1),o??(o=function(){let p=this.__accessors;return p==null&&(p=c.slice().fill(void 0),Object.defineProperty(this,"__accessors",{value:p})),p[d]}),r??(r=function(p){let g=this.__accessors;g==null&&(g=c.slice().fill(void 0),Object.defineProperty(this,"__accessors",{value:g})),g[d]=p})}return Object.defineProperty(e,t,{set:function(c){const{setters:d,observers:p}=i[n];let g;d.some(m=>m.length>2)&&(g=o.call(this));for(const m of d)if(c=m(this,t,c,g),c===fI)return;r.call(this,c);for(const m of p)m(this,c,g)},get:function(){let c=o.call(this);for(const d of i[n].getters)if(c=d(this,t,c),c===fI)return;return c},enumerable:!0,configurable:!1}),i[n]}function vh(e,t,i){return(n,s)=>{const o=N1(n,s);o.setters.push(e),t&&o.getters.unshift(t),i&&Object.assign(o,i)}}function J4(e){return(t,i)=>{N1(t,i).observers.push(e)}}function cM(e){return e!==void 0&&Fy in e}function Su(e){const t=new Set;for(;cM(e);)t.add(e?.[Fy]),e=Object.getPrototypeOf(e);return Array.from(t).flatMap(i=>Object.keys(i))}function eW(e){return Su(e).reduce((t,i)=>(t[String(i)]=e[i]??null,t),{})}function qs(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every((i,n)=>qs(i,t[n])):Qt(e)?Qt(t)?F1(e,t,qs):!1:e===t}function F1(e,t,i){if(Object.is(e,t))return!0;for(const n of Object.keys(t))if(!(n in e))return!1;for(const n of Object.keys(e))if(!(n in t)||!i(e[n],t[n]))return!1;return!0}function _t(...e){const t={};for(const i of e){if(!Zt(i))continue;const n=cM(i)?Su(i):Object.keys(i);for(const s of n)Qt(t[s])&&Qt(i[s])?t[s]=_t(t[s],i[s]):t[s]??(t[s]=i[s])}return t}function gv(...e){const t={};for(const i of e){if(!Zt(i))continue;const n=cM(i)?Su(i):Object.keys(i);for(const s of n)Qt(t[s])&&Qt(i[s])?t[s]=gv(t[s],i[s]):s in t||(t[s]??(t[s]=i[s]))}return t}function tW(e,...t){return t&&ht(e)?e.map(i=>_t(i,...t)):e}function iW(e,t){const i={};for(const[n,s]of $r(e))i[n]=t(s,n,e);return i}function Ae(e,t){const i={...e};for(const n of t)delete i[n];return i}function _S(e,t){if(e==null)return;const i={};for(const n of t)Object.hasOwn(e,n)&&(i[n]=e[n]);return i}function O1(e,t){return(ht(t)?t:t.split(".")).reduce((n,s)=>n[s],e)}var B1=new Set(["__proto__","constructor","prototype"]);function G1(e,t,i){const n=ht(t)?t.slice():t.split("."),s=n.pop();if(n.some(r=>B1.has(r)))return;const o=n.reduce((r,a)=>r[a],e);return o[s]=i,o[s]}function mI(e,t,i){if(i===void 0)return t;for(const n of e){const s=i[n];s!==void 0&&(t[n]=s)}return t}function Vl(e){if(e==null||typeof e!="object"||!Qt(e))return e;Object.freeze(e);for(const t of Object.getOwnPropertyNames(e)){const i=e[t];i!==null&&(typeof i=="object"||typeof i=="function")&&!Object.isFrozen(i)&&Vl(i)}return e}function nW(e,t){return Qt(e)&&t in e}function Voe(e,t){return nW(e,t)&&typeof e[t]=="string"}var sW=(e,t)=>e===t;function Me(e){return function(t,i){const n=`__${i}`;t[i]||zoe(t,i,n,e)}}function uM(e){return Me(e)}function Uo(e){return Me(e)}function _1(e){const t=e??{};return t.equals=Kl,Me(e)}function zoe(e,t,i,n){const{changeCb:s,convertor:o,checkDirtyOnAssignment:r=!1}=n??{},a={changeCb:s,checkDirtyOnAssignment:r,convertor:o},l=Woe(i,joe(Hoe(Uoe(i,a),a),a),a);Object.defineProperty(e,t,{set:l,get:function(){return this[i]},enumerable:!0,configurable:!0})}function Hoe(e,t){const{convertor:i}=t;return i?function(n){e.call(this,i(n))}:e}var oW=Symbol("no-change");function joe(e,t){const{changeCb:i}=t;return i?function(n){const s=e.call(this,n);return s!==oW&&i.call(this,this),s}:e}function Woe(e,t,i){const{checkDirtyOnAssignment:n}=i;return n?function(s){const o=t.call(this,s);return s?._dirty===!0&&this.markDirty(e),o}:t}function Uoe(e,t){const{equals:i=sW}=t;return function(n){const s=this[e];return i(n,s)?oW:(this[e]=n,this.onChangeDetection(e),n)}}var ME=(e,t)=>Math.sign(e-t);function rW(e,t){if(typeof e=="number"&&typeof t=="number")return ME(e,t);const i=typeof e=="number"?[e]:e,n=typeof t=="number"?[t]:t,s=Math.min(i.length,n.length);for(let o=0;o<s;o+=1){const r=ME(i[o],n[o]);if(r!==0)return r}return ME(i.length,n.length)}var aW=(e=>(e[e.All=0]="All",e[e.None=1]="None",e))(aW||{}),$oe=5,fb=class yI{constructor(t){this.serialNumber=yI._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=na(this),this.name=void 0,this.transitionOut=void 0,this.pointerEvents=0,this._datum=void 0,this._previousDatum=void 0,this.scene=void 0,this._debugDirtyProperties=void 0,this.parentNode=void 0,this.cachedBBox=void 0,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.batchLevel=0,this.batchDirty=!1,this.name=t?.name,this.tag=t?.tag??Number.NaN,this.zIndex=t?.zIndex??0,this.scene=t?.scene,(t?.debugDirty??yI._debugEnabled)&&(this._debugDirtyProperties=new Map([["__first__",[]]]))}static toSVG(t,i,n){const s=t?.toSVG();if(s==null||!s.elements.length&&!s.defs?.length)return;const o=tn("svg");if(o.setAttribute("width",String(i)),o.setAttribute("height",String(n)),o.setAttribute("viewBox",`0 0 ${i} ${n}`),o.setAttribute("overflow","visible"),s.defs?.length){const r=tn("defs");r.append(...s.defs),o.append(r)}return o.append(...s.elements),o.outerHTML}static*extractBBoxes(t,i){for(const n of t)if(!i||n.visible&&!n.transitionOut){const s=n.getBBox();s&&(yield s)}}get datum(){return this._datum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum,this._datum=t)}get previousDatum(){return this._previousDatum}get layerManager(){return this.scene?.layersManager}get imageLoader(){return this.scene?.imageLoader}closestDatum(){for(const{datum:t}of this.traverseUp(!0))if(t!=null)return t}preRender(t,i=1){if(this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=i,this.childNodeCounts.thisComplexity=i,this.batchLevel>0||this.batchDirty)throw new Error("AG Charts - illegal rendering state; batched update in progress");return this.childNodeCounts}isolatedRender(t){t.ctx.save();try{this.render(t)}catch(i){const n=i.errorCount??1;if(n>=$oe)throw i.errorCount=n,i;fe.warnOnce("Error during rendering",i,i.stack)}finally{t.ctx.restore()}}render(t){const{stats:i}=t;if(this.debugDirtyProperties(),t.debugNodeSearch){const n=this.name??this.id;t.debugNodeSearch.some(s=>typeof s=="string"?s===n:s.test(n))&&(t.debugNodes[this.name??this.id]=this)}i&&(i.nodesRendered++,i.opsPerformed+=this.childNodeCounts.thisComplexity)}setScene(t){this.scene=t}*traverseUp(t){t&&(yield this);let i=this.parentNode;for(;i;)yield i,i=i.parentNode}isRoot(){return!this.parentNode}removeChild(t){throw new Error(`AG Charts - internal error, unknown child node ${t.name??t.id} in $${this.name??this.id}`)}remove(){this.parentNode?.removeChild(this)}destroy(){this.parentNode&&this.remove()}batchedUpdate(t){this.batchLevel++,t(),this.batchLevel--,this.batchLevel===0&&this.batchDirty&&(this.markDirty(),this.batchDirty=!1)}setProperties(t){return this.batchLevel++,Object.assign(this,t),this.batchLevel--,this.batchLevel===0&&this.batchDirty&&(this.markDirty(),this.batchDirty=!1),this}containsPoint(t,i){return!1}pickNode(t,i){if(this.containsPoint(t,i))return this}pickNodes(t,i,n=[]){return this.containsPoint(t,i)&&n.push(this),n}getBBox(){return this.cachedBBox??(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}onChangeDetection(t){this.markDirty(t)}markDirtyChildrenOrder(){this.cachedBBox=void 0}markDirty(t){if(this.batchLevel>0){this.batchDirty=!0;return}t!=null&&this._debugDirtyProperties&&this.markDebugProperties(t),this.cachedBBox=void 0,this.parentNode?.markDirty()}markDebugProperties(t){const i=this._debugDirtyProperties?.get(t)??[],n=new Error("Stack trace for property change tracking").stack?.split(`
`).filter(s=>s!=="Error"&&!s.includes(".markDebugProperties")&&!s.includes(".markDirty")&&!s.includes("Object.assign ")&&!s.includes(`${this.constructor.name}.`))??"unknown";i.push(n[0].replace(" at ","").trim()),this._debugDirtyProperties?.set(t,i)}debugDirtyProperties(){if(this._debugDirtyProperties!=null){if(!this._debugDirtyProperties.has("__first__")){for(const[t,i]of this._debugDirtyProperties.entries())if(i.length>1){console.groupCollapsed(`Property changed multiple times before render: ${this.constructor.name}.${t} (${i.length}x)`);for(const n of i)console.log(n);console.groupEnd()}}this._debugDirtyProperties.clear()}}onZIndexChange(){this.parentNode?.markDirtyChildrenOrder()}toSVG(){}};fb._nextSerialNumber=0;fb._debugEnabled=!1;A([Me()],fb.prototype,"visible",2);A([Uo({changeCb:e=>e.onZIndexChange()})],fb.prototype,"zIndex",2);var rc=fb,Cr=Math.PI*2,cy=Math.PI/2;function On(e){return e%=Cr,e+=Cr,e%=Cr,e}function Yoe(e){return e%=Cr,e+=Cr,e!==Cr&&(e%=Cr),e}function Hx(e){return e%=Cr,e<-Math.PI?e+=Cr:e>=Math.PI&&(e-=Cr),e}function Wd(e,t,i){const n=On(e),s=On(t),o=On(i);return s<o?s<=n&&n<=o:s>o?s<=n||n<=o:t!==i}function ds(e){return e/180*Math.PI}function Koe(e){return e/Math.PI*180}function dM(e,t){return e=On(e),t=On(t),t-e+(e>t?Cr:0)}function lW(e){const t=On(e);return t<=cy?t/cy:t<=Math.PI?(Math.PI-t)/cy:t<=1.5*Math.PI?(t-Math.PI)/cy:(Cr-t)/cy}function vI(e,t,i){const n=lW(i);return e*n+t*Math.abs(1-n)}function ac(e){return e?On(ds(e)):0}var wd=(e,t,i)=>e*(1-i)+t*i,DE=e=>{const t=e<0?-1:1,i=Math.abs(e);return i<=.04045?e/12.92:t*((i+.055)/1.055)**2.4},AE=e=>{const t=e<0?-1:1,i=Math.abs(e);return i>.0031308?t*(1.055*i**(1/2.4)-.055):12.92*e},cW=class Gt{constructor(t,i,n,s=1){this.r=st(0,t||0,1),this.g=st(0,i||0,1),this.b=st(0,n||0,1),this.a=st(0,s||0,1)}static validColorString(t){return t.includes("#")?!!Gt.parseHex(t):t.includes("rgb")?!!Gt.stringToRgba(t):Gt.nameToHex.has(t.toLowerCase())}static fromString(t){if(t.includes("#"))return Gt.fromHexString(t);const i=Gt.nameToHex.get(t.toLowerCase());if(i)return Gt.fromHexString(i);if(t.includes("rgb"))return Gt.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static parseHex(t){t=t.replaceAll(" ","").slice(1);let i;switch(t.length){case 6:case 8:i=[];for(let n=0;n<t.length;n+=2)i.push(Number.parseInt(`${t[n]}${t[n+1]}`,16));break;case 3:case 4:i=t.split("").map(n=>Number.parseInt(n,16)).map(n=>n+n*16);break}if(i?.length>=3&&i.every(n=>n>=0))return i.length===3&&i.push(255),i}static fromHexString(t){const i=Gt.parseHex(t);if(i){const[n,s,o,r]=i;return new Gt(n/255,s/255,o/255,r/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let i=-1,n=-1;for(let a=0;a<t.length;a++){const l=t[a];if(i===-1&&l==="(")i=a;else if(l===")"){n=a;break}}if(i===-1||n===-1)return;const o=t.substring(i+1,n).split(","),r=[];for(let a=0;a<o.length;a++){const l=o[a];let c=Number.parseFloat(l);if(!Number.isFinite(c))return;l.includes("%")?(c=st(0,c,100),c/=100):a===3?c=st(0,c,1):(c=st(0,c,255),c/=255),r.push(c)}return r}static fromRgbaString(t){const i=Gt.stringToRgba(t);if(i){if(i.length===3)return new Gt(i[0],i[1],i[2]);if(i.length===4)return new Gt(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(t.length===4)return new Gt(t[0],t[1],t[2],t[3]);if(t.length===3)return new Gt(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,i,n,s=1){const o=Gt.HSBtoRGB(t,i,n);return new Gt(o[0],o[1],o[2],s)}static fromHSL(t,i,n,s=1){const o=Gt.HSLtoRGB(t,i,n);return new Gt(o[0],o[1],o[2],s)}static fromOKLCH(t,i,n,s=1){const o=Gt.OKLCHtoRGB(t,i,n);return new Gt(o[0],o[1],o[2],s)}static padHex(t){return t.length===1?"0"+t:t}toHexString(){let t="#"+Gt.padHex(Math.round(this.r*255).toString(16))+Gt.padHex(Math.round(this.g*255).toString(16))+Gt.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(t+=Gt.padHex(Math.round(this.a*255).toString(16))),t}toRgbaString(t=3){const i=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],n=Math.pow(10,t);return this.a!==1?(i.push(Math.round(this.a*n)/n),`rgba(${i.join(", ")})`):`rgb(${i.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return Gt.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(t,i,n){const s=DE(t),o=DE(i),r=DE(n),a=Math.cbrt(.4122214708*s+.5363325363*o+.0514459929*r),l=Math.cbrt(.2119034982*s+.6806995451*o+.1073969566*r),c=Math.cbrt(.0883024619*s+.2817188376*o+.6299787005*r),d=.2104542553*a+.793617785*l-.0040720468*c,p=1.9779984951*a-2.428592205*l+.4505937099*c,g=.0259040371*a+.7827717662*l-.808675766*c,m=Math.atan2(g,p)*180/Math.PI,y=d,b=Math.hypot(p,g),C=m>=0?m:m+360;return[y,b,C]}static OKLCHtoRGB(t,i,n){const s=t,o=i*Math.cos(n*Math.PI/180),r=i*Math.sin(n*Math.PI/180),a=(s+.3963377774*o+.2158037573*r)**3,l=(s-.1055613458*o-.0638541728*r)**3,c=(s-.0894841775*o-1.291485548*r)**3,d=4.0767416621*a-3.3077115913*l+.2309699292*c,p=-1.2684380046*a+2.6097574011*l-.3413193965*c,g=-.0041960863*a-.7034186147*l+1.707614701*c,m=AE(d),y=AE(p),b=AE(g);return[m,y,b]}static RGBtoHSL(t,i,n){const s=Math.min(t,i,n),o=Math.max(t,i,n),r=(o+s)/2;let a,l;if(o===s)a=0,l=0;else{const c=o-s;l=r>.5?c/(2-o-s):c/(o+s),o===t?a=(i-n)/c+(i<n?6:0):o===i?a=(n-t)/c+2:a=(t-i)/c+4,a*=360/6}return[a,l,r]}static HSLtoRGB(t,i,n){if(t=(t%360+360)%360,i===0)return[n,n,n];const s=n<.5?n*(1+i):n+i-n*i,o=2*n-s;function r(d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?o+(s-o)*6*d:d<1/2?s:d<2/3?o+(s-o)*(2/3-d)*6:o}const a=r(t/360+1/3),l=r(t/360),c=r(t/360-1/3);return[a,l,c]}static RGBtoHSB(t,i,n){const s=Math.min(t,i,n),o=Math.max(t,i,n),r=o===0?0:(o-s)/o;let a=0;if(s!==o){const l=o-s,c=(o-t)/l,d=(o-i)/l,p=(o-n)/l;t===o?a=p-d:i===o?a=2+c-p:a=4+d-c,a/=6,a<0&&(a=a+1)}return[a*360,r,o]}static HSBtoRGB(t,i,n){t=(t%360+360)%360/360;let s=0,o=0,r=0;if(i===0)s=o=r=n;else{const a=(t-Math.floor(t))*6,l=a-Math.floor(a),c=n*(1-i),d=n*(1-i*l),p=n*(1-i*(1-l));switch(Math.trunc(a)){case 0:s=n,o=p,r=c;break;case 1:s=d,o=n,r=c;break;case 2:s=c,o=n,r=p;break;case 3:s=c,o=d,r=n;break;case 4:s=p,o=c,r=n;break;case 5:s=n,o=c,r=d;break}}return[s,o,r]}static mix(t,i,n){return new Gt(wd(t.r,i.r,n),wd(t.g,i.g,n),wd(t.b,i.b,n),wd(t.a,i.a,n))}static lighten(t,i){const n=Gt.RGBtoOKLCH(t.r,t.g,t.b);return Gt.fromOKLCH(st(0,n[0]+i,1),n[1],n[2])}static darken(t,i){const n=Gt.RGBtoOKLCH(t.r,t.g,t.b);return Gt.fromOKLCH(st(0,n[0]-i,1),n[1],n[2])}static interpolate(t,i){const n=1/(t.length-1),s=t.map(o=>Gt.RGBtoOKLCH(o.r,o.g,o.b));return Array.from({length:i},(o,r)=>{const a=r/(i-1),l=t.length<=2?0:Math.min(Math.floor(a*(t.length-1)),t.length-2),c=(a-l*n)/n,d=s[l],p=s[l+1];return Gt.fromOKLCH(wd(d[0],p[0],c),wd(d[1],p[1],c),wd(d[2],p[2],c))})}};cW.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]);var si=cW,uW=(e=>(e[e.Leading=0]="Leading",e[e.Trailing=1]="Trailing",e[e.Interpolate=2]="Interpolate",e))(uW||{}),hM=class{ticks(e,t,i){}niceDomain(e,t=this.domain){return t}get bandwidth(){}get step(){}get inset(){}},mb=(e,t)=>{const i=Symbol(String(t));e[i]=void 0,Object.defineProperty(e,t,{get(){return this[i]},set(n){this[i]!==n&&(this[i]=n,this.invalid=!0)},enumerable:!0,configurable:!1})},s_=e=>{const t=si.fromString(e),[i,n,s]=si.RGBtoOKLCH(t.r,t.g,t.b);return{l:i,c:n,h:s,a:t.a}},RE=1e-6,o_=e=>e.c<RE||e.l<RE||e.l>1-RE,qoe=(e,t,i)=>{i=st(0,i,1);let n;if(o_(e))n=t.h;else if(o_(t))n=e.h;else{const a=e.h;let l=t.h;const c=t.h-e.h;c>180?l-=360:c<-180&&(l+=360),n=a*(1-i)+l*i}const s=e.c*(1-i)+t.c*i,o=e.l*(1-i)+t.l*i,r=e.a*(1-i)+t.a*i;return si.fromOKLCH(o,s,n,r)},Nf=class extends hM{constructor(){super(...arguments),this.type="color",this.defaultTickCount=0,this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(s_)}update(){const{domain:e,range:t}=this;e.length<2&&(fe.warnOnce("`colorDomain` should have at least 2 values."),e.length===0?e.push(0,1):e.length===1&&e.push(e[0]+1));for(let i=1;i<e.length;i++){const n=e[i-1],s=e[i];if(n>s){fe.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort((o,r)=>o-r);break}}if(t.length<e.length)for(let i=t.length;i<e.length;i++)t.push(t.length>0?t[0]:"black");this.parsedRange=this.range.map(s_)}normalizeDomains(...e){return{domain:e.flat(),animatable:!0}}toDomain(){}convert(e){this.refresh();const{domain:t,range:i,parsedRange:n}=this,s=t[0],o=t.at(-1),r=i[0],a=i.at(-1);if(e<=s)return r;if(e>=o)return a;let l,c;if(t.length===2){const g=(e-s)/(o-s),m=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(g*(i.length-1)),i.length-2),c=(g-l*m)/m}else{for(l=0;l<t.length-2&&!(e<t[l+1]);l++);const g=t[l],m=t[l+1];c=(e-g)/(m-g)}const d=n[l],p=n[l+1];return qoe(d,p,c).toRgbaString()}invert(){}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&fe.warnOnce("Expected update to not invalidate scale"))}};A([mb],Nf.prototype,"domain",2);A([mb],Nf.prototype,"range",2);var pM=class{constructor(e,t=[],i){this.colorSpace=e,this.stops=t,this.bbox=i,this._cache=void 0}createGradient(e,t,i){const n=this.bbox??t;if(!n.isFinite())return;if(this._cache!=null&&this._cache.ctx===e&&this._cache.bbox.equals(n))return this._cache.gradient;const{stops:s,colorSpace:o}=this;if(s.length===0)return;if(s.length===1)return s[0].color;let r=this.createCanvasGradient(e,n,i);if(r==null)return;const a=o==="oklch",l=.05;let c=s[0];r.addColorStop(c.stop,c.color);for(let d=1;d<s.length;d+=1){const p=s[d];if(a){const g=new Nf;g.domain=[c.stop,p.stop],g.range=[c.color,p.color];for(let m=c.stop+l;m<p.stop;m+=l)r.addColorStop(m,g.convert(m)??"transparent")}r.addColorStop(p.stop,p.color),c=p}return"createPattern"in r&&(r=r.createPattern()),this._cache={ctx:e,bbox:n,gradient:r},r}toSvg(e){const t=this.bbox??e,i=this.createSvgGradient(t);for(const{stop:n,color:s}of this.stops){const o=tn("stop");o.setAttribute("offset",`${n}`),o.setAttribute("stop-color",`${s}`),i.appendChild(o)}return i}},dW=class extends pM{constructor(e,t,i=0,n){super(e,t,n),this.angle=i}createCanvasGradient(e,t,i){const{angle:s}=this,o=ac(s+-90),r=i?.centerX??t.x+t.width*.5,a=i?.centerY??t.y+t.height*.5;return e.createConicGradient(o,r,a)}createSvgGradient(e){return tn("linearGradient")}},hW=class extends pM{constructor(e,t,i=0,n){super(e,t,n),this.angle=i}getGradientPoints(e){const{angle:i}=this,n=ac(i+90),s=Math.cos(n),o=Math.sin(n),r=e.width,a=e.height,l=e.x+r*.5,c=e.y+a*.5,d=Math.hypot(a,r)/2,p=Math.atan2(a,r);let g;n<Math.PI/2?g=n:n<Math.PI?g=Math.PI-n:n<1.5*Math.PI?g=n-Math.PI:g=2*Math.PI-n;const m=d*Math.abs(Math.cos(g-p));return{x0:l+s*m,y0:c+o*m,x1:l-s*m,y1:c-o*m}}createCanvasGradient(e,t){const{x0:i,y0:n,x1:s,y1:o}=this.getGradientPoints(t);if(!(Number.isNaN(i)||Number.isNaN(n)||Number.isNaN(s)||Number.isNaN(o)))return e.createLinearGradient(i,n,s,o)}createSvgGradient(e){const{x0:t,y0:i,x1:n,y1:s}=this.getGradientPoints(e),o=tn("linearGradient");return o.setAttribute("x1",String(t)),o.setAttribute("y1",String(i)),o.setAttribute("x2",String(n)),o.setAttribute("y2",String(s)),o.setAttribute("gradientUnits","userSpaceOnUse"),o}},Zoe=class extends pM{constructor(e,t,i){super(e,t,i)}createCanvasGradient(e,t,i){const n=i?.centerX??t.x+t.width*.5,s=i?.centerY??t.y+t.height*.5,o=i?.innerRadius??0,r=i?.outerRadius??Math.hypot(t.width*.5,t.height*.5)/Math.SQRT2;return e.createRadialGradient(n,s,o,n,s,r)}createSvgGradient(e){const t=e.x+e.width*.5,i=e.y+e.height*.5,n=tn("radialGradient");return n.setAttribute("cx",String(t)),n.setAttribute("cy",String(i)),n.setAttribute("r",String(Math.hypot(e.width*.5,e.height*.5)/Math.SQRT2)),n.setAttribute("gradientUnits","userSpaceOnUse"),n}},Qe=class{handleUnknownProperties(e,t){}set(e){const{className:t=this.constructor.name}=this.constructor;if(e==null)return this.clear(),this;if(typeof e!="object")return fe.warn(`unable to set ${t} - expecting a properties object`),this;const i=new Set(Object.keys(e));for(const n of Su(this))if(i.has(n)){const s=e[n],o=this;if(ih(o[n]))if(o[n]instanceof Ff){const r=o[n].reset(s);r==null?fe.warn(`unable to set [${String(n)}] - expecting a properties array`):o[n]=r}else o[n].set(s);else Qt(s)?o[n]=gv(s,o[n]??{}):o[n]=s;i.delete(n)}this.handleUnknownProperties(i,e);for(const n of i)fe.warn(`unable to set [${String(n)}] in ${t} - property is unknown`);return this}clear(){for(const e of Su(this)){const t=this[e];ih(t)?t.clear():this[e]=void 0}return this}toJson(){return Su(this).reduce((e,t)=>{const i=this[t];return e[String(t)]=ih(i)?i.toJson():i,e},{})}},Ff=class pW extends Array{constructor(t,...i){super(i.length);const s=(o=>!!o?.prototype?.constructor?.name)(t)?o=>new t().set(o):t;Object.defineProperty(this,"itemFactory",{value:s,enumerable:!1,configurable:!1}),this.set(i)}set(t){if(ht(t)){this.length=t.length;for(let i=0;i<t.length;i++)this[i]=this.itemFactory(t[i])}return this}reset(t){if(Array.isArray(t))return new pW(this.itemFactory,...t)}toJson(){return this.map(t=>t?.toJson?.()??t)}};function ih(e){return e instanceof Qe||e instanceof Ff}var V1=class extends Qe{constructor(){super(...arguments),this.color="black"}};A([k],V1.prototype,"stop",2);A([k],V1.prototype,"color",2);function Xoe(e){let t;for(const i of e)if(i?.stop!=null){if(t!=null&&i.stop<t)return!1;t=i.stop}return!0}function gW(e){return e.flatMap((t,i)=>{const{stop:n}=t,s=e.at(i+1)?.color;return s==null?[t]:[t,{stop:n,color:s}]})}function Qoe(e,t){const i=t==="discrete"?1:0,n=e.map((s,o,{length:r})=>({stop:(o+i)/(r-1+i),color:s}));return t==="discrete"?gW(n):n}function fW(e,t,i,n="continuous"){const s=e.map(y=>typeof y=="string"?{color:y}:y);if(s.length===0)return Qoe(t,n);if(!Xoe(s))return fe.warnOnce("[fills] must have the stops defined in ascending order"),[];const o=Math.min(...i),r=Math.max(...i),a=n==="discrete",l=new Float64Array(s.length);let c=0,d=-1;for(let y=0;y<s.length;y+=1){const b=s[y];if(y>=d){d=s.length-1;for(let w=y+1;w<s.length;w+=1)if(s[w]?.stop!=null){d=w;break}}let C=b?.stop;if(C==null){const w=s[c]?.stop,x=s[d]?.stop,M=w??o,E=x??r,I=a&&w==null?1:0;C=M+(E-M)*(y-c+I)/(d-c+I)}else c=y;l[y]=Math.max(0,Math.min(1,(C-o)/(r-o)))}let p=s.find(y=>y.color!=null)?.color,g;const m=s.map((y,b)=>{let C=y?.color;const w=l[b];return C!=null?p=C:p==null?(g==null&&(g=new Nf,g.domain=[0,1],g.range=t),C=g.convert(w)):C=p,{stop:w,color:C}});return n==="discrete"?gW(m):m}var Joe=class{constructor(e,t){this.imageLoader=e,this._cache=void 0,this.url=t.url,this.backgroundFill=t.backgroundFill??"black",this.backgroundFillOpacity=t.backgroundFillOpacity??1,this.repeat=t.repeat??"no-repeat",this.width=t.width,this.height=t.height,this.fit=t.fit??"stretch",this.rotation=t.rotation??0}createCanvasImage(e,t,i,n){if(!t)return null;const[s,o]=this.getSize(t.width,t.height,i,n);return s<1||o<1?(fe.warnOnce("Image fill is too small to render, ignoring."),null):e.createPattern(t,this.repeat)}getSize(e,t,i,n){const{fit:s}=this;let o=e,r=t,a=1;const l=i/n,c=e/t;return s==="stretch"||e===0||t===0?(o=i,r=n):s==="contain"?a=c>l?i/e:n/t:s==="cover"&&(a=c>l?n/t:i/e),[Math.max(1,o*a),Math.max(1,r*a)]}setImageTransform(e,t){if(typeof e=="string")return;const{url:i,rotation:n,width:s,height:o}=this,r=this.imageLoader?.loadImage(i);if(!r)return;const a=ac(n),l=Math.cos(a),c=Math.sin(a),[d,p]=this.getSize(r.width,r.height,s??t.width,o??t.height),g=d/r.width,m=p/r.height,y=t.x+t.width/2,b=t.y+t.height/2,C=l*d-c*p,w=c*d+l*p,x=C/2,M=w/2;e?.setTransform(new DOMMatrix([l*g,c*m,-c*g,l*m,y-x,b-M]))}createPattern(e,t,i,n){const s=this.width??t,o=this.height??i,r=this._cache;if(r!=null&&r.ctx===e&&r.width===s&&r.height===o)return r.pattern;const a=this.imageLoader?.loadImage(this.url,n),l=this.createCanvasImage(e,a,s,o);if(l!=null)return this._cache={ctx:e,pattern:l,width:s,height:o},l}toSvg(e,t){const{url:i,rotation:n,backgroundFill:s,backgroundFillOpacity:o}=this,{x:r,y:a,width:l,height:c}=e,d=tn("pattern");d.setAttribute("viewBox",`0 0 ${l} ${c}`),d.setAttribute("x",String(r)),d.setAttribute("y",String(a)),d.setAttribute("width",String(l)),d.setAttribute("height",String(c)),d.setAttribute("patternUnits","userSpaceOnUse");const p=tn("rect");p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("width",String(l)),p.setAttribute("height",String(c)),p.setAttribute("fill",s),p.setAttribute("fill-opacity",String(o)),d.appendChild(p);const g=tn("image");return g.setAttribute("href",i),g.setAttribute("x","0"),g.setAttribute("y","0"),g.setAttribute("width",String(l)),g.setAttribute("height",String(c)),g.setAttribute("preserveAspectRatio","none"),g.setAttribute("transform",`scale(${1/t}) rotate(${n}, ${l/2}, ${c/2})`),d.appendChild(g),d}};function r_(e,t,i,n){const s=e-i,o=t-n;return s*s+o*o}function jx(e,t,i,n,s,o,r){if(i===s&&n===o)return Math.min(r,r_(e,t,i,n));const a=s-i,l=o-n,c=Math.max(0,Math.min(1,((e-i)*a+(t-n)*l)/(a*a+l*l))),d=i+c*a,p=n+c*l;return Math.min(r,r_(e,t,d,p))}var ere=/^[\t\n\f\r ]*([achlmqstvz])[\t\n\f\r ]*/i,yi=/^[+-]?((\d*\.\d+)|(\d+\.)|(\d+))(e[+-]?\d+)?/i,tre=/[\t\n\f\r ]*,?[\t\n\f\r ]*/,a_=/^[01]/,ire={z:[],h:[yi],v:[yi],m:[yi,yi],l:[yi,yi],t:[yi,yi],s:[yi,yi,yi,yi],q:[yi,yi,yi,yi],c:[yi,yi,yi,yi,yi,yi],a:[yi,yi,yi,a_,a_,yi,yi]};function nre(e){if(!e)return;const t=[];let i=0,n;for(;i<e.length;){const s=ere.exec(e.slice(i));let o;if(s==null){if(!n){fe.warnOnce(`Invalid SVG path, error at index ${i}: Missing command.`);return}o=n}else o=s[1],i+=s[0].length;const r=sre(o,e,i);if(!r)return;i=r[0],n=o,t.push(r[1])}return t}function sre(e,t,i){const n=ire[e.toLocaleLowerCase()],s={command:e,params:[]};for(const o of n){const r=t.slice(i),a=o.exec(r);if(a!=null){s.params.push(Number.parseFloat(a[0])),i+=a[0].length;const l=tre.exec(r.slice(a[0].length));l!=null&&(i+=l[0].length)}else{if(s.params.length===1)return[i,s];fe.warnOnce(`Invalid SVG path, error at index ${i}: No path segment parameters for command [${e}]`);return}}return[i,s]}function ore(e,t){const i=-t/e;return e!==0&&i>=0&&i<=1?[i]:[]}function rre(e,t,i,n=1e-6){if(Math.abs(e)<n)return ore(t,i);const s=t*t-4*e*i,o=[];if(Math.abs(s)<n){const r=-t/(2*e);r>=0&&r<=1&&o.push(r)}else if(s>0){const r=Math.sqrt(s),a=(-t-r)/(2*e),l=(-t+r)/(2*e);a>=0&&a<=1&&o.push(a),l>=0&&l<=1&&o.push(l)}return o}function are(e,t,i,n,s=1e-6){if(Math.abs(e)<s)return rre(t,i,n,s);const o=t/e,r=i/e,a=n/e,l=(3*r-o*o)/9,c=(9*o*r-27*a-2*o*o*o)/54,d=l*l*l+c*c,p=1/3,g=[];if(d>=0){const m=Math.sqrt(d),y=Math.sign(c+m)*Math.pow(Math.abs(c+m),p),b=Math.sign(c-m)*Math.pow(Math.abs(c-m),p),C=Math.abs(Math.sqrt(3)*(y-b)/2),w=-p*o+(y+b);if(w>=0&&w<=1&&g.push(w),Math.abs(C)<s){const x=-p*o-(y+b)/2;x>=0&&x<=1&&g.push(x)}}else{const m=Math.acos(c/Math.sqrt(-l*l*l)),y=p*o,b=2*Math.sqrt(-l),C=b*Math.cos(p*m)-y,w=b*Math.cos(p*(m+2*Math.PI))-y,x=b*Math.cos(p*(m+4*Math.PI))-y;C>=0&&C<=1&&g.push(C),w>=0&&w<=1&&g.push(w),x>=0&&x<=1&&g.push(x)}return g}function Oy(e,t,i,n,s,o,r,a){const l=(i-e)*(a-o)-(n-t)*(r-s);if(l===0)return 0;const c=((r-s)*(t-o)-(e-s)*(a-o))/l,d=((i-e)*(t-o)-(n-t)*(e-s))/l;return c>=0&&c<=1&&d>=0&&d<=1?1:0}function lre(e,t,i,n,s,o,r,a,l,c,d,p){let g=0;const m=c-p,y=d-l,b=l*(p-c)-c*(d-l),C=l_(e,i,s,r),w=l_(t,n,o,a),x=m*C[0]+y*w[0],M=m*C[1]+y*w[1],E=m*C[2]+y*w[2],I=m*C[3]+y*w[3]+b,N=are(x,M,E,I);for(const T of N){const P=T*T,O=T*P,G=C[0]*O+C[1]*P+C[2]*T+C[3],B=w[0]*O+w[1]*P+w[2]*T+w[3];let z;l===d?z=(B-c)/(p-c):z=(G-l)/(d-l),z>=0&&z<=1&&g++}return g}function l_(e,t,i,n){return[-e+3*t-3*i+n,3*e-6*t+3*i,-3*e+3*t,e]}function rf(e,t,i,n,s){return(1-s)**3*e+3*(1-s)**2*s*t+3*(1-s)*s**2*i+s**3*n}function Wx(e,t,i,n,s){if(s<=Math.min(e,n))return e<n?0:1;if(s>=Math.max(e,n))return e<n?1:0;let o=0,r=1,a=Number.NaN;for(let l=0;l<12;l+=1)a=(o+r)/2,rf(e,t,i,n,a)<s?o=a:r=a;return a}function fv(e,t,i,n,s,o,r,a,l){const c=(1-l)*e+l*i,d=(1-l)*t+l*n,p=(1-l)*i+l*s,g=(1-l)*n+l*o,m=(1-l)*s+l*r,y=(1-l)*o+l*a,b=(1-l)*c+l*p,C=(1-l)*d+l*g,w=(1-l)*p+l*m,x=(1-l)*g+l*y,M=(1-l)*b+l*w,E=(1-l)*C+l*x;return[[{x:e,y:t},{x:c,y:d},{x:b,y:C},{x:M,y:E}],[{x:M,y:E},{x:w,y:x},{x:m,y},{x:r,y:a}]]}function c_(e,t,i,n){const s=-e+3*t-3*i+n,o=2*(e-2*t+i),r=-e+t;if(s===0){if(o!==0){const l=-r/o;if(l>0&&l<1)return[l]}return[]}const a=o*o-4*s*r;if(a>=0){const l=Math.sqrt(a),c=(-o+l)/(2*s),d=(-o-l)/(2*s);return[c,d].filter(p=>p>0&&p<1)}return[]}function mW(e,t,i,n,s,o,r,a){const l=c_(e,i,s,r),c=c_(t,n,o,a);return[...l,...c]}function EE(e,t,i){const n=rf(e[0].x,e[1].x,e[2].x,e[3].x,.5),s=rf(e[0].y,e[1].y,e[2].y,e[3].y,.5),o=Math.hypot(n-t,s-i),r=Math.min(Math.hypot(e[0].x-t,e[0].y-i),Math.hypot(e[1].x-t,e[1].y-i),Math.hypot(e[2].x-t,e[2].y-i),Math.hypot(e[3].x-t,e[3].y-i));return{points:e,distance:o,minDistance:r}}function yW(e,t,i,n,s,o,r,a,l,c,d=1){let g={value:EE([{x:e,y:t},{x:i,y:n},{x:s,y:o},{x:r,y:a}],l,c),next:null},m;for(;g!=null;){const{points:y,distance:b,minDistance:C}=g.value;if(g=g.next,(m==null||b<m.distance)&&(m={distance:b,minDistance:C}),m!=null&&m.distance-C<=d)continue;const[w,x]=fv(y[0].x,y[0].y,y[1].x,y[1].y,y[2].x,y[2].y,y[3].x,y[3].y,.5),M=[EE(w,l,c),EE(x,l,c)].sort(u_);g=Roe(g,M,u_)}return m?.distance??1/0}var u_=(e,t)=>t.minDistance-e.minDistance,af=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.cx=Number.NaN,this.cy=Number.NaN,this.sx=Number.NaN,this.sy=Number.NaN,this.openedPath=!1,this.closedPath=!1}isEmpty(){return this.commands.length===0}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(e,t){this.openedPath=!0,this.sx=e,this.sy=t,this.cx=e,this.cy=t,this.path2d.moveTo(e,t),this.commands.push(0),this.params.push(e,t)}lineTo(e,t){this.openedPath?(this.cx=e,this.cy=t,this.path2d.lineTo(e,t),this.commands.push(1),this.params.push(e,t)):this.moveTo(e,t)}cubicCurveTo(e,t,i,n,s,o){this.openedPath||this.moveTo(e,t),this.path2d.bezierCurveTo(e,t,i,n,s,o),this.commands.push(2),this.params.push(e,t,i,n,s,o)}closePath(){this.openedPath&&(this.cx=this.sx,this.cy=this.sy,this.sx=Number.NaN,this.sy=Number.NaN,this.path2d.closePath(),this.commands.push(3),this.openedPath=!1,this.closedPath=!0)}rect(e,t,i,n){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath()}roundRect(e,t,i,n,s){s=Math.min(s,i/2,n/2),this.moveTo(e,t+s),this.arc(e+s,t+s,s,Math.PI,1.5*Math.PI),this.lineTo(e+s,t),this.lineTo(e+i-s,t),this.arc(e+i-s,t+s,s,1.5*Math.PI,2*Math.PI),this.lineTo(e+i,t+s),this.lineTo(e+i,t+n-s),this.arc(e+i-s,t+n-s,s,0,Math.PI/2),this.lineTo(e+i-s,t+n),this.lineTo(e+s,t+n),this.arc(e+ +s,t+n-s,s,Math.PI/2,Math.PI),this.lineTo(e,t+n-s),this.closePath()}ellipse(e,t,i,n,s,o,r,a=!1){const l=i,c=n/i,d=Math.cos(s),p=Math.sin(s),g=-c*p,m=c*d,y=l*Math.cos(o),b=l*Math.sin(o),C=e+d*y+g*b,w=t+p*y+m*b,x=(C-this.cx)**2+(w-this.cy)**2;this.openedPath?x>1e-6&&this.lineTo(C,w):this.moveTo(C,w);let M=a?-On(o-r):On(r-o);Math.abs(Math.abs(r-o)-2*Math.PI)<1e-6&&M<2*Math.PI&&(M+=2*Math.PI*(a?-1:1));const E=Math.max(Math.ceil(Math.abs(M)/(Math.PI/2)),1),I=M/E,N=4/3*Math.tan(I/4);for(let T=0;T<E;T+=1){const P=o+I*(T+0),O=o+I*(T+1),G=l*Math.sin(P),B=l*Math.cos(P),z=l*Math.sin(O),j=l*Math.cos(O),X=B-N*G,q=G+N*B,H=j+N*z,K=z-N*j,U=j,de=z;this.cubicCurveTo(e+d*X+g*q,t+p*X+m*q,e+d*H+g*K,t+p*H+m*K,e+d*U+g*de,t+p*U+m*de)}}arc(e,t,i,n,s,o){this.ellipse(e,t,i,i,0,n,s,o)}appendSvg(e){const t=nre(e);if(t==null)return!1;let i=0,n=0,s,o,r=0,a=0;for(const{command:l,params:c}of t){s??(s=c[0]),o??(o=c[1]);const d=l===l.toLowerCase(),p=d?s:0,g=d?o:0;switch(l.toLowerCase()){case"m":this.moveTo(p+c[0],g+c[1]),s=p+c[0],o=g+c[1],i=s,n=o;break;case"c":this.cubicCurveTo(p+c[0],g+c[1],p+c[2],g+c[3],p+c[4],g+c[5]),r=p+c[2],a=g+c[3],s=p+c[4],o=g+c[5];break;case"s":this.cubicCurveTo(s+s-r,o+o-a,p+c[0],g+c[1],p+c[2],g+c[3]),r=p+c[0],a=g+c[1],s=p+c[2],o=g+c[3];break;case"q":this.cubicCurveTo((p+2*c[0])/3,(g+2*c[1])/3,(2*c[0]+c[2])/3,(2*c[1]+c[3])/3,c[2],c[3]),r=c[0],a=c[1],s=c[2],o=c[3];break;case"t":this.cubicCurveTo((s+2*(s+s-r))/3,(o+2*(o+o-a))/3,(2*(s+s-r)+c[0])/3,(2*(o+o-a)+c[1])/3,c[0],c[1]),r=s+s-r,a=o+o-a,s=c[0],o=c[1];break;case"a":this.svgEllipse(s,o,c[0],c[1],c[2]*Math.PI/180,c[3],c[4],p+c[5],g+c[6]),s=p+c[5],o=g+c[6];break;case"h":this.lineTo(p+c[0],o),s=p+c[0];break;case"l":this.lineTo(p+c[0],g+c[1]),s=p+c[0],o=g+c[1];break;case"v":this.lineTo(s,g+c[0]),o=g+c[0];break;case"z":this.closePath(),s=i,o=n;break;default:throw new Error(`Could not translate command '${l}' with '${c.join(" ")}'`)}}return!0}svgEllipse(e,t,i,n,s,o,r,a,l){i=Math.abs(i),n=Math.abs(n);const c=(e-a)/2,d=(t-l)/2,p=Math.sin(s),g=Math.cos(s),m=g*c+p*d,y=-p*c+g*d,b=m/i,C=y/n;let w=b*b+C*C,x=(e+a)/2,M=(t+l)/2,E=0,I=0;w>=1?(w=Math.sqrt(w),i*=w,n*=w):(w=Math.sqrt(1/w-1),o===r&&(w=-w),E=w*i*C,I=-w*n*b,x+=g*E-p*I,M+=p*E+g*I);const N=Math.atan2((y-I)/n,(m-E)/i),T=Math.atan2((-y-I)/n,(-m-E)/i)-N,P=N+T,O=!!(1-r);this.ellipse(x,M,i,n,s,N,P,O)}clear(e){e&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(e,t){const i=this.commands,n=this.params,s=i.length,o=-1e4,r=-1e4;let a=Number.NaN,l=Number.NaN,c=0,d=0,p=0;for(let g=0,m=0;g<s;g++)switch(i[g]){case 0:p+=Oy(a,l,c,d,o,r,e,t),c=n[m++],a=c,d=n[m++],l=d;break;case 1:p+=Oy(c,d,n[m++],n[m++],o,r,e,t),c=n[m-2],d=n[m-1];break;case 2:p+=lre(c,d,n[m++],n[m++],n[m++],n[m++],n[m++],n[m++],o,r,e,t),c=n[m-2],d=n[m-1];break;case 3:p+=Oy(a,l,c,d,o,r,e,t);break}return p%2===1}distanceSquared(e,t){let i=1/0;const n=this.commands,s=this.params,o=n.length;let r=Number.NaN,a=Number.NaN,l=0,c=0;for(let d=0,p=0;d<o;d++)switch(n[d]){case 0:l=r=s[p++],c=a=s[p++];break;case 1:{const g=l,m=c;l=s[p++],c=s[p++],i=jx(e,t,g,m,l,c,i);break}case 2:{const g=l,m=c,y=s[p++],b=s[p++],C=s[p++],w=s[p++];l=s[p++],c=s[p++],i=yW(g,m,y,b,C,w,l,c,e,t)**2;break}case 3:i=jx(e,t,l,c,r,a,i);break}return i}toSVG(e=(t,i)=>({x:t,y:i})){const t=[],{commands:i,params:n}=this,s=(r,a)=>{t.push(r);for(let l=0;l<a;l+=2){const{x:c,y:d}=e(n[o++],n[o++]);t.push(c,d)}};let o=0;for(const r of i)switch(r){case 0:s("M",2);break;case 1:s("L",2);break;case 2:s("C",6);break;case 3:s("Z",0);break}return t.join(" ")}computeBBox(){const{commands:e,params:t}=this;let[i,n,s,o]=[1/0,1/0,-1/0,-1/0],[r,a]=[Number.NaN,Number.NaN],[l,c]=[Number.NaN,Number.NaN];const d=(g,m)=>{i=Math.min(m,i),n=Math.min(g,n),s=Math.max(g,s),o=Math.max(m,o),r=g,a=m};let p=0;for(const g of e)switch(g){case 0:d(t[p++],t[p++]),l=r,c=a;break;case 1:d(t[p++],t[p++]);break;case 2:{const m=r,y=a,b=t[p++],C=t[p++],w=t[p++],x=t[p++],M=t[p++],E=t[p++],I=mW(m,y,b,C,w,x,M,E);for(const N of I){const T=rf(m,b,w,M,N),P=rf(y,C,x,E,N);d(T,P)}d(M,E);break}case 3:d(l,c),l=Number.NaN,c=Number.NaN;break}return new Le(n,i,s-n,o-i)}};function Fn(e,t,i){const n=Math.round(t*e)/e;return i==null?n:i===0?0:i<1?Math.ceil(i*e)/e:Math.round((i+t)*e)/e-n}function d_(e,t){return Math.floor(t*e)/e}function TE(e,t,i){const{width:n,height:s,padding:o,strokeWidth:r}=t,a=n/2,l=s/2,c=Math.max(1,n-o-r/2),d=Math.max(1,s-o-r/2);let p=!1;for(const[g,m]of i){const y=a+(g-.5)*c,b=l+(m-.5)*d;p?e.lineTo(y,b):e.moveTo(y,b),p=!0}e.closePath()}var h_={circles(e,{width:t,strokeWidth:i,padding:n}){const s=t/2,o=Math.max(1,s-n-i/2);e.arc(s,s,o,0,Math.PI*2)},squares(e,{width:t,height:i,pixelRatio:n,padding:s,strokeWidth:o}){const r=s+o/2;e.moveTo(Fn(n,r),Fn(n,r)),e.lineTo(Fn(n,t-r),Fn(n,r)),e.lineTo(Fn(n,t-r),Fn(n,i-r)),e.lineTo(Fn(n,r),Fn(n,i-r)),e.closePath()},triangles(e,t){TE(e,t,[[.5,0],[1,1],[0,1]])},diamonds(e,t){TE(e,t,[[.5,0],[1,.5],[.5,1],[0,.5]])},stars(e,{width:t,height:i,padding:n}){const o=Math.max(1,(t-n)/2),r=o/2,a=Math.PI/2;for(let l=0;l<10;l++){const c=l%2===0?o:r,d=l*Math.PI/5-a,p=t/2+Math.cos(d)*c,g=i/2+Math.sin(d)*c;e.lineTo(p,g)}e.closePath()},hearts(e,{width:t,height:i,padding:n}){const s=Math.max(1,t/4-n/2),o=t/2,r=i/2+s/2;e.arc(o-s,r-s,s,ds(130),ds(330)),e.arc(o+s,r-s,s,ds(220),ds(50)),e.lineTo(o,r+s),e.closePath()},crosses(e,t){TE(e,t,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},"vertical-lines"(e,{width:t,height:i,pixelRatio:n,strokeWidth:s}){const o=Fn(n,t/2)-s%2/2;e.moveTo(o,0),e.lineTo(o,i)},"horizontal-lines"(e,{width:t,height:i,pixelRatio:n,strokeWidth:s}){const o=Fn(n,i/2)-s%2/2;e.moveTo(0,o),e.lineTo(t,o)},"forward-slanted-lines"(e,{width:t,height:i,strokeWidth:n}){const s=Math.atan2(i,t),o=n*Math.cos(s),r=n*Math.sin(s);e.moveTo(-o,r),e.lineTo(o,-r),e.moveTo(-o,i+r),e.lineTo(t+o,-r),e.moveTo(t-o,i+r),e.lineTo(t+o,i-r)},"backward-slanted-lines"(e,{width:t,height:i,strokeWidth:n}){const s=Math.atan2(i,t),o=n*Math.cos(s),r=n*Math.sin(s);e.moveTo(t-o,-r),e.lineTo(t+o,r),e.moveTo(-o,-r),e.lineTo(t+o,i+r),e.moveTo(-o,i-r),e.lineTo(o,i+r)}},cre=class{constructor(e){this._cache=void 0,this.width=Math.max(e?.width??10,1),this.height=Math.max(e?.height??10,1),this.fill=e.fill??"none",this.fillOpacity=e.fillOpacity??1,this.backgroundFill=e.backgroundFill??"none",this.backgroundFillOpacity=e.backgroundFillOpacity??1,this.stroke=e.stroke??"black",this.strokeOpacity=e.strokeOpacity??1,this.strokeWidth=e.strokeWidth??1,this.padding=e.padding??1,this.pattern=e.pattern??"forward-slanted-lines",this.rotation=e.rotation??0,this.scale=e.scale??1,this.path=e.path}getPath(e){const{pattern:t,width:i,height:n,padding:s,strokeWidth:o,path:r}=this,a=new af;let l=h_[t]!=null;return r&&l&&(l=!a.appendSvg(r)),l&&h_[t](a,{width:i,height:n,pixelRatio:e,strokeWidth:o,padding:s}),a}renderStroke(e,t){const{stroke:i,strokeWidth:n,strokeOpacity:s}=this;n&&(t.strokeStyle=i,t.lineWidth=n,t.globalAlpha=s,t.stroke(e))}renderFill(e,t){const{fill:i,fillOpacity:n}=this;i!=="none"&&(t.fillStyle=i,t.globalAlpha=n,t.fill(e))}createCanvasPattern(e,t){const{width:i,height:n,scale:s,backgroundFill:o,backgroundFillOpacity:r}=this;if(i*s<1||n*s<1)return fe.warnOnce("Pattern fill is too small to render, ignoring."),null;const a=new P1({width:i,height:n,pixelRatio:t*s}),l=a.context;o!=="none"&&(l.fillStyle=o,l.globalAlpha=r,l.fillRect(0,0,i,n));const c=this.getPath(t).getPath2D();this.renderFill(c,l),this.renderStroke(c,l);const d=e.createPattern(a.canvas,"repeat");return this.setPatternTransform(d,t),a.destroy(),d}setPatternTransform(e,t,i=0,n=0){if(e==null)return;const s=ac(this.rotation),o=1/t,r=Math.cos(s)*o,a=Math.sin(s)*o;e.setTransform(new DOMMatrix([r,a,-a,r,i,n]))}createPattern(e,t){if(this._cache!=null&&this._cache.ctx===e&&this._cache.pixelRatio===t)return this._cache.pattern;const i=this.createCanvasPattern(e,t);if(i!=null)return this._cache={ctx:e,pattern:i,pixelRatio:t},i}toSvg(){const{width:e,height:t,fill:i,fillOpacity:n,backgroundFill:s,backgroundFillOpacity:o,stroke:r,strokeWidth:a,strokeOpacity:l,rotation:c,scale:d}=this,p=tn("pattern");p.setAttribute("viewBox",`0 0 ${e} ${t}`),p.setAttribute("width",String(e)),p.setAttribute("height",String(t)),p.setAttribute("patternUnits","userSpaceOnUse");const g=tn("rect");g.setAttribute("x","0"),g.setAttribute("y","0"),g.setAttribute("width",String(e)),g.setAttribute("height",String(t)),g.setAttribute("fill",s),g.setAttribute("fill-opacity",String(o)),p.appendChild(g);const m=tn("path");return m.setAttribute("fill",i),m.setAttribute("fill-opacity",String(n)),m.setAttribute("stroke-opacity",String(l)),m.setAttribute("stroke",r),m.setAttribute("stroke-width",String(a)),m.setAttribute("transform",`rotate(${c}) scale(${d})`),m.setAttribute("d",this.getPath(1).toSVG()),p.appendChild(m),p}};function Ar(e){return Zt(e)&&e.type=="gradient"}function ure(e){return ht(e)&&e.every(t=>typeof t=="string")}function lc(e){return e!==null&&Zt(e)&&e.type=="pattern"}function bh(e){return e!==null&&Zt(e)&&e.type=="image"}function dre(e){return Ar(e)||lc(e)}function p_(e,t){const{fontStyle:i,fontWeight:n,fontSize:s,fontFamily:o}=t;i&&e.setAttribute("font-style",i),n&&e.setAttribute("font-weight",String(n)),s!=null&&e.setAttribute("font-size",String(s)),o&&e.setAttribute("font-family",o)}function hre(e,t){const{stroke:i,strokeWidth:n,strokeOpacity:s}=t;i&&e.setAttribute("stroke",i),n!=null&&e.setAttribute("stroke-width",String(n)),s!=null&&e.setAttribute("stroke-opacity",String(s))}function pre(e,t){const{lineDash:i,lineDashOffset:n}=t;if(i?.some(s=>s!==0)){const s=i.length%2===1?[...i,...i]:i;e.setAttribute("stroke-dasharray",s.join(" ")),n!=null&&e.setAttribute("stroke-dashoffset",String(n))}}var on=class extends rc{constructor(){super(...arguments),this.drawingMode="overlay",this.fillOpacity=1,this.strokeOpacity=1,this.fill="black",this.strokeWidth=0,this.lineDashOffset=0,this.opacity=1}getGradient(e){if(Ar(e))return this.createGradient(e)}createGradient(e){const{colorSpace:t="rgb",gradient:i="linear",colorStops:n,rotation:s=0,reverse:o=!1}=e;if(n==null)return;let r=fW(n,["black"],[0,1]);switch(o&&(r=r.map(a=>({color:a.color,stop:1-a.stop})).reverse()),i){case"linear":return new hW(t,r,s);case"radial":return new Zoe(t,r);case"conic":return new dW(t,r,s)}}getPattern(e){if(lc(e))return this.createPattern(e)}createPattern(e){return new cre(e)}getImage(e){if(bh(e))return this.createImage(e)}createImage(e){return new Joe(this.imageLoader,e)}onFillChange(){typeof this.fill=="object"&&qs(this._cachedFill??{},this.fill)||(this.fillGradient=this.getGradient(this.fill),this.fillPattern=this.getPattern(this.fill),this.fillImage=this.getImage(this.fill),this._cachedFill=this.fill)}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(e,t){return Fn(this.layerManager?.canvas?.pixelRatio??1,e,t)}markDirty(e){super.markDirty(e),this.cachedDefaultGradientFillBBox=void 0}fillStroke(e,t){this.drawingMode==="cutout"&&(e.globalCompositeOperation="destination-out",this.executeFill(e,t),this.executeStroke(e,t),e.globalCompositeOperation="source-over"),this.renderFill(e,t),this.renderStroke(e,t)}renderFill(e,t){const{fill:i,fillOpacity:n,fillImage:s}=this;if(i!=null&&i!=="none"&&n>0){const{globalAlpha:o}=e;s&&(e.globalAlpha=s.backgroundFillOpacity,e.fillStyle=s.backgroundFill,this.executeFill(e,t),e.globalAlpha=o),this.applyFillAndAlpha(e),this.applyShadow(e),this.executeFill(e,t),e.globalAlpha=o,e.shadowColor="rgba(0, 0, 0, 0)"}}executeFill(e,t){t?e.fill(t):e.fill()}applyFillAndAlpha(e){const{fill:t,fillGradient:i,fillPattern:n,fillImage:s,fillOpacity:o=1,opacity:r=1}=this;if(e.globalAlpha*=r*o,i){const{fillBBox:a=this.getDefaultGradientFillBBox()??this.getBBox(),fillParams:l}=this;e.fillStyle=i.createGradient(e,a,l)??"black"}else if(n){const{x:a,y:l}=this.getBBox(),c=this.layerManager?.canvas?.pixelRatio??1,d=n.createPattern(e,c);n.setPatternTransform(d,c,a,l),d?e.fillStyle=d:(e.fillStyle=n.fill,e.globalAlpha*=n.fillOpacity)}else if(s){const a=this.getBBox(),l=s.createPattern(e,a.width,a.height,this);s.setImageTransform(l,a),e.fillStyle=l??"transparent"}else e.fillStyle=typeof t=="string"?t:"black"}applyStrokeAndAlpha(e){const{stroke:t,strokeOpacity:i=1,strokeGradient:n,opacity:s=1}=this;e.strokeStyle=n?.createGradient(e,this.getBBox())??(typeof t=="string"?t:void 0)??"black",e.globalAlpha*=s*i}applyShadow(e){const t=this.layerManager?.canvas.pixelRatio??1,i=this.fillShadow;i?.enabled&&(e.shadowColor=i.color,e.shadowOffsetX=i.xOffset*t,e.shadowOffsetY=i.yOffset*t,e.shadowBlur=i.blur*t)}renderStroke(e,t){const{stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,lineCap:a,lineJoin:l,miterLimit:c}=this;if(i!=null&&i!=="none"&&n>0&&s>0){const{globalAlpha:d}=e;this.applyStrokeAndAlpha(e),e.lineWidth=n,o&&e.setLineDash(o),r&&(e.lineDashOffset=r),a&&(e.lineCap=a),l&&(e.lineJoin=l),c!=null&&(e.miterLimit=c),this.executeStroke(e,t),e.globalAlpha=d}}executeStroke(e,t){t?e.stroke(t):e.stroke()}getDefaultGradientFillBBox(){return this.cachedDefaultGradientFillBBox??(this.cachedDefaultGradientFillBBox=Object.freeze(this.computeDefaultGradientFillBBox())),this.cachedDefaultGradientFillBBox}computeDefaultGradientFillBBox(){}containsPoint(e,t){return this.isPointInPath(e,t)}applySvgFillAttributes(e,t){const{fill:i,fillOpacity:n}=this;if(typeof i=="string")e.setAttribute("fill",i);else if(Ar(i)&&this.fillGradient){t??(t=[]);const s=this.fillGradient.toSvg(this.fillBBox??this.getBBox()),o=xE();s.setAttribute("id",o),t.push(s),e.setAttribute("fill",`url(#${o})`)}else if(lc(i)&&this.fillPattern){t??(t=[]);const s=this.fillPattern.toSvg(),o=xE();s.setAttribute("id",o),t.push(s),e.setAttribute("fill",`url(#${o})`)}else if(bh(i)&&this.fillImage){t??(t=[]);const s=this.layerManager?.canvas?.pixelRatio??1,o=this.fillImage.toSvg(this.getBBox(),s),r=xE();o.setAttribute("id",r),t.push(o),e.setAttribute("fill",`url(#${r})`)}else e.setAttribute("fill","none");return e.setAttribute("fill-opacity",String(n)),t}applySvgStrokeAttributes(e){const{stroke:t,strokeOpacity:i,strokeWidth:n,lineDash:s,lineDashOffset:o}=this;hre(e,{stroke:fn(t)?t:void 0,strokeOpacity:i,strokeWidth:n}),pre(e,{lineDash:s,lineDashOffset:o})}};A([Me()],on.prototype,"drawingMode",2);A([Me()],on.prototype,"fillOpacity",2);A([Me()],on.prototype,"strokeOpacity",2);A([Uo({changeCb:e=>e.onFillChange()})],on.prototype,"fill",2);A([Uo({changeCb:e=>e.onStrokeChange()})],on.prototype,"stroke",2);A([Me()],on.prototype,"strokeWidth",2);A([_1()],on.prototype,"lineDash",2);A([Me()],on.prototype,"lineDashOffset",2);A([Me()],on.prototype,"lineCap",2);A([Me()],on.prototype,"lineJoin",2);A([Me()],on.prototype,"miterLimit",2);A([Me({convertor:e=>st(0,e??1,1)})],on.prototype,"opacity",2);A([Uo({checkDirtyOnAssignment:!0})],on.prototype,"fillShadow",2);A([Uo({changeCb:e=>e.onFillChange()})],on.prototype,"fillBBox",2);A([Uo({changeCb:e=>e.onFillChange()})],on.prototype,"fillParams",2);var vW=[1,0,0,1,0,0],Ch=class VS{get e(){return[...this.elements]}constructor(t=vW){this.elements=[...t]}setElements(t){const i=this.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this}get identity(){const t=this.elements;return ho(t[0],1)&&ho(t[1],0)&&ho(t[2],0)&&ho(t[3],1)&&ho(t[4],0)&&ho(t[5],0)}AxB(t,i,n){const s=t[0]*i[0]+t[2]*i[1],o=t[1]*i[0]+t[3]*i[1],r=t[0]*i[2]+t[2]*i[3],a=t[1]*i[2]+t[3]*i[3],l=t[0]*i[4]+t[2]*i[5]+t[4],c=t[1]*i[4]+t[3]*i[5]+t[5];n=n??t,n[0]=s,n[1]=o,n[2]=r,n[3]=a,n[4]=l,n[5]=c}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const i=[Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN];return t instanceof VS?this.AxB(this.elements,t.elements,i):this.AxB(this.elements,[t.a,t.b,t.c,t.d,t.e,t.f],i),new VS(i)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let i=t[0],n=t[1],s=t[2],o=t[3];const r=t[4],a=t[5],l=1/(i*o-n*s);return i*=l,n*=l,s*=l,o*=l,new VS([o,-n,-s,i,s*a-o*r,n*r-i*a])}invertSelf(){const t=this.elements;let i=t[0],n=t[1],s=t[2],o=t[3];const r=t[4],a=t[5],l=1/(i*o-n*s);return i*=l,n*=l,s*=l,o*=l,t[0]=o,t[1]=-n,t[2]=-s,t[3]=i,t[4]=s*a-o*r,t[5]=n*r-i*a,this}transformPoint(t,i){const n=this.elements;return{x:t*n[0]+i*n[2]+n[4],y:t*n[1]+i*n[3]+n[5]}}transformBBox(t,i){const n=this.elements,s=n[0],o=n[1],r=n[2],a=n[3],l=t.width*.5,c=t.height*.5,d=t.x+l,p=t.y+c,g=Math.abs(l*s)+Math.abs(c*r),m=Math.abs(l*o)+Math.abs(c*a);return i??(i=new Le(0,0,0,0)),i.x=d*s+p*r+n[4]-g,i.y=d*o+p*a+n[5]-m,i.width=g+g,i.height=m+m,i}toContext(t){if(this.identity)return;const i=this.elements;t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}static updateTransformMatrix(t,i,n,s,o,r,a){const l=i,c=n;let d,p;l===1&&c===1?(d=0,p=0):(d=a?.scalingCenterX??0,p=a?.scalingCenterY??0);const g=s,m=Math.cos(g),y=Math.sin(g);let b,C;g===0?(b=0,C=0):(b=a?.rotationCenterX??0,C=a?.rotationCenterY??0);const w=o,x=r,M=d*(1-l)-b,E=p*(1-c)-C;return t.setElements([m*l,y*l,-y*c,m*c,m*M-y*E+b+w,y*M+m*E+C+x]),t}};function iu(e){return CW(e.constructor)}var bW=Symbol("isMatrixTransform");function CW(e){return e[bW]===!0}function z1(e){var t,i;const n=e;if(CW(e))return e;const s=Symbol("matrix_combined_transform");class o extends n{constructor(){super(...arguments),this[i]=new Ch,this._dirtyTransform=!0}onChangeDetection(a){super.onChangeDetection(a),this._dirtyTransform=!0,!(this.batchLevel>0)&&this.markDirty("transform")}updateMatrix(a){}computeTransformMatrix(){this._dirtyTransform&&(this[s].setElements(vW),this.updateMatrix(this[s]),this._dirtyTransform=!1)}toParent(a){return this.computeTransformMatrix(),this[s].identity?a.clone():this[s].transformBBox(a)}toParentPoint(a,l){return this.computeTransformMatrix(),this[s].identity?{x:a,y:l}:this[s].transformPoint(a,l)}fromParent(a){return this.computeTransformMatrix(),this[s].identity?a.clone():this[s].inverse().transformBBox(a)}fromParentPoint(a,l){return this.computeTransformMatrix(),this[s].identity?{x:a,y:l}:this[s].inverse().transformPoint(a,l)}computeBBox(){const a=super.computeBBox();return a&&this.toParent(a)}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(a,l){return{x:a,y:l}=this.fromParentPoint(a,l),super.pickNode(a,l)}pickNodes(a,l,c){return{x:a,y:l}=this.fromParentPoint(a,l),super.pickNodes(a,l,c)}render(a){this.computeTransformMatrix();const{ctx:l}=a,c=this[s];let d=!1;try{c.identity||(l.save(),d=!0,c.toContext(l)),super.render(a)}finally{d&&l.restore()}}toSVG(){this.computeTransformMatrix();const a=super.toSVG(),l=this[s];if(l.identity||a==null)return a;const c=tn("g");c.append(...a.elements);const[d,p,g,m,y,b]=l.e;return c.setAttribute("transform",`matrix(${d} ${p} ${g} ${m} ${y} ${b})`),{elements:[c],defs:a.defs}}}return t=bW,i=s,o[t]=!0,o}function Of(e){var t;const i=e,n=Symbol("matrix_rotation");class s extends z1(i){constructor(){super(...arguments),this[t]=new Ch,this.rotationCenterX=0,this.rotationCenterY=0,this.rotation=0}updateMatrix(r){super.updateMatrix(r);const{rotation:a,rotationCenterX:l,rotationCenterY:c}=this;a!==0&&(Ch.updateTransformMatrix(this[n],1,1,a,0,0,{rotationCenterX:l,rotationCenterY:c}),r.multiplySelf(this[n]))}}return t=n,A([Me()],s.prototype,"rotationCenterX",2),A([Me()],s.prototype,"rotationCenterY",2),A([Me()],s.prototype,"rotation",2),s}function gre(e){return"scalingX"in e&&"scalingY"in e&&"scalingCenterX"in e&&"scalingCenterY"in e}function gM(e){var t;const i=e,n=Symbol("matrix_scale");class s extends z1(i){constructor(){super(...arguments),this[t]=new Ch,this.scalingX=1,this.scalingY=1,this.scalingCenterX=0,this.scalingCenterY=0}updateMatrix(r){super.updateMatrix(r);const{scalingX:a,scalingY:l,scalingCenterX:c,scalingCenterY:d}=this;a===1&&l===1||(Ch.updateTransformMatrix(this[n],a,l,0,0,0,{scalingCenterX:c,scalingCenterY:d}),r.multiplySelf(this[n]))}}return t=n,A([Me()],s.prototype,"scalingX",2),A([Me()],s.prototype,"scalingY",2),A([Me()],s.prototype,"scalingCenterX",2),A([Me()],s.prototype,"scalingCenterY",2),s}function Bf(e){var t;const i=e,n=Symbol("matrix_translation");class s extends z1(i){constructor(){super(...arguments),this[t]=new Ch,this.translationX=0,this.translationY=0}updateMatrix(r){super.updateMatrix(r);const{translationX:a,translationY:l}=this;a===0&&l===0||(Ch.updateTransformMatrix(this[n],1,1,0,a,l),r.multiplySelf(this[n]))}}return t=n,A([Me()],s.prototype,"translationX",2),A([Me()],s.prototype,"translationY",2),s}var Hi=class{static fromCanvas(e,t){const i=[];for(const n of e.traverseUp())iu(n)&&i.unshift(n);for(const n of i)t=n.fromParent(t);return iu(e)&&(t=e.fromParent(t)),t}static toCanvas(e,t){t==null?t=e.getBBox():iu(e)&&(t=e.toParent(t));for(const i of e.traverseUp())iu(i)&&(t=i.toParent(t));return t}static fromCanvasPoint(e,t,i){const n=[];for(const s of e.traverseUp())iu(s)&&n.unshift(s);for(const s of n)({x:t,y:i}=s.fromParentPoint(t,i));return iu(e)&&({x:t,y:i}=e.fromParentPoint(t,i)),{x:t,y:i}}static toCanvasPoint(e,t,i){iu(e)&&({x:t,y:i}=e.toParentPoint(t,i));for(const n of e.traverseUp())iu(n)&&({x:t,y:i}=n.toParentPoint(t,i));return{x:t,y:i}}},uy,H1=class xy extends rc{constructor(t){super(t),this.childNodes=new Set,this.dirty=!1,this.dirtyZIndex=!1,this.clipRect=void 0,this.opacity=1,this.layer=void 0,this.image=void 0,this._lastWidth=Number.NaN,this._lastHeight=Number.NaN,this._lastDevicePixelRatio=Number.NaN,this.isContainerNode=!0,this.renderToOffscreenCanvas=t?.renderToOffscreenCanvas===!0,this.optimizeForInfrequentRedraws=t?.optimizeForInfrequentRedraws===!0}static is(t){return t instanceof xy}static computeChildrenBBox(t,i=!0){return Le.merge(rc.extractBBoxes(t,i))}static compareChildren(t,i){return rW(t.zIndex,i.zIndex)||t.serialNumber-i.serialNumber}containsPoint(t,i){return!0}computeBBox(){return xy.computeChildrenBBox(this.children())}computeSafeClippingBBox(t){const i=this.computeBBox();if(i?.isFinite()!==!0)return;let n=0;const s=4;for(const g of this.descendants())g instanceof on&&(n=Math.max(n,g.strokeWidth));const o=Math.max(1,n/2*s),{x:r,y:a}=Hi.toCanvasPoint(this,0,0),l=d_(t,r+i.x-o)-r,c=d_(t,a+i.y-o)-a,d=Math.ceil(i.x+i.width-l+o),p=Math.ceil(i.y+i.height-c+o);return new Le(l,c,d,p)}prepareSharedCanvas(t,i,n){return uy==null||uy.pixelRatio!==n?uy=new P1({width:t,height:i,pixelRatio:n}):uy.resize(t,i,n),uy}setScene(t){super.setScene(t),this.layer&&(this.scene?.layersManager.removeLayer(this.layer),this.layer=void 0);for(const i of this.children())i.setScene(t)}markDirty(t){this.dirty=!0,super.markDirty(t)}markDirtyChildrenOrder(){super.markDirtyChildrenOrder(),this.dirtyZIndex=!0,this.markDirty()}append(t){for(const i of doe(t))i.remove(),this.childNodes.add(i),i.parentNode=this,i.setScene(this.scene);this.markDirtyChildrenOrder(),this.markDirty()}appendChild(t){return this.append(t),t}removeChild(t){if(!this.childNodes?.delete(t))throw new Error(`AG Charts - internal error, unknown child node ${t.name??t.id} in $${this.name??this.id}`);t.parentNode=void 0,t.setScene(),this.markDirtyChildrenOrder(),this.markDirty()}clear(){for(const t of this.children())delete t.parentNode,t.setScene();this.childNodes?.clear(),this.markDirty()}pickNode(t,i){if(!(!this.visible||this.pointerEvents===1||!this.containsPoint(t,i))){if(this.childNodes!=null&&this.childNodes.size!==0){const n=[...this.children()];for(let s=n.length-1;s>=0;s--){const r=n[s].pickNode(t,i);if(r!=null)return r}}else if(!this.isContainerNode)return this}}pickNodes(t,i,n=[]){if(!this.visible||this.pointerEvents===1||!this.containsPoint(t,i))return n;this.isContainerNode||n.push(this);for(const s of this.children())s.pickNodes(t,i,n);return n}isDirty(t){const{width:i,height:n,devicePixelRatio:s}=t,{dirty:o,layer:r}=this,a=r!=null&&(this._lastWidth!==i||this._lastHeight!==n),l=this._lastDevicePixelRatio!==s;return this._lastWidth=i,this._lastHeight=n,this._lastDevicePixelRatio=s,o||a||l}preRender(t){let i;if(this.dirty){i=super.preRender(t,0);for(const n of this.children()){const s=n.preRender(t);i.groups+=s.groups,i.nonGroups+=s.nonGroups,i.complexity+=s.complexity}i.groups+=1,i.nonGroups-=1}else i=this.childNodeCounts;return this.renderToOffscreenCanvas&&!this.optimizeForInfrequentRedraws&&i.nonGroups>0&&this.getVisibility()?this.layer??(this.layer=this.layerManager?.addLayer({name:this.name})):this.layer!=null&&(this.layerManager?.removeLayer(this.layer),this.layer=void 0),i}render(t){const{layer:i,renderToOffscreenCanvas:n}=this,s={...t},o=this.isDirty(t);if(this.dirty=!1,!n){this.renderInContext(s),super.render(s);return}const{ctx:r,stats:a,devicePixelRatio:l}=t;let{image:c}=this;if(o){c?.bitmap.close(),c=void 0;const p=i?void 0:this.computeSafeClippingBBox(l),g=(m,...y)=>{const b=m.context;s.ctx=b,m.clear(),b.save();try{b.setTransform(...y),b.globalAlpha=1,this.renderInContext(s)}finally{b.restore(),b.verifyDepthZero?.()}};if(i)g(i,r.getTransform());else if(p){const{x:m,y,width:b,height:C}=p,w=this.prepareSharedCanvas(b,C,l);g(w,l,0,0,l,-m*l,-y*l),c={bitmap:w.transferToImageBitmap(),x:m,y,width:b,height:C}}this.image=c,a&&a.layersRendered++}else a&&a.layersSkipped++;const{globalAlpha:d}=r;if(r.globalAlpha=d*this.opacity,i){r.save();try{r.resetTransform(),i.drawImage(r)}finally{r.restore()}}else if(c){const{bitmap:p,x:g,y:m,width:y,height:b}=c;r.drawImage(p,0,0,y*l,b*l,g,m,y,b)}r.globalAlpha=d,super.render(s)}applyClip(t,i){const{x:n,y:s,width:o,height:r}=i;t.beginPath(),t.rect(n,s,o,r),t.clip()}renderInContext(t){const{ctx:i,stats:n}=t;this.dirtyZIndex&&(this.sortChildren(xy.compareChildren),this.dirtyZIndex=!1),i.save();try{i.globalAlpha*=this.opacity,this.clipRect!=null&&(this.applyClip(i,this.clipRect),t.clipBBox=Hi.toCanvas(this,this.clipRect));for(const s of this.children()){if(!s.visible){n&&(n.nodesSkipped+=s.childNodeCounts.nonGroups+s.childNodeCounts.groups,n.opsSkipped+=s.childNodeCounts.complexity);continue}s.isolatedRender(t)}}finally{i.restore()}}sortChildren(t){if(!this.childNodes)return;const i=[...this.childNodes].sort(t);this.childNodes.clear();for(const n of i)this.childNodes.add(n)}*children(){yield*this.childNodes}*excludeChildren(t){for(const i of this.children())(t.instance&&!(i instanceof t.instance)||t.name&&i.name!==t.name)&&(yield i)}*descendants(){for(const t of this.children())yield t,t instanceof xy&&(yield*t.descendants())}setClipRect(t){this.clipRect=t?Hi.fromCanvas(this,t):void 0}setClipRectCanvasSpace(t){this.clipRect=t}getVisibility(){for(const t of this.traverseUp(!0))if(!t.visible)return!1;return!0}toSVG(){if(!this.visible)return;const t=[],i=[];for(const n of this.children()){const s=n.toSVG();s!=null&&(i.push(...s.elements),s.defs!=null&&t.push(...s.defs))}return{elements:i,defs:t}}};H1.className="Group";A([Me({convertor:e=>st(0,e,1)})],H1.prototype,"opacity",2);var ut=H1,fre=class extends gM(ut){},mre=class extends Of(ut){},hs=class extends Bf(ut){},lg=class extends Of(Bf(ut)){};function yre(e,t){return"context"in e}function g_(e,t){return e!=null&&yre(e)&&t!=null&&typeof t=="object"&&t.context===void 0?(t.context=e.context,!0):!1}function Zr(e,t,i){if(Array.isArray(e)){for(const n of e)if(g_(n,i))break}else g_(e,i);return t(i)}var wW=class{constructor(){this.cache=new WeakMap}call(e,t,i){let n,s=this.cache.get(t);try{n=JSON.stringify(i)}catch{return this.invoke(e,t,s,void 0,i)}return s==null&&(s=new Map,this.cache.set(t,s)),s.has(n)?s.get(n):this.invoke(e,t,s,n,i)}invoke(e,t,i,n,s){try{const o=Zr(e,t,s);return i&&n!=null&&i.set(n,o),o}catch(o){fe.warnOnce("User callback errored, ignoring",o);return}}invalidateCache(){this.cache=new WeakMap}};function Ux(e,t){if(!e)return;const{x:i,y:n,width:s,height:o}=bre(t);Yw(e.style,"width",s),Yw(e.style,"height",o),Yw(e.style,"left",i),Yw(e.style,"top",n)}function SW(e){const t=Number.parseFloat(e.style.width)||e.offsetWidth,i=Number.parseFloat(e.style.height)||e.offsetHeight,n=Number.parseFloat(e.style.left)||e.offsetLeft,s=Number.parseFloat(e.style.top)||e.offsetTop;return{x:n,y:s,width:t,height:i}}function vre(e){if(e.focus({preventScroll:!0}),e.lastChild?.textContent==null)return;const t=$a().createRange();t.setStart(e.lastChild,e.lastChild.textContent.length),t.setEnd(e.lastChild,e.lastChild.textContent.length);const i=$t().getSelection();i?.removeAllRanges(),i?.addRange(t)}function xW(){const e=$t("navigator");if("scheduling"in e){const t=e.scheduling;if("isInputPending"in t)return t.isInputPending({includeContinuous:!0})}return!1}function fM(e){return`ag-charts-icon ag-charts-icon-${e}`}function bre(e){let{x:t,y:i,width:n,height:s}=e;return(n==null||n>0)&&(s==null||s>0)?e:(t!=null&&n!=null&&n<0&&(n=-n,t=t-n),i!=null&&s!=null&&s<0&&(s=-s,i=i-s),{x:t,y:i,width:n,height:s})}function Yw(e,t,i){i==null?e.removeProperty(t):e.setProperty(t,`${i}px`)}var bI="class-instance";function qa(e,t,i){if(ht(t)){if(!ht(e)||e.length!==t.length||t.some((n,s)=>qa(e[s],n,i)!=null))return t}else if(Qt(t)){if(!Qt(e))return t;const n={},s=new Set([...Object.keys(e),...Object.keys(t)]);for(const o of s)if(e[o]!==t[o])if(i?.has(o))n[o]=t[o];else if(typeof e[o]==typeof t[o]){const r=qa(e[o],t[o],i);r!==null&&(n[o]=r)}else n[o]=t[o];return Object.keys(n).length?n:null}else if(e!==t)return t;return null}function MW(e,t){for(const i of Object.keys(e))if(e[i]!==t?.[i])return!1;return!0}function zi(e,t){return ht(e)?Cre(e,t):Qt(e)?wre(e,t):e instanceof Map?new Map(zi(Array.from(e))):j1(e)}function Cre(e,t){const i=[],n=t?.seen;for(const s of e){if(typeof s=="object"&&n?.includes(s)){fe.warn("cycle detected in array",s);continue}n?.push(s),i.push(zi(s,t)),n?.pop()}return i}function wre(e,t){const i={};for(const n of Object.keys(e))t?.assign?.has(n)?i[n]=e[n]:t?.shallow?.has(n)?i[n]=j1(e[n]):i[n]=zi(e[n],t);return i}function j1(e){return ht(e)?e.slice(0):Qt(e)?{...e}:Ph(e)?new Date(e):Ase(e)?new RegExp(e.source,e.flags):e}function xu(e,t,i,n,s,o){if(ht(e)){o=t(e,n,s,o);let r=0;for(const a of e)o=xu(a,t,i,n?.[r],s,o),r++}else if(Qt(e)){o=t(e,n,s,o);for(const r of Object.keys(e)){if(i?.has(r))continue;const a=e[r];o=xu(a,t,i,n?.[r],s,o)}}return o}function By(e,t,i={}){const{path:n,matcherPath:s=n?.replace(/(\[[0-9+]+])/i,"[]"),skip:o=[]}=i;if(e==null)throw new Error(`AG Charts - target is uninitialised: ${n??"<root>"}`);if(t==null)return e;if(ih(e))return e.set(t);const r=e,a=IE(e);for(const l of Object.keys(t)){if(B1.has(l))continue;const c=`${s?s+".":""}${l}`;if(o.includes(c))continue;const d=t[l],p=`${n?n+".":""}${l}`,g=r.constructor,m=r[l];try{const y=IE(m),b=IE(d);if(a===bI&&!(l in e||l==="context")){if(d===void 0)continue;fe.warn(`unable to set [${p}] in ${g?.name} - property is unknown`);continue}if(y!=null&&b!=null&&b!==y&&(y!==bI||b!=="object")){fe.warn(`unable to set [${p}] in ${g?.name} - can't apply type of [${b}], allowed types are: [${y}]`);continue}if(ih(m))d===void 0?m.clear():m.set(d);else if(b==="object"&&l!=="context"){if(!(l in r)){fe.warn(`unable to set [${p}] in ${g?.name} - property is unknown`);continue}m==null?r[l]=d:By(m,d,{...i,path:p,matcherPath:c})}else r[l]=d}catch(y){fe.warn(`unable to set [${p}] in [${g?.name}]; nested error is: ${y.message}`)}}return e}function IE(e){return e==null?null:Rse(e)||Ph(e)?"primitive":ht(e)?"array":Zt(e)?Qt(e)?"object":bI:hc(e)?"function":"primitive"}var Sre=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(e){return new Promise(t=>{this.acquireQueue.push([e,t]),this.available&&this.dispatchNext().catch(i=>fe.errorOnce(i))})}async acquireImmediately(e){return this.available?(await this.acquire(e),!0):!1}async waitForClearAcquireQueue(){return this.acquire(()=>Promise.resolve(void 0))}async dispatchNext(){this.available=!1;let[e,t]=this.acquireQueue.shift()??[];for(;e;){try{await e(),t?.()}catch(i){fe.error("mutex callback error",i),t?.()}[e,t]=this.acquireQueue.shift()??[]}this.available=!0}},DW=class{constructor(){this.eventListeners=new Map}addEventListener(e,t){if(typeof t!="function")throw new TypeError("AG Charts - listener must be a Function");const i=this.eventListeners.get(e);i?i.add(t):this.eventListeners.set(e,new Set([t]))}removeEventListener(e,t){const i=this.eventListeners.get(e);i!=null&&(i.delete(t),i.size===0&&this.eventListeners.delete(e))}hasEventListener(e){return this.eventListeners.has(e)}clearEventListeners(){this.eventListeners.clear()}fireEvent(e){const t=this.eventListeners.get(e.type);if(t)for(const i of t)i(e)}},Fh=class extends Qe{constructor(e=0,t=e,i=e,n=t){super(),this.top=e,this.right=t,this.bottom=i,this.left=n}};A([k],Fh.prototype,"top",2);A([k],Fh.prototype,"right",2);A([k],Fh.prototype,"bottom",2);A([k],Fh.prototype,"left",2);function Fs(e,t){const i=ht(e)?e:e.split(".");if(i.length===1){const[n]=i;return vh((s,o,r)=>s[n]=r,s=>s[n],t)}return vh((n,s,o)=>G1(n,i,o),n=>O1(n,i),t)}function xre(e){return vh((t,i,n)=>t[e]=n)}function rn(e,t){return vh((i,n,s)=>i[e][t??n]=s)}function ms(e){const{newValue:t,oldValue:i,changeValue:n}=e;return vh((s,o,r,a)=>(r!==a&&(a!==void 0&&i?.call(s,a),r!==void 0&&t?.call(s,r),n?.call(s,r,a)),r))}function Vu(e){return J4(e)}function Mre(e){return AW((t,i)=>$t().requestAnimationFrame(t),e)}function Dre(e){return AW((t,i=0)=>{i===0?queueMicrotask(t):setTimeout(t,i)},e)}function AW(e,t){let i=0,n=!1,s,o;const r=()=>n,a=()=>{n=!1,o?.(),o=void 0,s=void 0,i>0&&e(l)},l=()=>{const c=i;i=0,n=!0;const d=t({count:c});if(!d){a();return}d.then(a,a)};return{schedule(c){i===0&&!r()&&e(l,c),i++},async await(){if(r())for(s??(s=new Promise(c=>{o=c}));r();)await s}}}var W1=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel","touchstart","touchmove","touchend","touchcancel"];function Yp(e,t,i){const{offsetX:n,offsetY:s,clientX:o,clientY:r}=t,{currentX:a,currentY:l}=ql.calcCurrentXY(i,t);return{type:e,device:"mouse",offsetX:n,offsetY:s,clientX:o,clientY:r,currentX:a,currentY:l,sourceEvent:t}}function Kw(e,t,i){return{type:e,sourceEvent:t}}var Are={blur:e=>({type:"blur",sourceEvent:e}),change:e=>({type:"change",sourceEvent:e}),contextmenu:(e,t)=>Yp("contextmenu",e,t),focus:e=>({type:"focus",sourceEvent:e}),keydown:e=>({type:"keydown",sourceEvent:e}),keyup:e=>({type:"keyup",sourceEvent:e}),click:(e,t)=>Yp("click",e,t),dblclick:(e,t)=>Yp("dblclick",e,t),mouseenter:(e,t)=>Yp("mouseenter",e,t),mousemove:(e,t)=>Yp("mousemove",e,t),mouseleave:(e,t)=>Yp("mouseleave",e,t),wheel:e=>{const{offsetX:t,offsetY:i,clientX:n,clientY:s}=e,o=e.deltaMode===0?.01:1,r=e.deltaX*o,a=e.deltaY*o;return{type:"wheel",offsetX:t,offsetY:i,clientX:n,clientY:s,deltaX:r,deltaY:a,sourceEvent:e}},touchstart:(e,t)=>Kw("touchstart",e),touchmove:(e,t)=>Kw("touchmove",e),touchend:(e,t)=>Kw("touchend",e),touchcancel:(e,t)=>Kw("touchcancel",e)},ql=class{static alloc(e,t,i){return Are[e](t,i)}static isHTMLEvent(e){return W1.includes(e)}static calcCurrentXY(e,t){const i=e.getBoundingClientRect();return{currentX:t.clientX-i.x,currentY:t.clientY-i.y}}},Rre=class{constructor(){this.widgetListeners={},this.sourceListeners={}}initSourceHandler(e,t){this.sourceListeners??(this.sourceListeners={}),this.sourceListeners[e]=t}lazyGetWidgetListeners(e,t){var i;if(!(e in(this.sourceListeners??{}))){const n=o=>{const r=ql.alloc(e,o,t.getElement());this.dispatch(e,t,r)},s={};e.startsWith("touch")&&(s.passive=!1),this.initSourceHandler(e,n),t.getElement().addEventListener(e,n,s)}return this.widgetListeners??(this.widgetListeners={}),(i=this.widgetListeners)[e]??(i[e]=[]),this.widgetListeners[e]}add(e,t,i){this.lazyGetWidgetListeners(e,t).push(i)}remove(e,t,i){const n=this.lazyGetWidgetListeners(e,t),s=n.indexOf(i);s>-1&&n.splice(s,1)}destroy(e){if(this.widgetListeners=void 0,this.sourceListeners){for(const[t,i]of $r(this.sourceListeners))e.getElement().removeEventListener(t,i);this.sourceListeners=void 0}}dispatch(e,t,i){for(const n of this.widgetListeners?.[e]??[])n(i,t)}},Ere=class{constructor(e,t,i,n){this.glob=e,this.self=t,this.window=$t(),this.cleanup=new Ui,this.mousegeneral=l=>{l.stopPropagation(),l.stopImmediatePropagation()},this.mousemove=l=>{l.stopPropagation(),l.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mousemove(l)},this.mouseup=l=>{l.button===0&&(l.stopPropagation(),l.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mouseup(l),this.destroy())};const{window:s,mousegeneral:o,mousemove:r,mouseup:a}=this;this.cleanup.register(ni(s,"mousedown",o,{capture:!0}),ni(s,"mouseenter",o,{capture:!0}),ni(s,"mouseleave",o,{capture:!0}),ni(s,"mouseout",o,{capture:!0}),ni(s,"mouseover",o,{capture:!0}),ni(s,"mousemove",r,{capture:!0}),ni(s,"mouseup",a,{capture:!0})),t.mouseDragger=this,e.globalMouseDragCallbacks=i,e.globalMouseDragCallbacks.mousedown(n),n.stopPropagation(),n.stopImmediatePropagation()}destroy(){this.cleanup.flush(),this.glob.globalMouseDragCallbacks=void 0,this.self.mouseDragger=void 0}};function Tre(e,t,i,n){if(e.globalMouseDragCallbacks==null)return new Ere(e,t,i,n)}var Ire=500,kre=100;function Lre(e,t){const i=e.clientX-t.clientX,n=e.clientY-t.clientY;return i*i+n*n}var CI=!1,Pre=class{constructor(e,t,i,n,s){this.glob=e,this.self=t,this.initialTouch=n,this.target=s,this.cleanup=new Ui,this.longTapInterrupted=!1,this.longtap=()=>{const{target:a,initialTouch:l}=this;if(!this.longTapInterrupted){const c=new Ui;a.dispatchEvent(new TouchEvent("touchcancel",{touches:[l],bubbles:!0})),CI=!0;const d=b=>b.preventDefault(),p=b=>{CI=!1,b.preventDefault(),c.flush()};c.register(ni(a,"touchmove",d,{passive:!1}),ni(a,"touchend",p,{passive:!1}),ni(a,"touchcancel",p,{passive:!1}));const{clientX:g,clientY:m}=l,y=new PointerEvent("contextmenu",{bubbles:!0,cancelable:!0,view:$t(),clientX:g,clientY:m,pointerType:"touch"});a.dispatchEvent(y)}},this.touchmove=a=>{const{glob:l,self:c,initialTouch:d}=this,p=this.findInitialFinger(a.targetTouches);p!=null&&(this.longTapInterrupted=this.longTapInterrupted||Lre(d,p)>kre,c.dragTouchEnabled&&l.globalTouchDragCallbacks?.touchmove(a,p))},this.touchend=a=>{this.longTapInterrupted=!0;const l=this.findInitialFinger(a.changedTouches,a.touches);l!=null&&this.glob.globalTouchDragCallbacks?.touchend(a,l),this.destroy()},this.longtapTimer=setTimeout(this.longtap,Ire);const{touchmove:o,touchend:r}=this;this.cleanup.register(ni(s,"touchmove",o,{passive:!1}),ni(s,"touchstart",r,{passive:!1}),ni(s,"touchend",r,{passive:!1}),ni(s,"touchcancel",r,{passive:!1})),t.touchDragger=this,e.globalTouchDragCallbacks=i}destroy(){clearTimeout(this.longtapTimer),this.cleanup.flush(),this.glob.globalTouchDragCallbacks=void 0,this.self.touchDragger=void 0}findInitialFinger(...e){const t=e.flatMap(i=>Array.from(i));return Array.from(t).find(i=>i.identifier===this.initialTouch.identifier)}};function Nre(e,t,i,n,s){if(!(e.globalTouchDragCallbacks!=null||CI))return new Pre(e,t,i,n,s)}function kE(e,t,i,n){const{currentX:s,currentY:o}=ql.calcCurrentXY(e.getElement(),n),r=n.pageX-i.pageX,a=n.pageY-i.pageY;return{type:t,device:"mouse",offsetX:i.offsetX+r,offsetY:i.offsetY+a,clientX:n.clientX,clientY:n.clientY,currentX:s,currentY:o,originDeltaX:r,originDeltaY:a,sourceEvent:n}}function Fre(e,{pageX:t,pageY:i}){const{x:n,y:s}=e.getElement().getBoundingClientRect();return{offsetX:t-n,offsetY:i-s}}function LE(e,t,i,n,s){const{currentX:o,currentY:r}=ql.calcCurrentXY(e.getElement(),s),a=s.pageX-i.pageX,l=s.pageY-i.pageY;return{type:t,device:"touch",offsetX:i.offsetX+a,offsetY:i.offsetY+l,clientX:s.clientX,clientY:s.clientY,currentX:o,currentY:r,originDeltaX:a,originDeltaY:l,sourceEvent:n}}var f_={},m_=class{constructor(e){this.dispatchCallback=e,this.dragTouchEnabled=!0}destroy(){this.dragTriggerRemover?.(),this.dragTriggerRemover=void 0,this.listeners?.clear(),this.mouseDragger?.destroy(),this.touchDragger?.destroy()}getListenerSet(e){this.listeners??(this.listeners=new Map);let t=this.listeners.get(e);return t===void 0&&(t=new Set,this.listeners.set(e,t)),t}add(e,t,i){switch(this.getListenerSet(e).add(i),e){case"drag-start":case"drag-move":case"drag-end":{this.registerDragTrigger(t);break}}}remove(e,t,i){this.getListenerSet(e).delete(i)}registerDragTrigger(e){if(this.dragTriggerRemover==null){const t=e.getElement(),i=new Ui;i.register(ni(t,"mousedown",n=>this.triggerMouseDrag(e,n)),ni(t,"touchstart",n=>this.triggerTouchDrag(e,n),{passive:!1})),this.dragTriggerRemover=()=>i.flush()}}triggerMouseDrag(e,t){t.button===0&&this.startMouseDrag(e,t)}startMouseDrag(e,t){const i={pageX:Number.NaN,pageY:Number.NaN,offsetX:Number.NaN,offsetY:Number.NaN};mI(["pageX","pageY","offsetX","offsetY"],i,t);const n={mousedown:s=>{const o=kE(e,"drag-start",i,s);this.dispatch("drag-start",e,o)},mousemove:s=>{const o=kE(e,"drag-move",i,s);this.dispatch("drag-move",e,o)},mouseup:s=>{const o=kE(e,"drag-end",i,s);this.dispatch("drag-end",e,o),this.endDrag(e,o)}};this.mouseDragger=Tre(f_,this,n,t)}endDrag(e,{sourceEvent:t,clientX:i,clientY:n}){const s=e.getElement(),o=s.getBoundingClientRect();k1(o,i,n)||(s.dispatchEvent(new MouseEvent("mouseleave",t)),t.target?.dispatchEvent(new MouseEvent("mouseenter",t)))}triggerTouchDrag(e,t){const i=t.targetTouches[0];t.targetTouches.length===1&&i!=null&&this.startOneFingerTouch(e,t,i)}startOneFingerTouch(e,t,i){const n={pageX:Number.NaN,pageY:Number.NaN,...Fre(e,i)};mI(["pageX","pageY"],n,i);const s={touchmove:(a,l)=>{const c=LE(e,"drag-move",n,a,l);this.dispatch("drag-move",e,c)},touchend:(a,l)=>{const c=LE(e,"drag-end",n,a,l);this.dispatch("drag-end",e,c)}},o=e.getElement();this.touchDragger=Nre(f_,this,s,i,o);const r=LE(e,"drag-start",n,t,i);this.dispatch("drag-start",e,r)}dispatch(e,t,i){for(const n of this.getListenerSet(e))n(i,t);this.dispatchCallback(e,i)}},Ore=class{constructor(e){this.elem=e}setBounds(e){Ux(this.elemContainer??this.elem,e)}getBounds(){return SW(this.elemContainer??this.elem)}static setElementContainer(e,t){const i=e.getBounds();Ux(t,i),goe(e.elem,{width:"100%",height:"100%"}),e.elem.remove(),e.elemContainer=t,e.elemContainer.replaceChildren(e.elem)}},nl=class extends Ore{constructor(){super(...arguments),this.index=Number.NaN,this.children=[]}set id(e){Tt(this.elem,"id",e)}get id(){return Ig(this.elem,"id")}getElement(){return this.elem}getBoundingClientRect(){return this.elem.getBoundingClientRect()}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){this.destroyListener?.(),this.destroyListener=void 0,this.remove();for(const e of this.children)e.parent=void 0,e.destroy();this.children.length=0,this.destructor(),this.remove(),this.internalListener?.destroy(),this.htmlListener?.destroy(this)}remove(){this.elem.remove(),this.elemContainer?.remove()}setHidden(e){Na(this.elem,"display",e?"none":void 0)}isHidden(){return $t()?.getComputedStyle?.(this.elem).display==="none"}setCursor(e){Na(this.elem,"cursor",e)}setTextContent(e){this.elem.textContent=e??null}setAriaDescribedBy(e){Tt(this.elem,"aria-describedby",e)}setAriaHidden(e){Tt(this.elem,"aria-hidden",e)}setAriaLabel(e){Tt(this.elem,"aria-label",e)}setAriaExpanded(e){Tt(this.elem,"aria-expanded",e)}setAriaControls(e){Tt(this.elem,"aria-controls",e)}setAriaHasPopup(e){Tt(this.elem,"aria-haspopup",e)}setInnerHTML(e){this.elem.innerHTML=e}setPointerEvents(e){Na(this.elem,"pointer-events",e)}setCSSVariable(e,t){this.elem.style.setProperty(e,t)}isDisabled(){return Ig(this.elem,"aria-disabled",!1)}hasPopup(){const e=Ig(this.elem,"aria-haspopup");return e!==void 0&&e!=="false"}parseFloat(e){return e===""?0:Number.parseFloat(e)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}cssWidth(){return this.parseFloat(this.elem.style.width)}cssHeight(){return this.parseFloat(this.elem.style.height)}focus(e){this.elem.focus(e)}setFocusOverride(e){Tt(this.elem,"data-focus-override",e)}setPreventsDefault(e){Tt(this.elem,"data-preventdefault",e)}setTabIndex(e){Tt(this.elem,"tabindex",e)}addChild(e){this.addChildToDOM(e,this.getBefore(e)),this.children.push(e),e.index=this.children.length-1,e.parent=this,this.onChildAdded(e)}removeChild(e){const t=this.children.indexOf(e);this.children.splice(t,1),this.removeChildFromDOM(e),this.onChildRemoved(e)}moveChild(e,t){e.domIndex!==t&&(e.domIndex=t,this.removeChildFromDOM(e),this.addChildToDOM(e,this.getBefore(e)))}addClass(...e){this.elem.classList.add(...e)}removeClass(...e){this.elem.classList.remove(...e)}toggleClass(e,t){this.elem.classList.toggle(e,t)}appendOrInsert(e,t){t?t.getElement().insertAdjacentElement("beforebegin",e):this.elem.appendChild(e)}addChildToDOM(e,t){this.appendOrInsert(e.getElement(),t)}removeChildFromDOM(e){e.getElement().remove()}onChildAdded(e){}onChildRemoved(e){}getBefore({domIndex:e}){if(e!==void 0)return this.children.filter(t=>t.domIndex!==void 0&&t.domIndex>e).reduce((t,i)=>!t||i.domIndex<t.domIndex?i:t,void 0)}addListener(e,t){return ql.isHTMLEvent(e)?(this.htmlListener??(this.htmlListener=new Rre),this.htmlListener.add(e,this,t)):(this.internalListener??(this.internalListener=new m_(this.onDispatch.bind(this))),this.internalListener.add(e,this,t)),()=>this.removeListener(e,t)}removeListener(e,t){ql.isHTMLEvent(e)?this.htmlListener?.remove(e,this,t):this.htmlListener!=null&&this.internalListener?.remove(e,this,t)}setDragTouchEnabled(e){this.internalListener??(this.internalListener=new m_(this.onDispatch.bind(this))),this.internalListener.dragTouchEnabled=e}onDispatch(e,t){if(!t.sourceEvent?.bubbles)return;let{parent:i}=this;for(;i!=null;){const{internalListener:n}=i;if(n!=null){const s={...t,...ql.calcCurrentXY(i.getElement(),t)};n.dispatch(e,i,s)}i=i.parent}}static addWindowEvent(e,t){const i=n=>{n.persisted||t()};return ni($t(),"pagehide",i)}},Bre=class{constructor(){this.stats=new Map,this.lastLogTime=Date.now(),this.LOG_INTERVAL_MS=1e4,this.startPeriodicLogging()}startPeriodicLogging(){at.check("scene:stats","scene:stats:verbose")&&(this.stopPeriodicLogging(),this.intervalId=setInterval(()=>{this.logAccumulatedStats()},this.LOG_INTERVAL_MS))}stopPeriodicLogging(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)}recordTiming(e,t){const i=this.stats.get(e);i?(i.min=Math.min(i.min,t),i.max=Math.max(i.max,t),i.sum+=t,i.count+=1):this.stats.set(e,{min:t,max:t,sum:t,count:1})}recordTimings(e){for(const[t,i]of Object.entries(e))t!=="start"&&typeof i=="number"&&this.recordTiming(t,i)}logAccumulatedStats(){if(this.stats.size===0)return;const e=(Date.now()-this.lastLogTime)/1e3,t=Array.from(this.stats.keys()).sort((o,r)=>o===""?-1:r===""?1:o.localeCompare(r)),i=[];for(const o of t){const r=this.stats.get(o),a=r.sum/r.count;i.push(`${o}[${r.min.toFixed(1)}/${a.toFixed(1)}/${r.max.toFixed(1)}]ms`)}const s=this.stats.get("")?.count??0;fe.log(` Stats (${e.toFixed(0)}s, ${s} renders): ${i.join(" ")}`),this.stats.clear(),this.lastLogTime=Date.now()}destroy(){this.stopPeriodicLogging(),this.stats.clear()}},Lg,Ud=0;function Gre(){return Lg??(Lg=new Bre),Lg}function _re(){Ud++;let e=!1;return()=>{e||Ud===0||(e=!0,Ud--,Ud===0&&EW())}}function Vre(e){for(const t of["B","KB","MB","GB"]){if(e<1536)return`${e.toFixed(1)}${t}`;e/=1024}return`${e.toFixed(1)}TB}`}function zre(){if(!("memory"in performance))return;const{totalJSHeapSize:e,usedJSHeapSize:t,jsHeapSizeLimit:i}=performance.memory,n=[];for(const s of[t,e,i])typeof s=="number"&&n.push(Vre(s));return`Heap ${n.join(" / ")}`}function y_(e,t,i,n,s={},o=Le.zero){if(!at.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:r=0,layersSkipped:a=0,nodesRendered:l=0,nodesSkipped:c=0,opsPerformed:d=0,opsSkipped:p=0}=n??{},g=performance.now(),{start:m,...y}=t,b=g-m,C=Gre();C.recordTimings(y),C.recordTiming("",b);const w=Object.entries(y).map(([B,z])=>v_(B,z)).filter(B=>B!=null).join(" + "),x=Object.entries(s).map(([B,z])=>`${B}: ${JSON.stringify(z)}`).join(" ; "),M=at.check("scene:stats:verbose"),E=M?zre():null,I=[`${v_("",m,g)} (${w})`,`${x}`,`Layers: ${M?PE(r,a):e.size}`,M?`Nodes: ${PE(l,c)}`:null,M?`Ops: ${PE(d,p)}`:null,E].filter(fn),N=new Y4(i),T=new Map(I.map(B=>[B,N.measureText(B)])),P=Math.max(...Array.from(T.values(),B=>B.width)),O=Yre(T.values(),B=>B.height),G=2+o.x;i.save();try{i.fillStyle="white",i.fillRect(G,0,P,O),i.fillStyle="black";let B=0;for(const[z,j]of T.entries())B+=j.height,i.fillText(z,G,B)}catch(B){fe.warnOnce("Error during debug stats rendering",B)}finally{i.restore()}}function Hre(e){const t=Gx($t("agChartsSceneDebug")),i=[];for(const n of t)n==="layout"?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(n);e.debugNodeSearch=i}function jre(e,t){e.save();try{for(const[i,n]of Object.entries(t)){const s=Hi.toCanvas(n);if(!s){fe.log(`Scene.render() - no bbox for debugged node [${i}].`);continue}e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(s.x,s.y,s.width,s.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(i,s.x,s.y,s.width),e.fillText(i,s.x,s.y,s.width)}}catch(i){fe.warnOnce("Error during debug rendering",i)}finally{e.restore()}}var Wre=new Set,Ure=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function $re(e){const{...t}=e;for(const i of Object.keys(t))Ure.has(i)||typeof t[i]!="number"&&typeof t[i]!="string"&&typeof t[i]!="boolean"&&(Wre.add(i),delete t[i]);return t}function zS(e,t){if(!at.check(!0,"scene"))return{};let i=0;return{node:t==="json"?$re(e):e,name:e.name??e.id,dirty:e instanceof ut?e.dirty:void 0,...Array.from(e instanceof ut?e.children():[],n=>zS(n,t)).reduce((n,s)=>{let{name:o}=s;const{node:{visible:r,opacity:a,zIndex:l,translationX:c,translationY:d,rotation:p,scalingX:g,scalingY:m},node:y}=s;(!r||a<=0)&&(o=`(${o})`),ut.is(y)&&y.renderToOffscreenCanvas&&(o=`*${o}*`);const b=Array.isArray(l)?`(${l.join(", ")})`:l,C=[`${(i++).toString().padStart(3,"0")}|`,`${o??"<unknown>"}`,`z: ${b}`,c&&`x: ${c}`,d&&`y: ${d}`,p&&`r: ${p}`,g!=null&&g!==1&&`sx: ${g}`,m!=null&&m!==1&&`sy: ${m}`].filter(M=>!!M).join(" ");let w=C,x=1;for(;n[w]!=null&&x<100;)w=`${C} (${x++})`;return n[w]=s,n},{})}}function RW(e){const t=e instanceof ut?e.dirty:void 0;if(!t)return{dirtyTree:{},paths:[]};const i=Array.from(e instanceof ut?e.children():[],o=>RW(o)).filter(o=>o.paths.length>0),n=ut.is(e)?e.name??e.id:e.id,s=i.length?i.flatMap(o=>o.paths).map(o=>`${n}.${o}`):[n];return{dirtyTree:{name:n,node:e,dirty:t,...i.map(o=>o.dirtyTree).filter(o=>o.dirty!=null).reduce((o,r)=>(o[r.name??"<unknown>"]=r,o),{})},paths:s}}function PE(e,t){const i=e+t;return`${e} / ${i} (${Math.round(100*e/i)}%)`}function v_(e,t,i){const n=i==null?t:i-t;return`${e}: ${Math.round(n*100)/100}ms`}function Yre(e,t){let i=0;for(const n of e)i+=t(n);return i}function EW(e=!1){if(!Lg){e&&(Ud=0);return}!e&&Ud>0||(Lg.destroy(),Lg=void 0,e&&(Ud=0))}var My=(e,{x0:t,y0:i,x1:n,y1:s,cx:o,cy:r},a,l)=>{if(l&&e.moveTo(t,i),t!==n||i!==s){const c=Math.atan2(i-r,t-o),d=Math.atan2(s-r,n-o);e.arc(o,r,a,c,d)}else e.lineTo(t,i)},zn=class extends on{constructor(){super(...arguments),this.path=new af,this._clipX=Number.NaN,this._clipY=Number.NaN,this.clip=!1,this._dirtyPath=!0,this.lastPixelRatio=Number.NaN}set clipX(e){this._clipX=e,this.dirtyPath=!0}set clipY(e){this._clipY=e,this.dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty("path"))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(this.fillShadow?.isDirty()??!1)||(this._clipPath?.isDirty()??!1))}resetPathDirty(){this.path.clear(!0),this._dirtyPath=!1}isPathDirty(){return this.path.isDirty()}onChangeDetection(e){this._dirtyPath||(this._dirtyPath=!0,super.onChangeDetection(e))}computeBBox(){return this.updatePathIfDirty(),this.path.computeBBox()}isPointInPath(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)}distanceSquared(e,t){return this.distanceSquaredTransformedPoint(e,t)}svgPathData(e){return this.updatePathIfDirty(),this.path.toSVG(e)}distanceSquaredTransformedPoint(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)?0:this.path.distanceSquared(e,t)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(e){return e.devicePixelRatio!==this.lastPixelRatio&&(this.dirtyPath=!0),this.lastPixelRatio=e.devicePixelRatio,this.updatePathIfDirty(),super.preRender(e,this.path.commands.length)}render(e){const{ctx:t}=e;if(this.clip&&!Number.isNaN(this._clipX)&&!Number.isNaN(this._clipY)){t.save();try{const i=this.strokeWidth/2;this._clipPath??(this._clipPath=new af),this._clipPath.clear(),this._clipPath.rect(-i,-i,this._clipX+i,this._clipY+i+i),t.clip(this._clipPath?.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(t)}finally{t.restore()}}else this._clipPath=void 0,this.drawPath(t);this.fillShadow?.markClean(),super.render(e)}drawPath(e){this.fillStroke(e,this.path.getPath2D())}toSVG(){if(!this.visible)return;const e=tn("path");e.setAttribute("d",this.svgPathData());const t=this.applySvgFillAttributes(e,[]);return this.applySvgStrokeAttributes(e),{elements:[e],defs:t}}};zn.className="Path";A([Me()],zn.prototype,"clip",2);A([Me()],zn.prototype,"clipX",1);A([Me()],zn.prototype,"clipY",1);var qw=(e,t,i,n,s)=>{let o=!1,r=!1,a=n-Math.sqrt(Math.max(s**2-i**2,0)),l=0,c=0,d=i-Math.sqrt(Math.max(s**2-n**2,0));return a>e?(o=!0,a=e,l=i-Math.sqrt(Math.max(s**2-(n-e)**2))):ho(a,0)&&(a=0),d>t?(r=!0,c=n-Math.sqrt(Math.max(s**2-(i-t)**2)),d=t):ho(d,0)&&(d=0),{leading0:a,leading1:l,trailing0:c,trailing1:d,leadingClipped:o,trailingClipped:r}},HS=(e,t,i,n,s,o,r)=>{let{topLeft:a,topRight:l,bottomRight:c,bottomLeft:d}=o;const p=Math.max(a+d,l+c),g=Math.max(a+l,d+c);if(p<=0&&g<=0){if(r==null)e.rect(t,i,n,s);else{const T=Math.max(t,r.x),P=Math.min(t+n,r.x+r.width),O=Math.max(i,r.y),G=Math.min(i+s,r.y+r.height);e.rect(T,O,P-T,G-O)}return}else if(r==null&&a===l&&a===c&&a===d){e.roundRect(t,i,n,s,a);return}if(n<0&&(t+=n,n=Math.abs(n)),s<0&&(i+=s,s=Math.abs(s)),n<=0||s<=0)return;if(r==null)r=new Le(t,i,n,s);else{const T=Math.max(t,r.x),P=Math.min(t+n,r.x+r.width),O=Math.max(i,r.y),G=Math.min(i+s,r.y+r.height);r=new Le(T,O,P-T,G-O)}const m=Math.max(p/s,g/n,1);m>1&&(a/=m,l/=m,c/=m,d/=m);let y=!0,b=!0,C=!0,w=!0,x,M,E,I;if(y){const T=qw(r.height,r.width,Math.max(t+a-r.x,0),Math.max(i+a-r.y,0),a);T.leadingClipped&&(w=!1),T.trailingClipped&&(b=!1);const P=Math.max(r.x+T.leading1,r.x),O=Math.max(r.y+T.leading0,r.y),G=Math.max(r.x+T.trailing1,r.x),B=Math.max(r.y+T.trailing0,r.y),z=t+a,j=i+a;x={x0:P,y0:O,x1:G,y1:B,cx:z,cy:j}}if(b){const T=qw(r.width,r.height,Math.max(i+l-r.y,0),Math.max(r.x+r.width-(t+n-l),0),l);T.leadingClipped&&(y=!1),T.trailingClipped&&(C=!1);const P=Math.min(r.x+r.width-T.leading0,r.x+r.width),O=Math.max(r.y+T.leading1,r.y),G=Math.min(r.x+r.width-T.trailing0,r.x+r.width),B=Math.max(r.y+T.trailing1,r.y),z=t+n-l,j=i+l;M={x0:P,y0:O,x1:G,y1:B,cx:z,cy:j}}if(C){const T=qw(r.height,r.width,Math.max(r.x+r.width-(t+n-c),0),Math.max(r.y+r.height-(i+s-c),0),c);T.leadingClipped&&(b=!1),T.trailingClipped&&(w=!1);const P=Math.min(r.x+r.width-T.leading1,r.x+r.width),O=Math.min(r.y+r.height-T.leading0,r.y+r.height),G=Math.min(r.x+r.width-T.trailing1,r.x+r.width),B=Math.min(r.y+r.height-T.trailing0,r.y+r.height),z=t+n-c,j=i+s-c;E={x0:P,y0:O,x1:G,y1:B,cx:z,cy:j}}if(w){const T=qw(r.width,r.height,Math.max(r.y+r.height-(i+s-d),0),Math.max(t+d-r.x,0),d);T.leadingClipped&&(C=!1),T.trailingClipped&&(y=!1);const P=Math.max(r.x+T.leading0,r.x),O=Math.min(r.y+r.height-T.leading1,r.y+r.height),G=Math.max(r.x+T.trailing0,r.x),B=Math.min(r.y+r.height-T.trailing1,r.y+r.height),z=t+d,j=i+s-d;I={x0:P,y0:O,x1:G,y1:B,cx:z,cy:j}}let N=!1;y&&x!=null&&(My(e,x,a,!N),N||(N=!0)),b&&M!=null&&(My(e,M,l,!N),N||(N=!0)),C&&E!=null&&(My(e,E,c,!N),N||(N=!0)),w&&I!=null&&My(e,I,d,!N),e.closePath()},Tn=class extends zn{constructor(){super(...arguments),this.borderPath=new af,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=this.strokeWidth,this.effectiveStrokeWidth=this.strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(e){this.topLeftCornerRadius=e,this.topRightCornerRadius=e,this.bottomRightCornerRadius=e,this.bottomLeftCornerRadius=e}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){const{path:e,borderPath:t,crisp:i,topLeftCornerRadius:n,topRightCornerRadius:s,bottomRightCornerRadius:o,bottomLeftCornerRadius:r}=this;let{x:a,y:l,width:c,height:d,strokeWidth:p,clipBBox:g}=this;const y=1/(this.layerManager?.canvas.pixelRatio??1);let b=1;if(e.clear(!0),t.clear(!0),c===0||d===0){this.effectiveStrokeWidth=0,this.lastUpdatePathStrokeWidth=0,this.microPixelEffectOpacity=0;return}if(i&&(c<=y&&(b*=c/y),d<=y&&(b*=d/y),c=this.align(a,c),d=this.align(l,d),a=this.align(a),l=this.align(l),g=g==null?void 0:new Le(this.align(g.x),this.align(g.y),this.align(g.x,g.width),this.align(g.y,g.height))),p)if(c<y){const C=a+y/2;t.moveTo(C,l),t.lineTo(C,l+d),p=y,this.borderClipPath=void 0}else if(d<y){const C=l+y/2;t.moveTo(a,C),t.lineTo(a+c,C),p=y,this.borderClipPath=void 0}else if(p<c&&p<d){const C=p/2;a+=C,l+=C,c-=p,d-=p;const w=g?.clone().shrink(C),x={topLeft:n>0?n-p:0,topRight:s>0?s-p:0,bottomRight:o>0?o-p:0,bottomLeft:r>0?r-p:0};this.borderClipPath=void 0,c>0&&d>0&&(w==null||w?.width>0&&w?.height>0)&&(HS(e,a,l,c,d,x,w),HS(t,a,l,c,d,x,w))}else this.borderClipPath=this.borderClipPath??new af,this.borderClipPath.clear(!0),this.borderClipPath.rect(a,l,c,d),t.rect(a,l,c,d);else{const C={topLeft:n,topRight:s,bottomRight:o,bottomLeft:r};this.borderClipPath=void 0,HS(e,a,l,c,d,C,g)}if([n,s,o,r].every(C=>C===0)){const C=this.getBBox();this.hittester=C.containsPoint.bind(C),this.distanceSquared=(w,x)=>this.getBBox().distanceSquared(w,x)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=p,this.lastUpdatePathStrokeWidth=p,this.microPixelEffectOpacity=b}computeBBox(){const{x:e,y:t,width:i,height:n,clipBBox:s}=this;return s?.clone()??new Le(e,t,i,n)}isPointInPath(e,t){return this.hittester(e,t)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(e,t){return this.distanceCalculator(e,t)}applyFillAndAlpha(e){super.applyFillAndAlpha(e),e.globalAlpha*=this.microPixelEffectOpacity}applyStrokeAndAlpha(e){super.applyStrokeAndAlpha(e),e.globalAlpha*=this.microPixelEffectOpacity}renderStroke(e){const{stroke:t,effectiveStrokeWidth:i}=this;if(t&&i){const{globalAlpha:n}=e,{lineDash:s,lineDashOffset:o,lineCap:r,lineJoin:a,borderPath:l,borderClipPath:c}=this;c&&e.clip(c.getPath2D()),this.applyStrokeAndAlpha(e),e.lineWidth=i,s&&e.setLineDash(s),o&&(e.lineDashOffset=o),r&&(e.lineCap=r),a&&(e.lineJoin=a),e.stroke(l.getPath2D()),e.globalAlpha=n}}};Tn.className="Rect";A([Me()],Tn.prototype,"x",2);A([Me()],Tn.prototype,"y",2);A([Me()],Tn.prototype,"width",2);A([Me()],Tn.prototype,"height",2);A([Me()],Tn.prototype,"topLeftCornerRadius",2);A([Me()],Tn.prototype,"topRightCornerRadius",2);A([Me()],Tn.prototype,"bottomRightCornerRadius",2);A([Me()],Tn.prototype,"bottomLeftCornerRadius",2);A([Uo({})],Tn.prototype,"clipBBox",2);A([Me()],Tn.prototype,"crisp",2);var wo=class ar extends on{constructor(t){super(t),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontCache=void 0,this.fontSize=ar.defaultFontSize,this.fontFamily="sans-serif",this.textAlign="start",this.textBaseline="alphabetic",this.boxPadding=0,this.trimText=t?.trimText??!0}onTextChange(){if(this.richText?.clear(),this.textMap?.clear(),ht(this.text))this.lines=[],this.richText??(this.richText=new ut),this.richText.setScene(this.scene),this.richText.append(this.text.flatMap(t=>fn(t.text)?t.text.split(of):String(t.text)).filter(Boolean).map(()=>new ar({trimText:!1})));else{const t=this.text?.split(`
`)??[];this.lines=this.trimText?t.map(i=>i.trim()):t}}get font(){return this.fontCache??(this.fontCache=U4(this)),this.fontCache}static measureBBox(t,i,n,s){if(ht(t)){const{font:o,lineHeight:r,textAlign:a,textBaseline:l}=s,{width:c,height:d,lineMetrics:p}=th(t,o),g=r?r*p.length:d,m=ar.calcTopOffset(g,p[0],l),y=ar.calcLeftOffset(c,a);return new Le(i-y,n-m,c,g)}else return ar.computeBBox(t?.split(of),i,n,s)}static computeBBox(t,i,n,s){const{font:o,lineHeight:r,textAlign:a,textBaseline:l}=s,{width:c,height:d,lineMetrics:p}=yo(o).measureLines(t),g=r?r*p.length:d,m=ar.calcTopOffset(g,p[0],l),y=ar.calcLeftOffset(c,a);return new Le(i-y,n-m,c,g)}static calcTopOffset(t,i,n){switch(n){case"alphabetic":return i?.ascent??0;case"middle":return t/2;case"bottom":return t;default:return 0}}static calcLeftOffset(t,i){let n=0;switch(i){case"center":n=.5;break;case"right":case"end":n=1}return t*n}computeBBox(){if(this.generateTextMap(),this.textMap?.size){const a=Le.merge(this.textMap.values());return a.x=this.x-ar.calcLeftOffset(a.width,this.textAlign),a.y=this.y,a}const{x:t,y:i,lines:n,textBaseline:s,textAlign:o}=this,r=ar.computeBBox(n,t,i,{font:this,textBaseline:s,textAlign:o});return this.boxing!=null&&r.grow(this.boxPadding),r}getTextMeasureBBox(){return this.computeBBox()}getPlainText(){return _n(this.text)}isPointInPath(t,i){return this.getBBox()?.containsPoint(t,i)??!1}setScene(t){this.richText?.setScene(t),super.setScene(t)}generateTextMap(){if(!ht(this.text)||this.textMap?.size)return;this.textMap??(this.textMap=new Map);let t=0;const i=this.richText.children();for(const{width:n,height:s,ascent:o,segments:r}of th(this.text,this).lineMetrics){let a=0;for(const{color:l,textMetrics:c,...d}of r){const p=i.next().value;p.x=this.x-n/2+a,p.y=o+t,p.setProperties({...d,fill:l??this.fill});const g=p.getBBox();this.textMap.set(p,g),a+=c.width}t+=s}}render(t){const{ctx:i,stats:n}=t;if(!this.text||!this.layerManager)return n&&(n.nodesSkipped+=1),super.render(t);if(ht(this.text)&&this.richText){this.generateTextMap();const s=this.richText.getBBox(),{width:o,height:r,lineMetrics:a}=th(this.text,this);let l=0;switch(this.textAlign){case"left":case"start":l=o/2;break;case"right":case"end":l=o/-2}let c=this.y;switch(this.textBaseline){case"alphabetic":c-=a[0]?.ascent??0;break;case"middle":c-=a.length===1?a[0].ascent+a[0].segments.reduce((d,p)=>Math.min(d,yo(p).baselineDistance("middle")),0):r/2;break;case"bottom":c-=r;break}this.renderBoxing(t,s.clone().translate(l,c)),i.save(),i.translate(l,c),this.richText.opacity=this.opacity,this.richText.render(t),i.restore()}else this.renderText(t);if(ar.debug.check()&&!this.textMap?.size){const s=this.getBBox();i.strokeStyle="red",i.lineWidth=1,i.strokeRect(s.x,s.y,s.width,s.height)}super.render(t)}markDirty(t){return this.textMap?.clear(),super.markDirty(t)}renderText(t){const{fill:i,stroke:n,strokeWidth:s,font:o,textAlign:r}=this;if(!i&&!(n&&s)||!this.layerManager)return super.render(t);const{ctx:a}=t;a.font!==o&&(a.font=o),a.textAlign=r,this.renderBoxing(t),this.fillStroke(a)}renderBoxing(t,i){if(!this.boxing)return;const n=i??ar.computeBBox(this.lines,this.x,this.y,this);if(n.width===0||n.height===0)return;const{x:s,y:o,width:r,height:a}=n.grow(this.boxPadding);this.boxing.opacity=this.opacity,this.boxing.x=s,this.boxing.y=o,this.boxing.width=r,this.boxing.height=a,this.boxing.preRender(t),this.boxing.render(t)}executeFill(t){this.renderLines((i,n,s)=>t.fillText(i,n,s))}executeStroke(t){this.renderLines((i,n,s)=>t.strokeText(i,n,s))}renderLines(t){const{x:i,y:n,lines:s}=this;if(!Number.isFinite(i)||!Number.isFinite(n))return;const o=yo(this),{lineMetrics:r}=o.measureLines(s),{textBaseline:a,lineHeight:l=o.lineHeight()}=this;let c=0;a==="top"?c=r[0].ascent:(a==="middle"||a==="bottom")&&(c=l*(1-s.length),a==="middle"?(c/=2,c-=o.baselineDistance(a)):c-=r[0].descent);for(const d of r)t(d.text,i,n+c),c+=l}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}setBoxing(t){const i=t.border?.enabled?t.border?.stroke:void 0;t.fill!=null||i!=null?(this.boxing??(this.boxing=new Tn({scene:this.scene})),this.boxing.fill=t.fill,this.boxing.fillOpacity=t.fillOpacity??1,this.boxing.cornerRadius=t.cornerRadius??0,this.boxing.stroke=i,this.boxing.strokeWidth=t.border?.strokeWidth??0,this.boxing.strokeOpacity=t.border?.strokeOpacity??1,this.boxPadding=t.padding??0):this.boxing&&(this.boxing.destroy(),this.boxing=void 0)}getBoxingProperties(){const{fill:t,fillOpacity:i,cornerRadius:n,stroke:s,strokeWidth:o,strokeOpacity:r}=this.boxing??{};return{border:{enabled:s!=null,stroke:s,strokeWidth:o,strokeOpacity:r},cornerRadius:n,fill:t,fillOpacity:i,padding:this.boxPadding}}toSVG(){if(!this.visible||!this.text)return;const t=tn("text");if(fn(this.text))this.applySvgFillAttributes(t),p_(t,this),t.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),t.setAttribute("alignment-baseline",this.textBaseline),t.setAttribute("x",String(this.x)),t.setAttribute("y",String(this.y)),t.textContent=this.text;else for(const i of this.text){const n=tn("tspan");p_(n,{fontSize:i.fontSize??this.fontSize,fontFamily:i.fontFamily??this.fontFamily,fontWeight:i.fontWeight??this.fontWeight,fontStyle:i.fontStyle??this.fontStyle}),this.applySvgFillAttributes(n),n.textContent=i.text,t.append(n)}return{elements:[t]}}};wo.className="Text";wo.debug=at.create(!0,"scene:text");wo.defaultFontSize=10;A([Me()],wo.prototype,"x",2);A([Me()],wo.prototype,"y",2);A([uM({changeCb:e=>e.onTextChange()})],wo.prototype,"text",2);A([Me({changeCb:e=>{e.fontCache=void 0}})],wo.prototype,"fontStyle",2);A([Me({changeCb:e=>{e.fontCache=void 0}})],wo.prototype,"fontWeight",2);A([Me({changeCb:e=>{e.fontCache=void 0}})],wo.prototype,"fontSize",2);A([Me({changeCb:e=>{e.fontCache=void 0}})],wo.prototype,"fontFamily",2);A([Me()],wo.prototype,"textAlign",2);A([Me()],wo.prototype,"textBaseline",2);A([Me()],wo.prototype,"lineHeight",2);var Fo=wo,TW=class extends Of(Fo){},lf=class extends Of(Bf(Fo)){},IW={};il(IW,{BASE_FONT_SIZE:()=>Fl,CARTESIAN_AXIS_TYPE:()=>LW,CARTESIAN_POSITION:()=>kW,FONT_SIZE:()=>U1,FONT_SIZE_RATIO:()=>zr,POLAR_AXIS_SHAPE:()=>NW,POLAR_AXIS_TYPE:()=>PW});var U1=(e=>(e[e.SMALLEST=8]="SMALLEST",e[e.SMALLER=10]="SMALLER",e[e.SMALL=12]="SMALL",e[e.MEDIUM=13]="MEDIUM",e[e.LARGE=14]="LARGE",e[e.LARGEST=17]="LARGEST",e))(U1||{}),Fl=12,zr={SMALLEST:8/Fl,SMALLER:10/Fl,SMALL:12/Fl,MEDIUM:13/Fl,LARGE:14/Fl,LARGEST:17/Fl},kW=(e=>(e.TOP="top",e.TOP_RIGHT="top-right",e.TOP_LEFT="top-left",e.RIGHT="right",e.RIGHT_TOP="right-top",e.RIGHT_BOTTOM="right-bottom",e.BOTTOM="bottom",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e.LEFT="left",e.LEFT_TOP="left-top",e.LEFT_BOTTOM="left-bottom",e))(kW||{}),LW=(e=>(e.CATEGORY="category",e.GROUPED_CATEGORY="grouped-category",e.ORDINAL_TIME="ordinal-time",e.UNIT_TIME="unit-time",e.TIME="time",e.NUMBER="number",e.LOG="log",e))(LW||{}),PW=(e=>(e.ANGLE_CATEGORY="angle-category",e.ANGLE_NUMBER="angle-number",e.RADIUS_CATEGORY="radius-category",e.RADIUS_NUMBER="radius-number",e))(PW||{}),NW=(e=>(e.CIRCLE="circle",e.POLYGON="polygon",e))(NW||{}),Ii=class extends Qe{constructor(){super(...arguments),this.id=na(this),this.node=new TW({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(e,t){return e.eventsHub.on("layout:complete",()=>this.updateA11yText(e,t))}computeTextWrap(e,t){const{text:i,padding:n,wrapping:s}=this,o=Math.min(this.maxWidth??1/0,e)-n*2,r=this.maxHeight??t-n*2,a={maxWidth:o,maxHeight:r,font:this,textWrap:s};if(!Number.isFinite(o)&&!Number.isFinite(r)){this.node.text=i;return}let l;ht(i)?(l=q4(i,a),this.truncated=l.some($4)):(l=koe(i??"",a),this.truncated=gb(l)),this.node.text=l}updateA11yText(e,t){const{proxyInteractionService:i}=e;if(this.enabled&&this.text){const n=Hi.toCanvas(this.node);if(n){const{id:s}=this;this.proxyText??(this.proxyText=i.createProxyElement({type:"text",domManagerId:s,where:t})),this.proxyText.textContent=_n(this.text),this.proxyText.setBounds(n),this.proxyText.addListener("mousemove",o=>this.handleMouseMove(e,o)),this.proxyText.addListener("mouseleave",o=>this.handleMouseLeave(e,o))}}else this.proxyText?.destroy(),this.proxyText=void 0}handleMouseMove(e,t){if(t!=null&&this.enabled&&this.truncated){const{x:i,y:n}=Hi.toCanvas(this.node),s=t.sourceEvent.offsetX+i,o=t.sourceEvent.offsetY+n;e.tooltipManager.updateTooltip(this.id,{canvasX:s,canvasY:o,showArrow:!1},[{type:"structured",title:_n(this.text)}])}}handleMouseLeave(e,t){e.tooltipManager.removeTooltip(this.id)}};Ii.SMALL_PADDING=10;A([k,rn("node","visible")],Ii.prototype,"enabled",2);A([k,rn("node")],Ii.prototype,"text",2);A([k,rn("node")],Ii.prototype,"textAlign",2);A([k,rn("node")],Ii.prototype,"fontStyle",2);A([k,rn("node")],Ii.prototype,"fontWeight",2);A([k,rn("node")],Ii.prototype,"fontSize",2);A([k,rn("node")],Ii.prototype,"fontFamily",2);A([k,rn("node","fill")],Ii.prototype,"color",2);A([k],Ii.prototype,"spacing",2);A([k],Ii.prototype,"maxWidth",2);A([k],Ii.prototype,"maxHeight",2);A([k],Ii.prototype,"wrapping",2);A([k],Ii.prototype,"padding",2);A([k],Ii.prototype,"layoutStyle",2);var mM=(e=>(e.X="x",e.Y="y",e.Angle="angle",e.Radius="radius",e))(mM||{});function Kre(e){switch(e){case"x":case"y":case"angle":case"radius":return!0;default:return!1}}var yM=class{constructor(){this.title=new Ii,this.subtitle=new Ii,this.footnote=new Ii}positionCaptions(e){const{title:t,subtitle:i,footnote:n}=this,s=e.layoutBox.height/10;t.enabled&&(this.positionCaption("top",t,e.layoutBox,s),this.shrinkLayoutByCaption("top",t,e.layoutBox)),i.enabled&&(this.positionCaption("top",i,e.layoutBox,s),this.shrinkLayoutByCaption("top",i,e.layoutBox)),n.enabled&&(this.positionCaption("bottom",n,e.layoutBox,s),this.shrinkLayoutByCaption("bottom",n,e.layoutBox))}positionAbsoluteCaptions(e){const{title:t,subtitle:i,footnote:n}=this,{rect:s}=e.series;for(const o of[t,i,n])if(o.layoutStyle==="overlay"){if(o.textAlign==="left")o.node.x=s.x+o.padding;else if(o.textAlign==="right"){const r=o.node.getBBox();o.node.x=s.x+s.width-r.width-o.padding}}}computeX(e,t){return e==="left"?t.x:e==="right"?t.x+t.width:t.x+t.width/2}positionCaption(e,t,i,n){if(!t.text)return;const{lineMetrics:s}=ht(t.text)?th(t.text,t):yo(t).measureLines(t.text),o=Math.max(s[0].height,n);t.node.x=this.computeX(t.textAlign,i)+t.padding,t.node.y=i.y+(e==="top"?0:i.height)+t.padding,t.node.textBaseline=e,t.computeTextWrap(i.width,o)}shrinkLayoutByCaption(e,t,i){if(t.layoutStyle==="block"){const n=t.node.getBBox().clone(),{spacing:s=0}=t;e==="bottom"&&ht(t.text)&&(n.y-=n.height),i.shrink(Math.ceil(e==="top"?n.y-i.y+n.height+s:i.y+i.height-n.y+s),e)}}};A([k],yM.prototype,"title",2);A([k],yM.prototype,"subtitle",2);A([k],yM.prototype,"footnote",2);var qre=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],Zre=class{constructor(e){this.chartService=e,this.mementoOriginatorKey="chartType"}createMemento(){let e=this.chartService.publicApi?.getOptions()?.chartType;return e??(e="candlestick"),e}guardMemento(e){return e==null||qre.includes(e)}restoreMemento(e,t,i){if(i==null)return;const n={chartType:i};this.chartService.publicApi?.updateDelta(n).catch(s=>fe.error("error restoring state",s))}},mv="12.3.1",b_=Symbol("previous-memento-not-found"),Xre=class{constructor(e){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=at.create(!0,"history"),this.cleanup=new Ui,this.cleanup.register(e.on("series:undo",this.undo.bind(this)),e.on("series:redo",this.redo.bind(this)))}destroy(){this.cleanup.flush()}addMementoOriginator(e){this.originators.set(e.mementoOriginatorKey,e),this.clearState.set(e.mementoOriginatorKey,e.createMemento()),this.debugEvent("History add originator:",e.mementoOriginatorKey)}clear(){this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1;for(const[e,t]of this.originators.entries())this.clearState.set(e,t.createMemento())}record(e,...t){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));const i=new Map;for(const n of t){if(!this.originators.has(n.mementoOriginatorKey))throw new Error(`Originator [${n.mementoOriginatorKey}] has not been added to the HistoryManager.`);i.set(n.mementoOriginatorKey,n.createMemento())}this.history.push({label:e,mementos:i}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${e}]`)}undo(){const e=this.history[this.historyIndex];if(e){for(const t of e.mementos.keys()){const i=this.findPreviousMemento(t);if(i===b_)throw new Error(`Could not find previous memento for [${t}].`);this.restoreMemento(t,i)}this.historyIndex-=1,this.debugEvent(`History undo: [${e.label}]`)}}redo(){const e=this.history[this.historyIndex+1];if(e){for(const[t,i]of e.mementos.entries())this.restoreMemento(t,i);this.historyIndex+=1,this.debugEvent(`History redo: [${e.label}]`)}}findPreviousMemento(e){for(let t=this.historyIndex-1;t>=0;t--)if(this.history[t].mementos.has(e))return this.history[t].mementos.get(e);return this.clearState.has(e)?this.clearState.get(e):b_}restoreMemento(e,t){this.originators.get(e)?.restoreMemento(mv,mv,t)}debugEvent(...e){this.debug(...e,this.history.map((t,i)=>i===this.historyIndex?`** ${t.label} **`:t.label))}},FW=class wI{constructor(t){this.version=t.split("-")[0]}save(...t){const i={version:this.version};for(const n of Object.values(t))i[n.mementoOriginatorKey]=this.encode(n,n.createMemento());return i}restore(t,...i){if(typeof t!="object"){fe.warnOnce(`Could not restore data of type [${typeof t}], expecting an object, ignoring.`);return}if(t==null){fe.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");return}if(!("version"in t)||typeof t.version!="string"){fe.warnOnce("Could not restore data, missing [version] string in object, ignoring.");return}for(const n of i){const s=this.decode(n,t[n.mementoOriginatorKey]),o=[];if(!n.guardMemento(s,o)){const r=o.length>0?`

${o.join(`

`)}

`:"";fe.warnOnce(`Could not restore [${n.mementoOriginatorKey}] data, value was invalid, ignoring.${r}`,s);return}n.restoreMemento(this.version,t.version,s)}}encode(t,i){try{return JSON.parse(JSON.stringify(i,wI.encodeTypes))}catch(n){throw new Error(`Failed to encode [${t.mementoOriginatorKey}] value [${n}].`,{cause:n})}}decode(t,i){if(i==null)return i;try{return JSON.parse(JSON.stringify(i),wI.decodeTypes)}catch(n){throw new Error(`Failed to decode [${t.mementoOriginatorKey}] value [${n}].`,{cause:n})}}static encodeTypes(t,i){return Ph(this[t])?{__type:"date",value:this[t].toISOString()}:i}static decodeTypes(t,i){return Zt(this[t])&&"__type"in this[t]&&this[t].__type==="date"?new Date(this[t].value):i}},Qre=class{constructor(){this.caretaker=new FW(mv),this.state=new Map}setState(e,t){qs(this.state.get(e.mementoOriginatorKey),t)||this.setStateAndRestore(e,t)}setStateAndRestore(e,t){this.state.set(e.mementoOriginatorKey,t),this.restoreState(e)}restoreState(e){const{caretaker:t,state:i}=this;if(!i.has(e.mementoOriginatorKey))return;const n=i.get(e.mementoOriginatorKey);t.restore({version:t.version,[e.mementoOriginatorKey]:n},e)}},Jre=`.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{--align-items: center;--justify-content: center;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ag-charts-wrapper--safe-horizontal{--justify-content: flex-start}.ag-charts-wrapper--safe-vertical{--align-items: flex-start}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--align-items);justify-content:var(--justify-content)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none;-webkit-user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{pointer-events:none}.ag-charts-canvas canvas{display:block}.ag-charts-series-area{outline:none;pointer-events:auto;position:absolute}.ag-charts-swapchain{top:0;left:0;outline:none;opacity:0;pointer-events:none;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none;-webkit-user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-accent-color: #2196f3;--ag-charts-background-color: #fff;--ag-charts-border-color: #dddddd;--ag-charts-border-radius: 4px;--ag-charts-chart-background-color: #fff;--ag-charts-chart-padding: 20px;--ag-charts-focus-shadow: 0 0 0 3px #2196f3;--ag-charts-foreground-color: #181d1f;--ag-charts-font-family: Verdana, sans-serif;--ag-charts-font-size: 12px;--ag-charts-font-weight: 400;--ag-charts-popup-shadow: 0 0 16px rgba(0, 0, 0, .15);--ag-charts-subtle-text-color: #8c8c8c;--ag-charts-text-color: #181d1f;--ag-charts-chrome-background-color: #fafafa;--ag-charts-chrome-font-family: Verdana, sans-serif;--ag-charts-chrome-font-size: 12px;--ag-charts-chrome-font-weight: 400;--ag-charts-chrome-subtle-text-color: #8c8c8c;--ag-charts-chrome-text-color: #181d1f;--ag-charts-button-background-color: #fff;--ag-charts-button-border: 1px solid #dddddd;--ag-charts-button-font-weight: normal;--ag-charts-button-text-color: inherit;--ag-charts-input-background-color: #fff;--ag-charts-input-border: 1px solid #dddddd;--ag-charts-input-text-color: #181d1f;--ag-charts-menu-background-color: #fafafa;--ag-charts-menu-border: 1px solid #dddddd;--ag-charts-menu-text-color: #181d1f;--ag-charts-panel-background-color: #fafafa;--ag-charts-panel-text-color: #181d1f;--ag-charts-tooltip-background-color: #fafafa;--ag-charts-tooltip-border: 1px solid #dddddd;--ag-charts-tooltip-text-color: #181d1f;--ag-charts-tooltip-subtle-text-color: #8c8c8c;--ag-charts-crosshair-label-background-color: #fafafa;--ag-charts-crosshair-label-text-color: #181d1f;--ag-charts-spacing: 4px;--ag-charts-icon-size: 16px;--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 12%);--ag-charts-input-border-radius: var(--ag-charts-border-radius);--ag-charts-input-focus-border-color: var(--ag-charts-accent-color);--ag-charts-input-focus-text-color: var(--ag-charts-accent-color);--ag-charts-input-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-input-disabled-border-color: var(--ag-charts-border-color);--ag-charts-input-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-input-text-color) 50% );--ag-charts-input-placeholder-text-color: color-mix( in srgb, var(--ag-charts-input-background-color), var(--ag-charts-input-text-color) 60% );--ag-charts-button-border-radius: var(--ag-charts-border-radius);--ag-charts-button-focus-background-color: color-mix( in srgb, var(--ag-charts-button-background-color), var(--ag-charts-accent-color) 12% );--ag-charts-button-focus-border-color: var(--ag-charts-accent-color);--ag-charts-button-focus-text-color: var(--ag-charts-accent-color);--ag-charts-button-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-button-disabled-border-color: var(--ag-charts-border-color);--ag-charts-button-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-chrome-text-color) 50% );--ag-charts-checkbox-background-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 35% );--ag-charts-checkbox-checked-background-color: var(--ag-charts-accent-color);--ag-charts-tooltip-border-radius: var(--ag-charts-border-radius);--ag-charts-menu-border-radius: var(--ag-charts-border-radius);--ag-charts-chrome-font-size-small: var(--ag-charts-chrome-font-size);--ag-charts-chrome-font-size-medium: calc(var(--ag-charts-chrome-font-size) * (13 / 12));--ag-charts-chrome-font-size-large: calc(var(--ag-charts-chrome-font-size) * (14 / 12));--ag-charts-border: 1px solid var(--ag-charts-border-color);--ag-charts-focus-border: 1px solid var(--ag-charts-accent-color);--ag-charts-focus-border-shadow: 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%);--ag-charts-layer-menu: 6;--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1}.ag-charts-theme-default-dark{--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 22%)}.ag-chart-canvas-wrapper .ag-charts-theme-default{--ag-charts-border-radius: var(--ag-border-radius, 4px);--ag-charts-border: var(--ag-borders-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-focus-shadow: var(--ag-focus-shadow, 0 0 0 3px var(--ag-charts-accent-color));--ag-charts-focus-border-shadow: var( --ag-focus-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%) )}.ag-charts-icon{display:block;width:20px;height:20px;speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-trend-based-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJtNC45OTYgMTIuNjc0IDMuMjkxLTUuNzQzLjg2OC40OTctMy4yOTEgNS43NDN6Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4zNTEiIGN5PSIxNC41IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTggNmgtN1Y1aDd6bTAgNC41aC03di0xaDd6bTAgNC41SDZ2LTFoMTJ6Ii8+PC9zdmc+)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-chevron-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03LjQ3IDUuNDdhLjc1Ljc1IDAgMCAxIDEuMDYgMGw0IDRhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtNCA0YS43NS43NSAwIDAgMS0xLjA2LTEuMDZMMTAuOTQgMTAgNy40NyA2LjUzYS43NS43NSAwIDAgMSAwLTEuMDYiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;--input-padding: calc(var(--ag-charts-spacing) * 2);--input-padding-large: calc(var(--ag-charts-spacing) * 2.5);color:var(--ag-charts-input-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);transition-duration:.25s;transition-property:none;transition-timing-function:ease-out}.ag-charts-input:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-button-background-color);border:var(--ag-charts-button-border);border-radius:var(--ag-charts-button-border-radius);color:var(--ag-charts-button-text-color);cursor:pointer;padding:var(--input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-focus-color)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{--checkbox-transition-duration: .1s;appearance:none;background:var(--ag-charts-checkbox-background-color);border-radius:calc(var(--ag-charts-border-radius) * 9);cursor:pointer;height:18px;margin:0;transition-duration:var(--checkbox-transition-duration);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:calc(var(--ag-charts-border-radius) * 7);content:" ";height:14px;margin:2px;transition-duration:var(--checkbox-transition-duration);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-checkbox-checked-background-color)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:var(--ag-charts-input-border);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--textarea-line-height: 1.38;background:var(--ag-charts-input-background-color);border:var(--ag-charts-input-border);border-radius:var(--ag-charts-input-border-radius);line-height:var(--textarea-line-height);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);padding:var(--input-padding-large) var(--input-padding)}.ag-charts-textarea::placeholder{color:var(--ag-charts-input-placeholder-text-color)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-legend-toolbar{pointer-events:auto}.ag-charts-proxy-legend-toolbar>div[role=listitem]{pointer-events:none}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;-webkit-user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:solid 1px var(--ag-charts-chrome-background-color);box-shadow:var(--ag-charts-focus-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;overflow:visible}.ag-charts-focus-svg-outer-path{stroke:var(--ag-charts-chrome-background-color);stroke-width:4px}.ag-charts-focus-svg-inner-path{stroke:var(--ag-charts-accent-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{--tooltip-arrow-size: 8px;--tooltip-row-spacing: 8px;--tooltip-column-spacing: 16px;position:fixed;inset:unset;margin:0;padding:0;overflow:visible;top:var(--top, 0px);left:var(--left, 0px);width:max-content;max-width:100%;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);color:var(--ag-charts-tooltip-text-color);background:var(--ag-charts-tooltip-background-color);border:var(--ag-charts-tooltip-border);border-radius:var(--ag-charts-tooltip-border-radius);box-shadow:var(--ag-charts-popup-shadow)}.ag-charts-tooltip--compact .ag-charts-tooltip-content{--tooltip-row-spacing: 2px;--tooltip-column-spacing: 8px;padding:3px 6px}.ag-charts-tooltip--arrow-top:before,.ag-charts-tooltip--arrow-right:before,.ag-charts-tooltip--arrow-bottom:before,.ag-charts-tooltip--arrow-left:before{content:"";position:absolute;display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;border-bottom-color:transparent;border-right-color:transparent;background:inherit;clip-path:polygon(0 0,100% 0,100% 1px,1px 100%,0 100%)}.ag-charts-tooltip--arrow-top:before{bottom:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * .5)) rotate(45deg)}.ag-charts-tooltip--arrow-bottom:before{top:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(225deg)}.ag-charts-tooltip--arrow-left:before{right:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * .5)) rotate(315deg)}.ag-charts-tooltip--arrow-right:before{left:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * -.5)) rotate(135deg)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none;-webkit-user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:8px 12px;gap:var(--tooltip-row-spacing)}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;place-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:var(--tooltip-column-spacing);align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-tooltip-footer{grid-column:1 / -1;color:var(--ag-charts-tooltip-subtle-text-color);text-align:center}.ag-charts-popover{position:absolute;border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);background:var(--ag-charts-panel-background-color);color:var(--ag-charts-chrome-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);box-shadow:var(--ag-charts-popup-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-menu-text-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-focus-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--ag-charts-layer-menu)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-accent-color);background:var(--ag-charts-focus-color);color:var(--ag-charts-accent-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{--toolbar-gap: calc(var(--ag-charts-spacing) * 2);--toolbar-size: 34px;--toolbar-button-padding: 6px;align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-button-border);color:var(--ag-charts-button-text-color);cursor:pointer;display:flex;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-medium);font-weight:var(--ag-charts-chrome-font-weight);justify-content:center;min-height:var(--toolbar-size);min-width:var(--toolbar-size);padding:var(--toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-focus-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-focus-color);border-color:var(--ag-charts-accent-color);color:var(--ag-charts-accent-color);z-index:2}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-button-disabled-background-color);color:var(--ag-charts-button-disabled-text-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{margin:0 0 0 -1px}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-border-radius);border-bottom-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}
`,$1=class{constructor(){this.cleanup=new Ui,this.destroyed=!1}destroy(){this.cleanup.flush(),this.destroyed=!0}},eae=class jS{constructor(t,i,n){this.element=t,this.topTabGuard=i,this.bottomTabGuard=n,this.cleanup=new Ui,this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,!1),this.initTabGuard(this.bottomTabGuard,!0),this.element.addEventListener("focus",()=>this.onFocus(),{capture:!0}),this.element.addEventListener("blur",s=>this.onBlur(s),{capture:!0})}set tabIndex(t){this.guardTabIndex=t,this.guardTabIndex===0?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){this.cleanup.flush()}initTabGuard(t,i){this.cleanup.register(ni(t,"focus",()=>this.onTab(t,i)))}setGuardIndices(t){const i=t;Tt(this.topTabGuard,"tabindex",i),Tt(this.bottomTabGuard,"tabindex",i)}onFocus(){this.hasFocus=!0,this.guardTabIndex!==0&&this.setGuardIndices(0)}onBlur({relatedTarget:t}){const{topTabGuard:i,bottomTabGuard:n}=this;this.hasFocus=!1,this.guardTabIndex!==0&&t!==i&&t!==n&&this.setGuardIndices(this.guardTabIndex)}onTab(t,i){if(this.guardTabIndex!==0){let n;t.tabIndex===0?(n=this.findExitTarget(!i),this.setGuardIndices(this.guardTabIndex)):n=this.findEnterTarget(i),n?.focus()}}static queryFocusable(t,i){const n=$t();return Array.from(t.querySelectorAll(i)).filter(s=>{if(s instanceof HTMLElement){const o=n.getComputedStyle(s);return o.display!=="none"&&o.visibility!=="none"}return!1})}findEnterTarget(t){const i=jS.queryFocusable(this.element,'[tabindex="0"]'),n=t?i.length-1:0;return i[n]}findExitTarget(t){const i=jS.queryFocusable($a(),"[tabindex]").filter(o=>o.tabIndex>0).sort((o,r)=>o.tabIndex-r.tabIndex),{before:n,after:s}=jS.findBeforeAndAfter(i,this.guardTabIndex);return t?n:s}static findBeforeAndAfter(t,i){let n=0,s=t.length-1,o,r;for(;n<=s;){const a=Math.floor((n+s)/2),l=t[a].tabIndex;if(l===i){o=t[a-1]||void 0,r=t[a+1]||void 0;break}else l<i?(o=t[a],n=a+1):(r=t[a],s=a-1)}return{before:o,after:r}}};function Y1(e,t,i=["Escape"]){return ni(e,"keydown",n=>{vM(n,...i)&&t(n)})}function OW(e,t){const i=ni($t(),"mousedown",n=>{[0,2].includes(n.button)&&!GW(e,n)&&(t(),i())});return i}function BW(e,t){const i=ni($t(),"touchstart",n=>{Array.from(n.targetTouches).some(o=>!GW(e,o))&&(t(),i())});return i}function GW(e,t){return t.target instanceof Element&&t.target.shadowRoot!=null?!0:t.target instanceof Node&&e.contains(t.target)}function _W(e,t,i){const n=s=>{for(const o of t)Tt(o,"data-focus-visible-override",s)};return n(i),ni(e,"keydown",()=>n(!0),{once:!0})}function yb(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)}function vM(e,...t){return yb(e)&&t.includes(e.key)}function C_(e,t,i){return ni(e,"keydown",n=>{vM(n,i)&&t.focus()})}var Gy={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function tae(e){const{orientation:t,buttons:i,wrapAround:n=!1,onEscape:s,onFocus:o,onBlur:r}=e,{nextKey:a,prevKey:l}=Gy[t],c=m=>{if(m.target&&"tabIndex"in m.target){for(const y of i)y.tabIndex=-1;m.target.tabIndex=0}},[d,p]=n?[i.length,i.length]:[0,1/0],g=new Ui;for(let m=0;m<i.length;m++){const y=i[(d+m-1)%p],b=i[m],C=i[(d+m+1)%p];g.register(ni(b,"focus",c),o&&ni(b,"focus",o),r&&ni(b,"blur",r),s&&Y1(b,s),y&&C_(b,y,l),C&&C_(b,C,a),ni(b,"keydown",w=>{vM(w,a,l)&&w.preventDefault()})),b.tabIndex=m===0?0:-1}return g}function iae(e,t){return i=>{if(e.ariaDisabled==="true")return i.preventDefault();t(i)}}function K1(e){return"button"in e?e.button===0:yb(e)&&(e.code==="Space"||e.key==="Enter")}function q1(e){if(e?.target instanceof HTMLElement&&"tabindex"in e.target.attributes)return e.target}function VW(e){return ni(e,"keydown",t=>{if(t.defaultPrevented)return;Ig(t.target,"data-preventdefault",!0)&&vM(t,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&t.preventDefault()})}var nae=class{constructor(e){this.callback=e,this.devicePixelRatio=$t("devicePixelRatio")??1,this.devicePixelRatioMediaQuery=void 0,this.devicePixelRatioListener=t=>{t.matches||(this.devicePixelRatio=$t("devicePixelRatio")??1,this.unregisterDevicePixelRatioListener(),this.registerDevicePixelRatioListener(),this.callback(this.pixelRatio))}}get pixelRatio(){return this.devicePixelRatio}observe(){this.registerDevicePixelRatioListener()}disconnect(){this.unregisterDevicePixelRatioListener()}unregisterDevicePixelRatioListener(){this.devicePixelRatioMediaQuery?.removeEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=void 0}registerDevicePixelRatioListener(){const e=$t("matchMedia")?.(`(resolution: ${this.pixelRatio}dppx)`);e?.addEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=e}},zW=class{constructor(){this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0;for(const[t,i]of this.queuedObserveRequests)this.observe(t,i);this.queuedObserveRequests=[],this.observeWindow()},typeof ResizeObserver<"u"&&(this.resizeObserver=new ResizeObserver(t=>{for(const{target:i,contentRect:{width:n,height:s}}of t){const o=this.elements.get(i);this.checkSize(o,i,n,s)}}));let e;this.pixelRatioObserver=new nae(()=>{clearTimeout(e),e=setTimeout(()=>this.checkPixelRatio(),0)}),this.documentReady=$a("readyState")==="complete",this.documentReady?this.observeWindow():$t()?.addEventListener("load",this.onLoad)}destroy(){$t()?.removeEventListener("load",this.onLoad),this.resizeObserver?.disconnect(),this.resizeObserver=void 0,this.pixelRatioObserver?.disconnect(),this.pixelRatioObserver=void 0}observeWindow(){this.pixelRatioObserver?.observe()}checkPixelRatio(){const e=this.pixelRatioObserver?.pixelRatio??1;for(const[t,i]of this.elements)if(i.size!=null&&i.size.pixelRatio!==e){const{width:n,height:s}=i.size;i.size={width:n,height:s,pixelRatio:e},i.cb(i.size,t)}}checkSize(e,t,i,n){if(e&&(i!==e.size?.width||n!==e.size?.height)){const s=this.pixelRatioObserver?.pixelRatio??1;e.size={width:i,height:n,pixelRatio:s},e.cb(e.size,t)}}observe(e,t){if(!this.documentReady){this.queuedObserveRequests.push([e,t]);return}this.elements.has(e)?this.removeFromQueue(e):this.resizeObserver?.observe(e);const i={cb:t};this.elements.set(e,i)}unobserve(e){this.resizeObserver?.unobserve(e),this.elements.delete(e),this.removeFromQueue(e),this.elements.size||this.destroy()}removeFromQueue(e){this.queuedObserveRequests=this.queuedObserveRequests.filter(([t])=>t!==e)}},cf=class extends Map{constructor(e,t){super(),this.defaultValue=e,this.defaultState=t}set(e,t){return this.delete(e),t!==void 0&&super.set(e,t),delete this.cachedState,delete this.cachedValue,this}delete(e){return delete this.cachedState,delete this.cachedValue,super.delete(e)}stateId(){return this.cachedState??(this.cachedState=Array.from(this.keys()).pop()??this.defaultState),this.cachedState}stateValue(){return this.cachedValue??(this.cachedValue=Array.from(this.values()).pop()??this.defaultValue),this.cachedValue}},sae='<div class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay ag-charts-tooltip-container"></div></div></div></div>',oae=["styles","canvas","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area","tooltip-container"],rae=new Set(["styles","canvas-container","canvas","tooltip-container"]),w_={safeHorizontal:"ag-charts-wrapper--safe-horizontal",safeVertical:"ag-charts-wrapper--safe-vertical"},aae=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}],["tooltip-container",{childElementType:"div"}]]);function lae(e,t){if(typeof IntersectionObserver>"u")return;const i=new IntersectionObserver(n=>{for(const s of n)s.target===e&&t(s.intersectionRatio)},{root:e});return i.observe(e),i}var HW={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON(){return HW}};function S_(e,t){const i=ft("div");return i.className="ag-charts-tab-guard",e.insertAdjacentElement(t,i),i}var Z1=class Nd extends $1{constructor(t,i,n,s,o="normal"){super(),this.eventsHub=t,this.chart=i,this.styleContainer=s,this.mode=o,this.anchorName=`--${na(this)}`,this.styles=new Map,this.pendingContainer=void 0,this.container=void 0,this.documentRoot=void 0,this.initiallyConnected=void 0,this.containerSize=void 0,this.sizeMonitor=new zW,this.cursorState=new cf("default"),this.minWidth=0,this.minHeight=0,this.element=this.initDOM(),this.rootElements=this.initRootElements(),this.rootElements.canvas.element.style.setProperty("anchor-name",this.anchorName);let r=!1;if(this.observer=lae(this.element,a=>{a===0&&!r&&this.eventsHub.emit("dom:hidden",null),r=a===0}),this.setSizeOptions(),this.updateContainerSize(),this.addStyles("ag-charts-community",Jre),this.setContainer(n),this.cleanup.register(VW(this.element)),this.mode==="normal"){const a=this.rootElements["canvas-center"].element;if(a==null)throw new Error("Error initializing tab guards");const l=S_(a,"beforebegin"),c=S_(a,"afterend");this.tabGuards=new eae(a,l,c)}}initDOM(){if(this.mode==="normal"){const n=ft("div");return n.innerHTML=sae,n.firstChild}const t=ft("div");t.role="presentation",t.dataset.agCharts="",t.classList.add("ag-charts-wrapper");const i=ft("div");return t.appendChild(i),i.role="presentation",i.classList.add("ag-charts-series-area"),t}initRootElements(){const{mode:t,element:i}=this,n={};for(const s of oae){const o=`ag-charts-${s}`;let r;if(t==="normal"?r=i.classList.contains(o)?i:i.getElementsByClassName(o)[0]:rae.has(s)?r=i:r=i.getElementsByClassName(o)[0]??ft("div"),r==null)throw new Error(`AG Charts - unable to find DOM element ${o}`);n[s]={element:r,children:new Map,listeners:[]}}return n}destroy(){super.destroy(),this.observer?.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),this.pendingContainer=void 0;for(const t of Object.values(this.rootElements)){for(const i of t.children.values())i.remove();t.element.remove()}this.element.remove()}postRenderUpdate(){this.mode!=="minimal"&&(this.pendingContainer==null||this.pendingContainer===this.container||(Nd.batchedUpdateContainer.length===0&&$t().setTimeout(this.applyBatchedUpdateContainer.bind(this),0),Nd.batchedUpdateContainer.push(this)))}applyBatchedUpdateContainer(){for(const t of Nd.batchedUpdateContainer)t.destroyed||t.updateContainer();Nd.batchedUpdateContainer.splice(0)}setSizeOptions(t=300,i=300,n,s){const{style:o}=this.element;o.width=`${n??t}px`,o.height=`${s??i}px`,this.minWidth=n??t,this.minHeight=s??i,this.updateContainerClassName()}updateContainerSize(){const{style:t}=this.rootElements["canvas-center"].element;t.visibility=this.containerSize==null?"hidden":"",this.containerSize?(t.width=`${this.containerSize.width??0}px`,t.height=`${this.containerSize.height??0}px`):(t.width="",t.height=""),this.updateContainerClassName()}setTabGuardIndex(t){this.tabGuards&&(this.tabGuards.tabIndex=t)}setContainer(t){t!==this.container&&(this.pendingContainer=t,(this.mode==="minimal"||this.container==null)&&this.updateContainer())}updateContainer(){const{pendingContainer:t}=this;if(!(t==null||t===this.container)){if(this.container&&(this.element.remove(),this.sizeMonitor.unobserve(this.container)),this.documentRoot!=null)for(const i of this.rootElements.styles.children.keys())this.removeChild("styles",i);this.container=t,this.pendingContainer=void 0,this.documentRoot=this.getShadowDocumentRoot(t),this.initiallyConnected=t.isConnected;for(const[i,n]of this.styles)this.addStyles(i,n);t.appendChild(this.element),this.sizeMonitor.observe(t,i=>{this.containerSize=i,this.updateContainerSize(),this.eventsHub.emit("dom:resize",null)}),this.eventsHub.emit("dom:container-change",null)}}setThemeClass(t){const i="ag-charts-theme-";for(const n of Array.from(this.element.classList))n.startsWith(i)&&n!==t&&this.element.classList.remove(n);this.element.classList.add(t)}setThemeParameters(t){for(const[i,n]of $r(t)){let s=`${n}`;i.endsWith("Size")||i.endsWith("Radius")?s=`${n}px`:i.endsWith("Border")&&typeof n=="boolean"&&(s=n?"var(--ag-charts-border)":"none"),this.element.style.setProperty(`--ag-charts-${jse(i)}`,s)}}updateCanvasLabel(t){Tt(this.rootElements["canvas-proxy"].element,"aria-label",t)}getEventElement(t,i){return["focus","blur","keydown","keyup"].includes(i)?this.rootElements["series-area"].element:t}addEventListener(t,i,n){const s=this.getEventElement(this.element,t);return ni(s,t,i,n)}removeEventListener(t,i,n){this.getEventElement(this.element,t).removeEventListener(t,i,n)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){const t=$t(),i=new Le(0,0,t.innerWidth,t.innerHeight),n=this.getRawOverlayClientRect();return i.intersection(n)?.toDOMRect()??HW}getRawOverlayClientRect(){let t=this.element;const i=this.element.getRootNode()?.fullscreenElement;for(;t!=null;){let o;if(i!=null&&t===i)o=!0;else{const a=t.computedStyleMap?.()?.get("overflow-y")?.toString();o=a==="auto"||a==="scroll"}if(o)return Le.fromObject(t.getBoundingClientRect());t=t.parentElement}if(this.documentRoot!=null)return Le.fromObject(this.documentRoot.getBoundingClientRect());const{innerWidth:n,innerHeight:s}=$t();return new Le(0,0,n,s)}getShadowDocumentRoot(t=this.container){const i=t?.ownerDocument?.body??$a("body");for(;t!=null;){if(t===i)return;if(t.parentNode instanceof DocumentFragment)return t;t=t.parentNode}}getParent(t){return this.rootElements[t].element}getChildBoundingClientRect(t){const{children:i}=this.rootElements[t],n=[];for(const s of i.values())n.push(Le.fromObject(s.getBoundingClientRect()));return Le.merge(n)}isManagedChildDOMElement(t,i,n){const{children:s}=this.rootElements[i],o=s?.get(n);return o!=null&&t.contains(o)}contains(t,i){return i==null?this.element.contains(t):this.rootElements[i].element.contains(t)}addStyles(t,i){const n="data-ag-charts";if(this.styles.set(t,i),this.container==null)return;const s=a=>a.getAttribute(n)===t,o=a=>{const l=new Set(["TITLE","META"]);let c=!0,d;for(const g of a.children){if(c&&l.has(g.tagName)){d=g;continue}if(c=!1,s(g))return;g.hasAttribute(n)&&(d=g)}const p=ft("style");return this.chart.styleNonce!=null&&(p.nonce=this.chart.styleNonce),d==null?a.prepend(p):a.insertBefore(p,d.nextSibling),p};let r;this.styleContainer?r=o(this.styleContainer):this.initiallyConnected===!1?r=this.addChild("styles",t):this.documentRoot==null&&!Nd.headStyles.has(t)?(r=o($a("head")),Nd.headStyles.add(t)):this.documentRoot!=null&&(r=this.addChild("styles",t)),!(r==null||s(r))&&(r.setAttribute(n,t),r.innerHTML=i)}removeStyles(t){this.removeChild("styles",t)}updateCursor(t,i){this.cursorState.set(t,i),this.element.style.cursor=this.cursorState.stateValue()}getCursor(){return this.element.style.cursor}addChild(t,i,n,s){const{element:o,children:r,listeners:a}=this.rootElements[t];if(!r)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(r.has(i))return r.get(i);const{childElementType:l="div"}=aae.get(t)??{};if(n&&n.tagName.toLowerCase()!==l.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");const c=n??ft(l);for(const[d,p,g]of a)c.addEventListener(d,p,g);if(r.set(i,c),l==="style"&&this.chart.styleNonce!=null&&(c.nonce=this.chart.styleNonce),s){const d=o.querySelector(s.query);if(d==null)throw new Error(`AG Charts - addChild query failed ${s.query}`);d.insertAdjacentElement(s.where,c)}else o?.appendChild(c);return c}removeChild(t,i){const{children:n}=this.rootElements[t];n&&(n.get(i)?.remove(),n.delete(i))}incrementDataCounter(t){const{dataset:i}=this.element;i[t]??(i[t]="0"),i[t]=String(Number(i[t])+1)}setDataBoolean(t,i){this.element.dataset[t]=String(i)}setDataNumber(t,i){this.element.dataset[t]=String(i)}updateContainerClassName(){const{element:t,containerSize:i,minWidth:n,minHeight:s}=this;t.classList.toggle(w_.safeHorizontal,n>=(i?.width??1/0)),t.classList.toggle(w_.safeVertical,s>=(i?.height??1/0))}};Z1.batchedUpdateContainer=[];Z1.headStyles=new Set;var jW=Z1,cae=class extends nl{constructor(){super(ft("div")),this.textElement=tn("text"),this.textElement.role="presentation",this.svgElement=tn("svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(e){this.textElement.textContent=e;const i=this.textElement.getBBox?.();i&&this.svgElement.setAttribute("viewBox",`${i.x} ${i.y} ${i.width} ${i.height}`)}get textContent(){return this.textElement.textContent}destructor(){}},uae=class{constructor(e,t){this.getDispatcher=t,this.onExpanded=()=>{this.controller.setAriaExpanded(!0);const i=this.getDispatcher();if(i&&this.controls){const n={type:"expand-controlled-widget",controlled:this.controls};i.dispatch("expand-controlled-widget",this.controller,n)}},this.onCollapsed=i=>{this.controller.setAriaExpanded(!1),i.mode==="0"&&this.controller.focus()},e.setAriaExpanded(!1),this.controller=e}destroy(){this.controls?.collapse({mode:"2"}),this.setControlled(void 0)}setControlled(e){this.controls&&(this.controls.removeListener("expand-widget",this.onExpanded),this.controls.removeListener("collapse-widget",this.onCollapsed)),this.controls=e,this.controls&&(this.controller.setAriaControls(this.controls.id),this.controls.addListener("expand-widget",this.onExpanded),this.controls.addListener("collapse-widget",this.onCollapsed))}getControlled(){return this.controls}expandControlled(e){this.controller.isDisabled()||this.controls?.expand({controller:this.controller,sourceEvent:void 0,overrideFocusVisible:e?.overrideFocusVisible})}},X1=class extends nl{constructor(e,t){super(e),Tt(this.elem,"role",t),this.setEnabled(!0),this.addListener("keydown",({sourceEvent:i})=>{K1(i)&&(i.preventDefault(),this.htmlListener?.dispatch("click",this,{type:"click",device:"keyboard",sourceEvent:i}))})}lazyControllerImpl(){return this.controllerImpl??(this.controllerImpl=new uae(this,()=>this.internalListener)),this.controllerImpl}destructor(){this.controllerImpl?.destroy()}setEnabled(e){Tt(this.elem,"aria-disabled",!e)}setControlled(e){return this.lazyControllerImpl().setControlled(e)}getControlled(){return this.lazyControllerImpl().getControlled()}expandControlled(e){return this.lazyControllerImpl().expandControlled(e)}addListener(e,t){return super.addListener(e,(i,n)=>{(e==="click"||e==="dblclick")&&this.isDisabled()||t(i,n)})}},vb=class extends X1{constructor(){super(ft("button"))}},dae=class extends nl{constructor(){super(ft("div")),Tt(this.elem,"role","group")}destructor(){}},Q1=class extends nl{constructor(e,t){super(ft("div")),this.focusedChildIndex=0,this.onChildFocus=(i,n)=>{const s=this.children[this.focusedChildIndex];this.focusedChildIndex=n.index,s?.setTabIndex(-1),n.setTabIndex(0)},this.onChildKeyDown=(i,n)=>{const s=this.orientation,[o,r]=s==="both"?[Gy.horizontal,Gy.vertical]:[Gy[s],void 0];let a=-1;if(yb(i.sourceEvent)){const l=i.sourceEvent.key;l===o.nextKey||l===r?.nextKey?a=n.index+1:(l===o.prevKey||l===r?.prevKey)&&(a=n.index-1)}this.children[a]?.focus()},Tt(this.elem,"role",t),this.orientation=e}get orientation(){return Ig(this.elem,"aria-orientation")??"both"}set orientation(e){Tt(this.elem,"aria-orientation",e==="both"?void 0:e)}focus(){this.children[this.focusedChildIndex]?.focus()}clear(){this.focusedChildIndex=0;for(const e of this.children)this.removeChildListeners(e),e.parent=void 0;this.elem.textContent="",this.children.length=0}addChildListeners(e){e.addListener("focus",this.onChildFocus),e.addListener("keydown",this.onChildKeyDown)}removeChildListeners(e){e.removeListener("focus",this.onChildFocus),e.removeListener("keydown",this.onChildKeyDown)}onChildAdded(e){this.addChildListeners(e),e.setTabIndex(this.children.length===1?0:-1)}onChildRemoved(e){this.removeChildListeners(e);const{focusedChildIndex:t,children:i}=this,n=t===e.index;for(let s=0;s<i.length;s++){const o=i[s];o.index===t&&(this.focusedChildIndex=s),o.index=s}if(n){const s=i[t]??i[t-1];s?(this.focusedChildIndex=s.index,s.setTabIndex(0)):this.focusedChildIndex=0}}},hae=class extends Q1{constructor(){super("both","list"),this.setHidden(!0)}destructor(){for(const e of this.children)e.getElement().parentElement.remove()}addChildToDOM(e,t){const i=ft("div");Tt(i,"role","listitem"),Na(i,"position","absolute"),nl.setElementContainer(e,i),this.appendOrInsert(i,t),this.setHidden(!1)}removeChildFromDOM(e){e.getElement().parentElement.remove(),this.setHidden(this.children.length===0)}setHidden(e){this.children.length===0&&(e=!0),super.setHidden(e)}},uf=class extends nl{constructor(e){super(e)}destructor(){}},pae=new Intl.NumberFormat("en-US",{style:"percent"});function df(e,t=2){return typeof e=="number"?UW(e,t):typeof e=="string"?e:String(e??"")}function WW(e){return pae.format(e)}var x_=new Map().set(2,new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}));function UW(e,t){let i=x_.get(t);return i||(i=new Intl.NumberFormat("en-US",{maximumFractionDigits:t,useGrouping:!1}),x_.set(t,i)),i.format(e)}var J1=class Dy extends nl{constructor(){super(ft("input")),this._step=Dy.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(t){this._step=t,this.getElement().step=t.attributeValue}get keyboardStep(){return this._keyboardStep?.step??this._step}set keyboardStep(t){if(t!==this._keyboardStep?.step&&(this._keyboardStep!==void 0&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),t!==void 0)){const i=()=>this.getElement().step=t.attributeValue,n=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:t,onKeyDown:i,onKeyUp:n,onBlur:n},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){return Ig(this.elem,"aria-orientation")??"both"}set orientation(t){Tt(this.elem,"aria-orientation",t==="both"?void 0:t),Dy.registerDefaultPreventers(this,t)}destructor(){}clampValueRatio(t,i){const n=this.getValueRatio(),s=st(t,n,i);return s!==n&&this.setValueRatio(s),s}setValueRatio(t,i){const{divider:n}=this.step,s=Math.round(t*1e4)/n,{ariaValueText:o=WW(s/n)}=i??{},r=this.getElement();r.value=`${s}`,r.ariaValueText=o}getValueRatio(){return this.getElement().valueAsNumber/this.step.divider}static registerDefaultPreventers(t,i){i==="both"?t.removeListener("keydown",Dy.onKeyDown):t.addListener("keydown",Dy.onKeyDown)}static onKeyDown(t,i){let n=[];const{orientation:s}=i;s==="horizontal"?n=["ArrowUp","ArrowDown"]:s==="vertical"&&(n=["ArrowLeft","ArrowRight"]),n.includes(t.sourceEvent.code)&&t.sourceEvent.preventDefault()}};J1.STEP_ONE={attributeValue:"1",divider:1};J1.STEP_HUNDRETH={attributeValue:"0.01",divider:100};var eL=J1,gae=class extends vb{constructor(){super(),Tt(this.elem,"role","switch"),this.setChecked(!1)}setChecked(e){Tt(this.elem,"aria-checked",e)}},bM=class extends Q1{constructor(e="horizontal"){super(e,"toolbar")}destructor(){}};function Kp(e,t){return t.params?.type===e}function fae(e){if(e==="button")return new vb;if(e==="slider")return new eL;if(e==="toolbar")return new bM;if(e==="group")return new dae;if(e==="list")return new hae;if(e==="region")return new uf(ft("div"));if(e==="text")return new cae;if(e==="listswitch")return new gae;throw new Error("AG Charts - error allocating meta")}function M_(e){const t={params:e,result:void 0};return t.result=fae(t.params.type),t}var $W=class{constructor(e,t,i){this.eventsHub=e,this.localeManager=t,this.domManager=i,this.cleanup=new Ui}destroy(){this.cleanup.flush()}addLocalisation(e){e(),this.cleanup.register(this.eventsHub.on("locale:change",e))}createProxyContainer(e){const t=M_(e),{params:i,result:n}=t,s=n.getElement();return this.domManager.addChild("canvas-proxy",i.domManagerId,s),s.classList.add(...i.classList,"ag-charts-proxy-container"),s.role=i.type,Kp("toolbar",t)&&(t.result.orientation=t.params.orientation),this.addLocalisation(()=>{s.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),n}createProxyElement(e){const t=M_(e);if(Kp("button",t)){const{params:i,result:n}=t,s=n.getElement();if(this.initInteract(i,n),typeof i.textContent=="string")s.textContent=i.textContent;else{const{textContent:o}=i;this.addLocalisation(()=>{s.textContent=this.localeManager.t(o.id,o.params)})}this.setParent(t.params,t.result)}if(Kp("slider",t)){const{params:i,result:n}=t,s=n.getElement();this.initInteract(i,n),s.type="range",s.role="presentation",s.style.margin="0px",this.addLocalisation(()=>{s.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),this.setParent(t.params,t.result)}if(Kp("text",t)){const{params:i,result:n}=t;this.initElement(i,n),this.setParent(t.params,t.result)}if(Kp("listswitch",t)){const{params:i,result:n}=t;this.initInteract(i,n),n.setTextContent(i.textContent),n.setChecked(i.ariaChecked),n.setAriaDescribedBy(i.ariaDescribedBy),this.setParent(t.params,t.result)}if(Kp("region",t)){const{params:i,result:n}=t,s=n.getElement();this.initInteract(i,n),s.role="region",this.setParent(t.params,t.result)}return t.result}initElement(e,t){const i=t.getElement();return Na(i,"cursor",e.cursor),i.classList.toggle("ag-charts-proxy-elem",!0),i}initInteract(e,t){const{tabIndex:i,domIndex:n}=e,s=this.initElement(e,t);i!==void 0&&(s.tabIndex=i),n!==void 0&&(t.domIndex=n)}setParent(e,t){if("parent"in e)e.parent?.addChild(t);else{const i={where:e.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",e.domManagerId,t.getElement(),i),t.destroyListener=()=>{this.domManager.removeChild("canvas-proxy",e.domManagerId)}}}},mae={ariaInitSeriesArea:"interactive chart",ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceStandaloneChart:"chart, ${caption}",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationsToolbar:"Annotations",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColor:"Color",ariaLabelColorPicker:"Color picker",ariaLabelColorPickerAlpha:"Transparency",ariaLabelColorPickerHue:"Hue",ariaLabelColorPickerMultiColor:"Multi Color",ariaLabelColorPickerPalette:"Palette",ariaLabelFinancialCharts:"Financial Charts",ariaLabelGaugeTarget:"Target",ariaLabelGaugeValue:"Value",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaRoleDescription2DSlider:"2D slider",ariaValueColorPalette:"s ${s}[percent0to2dp], v ${v}[percent0to2dp]",ariaValueColorPaletteFirstV:"v ${v}[percent0to2dp], s ${s}[percent0to2dp]",ariaValuePanRange:"${min}[percent0to2dp] to ${max}[percent0to2dp]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsFibonacciRetracementTrendBased:"Fib Trend Based",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",contextMenuResetZoom:"Reset zoom",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}",tooltipPaginationStatus:"${index}[number] of ${count}[number]"},yae=/\$\{(\w+)}(?:\[(\w+)])?/gi,NE={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),percent0to2dp:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},vae=({defaultValue:e,variables:t})=>e?.replaceAll(yae,(i,n,s)=>{const o=t[n],r=s==null?null:NE[s];return s!=null&&r==null&&fe.warnOnce(`Format style [${s}] is not supported`),r!=null?r.format(o):typeof o=="number"?NE.number.format(o):o instanceof Date?NE.datetime.format(o):String(o)}),bae=class{constructor(e){this.eventsHub=e,this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(e){this.localeText!==e&&(this.localeText=e,this.eventsHub.emit("locale:change",null))}setLocaleTextFormatter(e){this.getLocaleText=e,this.getLocaleText!==e&&(this.getLocaleText=e,this.eventsHub.emit("locale:change",null))}t(e,t={}){const{localeText:i=mae,getLocaleText:n}=this,s=i[e];return n?.({key:e,defaultValue:s,variables:t})??vae({defaultValue:s,variables:t})??e}},tL=class{constructor(e){this.enabled=!0,this.width=600,this.height=300;const{width:t,height:i,canvasElement:n,willReadFrequently:s=!1}=e;this.pixelRatio=e.pixelRatio??$t("devicePixelRatio")??1,this.element=n??ft("canvas"),this.element.style.display="block",this.element.style.width=(t??this.width)+"px",this.element.style.height=(i??this.height)+"px",this.element.width=Math.round((t??this.width)*this.pixelRatio),this.element.height=Math.round((i??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:s}),this.onEnabledChange(),this.resize(t??0,i??0,this.pixelRatio),Q4(this.context)}drawImage(e,t=0,i=0){return e.drawImage(this.context.canvas,t,i)}toDataURL(e){return this.element.toDataURL(e)}resize(e,t,i){if(!(e>0&&t>0))return;const{element:n,context:s}=this;n.width=Math.round(e*i),n.height=Math.round(t*i),s.setTransform(i,0,0,i,0,0),n.style.width=e+"px",n.style.height=t+"px",this.width=e,this.height=t,this.pixelRatio=i}clear(){X4(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}reset(){this.context.reset(),this.context.verifyDepthZero?.()}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}};A([Vu(e=>e.onEnabledChange())],tL.prototype,"enabled",2);var Cae=class extends _u{constructor(){super(...arguments),this.cache=new Map,this.imageLoadingCount=0}loadImage(e,t){const i=this.cache.get(e);if(i?.image)return i.image;if(i!=null&&t){i.nodes.add(t);return}if(!t)return;const n={image:void 0,nodes:new Set([t])},s=new Image;return this.imageLoadingCount++,s.onload=()=>{n.image=s;for(const o of n.nodes)o.markDirty();n.nodes.clear(),this.imageLoadingCount--,this.emit("image-loaded",{uri:e})},s.onerror=()=>{this.imageLoadingCount--,n.nodes.clear(),this.emit("image-error",{uri:e})},s.src=e,this.cache.set(e,n),n.image}waitingToLoad(){return this.imageLoadingCount>0}destroy(){for(const e of this.cache.values())e.nodes.clear();this.cache.clear()}},wae=class{constructor(e){this.canvas=e,this.debug=at.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(e,t,i){this.canvas.resize(e,t,i);for(const{canvas:n}of this.layersMap.values())n.resize(e,t,i)}addLayer(e){const{width:t,height:i,pixelRatio:n}=this.canvas,{name:s}=e,o=new P1({width:t,height:i,pixelRatio:n});return this.layersMap.set(o,{id:this.nextLayerId++,name:s,canvas:o}),this.debug("Scene.addLayer() - layers",this.layersMap),o}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(const e of this.layersMap.values())e.canvas.destroy();this.layersMap.clear()}},CM=class extends _u{constructor(e){super(),this.debug=at.create(!0,"scene"),this.id=na(this),this.imageLoader=new Cae,this.root=null,this.pendingSize=null,this.isDirty=!1,this.cleanup=new Ui,this.updateDebugFlags(),this.canvas=new tL(e),this.layersManager=new wae(this.canvas),this.cleanup.register(this.imageLoader.on("image-loaded",()=>{this.emit("scene-changed",{})}),this.imageLoader.on("image-error",({uri:t})=>{fe.warnOnce(`Unable to load image ${t}`)}))}waitingForUpdate(){return this.imageLoader?.waitingToLoad()??!1}get width(){return this.pendingSize?.[0]??this.canvas.width}get height(){return this.pendingSize?.[1]??this.canvas.height}get pixelRatio(){return this.pendingSize?.[2]??this.canvas.pixelRatio}setContainer(e){const{element:t}=this.canvas;return t.remove(),e.appendChild(t),this}setRoot(e){return this.root===e?this:(this.isDirty=!0,this.root?.setScene(),this.root=e,e&&(e.visible=!0,e.setScene(this)),this)}updateDebugFlags(){at.inDevelopmentMode(()=>rc._debugEnabled=!0)}clearCanvas(){this.canvas.clear()}attachNode(e){return this.appendChild(e),()=>e.remove()}appendChild(e){return this.root?.appendChild(e),this}removeChild(e){return e.remove(),this}download(e,t){xse(this.canvas.toDataURL(t),e?.trim()??"image")}getDataURL(e){return this.canvas.toDataURL(e)}resize(e,t,i){return e=Math.round(e),t=Math.round(t),i??(i=this.pixelRatio),e>0&&t>0&&(e!==this.width||t!==this.height||i!==this.pixelRatio)?(this.pendingSize=[e,t,i],this.isDirty=!0,!0):!1}render(e){const{debugSplitTimes:t={start:performance.now()},extraDebugStats:i,seriesRect:n}=e??{},{canvas:s,canvas:{context:o}={},root:r,pendingSize:a,width:l,height:c,pixelRatio:d}=this;if(!o)return;const p=at.check("scene:stats","scene:stats:verbose");p&&this.ensureDebugStatsRegistration();const g=performance.now();let m=!1;if(a&&(m=!0,this.layersManager.resize(...a),this.pendingSize=null),r&&!r.visible){this.isDirty=!1;return}let y;if(r instanceof ut&&(y=r.dirty),r!=null&&y===!1&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{tree:zS(r,"console")}),p&&y_(this.layersManager,t,o,void 0,i,n);return}const b={ctx:o,width:l,height:c,devicePixelRatio:d,debugNodes:{}};at.check("scene:stats:verbose")&&(b.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0}),Hre(b);let C=!1;if((y!==!1||m)&&(C=!0,s.clear()),r&&at.check("scene:dirtyTree")){const{dirtyTree:w,paths:x}=RW(r);at.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:w,paths:x})}if(r&&C){if(r.visible&&r.preRender(b),this.debug.check()){const w=zS(r,"console");this.debug("Scene.render() - before",{canvasCleared:C,tree:w})}if(r.visible)try{o.save(),r.render(b),o.restore()}catch(w){throw this.canvas.reset(),w}}t[""]=performance.now()-g,o.verifyDepthZero?.(),this.isDirty=!1,p&&y_(this.layersManager,t,o,b.stats,i,n),jre(o,b.debugNodes),r&&this.debug.check()&&this.debug("Scene.render() - after",{tree:zS(r,"console"),canvasCleared:C})}ensureDebugStatsRegistration(){if(this.releaseDebugStats)return;const e=_re(),t=()=>{e(),this.releaseDebugStats=void 0};this.releaseDebugStats=t,this.cleanup.register(t)}toSVG(){const{root:e,width:t,height:i}=this;if(e!=null)return rc.toSVG(e,t,i)}strip(){const{context:e,pixelRatio:t}=this.canvas;e.setTransform(t,0,0,t,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1,this.clear()}destroy(){this.strip(),this.canvas.destroy(),this.imageLoader.destroy(),this.cleanup.flush(),EW(),Object.assign(this,{canvas:void 0})}};CM.className="Scene";var Sae=class{constructor(e,t,i){this.eventsHub=e,this.annotationRoot=t,this.fireChartEvent=i,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(e){return e==null||ht(e)}restoreMemento(e,t,i){this.annotations=this.cleanData(i??[]).map(n=>{const s=this.getAnnotationTypeStyles(n.type);return _t(n,s)}),this.eventsHub.emit("annotations:restore",{annotations:this.annotations})}updateData(e){this.annotations=this.cleanData(e??[])}fireChangedEvent(){this.fireChartEvent({type:"annotations",annotations:zi([...this.annotations])})}attachNode(e){return this.annotationRoot.append(e),()=>(e.remove(),this)}setAnnotationStyles(e){this.styles=e}getAnnotationTypeStyles(e){return this.styles?.[e]}cleanData(e){for(const t of e)"textAlign"in t&&delete t.textAlign;return e}},YW=(e=>(e[e.CHART_BACKGROUND=0]="CHART_BACKGROUND",e[e.AXIS_BAND_HIGHLIGHT=1]="AXIS_BAND_HIGHLIGHT",e[e.AXIS_GRID=2]="AXIS_GRID",e[e.AXIS=3]="AXIS",e[e.SERIES_AREA_CONTAINER=4]="SERIES_AREA_CONTAINER",e[e.ZOOM_SELECTION=5]="ZOOM_SELECTION",e[e.SERIES_CROSSLINE_RANGE=6]="SERIES_CROSSLINE_RANGE",e[e.SERIES_LAYER=7]="SERIES_LAYER",e[e.AXIS_FOREGROUND=8]="AXIS_FOREGROUND",e[e.SERIES_CROSSHAIR=9]="SERIES_CROSSHAIR",e[e.SERIES_CROSSLINE_LINE=10]="SERIES_CROSSLINE_LINE",e[e.SERIES_ANNOTATION=11]="SERIES_ANNOTATION",e[e.CHART_ANNOTATION=12]="CHART_ANNOTATION",e[e.CHART_ANNOTATION_FOCUSED=13]="CHART_ANNOTATION_FOCUSED",e[e.STATUS_BAR=14]="STATUS_BAR",e[e.SERIES_LABEL=15]="SERIES_LABEL",e[e.LEGEND=16]="LEGEND",e[e.NAVIGATOR=17]="NAVIGATOR",e[e.FOREGROUND=18]="FOREGROUND",e))(YW||{}),xae=class{constructor(e,t){this.eventsHub=e,this.sceneRoot=t,this.axes=new Map,this.axisGridGroup=new ut({name:"Axes-Grids",zIndex:2}),this.axisGroup=new ut({name:"Axes",zIndex:3}),this.axisLabelGroup=new ut({name:"Axes-Labels",zIndex:15}),this.axisCrosslineRangeGroup=new ut({name:"Axes-Crosslines-Range",zIndex:6}),this.axisCrosslineLineGroup=new ut({name:"Axes-Crosslines-Line",zIndex:10}),this.axisCrosslineLabelGroup=new ut({name:"Axes-Crosslines-Label",zIndex:15}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(e,t){const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const n of e)t.includes(n)||(n.detachAxis(i),n.destroy());for(const n of t)e?.includes(n)||n.attachAxis(i);this.axes.clear();for(const n of t){const s=n.createAxisContext();this.axes.has(s.direction)?this.axes.get(s.direction)?.push(s):this.axes.set(s.direction,[s])}this.eventsHub.emit("axis:change",null)}getAxisContext(e){return this.axes.get(e)??[]}destroy(){this.axes.clear(),this.axisGroup.remove(),this.axisGridGroup.remove()}},_y=(e=>(e[e.FULL=0]="FULL",e[e.UPDATE_DATA=1]="UPDATE_DATA",e[e.PROCESS_DATA=2]="PROCESS_DATA",e[e.PROCESS_DOMAIN=3]="PROCESS_DOMAIN",e[e.PERFORM_LAYOUT=4]="PERFORM_LAYOUT",e[e.SERIES_UPDATE=5]="SERIES_UPDATE",e[e.PRE_SCENE_RENDER=6]="PRE_SCENE_RENDER",e[e.SCENE_RENDER=7]="SCENE_RENDER",e[e.NONE=8]="NONE",e))(_y||{}),wM=class{constructor(e,t,i){this.eventsHub=e,this.caller=t,this.animationManager=i,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.pendingData=void 0,this.debug=at.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(e){typeof e=="function"&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=e,this.isLoadingInitialData=!0,this.animationManager.skip(),this.eventsHub.emit("data:source-change",null))}clearCallback(){this.dataSourceCallback=void 0}load(e){const{pendingData:t}=this;if(t!=null&&t.params.windowStart?.valueOf()===e.windowStart?.valueOf()&&t.params.windowEnd?.valueOf()===e.windowEnd?.valueOf()){const i=this.requestCounter++;this.isLoadingInitialData=!1,this.dispatch(i,t.data);return}this.isLoadingData=!0,this.throttledFetch(e)}isLazy(){return this.dataSourceCallback!=null}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}async getData(){const{latestRequest:e}=this;if(!e)return;const{params:t,fetchRequest:i}=e,n=await i;return{params:t,data:n}}restoreData(e){this.pendingData=e}createThrottledFetch(e){return YG(t=>this.fetch(t).catch(i=>fe.error("callback failed",i)),e,{leading:!1,trailing:!0})}createThrottledDispatch(e){return YG((t,i)=>this.dispatch(t,i),e,{leading:!0,trailing:!0})}dispatch(e,t){this.debug(`DataService - dispatching 'data-load' | ${e}`),this.eventsHub.emit("data:load",{data:t})}async fetch(e){"context"in this.caller&&(e.context=this.caller.context);const t=Promise.resolve().then(async()=>{if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const i=performance.now(),n=this.requestCounter++;this.debug(`DataService - requesting | ${n}`);let s;try{s=await this.dataSourceCallback(e),this.debug(`DataService - response | ${performance.now()-i}ms | ${n}`)}catch(r){this.debug(`DataService - request failed | ${n}`),fe.errorOnce(`DataService - request failed | [${r}]`)}this.isLoadingInitialData=!1;const o=this.freshRequests.indexOf(t);return o===-1||this.dispatchOnlyLatest&&o!==this.freshRequests.length-1?(this.debug(`DataService - discarding stale request | ${n}`),s):(this.freshRequests=this.freshRequests.slice(o+1),this.freshRequests.length===0&&(this.isLoadingData=!1),Array.isArray(s)?this.throttledDispatch(n,s):this.eventsHub.emit("data:error",null),s)});this.latestRequest={params:e,fetchRequest:t},this.freshRequests.push(t),await t}};A([ms({newValue(e){this.throttledDispatch=this.createThrottledDispatch(e)}})],wM.prototype,"dispatchThrottle",2);A([ms({newValue(e){this.throttledFetch=this.createThrottledFetch(e)}})],wM.prototype,"requestThrottle",2);var Mae=class{constructor(e,t){this.domManager=e,this.updateService=t,this.observers=[]}updateFonts(e){if(!(!e||e.size===0)){this.loadFonts(e);for(const t of e)this.observeFontStatus(t)}}destroy(){for(const e of this.observers)e.disconnect();this.observers=[]}loadFonts(e){const t=Array.from(e).map(o=>encodeURIComponent(o)),i=":wght@100;200;300;400;500;600;700;800;900",n=`${i}&family=`,s=`@import url('https://fonts.googleapis.com/css2?family=${t.join(n)}${i}&display=swap');
`;this.domManager.addStyles(`google-font-${t.join("-")}`,s)}observeFontStatus(e){const t=globalThis.document.createElement("div");t.style.setProperty("position","absolute"),t.style.setProperty("top","0"),t.style.setProperty("margin","0"),t.style.setProperty("padding","0"),t.style.setProperty("overflow","hidden"),t.style.setProperty("visibility","hidden"),t.style.setProperty("width","auto"),t.style.setProperty("max-width","none"),t.style.setProperty("font-synthesis","none"),t.style.setProperty("font-family",e),t.style.setProperty("font-size","16px"),t.style.setProperty("white-space","nowrap"),t.textContent="UVWxyz",this.domManager.addChild("canvas-container",`font-check-${encodeURIComponent(e)}`,t);const i=new ResizeObserver(n=>{const s=n?.at(0)?.contentBoxSize.at(0)?.inlineSize;s!=null&&s>0&&(yo.clear(),this.updateService.update(4))});i.observe(t),this.observers.push(i)}},KW=class{constructor(){this.registeredListeners=new Map}addListener(e,t){const i={symbol:Symbol(e),handler:t};return this.registeredListeners.has(e)?this.registeredListeners.get(e).push(i):this.registeredListeners.set(e,[i]),()=>this.removeListener(i.symbol)}removeListener(e){for(const[t,i]of this.registeredListeners.entries()){const n=i.findIndex(s=>s.symbol===e);if(n>=0){i.splice(n,1),i.length===0&&this.registeredListeners.delete(t);break}}}dispatch(e,...t){for(const i of this.getListenersByType(e))try{i.handler(...t)}catch(n){fe.errorOnce(n)}}getListenersByType(e){return this.registeredListeners.get(e)??[]}destroy(){this.registeredListeners.clear()}},dy=new WeakMap;function SM(e,t){const i=JSON.stringify(e,null,0);return dy.has(t)||dy.set(t,new Map),dy.get(t)?.has(i)||dy.get(t)?.set(i,t(e)),dy.get(t)?.get(i)}var FE=class{constructor(){this.weak=new WeakMap,this.strong=new Map,this.set=!1,this.value=void 0}};function bb(e,t){let i=new FE;const n=(...s)=>{let o=i;for(const r of s){const a=typeof r=="object"||typeof r=="symbol"?o.weak:o.strong;let l=a.get(r);l==null&&(l=new FE,a.set(r,l)),o=l}if(o.set)return t?.("hit",e,s),o.value;{const r=e(...s);return o.set=!0,o.value=r,t?.("miss",e,s),r}};return n.reset=()=>{i=new FE},n}function ls(e,t){const i=new Map,n=(...r)=>r.map(a=>typeof a=="object"||typeof a=="symbol"?a:(i.has(a)||i.set(a,{v:a}),i.get(a))),s={},o=new WeakMap;return(...r)=>{const a=r.length===0?[s]:n(...r);let l=o;for(const p of a.slice(0,-1))l.has(p)||l.set(p,new WeakMap),l=l.get(p);const c=a.at(-1);let d=l.get(c);return d?t?.("hit",e,r):(d=e(...r),l.set(c,d),t?.("miss",e,r)),d}}var Ca={millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e",month:"%b",year:"%Y"},Dae={millisecond:"%Y %b %e %H:%M:%S.%L",second:"%Y %b %e %H:%M:%S",minute:"%Y %b %e %H:%M",hour:"%Y %b %e %H:%M",day:"%Y %b %e",month:"%Y %b",year:"%Y"},ws={year:0,month:1,day:2,hour:3,minute:4,second:5,millisecond:6},Aae=/%[-_0]?L/,Rae=/%[-_0]?S/,Eae=/%[-_0]?M/,Tae=/%[-_0]?[HI]/,Iae=/^%[-_0]?[de]$/,kae=/^%[-_0]?[Bbm]$/,Lae=/^%[-_0]?[Yy]$/;function Pae(e,t,i){if(typeof e=="string")return e;e??(e=Ca);const{millisecond:n=Ca.millisecond,second:s=Ca.second,minute:o=Ca.minute,hour:r=Ca.hour,day:a=Ca.day,month:l=Ca.month,year:c=Ca.year}=e,d=ws[t],p=Dae[t],g=i?ws[i]:-1;if(g<ws.year&&d>=ws.year&&!Lae.test(c)||g<ws.month&&d>=ws.month&&!kae.test(l)||g<ws.day&&d>=ws.day&&!Iae.test(a))return p;let m;switch(t){case"year":return c;case"month":return g<ws.year?`${l} ${c}`:l;case"day":return g<ws.year?`${l} ${a} ${c}`:`${l} ${a}`;case"hour":m=r;break;case"minute":m=o;break;case"second":m=s;break;case"millisecond":m=n;break;default:return p}if(d>=ws.hour&&!Tae.test(m)||d>=ws.minute&&!Eae.test(m)||d>=ws.second&&!Rae.test(m)||d>=ws.millisecond&&!Aae.test(m))return p;let y;return g<ws.year?y=`${l} ${a} ${c}`:g<ws.month&&(y=`${l} ${a}`),y?`${m} ${y}`:m}var hf=class WS extends KW{constructor(){super(...arguments),this.formats=new Map,this.dateFormatter=bb((t,i,n,s,o)=>{const r=WS.mergeSpecifiers(t,i)??Ca;return WS.getFormatter("date",r,n,s,{truncateDate:o})}),this.formatter=void 0}static mergeSpecifiers(...t){let i;for(const n of t)Qt(n)&&Qt(i)?i={...i,...n}:i=n;return i}static getFormatter(t,i,n,s="long",{truncateDate:o}={}){if(Qt(i)){if(t!=="date"){fe.warn("Date formatter configuration is not supported for non-date types.");return}n??(n="millisecond");const r=s==="component"?i?.[n]??Ca[n]:Pae(i,n,o);return lv(r)}switch(t){case"number":{const r=x1(i);return r==null?void 0:R4(r)}case"date":return lv(i);case"category":return r=>i.replace("%s",String(r))}}setFormatter(t){this.formatter!==t&&(this.formatter=t,this.formats.clear(),this.dateFormatter.reset(),this.dispatch("format-changed"))}format(t,i,{specifier:n,truncateDate:s}={}){if(i.value==null)return;const{formatter:o}=this;if(o==null)return;if(typeof o=="function"){const c=t(o,i);return c==null?void 0:String(c)}const r=o[i.property];if(r==null)return;if(typeof r=="function"){const c=t(r,i);return c==null||ht(c)?c:String(c)}else if(i.type==="date"){const{unit:c,style:d}=i;return this.dateFormatter(r,n,c,d,s)?.(i.value)}const a=n??r;if(typeof a!="string")return;let l=this.formats.get(a);return l==null&&(l=WS.getFormatter(i.type,a),this.formats.set(a,l)),l?.(i.value,i.type==="number"?i.fractionDigits:void 0)}defaultFormat(t,{specifier:i,truncateDate:n}={}){const{formatter:s}=this,o=typeof s=="function"?void 0:s?.[t.property];switch(t.type){case"date":{const{unit:r,style:a}=t,l=o!=null&&typeof o!="function"?o:void 0;return this.dateFormatter(l,i,r,a,n)?.(t.value)??String(t.value)}case"number":return df(t.value,t.fractionDigits);case"category":return Array.isArray(t.value)?t.value.join(" - "):typeof t.value=="string"?t.value:typeof t.value=="number"?df(t.value):String(t.value)}}};function Nae(e,t){return i=>Number(e)*(1-i)+Number(t)*i}function qW(e,t){if(typeof e=="string")try{e=si.fromString(e)}catch{e=si.fromArray([0,0,0])}if(typeof t=="string")try{t=si.fromString(t)}catch{t=si.fromArray([0,0,0])}return i=>si.mix(e,t,i).toRgbaString()}var SI={};il(SI,{easeIn:()=>Fae,easeInOut:()=>Oae,easeInOutQuad:()=>_ae,easeInQuad:()=>Bae,easeOut:()=>yv,easeOutQuad:()=>Gae,inverseEaseOut:()=>XW,linear:()=>ZW});var ZW=e=>e,Fae=e=>1-Math.cos(e*Math.PI/2),yv=e=>Math.sin(e*Math.PI/2),Oae=e=>-(Math.cos(e*Math.PI)-1)/2,Bae=e=>e*e,Gae=e=>1-(1-e)**2,_ae=e=>e<.5?2*e*e:1-(-2*e+2)**2/2,XW=e=>2*Math.asin(e)/Math.PI,$x=.2,cg=["initial","remove","update","add","trailing","end","none"],vv={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:$x,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1+$x,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},QW=(e=>(e.Loop="loop",e.Reverse="reverse",e))(QW||{});function Vae(e){return e.every(t=>t instanceof rc)}function xM(e){return Vae(e)?{nodes:e,selections:[]}:{nodes:[],selections:e}}function xI(e,t){return e===t?!0:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((i,n)=>xI(i,t[n])):zx(e)&&zx(t)?e.equals(t):Qt(e)&&Qt(t)?F1(e,t,xI):!1}var JW=class{constructor(e){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=e.id,this.groupId=e.groupId,this.autoplay=e.autoplay??!0,this.ease=e.ease??ZW,this.phase=e.phase;const t=e.duration??vv[this.phase].animationDuration;this.duration=t*e.defaultDuration,this.delay=(e.delay??0)*e.defaultDuration,this.onComplete=e.onComplete,this.onPlay=e.onPlay,this.onStop=e.onStop,this.onUpdate=e.onUpdate,this.interpolate=this.createInterpolator(e.from,e.to),this.from=e.from,e.skip===!0&&(this.onUpdate?.(e.to,!1,this),this.onStop?.(this),this.onComplete?.(this),this.isComplete=!0),e.collapsable!==!1&&(this.duration=this.checkCollapse(e,this.duration))}checkCollapse(e,t){return xI(e.from,e.to)?0:t}play(e=!1){this.isPlaying||this.isComplete||(this.isPlaying=!0,this.onPlay?.(this),this.autoplay&&(this.autoplay=!1,e&&this.onUpdate?.(this.from,!0,this)))}stop(){this.isPlaying=!1,this.isComplete||(this.isComplete=!0,this.onStop?.(this))}update(e){if(this.isComplete)return e;!this.isPlaying&&this.autoplay&&this.play(!0);const t=this.elapsed;if(this.elapsed+=e,this.delay>this.elapsed)return 0;const i=this.interpolate(this.isReverse?1-this.delta:this.delta);this.onUpdate?.(i,!1,this);const n=this.delay+this.duration;return this.elapsed>=n?(this.stop(),this.isComplete=!0,this.onComplete?.(this),e-(n-t)):0}get delta(){return this.ease(st(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(e,t){if(typeof t!="object"||zx(t))return this.interpolateValue(e,t);if(Array.isArray(t)){const n=[];for(let s=0;s<t.length;s++){const o=this.createInterpolator(e[s],t[s]);o!=null&&n.push(o)}return s=>{const o=[];for(const r of n)o.push(r(s));return o}}const i=[];for(const n of Object.keys(t)){const s=this.createInterpolator(e[n],t[n]);s!=null&&i.push([n,s])}return n=>{const s={};for(const[o,r]of i)s[o]=r(n);return s}}interpolateValue(e,t){if(!(e==null||t==null)){if(zx(e))return i=>e[aM](t,i);try{switch(typeof e){case"number":return Nae(e,t);case"string":return qW(e,t);case"boolean":if(e===t)return()=>e;break;case"object":return()=>e;default:throw new Error(`Unable to interpolate values: ${e}, ${t}`)}}catch{}throw new Error(`Unable to interpolate values: ${e}, ${t}`)}}},D_=class{constructor(e){this.maxAnimationTime=e,this.debug=at.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(cg.map(t=>[t,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(cg[this.currentPhase])??[]}checkOverlappingId(e){e!=null&&this.controllers.has(e)&&(this.controllers.get(e).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${e}`),this.skip())}addAnimation(e){if(e.isComplete)return;if(cg.indexOf(e.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",e.id),e.stop();return}this.controllers.set(e.id,e),this.phases.get(e.phase)?.push(e)}removeAnimation(e){this.controllers.delete(e.id);const t=this.phases.get(e.phase),i=t?.indexOf(e);i!=null&&i>=0&&t?.splice(i,1)}progress(e){if(!this.isReady)return;let t=e===0?.01:e;const i=()=>{const c=cg[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:c,phaseMeta:vv[c]}};let{phase:n,phaseControllers:s,phaseMeta:o}=i();const r=()=>cg[this.currentPhase]==null,a=()=>{for({phase:n,phaseControllers:s,phaseMeta:o}=i();!r()&&s.length===0;)this.currentPhase++,{phase:n,phaseControllers:s,phaseMeta:o}=i(),this.debug(`AnimationBatch - phase changing to ${n}`,{unusedTime:t},s)},l=this.controllers.size;this.debug(`AnimationBatch - ${e}ms; phase ${n} with ${s?.length} of ${l}`);do{const c=t,d=o.skipIfNoEarlierAnimations&&this.animationTimeConsumed===0;let p=0;for(const g of s)d?g.stop():t=Math.min(g.update(c),t),g.isComplete&&(p++,this.removeAnimation(g));this.animationTimeConsumed+=c-t,this.debug(`AnimationBatch - updated ${s.length} controllers; ${p} completed`,s),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),a()}while(t>0&&!r());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let e=!0;for(const[,t]of this.controllers)if(t.duration>0&&vv[t.phase].skipIfNoEarlierAnimations!==!0){e=!1;break}if(!e)for(const[,t]of this.controllers)t.autoplay&&t.play(!0)}skip(e=!0){if(this.skipAnimations===!1&&e===!0){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=e}play(){for(const e of this.controllers.values())e.play()}stop(){for(const e of this.controllers.values())try{e.stop(),this.removeAnimation(e)}catch(t){fe.error("Error during animation stop",t)}this.dispatchStopped()}stopByAnimationId(e){if(e!=null&&this.controllers.has(e)){const t=this.controllers.get(e);t&&(t.stop(),this.removeAnimation(t))}}stopByAnimationGroupId(e){for(const t of this.controllers.values())t.groupId===e&&this.stopByAnimationId(t.id)}dispatchStopped(){for(const e of this.stoppedCbs)e();this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}getRemainingTime(e){if(!this.isActive())return 0;let t=0;for(const[i,n]of this.phases)n.length!==0&&(e!=null&&e!==i||(t+=Math.max(...n.map(s=>s.isComplete?0:s.delay+s.duration-(s.elapsed??0)))));return t}destroy(){this.stop(),this.controllers.clear()}},eU=(e=>(e[e.Default=32]="Default",e[e.ZoomDrag=16]="ZoomDrag",e[e.Annotations=8]="Annotations",e[e.ContextMenu=4]="ContextMenu",e[e.Animation=2]="Animation",e[e.AnnotationsSelected=1]="AnnotationsSelected",e[e.Clickable=41]="Clickable",e[e.Focusable=34]="Focusable",e[e.Keyable=43]="Keyable",e[e.ContextMenuable=36]="ContextMenuable",e[e.AnnotationsMoveable=9]="AnnotationsMoveable",e[e.AnnotationsDraggable=57]="AnnotationsDraggable",e[e.ZoomDraggable=50]="ZoomDraggable",e[e.ZoomClickable=34]="ZoomClickable",e[e.ZoomWheelable=59]="ZoomWheelable",e[e.All=63]="All",e))(eU||{}),tU=class{constructor(){this.stateQueue=34}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}isState(e){return!!(this.stateQueue&-this.stateQueue&e)}};function A_(e){return e==null?!0:!Number.isNaN(e)&&e>=0&&e<=2}var iU=class{constructor(e,t){this.interactionManager=e,this.chartUpdateMutex=t,this.defaultDuration=1e3,this.maxAnimatableItems=1/0,this.batch=new D_(this.defaultDuration*1.5),this.debug=at.create(!0,"animation"),this.events=new _u,this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0,this.cumulativeAnimationTime=0}addListener(e,t){return this.events.on(e,t)}animate(e){const t=this.batch;try{t.checkOverlappingId(e.id)}catch(a){this.failsafeOnError(a);return}let{id:i}=e;i==null&&(i=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);const n=this.isSkipped()||e.phase==="none";n&&this.debug("AnimationManager - skipping animation");const{delay:s,duration:o}=e;if(!A_(s))throw new Error(`Animation delay of ${s} is unsupported (${i})`);if(!A_(o))throw new Error(`Animation duration of ${o} is unsupported (${i})`);const r=new JW({...e,id:i,skip:n,autoplay:this.isPlaying?e.autoplay:!1,phase:e.phase,defaultDuration:this.defaultDuration});if(!this.forceTimeJump(r,this.defaultDuration))return this.batch.addAnimation(r),r}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(e){try{this.batch.stopByAnimationId(e)}catch(t){this.failsafeOnError(t)}}stopByAnimationGroupId(e){try{this.batch.stopByAnimationGroupId(e)}catch(t){this.failsafeOnError(t)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(e=!0){this.skipAnimations=e}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}getRemainingTime(e){return this.batch.getRemainingTime(e)}getCumulativeAnimationTime(){return this.cumulativeAnimationTime}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error("Stack trace for animation skip tracking").stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(e){this.requestId=$t().requestAnimationFrame(t=>{e(t).catch(i=>fe.error(i))})}forceTimeJump(e,t){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||this.requestId!==null)return;let e;const t=async i=>{await this.debug.group("AnimationManager.onAnimationFrame()",async()=>{const n=()=>{const s=i-(e??i);e=i,this.debug("AnimationManager",{controllersCount:this.batch.size,deltaTime:s}),this.interactionManager.pushState(2);try{this.batch.progress(s),this.cumulativeAnimationTime+=s}catch(o){this.failsafeOnError(o)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:s})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(n):await this.chartUpdateMutex.acquire(n),this.batch.isActive()?this.scheduleAnimationFrame(t):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))})};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(t)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}),this.requestId=null,this.startBatch())}failsafeOnError(e,t=!0){fe.error("Error during animation, skipping animations",e),t&&this.cancelAnimation()}startBatch(e){this.debug(`AnimationManager - startBatch() with skipAnimations=${e}.`),this.reset(),this.batch.destroy(),this.batch=new D_(this.defaultDuration*1.5),e===!0&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(e){this.batch.stoppedCbs.add(e)}destroy(){this.stop(),this.events.clear()}},zae=class{constructor(){this.download={type:"action",showOn:"always",label:"contextMenuDownload",enabled:!0,action:void 0,items:void 0},this["zoom-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuZoomToCursor",enabled:!0,action:void 0,items:void 0},this["pan-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuPanToCursor",enabled:!0,action:void 0,items:void 0},this["reset-zoom"]={type:"action",showOn:"series-area",label:"contextMenuResetZoom",enabled:!0,action:void 0,items:void 0},this["toggle-series-visibility"]={type:"action",showOn:"legend-item",label:"contextMenuToggleSeriesVisibility",enabled:!0,action:void 0,items:void 0},this["toggle-other-series"]={type:"action",showOn:"legend-item",label:"contextMenuToggleOtherSeries",enabled:!0,action:void 0,items:void 0},this.separator={type:"separator",showOn:"always",label:"separator",enabled:!0,action:void 0,items:void 0}}},Hae=class{constructor(){this.defaults=["download","zoom-to-cursor","pan-to-cursor","reset-zoom","toggle-series-visibility","toggle-other-series"]}},nU=class{constructor(){this.items=new zae,this.lists=new Hae}},sU=class{constructor(e){this.eventsHub=e,this.builtins=new nU,this.hiddenActions=new Set,this.toggle("zoom-to-cursor","hide"),this.toggle("pan-to-cursor","hide"),this.toggle("reset-zoom","hide")}static check(e,t){return t.showOn==e}static checkCallback(e,t,i){return e===t}dispatchContext(e,t,i,n){const{widgetEvent:s}=t;if(s.sourceEvent.defaultPrevented)return;const o=n?.x??t.canvasX,r=n?.y??t.canvasY,a={showOn:e,x:o,y:r,context:i,widgetEvent:s};this.eventsHub.emit("context-menu:setup",a),this.eventsHub.emit("context-menu:complete",a)}isVisible(e){return!this.hiddenActions.has(e)}toggle(e,t){switch(t??(t=this.isVisible(e)?"hide":"show"),t){case"show":this.hiddenActions.delete(e);break;case"hide":this.hiddenActions.add(e);break}}},oU=class{constructor(e){this.eventsHub=e,this.highlightStates=new cf}updateHighlight(e,t){const i=this.getActiveHighlight();this.highlightStates.set(e,t);const n=this.getActiveHighlight();this.isEqual(n,i)||this.eventsHub.emit("highlight:change",{callerId:e,currentHighlight:n,previousHighlight:i})}getActiveHighlight(){return this.highlightStates.stateValue()}isEqual(e,t){return e===t||e!=null&&t!=null&&e?.series===t?.series&&e?.itemId===t?.itemId&&e?.datum===t?.datum}},rU=(e=>(e[e.None=0]="None",e[e.Item=1]="Item",e[e.Series=2]="Series",e[e.OtherSeries=3]="OtherSeries",e[e.OtherItem=4]="OtherItem",e))(rU||{}),MM=[0,1,2,3,4];function Gf(e){const t=i=>i;switch(e){case 1:return"highlighted-item";case 4:return"unhighlighted-item";case 2:return"highlighted-series";case 3:return"unhighlighted-series";case 0:return"none";default:return t(e)}}var pc=class extends Qe{};A([k],pc.prototype,"fill",2);A([k],pc.prototype,"fillOpacity",2);A([k],pc.prototype,"stroke",2);A([k],pc.prototype,"strokeWidth",2);A([k],pc.prototype,"strokeOpacity",2);A([k],pc.prototype,"lineDash",2);A([k],pc.prototype,"lineDashOffset",2);var gc=class extends Qe{constructor(){super(...arguments),this.enabled=!0,this.range="tooltip",this.bringToFront=!1,this.highlightedItem={},this.unhighlightedItem={},this.highlightedSeries={},this.unhighlightedSeries={}}getItemHighlightStyle(e){switch(e){case 1:return this.highlightedItem;case 4:return this.unhighlightedItem;case 2:return this.highlightedSeries;case 3:return this.unhighlightedSeries}}getSeriesHighlightStyle(e){switch(e){case 1:case 4:case 2:return this.highlightedSeries;case 3:return this.unhighlightedSeries}}getStyle(e){return _t(this.getItemHighlightStyle(e),this.getSeriesHighlightStyle(e))}};A([k],gc.prototype,"enabled",2);A([k],gc.prototype,"range",2);A([k],gc.prototype,"bringToFront",2);A([k],gc.prototype,"highlightedItem",2);A([k],gc.prototype,"unhighlightedItem",2);A([k],gc.prototype,"highlightedSeries",2);A([k],gc.prototype,"unhighlightedSeries",2);var DM=class extends Qe{};A([k],DM.prototype,"strokeWidth",2);A([k],DM.prototype,"dimOpacity",2);A([k],DM.prototype,"enabled",2);var aU=class extends Qe{constructor(){super(...arguments),this.color="black"}};A([k],aU.prototype,"color",2);var sa=class extends Qe{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};A([k],sa.prototype,"start",2);A([k],sa.prototype,"stop",2);A([k],sa.prototype,"fill",2);A([k],sa.prototype,"fillOpacity",2);A([k],sa.prototype,"stroke",2);A([k],sa.prototype,"strokeWidth",2);A([k],sa.prototype,"strokeOpacity",2);A([k],sa.prototype,"lineDash",2);A([k],sa.prototype,"lineDashOffset",2);var Cb=class{constructor(){this.key="x",this.segments=new Ff(sa)}};A([k],Cb.prototype,"enabled",2);A([k],Cb.prototype,"key",2);A([k],Cb.prototype,"segments",2);var zu=class extends Qe{constructor(){super(...arguments),this.type="gradient",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.reverse=!1,this.colorSpace="rgb"}};A([k],zu.prototype,"type",2);A([k],zu.prototype,"colorStops",2);A([k],zu.prototype,"bounds",2);A([k],zu.prototype,"gradient",2);A([k],zu.prototype,"rotation",2);A([k],zu.prototype,"reverse",2);A([k],zu.prototype,"colorSpace",2);var In=class extends Qe{constructor(){super(...arguments),this.type="pattern",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.scale=1,this.reverse=!1,this.pattern="forward-slanted-lines",this.width=26,this.height=26,this.padding=6,this.fill="black",this.fillOpacity=1,this.backgroundFill="white",this.backgroundFillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0}};A([k],In.prototype,"type",2);A([k],In.prototype,"colorStops",2);A([k],In.prototype,"bounds",2);A([k],In.prototype,"gradient",2);A([k],In.prototype,"rotation",2);A([k],In.prototype,"scale",2);A([k],In.prototype,"reverse",2);A([k],In.prototype,"path",2);A([k],In.prototype,"pattern",2);A([k],In.prototype,"width",2);A([k],In.prototype,"height",2);A([k],In.prototype,"padding",2);A([k],In.prototype,"fill",2);A([k],In.prototype,"fillOpacity",2);A([k],In.prototype,"backgroundFill",2);A([k],In.prototype,"backgroundFillOpacity",2);A([k],In.prototype,"stroke",2);A([k],In.prototype,"strokeOpacity",2);A([k],In.prototype,"strokeWidth",2);var fc=class extends Qe{constructor(){super(...arguments),this.type="image",this.url="",this.rotation=0,this.scale=1,this.backgroundFill="black",this.backgroundFillOpacity=1,this.repeat="no-repeat",this.fit="contain"}};A([k],fc.prototype,"type",2);A([k],fc.prototype,"url",2);A([k],fc.prototype,"rotation",2);A([k],fc.prototype,"scale",2);A([k],fc.prototype,"backgroundFill",2);A([k],fc.prototype,"backgroundFillOpacity",2);A([k],fc.prototype,"repeat",2);A([k],fc.prototype,"fit",2);var wb=class extends Qe{constructor(e=!0){super(),this.deprecated=e,this.item=new pc,this.series=new DM,this.text=new aU}set(e){return this.deprecated&&fe.warnOnce("highlightStyle is deprecated, use highlight instead."),super.set(e)}};A([k],wb.prototype,"item",2);A([k],wb.prototype,"series",2);A([k],wb.prototype,"text",2);var Tr=class extends Qe{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new gc,this.highlightStyle=new wb}handleUnknownProperties(e,t){"context"in t&&(this.context=t.context,e.delete("context"))}};A([k],Tr.prototype,"id",2);A([k],Tr.prototype,"visible",2);A([k],Tr.prototype,"focusPriority",2);A([k],Tr.prototype,"showInLegend",2);A([k],Tr.prototype,"cursor",2);A([k],Tr.prototype,"nodeClickRange",2);A([k],Tr.prototype,"highlight",2);A([k],Tr.prototype,"highlightStyle",2);function R_(e,t){if(e==null||t.length===0)return[!1,!1];const i=e.valueOf(),n=t[0],s=t.at(-1);if(typeof n=="string")return[i===n,i===s];let o=n.valueOf(),r=s.valueOf();return o>r&&([o,r]=[r,o]),[i===o,i===r]}function AM(e,t,i,n,s,o){const[r,a]=R_(t,o),[l,c]=R_(e,s);return{xKey:i,yKey:n,xValue:e,yValue:t,first:l,last:c,min:r,max:a}}function bv(e,t,[i,n],s){let o=hv(0,t-1,a=>{const l=e===1?a:t-a,c=s(l)?.[1]??Number.NaN;return!Number.isFinite(c)||c>=i})??0,r=jd(0,t-1,a=>{const l=e===1?a:t-a,c=s(l)?.[0]??Number.NaN;return!Number.isFinite(c)||c<=n})??t-1;return e===-1&&([o,r]=[t-r,t-o]),o=Math.max(o,0),r=Math.min(r+1,t),[o,r]}function iL(e,t,i){if(i){const{x:s,y:o,width:r,height:a}=i;return{canvasX:s+r/2,canvasY:o+a/2}}const n=t.yBar?.upperPoint??t.midPoint??e.datumMidPoint?.(t);if(n){const{x:s,y:o}=Hi.toCanvasPoint(e.contentGroup,n.x,n.y);return{canvasX:Math.round(s),canvasY:Math.round(o)}}}function lU(e,t,i,n,s){let o=-1,r=0,a=0,l=!1;for(;r<n&&o<=t-e;){o+=1;const c=i+a;if(l||(a*=-1),a>=0&&(a+=1),l&&a<0&&(a-=1),c<e||c>t){l=!0;continue}s(c)&&(r+=1)}return r}function nL(e){const t={};for(const i of MM)t[i]=e(void 0,!1,i);return t}function jae(e,...t){const i={};for(const n of t??["default"])for(const s of MM){const o=i[n]??(i[n]={});o[s]=e(void 0,!1,s,n)}return i}var Yx=class{constructor(e,t,i,n){this.domManager=i,this.tooltip=n,this.stateTracker=new cf,this.suppressState=new cf(!1),this.appliedState=null,this.cleanup=new Ui,this.cleanup.register(n.setup(t,i),e.on("dom:hidden",()=>this.tooltip.hide()))}destroy(){this.cleanup.flush()}updateTooltip(e,t,i,n){i??(i=this.stateTracker.get(e)?.content),this.stateTracker.set(e,{meta:t,content:i,pagination:n}),this.applyStates()}removeTooltip(e){this.stateTracker.delete(e),this.applyStates()}suppressTooltip(e){this.suppressState.set(e,!0)}unsuppressTooltip(e){this.suppressState.delete(e)}applyStates(){const e=this.stateTracker.stateId(),t=e?this.stateTracker.get(e):void 0;if(this.suppressState.stateValue()||t?.meta==null||t?.content==null){this.appliedState=null,this.tooltip.hide();return}const i=this.domManager.getBoundingClientRect(),n=this.tooltip.bounds==="extended"?this.domManager.getOverlayClientRect():i;if(qs(this.appliedState?.content,t?.content)&&qs(this.appliedState?.pagination,t?.pagination)){const s=this.tooltip.isVisible();this.tooltip.show(n,i,t?.meta,null,void 0,s)}else this.tooltip.show(n,i,t?.meta,t?.content,t?.pagination);this.appliedState=t}static makeTooltipMeta(e,t,i,n){const{canvasX:s,canvasY:o}=e,r=t.properties.tooltip,{placement:a,anchorTo:l,xOffset:c,yOffset:d}=r.position,p=iL(t,i,n);return{canvasX:s,canvasY:o,nodeCanvasX:p?.canvasX??s,nodeCanvasY:p?.canvasY??o,enableInteraction:r.interaction?.enabled??!1,showArrow:r.showArrow,position:{placement:a,anchorTo:l,xOffset:c,yOffset:d}}}},E_=3,Wae=505,T_=30;function OE(e,t){const{device:i,offsetX:n,offsetY:s,clientX:o,clientY:r,currentX:a,currentY:l,sourceEvent:c}=t;return{type:e,device:i,offsetX:n,offsetY:s,clientX:o,clientY:r,currentX:a,currentY:l,sourceEvent:c}}function I_(e,t){const i=e*e+t*t,n=E_*E_;return i>=n}function Uae(e,t){const i=e.clientX-t.clientX,n=e.clientY-t.clientY,s=i*i+n*n,o=T_*T_;return s<o}var cU=class{constructor(e){this.cleanup=new Ui,this.events=new _u,this.isDragging=!1,this.touch={distanceTravelledX:0,distanceTravelledY:0,clientX:0,clientY:0},this.cleanup.register(e.addListener("touchstart",this.onTouchStart.bind(this)),e.addListener("touchmove",this.onTouchMove.bind(this)),e.addListener("touchend",this.onTouchEnd.bind(this)),e.addListener("mousemove",this.onMouseMove.bind(this)),e.addListener("dblclick",this.onDblClick.bind(this)),e.addListener("drag-start",this.onDragStart.bind(this)),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",this.onDragEnd.bind(this)))}destroy(){this.cleanup.flush()}onTouchStart(e){const{clientX:t,clientY:i}=e.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX=0,this.touch.distanceTravelledY=0,this.touch.clientX=t,this.touch.clientY=i}onTouchMove(e){const{clientX:t,clientY:i}=e.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX+=Math.abs(this.touch.clientX-t),this.touch.distanceTravelledY+=Math.abs(this.touch.clientY-i),this.touch.clientX=t,this.touch.clientY=i}onTouchEnd(e){e.sourceEvent.preventDefault()}onMouseMove(e){this.events.emit("mousemove",e)}onDblClick(e){this.events.emit("dblclick",e)}onDragStart(e){this.dragStartEvent=e}onDragMove(e){this.dragStartEvent!=null&&I_(e.originDeltaX,e.originDeltaY)&&(this.events.emit("drag-start",this.dragStartEvent),this.events.emit("drag-move",{...this.dragStartEvent,type:"drag-move"}),this.dragStartEvent=void 0,this.isDragging=!0),this.isDragging&&this.events.emit("drag-move",e)}onDragEnd(e){if(this.isDragging){this.events.emit("drag-end",e),this.isDragging=!1;return}if(e.device==="mouse"){const t=OE("click",e);this.events.emit("click",t)}else if(e.sourceEvent.type==="touchend"){if(I_(this.touch.distanceTravelledX,this.touch.distanceTravelledY))return;const t=OE("click",e);this.events.emit("click",t);const i=Date.now();if(this.lastClick!==void 0&&i-this.lastClick.time<=Wae&&Uae(this.lastClick,e)){const n=OE("dblclick",e);this.events.emit("dblclick",n),this.lastClick=void 0}else this.lastClick={time:i,clientX:e.clientX,clientY:e.clientY}}}},BE=class extends uf{constructor(e){super(e)}addChildToDOM(){}removeChildFromDOM(){}},$ae=class{constructor(e,t){this.seriesWidget=new BE(e.getParent("series-area")),this.chartWidget=new BE(e.getParent("canvas-proxy")),this.containerWidget=new BE(e.getParent("canvas-container")),this.containerWidget.addChild(this.chartWidget),this.chartWidget.addChild(this.seriesWidget),t.withDragInterpretation&&(this.seriesDragInterpreter=new cU(this.seriesWidget))}destroy(){this.seriesDragInterpreter?.destroy(),this.seriesWidget.destroy(),this.chartWidget.destroy(),this.containerWidget.destroy()}};function pf(e,t){const[i,n]=Gn(t);return st(i,e,n)}function Gn(e){if(e.length===0)return[];const t=[1/0,-1/0];for(const i of e)i<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i);return t}function wh(e){const[t,i]=Gn(e);return i-t}function uU(e){return e=Math.trunc(e),e<=0?1:e===1?2:1<<32-Math.clz32(e-1)}function MI(e){return e=Math.trunc(e),e<=0?0:e===1?1:1<<31-Math.clz32(e)}var dU=class DI extends hM{constructor(t=[],i=[]){super(),this.domain=t,this.range=i,this.defaultTickCount=DI.defaultTickCount,this.defaultClamp=!1}static is(t){return t instanceof DI}normalizeDomains(...t){return sL(...t)}calcBandwidth(t=1,i=1){const{domain:n}=this,s=this.getPixelRange();if(n.length===0)return s;let r=Math.abs(n[1].valueOf()-n[0].valueOf())/t+1;if(i!==0){const a=Math.floor(s);r=Math.min(r,a)}return s/Math.max(1,r)}convert(t,i){const{domain:n}=this;if(!n||n.length<2||t==null)return Number.NaN;const{range:s}=this,o=i?.clamp??this.defaultClamp;let r=n[0].valueOf(),a=n[1].valueOf(),l=t.valueOf();if(this.transform&&(r=this.transform(r),a=this.transform(a),l=this.transform(l)),o){const[d,p]=Gn([r,a]);if(l<d)return s[0];if(l>p)return s[1]}if(r===a)return(s[0]+s[1])/2;if(l===r)return s[0];if(l===a)return s[1];const c=s[0];return c+(l-r)/(a-r)*(s[1]-c)}invert(t,i){const{domain:n}=this;if(n.length<2)return;let s=n[0].valueOf(),o=n[1].valueOf();this.transform&&(s=this.transform(s),o=this.transform(o));const{range:r}=this,[a,l]=r;let c;return a===l?c=this.toDomain((s+o)/2):c=this.toDomain(s+(t-a)/(l-a)*(o-s)),this.transformInvert?this.transformInvert(c):c}getPixelRange(){const[t,i]=this.range;return Math.abs(i-t)}};dU.defaultTickCount=5;var Ut=dU;function sL(...e){let t,i=1/0,n,s=-1/0;for(const o of e)for(const r of o){const a=r.valueOf();a<i&&(i=a,t=r),a>s&&(s=a,n=r)}return t!=null&&n!=null?{domain:[t,n],animatable:!0}:{domain:[],animatable:!1}}var oL=class hU extends hM{constructor(){super(...arguments),this.invalid=!0,this.range=[0,1],this.round=!1,this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(t){return t instanceof hU}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=st(0,t,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this.invalid=!0,this._paddingInner=st(0,t,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this.invalid=!0,this._paddingOuter=st(0,t,1)}get paddingOuter(){return this._paddingOuter}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&fe.warnOnce("Expected update to not invalidate scale"))}convert(t,i){this.refresh();const n=this.findIndex(t,i?.alignment);return n==null||n<0||n>=this.bands.length?Number.NaN:this.ordinalRange(n)}invertNearestIndex(t){this.refresh();const i=this.bands.length;if(i===0)return-1;let n=0,s=i-1,o=1/0,r=0;for(;n<=s;){const a=Math.trunc((s+n)/2),l=this.ordinalRange(a),c=Math.abs(l-t);if(c===0)return a;c<o&&(o=c,r=a),l<t?n=a+1:s=a-1}return r}update(){const[t,i]=this.range;let{_paddingInner:n}=this;const{_paddingOuter:s,bands:o}=this,r=o.length;if(r===0)return;const a=i-t;let l;r===1?(n=0,l=a*(1-s*2)):l=a/Math.max(1,r-n+s*2);const c=this.round&&Math.floor(l)>0,d=c?Math.floor(l):l;let p=t+(a-d*(r-n))/2,g=d*(1-n);c&&(p=Math.round(p),g=Math.round(g)),this._step=d,this._inset=p,this._bandwidth=g,this._rawBandwidth=l*(1-n)}ordinalRange(t){const{_inset:i,_step:n,range:s}=this,o=Math.min(s[0],s[1]),r=Math.max(s[0],s[1]);return st(o,i+n*t,r)}};A([mb],oL.prototype,"range",2);A([mb],oL.prototype,"round",2);var mc=oL,oa=class pU extends mc{static is(t){return t instanceof pU}toDomain(t){return new Date(t)}get reversed(){const{domain:t}=this;return t.length>0&&t[0].valueOf()>t.at(-1).valueOf()}convert(t,i){this.refresh(),t instanceof Date||(t=new Date(t));const{domain:n,bands:s,reversed:o}=this;if(n.length<=0)return Number.NaN;const r=this.ordinalRange(0),a=this.ordinalRange(s.length-1);if(s.length===0)return r;if(i?.clamp===!0){const{range:x}=this;if(t<s[0])return x[0];if(t>s.at(-1))return x[1]}if((i?.alignment??0)!==2){const x=super.convert(t,i);return o?a-(x-r):x}const c=t.valueOf();let d=this.findIndex(t)??0,p;o?(d=Math.min(Math.max(d,1),s.length-1),p=-1):(d=Math.min(Math.max(d,0),s.length-2),p=1);const g=s[d].valueOf(),m=s[d+p].valueOf(),y=this.ordinalRange(d),b=this.ordinalRange(d+p),w=(c-g)/(m-g)*(b-y)+y;return o?a-(w-r):w}invert(t,i=!1){this.refresh();const{domain:n,bands:s}=this;if(n.length<=0)return;const o=n[0].valueOf()>n.at(-1).valueOf();let r;return i?r=this.invertNearestIndex(t-this.bandwidth/2):r=hv(0,s.length-1,l=>this.ordinalRange(l)>=t)??s.length-1,s[o?s.length-1-r:r]}findIndex(t,i=0){const{bands:n}=this,s=t.valueOf();return i===1?hv(0,n.length-1,o=>n[o].valueOf()>=s):jd(0,n.length-1,o=>n[o].valueOf()<=s)}},Cv={bottomCenter:Xae,center:Zae,clone:tle,collides:ile,end:Kae,from:nle,height:Jae,round:ele,start:Yae,topCenter:qae,origin:sle,width:Qae};function Yae(e){return{x:e.x1,y:e.y1}}function Kae(e){return{x:e.x2,y:e.y2}}function qae(e){return{x:(e.x1+e.x2)/2,y:Math.min(e.y1,e.y2)}}function Zae(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}}function Xae(e){return{x:(e.x1+e.x2)/2,y:Math.max(e.y1,e.y2)}}function Qae(e){return Math.abs(e.x2-e.x1)}function Jae(e){return Math.abs(e.y2-e.y1)}function ele(e){return{x1:Math.round(e.x1),y1:Math.round(e.y1),x2:Math.round(e.x2),y2:Math.round(e.y2)}}function tle(e){return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}}function ile(e,t){const i=AI(e),n=AI(t);return i.x1<=n.x2&&i.x2>=n.x1&&i.y1<=n.y2&&i.y2>=n.y1}function AI(e){return{x1:Math.min(e.x1,e.x2),x2:Math.max(e.x1,e.x2),y1:Math.min(e.y1,e.y2),y2:Math.max(e.y1,e.y2)}}function nle(e,t,i,n){if(typeof e=="number")return{x1:e,y1:t,x2:i,y2:n};if("width"in e)return AI({x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height});throw new Error(`Values can not be converted into a vector4: [${JSON.stringify(e)}] [${t}] [${i}] [${n}]`)}function sle(){return{x1:0,y1:0,x2:0,y2:0}}function Zw(e,t,i,n,s){return t+(n-t)*((s-e)/(i-e))}function k_(e,t,i,n,s){return e+(s-t)*((i-e)/(n-t))}function L_(e,t,i){return[k_(e,i.min,t,i.max,0),k_(e,i.min,t,i.max,1)]}function ole(e,t,i){const[n,s]=L_(e.x1,e.x2,t),[o,r]=L_(e.y1,e.y2,i);return{x1:n,x2:s,y1:o,y2:r}}function P_(e,t,i,n,s,o){if(i<=s&&o<=n)return i;const r=s-i,a=o-n,l=Math.abs(r)<Math.abs(a)?r:a;return st(e,i+l,t)}function rle(e,t,i){const{x:n={min:0,max:1},y:s={min:0,max:1}}=t,o=Cv.from(i),r=Cv.from(e),a=ole(r,n,s),l=P_(a.x1,a.x2,r.x1,r.x2,o.x1,o.x2),c=P_(a.y1,a.y2,r.y1,r.y2,o.y1,o.y2),d={x:{min:Zw(r.x1,n.min,r.x2,n.max,l),max:Zw(r.x1,n.min,r.x2,n.max,l+e.width)},y:{min:Zw(r.y1,s.min,r.y2,s.max,c),max:Zw(r.y1,s.min,r.y2,s.max,c+e.height)}},p=d.x.max-d.x.min,g=d.y.max-d.y.min;return d.x.min=st(0,d.x.min,1-p),d.x.max=d.x.min+p,d.y.min=st(0,d.y.min,1-g),d.y.max=d.y.min+g,d}function gU(e,t){const i=e?.valueOf(),n=t?.valueOf();return typeof i!="number"||typeof n!="number"?[void 0,void 0]:i<n?[0,1]:[1,0]}var ale=class{constructor(){this.enabled=!1,this.padding=0,this.manuallyAdjusted=!1}},N_=e=>It((t,{options:i})=>!Ut.is(e?.scale)&&!oa.is(e?.scale)||t==null||i.end==null?!0:t<i.end,"to be less than end"),fU=class extends $1{constructor(e,t){super(),this.eventsHub=e,this.fireChartEvent=t,this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new cf(void 0,"initial"),this.axes=[],this.didLayoutAxes=!1,this.autoScaleYAxis=new ale,this.lastRestoredState=void 0,this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0,this.boundFireOnceChartEvent=this.fireOnceChartEvent.bind(this),this.cleanup.register(e.on("layout:complete",()=>{this.didLayoutAxes=!0;const{pendingMemento:i}=this;i&&this.restoreMemento(i.version,i.mementoVersion,i.memento),this.autoScaleYZoom("zoom-manager")}))}createMemento(){return this.getMementoRanges()}guardMemento(e,t){if(e==null)return!0;if(!Zt(e))return!1;const i=this.getPrimaryAxis("x"),n=this.getPrimaryAxis("y"),s={rangeX:{start:N_(i),end:Ue},rangeY:{start:N_(n),end:Ue},ratioX:{start:Ue,end:Ue},ratioY:{start:Ue,end:Ue},autoScaledAxes:Ue},{invalid:o}=Is(e,s);return o.length>0?(t.push(...o.map(String)),!1):!0}restoreMemento(e,t,i){const{independentAxes:n}=this;if(!this.axes||!this.didLayoutAxes){this.pendingMemento={version:e,mementoVersion:t,memento:i};return}this.pendingMemento=void 0;const s=this.getDefinedZoom();if(i?.rangeX?s.x=this.rangeToRatio(i.rangeX,"x")??{min:0,max:1}:i?.ratioX?s.x={min:i.ratioX.start??0,max:i.ratioX.end??1}:s.x={min:0,max:1},!this.navigatorModule||this.zoomModule){let a=i?.autoScaledAxes?.includes("y");if(i?.rangeY)a??(a=!1),s.y=this.rangeToRatio(i.rangeY,"y")??{min:0,max:1};else if(i?.ratioY)a??(a=!1),s.y={min:i.ratioY.start??0,max:i.ratioY.end??1};else{a??(a=!0);const l=a?this.getAutoScaleYZoom(s.x):void 0;s.y=l??{min:0,max:1}}s.autoScaleYAxis=a}if(this.lastRestoredState=s,n!==!0){this.updateZoom("zoom-manager",s);return}const o=this.getPrimaryAxis("x"),r=this.getPrimaryAxis("y");for(const a of[o,r])a&&this.updateAxisZoom("zoom-manager",a.id,s[a.direction])}updateAxes(e){const{axes:t,axisZoomManagers:i}=this,n=new Map(i);i.clear(),t.length=0;for(const s of e)typeof s=="string"?i.set(s,n.get(s)??new F_(s)):(t.push(s),i.set(s.id,n.get(s.id)??new F_(s)));this.state.size>0&&t.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}setIndependentAxes(e=!0){this.independentAxes=e}setAutoScaleYAxis(e,t){this.autoScaleYAxis.enabled=e,this.autoScaleYAxis.padding=t,e&&this.autoScaleYZoom("toggle-auto-scale")}setNavigatorEnabled(e=!0){this.navigatorModule=e}setZoomModuleEnabled(e=!0){this.zoomModule=e}isNavigatorEnabled(){return this.navigatorModule}isZoomEnabled(){return this.zoomModule}updateZoom(e,t){if(t?.x&&(t.x.min<0||t.x.max>1)&&(fe.warnOnce(`Attempted to update x-axis zoom to an invalid ratio of [{ min: ${t.x.min}, max: ${t.x.max} }], expecting a ratio of 0 to 1, ignoring.`),t.x=void 0),t?.y&&(t.y.min<0||t.y.max>1)&&(fe.warnOnce(`Attempted to update y-axis zoom to an invalid ratio of [{ min: ${t.y.min}, max: ${t.y.max} }], expecting a ratio of 0 to 1, ignoring.`),t.y=void 0),this.axisZoomManagers.size===0){const n=this.state.stateId();(n==="initial"||n===e)&&this.state.set(e,t);return}this.state.set(e,t);const i=t?.autoScaleYAxis;i!=null&&(this.autoScaleYAxis.manuallyAdjusted=!i);for(const n of this.axisZoomManagers.values())n.updateZoom(e,t?.[n.direction]);this.applyChanges(e)}updateAxisZoom(e,t,i){this.axisZoomManagers.get(t)?.updateZoom(e,i),this.applyChanges(e)}resetZoom(e){this.autoScaleYAxis.manuallyAdjusted=!1;const t=this.getRestoredZoom();this.updateZoom(e,{x:{min:t?.x?.min??0,max:t?.x?.max??1},y:{min:t?.y?.min??0,max:t?.y?.max??1},autoScaleYAxis:t?.autoScaleYAxis??!0})}resetAxisZoom(e,t){const n=this.axisZoomManagers.get(t)?.direction;if(n==null)return;const s=this.getRestoredZoom();if(n==="y"){const o=s?.autoScaleYAxis??!0;this.autoScaleYAxis.manuallyAdjusted=!o}for(const o of this.axes)o.direction===n&&this.updateAxisZoom(e,o.id,s?.[n]??{min:0,max:1})}setAxisManuallyAdjusted(e,t){this.axisZoomManagers.get(t)?.direction==="y"&&(this.autoScaleYAxis.manuallyAdjusted=!0)}updatePrimaryAxisZoom(e,t,i){const n=this.getPrimaryAxis(t);n&&this.updateAxisZoom(e,n.id,i)}panToBBox(e,t,i){if(!this.isZoomEnabled()&&!this.isNavigatorEnabled())return!1;const n=this.getZoom();if(n===void 0||!n.x&&!n.y)return!1;if(!(t.width>0&&t.height>0&&Math.abs(i.width)<=Math.abs(t.width)&&Math.abs(i.height)<=Math.abs(t.height)))return fe.warnOnce("cannot pan to target BBox - chart too small?"),!1;const o=rle(t,n,i);return this.independentAxes?(this.updatePrimaryAxisZoom(e,"x",o.x),this.updatePrimaryAxisZoom(e,"y",o.y)):this.updateZoom(e,o),!0}fireZoomPanStartEvent(e){this.eventsHub.emit("zoom:pan-start",{callerId:e})}extendToEnd(e,t,i){return this.extendWith(e,t,n=>Number(n)-i)}extendWith(e,t,i){const n=this.getPrimaryAxis(t);if(!n)return;const s=this.getDomainExtents(n);if(!s)return;const[,o]=s,r=i(o),a=this.rangeToRatio({start:r},t);a&&this.updateZoom(e,{[t]:a})}updateWith(e,t,i){const n=this.getPrimaryAxis(t);if(!n)return;const s=this.getDomainExtents(n);if(!s)return;let[o,r]=s;[o,r]=i(o,r);const a=this.rangeToRatio({start:o,end:r},t);a&&this.updateZoom(e,{[t]:a})}getZoom(){let e,t;for(const i of this.axisZoomManagers.values())i.direction==="x"?e??(e=i.getZoom()):i.direction==="y"&&(t??(t=i.getZoom()));if(e||t)return{x:e,y:t}}getAxisZoom(e){return this.axisZoomManagers.get(e)?.getZoom()??{min:0,max:1}}getAxisZooms(){const e={};for(const[t,i]of this.axisZoomManagers.entries())e[t]={direction:i.direction,zoom:i.getZoom()};return e}getRestoredZoom(){return this.lastRestoredState}getPrimaryAxisId(e){return this.getPrimaryAxis(e)?.id}getBoundSeries(){const e=this.getPrimaryAxis("x"),t=this.getPrimaryAxis("y");let i;if(this.independentAxes){const n=new Set(e?.boundSeries??[]),s=new Set(t?.boundSeries??[]);i=new Set;for(const o of n)s.has(o)&&i.add(o)}else i=new Set([...e?.boundSeries??[],...t?.boundSeries??[]]);return i}constrainZoomToItemCount(e,t){const{autoScaleYAxis:i}=this,n=i.enabled&&!i.manuallyAdjusted;let s=[e.x.min,e.x.max],o=n?void 0:[e.y.min,e.y.max];for(const l of this.getBoundSeries()){const c=l.getZoomRangeFittingItems(s,o,t);if(c==null)return;s=c.x,o=c.y}const r={min:s[0],max:s[1]};let a;if(a??(a=this.getAutoScaleYZoom(r)),o&&(a={min:o[0],max:o[1]}),a!=null)return{x:r,y:a}}isVisibleItemsCountAtLeast(e,t,i){const{autoScaleYAxis:n}=this,s=this.getBoundSeries(),o=[e.x.min,e.x.max],r=!i&&n.enabled&&!n.manuallyAdjusted?void 0:[e.y.min,e.y.max];let a=0;for(const l of s){const c=t-(a??0),d=l.getVisibleItems(o,r,c);if(a+=d,a>=t)return!0}return s.size===0}getMementoRanges(){const e=this.getDefinedZoom();let t;return this.autoScaleYAxis.enabled&&(t=this.autoScaleYAxis.manuallyAdjusted?[]:["y"]),{rangeX:this.getRangeDirection(e.x,"x"),rangeY:this.getRangeDirection(e.y,"y"),ratioX:{start:e.x.min,end:e.x.max},ratioY:{start:e.y.min,end:e.y.max},autoScaledAxes:t}}getAutoScaleYZoom(e){if(!this.isZoomEnabled())return;const{independentAxes:t,autoScaleYAxis:i}=this;if(!i.enabled||i.manuallyAdjusted)return;const{padding:n}=i;let s;return t?s=this.primaryAxisZoom("y",e,{padding:n}):s=this.combinedAxisZoom("y",e,{padding:n}),e.min===0&&e.max===1?s==null?void 0:{min:0,max:1}:s}autoScaleYZoom(e,t=!0){const{independentAxes:i}=this,n=this.getZoom();if(n?.x==null)return;const s=this.getAutoScaleYZoom(n.x);if(!(s==null||qs(n.y,s))){if(i){const o=this.getPrimaryAxis("y");(o==null?void 0:this.axisZoomManagers.get(o.id))?.updateZoom("zoom-manager",s)}else for(const o of this.axisZoomManagers.values())o.direction==="y"&&o.updateZoom("zoom-manager",s);t&&this.applyChanges(e)}}applyChanges(e){if(this.autoScaleYZoom(e,!1),!Array.from(this.axisZoomManagers.values(),n=>n.applyChanges()).includes(!0))return;const i={};for(const[n,s]of this.axisZoomManagers.entries())i[n]=s.getZoom();this.eventsHub.emit("zoom:change",{...this.getZoom(),axes:i,callerId:e}),this.eventsHub.on("layout:complete",this.boundFireOnceChartEvent)}fireOnceChartEvent(){this.fireChartEvent({type:"zoom",...this.getMementoRanges()}),this.eventsHub.off("layout:complete",this.boundFireOnceChartEvent)}getRangeDirection(e,t){const i=this.getPrimaryAxis(t);if(!i||!Ut.is(i.scale)&&!oa.is(i.scale))return;const n=this.getDomainPixelExtents(i);if(!n)return;const[s,o]=n;let r,a;return s<=o?(r=i.scale.invert(0),a=i.scale.invert(s+(o-s)*e.max)):(r=i.scale.invert(s-(s-o)*e.min),a=i.scale.invert(0)),{start:r,end:a}}rangeToRatio(e,t){const i=this.getPrimaryAxis(t);if(!i)return;const n=this.getDomainPixelExtents(i);if(!n)return;const[s,o]=n,{scale:r}=i,{start:a,end:l}=e,[c=0,d=1]=gU(a,l);let p=a==null?s:r.convert(a,{alignment:c}),g=l==null?o:r.convert(l,{alignment:d})+(r.bandwidth??0);if(!Kt(p)||!Kt(g))return;const[m,y]=[Math.min(s,o),Math.max(s,o)];if(p<m||p>y){fe.warnOnce(`Invalid range start [${a}], expecting a value between [${r.invert(s)}] and [${r.invert(o)}], ignoring.`);return}if(g<m||g>y){fe.warnOnce(`Invalid range end [${l}], expecting a value between [${r.invert(s)}] and [${r.invert(o)}], ignoring.`);return}p=Math.min(y,Math.max(m,p)),g=Math.min(y,Math.max(m,g));const b=o-s;if(b===0)return;const C=Math.abs((p-s)/b),w=Math.abs((g-s)/b);if(!(C>=w))return{min:C,max:w}}getPrimaryAxis(e){return this.axes?.find(t=>t.direction===e)}getDomainExtents(e){const{domain:t}=e.scale,i=t.at(0),n=t.at(-1);if(!(i==null||n==null))return[i,n]}getDomainPixelExtents(e){const[t,i]=e.scale.range;if(!(!Kt(t)||!Kt(i)))return[t,i]}getDefinedZoom(){const e=this.getZoom();return{x:{min:e?.x?.min??0,max:e?.x?.max??1},y:{min:e?.y?.min??0,max:e?.y?.max??1}}}zoomBounds(e,t,i,n){const s=e.scale,o=s.range;s.range=[0,1];const r=t.scale,a=r.range;r.range=[0,1];let l=1,c=!1,d=0,p=!1;for(const y of t.boundSeries){if(!y.visible)continue;const{connectsToYAxis:b}=y,C=y.getRange("y",[i.min,i.max]);for(const w of C){const x=r.convert(w);Number.isFinite(x)&&(x<l&&(l=x,c=!b||w<0),x>d&&(d=x,p=!b||w>0))}}if(Kt(t.min)&&(l=0),Kt(t.max)&&(d=1),s.range=o,r.range=a,l>=d)return;const g=(c?n:0)+(p?n:0),m=Math.min((d-l)*(1+g),1);if(!(m<=0)){if(c&&p){const y=(d+l)/2;l=y-m/2,d=y+m/2}else!c&&p?d=l+m:c&&!p&&(l=d-m);return l<0?(d+=-l,l=0):d>1&&(l-=d-1,d=1),{min:l,max:d}}}primaryAxisZoom(e,t,{padding:i=0}={}){const n=e==="x"?"y":"x",s=this.getPrimaryAxis(n),o=this.getPrimaryAxis(e);if(!(s==null||o==null))return this.zoomBounds(s,o,t,i)}combinedAxisZoom(e,t,{padding:i=0}={}){const n=e==="x"?"y":"x",s=new Map;for(const l of this.axes)if(l.direction===n)for(const c of l.boundSeries)s.set(c,l);let o=1,r=0;for(const l of this.axes)if(l.direction===e)for(const c of l.boundSeries){const d=s.get(c);if(d==null)continue;const p=this.zoomBounds(d,l,t,i);if(p==null)return;o=Math.min(o,p.min),r=Math.max(r,p.max)}const a=1e-6;if(o<a&&(o=0),r>1-a&&(r=1),!(o>r))return{min:o,max:r}}},F_=class{constructor(e){let t,i;typeof e=="string"?(this.direction=e,t=0,i=1):(this.direction=e.direction,[t=0,i=1]=e.visibleRange),this.state=new cf({min:t,max:i}),this.currentZoom=this.state.stateValue()}updateZoom(e,t){this.state.set(e,t)}getZoom(){return zi(this.state.stateValue())}hasChanges(){const e=this.currentZoom,t=this.state.stateValue();return e.min!==t.min||e.max!==t.max}applyChanges(){const e=this.hasChanges();return this.currentZoom=this.state.stateValue(),e}},rL=(e=>(e[e.Caption=0]="Caption",e[e.Legend=1]="Legend",e[e.ToolbarLeft=2]="ToolbarLeft",e[e.ToolbarBottom=3]="ToolbarBottom",e[e.Navigator=4]="Navigator",e[e.Overlay=5]="Overlay",e))(rL||{}),mU=class{constructor(e){this.eventsHub=e,this.elements=new Map}registerElement(e,t){return this.elements.has(e)?this.elements.get(e).add(t):this.elements.set(e,new Set([t])),()=>this.elements.get(e)?.delete(t)}createContext(e,t){const i=new lle(e,t);for(const n of Object.values(rL)){if(typeof n!="number")continue;const s=this.elements.get(n);if(s)for(const o of s)o(i)}return i}emitLayoutComplete(e,t){const{width:i,height:n}=e;this.eventsHub.emit("layout:complete",{axes:t.axes??[],chart:{width:i,height:n},clipSeries:t.clipSeries??!1,series:t.series})}},lle=class{constructor(e,t){this.width=e,this.height=t,this.layoutBox=new Le(0,0,e,t)}};function cle({point:e,anchor:t},i,n,s,o){if(e.size===0)return!1;let r=e.x,a=e.y;t!=null&&(r-=(t.x-.5)*e.size,a-=(t.y-.5)*e.size);let l=r;r<i?l=i:r>i+s&&(l=i+s);let c=a;a<n?c=n:a>n+o&&(c=n+o);const d=r-l,p=a-c;return Math.hypot(d,p)<=e.size/2}function ule(e){return e!=null&&typeof e.point=="object"&&typeof e.label=="object"}var dle={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}};function hle(e,t,i=5){const n=new Map,s=[],o=new Map(Array.from(e.entries(),([a,l])=>[a,l.toSorted((c,d)=>d.point.size-c.point.size)])),r=[...o.values()].flat();for(const[a,l]of o.entries()){const c=[];if(l[0]?.label){for(let d=0,p=l.length;d<p;d++){const g=l[d],{point:m,label:y,anchor:b}=g,{text:C,width:w,height:x}=y,M=m.size/2;let E=0,I=0;if(M>0&&g.placement!=null){const P=dle[g.placement];E=(w/2+M+i)*P.x,I=(x/2+M+i)*P.y}let N=m.x-w/2+E,T=m.y-x/2+I;if(b&&(N-=(b.x-.5)*m.size,T-=(b.y-.5)*m.size),k1(t,N,T,w,x)&&!r.some(P=>cle(P,N,T,w,x))&&!s.some(P=>H4(P,N,T,w,x))){const P={index:d,text:C,x:N,y:T,width:w,height:x,datum:g};c.push(P),s.push(P)}}n.set(a,c)}}return n}var ple=class{constructor(){this.labelData=new Map}updateLabels(e,t,i=Le.zero){const n={x:-t.left,y:-t.top,width:i.width+t.left+t.right,height:i.height+t.top+t.bottom},s=new Set(e.map(r=>r.id));for(const r of this.labelData.keys())s.has(r)||this.labelData.delete(r);for(const r of e){const a=r.getLabelData();a.every(ule)&&this.labelData.set(r.id,a)}const o=hle(this.labelData,n,5);for(const r of e)r.updatePlacedLabelData?.(o.get(r.id)??[])}},gle=class{constructor(e){this.eventsHub=e,this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter(({hideInLegend:e,isFixed:t})=>!e&&!t).map(({enabled:e,seriesId:t,itemId:i,legendItemName:n})=>({visible:e,seriesId:t,itemId:i,legendItemName:n}))}guardMemento(e){return e==null||ht(e)}restoreMemento(e,t,i){if(i)for(const n of i){const{seriesId:s,data:o}=this.getRestoredData(n)??{};!s||!o||this.updateData(s,o)}this.update()}getRestoredData(e){const{seriesId:t,itemId:i,legendItemName:n,visible:s}=e;if(t){const r=(this.legendDataMap.get(t)??[]).map(a=>{const l=a.seriesId===t&&(!i||a.itemId===i);return l&&a.isFixed&&this.warnFixed(a.seriesId,a.itemId),!a.isFixed&&l?{...a,enabled:s}:a});return{seriesId:t,data:r}}if(!(i==null&&n==null))for(const o of this.getData()){if(i!=null&&o.itemId!==i||n!=null&&o.legendItemName!==n)continue;if(o.isFixed){this.warnFixed(o.seriesId,i);return}const r=(this.legendDataMap.get(o.seriesId)??[]).map(a=>a.itemId===i||a.legendItemName===n?{...a,enabled:s}:a);return{seriesId:o.seriesId,data:r}}}warnFixed(e,t){fe.warnOnce(`The legend item with seriesId [${e}] and itemId [${t}] is not configurable, this series item cannot be toggled through the legend.`)}update(e){this.eventsHub.emit("legend:change",{legendData:e??this.getData()})}updateData(e,t=[]){this.eventsHub.emit("legend:change-partial",{seriesId:e,legendData:t}),this.legendDataMap.set(e,t)}clearData(){this.legendDataMap.clear()}toggleItem(e,t,i,n){if(n){for(const a of this.getData()){const l=(this.legendDataMap.get(a.seriesId)??[]).map(c=>c.legendItemName===n?{...c,enabled:e}:c);this.updateData(a.seriesId,l)}return}const s=this.getData(t),o=s.length===1,r=s.map(a=>i==null&&o||a.itemId===i?{...a,enabled:e}:a);this.updateData(t,r)}getData(e){return e?this.legendDataMap.get(e)??[]:[...this.legendDataMap].reduce((t,[i,n])=>t.concat(n),[])}getDatum({seriesId:e,itemId:t}={}){return this.getData(e).find(i=>i.itemId===t)}getSeriesEnabled(e){const t=this.getData(e);if(t.length>0)return t.some(i=>i.enabled)}getItemEnabled({seriesId:e,itemId:t}={}){return this.getDatum({seriesId:e,itemId:t})?.enabled??!0}},fle=class{updateCallback(e){this.resolvePartialCallback=e}resolvePartial(e,t,i){return this.resolvePartialCallback?.(e,t,i)}},mle=class{constructor(){this.groups=new Map}registerSeries({internalId:e,seriesGrouping:t,visible:i,type:n}){if(!t)return;let s=this.groups.get(n);s==null&&(s=new Map,this.groups.set(n,s)),s.set(e,{grouping:t,visible:i})}updateSeries({internalId:e,seriesGrouping:t,visible:i,type:n}){if(!t)return;const s=this.groups.get(n)?.get(e);s&&(s.grouping=t,s.visible=i)}deregisterSeries({internalId:e,type:t}){const i=this.groups.get(t);i!=null&&(i.delete(e),i.size===0&&this.groups.delete(t))}getVisiblePeerGroupIndex({type:e,seriesGrouping:t,visible:i}){if(!t)return{visibleGroupCount:i?1:0,visibleSameStackCount:i?1:0,index:0};const n=new Set,s=new Set,o=this.groups.get(e);for(const a of o?.values()??[])a.visible&&(n.add(a.grouping.groupIndex),a.grouping.groupIndex===t.groupIndex&&s.add(a.grouping.stackIndex));const r=Array.from(n);return r.sort((a,l)=>a-l),{visibleGroupCount:r.length,visibleSameStackCount:s.size,index:r.indexOf(t.groupIndex)}}},yU=class{constructor(e){this.updateCallback=e,this.events=new _u}addListener(e,t){return this.events.on(e,t)}destroy(){this.events.clear()}update(e=0,t){this.updateCallback(e,t)}dispatchUpdateComplete(e){this.events.emit("update-complete",{type:"update-complete",apiUpdate:e})}dispatchPreDomUpdate(){this.events.emit("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(){this.events.emit("pre-scene-render",{type:"pre-scene-render"})}dispatchProcessData({series:e}){this.events.emit("process-data",{type:"process-data",series:e})}},yle=class{constructor(e,t){this.eventsHub=new _u,this.callbackCache=new wW,this.highlightManager=new oU(this.eventsHub),this.formatManager=new hf,this.layoutManager=new mU(this.eventsHub),this.localeManager=new bae(this.eventsHub),this.seriesStateManager=new mle,this.stateManager=new Qre,this.seriesLabelLayoutManager=new ple,this.cleanup=new Ui,this.contextModules=[];const{scene:i,root:n,syncManager:s,container:o,fireEvent:r,updateCallback:a,updateMutex:l,styleContainer:c,chartType:d,domMode:p,withDragInterpretation:g}=t;this.chartService=e,this.syncManager=s,this.domManager=new jW(this.eventsHub,this.chartService,o,c,p),this.widgets=new $ae(this.domManager,{withDragInterpretation:g});const m=this.domManager.addChild("canvas","scene-canvas",i?.canvas.element);this.scene=i??new CM({canvasElement:m}),this.scene.setRoot(n),this.cleanup.register(this.scene.on("scene-changed",()=>{this.updateService.update(7)})),this.axisManager=new xae(this.eventsHub,n),this.legendManager=new gle(this.eventsHub),this.annotationManager=new Sae(this.eventsHub,e.annotationRoot,r),this.chartTypeOriginator=new Zre(e),this.interactionManager=new tU,this.contextMenuRegistry=new sU(this.eventsHub),this.optionsGraphService=new fle,this.updateService=new yU(a),this.proxyInteractionService=new $W(this.eventsHub,this.localeManager,this.domManager),this.fontManager=new Mae(this.domManager,this.updateService),this.historyManager=new Xre(this.eventsHub),this.animationManager=new iU(this.interactionManager,l),this.dataService=new wM(this.eventsHub,e,this.animationManager),this.tooltipManager=new Yx(this.eventsHub,this.localeManager,this.domManager,e.tooltip),this.zoomManager=new fU(this.eventsHub,r);for(const y of za.byType("context")){if(!y.chartTypes.includes(d))continue;const b=y.moduleFactory(this);this.contextModules.push(b),this[y.contextKey]=b}}destroy(){this.animationManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.domManager.destroy(),this.fontManager.destroy(),this.proxyInteractionService.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.widgets.destroy();for(const e of this.contextModules)e.destroy();this.cleanup.flush()}},aL=class extends Qe{constructor(){super(...arguments),this.range="tooltip",this.drawingMode="overlay"}};A([k],aL.prototype,"range",2);A([k],aL.prototype,"drawingMode",2);function vle(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function ble(e,t){if(e==null||t==null)return e===t;if(e.size!==t.size)return!1;for(const[i,n]of e){const s=t.get(i);if(s==null||!vle(n,s))return!1}return!0}function Cle(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1){const{type:n,idsMap:s,scopes:o,data:r,...a}=e[i],{type:l,idsMap:c,scopes:d,data:p,...g}=t[i];if(n!==l||o&&d&&!Kl(o,d)||r&&p&&r!==p||!qs(a,g)||!ble(s,c))return!1}return!0}function wle(e,t){const{props:i,...n}=e,{props:s,...o}=t;return qs(n,o)&&Cle(i,s)}function Sle(e,t,i,n){return t!==e.dataSet?!1:Kl(i,e.ids)&&wle(n,e.opts)}function xle(e){return e.removedIndices.size===0&&e.totalPrependCount===0&&e.totalAppendCount>0}function Mle(e){return e.removedIndices.size===0&&e.totalAppendCount===0&&e.totalPrependCount>0}function Dle(e){return e.removedIndices.size===0}var vU=class{constructor(e,t){this.indexMap=e,this.prependValues=t.prependValues,this.appendValues=t.appendValues}getRemovedIndices(){return Array.from(this.indexMap.removedIndices).sort((e,t)=>e-t)}forEachPreservedIndex(e){const{originalLength:t,removedIndices:i,totalPrependCount:n}=this.indexMap;let s=0;const o=Array.from(i).sort((a,l)=>a-l);let r=0;for(let a=0;a<t;a++){for(;r<o.length&&o[r]<a;)s++,r++;if(!i.has(a)){const l=a+n-s;e(a,l)}}}getPrependedValues(){return this.prependValues}getAppendedValues(){return this.appendValues}applyToArray(e,t,i){const{spliceOps:n,finalLength:s,originalLength:o}=this.indexMap;if(!(o===s&&n.length===0)){for(const r of n){const a=r.insertCount>0?Array.from({length:r.insertCount},(c,d)=>t(r.index+d)):[],l=e.splice(r.index,r.deleteCount,...a);i&&l.length>0&&i(l,r)}e.length!==s&&(e.length=s)}}},GE=class bU{constructor(){this.domain=new Set}static is(t){return t instanceof bU}extend(t){this.domain.add(t)}getDomain(){return Array.from(this.domain)}},lr=class CU{constructor(){this.domain=[1/0,-1/0]}static is(t){return t instanceof CU}static extendDomain(t,i=[1/0,-1/0]){for(const n of t)typeof n=="number"&&(i[0]>n&&(i[0]=n),i[1]<n&&(i[1]=n));return i}extend(t){typeof t!="number"&&!(t instanceof Date)||(this.domain[0]>t&&(this.domain[0]=t),this.domain[1]<t&&(this.domain[1]=t))}getDomain(){return[...this.domain]}},Ale=1e3,Rle=10,Sd=class{constructor(e,t={},i=!1){this.bands=[],this.dataSize=0,this.fullDomainCache=null,this.needsReinitialization=!1,this.domainFactory=e,this.isDiscrete=i,this.config={minDataSizeForBanding:t.minDataSizeForBanding??Ale,targetBandCount:t.targetBandCount??Rle,maxBandSize:t.maxBandSize??1/0,enableBanding:t.enableBanding??!0}}initializeBands(e){if(this.dataSize=e,this.fullDomainCache=null,this.needsReinitialization=!1,!this.config.enableBanding||e<this.config.minDataSizeForBanding){this.bands=[{startIndex:0,endIndex:e,subDomain:this.domainFactory(),isDirty:!0}];return}const t=this.getTargetBandCount(this.dataSize),i=Math.ceil(e/t);this.bands=[];for(let n=0;n<t;n++){const s=n*i,o=Math.min((n+1)*i,e);this.bands.push({startIndex:s,endIndex:o,subDomain:this.domainFactory(),isDirty:!0})}}findAffectedBands(e,t){const i=[];for(let n=0;n<this.bands.length;n++){const s=this.bands[n];e<s.endIndex&&t>s.startIndex&&i.push(n)}return i}markBandsDirty(e,t){const i=this.findAffectedBands(e,t);for(const n of i)this.bands[n].isDirty=!0;this.fullDomainCache=null}handleInsertion(e,t){this.dataSize+=t,this.fullDomainCache=null;for(let i=0;i<this.bands.length;i++){const n=this.bands[i],s=i===this.bands.length-1;e<=n.startIndex?(n.startIndex+=t,n.endIndex+=t):(e<n.endIndex||e===n.endIndex&&s)&&(n.endIndex+=t,n.isDirty=!0)}this.considerRebalancing()}handleRemoval(e,t){this.dataSize-=t,this.fullDomainCache=null;for(const n of this.bands)if(e+t<=n.startIndex)n.startIndex=Math.max(0,n.startIndex-t),n.endIndex=Math.max(n.startIndex,n.endIndex-t);else if(e<n.endIndex){if(e<=n.startIndex){const s=Math.min(t,n.endIndex-n.startIndex);n.startIndex=e,n.endIndex=Math.max(n.startIndex,n.endIndex-s)}else n.endIndex=Math.max(n.startIndex,n.endIndex-t);n.isDirty=!0}this.bands=this.bands.filter(n=>n.endIndex>n.startIndex);let i=!1;if(this.bands.length>1){this.bands[0].startIndex!==0&&(i=!0);for(let n=1;n<this.bands.length;n++)if(this.bands[n].startIndex!==this.bands[n-1].endIndex){this.needsReinitialization=!0;break}}if(i&&!this.needsReinitialization){const n=this.bands[0].startIndex;for(const s of this.bands)s.startIndex-=n,s.endIndex-=n}this.considerRebalancing()}markAllBandsDirty(){for(const e of this.bands)e.isDirty=!0;this.fullDomainCache=null}considerRebalancing(){if(!this.needsReinitialization)return;if(this.dataSize<this.config.minDataSizeForBanding){this.bands.length>1&&this.initializeBands(this.dataSize);return}if(this.config.maxBandSize<1/0&&Math.max(...this.bands.map(i=>i.endIndex-i.startIndex))>this.config.maxBandSize){this.initializeBands(this.dataSize);return}const e=this.getTargetBandCount(this.dataSize);Math.abs(this.bands.length-e)>e*.5&&this.initializeBands(this.dataSize)}getTargetBandCount(e){return Math.max(this.config.targetBandCount,Math.ceil(e/1e3))}extendBandsFromData(e,t){const i=e.length;for(const n of this.bands){if(!n.isDirty)continue;n.subDomain=this.domainFactory();const{startIndex:s,endIndex:o}=n;for(let r=s;r<o&&r<i;r++)t?.[r]||n.subDomain.extend(e[r]);n.isDirty=!1}this.fullDomainCache=null}getDirtyBands(){return this.bands.filter(e=>e.isDirty)}extend(e){this.markAllBandsDirty(),this.fullDomainCache=null}getDomain(){if(this.fullDomainCache!==null)return this.fullDomainCache;if(this.bands.length===0)return this.fullDomainCache=[],[];if(this.bands.length===1)return this.fullDomainCache=this.bands[0].subDomain.getDomain(),this.fullDomainCache;if(this.isDiscrete){const e=new Set;for(const t of this.bands){const i=t.subDomain.getDomain();for(const n of i)e.add(n)}this.fullDomainCache=Array.from(e)}else{let e,t;for(const i of this.bands){const n=i.subDomain.getDomain();if(n.length===2){const[s,o]=n;(e===void 0||s!=null&&e!=null&&s<e)&&(e=s),(t===void 0||o!=null&&t!=null&&o>t)&&(t=o)}}e!==void 0&&t!==void 0?this.fullDomainCache=[e,t]:this.fullDomainCache=[]}return this.fullDomainCache}getStats(){const e=this.bands.filter(i=>i.isDirty).length,t=this.bands.reduce((i,n)=>i+(n.endIndex-n.startIndex),0);return{bandCount:this.bands.length,dirtyBandCount:e,averageBandSize:this.bands.length>0?t/this.bands.length:0,dataSize:this.dataSize,needsReinitialization:this.needsReinitialization}}},qp=0,Zp=1,va=2,Ele=class{constructor(e){const t=e.reduce((o,r)=>Math.max(o,r.length),0);let n=1<<32-Math.clz32(t);t===n/2&&(n=n>>>1),this.maxLevelSize=n;const s=new Float64Array((n*2-1)*2).fill(Number.NaN);for(const o of e)for(let r=0;r<o.length;r+=1){const a=Number(o[r]),l=n+r-1,c=Math.trunc(l*va)+qp,d=Math.trunc(l*va)+Zp,p=s[c],g=s[d];(!Number.isFinite(p)||a<p)&&(s[c]=a),(!Number.isFinite(g)||a>g)&&(s[d]=a)}for(let o=Math.trunc(n/2);o>=1;o=Math.trunc(o/2)){const r=Math.trunc(o-1),a=Math.trunc(r+o);for(let l=0;l<o;l+=1){const c=r+l,d=a+l*2,p=d+1,g=s[Math.trunc(d*va)+qp],m=s[Math.trunc(p*va)+qp];s[Math.trunc(c*va)+qp]=!Number.isFinite(m)||g<m?g:m;const y=s[Math.trunc(d*va)+Zp],b=s[Math.trunc(p*va)+Zp];s[Math.trunc(c*va)+Zp]=!Number.isFinite(b)||y>b?y:b}}this.buffer=s}computeRangeInto(e,t,i,n,s,o,r){const a=s+o-1;if(a<t||s>=i)return r;if(s>=t&&a<i){const l=e[Math.trunc(n*va)+qp],c=e[Math.trunc(n*va)+Zp];Number.isFinite(l)&&(r[0]=Math.min(r[0],l)),Number.isFinite(c)&&(r[1]=Math.max(r[1],c))}else o>1&&(n=Math.trunc(n*2),o=Math.trunc(o/2),this.computeRangeInto(e,t,i,Math.trunc(n+1),s,o,r),this.computeRangeInto(e,t,i,Math.trunc(n+2),s+o,o,r));return r}rangeBetween(e,t){if(e>t)return[Number.NaN,Number.NaN];const{maxLevelSize:i,buffer:n}=this,s=[1/0,-1/0];return this.computeRangeInto(n,e,t,0,0,i,s),s}get range(){const{buffer:e}=this;return[e[qp],e[Zp]]}};function Tle(e,t){const i=e.length;if(e.length<=1)return 1;let n=0,s=e[0];for(let o=1;o<i;o++){const r=e[o];if(r==null)continue;if(typeof(t?r.valueOf():r)!="number")return;const l=Math.sign(r-s);if(l!==0){if(n!==0&&n!==l)return;n=l}s=r}return n===0?1:n}var _E=Symbol("key-sort-orders"),VE=Symbol("column-sort-orders"),zE=Symbol("domain-ranges"),hy=Symbol("domain-bands"),O_=Object.freeze([0]);function HE(e){return e.map(t=>Zt(t)?JSON.stringify(t):t).join("-")}function vo(e){const t=e?.map(Number);return t?.every(Number.isFinite)?t:[]}function wU(e,t){return t?.get(e.id)??0}function B_(e){return"scopes"in e&&Array.isArray(e.scopes)}function py(e,t){const i=[];for(let n=0;n<e;n+=1)i[n]=t;return i}function Kx(e,t){const i=[];for(const n of e){const s=n?.[t];if(s==null)return;i.push(s)}return i}function SU(e){const t=[];let i=0,n;const s=new RegExp(`((?:(?:^|\\.)\\s*\\w+|\\[\\s*(?:'(?:[^']|(?<!\\\\)\\\\')*'|"(?:[^"]|(?<!\\\\)\\\\")*"|-?\\d+)\\s*\\])\\s*)`,"g");for(;n=s.exec(e);){if(n.index!==i)return;i=n.index+n[0].length;const o=n[1].trim();if(o.startsWith("."))t.push(o.slice(1).trim());else if(o.startsWith("[")){const r=o.slice(1,-1).trim();r.startsWith("'")?t.push(r.slice(1,-1).replaceAll(new RegExp("(?<!\\\\)\\\\'","g"),"'")):r.startsWith('"')?t.push(r.slice(1,-1).replaceAll(new RegExp('(?<!\\\\)\\\\"',"g"),'"')):t.push(r)}else t.push(o)}if(i===e.length)return t}function Ile(e){return t=>{let i=t;for(const n of e)i=i[n];return i}}var RI=class{constructor(e,t="standalone",i=!1){this.opts=e,this.mode=t,this.suppressFieldDotNotation=i,this.debug=at.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[],this.markScopeDatumInvalid=function(a,l,c,d){for(const p of a)d.has(p)||d.set(p,py(l.length,!1)),d.get(p)[c]=!0};let n=!0;for(const a of e.props){if(a.type==="key"&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");a.type==="value"&&n&&(n=!1)}const s=({matchGroupIds:a=[]})=>{for(const l of a)if(this.values.every(c=>c.groupId!==l))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${l}).`)},o=new Set,r=new Set;for(const a of e.props){const l=a.type==="key"?o:r;if(B_(a)&&a.scopes)for(const c of a.scopes)l.add(c);switch(a.type){case"key":this.keys.push({...a,index:this.keys.length,missing:new Map});break;case"value":if(a.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(a)}`);this.values.push({...a,index:this.values.length,missing:new Map});break;case"aggregate":s(a),this.aggregates.push({...a,index:this.aggregates.length});break;case"group-value-processor":s(a),this.groupProcessors.push({...a,index:this.groupProcessors.length});break;case"property-value-processor":this.propertyProcessors.push({...a,index:this.propertyProcessors.length});break;case"reducer":this.reducers.push({...a,index:this.reducers.length});break;case"processor":this.processors.push({...a,index:this.processors.length});break}}if(this.opts.groupByKeys||this.opts.groupByFn!=null){const a=new Set(r.values());for(const l of o)a.delete(l);if(a.size>0)throw new Error(`AG Charts - scopes missing key for grouping, illegal configuration: ${[...a.values()]}`)}}resolveProcessedDataDefById(e,t){const i=this.scopeCache.get(e.id)?.get(t);if(!i)throw new Error(`AG Charts - didn't find property definition for [${t}, ${e.id}]`);return{index:i.index,def:i}}resolveProcessedDataIndexById(e,t){return this.resolveProcessedDataDefById(e,t).index}resolveKeysById(e,t,i){const n=this.resolveProcessedDataIndexById(e,t),s=i.keys[n];if(s==null)throw new Error(`AG Charts - didn't find keys for [${t}, ${e.id}]`);return s.get(e.id)}hasColumnById(e,t){return this.scopeCache.get(e.id)?.get(t)!=null}resolveColumnById(e,t,i){const n=this.resolveProcessedDataIndexById(e,t),s=i.columns?.[n];if(s==null)throw new Error(`AG Charts - didn't find column for [${t}, ${e.id}]`);return s}resolveColumnNeedsValueOf(e,t,i){const n=this.resolveProcessedDataIndexById(e,t);return i.columnNeedValueOf?.[n]??!0}resolveAbsoluteIndex(e,t){return e+t}*forEachDatum(e,t,i,n){const s=t.columnScopes.findIndex(o=>o.has(e.id));for(const o of i.datumIndices[s]??[]){const r=this.resolveAbsoluteIndex(n,o);yield t.columns[s][r]}}getUniqueDataSets(e){return new Set(e.dataSources.values())}*forEachGroupDatum(e,t){const i=t.columnScopes.findIndex(o=>o.has(e.id)),n={groupIndex:0,columnIndex:i},s=[];for(const o of t.groups){n.group=o;for(const r of o.datumIndices[i]??s)n.datumIndex=this.resolveAbsoluteIndex(n.groupIndex,r),yield n;n.groupIndex++}}getDomain(e,t,i,n){return this.getDomainsByType(i??"value",n)?.[this.resolveProcessedDataIndexById(e,t)]??[]}getDomainBetweenRange(e,t,[i,n],s){const o=t.map(c=>this.resolveProcessedDataIndexById(e,c)),r=o.join(":"),a=s[zE];let l=a.get(r);if(l==null){const c=o.map(d=>s.columns[d]);l=new Ele(c),a.set(r,l)}return l.rangeBetween(i,n)}getSortOrder(e,t,i,n){let s=i.get(t);return s==null&&(s={sortOrder:Tle(e,n)},i.set(t,s)),s.sortOrder}getKeySortOrder(e,t,i){const n=this.resolveProcessedDataIndexById(e,t),s=i.keys[n]?.get(e.id);return s?this.getSortOrder(s,n,i[_E],!0):void 0}getColumnSortOrder(e,t,i){const n=this.resolveProcessedDataIndexById(e,t),s=i.columnNeedValueOf?.[n]??!0;return this.getSortOrder(i.columns[n],n,i[VE],s)}getDomainsByType(e,t){switch(e){case"key":return t.domain.keys;case"value":return t.domain.values;case"aggregate":return t.domain.aggValues;case"group-value-processor":return t.domain.groups;default:return null}}processData(e){const{opts:{groupByKeys:t,groupByFn:i},aggregates:n,groupProcessors:s,reducers:o,processors:r,propertyProcessors:a}=this,l=performance.now();if(t&&this.keys.length===0)return;let c=this.extractData(e);t?c=this.groupData(c):i&&(c=this.groupData(c,i(c))),s.length>0&&c.type==="grouped"&&this.postProcessGroups(c),n.length>0&&c.type==="ungrouped"?this.aggregateUngroupedData(c):n.length>0&&c.type==="grouped"&&this.aggregateGroupedData(c),a.length>0&&this.postProcessProperties(c),o.length>0&&this.reduceData(c),r.length>0&&this.postProcessData(c),this.warnDataMissingProperties(e);const d=performance.now();return c.time=d-l,this.collectOptimizationMetadata(c,"full-process"),this.debug.check()&&kle(c),this.processScopeCache(),c}isReprocessingSupported(e){if(e.type==="grouped"){if(!e.groupsUnique||this.getUniqueDataSets(e).size!==1)return!1;const i=ya(e.scopes);if(e.invalidKeys?.get(i)?.some(s=>s))return!1}return this.aggregates.length>0||this.reducers.length>0||this.processors.length>0||this.propertyProcessors.length>0?!1:this.groupProcessors.every(t=>t.supportsReprocessing??!1)}reprocessData(e,t){if(!this.isReprocessingSupported(e)){this.debug.check()&&this.debug("Falling back to full reprocessing - incremental not supported for current configuration");const l=this.getUniqueDataSets(e);for(const c of l)c.commitPendingTransactions();return this.processData(e.dataSources)}const i=performance.now(),n=this.collectScopeChanges(e,t);if(n.size===0)return e;this.commitPendingTransactions(e);const{processValue:s}=this.initDataDomainProcessor("skip"),o=this.processAllInsertions(e,n,s);this.updateBandsForChanges(e,n);const r=this.transformKeysArrays(e,n,o);this.transformColumnsArrays(e,n,o),this.transformInvalidityArrays(e,n,o),e.type==="grouped"&&(this.transformGroupsArray(e,n,o),this.groupProcessors.length>0&&this.reprocessGroupProcessors(e,n)),this.recomputeDomains(e),e.reduced?.diff!=null&&n.size>0&&this.generateDiffMetadata(e,n,r),this.updateProcessedDataMetadata(e);const a=performance.now();return e.time=a-i,this.collectOptimizationMetadata(e,"reprocess"),e}applyOperationToBandedDomains(e,t){for(const i of e.values())i instanceof Sd&&t(i)}updateBandsForChanges(e,t){const i=e[hy];if(i.size===0)return;const n=new Set;for(const[,s]of t){if(n.has(s))continue;n.add(s);const{indexMap:o}=s,{spliceOps:r}=o;for(const a of r)a.insertCount>0&&this.applyOperationToBandedDomains(i,l=>l.handleInsertion(a.index,a.insertCount)),a.deleteCount>0&&this.applyOperationToBandedDomains(i,l=>l.handleRemoval(a.index,a.deleteCount))}}collectScopeChanges(e,t){const i=new Map;for(const[n,s]of e.dataSources){const o=t?.get(s)??s.getChangeDescription();o&&i.set(n,o)}return i}commitPendingTransactions(e){const t=this.getUniqueDataSets(e);for(const i of t)i.commitPendingTransactions()}processAllInsertions(e,t,i){const n=new Map;for(const[s,o]of t){const r=e.dataSources.get(s);if(!r)continue;const a=this.processInsertionsOnce(s,o,r,i);n.set(s,a)}return n}transformArraysWithCache(e,t,i,n,s,o){for(const[r,a]of e.entries())for(const l of s(a)){const c=t.get(l);if(!c)continue;const d=n(r,l);if(!d)continue;const p=i.get(l);c.applyToArray(d,g=>{const m=p?.get(g);return o(m,a,r)})}}transformKeysArrays(e,t,i){const n=new Map,s=a=>{let l=n.get(a);return l||(l={tuples:[]},n.set(a,l)),l},o=new WeakSet;for(const[a,l]of this.keys.entries())for(const c of l.scopes??[]){const d=t.get(c);if(!d)continue;const p=e.keys[a]?.get(c);if(!p)continue;if(o.has(p)){const b=Array.from(e.keys[a].entries()).find(([C,w])=>w===p)?.[0];b&&b!==c&&n.has(b)&&n.set(c,n.get(b));continue}o.add(p);const g=i.get(c),m=s(c);let y=0;d.applyToArray(p,b=>{const C=g?.get(b);if(C){const w=C.keys.get(a);return w?.valid?w.value:l.invalidValue}return l.invalidValue},b=>{for(const C of b)m.tuples[y]||(m.tuples[y]=new Array(this.keys.length)),m.tuples[y][a]=C,y+=1})}const r=new Map;for(const[a,{tuples:l}]of n){if(l.length===0)continue;const c=new Set;for(const d of l){const p=[];for(const[g,m]of d.entries())this.keys[g].scopes?.includes(a)&&p.push(m);p.length>0&&c.add(HE(p))}r.set(a,c)}return r}transformColumnsArrays(e,t,i){this.transformArraysWithCache(this.values,t,i,n=>e.columns[n],n=>[ya(n.scopes)],(n,s,o)=>{if(n){const r=n.values.get(o);return r?.valid?r.value:s.invalidValue}return s.invalidValue})}transformInvalidityMap(e,t,i,n){const s=new Set;for(const[o,r]of t){const a=e.get(o);if(!a||s.has(a))continue;s.add(a);const l=i.get(o);r.applyToArray(a,c=>{const d=l?.get(c);return n(d)})}}transformInvalidityArrays(e,t,i){e.invalidKeys&&this.transformInvalidityMap(e.invalidKeys,t,i,n=>n?.hasInvalidKey??!1),e.invalidData&&this.transformInvalidityMap(e.invalidData,t,i,n=>n?n.hasInvalidKey||n.hasInvalidValue:!1)}transformGroupsArray(e,t,i){const n=ya(e.scopes),s=t.get(n);if(!s)return;const o=i.get(n);for(const[,r]of o??[])if(r.hasInvalidKey)throw new Error("AG Charts - reprocessing grouped data with invalid keys not supported. This typically indicates a data quality issue that requires full reprocessing.");s.applyToArray(e.groups,r=>this.createDataGroupForInsertion(r,e,n,o))}createDataGroupForInsertion(e,t,i,n){const s=[];for(const p of t.keys){const g=p.get(i);g&&s.push(g[e])}const o=t.groups[0],r=()=>Object.freeze(py(t.columnScopes.length,O_)),a=o?.datumIndices??r(),c=n?.get(e)?.hasInvalidValue??!1;let d;return c?(d=new Set(t.scopes),d.delete(i)):d=t.scopes,{keys:s,datumIndices:a,aggregation:[],validScopes:d}}setupDomainForDefinition(e,t,i){if(e.valueType==="category")return new GE;let n=t.get(e);return!n&&i?.enableBanding!==!1&&(n=new Sd(()=>new lr,i,!1),t.set(e,n)),n??new lr}extendDomainFromData(e,t,i){if(e instanceof Sd)e.extendBandsFromData(t,i);else for(let n=0;n<t.length;n++)i?.[n]!==!0&&e.extend(t[n])}initializeBandedDomain(e,t,i){if(!(e instanceof Sd))return;const n=e.getStats(),s=n.bandCount===0||n.dataSize!==t||n.needsReinitialization;this.debug.check()&&s&&i&&this.debug(`Reinitializing bands for ${i}: bandCount=${n.bandCount}, dataSize=${n.dataSize}, dataLength=${t}, needsReinitialization=${n.needsReinitialization}`),s&&e.initializeBands(t)}recomputeDomains(e){const t=this.debug.check()?performance.now():0,i=e[hy],n=this.opts.domainBandingConfig;let s;const o=new Map,r=new Map;for(const l of this.keys)o.set(l,this.setupDomainForDefinition(l,i,n));for(const l of this.values)r.set(l,this.setupDomainForDefinition(l,i,n));for(const[l,c]of this.keys.entries()){const d=e.keys[l],p=o.get(c),g=Math.max(...Array.from(d.values()).map(m=>m.length));this.initializeBandedDomain(p,g,String(c.property))}for(const[l,c]of this.values.entries()){const d=e.columns[l],p=r.get(c);this.initializeBandedDomain(p,d.length,String(c.property))}const a=new Map;if(i.size>0){s={totalBands:0,dirtyBands:0,totalData:0};for(const l of i.values())if(l instanceof Sd){const c=l.getStats();a.set(l,c),s.totalBands+=c.bandCount,s.dirtyBands+=c.dirtyBandCount,s.totalData=Math.max(s.totalData,c.dataSize)}}for(const[l,c]of this.keys.entries()){const d=e.keys[l],p=o.get(c);for(const g of c.scopes??[]){const m=d.get(g);if(!m)continue;const y=e.invalidKeys?.get(g);this.extendDomainFromData(p,m,y)}}for(const[l,c]of this.values.entries()){const d=e.columns[l],p=r.get(c),g=ya(c.scopes),m=e.invalidData?.get(g);this.extendDomainFromData(p,d,m)}if(e.domain.keys=this.keys.map(l=>{const c=o.get(l),d=c.getDomain();return lr.is(c)&&d[0]>d[1]?[]:d}),e.domain.values=this.values.map(l=>{const c=r.get(l),d=c.getDomain();return lr.is(c)&&d[0]>d[1]?[]:d}),e.type==="grouped"&&(e.domain.groups=e.groups.map(l=>l.keys)),this.collectDomainBandingMetadata(e,o,r,i,a),this.debug.check()&&t>0){const c=performance.now()-t;if(s&&s.totalBands>0){const d=s.dirtyBands/s.totalBands,p=Math.round(d*s.totalData);this.debug(`recomputeDomains with banding: ${c.toFixed(2)}ms, bands: ${s.dirtyBands}/${s.totalBands} dirty, data scanned: ~${p}/${s.totalData} (${(d*100).toFixed(1)}%)`)}else this.debug(`recomputeDomains: ${c.toFixed(2)}ms (no banding)`)}}generateDiffMetadata(e,t,i){const n=(s,o)=>{const r=[];for(const a of e.keys){const l=a.get(s);if(!l)return;r.push(l[o])}return r.length>0?HE(r):void 0};for(const[s,o]of t){const r={changed:!0,added:new Set,removed:i.get(s)??new Set,updated:new Set,moved:new Set};for(const c of o.indexMap.spliceOps)if(c.insertCount>0)for(let d=0;d<c.insertCount;d++){const p=c.index+d,g=n(s,p);g&&r.added.add(g)}const{originalLength:a,totalPrependCount:l}=o.indexMap;if(!xle(o.indexMap))if(Mle(o.indexMap)&&a>0)for(let c=l;c<l+a;c++){const d=n(s,c);d&&r.moved.add(d)}else if(Dle(o.indexMap)&&l>0)for(let c=0;c<a;c++){const d=c+l,p=n(s,d);p&&r.moved.add(p)}else o.forEachPreservedIndex((c,d)=>{if(c!==d){const p=n(s,d);p&&r.moved.add(p)}});e.reduced.diff[s]=r}}updateProcessedDataMetadata(e){let t=0;for(const n of e.dataSources.values())t=Math.max(t,n.data.length);e.input.count=t;let i=0;for(const[n,s]of e.invalidData??new Map){const o=e.invalidKeys?.get(n);for(let r=0;r<s.length;r++)s[r]&&!o?.[r]&&(i+=1)}if(e.partialValidDataCount=i,e.invalidKeyCount)for(const[n,s]of e.invalidKeys??new Map){const o=s.filter(Boolean).length;e.invalidKeyCount.set(n,o)}e[zE].clear(),e[_E].clear(),e[VE].clear()}processInsertionsOnce(e,t,i,n){const s=new Map,{finalLength:o}=t.indexMap;for(const r of t.indexMap.spliceOps)if(!(r.insertCount<=0))for(let a=0;a<r.insertCount;a++){const l=r.index+a;if(l<0||l>=o)continue;const c=i.data[l],d=new Map,p=new Map;let g=!1,m=!1;if(c==null||typeof c!="object")g=!0,m=!0;else{for(const[y,b]of this.keys.entries()){if(!b.scopes?.includes(e))continue;const C=n(b,c,l,e);d.set(y,{value:C.value,valid:C.valid}),C.valid||(g=!0)}for(const[y,b]of this.values.entries()){if(!b.scopes?.includes(e))continue;const C=n(b,c,l,b.scopes);p.set(y,{value:C.value,valid:C.valid}),C.valid||(m=!0)}}s.set(l,{keys:d,values:p,hasInvalidKey:g,hasInvalidValue:m})}return s}warnDataMissingProperties(e){if(e.size!==0)for(const t of wg(this.keys,this.values))for(const[i,n]of t.missing){if(n<(e.get(i)?.data.length??1/0))continue;const s=i==null?"":` for ${i}`;fe.warnOnce(`the key '${t.property}' was not found in any data element${s}.`)}}processScopeCache(){this.scopeCache.clear();for(const e of wg(this.keys,this.values,this.aggregates))if(e.idsMap)for(const[t,i]of e.idsMap)for(const n of i)if(!this.scopeCache.has(t))this.scopeCache.set(t,new Map([[n,e]]));else{if(this.scopeCache.get(t)?.has(n))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(t).set(n,e)}}valueGroupIdxLookup({matchGroupIds:e}){const t=[];for(const[i,n]of this.values.entries())(!e||n.groupId&&e.includes(n.groupId))&&t.push(i);return t}valueIdxLookup(e,t){const i=e==null||e.length===0,n=typeof t=="string"?t:t.id,s=r=>{if(r.idsMap){for(const[a,l]of r.idsMap)if(e?.includes(a)&&l.has(n))return!0}return!1},o=this.values.reduce((r,a,l)=>((a.scopes==null||i&&!a.scopes.length||a.scopes.some(d=>e?.includes(d)))&&(a.property===n||a.id===n||s(a))&&r.push(l),r),[]);if(o.length===0)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(t)} in scope(s) ${JSON.stringify(e)}`);return o}extractData(e){const{dataDomain:t,processValue:i,allScopesHaveSameDefs:n}=this.initDataDomainProcessor("extend"),{keys:s,values:o}=this,{invalidData:r,invalidKeys:a,invalidKeyCount:l,allKeyMappings:c}=this.extractKeys(s,e,i),{columns:d,columnScopes:p,columnNeedValueOf:g,partialValidDataCount:m,maxDataLength:y}=this.extractValues(r,o,e,a,i),b=C=>{const w=t.get(C),x=w.getDomain();return lr.is(w)&&x[0]>x[1]?[]:x};return{type:"ungrouped",input:{count:y},scopes:new Set(e.keys()),dataSources:e,aggregation:void 0,keys:[...c.values()],columns:d,columnScopes:p,columnNeedValueOf:g,invalidKeys:a,invalidKeyCount:l,invalidData:r,domain:{keys:s.map(b),values:o.map(b)},defs:{allScopesHaveSameDefs:n,keys:s,values:o},partialValidDataCount:m,time:0,[zE]:new Map,[_E]:new Map,[VE]:new Map,[hy]:new Map}}extractKeys(e,t,i){const n=new Map,s=new Map,o=new Map,r=new Map;let a,l;const c=(d,p)=>{const g=l.get(d);a.set(p,a.get(g)),n.has(g)&&(n.set(p,n.get(g)),s.set(p,s.get(g)))};for(const d of e){const{invalidValue:p,scopes:g}=d;a=new Map,l=new Map,r.set(d,a);for(const m of g??[]){const y=t.get(m)?.data??[];if(l.has(y)){c(y,m);continue}const b=[];a.set(m,b),l.set(y,m);let C,w,x=0;for(let M=0;M<y.length;M++){if(y[M]==null||typeof y[M]!="object")continue;const E=i(d,y[M],M,m);if(E.valid){b.push(E.value);continue}b.push(p),C??(C=py(y.length,!1)),w??(w=py(y.length,!1)),x+=1,C[M]=!0,w[M]=!0}C&&w&&(n.set(m,C),s.set(m,w),o.set(m,x))}}return{invalidData:s,invalidKeys:n,invalidKeyCount:o,allKeyMappings:r}}extractValues(e,t,i,n,s){let o=0;const r=[],a=[],l=[];let c=0;for(const d of t){const{invalidValue:p}=d;if(new Set(d.scopes.map(M=>i.get(M))).size>1)throw new Error(`AG Charts - more than one data source for: ${JSON.stringify(d)}`);const m=new Set(d.scopes),y=ya(d.scopes),b=i.get(y)?.data??[],C=new Array,w=n.get(y);let x=!1;for(let M=0;M<b.length;M++){if(b[M]==null||typeof b[M]!="object")continue;const E=b[M],I=w==null?!1:w[M],N=s(d,E,M,d.scopes);let T=N.value;(I||!N.valid)&&this.markScopeDatumInvalid(d.scopes,b,M,e),I?T=p:N.valid||(o+=1,T=p),!x&&T!=null&&typeof T=="object"&&(x=!0),C[M]=T}r.push(C),a.push(m),l.push(x),c=Math.max(c,C.length)}return{columns:r,columnScopes:a,columnNeedValueOf:l,partialValidDataCount:o,maxDataLength:c}}groupData(e,t){var i;const{keys:n,columns:s,columnScopes:o,invalidKeys:r,invalidData:a}=e,l=e.scopes,c=[],d=[],p=l.size!==1||t!=null?new Map:void 0;let g=!0,m=0;const y=l.size,b=this.groupBatches(l,s,o,n,a,r),C=b.length;if(this.debug.check()&&!e.optimizations&&(e.optimizations={}),this.debug.check()){const M=y>0?1-C/y:0;e.optimizations.batchMerging={originalBatchCount:y,mergedBatchCount:C,mergeRatio:M}}const w=b.length===1,x=Object.freeze(py(b[0][1].length,O_));for(const[M,E,I,N,T,P]of b){const O=s[ya(E)];for(let G=0;G<O.length;G++){if(P?.[G]===!0)continue;const B=I.map(U=>U[G]);if(B==null||B.length===0)throw new Error("AG Charts - no keys found for scope(s): "+M.join(", "));const z=t?.(B)??B,j=p==null?void 0:HE(z);let X=p?.get(j),q,H,K=!1;if(X==null?(q={keys:z,datumIndices:[],aggregation:[],validScopes:l},H=m++,X=[H,q],K=!0,p?.set(j,X),c.push(q.keys),d.push(q)):([H,q]=X,g=!1),T?.[G]===!0){q.validScopes===l&&(q.validScopes=new Set(l.values()));for(const U of N)q.validScopes.delete(U)}if(K&&G===H&&w)q.datumIndices=x;else{!K&&q.datumIndices===x&&(q.datumIndices=x.map(U=>[...U]));for(const U of E)(i=q.datumIndices)[U]??(i[U]=[]),q.datumIndices[U].push(G-H)}}}return{...e,type:"grouped",domain:{...e.domain,groups:c},groups:d,groupsUnique:g,optimizations:e.optimizations,[hy]:e[hy]}}groupBatches(e,t,i,n,s,o){const r=[],a=new Set;for(const l of e){const c=t.map((y,b)=>b).filter(y=>!a.has(y)&&i[y].has(l));if(c.length===0)continue;for(const y of c)a.add(y);const d=new Set;for(const y of c)for(const b of i[y])d.add(b);const p=n.map(y=>y.get(l)).filter(y=>y!=null),g=s?.get(l),m=o?.get(l);r.push([l,c,p,d,g,m])}return this.mergeCompatibleBatches(r)}areBatchesCompatible(e,t){const[,,i,,n,s]=e,[,,o,,r,a]=t;return i.every((l,c)=>l===o[c])&&s===a&&n===r}mergeCompatibleBatches(e){const t=[],i=new Set;for(let n=0;n<e.length;n++){if(i.has(n))continue;const[s,o,r,a,l,c]=e[n],d=[[s],[...o],r,new Set(a),l,c];this.findAndMergeCompatibleBatches(e,n,d,i),t.push(d),i.add(n)}return t}findAndMergeCompatibleBatches(e,t,i,n){const s=e[t];for(let o=t+1;o<e.length;o++){if(n.has(o))continue;const r=e[o],[a,l,,c]=r;if(this.areBatchesCompatible(s,r)){i[0].push(a),i[1].push(...l);for(const d of c)i[3].add(d);n.add(o)}}}aggregateUngroupedData(e){const t=this.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=t;const{columns:i,dataSources:n}=e,s=ya(n.keys()),o=e.keys.map(a=>a.get(s)),r=n.get(s)?.data??[];e.aggregation=r?.map((a,l)=>{const c=[];for(const[d,p]of this.aggregates.entries()){const g=this.valueGroupIdxLookup(p);let m=p.groupAggregateFunction?.()??[1/0,-1/0];const y=g.map(x=>i[x][l]),b=Kx(o,l),C=b==null?void 0:p.aggregateFunction(y,b);C&&(m=p.groupAggregateFunction?.(C,m)??lr.extendDomain(C,m));const w=p.finalFunction?.(m)??m;c[d]=w,lr.extendDomain(w,t[d])}return c})}aggregateGroupedData(e){const t=this.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=t;const{columns:i}=e;for(const[n,s]of this.aggregates.entries()){const o=this.valueGroupIdxLookup(s);for(let r=0;r<e.groups.length;r++){const a=e.groups[r];a.aggregation??(a.aggregation=[]);const l=a.keys;let c=s.groupAggregateFunction?.()??[1/0,-1/0];const d=Math.max(...o.map(g=>a.datumIndices[g]?.length??0));for(let g=0;g<d;g++){const m=o.map(b=>{const C=a.datumIndices[b]?.[g];if(C==null)return;const w=this.resolveAbsoluteIndex(r,C);return i[b][w]}),y=s.aggregateFunction(m,l);y&&(c=s.groupAggregateFunction?.(y,c)??lr.extendDomain(y,c))}const p=s.finalFunction?.(c)??c;a.aggregation[n]=p,lr.extendDomain(p,t[n])}}}postProcessGroups(e){const{groupProcessors:t}=this,{columnScopes:i,columns:n,invalidData:s}=e;for(const o of t){const r=this.valueGroupIdxLookup(o),a=o.adjust()();for(let l=0;l<e.groups.length;l++){const c=e.groups[l];a(n,r,c,l)}for(const l of r){const d=this.values[l].valueType==="category",p=n[l],g=ya(i[l]),m=s?.get(g),y=d?new GE:new lr;for(let b=0;b<p.length;b+=1)m?.[b]!==!0&&y.extend(p[b]);e.domain.values[l]=y.getDomain()}}}reprocessGroupProcessors(e,t){const{groupProcessors:i}=this,{columns:n}=e;for(const o of i)if(!o.supportsReprocessing)throw new Error("AG Charts - attempted to reprocess group processor that does not support reprocessing. This is an internal error that should not occur.");const s=new Set;for(const[,o]of t)s.has(o)||s.add(o);for(const o of i){const r=this.valueGroupIdxLookup(o),a=o.adjust()();for(const l of s){const{indexMap:c}=l;for(const d of c.spliceOps)if(d.insertCount>0)for(let p=0;p<d.insertCount;p++){const g=d.index+p,m=e.groups[g];a(n,r,m,g)}}}}postProcessProperties(e){for(const{adjust:t,property:i,scopes:n}of this.propertyProcessors)for(const s of this.valueIdxLookup(n,i))t()(e,s)}reduceData(e){e.reduced??(e.reduced={});const{dataSources:t,keys:i}=e;for(const n of this.reducers){const s=n.reducer();let o=n.initialValue;if(e.type==="grouped")for(const r of e.groups)o=s(o,r.keys);else{const r=B_(n)?n.scopes[0]:ya(t.keys()),a=i.map(d=>d.get(r)).filter(d=>d!=null),l=a.map(()=>{}),c=t.get(r)?.data??[];for(let d=0;d<c.length;d+=1){for(let p=0;p<l.length;p++)l[p]=a[p]?.[d];o=s(o,l)}}e.reduced[n.property]=o}}postProcessData(e){e.reduced??(e.reduced={});for(const t of this.processors)e.reduced[t.property]=t.calculate(e,e.reduced[t.property])}initDataDomainProcessor(e){const{keys:t,values:i}=this,n=new Set;for(const p of i)if(p.scopes)for(const g of p.scopes)n.add(g);const s=new Map,o=new Map;let r=!0;const a=()=>{for(const p of wg(t,i))p.valueType==="category"?s.set(p,new GE):(s.set(p,new lr),r&&(r=(p.scopes?.length??0)===n.size))};a();const l=this.buildAccessors(wg(t,i)),c={value:void 0,missing:!1,valid:!1};return{dataDomain:s,processValue:(p,g,m,y)=>{let b,C;if(l.has(p.property)){try{C=l.get(p.property)(g)}catch{}b=C!=null}else b=p.property in g,C=b?g[p.property]:p.missingValue;p.forceValue!=null&&(C=b&&C1(C)?-1*p.forceValue:p.forceValue,b=!0),c.missing=!b;const w="missingValue"in p;if(!b&&!w)if(typeof y=="string"){const M=p.missing.get(y)??0;p.missing.set(y,M+1)}else for(const M of y){const E=p.missing.get(M)??0;p.missing.set(M,E+1)}s.has(p)||a();const x=p.type==="key"&&C==null;if(b&&p.validation?.(C,g,m)===!1||x)if(c.valid=!1,"invalidValue"in p)C=p.invalidValue;else return this.mode!=="integrated"&&fe.warnOnce(`invalid value of type [${typeof C}] for [${p.scopes} / ${p.id}] ignored:`,`[${C}]`),c.value=void 0,c;else c.valid=!0;if(p.processor){let M=o.get(p);M==null&&(M=p.processor(),o.set(p,M)),C=M(C,m)}return e==="extend"&&s.get(p)?.extend(C),c.value=C,c},initDataDomain:a,scopes:n,allScopesHaveSameDefs:r}}collectOptimizationMetadata(e,t){const i=e.optimizations?.domainBanding;e.optimizations={performance:{processingTime:e.time,pathTaken:t},...i&&{domainBanding:i}};const n=this.isReprocessingSupported(e),s=t==="reprocess";let o;if(!n){const r=[];if(e.type==="grouped"){e.groupsUnique||r.push("groupsUnique=false"),this.getUniqueDataSets(e).size!==1&&r.push("multiple data sources");const l=ya(e.scopes);e.invalidKeys?.get(l)?.some(d=>d)&&r.push("has invalid keys")}this.aggregates.length>0&&r.push("has aggregates"),this.reducers.length>0&&r.push("has reducers"),this.processors.length>0&&r.push("has processors"),this.propertyProcessors.length>0&&r.push("has property processors"),o=r.length>0?r.join(", "):void 0}if(e.optimizations.reprocessing={applied:s,reason:o},e.type==="grouped"){let r=0;const a=e.groups[0];if(a){const l=a.datumIndices;for(const c of e.groups)c.datumIndices===l&&r++}e.optimizations.sharedDatumIndices={applied:r>0,sharedGroupCount:r,totalGroupCount:e.groups.length}}}collectDomainBandingMetadata(e,t,i,n,s){e.optimizations??(e.optimizations={});const o=[],r=[];for(const a of this.keys){const l=t.get(a),c=n.get(a),d=l instanceof Sd;let p;d||(a.valueType==="category"?p="discrete domain":this.opts.domainBandingConfig?.enableBanding===!1?p="banding disabled":p="not configured");let g;if(d&&c){const m=s.get(c)??c.getStats(),y=m.bandCount>0?m.dirtyBandCount/m.bandCount:0;g={totalBands:m.bandCount,dirtyBands:m.dirtyBandCount,dataSize:m.dataSize,scanRatio:y}}o.push({property:String(a.property),applied:d,reason:p,stats:g})}for(const a of this.values){const l=i.get(a),c=n.get(a),d=l instanceof Sd;let p;d||(a.valueType==="category"?p="discrete domain":this.opts.domainBandingConfig?.enableBanding===!1?p="banding disabled":p="not configured");let g;if(d&&c){const m=s.get(c)??c.getStats(),y=m.bandCount>0?m.dirtyBandCount/m.bandCount:0;g={totalBands:m.bandCount,dirtyBands:m.dirtyBandCount,dataSize:m.dataSize,scanRatio:y}}r.push({property:String(a.property),applied:d,reason:p,stats:g})}e.optimizations.domainBanding={keyDefs:o,valueDefs:r}}buildAccessors(e){const t=new Map;if(this.suppressFieldDotNotation)return t;for(const i of e){if(!(i.property.includes(".")||i.property.includes("[")))continue;const s=SU(i.property);if(s==null){fe.warnOnce("Invalid property path [%s]",i.property);continue}const o=Ile(s);t.set(i.property,o)}return t}};function kle(e){const t=(i,n)=>{n.length>0&&(fe.log(`DataModel.processData() - ${i}`),fe.table(n))};if(fe.log("DataModel.processData() - processedData",e),t("Key Domains",e.domain.keys),t("Value Domains",e.domain.values),t("Aggregate Domains",e.domain.aggValues??[]),e.optimizations){fe.log("DataModel.processData() - Optimization Summary");const i=e.optimizations;if(i.performance&&fe.log(`  Performance: ${i.performance.processingTime.toFixed(2)}ms (${i.performance.pathTaken})`),i.reprocessing){const n=i.reprocessing.applied?"":"",s=i.reprocessing.reason?` (${i.reprocessing.reason})`:"";fe.log(`  Reprocessing: ${n}${s}`)}if(i.domainBanding){const n=i.domainBanding.keyDefs.filter(a=>a.applied),s=i.domainBanding.valueDefs.filter(a=>a.applied),o=n.length+s.length,r=i.domainBanding.keyDefs.length+i.domainBanding.valueDefs.length;if(o>0){fe.log(`  Domain Banding:  (${o}/${r} definitions)`);for(const a of[...n,...s])if(a.stats){const l=(a.stats.scanRatio*100).toFixed(1);fe.log(`    ${a.property}: scanned ${a.stats.dirtyBands}/${a.stats.totalBands} bands (${l}%)`)}}else{const a=[...i.domainBanding.keyDefs.filter(c=>!c.applied).map(c=>c.reason),...i.domainBanding.valueDefs.filter(c=>!c.applied).map(c=>c.reason)],l=[...new Set(a)].join(", ");fe.log(`  Domain Banding:  (${l})`)}}if(i.sharedDatumIndices){const n=i.sharedDatumIndices.applied?"":"",s=`${i.sharedDatumIndices.sharedGroupCount}/${i.sharedDatumIndices.totalGroupCount}`;fe.log(`  Shared DatumIndices: ${n} (${s} groups)`)}if(i.batchMerging){const n=(i.batchMerging.mergeRatio*100).toFixed(0),s=`${i.batchMerging.originalBatchCount}  ${i.batchMerging.mergedBatchCount}`;fe.log(`  Batch Merging: ${s} (${n}% reduction)`)}}}var Sg=class EI{constructor(t){this.data=t,this.pendingTransactions=[]}static empty(){return new EI([])}static wrap(t){return new EI(t)}netSize(){if(!this.hasPendingTransactions())return this.data.length;const t=this.getChangeDescription();return t?t.indexMap.finalLength:this.data.length}addTransaction(t){this.pendingTransactions.push(t),this.cachedChangeDescription=void 0}hasPendingTransactions(){return this.pendingTransactions.length>0}getPendingTransactionCount(){return this.pendingTransactions.length}commitPendingTransactions(){if(!this.hasPendingTransactions())return!1;const t=this.getChangeDescription();if(!t)return!1;const i=[...t.getPrependedValues(),...t.getAppendedValues()];let n=0;return t.applyToArray(this.data,()=>i[n++]),this.pendingTransactions=[],this.cachedChangeDescription=void 0,!0}clearPendingTransactions(){const t=this.pendingTransactions.length;return this.pendingTransactions=[],this.cachedChangeDescription=void 0,t}getPendingTransactions(){return[...this.pendingTransactions]}toJSON(){return this.data}getChangeDescription(){if(!this.hasPendingTransactions())return;if(this.cachedChangeDescription)return this.cachedChangeDescription;const{indexMap:t,prependValues:i,appendValues:n}=this.buildIndexMap(),s=new vU(t,{prependValues:i,appendValues:n});return this.cachedChangeDescription=s,s}removeFromGroups(t,i){for(const n of t){let s=0;for(;s<n.length&&i.size>0;)i.has(n[s])?(i.delete(n[s]),n.splice(s,1)):s++;if(i.size===0)break}}buildIndexMap(){const t=this.data.length,i=[],n=[],s=new Set;for(const m of this.pendingTransactions){const{prepend:y,append:b,remove:C}=m;if(Array.isArray(y)&&y.length>0&&i.unshift([...y]),Array.isArray(b)&&b.length>0&&n.push([...b]),Array.isArray(C)&&C.length>0){const w=new Set(C);if(this.removeFromGroups(i,w),w.size>0&&this.removeFromGroups(n,w),w.size>0)for(let x=0;x<this.data.length&&w.size>0;x++){const M=this.data[x];w.has(M)&&(s.add(x),w.delete(M))}}}const o=i.flat(),r=n.flat(),a=o.length,l=r.length,c=t-s.size,d=a+c+l,p=[];if(a>0&&p.push({index:0,deleteCount:0,insertCount:a}),s.size>0){const m=Array.from(s).sort((C,w)=>w-C);let y=m[0],b=1;for(let C=1;C<m.length;C++){const w=m[C];m[C-1]-w===1?b++:(p.push({index:y-b+1+a,deleteCount:b,insertCount:0}),y=w,b=1)}p.push({index:y-b+1+a,deleteCount:b,insertCount:0})}return l>0&&p.push({index:a+c,deleteCount:0,insertCount:l}),{indexMap:{originalLength:t,finalLength:d,spliceOps:p,removedIndices:s,totalPrependCount:a,totalAppendCount:l},prependValues:o,appendValues:r}}};function G_(e){return e.filter(t=>t.type==="key").map(t=>t.property).join(";")}var lL=class cr{constructor(t,i){this.mode=t,this.suppressFieldDotNotation=i,this.debug=at.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(t,i,n){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((s,o)=>{this.requested.push({id:t,opts:n,dataSet:i,resolve:s,reject:o})})}execute(t){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed";const i=new Map;for(const r of this.requested)r.dataSet.hasPendingTransactions()&&i.set(r.dataSet,r.dataSet.getChangeDescription()),r.dataSet.commitPendingTransactions();this.debug("DataController.execute() - requested",this.requested);const n=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",n);const s=this.mergeRequested(n);this.debug("DataController.execute() - merged",s),this.debug.check()&&($t().processedData=[]);const o=[];for(const{dataSet:r,ids:a,opts:l,resolves:c,rejects:d}of s){const p=t?.find(w=>Sle(w,r,a,l)),g=(w,x)=>{if(this.debug.check()&&$t("processedData").push(x),x==null){for(const M of d)M(new Error("AG Charts - no processed data generated"));return}o.push({opts:l,dataSet:r,dataLength:r.data.length,ids:a,dataModel:w,processedData:x});for(const M of c)M({dataModel:w,processedData:x})},m=()=>{try{const w=new RI(l,this.mode,this.suppressFieldDotNotation),x=new Map(n.map(E=>[E.id,E.dataSet])),M=w.processData(x);return g(w,M),w}catch(w){for(const x of d)x(w)}};if(p==null){m();continue}const{dataModel:y,processedData:b}=p,C=i.get(r);if(b&&C&&y.isReprocessingSupported(b)){if(this.debug("DataController.execute() - reprocessing data",b,r),y.reprocessData(b,i),at.check("data-model:reprocess-diff")){const w=new RI(l,this.mode,this.suppressFieldDotNotation),x=new Map(n.map(T=>[T.id,T.dataSet])),M=w.processData(x),E=JSON.parse(JSON.stringify(b,cr.jsonReplacer)),I=JSON.parse(JSON.stringify(M,cr.jsonReplacer));delete E.time,delete E.optimizations,delete I.time,delete I.optimizations;const N=qa(I,E);N?(fe.log(" DATA-MODEL REPROCESS DIFF DETECTED "),fe.log("Difference between incremental update and full reprocess:"),fe.log(""),fe.log("BASELINE (full reprocess):"),fe.log(JSON.stringify(I,null,2)),fe.log(""),fe.log("REPROCESSED (incremental update):"),fe.log(JSON.stringify(E,null,2)),fe.log(""),fe.log("DIFF (what changed):"),fe.log(JSON.stringify(N,null,2))):fe.log(" Data-model reprocess matches baseline (no diff)")}g(y,b);continue}m()}return o}validateRequests(t){const i=[];for(const[n,s]of t.entries())n>0&&s.dataSet.data.length!==t[0].dataSet.data.length&&s.opts.groupByData===!1&&s.opts.groupByKeys===!1?s.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):i.push(s);return i}mergeRequested(t){const i=[];for(const n of t){const s=i.find(cr.groupMatch(n));s?s.push(n):i.push([n])}return i.map(cr.mergeRequests)}static groupMatch({dataSet:t,opts:i}){const{groupByData:n,groupByKeys:s=!1,groupByFn:o,props:r}=i,a=G_(r);return([l])=>(n===!1||l.dataSet===t)&&(l.opts.groupByKeys??!1)===s&&l.opts.groupByFn===o&&G_(l.opts.props)===a}static mergeRequests(t){const i={ids:[],rejects:[],resolves:[],dataSet:t[0].dataSet,opts:{...t[0].opts,props:[]}},n=new Map,s=new Map;let o=0;for(const r of t){const{id:a,dataSet:l,resolve:c,reject:d,opts:{props:p,...g}}=r;i.ids.push(a),i.rejects.push(d),i.resolves.push(c),i.dataSet??(i.dataSet=l),i.opts??(i.opts={...g,props:[]});for(const m of p){const y={...m,scopes:[a],data:l.data};cr.createIdsMap(a,y);let b;cr.crossScopeMergableTypes.has(y.type)?b=-1:s.has(l.data)?b=s.get(l.data):(b=o++,s.set(l.data,b));const C=`${y.type}-${b}-${y.groupId}`,w=n.get(C),x=w?.find(M=>cr.deepEqual(M,y));if(w==null){i.opts.props.push(y),n.set(C,[y]);continue}else if(x==null){i.opts.props.push(y),w.push(y);continue}y.scopes!=null&&(x.scopes??(x.scopes=[]),x.scopes.push(...y.scopes)),(x.type==="key"||x.type==="value")&&y.idsMap?.size&&(x.idsMap??(x.idsMap=new Map),cr.mergeIdsMap(y.idsMap,x.idsMap))}}return i}static mergeIdsMap(t,i){for(const[n,s]of t){const o=i.get(n);if(o==null)i.set(n,new Set(s));else for(const r of s)o.add(r)}}static createIdsMap(t,i){i.id!=null&&(i.idsMap??(i.idsMap=new Map),i.idsMap.has(t)?i.idsMap.get(t).add(i.id):i.idsMap.set(t,new Set([i.id])))}static deepEqual(t,i){if(t===i)return!0;if(t&&i&&typeof t=="object"&&typeof i=="object"){if(t.constructor!==i.constructor)return!1;let n,s;if(Array.isArray(t)){if(s=t.length,s!==i.length)return!1;for(n=s-1;n>=0;n--)if(!cr.deepEqual(t[n],i[n]))return!1;return!0}const o=Object.keys(t);if(s=o.length,s!==Object.keys(i).length)return!1;for(n=s-1;n>=0;n--){const r=o[n];if(!cr.skipKeys.has(r)&&(!Object.hasOwn(i,r)||!cr.deepEqual(t[r],i[r])))return!1}return!0}return!1}static jsonReplacer(t,i){return i instanceof Map?{__type:"Map",value:Array.from(i.entries())}:i instanceof Set?{__type:"Set",value:Array.from(i)}:i}};lL.crossScopeMergableTypes=new Set(["key","group-value-processor"]);lL.skipKeys=new Set(["id","idsMap","type","scopes","data"]);var xU=lL,Lle=class{constructor(){this.axesMap=new Map,this.themeTemplates=new Map}register(e,t){this.axesMap.set(e,t.moduleFactory),t.themeTemplate&&this.setThemeTemplate(e,t.themeTemplate)}create(e,t){const i=this.axesMap.get(e);if(i)return i(t);throw new Error(`AG Charts - unknown axis type: ${e}`)}has(e){return this.axesMap.has(e)}keys(){return this.axesMap.keys()}setThemeTemplate(e,t){return this.themeTemplates.set(e,t),this}getThemeTemplate(e){return this.themeTemplates.get(e)}},nh=new Lle,Sb=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","topology","standalone"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","topology","standalone"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","topology","standalone"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","topology","standalone"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","topology","standalone"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"root",optionsKey:"ranges",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","topology","standalone"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"]},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"axis-option",optionsKey:"bandHighlight",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"radial-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"sankey"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"},{type:"context",contextKey:"sharedToolbar",chartTypes:["cartesian"]}];function RM(e){return Sb.find(t=>t.type==="series"&&t.identifier===e)?.chartTypes}function Ple(e){return RM(e)?.find(i=>i==="cartesian")==="cartesian"}function Nle(e){return RM(e)?.find(i=>i==="polar")==="polar"}function Fle(e){return RM(e)?.find(i=>i==="topology")==="topology"}function Ole(e){return RM(e)?.find(i=>i==="standalone")==="standalone"}function Ble(e){return e.packageType==="enterprise"}function Gle(e){if(!Ble(e))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const t=Sb.find(i=>i.type===e.type&&("optionsKey"in i&&"optionsKey"in e?i.optionsKey===e.optionsKey:!0)&&("contextKey"in i&&"contextKey"in e?i.contextKey===e.contextKey:!0)&&i.identifier===e.identifier&&e.chartTypes.every(n=>i.chartTypes.includes(n)));return t&&(t.useCount??(t.useCount=0),t.useCount++),t!=null}function _le(){return Sb.filter(({useCount:e})=>e==null||e===0)}var Vle=class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(e,{optionsKey:t,moduleFactory:i,themeTemplate:n}){this.legendMap.set(e,{optionsKey:t,moduleFactory:i}),this.themeTemplates.set(t,n)}create(e,t){const i=this.legendMap.get(e)?.moduleFactory;if(i)return i(t);throw new Error(`AG Charts - unknown legend type: ${e}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((e,[t,i])=>(e[t]=i.optionsKey,e),{})}},cL=new Vle,MU=class extends Map{get(e){return super.get(e)??"unknown"}isCartesian(e){return this.get(e)==="cartesian"}isPolar(e){return this.get(e)==="polar"}isTopology(e){return this.get(e)==="topology"}isStandalone(e){return this.get(e)==="standalone"}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(e=>this.isCartesian(e))}get polarTypes(){return this.seriesTypes.filter(e=>this.isPolar(e))}get topologyTypes(){return this.seriesTypes.filter(e=>this.isTopology(e))}get standaloneTypes(){return this.seriesTypes.filter(e=>this.isStandalone(e))}},zle=class extends Map{set(e,t){return super.set(e,_t(t,this.get(e)))}},Bn=new MU,Hle=new MU,TI=new zle,jle=class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(e,{chartTypes:[t],moduleFactory:i,predictAxis:n,defaultAxes:s,themeTemplate:o,solo:r,stackable:a,groupable:l,stackedByDefault:c,hidden:d}){this.setThemeTemplate(e,o),this.seriesMap.set(e,{moduleFactory:i,predictAxis:n,defaultAxes:s,solo:r,stackable:a,groupable:l,stackedByDefault:c}),Bn.set(e,t),d||Hle.set(e,t)}create(e,t){const i=this.seriesMap.get(e)?.moduleFactory;if(i)return i(t);throw new Error(`AG Charts - unknown series type: ${e}`)}predictAxes(e,t,i){if(!t)return;const n=t?.data??i;if(!n?.length)return;const s=this.seriesMap.get(e)?.predictAxis;if(!s)return;const o=new Map,r=uoe(0,n.length-1,5);for(const a of r){const l=n[a];for(const c of Object.values(mM)){const d=s(c,l,t);if(!o.has(c)){o.set(c,d);continue}const p=o.get(c);if(!(!d&&!p)){if(!d||!p)return;for(const g of Object.keys(p))if(p[g]!==d[g])return}}}for(const[a,l]of o)l||o.delete(a);if(o.size!==0){if(o.size===1){const a=this.cloneDefaultAxes(e);if(!a)return;const[l]=o.values();return a.map(c=>c.type==="category"?l:c)}return Array.from(o.values())}}cloneDefaultAxes(e){const t=this.seriesMap.get(e)?.defaultAxes;return t==null?null:zi(t)}setThemeTemplate(e,t){const i=this.themeTemplates.get(e);this.themeTemplates.set(e,_t(t,i))}getThemeTemplate(e){return this.themeTemplates.get(e)}isSolo(e){return this.seriesMap.get(e)?.solo??!1}isGroupable(e){return this.seriesMap.get(e)?.groupable??!1}isStackable(e){return this.seriesMap.get(e)?.stackable??!1}isStackedByDefault(e){return this.seriesMap.get(e)?.stackedByDefault??!1}},yr=new jle,uL=class Il{constructor(t){this.chart=t}subscribe(t=Il.DEFAULT_GROUP){let i=this.get(t);return i||(i={members:new Set},Il.chartsGroups.set(t,i)),i.members.add(this.chart),this}unsubscribe(t=Il.DEFAULT_GROUP){const i=this.get(t);return i?.members.delete(this.chart),delete i?.domains?.x?.sources?.[this.chart.id],delete i?.domains?.y?.sources?.[this.chart.id],this}getChart(){return this.chart}getGroupState(t=Il.DEFAULT_GROUP){return this.get(t)}getGroupMembers(t=Il.DEFAULT_GROUP){const i=this.get(t);return i?Array.from(i.members):[]}getGroupSiblings(t=Il.DEFAULT_GROUP){return this.getGroupMembers(t).filter(i=>i!==this.chart)}getGroupSyncMode(t=Il.DEFAULT_GROUP){return this.getGroupMembers(t).some(i=>i.series.length>1)?"multi-series":"single-series"}get(t){return Il.chartsGroups.get(t)}};uL.chartsGroups=new Map;uL.DEFAULT_GROUP=Symbol("sync-group-default");var Wle=uL,dL=class extends Qe{constructor(){super(...arguments),this.enabled=!1}};A([k],dL.prototype,"enabled",2);A([k],dL.prototype,"tabIndex",2);var DU={};il(DU,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>jr,fromToMotion:()=>hn,staticFromToMotion:()=>yc});var jr={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function hn(e,t,i,n,s,o,r){const{fromFn:a,toFn:l,applyFn:c=(y,b)=>y.setProperties(b)}=s,{nodes:d,selections:p}=xM(n),g=(y,b)=>{let C,w=0,x=0;for(const M of b){const E=y[w]===M,I={last:x>=b.length-1,lastLive:w>=y.length-1,prev:b[x-1],prevFromProps:C,prevLive:y[w-1],next:b[x+1],nextLive:y[w+(E?1:0)]},N=`${e}_${t}_${M.id}`;i.stopByAnimationId(N);let T="unknown";E?o&&r&&(T=Ule(M,M.datum,o,r)):T="removed",M.transitionOut=T==="removed";const{phase:P,start:O,finish:G,delay:B,duration:z,...j}=a(M,M.datum,T,I),{phase:X,start:q,finish:H,delay:K,duration:U,...de}=l(M,M.datum,T,I),te=G==null;i.animate({id:N,groupId:e,phase:P??X??"update",duration:z??U,delay:B??K,from:j,to:de,ease:yv,collapsable:te,onPlay:()=>{const V={...O,...q,...j};c(M,V,"start")},onUpdate(V){c(M,V,"update")},onStop:()=>{const V={...O,...q,...j,...de,...G,...H};c(M,V,"end")}}),E&&w++,x++,C=j}};let m=0;for(const y of p){const b=y.nodes(),C=b.filter(w=>!y.isGarbage(w));g(C,b),i.animate({id:`${e}_${t}_selection_${m}`,groupId:e,phase:"end",from:0,to:1,ease:yv,onStop(){y.cleanup()}}),m++}g(d,d)}function yc(e,t,i,n,s,o,r){const{nodes:a,selections:l}=xM(n),{start:c,finish:d,phase:p}=r;i.animate({id:`${e}_${t}`,groupId:e,phase:p??"update",from:s,to:o,ease:yv,onPlay:()=>{if(c){for(const g of a)g.setProperties(c);for(const g of l)for(const m of g.nodes())m.setProperties(c)}},onUpdate(g){for(const m of a)m.setProperties(g);for(const m of l)for(const y of m.nodes())y.setProperties(g)},onStop:()=>{for(const g of a)g.setProperties({...o,...d});for(const g of l){for(const m of g.nodes())m.setProperties({...o,...d});g.cleanup()}}})}function Ule(e,t,i,n){const s=i(e,t);return n.added.has(s)?"added":n.removed.has(s)?"removed":e.previousDatum==null&&e.datum!=null?"added":e.previousDatum!=null&&e.datum==null?"removed":"updated"}var AU={};il(AU,{resetMotion:()=>cs});function cs(e,t){const{nodes:i,selections:n}=xM(e);for(const s of n){for(const o of s.nodes()){const r=t(o,o.datum);o.setProperties(r)}s.cleanup()}for(const s of i){const o=t(s,s.datum);s.setProperties(o)}}var ks=class Fd{constructor(t,i,n=!0){this.parentNode=t,this.autoCleanup=n,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=at.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(rc,i)?()=>new i:i}static select(t,i,n=!0){return new Fd(t,i,n)}static selectAll(t,i){const n=[],s=o=>{if(i(o)&&n.push(o),o instanceof ut)for(const r of o.children())s(r)};return s(t),n}static selectByClass(t,...i){return Fd.selectAll(t,n=>i.some(s=>n instanceof s))}static selectByTag(t,i){return Fd.selectAll(t,n=>n.tag===i)}createNode(t,i,n){const s=this.nodeFactory(t);return s.datum=t,i?.(s),n==null?this._nodes.push(s):this._nodes.splice(n,0,s),this.parentNode.appendChild(s),s}update(t,i,n){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",t),n){const s=new Map,o=new Map;for(let r=0;r<t.length;r++){const a=t[r];let l=n(a);if(s.has(l)){const c=(o.get(l)??0)+1;o.set(l,c),l=`${l}:${c}`}s.set(l,r)}for(const[r,a]of this._nodesMap.entries()){const l=s.get(a);l==null?this.garbageBin.add(r):(r.datum=t[l],this.garbageBin.delete(r),s.delete(a))}for(const[r,a]of s.entries()){const l=t[a];this._nodesMap.set(this.createNode(l,i,a),r)}}else{const s=Math.max(t.length,this.data.length);for(let o=0;o<s;o++)o>=t.length?this.garbageBin.add(this._nodes[o]):o>=this._nodes.length?this.createNode(t[o],i):(this._nodes[o].datum=t[o],this.garbageBin.delete(this._nodes[o]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(t=>this.garbageBin.has(t)?(this._nodesMap.delete(t),this.garbageBin.delete(t),t.destroy(),!1):!0),this)}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}each(t){for(const i of this._nodes.entries())t(i[1],i[1].datum,i[0]);return this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const i=this._nodes[t];yield{node:i,datum:i.datum,index:t}}}select(t){return Fd.selectAll(this.parentNode,t)}selectByClass(t){return Fd.selectByClass(this.parentNode,t)}selectByTag(t){return Fd.selectByTag(this.parentNode,t)}nodes(){return this._nodes}at(t){return this._nodes.at(t)}get length(){return this._nodes.length}},_o=class extends on{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.fill=void 0,this.strokeWidth=1}set x(e){this.x1=e,this.x2=e}set y(e){this.y1=e,this.y2=e}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new Le(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(e,t){return this.x1===this.x2||this.y1===this.y2?this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(e,t):!1}distanceSquared(e,t){const{x1:i,y1:n,x2:s,y2:o}=this;return jx(e,t,i,n,s,o,1/0)}render(e){const{ctx:t,devicePixelRatio:i}=e;let{x1:n,y1:s,x2:o,y2:r}=this;if(n===o){const{strokeWidth:a}=this,l=Math.round(n*i)/i+Math.trunc(a*i)%2/(i*2);n=l,o=l}else if(s===r){const{strokeWidth:a}=this,l=Math.round(s*i)/i+Math.trunc(a*i)%2/(i*2);s=l,r=l}t.beginPath(),t.moveTo(n,s),t.lineTo(o,r),this.fillStroke(t),this.fillShadow?.markClean(),super.render(e)}toSVG(){if(!this.visible)return;const e=tn("line");return e.setAttribute("x1",String(this.x1)),e.setAttribute("y1",String(this.y1)),e.setAttribute("x2",String(this.x2)),e.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(e),{elements:[e]}}};_o.className="Line";A([Me()],_o.prototype,"x1",2);A([Me()],_o.prototype,"y1",2);A([Me()],_o.prototype,"x2",2);A([Me()],_o.prototype,"y2",2);var jE="color: green",WE="color: grey";function $le(){return J4(()=>{})}function II(e,t){const i=Su(t);if(i.length===0)return;const n=eW(e);for(const s of i)s in n&&(t[s]=n[s])}var RU=class{transitionRoot(e,t){this.parent?this.parent.transitionRoot(e,t):this.transition(e,t)}},hL=class co extends RU{constructor(t,i,n){super(),this.defaultState=t,this.states=i,this.enterEach=n,this.debug=at.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,jE)}transition(t,i){if(!this.transitionChild(t,i)||this.state===co.child||this.state===co.parent)return;const s=this.state,o=this.states[this.state];let r=o[t];const a=`%c${this.constructor.name} | ${this.state} -> ${t} ->`;if(Array.isArray(r))r=r.find(d=>{if(!d.guard)return!0;const p=d.guard(i);return p||this.debug(`${a} (guarded)`,d.target,WE),p});else if(typeof r=="object"&&!(r instanceof co)&&r.guard&&!r.guard(i)){this.debug(`${a} (guarded)`,r.target,WE);return}if(!r){this.debug(`${a} ${this.state}`,WE);return}const l=this.getDestinationState(r),c=l===this.state?void 0:o.onExit;this.debug(`${a} ${l}`,jE),this.state=l,typeof r=="function"?r(i):typeof r=="object"&&!(r instanceof co)&&r.action?.(i),c?.(),this.enterEach?.(s,l),l!==s&&l!==co.child&&l!==co.parent&&this.states[l].onEnter?.(s,i)}transitionAsync(t,i){setTimeout(()=>{this.transition(t,i)},0)}is(t){return this.state===co.child&&this.childState?this.childState.is(t):this.state===t}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(t,i){return this.state!==co.child||!this.childState||(II(this,this.childState),this.childState.transition(t,i),!this.childState.is(co.parent))?!0:(this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.defaultState}`,jE),this.state=this.defaultState,this.states[this.state].onEnter?.(),this.childState.resetHierarchy(),!1)}getDestinationState(t){let i=this.state;return typeof t=="string"?i=t:t instanceof co?(this.childState=t,this.childState.parent=this,i=co.child):typeof t=="object"&&(t.target instanceof co?(this.childState=t.target,this.childState.parent=this,i=co.child):t.target!=null&&(i=t.target)),i}};hL.child="__child";hL.parent="__parent";var xb=hL,Yle=class extends RU{constructor(...e){super(),this.stateMachines=e;for(const t of e)t.parent=this}transition(e,t){for(const i of this.stateMachines)II(this,i),i.transition(e,t)}transitionAsync(e,t){for(const i of this.stateMachines)II(this,i),i.transitionAsync(e,t)}},Oh=class{constructor(){this.enabled=!0}};A([k],Oh.prototype,"enabled",2);A([k],Oh.prototype,"stroke",2);A([k],Oh.prototype,"strokeWidth",2);A([k],Oh.prototype,"strokeOpacity",2);var Yi=class extends Qe{constructor(){super(...arguments),this.enabled=!0,this.border=new Oh,this._cachedFormatter=void 0}formatValue(e,t,i,n){const{formatter:s,format:o}=this;let r;if(s!=null&&(r??(r=e(s,n))),o!=null){let a=this._cachedFormatter;(a==null||a.type!==t||a.format!==o)&&(a={type:t,format:o,formatter:hf.getFormatter(t,o)},this._cachedFormatter=a),r??(r=a.formatter?.(i))}return r==null||ht(r)?r:String(r)}};A([k],Yi.prototype,"enabled",2);A([k],Yi.prototype,"border",2);A([k],Yi.prototype,"color",2);A([k],Yi.prototype,"cornerRadius",2);A([k],Yi.prototype,"fill",2);A([k],Yi.prototype,"fillOpacity",2);A([k],Yi.prototype,"fontStyle",2);A([k],Yi.prototype,"fontWeight",2);A([k],Yi.prototype,"fontSize",2);A([k],Yi.prototype,"fontFamily",2);A([k],Yi.prototype,"formatter",2);A([k],Yi.prototype,"format",2);A([k],Yi.prototype,"padding",2);A([k],Yi.prototype,"itemStyler",2);function gf(e){const{enabled:t=!1,stroke:i}=e?.border??{},s=e?.fill!=null||t&&i!=null?e?.padding:null;if(s==null)return{bottom:0,left:0,right:0,top:0};if(typeof s=="number")return{bottom:s,left:s,right:s,top:s};{const{bottom:o=0,left:r=0,right:a=0,top:l=0}=s;return{bottom:o,left:r,right:a,top:l}}}var pL=class{constructor(){this.moduleMap=new Map}*modules(){for(const e of this.moduleMap.values())yield e.moduleInstance}addModule(e,t){if(this.moduleMap.has(e.optionsKey))throw new Error(`AG Charts - module already initialised: ${e.optionsKey}`);this.moduleMap.set(e.optionsKey,{module:e,moduleInstance:t(e)})}removeModule(e){const t=fn(e)?e:e.optionsKey;this.moduleMap.get(t)?.moduleInstance.destroy(),this.moduleMap.delete(t)}getModule(e){return this.moduleMap.get(fn(e)?e:e.optionsKey)?.moduleInstance}isEnabled(e){return this.moduleMap.has(fn(e)?e:e.optionsKey)}mapModules(e){return Array.from(this.moduleMap.values(),(t,i)=>e(t.moduleInstance,i))}destroy(){for(const e of this.moduleMap.keys())this.moduleMap.get(e)?.moduleInstance.destroy();this.moduleMap.clear()}},sl=class extends on{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.horizontal=!1,this.strokeWidth=1}computeBBox(){return new Le(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){const{ctx:t}=e;let{x1:i,y1:n,x2:s,y2:o}=this;i=this.align(i),n=this.align(n),s=this.align(s),o=this.align(o);const{fill:r,horizontal:a}=this,{globalAlpha:l}=t;r!=null&&(this.applyFillAndAlpha(t),t.beginPath(),t.moveTo(i,n),t.lineTo(s,n),t.lineTo(s,o),t.lineTo(i,o),t.closePath(),t.fill(),t.globalAlpha=l);const{stroke:c,strokeWidth:d,startLine:p,endLine:g}=this;if(!!((p||g)&&c&&d)){const{lineDash:y,lineDashOffset:b,lineCap:C,lineJoin:w}=this;this.applyStrokeAndAlpha(t),t.lineWidth=d,y&&t.setLineDash([...y]),b&&(t.lineDashOffset=b),C&&(t.lineCap=C),w&&(t.lineJoin=w),t.beginPath(),p&&(t.moveTo(i,n),a?t.lineTo(i,o):t.lineTo(s,n)),g&&(t.moveTo(s,o),a?t.lineTo(s,n):t.lineTo(i,o)),t.stroke(),t.globalAlpha=l}this.fillShadow?.markClean(),super.render(e)}};sl.className="Range";A([Me()],sl.prototype,"x1",2);A([Me()],sl.prototype,"y1",2);A([Me()],sl.prototype,"x2",2);A([Me()],sl.prototype,"y2",2);A([Me()],sl.prototype,"startLine",2);A([Me()],sl.prototype,"endLine",2);A([Me()],sl.prototype,"horizontal",2);function Kle(e){return e!=null&&Object.hasOwn(e,"toString")&&fn(e.toString())}function qle(e){return e!=null&&Object.hasOwn(e,"valueOf")&&Kt(e.valueOf())}function EM(e){return Kt(e)||S1(e)||qle(e)}function Zle(e,t){return e!=null&&(!t||EM(e))}function kI(e){return Kle(e)&&Object.hasOwn(e,"id")?e.id:e}function EU(e){switch(e.type){case"line":return e.value;case"range":return e.range}}function TU(e,t){const i=EU(e);if(i==null)return!1;const n=Ut.is(t)||oa.is(t),s=o=>Zle(o,n)&&!Number.isNaN(t.convert(o,{clamp:!0}));if(e.type==="range"){const[o,r]=i;return s(o)&&s(r)}else return s(i)}var Xle={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:-1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},Qle={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:-1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},Jle={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},ece={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},Ir=class extends Qe{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};A([k],Ir.prototype,"enabled",2);A([k],Ir.prototype,"text",2);A([k],Ir.prototype,"fontStyle",2);A([k],Ir.prototype,"fontWeight",2);A([k],Ir.prototype,"fontSize",2);A([k],Ir.prototype,"fontFamily",2);A([k],Ir.prototype,"padding",2);A([k],Ir.prototype,"color",2);A([k],Ir.prototype,"position",2);A([k],Ir.prototype,"rotation",2);A([k],Ir.prototype,"parallel",2);var Os=class extends Qe{constructor(){super(),this.id=na(this),this.defaultColorRange=[],this.fill="#c16068",this.label=new Ir,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.position="top",this.rangeGroup=new ut({name:this.id}),this.lineGroup=new ut({name:this.id}),this.labelGroup=new ut({name:this.id}),this.crossLineRange=new sl,this.crossLineLabel=new lf,this.data=void 0,this.startLine=!1,this.endLine=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}get defaultLabelPosition(){return"top"}update(e){const{enabled:t,type:i,data:n,scale:s}=this;if(!s||!t||!e||!TU(this,s)||n==null){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateNodes();const o=i==="range";o!==this._isRange&&(o?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=o}calculateLayout(e){if(this.data=void 0,!e)return;const{type:t,range:i,value:n,scale:s,clippedRange:o,strokeWidth:r=0}=this;if(!s)return;const a=s.bandwidth??0,l=s.step??0,c=s instanceof mc?(l-a)/2:0;let[d,p]=Gn(o);d-=a,p+=a;let g,m,y,b;if(t==="line"){const C=a/2;if(g=s.convert(n)+C,m=Number.NaN,y=s.convert(n,{clamp:!0})+C,b=Number.NaN,y>=p||y<=d)return}else if(i){const[C,w]=i,[x,M]=gU(C,w);if(g=s.convert(C,{alignment:x}),m=s.convert(w,{alignment:M}),y=s.convert(C,{clamp:!0,alignment:x}),b=s.convert(w,{clamp:!0,alignment:M}),y>b&&([y,b]=[b,y],[g,m]=[m,g]),y>=p||b<=d)return;Number.isFinite(g)&&(y-=c),Number.isFinite(m)&&(m+=a,b+=a+c)}else return;y=pf(y,o),b=pf(b,o),g-c>=y&&(g-=c),m+c<=b&&(m+=c),this.startLine=r>0&&g>=y&&g<=y+c,this.endLine=r>0&&m>=b-a-c&&m<=b,this.data=[y,b],this.label.enabled===!1||this.label.text}updateNodes(){const{position:e,data:[t,i]=[0,0],gridLength:n}=this,s=Number.isFinite(i)?i-t:0;let o;switch(e){case"top":case"bottom":o=new Le(t,e==="top"?0:-n,s,n);break;case"left":case"right":o=new Le(e==="left"?0:-n,t,n,s)}this.updateRangeNode(o);const{label:r}=this;r.enabled!==!1&&r.text&&(this.updateLabel(),this.positionLabel(o))}updateRangeNode(e){const{type:t,position:i,crossLineRange:n,startLine:s,endLine:o,fill:r,fillOpacity:a,stroke:l,strokeWidth:c,strokeOpacity:d,lineDash:p}=this;n.x1=e.x,n.x2=e.x+e.width,n.y1=e.y,n.y2=e.y+e.height,n.horizontal=i==="top"||i==="bottom",n.startLine=s,n.endLine=o,n.fill=t==="range"?r:void 0,n.fillOpacity=a??1,n.stroke=l,n.strokeWidth=c??1,n.strokeOpacity=d??1,n.lineDash=p}updateLabel(){const{crossLineLabel:e,label:t}=this;t.text&&(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}get anchor(){const e=this.position==="left"||this.position==="right",t=this.type==="range",{position:i=this.defaultLabelPosition}=this.label;return t?(e?Jle:ece)[i]:(e?Xle:Qle)[i]}positionLabel(e){const{crossLineLabel:t,label:i,anchor:n}=this;t.rotation=ds(i.rotation??0),t.textBaseline="middle",t.textAlign="center";const s=t.getBBox();if(!s)return;const{width:o,height:r}=s,a=i.padding+o/2,l=i.padding+r/2,c=e.x+e.width*(n.rangeH+1)/2-a*n.labelH,d=e.y+e.height*(n.rangeV+1)/2-l*n.labelV;t.x=c,t.y=d,t.rotationCenterX=c,t.rotationCenterY=d}computeLabelSize(){const{label:e}=this;if(e.enabled===!1||!e.text)return;const t=new lf;t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=e.text,t.rotation=ds(e.rotation??0),t.textBaseline="middle",t.textAlign="center";const i=t.getBBox();if(!i)return;const{width:n,height:s}=i;return{width:n,height:s}}calculatePadding(e){const{label:t,anchor:i}=this,n=this.computeLabelSize();if(!n)return;const{width:s,height:o}=n,r=t.padding+s,a=t.padding+o,l=this.position==="left"||this.position==="right";l&&(i.rangeH===-1&&i.labelH===1?e.left=Math.max(e.left??0,r):i.rangeH===1&&i.labelH===-1&&(e.right=Math.max(e.right??0,r))),l||(i.rangeV===-1&&i.labelV===1?e.top=Math.max(e.top??0,a):i.rangeV===1&&i.labelV===-1&&(e.bottom=Math.max(e.bottom??0,a)))}};Os.className="CrossLine";A([k],Os.prototype,"enabled",2);A([k],Os.prototype,"type",2);A([k],Os.prototype,"range",2);A([k],Os.prototype,"value",2);A([k],Os.prototype,"defaultColorRange",2);A([k],Os.prototype,"fill",2);A([k],Os.prototype,"fillOpacity",2);A([k],Os.prototype,"stroke",2);A([k],Os.prototype,"strokeWidth",2);A([k],Os.prototype,"strokeOpacity",2);A([k],Os.prototype,"lineDash",2);A([k],Os.prototype,"label",2);var TM=class{constructor(){this.enabled=!0,this.width=1,this.style=[{fill:void 0,fillOpacity:1,stroke:void 0,strokeWidth:void 0,lineDash:[]}]}};A([k],TM.prototype,"enabled",2);A([k],TM.prototype,"width",2);A([k],TM.prototype,"style",2);var Bh=class extends Qe{};A([k],Bh.prototype,"placement",2);A([k],Bh.prototype,"step",2);A([k],Bh.prototype,"values",2);A([k],Bh.prototype,"minSpacing",2);A([k],Bh.prototype,"maxSpacing",2);var Ci=class extends Qe{constructor(){super(...arguments),this.enabled=!0,this.border=new Oh,this.wrapping="never",this.truncate=!1,this.spacing=5,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this._formatters={"component:year":void 0,"component:month":void 0,"component:day":void 0,"component:none":void 0,"long:year":void 0,"long:month":void 0,"long:day":void 0,"long:none":void 0}}getSideFlag(){return this.mirrored?1:-1}formatValue(e,t,i,n){const{formatter:s,format:o}=this,{type:r,value:a,domain:l,boundSeries:c}=t,d=t.type==="number"?t.fractionDigits:void 0,p=t.type==="date"?t.unit:void 0;let g;if(s!=null){const m=t.type==="date"?t.step:void 0;g=e(s,{value:a,index:i,domain:l,fractionDigits:d,unit:p,step:m,boundSeries:c})}if(o!=null&&g==null){const{specifier:m,dateStyle:y="long",truncateDate:b}=n??{},C=`${y}:${b??"none"}`;let w=this._formatters[C];const x=hf.mergeSpecifiers(m,o);(w==null||w.type!==r||w.unit!==p||!qs(w.mergedFormat,x))&&(w={type:r,mergedFormat:x,unit:p,formatter:hf.getFormatter(r,x,p,y,{truncateDate:b})},this._formatters[C]=w),g=w.formatter?.(a,d)}return g==null||ht(g)?g:String(g)}};A([k],Ci.prototype,"enabled",2);A([k],Ci.prototype,"border",2);A([k],Ci.prototype,"cornerRadius",2);A([k],Ci.prototype,"fill",2);A([k],Ci.prototype,"fillOpacity",2);A([k],Ci.prototype,"fontStyle",2);A([k],Ci.prototype,"fontWeight",2);A([k],Ci.prototype,"fontSize",2);A([k],Ci.prototype,"fontFamily",2);A([k],Ci.prototype,"wrapping",2);A([k],Ci.prototype,"truncate",2);A([k],Ci.prototype,"spacing",2);A([k],Ci.prototype,"minSpacing",2);A([k],Ci.prototype,"color",2);A([k],Ci.prototype,"rotation",2);A([k],Ci.prototype,"avoidCollisions",2);A([k],Ci.prototype,"mirrored",2);A([k],Ci.prototype,"padding",2);A([k],Ci.prototype,"parallel",2);A([k],Ci.prototype,"itemStyler",2);A([k],Ci.prototype,"formatter",2);A([k],Ci.prototype,"format",2);var IM=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};A([k],IM.prototype,"enabled",2);A([k],IM.prototype,"width",2);A([k],IM.prototype,"stroke",2);var Gh=class extends Qe{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};A([k],Gh.prototype,"enabled",2);A([k],Gh.prototype,"width",2);A([k],Gh.prototype,"size",2);A([k],Gh.prototype,"stroke",2);var ra=class extends Qe{constructor(){super(...arguments),this.caption=new Ii,this.enabled=!1,this.spacing=Ii.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};A([k],ra.prototype,"enabled",2);A([k],ra.prototype,"text",2);A([k],ra.prototype,"spacing",2);A([k],ra.prototype,"fontStyle",2);A([k],ra.prototype,"fontWeight",2);A([k],ra.prototype,"fontSize",2);A([k],ra.prototype,"fontFamily",2);A([k],ra.prototype,"color",2);A([k],ra.prototype,"wrapping",2);A([k],ra.prototype,"formatter",2);var IU=(e=>(e[e.TickAndDomain=0]="TickAndDomain",e[e.TicksOnly=1]="TicksOnly",e[e.Off=2]="Off",e))(IU||{});function kU(e){const[t,i]=Gn(e.range),n=Math.floor(t),s=Math.ceil(i);return{min:n,max:s,visible:n!==s}}var LI=Math.PI*2,tce=LI/2;function ice(e,t){return Math.abs(t-e)<tce?t:e>t?t+LI:t-LI}function LU(e){const{min:t,max:i}=e,n=l=>l<t||l>i;return{tick:{fromFn(l,c,d){let{x1:p,x2:g,y1:m,y2:y}=l,b=l.opacity;return(d==="added"||n(c.offset))&&({x1:p,x2:g,y1:m,y2:y}=c,b=0),{x1:p,x2:g,y1:m,y2:y,opacity:b,phase:jr[d]}},toFn(l,c,d){const{x1:p,x2:g,y1:m,y2:y}=c;let b=1;return d==="removed"&&(b=0),{x1:p,x2:g,y1:m,y2:y,opacity:b}},applyFn(l,c){l.setProperties(c),l.visible=!n(l.y)}},line:{fromFn(l,c){const{x1:d,x2:p,y1:g,y2:m}=l.previousDatum??c;return{x1:d,x2:p,y1:g,y2:m,phase:jr.updated}},toFn(l,c){const{x1:d,x2:p,y1:g,y2:m}=c;return{x1:d,x2:p,y1:g,y2:m}}},label:{fromFn(l,c,d){const p=l.previousDatum??c;let{x:g,y:m,rotationCenterX:y,rotationCenterY:b,rotation:C}=p,w=l.opacity;return d==="removed"||n(p.y)?C=c.rotation:(d==="added"||n(l.datum.y))&&({x:g,y:m,rotationCenterX:y,rotationCenterY:b,rotation:C}=c,w=0),{x:g,y:m,rotationCenterX:y,rotationCenterY:b,rotation:C,opacity:w,phase:jr[d]}},toFn(l,c,d){const{x:p,y:g,rotationCenterX:m,rotationCenterY:y}=c;let b=0,C=1;return d==="added"?b=c.rotation:d==="removed"?(C=0,b=c.rotation):b=ice(l.previousDatum?.rotation??c.rotation,c.rotation),{x:p,y:g,rotationCenterX:m,rotationCenterY:y,rotation:b,opacity:C,finish:{rotation:c.rotation}}}},group:{fromFn(l,c){const{translationX:d,translationY:p}=l;return{translationX:d,translationY:p,phase:jr.updated}},toFn(l,c){const{translationX:d,translationY:p}=c;return{translationX:d,translationY:p}}}}}function PU(){return(e,t)=>({translationX:t.translationX,translationY:t.translationY})}function qx(){return(e,t)=>({x:t.x,y:t.y,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,rotation:t.rotation})}function PI(){return(e,t)=>{const{x1:i,x2:n,y1:s,y2:o}=t;return{x1:i,x2:n,y1:s,y2:o}}}function NU(){return(e,t)=>{const{x1:i,x2:n,y1:s,y2:o}=t;return{x:i,y:s,width:n-i,height:o-s}}}var FU=(e=>(e[e.TickLines=0]="TickLines",e[e.AxisLine=1]="AxisLine",e[e.TickLabels=2]="TickLabels",e))(FU||{});function __(e,t){return e.domain===t.domain&&e.rangeExtent===t.rangeExtent&&e.nice===t.nice&&e.gridLength===t.gridLength&&e.visibleRange[0]===t.visibleRange[0]&&e.visibleRange[1]===t.visibleRange[1]&&e.initialPrimaryTickCount?.unzoomed===t.initialPrimaryTickCount?.unzoomed&&e.initialPrimaryTickCount?.zoomed===t.initialPrimaryTickCount?.zoomed}var vc=class OU{constructor(t,i){this.moduleCtx=t,this.scale=i,this.id=na(this),this._crossLines=[],this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new Bh,this.dataDomain={domain:[],clipped:!1},this.title=new ra,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new ut({name:`${this.id}-axis`}),this.tickLineGroup=this.axisGroup.appendChild(new lg({name:`${this.id}-Axis-tick-lines`,zIndex:0})),this.tickLabelGroup=this.axisGroup.appendChild(new lg({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.labelGroup=new ut({name:`${this.id}-Labels`,zIndex:11}),this.gridGroup=new hs({name:`${this.id}-Axis-grid`,zIndex:2}),this.gridFillGroup=this.gridGroup.appendChild(new ut({name:`${this.id}-gridFills`})),this.gridLineGroup=this.gridGroup.appendChild(new ut({name:`${this.id}-gridLines`})),this.crossLineRangeGroup=new lg({name:`${this.id}-CrossLines-Range`,zIndex:6}),this.crossLineLineGroup=new lg({name:`${this.id}-CrossLines-Line`,zIndex:10}),this.crossLineLabelGroup=new lg({name:`${this.id}-CrossLines-Label`,zIndex:15}),this.tickLabelGroupSelection=ks.select(this.tickLabelGroup,lf,!1),this.line=new IM,this.tick=new Gh,this.gridLine=new TM,this.label=this.createLabel(),this.defaultTickMinSpacing=OU.defaultTickMinSpacing,this.translation={x:0,y:0},this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.axisContext=void 0,this.cleanup=new Ui,this.isHovering=!1,this.range=[0,1],this.visibleRange=[0,1],this.animatable=!0,this.tickLayout=void 0,this.formatterBoundSeries=new yoe(()=>{const{direction:n,boundSeries:s}=this;return Vl(s.flatMap(o=>o.getFormatterContext(n)))}),this.moduleMap=new pL,this.range=this.scale.range.slice();for(const n of this.crossLines)this.initCrossLine(n);this.cleanup.register(this.moduleCtx.widgets.containerWidget.addListener("mousemove",n=>this.onMouseMove(n)),this.moduleCtx.widgets.containerWidget.addListener("mouseleave",()=>this.endHovering()))}set crossLines(t){const{CrossLineConstructor:i}=this.constructor;for(const n of this._crossLines)this.detachCrossLine(n);this._crossLines=t.map(n=>{const s=new i;return s.set(n),s});for(const n of this._crossLines)this.attachCrossLine(n),this.initCrossLine(n)}get crossLines(){return this._crossLines}get type(){return this.constructor.type??""}get primaryLabel(){}get primaryTick(){}isCategoryLike(){return!1}resetAnimation(t){}onMouseMove(t){const n=this.tickLabelGroup.pickNode(t.currentX,t.currentY)?.datum,{textUntruncated:s=void 0}=n??{};s?(this.moduleCtx.tooltipManager.updateTooltip(this.id,{canvasX:t.currentX,canvasY:t.currentY,showArrow:!1},[{type:"structured",title:s}]),this.isHovering=!0):this.endHovering()}endHovering(){this.isHovering&&(this.moduleCtx.tooltipManager.removeTooltip(this.id),this.isHovering=!1)}attachCrossLine(t){this.crossLineRangeGroup.appendChild(t.rangeGroup),this.crossLineLineGroup.appendChild(t.lineGroup),this.crossLineLabelGroup.appendChild(t.labelGroup)}detachCrossLine(t){t.rangeGroup.remove(),t.lineGroup.remove(),t.labelGroup.remove()}destroy(){this.moduleMap.destroy(),this.cleanup.flush()}setScaleRange(t){const{range:i,scale:n}=this,s=(i[1]-i[0])/(t[1]-t[0]),o=s*t[0],r=i[0]-o;n.range=[r,r+s]}updateScale(){const{range:[t,i]}=this;this.setScaleRange(this.visibleRange);for(const n of this.crossLines)n.clippedRange=[t,i]}setCrossLinesVisible(t){this.crossLineRangeGroup.visible=t,this.crossLineLineGroup.visible=t,this.crossLineLabelGroup.visible=t}attachAxis(t){t.gridNode.appendChild(this.gridGroup),t.axisNode.appendChild(this.axisGroup),t.labelNode.appendChild(this.labelGroup),t.crossLineRangeNode.appendChild(this.crossLineRangeGroup),t.crossLineLineNode.appendChild(this.crossLineLineGroup),t.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(){this.gridGroup.remove(),this.axisGroup.remove(),this.labelGroup.remove(),this.crossLineRangeGroup.remove(),this.crossLineLineGroup.remove(),this.crossLineLabelGroup.remove()}attachLabel(t){this.labelGroup.append(t)}inRange(t,i=0){const[n,s]=Gn(this.range);return t>=n-i&&t<=s+i}getRangeOverflow(t){const{range:i,visibleRange:n}=this,s=(i[1]-i[0])/(n[1]-n[0]),[o,r]=Gn([i[0]-s*n[0],i[0]-s*n[0]+s]);return t<o?t-o:t>r?t-r:0}onGridLengthChange(t,i){i^t&&this.onGridVisibilityChange();for(const n of this.crossLines)this.initCrossLine(n)}onGridVisibilityChange(){}createLabel(){return new Ci}update(){this.formatterBoundSeries.clear(),this.updatePosition(),this.updateSelections(),this.gridLineGroup.visible=this.gridLine.enabled,this.updateLabels(),this.updateCrossLines()}getLabelStyles(t,i,n=this.label){const s={border:n.border,color:n.color,cornerRadius:n.cornerRadius,fill:n.fill,fillOpacity:n.fillOpacity,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontWeight:n.fontWeight,padding:n.padding,spacing:n.spacing};let o;n.itemStyler&&(o=this.cachedCallWithContext(n.itemStyler,{...t,...s}));const r=_t(o,i,s);return{border:r.border,color:r.color,cornerRadius:r.cornerRadius,fill:r.fill,fillOpacity:r.fillOpacity,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,fontWeight:r.fontWeight,padding:r.padding,spacing:r.spacing}}getTickSize(t=this.tick){return t.enabled?t.size:0}processData(){this.invalidateLayoutCache();const{includeInvisibleDomains:t,boundSeries:i,direction:n}=this,o=(t?i:i.filter(r=>r.isEnabled())).map(r=>r.getDomain(n));this.setDomains(...o)}setDomains(...t){let i,n;t.length>0?{domain:i,animatable:n}=this.scale.normalizeDomains(...t):(i=[],n=!0),this.dataDomain=this.normaliseDataDomain(i),this.reverse&&this.dataDomain.domain.reverse(),this.animatable=n}calculateDomain(t){const{dataDomain:{domain:i},range:n,nice:s,scale:o,gridLength:r}=this,a=wh(n),l=[0,1];this.updateScale();const{unzoomedTickLayoutCache:c}=this;let d;if(c==null||!__(c,{domain:i,rangeExtent:a,nice:s,gridLength:r,visibleRange:l,initialPrimaryTickCount:t})){const p=o.range;this.setScaleRange([0,1]);const g=s?0:2;d=this.calculateTickLayout(i,g,[0,1],t),o.range=p,this.unzoomedTickLayoutCache={domain:i,rangeExtent:a,nice:s,gridLength:r,visibleRange:l,initialPrimaryTickCount:t,tickLayout:d}}else d=c.tickLayout;return this.updateScale(),o.domain=d.niceDomain,{unzoomedTickLayout:d,domain:o.domain}}calculateLayout(t,i){this.chartLayout=i;const{visibleRange:n,nice:s}=this,o=n[0]===0&&n[1]===1,{unzoomedTickLayout:r,domain:a}=this.calculateDomain(t);let l;if(o)l=r;else{const{range:y,gridLength:b}=this,C=wh(y),w=s?1:2,{tickLayoutCache:x}=this;x==null||!__(x,{domain:a,rangeExtent:C,nice:s,gridLength:b,visibleRange:n,initialPrimaryTickCount:t})?(l=this.calculateTickLayout(a,w,n,t),this.tickLayoutCache={domain:a,rangeExtent:C,nice:s,gridLength:b,visibleRange:n,initialPrimaryTickCount:t,tickLayout:l}):l=x.tickLayout}const{rawTickCount:c=0,fractionDigits:d,bbox:p}=l,g=r.rawTickCount??0,m=c!==0&&g!==0?{zoomed:c,unzoomed:g}:void 0;return this.tickLayout=l.layout,this.layout.label={fractionDigits:d,spacing:this.label.spacing,format:this.label.format},this.layoutCrossLines(),{primaryTickCount:m,bbox:p}}invalidateLayoutCache(){this.unzoomedTickLayoutCache=void 0,this.tickLayoutCache=void 0,this.tickLayout=void 0}updateCrossLines(){const t=this.hasDefinedDomain()||this.hasVisibleSeries();for(const i of this.crossLines)i.update(t)}updatePosition(){const{crossLineRangeGroup:t,crossLineLineGroup:i,crossLineLabelGroup:n,gridGroup:s,translation:o}=this,r=Math.floor(o.x),a=Math.floor(o.y);s.setProperties({translationX:r,translationY:a}),t.setProperties({translationX:r,translationY:a}),i.setProperties({translationX:r,translationY:a}),n.setProperties({translationX:r,translationY:a})}tickFormatter(t,i,n,s,o,r="long"){const{moduleCtx:a,label:l}=this,{formatManager:c}=a,d=n?this.primaryLabel:void 0,p=this.tickFormatParams(t,i,s,o),g=this.formatterBoundSeries.get();let m,y,b;if(p.type==="number")m=p.fractionDigits;else if(p.type==="date"){const{unit:I,step:N,epoch:T}=p;y={unit:I,step:N,epoch:T},b=p.truncateDate}const C=this.uncachedCallWithContext.bind(this),w={datum:void 0,seriesId:void 0,legendItemName:void 0,key:void 0,source:"axis-label",property:this.direction,domain:t,boundSeries:g},x=d??l,M=n?l.format:void 0,E={specifier:hf.mergeSpecifiers(d?.format,l.format),truncateDate:b};return(I,N)=>{const T=this.datumFormatParams(I,w,m,y,r);return T.value=I,x.formatValue(C,T,N,{specifier:M,dateStyle:r,truncateDate:b})??c.format(C,T,E)??c.defaultFormat(T,E)}}formatDatum(t,i,n,s,o,r,a,l,c,d){if(i==null)return"";const{moduleCtx:p,direction:g,dataDomain:m}=this;l??(l=m.domain);const{formatManager:y}=p,b=this.formatterBoundSeries.get();let C;switch(n){case"crosshair":case"annotation-label":C=this.layout.label.fractionDigits+1;break;case"series-label":C=2;break;case"tooltip":C=3;break;case"legend-label":C=void 0;break}const w=this.datumFormatParams(i,{source:n,datum:r,seriesId:s,legendItemName:o,key:a,property:g,domain:l,boundSeries:b},C,void 0,"long"),{type:x,value:M}=w,E=this.createCallWithContext(t),I=c?.formatValue(E,x,M,d??w)??y.format(E,w)??this.label.formatValue(E,w,Number.NaN)??y.defaultFormat(w);return ht(I)?I:String(I)}getBBox(){return this.axisGroup.getBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}hasVisibleSeries(){return this.boundSeries.some(t=>t.isEnabled())}clipTickLines(t,i,n,s){this.tickLineGroup.setClipRect(new Le(t,i,n,s))}clipGrid(t,i,n,s){this.gridGroup.setClipRect(new Le(t,i,n,s))}getTitleFormatterParams(t){const{direction:i}=this,n=this.formatterBoundSeries.get();return{domain:t,direction:i,boundSeries:n,defaultValue:this.title?.text}}normaliseDataDomain(t){return{domain:[...t],clipped:!1}}getLayoutState(){return{id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale,...this.layout}}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),{...this.moduleCtx,parent:this.axisContext}}createAxisContext(){const{scale:t}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:Ut.is(t)||oa.is(t),getCanvasBounds:()=>Hi.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce((i,n)=>{const s=n.getKeyProperties(this.direction);for(const o of s)i.add(o);return i},new Set),seriesIds:()=>this.boundSeries.map(i=>i.id),scaleInvert:i=>t.invert(i,!0),scaleInvertNearest:i=>t.invert(i,!0),formatScaleValue:(i,n,s)=>this.formatDatum(void 0,i,n,void 0,void 0,void 0,void 0,void 0,s),attachLabel:i=>this.attachLabel(i),inRange:(i,n)=>this.inRange(i,n),getRangeOverflow:i=>this.getRangeOverflow(i),pickBand:i=>this.pickBand(i)}}pickBand(t){if(!mc.is(this.scale))return;const{scale:i,range:n}=this,s=i.invert(this.isVertical()?t.y:t.x,!0),o=i.bandwidth??0,a=((i.step??0)-o)/2,l=i.convert(s),c=l-a,d=l+o+a;return{id:this.id,value:s,band:[pf(c,n),pf(d,n)],position:l}}isVertical(){return this.direction==="y"}isReversed(){return this.reverse}cachedCallWithContext(t,i){const{callbackCache:n,chartService:s}=this.moduleCtx;return n.call([this,s],t,i)}uncachedCallWithContext(t,i){const{chartService:n}=this.moduleCtx;return Zr([this,n],t,i)}createCallWithContext(t){const{chartService:i}=this.moduleCtx;return(n,s)=>Zr([t,this,i],n,s)}};vc.defaultTickMinSpacing=50;vc.CrossLineConstructor=Os;A([k],vc.prototype,"nice",2);A([k],vc.prototype,"reverse",2);A([k],vc.prototype,"keys",2);A([k],vc.prototype,"interval",2);A([k],vc.prototype,"title",2);A([Vu((e,t,i)=>e.onGridLengthChange(t,i))],vc.prototype,"gridLength",2);var gL=vc,fL=class extends Ci{constructor(){super(...arguments),this.autoRotateAngle=335}};A([k],fL.prototype,"autoRotate",2);A([k],fL.prototype,"autoRotateAngle",2);var Pg=1e3,fu=Pg*60,sh=fu*60,Sh=sh*24,BU=Sh*7,mL=Sh*30,wv=Sh*365,Xp=new Date().getTimezoneOffset()*fu,Mb={millisecond:{milliseconds:1,hierarchy:"day",encode(e){return e.getTime()},decode(e){return new Date(e)}},second:{milliseconds:Pg,hierarchy:"day",encode(e,t){const i=t?0:Xp;return Math.floor((e.getTime()-i)/Pg)},decode(e,t){const i=t?0:Xp;return new Date(i+e*Pg)}},minute:{milliseconds:fu,hierarchy:"day",encode(e,t){const i=t?0:Xp;return Math.floor((e.getTime()-i)/fu)},decode(e,t){const i=t?0:Xp;return new Date(i+e*fu)}},hour:{milliseconds:sh,hierarchy:"day",encode(e,t){const i=t?0:Xp;return Math.floor((e.getTime()-i)/sh)},decode(e,t){const i=t?0:Xp;return new Date(i+e*sh)}},day:{milliseconds:Sh,hierarchy:"month",encode(e,t){const i=t?0:e.getTimezoneOffset()*fu;return Math.floor((e.getTime()-i)/Sh)},decode(e,t){let i;return t?(i=new Date(0),i.setUTCDate(i.getUTCDate()+e),i.setUTCHours(0,0,0,0)):(i=new Date(1970,0,1),i.setDate(i.getDate()+e)),i}},month:{milliseconds:mL,hierarchy:"year",encode(e,t){return t?e.getUTCFullYear()*12+e.getUTCMonth():e.getFullYear()*12+e.getMonth()},decode(e,t){if(t){const i=Math.floor(e/12),n=e-i*12;return new Date(Date.UTC(i,n,1))}else{const i=Math.floor(e/12),n=e-i*12;return new Date(i,n,1)}}},year:{milliseconds:wv,hierarchy:void 0,encode(e,t){return t?e.getUTCFullYear():e.getFullYear()},decode(e,t){let i;return t?(i=new Date,i.setUTCFullYear(e),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)):i=new Date(e,0,1,0,0,0,0),i}}};function Db(e){return typeof e=="string"?{unit:e,step:1,epoch:void 0,utc:!1}:{unit:e.unit,step:e.step??1,epoch:e.epoch,utc:e.utc??!1}}function Ab(e,t,i,n){if(i==null)return 0;const s=Mb[e];return Math.floor(s.encode(new Date(i),n))%t}function ff(e,t,i,n,s){const o=Mb[t];return Math.floor((o.encode(new Date(e),n)-s)/i)}function Rb(e,t,i,n,s){return Mb[t].decode(e*i+s,n)}function Zx(e,t,i,n,s){const o=new Date(e),r=ff(o,t,i,n,s);return Rb(r,t,i,n,s)}function Xx(e,t,i,n,s){const o=new Date(Number(e)-1),r=ff(o,t,i,n,s);return Rb(r+1,t,i,n,s)}function vr(e,t){const{unit:i,step:n,epoch:s,utc:o}=Db(e),r=Ab(i,n,s,o);return Zx(t,i,n,o,r)}function GU(e,t){const{unit:i,step:n,epoch:s,utc:o}=Db(e),r=Ab(i,n,s,o);return Xx(t,i,n,o,r)}function _U(e,t){const{unit:i,step:n,epoch:s,utc:o}=Db(e),r=Ab(i,n,s,o);return Rb(ff(Xx(t,i,n,o,r),i,n,o,r)-1,i,n,o,r)}function yL(e,t){const{unit:i,step:n,epoch:s,utc:o}=Db(e),r=Ab(i,n,s,o);return Rb(ff(Zx(t,i,n,o,r),i,n,o,r)+1,i,n,o,r)}function vL(e,t,i){if(e.valueOf()>t.valueOf()&&([e,t]=[t,e],i!=null&&(i=[1-i[1],1-i[0]])),i!=null){const n=t.valueOf()-e.valueOf(),s=e.valueOf();e=new Date(s+i[0]*n),t=new Date(s+i[1]*n)}return[new Date(e),new Date(t)]}function Qx(e,t,i,{extend:n=!1,visibleRange:s=[0,1],limit:o,defaultAlignment:r="start"}={}){const a=Db(e),{unit:l,step:c,utc:d}=a;let p;a.epoch!=null?p=a.epoch:r==="interval"?p=void 0:t.valueOf()>i.valueOf()?p=i:p=t;const g=Ab(a.unit,a.step,p,a.utc);let[m,y]=vL(t,i,s);m=n?Zx(m,l,c,d,g):Xx(m,l,c,d,g),y=n?Xx(y,l,c,d,g):Zx(y,l,c,d,g);const b=ff(m,l,c,d,g);let C=ff(y,l,c,d,g);return o!=null&&C-b>o&&(C=b+o),{range:[b,C],unit:l,step:c,utc:d,offset:g}}function bL(e,t,i,n){const{range:[s,o]}=Qx(e,t,i,n);return Math.abs(o-s)}function Rr(e,t,i,n){const{range:[s,o],unit:r,step:a,utc:l,offset:c}=Qx(e,t,i,n),d=[];for(let p=s;p<=o;p+=1){const g=Rb(p,r,a,l,c);d.push(g)}return d}function CL(e,t,i,{extend:n,visibleRange:s,limit:o,defaultAlignment:r}={}){const{range:[a]}=Qx(e,t,i,{extend:n,visibleRange:s,limit:o,defaultAlignment:r}),{range:[l]}=Qx(e,t,i,{extend:n,limit:o,defaultAlignment:r});return a-l}function cc(e){return typeof e=="string"?e:e.unit}function Tu(e){return typeof e=="string"?1:e.step??1}function Sv(e){return typeof e=="string"?void 0:e.epoch}function Eb(e){return Mb[cc(e)].hierarchy}function po(e){return Tu(e)*Mb[cc(e)].milliseconds}function us(e){return e instanceof Date?e.getTime():e}function Tb(e){return e<Pg?"millisecond":e<fu?"second":e<sh?"minute":e<sh*23?"hour":e<28*Sh?"day":e<wv?"month":"year"}function wL(e){if(e.length===0)return"millisecond";if(e.length===1)return kM(e[0]);let t=1/0;for(let i=1;i<e.length;i++)t=Math.min(t,Math.abs(e[i].valueOf()-e[i-1].valueOf()));return Tb(t)}function kM(e){return vr("second",e)<e?"millisecond":vr("minute",e)<e?"second":vr("hour",e)<e?"minute":vr("day",e)<e?"hour":vr("month",e)<e?"day":vr("year",e)<e?"month":"year"}function SL(e){const[t,i]=e.length===0?[0,0]:Gn([e[0].valueOf(),e.at(-1).valueOf()]),n=new Date(t).getFullYear(),s=new Date(i).getFullYear();if(n!==s)return;const o=new Date(t).getMonth(),r=new Date(i).getMonth();if(o!==r)return"year";const a=new Date(t).getDate(),l=new Date(i).getDate();return a!==l?"month":"day"}function VU(e,t,i){if(i==null||i[0]===0&&i[1]===1)return;const n=st(0,Math.floor(i[0]*e.length),e.length),s=st(0,Math.ceil(i[1]*e.length),e.length),o=t?e.length-s:n,r=t?e.length-n:s;return[o,r]}function nce(e,t,i){return VU(e,t,i)??[0,e.length]}function zU(e,t,i){const n=VU(e,t,i);if(n==null)return{ticks:e,count:e.length,firstTickIndex:0};const[s,o]=n;return{ticks:e.slice(s,o),count:e.length,firstTickIndex:s}}var _f=class HU extends mc{constructor(){super(...arguments),this.type="category",this.defaultTickCount=0,this.index=new Map,this.indexInitialized=!1,this._domain=[]}static is(t){return t instanceof HU}set domain(t){this._domain!==t&&(this.invalid=!0,this._domain=t,this.index.clear(),this.indexInitialized=!1)}get domain(){return this._domain}get bands(){return this._domain}normalizeDomains(...t){let i;const n=new Set;let s=!0;for(const o of t)n.has(o)||(n.add(o),i==null?i=V_(o):(s&&(s=sce(o,i)),i=V_([...i,...o])));return i??(i=[]),{domain:i,animatable:s}}toDomain(t){}invert(t,i=!1){this.refresh();const n=i?this.bandwidth/2:0,s=this.invertNearestIndex(Math.max(0,t-n));return i||t===this.ordinalRange(s)?this.domain[s]:void 0}ticks(t,i=this.domain,n){const{bands:s}=this;let{tickCount:o}=t;if(o===0){const b=s.length>1?1:0;return{ticks:s[b]?[s[b]]:[],count:void 0,firstTickIndex:b}}let r=o!=null&&o!==0?Math.trunc(s.length/o):1;if(r=MI(r),r<=1)return zU(i,!1,n);o=Math.trunc(s.length/r);const a=r*o,l=MI(Math.trunc((s.length-a)/2)),c=st(0,Math.floor((n?.[0]??0)*s.length),s.length),d=st(0,Math.ceil((n?.[1]??1)*s.length),s.length),p=Math.floor((c-l)/r)*r+l,g=Math.ceil((d-l)/r)*r+l,m=[];for(let b=p;b<g;b+=r)b>=0&&b<s.length&&m.push(s[b]);let y=m.length>0?this.findIndex(m[0]):void 0;return y!=null&&(y=Math.floor((y-l)/r)),{ticks:m,count:void 0,firstTickIndex:y}}findIndex(t){const{index:i,indexInitialized:n}=this;if(!n){const{domain:s}=this;for(let o=0;o<s.length;o++)i.set(us(s[o]),o);this.indexInitialized=!0}return i.get(us(t))}};function V_(e){let t;const i=new Set;for(const n of e){const s=us(n),o=i.size;i.add(s),i.size!==o?t?.push(n):t??(t=e.slice(0,i.size))}return t??e}function sce(e,t){let i=-1;for(const n of e){const s=t.indexOf(n);if(s===-1)i=1/0;else{if(s<=i)return!1;i=s}}return!0}function xL(e,t){return e.valueOf()-t.valueOf()}function oce(e){let t=Number.NaN;const i=[];for(const n of e){const s=n.valueOf();t!==s&&i.push(n),t=s}return i}function NI(e){const t=e.slice().sort(xL);return ML(t)==null?oce(t):t}function ML(e){if(e.length===0)return 1;const t=Number(e.at(-1))>Number(e[0])?1:-1;let i=-1/0*t;for(const n of e){const s=n.valueOf();if(Math.sign(s-i)!==t)return;i=s}return t}function FI(e,[t,i],[n,s]){const o=s-n,r=i-t,a=t+r*e[0],l=t+r*e[1];return[(a-n)/o,(l-n)/o]}var Li=(e,t)=>({duration:po(e)*t,timeInterval:e,step:t}),OI=[Li({unit:"second"},1),Li({unit:"second"},5),Li({unit:"second"},15),Li({unit:"second"},30),Li({unit:"minute"},1),Li({unit:"minute"},5),Li({unit:"minute"},15),Li({unit:"minute"},30),Li({unit:"hour"},1),Li({unit:"hour"},3),Li({unit:"hour"},6),Li({unit:"hour"},12),Li({unit:"day"},1),Li({unit:"day"},2),Li({unit:"day",step:7},1),Li({unit:"day",step:7},2),Li({unit:"day",step:7},3),Li({unit:"month"},1),Li({unit:"month"},2),Li({unit:"month"},3),Li({unit:"month"},4),Li({unit:"month"},6),Li({unit:"year"},1)],jU=[1,2,5,10];function z_(e,t){return Math.abs(Math.round(e)-e)<t}function WU(e,t,i){return Math.abs(t-e)>=i?Math.abs(t-e)/i+1:1}function Ib(e,t,i,n,s,o){if(e===t)return{ticks:[e],count:1,firstTickIndex:0};if(i<2)return{ticks:[e,t],count:2,firstTickIndex:0};const r=xv(e,t,i,n,s);if(!Number.isFinite(r))return{ticks:[],count:0,firstTickIndex:void 0};let a=e,l=t;z_(a/r,1e-12)||(a=Math.ceil(a/r)*r),z_(l/r,1e-12)||(l=Math.floor(l/r)*r),o!=null&&(o=FI(o,[e,t],[a,l]));const{ticks:c}=PM(a,l,r,o),d=c.at(0);return{ticks:c,count:WU(a,l,r),firstTickIndex:d==null?void 0:Math.round((d-a)/r)}}var rce=Math.floor(2*BU/mL*10)/10;function H_({timeInterval:e,step:t}){const i=po(e)*t,n=Eb(e),s=n?po(n):void 0;return i<=(s??1/0)*rce}function UU(e,{weekStart:t}){if(e.unit==="day"&&e.step===7)return t}function LM(e,t,i,n,s,{weekStart:o,primaryOnly:r=!1,targetInterval:a}){if(i<=0)return;const l=a??Math.abs(t-e)/Math.max(i,1),c=OI.findLast(m=>(!r||H_(m))&&l>m.duration),d=OI.find(m=>(!r||H_(m))&&l<=m.duration);if(c==null)return{unit:"millisecond",step:Math.max(xv(e,t,i,n,s),1)};if(d==null)return{unit:"year",step:a==null?xv(e/wv,t/wv,i,n,s):1};const{timeInterval:p,step:g}=l-c.duration<d.duration-l?c:d;return{unit:p.unit,step:Tu(p)*g,epoch:UU(p,{weekStart:o})}}function xv(e,t,i,n=0,s=1/0){if(e===t)return st(1,n,s);if(i<1)return Number.NaN;const o=Math.abs(t-e),r=10**Math.floor(Math.log10(o/i));let a=Number.NaN,l=1/0,c=!1;for(const d of jU){const p=Math.ceil(o/(d*r)),g=p>=n&&p<=s;if(c&&!g)continue;const m=Math.abs(p-i);(l>m||c!==g)&&(c||(c=g),l=m,a=d)}return a*r}function j_(e){for(let t=e.length-1;t>=0;t-=1)if(e[t]!=="0")return t+1;return 0}function ace(e,t){const i=x1(t??",f");if(i==null)return;(i.precision==null||Number.isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...e.map(s=>{if(!Number.isFinite(s))return 0;const[o,r]=s.toExponential((i.type?6:12)-1).split(/[.e]/g);return(o!=="1"&&o!=="-1"?1:0)+j_(r)+1})):"f%".includes(i.type)&&(i.precision=Math.max(...e.map(s=>{if(!Number.isFinite(s)||s===0)return 0;const o=Math.floor(Math.log10(Math.abs(s))),r=i.type?6:12,a=s.toExponential(r-1).split(/[.e]/g)[1],l=j_(a);return Math.max(0,l-o)}))));const n=R4(i);return s=>n(Number(s))}function PM(e,t,i,n){if(!Number.isFinite(i)||i<=0)return{ticks:[],count:0,firstTickIndex:void 0};if(e===t)return{ticks:[e],count:1,firstTickIndex:0};const s=10**w1(i),o=Math.min(e,t),r=Math.max(e,t);let a,l;if(n!=null&&(n[0]!==0||n[1]!==1)){const p=t-e,g=e+p*n[0],m=t-p*(1-n[1]);a=Math.min(g,m),l=Math.max(g,m)}else a=o,l=r;a=Math.floor(a*s)/s,l=Math.ceil(l*s)/s;const c=[];for(let p=0;;p+=1){const g=Math.round((o+i*p)*s)/s;if(g>r)break;g>=a&&g<=l&&c.push(g)}const d=c.at(0);return{ticks:c,count:WU(o,r,i),firstTickIndex:d==null?void 0:Math.round((d-o)/i)}}function mf(e,t){return e>=t?(fe.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}function $U(e,t){const i=Math.abs(t-e),n=10**Math.floor(Math.log10(i));let s=1/0,o=[e,t];for(const r of jU){const a=r*n,l=Math.floor(e/a)*a,c=Math.ceil(t/a)*a,d=1-i/Math.abs(c-l);s>d&&(s=d,o=[l,c])}return o}function YU(e,t,i,n,s,o){if(e<=0)return{minTickCount:0,maxTickCount:0,tickCount:0};o=Math.max(o,e/(s+1)),i??(i=o),n??(n=e),i>n&&(i===o?i=n:n=i),i=Math.max(i,1);const r=Math.max(1,Math.floor(e/(t*i))),a=Math.min(r,Math.ceil(e/(t*n))),l=st(a,Math.floor(s/t),r);return{minTickCount:a,maxTickCount:r,tickCount:l}}var NM=new Date(1970,0,4),yf=class KU extends Ut{constructor(){super([],[0,1]),this.type="time"}static is(t){return t instanceof KU}toDomain(t){return new Date(t)}convert(t,i){return super.convert(t?.valueOf()??Number.NaN,i)}invert(t){return new Date(super.invert(t))}niceDomain(t,i=this.domain){if(i.length<2)return[];let[n,s]=i;const o=4,r=this.getPixelRange();for(let a=0;a<o;a++){const[l,c]=cce(n,s,t,r);if(us(n)===us(l)&&us(s)===us(c))break;n=l,s=c}return[n,s]}ticks(t,i=this.domain,n=[0,1],{extend:s=!1}={}){const{nice:o,interval:r,tickCount:a=Ut.defaultTickCount,minTickCount:l,maxTickCount:c}=t;if(i.length<2)return;const d=i.map(us),p=d[0],g=d.at(-1);if(r!=null){const C=this.getPixelRange();return{ticks:DL({start:p,stop:g,interval:r,availableRange:C,visibleRange:n,extend:s})??lce({start:p,stop:g,tickCount:a,minTickCount:l,maxTickCount:c,visibleRange:n,extend:s}),count:void 0}}else{if(o&&a===2)return{ticks:i,count:void 0};if(o&&a===1)return{ticks:i.slice(0,1),count:void 0}}const m=LM(p,g,a,l,c,{weekStart:NM});if(m==null)return;const y=Rr(m,new Date(p),new Date(g),{visibleRange:n,extend:s}),b=CL(m,new Date(p),new Date(g),{visibleRange:n,extend:s});return{ticks:y,count:void 0,firstTickIndex:b,timeInterval:m}}};function lce({start:e,stop:t,tickCount:i,minTickCount:n,maxTickCount:s,visibleRange:o,extend:r}){const a=LM(e,t,i,n,s,{weekStart:NM});return a?Rr(a,new Date(e),new Date(t),{visibleRange:o,extend:r}):[]}function DL({start:e,stop:t,interval:i,availableRange:n,visibleRange:s,extend:o}){if(!i)return[];if(Qt(i)||typeof i=="string"){const p=Rr(i,new Date(e),new Date(t),{visibleRange:s,extend:o});return mf(p.length,n)?void 0:p}const r=Math.abs(i);if(mf(Math.abs(t-e)/r,n))return;const a=OI.findLast(p=>r%p.duration===0);if(a){const{timeInterval:p,step:g,duration:m}=a,y={...p,step:g*Tu(p)*Math.round(r/m),epoch:UU(p,{weekStart:NM})};return Rr(y,new Date(e),new Date(t),{visibleRange:s,extend:o})}let l=new Date(Math.min(e,t));const c=new Date(Math.max(e,t)),d=[];for(;l<=c;)d.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+r);return d}function cce(e,t,i,n){const{interval:s}=i,o=Math.min(us(e),us(t)),r=Math.max(us(e),us(t));let a;if(Qt(s)||typeof s=="string")a=s;else{let p;typeof s=="number"&&(p=(r-o)/Math.max(s,1),mf(p,n)&&(p=void 0)),p??(p=i.tickCount??Ut.defaultTickCount),a=LM(o,r,p,i.minTickCount,i.maxTickCount,{weekStart:NM})}if(a==null)return[e,t];const l=Rr(a,new Date(o),new Date(r),{extend:!0});if(l==null||l.length<2)return[e,t];const c=l[0],d=l.at(-1);return e<=t?[c,d]:[d,c]}var Ng=class qU extends oa{constructor(){super(...arguments),this.type="ordinal-time",this.defaultTickCount=Ut.defaultTickCount,this._domain=[],this.isReversed=!1}static is(t){return t instanceof qU}set domain(t){t!==this._domain&&(this.invalid=!0,this._domain=t,this._bands=void 0,this.isReversed=W_(t))}get domain(){return this._domain}get bands(){return this._bands??(this._bands=this.isReversed?this.domain.slice().reverse():this.domain),this._bands}normalizeDomains(...t){const i=t.filter(n=>n.length>0);if(i.length===0)return{domain:[],animatable:!1};if(i.length===1){let n=i[0];const s=ML(n);return s===-1?n=n.slice().reverse():s==null&&(n=NI(n.slice())),{domain:n,animatable:!0}}return{domain:NI(i.flat()),animatable:!0}}ticks(t,i,n=[0,1],{extend:s=!1,dropInitial:o=!1}={}){const{interval:r,maxTickCount:a,tickCount:l=a}=t,{bands:c}=this;if(!c.length)return;if(this.refresh(),r==null){const{ticks:x,tickOffset:M,tickEvery:E}=this.getDefaultTicks(i,l,n,s);let I=x.length>0?this.findIndex(x[0]):void 0;return I=I==null?void 0:Math.floor((I-M)/E),{ticks:x,count:void 0,firstTickIndex:I}}let d,p;i&&i.length>=2?(d=i[0].valueOf(),p=i.at(-1).valueOf()):(d=c[0].valueOf(),p=c.at(-1).valueOf());const[g,m]=this.range,y=Math.abs(m-g),b=DL({start:d,stop:p,interval:r,availableRange:y,visibleRange:n,extend:s})??this.getDefaultTicks(i,l,n,s).ticks,C=[];let w=-1;for(const x of b){const M=this.findIndex(x,1)??-1,E=M===w;w=M,!(o&&M===0)&&M!==-1&&!E&&C.push(c[M])}return{ticks:C,count:void 0,firstTickIndex:void 0}}stepTicks(t,i,n=[0,1],s=!0){const o=i?this.bandDomainIndices(i):void 0,r=this.ticksEvery(o,n,t,0,!1),a=r.at(-1),l=s&&t>1?o?.[1]:void 0,c=l!=null&&a!=null?this.findIndex(a):void 0;return c!=null&&l!=null&&l-c<t&&r.pop(),r}bandCount(t=[0,1]){const{domain:i}=this,n=Math.floor(t[0]*i.length);return Math.ceil(t[1]*i.length)-n}getDefaultTicks(t,i,n,s){const{bands:o}=this,r=Math.ceil(o.length/i),a=Math.floor(r/2),l=t?this.bandDomainIndices(t):void 0;return{ticks:this.ticksEvery(l,n,r,a,s),tickOffset:a,tickEvery:r}}bandDomainIndices(t){const i=W_(t),n=this.findIndex(t[i?t.length-1:0],1)??0,s=this.findIndex(t[i?0:t.length-1],1)??this.bands.length-1;return[n,s]}ticksEvery([t,i]=[0,this.bands.length],n,s,o,r){const{bands:a}=this,l=t,c=i-t+1;let d=l+Math.floor(n[0]*c),p=l+Math.ceil(n[1]*c);r&&(d-=s,p+=s),d=Math.max(d,0),p=Math.min(p,a.length);let g;if(s<=1)g=a.slice(d,p);else{g=[];for(let m=d;m<p;m+=1)(m-l+o)%s===0&&g.push(a[m])}return g}};function W_(e){return e.length>0&&e[0]>e.at(-1)}var ZU=5e7,mu=class XU extends oa{constructor(){super(...arguments),this.type="unit-time",this.defaultTickCount=12,this._domain=[],this._bands=void 0}static is(t){return t instanceof XU}static supportsInterval(t,i){return U_(t,i)}set domain(t){t!==this._domain&&(this._domain=t,this._bands=void 0)}get domain(){return this._domain}get interval(){return this._interval}set interval(t){this._interval!==t&&(this._interval=t,this._bands=void 0)}get bands(){return this._bands??(this._bands=this.calculateBands(this._domain,[0,1]).bands),this._bands}normalizeDomains(...t){return sL(...t)}convert(t,i){this.refresh(),t instanceof Date||(t=new Date(t));const{domain:n,interval:s}=this;if(n.length<2)return Number.NaN;if(i?.clamp!==!0&&s!=null){const o=t.valueOf(),[r,a]=US(n,s),l=Math.min(r.valueOf(),a.valueOf()),c=Math.max(r.valueOf(),a.valueOf()),d=yL(s,new Date(c)).valueOf();if(o<l||o>=d)return Number.NaN}return super.convert(t,i)}calculateBands(t,i,n=!1){if(t===this.domain&&i[0]===0&&i[1]===1&&!n&&this._bands!=null)return{bands:this._bands,firstBandIndex:0};if(t.length<2)return{bands:[],firstBandIndex:void 0};const{interval:s}=this;if(s==null)return{bands:[],firstBandIndex:void 0};const o={visibleRange:i,extend:n};if(!U_(t,s,o))return{bands:[],firstBandIndex:void 0};const[r,a]=US(t,s);if(bL(s,r,a,o)>ZU)return fe.warnOnce("the configured unit results in too many bands, ignoring. Supply a larger unit."),{bands:[],firstBandIndex:void 0};const l=Rr(s,r,a,o),c=CL(s,r,a,o);return{bands:l,firstBandIndex:c}}ticks({interval:t},i=this.domain,n=[0,1],{extend:s=!1}={}){if(i.length<2)return;let o,r,a;if(i===this.domain&&!s?({bands:o}=this.calculateBands(i,[0,1],!1),a=nce(o,!1,n),r=a[0]):{bands:o,firstBandIndex:r}=this.calculateBands(i,n,s),t==null)return{ticks:o,count:void 0,firstTickIndex:r};const l=this.interval?po(this.interval):1/0,c=Math.min(i[0].valueOf(),i[1].valueOf()),d=Math.max(i[0].valueOf(),i[1].valueOf());let p,g,m;if(Qt(t)||typeof t=="string")p=Rr(t,i[0],i[1],{extend:!0,visibleRange:n}),g=0,m=p.length-1;else{const E=a?a[0]:0,I=a?a[1]:o.length-1;p=o,g=jd(E,I,N=>o[N].valueOf()<=c)??E,m=jd(E,I,N=>o[N].valueOf()<=d)??I}const y=[];let b;for(let E=g;E<=m;E++){const I=p[E].valueOf(),N=jd(0,o.length-1,P=>o[P].valueOf()<=I),T=N!=null&&N!=b?o[N]:void 0;b=N,T!=null&&I-T.getTime()<=l&&y.push(T)}let C,w;if(this.interval){const E=US([new Date(c),new Date(d)],this.interval);C=E[0].valueOf(),w=E[1].valueOf()}else C=c,w=d;let x=hv(0,y.length-1,E=>y[E].valueOf()>=C)??0,M=jd(0,y.length-1,E=>y[E].valueOf()<=w)??y.length-1;return s&&(x=Math.max(x-1,0),M=Math.min(M+1,y.length-1)),{ticks:y.slice(x,M+1),count:y.length,firstTickIndex:r}}};function U_(e,t,i){const[n,s]=US(e,t);return bL(t,n,s,i)<=ZU}function US(e,t){const i=vr(t,e[0]),n=vr(t,e[1]);return[i,n]}function uce(e,t,i,n,s){let[o,r]=Gn(t.map(Number));const a=Math.floor(i.unzoomed);if(a<=1){const[w,x]=dce(o,r),M=5*Math.pow(2,-Math.ceil(Math.log2(s[1]-s[0]))),{ticks:E}=Ib(w,x,M,void 0,void 0,s),I=[e.toDomain(w),e.toDomain(x)];return n&&I.reverse(),{domain:I,ticks:E}}if(o===r){const w=Math.floor(Math.log10(o)),x=Math.pow(10,w),M=Math.min(x,1),E=a-1;o-=M*Math.floor(E/2),r=o+M*E}let l=o,c=r;l=hce(l,c,a);const d=gce(l,c,a),p=a-1;c=l+p*d;const g=Math.floor(l/d)*d,m=Math.floor(c/d)*d;g<=o&&m>=r&&(l=g,c=m);const y=[e.toDomain(l),e.toDomain(c)];n&&y.reverse();const b=d*((i.unzoomed-1)/(i.zoomed-1)),C=pce(l,b,Math.floor(i.zoomed));return{domain:y,ticks:C}}function dce(e,t){let i=e,n=t,s=0;do{[i,n]=$U(i,n);const{ticks:o}=Ib(i,n,5);if(o.length%2===1)return[i,n];i-=1,n+=1}while(s++<10);return[e,t]}function hce(e,t,i){e=Math.floor(e);const n=Math.abs(t-e)/(i-1),s=Math.floor(Math.log10(n)),o=Math.pow(10,s);return Math.floor(e/o)*o}function pce(e,t,i){const n=w1(t),s=Math.pow(10,n),o=[];for(let r=0;r<i;r++){const a=e+t*r;o.push(Math.round(a*s)/s)}return o}function gce(e,t,i){const n=i-1,s=(t-e)/n;return fce(s)}function fce(e){const t=Math.floor(Math.log10(e)),i=Math.pow(10,t),n=e/i;return n>0&&n<=1?i:n>1&&n<=2?2*i:n>2&&n<=5?5*i:n>5&&n<=10?10*i:e}function AL(){const e=new Map;return t=>{const i=e.get(t);return i?(e.set(t,i+1),`${t}_${i}`):(e.set(t,1),t)}}var mce=18,yce=[1,2,3,4,6,8,9,10,12];function BI(e,t=0){const i=[];for(const n of e){const{x:s,y:o,width:r,height:a}=n;if(i.some(l=>H4(l,s,o,r+t,a+t)))return!0;i.push(n)}return!1}function vce(e,t,i,n){if(e==null)return t;if(typeof e!="number"){const a=t[0],l=typeof e=="string"?{unit:e,epoch:a}:{...e,epoch:a};return Rr(l,t[0],t[1],{visibleRange:i,extend:n})}const s=[],o=t[0].valueOf(),r=t[1].valueOf();for(let a=o;a<=r;a+=e)s.push(new Date(a));return s}function GI(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1)if(e[i]?.valueOf()!==t[i]?.valueOf())return!1;return!0}function QU(e){if(e.length<2)return 1/0;let t=0,i=e[0].translation;for(let n=1;n<e.length;n++){const s=e[n].translation,o=Math.abs(s-i);t=Math.max(t,o),i=s}return t}function JU(e,{niceDomain:t,rawTicks:i,rawFirstTickIndex:n=0,generatePrimaryTicks:s,primaryTicksIndices:o,alignment:r,fractionDigits:a,timeInterval:l}){const{scale:c,label:d,tickFormatter:p,inRange:g,isVertical:m,sizeLimit:y=1/0}=e,b=yf.is(c)||oa.is(c),C=yo(d),w=AL(),x=[];return RL(c,t,()=>{const M=mc.is(c)?c.bandwidth??1/0:1/0,E=(c.bandwidth??0)/2,I=bce(d.enabled,s,t,i,a,l,p),N={font:d,maxWidth:m?y:M,maxHeight:m?M:y,overflow:d.truncate?"ellipsis":"hide",textWrap:d.wrapping};for(let T=0;T<i.length;T++){const P=i[T],O=c.convert(P,{alignment:r})+E;if(g&&!g(O))continue;const G=o?.has(T)??!1,B=I(G,P,T);let z=null;d.avoidCollisions&&(z=L1(B,N)||null);const j=z??B,X=ht(j),q=j!==B&&(!X||$4(j.at(-1)));let H;if(b){const K=P?.valueOf();Number.isFinite(K)&&(H=w(`v:${K}`))}H??(H=w(`l:${X?_n(j.flat()):j}`)),x.push({tick:P,tickId:H,tickLabel:j,isPrimary:G,index:T+n,textUntruncated:q?_n(B):void 0,textMetrics:X?th(j,d):C.measureLines(j),translation:Math.floor(O)})}}),x}function RL(e,t,i){const n=e.domain;try{e.domain=t,i()}finally{e.domain=n}}function bce(e,t,i,n,s,o,r){const a=t?"component":"long",l=t&&o?Eb(o):void 0,c=t?r(i,n,!0,s,l,a):null,d=e?r(i,n,!1,s,o,a):null;return(p,g,m)=>(p?c:d)?.(g,m)??String(g)}function e3(e,t,i,n,s,o,r,a){if(!yf.is(e)&&!oa.is(e))return;const l=Eb(o);if(l==null)return;r&&(t=[1-t[1],1-t[0]]);const c=Math.min(e.domain[0].valueOf(),e.domain.at(-1).valueOf()),d=Math.max(e.domain[0].valueOf(),e.domain.at(-1).valueOf());let[p,g]=vL(new Date(c),new Date(d),t);p=vr(l,p),p.valueOf()>=c&&(p=_U(l,p)),g=GU(l,g),g.valueOf()<=d&&(g=yL(l,g));const m=Rr(l,p,g),y=po(o),b=Ng.is(e),C={...s,interval:o},w=[];let x,M,E,I=0;if(Ng.is(e)){const N=cc(o);M=a!=null&&po(a)>=po(N)?2:3,E=1;const T=i/n,P=e.bandCount(t)/(T*mce);I=yce.findLast(O=>P>=O)??1}else mu.is(e)&&(e.interval==null||po(e.interval)>=y)?M=1:(M=0,E=2);for(let N=0;N<m.length-1;N++){const T=m[N],P=m[N+1],O=N===0,G=N===m.length-2,B=P.valueOf()-T.valueOf(),z=[Math.max((c-T.valueOf())/B,0),Math.min((d-T.valueOf())/B,1)];let j;switch(M){case 0:j=vce(C.interval,[T,P],z,!0);break;case 1:case 3:{j=e.ticks(C,[T,P],z,{extend:!0,dropInitial:!0})?.ticks??[];break}case 2:j=e.stepTicks(I,[T,P],void 0,!G);break}if(loe(j,K=>K.valueOf()<T.valueOf()),G||coe(j,K=>{switch(M){case 0:case 3:return K.valueOf()+y>P.valueOf();case 1:case 2:return K.valueOf()>=P.valueOf()}}),j.length===0)continue;const X=j[0],q=xL(X,T);(M===0?q===0:q<=y)&&(!b||!O)&&(x??(x=new Set),x.add(w.length)),w.push(...j)}return x?.size===1&&x.has(0)&&(x=void 0),{ticks:w,primaryTicksIndices:x,alignment:E}}function t3(e,t,i,n,s){const o=$_(e.format,n);if(o==null)return{width:0,height:0};const r=lv(o),a=n?Eb(n):void 0,l=$_(t?.format,a),c=l?lv(l):r,d=new Date(i[0]),p=new Date(i.at(-1)),g=a?Rr(a,new Date(i[0]),new Date(i.at(-1)),{extend:!0}):void 0;let m=0,y=0;if(r!=null){const b=gf(e),C=b.left+b.right,w=b.top+b.bottom;let x,M;g!=null&&g.length>1?(x=g[0],M=g[1]):(x=d,M=p);const E=Rr(n,x,M,{limit:50});for(const I of E){const N=r(I),{width:T,height:P}=s.measureLines(N);m=Math.max(m,T+C),y=Math.max(y,P+w)}}if(c!=null&&g!=null){const b=gf(t),C=b.left+b.right,w=b.top+b.bottom;for(const x of g){const M=c(x),{width:E,height:I}=s.measureLines(M);m=Math.max(m,E+C),y=Math.max(y,I+w)}}return{width:Math.ceil(m),height:Math.ceil(y)}}function i3(e,t,i,n){return e&&!t?i*n===-1?"top":"bottom":"middle"}function n3(e,t,i,n,s){const o=t>0&&t<=Math.PI,r=i>0&&i<=Math.PI,a=o||r?-1:1;if(e)if(t||i){if(n*a===-1)return"end"}else return"center";else if(n*s===-1)return"end";return"start"}function $_(e,t){if(e!=null){if(typeof e=="string")return e;if(Qt(e)&&t!=null)return e[cc(t)]}}function s3(e,t,i=0){const n=ac(e),s=!n&&i>=0&&i<=Math.PI?-1:1,o=!n&&i-Math.PI/2>=0&&i-Math.PI/2<=Math.PI?-1:1;let r=0;return t?r=s*(Math.PI/2):o===-1&&(r=Math.PI),{configuredRotation:n,defaultRotation:r,parallelFlipFlag:s,regularFlipFlag:o}}var Cce=new Date(1970,0,4);function o3(e){const{label:t,domain:i,axisRotation:n,labelOffset:s,sideFlag:o}=e,{defaultRotation:r,configuredRotation:a,parallelFlipFlag:l,regularFlipFlag:c}=s3(t.rotation,t.parallel,n),d=a+r,p=(P,O=0)=>{const G=t.minSpacing??(a===0&&O===0?10:0),B=d+O,z=gf(t);return BI(xce(e,P,B),G)||BI(Mce(P.ticks,s,B,z),G)},{maxTickCount:g}=r3(e),m=wce(e),y=t.enabled&&t.avoidCollisions,b=Number.isFinite(g)?g:10,C=y&&t.autoRotate&&t.rotation==null;let w=0,x=0,M=!0,E={tickDomain:[],niceDomain:i,ticks:[],rawTicks:[],rawTickCount:void 0,timeInterval:void 0,fractionDigits:0};for(;M&&w<=b;)({tickData:E,index:w}=Sce(e,m,E,w)),x=C&&p(E,0)?ac(t.autoRotateAngle):0,M=y&&p(E,x);const I=n3(t.parallel,a,x,o,c),N=i3(t.parallel,a,o,l),T=a+x;return{tickData:E,textAlign:I,textBaseline:N,rotation:T}}function wce(e){return e.interval?.values?2:e.primaryTickCount!=null?1:0}function r3({scale:e,domain:t,range:i,visibleRange:n,label:s,defaultTickMinSpacing:o,interval:{minSpacing:r,maxSpacing:a}}){const{defaultTickCount:l}=e,c=wh(i),d=wh(n);if(_f.is(e)){const p=t.length,g=Math.ceil(c/(d*s.fontSize));return{tickCount:Math.min(g,p),minTickCount:0,maxTickCount:p}}return YU(c,d,r,a,l,o)}function Sce(e,t,i,n){const{step:s,values:o}=e.interval,{maxTickCount:r,minTickCount:a,tickCount:l}=r3(e),c=O=>Math.max(l-O,a),d=s==null&&o==null&&c(n)>a,p=i.rawTicks,g=l-a,m={minTickCount:a,maxTickCount:r,tickCount:c(n)};let y=Y_(e,t,m);if(d&&GI(y.rawTicks,p)){let O=n,G=g;for(;O<=G;){n=Math.trunc((O+G)/2),m.tickCount=c(n);const B=Y_(e,t,m);GI(B.rawTicks,p)?O=n+1:(y=B,G=n-1)}}const{tickDomain:b,niceDomain:C,rawTicks:w,rawTickCount:x,rawFirstTickIndex:M,generatePrimaryTicks:E,primaryTicksIndices:I,alignment:N,fractionDigits:T,timeInterval:P}=y;return{tickData:{tickDomain:b,niceDomain:C,rawTicks:w,rawTickCount:x,fractionDigits:T,timeInterval:P,ticks:JU(e,{niceDomain:C,rawTicks:w,rawFirstTickIndex:M,generatePrimaryTicks:E,primaryTicksIndices:I,alignment:N,fractionDigits:T,timeInterval:P})},index:n+1}}function Y_(e,t,i){const{domain:n,reverse:s,visibleRange:o,scale:r,interval:a,primaryLabel:l,niceMode:c,primaryTickCount:d,minimumTimeGranularity:p}=e,g={nice:c===0,interval:a.step,...i},m={...g};m.nice||(m.nice=c===1);let y;t===1&&d!=null&&Ut.is(r)&&(y=uce(r,n,d,s,o));const b=c===0?y?.domain??r.niceDomain(g,n):n;let C=b,w,x,M,E,I,N;const T=l?.enabled===!0&&m.interval==null;RL(r,b,()=>{switch(t){case 2:if(C=a.values,w=a.values,x=w.length,Ng.is(r)?N=1:mu.is(r)&&(N=2),Ut.is(r)){const[O,G]=Gn(b.map(Number));w=w.filter(B=>Number(B)>=O&&Number(B)<=G).sort((B,z)=>Number(B)-Number(z))}break;case 1:if(y)w=y.ticks,x=y.ticks.length;else{const O=r.ticks(m,b,o);w=O?.ticks,x=O?.count}break;default:{const{tickCount:O,minTickCount:G,maxTickCount:B}=i;if(b.length>0&&m.interval==null&&(mu.is(r)||T&&(yf.is(r)||Ng.is(r)))){const X=b,q=Math.min(X[0].valueOf(),X.at(-1).valueOf()),H=Math.max(X[0].valueOf(),X.at(-1).valueOf());E=LM(q,H,O,G,B,{weekStart:l==null?Cce:void 0,primaryOnly:!0})}let z;Ng.is(r)?z=p:mu.is(r)&&(z=r.interval),z!=null&&E!=null&&po(z)>=po(E)&&(E=z);const j=E?e3(r,o,O,B,m,E,s,p):void 0;if(j)({ticks:w,primaryTicksIndices:I,alignment:N}=j);else{const X=mu.is(r)&&m.interval==null&&E!=null?{...m,interval:E}:m,q=r.ticks(X,b,o);if(w=q?.ticks,x=q?.count,M=q?.firstTickIndex,yf.is(r)||oa.is(r)){const H=typeof m.interval=="number"?Tb(m.interval):m.interval;E??(E=H??q?.timeInterval)}}}}}),w??(w=[]);let P=0;for(const O of w){if(typeof O!="number")continue;const G=w1(O);G>P&&(P=G)}return T||(I=void 0),{tickDomain:C,niceDomain:b,rawTicks:w,rawTickCount:x,rawFirstTickIndex:M,generatePrimaryTicks:T,primaryTicksIndices:I,alignment:N,fractionDigits:P,timeInterval:E}}function xce(e,t,i){const{niceDomain:n,ticks:s,timeInterval:o}=t;if(o==null)return[];const r=QU(s),{label:a,labelOffset:l,primaryLabel:c,domain:d}=e,{width:p,height:g}=t3(a,c,n??d,o,yo(a)),m=[];for(const y of[0,r]){const{x:b,y:C}=z4(l,y,i);m.push({x:b,y:C,width:p,height:g})}return m}function Mce(e,t,i,n){const s=[],o=n.left+n.right,r=n.top+n.bottom;for(const{tickLabel:a,textMetrics:l,translation:c}of e){if(!a)continue;const{x:d,y:p}=z4(t,c,i),g=l.width+o,m=l.height+r;s.push({x:d,y:p,width:g,height:m})}return s}var kb=class a3 extends gL{constructor(t,i){super(t,i),this.maxThicknessRatio=.3,this.crossAxisTranslation={x:0,y:0},this.minimumTimeGranularity=void 0,this.headingLabelGroup=this.axisGroup.appendChild(new hs({name:`${this.id}-Axis-heading`})),this.lineNodeGroup=this.axisGroup.appendChild(new hs({name:`${this.id}-Axis-line`})),this.lineNode=this.lineNodeGroup.appendChild(new _o({zIndex:1})),this.tickLineGroupSelection=ks.select(this.tickLineGroup,_o,!1),this.gridLineGroupSelection=ks.select(this.gridLineGroup,_o,!1),this.gridFillGroupSelection=ks.select(this.gridFillGroup,Tn,!1),this.tempText=new lf({debugDirty:!1}),this.tempCaption=new Ii,this.animationManager=t.animationManager,this.animationState=new xb("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:s=>this.animateReadyUpdate(s),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.headingLabelGroup.appendChild(this.title.caption.node);let n;this.cleanup.register(t.eventsHub.on("layout:complete",s=>{const o=[s.chart.width,s.chart.height];n!=null&&!Kl(o,n)&&this.animationState.transition("resize"),n=o}),this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}static is(t){return t instanceof a3}get horizontal(){return this.position==="top"||this.position==="bottom"}onGridVisibilityChange(){this.gridLineGroupSelection.clear(),this.gridFillGroupSelection.clear()}resetAnimation(t){t==="initial"&&this.animationState.transition("reset")}get direction(){return this.position==="top"||this.position==="bottom"?"x":"y"}createAxisContext(){return{...super.createAxisContext(),position:this.position}}createLabel(){return new fL}updateDirection(){switch(this.position){case"top":this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateLayout(t,i){return this.updateDirection(),super.calculateLayout(t,i)}layoutCrossLines(){const t=this.hasDefinedDomain()||this.hasVisibleSeries();for(const i of this.crossLines)i.calculateLayout?.(t)}calculateTickLayout(t,i,n,s){const o=this.label.getSideFlag(),r=o*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding);if(i===2&&this.label.enabled===!1&&this.tick.enabled===!1&&this.gridLine.enabled===!1){const{bbox:W,spacing:ee}=this.tickBBox(t,[],[]);return{ticks:[],rawTickCount:0,tickDomain:t,niceDomain:t,fractionDigits:0,timeInterval:void 0,bbox:W,layout:{ticks:[],tickLines:[],gridLines:[],gridFills:[],labels:[],spacing:ee}}}const{label:a,primaryLabel:l,scale:c,range:d,interval:p,reverse:g,defaultTickMinSpacing:m,minimumTimeGranularity:y}=this,b=o3({label:a,scale:c,interval:p,primaryLabel:l,domain:t,range:d,reverse:g,niceMode:i,visibleRange:n,defaultTickMinSpacing:m,minimumTimeGranularity:y,sideFlag:o,labelOffset:r,primaryTickCount:s,axisRotation:this.horizontal?-.5*Math.PI:0,isVertical:this.direction==="y",sizeLimit:this.chartLayout?.sizeLimit,inRange:W=>this.inRange(W,.001),tickFormatter:(...W)=>this.tickFormatter(...W)}),{tickData:C}=b;if(this.label.avoidCollisions&&this.horizontal&&C.ticks.length>2&&(Ut.is(this.scale)||oa.is(this.scale))){const W=this.chartLayout?.padding.right??0,ee=C.ticks.at(-1);ee?.tickLabel!=null&&ee.translation+ee.textMetrics.width/2>d[1]+W&&(ee.tickLabel=void 0,n[0]===0&&n[1]===1&&(C.ticks[0].tickLabel=void 0))}const{ticks:x,tickDomain:M,rawTicks:E,rawTickCount:I,fractionDigits:N,timeInterval:T,niceDomain:P}=C,O=x.map(W=>this.getTickLabelProps(W,b)),{position:G,gridPadding:B,gridLength:z}=this,j=G==="bottom"||G==="right"?-1:1,X=j*B,q=j*(z+B),H=this.calculateGridLines(x,X,q),K=this.calculateGridFills(x,X,q),U=this.calculateTickLines(x,j),{bbox:de,spacing:te}=this.tickBBox(M,x,O);return{ticks:E,rawTickCount:I,tickDomain:M,niceDomain:P,fractionDigits:N,timeInterval:T,bbox:de,layout:{ticks:x,gridLines:H,gridFills:K,tickLines:U,labels:O,spacing:te}}}calculateGridLines(t,i,n){return t.map((s,o)=>this.calculateGridLine(s,o,i,n,t))}calculateGridLine({index:t,tickId:i,translation:n},s,o,r,a){const{gridLine:l,horizontal:c}=this,[d,p,g,m]=c?[n,o,n,r]:[o,n,r,n],{style:y}=l,{stroke:b,strokeWidth:C=0,lineDash:w}=y[t%y.length]??{};return{tickId:i,offset:n,x1:d,y1:p,x2:g,y2:m,stroke:b,strokeWidth:C,lineDash:w}}calculateGridFills(t,i,n){const{horizontal:s,range:o,type:r}=this,a=[];if(t.length==0)return a;let l=0;const c=!s&&r==="unit-time";if(c&&t[0].translation<o[0]||!c&&t[0].translation>o[0]){const p={tickId:`before:${t[0].tickId}`,translation:o[0]};a.push(this.calculateGridFill(p,-1,t[0].index,i,n,t)),l=1}return a.push(...t.map((p,g)=>this.calculateGridFill(p,g,p.index+l,i,n,t))),a}calculateGridFill({tickId:t,translation:i},n,s,o,r,a){const{gridLine:l,horizontal:c,range:d}=this,p=a[n+1],g=i,m=p?p.translation:d[1],[y,b,C,w]=c?[g,Math.max(o,r),m,Math.min(o,r)]:[Math.min(o,r),Math.min(g,m),Math.max(o,r),Math.max(g,m)],{fill:x,fillOpacity:M}=l.style[s%l.style.length]??{};return{tickId:t,x1:y,y1:b,x2:C,y2:w,fill:x,fillOpacity:M}}calculateTickLines(t,i){return t.map(n=>this.calculateTickLine(n,n.index,i,t))}calculateTickLine({isPrimary:t,tickId:i,translation:n},s,o,r){const{horizontal:a,tick:l,primaryTick:c}=this,d=t&&c?c:l,p=-o*this.getTickSize(d),[g,m,y,b]=a?[n,0,n,p]:[0,n,p,n],{stroke:C,width:w}=d;return{tickId:i,offset:n,x1:g,y1:m,x2:y,y2:b,stroke:C,strokeWidth:w,lineDash:void 0}}update(){this.updateDirection();const t=Array.from(this.tickLabelGroupSelection.nodes(),r=>r.datum.tickId);super.update();const{tickLayout:i}=this;if(this.updateTitle(this.scale.domain,i?.spacing??0),this.animatable||this.moduleCtx.animationManager.skipCurrentBatch(),i){const{ticks:r}=i;if(this.animationManager.isSkipped())this.resetSelectionNodes();else{const a=r.map(c=>c.tickId),l=voe(t,a);this.animationState.transition("update",l)}}const{enabled:n,stroke:s,width:o}=this.line;this.lineNode.setProperties({stroke:s,strokeWidth:n?o:0}),this.updateTickLines(),this.updateGridLines(),this.updateGridFills()}getAxisTransform(){return{translationX:Math.floor(this.translation.x+this.crossAxisTranslation.x),translationY:Math.floor(this.translation.y+this.crossAxisTranslation.y)}}updatePosition(){super.updatePosition();const t=this.getAxisTransform();this.tickLineGroup.datum=t,this.tickLabelGroup.datum=t,this.lineNodeGroup.datum=t,this.headingLabelGroup.datum=t}setAxisVisible(t){this.tickLineGroup.visible=t&&(this.tick.enabled||(this.primaryTick?.enabled??!1)),this.tickLabelGroup.visible=t&&(this.label.enabled||(this.primaryTick?.enabled??!1)),this.lineNodeGroup.visible=t,this.headingLabelGroup.visible=t}getAxisLineCoordinates(){const{horizontal:t}=this,[i,n]=Gn(this.range);return t?{x1:i,x2:n,y1:0,y2:0}:{x1:0,x2:0,y1:i,y2:n}}getTickLineBBox(t){const{translation:i}=t,{position:n,primaryTick:s}=this;let o=this.getTickSize();switch(s?.enabled&&(o=Math.max(o,this.getTickSize(s))),n){case"top":return new Le(i,-o,i,o);case"bottom":return new Le(i,0,i,o);case"left":return new Le(-o,i,o,i);case"right":return new Le(0,i,o,i)}}lineNodeBBox(){const{position:t,seriesAreaPadding:i}=this,{y1:n,y2:s}=this.getAxisLineCoordinates(),o=s-n;switch(t){case"top":return new Le(n,-i,o,i);case"bottom":return new Le(n,0,o,i);case"left":return new Le(-i,n,i,o);case"right":return new Le(0,n,i,o)}}titleBBox(t,i){const{tempCaption:n}=this;return n.node.setProperties(this.titleProps(n,t,i)),n.node.getBBox()}tickBBox(t,i,n){const{tick:s,primaryTick:o,label:r,primaryLabel:a,title:l,position:c,horizontal:d,seriesAreaPadding:p}=this,g=[];if(g.push(this.lineNodeBBox()),s.enabled||o?.enabled)for(const C of i)g.push(this.getTickLineBBox(C));const{tempText:m}=this;if(r.enabled)for(const C of n){if(!C.visible)continue;m.setProperties(C);const w=m.getBBox();w&&g.push(w)}if(a?.enabled&&c==="bottom"&&(g.push(new Le(0,JG(r.fontSize)+2,1,this.getTickSize(s)+r.spacing+p)),a.format!=null)){const{format:w}=a,M=(Qt(w)?Object.values(w):[w]).reduce((E,I)=>Math.max(E,zse(I)),0);g.push(new Le(0,this.getTickSize(o??s)+a.spacing+p,1,M*JG(a.fontSize)+2))}let y=0;if(l.enabled){const C=Le.merge(g);y=d?C.height:C.width,g.push(this.titleBBox(t,y))}return{bbox:Le.merge(g),spacing:y}}titleProps(t,i,n){const{title:s}=this;if(!s.enabled)return t.enabled=!1,{visible:!1,text:"",textBaseline:"bottom",x:0,y:0,rotationCenterX:0,rotationCenterY:0,rotation:0};t.enabled=!0,t.color=s.color,t.fontFamily=s.fontFamily,t.fontSize=s.fontSize,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.wrapping=s.wrapping;const o=(s.spacing??0)+n,{range:r}=this,a=(r[0]+r[1])/2;let l,c,d,p;switch(this.position){case"top":l=a,c=-o,d=0,p="bottom";break;case"bottom":l=a,c=o,d=0,p="top";break;case"left":l=-o,c=a,d=-.5*Math.PI,p="bottom";break;case"right":l=o,c=a,d=.5*Math.PI,p="bottom";break}const{formatter:g=y=>y.defaultValue}=s,m=this.cachedCallWithContext(g,this.getTitleFormatterParams(i));return t.text=m,{visible:!0,text:m,textBaseline:p,x:l,y:c,rotationCenterX:l,rotationCenterY:c,rotation:d}}getTickLabelProps(t,i){const{horizontal:n,primaryLabel:s,primaryTick:o,seriesAreaPadding:r,scale:a}=this,{tickId:l,tickLabel:c="",translation:d,isPrimary:p,textUntruncated:g}=t,m=p&&s?.enabled?s:this.label,y=p&&o?.enabled?o:this.tick,{rotation:b,textBaseline:C,textAlign:w}=i,{range:x}=a,M=this.label.getSideFlag(),E=gf(m)[this.position],I=M*(this.getTickSize(y)+m.spacing+r)-E,N=c!=="",T=n?d:I,P=n?-I:d;return{...this.getLabelStyles({value:t.tick,formattedValue:c},void 0,m),tickId:l,rotation:b,text:c,textAlign:w,textBaseline:C,textUntruncated:g,visible:N,x:T,y:P,rotationCenterX:T,rotationCenterY:P,range:x}}updateSelections(){if(!this.tickLayout)return;const t=this.getAxisLineCoordinates(),{tickLines:i,gridLines:n,gridFills:s,labels:o}=this.tickLayout,r=a=>a.tickId;this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLine.enabled?n:[],void 0,r),this.gridFillGroupSelection.update(this.gridLine.enabled?s:[],void 0,r),this.tickLineGroupSelection.update(i,void 0,r),this.tickLabelGroupSelection.update(o,void 0,r)}updateGridLines(){this.gridLineGroupSelection.each((t,i)=>{t.stroke=i.stroke,t.strokeWidth=i.strokeWidth,t.lineDash=i.lineDash})}updateGridFills(){this.gridFillGroupSelection.each((t,i)=>{t.fill=i.fill,t.fillOpacity=i.fillOpacity??1})}updateTickLines(){this.tickLineGroupSelection.each((t,i)=>{t.stroke=i.stroke,t.strokeWidth=i.strokeWidth,t.lineDash=i.lineDash})}updateTitle(t,i){const{caption:n}=this.title,s=this.titleProps(n,t,i);n.node.visible=s.visible,n.node.text=s.text,n.node.textBaseline=s.textBaseline,n.node.datum=s}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each((t,i)=>{t.fill=i.color,t.text=i.text,t.textBaseline=i.textBaseline,t.textAlign=i.textAlign??"center",t.pointerEvents=i.textUntruncated==null?1:0,t.setFont(i),t.setBoxing(i)})}animateReadyUpdate(t){const{animationManager:i}=this.moduleCtx,n=kU(this),s=LU(n);hn(this.id,"axis-group",i,[this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],s.group),hn(this.id,"line",i,[this.lineNode],s.line),hn(this.id,"line-paths",i,[this.gridLineGroupSelection,this.tickLineGroupSelection],s.tick,(o,r)=>r.tickId,t),hn(this.id,"tick-labels",i,[this.tickLabelGroupSelection],s.label,(o,r)=>r.tickId,t),hn(this.id,"title",i,[this.title.caption.node],s.label,(o,r)=>r.tickId,t)}resetSelectionNodes(){cs([this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],PU()),cs([this.gridLineGroupSelection,this.tickLineGroupSelection],PI()),cs([this.gridFillGroupSelection],NU()),cs([this.tickLabelGroupSelection],qx()),cs([this.title.caption.node],qx()),cs([this.lineNode],PI())}};A([k],kb.prototype,"thickness",2);A([k],kb.prototype,"maxThicknessRatio",2);A([k],kb.prototype,"position",2);A([k],kb.prototype,"crossAt",2);var Lb=kb,l3=["top","right","bottom","left"];function Dce(e){return typeof e=="string"&&l3.includes(e)}function Ace(e){const t=[],i=[],n=[...l3];for(const s of e)s instanceof Lb&&(Dce(s.position)?i.push(s.position):t.push(s));for(const s of t){let o;do o=n.pop();while(o&&i.includes(o));if(o==null)break;s.position=o}}var Rce=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];function Ece(e,t,i){const n=(c,d,p)=>{const g=[c];for(const m of Rce)m in d&&d[m]!=null&&g.push(`${m}=${d[m]}`);return p?.seriesGrouping&&g.push(`seriesGrouping.groupId=${p?.seriesGrouping.groupId}`),g.join(";")},s=new Map;let o=0;for(const c of e){const d=n(c.type,c.properties,i?.[o]);s.has(d)||s.set(d,[]),s.get(d)?.push([c,o++])}const r=new Map;o=0;for(const c of t){const d=n(c.type,c,c);r.has(d)||r.set(d,[]),r.get(d)?.push([c,o++])}if(![...s.keys()].some(c=>r.has(c)))return{status:"no-overlap",oldKeys:s.keys(),newKeys:r.keys()};const l=[];for(const[c,d]of r.entries())for(const[p,g]of d){const m=s.get(c);if(m==null||m.length<1){l.push({opts:p,targetIdx:g,idx:g,status:"add"}),s.delete(c);continue}const[y,b]=m.shift(),C=i?.[b]??{},w=qa(C,p??{}),{groupIndex:x,stackIndex:M}=w?.seriesGrouping??{};x!=null||M!=null?l.push({opts:p,series:y,diff:w,targetIdx:g,idx:b,status:"series-grouping"}):w?l.push({opts:p,series:y,diff:w,targetIdx:g,idx:b,status:"update"}):l.push({opts:p,series:y,targetIdx:g,idx:b,status:"no-op"}),m.length===0&&s.delete(c)}for(const c of s.values())for(const[d,p]of c)l.push({series:d,idx:p,targetIdx:-1,status:"remove"});return{status:"overlap",changes:l}}function FM(e){const{series:t}=e;return t?.[0]?.type??"line"}function c3(e){const t=FM(e);return Bn.isCartesian(t)||Ple(t)}function Tce(e){const t=FM(e);return Bn.isPolar(t)||Nle(t)}function u3(e){const t=FM(e);return Bn.isTopology(t)||Fle(t)}function d3(e){const t=FM(e);return Bn.isStandalone(t)||Ole(t)}var Ice=class extends pL{applyOptions(e){for(const t of this.moduleMap.values())t.module.optionsKey in e&&ih(t.moduleInstance)&&t.moduleInstance.set(e[t.module.optionsKey])}*legends(){for(const{module:e,moduleInstance:t}of this.moduleMap.values())e.type==="legend"&&(yield{legendType:e.identifier,legend:t})}},_I="ag-charts-overlay",K_="ag-charts-dark-overlay",$d=class extends Qe{constructor(e,t){super(),this.className=e,this.defaultMessageId=t,this.enabled=!0}getText(e){return ht(this.text)?this.text.map(t=>t.text).join(""):e.t(this.text??this.defaultMessageId)}getElement(e,t,i,n){if(this.content?.remove(),this.focusBox=n,this.renderer){const s={},o=Zr(e,this.renderer,s);if(o instanceof HTMLElement)this.content=o;else{const r=ft("div");r.innerHTML=o;const{firstElementChild:a}=r;a instanceof HTMLElement&&r.childElementCount===1?this.content=a:this.content=r}}else{const s=ft("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",fontFamily:"var(--ag-charts-font-family)",fontSize:"var(--ag-charts-font-size)",fontWeight:"var(--ag-charts-font-weight)"});if(ht(this.text)){const o=ft("div");for(const r of this.text){const a=ft("span",{color:r.color,fontSize:`${r.fontSize}px`,fontFamily:r.fontFamily??"inherit",fontWeight:String(r.fontWeight),fontStyle:r.fontStyle});a.innerText=r.text,o.appendChild(a)}s.appendChild(o)}else s.innerText=this.getText(i);this.content=s,t?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(o){s.style.opacity=String(o)},onStop(){s.style.opacity="1"}})}return this.content}removeElement(e=()=>this.content?.remove(),t){if(this.content){if(t){const{content:i}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(n){i.style.opacity=String(n)},onStop(){e?.()}})}else e?.();this.content=void 0,this.focusBox=void 0}}};A([k],$d.prototype,"enabled",2);A([k],$d.prototype,"text",2);A([k],$d.prototype,"renderer",2);var Vf=class extends Qe{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new $d("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new $d("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new $d("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new $d("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(e){for(const t of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(t.focusBox!==void 0)return{text:t.getText(e),rect:t.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}};A([k],Vf.prototype,"darkTheme",2);A([k],Vf.prototype,"loading",2);A([k],Vf.prototype,"noData",2);A([k],Vf.prototype,"noVisibleSeries",2);A([k],Vf.prototype,"unsupportedBrowser",2);function kce(e,t){const{animationDuration:i}=vv.add,n=i*t,s=ft("div",`${_I}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${n}ms linear 50ms both`}),o=ft("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),r=ft("p",{marginTop:"1em"});r.innerText=e;const a=ft("div",`${_I}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=ft("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),s.replaceChildren(l,o,r,a),s}var h3=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.ANY_CONTENT=1]="ANY_CONTENT",e))(h3||{}),p3=(e=>(e[e.FOREGROUND=0]="FOREGROUND",e[e.HIGHLIGHT=1]="HIGHLIGHT",e[e.LABEL=2]="LABEL",e))(p3||{});function g3(e,t,i,n){if(Ar(e))return{type:"gradient",gradient:e.gradient??t.gradient,colorStops:e.colorStops??t.colorStops,bounds:e.bounds??t.bounds,rotation:e.rotation??t.rotation,reverse:e.reverse??t.reverse,colorSpace:e.colorSpace??t.colorSpace};if(lc(e)){const s=e.pattern??i.pattern;let o=e.strokeWidth;s==="backward-slanted-lines"||s==="forward-slanted-lines"||s==="horizontal-lines"||s==="vertical-lines"?o??(o=i.strokeWidth):o??(o=0);const r=e.width??e.height??i.width,a=e.height??e.width??i.height;return{type:"pattern",pattern:s,width:r,height:a,path:e.path,padding:e.padding??i.padding,fill:e.fill??i.fill,fillOpacity:e.fillOpacity??i.fillOpacity,backgroundFill:e.backgroundFill??i.backgroundFill,backgroundFillOpacity:e.backgroundFillOpacity??i.backgroundFillOpacity,stroke:e.stroke??i.stroke,strokeOpacity:e.strokeOpacity??i.strokeOpacity,strokeWidth:o,rotation:e.rotation??i.rotation,scale:e.scale??i.scale}}return bh(e)?{type:"image",url:e.url,width:e.width,height:e.height,backgroundFill:e.backgroundFill??n.backgroundFill,backgroundFillOpacity:e.backgroundFillOpacity??n.backgroundFillOpacity,rotation:e.rotation??n.rotation,repeat:e.repeat??n.repeat,fit:e.fit??n.fit}:e}function VI(e,t,i,n){return!Ar(e?.fill)&&!lc(e?.fill)&&!bh(e?.fill)?e:{...e,fill:g3(e.fill,t,i,n)}}function f3(e,t,i,n){i==null||!Ar(t)||t.bounds==null||t.bounds==="item"?e.fillBBox=void 0:e.fillBBox=i[t.bounds],e.fillParams=n}function Zl(e,t,i,n){const s=t?.opacity??1;e.fill=t?.fill,f3(e,e.fill,i,n),e.fillOpacity=(t?.fillOpacity??1)*s,e.stroke=t?.stroke,e.strokeOpacity=(t?.strokeOpacity??1)*s,e.strokeWidth=t?.strokeWidth??0,e.lineDash=t?.lineDash,e.lineDashOffset=t?.lineDashOffset??0}var m3=(e=>(e[e.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",e[e.NEAREST_NODE=1]="NEAREST_NODE",e[e.AXIS_ALIGNED=2]="AXIS_ALIGNED",e))(m3||{}),Lce=.25,Pce=.125,OM=class{constructor(e,t,i,n){this.type=e,this.event=t,this.defaultPrevented=!1,this.datum=i.datum,this.seriesId=n.id}preventDefault(){this.defaultPrevented=!0}},Jx=class{constructor(e,t){this.series=e,this.seriesGrouping=t,this.type="groupingChanged"}};function q_(e){switch(e){case"x":return"x";case"y":return"y";case"angle":return"angle";case"radius":return"radius"}}function UE(e){switch(e){case"x":return"x";case"y":return"y";case"angle":return"angle";case"radius":return"radius"}}var BM=class extends DW{constructor(e){super(),this.cleanup=new Ui,this.usesPlacedLabels=!1,this.hasChangesOnHighlight=!1,this.seriesGrouping=void 0,this.NodeEvent=OM,this.internalId=na(this),this.contentGroup=new hs({name:`${this.internalId}-content`,zIndex:1}),this.highlightGroup=new hs({name:`${this.internalId}-highlight`,zIndex:1}),this.annotationGroup=new hs({name:`${this.internalId}-annotation`}),this.labelGroup=new hs({name:`${this.internalId}-series-labels`}),this.axes={},this.directions=["x","y"],this.nodeDataRefresh=!0,this.processedDataUpdated=!0,this.moduleMap=new pL,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this.declarationOrder=-1,this._broughtToFront=!1,this.events=new _u,this._pickNodeCache=new b1(5),this.fireEventWrapper=a=>super.fireEvent(a);const{moduleCtx:t,pickModes:i,propertyKeys:n={},propertyNames:s={},canHaveAxes:o=!1,usesPlacedLabels:r=!1}=e;this.ctx=t,this.propertyKeys=n,this.propertyNames=s,this.canHaveAxes=o,this.usesPlacedLabels=r,this.pickModes=i,this.cleanup.register(this.ctx?.eventsHub.on("highlight:change",a=>this.onChangeHighlight(a)))}get pickModeAxis(){return"main"}get id(){return this.properties?.id??this.internalId}get type(){return this.constructor.type??""}get focusable(){return!0}get data(){return this._data??this._chartData}set visible(e){this.properties.visible=e,this.ctx.legendManager.toggleItem(e,this.id),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){return this.ctx.legendManager.getSeriesEnabled(this.id)??this.properties.visible}get hasData(){const e=this.data;return e==null?!1:e.netSize()>0}get tooltipEnabled(){return this.properties.tooltip?.enabled}onDataChange(){this.nodeDataRefresh=!0,this.processedDataUpdated=!0,this._pickNodeCache.clear()}setOptionsData(e){this._data=e,this.onDataChange()}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}onSeriesGroupingChange(e,t){const{internalId:i,type:n,visible:s}=this;e&&this.ctx.seriesStateManager.deregisterSeries(this),t&&this.ctx.seriesStateManager.registerSeries({internalId:i,type:n,visible:s,seriesGrouping:t}),this.fireEvent(new Jx(this,t))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(e,t,i){e.appendChild(this.contentGroup),t.appendChild(this.highlightGroup),t.appendChild(this.labelGroup),i?.appendChild(this.annotationGroup)}detachSeries(e,t,i){this.contentGroup.remove(),this.highlightGroup.remove(),this.labelGroup.remove(),this.annotationGroup.remove()}setSeriesIndex(e,t=!1){const i=this.bringToFront();return!t&&e===this.declarationOrder&&i===this._broughtToFront?!1:(this.declarationOrder=e,this._broughtToFront=i,this.setZIndex(i?Number.MAX_VALUE:e),this.fireEvent(new Jx(this,this.seriesGrouping)),!0)}setZIndex(e){this.contentGroup.zIndex=[1,e,0],this.highlightGroup.zIndex=[1,e,1],this.labelGroup.zIndex=[1,e,2],this.annotationGroup.zIndex=e}renderToOffscreenCanvas(){return!1}addEventListener(e,t){return super.addEventListener(e,t)}removeEventListener(e,t){return super.removeEventListener(e,t)}hasEventListener(e){return super.hasEventListener(e)}addChartEventListeners(){}updatedDomains(){}destroy(){this.cleanup.flush(),this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getPropertyValues(e,t){const i=q_(e),n=i==null?e:UE(this.resolveKeyDirection(i)),s=t?.[n],o=[];if(!s)return o;const r=(...a)=>{for(const l of a)Array.isArray(l)?r(...l):typeof l=="object"?r(...Object.values(l)):o.push(l)};return r(...s.map(a=>this.properties[a])),o}getKeys(e){return this.getPropertyValues(UE(e),this.propertyKeys)}getKeyProperties(e){return this.propertyKeys[this.resolveKeyDirection(e)]??[]}getNames(e){return this.getPropertyValues(UE(e),this.propertyNames)}getFormatterContext(e){const{id:t}=this,i=this.getPropertyValues(e,this.propertyKeys),n=this.getPropertyValues(e,this.propertyNames),s=[];for(let o=0;o<i.length;o++)s.push({seriesId:t,key:i[o],name:n[o]});return s}resolveKeyDirection(e){return e}getDomain(e){const t=this.getSeriesDomain(e),i=this.moduleMap.mapModules(n=>n.getDomain(e)).flat();return i.length===0?t:t.concat(i)}getRange(e,t){return this.getSeriesRange(e,t)}getZoomRangeFittingItems(e,t,i){}getVisibleItems(e,t,i){return 1/0}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){if(!this.properties.highlight)return 1;const{opacity:t=1}=this.getHighlightStyle();return t}getHighlightState(e,t,i,n){if(t)return 1;if(e?.series==null)return 0;if(this.isSeriesHighlighted(e,n)){const s=this.isItemHighlighted(e,i);return s==null||s?2:4}return 3}getHighlightStateString(e,t,i,n){return Gf(this.getHighlightState(e,t,i,n))}onChangeHighlight(e){const t=e.previousHighlight,i=e.currentHighlight,n=this.getHighlightState(i),s=this.getHighlightState(t);this.setSeriesIndex(this.declarationOrder);const o=this.hasItemStylers();if(!o&&n===s){this.hasChangesOnHighlight=!1;return}const{highlightedSeries:r,unhighlightedItem:a,unhighlightedSeries:l}=this.properties.highlight;this.hasChangesOnHighlight=o||!PS(r)||!PS(a)||!PS(l)}bringToFront(){return this.properties.highlight.bringToFront&&this.isSeriesHighlighted(this.ctx.highlightManager.getActiveHighlight())}isSeriesHighlighted(e,t){return e?.series===this}isItemHighlighted(e,t){if(!(e?.datumIndex==null||t==null))return e.datumIndex===t}getHighlightStyle(e,t,i,n){const s=this.ctx.highlightManager?.getActiveHighlight();return i??(i=this.getHighlightState(s,e,t,n)),this.properties.highlight.getStyle(i)}filterItemStylerFillParams(e){return Ar(e)?Ae(e,["bounds","colorSpace","gradient","reverse"]):lc(e)?Ae(e,["padding"]):e}getModuleTooltipParams(){return this.moduleMap.mapModules(e=>e.getTooltipParams()).reduce((e,t)=>Object.assign(e,t),{})}pickNodes(e,t,i=!1){const{pickModes:n,pickModeAxis:s,visible:o,contentGroup:r}=this;if(!o||!r.visible||t==="highlight"&&!this.properties.highlight.enabled||t==="highlight-tooltip"&&!this.properties.highlight.enabled)return;let a=1/0;if(t==="tooltip"||t==="highlight-tooltip"){const{tooltip:g}=this.properties;a=typeof g.range=="number"?g.range:1/0,i||(i=g.range==="exact")}else if(t==="event"||t==="context-menu"){const{nodeClickRange:g}=this.properties;a=typeof g=="number"?g:1/0,i||(i=g==="exact")}const l=n.filter(g=>!i||g===0),{x:c,y:d}=e,p=JSON.stringify({x:c,y:d,maxDistance:a,selectedPickModes:l});if(this._pickNodeCache.has(p))return this._pickNodeCache.get(p);for(const g of l){let m;switch(g){case 0:{const y=this.pickNodesExactShape(e);m=y.length===0?void 0:{datums:y,distance:0};break}case 1:{const y=this.pickNodeClosestDatum(e),b=y?.distance===0?this.pickNodesExactShape(e):void 0;b!=null&&b.length!==0?m={datums:b,distance:0}:y?m={datums:[y.datum],distance:y.distance}:m=void 0;break}case 2:{const y=s==null?void 0:this.pickNodeMainAxisFirst(e,s==="main-category");m=y==null?void 0:{datums:[y.datum],distance:y.distance};break}}if(m&&m.distance<=a)return this._pickNodeCache.set(p,{pickMode:g,datums:m.datums,distance:m.distance})}return this._pickNodeCache.set(p,void 0)}pickNodesExactShape(e){const t=[];for(const i of this.contentGroup.pickNodes(e.x,e.y)){const n=i.closestDatum();n!=null&&n.missing!==!0&&t.push(n)}return t}pickNodeClosestDatum(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(e,t){const i=lM(e.x,e.y,t),n=i.nearest?.closestDatum();if(n!=null&&n.missing!==!0)return{datum:n,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(e,t){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(e){}fireEvent(e){Zr([this.properties,this.ctx.chartService],this.fireEventWrapper,e)}fireNodeClickEvent(e,t){const i=new this.NodeEvent("seriesNodeClick",e,t,this);return this.fireEvent(i),!i.defaultPrevented}fireNodeDoubleClickEvent(e,t){const i=new this.NodeEvent("seriesNodeDoubleClick",e,t,this);return this.fireEvent(i),!i.defaultPrevented}createNodeContextMenuActionEvent(e,t){return new this.NodeEvent("nodeContextMenuAction",e,t,this)}onLegendInitialState(e,t){const{visible:i=!0,itemId:n,legendItemName:s}=t??{};this.toggleSeriesItem(i,e,n,s)}onLegendItemClick(e){const{enabled:t,itemId:i,series:n,legendType:s}=e,o="legendItemName"in this.properties?this.properties.legendItemName:void 0,r="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,a=o!=null&&o===e.legendItemName;(n.id===this.id||a||r!=null)&&this.toggleSeriesItem(t,s,i,o,e)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:n,numVisibleItems:s,legendType:o}=e,r="legendItemName"in this.properties?this.properties.legendItemName:void 0,a="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,l=r!=null&&r===e.legendItemName;n.id===this.id||l||a!=null?this.toggleSeriesItem(!0,o,i,r,e):t&&s===1?this.toggleSeriesItem(!0,o,void 0,r):this.toggleSeriesItem(!1,o,void 0,r)}toggleSeriesItem(e,t,i,n,s){const o=this.id;(e||t!=="category")&&(this.visible=e),this.nodeDataRefresh=!0,this._pickNodeCache.clear();const r={type:"seriesVisibilityChange",seriesId:o,itemId:i,legendItemName:s?.legendItemName??n,visible:e};this.fireEvent(r),this.ctx.legendManager.toggleItem(e,o,i,n)}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return{...this.ctx,series:this}}getAxisValueText(e,t,i,n,s,o){const{id:r,properties:a}=this;return e.formatDatum(a,i,t,r,o,n,s)}getLabelText(e,t,i,n,s,o,r){if(e==null)return"";const{axes:a,canHaveAxes:l,ctx:c,id:d,properties:p}=this,g="series-label",m="legendItemName"in p?p.legendItemName:void 0,y={seriesId:this.id,...r},b=l?q_(n):void 0,C=b==null?void 0:a[this.resolveKeyDirection(b)];if(C!=null)return C.formatDatum(p,e,g,d,m,t,i,s,o,y);const{formatManager:w}=c,x=this.callWithContext.bind(this),M=I=>o.formatValue(x,I.type,I.value,y)??w.format(x,I)??String(e),E=this.getFormatterContext(n);switch(n){case"y":case"color":case"size":return M({type:"number",value:e,datum:t,seriesId:d,legendItemName:m,key:i,source:g,property:n,domain:s,boundSeries:E,fractionDigits:void 0});case"x":case"radius":case"angle":case"label":case"secondaryLabel":case"calloutLabel":case"sectorLabel":case"legendItem":return M({type:"category",value:e,datum:t,seriesId:d,legendItemName:m,key:i,source:g,property:n,domain:s,boundSeries:E})}}getMarkerStyle(e,{datumIndex:t,datum:i,point:n},s,o,r={size:n?.size??e.size??0},a){const{itemStyler:l}=e,{highlightState:c,isHighlight:d=!1,checkForHighlight:p=!0,resolveMarkerSubPath:g=["marker"],resolveStyler:m=!1}=o??{},y=["series",`${this.declarationOrder}`,...g];if(m){const x={permissivePath:!0},M=this.ctx.optionsGraphService.resolvePartial(y,r,x);M&&(r={...M,size:M.size??r.size})}const b=p?this.getHighlightStyle(d,t,c):void 0;let w=_t(b,r,e.getStyle(),a);if(l&&s){const x=this.ctx.highlightManager?.getActiveHighlight(),M=this.getHighlightStateString(x,d,t),E=this.filterItemStylerFillParams(w.fill),I=this.cachedCallWithContext(l,{seriesId:this.id,...w,fill:E,...s,highlighted:d,highlightState:M,datum:i}),N=this.ctx.optionsGraphService.resolvePartial(y,I);w=_t(N,w)}return w}applyMarkerStyle(e,t,i,n,{applyTranslation:s=!0,selected:o=!0}={}){const{shape:r,size:a=0}=e,l=this.visible&&a>0&&i&&!Number.isNaN(i.x)&&!Number.isNaN(i.y);if(Zl(t,e,n),s?t.setProperties({visible:l,shape:r,size:a,x:i?.x,y:i?.y,scalingCenterX:i?.x,scalingCenterY:i?.y}):t.setProperties({visible:l,shape:r,size:a}),o||(t.fillOpacity*=Lce,t.strokeOpacity*=Pce),typeof r=="function"&&!t.dirtyPath){t.path.clear(!0),t.updatePath(),t.checkPathDirty();const c=t.getBBox();if(i!=null&&c.isFinite()){const d=c.computeCenter(),[p,g]=["x","y"].map(m=>(e.strokeWidth??0)+Math.abs(d[m]-i[m]));i.focusSize=Math.max(c.width+p,c.height+g)}}}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:Number.NaN,seriesRectHeight:Number.NaN}}checkResize(e){const{width:t,height:i}=e??{width:Number.NaN,height:Number.NaN},n=e?{seriesRectWidth:t,seriesRectHeight:i}:void 0,s=qa(this.nodeDataDependencies,n)!=null;return s&&(this._nodeDataDependencies=n,this.markNodeDataDirty()),s}pickFocus(e){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(e,t){const{datumCallbackCache:i}=this,n=i.get(e);if(n!=null)return n;try{const s=t();return i.set(e,s),s}catch(s){fe.error(String(s))}}cachedCallWithContext(e,t){return this.ctx.callbackCache.call([this.properties,this.ctx.chartService],e,t)}callWithContext(e,t){return Zr([this.properties,this.ctx.chartService],e,t)}formatTooltipWithContext(e,t,i){return e.formatTooltip([this.properties,this.ctx.chartService],t,i)}minTimeInterval(){}};A([ms({changeValue:function(e,t){this.onSeriesGroupingChange(t,e)}})],BM.prototype,"seriesGrouping",2);var Nce=class{constructor(e){this.swapChain=e,this.hasBeenActivated=!1,this.div=ft("div"),this.svg=tn("svg"),this.outerPath=tn("path"),this.innerPath=tn("path"),this.svg.append(this.outerPath),this.svg.append(this.innerPath),this.outerPath.classList.add("ag-charts-focus-svg-outer-path"),this.innerPath.classList.add("ag-charts-focus-svg-inner-path"),this.element=ft("div","ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",t=>this.onSwap(t))}clear(){}update(e,t,i){if(t!=null)if(e instanceof zn){const n=(o,r)=>{let{x:a,y:l}=Hi.toCanvasPoint(e,o,r);return a-=t.x??0,l-=t.y??0,{x:a,y:l}},s=e.svgPathData(n);this.outerPath.setAttribute("d",s),this.innerPath.setAttribute("d",s),this.show(this.svg)}else{let n;if(i){const s=Math.max(e.x-t.x,0),o=Math.max(e.y-t.y,0),r=Math.min(e.x+e.width-t.x,t.width),a=Math.min(e.y+e.height-t.y,t.height);n=new Le(s,o,r-s,a-o)}else n=new Le(e.x-t.x,e.y-t.y,e.width,e.height);Ux(this.div,n),this.show(this.div)}}onSwap(e){e!==this.element.parentElement&&(this.element.remove(),e.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(e){this.hasBeenActivated=!0,this.element.innerHTML="",this.element.append(e)}overrideFocusVisible(e){this.focusVisible=e;const t={true:"1",false:"0",undefined:""};this.element.parentElement?.style.setProperty("opacity",t[`${e}`])}isFocusVisible(e=!1){if(!e&&!this.hasBeenActivated)return!1;const t=this.element.parentElement;return t!=null&&$t().getComputedStyle(t).opacity==="1"}},Fce=class{constructor(e,t,i,n){this.label1=e,this.label2=t,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=s=>(Na(s.target,"pointer-events",void 0),!this.skipDispatch&&this.dispatch("blur",s)),this.onFocus=s=>(Na(s.target,"pointer-events","auto"),!this.skipDispatch&&this.dispatch("focus",s)),Tt(this.label1,"id",_x()),Tt(this.label2,"id",_x()),Na(this.label1,"display","none"),Na(this.label2,"display","none"),this.label1.textContent=n,this.label2.textContent=n,this.activeAnnouncer=this.createAnnouncer(i),this.inactiveAnnouncer=this.createAnnouncer(i),Tt(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap(n)}createAnnouncer(e){const t=ft("div");return t.role=e,t.className="ag-charts-swapchain",t.addEventListener("blur",this.onBlur),t.addEventListener("focus",this.onFocus),t}destroy(){for(const e of[this.activeAnnouncer,this.inactiveAnnouncer])e.removeEventListener("blur",this.onBlur),e.removeEventListener("focus",this.onFocus),e.remove()}focus(e){this.focusOptions=e,this.activeAnnouncer.focus(e),this.focusOptions=void 0}update(e){this.skipDispatch=!0,this.swap(e),this.hasFocus&&this.activeAnnouncer.focus(this.focusOptions),this.skipDispatch=!1}addListener(e,t){this.listeners[e].push(t),e==="swap"&&t(this.activeAnnouncer)}dispatch(e,t){e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1);for(const i of this.listeners[e])i(t)}swap(e){const t=this.activeAnnouncer.tabIndex;this.label2.textContent=e,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],sf(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),sf(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:t}),this.dispatch("swap",this.activeAnnouncer)}},Oce={arrowdown:{bindings:[{code:"ArrowDown"}]},arrowleft:{bindings:[{code:"ArrowLeft"}]},arrowright:{bindings:[{code:"ArrowRight"}]},arrowup:{bindings:[{code:"ArrowUp"}]},delete:{bindings:[{key:"Backspace"},{key:"Delete"}],activatesFocusIndicator:!1},redo:{bindings:[{key:"y",ctrlOrMeta:!0},{key:"z",ctrlOrMeta:!0,shift:!0}],activatesFocusIndicator:!1},undo:{bindings:[{key:"z",ctrlOrMeta:!0}],activatesFocusIndicator:!1},submit:{bindings:[{key:"Enter"},{code:"Enter"},{code:"Space"}]},zoomin:{bindings:[{key:"+"},{code:"ZoomIn"},{code:"Add"}],activatesFocusIndicator:!1},zoomout:{bindings:[{key:"-"},{code:"ZoomOut"},{code:"Substract"}],activatesFocusIndicator:!1}};function Bce(e,t){for(const i of t)if("code"in i){if(i.code===e.code)return!0}else if(i.key===e.key&&(i.shift===void 0||i.shift===e.shiftKey)&&(i.ctrlOrMeta===void 0||i.ctrlOrMeta===e.ctrlKey||i.ctrlOrMeta===e.metaKey))return!0;return!1}function Gce(e){for(const[t,{activatesFocusIndicator:i=!0,bindings:n}]of $r(Oce))if(Bce(e,n))return{name:t,activatesFocusIndicator:i}}function _ce(e,t,i){const n=iL(e,i.datum,i.movedBounds);if(n!=null)return{x:n.canvasX,y:n.canvasY};const s=i.bounds;if(s!=null){if(s instanceof Le){const{x:o,y:r}=s.computeCenter();return{x:t.x+o,y:t.y+r}}return Hi.toCanvas(s).computeCenter()}}function Vce({bounds:e}){return e instanceof Le?e:e!=null?Hi.toCanvas(e):Le.NaN}function zce(e,t,i){const{x:n,y:s}=_ce(e,t,i)??{};if(n!==void 0&&s!==void 0)return{type:"keyboard",canvasX:n,canvasY:s}}function y3(e,t,i,n){let{top:s,right:o,bottom:r,left:a,width:l,height:c}=n;return a!=null?l!=null?o=i.width-a+l:o!=null&&(l=i.width-a-o):o!=null&&l!=null&&(a=i.width-o-l),s!=null?c!=null?r=i.height-s-c:r!=null&&(c=i.height-r-s):r!=null&&c!=null&&(s=i.height-r-c),l==null?c==null?(c=t,l=e):l=Math.ceil(e*c/t):c??(c=Math.ceil(t*l/e)),a==null&&(o==null?a=Math.floor((i.width-l)/2):a=i.width-o-l),s==null&&(r==null?s=Math.floor((i.height-c)/2):s=i.height-c-r),{x:a,y:s,width:l,height:c}}var Z_=.1,X_=200,Q_=12,Hce=.5,jce=class{constructor(){this.events=new _u,this.x1=Number.NaN,this.y1=Number.NaN,this.x=Number.NaN,this.y=Number.NaN,this.vx=0,this.vy=0,this.t0=Number.NaN,this.animationFrameHandle=void 0}reset(){this.x=Number.NaN,this.y=Number.NaN,this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(e,t){if(Number.isNaN(this.x)||Number.isNaN(this.y)){this.x=e,this.y=t,this.vx=0,this.vy=0,this.emitUpdate(),this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0);return}this.x1=e,this.y1=t,this.t0=Date.now(),this.animationFrameHandle??(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;const{x1:e,y1:t,t0:i}=this,n=Date.now(),s=n-i;this.t0=n;const o=.001,r=Math.trunc(Math.ceil(s/(o*1e3)));let{x:a,y:l,vx:c,vy:d}=this;for(let p=0;p<r;p+=1){const g=a-e,m=l-t,y=-(X_*g+Q_*c)/Z_,b=-(X_*m+Q_*d)/Z_;c+=y*o,d+=b*o,a+=c*o,l+=d*o}Math.hypot(a-e,l-t)<Hce?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=a,this.y=l,this.vx=c,this.vy=d,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.events.emit("update",{x:this.x,y:this.y})}},Xw=null;function Vy(e){return e===""?"":(Xw??(Xw=ft("div")),Xw.textContent=_n(e),Xw.innerHTML.replaceAll(`
`,"<br>"))}function Ay(e,t){const{path:i,size:n}=e,{x:s,y:o}=e;i.clear();let r=!1;for(const[a,l]of t){const c=s+(a-.5)*n,d=o+(l-.5)*n;r?i.lineTo(c,d):i.moveTo(c,d),r=!0}i.closePath()}var Wce={circle({path:e,x:t,y:i,size:n}){const s=n/2;e.arc(t,i,s,0,Math.PI*2),e.closePath()},cross(e){Ay(e,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},diamond(e){Ay(e,[[.5,0],[1,.5],[.5,1],[0,.5]])},heart({path:e,x:t,y:i,size:n}){const s=n/4;i=i+s/2,e.arc(t-s,i-s,s,ds(130),ds(330)),e.arc(t+s,i-s,s,ds(220),ds(50)),e.lineTo(t,i+s),e.closePath()},pin({path:e,x:t,y:i,size:n}){e.moveTo(t+(.15625-.5)*n,i+(.34375-.5)*n),e.cubicCurveTo(t+(.15625-.5)*n,i+(.151491-.5)*n,t+(.307741-.5)*n,i+(0-.5)*n,t+(.5-.5)*n,i+(0-.5)*n),e.cubicCurveTo(t+(.692259-.5)*n,i+(0-.5)*n,t+(.84375-.5)*n,i+(.151491-.5)*n,t+(.84375-.5)*n,i+(.34375-.5)*n),e.cubicCurveTo(t+(.84375-.5)*n,i+(.493824-.5)*n,t+(.784625-.5)*n,i+(.600181-.5)*n,t+(.716461-.5)*n,i+(.695393-.5)*n),e.cubicCurveTo(t+(.699009-.5)*n,i+(.719769-.5)*n,t+(.681271-.5)*n,i+(.743104-.5)*n,t+(.663785-.5)*n,i+(.766105-.5)*n),e.cubicCurveTo(t+(.611893-.5)*n,i+(.834367-.5)*n,t+(.562228-.5)*n,i+(.899699-.5)*n,t+(.528896-.5)*n,i+(.980648-.5)*n),e.cubicCurveTo(t+(.524075-.5)*n,i+(.992358-.5)*n,t+(.512663-.5)*n,i+(1-.5)*n,t+(.5-.5)*n,i+(1-.5)*n),e.cubicCurveTo(t+(.487337-.5)*n,i+(1-.5)*n,t+(.475925-.5)*n,i+(.992358-.5)*n,t+(.471104-.5)*n,i+(.980648-.5)*n),e.cubicCurveTo(t+(.487337-.5)*n,i+(1-.5)*n,t+(.475925-.5)*n,i+(.992358-.5)*n,t+(.471104-.5)*n,i+(.980648-.5)*n),e.cubicCurveTo(t+(.437772-.5)*n,i+(.899699-.5)*n,t+(.388107-.5)*n,i+(.834367-.5)*n,t+(.336215-.5)*n,i+(.766105-.5)*n),e.cubicCurveTo(t+(.318729-.5)*n,i+(.743104-.5)*n,t+(.300991-.5)*n,i+(.719769-.5)*n,t+(.283539-.5)*n,i+(.695393-.5)*n),e.cubicCurveTo(t+(.215375-.5)*n,i+(.600181-.5)*n,t+(.15625-.5)*n,i+(.493824-.5)*n,t+(.15625-.5)*n,i+(.34375-.5)*n),e.closePath()},plus(e){Ay(e,[[1/3,0],[2/3,0],[2/3,1/3],[1,1/3],[1,2/3],[2/3,2/3],[2/3,1],[1/3,1],[1/3,2/3],[0,2/3],[0,1/3],[1/3,1/3]])},square({path:e,x:t,y:i,size:n,pixelRatio:s}){const o=n/2;e.moveTo(Fn(s,t-o),Fn(s,i-o)),e.lineTo(Fn(s,t+o),Fn(s,i-o)),e.lineTo(Fn(s,t+o),Fn(s,i+o)),e.lineTo(Fn(s,t-o),Fn(s,i+o)),e.closePath()},star({path:e,x:t,y:i,size:n}){const o=n/2,r=o/2,a=Math.PI/2;for(let l=0;l<10;l++){const c=l%2===0?o:r,d=l*Math.PI/5-a,p=t+Math.cos(d)*c,g=i+Math.sin(d)*c;e.lineTo(p,g)}e.closePath()},triangle(e){Ay(e,[[.5,0],[1,.87],[0,.87]])}},Pb=class extends zn{constructor(){super(...arguments),this.shape="square",this.x=0,this.y=0,this.size=12}isPointInPath(e,t){return this.distanceSquared(e,t)<=0}get midPoint(){return{x:this.x,y:this.y}}distanceSquared(e,t){const i=Rn.anchor(this.shape),n=e-this.x+(i.x-.5)*this.size,s=t-this.y+(i.y-.5)*this.size,o=this.size/2;return Math.max(n*n+s*s-o*o,0)}updatePath(){const{path:e,shape:t,x:i,y:n,size:s}=this,o=this.layerManager?.canvas?.pixelRatio??1,r=Rn.anchor(t),a={path:e,x:i-(r.x-.5)*s,y:n-(r.y-.5)*s,size:s,pixelRatio:o};e.clear(),typeof t=="string"?Wce[t](a):typeof t=="function"&&t(a)}computeBBox(){const{x:e,y:t,size:i}=this,n=Rn.anchor(this.shape);return new Le(e-i*n.x,t-i*n.y,i,i)}executeFill(e,t){if(t)return super.executeFill(e,t)}executeStroke(e,t){if(t)return super.executeStroke(e,t)}};A([Uo({})],Pb.prototype,"shape",2);A([Me()],Pb.prototype,"x",2);A([Me()],Pb.prototype,"y",2);A([Me({convertor:Math.abs})],Pb.prototype,"size",2);var Rn=class extends Of(gM(Bf(Pb))){static anchor(e){return e==="pin"?{x:.5,y:1}:typeof e=="function"&&"anchor"in e?e.anchor:{x:.5,y:.5}}constructor(e){super(e),e?.shape!=null&&(this.shape=e.shape)}};function v3(e,t,i=t*(5/3)){const n=new ut,s=Math.min(e.marker.strokeWidth??1,2),o=Math.min(e.line?.strokeWidth??0,2),r=Math.max(e.marker.enabled===!1?0:t,e.line==null?0:i),a=Math.max(e.marker.enabled===!1?0:t,o);if(e.line!=null){const{stroke:l,strokeOpacity:c,lineDash:d}=e.line,p=new _o;p.x1=0,p.y1=a/2,p.x2=r,p.y2=a/2,p.stroke=l,p.strokeOpacity=c,p.strokeWidth=o,p.lineDash=d,n.append(p)}if(e.marker.enabled!==!1){const{shape:l,fill:c,fillOpacity:d,stroke:p,strokeOpacity:g,lineDash:m,lineDashOffset:y}=e.marker,b=new Rn;b.shape=l??"square",b.size=t,b.fill=c,b.fillOpacity=d??1,b.stroke=p,b.strokeOpacity=g??1,b.strokeWidth=s,b.lineDash=m,b.lineDashOffset=y??0;const C=Rn.anchor(l),w=r/2+(C.x-.5)*t,x=a/2+(C.y-.5)*t,M=t/(t+s);b.x=w,b.y=x,b.scalingCenterX=w,b.scalingCenterY=x,b.scalingX=M,b.scalingY=M,n.append(b)}return ut.toSVG(n,r,a)}var Yn="ag-charts-tooltip",b3="ag-charts-tooltip--dark";function C3(e){const t=[],i=new Map;for(const n of e)if(n.type==="structured"){const{heading:s}=n,o=s==null?void 0:i.get(s),r={type:"structured",heading:s,items:[n]};o==null?(i.set(s,r),t.push(r)):o.items.push(n)}else t.push(n);return t}function w3(e){const t=C3(e),i=[];for(const n of t)if(n.type!=="raw"){n.heading!=null&&i.push(_n(n.heading));for(const s of n.items)if(s.title!=null&&i.push(_n(s.title)),s.data)for(const o of s.data)i.push(o.label??o.fallbackLabel,o.value)}return i.filter(n=>n!=="").join("; ")}function zI(e,t,i){let n="";if(e==null&&!t)return"";e==null?n+=`<span class="${Yn}-label">${Vy(t)}</span>`:(n+=`<span class="${Yn}-label">${Vy(e)}</span>`,n+=" ",n+=`<span class="${Yn}-value">${Vy(t)}</span>`);const s=[`${Yn}-row`];return i&&s.push(`${Yn}-row--inline`),n=`<div class="${s.join(" ")}">${n}</div>`,n}function Uce(e){let t="";if(e.data?.length&&e.data.every(s=>s.value==null||s.value===""))return t;const i=e.title==null&&e.data?.length===1,n=e.symbol==null?void 0:v3(e.symbol,12);if(n!=null&&(e.title!=null||e.data?.length)&&(t+=`<span class="${Yn}-symbol">${n}</span>`),e.title!=null&&(t+=`<span class="${Yn}-title">${Vy(e.title)}</span>`,t+=" "),e.data)for(const s of e.data)t+=zI(s.label??s.fallbackLabel,s.value,i),t+=" ";return t}function S3(e,t){if(e==null||t.length===1)return;const i=e?.t("tooltipPaginationStatus",{index:t.index+1,count:t.length});return`<div class="${Yn}-footer">${i}</div>`}function J_(e,t,i,n){const s=t.items.length===1?t.items[0]:void 0;let o,r,a;switch(i){case"compact":o=!0,r=_n(s?.title);break;case"single":o=s!=null&&(t.heading==null||s.title==null)&&s.data?.length===1&&s.data[0].label==null&&s.data[0].value!=null,a=_n(t.heading??s?.title);break;case"shared":o=!1}let l="";if(o&&s!=null){if(r!=null&&(l+=zI(void 0,r,!1)),s.data)for(const d of s.data)l+=zI(d.label??a,d.value,!1),l+=" "}else{t.heading!=null&&(l+=`<span class="${Yn}-heading">${Vy(_n(t.heading))}</span>`,l+=" ");for(const d of t.items)l+=Uce(d)}if(l.length===0)return;const c=i!=="compact"&&n!=null?S3(e,n):void 0;return c+null&&(l+=c),l=`<div class="${Yn}-content">${l.trimEnd()}</div>`,l}function $ce(e,t){const i=t==null?void 0:S3(e,t);return i==null?"":`<div class="${Yn}-content">${i}</div>`}function x3(e,t,i,n){const s=C3(t);if(s.length!==0){if(s.length===1&&s[0].type==="structured")return J_(e,s[0],i,n);{const o=s.map(r=>r.type==="structured"?J_(e,r,i):r.rawHtmlString);return n!=null&&o.push($ce(e,n)??""),o.join("")}}}var Yce={left:-1,"top-left":-1,"bottom-left":-1,top:0,center:0,bottom:0,right:1,"top-right":1,"bottom-right":1},Kce={"top-left":-1,top:-1,"top-right":-1,left:0,center:0,right:0,"bottom-left":1,bottom:1,"bottom-right":1},qce={left:3,"top-left":void 0,"bottom-left":void 0,top:2,center:void 0,bottom:1,right:0,"top-right":void 0,"bottom-right":void 0},eV={top:2,bottom:2,left:1,right:1,"top-right":3,"top-left":3,"bottom-right":3,"bottom-left":3,center:0},Zce={pointer:"top",node:"top",chart:"top-left"},_h=class extends Qe{constructor(){super(...arguments),this.xOffset=0,this.yOffset=0}};A([k],_h.prototype,"xOffset",2);A([k],_h.prototype,"yOffset",2);A([k],_h.prototype,"anchorTo",2);A([k],_h.prototype,"placement",2);var kr=class extends Qe{constructor(){super(),this.enabled=!0,this.mode="single",this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new _h,this.pagination=!1,this.darkTheme=!1,this.bounds="extended",this.cleanup=new Ui,this.springAnimation=new jce,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.sizeMonitor=new zW,this._elementSize=void 0,this._showTimeout=void 0,this.arrowPosition=void 0,this._visible=!1,this.positionParams=void 0,this.localeManager=void 0,this.cleanup.register(this.springAnimation.events.on("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(e,t){return"togglePopover"in $t().HTMLElement.prototype&&(this.element=t.addChild("tooltip-container",Yn),this.element.setAttribute("popover","manual"),this.element.className=Yn,this.element.style.positionAnchor=t.anchorName,this.sizeMonitor.observe(this.element,i=>{this._elementSize=i,this.updateTooltipPosition()})),this.localeManager=e,()=>{t.removeChild("tooltip-container",Yn),this.cleanup.flush(),this.element&&this.sizeMonitor.unobserve(this.element)}}isVisible(){return this._visible}contains(e){return this.element?.contains(e)??!1}updateTooltipPosition(){const{element:e,_elementSize:t,positionParams:i}=this;if(e==null||t==null||i==null)return;const{canvasRect:n,relativeRect:s,meta:o}=i,{x:r,y:a}=this.springAnimation,l=o.position?.anchorTo??"pointer";let c=o.position?.placement??Zce[l];Array.isArray(c)||(c=[c]);const d=o.position?.xOffset??0,p=o.position?.yOffset??0,g=s.x,m=s.y,y=s.width-t.width-1+g,b=s.height-t.height+m;let C=0,w,x,M=!1;do{w=c[C],C+=1;const P=this.getTooltipBounds({elementSize:t,placement:w,anchorTo:l,canvasX:r,canvasY:a,yOffset:p,xOffset:d,canvasRect:n});x=y3(t.width,t.height,s,P),M=!1,eV[w]&1&&(M||(M=x.x<g||x.x>y)),eV[w]&2&&(M||(M=x.y<m||x.y>b))}while(C<c.length&&M);const E=st(g,x.x,y),I=st(m,x.y,b);M||(M=E!==x.x||I!==x.y);const N=l!=="chart"&&!M&&!d&&!p,T=o.showArrow??this.showArrow??N;this.arrowPosition=T?qce[w]:void 0,this.updateClassModifiers(),e.style.translate=`${E}px ${I}px`}show(e,t,i,n,s,o=!1){const{element:r}=this;if(r!=null&&n!=null&&n.length!==0){const c=x3(this.localeManager,n,this.mode,this.pagination?s:void 0);if(c==null){this.toggle(!1);return}r.innerHTML=c}else if(r==null||r.innerHTML===""){this.toggle(!1);return}const a={x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height};switch(this.positionParams={canvasRect:t,relativeRect:a,meta:i},i.position?.anchorTo??"pointer"){case"node":this.springAnimation.update(i.nodeCanvasX??i.canvasX,i.nodeCanvasY??i.canvasY);break;case"pointer":this.springAnimation.update(i.canvasX,i.canvasY);break;case"chart":this.springAnimation.reset()}i.enableInteraction?(this.enableInteraction=!0,r.style.pointerEvents="auto",r.removeAttribute("aria-hidden"),r.tabIndex=-1):(this.enableInteraction=!1,r.style.pointerEvents="none",r.setAttribute("aria-hidden","true"),r.removeAttribute("tabindex")),r.style.setProperty("--top",`${t.top}px`),r.style.setProperty("--left",`${t.left}px`),this.updateClassModifiers(),this.toggle(!0,o)}hide(){this.toggle(!1)}maybeEnterInteractiveTooltip({relatedTarget:e},t){const{interactive:i,interactiveLeave:n,enabled:s,element:o}=this;if(o==null)return!1;if(n)return!0;const r=i&&s&&this.isVisible()&&e instanceof Node&&this.contains(e);return r&&(this.interactiveLeave={callback:t,listener:a=>{(a.relatedTarget==null||a.relatedTarget instanceof Node&&!this.contains(a.relatedTarget))&&this.popInteractiveLeaveCallback()}},o.addEventListener("focusout",this.interactiveLeave.listener),o.addEventListener("mouseout",this.interactiveLeave.listener)),r}popInteractiveLeaveCallback(){const{interactiveLeave:e,element:t}=this;this.interactiveLeave=void 0,e&&(t&&(t.removeEventListener("focusout",e.listener),t.removeEventListener("mouseout",e.listener)),e.callback())}toggle(e,t=!1){const{delay:i}=this;e&&i>0&&!t?this._showTimeout??(this._showTimeout=setTimeout(()=>{this._showTimeout=void 0,this.toggleCallback(!0)},i)):(clearTimeout(this._showTimeout),this._showTimeout=void 0,this.toggleCallback(e))}toggleCallback(e){this.element?.isConnected&&this._visible!==e&&(this._visible=e,this.element.togglePopover(e),e?this.updateTooltipPosition():(this.springAnimation.reset(),this.popInteractiveLeaveCallback()))}updateClassModifiers(){if(!this.element?.isConnected)return;const{classList:e}=this.element,t=(i,n)=>e.toggle(`${Yn}--${i}`,n);t("no-interaction",!this.enableInteraction),t("arrow-top",this.arrowPosition===1),t("arrow-right",this.arrowPosition===3),t("arrow-bottom",this.arrowPosition===2),t("arrow-left",this.arrowPosition===0),t("compact",this.mode==="compact"),e.toggle(b3,this.darkTheme);for(const i of this.wrapTypes)e.toggle(`${Yn}--wrap-${i}`,i===this.wrapping)}getTooltipBounds(e){const{elementSize:t,anchorTo:i,placement:n,canvasX:s,canvasY:o,yOffset:r,xOffset:a,canvasRect:l}=e,{width:c,height:d}=t,p={width:c,height:d};if(i==="node"||i==="pointer"){const g=Yce[n],m=Kce[n];return p.top=o+r+d*(m-1)/2+8*m,p.left=s+a+c*(g-1)/2+8*g,p}switch(n){case"top":return p.top=r,p.left=l.width/2-c/2+a,p;case"right":return p.top=l.height/2-d/2+r,p.left=l.width-c+a,p;case"left":return p.top=l.height/2-d/2+r,p.left=a,p;case"bottom":return p.top=l.height-d+r,p.left=l.width/2-c/2+a,p;case"top-left":return p.top=r,p.left=a,p;case"top-right":return p.top=r,p.left=l.width-c+a,p;case"bottom-right":return p.top=l.height-d+r,p.left=l.width-c+a,p;case"bottom-left":return p.top=l.height-d+r,p.left=a,p}return p}};A([k],kr.prototype,"enabled",2);A([k],kr.prototype,"mode",2);A([k],kr.prototype,"showArrow",2);A([k],kr.prototype,"delay",2);A([k],kr.prototype,"range",2);A([k],kr.prototype,"wrapping",2);A([k],kr.prototype,"position",2);A([k],kr.prototype,"pagination",2);A([k],kr.prototype,"darkTheme",2);A([k],kr.prototype,"bounds",2);function HI(e,t){return e.series===t.series&&qs(e.datumIndex,t.datumIndex)}var Xce=class{constructor(){this.candidates=[]}get current(){return this.active}reset(){this.candidates.length=0,this.active=void 0}update(e,t){this.candidates=e;let i=t==null?-1:e.findIndex(n=>HI(n,t));return i===-1&&(i=0),this.active=e[i],{current:this.active,index:i,length:e.length}}next(){const{candidates:e,active:t}=this,i=t==null?-1:e.findIndex(s=>HI(s,t));if(i===-1)return;let n=i+1;return n>=e.length&&(n=0),this.active=e[n],{current:this.active,index:n,length:this.candidates.length}}},Qce=class extends $1{constructor(e){super(),this.chart=e,this.id=na(this),this.series=[],this.announceMode="when-changed",this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="pointer",this.previousInputDevice="keyboard",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.cachedTooltipContent=void 0,this.hoverScheduler=Mre(()=>{if(!(!this.tooltip.lastHover&&!this.highlight.pendingHoverEvent)){if(this.chart.getUpdateType()<=5){this.hoverScheduler.schedule();return}this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)}}),this.tooltipCandidates=new Xce;const t=e.ctx.localeManager.t("ariaInitSeriesArea"),i=e.ctx.domManager.addChild("series-area","series-area-aria-label1"),n=e.ctx.domManager.addChild("series-area","series-area-aria-label2");this.swapChain=new Fce(i,n,"img",t),this.swapChain.addListener("blur",a=>this.onBlur(a)),this.swapChain.addListener("focus",()=>this.onFocus()),e.ctx.domManager.mode==="normal"&&(this.focusIndicator=new Nce(this.swapChain),this.focusIndicator.overrideFocusVisible(e.mode==="integrated"?!1:void 0));const{seriesDragInterpreter:s,seriesWidget:o,containerWidget:r}=e.ctx.widgets;o.setTabIndex(-1),this.cleanup.register(()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label1"),()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label2"),o.addListener("focus",()=>this.swapChain.focus({preventScroll:!0})),o.addListener("mousemove",a=>this.onHover(a,o)),o.addListener("wheel",a=>this.onWheel(a)),o.addListener("mouseleave",a=>this.onLeave(a)),o.addListener("keydown",a=>this.onKeyDown(a)),o.addListener("contextmenu",(a,l)=>this.onContextMenu(a,l)),r.addListener("contextmenu",(a,l)=>this.onContextMenu(a,l)),r.addListener("click",(a,l)=>this.onClick(a,l)),r.addListener("dblclick",(a,l)=>this.onClick(a,l)),e.ctx.animationManager.addListener("animation-start",()=>this.clearAll()),e.ctx.eventsHub.on("dom:resize",()=>this.clearAll()),e.ctx.eventsHub.on("highlight:change",a=>this.changeHighlightDatum(a)),e.ctx.eventsHub.on("layout:complete",a=>this.layoutComplete(a)),e.ctx.updateService.addListener("pre-scene-render",()=>this.preSceneRender()),e.ctx.updateService.addListener("update-complete",()=>this.updateComplete()),e.ctx.eventsHub.on("zoom:change",()=>this.clearAll()),e.ctx.eventsHub.on("zoom:pan-start",()=>this.clearAll())),s&&this.cleanup.register(s.events.on("drag-move",a=>this.onDragMove(a,o)),s.events.on("click",a=>this.onClick(a,o)),s.events.on("dblclick",a=>this.onClick(a,o)))}get bbox(){return(this.seriesRect??Le.zero).clone()}isState(e){return this.chart.ctx.interactionManager.isState(e)}isIgnoredTouch(e){return!(e.device!=="touch"||e.type==="click"||this.chart.ctx.chartService.touch.dragAction==="hover"||this.chart.ctx.chartService.touch.dragAction==="drag"&&this.isState(9))}dataChanged(){var e;this.cachedTooltipContent=void 0,this.highlight.appliedHoverEvent&&((e=this.highlight).stashedHoverEvent??(e.stashedHoverEvent=this.highlight.appliedHoverEvent),this.clearHighlight()),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.focusIndicator?.clear()}preSceneRender(){this.highlight.stashedHoverEvent!=null&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),this.tooltip.lastHover!=null&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}updateComplete(){this.isState(34)&&this.focusIndicator?.isFocusVisible()&&(this.announceMode!=="always"&&(this.announceMode="never"),this.handleFocus(0,0))}update(e,t){this.chart.ctx.updateService.update(e,t)}seriesChanged(e){this.focus.sortedSeries=[...e].sort((t,i)=>{let n=t.properties.focusPriority??1/0,s=i.properties.focusPriority??1/0;return n===s&&([n,s]=[t.declarationOrder,i.declarationOrder]),n<s?-1:n>s?1:0}),this.series=e}layoutComplete(e){this.seriesRect=e.series.rect,this.hoverRect=e.series.rect,this.chart.ctx.widgets.seriesWidget.setBounds(e.series.rect),this.chart.ctx.domManager.mode==="normal"&&this.chart.ctx.widgets.chartWidget.setBounds(e.chart)}onContextMenu(e,t){const{sourceEvent:i}=e;if(i.currentTarget!=t.getElement())return;if(i.target==this.chart.ctx.widgets.containerWidget.getElement()){if(this.isState(36)){const{currentX:c,currentY:d}=e;this.chart.ctx.contextMenuRegistry.dispatchContext("always",{widgetEvent:e,canvasX:c,canvasY:d},void 0)}return}let n,s;if(this.focusIndicator?.isFocusVisible())n=this.chart.ctx.highlightManager.getActiveHighlight(),n&&this.seriesRect&&n.midPoint&&(s=Hi.toCanvasPoint(n.series.contentGroup,n.midPoint.x,n.midPoint.y));else if(this.isState(36)){const c=this.pickNodes({x:e.currentX,y:e.currentY},"context-menu");c&&(this.chart.ctx.highlightManager.updateHighlight(this.id),n=c.matches[0].datum)}const o=n?.series;this.clearAll();const r=e.currentX+t.cssLeft(),a=e.currentY+t.cssTop(),{datumIndex:l}=n??{};o&&n&&l!=null?this.chart.ctx.contextMenuRegistry.dispatchContext("series-node",{widgetEvent:e,canvasX:r,canvasY:a},{pickedSeries:o,pickedNode:{...n,datumIndex:l}},s):this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",{widgetEvent:e,canvasX:r,canvasY:a},void 0,s)}onLeave(e){!this.isState(41)||e.sourceEvent.relatedTarget?.className==="ag-charts-text-input__textarea"||this.maybeEnterInteractiveTooltip(e.sourceEvent)||(this.chart.ctx.domManager.updateCursor(this.id),this.hoverDevice!=="keyboard"&&this.clearAll())}onWheel(e){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.previousInputDevice="pointer")}onDragMove(e,t){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(e,t))}onHover(e,t){this.isState(41)&&this.onHoverLikeEvent(e,t)}onHoverLikeEvent(e,t){if(this.isIgnoredTouch(e)||(e.device==="touch"&&this.chart.ctx.chartService.touch.dragAction==="hover"&&e.sourceEvent.preventDefault(),t!==this.chart.ctx.widgets.seriesWidget))return;(e.device==="touch"||Jce(e,"drag-move"))&&(this.tooltip.lastHover=e),this.hoverDevice="pointer",this.previousInputDevice="pointer",this.highlight.pendingHoverEvent=e,this.hoverScheduler.schedule();let i;if(this.isState(32)){const{currentX:s,currentY:o}=e;i=this.pickNodes({x:s,y:o},"event");const r=i?.matches,a=r?.[0];a?.series.hasEventListener("seriesNodeClick")||a?.series.hasEventListener("seriesNodeDoubleClick")||r!=null&&r.length>1&&this.chart.tooltip.pagination?this.chart.ctx.domManager.updateCursor(this.id,"pointer"):this.chart.ctx.domManager.updateCursor(this.id)}const n=!!i?.matches.length;this.emitSeriesAreaHoverEvent(e,n)}onClick(e,t){if(e.device==="keyboard"||(t===this.chart.ctx.widgets.seriesWidget&&this.chart.ctx.animationManager.isActive()&&this.chart.ctx.animationManager.skipCurrentBatch(),e.device==="touch"&&t===this.chart.ctx.widgets.seriesWidget&&this.swapChain.focus({preventScroll:!0}),!this.isState(41)))return;if(t===this.chart.ctx.widgets.seriesWidget){if(!t.getElement().contains(e.sourceEvent.target))return}else if(e.sourceEvent.target!=t.getElement())return;this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(e,t);const i=t===this.chart.ctx.widgets.seriesWidget;if(!this.isState(32)){i&&this.emitSeriesAreaClickEvent(e,!1);return}if(i){if(!!this.checkSeriesNodeClick(e)){this.emitSeriesAreaClickEvent(e,!0),this.update(5),e.sourceEvent.preventDefault();return}this.emitSeriesAreaClickEvent(e,!1)}const n={type:e.type==="click"?"click":"doubleClick",event:e.sourceEvent};this.chart.fireEvent(n)}emitSeriesAreaHoverEvent(e,t){const i=this.toCanvasCoordinates(e.currentX,e.currentY);if(i==null)return;const n={x:i.x,y:i.y,consumed:t,sourceEvent:e.sourceEvent};this.chart.ctx.eventsHub.emit("series-area:hover",n)}emitSeriesAreaClickEvent(e,t){if(!("currentX"in e))return;const i=this.toCanvasCoordinates(e.currentX,e.currentY);if(i==null)return;const n={x:i.x,y:i.y,consumed:t,sourceEvent:e.sourceEvent};this.chart.ctx.eventsHub.emit("series-area:click",n)}toCanvasCoordinates(e,t){const i=this.hoverRect?.x??this.seriesRect?.x??0,n=this.hoverRect?.y??this.seriesRect?.y??0;return{x:e+i,y:t+n}}onFocus(){this.isState(34)&&(this.hoverDevice=this.focusIndicator?.isFocusVisible(!0)?"keyboard":"pointer",this.handleFocus(0,0))}onBlur(e){this.isState(34)&&(this.hoverDevice="pointer",this.maybeEnterInteractiveTooltip(e)||this.clearAll(),this.focusIndicator?.overrideFocusVisible(void 0))}onKeyDown(e){if(!this.isState(43))return;const t=Gce(e.sourceEvent);switch(t?.activatesFocusIndicator===!1&&this.focusIndicator?.overrideFocusVisible(this.previousInputDevice==="keyboard"),t?.name){case"redo":return this.chart.ctx.eventsHub.emit("series:redo",null);case"undo":return this.chart.ctx.eventsHub.emit("series:undo",null);case"zoomin":return this.chart.ctx.eventsHub.emit("series:keynav-zoom",{delta:1,widgetEvent:e});case"zoomout":return this.chart.ctx.eventsHub.emit("series:keynav-zoom",{delta:-1,widgetEvent:e});case"arrowup":return this.onArrow(-1,0,e);case"arrowdown":return this.onArrow(1,0,e);case"arrowleft":return this.onArrow(0,-1,e);case"arrowright":return this.onArrow(0,1,e);case"submit":return this.onSubmit(e)}}onArrow(e,t,i){this.isState(34)&&(this.hoverDevice="keyboard",this.previousInputDevice="keyboard",this.focusIndicator?.overrideFocusVisible(!0),this.focus.seriesIndex+=e,this.focus.datumIndex+=t,this.handleFocus(e,t),i.sourceEvent.preventDefault(),this.chart.ctx.eventsHub.emit("series:focus-change",null))}onSubmit(e){if(!this.isState(34))return;const{series:t,datum:i}=this.focus,n=e.sourceEvent;t!=null&&i!=null?t.fireNodeClickEvent(n,i):this.chart.fireEvent({type:"click",event:n}),n.preventDefault()}checkSeriesNodeClick(e){var t;const i=this.pickNodes({x:e.currentX,y:e.currentY},"event");if(i==null||i.matches.length===0)return;const n=this.chart.tooltip.pagination?this.tooltipCandidates.update(i.matches,this.tooltipCandidates.current)?.current:void 0,{series:s,datum:o}=n??i.matches[0],r=n==null?i.distance:0;if(e.type==="click"){const l=s.fireNodeClickEvent(e.sourceEvent,o)&&this.chart.tooltip.pagination?this.tooltipCandidates.next():void 0;if(l!=null){e.sourceEvent.preventDefault();const{currentX:c,currentY:d}=e,p=c+(this.hoverRect?.x??0),g=d+(this.hoverRect?.y??0);(t=this.highlight).pendingHoverEvent??(t.pendingHoverEvent=this.highlight.appliedHoverEvent),this.handleHoverHighlight(!1),this.showTooltip(l.current,p,g,{index:l.index,length:l.length})}return!0}return e.type==="dblclick"?(e.preventZoomDblClick=r===0,s.fireNodeDoubleClickEvent(e.sourceEvent,o),!0):!1}handleFocus(e,t){const i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);i==null?this.handleSeriesFocus(e,t)===0?this.announceMode="when-changed":this.announceMode="always":(this.focusIndicator?.update(i.rect,this.seriesRect,!1),this.swapChain.update(i.text),this.announceMode="always")}handleSeriesFocus(e,t){if(this.chart.chartType==="standalone")return this.handleSoloSeriesFocus(e,t);const{focus:i}=this,n=i.sortedSeries.filter(l=>l.visible&&l.focusable);if(n.length===0)return 1;const s=i.datumIndex-t,o=i.seriesIndex-e;i.seriesIndex=st(0,i.seriesIndex,n.length-1),i.series=n[i.seriesIndex];const r=this.focus.datumIndex,a=this.focus.seriesIndex;return this.updatePickedFocus(r,t,s,a,e,o)}handleSoloSeriesFocus(e,t){this.focus.series=this.focus.sortedSeries[0];const i=this.focus.datumIndex,n=this.focus.seriesIndex,s=this.focus.datumIndex-t,o=this.focus.seriesIndex-e;return this.updatePickedFocus(i,t,s,n,e,o)}updatePickedFocus(e,t,i,n,s,o){const{focus:r,hoverRect:a,seriesRect:l}=this;if(r.series==null||a==null)return 1;const c=r?.series?.pickFocus({datumIndex:e,datumIndexDelta:t,otherIndex:n,otherIndexDelta:s,seriesRect:l});if(!c)return 2;const{datum:d}=c;if(r.datum=d,r.datumIndex=c.datumIndex,c.otherIndex!=null&&(r.seriesIndex=c.otherIndex),this.focusIndicator?.isFocusVisible()){this.chart.ctx.animationManager.reset();const m=Vce(c),{x:y,y:b}=m.computeCenter();if(!a.containsPoint(y,b)&&this.chart.ctx.zoomManager.panToBBox(this.id,a,m))return 3;const{x1:C,x2:w,y1:x,y2:M}=Cv.from(m),E=a.containsPoint(C,x),I=a.containsPoint(w,x),N=a.containsPoint(C,M),T=a.containsPoint(w,M);if(!(E||I||N||T)){const P=Cv.from(a);c.movedBounds=m.clone(),C<P.x1&&w<P.x1?(c.movedBounds.x=P.x1-2,c.movedBounds.width=4):C>P.x2&&w>P.x2&&(c.movedBounds.x=P.x2-2,c.movedBounds.width=4),x<P.y1&&M<P.y1?(c.movedBounds.y=P.y1-2,c.movedBounds.height=4):x>P.y2&&M>P.y2&&(c.movedBounds.y=P.y2-2,c.movedBounds.height=4)}}this.focusIndicator?.update(c.movedBounds??c.bounds,this.seriesRect,c.clipFocusBox);const p=this.getTooltipContent(r.series,d.datumIndex,d,"aria-label"),g=zce(r.series,a,c);if(g!=null&&this.hoverDevice==="keyboard"){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;const m=Yx.makeTooltipMeta(g,r.series,d,c.movedBounds);this.chart.ctx.highlightManager.updateHighlight(this.id,d),this.isTooltipEnabled(r.series)&&this.chart.ctx.tooltipManager.updateTooltip(this.id,m,p)}return this.maybeAnnouncePickedFocus(t,i,s,o,c,p),0}maybeAnnouncePickedFocus(e,t,i,n,s,o){const{focus:r}=this;let a;this.announceMode==="when-changed"?e===0&&i===0||t!==s.datumIndex||n!==(s.otherIndex??r.seriesIndex)?a="always":a="never":a=this.announceMode,a==="always"&&this.swapChain.update(this.getDatumAriaText(s.datum,o))}getDatumAriaText(e,t){const i=t==null?"":w3(t);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:e.series.getDatumAriaText?.(e,i)??i})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.focusIndicator?.clear()}handleHoverHighlight(e){this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;const t=this.highlight.appliedHoverEvent;if(!t||!this.isState(41))return;const{currentX:i,currentY:n}=t,s=t.currentX+(this.hoverRect?.x??0),o=t.currentY+(this.hoverRect?.y??0);if(e?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(s,o)){this.clearHighlight();return}const{range:r}=this.chart.highlight,a=r==="tooltip"?"highlight-tooltip":"highlight",l=this.pickNodes({x:i,y:n},a);if(!l||l.matches.length===0){this.chart.ctx.highlightManager.updateHighlight(this.id);return}const{current:c}=this.tooltipCandidates,p=(c==null?void 0:l.matches.find(g=>HI(g,c)))?.datum??l.matches[0].datum;this.chart.ctx.highlightManager.updateHighlight(this.id,p),this.hoverDevice="pointer"}handleHoverTooltip(e,t){const{current:i}=this.tooltipCandidates;if(this.tooltipCandidates.reset(),!this.isState(41))return;const{currentX:n,currentY:s}=e,o=n+(this.hoverRect?.x??0),r=s+(this.hoverRect?.y??0),a=e.sourceEvent.target;if(t?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(o,r)){this.hoverDevice=="pointer"&&this.clearTooltip();return}if(a&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(a,"canvas-overlay",Yn))return;const l=this.pickNodes({x:e.currentX,y:e.currentY},"tooltip");if(!l||l.matches.length===0){this.hoverDevice=="pointer"&&this.clearTooltip();return}if(this.hoverDevice="pointer",l.distance===0){const{current:c,index:d,length:p}=this.tooltipCandidates.update(l.matches,this.chart.tooltip.pagination?i:void 0);this.showTooltip(c,o,r,{index:d,length:p})}else this.showTooltip(l.matches[0],o,r)}showTooltip({series:e,datum:t,datumIndex:i},n,s,o){const r=this.getTooltipContent(e,i,t,"tooltip");if(r!=null){const l=Yx.makeTooltipMeta({type:"pointermove",canvasX:n,canvasY:s},e,t,void 0);this.chart.ctx.tooltipManager.updateTooltip(this.id,l,r,o)}else this.chart.ctx.tooltipManager.removeTooltip(this.id)}maybeEnterInteractiveTooltip(e){return this.chart.tooltip.maybeEnterInteractiveTooltip(e,()=>{this.tooltip.lastHover=void 0,this.chart.ctx.tooltipManager.removeTooltip(this.id),this.chart.ctx.highlightManager.updateHighlight(this.id)})}changeHighlightDatum(e){const t=e.previousHighlight?.series,i=e.currentHighlight?.series;t?.properties.cursor&&e.previousHighlight?.datum&&this.chart.ctx.domManager.updateCursor(t.id),i?.properties.cursor&&i.properties.cursor!=="default"&&e.currentHighlight?.datum&&this.chart.ctx.domManager.updateCursor(i.id,i.properties.cursor),i==null||t==null?this.update(5,{clearCallbackCache:!0}):this.update(5,{seriesToUpdate:new Set([t,i].filter(Boolean)),clearCallbackCache:!0})}pickNodes(e,t,i){const n=[...this.series].reverse();let s;for(const o of n){if(!o.visible||!o.contentGroup.visible)continue;const r=o.pickNodes(e,t,i);if(r==null||r.datums.length===0)continue;const{datums:a,distance:l}=r;if(r.datums.length!==0){if(l===0){s?.distance!==0&&(s={matches:[],distance:0});for(const c of a){const{datumIndex:d}=c;s.matches.push({series:o,datum:c,datumIndex:d})}}else if(s==null||s.distance>l){const[c]=a,{datumIndex:d}=c;s={matches:[{series:o,datum:c,datumIndex:d}],distance:l}}}}return s}isTooltipEnabled(e){return e.tooltipEnabled??this.chart.tooltip.enabled}getTooltipContent(e,t,i,n){let s;if(n==="aria-label"||this.isTooltipEnabled(e)){const{cachedTooltipContent:o}=this;if(o!=null&&o.series===e&&o.datumIndex===t)s=o.content;else{const r=this.chart.getTooltipContent(e,t,i,n);this.cachedTooltipContent={series:e,datumIndex:t,content:r},s=r}}else this.cachedTooltipContent=void 0;return s}};function Jce(e,t){return e.type!==t}var tV=30,eue=class{constructor(e){this.seriesRoot=e,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(e){this.expectedSeriesCount=e}getGroupIndex(e){const{internalId:t,seriesGrouping:i}=e;return i?.groupIndex??t}getGroupType(e,t){return t?"top":e.type}requestGroup(e){const{internalId:t,contentGroup:i}=e,n=e.bringToFront(),s=this.getGroupType(e,n),o=this.getGroupIndex(e),r=this.series.get(t);if(r!=null)throw new Error(`AG Charts - series already has an allocated layer: ${JSON.stringify(r)}`);this.series.size===0&&(this.mode=this.expectedSeriesCount>=tV?"aggressive-grouping":"normal");let a=this.groups.get(s);a==null&&(a=new Map,this.groups.set(s,a));const l=this.lookupIdx(o);let c=a.get(l);return c==null&&(c={type:s,id:l,seriesIds:[],group:this.seriesRoot.appendChild(new ut({name:`${e.contentGroup.name??s}-managed-layer`,zIndex:e.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},a.set(l,c)),this.series.set(t,{layerState:c,seriesConfig:e,bringToFront:n}),c.seriesIds.push(t),c.group.appendChild(i),c.group}changeGroup(e){const{internalId:t,contentGroup:i}=e,n=e.bringToFront(),s=this.getGroupType(e,n),o=this.series.get(t),r=o?this.getGroupType(o.seriesConfig,o.bringToFront):void 0,a=this.getGroupIndex(e),l=this.lookupIdx(a),c=this.groups.get(s)?.get(l);if(!(r===s&&c?.seriesIds.includes(t)===!0))return this.series.has(t)&&this._releaseGroup({internalId:t,contentGroup:i,type:r}),this.requestGroup(e)}releaseGroup(e){const{internalId:t,contentGroup:i}=e,n=this.getGroupType(e,e.bringToFront());this._releaseGroup({internalId:t,contentGroup:i,type:n})}_releaseGroup(e){const{internalId:t,contentGroup:i,type:n}=e;if(!this.series.has(t))throw new Error(`AG Charts - series doesn't have an allocated layer: ${t}`);const s=this.series.get(t)?.layerState;s&&(s.seriesIds=s.seriesIds.filter(o=>o!==t),i.remove()),s?.seriesIds.length===0?(s.group.remove(),this.groups.get(s.type)?.delete(s.id),this.groups.get(n)?.delete(t)):s!=null&&s.seriesIds.length>0&&(s.group.zIndex=this.getLowestSeriesZIndex(s.seriesIds)),this.series.delete(t)}updateLayerCompositing(){for(const e of this.groups.values())for(const t of e.values()){const{group:i,seriesIds:n}=t;let s;n.length===0?s=!1:n.length>1?s=!0:s=this.series.get(n[0])?.seriesConfig.renderToOffscreenCanvas()===!0,i.renderToOffscreenCanvas=s,i.zIndex=this.getLowestSeriesZIndex(n)}}lookupIdx(e){return this.mode==="normal"?e:typeof e=="string"&&(e=Number(e.split("-").at(-1)),!Number.isFinite(e))?0:Math.floor(st(0,e/this.expectedSeriesCount,1)*tV)}destroy(){for(const e of this.groups.values())for(const t of e.values())t.group.remove();this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(e){let t;for(const i of e){const s=this.series.get(i)?.seriesConfig.contentGroup.zIndex??1;if(t==null||s==null){t=s;continue}t=rW(t,s)<=0?t:s}return t??1}},M3=class extends Qe{constructor(){super(...arguments),this.dragAction="drag"}};A([k],M3.prototype,"dragAction",2);var tue=class{constructor(e,t,i,n,s,o){this.chart=e,this.eventsHub=t,this.dataService=i,this.updateService=n,this.zoomManager=s,this.animationManager=o,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.cleanup=new Ui,this.cleanup.register(this.eventsHub.on("data:source-change",()=>this.onDataSourceChange()),this.eventsHub.on("data:load",()=>this.onDataLoad()),this.eventsHub.on("data:error",()=>this.onDataError()),this.updateService.addListener("update-complete",r=>this.onUpdateComplete(r)),this.eventsHub.on("zoom:change",()=>this.onZoomChange()))}destroy(){this.cleanup.flush()}onDataLoad(){this.animationManager.skip(),this.updateService.update(1)}onDataError(){this.updateService.update(4)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(e){!e.apiUpdate&&!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow(e)}onZoomChange(){this.dirtyZoom=!0}updateWindow(e){if(!this.dataService.isLazy())return;const t=this.getValidAxis();let i,n=!0;if(t){const s=this.zoomManager.getAxisZoom(t.id);(s.min!==0||s.max!==1)&&(i=this.getAxisWindow(t,s)),n=this.shouldRefresh(e,t,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,n&&this.dataService.load({windowStart:i?.min,windowEnd:i?.max})}getValidAxis(){return this.chart.axes.find(e=>e.type==="time")}shouldRefresh(e,t,i){if(e.apiUpdate||this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const n=this.lastAxisZooms.get(t.id);return n&&i.min===n.min&&i.max===n.max?!1:(this.lastAxisZooms.set(t.id,i),!0)}getAxisWindow(e,t){const{domain:i}=e.scale;if(!t||i.length===0||Number.isNaN(Number(i[0])))return;const n=Number(i[1])-Number(i[0]),s=new Date(Number(i[0])+n*t.min),o=new Date(Number(i[0])+n*t.max);return{min:s,max:o}}},iue=/^((?!chrome|android).)*safari/i,nue=/Version\/(\d+(\.\d+)?)/,sue=/Chrome/,oue=/Chrome\/(\d+)/,rue=/Edg/,aue=/OPR/;function lue(){const{userAgent:e}=$t("navigator");if(iue.test(e)){const t=nue.exec(e);if(t==null)return!1;const i=Number.parseFloat(t[1]),n=Math.floor(i)>16;return n||fe.warnOnce(`Unsupported Safari version: ${i}; ${e}`),!n}else if(sue.test(e)&&!rue.test(e)&&!aue.test(e)){const t=oue.exec(e);if(t==null)return!1;const i=Number.parseInt(t[1],10),n=i>126;return n||fe.warnOnce(`Unsupported Chrome version: ${i}; ${e}`),!n}return!1}var cue=new Set(["map-shape-background","map-line-background"]),uue=class{constructor(e,t,i,n,s,o,r){this.chartLike=e,this.overlays=t,this.eventsHub=i,this.dataService=n,this.localeManager=s,this.animationManager=o,this.domManager=r,this.cleanup=new Ui,this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(_I),this.cleanup.register(this.eventsHub.on("layout:complete",a=>this.onLayoutComplete(a)))}destroy(){this.cleanup.flush(),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:e}}){const t=this.dataService.isLoading(),i=this.chartLike.series.some(c=>c.hasData),n=this.chartLike.series.some(c=>c.visible&&!cue.has(c.type));this.overlays.darkTheme?this.overlayElem.classList.add(K_):this.overlayElem.classList.remove(K_),this.overlayElem.style.left=`${e.x}px`,this.overlayElem.style.top=`${e.y}px`,this.overlayElem.style.width=`${e.width}px`,this.overlayElem.style.height=`${e.height}px`;const s=t,o=!t&&!i,r=i&&!n,a=this.overlays.unsupportedBrowser.enabled&&lue();s?this.showOverlay(this.overlays.loading,e):this.hideOverlay(this.overlays.loading),o?this.showOverlay(this.overlays.noData,e):this.hideOverlay(this.overlays.noData),r?this.showOverlay(this.overlays.noVisibleSeries,e):this.hideOverlay(this.overlays.noVisibleSeries),a?this.showOverlay(this.overlays.unsupportedBrowser,e):this.hideOverlay(this.overlays.unsupportedBrowser);const l=s||o||r||a;Tt(this.overlayElem,"aria-hidden",!l)}showOverlay(e,t){if(!e.enabled)return;const i=e.getElement(this.chartLike,this.animationManager,this.localeManager,t);this.overlayElem.appendChild(i)}hideOverlay(e){e.removeElement(()=>{this.overlayElem.innerText=""},this.animationManager)}},or=at.create(!0,"opts"),ji=class D3 extends DW{constructor(t,i){var n;super(),this.id=na(this),this.seriesRoot=new hs({name:`${this.id}-series-root`,zIndex:7}),this.annotationRoot=new hs({name:`${this.id}-annotation-root`,zIndex:11}),this.titleGroup=new ut({name:"titles",zIndex:15}),this.debug=at.create(),this.extraDebugStats={},this.data=Sg.empty(),this._firstAutoSize=!0,this._autoSizeNotify=new qG,this.chartCaptions=new yM,this.padding=new Fh(20),this.keyboard=new dL,this.touch=new M3,this.mode="standalone",this.styleNonce=void 0,this.formatter=void 0,this.suppressFieldDotNotation=!1,this.loadGoogleFonts=!1,this.destroyed=!1,this.cleanup=new Ui,this.chartAnimationPhase="initial",this.modulesManager=new Ice,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this.syncStatus="init",this.fireEventWrapper=d=>super.fireEvent(d),this.apiUpdate=!1,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new qG,this.performUpdateType=8,this.runningUpdateType=8,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new Sre,this.clearCallbackCacheOnUpdate=!1,this.updateRequestors={},this.performUpdateTrigger=Dre(({count:d})=>{this.destroyed||this.updateMutex.acquire(async()=>{try{await this.performUpdate(d)}catch(p){fe.error("update error",p,p.stack)}}).catch(p=>fe.errorOnce(p))}),this._performUpdateSplits={},this._previousSplit=0,this.axes=[],this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=d=>{this.fireEvent(d)},this.onSeriesNodeDoubleClick=d=>{this.fireEvent(d)},this.onSeriesVisibilityChange=d=>{this.fireEvent(d)},this.seriesGroupingChanged=d=>{if(!(d instanceof Jx))return;const{series:p,seriesGrouping:g}=d;if(p.contentGroup.isRoot())return;const m=this.seriesLayerManager.changeGroup({internalId:p.internalId,type:p.type,contentGroup:p.contentGroup,bringToFront:()=>p.bringToFront(),renderToOffscreenCanvas:()=>p.renderToOffscreenCanvas(),seriesGrouping:g});m!=null&&p.attachSeries(m,this.seriesRoot,this.annotationRoot)},this.chartOptions=t;const s=i?.scene,o=i?.container??t.processedOptions.container??void 0,r=i?.styleContainer??t.specialOverrides.styleContainer;s&&(this._firstAutoSize=!1,this._lastAutoSize=[s.width,s.height,s.pixelRatio]);const a=new ut({name:"root"});a.visible=!1,a.append(this.seriesRoot),a.append(this.annotationRoot),a.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new kr,this.seriesLayerManager=new eue(this.seriesRoot),this.mode=t.userOptions.mode??this.mode,this.styleNonce=t.processedOptions.styleNonce;const l=this.ctx=new yle(this,{chartType:this.getChartType(),scene:s,root:a,container:o,styleContainer:r,domMode:t.optionMetadata.domMode,withDragInterpretation:t.optionMetadata.withDragInterpretation??!0,syncManager:new Wle(this),fireEvent:d=>this.fireEvent(d),updateCallback:(d,p)=>this.update(d,p),updateMutex:this.updateMutex});this.cleanup.register(l.eventsHub.on("dom:resize",()=>this.parentResize(l.domManager.containerSize))),this.overlays=new Vf,(n=this.overlays.loading).renderer??(n.renderer=()=>kce(this.overlays.loading.getText(l.localeManager),l.animationManager.defaultDuration)),this.processors=[new tue(this,l.eventsHub,l.dataService,l.updateService,l.zoomManager,l.animationManager),new uue(this,this.overlays,l.eventsHub,l.dataService,l.localeManager,l.animationManager,l.domManager)],this.highlight=new aL,this.container=o;const c=this.getModuleContext();l.domManager.setDataBoolean("animating",!1),l.domManager.setDataNumber("animationTimeMs",0),this.seriesAreaManager=new Qce(this.initSeriesAreaDependencies()),this.cleanup.register(l.layoutManager.registerElement(0,d=>{d.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(d)}),l.eventsHub.on("layout:complete",d=>this.chartCaptions.positionAbsoluteCaptions(d)),l.eventsHub.on("data:load",d=>{this.data=new Sg(d.data)}),this.title.registerInteraction(c,"beforebegin"),this.subtitle.registerInteraction(c,"beforebegin"),this.footnote.registerInteraction(c,"afterend"),nl.addWindowEvent("page-left",()=>this.destroy()),l.animationManager.addListener("animation-frame",()=>{this.update(7),l.domManager.setDataNumber("animationTimeMs",l.animationManager.getCumulativeAnimationTime())}),l.animationManager.addListener("animation-start",()=>l.domManager.setDataBoolean("animating",!0)),l.animationManager.addListener("animation-stop",()=>{l.domManager.setDataBoolean("animating",!1),l.domManager.setDataNumber("animationTimeMs",l.animationManager.getCumulativeAnimationTime())}),l.eventsHub.on("zoom:change",()=>{for(const p of this.series)p.animationState?.transition("updateData");const d=this.chartAnimationPhase!=="initial";this.update(4,{forceNodeDataRefresh:!0,skipAnimations:d})})),this.parentResize(l.domManager.containerSize)}static getInstance(t){return D3.chartsInstances.get(t)}get canvasElement(){return this.ctx.scene.canvas.element}download(t,i){this.ctx.scene.download(t,i)}getCanvasDataURL(t){return this.ctx.scene.getDataURL(t)}toSVG(){return this.ctx.scene.toSVG()}get seriesAreaBoundingBox(){return this.seriesAreaManager.bbox}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}getChartOptions(){return this.queuedChartOptions.at(-1)??this.chartOptions}overrideFocusVisible(t){this.seriesAreaManager.focusIndicator?.overrideFocusVisible(t)}fireEvent(t){Zr(this,this.fireEventWrapper,t)}initSeriesAreaDependencies(){const{ctx:t,tooltip:i,highlight:n,overlays:s,seriesRoot:o,mode:r}=this,a=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,getTooltipContent:(p,g,m,y)=>this.getTooltipContent(p,g,m,y),chartType:a,ctx:t,tooltip:i,highlight:n,overlays:s,seriesRoot:o,mode:r}}getModuleContext(){return this.ctx}getTooltipContent(t,i,n,s){const r=s==="aria-label"||t.properties.tooltip.enabled!==!1?t.getTooltipContent(i,n):void 0,a=r==null?[]:[r];if(this.tooltip.mode!=="shared"||this.series.length===1)return a;const l=t.getCategoryValue(i);return l==null?a:this.series.flatMap(c=>{if(c===t)return a;if(!c.isEnabled()||c.properties.tooltip.enabled===!1)return[];const d=c.datumIndexForCategoryValue(l),p=d==null?void 0:c.getTooltipContent(d,void 0);return p==null?[]:[p]})}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(t=>t.enabled&&t.text).map(t=>t.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){this.chartAnimationPhase="initial";for(const t of this.series)t.resetAnimation(this.chartAnimationPhase);for(const t of this.axes)t.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clearCanvas()}destroy(t){if(this.destroyed)return;const i=t?.keepTransferableResources;let n;this.performUpdateType=8,this.cleanup.flush();for(const s of this.processors)s.destroy();this.overlays.destroy(),this.modulesManager.destroy(),i?(this.ctx.scene.strip(),n={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy();for(const s of this.axes)s.destroy();return this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),n}requestFactoryUpdate(t){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(async()=>{if(!this.destroyed)try{await t(this)}finally{this.destroyed||this._pendingFactoryUpdatesCount--}}).catch(i=>fe.errorOnce(i)))}clearCallbackCache(){this.ctx.callbackCache.invalidateCache();for(const t of this.series)t.resetDatumCallbackCache()}update(t=0,i){if(this.destroyed)return;const{forceNodeDataRefresh:n=!1,skipAnimations:s,seriesToUpdate:o=this.series,newAnimationBatch:r,apiUpdate:a=!1,clearCallbackCache:l=!1}=i??{};if(this.apiUpdate=a,this.ctx.widgets.seriesWidget.setDragTouchEnabled(this.touch.dragAction!=="none"),n)for(const c of this.series)c.markNodeDataDirty();for(const c of o)this.seriesToUpdate.add(c);if(s&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),r&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),(t===0||l)&&(this.clearCallbackCacheOnUpdate=!0),this.debug.check()){let c=new Error("Stack trace for update tracking").stack??"<unknown>";c=c.replaceAll(/\([^)]*/g,""),this.updateRequestors[c]=t}t<this.performUpdateType&&(this.performUpdateType=t,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(i?.backOffMs))}updateSplits(t){const i=this._performUpdateSplits;i[t]??(i[t]=0),i[t]+=performance.now()-this._previousSplit,this._previousSplit=performance.now()}async performUpdate(t){const{performUpdateType:i,extraDebugStats:n,_performUpdateSplits:s,ctx:o}=this,r=[...this.seriesToUpdate];switch(this.clearCallbackCacheOnUpdate&&(this.clearCallbackCacheOnUpdate=!1,this.clearCallbackCache()),this.performUpdateType=8,this.seriesToUpdate.clear(),this.runningUpdateType=i,this.updateShortcutCount===0&&i<7&&(o.animationManager.startBatch(this._performUpdateSkipAnimations),o.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.ctx.scene.updateDebugFlags(),this.debug("Chart.performUpdate() - start",_y[i]),this._previousSplit=performance.now(),s.start??(s.start=this._previousSplit),i){case 0:if(this.checkUpdateShortcut(0))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:if(this.checkUpdateShortcut(1))break;await this.updateData(),this.updateSplits("");case 2:if(this.checkUpdateShortcut(2))break;await this.processData(),this.seriesAreaManager.dataChanged(),this.updateSplits("");case 3:if(this.checkUpdateShortcut(3))break;await this.processDomains(),this.updateSplits("");case 4:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(4))break;await this.processLayout(),this.updateSplits("");case 5:{if(this.checkUpdateShortcut(5))break;this.seriesRoot.renderToOffscreenCanvas=this.highlight.drawingMode==="cutout",await this.updateSeries(r),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing(),this.updateSplits("")}case 6:if(this.checkUpdateShortcut(6))break;o.updateService.dispatchPreSceneRender(),this.updateSplits("");case 7:if(this.checkUpdateShortcut(7))break;o.animationManager.endBatch(),n.updateShortcutCount=this.updateShortcutCount,o.scene.render({debugSplitTimes:s,extraDebugStats:n,seriesRect:this.seriesRect}),this.extraDebugStats={};for(const l of Object.keys(s))delete s[l];this.ctx.domManager.incrementDataCounter("sceneRenders"),this.ctx.domManager.postRenderUpdate();case 8:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,o.animationManager.endBatch()}this.destroyed||(o.updateService.dispatchUpdateComplete(this.apiUpdate),this.apiUpdate=!1,this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=8,this.syncStatus="ready"),this._performUpdateNotify.notify();const a=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((a-s.start)*100)/100,count:t,performUpdateType:_y[i]})}updateThemeClassName(){const t="ag-charts-theme-",i=[`${t}default`,`${t}default-dark`];let n=i[0],s=!1,{theme:o}=this.chartOptions.processedOptions;for(;typeof o!="string"&&o!=null;)o=o.baseTheme;typeof o=="string"&&(n=o.replace("ag-",t),s=o.includes("-dark")),i.includes(n)||(n=s?i[1]:i[0]),this.ctx.domManager.setThemeClass(n)}updateDOM(){this.updateThemeClassName();const{enabled:t,tabIndex:i}=this.keyboard;this.ctx.domManager.setTabGuardIndex(t?i??0:-1),this.ctx.domManager.setThemeParameters(this.chartOptions.themeParameters)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(t){return this.destroyed?!0:this.updateShortcutCount>3?(fe.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t?(this.updateShortcutCount++,!0):!1}async checkFirstAutoSize(){this.width!=null&&this.height!=null||this._lastAutoSize||await this._autoSizeNotify.await(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}onAxisChange(t,i){i==null&&t.length===0||this.ctx.axisManager.updateAxes(i??[],t)}onSeriesChange(t,i){const n=i?.filter(s=>!t.includes(s))??[];this.destroySeries(n),this.seriesLayerManager?.setSeriesCount(t.length);for(const s of t){if(i?.includes(s))continue;const o=this.seriesLayerManager.requestGroup(s);s.attachSeries(o,this.seriesRoot,this.annotationRoot),s.chart={},Object.defineProperty(s.chart,"mode",{get:()=>this.mode}),Object.defineProperty(s.chart,"isMiniChart",{get:()=>!1}),Object.defineProperty(s.chart,"seriesRect",{get:()=>this.seriesRect}),s.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(s),s.addChartEventListeners()}this.seriesAreaManager?.seriesChanged(t)}destroySeries(t){if(t)for(const i of t)i.removeEventListener("seriesNodeClick",this.onSeriesNodeClick),i.removeEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),i.removeEventListener("groupingChanged",this.seriesGroupingChanged),i.destroy(),this.seriesLayerManager.releaseGroup(i),i.detachSeries(void 0,this.seriesRoot,this.annotationRoot),i.chart=void 0}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("seriesNodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&t.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),t.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(const t of this.axes)t.boundSeries=this.series.filter(i=>i.axes[t.direction]===t)}assignAxesToSeries(){const t=I1(this.axes,i=>i.direction);for(const i of this.series)for(const n of i.directions){const s=t[n];if(!s){fe.warnOnce(`no available axis for direction [${n}]; check series and axes configuration.`);return}const o=i.getKeys(n),r=s.find(a=>!a.keys.length||o.some(l=>a.keys.includes(l)));if(!r){fe.warnOnce(`no matching axis for direction [${n}] and keys [${o}]; check series and axes configuration.`);return}i.axes[n]=r}}parentResize(t){if(t==null||this.width!=null&&this.height!=null)return;let{width:i,height:n}=t;const{pixelRatio:s}=t;if(i=Math.floor(i),n=Math.floor(n),i===0&&n===0)return;const[o=0,r=0,a=1]=this._lastAutoSize??[];o===i&&r===n&&a===s||(this._lastAutoSize=[i,n,s],this.resize("SizeMonitor",{}))}resize(t,i){const{scene:n,animationManager:s}=this.ctx,{inWidth:o,inHeight:r,inMinWidth:a,inMinHeight:l,inOverrideDevicePixelRatio:c}=i;this.ctx.domManager.setSizeOptions(a??this.minWidth,l??this.minHeight,o??this.width,r??this.height);const d=o??this.width??this._lastAutoSize?.[0],p=r??this.height??this._lastAutoSize?.[1],g=c??this.overrideDevicePixelRatio??this._lastAutoSize?.[2];if(this.debug(`Chart.resize() from ${t}`,{width:d,height:p,pixelRatio:g,stack:new Error("Stack trace for resize tracking").stack}),!(d==null||p==null||!Kt(d)||!Kt(p))&&n.resize(d,p,g)){s.reset();let m=!0;(this.width==null||this.height==null)&&this._firstAutoSize&&(m=!1,this._firstAutoSize=!1),this.update(4,{forceNodeDataRefresh:!0,skipAnimations:m}),this._autoSizeNotify.notify()}}async updateData(){for(const i of this.series)i.setChartData(this.data);const t=this.modulesManager.mapModules(i=>i.updateData?.(this.data));await Promise.all(t.filter(i=>i!=null&&typeof i=="object"))}async processData(){this.series.some(s=>s.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=new xU(this.mode,this.suppressFieldDotNotation),i=this.series.map(s=>s.processData(t)),n=this.modulesManager.mapModules(s=>s.processData?.(t));this._cachedData=t.execute(this._cachedData),this.updateSplits(""),await Promise.all([...i,...n.filter(s=>s!=null)]),this.updateLegends()}async processDomains(){for(const t of this.axes)t.processData();for(const t of this.series)t.updatedDomains()}updateLegends(t){for(const{legend:i,legendType:n}of this.modulesManager.legends())n==="category"?this.setCategoryLegendData(t):this.setLegendData(n,i)}setCategoryLegendData(t){const{ctx:{legendManager:i,stateManager:n}}=this;if(t)for(const o of this.series){const r=t.find(a=>a.seriesId===o.id);o.onLegendInitialState("category",r)}const s=this.series.flatMap(o=>{const r=o.getLegendData("category");return i.updateData(o.id,r),r});if(t){n.setStateAndRestore(i,t);return}if(this.mode!=="integrated"){const o={},r=new Map(this.series.map(a=>[a.id,a.type]));for(const{seriesId:a,symbol:{marker:l},label:c}of s.filter(d=>!d.hideInLegend)){if(l.fill==null)continue;const d=r.get(a),p=o[d]??(o[d]=new Map);p.has(c.text)?p.get(c.text)!==l.fill&&fe.warnOnce(`legend item '${_n(c.text)}' has multiple fill colors, this may cause unexpected behaviour.`):p.set(c.text,l.fill)}}i.update()}setLegendData(t,i){i.data=this.series.filter(n=>n.properties.showInLegend).flatMap(n=>n.getLegendData(t))}async processLayout(){const t=this.animationRect,{width:i,height:n}=this.ctx.scene,s=this.ctx.layoutManager.createContext(i,n);await this.performLayout(s),t&&!this.animationRect?.equals(t)&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(t){const{seriesRect:i}=this;await Promise.all(t.map(n=>n.update({seriesRect:i})).filter(n=>n!=null)),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter(n=>n.visible&&n.usesPlacedLabels),this.padding,this.seriesRect)}async waitForUpdate(t,i){const n=$t("agChartsDebugTimeout");n==null?(t??(t=1e4),i??(i=!1)):(t=n,i??(i=!0));const s=performance.now();for(;(this._pendingFactoryUpdatesCount>0||this.performUpdateType!==8||this.runningUpdateType!==8||this.ctx.scene.waitingForUpdate()||this.data.hasPendingTransactions())&&!this.destroyed;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),(this.performUpdateType!==8||this.runningUpdateType!==8||this.data.hasPendingTransactions())&&await this._performUpdateNotify.await(),performance.now()-s>t){const o=`Chart.waitForUpdate() timeout of ${t} reached - first chart update taking too long.`;if(i)throw new Error(o);fe.warnOnce(o)}xW()&&await ZG(),this.ctx.scene.waitingForUpdate()&&await ZG(50)}}filterMiniChartSeries(t){return t?.filter(i=>i.showInMiniChart!==!1)}applyOptions(t){const n=this.firstApply?t.processedOptions:t.diffOptions(this.chartOptions);if(n==null||Object.keys(n).length===0){or("Chart.applyOptions() - no delta, forcing re-layout",n),this.update(4,{apiUpdate:!0,newAnimationBatch:!0});return}const s=this.firstApply?{}:this.chartOptions.processedOptions,o=t.processedOptions;or("Chart.applyOptions() - applying delta",n);const r=this.applyModules(o),a=["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer","formatter"];n.listeners&&this.registerListeners(this,n.listeners),By(this,n,{skip:a});let l=!1,c="no-op";n.series!=null&&(c=this.applySeries(this,n.series,s?.series),l=!0),c==="replaced"&&this.resetAnimations(),this.applyAxes(this,o,s,c,[])&&(l=!0),n.data&&(this.data=new Sg(n.data)),n.legend?.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,n.legend.listeners),n.locale?.localeText&&(this.modulesManager.getModule("locale").localeText=n.locale?.localeText),this.chartOptions=t;const d=this.modulesManager.getModule("navigator"),p=this.modulesManager.getModule("zoom");!d?.enabled&&!p?.enabled&&this.ctx.zoomManager.updateZoom("chart");const g=d?.miniChart,m=o.navigator?.miniChart?.series??o.series;g?.enabled===!0&&m!=null?this.applyMiniChartOptions(g,m,o,s):g?.enabled===!1&&(g.series=[],g.axes=[]),this.ctx.annotationManager.setAnnotationStyles(t.annotationThemes),l||(l=this.shouldForceNodeDataRefresh(n,c));const b=l||r?0:4;if(this.maybeResetAnimations(c),this.shouldClearLegendData(o,s,c)&&this.ctx.legendManager.clearData(),this.applyInitialState(o),this.ctx.formatManager.setFormatter(o.formatter),or("Chart.applyOptions() - update type",_y[b],{seriesStatus:c,forceNodeDataRefresh:l}),t.optionsProcessingTime!==void 0){this._performUpdateSplits[""]=t.optionsProcessingTime;const C=performance.now()-t.optionsProcessingTime;this._performUpdateSplits.start=C}this.update(b,{apiUpdate:!0,forceNodeDataRefresh:l,newAnimationBatch:!0,clearCallbackCache:!0}),this.firstApply=!1}applyInitialState(t){const{annotationManager:i,chartTypeOriginator:n,historyManager:s,stateManager:o,zoomManager:r}=this.ctx,{initialState:a}=t;if("annotations"in t&&t.annotations?.enabled&&a?.annotations!=null){const l=a.annotations.map(c=>{const d=i.getAnnotationTypeStyles(c.type);return _t(c,d)});o.setState(i,l)}a?.chartType!=null&&o.setState(n,a.chartType),(t.navigator?.enabled||t.zoom?.enabled)&&a?.zoom!=null&&o.setState(r,a.zoom),a?.legend!=null&&this.updateLegends(a.legend),a!=null&&s.clear()}maybeResetAnimations(t){if(this.mode==="standalone")switch(t){case"series-grouping-change":case"replaced":this.resetAnimations();break}}shouldForceNodeDataRefresh(t,i){const n=!!t.data||i==="data-change"||i==="replaced",s=cL.getKeys(),o=Object.values(s).some(a=>t[a]!=null),r=t.title!=null&&t.subtitle!=null||t.formatter!=null;return n||o||r}shouldClearLegendData(t,i,n){const s=n==="replaced"||n==="series-grouping-change"||n==="updated"&&(t.series?.length!==i.series?.length||!t.series?.every((r,a)=>r.type===i.series?.[a].type)),o=i.legend!=null&&t.legend==null;return s||o}applyMiniChartOptions(t,i,n,s){const o=s?.navigator?.miniChart?.series??s?.series,r=this.applySeries(t,this.filterMiniChartSeries(i),this.filterMiniChartSeries(o));this.applyAxes(t,n,s,r,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const a=t.series;for(const d of a)d.properties.id=void 0;const l=t.axes,c=l.find(d=>d.direction==="x");for(const d of l)d.nice=!1,d.gridLine.enabled=!1,d.label.enabled=d===c,d.tick.enabled=!1,d.interactionEnabled=!1;if(c!=null){const d=n.navigator?.miniChart,p=d?.label,g=d?.label?.interval;if(c.line.enabled=!1,c.label.set(Ae(p,["interval","autoRotate","autoRotateAngle","itemStyler","minSpacing","rotation"])),c.type==="grouped-category"){c.label.enabled=!1,c.label.rotation=0;const{depthOptions:m}=c;if(m.length===0)m.set([{label:{enabled:!0}}]);else for(let y=1;y<m.length;y++)m[y].label.enabled=!1}else(c.type==="time"||c.type==="unit-time"||c.type==="ordinal-time")&&(c.parentLevel.enabled=!1);c.interval.step=g?.step,c.interval.values=g?.values,c.interval.minSpacing=g?.minSpacing,c.interval.maxSpacing=g?.maxSpacing}}applyModules(t){const{type:i}=this.constructor;let n=!1;for(const s of za.byType("root","legend")){const r=t[s.optionsKey]!=null&&s.chartTypes.includes(i);r!==this.modulesManager.isEnabled(s)&&(r?(this.modulesManager.addModule(s,a=>a.moduleFactory(this.getModuleContext())),s.type==="legend"&&this.modulesManager.getModule(s)?.attachLegend(this.ctx.scene),this[s.optionsKey]=this.modulesManager.getModule(s)):(this.modulesManager.removeModule(s),delete this[s.optionsKey]),n=!0)}return n}initSeriesDeclarationOrder(t){for(let i=0;i<t.length;i++)t[i].setSeriesIndex(i)}applySeries(t,i,n){if(!i)return"no-change";const s=Ece(t.series,i,n);if(s.status==="no-overlap"){or(`Chart.applySeries() - creating new series instances, status: ${s.status}`,s);const d=i.map(p=>this.createSeries(p));return this.initSeriesDeclarationOrder(d),t.series=d,"replaced"}or("Chart.applySeries() - matchResult",s);const o=[];let r=!1,a=!1,l=!1;const c=s.changes.toSorted((d,p)=>d.targetIdx-p.targetIdx);for(const d of c)switch(a||(a=d.status==="series-grouping"),r||(r=d.diff?.data!=null),l||(l=d.status!=="no-op"),d.status){case"add":{const p=this.createSeries(d.opts);o.push(p),or("Chart.applySeries() - created new series",p);break}case"remove":or(`Chart.applySeries() - removing series at previous idx ${d.idx}`,d.series);break;case"no-op":o.push(d.series),or(`Chart.applySeries() - no change to series at previous idx ${d.idx}`,d.series);break;case"series-grouping":case"update":default:{const{series:p,diff:g,idx:m}=d;or(`Chart.applySeries() - applying series diff previous idx ${m}`,g,p),this.applySeriesValues(p,g),p.markNodeDataDirty(),o.push(p)}}return this.initSeriesDeclarationOrder(o),or("Chart.applySeries() - final series instances",o),t.series=o,a?"series-grouping-change":r?"data-change":l?"updated":"no-op"}applyAxes(t,i,n,s,o=[]){if(!("axes"in i)||!i.axes)return!1;o=["axes[].type",...o];const r=i.axes;if(!(s==="replaced")&&t.axes.length===r.length&&t.axes.every((c,d)=>c.type===r[d].type)&&c3(n)){for(const[c,d]of t.axes.entries()){const p=n.axes?.[c]??{},g=qa(p,r[c]);or(`Chart.applyAxes() - applying axis diff idx ${c}`,g);const m=`axes[${c}]`;By(d,g,{path:m,skip:o})}return!0}return or(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${s}`),t.axes=this.createAxis(r,o),!0}createSeries(t){const i=yr.create(t.type,this.getModuleContext());return this.applySeriesOptionModules(i,t),this.applySeriesValues(i,t),i}applySeriesOptionModules(t,i){const n=t.createModuleContext(),s=t.getModuleMap();for(const o of za.byType("series-option"))o.optionsKey in i&&o.seriesTypes.includes(t.type)&&s.addModule(o,r=>r.moduleFactory(n))}applySeriesValues(t,i){const n=t.getModuleMap(),{type:s,data:o,listeners:r,seriesGrouping:a,showInMiniChart:l,...c}=i;for(const d of Sb)if(d.type==="series-option"&&d.optionsKey in c){const p=n.getModule(d.optionsKey);if(p){const g=c[d.optionsKey];delete c[d.optionsKey],p.properties.set(g)}}c.visible!=null&&(t.visible=c.visible),t.properties.set(c),"data"in i&&t.setOptionsData(o==null?void 0:Sg.wrap(o)),r&&this.registerListeners(t,r),"seriesGrouping"in i&&(a==null?t.seriesGrouping=void 0:t.seriesGrouping={...t.seriesGrouping,...a})}createAxis(t,i){const n=[],s=this.getModuleContext();for(let o=0;o<t.length;o++){const r=t[o],a=nh.create(r.type,s);this.applyAxisModules(a,r),By(a,r,{path:`axes[${o}]`,skip:i}),n.push(a)}return Ace(n),n}applyAxisModules(t,i){const n=t.createModuleContext(),s=t.getModuleMap();for(const o of za.byType("axis-option")){const r=i[o.optionsKey]!=null;r!==s.isEnabled(o)&&(r?(s.addModule(o,a=>a.moduleFactory(n)),t[o.optionsKey]=s.getModule(o)):(s.removeModule(o),delete t[o.optionsKey]))}}registerListeners(t,i){t.clearEventListeners();for(const[n,s]of $r(i))t.addEventListener(n,s)}async applyTransaction(t){await this.updateMutex.acquire(()=>{this.data.addTransaction(t),this.update(1,{apiUpdate:!0,skipAnimations:!0})}),await this.waitForUpdate()}};ji.chartsInstances=new WeakMap;A([ms({newValue(e){this.destroyed||(this.ctx.domManager.setContainer(e),ji.chartsInstances.set(e,this))},oldValue(e){ji.chartsInstances.delete(e)}})],ji.prototype,"container",2);A([ms({newValue(e){this.resize("width option",{inWidth:e})}})],ji.prototype,"width",2);A([ms({newValue(e){this.resize("height option",{inHeight:e})}})],ji.prototype,"height",2);A([ms({newValue(e){this.resize("minWidth option",{inMinWidth:e})}})],ji.prototype,"minWidth",2);A([ms({newValue(e){this.resize("minHeight option",{inMinHeight:e})}})],ji.prototype,"minHeight",2);A([ms({newValue(e){this.resize("overrideDevicePixelRatio option",{inOverrideDevicePixelRatio:e})}})],ji.prototype,"overrideDevicePixelRatio",2);A([k],ji.prototype,"padding",2);A([k],ji.prototype,"keyboard",2);A([k],ji.prototype,"touch",2);A([k],ji.prototype,"mode",2);A([k],ji.prototype,"styleNonce",2);A([Fs("chartCaptions.title")],ji.prototype,"title",2);A([Fs("chartCaptions.subtitle")],ji.prototype,"subtitle",2);A([Fs("chartCaptions.footnote")],ji.prototype,"footnote",2);A([k],ji.prototype,"formatter",2);A([k],ji.prototype,"suppressFieldDotNotation",2);A([k],ji.prototype,"loadGoogleFonts",2);A([ms({changeValue(e,t){this.onAxisChange(e,t)}})],ji.prototype,"axes",2);A([ms({changeValue(e,t){this.onSeriesChange(e,t)}})],ji.prototype,"series",2);var GM=ji;function iV(e,t){let i=[];const n=e?.series?.[0]?.type,s=n==="linear-gauge"||n==="radial-gauge",o=n?Bn.get(n):"unknown";for(const r of Sb)if(!(o!=="unknown"&&!r.chartTypes.includes(o))){if(r.type==="root"||r.type==="legend"){const a=e[r.optionsKey];if(a==null)continue;r.optionsInnerKey?a[r.optionsInnerKey]&&(i.push(`${r.optionsKey}.${r.optionsInnerKey}`),delete a[r.optionsInnerKey]):(i.push(r.optionsKey),delete e[r.optionsKey])}else if(r.type==="axis"){if(!("axes"in e)||!ht(e.axes)||!e.axes?.some(a=>a.type===r.identifier))continue;i.push(`axis[type=${r.identifier}]`),e.axes=e.axes.filter(a=>a.type!==r.identifier)}else if(r.type==="axis-option"){if(!("axes"in e)||!ht(e.axes)||!e.axes?.some(a=>a[r.optionsKey]))continue;i.push(`axis.${r.optionsKey}`);for(const a of e.axes)a[r.optionsKey]&&delete a[r.optionsKey]}else if(r.type==="series"){if(r.community||!ht(e.series)||!e.series?.some(a=>a.type===r.identifier))continue;i.push(`series[type=${r.identifier}]`),e.series=e.series.filter(a=>a.type!==r.identifier)}else if(r.type==="series-option"){if(!ht(e.series)||!e.series?.some(a=>a[r.optionsKey]))continue;i.push(`series.${r.optionsKey}`);for(const a of e.series)a[r.optionsKey]&&delete a[r.optionsKey]}}if(i.length&&!t){s&&(i=["AgCharts.createGauge"]);let r="ag-charts-enterprise",a="https://www.ag-grid.com/charts/javascript/installation/";e.mode==="integrated"&&(r="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",a="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),fe.warnOnce([`unable to use these enterprise features as '${r}' has not been loaded:`,"",...i,"",`See: ${a}`].join(`
`))}}function due(e){const t="mode"in e&&e.mode==="integrated";for(const i of za.byType("root","legend")){const n=e[i.optionsKey],s=n!=null&&n.enabled===!1,o=!("removable"in i)||i.removable===!0||i.removable==="standalone-only"&&!t;s&&o&&delete e[i.optionsKey]}}function A3(e){return e?.up||e?.down||e?.neutral?"user-full":e?.fills||e?.strokes?"user-indexed":"inbuilt"}var cn={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Pl={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},EL={};il(EL,{DEFAULT_ANNOTATION_HANDLE_FILL:()=>Ob,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>_b,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>Vb,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>Dv,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>Av,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>Bb,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>Gb,DEFAULT_CAPTION_ALIGNMENT:()=>vu,DEFAULT_CAPTION_LAYOUT_STYLE:()=>yu,DEFAULT_FIBONACCI_STROKES:()=>Mv,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>An,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>Bi,DEFAULT_GRIDLINE_ENABLED:()=>Vr,DEFAULT_POLAR_SERIES_STROKE:()=>UM,DEFAULT_SEPARATION_LINES_COLOUR:()=>Nb,DEFAULT_SHADOW_COLOUR:()=>Vh,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>$M,DEFAULT_TEXTBOX_COLOR:()=>jb,DEFAULT_TEXTBOX_FILL:()=>zb,DEFAULT_TEXTBOX_STROKE:()=>Hb,DEFAULT_TEXT_ANNOTATION_COLOR:()=>Fb,DEFAULT_TOOLBAR_POSITION:()=>Wb,IS_DARK_THEME:()=>Fg,PALETTE_ALT_DOWN_FILL:()=>LL,PALETTE_ALT_DOWN_STROKE:()=>IL,PALETTE_ALT_NEUTRAL_FILL:()=>PL,PALETTE_ALT_NEUTRAL_STROKE:()=>NL,PALETTE_ALT_UP_FILL:()=>kL,PALETTE_ALT_UP_STROKE:()=>TL,PALETTE_DOWN_FILL:()=>HM,PALETTE_DOWN_STROKE:()=>VM,PALETTE_NEUTRAL_FILL:()=>WM,PALETTE_NEUTRAL_STROKE:()=>jM,PALETTE_UP_FILL:()=>zM,PALETTE_UP_STROKE:()=>_M});var Fg=Symbol("is-dark-theme"),Nb=Symbol("default-separation-lines-colour"),Vh=Symbol("default-shadow-colour"),yu=Symbol("default-caption-layout-style"),vu=Symbol("default-caption-alignment"),_M=Symbol("palette-up-stroke"),VM=Symbol("palette-down-stroke"),zM=Symbol("palette-up-fill"),HM=Symbol("palette-down-fill"),jM=Symbol("palette-neutral-stroke"),WM=Symbol("palette-neutral-fill"),TL=Symbol("palette-alt-up-stroke"),IL=Symbol("palette-alt-down-stroke"),kL=Symbol("palette-alt-up-fill"),LL=Symbol("palette-alt-down-fill"),PL=Symbol("palette-gray-fill"),NL=Symbol("palette-gray-stroke"),UM=Symbol("default-polar-series-stroke"),$M=Symbol("default-sparkline-crosshair-stroke"),Bi=Symbol("default-financial-charts-annotation-stroke"),Mv=Symbol("default-hierarchy-strokes"),Fb=Symbol("default-text-annotation-color"),An=Symbol("default-financial-charts-annotation-background-fill"),Ob=Symbol("default-annotation-handle-fill"),Bb=Symbol("default-annotation-statistics-fill"),Gb=Symbol("default-annotation-statistics-stroke"),_b=Symbol("default-annotation-statistics-color"),Vb=Symbol("default-annotation-statistics-divider-stroke"),Dv=Symbol("default-annotation-statistics-fill"),Av=Symbol("default-annotation-statistics-stroke"),zb=Symbol("default-textbox-fill"),Hb=Symbol("default-textbox-stroke"),jb=Symbol("default-textbox-color"),Wb=Symbol("default-toolbar-position"),Vr=Symbol("default-gridline-enabled"),R3=[{type:"number",position:{$if:[{$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},"bottom","left"]}},{type:"category",position:{$if:[{$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},"left","bottom"]}}],hue={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},{$palette:"fillFallback"},{$palette:"fill"}]},pue={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},{$palette:"fillsFallback"},{$palette:"fills"}]},YM={$if:[{$isGradient:{$palette:"fill"}},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/stroke",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},gue={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},[{$palette:"fillFallback"},{$palette:"fillFallback"}],{$palette:"range2"}]},fue={type:"gradient",gradient:"linear",bounds:"item",colorStops:[{color:"black"}],rotation:0,reverse:!1,colorSpace:"rgb"},Hu={type:"gradient",gradient:"linear",bounds:"item",colorStops:{$shallow:{$map:[{color:{$value:"$1"}},{$palette:"gradient"}]}},rotation:0,reverse:!1,colorSpace:"rgb"},mue={...Hu,colorStops:{$shallow:[{color:{$mix:[{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"black",.15]}},{color:{$mix:[{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"white",.15]}}]}},yue={...Hu,colorStops:{$map:[{color:{$value:"$1"}},{$path:["/0",void 0,{$palette:"gradients"}]}]}},vue=e=>({...Hu,colorStops:{$shallow:{$if:[{$or:[{$isGradient:{$palette:`${e}.fill`}},{$isPattern:{$palette:`${e}.fill`}},{$isImage:{$palette:`${e}.fill`}}]},{$path:["/colorStops",void 0,{$palette:`${e}.fill`}]},[{color:{$mix:[{$palette:`${e}.fill`},"black",.15]}},{color:{$mix:[{$palette:`${e}.fill`},"white",.15]}}]]}}}),KM={type:"gradient",gradient:"radial",bounds:"item",colorStops:{$shallow:{$map:[{color:{$value:"$1"}},{$palette:"gradient"}]}},rotation:0,reverse:!1,colorSpace:"rgb"},Ub={...KM,reverse:!0},bue={...KM,bounds:"series"},E3={...KM,bounds:"series",reverse:!0},Cue={type:"gradient",gradient:"conic",bounds:"series",colorStops:{$map:[{color:{$value:"$1"}},{$palette:"gradient"}]},rotation:0,reverse:!1,colorSpace:"rgb"},jo={type:"pattern",pattern:"forward-slanted-lines",width:{$isUserOption:["./height",{$path:"./height"},10]},height:{$isUserOption:["./width",{$path:"./width"},10]},padding:2,fill:{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/fill",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},fillOpacity:1,stroke:YM,strokeOpacity:1,strokeWidth:{$switch:[{$path:"./pattern"},0,[["backward-slanted-lines","forward-slanted-lines","horizontal-lines","vertical-lines"],4]]},backgroundFill:"none",backgroundFillOpacity:1,rotation:0,scale:1},wue={...jo,stroke:{$if:[{$isGradient:{$palette:"fill"}},{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/stroke",{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$path:["/0",void 0,{$palette:"fills"}]}]},{$path:["/0",void 0,{$palette:"fills"}]}]}]},fill:{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/fill",{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$path:["/0",void 0,{$palette:"fills"}]}]},{$path:["/0",void 0,{$palette:"fills"}]}]}]}},Sue={type:"pattern",pattern:"forward-slanted-lines",width:8,height:8,padding:1,fill:"black",fillOpacity:1,backgroundFill:"white",backgroundFillOpacity:1,stroke:"black",strokeOpacity:1,strokeWidth:1,rotation:0,scale:1},xue={...jo,fill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]}},Mue=e=>({...jo,stroke:{$if:[{$isGradient:{$palette:`${e}.fill`}},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:`${e}.fill`}},{$path:["/stroke",{$palette:"fillFallback"},{$palette:`${e}.fill`}]},{$palette:`${e}.fill`}]}]}}),bc={type:"image",backgroundFill:{$palette:"fillFallback"},backgroundFillOpacity:1,repeat:"no-repeat",fit:"contain",rotation:0},Due={type:"image",backgroundFill:"black",backgroundFillOpacity:1,rotation:0,repeat:"no-repeat",fit:"contain",width:8,height:8};function $o(e){return iW(e,t=>{const i=si.fromString(t);return[si.darken(i,.15).toString(),t,si.lighten(i,.15).toString()]})}var FL={stroke:{$path:["../../highlightStyle/item/stroke","rgba(0, 0, 0, 0.4)"]},strokeWidth:{$path:["../../highlightStyle/item/strokeWidth",2]},strokeOpacity:{$path:["../../highlightStyle/item/strokeOpacity",void 0]},opacity:{$path:["../../highlightStyle/item/opacity",{$if:[{$eq:[{$path:["/highlight/drawingMode",void 0]},"cutout"]},.67,1]}]}},T3={...FL,fill:{$path:["../../highlightStyle/item/fill",{$if:[{$eq:[{$path:["/highlight/drawingMode",void 0]},"cutout"]},void 0,"rgba(255,255,255, 0.33)"]}]},fillOpacity:{$path:["../../highlightStyle/item/fillOpacity",void 0]}},Za={padding:8,cornerRadius:4,fill:{$if:[{$and:[{$eq:[{$path:"./fill/type"},"image"]},{$isUserOption:["./fill/backgroundFill",!1,!0]}]},{backgroundFill:"transparent"},void 0]},border:{enabled:{$isUserOption:["../border",!0,!1]},strokeWidth:1,stroke:{$foregroundOpacity:.08}}};function ju(e=!0){return{enabled:!0,highlightedItem:e?T3:FL,unhighlightedItem:{strokeWidth:{$path:["../../highlightStyle/series/strokeWidth",void 0]}},highlightedSeries:{strokeWidth:{$path:["../../highlightStyle/series/strokeWidth",void 0]}},unhighlightedSeries:{opacity:{$path:["../../highlightStyle/series/dimOpacity",void 0]}}}}function I3(e=!0){return{enabled:!0,highlightedItem:e?T3:FL,unhighlightedItem:{strokeWidth:{$path:["../../highlightStyle/series/strokeWidth",void 0]},opacity:{$path:["../../highlightStyle/series/dimOpacity",void 0]}}}}var k3={border:{enabled:!1,stroke:{$foregroundBackgroundMix:.25},strokeOpacity:1,strokeWidth:1},cornerRadius:4,fillOpacity:1,padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},5,{$isUserOption:["./fill",5,0]}]}},qM={enabled:!1,key:"x",segments:{$apply:[{fill:{$applySwitch:[{$path:"type"},{$path:"../../../fill"},["gradient",Hu],["image",bc],["pattern",jo]]},stroke:{$path:"../../../stroke"},fillOpacity:{$path:"../../../fillOpacity"},strokeWidth:{$isUserOption:["./stroke",{$isUserOption:["../../../strokeWidth",{$path:"../../../strokeWidth"},{$if:[{$greaterThan:[{$path:"../../../strokeWidth"},0]},{$path:"../../../strokeWidth"},2]}]},{$path:"../../../strokeWidth"}]},strokeOpacity:{$path:"../../../strokeOpacity"},lineDash:{$path:"../../../lineDash"},lineDashOffset:{$path:"../../../lineDashOffset"}}]}},$E="white",Aue={get cartesian(){return{seriesTypes:Bn.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:Bn.polarTypes,commonOptions:[]}},get topology(){return{seriesTypes:Bn.topologyTypes,commonOptions:[]}},get standalone(){return{seriesTypes:Bn.standaloneTypes,commonOptions:[]}}},Rue={"radial-gauge":!0,"linear-gauge":!0};function Eue(e){return Rue[e]===!0}var Lo=class Ry{static getDefaultColors(){return{fills:cn,fillsFallback:Object.values(cn),strokes:Pl,sequentialColors:$o(cn),divergingColors:[cn.ORANGE,cn.YELLOW,cn.GREEN],hierarchyColors:["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"],secondSequentialColors:si.interpolate([si.fromHexString(cn.BLUE),si.fromHexString("#cbdef5")],8).map(t=>t.toString()),secondDivergingColors:[cn.GREEN,cn.YELLOW,cn.RED],secondHierarchyColors:["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"],up:{fill:cn.GREEN,stroke:Pl.GREEN},down:{fill:cn.RED,stroke:Pl.RED},neutral:{fill:cn.GRAY,stroke:Pl.GRAY},altUp:{fill:cn.BLUE,stroke:Pl.BLUE},altDown:{fill:cn.ORANGE,stroke:Pl.ORANGE},altNeutral:{fill:cn.GRAY,stroke:Pl.GRAY}}}static getDefaultPublicParameters(){return{accentColor:"#2196f3",axisColor:{$foregroundBackgroundMix:.325},backgroundColor:$E,borderColor:{$foregroundOpacity:.15},borderRadius:4,chartBackgroundColor:{$ref:"backgroundColor"},chartPadding:20,focusShadow:"0 0 0 3px var(--ag-charts-accent-color)",foregroundColor:"#181d1f",fontFamily:"Verdana, sans-serif",fontSize:Fl,fontWeight:400,gridLineColor:{$foregroundBackgroundMix:.1},popupShadow:"0 0 16px rgba(0, 0, 0, 0.15)",subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"chartBackgroundColor"},.38]},textColor:{$ref:"foregroundColor"},chromeBackgroundColor:{$foregroundBackgroundMix:.02},chromeFontFamily:{$ref:"fontFamily"},chromeFontSize:{$ref:"fontSize"},chromeFontWeight:{$ref:"fontWeight"},chromeTextColor:{$ref:"foregroundColor"},chromeSubtleTextColor:{$mix:[{$ref:"chromeTextColor"},{$ref:"backgroundColor"},.38]},buttonBackgroundColor:{$ref:"backgroundColor"},buttonBorder:!0,buttonFontWeight:400,buttonTextColor:{$ref:"textColor"},inputBackgroundColor:{$ref:"backgroundColor"},inputBorder:!0,inputTextColor:{$ref:"textColor"},menuBackgroundColor:{$ref:"chromeBackgroundColor"},menuBorder:!0,menuTextColor:{$ref:"chromeTextColor"},panelBackgroundColor:{$ref:"chromeBackgroundColor"},panelSubtleTextColor:{$ref:"chromeSubtleTextColor"},tooltipBackgroundColor:{$ref:"chromeBackgroundColor"},tooltipBorder:!0,tooltipTextColor:{$ref:"chromeTextColor"},tooltipSubtleTextColor:{$ref:"chromeSubtleTextColor"},crosshairLabelBackgroundColor:{$ref:"foregroundColor"},crosshairLabelTextColor:{$ref:"chartBackgroundColor"}}}static getAxisDefaults(t,{title:i,time:n}){return _t(t,i&&{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:zr.MEDIUM},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},n&&{parentLevel:{enabled:!1,label:{enabled:{$path:"../../label/enabled"},border:{enabled:{$or:[{$isUserOption:["../border",!0,!1]},{$path:"../../../label/border/enabled"}]},strokeWidth:{$path:"../../../label/border/strokeWidth"},stroke:{$path:"../../../label/border/stroke"}},fill:{$path:"../../label/fill"},fontSize:{$path:"../../label/fontSize"},fontFamily:{$path:"../../label/fontFamily"},fontWeight:"bold",spacing:{$path:"../../label/spacing"},color:{$path:"../../label/color"},cornerRadius:{$path:"../../label/cornerRadius"},padding:{$path:"../../label/padding"},avoidCollisions:{$path:"../../label/avoidCollisions"}},tick:{enabled:{$path:"../../tick/enabled"},width:{$path:"../../tick/width"},size:{$path:"../../tick/size"},stroke:{$path:"../../tick/stroke"}}}},{label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:11,color:{$ref:"textColor"},avoidCollisions:!0,cornerRadius:4,border:{enabled:{$isUserOption:["../border",!0,!1]},strokeWidth:1,stroke:{$foregroundOpacity:.08}},padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},{left:12,right:12,top:8,bottom:8},void 0]}},line:{enabled:!0,width:1,stroke:{$ref:"axisColor"}},tick:{enabled:!1,size:6,width:1,stroke:{$ref:"axisColor"}},gridLine:{enabled:!0,width:1,style:{$apply:[{fillOpacity:1,stroke:{$ref:"gridLineColor"},strokeWidth:{$path:"../../width"},lineDash:[]},[{fillOpacity:1,stroke:{$ref:"gridLineColor"},strokeWidth:{$path:"../../width"},lineDash:[]}]]}},crossLines:{$apply:[{enabled:!0,fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},fillOpacity:.08,strokeWidth:1,label:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},padding:5,color:{$ref:"textColor"}}},void 0,{$pathString:["/common/axes/$axisType/crossLines",{axisType:{$path:["/axes/$index/type"]}}]},{$pathString:["/$seriesType/axes/$axisType/crossLines",{seriesType:{$path:["/series/0/type","line"]},axisType:{$path:["/axes/$index/type"]}}]}]}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:{$ref:"chartBackgroundColor"}},padding:{top:{$ref:"chartPadding"},right:{$ref:"chartPadding"},bottom:{$ref:"chartPadding"},left:{$ref:"chartPadding"}},seriesArea:{border:{enabled:!1,stroke:{$ref:"foregroundColor"},strokeOpacity:1,strokeWidth:1},cornerRadius:4,padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},5,0]}},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",spacing:{$if:[{$path:"../subtitle/enabled"},10,20]},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:zr.LARGEST},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},wrapping:"hyphenate",layoutStyle:yu,textAlign:vu},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:zr.MEDIUM},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:yu,textAlign:vu},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:{$rem:zr.MEDIUM},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:yu,textAlign:vu},legend:{...k3,enabled:{$and:[{$greaterThan:[{$size:{$path:"/series"}},1]},{$or:[{$isChartType:"cartesian"},{$isChartType:"standalone"},{$and:[{$isChartType:"polar"},{$not:{$isSeriesType:"pie"}},{$not:{$isSeriesType:"donut"}}]}]}]},position:"bottom",orientation:{$if:[{$or:[{$eq:[{$path:"./position"},"left"]},{$eq:[{$path:"./position"},"left-top"]},{$eq:[{$path:"./position"},"left-bottom"]},{$eq:[{$path:"./position"},"right"]},{$eq:[{$path:"./position"},"right-top"]},{$eq:[{$path:"./position"},"right-bottom"]},{$eq:[{$path:"./position/placement"},"left"]},{$eq:[{$path:"./position/placement"},"left-top"]},{$eq:[{$path:"./position/placement"},"left-bottom"]},{$eq:[{$path:"./position/placement"},"right"]},{$eq:[{$path:"./position/placement"},"right-top"]},{$eq:[{$path:"./position/placement"},"right-bottom"]}]},"vertical","horizontal"]},spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:{$ref:"textColor"},fontSize:{$rem:zr.SMALL},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:{$ref:"foregroundColor"}},inactiveStyle:{fill:{$ref:"subtleTextColor"}},highlightStyle:{fill:{$ref:"foregroundColor"}},label:{color:{$ref:"textColor"}}},fill:{$if:[{$path:["./position/floating",!1]},{$ref:"chartBackgroundColor"},"transparent"]}},tooltip:{enabled:!0,darkTheme:Fg,delay:0,pagination:!1,mode:{$if:[{$or:[{$and:[{$isChartType:"cartesian"},{$not:{$hasSeriesType:"bubble"}},{$not:{$hasSeriesType:"scatter"}},{$greaterThan:[{$size:{$path:"/series"}},1]},{$lessThan:[{$size:{$path:"/series"}},4]}]},{$and:[{$isChartType:"polar"},{$greaterThan:[{$size:{$path:"/series"}},1]},{$lessThan:[{$size:{$path:"/series"}},4]}]}]},"shared","single"]}},overlays:{darkTheme:Fg},listeners:{},series:{tooltip:{range:{$path:["/tooltip/range","exact"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","pointer"]},placement:{$path:["/tooltip/position/placement",void 0]},xOffset:{$path:["/tooltip/position/xOffset",0]},yOffset:{$path:["/tooltip/position/yOffset",0]}}}}}}constructor(t={}){const{overrides:i,palette:n,params:s}=zi(t),o=this.createChartConfigPerChartType(this.getDefaults()),r={};i&&this.processOverrides(r,i);const{fills:a,strokes:l,sequentialColors:c,...d}=this.getDefaultColors();this.palette=Vl(_t(n,{fills:Object.values(a),strokes:Object.values(l),sequentialColors:Object.values(c),...d})),this.paletteType=A3(n),this.params=_t(s,this.getPublicParameters()),this.config=Vl(zi(o)),this.overrides=Vl(i),this.presets=Vl(r)}processOverrides(t,i){for(const n of Bn.seriesTypes){const s=n,o=i[s];Eue(s)&&(t[s]=o,delete i[s])}}createChartConfigPerChartType(t){for(const[i,{seriesTypes:n}]of $r(Aue)){const s=TI.get(i);for(const o of n)t[o]??(t[o]=s)}return t}getDefaults(){const t=(i,n)=>{const s={},o={axes:{},...cL.getThemeTemplates(),...this.getChartDefaults(),...TI.get(i)};for(const r of n){s[r]=_t(yr.getThemeTemplate(r),s[r]??o);const{axes:a}=s[r];for(const l of nh.keys())a[l]=_t(a[l],nh.getThemeTemplate(l),Ry.axisDefault[l]);(r==="map-shape-background"||r==="map-line-background")&&delete s[r].series.tooltip}return s};return _t(t("cartesian",Bn.cartesianTypes),t("polar",Bn.polarTypes),t("topology",Bn.topologyTypes),t("standalone",Bn.standaloneTypes))}static applyTemplateTheme(t,i,n){if(ht(t))for(let s=0;s<t.length;s++){const o=t[s];typeof o=="symbol"&&n?.has(o)&&(t[s]=n.get(o))}else for(const s of Object.keys(t)){const o=t[s];typeof o=="symbol"&&n?.has(o)&&(t[s]=n.get(o))}}templateTheme(t,i=!0){const n=i?zi(t):t,s=this.getTemplateParameters();return xu(n,Ry.applyTemplateTheme,void 0,void 0,s),n}getDefaultColors(){return Ry.getDefaultColors()}getPublicParameters(){return Ry.getDefaultPublicParameters()}getTemplateParameters(){const t=new Map;t.set(Fg,!1),t.set(Nb,"#d9d9d9"),t.set(Vh,"#00000080"),t.set($M,"#aaa"),t.set(yu,"block"),t.set(vu,"center"),t.set(Mv,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),t.set(UM,$E),t.set(Bi,cn.BLUE),t.set(An,cn.BLUE),t.set(Fb,cn.BLUE),t.set(Ob,$E),t.set(Bb,"#fafafa"),t.set(Gb,"#ddd"),t.set(_b,"#000"),t.set(Vb,"#181d1f"),t.set(Dv,"#e35c5c"),t.set(Av,"#e35c5c"),t.set(zb,"#fafafa"),t.set(Hb,"#ddd"),t.set(jb,"#000"),t.set(Wb,"top"),t.set(Vr,!1);const i=this.getDefaultColors();return t.set(_M,this.palette.up?.stroke??i.up.stroke),t.set(zM,this.palette.up?.fill??i.up.fill),t.set(VM,this.palette.down?.stroke??i.down.stroke),t.set(HM,this.palette.down?.fill??i.down.fill),t.set(jM,this.palette.neutral?.stroke??i.neutral.stroke),t.set(WM,this.palette.neutral?.fill??i.neutral.fill),t.set(TL,this.palette.altUp?.stroke??i.up.stroke),t.set(kL,this.palette.altUp?.fill??i.up.fill),t.set(IL,this.palette.altDown?.stroke??i.down.stroke),t.set(LL,this.palette.altDown?.fill??i.down.fill),t.set(PL,this.palette.altNeutral?.fill??i.altNeutral.fill),t.set(NL,this.palette.altNeutral?.stroke??i.altNeutral.stroke),t}};Lo.axisDefault={number:Lo.getAxisDefaults({keys:[],line:{enabled:!1},crosshair:{enabled:!0}},{title:!0,time:!1}),log:Lo.getAxisDefaults({keys:[],base:10,line:{enabled:!1},crosshair:{enabled:!0}},{title:!0,time:!1}),category:Lo.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!0,wrapping:"on-space"},gridLine:{enabled:Vr},crosshair:{enabled:!1}},{title:!0,time:!1}),"grouped-category":Lo.getAxisDefaults({keys:[],tick:{enabled:!0,stroke:Nb},label:{spacing:10,rotation:270,wrapping:"on-space"},maxThicknessRatio:.5,paddingInner:.4,groupPaddingInner:.2,crosshair:{enabled:!1}},{title:!0,time:!1}),time:Lo.getAxisDefaults({keys:[],gridLine:{enabled:Vr},crosshair:{enabled:!0}},{title:!0,time:!0}),"unit-time":Lo.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!1},gridLine:{enabled:Vr},crosshair:{enabled:!0},parentLevel:{enabled:!0}},{title:!0,time:!0}),"ordinal-time":Lo.getAxisDefaults({keys:[],groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:Vr},crosshair:{enabled:!0}},{title:!0,time:!0}),"angle-category":Lo.getAxisDefaults({label:{spacing:5},gridLine:{enabled:Vr},shape:{$findFirstSiblingNotOperation:void 0}},{title:!1,time:!1}),"angle-number":Lo.getAxisDefaults({label:{spacing:5},gridLine:{enabled:Vr}},{title:!1,time:!1}),"radius-category":Lo.getAxisDefaults({positionAngle:0,line:{enabled:!1},label:{minSpacing:5}},{title:!0,time:!1}),"radius-number":Lo.getAxisDefaults({positionAngle:0,line:{enabled:!1},shape:{$findFirstSiblingNotOperation:void 0},label:{minSpacing:5}},{title:!0,time:!1})};var Xr=Lo,YE="#192232",es={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},xd={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},zf=class extends Xr{getDefaultColors(){return{fills:es,fillsFallback:Object.values(es),strokes:xd,sequentialColors:$o(es),divergingColors:[es.ORANGE,es.YELLOW,es.GREEN],hierarchyColors:["#192834","#253746","#324859","#3f596c","#4d6a80"],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[es.GREEN,es.YELLOW,es.RED],secondHierarchyColors:["#192834","#3b5164","#496275","#577287","#668399"],up:{fill:es.GREEN,stroke:xd.GREEN},down:{fill:es.RED,stroke:xd.RED},neutral:{fill:es.GRAY,stroke:xd.GRAY},altUp:{fill:es.BLUE,stroke:xd.BLUE},altDown:{fill:es.ORANGE,stroke:xd.ORANGE},altNeutral:{fill:es.GRAY,stroke:xd.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),axisColor:{$foregroundBackgroundMix:.737},backgroundColor:YE,borderColor:{$foregroundBackgroundMix:.216},chromeBackgroundColor:{$foregroundBackgroundMix:.07},foregroundColor:"#fff",gridLineColor:{$foregroundBackgroundMix:.257},popupShadow:"0 0 16px rgba(0, 0, 0, 0.33)",subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"chartBackgroundColor"},.57]},crosshairLabelBackgroundColor:{$foregroundBackgroundMix:.65}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Fg,!0),e.set(UM,YE),e.set(Nb,"#7f8389"),e.set(Bi,es.BLUE),e.set(Fb,"#fff"),e.set(An,es.BLUE),e.set(Ob,YE),e.set(Bb,"#28313e"),e.set(Gb,"#4b525d"),e.set(_b,"#fff"),e.set(Vb,"#fff"),e.set(zb,"#28313e"),e.set(Hb,"#4b525d"),e.set(jb,"#fff"),e}constructor(e){super(e)}},oo={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},Md={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},Tue=class extends zf{getDefaultColors(){return{...super.getDefaultColors(),fills:{...oo},fillsFallback:Object.values({...oo}),strokes:{...Md},sequentialColors:$o(oo),divergingColors:[oo.GREEN,oo.BLUE,oo.RED],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],up:{fill:oo.GREEN,stroke:Md.GREEN},down:{fill:oo.RED,stroke:Md.RED},neutral:{fill:oo.BLUE,stroke:Md.BLUE},altUp:{fill:oo.GREEN,stroke:Md.GREEN},altDown:{fill:oo.RED,stroke:Md.RED},altNeutral:{fill:oo.GRAY,stroke:Md.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),chartPadding:0,gridLineColor:{$foregroundBackgroundMix:.12}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Bi,oo.BLUE),e.set(An,oo.BLUE),e.set(yu,"overlay"),e.set(vu,"left"),e.set(Wb,"bottom"),e.set(Vr,!0),e}},ro={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},Dd={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},Iue=class extends Xr{getDefaultColors(){return{...super.getDefaultColors(),fills:{...ro},fillsFallback:Object.values({...ro}),strokes:{...Dd},sequentialColors:$o(ro),divergingColors:[ro.GREEN,ro.BLUE,ro.RED],up:{fill:ro.GREEN,stroke:Dd.GREEN},down:{fill:ro.RED,stroke:Dd.RED},neutral:{fill:ro.BLUE,stroke:Dd.BLUE},altUp:{fill:ro.GREEN,stroke:Dd.GREEN},altDown:{fill:ro.RED,stroke:Dd.RED},altNeutral:{fill:ro.GRAY,stroke:Dd.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),chartPadding:0,gridLineColor:{$foregroundBackgroundMix:.06}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Bi,ro.BLUE),e.set(An,ro.BLUE),e.set(yu,"overlay"),e.set(vu,"left"),e.set(Wb,"bottom"),e.set(Vr,!0),e}},ts={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Ad={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},kue=class extends zf{getDefaultColors(){return{...super.getDefaultColors(),fills:ts,fillsFallback:Object.values(ts),strokes:Ad,sequentialColors:$o(ts),divergingColors:[ts.ORANGE,ts.YELLOW,ts.GREEN],secondSequentialColors:["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"],secondDivergingColors:[ts.GREEN,ts.YELLOW,ts.RED],up:{fill:ts.GREEN,stroke:Ad.GREEN},down:{fill:ts.RED,stroke:Ad.RED},neutral:{fill:ts.GRAY,stroke:Ad.GRAY},altUp:{fill:ts.BLUE,stroke:Ad.BLUE},altDown:{fill:ts.RED,stroke:Ad.RED},altNeutral:{fill:ts.GRAY,stroke:Ad.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Bi,ts.BLUE),e.set(An,ts.BLUE),e}},is={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Rd={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},Lue=class extends Xr{getDefaultColors(){return{...super.getDefaultColors(),fills:is,fillsFallback:Object.values(is),strokes:Rd,sequentialColors:$o(is),divergingColors:[is.ORANGE,is.YELLOW,is.GREEN],secondSequentialColors:["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"],secondDivergingColors:[is.GREEN,is.YELLOW,is.RED],up:{fill:is.GREEN,stroke:Rd.GREEN},down:{fill:is.RED,stroke:Rd.RED},neutral:{fill:is.GRAY,stroke:Rd.GRAY},altUp:{fill:is.BLUE,stroke:Rd.BLUE},altDown:{fill:is.RED,stroke:Rd.RED},altNeutral:{fill:is.GRAY,stroke:Rd.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Bi,is.BLUE),e.set(An,is.BLUE),e}},Pi={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},Ed={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},Pue=class extends zf{getDefaultColors(){return{fills:Pi,fillsFallback:Object.values(Pi),strokes:Ed,sequentialColors:$o(Pi),divergingColors:[Pi.BLUE,Pi.RED],hierarchyColors:[],secondSequentialColors:[Pi.BLUE,Pi.PURPLE,Pi.MAGENTA,Pi.PINK,Pi.RED,Pi.ORANGE,Pi.YELLOW,Pi.GREEN],secondDivergingColors:[Pi.BLUE,Pi.RED],secondHierarchyColors:[],up:{fill:Pi.GREEN,stroke:Ed.GREEN},down:{fill:Pi.RED,stroke:Ed.RED},neutral:{fill:Pi.GRAY,stroke:Ed.GRAY},altUp:{fill:Pi.BLUE,stroke:Ed.BLUE},altDown:{fill:Pi.RED,stroke:Ed.RED},altNeutral:{fill:Pi.GRAY,stroke:Ed.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Bi,Pi.BLUE),e.set(An,Pi.BLUE),e}},Ni={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},Td={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},Nue=class extends Xr{getDefaultColors(){return{...super.getDefaultColors(),fills:Ni,fillsFallback:Object.values(Ni),strokes:Td,sequentialColors:$o(Ni),divergingColors:[Ni.BLUE,Ni.RED],hierarchyColors:[],secondSequentialColors:[Ni.BLUE,Ni.PURPLE,Ni.MAGENTA,Ni.PINK,Ni.RED,Ni.ORANGE,Ni.YELLOW,Ni.GREEN],secondDivergingColors:[Ni.BLUE,Ni.RED],secondHierarchyColors:[],up:{fill:Ni.GREEN,stroke:Td.GREEN},down:{fill:Ni.RED,stroke:Td.RED},neutral:{fill:Ni.GRAY,stroke:Td.GRAY},altUp:{fill:Ni.BLUE,stroke:Td.BLUE},altDown:{fill:Ni.RED,stroke:Td.RED},altNeutral:{fill:Ni.GRAY,stroke:Td.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Bi,Ni.BLUE),e.set(An,Ni.BLUE),e}},xn={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},nu={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Fue=class extends zf{getDefaultColors(){return{...super.getDefaultColors(),fills:{...xn,RED:xn.ORANGE},fillsFallback:Object.values({...xn,RED:xn.ORANGE}),strokes:{...nu,RED:nu.ORANGE},sequentialColors:$o({...xn,RED:xn.ORANGE}),divergingColors:[xn.ORANGE,xn.YELLOW,xn.GREEN],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[xn.GREEN,xn.YELLOW,xn.ORANGE],up:{fill:xn.GREEN,stroke:nu.GREEN},down:{fill:xn.ORANGE,stroke:nu.ORANGE},neutral:{fill:xn.GRAY,stroke:nu.GRAY},altUp:{fill:xn.BLUE,stroke:nu.BLUE},altDown:{fill:xn.ORANGE,stroke:nu.ORANGE},altNeutral:{fill:xn.GRAY,stroke:nu.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Bi,xn.BLUE),e.set(An,xn.BLUE),e}},Pn={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},El={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},Oue=class extends Xr{getDefaultColors(){return{...super.getDefaultColors(),fills:{...Pn,RED:Pn.ORANGE},fillsFallback:Object.values({...Pn,RED:Pn.ORANGE}),strokes:{...El,RED:El.ORANGE},sequentialColors:$o({...Pn,RED:Pn.ORANGE}),divergingColors:[Pn.ORANGE,Pn.YELLOW,Pn.GREEN],secondSequentialColors:["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"],secondDivergingColors:[Pn.GREEN,Pn.YELLOW,Pn.ORANGE],secondHierarchyColors:[],up:{fill:Pn.GREEN,stroke:El.GREEN},down:{fill:Pn.ORANGE,stroke:El.ORANGE},neutral:{fill:El.GRAY,stroke:El.GRAY},altUp:{fill:Pn.BLUE,stroke:El.BLUE},altDown:{fill:Pn.ORANGE,stroke:El.ORANGE},altNeutral:{fill:Pn.GRAY,stroke:El.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Bi,Pn.BLUE),e.set(An,Pn.BLUE),e}},jI=["top","top-right","top-left","bottom","bottom-right","bottom-left","right","right-top","right-bottom","left","left-top","left-bottom"],Bue={floating:Z,placement:ye(...jI),xOffset:ue,yOffset:ue},nV=It((e,t)=>{let i;if(typeof e=="string")jI.includes(e)?i=!0:(i={valid:!1,invalid:[],cleared:null},i.invalid.push(new eh(A1.Invalid,`a legend placement string: ["${jI.join('", "')}"]`,e,t.path)));else{const{cleared:n,invalid:s}=Is(e,Bue);i={valid:s.length===0,cleared:n,invalid:s}}return i},"a legend position object or placement string"),e0=rt(ye("circle","cross","diamond","heart","plus","pin","square","star","triangle"),Fi),L3=ye("never","always","hyphenate","on-space"),t0=ye("top","right","bottom","left","top-right","bottom-right","bottom-left","top-left","center"),ZM=rt(J,ye("exact","nearest")),Ns=rt(ce,Ze(ue),Ze(Ya),Vn({text:Te(ce),...Xt},"text segments array")),sV=ye("pointer","start","middle","end"),$S={enabled:Z,text:Ns,textAlign:ye("left","center","right"),wrapping:ye("never","always","hyphenate","on-space"),spacing:J,maxWidth:J,maxHeight:J,...Xt};$S.padding=Ze(J);var Qw={enabled:Z,text:Ns,renderer:Ks(rt(ce,F4))},KE=["defaults","download","zoom-to-cursor","pan-to-cursor","reset-zoom","toggle-series-visibility","toggle-other-series","separator"],P3={type:ye("action","separator"),showOn:ye("always","series-area","series-node","legend-item"),label:Te(ce),enabled:Z,action:Fi,items:(e,t)=>N3(e,t)};P3.iconUrl=Ze(ce);var Gue=Wi(P3),_ue=It((e,t)=>{let i;return typeof e=="string"?KE.includes(e)?i=!0:(i={valid:!1,invalid:[],cleared:null},i.invalid.push(new eh(A1.Invalid,`a context menu item string alias: ["${KE.join('", "')}"]`,e,t.path))):i=Gue(e,t),i},`a context menu item object or string alias: [${KE.join(", ")}]`),N3=Ye(_ue,"a menu items array",!1),Yd={label:ce,ariaLabel:ce,tooltip:ce,icon:ye("align-center","align-left","align-right","arrow-drawing","arrow-down-drawing","arrow-up-drawing","callout-annotation","candlestick-series","close","comment-annotation","date-range-drawing","date-price-range-drawing","delete","disjoint-channel-drawing","drag-handle","fill-color","line-style-solid","line-style-dashed","line-style-dotted","high-low-series","hlc-series","hollow-candlestick-series","horizontal-line-drawing","line-color","line-series","line-with-markers-series","locked","measurer-drawing","note-annotation","ohlc-series","pan-end","pan-left","pan-right","pan-start","parallel-channel-drawing","position-bottom","position-center","position-top","price-label-annotation","price-range-drawing","reset","settings","step-line-series","text-annotation","trend-line-drawing","fibonacci-retracement-drawing","fibonacci-retracement-trend-based-drawing","unlocked","vertical-line-drawing","zoom-in","zoom-out")},Br=rt(ce,Ks(Ns)),F3=Wi({x:Br,y:Br,angle:Br,radius:Br,size:Br,color:Br,label:Br,secondaryLabel:Br,sectorLabel:Br,calloutLabel:Br,legendItem:Br}),aa=It(Tse,"a valid number format string"),tt={width:J,height:J,minWidth:J,minHeight:J,suppressFieldDotNotation:Z,title:$S,subtitle:$S,footnote:$S,padding:{top:J,right:J,bottom:J,left:J},seriesArea:{border:OS,clip:Z,cornerRadius:ue,padding:FS},legend:{enabled:Z,position:nV,orientation:ye("horizontal","vertical"),maxWidth:J,maxHeight:J,spacing:J,border:OS,cornerRadius:ue,padding:FS,fill:Dr,fillOpacity:Be,preventHidingAll:Z,reverseOrder:Z,toggleSeries:Z,item:{marker:{size:J,shape:e0,padding:J,strokeWidth:J},line:{length:J,strokeWidth:J},label:{maxLength:J,formatter:Fi,...Xt},maxWidth:J,paddingX:J,paddingY:J,showSeriesStroke:Z},pagination:{marker:{size:J,shape:e0,padding:J},activeStyle:{...Ie,...we},inactiveStyle:{...Ie,...we},highlightStyle:{...Ie,...we},label:Xt},listeners:{legendItemClick:Fi,legendItemDoubleClick:Fi}},gradientLegend:{enabled:Z,position:nV,spacing:J,reverseOrder:Z,border:OS,cornerRadius:ue,padding:FS,fill:Dr,fillOpacity:Be,gradient:{preferredLength:J,thickness:J},scale:{label:{...Xt,minSpacing:J,format:aa,formatter:Fi},padding:J,interval:{step:ue,values:tl,minSpacing:gi(J,_a("maxSpacing")),maxSpacing:gi(J,Va("minSpacing"))}}},listeners:{seriesNodeClick:Fi,seriesNodeDoubleClick:Fi,seriesVisibilityChange:Fi,click:Fi,doubleClick:Fi,annotations:Fi,zoom:Fi},loadGoogleFonts:Z,highlight:{drawingMode:ye("overlay","cutout"),range:ye("tooltip","node")},overlays:{loading:Qw,noData:Qw,noVisibleSeries:Qw,unsupportedBrowser:Qw},tooltip:{enabled:Z,showArrow:Z,pagination:Z,delay:J,range:ZM,wrapping:L3,mode:ye("single","shared","compact"),position:{anchorTo:ye("pointer","node","chart"),placement:rt(t0,Ye(t0)),xOffset:ue,yOffset:ue}},animation:{enabled:Z,duration:J},contextMenu:{enabled:Z,items:N3},context:()=>!0,dataSource:{getData:Fi},keyboard:{enabled:Z,tabIndex:ue},touch:{dragAction:ye("none","drag","hover")},ranges:{enabled:Z,buttons:Vn({...Yd,value:rt(ue,gi(Ye(rt(ue,Ya)),Nh(2,2)),Fi)},"range button options array")},locale:{localeText:sM,getLocaleText:Ks(ce)},background:{visible:Z,fill:Re,image:{url:Te(ce),top:ue,right:ue,bottom:ue,left:ue,width:J,height:J,opacity:Be}},styleNonce:ce,sync:{enabled:Z,groupId:ce,axes:ye("x","y","xy"),nodeInteraction:Z,zoom:Z},zoom:{enabled:Z,enableAxisDragging:Z,enableAxisScrolling:Z,enableDoubleClickToReset:Z,enablePanning:Z,enableScrolling:Z,enableSelecting:Z,enableTwoFingerZoom:Z,keepAspectRatio:Z,anchorPointX:sV,anchorPointY:sV,axisDraggingMode:ye("pan","zoom"),axes:ye("x","y","xy"),deceleration:rt(ye("off","short","long"),Be),minVisibleItems:J,panKey:ye("alt","ctrl","meta","shift"),scrollingStep:Be,autoScaling:{enabled:Z,padding:Be},buttons:{enabled:Z,buttons:Vn({...Yd,value:ye("reset","zoom-in","zoom-out","pan-left","pan-right","pan-start","pan-end"),section:ce},"zoom button options array"),visible:ye("always","zoomed","hover")}},formatter:rt(Ks(Ns),F3)};tt.dataSource.requestThrottle=Ze(J);tt.dataSource.updateThrottle=Ze(J);tt.dataSource.updateDuringInteraction=Ze(Z);tt.zoom.enableIndependentAxes=Ze(Z);tt.statusBar=Ze(Ue);tt.foreground=Ze({visible:Z,text:ce,image:{url:ce,top:ue,right:ue,bottom:ue,left:ue,width:J,height:J,opacity:Be},...Ie});tt.overrideDevicePixelRatio=Ze(ue);tt.sync.domainMode=Ze(ye("direction","position","key"));var Mt={cursor:ce,context:()=>!0,showInLegend:Z,nodeClickRange:ZM,listeners:{seriesNodeClick:Fi,seriesNodeDoubleClick:Fi},highlightStyle:{item:{...Ie,...we},series:{enabled:Z,dimOpacity:Be,strokeWidth:J}},highlight:V4(Ai)},la={...Mt,id:ce,visible:Z,context:()=>!0,data:tl};la.seriesGrouping=Ze(Ue);var Wu={shape:e0,size:J,...Ie,...we,...Ne},Qr={enabled:Z,itemStyler:Vt({...Ie,...we,...Ne,shape:e0,size:J}),...Wu},Jt={enabled:Z,formatter:Ks(Ns),format:aa,itemStyler:Vt({enabled:Z,...Hr,...Xt}),...Hr,...Xt},Iu={...Jt,lineHeight:J,minimumFontSize:J,wrapping:L3,overflowStrategy:ye("ellipsis","hide")},$b={visible:Z,cap:{visible:Z,length:J,lengthRatio:Be,...we,...Ne},...we,...Ne},XM={...$b,xLowerKey:ce,xUpperKey:ce,yLowerKey:ce,yUpperKey:ce,xLowerName:ce,xUpperName:ce,yLowerName:ce,yUpperName:ce,itemStyler:Vt({visible:Z,...we,...Ne,cap:{visible:Z,length:J,lengthRatio:Be,...we,...Ne}})},Ft={enabled:Z,showArrow:Z,range:ZM,renderer:Ks(rt(ce,Wi({heading:ce,title:ce,data:Vn({label:Te(ce),value:Te(ce)})},"tooltip renderer result object"))),position:{anchorTo:ye("node","pointer","chart"),placement:rt(t0,Ye(t0)),xOffset:ue,yOffset:ue},interaction:{enabled:Z}},ol={enabled:Z,xOffset:ue,yOffset:ue,blur:J,color:Re},QM=hb({linear:{},smooth:{tension:Be},step:{position:ye("start","middle","end")}},"interpolation line options"),Rv={fills:gi(Nh(2),Ye(Wi({color:Re,stop:ue},"")),_4),fillMode:ye("continuous","discrete")},JM={value:Te(ue),text:ce,shape:rt(ye("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),Fi),placement:ye("before","after","middle"),spacing:J,size:J,rotation:ue,...Ie,...we,...Ne},eD={value:Te(ue),text:ce,shape:rt(ye("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),Fi),placement:ye("inside","outside","middle"),spacing:J,size:J,rotation:ue,label:{...Jt,spacing:J},...Ie,...we,...Ne},i0={direction:ye("horizontal","vertical"),cornerMode:ye("container","item"),cornerRadius:J,thickness:J,segmentation:{enabled:Z,spacing:J,interval:{values:Ye(ue),step:ue,count:ue}},bar:{enabled:Z,thickness:J,thicknessRatio:Be,...Rv,...Ie,...we,...Ne},label:{...Iu,text:ce,spacing:J,avoidCollisions:Z,placement:ye("inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end")},tooltip:Ft,...Ae(Mt,["listeners"])},ku={...i0,...Ae(la,["listeners"]),type:Te(bi("linear-gauge")),value:Te(ue),scale:{min:gi(ue,_a("max")),max:gi(ue,Va("min")),label:{enabled:Z,formatter:Fi,rotation:ue,spacing:J,minSpacing:J,placement:ye("before","after"),avoidCollisions:Z,format:aa,...Xt},interval:{values:Ye(ue),step:ue},...Rv,...Ie,...we,...Ne},targets:Vn(JM,"target options array")};ku.margin=Ze(ue);ku.defaultColorRange=Ze(Ye(Re));ku.defaultTarget=Ze({...JM,value:ue,label:{...Jt,spacing:ue}});ku.defaultScale=Ze(ku.scale);ku.scale.defaultFill=Ze(Re);var n0={outerRadius:J,innerRadius:J,outerRadiusRatio:Be,innerRadiusRatio:Be,startAngle:ue,endAngle:ue,spacing:J,cornerMode:ye("container","item"),cornerRadius:J,scale:{min:gi(ue,_a("max")),max:gi(ue,Va("min")),label:{enabled:Z,formatter:Fi,rotation:ue,spacing:J,minSpacing:J,avoidCollisions:Z,format:aa,...Xt},interval:{values:Ye(ue),step:ue},...Rv,...Ie,...we,...Ne},segmentation:{enabled:Z,spacing:J,interval:{values:Ye(ue),step:ue,count:ue}},bar:{enabled:Z,...Rv,...Ie,...we,...Ne},needle:{enabled:Z,spacing:J,radiusRatio:Be,...Ie,...we,...Ne},label:{text:ce,spacing:J,...Iu},secondaryLabel:{text:ce,...Iu},tooltip:Ft,...Mt},Yb={...n0,...la,type:Te(bi("radial-gauge")),value:Te(ue),targets:Vn(eD,"target options array")};Yb.defaultColorRange=Ze(Ye(Re));Yb.defaultTarget=Ze({...eD,value:ue,label:{...Jt,spacing:ue}});Yb.scale.defaultFill=Ze(Re);var Kb=ye("millisecond","second","minute","hour","day","month","year"),O3={unit:Te(Kb),step:dv,epoch:Ya,utc:Z};O3.every=Fi;var tD=Wi(O3,"a time interval object"),xh={enabled:Z,text:ce,padding:ue,...Xt},Fa=It({enabled:Z,type:Te(ye("line","range")),range:gi(It((e,{options:t})=>t.type==="range","crossLine type to be 'range'"),Ye(Ue),Nh(2,2)),value:gi(It((e,{options:t})=>t.type==="line","crossLine type to be 'line'"),Ue),label:xh,fill:Re,fillOpacity:Be,...we,...Ne},"cross-line options"),Nl={...Fa,label:{...xh,position:ye("top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"),rotation:ue}},Cc={enabled:Z,rotation:ue,avoidCollisions:Z,minSpacing:J,spacing:J,formatter:Ks(Ns),itemStyler:Vt({...Xt,...Hr,spacing:ue}),...Xt,...Hr},qb={autoRotate:Z,autoRotateAngle:ue,wrapping:ye("never","always","hyphenate","on-space"),truncate:Z,...Cc},OL={format:aa,...qb},Zb={format:rt(ce,sM),...qb},B3={enabled:Z,width:J,size:J,stroke:Re},iD={enabled:Z,label:Zb,tick:B3},BL={values:Ye(Ue),minSpacing:J},zh={reverse:Z,gridLine:{enabled:Z,width:J,style:Vn({fill:Re,fillOpacity:J,stroke:rt(Re,Bx),strokeWidth:J,lineDash:Ye(J)},"a grid-line style object array")},interval:BL,label:Cc,line:{enabled:Z,width:J,stroke:Re},tick:B3,context:()=>!0};zh.layoutConstraints=Ze({stacked:Te(Z),align:Te(ye("start","end")),unit:Te(ye("percent","px")),width:Te(J)});var wc={...zh,crossAt:{value:Te(rt(ue,Ya,ce,Ye(ce))),sticky:Z},keys:Ye(ce),crossLines:Vn(Nl,"a cross-line options array"),position:ye("top","right","bottom","left"),thickness:J,maxThicknessRatio:Be,title:{enabled:Z,text:Ns,spacing:J,formatter:Ks(Ns),...Xt}};wc.title._enabledFromTheme=Ze(Z);var Xb={enabled:Z,...Ie,...we,...Ne};function Uu(e,t){const i={enabled:Z,xOffset:ue,yOffset:ue,formatter:Ks(ce),renderer:Ks(rt(ce,Wi({text:ce,color:Re,backgroundColor:Re,opacity:Be},"crosshair label renderer result object")))};let n;return e&&(n={...i,format:t?rt(ce,Wi({millisecond:ce,second:ce,hour:ce,day:ce,month:ce,year:ce})):ce}),{enabled:Z,snap:Z,label:n??i,...we,...Ne}}function Hf(e,t){return{min:gi(e,_a("max")),max:gi(e,Va("min")),nice:Z,interval:{step:t?rt(dv,Kb,tD):dv,values:Ye(e),minSpacing:gi(J,_a("maxSpacing")),maxSpacing:gi(J,Va("minSpacing"))}}}var GL={step:rt(dv,Kb,tD),values:Ye(rt(ue,Ya)),minSpacing:gi(J,_a("maxSpacing")),maxSpacing:gi(J,Va("minSpacing")),placement:ye("on","between")},jf=class G3 extends Lb{constructor(t,i=new _f,n=!0){super(t,i),this.groupPaddingInner=.1,this.includeInvisibleDomains=n,this.nice=!1}static is(t){return t instanceof G3}isCategoryLike(){return!0}hasDefinedDomain(){return!1}normaliseDataDomain(t){return{domain:t,clipped:!1}}updateScale(){super.updateScale();let{paddingInner:t,paddingOuter:i}=this;if(!Kt(t)||!Kt(i)){const n=this.reduceBandScalePadding();t??(t=n.inner),i??(i=n.outer)}this.scale.paddingInner=t??0,this.scale.paddingOuter=i??0}calculateGridLines(t,i,n){const s=super.calculateGridLines(t,i,n);return this.interval.placement==="between"&&t.length>0&&s.push(super.calculateGridLine({index:t.at(-1).index+1,tickId:`after:${t.at(-1).tickId}`,translation:this.range[1]},t.length,i,n,t)),s}calculateGridLine({index:t,tickId:i,translation:n},s,o,r,a){const{gridLine:l,horizontal:c,interval:d,scale:p}=this;if(d.placement!=="between")return super.calculateGridLine({index:t,tickId:i,translation:n},s,o,r,a);const g=n<p.step?Math.floor(p.step/2):p.step/2,m=n-g,[y,b,C,w]=c?[m,Math.max(o,r),m,Math.min(o,r)]:[Math.min(o,r),m,Math.max(o,r),m],{style:x}=l,{stroke:M,strokeWidth:E=0,lineDash:I}=x[t%x.length]??{};return{tickId:i,offset:m,x1:y,y1:b,x2:C,y2:w,stroke:M,strokeWidth:E,lineDash:I}}calculateGridFills(t,i,n){const{horizontal:s,range:o,scale:r}=this;if(this.interval.placement!=="between")return super.calculateGridFills(t,i,n);const a=[];if(t.length==0)return a;const l=t[0],c=l.translation>o[0]+r.step/2,d=t.at(-1),p=s&&d.translation<o[1]-r.step/2;if(c){const g={tickId:`before:${l.tickId}`,translation:l.translation-r.step};a.push(this.calculateGridFill(g,-1,l.index-1,i,n,t))}if(a.push(...t.map((g,m)=>this.calculateGridFill(g,m,g.index,i,n,t))),p){const g={tickId:`after:${d.tickId}`,translation:d.translation+r.step};a.push(this.calculateGridFill(g,t.length,d.index+1,i,n,t))}return a}calculateGridFill({tickId:t,translation:i},n,s,o,r,a){const{gridLine:l,horizontal:c,interval:d,scale:p}=this;if(d.placement!=="between")return super.calculateGridFill({tickId:t,translation:i},n,s,o,r,a);const g=i-p.step/2,m=i+p.step/2,[y,b,C,w]=c?[g,Math.max(o,r),m,Math.min(o,r)]:[Math.min(o,r),g,Math.max(o,r),m],{fill:x,fillOpacity:M}=l.style[s%l.style.length]??{};return{tickId:t,x1:y,y1:b,x2:C,y2:w,fill:x,fillOpacity:M}}calculateTickLines(t,i){const n=super.calculateTickLines(t,i);return this.interval.placement==="between"&&t.length>0&&n.push(super.calculateTickLine({isPrimary:!1,tickId:`after:${t.at(-1)?.tickId}`,translation:this.range[1]},t.length,i,t)),n}calculateTickLine({isPrimary:t,tickId:i,translation:n},s,o,r){const{horizontal:a,interval:l,primaryTick:c,scale:d,tick:p}=this;if(l.placement!=="between")return super.calculateTickLine({isPrimary:t,tickId:i,translation:n},s,o,r);const g=t&&c?.enabled?c:p,m=-o*this.getTickSize(g),y=n<d.step?Math.floor(d.step/2):d.step/2,b=n-y,[C,w,x,M]=a?[b,0,b,m]:[0,b,m,b],{stroke:E,width:I}=g;return{tickId:i,offset:b,x1:C,y1:w,x2:x,y2:M,stroke:E,strokeWidth:I,lineDash:void 0}}reduceBandScalePadding(){return this.boundSeries.reduce((t,i)=>{const n=i.getBandScalePadding?.();return n&&(t.inner>n.inner&&(t.inner=n.inner),t.outer<n.outer&&(t.outer=n.outer)),t},{inner:1/0,outer:-1/0})}tickFormatParams(t,i,n,s){return{type:"category"}}datumFormatParams(t,i,n,s,o){const{datum:r,seriesId:a,legendItemName:l,key:c,source:d,property:p,domain:g,boundSeries:m}=i;return Array.isArray(t)&&t.some(y=>typeof y!="string")?t=t.map(String):!Array.isArray(t)&&typeof t!="string"&&typeof t!="number"&&!(t instanceof Date)&&(t=String(t)),{type:"category",value:t,datum:r,seriesId:a,legendItemName:l,key:c,source:d,property:p,domain:g,boundSeries:m}}};jf.className="CategoryAxis";jf.type="category";A([k],jf.prototype,"groupPaddingInner",2);A([k],jf.prototype,"paddingInner",2);A([k],jf.prototype,"paddingOuter",2);var Wf=jf,oV=class _3 extends _f{static is(t){return t instanceof _3}normalizeDomains(...t){const{domain:i}=super.normalizeDomains(...t);return{domain:i,animatable:!1}}findIndex(t){return super.findIndex(t)??this.getMatchIndex(t)}getMatchIndex(t){const i=JSON.stringify(t),n=this._domain.find(s=>JSON.stringify(s)===i);if(n!=null)return super.findIndex(n)}};function $u(e){if(e.length===0)return null;let t=1/0,i=-1/0;for(const s of e){const o=s instanceof Date?s.getTime():s;typeof o=="number"&&(o<t&&(t=o),o>i&&(i=o))}const n=[t,i];return n.every(Number.isFinite)?n:null}function _L(e,t,i){let n=!1;const s=$u(e);if(s==null)return{extent:t!=null&&i!=null&&t<=i?[t,i]:[],clipped:!1};let[o,r]=s;return t!=null&&(n||(n=t>o),o=t),i!=null&&(n||(n=i<r),r=i),o>r?{extent:[],clipped:!1}:{extent:[o,r],clipped:n}}function nD(e,t=[0,0]){for(const i of e)typeof i=="number"&&(i<0&&(t[0]+=i),i>0&&(t[1]+=i));return t}function Vue(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:n=>nD(n)}}function V3(e,t){const i=t?.visible??!0;return{id:e,type:"aggregate",matchGroupIds:t?.matchGroupId?[t?.matchGroupId]:void 0,aggregateFunction:n=>nD(n),groupAggregateFunction:(n,s=[0,0])=>(i&&(s[0]+=n?.[0]??0,s[1]+=n?.[1]??0),s)}}function zue(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:n=>lr.extendDomain(n)}}function WI(e,t){const i=t?.visible??!0;return{id:e,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(n,s=[0,0])=>(i&&(s[0]+=n?.[0]??0,s[1]+=n?.[1]??0),s)}}function z3(e,t){const i=t?.visible??!0;return{id:e,matchGroupIds:t?.matchGroupId?[t?.matchGroupId]:void 0,type:"aggregate",aggregateFunction:s=>nD(s),groupAggregateFunction:(s,o=[0,0,-1])=>(i&&(o[0]+=s?.[0]??0,o[2]++,o[1]+=s?.[1]??0),o),finalFunction:(s=[0,0,0])=>{const o=s[0]+s[1];return o>=0?[0,o/s[2]]:[o/s[2],0]}}}function UI(e,t,i){const n={id:e,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(s,o=[])=>{const r=o[1]-o[0];return t.aggregateFunction(s).map(a=>a/r)}};return t.groupAggregateFunction&&(n.groupAggregateFunction=t.groupAggregateFunction),n}function H3(e){return()=>{let t=0;return i=>Kt(i)?(t+=e?Math.max(0,i):i,t):i}}function j3(){return()=>{let e=0;return t=>{if(!Kt(t))return t;const i=e;return e+=t,i}}}var Hue=1e3;function Uf(e){return e.input.count<=Hue}function W3(e){return e!=null&&EM(e)}function jue(e){return e!=null}function U3(e){switch(e){case"number":case"log":case"time":case"unit-time":case"ordinal-time":case"color":return W3;default:return jue}}function $3(e){switch(e){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function Mu(e,t,i={}){return{property:e,type:"key",valueType:$3(t),validation:U3(t),...i}}function vi(e,t,i={}){return{property:e,type:"value",valueType:$3(t),validation:U3(t),...i}}function Y3(e,t={}){return{property:e,type:"value",valueType:"range",missingValue:1,processor:()=>()=>1,...t}}var Wue=function(e){return e};function K3(...e){const t=e.filter(i=>i!=null);return t.length===0?()=>Wue:t.length===1?t[0]:()=>{const i=t.map(n=>n());return(n,s)=>i.reduce((o,r)=>r(o,s),n)}}function q3(e,t={}){const{min:i=-1/0,max:n=1/0,processor:s,...o}=t;return{type:"value",property:e,valueType:"range",validation:W3,processor:K3(s,()=>r=>Kt(r)?st(i,r,n):r),...o}}function $I(e,t,i={}){const{onlyPositive:n,processor:s,...o}=i;return{...vi(e,t,o),processor:K3(s,H3(n))}}function Uue(e,t,i={}){return{...vi(e,t,i),processor:j3()}}function Ev(e,t,i,n){return[vi(e,n,i),J3(i.groupId,t,i.separateNegative),...i.rangeId==null?[]:[zue(i.rangeId,i.groupId)]]}var Z3={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let e=Number.NaN;return(t,i)=>{const n=typeof i[0]=="number"?i[0]:Number(i[0]),s=Math.abs(n-e);e=n;const o=t??1/0;return!Number.isNaN(s)&&s>0&&s<o?s:o}}},X3={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let e=Number.NaN;return(t,i)=>{const n=typeof i[0]=="number"?i[0]:Number(i[0]),s=Math.abs(n-e);e=n;const o=t??-1/0;return!Number.isNaN(s)&&s>0&&s>o?s:o}}},Q3={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:e}})=>e?.slice().sort((t,i)=>{for(let n=0;n<t.length;n++){const s=t[n]-i[n];if(s!==0)return s}return 0})};function $ue({normaliseTo:e}){const t=(i,n)=>{if(n===0)return 0;const s=(i??0)*e/n;return s>=0?Math.min(e,s):Math.max(-e,s)};return()=>()=>(i,n,s,o)=>{const r=Yue(i,n,s,o);for(const a of n){const l=s.datumIndices[a];if(l!=null)for(const c of l){const d=o+c,p=i[a],g=p[d];if(g==null){p[d]=void 0;continue}p[d]=t(g,r)}}}}function Yue(e,t,i,n){const s=[0,0];for(const o of t){const r=e[o],a=i.datumIndices[o];if(a!=null)for(const l of a){const c=n+l,d=r[c];if(d==null)continue;const p=typeof d=="number"?d:Math.max(...d.map(m=>m??0)),g=p<0?0:1;g===0?s[g]=Math.min(s[g],p):s[g]=Math.max(s[g],p)}}return Math.max(Math.abs(s[0]),s[1])}function sD(e,t){return{type:"group-value-processor",matchGroupIds:e,adjust:SM({normaliseTo:t},$ue)}}function Kue({normaliseTo:e,zeroDomain:t,rangeMin:i,rangeMax:n}){const s=e[1]-e[0],o=(r,a,l)=>{const c=e[0]+(r-a)/l*s;return l===0?t:c>=e[1]?e[1]:c<e[0]?e[0]:c};return()=>(r,a)=>{let[l,c]=r.domain.values[a];i!=null&&(l=i),n!=null&&(c=n);const d=c-l;r.domain.values[a]=[e[0],e[1]];const p=r.columns[a];for(let g=0;g<p.length;g+=1)p[g]=o(p[g],l,d)}}function YS(e,t,i,n,s){return{type:"property-value-processor",property:e,adjust:SM({normaliseTo:t,rangeMin:n,rangeMax:s,zeroDomain:i},Kue)}}var zy=1,s0=2;function rV(e,t,i,n){let s=zy|s0;if(t.valueType==="category")return i.length<e&&(s&=~zy),s;let o=n[0]?.valueOf();for(let r=1;s!==0&&r<n.length;r++){const a=n[r]?.valueOf();(!Number.isFinite(a)||o>a)&&(s&=~s0),Number.isFinite(a)&&o===a&&(s&=~zy),o=a}return s}function Qb(e){return{type:"processor",property:"animationValidation",calculate(t){if(!Uf(t))return;const{keys:i,values:n}=t.defs,{input:s,domain:{keys:o,values:r},keys:a,columns:l,invalidKeyCount:c}=t;let d=zy|s0;if(s.count!==0){for(let p=0;d!==0&&p<i.length;p++)for(const g of i[p].scopes){const m=a[p].get(g),y=c?.get(g)??0,b=m.length-y;d&=rV(b,i[p],o[p],m)}for(let p=0;d!==0&&p<n.length;p++){const g=n[p];e?.includes(g.id)&&(d&=rV(0,g,r[p],l[p]))}}return{uniqueKeys:(d&zy)!==0,orderedKeys:(d&s0)!==0}}}}function que({mode:e,separateNegative:t}){return()=>()=>(i,n,s,o)=>{const r=[0,0];for(const a of n){const l=s.datumIndices[a];if(l==null)continue;const c=r[0],d=r[1],p=i[a];let g=!1;for(const m of l){const y=o+m,b=p[y];if(!Kt(b))continue;const C=t&&C1(b),w=C?c:d;if(e==="normal"?p[y]=w+b:p[y]=w,!g){const x=C?0:1;r[x]=w+b,g=!0}}}}}function J3(e,t,i=!1){const n=SM({mode:t,separateNegative:i},que);return{type:"group-value-processor",matchGroupIds:[e],adjust:n,supportsReprocessing:!0}}function aV(e){return e.id??e.property}function Zue(e,t,i){const n=new Map,s=t.defs.values;for(let a=0;a<s.length;a+=1){const l=s[a];if(l.scopes?.includes(e)===!1)continue;const c=aV(l);if(n.has(c))return;n.set(c,a)}const o=[],r=i.defs.values;for(let a=0;a<r.length;a+=1){const l=r[a];if(l.scopes?.includes(e)===!1)continue;const c=aV(l),d=n.get(c);if(d==null)return;n.delete(c),o.push({previousIndex:d,nextIndex:a})}if(n.size===0)return o}function qE(e,t,i,n,s){for(const{previousIndex:o,nextIndex:r}of i){const a=e[o],l=t[r],c=a[n],d=l[s];if(c!==d)return!1}return!0}function oD(e,t,i=!0){return{type:"processor",property:"diff",calculate(n,s){if(!Uf(n))return;const o=new Map,r=new Map,a=new Map,l=new Map,c=t.keys.map(w=>w.get(e)),d=n.keys.map(w=>w.get(e)),p=t.columns,g=n.columns,m=Zue(e,t,n);if(m==null)return s;const y=Math.max(t.input.count,n.input.count);for(let w=0;w<y;w++){const x=w<t.input.count,M=w<n.input.count,E=x?Kx(c,w):void 0,I=E==null?"":Ls(...E),N=M?Kx(d,w):void 0,T=N==null?"":Ls(...N);if(M&&x&&I===T){qE(p,g,m,w,w)||a.set(T,w);continue}const P=l.get(T);P!=null?((i||!qE(p,g,m,P,w))&&(a.set(T,w),o.set(T,w)),l.delete(T)):M&&r.set(T,w);const O=r.get(I);O!=null?((i||!qE(p,g,m,O,w))&&(a.set(I,w),o.set(I,w)),r.delete(I)):x&&(a.delete(I),l.set(I,w))}const C={changed:r.size>0||a.size>0||l.size>0,added:new Set(r.keys()),updated:new Set(a.keys()),removed:new Set(l.keys()),moved:new Set(o.keys())};return{...s,[e]:C}}}}function Ls(...e){if(e.length===1){const t=kI(e[0]);if(typeof t=="boolean"||typeof t=="number"||typeof t=="string")return t}return e.map(t=>kI(t)).join("___")}var Xue=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){e>this.right&&(this.right=e),e<this.left&&(this.left=e),t>this.bottom&&(this.bottom=t),t<this.top&&(this.top=t)}},Que=class e5{constructor(t="",i,n){this.label=t,this.parent=i,this.refId=n,this.position=0,this.subtreeLeft=Number.NaN,this.subtreeRight=Number.NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screen=0,this.depth=i?i.depth+1:0}insertTick(t,i){let n=this,s;for(let o=0;o<t.length;o++){const r=t[o],a=o!==t.length-1,{children:l}=n,c=l.find(d=>d.label===r);if(c&&a)n=c,s=c;else{const d=new e5(r,n,i);d.index=l.length,l.push(d),a&&(n=d),s=d}}return s}getLeftSibling(){return this.index>0?this.parent?.children[this.index-1]:void 0}getLeftmostSibling(){return this.index>0?this.parent?.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){return this.parent?.children.filter((t,i)=>i!==this.index)??[]}};function Jue(e){const t=e.reduce((s,o)=>Math.max(s,o.length),0),i=new Que,n=new Map;for(let s=0;s<e.length;s++){const o=e[s];for(;o.length<t;)o.push("");const r=i.insertTick(o,s);r!=null&&n.set(o,r)}return{root:i,tickNodes:n}}function ede(e,t,i){const n=t.index-e.index,s=i/n;t.change-=s,t.shift+=i,e.change+=s,t.prelim+=i,t.mod+=i}function tde(e,t,i){return t.getSiblings().includes(e.ancestor)?e.ancestor:i}function ide({children:e}){let t=0,i=0;for(let n=e.length-1;n>=0;n--){const s=e[n];s.prelim+=t,s.mod+=t,i+=s.change,t+=s.shift+i}}function nde(e,t){const i=e.getLeftSibling();if(i){let n=e,s=e,o=i,r=s.getLeftmostSibling(),a=s.mod,l=n.mod,c=o.mod,d=r.mod;for(;o.nextRight()&&s.nextLeft();){o=o.nextRight(),s=s.nextLeft(),r=r.nextLeft(),n=n.nextRight(),n.ancestor=e;const p=o.prelim+c-(s.prelim+a)+1;p>0&&(ede(tde(o,e,t),e,p),a+=p,l+=p),c+=o.mod,a+=s.mod,d+=r.mod,l+=n.mod}o.nextRight()&&!n.nextRight()?n.mod+=c-l:(s.nextLeft()&&!r.nextLeft()&&(r.mod+=a-d),t=e)}return t}function t5(e){const{children:t}=e;if(t.length){let[i]=t;for(const o of t)t5(o),i=nde(o,i);ide(e);const n=(t[0].prelim+t.at(-1).prelim)/2,s=e.getLeftSibling();s?(e.prelim=s.prelim+1,e.mod=e.prelim-n):e.prelim=n}else{const i=e.getLeftSibling();e.prelim=i?i.prelim+1:0}}function i5(e,t,i){e.position=e.prelim+t,i.insertNode(e);for(const n of e.children)i5(n,t+e.mod,i)}function n5(e){const{children:t}=e;let i=0;for(const n of t)n5(n),n.children.length?i+=n.leafCount:i++;e.leafCount=i,t.length?(e.subtreeLeft=t[0].subtreeLeft,e.subtreeRight=t.at(-1).subtreeRight,e.position=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.position,e.subtreeRight=e.position)}function sde(e){const t=new ode,{root:i,tickNodes:n}=Jue(e);return t5(i),i5(i,-i.prelim,t),n5(i),{layout:t,tickNodes:n}}var ode=class{constructor(){this.dimensions=new Xue,this.nodes=[],this.depth=0}insertNode(e){this.depth<e.depth&&(this.depth=e.depth),this.dimensions.update(e.position,e.depth),this.nodes.push(e)}scaling(e,t){let i=1;if(e>0){const{left:n,right:s}=this.dimensions;s!==n&&(i=e/(s-n))}return t&&(i*=-1),i}},Ey=5,Bs=class extends Qe{constructor(){super(...arguments),this.enabled=!0,this.border=new Oh}};A([k],Bs.prototype,"enabled",2);A([k],Bs.prototype,"avoidCollisions",2);A([k],Bs.prototype,"border",2);A([k],Bs.prototype,"color",2);A([k],Bs.prototype,"cornerRadius",2);A([k],Bs.prototype,"spacing",2);A([k],Bs.prototype,"rotation",2);A([k],Bs.prototype,"wrapping",2);A([k],Bs.prototype,"truncate",2);A([k],Bs.prototype,"fill",2);A([k],Bs.prototype,"fontStyle",2);A([k],Bs.prototype,"fontWeight",2);A([k],Bs.prototype,"fontSize",2);A([k],Bs.prototype,"fontFamily",2);A([k],Bs.prototype,"padding",2);var rD=class extends Qe{constructor(){super(...arguments),this.enabled=!0}};A([k],rD.prototype,"enabled",2);A([k],rD.prototype,"width",2);A([k],rD.prototype,"stroke",2);var VL=class extends Qe{constructor(){super(...arguments),this.label=new Bs,this.tick=new rD}};A([k],VL.prototype,"label",2);A([k],VL.prototype,"tick",2);var Hh=class extends Wf{constructor(e){super(e,new oV),this.tickScale=new oV,this.computedLayout=void 0,this.tickTreeLayout=void 0,this.tickNodes=void 0,this.depthOptions=new Ff(VL),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;const{nodes:e}=this.tickTreeLayout,{range:t,step:i,inset:n,bandwidth:s}=this.scale,o=Math.abs(t[1]-t[0])-i,r=this.tickTreeLayout.scaling(o,t[0]>t[1]),a=n+s/2;let l=0;for(const c of e){const d=c.position*r;l>d&&(l=d),c.screen=d+a}for(const c of e)c.screen-=l}getDepthOptionsMap(e){const t=[],{depthOptions:i,label:n}=this,s=this.horizontal?0:-90;for(let o=0;o<e;o++)t.push(i[o]?.label.enabled??n.enabled?{enabled:!0,spacing:i[o]?.label.spacing??n.spacing,wrapping:i[o]?.label.wrapping??n.wrapping,truncate:i[o]?.label.truncate??n.truncate,rotation:i[o]?.label.rotation??(o?s:n.rotation),avoidCollisions:i[o]?.label.avoidCollisions??n.avoidCollisions}:{enabled:!1,spacing:0,rotation:0,avoidCollisions:!1});return t}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each((e,t)=>{e.fill=t.color,e.text=t.text,e.textBaseline=t.textBaseline,e.textAlign=t.textAlign??"center",e.setFont(t),e.setBoxing(t)})}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){this.updateDirection(),this.updateScale();const{step:e}=this.scale,{title:t,label:i,range:n,depthOptions:s,horizontal:o,line:r}=this;if(this.lineNode.datum=o?{x1:n[0],x2:n[1],y1:0,y2:0}:{x1:0,x2:0,y1:n[0],y2:n[1]},this.lineNode.setProperties({stroke:r.stroke,strokeWidth:r.enabled?r.width:0}),this.resizeTickTree(),!this.tickTreeLayout?.depth)return{bbox:Le.zero,spacing:0,depthLabelMaxSize:{},tickLabelLayout:[]};const{depth:a,nodes:l}=this.tickTreeLayout,c=o?-i.getSideFlag():i.getSideFlag(),d=[],p=new Map,g=new lf,m=this.getDepthOptionsMap(a),y=c*m[0].spacing,b=this.tickFormatter(this.scale.domain,this.scale.domain,!1),C=(P,O)=>{const G=a-P.depth;if(!m[G]?.enabled||!vse(P.screen,n))return!1;let B=(P.leafCount||1)*e;if(B<Ey)return!1;let z=b(P.label,O-1);const j=this.getLabelStyles({value:P.index,formattedValue:z,depth:G},s[G]?.label);if(i.avoidCollisions){const X=m[G].rotation;let q=this.thickness;if(X!=null){const K=ooe(X,B,q);B=K.width,q=K.height}const H={font:j,textWrap:m[G].wrapping,overflow:m[G].truncate?"ellipsis":"hide",maxWidth:B,maxHeight:q};z=L1(z,H)||z}return g.x=o?P.screen:y,g.y=o?y:P.screen,g.rotation=0,g.fill=j.color,g.text=z,g.textAlign="center",g.textBaseline=i.parallel?"top":"bottom",g.setFont(j),g.setBoxing(j),!0},w={};for(const[P,O]of l.entries()){const G=a-O.depth;if(w[G]??(w[G]=0),!O.children.length&&e<Ey||!C(O,P)||!g.getBBox())continue;p.set(P,g.getBBox()),g.rotation=ac(m[G]?.rotation);const{width:j,height:X}=g.getBBox(),q=o?X:j;w[G]<q&&(w[G]=q)}const x=AL(),M=P=>{if(P===0)return 0;let O=w[0];for(let G=1;G<=P;G++)O+=m[G].spacing,G!==P&&(O+=w[G]);return O};for(const[P,O]of l.entries()){if(P===0)continue;const G=C(O,P),B=!O.children.length,z=a-O.depth;if(B&&e<Ey||!G)continue;const j=ac(m[z].rotation),X=p.get(P);if(!X)continue;const{width:q,height:H}=X,K=M(z);if(g.textAlign="center",g.textBaseline="middle",g.rotation=j,o?(g.y+=(K+vI(q/2,H/2,j))*c,g.rotationCenterX=O.screen,g.rotationCenterY=g.y):(g.x+=K*c+vI((m[z].spacing*c+q)/2,i.mirrored?q:0,j)-q/2,g.rotationCenterX=g.x,g.rotationCenterY=O.screen),m[z].avoidCollisions){const{width:te,height:V}=g.getBBox(),W=o?te:V,ee=B?e:O.leafCount*e;if(W>ee){p.delete(P);continue}}const U=g.getPlainText(),de=g.getBoxingProperties();d.push({text:U,visible:!0,tickId:x(U),range:this.scale.range,border:de.border,color:g.fill,cornerRadius:de.cornerRadius,fill:de.fill,fontFamily:g.fontFamily,fontSize:g.fontSize,fontStyle:g.fontStyle,fontWeight:g.fontWeight,padding:de.padding,rotation:g.rotation,rotationCenterX:g.rotationCenterX,rotationCenterY:g.rotationCenterY,textAlign:g.textAlign,textBaseline:g.textBaseline,x:g.x,y:g.y}),p.set(P,Hi.toCanvas(g))}let E=w[0];for(let P=0;P<a;P++)E+=m[P].spacing,P!==0&&(E+=w[P]);const I=[this.lineNodeBBox(),Le.merge(p.values()),new Le(0,0,E*c,0)];let N=0;if(t.enabled){const P=Le.merge(I);N=o?P.height:P.width,I.push(this.titleBBox(this.scale.domain,N))}const T=Le.merge(I);return this.layoutCrossLines(),{bbox:T,spacing:N,depthLabelMaxSize:w,tickLabelLayout:d}}update(){if(!this.computedLayout)return;this.moduleCtx.animationManager.skipCurrentBatch();const{tickScale:e,tick:t,gridLine:i,gridLength:n,visibleRange:s,tickTreeLayout:o}=this;if(!o)return;const{depthLabelMaxSize:r,spacing:a}=this.computedLayout,{depth:l}=o,c=this.getDepthOptionsMap(l),{position:d,horizontal:p,gridPadding:g}=this,m=d==="bottom"||d==="right"?-1:1,y=g,b=m*n-g;let C;if(e.step>Ey){const x={nice:!1,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0};C=e.ticks(x,void 0,s).ticks}else C=[];const w=C.map((x,M)=>({index:e.findIndex(x),tickId:Ls(M,...x),translation:Math.round(e.convert(x))}));this.gridLineGroupSelection.update(i.enabled&&n?this.calculateGridLines(w,y,b):[]),this.gridFillGroupSelection.update(i.enabled&&n?this.calculateGridFills(w,y,b):[]),this.tickLineGroupSelection.update(t.enabled?C.map((x,M)=>{const{tickId:E,translation:I}=w[M],N=this.tickNodes?.get(x),T=N==null?l-1:Math.min(rde(N),l-1),P=this.depthOptions[T]?.tick;let O=r[0];for(let U=0;U<=T;U++)O+=c[U].spacing,U!==0&&(O+=r[U]);const G=P?.stroke??t.stroke,B=P?.enabled===!1?0:P?.width??t.width,z=-m*O,[j,X,q,H]=p?[I,I,0,z]:[0,z,I,I];return{tickId:E,offset:I,x1:j,y1:q,x2:X,y2:H,stroke:G,strokeWidth:B,lineDash:void 0}}):[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateGridFills(),this.updateTickLines(),this.updateTitle(this.scale.domain,a),this.updateCrossLines(),this.resetSelectionNodes()}calculateLayout(){const{depthLabelMaxSize:e,tickLabelLayout:t,spacing:i,bbox:n}=this.computeLayout();return this.computedLayout={depthLabelMaxSize:e,tickLabelLayout:t,spacing:i},{bbox:n,niceDomain:this.scale.domain}}onGridVisibilityChange(){super.onGridVisibilityChange(),this.tickLabelGroupSelection.clear()}updateScale(){super.updateScale(),this.tickScale.range=this.scale.range,this.scale.paddingOuter=this.scale.paddingInner/2}processData(){const{direction:e}=this,t=this.boundSeries.filter(l=>l.visible).flatMap(l=>l.getDomain(e));this.dataDomain={domain:$u(t)??this.filterDuplicateArrays(t),clipped:!1},this.isReversed()&&this.dataDomain.domain.reverse();const i=this.dataDomain.domain.map(lV),{layout:n,tickNodes:s}=sde(i);this.tickTreeLayout=n,this.tickNodes=s;const o=[];for(const l of this.tickTreeLayout.nodes)l.leafCount||l.refId==null||o.push(this.dataDomain.domain[l.refId]);const r=aoe(this.dataDomain.domain,o);this.scale.domain=r;const a=r.map(lV);a.push([""]),this.tickScale.domain=a}filterDuplicateArrays(e){const t=new Set;return e.filter(i=>{const n=ht(i)?JSON.stringify(i):i;return t.has(n)?!1:(t.add(n),!0)})}};Hh.className="GroupedCategoryAxis";Hh.type="grouped-category";A([k],Hh.prototype,"depthOptions",2);function rde(e){let t=0,i=e;for(;i?.index===0;)t+=1,i=i.parent;return t}function lV(e){return Gx(Zt(e)&&"value"in e?e.value:e)}var ade={2:(e,t)=>Math.log2(t),[Math.E]:(e,t)=>Math.log(t),10:(e,t)=>Math.log10(t)},lde=(e,t)=>Math.log(t)/Math.log(e);function ZE(e,t,i){const n=Math.min(...t),s=ade[e]??lde;return n>=0?s(e,i):-s(e,-i)}var cde={[Math.E]:(e,t)=>Math.exp(t),10:(e,t)=>t>=0?10**t:1/10**-t},ude=(e,t)=>e**t;function XE(e,t,i){const n=Math.min(...t),s=cde[e]??ude;return n>=0?s(e,i):-s(e,-i)}var zL=class s5 extends Ut{constructor(t=[1,10],i=[0,1]){super(t,i),this.type="log",this.defaultClamp=!0,this.base=10,this.log=n=>ZE(this.base,this.domain,n),this.pow=n=>XE(this.base,this.domain,n)}static is(t){return t instanceof s5}transform(t){const[i,n]=Gn(this.domain);return i>=0!=n>=0?Number.NaN:i>=0?Math.log(t):-Math.log(-t)}transformInvert(t){const[i,n]=Gn(this.domain);return i>=0!=n>=0?Number.NaN:i>=0?Math.exp(t):-Math.exp(-t)}toDomain(t){return t}niceDomain(t,i=this.domain){if(i.length<2)return[];const{base:n}=this,[s,o]=i,r=s>o?Math.ceil:Math.floor,a=s>o?Math.floor:Math.ceil,l=XE(n,i,r(ZE(n,i,s))),c=XE(n,i,a(ZE(n,i,o)));return[l,c]}ticks({interval:t,tickCount:i=Ut.defaultTickCount},n=this.domain,s){if(!n||n.length<2||i<1)return;const o=this.base,[r,a]=n,l=Math.min(r,a),c=Math.max(r,a);let d=this.log(l),p=this.log(c);if(t){const C=N=>N>=l&&N<=c,w=Math.min(Math.abs(t),Math.abs(p-d)),{ticks:x,count:M,firstTickIndex:E}=PM(d,p,w,s),I=x.map(this.pow).filter(C);if(!mf(I.length,this.getPixelRange()))return{ticks:I,count:M,firstTickIndex:E}}if(!bse(o)||p-d>=i){const C=Math.min(p-d,i),{ticks:w,count:x,firstTickIndex:M}=Ib(d,p,C,void 0,void 0,s);return{ticks:w.map(this.pow),count:x,firstTickIndex:M}}const g=[],m=l>0;d=Math.floor(d)-1,p=Math.round(p)+1;const y=wh(this.range)/i;let b=1/0;for(let C=d;C<=p;C++){const w=this.convert(this.pow(C+1));for(let x=1;x<o;x++){const M=m?x:o-x+1,E=this.pow(C)*M,I=this.convert(E),N=Math.abs(b-I),T=Math.abs(I-w),P=N>=y&&T>=y;E>=l&&E<=c&&(x===1||P||g.length===0)&&(g.push(E),b=I)}}return zU(g,m,s)}},oh=class YI extends Ut{constructor(){super([0,1],[0,1]),this.type="number"}static is(t){return t instanceof YI}static getTickStep(t,i,n){const{interval:s,tickCount:o=Ut.defaultTickCount,minTickCount:r,maxTickCount:a}=n;return s??xv(t,i,o,r,a)}toDomain(t){return t}ticks({interval:t,tickCount:i=Ut.defaultTickCount,minTickCount:n,maxTickCount:s},o=this.domain,r){if(!o||o.length<2||i<1||!o.every(Number.isFinite))return{ticks:[],count:0,firstTickIndex:0};const[a,l]=o;if(t){const c=Math.abs(t);if(!mf((l-a)/c,this.getPixelRange()))return PM(a,l,c,r)}return Ib(a,l,i,n,s,r)}niceDomain(t,i=this.domain){if(i.length<2)return[];const{tickCount:n=Ut.defaultTickCount}=t;let[s,o]=i;if(n===1)[s,o]=$U(s,o);else if(n>1){const r=s>o?Math.ceil:Math.floor,a=s>o?Math.floor:Math.ceil,l=4;for(let c=0;c<l;c++){const d=s,p=o,g=YI.getTickStep(s,o,t),[m,y]=i;if(s=r(m/g)*g,o=a(y/g)*g,s===d&&o===p)break}}return[s,o]}},Yo=class extends Lb{constructor(e,t=new oh){super(e,t)}hasDefinedDomain(){const{min:e,max:t}=this;return e!=null&&t!=null&&e<t}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:n,clipped:s}=_L(e,t,i);return{domain:n,clipped:s}}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:n,seriesId:s,legendItemName:o,key:r,source:a,property:l,domain:c,boundSeries:d}=t;return{type:"number",value:e,datum:n,seriesId:s,legendItemName:o,key:r,source:a,property:l,domain:c,boundSeries:d,fractionDigits:i}}};Yo.className="NumberAxis";Yo.type="number";A([k],Yo.prototype,"min",2);A([k],Yo.prototype,"max",2);var jh=class extends Yo{normaliseDataDomain(e){const{min:t,max:i}=this,{extent:n,clipped:s}=_L(e,t,i);return n[0]<0&&n[1]>0||e[0]<0&&e[1]>0?(fe.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:s}):n[0]===0||n[1]===0||e[0]===0||e[1]===0?(fe.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:s}):{domain:n,clipped:s}}set base(e){this.scale.base=e}get base(){return this.scale.base}constructor(e){super(e,new zL)}};jh.className="LogAxis";jh.type="log";var $f=class extends Qe{constructor(){super(...arguments),this.enabled=!1,this.label=new Ci,this.tick=new Gh}};A([k],$f.prototype,"enabled",2);A([k],$f.prototype,"label",2);A([k],$f.prototype,"tick",2);var Sc=class extends Lb{constructor(e){super(e,new yf),this.parentLevel=new $f,this.min=void 0,this.max=void 0}get _unit(){}set _unit(e){fe.warnOnce("To use 'unit', use an axis with type 'unit-time' instead of 'time'.")}hasDefinedDomain(){const{min:e,max:t}=this;return e!=null&&t!=null&&e<t}isCategoryLike(){return!1}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}normaliseDataDomain(e){return HL(e,this.min,this.max)}processData(){super.processData();const{boundSeries:e,direction:t,min:i,max:n}=this;this.minimumTimeGranularity=o5(e,t,i,n)}tickFormatParams(e,t,i,n){n??(n=wL(t));const s=SL(e),o=cc(n),r=Tu(n),a=Sv(n);return{type:"date",unit:o,step:r,epoch:a,truncateDate:s}}datumFormatParams(e,t,i,n,s){if(typeof e=="number"&&(e=new Date(e)),n==null){const{minimumTimeGranularity:C}=this,w=kM(e);C!=null&&po(C)<po(w)?n=C:n=w}const{datum:o,seriesId:r,legendItemName:a,key:l,source:c,property:d,domain:p,boundSeries:g}=t,m=cc(n),y=Tu(n),b=Sv(n);return{type:"date",value:e,datum:o,seriesId:r,legendItemName:a,key:l,source:c,property:d,domain:p,boundSeries:g,unit:m,step:y,epoch:b,style:s}}};Sc.className="TimeAxis";Sc.type="time";A([k],Sc.prototype,"parentLevel",2);A([k],Sc.prototype,"min",2);A([k],Sc.prototype,"max",2);A([k,rn("_unit")],Sc.prototype,"unit",2);function o5(e,t,i,n){const s=e.reduce((o,r)=>Math.min(r.minTimeInterval()??1/0,o),1/0);return Number.isFinite(s)?Tb(s):r5(e,t,i,n)?.unit}function r5(e,t,i,n){let s=1/0,o=-1/0,r,a=0;const l=[];for(const g of e){if(!g.visible)continue;const{domain:m}=HL(g.getDomain(t),void 0,void 0);if(m.length===0)continue;const y=m[0].valueOf(),b=m.at(-1).valueOf();l.push(y,b),s=Math.min(s??1/0,y,b),o=Math.max(o??-1/0,y,b);const C=Math.abs(b-y);if(C===0)continue;const w=g.dataCount();if(a=Math.max(a,w),w<=1)continue;const x=C/(w-1);r=Math.min(r??1/0,x)}if(s=Math.min(s,i?.valueOf()??1/0,n?.valueOf()??1/0),o=Math.max(o,i?.valueOf()??-1/0,n?.valueOf()??-1/0),!Number.isFinite(s)||!Number.isFinite(o))return;r??(r=Math.abs(o-s)),r=Math.min(r,dde(l));const c=Tb(r);let d=r/po(c);a<=2?d=Math.floor(d):d=Math.round(d),d=Math.max(d,1);const p=d===1?void 0:vr(c,s);return{unit:c,step:d,epoch:p}}function dde(e){e.sort((i,n)=>i-n);let t=1/0;for(let i=1;i<e.length;i++){const n=e[i-1],s=e[i];s-n>0&&(t=Math.min(t,Math.abs(s-n)))}return t}function HL(e,t,i){let n=!1;typeof t=="number"&&(t=new Date(t)),typeof i=="number"&&(i=new Date(i));const s=$u(e)?.map(a=>new Date(a));if(s==null)return{domain:t!=null&&i!=null&&t.valueOf()<=i.valueOf()?[t,i]:[],clipped:!1};let[o,r]=s;return t instanceof Date&&(n||(n=t>o),o=t),i instanceof Date&&(n||(n=i<r),r=i),o>r?{domain:[],clipped:!1}:{domain:[o,r],clipped:n}}var a5=class extends Wf{calculateGridLine({index:e,tickId:t,translation:i},n,s,o,r){const{gridLine:a,horizontal:l,interval:c,range:d}=this;if(c.placement!=="between")return super.calculateGridLine({index:e,tickId:t,translation:i},n,s,o,r);const p=r[n-1],g=p?i-(i-p.translation)/2:d[0],[m,y,b,C]=l?[g,Math.max(s,o),g,Math.min(s,o)]:[Math.min(s,o),g,Math.max(s,o),g],{style:w}=a,{stroke:x,strokeWidth:M=0,lineDash:E}=w[e%w.length]??{};return{tickId:t,offset:g,x1:m,y1:y,x2:b,y2:C,stroke:x,strokeWidth:M,lineDash:E}}calculateGridFills(e,t,i){return this.interval.placement!=="between"?super.calculateGridFills(e,t,i):e.map((n,s)=>this.calculateGridFill(n,s,n.index,t,i,e))}calculateGridFill({tickId:e,translation:t},i,n,s,o,r){const{gridLine:a,horizontal:l,interval:c,range:d}=this;if(c.placement!=="between")return super.calculateGridFill({tickId:e,translation:t},i,n,s,o,r);const p=r[i-1],g=r[i+1],m=p?t-(t-p.translation)/2:d[0],y=g?t+(g.translation-t)/2:d[1],[b,C,w,x]=l?[m,Math.max(s,o),y,Math.min(s,o)]:[Math.min(s,o),m,Math.max(s,o),y],{fill:M,fillOpacity:E}=a.style[n%a.style.length]??{};return{tickId:e,x1:b,y1:C,x2:w,y2:x,fill:M,fillOpacity:E}}calculateTickLine({isPrimary:e,tickId:t,translation:i},n,s,o){const{horizontal:r,interval:a,primaryTick:l,range:c,tick:d}=this;if(a.placement!=="between")return super.calculateTickLine({isPrimary:e,tickId:t,translation:i},n,s,o);const p=e&&l?.enabled?l:d,g=-s*this.getTickSize(p),m=o[n-1],y=m?i-(i-m.translation)/2:c[0],[b,C,w,x]=r?[y,0,y,g]:[0,y,g,y],{stroke:M,width:E}=p;return{tickId:t,offset:y,x1:b,y1:C,x2:w,y2:x,stroke:M,strokeWidth:E,lineDash:void 0}}},Yu=class extends a5{constructor(e){super(e,new mu,!1),this.parentLevel=new $f,this.min=void 0,this.max=void 0,this.unit=void 0,this.defaultUnit=void 0}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}hasDefinedDomain(){const{min:e,max:t}=this;return e!=null&&t!=null&&e<t}isCategoryLike(){return!0}processData(){super.processData();let e;const{domain:t}=this.dataDomain;if(t.length===2&&t[0].valueOf()===t[1].valueOf())e=kM(t[0]);else{const{boundSeries:i,direction:n,min:s,max:o}=this;e=r5(i,n,s,o)}qs(this.defaultUnit,e)||(this.defaultUnit=e)}updateScale(){super.updateScale(),this.scale.interval=this.unit??this.defaultUnit}normaliseDataDomain(e){return HL(e,this.min,this.max)}tickFormatParams(e,t,i,n){n??(n=wL(t));const s=SL(e),o=cc(n),r=Tu(n),a=Sv(n);return{type:"date",unit:o,step:r,epoch:a,truncateDate:s}}datumFormatParams(e,t,i,n,s){const o=this.unit??this.defaultUnit??"millisecond";n??(n=o);const{datum:r,seriesId:a,legendItemName:l,key:c,source:d,property:p,domain:g,boundSeries:m}=t,y=cc(n),b=Tu(n),C=Sv(n);return{type:"date",value:vr(o,e),datum:r,seriesId:a,legendItemName:l,key:c,source:d,property:p,domain:g,boundSeries:m,unit:y,step:b,epoch:C,style:s}}};Yu.className="UnitTimeAxis";Yu.type="unit-time";A([k],Yu.prototype,"parentLevel",2);A([k],Yu.prototype,"min",2);A([k],Yu.prototype,"max",2);A([k],Yu.prototype,"unit",2);var ug={...wc,...Hf(ue),type:Te(bi("number")),label:OL,crosshair:Uu(!0)},dg={...wc,...Hf(ue),type:Te(bi("log")),base:gi(dv,It(e=>e!==1,"not equal to 1")),label:OL,crosshair:Uu(!0)},hg={...wc,...Hf(rt(ue,Ya),!0),type:Te(bi("time")),label:Zb,parentLevel:iD,crosshair:Uu(!0,!0)},pg={...wc,type:Te(bi("category")),label:qb,paddingInner:Be,paddingOuter:Be,groupPaddingInner:Be,crosshair:Uu(),bandHighlight:Xb,interval:{...BL,placement:ye("on","between")}},gg={...wc,type:Te(bi("grouped-category")),label:qb,crosshair:Uu(),bandHighlight:Xb,paddingInner:Be,groupPaddingInner:Be,depthOptions:Vn({label:{enabled:Z,avoidCollisions:Z,wrapping:ye("never","always","hyphenate","on-space"),truncate:Z,rotation:ue,spacing:ue,...Xt,...Hr},tick:{enabled:Z,stroke:Re,width:J}},"depth options objects array")},fg={...wc,type:Te(bi("unit-time")),unit:rt(tD,Kb),label:Zb,parentLevel:iD,paddingInner:Be,paddingOuter:Be,groupPaddingInner:Be,crosshair:Uu(!0,!0),bandHighlight:Xb,min:gi(rt(ue,Ya),_a("max")),max:gi(rt(ue,Ya),Va("min")),interval:GL},hde={type:"axis",name:"number",chartType:"cartesian",options:ug,create:e=>new Yo(e)},pde={type:"axis",name:"log",chartType:"cartesian",options:dg,create:e=>new jh(e)},gde={type:"axis",name:"time",chartType:"cartesian",options:hg,create:e=>new Sc(e)},fde={type:"axis",name:"category",chartType:"cartesian",options:pg,create:e=>new Wf(e)},mde={type:"axis",name:"grouped-category",chartType:"cartesian",options:gg,create:e=>new Hh(e)},yde={type:"axis",name:"unit-time",chartType:"cartesian",options:fg,create:e=>new Yu(e)},mg={...wc,type:Te(bi("ordinal-time")),paddingInner:Be,paddingOuter:Be,groupPaddingInner:Be,label:Zb,parentLevel:iD,interval:GL,crosshair:Uu(!0,!0),bandHighlight:Xb},l5={...zh,...Hf(ue),type:Te(bi("angle-number")),crossLines:Vn(Fa),startAngle:ue,endAngle:ue,label:{...Cc,orientation:ye("fixed","parallel","perpendicular"),format:aa}},jL={...zh,type:Te(bi("angle-category")),shape:ye("polygon","circle"),crossLines:Vn(Fa),startAngle:ue,endAngle:ue,paddingInner:Be,groupPaddingInner:Be,label:{...Cc,orientation:ye("fixed","parallel","perpendicular")}};jL.innerRadiusRatio=Be;var c5={...zh,...Hf(ue),type:Te(bi("radius-number")),shape:ye("polygon","circle"),positionAngle:ue,innerRadiusRatio:Be,crossLines:Vn({...Fa,label:{...xh,positionAngle:ue}},"cross-line options"),title:{enabled:Z,text:Ns,spacing:J,formatter:Ks(Ns),...Xt},label:{...Cc,format:aa}},u5={...zh,type:Te(bi("radius-category")),positionAngle:ue,innerRadiusRatio:Be,paddingInner:Be,paddingOuter:Be,groupPaddingInner:Be,label:Cc,crossLines:Vn({...Fa,label:{...xh,positionAngle:ue}},"cross-line options"),title:{enabled:Z,text:Ns,spacing:J,formatter:Ks(Ns),...Xt}},d5=sn(Ai,Ai),vde=Vt({...we,...Ie,...Ne,marker:Wu}),h5={showInMiniChart:Z,connectMissingData:Z,interpolation:QM,label:Jt,styler:vde,marker:Qr,tooltip:Ft,shadow:ol,...Mt,...Ie,...we,...Ne,highlight:d5,segmentation:pb},p5={...h5,...la,highlight:d5,type:Te(bi("area")),xKey:Te(ce),yKey:Te(ce),xName:ce,yName:ce,legendItemName:ce,stacked:Z,stackGroup:ce,normalizedTo:ue},g5=sn(Ka,Ka),cV=Vt({...Ie,...we,...Ne,cornerRadius:J}),WL={direction:ye("horizontal","vertical"),showInMiniChart:Z,cornerRadius:J,styler:cV,itemStyler:cV,crisp:Z,label:{...Jt,placement:ye("inside-center","inside-start","inside-end","outside-start","outside-end"),spacing:J},errorBar:$b,shadow:ol,tooltip:Ft,...Mt,highlight:g5,...Ie,...we,...Ne,segmentation:pb};WL.sparklineMode=Ze(Z);var aD={...WL,...la,highlight:g5,type:Te(bi("bar")),xKey:Te(ce),yKey:Te(ce),xName:ce,yName:ce,direction:ye("horizontal","vertical"),grouped:Z,stacked:Z,stackGroup:ce,normalizedTo:ue,legendItemName:ce,errorBar:XM};aD.pickOutsideVisibleMinorAxis=Ze(Z);aD.focusPriority=Ze(ue);var f5={title:ce,domain:Ye(ue),maxSize:J,showInMiniChart:Z,label:{placement:ye("top","right","bottom","left"),...Jt},tooltip:Ft,styler:Vt({...Qr,maxSize:J}),maxRenderedItems:ue,...Mt,...Ae(Qr,["enabled"]),highlight:sn(Ai,Ai)},bde={...f5,...la,type:Te(bi("bubble")),xKey:Te(ce),yKey:Te(ce),sizeKey:Te(ce),labelKey:ce,xName:ce,yName:ce,sizeName:ce,labelName:ce,legendItemName:ce,highlight:sn(Ai,Ai)},m5={showInMiniChart:Z,cornerRadius:J,label:Jt,tooltip:Ft,shadow:ol,...Mt,...Ie,...we,...Ne,highlight:sn(Ai,Ai),areaPlot:Z,aggregation:ye("count","sum","mean"),bins:Ye(Ye(ue)),binCount:J},Cde={...la,...m5,type:Te(bi("histogram")),xKey:Te(ce),yKey:ce,xName:ce,yName:ce},y5=sn(Ai,yh),wde=Vt({...we,...Ne,marker:Wu}),UL={title:ce,showInMiniChart:Z,connectMissingData:Z,interpolation:QM,label:Jt,styler:wde,marker:Qr,tooltip:Ft,errorBar:$b,...Mt,...we,...Ne,highlight:y5,segmentation:noe};UL.sparklineMode=Ze(Z);var lD={...UL,...la,highlight:y5,type:Te(bi("line")),xKey:Te(ce),yKey:Te(ce),xName:ce,yName:ce,stacked:Z,stackGroup:ce,normalizedTo:ue,legendItemName:ce,errorBar:XM};lD.pickOutsideVisibleMinorAxis=Ze(Z);lD.focusPriority=Ze(ue);var v5={title:ce,showInMiniChart:Z,label:{placement:ye("top","right","bottom","left"),...Jt},tooltip:Ft,errorBar:$b,styler:Vt(Qr),maxRenderedItems:ue,...Mt,...Ae(Qr,["enabled"]),highlight:sn(Ai,Ai)},Sde={...v5,...la,type:Te(bi("scatter")),xKey:Te(ce),yKey:Te(ce),labelKey:ce,xName:ce,yName:ce,labelName:ce,legendItemName:ce,errorBar:XM,highlight:sn(Ai,Ai)},b5=sn(Ai,Ai),$L={...Mt,radiusMin:J,radiusMax:J,rotation:ue,outerRadiusOffset:ue,outerRadiusRatio:Be,hideZeroValueSectorsInLegend:Z,sectorSpacing:J,cornerRadius:J,itemStyler:Vt({...Ie,...we,...Ne,cornerRadius:J}),title:{enabled:Z,text:ce,showInLegend:Z,spacing:J,...Xt},calloutLabel:{enabled:Z,offset:ue,minAngle:J,avoidCollisions:Z,formatter:Ks(Ns),format:ce,itemStyler:Vt({enabled:Z,...Hr,...Xt}),...Hr,...Xt},sectorLabel:{enabled:Z,positionOffset:ue,positionRatio:Be,formatter:Ks(Ns),format:ce,itemStyler:Vt({enabled:Z,...Hr,...Xt}),...Hr,...Xt},calloutLine:{colors:Ye(Re),length:J,strokeWidth:J,itemStyler:Vt({color:Re,length:J,strokeWidth:J})},fills:Ye(Dr),strokes:Ye(Re),tooltip:Ft,shadow:ol,highlight:b5,...Ne,...Ae(Ie,["fill"]),...Ae(we,["stroke"])},Wh={...$L,...la,type:Te(bi("pie")),angleKey:Te(ce),radiusKey:ce,calloutLabelKey:ce,sectorLabelKey:ce,legendItemKey:ce,angleName:ce,radiusName:ce,calloutLabelName:ce,sectorLabelName:ce,highlight:b5};Wh.defaultColorRange=Ze(Ye(Ye(Re)));Wh.defaultPatternFills=Ze(Ye(Re));Wh.title._enabledFromTheme=Ze(Z);Wh.calloutLabel._enabledFromTheme=Ze(Z);Wh.sectorLabel._enabledFromTheme=Ze(Z);var C5={...$L,innerRadiusOffset:ue,innerRadiusRatio:Be,innerCircle:{fill:ce,fillOpacity:Be},innerLabels:{spacing:J,...Xt,...Hr}},xde={...C5,...Wh,type:Te(bi("donut")),innerLabels:Vn({text:Te(ce),spacing:J,...Xt,...Hr},"inner label options array")},Yf={lineStyle:ye("solid","dashed","dotted"),...Ne},Uh={...Ie,...we,...Ne},Jb={visible:Z,locked:Z,readOnly:Z,handle:Uh,...Xt},cD={position:ye("top","center","bottom"),alignment:ye("left","center","right"),...Xt},w5={position:ye("top","inside","bottom"),alignment:ye("left","center","right"),...Xt},Mde={enabled:Z,cornerRadius:J,formatter:Fi,...Xt,...Ie,...we,...Ne},Dde={visible:Z,...Yf,...we},S5={divider:we,...Ie,...we,...Xt},uV={handle:Uh,statistics:S5,...Yf,...Ie,...we},o0={visible:Z,locked:Z,readOnly:Z,extendStart:Z,extendEnd:Z,handle:Uh,text:cD,...Yf,...we},KI={visible:Z,locked:Z,readOnly:Z,axisLabel:Mde,handle:Uh,text:cD,...Yf,...we},YL={visible:Z,locked:Z,readOnly:Z,extendStart:Z,extendEnd:Z,handle:Uh,text:w5,background:Ie,...Yf,...we},x5={...YL},M5={...YL,middle:Dde},qI={label:Xt,showFill:Z,isMultiColor:Z,strokes:Ye(Re),rangeStroke:Re,bands:ye(4,6,10),...o0},D5={...Ie,...we,...Jb},A5={...Ie,...we,...Jb},R5={...Ie,...we,...Jb,background:{...Ie,...we}},ZI={visible:Z,locked:Z,readOnly:Z,handle:Uh,...Ie},KS={visible:Z,locked:Z,readOnly:Z,extendStart:Z,extendEnd:Z,handle:Uh,text:cD,background:Ie,statistics:S5,...Yf,...we},E5={visible:Z,up:uV,down:uV},Kf={enabled:Z,axesButtons:{enabled:Z,axes:ye("x","y","xy")},toolbar:{enabled:Z,padding:J,buttons:Vn({...Yd,value:ye("line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","line","horizontal-line","vertical-line","parallel-channel","disjoint-channel","fibonacci-retracement","fibonacci-retracement-trend-based","text","comment","callout","note","clear")},"annotation toolbar buttons array")},optionsToolbar:{enabled:Z,buttons:Ye(rt(Wi({...Yd,value:Te(ye("line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings"))}),Wi({...Yd,value:Te(ye("lock")),checkedOverrides:Yd})))}};Kf.data=Ze(tl);Kf.xKey=Ze(ce);Kf.volumeKey=Ze(ce);Kf.snap=Ze(Z);var KL={...Ie,...we,...Ne,cornerRadius:J,whisker:{...we,...Ne},cap:{lengthRatio:Be}},XI={...KL,opacity:Be},dV=Vt({...Ie,...we,...Ne,cornerRadius:J,whisker:{...we,...Ne},cap:{lengthRatio:Be}}),T5={direction:ye("horizontal","vertical"),showInMiniChart:Z,styler:dV,itemStyler:dV,tooltip:Ft,...Mt,...KL,highlight:sn(XI,XI),segmentation:pb},QI={cornerRadius:J,wick:{...we,...Ne},...Ie,...we,...Ne},hV={...QI,opacity:Be},I5={item:{up:QI,down:QI},itemStyler:Vt({...Ie,...we,...Ne,cornerRadius:J,wick:{...we,...Ne}}),showInMiniChart:Z,tooltip:Ft,...Mt,highlight:sn(hV,hV)},k5={fills:Ye(Dr),strokes:Ye(Re),label:{spacing:J,maxWidth:J,...Jt},link:{tension:Be,itemStyler:Vt({...Ie,...we,...Ne,tension:Be}),...Ie,...we,...Ne},node:{width:J,spacing:J,itemStyler:Vt({...Ie,...we,...Ne}),...Ie,...we,...Ne},tooltip:Ft,...Mt},L5={direction:ye("horizontal","vertical"),fills:Ye(Dr),strokes:Ye(Re),label:{spacing:J,placement:ye("before","middle","after"),...Jt},stageLabel:{placement:ye("before","after"),format:aa,...Cc},tooltip:Ft,...Ae(Mt,["showInLegend"]),...Ae(Ie,["fill"]),...Ae(we,["stroke"]),...Ne,highlight:V4(yh)},P5={direction:ye("horizontal","vertical"),fills:Ye(Dr),strokes:Ye(Re),itemStyler:Vt({...Ie,...we,...Ne}),spacingRatio:Be,crisp:Z,dropOff:{enabled:Z,...Ie,...we,...Ne},stageLabel:{placement:ye("before","after"),format:aa,...Cc},label:Jt,tooltip:Ft,shadow:ol,...Ae(Mt,["showInLegend"]),...Ae(Ie,["fill"]),...Ae(we,["stroke"]),...Ne},N5={title:ce,textAlign:ye("left","center","right"),verticalAlign:ye("top","middle","bottom"),itemPadding:J,itemStyler:Vt({...Ie,...we}),showInMiniChart:Z,label:Iu,tooltip:Ft,...Mt,...we},F5={showInMiniChart:Z,itemStyler:Vt({...we,...Ne}),item:{up:{...we,...Ne},down:{...we,...Ne}},tooltip:Ft,...Mt,highlight:sn(yh,yh)},O5={maxStrokeWidth:J,itemStyler:Vt({...we,...Ne}),sizeDomain:Ye(J),label:Jt,tooltip:Ft,...Mt,...we,...Ne,highlightStyle:{...Mt.highlightStyle,...we},highlight:sn(yh,yh)},B5={...we,...Ne},G5={colorRange:Ye(Re),maxSize:J,sizeDomain:Ye(J),label:{placement:ye("top","bottom","left","right"),...Jt},tooltip:Ft,...Mt,...Ae(Qr,["enabled"]),highlightStyle:{...Mt.highlightStyle,...Ie,...we},highlight:sn(Ai,Ai)},_5={colorRange:Ye(Re),padding:J,itemStyler:Vt({...Ie,...we,...Ne}),label:Iu,tooltip:Ft,...Mt,...Ie,...we,...Ne,highlightStyle:{...Mt.highlightStyle,...Ie,...we},highlight:sn(Ai,Ai)},V5={...Mt,...Ie,...we,...Ne},Mh=Vt({...Ie,...we,...Ne,cornerRadius:J}),z5={cornerRadius:J,styler:Mh,itemStyler:Mh,label:Jt,tooltip:Ft,...Mt,...Ie,...we,...Ne,highlight:sn(Ka,Ka)},H5={direction:ye("horizontal","vertical"),aspectRatio:J,spacing:J,reverse:Z,itemStyler:Vt({...Ie,...we,...Ne}),fills:Ye(Dr),strokes:Ye(Re),label:Jt,stageLabel:{spacing:J,placement:ye("before","after"),...Jt},tooltip:Ft,shadow:ol,...Mt,...Ae(Ie,["fill"]),...Ae(we,["stroke"]),...Ne},j5={connectMissingData:Z,marker:Qr,styler:Vt({marker:Wu,...Ie,...we,...Ne}),label:Jt,tooltip:Ft,...Mt,...Ie,...we,...Ne,highlight:sn(Ai,Ai)},W5={connectMissingData:Z,marker:Qr,styler:Vt({marker:Wu,...we,...Ne}),label:Jt,tooltip:Ft,...Mt,...we,...Ne,highlight:sn(Ai,yh)},U5={cornerRadius:J,styler:Mh,itemStyler:Mh,label:Jt,tooltip:Ft,...Mt,...Ie,...we,...Ne,highlight:sn(Ka,Ka)},$5={cornerRadius:J,columnWidthRatio:Be,maxColumnWidthRatio:Be,styler:Mh,itemStyler:Mh,label:Jt,tooltip:Ft,...Mt,...Ie,...we,...Ne,highlight:sn(Ka,Ka)},Ade={marker:Qr,...we,...Ne},pV={marker:{enabled:Z,...Wu},...we,...Ne},gV={marker:Wu,...we,...Ne},Y5={showInMiniChart:Z,connectMissingData:Z,interpolation:QM,label:{...Jt,placement:ye("inside","outside"),spacing:J},tooltip:Ft,shadow:ol,...Mt,...Ie,...Ade,item:{low:{...pV},high:{...pV}},styler:Vt({...Ie,item:{low:{...gV},high:{...gV}}}),highlight:sn(Ai,Ai),segmentation:pb,invertedStyle:{enabled:Z,...Ie}},fV=Vt({...Ie,...we,...Ne,cornerRadius:J}),K5={direction:ye("horizontal","vertical"),grouped:Z,showInMiniChart:Z,cornerRadius:J,styler:fV,itemStyler:fV,label:{...Jt,placement:ye("inside","outside"),spacing:J},tooltip:Ft,shadow:ol,...Mt,...Ie,...we,...Ne,highlight:sn(Ka,Ka),segmentation:pb},q5={fills:Ye(Dr),strokes:Ye(Re),label:{...Jt,spacing:J,placement:ye("left","right","center"),edgePlacement:ye("inside","outside")},link:{itemStyler:Vt({...Ie,...we,...Ne}),...Ie,...we,...Ne},node:{width:J,spacing:J,minSpacing:gi(J,qse("spacing")),alignment:ye("left","center","right","justify"),verticalAlignment:ye("top","bottom","center"),sort:ye("data","ascending","descending","auto"),itemStyler:Vt({...Ie,...we,...Ne}),...Ie,...we,...Ne},tooltip:Ft,...Mt},Z5={fills:Ye(Dr),strokes:Ye(Re),colorRange:Ye(Re),sectorSpacing:J,cornerRadius:J,padding:J,itemStyler:Vt({...Ie,...we}),label:{spacing:J,...Iu},secondaryLabel:Iu,tooltip:Ft,...Ae(Mt,["highlight","showInLegend"]),...Ae(Ie,["fill"]),...Ae(we,["stroke"]),highlightStyle:{label:{color:Re},secondaryLabel:{color:Re},...Ie,...we}},X5={fills:Ye(Dr),strokes:Ye(Re),colorRange:Ye(Re),itemStyler:Vt({...Ie,...we}),group:{gap:J,padding:J,cornerRadius:J,textAlign:ye("left","center","right"),interactive:Z,label:{...Jt,spacing:J},...Ie,...we},tile:{gap:J,padding:J,cornerRadius:J,textAlign:ye("left","center","right"),verticalAlign:ye("top","middle","bottom"),label:{...Jt,spacing:J,lineHeight:J,minimumFontSize:J,wrapping:ye("never","always","hyphenate","on-space"),overflowStrategy:ye("ellipsis","hide")},secondaryLabel:{...Jt,lineHeight:J,minimumFontSize:J,wrapping:ye("never","always","hyphenate","on-space"),overflowStrategy:ye("ellipsis","hide")},...Ie,...we},tooltip:Ft,...Ae(Mt,["highlight","showInLegend"]),highlightStyle:{group:{label:{color:Re},...Ie,...we},tile:{label:{color:Re},secondaryLabel:{color:Re},...Ie,...we}}},QE={name:ce,cornerRadius:J,itemStyler:Vt({...Ie,...we,...Ne,cornerRadius:J}),label:{...Jt,placement:ye("inside-start","inside-center","inside-end","outside-start","outside-end"),spacing:J},tooltip:Ft,shadow:ol,...Ie,...we,...Ne},Q5={direction:ye("horizontal","vertical"),showInMiniChart:Z,item:{positive:QE,negative:QE,total:QE},line:{enabled:Z,...we,...Ne},tooltip:Ft,...Mt},Jw=Wi({__type:Te(bi("date")),value:rt(ce,ue)},"a serializable date object"),mV={width:J,height:J,grip:Z,fill:Re,stroke:Re,strokeWidth:J,cornerRadius:J},Bt={enabled:Z,height:J,spacing:J,cornerRadius:ue,mask:{fill:Re,fillOpacity:Be,stroke:Re,strokeWidth:J},minHandle:mV,maxHandle:mV,miniChart:{enabled:Z,padding:{top:J,bottom:J},label:{enabled:Z,avoidCollisions:Z,spacing:J,format:aa,formatter:Ks(Ns),interval:{minSpacing:J,maxSpacing:J,values:tl,step:ue},...Xt},series:Ue}},Ss={number:{...Ae(ug,["type","crossLines"]),top:Ae(ug,["type","crossLines","position"]),right:Ae(ug,["type","crossLines","position"]),bottom:Ae(ug,["type","crossLines","position"]),left:Ae(ug,["type","crossLines","position"]),crossLines:Ae(Nl,["type"])},log:{...Ae(dg,["type","crossLines"]),top:Ae(dg,["type","crossLines","position"]),right:Ae(dg,["type","crossLines","position"]),bottom:Ae(dg,["type","crossLines","position"]),left:Ae(dg,["type","crossLines","position"]),crossLines:Ae(Nl,["type"])},category:{...Ae(pg,["type","crossLines"]),top:Ae(pg,["type","crossLines","position"]),right:Ae(pg,["type","crossLines","position"]),bottom:Ae(pg,["type","crossLines","position"]),left:Ae(pg,["type","crossLines","position"]),crossLines:Ae(Nl,["type"])},time:{...Ae(hg,["type","crossLines"]),top:Ae(hg,["type","crossLines","position"]),right:Ae(hg,["type","crossLines","position"]),bottom:Ae(hg,["type","crossLines","position"]),left:Ae(hg,["type","crossLines","position"]),crossLines:Ae(Nl,["type"])},"unit-time":{...Ae(fg,["type","crossLines"]),top:Ae(fg,["type","crossLines","position"]),right:Ae(fg,["type","crossLines","position"]),bottom:Ae(fg,["type","crossLines","position"]),left:Ae(fg,["type","crossLines","position"]),crossLines:Ae(Nl,["type"])},"grouped-category":{...Ae(gg,["type"]),top:Ae(gg,["type","position"]),right:Ae(gg,["type","position"]),bottom:Ae(gg,["type","position"]),left:Ae(gg,["type","position"]),crossLines:Ae(Nl,["type"])},"ordinal-time":{...Ae(mg,["type","crossLines"]),top:Ae(mg,["type","crossLines","position"]),right:Ae(mg,["type","crossLines","position"]),bottom:Ae(mg,["type","crossLines","position"]),left:Ae(mg,["type","crossLines","position"]),crossLines:Ae(Nl,["type"])}},Qp={"angle-category":{...Ae(jL,["type","crossLines"]),crossLines:Ae(Fa,["type"])},"angle-number":{...Ae(l5,["type","crossLines"]),crossLines:Ae(Fa,["type"])},"radius-category":{...Ae(u5,["type","crossLines"]),crossLines:{...Ae(Fa,["type"]),label:{...xh,positionAngle:ue}}},"radius-number":{...Ae(c5,["type","crossLines"]),crossLines:{...Ae(Fa,["type"]),label:{...xh,positionAngle:ue}}}},jt={visible:Ze(Z)},Rde={common:{...tt,navigator:Bt,axes:{...Ss,...Qp},annotations:{...Kf,line:o0,"horizontal-line":KI,"vertical-line":KI,"disjoint-channel":x5,"parallel-channel":M5,"fibonacci-retracement":qI,"fibonacci-retracement-trend-based":qI,callout:D5,comment:A5,note:R5,text:Jb,arrow:o0,"arrow-up":ZI,"arrow-down":ZI,"date-range":KS,"price-range":KS,"date-price-range":KS,"quick-date-price-range":E5},chartToolbar:{enabled:Z},initialState:{legend:Vn({visible:Z,seriesId:ce,itemId:ce,legendItemName:ce},"legend state array"),zoom:{rangeX:{start:rt(ue,Jw),end:rt(ue,Jw)},rangeY:{start:rt(ue,Jw),end:rt(ue,Jw)},ratioX:{start:Be,end:Be},ratioY:{start:Be,end:Be},autoScaledAxes:Ye(bi("y"))}}},line:{...tt,axes:Ss,series:UL,navigator:Bt,...jt},scatter:{...tt,axes:Ss,series:v5,navigator:Bt,...jt,paired:Ze(Z)},bubble:{...tt,axes:Ss,series:f5,navigator:Bt,...jt},area:{...tt,axes:Ss,series:h5,navigator:Bt,...jt},bar:{...tt,axes:Ss,series:WL,navigator:Bt,...jt},"box-plot":{...tt,axes:Ss,series:T5,navigator:Bt,...jt},candlestick:{...tt,axes:Ss,series:I5,navigator:Bt,...jt},"cone-funnel":{...tt,axes:Ss,series:L5,navigator:Bt,...jt},funnel:{...tt,axes:Ss,series:P5,navigator:Bt,...jt},ohlc:{...tt,axes:Ss,series:F5,navigator:Bt,...jt},histogram:{...tt,axes:Ae(Ss,["category","grouped-category","unit-time","ordinal-time"]),series:m5,navigator:Bt,...jt},heatmap:{...tt,axes:Ss,series:N5,navigator:Bt,...jt},waterfall:{...tt,axes:Ss,series:Q5,navigator:Bt,...jt},"range-bar":{...tt,axes:Ss,series:K5,navigator:Bt,...jt},"range-area":{...tt,axes:Ss,series:Y5,navigator:Bt,...jt},donut:{...tt,series:C5,navigator:Bt,...jt},pie:{...tt,series:$L,navigator:Bt,...jt},"radar-line":{...tt,axes:Qp,series:W5,navigator:Bt,...jt},"radar-area":{...tt,axes:Qp,series:j5,navigator:Bt,...jt},"radial-bar":{...tt,axes:Qp,series:U5,navigator:Bt,...jt},"radial-column":{...tt,axes:Qp,series:$5,navigator:Bt,...jt},nightingale:{...tt,axes:Qp,series:z5,navigator:Bt,...jt},sunburst:{...tt,series:Z5,navigator:Bt,...jt},treemap:{...tt,series:X5,navigator:Bt,...jt},"map-shape":{...tt,series:_5,navigator:Bt,...jt},"map-line":{...tt,series:O5,navigator:Bt,...jt},"map-marker":{...tt,series:G5,navigator:Bt,...jt},"map-shape-background":{...tt,series:V5,navigator:Bt,...jt},"map-line-background":{...tt,series:B5,navigator:Bt,...jt},sankey:{...tt,series:q5,navigator:Bt,...jt},chord:{...tt,series:k5,navigator:Bt,...jt},pyramid:{...tt,series:H5,navigator:Bt,...jt},"radial-gauge":{...tt,...n0,targets:Ae(eD,["value"]),tooltip:{...n0.tooltip,...tt.tooltip}},"linear-gauge":{...tt,...i0,targets:Ae(JM,["value"]),tooltip:{...i0.tooltip,...tt.tooltip}}};function eS(e,t){const i={};for(const n of Reflect.ownKeys(e))i[n]=t(e[n],n,e);return i}var Ede=eS(Rde,function e(t,i){if(NS(i))return t;if(hc(t))return rt(t,Bx,NS);if(Zt(t))return rt(Wi(Ox in t?eS(t,n=>Zt(n)?eS(n,e):n):eS(t,e)),Bx,NS);throw new Error(`Invalid theme override value: ${String(t)}`)}),ns={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Id={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Tde=class extends zf{getDefaultColors(){return{fills:ns,fillsFallback:Object.values(ns),strokes:Id,sequentialColors:$o(ns),divergingColors:[ns.ORANGE,ns.YELLOW,ns.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"],secondDivergingColors:[ns.GREEN,ns.YELLOW,ns.RED],secondHierarchyColors:[],up:{fill:ns.GREEN,stroke:Id.GREEN},down:{fill:ns.RED,stroke:Id.RED},neutral:{fill:ns.GRAY,stroke:Id.GRAY},altUp:{fill:ns.BLUE,stroke:Id.BLUE},altDown:{fill:ns.ORANGE,stroke:Id.ORANGE},altNeutral:{fill:ns.GRAY,stroke:Id.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Bi,ns.BLUE),e.set(An,ns.BLUE),e}},ss={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},kd={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},Ide=class extends Xr{getDefaultColors(){return{...super.getDefaultColors(),fills:ss,fillsFallback:Object.values(ss),strokes:kd,sequentialColors:$o(ss),divergingColors:[ss.ORANGE,ss.YELLOW,ss.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"],secondDivergingColors:[ss.GREEN,ss.YELLOW,ss.RED],secondHierarchyColors:[],up:{fill:ss.GREEN,stroke:kd.GREEN},down:{fill:ss.RED,stroke:kd.RED},neutral:{fill:ss.GRAY,stroke:kd.GRAY},altUp:{fill:ss.BLUE,stroke:kd.BLUE},altDown:{fill:ss.ORANGE,stroke:kd.ORANGE},altNeutral:{fill:ss.GRAY,stroke:kd.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Bi,ss.BLUE),e.set(An,ss.BLUE),e}},JI=ls(()=>new Xr),kde=at.create(!0,"perf"),Gr=(e,t,i)=>{kde("[CACHE] ChartTheme",e,t.name,i)},qL={"ag-default-dark":ls(()=>new zf),"ag-sheets-dark":ls(()=>new Fue,Gr),"ag-polychroma-dark":ls(()=>new Pue,Gr),"ag-vivid-dark":ls(()=>new Tde,Gr),"ag-material-dark":ls(()=>new kue,Gr),"ag-financial-dark":ls(()=>new Tue,Gr),"ag-default":JI,"ag-sheets":ls(()=>new Oue,Gr),"ag-polychroma":ls(()=>new Nue,Gr),"ag-vivid":ls(()=>new Ide,Gr),"ag-material":ls(()=>new Lue,Gr),"ag-financial":ls(()=>new Iue,Gr)},r0=ls(Lde,Gr);function Lde(e){if(e instanceof Xr)return e;if(!Ode(e))return JI();if(e==null||typeof e=="string"){const s=qL[e??"ag-default"];if(s)return s();throw new Error(`Cannot find theme \`${e}\`.`)}const{cleared:t,invalid:i}=Is(Pde(e),Nde,"theme");for(const s of i)fe.warnOnce(String(s));const n=t?.baseTheme?r0(t.baseTheme):JI();return t?new n.constructor(t):n}function Pde(e){if(!Zt(e)||!Zt(e.baseTheme))return e;let t=e,i,n;const s=[];for(;typeof t=="object";)i??(i=t.palette),n??(n=t.params),t.overrides&&s.push(t.overrides),t=t.baseTheme;return{baseTheme:t,overrides:_t(...s),params:n,palette:i}}var Nde={baseTheme:rt(ce,sM),overrides:Ede,params:{accentColor:Re,axisColor:Re,backgroundColor:Re,borderColor:Re,borderRadius:ue,chartBackgroundColor:Re,chartPadding:ue,focusShadow:ce,foregroundColor:Re,fontFamily:pI,fontSize:ue,fontWeight:rt(ce,ue),gridLineColor:Re,popupShadow:ce,subtleTextColor:Re,textColor:Re,chromeBackgroundColor:Re,chromeFontFamily:pI,chromeFontSize:ue,chromeFontWeight:rt(ce,ue),chromeSubtleTextColor:Re,chromeTextColor:Re,buttonBackgroundColor:Re,buttonBorder:Z,buttonFontWeight:ue,buttonTextColor:Re,inputBackgroundColor:Re,inputBorder:Z,inputTextColor:Re,menuBackgroundColor:Re,menuBorder:Z,menuTextColor:Re,panelBackgroundColor:Re,panelSubtleTextColor:Re,tooltipBackgroundColor:Re,tooltipBorder:Z,tooltipTextColor:Re,tooltipSubtleTextColor:Re,crosshairLabelBackgroundColor:Re,crosshairLabelTextColor:Re},palette:{fills:Ye(Dr),strokes:Ye(Re),up:{fill:rt(Re,SE),stroke:Re},down:{fill:rt(Re,SE),stroke:Re},neutral:{fill:rt(Re,SE),stroke:Re}}},Fde=ye("ag-default","ag-default-dark","ag-sheets","ag-sheets-dark","ag-polychroma","ag-polychroma-dark","ag-vivid","ag-vivid-dark","ag-material","ag-material-dark","ag-financial","ag-financial-dark");function Ode(e){const{invalid:t}=Is({theme:e},{theme:rt(Fde,sM)});for(const i of t)fe.warnOnce(String(i));return t.length===0}var Du={isEnterprise:!1},Ji="path",rr="pathArray",un="default",pr="override",_r="user",su="userPartial",Jp="operation",eg="operationValue",ZL="dependency",JE="autoEnable",yV="autoEnableValue",vV="prune",bV="childrenSource";function XL(e){return av(e)&&e>=0&&e<=1}function gy(e,t){let i=e;for(const n of t){if(!(typeof n=="string"&&i!=null&&(typeof i=="object"||Array.isArray(i))&&n in i))return!1;i=i[n]}return!0}function Ms(e,t){let i=e;for(const n of t){if(!(typeof n=="string"&&i!=null&&(typeof i=="object"||Array.isArray(i))&&n in i))return;i=i[n]}return i}function tg(e,t,i){const n=t.length;if(n===0)return;let s=e;const o=n-1,r=t[o];for(let a=0;a<o;a++){const l=t[a],c=t[a+1];let d=s[l];(d==null||!Nx(d))&&(d=Number.isNaN(Number(c))?{}:[],s[l]=d),s=d}s[r]=i}var Bde=/^\d+$/;function J5(e,t=0){let i=0;for(let n=e.length-1;n>=0;n--){const s=e[n];if(Bde.test(s)&&(i++,i>t))return n}return-1}function vf(e,t=0){const i=J5(e,t);return Number(e[i])}function $h(e,t,i){const n=t.split("/");let s=[...e];t.startsWith("/")&&(s=[],n.shift());let o=!1;for(const r of n){if(r==="..")s.pop(),o||s.pop();else if(r===".")s.pop();else if(r==="$index"){const a=vf(e);if(Number.isNaN(a))return Ha;s.push(`${a}`)}else if(r==="$prevIndex"){const a=vf(e);if(Number.isNaN(a)||Number(a)<=0)return Ha;s.push(`${Number(a)-1}`)}else if(r.startsWith("$")){const a=i?.[r.slice(1)];if(a==null)return Ha;s.push(a)}else r.length!==0&&s.push(r);o=r===".."}return s}var Ha=Symbol("unresolvable-path"),Vo=Symbol("resolved-to-branch");function Hy(e,t){if(e==null||typeof e!="object"||Array.isArray(e)||(t??(t=Object.keys(e)),t.length===0))return;const i=t[0];if(t$.has(i))return{operation:i,values:Array.isArray(e[i])?e[i]:[e[i]]}}function Gde(e,t,i){const n=Hy(e.getVertexValue(i));switch(n?.operation){case"$path":{const[s]=n.values,o=e.getPathArray(t),r=$h(o,s);return r===Ha?void 0:e.findVertexAtPath(r)}case"$value":return t}}var _de={$cacheMax:Vde};function Vde(e,t,i){const[n]=i,s=e.getPathArray(t),o=e.getCachedValue(s,"$cacheMax"),r=e.resolveVertexValue(t,n);if(typeof r!="number")return o;if(typeof o!="number")return e.setCachedValue(s,"$cacheMax",r),r;const a=Math.max(o,r);return e.setCachedValue(s,"$cacheMax",a),a}var zde={$hasSeriesType:{dependencies:eT,resolve:Hde},$isChartType:{dependencies:eT,resolve:Wde},$isSeriesType:{dependencies:eT,resolve:jde}};function eT(e,t,i){const n=e.findVertexAtPath(["series","0","type"]);n&&e.addEdge(t,n,ZL)}function Hde(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n),o=e.getResolvedPath(["series"]);if(!Array.isArray(o))return!1;for(const r of o)if(r.type===s)return!0;return!1}function jde(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);return e.getResolvedPath(["series","0","type"])===s}function Wde(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n),o=e.getResolvedPath(["series","0","type"]);if(typeof o!="string")return!1;switch(s){case"cartesian":return Bn.isCartesian(o);case"polar":return Bn.isPolar(o);case"standalone":return Bn.isStandalone(o)}return!1}var Ude={$foregroundBackgroundMix:$de,$foregroundOpacity:Yde,$interpolate:Kde,$isGradient:qde,$isImage:Zde,$isPattern:Xde,$mix:Qde};function $de(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n),o=e.getParamValue("foregroundColor"),r=e.getParamValue("backgroundColor");if(typeof o=="string"&&typeof r=="string"&&XL(s))return si.mix(si.fromString(o),si.fromString(r),1-s).toString();at.inDevelopmentMode(()=>fe.warnOnce(`\`$foregroundBackgroundMix\` json operation failed on [${String(s)}}}] at [${e.getPathArray(t).join(".")}], expecting a number between 0 and 1.`))}function Yde(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n),o=e.getParamValue("foregroundColor");if(typeof o=="string"&&XL(s)){const r=si.fromString(o);return new si(r.r,r.g,r.b,s).toString()}at.inDevelopmentMode(()=>fe.warnOnce(`\`$foregroundOpacity\` json operation failed on [${String(s)}}}] at [${e.getPathArray(t).join(".")}], expecting a number between 0 and 1.`))}function Kde(e,t,i){const[n,s]=i,o=e.resolveVertexValue(t,n),r=e.resolveVertexValue(t,s);if(!(!ht(o)||!av(r)))return si.interpolate(o.map(a=>si.fromString(a)),r).map(a=>a.toString())}function qde(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);return Ar(s)}function Zde(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);return bh(s)}function Xde(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);return lc(s)}function Qde(e,t,i){const[n,s,o]=i,r=e.resolveVertexValue(t,n),a=e.resolveVertexValue(t,s),l=e.resolveVertexValue(t,o),c=e.getPathArray(t),d=`\`$mix\` json operation failed on [${String(r)}, ${String(a)}, ${String(l)}] at [${c.join(".")}], expecting`,p=`${d} two colors and a number between 0 and 1.`;if(typeof a!="string"||!XL(l)){at.inDevelopmentMode(()=>fe.warnOnce(p));return}if(typeof r=="string")try{return si.mix(si.fromString(r),si.fromString(a),l).toString()}catch{at.inDevelopmentMode(()=>fe.warnOnce(p));return}if(!Ar(r)){at.inDevelopmentMode(()=>fe.warnOnce(p));return}let g=r.colorStops;try{g=g?.map(m=>{let y;return typeof m.color=="string"&&(y=si.mix(si.fromString(m.color),si.fromString(a),l).toString()),{...m,color:y}})}catch{at.inDevelopmentMode(()=>fe.warnOnce(`${d} a gradient, a color and a number between 0 and 1.`));return}return{...r,colorStops:g}}var Jde={$rem:ehe};function ehe(e,t,i){const[n]=i,s=e.getVertexValue(n),o=e.getParamValue("fontSize");if(typeof o=="number"&&typeof s=="number")return Math.round(s*o);at.inDevelopmentMode(()=>fe.warnOnce(`\`$rem\` json operation failed on [${String(s)}] at [${e.getPathArray(t).join(".")}], expecting a number.`))}var the={$and:ihe,$eq:nhe,$greaterThan:she,$if:ohe,$lessThan:rhe,$not:ahe,$or:lhe,$switch:che};function ihe(e,t,i){for(const n of i)if(!e.resolveVertexValue(t,n))return!1;return!0}function nhe(e,t,i){let n,s=!0;for(const o of i){const r=e.resolveVertexValue(t,o);if(s)n=r,s=!1;else if(r!==n)return!1}return!0}function she(e,t,i){const[n,s]=i;return e.resolveVertexValue(t,n)>e.resolveVertexValue(t,s)}function ohe(e,t,i){const[n,s,o]=i,a=e.resolveVertexValue(t,n)?s:o,l=e.neighboursWithEdgeValue(a,Ji);if(l)for(const c of l)e.addEdge(t,c,Ji);return e.resolveVertexValue(t,a)}function rhe(e,t,i){const[n,s]=i;return e.resolveVertexValue(t,n)<e.resolveVertexValue(t,s)}function ahe(e,t,i){const[n]=i;if(n)return!e.resolveVertexValue(t,n)}function lhe(e,t,i){for(const n of i)if(e.resolveVertexValue(t,n))return!0;return!1}function che(e,t,i){const[n,s,...o]=i,r=e.resolveVertexValue(t,n);for(const a of o){const l=e.getVertexValue(a);if(!Array.isArray(l))continue;const[c,d]=l;if(r===c||Array.isArray(c)&&c.includes(r))return d}return e.resolveVertexValue(t,s)}var uhe={$isUserOption:dhe,$isThemeOverride:hhe,$palette:phe,$mapPalette:ghe,$path:{dependencies:wV,resolve:fhe},$pathString:{dependencies:wV,resolve:mhe},$ref:yhe};function dhe(e,t,i){const[n,s,o]=i,r=e.neighboursWithEdgeValue(n,Ji);if(r)for(const a of r){const l=e.findNeighbour(a,un);if(l&&CV(e,t,l))return e.resolveVertexValue(t,s)}else if(CV(e,t,n))return e.resolveVertexValue(t,s);return e.resolveVertexValue(t,o)}function CV(e,t,i){const n=e.resolveVertexValue(t,i);if(!fn(n))throw new Error(`\`$isUserOption\` json operation failed on [${String(n)}], expecting a string.`);const s=e.getPathArray(t),o=$h(s,n);return o===Ha?!1:e.hasUserOption(o)}function hhe(e,t,i){const[n,s,o]=i,r=e.resolveVertexValue(t,n);if(!fn(r))throw new Error(`\`$isThemeOverride\` json operation failed on [${String(r)}], expecting a string.`);const a=e.getPathArray(t),l=$h(a,r);if(l!==Ha)return e.hasThemeOverride(l)?e.resolveVertexValue(t,s):e.resolveVertexValue(t,o)}var e$=new Set(["fill","fillFallback","stroke","gradient","range2"]);function phe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);if(!fn(s))return;if(e$.has(s)){const r=e.getPathArray(t),a=vf(r);if(Number.isNaN(a))return;switch(s){case"fill":return Ra(e.palette.fills,1,a)[0];case"fillFallback":return Ra(e.palette.fillsFallback,1,a)[0];case"stroke":return Ra(e.palette.strokes,1,a)[0];case"gradient":return Ra(e.palette.sequentialColors,1,a)[0];case"range2":return Ra(e.palette.fills,2,a)}return}if(s==="gradients")return e.palette.sequentialColors;if(s==="type")return e.paletteType;const o=Ms(e.palette,s.split("."));return Array.isArray(o)?[...o]:typeof o=="object"?{...o}:o}function ghe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);if(!fn(s))return;if(e$.has(s)){const r=e.getPathArray(t);let a=vf(r),l=0;const c=["series","0","type"];for(let d=0;d<a;d++){c[1]=`${d}`;const p=e.getResolvedPath(c);(p==="map-shape-background"||p==="map-line-background")&&l++}if(a-=l,Number.isNaN(a))return;switch(s){case"fill":return Ra(e.palette.fills,1,a)[0];case"fillFallback":return Ra(e.palette.fillsFallback,1,a)[0];case"stroke":return Ra(e.palette.strokes,1,a)[0];case"gradient":return Ra(e.palette.sequentialColors,1,a)[0];case"range2":return Ra(e.palette.fills,2,a)}return}if(s==="gradients")return e.palette.sequentialColors;if(s==="type")return e.paletteType;const o=Ms(e.palette,s.split("."));return Array.isArray(o)?[...o]:typeof o=="object"?{...o}:o}function wV(e,t,i){const[n]=i,s=e.getVertexValue(n);if(fn(s)){const o=e.getPathArray(t),r=$h(o,s);if(r===Ha)return;const a=e.findVertexAtPath(r);a&&e.addEdge(t,a,ZL)}}function fhe(e,t,i){const n=i.length>1,s=i.length>2,[o,r,a]=i,l=e.resolveVertexValue(t,o),c=s?e.resolveVertexValue(t,a):null;if(!fn(l))throw new Error(`\`$path\` json operation failed on [${String(l)}], expecting a string.`);const d=e.getPathArray(t),p=$h(d,l);if(p===Ha)return;const g=c?Ms(c,p):e.getResolvedPath(p);if(g!=null)return g;if(n)return e.resolveVertexValue(t,r)}function mhe(e,t,i){const[n,s]=i,o=e.resolveVertexValue(t,n);if(!fn(o))throw new Error(`\`$path\` json operation failed on [${String(o)}], expecting a string.`);let r;s&&(r=e.graftAndResolveOrphan(t,s));const a=e.getPathArray(t),l=$h(a,o,r);if(l===Ha)throw new Error(`Unresolvable path [${o}] at [${a.join(".")}]`);return l}function yhe(e,t,i){const[n]=i,s=e.getVertexValue(n);return e.getParamValue(s)}var vhe={$apply:bhe,$applyCycle:Che,$applySwitch:whe,$applyTheme:She,$findFirstSiblingNotOperation:xhe,$map:Mhe,$merge:Dhe,$omit:Ahe,$size:Rhe,$shallow:The,$shallowSimple:Ehe,$value:Ihe};function bhe(e,t,i){const[n,s,o,r]=i,a=e.getVertexValue(n);if(!Qt(a))return;const l=s?e.getVertexValue(s):void 0,c=e.neighboursWithEdgeValue(t,Ji),d=c&&c.length>0;if(!d&&l==null)return Vo;const p=o?e.resolveVertexValue(t,o):void 0,g=r?e.resolveVertexValue(t,r):void 0;if(!d&&l!=null)if(Hy(l)){const m=e.resolveVertexValue(t,s);Qt(m)&&e.graftObject(t,m,[p,g])}else e.graftObject(t,l,[p,g]);if(!d)return Vo;for(const m of c){const y=e.neighboursWithEdgeValue(m,Ji);if(!y||y.length===0){const b=e.addVertex({});e.addEdge(m,b,un)}else e.graftObject(m,a,[p,g])}return Vo}function Che(e,t,i){const[n,s,o]=i,r=e.resolveVertexValue(t,n);if(typeof r!="number")return;const a=e.getPathArray(t),l=e.dangerouslyGetUserOption(a),c=e.hasThemeOverride(a),d=l==null?void 0:_r,p=l??e.resolveVertexValue(t,s);if(!Array.isArray(p))return;const g=o?e.getVertexValue(o):void 0;for(let m=0;m<r;m++){const y=p[m%p.length];y!=null&&((l||!c)&&e.graftValue(t,`${m}`,y,void 0,d),g&&e.graftValue(t,`${m}`,g,y,d))}return Vo}function whe(e,t,i){const[n,s,...o]=i,r=e.resolveVertexValue(t,n);for(const a of o){const l=e.getVertexValue(a);if(!Array.isArray(l))continue;const[c,d]=l;if(r===c||Array.isArray(c)&&c.includes(r))return e.graftObject(t,d,[],un),Vo}return e.resolveVertexValue(t,s)}function She(e,t,i){const[n,s,o]=i;let r=e.getVertexValue(n);if(typeof r=="string"&&(r=[r]),!Array.isArray(r))return;const a=e.neighboursWithEdgeValue(t,Ji),l=o?e.getVertexValue(o):[],c=Array.isArray(l)?new Set(l):new Set;if(!a)return Vo;for(const d of a){const p=e.graftAndResolveOrphan(d,s);for(const g of r){const m=$h([],g,p);m!==Ha&&e.graftConfig(d,m,c)}}return Vo}function xhe(e,t,i){const[n]=i,s=e.getPathArray(t),o=J5(s);if(o<0)return e.resolveVertexValue(t,n);const r=s.slice(0,o),a=e.findVertexAtPath(r);if(!a)return e.resolveVertexValue(t,n);const l=e.neighboursWithEdgeValue(a,Ji);if(l)for(let c=0;c<l.length;c++){if(`${c}`===s[o])continue;const d=r.concat([`${c}`,...s.slice(o+1)]),p=e.findVertexAtPath(d);if(!p)continue;const g=e.findNeighbourValue(p,_r);if(g!=null)return g;const m=e.findNeighbourValue(p,pr);if(m!=null)return m}return e.resolveVertexValue(t,n)}function Mhe(e,t,i){const[n,s]=i,o=e.getVertexValue(n),r=e.resolveVertexValue(t,s);if(!Array.isArray(r))return;const a=e.neighboursWithEdgeValue(t,Ji);if(a&&a.length>0)return;let l=0;for(const c of r)e.graftValue(t,`${l}`,o,c),l++;return Vo}function Dhe(e,t,i){for(const n of i){const s=e.resolveVertexValue(t,n);Qt(s)&&e.graftObject(t,s)}return Vo}function Ahe(e,t,i){const[n,s]=i;let o=e.getVertexValue(n);if(!Array.isArray(o)){const a=Gde(e,t,s);if(!a)return;o=e.resolveVertexValue(a,n)}const r=e.resolveVertexValue(t,s);if(!(!Array.isArray(o)||!Qt(r)))return Ae(r,o)}function Rhe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);return Nx(s)?"length"in s?s.length:Object.keys(s).length:0}function Ehe(e,t,i){const n=[];for(const s of i)n.push(e.getVertexValue(s));return n}function The(e,t,i){const n=e.getPathArray(t),s=e.hasUserOption(n);if(!s&&i.length===1)return e.resolveVertexValue(t,i[0]);const o=[];for(const r of i)o.push(e.getVertexValue(r));return s?(e.prune(t,[pr,un]),Vo):(e.graftObject(t,o),Vo)}function Ihe(e,t,i){const[n]=i,s=e.getVertexValue(n),o=e.getPathArray(t);if(s==="$index")return vf(o);if(s==="$parentIndex")return vf(o,1);if(s==="$1")return e.resolveValue$1(o)}var khe={$isEven:Lhe,$mul:Phe,$round:Nhe};function Lhe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);return Number.isNaN(Number(s))?!1:Number(s)%2===0}function Phe(e,t,i){let n;for(const s of i){const o=e.resolveVertexValue(t,s);n==null?n=Number(o):n*=Number(o)}return n}function Nhe(e,t,i){const[n]=i;if(n)return Math.round(Number(e.resolveVertexValue(t,n)))}var Ty={..._de,...zde,...Ude,...Jde,...uhe,...the,...khe,...vhe},t$=new Set(Object.keys(Ty));function fy(e){return t$.has(e)}var pi=at.create("opts","options-graph"),Fhe=ls(Ohe);function Ohe(e,t){return pi.group("OptionsGraph.constructor()",()=>new i$(e.config,t,e.params,e.palette,e.overrides,e.getTemplateParameters()))}var Ku=class os extends xoe{constructor(t={},i={},n=void 0,s={},o=void 0,r=new Map){super(Ji,Jp,new Set([su,_r])),this.config=t,this.userOptions=i,this.palette=s,this.overrides=o,this.internalParams=r,this.edgePriority=[...os.EDGE_PRIORITY],this.graftEdge=os.GRAFT_EDGE,this.resolvedParams={},this.resolvedAnnotations={},this.value$1=new Map,this.cachedPathVertices=new Map,this.hasUnsafeClearKeys=!1,this.rollbackVertices=[],this.rollbackEdgesFrom=[],this.rollbackEdgesTo=[],this.rollbackEdgesValue=[],this.isRollingBack=!1,this.EMPTY_PATH_ARRAY_VERTEX=this.addVertex([]),this.root=this.addVertex("root"),this.params=this.addVertex("params"),this.annotations=this.addVertex("annotations"),this.paletteType=Zt(i?.theme)?A3(i.theme?.palette):"inbuilt";const a=i.series?.[0]?.type??"line";i.axes??(i.axes=yr.predictAxes(a,i.series?.[0],i.data)??yr.cloneDefaultAxes(a)??[]),pi("build user"),this.buildGraphFromObject(this.root,_r,Ae(i,["theme"])),pi("build defaults"),this.buildGraphFromObject(this.root,un,Ae(t[a],os.COMPLEX_KEYS));const l=o?Ae(o[a],os.COMPLEX_KEYS):{};Object.keys(l).length>0&&(pi("build series overrides"),this.buildGraphFromObject(this.root,pr,l));const c=o?Ae(o.common,os.COMPLEX_KEYS):{};Object.keys(c).length>0&&(pi("build common overrides"),this.buildGraphFromObject(this.root,pr,Bn.isCartesian(a)?c:Ae(c,["zoom","navigator"]))),n&&(pi("build params"),this.buildGraphFromObject(this.params,un,n));const d=this.findNeighbourWithValue(this.root,"axes",Ji),p=this.findNeighbourWithValue(this.root,"series",Ji);d&&(pi("build axes"),this.buildGraphFromObject(d,un,{$applyTheme:[["/$seriesType/axes/$axisType/$position","/$seriesType/axes/$axisType"],{seriesType:{$path:["/series/0/type","line"]},axisType:{$path:["./type","category"]},position:{$path:["./position"]}},["top","right","bottom","left"]]})),p&&(pi("build series"),this.buildGraphFromObject(p,un,{$applyTheme:["/$seriesType/series",{seriesType:{$path:["./type","line"]}}]}));const g=Ae(t[a]?.annotations??{},os.ANNOTATIONS_OPTIONS_KEYS);Object.keys(g).length>0&&(pi("build annotations type config"),this.buildGraphFromObject(this.annotations,un,g));const m=Ae(o?.common?.annotations??{},os.ANNOTATIONS_OPTIONS_KEYS);Object.keys(m).length>0&&(pi("build annotations type overrides"),this.buildGraphFromObject(this.annotations,pr,m));const y=_S(t[a]?.annotations??{},os.ANNOTATIONS_OPTIONS_KEYS);Object.keys(y).length>0&&(pi("build annotations config"),this.buildGraphFromObject(this.root,un,{annotations:y}));const b=_S(o?.common?.annotations??{},os.ANNOTATIONS_OPTIONS_KEYS);Object.keys(b).length>0&&(pi("build annotations overrides"),this.buildGraphFromObject(this.root,pr,{annotations:b})),this.buildDependencyGraph()}clear(){pi.group("OptionsGraph.clear()",()=>{super.clear(),this.cachedPathVertices.clear(),this.root=void 0,this.params=void 0,this.annotations=void 0,pi("cleared")})}clearSafe(){this.hasUnsafeClearKeys||this.clear()}resolve(){return pi.group("OptionsGraph.resolve()",()=>(this.resolved={},this.resolvedParams={},this.resolvedAnnotations={},pi("resolve params"),this.resolveVertex(this.params,this.resolvedParams),pi("resolve annotations"),this.resolveVertex(this.annotations,this.resolvedAnnotations),pi("resolve root"),this.resolveVertex(this.root),pi("resolved root",this.resolved),pi("vertex count",this.getVertexCount()),pi("edge count",this.getEdgeCount()),this.resolved))}resolveParams(){return this.resolvedParams}resolveAnnotationThemes(){return this.resolvedAnnotations}addVertex(t){const i=super.addVertex(t);return this.isRollingBack&&this.rollbackVertices.push(i),i}addEdge(t,i,n){const s=(this.neighboursWithEdgeValue(t,n)?.indexOf(i)??-1)!==-1;this.isRollingBack&&!s&&(this.rollbackEdgesFrom.push(t),this.rollbackEdgesTo.push(i),this.rollbackEdgesValue.push(n)),super.addEdge(t,i,n)}resolvePartial(t,i,n){if(!i||!this.root)return;const{permissivePath:s,proxyPaths:o}=n??{},r=Object.keys(i);if(pi.check()&&console.groupCollapsed(`OptionsGraph.resolvePartial() - ${t.join(".")} [${r}]`),r.length===0)return{};const a=this.findVertexAtPath(t);if(!a){if(s)return;throw new Error(`Could not find vertex in OptionsGraph at path [${t.join(".")}].`)}const l=this.findNeighbour(a,rr);if(this.userPartialOptions={},tg(this.userPartialOptions,t,i),o)for(const m of Object.keys(o)){const y=o[m],b=Ms(i,[m]);b!=null&&(tg(i,y,b),tg(this.userPartialOptions,[...t,...y],b),delete i[m],delete this.userPartialOptions[m])}this.graftEdge=su,this.edgePriority=[su,...os.EDGE_PRIORITY],this.snapshot(),this.buildGraphFromObject(a,su,i,l);for(const m of r){const y=o?.[m]?this.findVertexAtPath([...t,...o[m]]):this.findNeighbourWithValue(a,m,Ji);y&&this.refreshPendingProcessingEdges(y)}this.buildDependencyGraph();const c={};if(this.resolveVertex(a,c),this.rollback(),this.graftEdge=os.GRAFT_EDGE,this.edgePriority=os.EDGE_PRIORITY,this.userPartialOptions=void 0,o)for(const m of Object.keys(o)){const y=o[m],b=Ms(c,[...t,...y]);tg(c,[...t,m],b)}const d=Ms(c,t),g=n?.pick??!0?_S(Ms(c,t),r):d;return pi("vertex count",this.getVertexCount()),pi("edge count",this.getEdgeCount()),pi("resolved partial",g),pi.check()&&console.groupEnd(),g}findVertexAtPath(t){const i=t.join(".");if(this.cachedPathVertices.has(i))return this.cachedPathVertices.get(i);const n=this.findVertexAlongEdge(this.root,t,Ji);if(n)return this.cachedPathVertices.set(i,n),n}hasUserOption(t){if(gy(this.userOptions,t))return!0;const n=this.findVertexAtPath(t);if(n){if(this.findNeighbour(n,_r)!=null||this.findNeighbour(n,su)!=null)return!0;const s=this.findNeighbourValue(n,bV);return s===_r||s===su}return!1}dangerouslyGetUserOption(t){if(this.userPartialOptions){const i=Ms(this.userPartialOptions,t);if(i!=null)return i}return Ms(this.userOptions,t)}hasThemeOverride(t){if(this.overrides==null)return!1;if(t[0]==="axes"&&t.length>1){const i=this.getResolvedPath(["axes",t[1],"type"]);if(gy(this.overrides,["common","axes",i,...t.slice(2)]))return!0;const n=this.getResolvedPath(["series","0","type"]);return gy(this.overrides,[n,"axes",i,...t.slice(2)])}if(t[0]==="series"&&t.length>1){const i=this.getResolvedPath(["series",t[1],"type"]);return gy(this.overrides,[i,"series",...t.slice(2)])}return gy(this.overrides,t)}getParamValue(t){if(this.resolvedParams[t]!=null)return this.resolvedParams[t];const i=this.findVertexAlongEdge(this.params,[t],Ji);if(!i)return;const n=this.findNeighbour(i,un);if(!n)return;const s=this.resolveVertexValue(i,n);return this.resolvedParams[t]=s,s}getPathArray(t){return this.findNeighbourValue(t,rr)??[]}getResolvedPath(t){return Ms(this.resolved,t)}getCachedValue(t,i){const n=[...t,i].join(".");return os.valueCache.get(n)}setCachedValue(t,i,n){const s=[...t,i].join(".");os.valueCache.set(s,n)}prune(t,i){this.addEdge(t,this.addVertex(i),vV)}resolveVertexValue(t,i){this.resolveVertexDependencies(i);const n=this.findNeighbourValue(i,Jp);if(n&&fy(n)){const o=this.neighboursWithEdgeValue(i,eg),r=Ty[n],l=(typeof r=="function"?r:r.resolve)?.(this,t,o??[]);return l===Vo?void 0:l}let s=this.getVertexValue(i);if(Array.isArray(s)){const o={};this.resolveVertexChildren(i,o),s=Ms(o,this.getPathArray(t))}return this.resolveValueOrSymbol(s)}resolveValue$1(t){for(let i=t.length;i>=0;i--){const n=t.slice(0,i).join("."),s=this.value$1.get(n);if(s!=null)return s}}graftConfig(t,i,n){const s=Ms(this.config,i),o=this.findNeighbour(t,rr);if(Zt(s)&&this.buildGraphFromObject(t,un,s,o,void 0,n),this.overrides){const r=Ms(this.overrides,i);Zt(r)&&this.buildGraphFromObject(t,pr,r,o,void 0,n);const a=Ms(this.overrides,["common",...i.slice(1)]);Zt(a)&&this.buildGraphFromObject(t,pr,a,o,void 0,n)}this.buildDependencyGraph()}graftObject(t,i,n,s=this.graftEdge){const o=this.findNeighbour(t,rr);if(this.buildGraphFromObject(t,s,i,o),this.overrides&&n)for(const r of n){if(r==null)continue;const a=Ms(this.overrides,r);a&&this.buildGraphFromObject(t,pr,a,o)}this.buildDependencyGraph()}graftValue(t,i,n,s,o=this.graftEdge){const r=[...this.getPathArray(t),i];this.value$1.set(r.join("."),s);const a=this.findVertexAtPath(r)??this.addVertex(i);this.buildGraphFromValue(t,a,o,r,n),this.buildDependencyGraph()}graftAndResolveOrphan(t,i){const n={},s=this.addVertex(n),o=this.getPathArray(t);return this.graftAndResolveChildren(i,s,o,[]),this.resolveVertex(s,n),Ms(n,o)}buildGraphFromObject(t,i,n,s,o=os.SHALLOW_KEYS,r){const a=Object.keys(n),l=Hy(n,a);if(l){const y=this.addVertex(n);this.addEdge(t,y,i),this.buildGraphFromOperation(y,i,l,s);return}if(a.length===0){this.addEdge(t,this.addVertex(Array.isArray(n)?[]:{}),i),this.buildGraphAutoEnable(t,i,n,void 0);return}const c=this.getVertexChildrenByKey(t),d=s?this.getVertexValue(s):[];let p;Array.isArray(n)&&this.addEdge(t,this.addVertex(i),bV);const g=[...d],m=d.length;for(const y of a){if(r?.has(y))continue;const b=c?.get(y)??this.addVertex(y);g[m]=y,o?.has(y)?this.buildShallowGraphFromValue(t,b,i,g,n[y]):this.buildGraphFromValue(t,b,i,g,n[y],o),y==="enabled"&&(p=b)}this.buildGraphAutoEnable(t,i,n,p)}buildGraphAutoEnable(t,i,n,s){if(i===un&&!s||i===_r&&s||i!==un&&i!==_r&&i!==su&&i!==pr)return;let o=this.findNeighbour(t,JE);o||(o=this.addVertex(JE),this.addEdge(t,o,JE)),s&&this.addEdge(s,o,yV);const{enabled:r,_enabledFromTheme:a}=n;this.addEdge(o,this.addVertex({enabled:r,_enabledFromTheme:a,keys:Object.keys(n).length}),i)}getVertexChildrenByKey(t){const i=this.neighboursWithEdgeValue(t,Ji);if(!i)return;const n=new Map;for(const s of i)n.set(this.getVertexValue(s),s);return n}buildGraphFromValue(t,i,n,s,o,r){this.addEdge(t,i,Ji);let a=this.findNeighbour(i,rr);a||(a=this.addVertex([...s]),this.addEdge(i,a,rr));const l=Hy(o);if(l){const c=this.addVertex(o);this.addEdge(i,c,n),this.addEdge(c,a,rr),this.buildGraphFromOperation(c,n,l,a)}else if(Nx(o))this.buildGraphFromObject(i,n,o,a,r);else{const c=this.findNeighbour(i,n);if(c&&this.getVertexValue(c)===o)return;const d=this.addVertex(o);this.addEdge(i,d,n)}}buildShallowGraphFromValue(t,i,n,s,o){this.addEdge(t,i,Ji);let r=this.findNeighbour(i,rr);r||(r=this.addVertex([...s]),this.addEdge(i,r,rr));const a=this.addVertex(o);this.addEdge(i,a,n)}buildGraphFromOperation(t,i,n,s){const o=this.addVertex(n.operation);this.addEdge(t,o,Jp);for(const r of n.values)this.buildGraphFromOperationValue(t,r,i,s)}buildGraphFromOperationValue(t,i,n,s=this.EMPTY_PATH_ARRAY_VERTEX){const o=this.addVertex(i);this.addEdge(t,s,rr),this.addEdge(t,o,eg);const r=Hy(i);r?this.buildGraphFromOperation(o,n,r,s):Nx(i)&&this.buildGraphFromObject(o,n,i,s)}buildDependencyGraph(){for(let t=0;t<this.pendingProcessingEdgesFrom.length;t++){const i=this.pendingProcessingEdgesFrom[t],n=this.pendingProcessingEdgesTo[t],s=this.getVertexValue(n);if(!fy(s))continue;const o=this.neighboursWithEdgeValue(i,eg),r=Ty[s];(typeof r=="function"?void 0:r.dependencies)?.(this,i,o??[])}this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[]}refreshPendingProcessingEdges(t){const n=this.findNeighbour(t,un)??t,s=this.findNeighbour(n,Jp);if(s){this.pendingProcessingEdgesFrom.push(n),this.pendingProcessingEdgesTo.push(s);const r=this.neighboursWithEdgeValue(n,eg);if(r)for(const a of r)this.refreshPendingProcessingEdges(a)}const o=this.neighboursWithEdgeValue(t,Ji);if(o)for(const r of o)this.refreshPendingProcessingEdges(r)}resolveVertex(t,i=this.resolved,n){const s=this.getPathArray(t);this.resolveVertexInEdgePriority(t,i,s,n),this.resolveVertexAutoEnable(t,i,s),this.resolveVertexChildren(t,i,n)}resolveVertexInEdgePriority(t,i,n,s){const o=this.neighboursWithEdgeValue(t,Ji),[r]=this.edgePriority;for(const a of this.edgePriority){const l=this.findNeighbour(t,a);if(l==null)continue;const c=this.resolveVertexValueInternal(t,l);if(!(c==null&&a!==r)&&!(o&&o.length>0&&a!==r)&&!(Array.isArray(s)&&s.includes(a))){if(this.hasUnsafeClearKeys||(this.hasUnsafeClearKeys=c!=null&&os.UNSAFE_CLEAR_KEYS.has(n.at(-1))),n.length===0){if(c==null)continue;this.resolved=c}else tg(i,n,c);break}}}resolveVertexValueInternal(t,i){this.resolveVertexDependencies(i);const n=this.findNeighbourValue(i,Jp);if(n&&fy(n)){const s=this.neighboursWithEdgeValue(i,eg),o=Ty[n],a=(typeof o=="function"?o:o.resolve)?.(this,t,s??[]);return a===Vo?void 0:a}return this.resolveValueOrSymbol(this.getVertexValue(i))}resolveVertexAutoEnable(t,i,n){const s=this.neighboursWithEdgeValue(t,yV)?.[0];if(!s)return;const o=this.findVertexAtPath(n),r=this.findNeighbourValue(s,un),a=this.findNeighbourValue(s,pr),l=this.findNeighbourValue(s,_r),d=o&&this.findNeighbour(o,_r)!=null?void 0:this.findNeighbourValue(s,su);(l!=null&&l.enabled==null||d!=null&&d.enabled==null)&&!r?._enabledFromTheme&&!a?._enabledFromTheme&&tg(i,n,!0)}resolveVertexChildren(t,i,n){const s=this.neighboursWithEdgeValue(t,Ji);if(s){n??(n=this.findNeighbourValue(t,vV));for(const o of s){const r=this.getVertexValue(o);s.length>1&&fy(r)||r!=="_enabledFromTheme"&&this.resolveVertex(o,i,n)}}}resolveVertexDependencies(t){const i=this.neighboursWithEdgeValue(t,ZL);if(i)for(const n of i)this.resolveVertex(n)}graftAndResolveChildren(t,i,n,s){const o=this.neighboursWithEdgeValue(t,Ji);if(o)for(const r of o){const a=this.getVertexValue(r),l=[...n,a],c=[...s,a],d=this.addVertex(a),p=this.findNeighbourValue(r,un);this.addEdge(i,d,Ji);const g=this.addVertex(l);if(this.addEdge(d,g,rr),Zt(p)){this.buildGraphFromObject(d,un,p,g);const m=this.findNeighbour(d,un);this.addEdge(m,this.addVertex(l),rr);const y=this.findNeighbourValue(m,Jp);if(fy(y)){const b=this.neighboursWithEdgeValue(m,eg),C=Ty[y];(typeof C=="function"?void 0:C.dependencies)?.(this,m,b??[])}}this.graftAndResolveChildren(r,d,l,c)}}resolveValueOrSymbol(t){return typeof t=="symbol"&&this.internalParams?.has(t)?this.internalParams.get(t):t}snapshot(){pi("snapshot"),this.isRollingBack=!0}rollback(){pi(`rollback ${this.rollbackEdgesFrom.length} edges and ${this.rollbackVertices.length} vertices`);for(let t=0;t<this.rollbackEdgesFrom.length;t++){const i=this.rollbackEdgesFrom[t],n=this.rollbackEdgesTo[t],s=this.rollbackEdgesValue[t];this.removeEdge(i,n,s)}for(const t of this.rollbackVertices)this.removeVertex(t);this.cachedPathVertices.clear(),this.rollbackVertices=[],this.rollbackEdgesFrom=[],this.rollbackEdgesTo=[],this.rollbackEdgesValue=[],this.isRollingBack=!1}};Ku.EDGE_PRIORITY=[_r,pr,un];Ku.GRAFT_EDGE=un;Ku.SHALLOW_KEYS=new Set(["context","data","topology"]);Ku.COMPLEX_KEYS=["annotations","axes","series"];Ku.ANNOTATIONS_OPTIONS_KEYS=["axesButtons","data","enabled","optionsToolbar","snap","toolbar","xKey","volumeKey"];Ku.UNSAFE_CLEAR_KEYS=new Set(["itemStyler","styler"]);Ku.valueCache=new Map;var i$=Ku,SV=e=>`'${e}'`,Yh=class Nn{constructor(t,i,n,s,o,r,a=!1,l){this.themeParameters={},this.optionMetadata=o??{},this.processedOverrides=n??{};let c=null;t instanceof Nn?(c=t,this.specialOverrides=c.specialOverrides,r===void 0&&(r=qa(c.userOptions,i,Nn.JSON_DIFF_OPTS)),this.userOptions=zi(gv(r,c.userOptions),{...Nn.OPTIONS_CLONE_OPTS_SLOW,seen:[]})):(this.userOptions=zi(t??i,{...Nn.OPTIONS_CLONE_OPTS_SLOW,seen:[]}),this.specialOverrides=this.specialOverridesDefaults({...s})),a&&this.removeLeftoverSymbols(this.userOptions);const d=t instanceof Nn&&r?.data!==void 0&&r?.data?.length!==t.userOptions.data?.length;let p,g,m,y,b,C,w;if(!a&&r!==void 0&&Nn.isFastPathDelta(r)&&c!=null&&!d?({activeTheme:p,processedOptions:g,fastDelta:m}=this.fastSetup(r,c),y=c.themeParameters,b=c.annotationThemes):(Nn.perfDebug("ChartOptions.slowSetup()"),{activeTheme:p,processedOptions:g,themeParameters:y,annotationThemes:b,googleFonts:C,optionsGraph:w}=this.slowSetup(n,r,a)),this.activeTheme=p,this.processedOptions=g,this.fastDelta=m??void 0,this.themeParameters=y,this.annotationThemes=b,this.googleFonts=C,this.optionsGraph=w,l!==void 0&&typeof l=="number"&&!Number.isNaN(l)){const x=performance.now();this.optionsProcessingTime=x-l}at.inDevelopmentMode(()=>Vl(this))}static isFastPathDelta(t){for(const i of Object.keys(t??{}))if(!this.FAST_PATH_OPTIONS.has(i))return Nn.perfDebug("ChartOptions.isFastPathDelta() - slow path required due to presence of: ",i),!1;return Nn.perfDebug("ChartOptions.isFastPathDelta() - fast path possible."),!0}fastSetup(t,i){const{activeTheme:n,processedOptions:s}=i,{presetType:o}=this.optionMetadata;if(o!=null&&t?.data!=null){const a=zs.getPresetModule(o);if(a?.processData){const{series:l,data:c}=a.processData(t.data);t=_t({series:l,data:c},t)}}this.fastSeriesSetup(t,s);const r=_t(t,s);return Nn.debug("ChartOptions.fastSetup() - processed options",r),{activeTheme:n,processedOptions:r,fastDelta:t}}fastSeriesSetup(t,i){t?.series&&(t.series?.every((n,s)=>MW(n,i.series?.[s]??{}))?delete t.series:t.series=t.series.map((n,s)=>gv(n,i.series?.[s]??{})))}slowSetup(t,i,n=!1){let s=zi(this.userOptions,Nn.OPTIONS_CLONE_OPTS_FAST);i&&(s=_t(i,s),n&&this.removeLeftoverSymbols(s));const{presetType:o}=this.optionMetadata;if(o!=null){const m=zs.getPresetModule(o);if(m){const{validate:y=Is}=m,b=s,C=s.type,w=C==null?void 0:r0(s.theme).presets[C],{cleared:x,invalid:M}=y(b,m.options,"");for(const E of M)fe.warn(E);Tg(M,"")?s={}:(Nn.debug(">>> AgCharts.createOrUpdate() - applying preset",x),s=m.create(x,w,()=>this.activeTheme))}}this.soloSeriesIntegrity(s),Du.isEnterprise||iV(s);const r=r0(s.theme);if(o!=null&&r.templateTheme(s,!1),this.validateSeriesOptions(s),this.chartDef=zs.detectChartDefinition(s),!this.chartDef.placeholder){const{validate:m=Is}=this.chartDef,{cleared:y,invalid:b}=m(s,this.chartDef.options,"");for(const C of b)fe.warn(C);s=y}this.validateAxesOptions(s),this.removeDisabledOptions(s);let a=this.processFonts(r.params);a=this.processFonts(s,a),this.processSeriesOptions(s);const l=Fhe(r,s),c=l.resolve(),d=l.resolveParams(),p=l.resolveAnnotationThemes();l.clearSafe();const g=_t(t,c);return due(g),Du.isEnterprise||iV(g,!0),this.validateSeriesOptions(g),this.validateAxesOptions(g),this.validatePluginOptions(g),this.processMiniChartSeriesOptions(g),g.loadGoogleFonts||a.clear(),Nn.debug(()=>["ChartOptions.slowSetup() - processed options",zi(g)]),{activeTheme:r,processedOptions:g,themeParameters:d,annotationThemes:p,googleFonts:a,optionsGraph:l}}validatePluginOptions(t){for(const i of zs.listModulesByType(LS.Plugin)){const n=i.name;if(n in t&&(!i.chartType||i.chartType===this.chartDef?.name)){const{cleared:s,invalid:o}=Is(t[n],i.options,i.name);for(const r of o)fe.warn(r);t[n]=s}}}validateSeriesOptions(t){const i=this.chartDef?.name,n=[],s=t.series?.length??0;let o;for(let r=0;r<s;r++){const a=`series[${r}]`,l=t.series[r],c=zs.getSeriesModule(l.type);if(c==null){o??(o=cv(Array.from(zs.listModulesByType(LS.Series)).filter(m=>!i||m.chartType===i).map(m=>m.name),"or",SV)),fe.warn(l.type==null?`Option \`${a}.type\` is required and has not been provided; expecting ${o}, ignoring.`:`Unknown type \`${l.type}\` at \`${a}.type\`; expecting ${o}, ignoring.`);continue}else if(i&&c.chartType!==i){fe.warn(`Series type \`${c.name}\` at \`${a}.type\` is not supported by chart type \`${i}\`, ignoring.`);continue}const{validate:d=Is}=c,{cleared:p,invalid:g}=d(l,c.options,a);for(const m of g)fe.warn(m);Tg(g,a)||n.push(p)}t.series=n}validateAxesOptions(t){if(!("axes"in t)||!t.axes)return;const i=this.chartDef?.name,n=[],s=t.axes.length??0;let o;for(let r=0;r<s;r++){const a=`axes[${r}]`,l=t.axes[r],c=zs.getAxisModule(l.type);if(c==null){o??(o=cv(Array.from(zs.listModulesByType(LS.Axis)).filter(m=>m.chartType===i).map(m=>m.name),"or",SV)),fe.warn(`Unknown type \`${l.type}\` at  \`${a}.type\`; expecting one of ${o}, ignoring all axes options.`),delete t.axes;break}else if(c.chartType!==i){fe.warn(`Axis type \`${c.name}\` at  \`${a}.type\` is not supported by chart type \`${i}\`, ignoring.`);break}const{validate:d=Is}=c,{cleared:p,invalid:g}=d(l,c.options,a);for(const m of g)fe.warn(m);Tg(g,a)||n.push(p)}t.axes=n}diffOptions(t){return this===t?{}:t==null?this.processedOptions:this.fastDelta??qa(t.processedOptions,this.processedOptions,Nn.JSON_DIFF_OPTS)}optionsType(t){return t.series?.[0]?.type??"line"}processSeriesOptions(t){const i=t.series?.map(n=>{n.type??(n.type="line");const o=!!zs.getSeriesModule(n.type)?.options.visible;return _t(this.getSeriesGroupingOptions(n),n,o&&{visible:!0})});t.series=this.setSeriesGroupingOptions(i??[])}processMiniChartSeriesOptions(t){const i=t.navigator?.miniChart?.series;i!=null&&(t.navigator.miniChart.series=this.setSeriesGroupingOptions(i))}getSeriesGroupingOptions(t){const i=yr.isGroupable(t.type),n=yr.isStackable(t.type),s=yr.isStackedByDefault(t.type);t.grouped&&!i&&fe.warnOnce(`unsupported grouping of series type "${t.type}".`),(t.stacked||t.stackGroup)&&!n&&fe.warnOnce(`unsupported stacking of series type "${t.type}".`);let{grouped:o,stacked:r}=t;return r??(r=(s||t.stackGroup!=null)&&!(i&&o)),o??(o=!0),{stacked:n&&r,grouped:i&&o&&!(n&&r)}}setSeriesGroupingOptions(t){const i=this.getSeriesGrouping(t);Nn.debug("ChartOptions.setSeriesGroupingOptions() - series grouping: ",i);const n={},s=i.reduce((o,r)=>{var a;return r.groupType==="default"||(o[a=r.seriesType]??(o[a]=0),o[r.seriesType]+=r.groupType==="stack"?1:r.series.length),o},{});return i.flatMap(o=>{var r;switch(n[r=o.seriesType]??(n[r]=0),o.groupType){case"stack":{const a=n[o.seriesType]++;return o.series.map((l,c)=>Object.assign(l,{seriesGrouping:{groupId:o.groupId,groupIndex:a,groupCount:s[o.seriesType],stackIndex:c,stackCount:o.series.length}}))}case"group":return o.series.map(a=>Object.assign(a,{seriesGrouping:{groupId:o.groupId,groupIndex:n[o.seriesType]++,groupCount:s[o.seriesType],stackIndex:0,stackCount:0}}))}return o.series}).map(({stacked:o,grouped:r,...a})=>a)}getSeriesGroupId(t){return[t.type,t.xKey,t.stacked?t.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(t){const i=new Map;return t.reduce((n,s)=>{const o=s.type;if(!s.stacked&&!s.grouped)n.push({groupType:"default",seriesType:o,series:[s],groupId:"__default__"});else{const r=this.getSeriesGroupId(s);if(!i.has(r)){const l={groupType:s.stacked?"stack":"group",seriesType:o,series:[],groupId:r};i.set(r,l),n.push(l)}i.get(r).series.push(s)}return n},[])}soloSeriesIntegrity(t){if(!ht(t.series))return;const i=t.series;if(i&&i.length>1&&i.some(n=>yr.isSolo(n.type))){const n=this.optionsType(t);if(yr.isSolo(n))fe.warn(`series[0] of type '${n}' is incompatible with other series types. Only processing series[0]`),t.series=i.slice(0,1);else{const{solo:s,nonSolo:o}=I1(i,a=>yr.isSolo(a.type)?"solo":"nonSolo"),r=roe(s.map(a=>a.type)).join(", ");fe.warn(`Unable to mix these series types with the lead series type: ${r}`),t.series=o}}}static processFontOptions(t,i,n,s=new Set){if(typeof t=="object"&&"fontFamily"in t)if(Array.isArray(t.fontFamily)){const o=[];for(const r of t.fontFamily)typeof r=="object"&&"googleFont"in r?(o.push(r.googleFont),s?.add(r.googleFont)):o.push(r);t.fontFamily=o.join(", ")}else typeof t.fontFamily=="object"&&"googleFont"in t.fontFamily&&(t.fontFamily=t.fontFamily.googleFont,s?.add(t.fontFamily));return s}processFonts(t,i=new Set){return xu(t,Nn.processFontOptions,new Set(["data","theme"]),void 0,void 0,i)}static removeDisabledOptionJson(t){if("enabled"in t&&t.enabled===!1)for(const i of Object.keys(t))i!=="enabled"&&delete t[i]}removeDisabledOptions(t){xu(t,Nn.removeDisabledOptionJson,new Set(["data","theme","contextMenu"]))}static removeLeftoverSymbolsJson(t){if(!(!t||!Zt(t)))for(const i of Object.keys(t)){const n=t[i];NS(n)&&delete t[i]}}removeLeftoverSymbols(t){xu(t,Nn.removeLeftoverSymbolsJson,new Set(["data"]))}specialOverridesDefaults(t){if(t.window==null?t.window=$t():Sse(t.window),t.document==null?t.document=$a():wse(t.document),t.window==null)throw new Error("AG Charts - unable to resolve global window");if(t.document==null)throw new Error("AG Charts - unable to resolve global document");return t}};Yh.OPTIONS_CLONE_OPTS_SLOW={shallow:new Set(["data","container"]),assign:new Set(["context","theme"])};Yh.OPTIONS_CLONE_OPTS_FAST={shallow:new Set(["container"]),assign:new Set(["data","context","theme"])};Yh.JSON_DIFF_OPTS=new Set(["data"]);Yh.perfDebug=at.create(!0,"perf");Yh.FAST_PATH_OPTIONS=new Set(["data","width","height","container"]);Yh.debug=at.create(!0,"opts");var jy=Yh,xV=at.create(!0,"opts"),ou="AG Charts - Chart was destroyed, cannot perform request.",Wy=class{constructor(t,i,n){this.factoryApi=i,this.licenseManager=n,this.chart=t}async update(t){if(!this.chart)throw new Error(ou);return xV.group("AgChartInstance.update()",async()=>{const i=at.check("scene:stats","scene:stats:verbose")?performance.now():void 0;this.factoryApi.update(t,this,void 0,i),await this.chart?.waitForUpdate()})}async updateDelta(t){if(!this.chart)throw new Error(ou);return xV.group("AgChartInstance.updateDelta()",async()=>{const i=at.check("scene:stats","scene:stats:verbose")?performance.now():void 0;this.factoryApi.updateUserDelta(this,t,i),await this.chart?.waitForUpdate()})}getOptions(){if(!this.chart)throw new Error(ou);const t=zi(this.chart.getOptions(),jy.OPTIONS_CLONE_OPTS_FAST);for(const i of Object.keys(t))i.startsWith("_")&&delete t[i];return t}waitForUpdate(){if(!this.chart)throw new Error(ou);return this.chart.waitForUpdate()}async applyTransaction(t){if(!this.chart)throw new Error(ou);if(t==null||typeof t!="object")throw new Error("AG Charts - applyTransaction expects a transaction object.");const{append:i,prepend:n,remove:s}=t;if(i!=null&&!Array.isArray(i))throw new Error('AG Charts - transaction "append" must be an array.');if(n!=null&&!Array.isArray(n))throw new Error('AG Charts - transaction "prepend" must be an array.');if(s!=null&&!Array.isArray(s))throw new Error('AG Charts - transaction "remove" must be an array or single value.');return this.chart.applyTransaction(t)}async download(t){if(!this.chart)throw new Error(ou);const i=await this.prepareResizedChart(this,this.chart,t);try{i.chart?.download(t?.fileName,t?.fileFormat)}finally{i.destroy()}}async __toSVG(t){if(!this.chart)throw new Error(ou);const i=await this.prepareResizedChart(this,this.chart,{width:600,height:300,...t});try{return i?.chart?.toSVG()}finally{i?.destroy()}}async getImageDataURL(t){if(!this.chart)throw new Error(ou);const i=await this.prepareResizedChart(this,this.chart,t);try{return i.chart.getCanvasDataURL(t?.fileFormat)}finally{i.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(t){const{chart:i}=this;if(!i)return;const n=this.getEnabledOriginators();if(!n.includes(i.ctx.legendManager)){await this.setStateOriginators(t,n);return}await this.setStateOriginators(t,n.filter(s=>s!==i.ctx.zoomManager)),await this.setStateOriginators(t,[i.ctx.zoomManager])}resetAnimations(){this.chart?.resetAnimations()}skipAnimations(){this.chart?.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.releaseChart=void 0):this.chart&&(this.chart.publicApi=void 0,this.chart.destroy()),this.chart=void 0}async prepareResizedChart(t,i,n={}){const s=n.width??i.width??i.ctx.scene.canvas.width,o=n.height??i.height??i.ctx.scene.canvas.height,r=t.getState(),a=za.hasEnterpriseModules(),l={...i.chartOptions.processedOverrides,container:document.createElement("div"),width:s,height:o};n.width!=null&&n.height!=null&&(l.overrideDevicePixelRatio=1);const c=i.getOptions();a&&(l.animation={enabled:!1},this.licenseManager?.isDisplayWatermark()&&(l.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));const d={...i.chartOptions.specialOverrides},p={...i.chartOptions.optionMetadata},g=await this.chart?.ctx.dataService.getData(),m=this.factoryApi.create(c,l,d,p,g);await m.setState(r),m.chart?.ctx.zoomManager.updateZoom("chartProxy",i.ctx.zoomManager.getZoom()),m.chart?.ctx.legendManager.clearData(),m.chart?.ctx.legendManager.update(i.ctx.legendManager.getData());for(const[b,C]of i.series.entries())m.chart.series[b].visible=C.visible;const y=[];for(const b of i.modulesManager.legends())y.push(b.legend.pagination?.currentPage??0);for(const b of m.chart.modulesManager.legends()){const C=y.shift()??0;b.legend.pagination&&b.legend.pagination.setPage(C)}return m.chart?.update(0,{forceNodeDataRefresh:!0}),await m.waitForUpdate(),m}getEnabledOriginators(){if(!this.chart)return[];const{chartOptions:{processedOptions:t,optionMetadata:i},ctx:{annotationManager:n,chartTypeOriginator:s,zoomManager:o,legendManager:r}}=this.chart,a=[];return"annotations"in t&&t.annotations?.enabled&&a.push(n),i.presetType==="price-volume"&&a.push(s),(t.navigator?.enabled||t.zoom?.enabled)&&a.push(o),"legend"in this.chart&&a.push(r),a}async setStateOriginators(t,i){this.factoryApi.caretaker.restore(t,...i),this.chart?.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),await this.chart?.waitForUpdate()}};Wy.chartInstances=new WeakMap;A([ms({oldValue(e){e.destroyed||(e.publicApi=void 0),Wy.chartInstances.delete(e)},newValue(e){e&&(e.publicApi=this,Wy.chartInstances.set(e,this))}})],Wy.prototype,"chart",2);var MV=Wy,QL=class extends rM{constructor(e){super(),this.ctx=e,this.localeText=void 0}};A([Vu(e=>{e.ctx.localeManager.setLocaleText(e.localeText)}),k],QL.prototype,"localeText",2);A([Vu(e=>{e.ctx.localeManager.setLocaleTextFormatter(e.getLocaleText)}),k],QL.prototype,"getLocaleText",2);var Bhe={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new QL(e)},qf=class extends rM{constructor(e){super(),this.ctx=e,this.rectNode=new Tn,this.textNode=new Fo,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.cleanup.register(e.scene.attachNode(this.node),e.eventsHub.on("layout:complete",t=>this.onLayoutComplete(t)))}createNode(){return new ut({name:"background",zIndex:0})}onLayoutComplete(e){const{width:t,height:i}=e.chart;this.rectNode.width=t,this.rectNode.height=i}};A([k,rn("node","visible")],qf.prototype,"visible",2);A([k,rn("rectNode","fill")],qf.prototype,"fill",2);A([k],qf.prototype,"image",2);A([k,rn("textNode")],qf.prototype,"text",2);var n$={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new qf(e)},Kh=class extends Qe{constructor(e){super(),this.node=e,this.enabled=!1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=1}};A([ms({changeValue(e){e?this.node.strokeWidth=this.strokeWidth:this.node.strokeWidth=0}}),k],Kh.prototype,"enabled",2);A([rn("node","stroke"),k],Kh.prototype,"stroke",2);A([rn("node","strokeOpacity"),k],Kh.prototype,"strokeOpacity",2);A([ms({changeValue(e){this.enabled?this.node.strokeWidth=e:this.node.strokeWidth=0}}),k],Kh.prototype,"strokeWidth",2);function Ghe({orientation:e,bboxes:t,maxHeight:i,maxWidth:n,itemPaddingY:s=0,itemPaddingX:o=0,forceResult:r=!1}){const a=e==="horizontal",l={max:a?n:i,fn:a?g=>g.width:g=>g.height,padding:a?o:s},c={max:a?i:n,fn:a?g=>g.height:g=>g.width,padding:a?s:o};let d=0;const p=[];for(;d<t.length;){const g=t.slice(d),m=_he(g,d,l,c,r);if(!m)return;d+=m.processedBBoxCount,p.push(m.pageIndices)}return zhe(p,e,t,s,o)}function _he(e,t,i,n,s){let r=jhe(e,i);if(r<1){if(!s)return;r=1}let a=r;for(;a>=1;){const l=Vhe(e,t,a,i,n,s);if(l==null&&a<=1)return;if(l==null){a--;continue}if(typeof l=="number"){if(l<=1)return;a=l<a&&l>1?l:a,a--;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function Vhe(e,t,i,n,s,o){const r=[];let a=0,l=0,c=[];const d=[];for(let p=0;p<e.length;p++){const g=(p+i)%i;g===0&&(a+=l,l=0,c.length>0&&r.push(c),c=[]);const m=n.fn(e[p])+n.padding;d[g]=Math.max(d[g]??0,m),l=Math.max(l,s.fn(e[p])+s.padding);const y=a+l,b=!o||r.length>0;if(y>s.max&&b){c=[];break}if(d.reduce((w,x)=>w+x,0)>n.max&&!o)return d.length<i?d.length:void 0;c.push(p+t)}return c.length>0&&r.push(c),r.length>0?r:void 0}function zhe(e,t,i,n,s){let o=0,r=0;return{pages:e.map(l=>{t==="horizontal"&&(l=Hhe(l));let c=0;const d=l.map(m=>{const y=m.map(w=>(c=Math.max(w,c),i[w]));let b=0,C=0;for(const w of y)b+=w.height+n,C=Math.max(C,w.width+s);return{indices:m,bboxes:y,columnHeight:Math.ceil(b),columnWidth:Math.ceil(C)}});let p=0,g=0;for(const m of d)p+=m.columnWidth,g=Math.max(g,m.columnHeight);return o=Math.max(p,o),r=Math.max(g,r),{columns:d,startIndex:l[0][0],endIndex:c,pageWidth:p,pageHeight:g}}),maxPageWidth:o,maxPageHeight:r}}function Hhe(e){const t=[];for(const i of e[0])t.push([]);for(const[i,n]of e.entries())for(const[s,o]of n.entries())t[s][i]=o;return t}function jhe(e,t){const i=e.length;let n=0;for(let s=0;s<i;s++)if(n+=t.fn(e[s])+t.padding,n>t.max)return i/s<2?Math.ceil(i/2):s;return i}var Zf=class extends Qe{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};A([k],Zf.prototype,"color",2);A([k],Zf.prototype,"fontStyle",2);A([k],Zf.prototype,"fontWeight",2);A([k],Zf.prototype,"fontSize",2);A([k],Zf.prototype,"fontFamily",2);var Xl=class extends Qe{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};A([k],Xl.prototype,"size",2);A([k],Xl.prototype,"fill",2);A([k],Xl.prototype,"fillOpacity",2);A([k],Xl.prototype,"stroke",2);A([k],Xl.prototype,"strokeWidth",2);A([k],Xl.prototype,"strokeOpacity",2);var uD=class extends Qe{constructor(e){super(),this.parent=e,this.shape="triangle",this.size=15,this.padding=8}};A([ms({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],uD.prototype,"shape",2);A([k],uD.prototype,"size",2);A([k],uD.prototype,"padding",2);var qh=class extends Qe{constructor(e,t){super(),this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.id=na(this),this.marker=new uD(this),this.activeStyle=new Xl,this.inactiveStyle=new Xl,this.highlightStyle=new Xl,this.label=new Zf,this.group=new hs({name:"pagination"}),this.labelNode=new Fo,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this.nextButton=new Rn,this.previousButton=new Rn,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){switch(this._orientation=e,e){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){const e=this.labelNode.getBBox();this.nextButton.translationX=e.width+(this.marker.size/2+this.marker.padding)*2}updateLabel(){const{currentPage:e,totalPages:t,labelNode:i,label:{color:n,fontStyle:s,fontWeight:o,fontSize:r,fontFamily:a}}=this;i.text=`${e+1} / ${t}`,i.fill=n,i.fontStyle=s,i.fontWeight=o,i.fontSize=r,i.fontFamily=a}updateMarkers(){const{nextButton:e,previousButton:t,nextButtonDisabled:i,previousButtonDisabled:n,activeStyle:s,inactiveStyle:o,highlightStyle:r,highlightActive:a}=this,l=(c,d)=>d?o:c===a?r:s;this.updateMarker(e,l("next",i)),this.updateMarker(t,l("previous",n))}updateMarker(e,t){const{shape:i,size:n}=this.marker;e.shape=i,e.size=n,e.fill=t.fill,e.fillOpacity=t.fillOpacity??1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:t}=this,i=t===0,n=e===t-1,s=e===0;this.nextButtonDisabled=n||i,this.previousButtonDisabled=s||i}setPage(e){e=st(0,e,Math.max(0,this.totalPages-1)),this.currentPage!==e&&(this.currentPage=e,this.onPaginationChanged())}getCursor(e){return{previous:this.previousButtonDisabled,next:this.nextButtonDisabled}[e]?void 0:"pointer"}onClick(e,t){e.preventDefault(),t==="next"&&!this.nextButtonDisabled?(this.incrementPage(),this.onPaginationChanged()):t==="previous"&&!this.previousButtonDisabled&&(this.decrementPage(),this.onPaginationChanged())}onMouseHover(e){this.highlightActive=e,this.updateMarkers(),this.chartUpdateCallback(7)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(7)}attachPagination(e){e.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){const e=Hi.toCanvas(this.previousButton),t=Hi.toCanvas(this.nextButton);return{prev:e,next:t}}};qh.className="Pagination";A([k],qh.prototype,"marker",2);A([k],qh.prototype,"activeStyle",2);A([k],qh.prototype,"inactiveStyle",2);A([k],qh.prototype,"highlightStyle",2);A([k],qh.prototype,"label",2);var Whe=class{constructor(e,t){this.dirty=!0,this.itemList=e.proxyInteractionService.createProxyContainer({type:"list",domManagerId:`${t}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=e.proxyInteractionService.createProxyContainer({type:"group",domManagerId:`${t}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"}}),this.itemDescription=ft("p"),this.itemDescription.style.display="none",this.itemDescription.id=_x(),this.itemDescription.textContent=this.getItemAriaDescription(e.localeManager),this.itemList.getElement().append(this.itemDescription)}initLegendList(e){if(!this.dirty)return;const{ctx:t,itemSelection:i,datumReader:n,itemListener:s}=e,o=t.localeManager,r=i.length;i.each((a,l,c)=>{a.proxyButton?.destroy(),a.proxyButton=t.proxyInteractionService.createProxyElement({type:"listswitch",textContent:this.getItemAriaText(o,_n(n.getItemLabel(l)),c,r),ariaChecked:!!a.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});const d=a.proxyButton;d.addListener("click",p=>s.onClick(p.sourceEvent,a.datum,d)),d.addListener("dblclick",p=>s.onDoubleClick(p.sourceEvent,a.datum)),d.addListener("mouseenter",p=>s.onHover(p.sourceEvent,a)),d.addListener("mouseleave",()=>s.onLeave()),d.addListener("contextmenu",p=>s.onContextClick(p,a)),d.addListener("blur",()=>s.onLeave()),d.addListener("focus",p=>s.onHover(p.sourceEvent,a)),d.addListener("drag-start",()=>{})}),this.dirty=!1}update(e){e.visible&&(this.initLegendList(e),this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!0)),this.updateVisibility(e.visible)}updateVisibility(e){this.itemList.setHidden(!e),this.paginationGroup.setHidden(!e)}updateItemProxyButtons({itemSelection:e,group:t,pagination:i,interactive:n}){const s=Hi.toCanvas(t);this.itemList.setBounds(s);const o=Math.max(...e.nodes().map(r=>r.getBBox().height));e.each((r,a)=>{if(r.proxyButton){const l=r.pageIndex===i.currentPage,{x:c,y:d,height:p,width:g}=Hi.toCanvas(r),m=(o-p)/2,y={x:c-s.x,y:d-m-s.y,height:o,width:g},b=n&&l;r.proxyButton.setCursor("pointer"),r.proxyButton.setEnabled(b),r.proxyButton.setPointerEvents(b?void 0:"none"),r.proxyButton.setBounds(y)}})}updatePaginationProxyButtons(e,t){const{pagination:i}=e;if(this.paginationGroup.setHidden(!i.visible),t&&"ctx"in e){const{oldPages:n,newPages:s}=e,o=(n?.length??s.length)>1,r=s.length>1;o!==r&&(r?this.createPaginationButtons(e):this.destroyPaginationButtons()),this.paginationGroup.setAriaHidden(r?void 0:!0)}if(this.prevButton&&this.nextButton){const{prev:n,next:s}=i.computeCSSBounds(),o=Le.merge([n,s]);n.x-=o.x,n.y-=o.y,s.x-=o.x,s.y-=o.y,this.paginationGroup.setBounds(o),this.prevButton.setBounds(n),this.nextButton.setBounds(s),this.prevButton.setEnabled(i.currentPage!==0),this.nextButton.setEnabled(i.currentPage!==i.totalPages-1),this.nextButton.setCursor(i.getCursor("next")),this.prevButton.setCursor(i.getCursor("previous"))}}createPaginationButtons(e){const{ctx:t,pagination:i}=e;this.prevButton||(this.prevButton=t.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",n=>this.onPageButton(e,n,"previous")),this.prevButton.addListener("mouseenter",()=>i.onMouseHover("previous")),this.prevButton.addListener("mouseleave",()=>i.onMouseHover(void 0))),this.nextButton||(this.nextButton=t.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup}),this.nextButton.addListener("click",n=>this.onPageButton(e,n,"next")),this.nextButton.addListener("mouseenter",()=>i.onMouseHover("next")),this.nextButton.addListener("mouseleave",()=>i.onMouseHover(void 0)))}destroyPaginationButtons(){this.nextButton?.destroy(),this.prevButton?.destroy(),this.nextButton=void 0,this.prevButton=void 0}onPageButton(e,t,i){e.pagination.onClick(t.sourceEvent,i),this.updatePaginationProxyButtons(e,!1)}onDataUpdate(e,t){this.dirty=e.length!==t.length||e.some((i,n,s)=>{const[o,r]=[t[n],e[n]];return o.id!==r.id})}onLocaleChanged(e,t,i){const n=t.length;t.each(({proxyButton:s},o,r)=>{const a=s?.getElement();if(a!=null){const l=_n(i.getItemLabel(o));a.textContent=this.getItemAriaText(e,l,r,n)}}),this.itemDescription.textContent=this.getItemAriaDescription(e)}onPageChange(e){this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!1)}getItemAriaText(e,t,i,n){return i>=0&&t?(i++,e.t("ariaLabelLegendItem",{label:t,index:i,count:n})):e.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(e){return e.t("ariaDescriptionLegendItem")}};function DV(e,{itemId:t,seriesId:i,label:{text:n}},s){const o={defaultPrevented:!1,apiEvent:{type:e,itemId:t,seriesId:i,event:s,text:_n(n),preventDefault:()=>o.defaultPrevented=!0}};return o}var Lr=class extends hs{constructor(){super({name:"markerLabelGroup"}),this.symbolsGroup=this.appendChild(new ut({name:"legend-markerLabel-symbols",renderToOffscreenCanvas:!0,optimizeForInfrequentRedraws:!0})),this.label=this.appendChild(new Fo),this.enabled=!0,this.pageIndex=Number.NaN,this.spacing=0,this.length=0,this.isCustomMarker=!1,this.marker=this.symbolsGroup.appendChild(new Rn({zIndex:1})),this.line=this.symbolsGroup.appendChild(new _o({zIndex:0})),this.line.visible=!1,this.label.textBaseline="middle",this.label.y=1}destroy(){super.destroy(),this.proxyButton?.destroy()}setEnabled(e){this.enabled=e,this.refreshVisibilities()}getTextMeasureBBox(){return this.layout(),Le.merge([this.symbolsGroup.getBBox(),this.label.getTextMeasureBBox()])}refreshVisibilities(){const e=this.enabled?1:.5;this.label.opacity=e,this.opacity=e}layout(){const{marker:e,line:t,length:i,isCustomMarker:n}=this;let s=0,o=0;if(e.visible){const{size:r}=e,a=Rn.anchor(e.shape);s=(a.x-.5)*r+i/2,o=(a.y-.5)*r,n?(e.x=0,e.y=0,e.translationX=s,e.translationY=o):(e.x=s,e.y=o,e.translationX=0,e.translationY=0)}t.visible&&(t.x1=0,t.x2=i,t.y1=0,t.y2=0)}preRender(e){const t=super.preRender(e);return this.layout(),t}layoutLabel(){const{length:e,spacing:t}=this;this.label.x=e+t}computeBBox(){return this.layout(),super.computeBBox()}};Lr.className="MarkerLabel";A([rn("label")],Lr.prototype,"text",2);A([rn("label")],Lr.prototype,"fontStyle",2);A([rn("label")],Lr.prototype,"fontWeight",2);A([rn("label")],Lr.prototype,"fontSize",2);A([rn("label")],Lr.prototype,"fontFamily",2);A([rn("label","fill")],Lr.prototype,"color",2);A([Vu(e=>e.layoutLabel())],Lr.prototype,"spacing",2);A([Vu(e=>e.layoutLabel())],Lr.prototype,"length",2);A([Me()],Lr.prototype,"isCustomMarker",2);function qS(e){const{placement:t="bottom",floating:i=!1,xOffset:n=0,yOffset:s=0}=typeof e=="string"?{placement:e,floating:!1}:e;return{placement:t,floating:i,xOffset:n,yOffset:s}}var qu=class extends Qe{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};A([k],qu.prototype,"maxLength",2);A([k],qu.prototype,"color",2);A([k],qu.prototype,"fontStyle",2);A([k],qu.prototype,"fontWeight",2);A([k],qu.prototype,"fontSize",2);A([k],qu.prototype,"fontFamily",2);A([k],qu.prototype,"formatter",2);var Xf=class extends Qe{constructor(){super(...arguments),this.shape=void 0,this.size=15,this.padding=8}};A([k],Xf.prototype,"shape",2);A([k],Xf.prototype,"size",2);A([k],Xf.prototype,"padding",2);A([k],Xf.prototype,"strokeWidth",2);A([k],Xf.prototype,"enabled",2);var JL=class extends Qe{};A([k],JL.prototype,"strokeWidth",2);A([k],JL.prototype,"length",2);var Zu=class extends Qe{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new Xf,this.label=new qu,this.line=new JL}};A([k],Zu.prototype,"maxWidth",2);A([k],Zu.prototype,"paddingX",2);A([k],Zu.prototype,"paddingY",2);A([k],Zu.prototype,"showSeriesStroke",2);A([k],Zu.prototype,"marker",2);A([k],Zu.prototype,"label",2);A([k],Zu.prototype,"line",2);var eP=class extends Qe{};A([k],eP.prototype,"legendItemClick",2);A([k],eP.prototype,"legendItemDoubleClick",2);var AV={bounds:"item",gradient:"linear",colorStops:[{color:"black"}],rotation:0,reverse:!1,colorSpace:"rgb"},RV={pattern:"forward-slanted-lines",width:8,height:8,padding:1,fill:"black",fillOpacity:1,backgroundFill:"white",backgroundFillOpacity:1,stroke:"black",strokeOpacity:1,strokeWidth:1,rotation:0,scale:1},EV={backgroundFill:"black",backgroundFillOpacity:1,rotation:0,repeat:"no-repeat",fit:"contain"},mn=class extends Qe{constructor(e){super(),this.ctx=e,this.id=na(this),this.group=new hs({name:"legend",zIndex:16}),this.itemSelection=ks.select(this.group,Lr),this.containerNode=this.group.appendChild(new Tn({name:"legend-container"})),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.toggleSeries=!0,this.item=new Zu,this.listeners=new eP,this.enabled=!0,this.position="bottom",this.border=new Kh(this.containerNode),this.cornerRadius=0,this.fillOpacity=1,this.padding=4,this.spacing=0,this.cleanup=new Ui,this.size=[0,0],this._visible=!0,this.pagination=new qh(i=>e.updateService.update(i),i=>this.updatePageNumber(i)),this.pagination.attachPagination(this.group);const{items:t}=e.contextMenuRegistry.builtins;t["toggle-series-visibility"].action=i=>this.contextToggleVisibility(i),t["toggle-other-series"].action=i=>this.contextToggleOtherSeries(i),this.cleanup.register(e.eventsHub.on("legend:change",this.onLegendDataChange.bind(this)),e.eventsHub.on("legend:change-partial",this.onLegendDataChangePartial.bind(this)),e.layoutManager.registerElement(1,i=>this.positionLegend(i)),e.eventsHub.on("locale:change",()=>this.onLocaleChanged()),()=>delete t["toggle-series-visibility"].action,()=>delete t["toggle-other-series"].action,()=>this.group.remove()),this.domProxy=new Whe(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(e.legendManager)}set data(e){qs(e,this._data)||(this.domProxy.onDataUpdate(this._data,e),this._data=e,this.updateGroupVisibility())}get data(){return this._data}onLegendDataChange({legendData:e=[]}){this.enabled&&(this.data=e.filter(t=>!t.hideInLegend))}onLegendDataChangePartial(e){this.itemSelection.each(({proxyButton:t},{itemId:i})=>{if(t!=null)for(const n of e.legendData)n.itemId===i&&t.setChecked(n.enabled)})}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.cleanup.flush(),this.itemSelection.clear()}getOrientation(){return this.orientation??"horizontal"}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}isInteractive(){const{toggleSeries:e,listeners:{legendItemClick:t,legendItemDoubleClick:i}}=this;return e||i!=null||t!=null}attachLegend(e){e.appendChild(this.group)}getItemLabel(e){const{formatter:t}=this.item.label;if(t){const i=e.datum;return this.cachedCallWithContext(t,{itemId:e.itemId,value:e.label.text,seriesId:e.seriesId,...i&&{datum:i}})}return e.label.text}calcLayout(e,t){const{paddingX:i,paddingY:n,label:s,maxWidth:o,label:{maxLength:r=1/0,fontStyle:a,fontWeight:l,fontSize:c,fontFamily:d}}=this.item,p=[...this.data];this.reverseOrder&&p.reverse(),this.itemSelection.update(p);const g=[],m=yo(s),b=o??e*.8,{markerWidth:C,anyLineEnabled:w}=this.calculateMarkerWidth();if(this.itemSelection.each((G,B)=>{G.fontStyle=a,G.fontWeight=l,G.fontSize=c,G.fontFamily=d;const z=this.updateMarkerLabel(G,B,C,w),j=B.itemId??B.id,X=this.getItemLabel(B),q=_n(X,"<unknown>").replace(of," ");G.text=this.truncate(q,r,b,z,m,j),g.push(G.getTextMeasureBBox())}),e=Math.max(1,e),t=Math.max(1,t),!Number.isFinite(e))return{};[e,t]=this.updateContainer(e,t);const x=this.size,M=this.oldSize;x[0]=e,x[1]=t,(x[0]!==M[0]||x[1]!==M[1])&&(M[0]=x[0],M[1]=x[1]);const{pages:E,maxPageHeight:I,maxPageWidth:N}=this.updatePagination(g,e,t),T=this.pages;this.pages=E,this.maxPageSize=[N-i,I-n];const P=this.pagination.currentPage,O=this.pages[P];return this.pages.length<1||!O?(this.visible=!1,{oldPages:T}):(this.visible=!0,this.updatePositions(P),this.update(),{oldPages:T})}isCustomMarker(e,t){return e&&t!==void 0&&typeof t!="string"}calcSymbolsEnabled(e){const{showSeriesStroke:t,marker:i}=this.item,n=!!i.enabled||!t||(e.marker.enabled??!0),s=!!(e.line&&t),o=this.isCustomMarker(n,e.marker.shape);return{markerEnabled:n,lineEnabled:s,isCustomMarker:o}}calcSymbolsLengths(e,t,i){const{marker:n,line:s}=this.item;let o;const{shape:r}=e.marker;if(this.isCustomMarker(t,r)){const c=new Rn;c.shape=r,c.updatePath();const d=c.getBBox();o=Math.max(d.width,d.height)}const a=t?n.size:0,l=i?s.length??25:0;return{markerLength:a,lineLength:l,customMarkerSize:o}}calculateMarkerWidth(){let e=0,t=!1;return this.itemSelection.each((i,n)=>{const{symbol:s}=n,{lineEnabled:o,markerEnabled:r}=this.calcSymbolsEnabled(s),{markerLength:a,lineLength:l,customMarkerSize:c=-1/0}=this.calcSymbolsLengths(s,r,o);e=Math.max(e,l,c,a),t||(t=o)}),{markerWidth:e,anyLineEnabled:t}}updateMarkerLabel(e,t,i,n){const{marker:s,paddingX:o}=this.item,{symbol:r}=t;let a=o;const{markerEnabled:l,isCustomMarker:c}=this.calcSymbolsEnabled(r),d=s.padding;(l||n)&&(a+=d+i);const{marker:p,line:g}=e;return p.visible=l,p.visible&&(p.shape=s.shape??r.marker.shape??"square",p.size=s.size,Zl(p,this.getMarkerStyles(zi(r)))),g.visible=n,g.visible&&Zl(g,this.getLineStyles(r)),e.length=i,e.spacing=d,e.isCustomMarker=c,a}updateContainer(e,t){const i=this.getContainerStyles();return this.containerNode.width=0,this.containerNode.height=0,Zl(this.containerNode,i),this.containerNode.cornerRadius=i.cornerRadius,e-=i.strokeWidth*2+i.padding.left+i.padding.right,t-=i.strokeWidth*2+i.padding.top+i.padding.bottom,[e,t]}truncate(e,t,i,n,s,o){let r=!1;e.length>t&&(e=e.substring(0,t),r=!0);const a=kg(e,s,i-n,r);return gb(a)?this.truncatedItems.add(o):this.truncatedItems.delete(o),a}updatePagination(e,t,i){const n=this.getOrientation(),s=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:o,maxPageHeight:r,maxPageWidth:a,paginationBBox:l,paginationVertical:c}=this.calculatePagination(e,t,i),d=o.findIndex(M=>M.endIndex>=s);this.pagination.currentPage=st(0,d,o.length-1);const{paddingX:p,paddingY:g}=this.item,m=8,y=a-p,b=r-g;let C=0,w=-l.y-this.item.marker.size/2;c?w+=b+m:(C+=-l.x+y+m,w+=(b-l.height)/2),this.pagination.translationX=C,this.pagination.translationY=w,this.pagination.update(),this.pagination.updateMarkers();let x=0;return this.itemSelection.each((M,E,I)=>{I>(o[x]?.endIndex??1/0)&&x++,M.pageIndex=x}),{maxPageHeight:r,maxPageWidth:a,pages:o}}calculatePagination(e,t,i){const{paddingX:n,paddingY:s}=this.item,o=["left","left-top","left-bottom","right","right-top","right-bottom"],{placement:r}=qS(this.position),a=this.getOrientation(),l=o.includes(r);let c=this.pagination.getBBox(),d=new Le(0,0,0,0),p=[],g=0,m=0,y=0;const b=w=>w.width===c.width&&w.height===c.height,C=this.maxWidth!==void 0&&this.maxHeight!==void 0;do{if(y++>10){fe.warn("unable to find stable legend layout.");break}c=d;const w=t-(l?0:c.width),x=i-(l?c.height:0),M=Ghe({orientation:a,bboxes:e,maxHeight:x,maxWidth:w,itemPaddingY:s,itemPaddingX:n,forceResult:C});p=M?.pages??[],g=M?.maxPageWidth??0,m=M?.maxPageHeight??0;const E=p.length;if(this.pagination.visible=E>1,this.pagination.totalPages=E,this.pagination.update(),this.pagination.updateMarkers(),d=this.pagination.getBBox(),!this.pagination.visible)break}while(!b(d));return{maxPageWidth:g,maxPageHeight:m,pages:p,paginationBBox:d,paginationVertical:l}}updatePositions(e=0){const{item:{paddingY:t},itemSelection:i,pages:n}=this;if(n.length<1||!n[e])return;const{columns:s,startIndex:o,endIndex:r}=n[e];let a=0,l=0;const c=s.length,d=s[0].indices.length,p=this.getOrientation()==="horizontal",g=s[0].bboxes[0].height+t,m=[];i.each((y,b,C)=>{if(C<o||C>r){y.visible=!1;return}const w=C-o;let x,M;p?(x=w%c,M=Math.floor(w/c)):(x=Math.floor(w/d),M=w%d),y.visible=!0;const E=s[x];E&&(l=Math.floor(g*M),a=Math.floor(m[M]??0),m[M]=(m[M]??0)+E.columnWidth,y.translationX=a,y.translationY=l)})}updatePageNumber(e){const{itemSelection:t,group:i,pagination:n,pages:s}=this,{startIndex:o,endIndex:r}=s[e];o===0?this.paginationTrackingIndex=0:e===s.length-1?this.paginationTrackingIndex=r:this.paginationTrackingIndex=Math.floor((o+r)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.domProxy.onPageChange({itemSelection:t,group:i,pagination:n,interactive:this.isInteractive()}),this.ctx.updateService.update(7)}update(){const{label:{color:e}}=this.item;this.itemSelection.each((t,i)=>{t.setEnabled(i.enabled),t.color=e}),this.updateContextMenu()}updateContextMenu(){const e=this.toggleSeries?"show":"hide";this.ctx.contextMenuRegistry.toggle("toggle-series-visibility",e),this.ctx.contextMenuRegistry.toggle("toggle-other-series",e)}getLineStyles(e){const{stroke:t,strokeOpacity:i=1,strokeWidth:n,lineDash:s}=e.line??{},o=Math.min(2,n??1);return{stroke:t,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??o,lineDash:s}}getMarkerStyles({marker:e}){const{fill:t,stroke:i,strokeOpacity:n=1,fillOpacity:s=1,strokeWidth:o,lineDash:r,lineDashOffset:a}=e,l=Math.min(2,o??1);return lc(t)&&(t.width=8,t.height=8,t.padding=1,t.strokeWidth=Math.min(2,t.strokeWidth??2)),bh(t)&&(t.fit="contain",t.width=void 0,t.height=void 0,t.repeat="no-repeat"),VI({fill:t,stroke:i,strokeOpacity:n,fillOpacity:s,strokeWidth:this.item.marker.strokeWidth??l,lineDash:r,lineDashOffset:a},AV,RV,EV)}getContainerStyles(){const{stroke:e,strokeOpacity:t,strokeWidth:i}=this.border,{cornerRadius:n,fill:s,fillOpacity:o,padding:r}=this,a=typeof r=="number";return VI({cornerRadius:n,fill:s,fillOpacity:o,padding:{top:a?r:r.top??0,right:a?r:r.right??0,bottom:a?r:r.bottom??0,left:a?r:r.left??0},stroke:e,strokeOpacity:t,strokeWidth:this.border.enabled?i:0},AV,RV,EV)}computePagedBBox(){const e=ut.computeChildrenBBox(this.group.excludeChildren({name:"legend-container"}));if(this.pages.length>1){const[n,s]=this.maxPageSize;e.height=Math.max(s,e.height),e.width=Math.max(n,e.width)}const{strokeWidth:t,padding:i}=this.getContainerStyles();return e.grow(i).grow(t),e}findNode(e){const{datum:t,proxyButton:i}=this.itemSelection.select(n=>n.datum?.itemId===e.itemId)[0]??{};if(t===void 0||i===void 0)throw new Error(`AG Charts - Missing required properties { datum: ${t}, proxyButton: ${JSON.stringify(i)} }`);return{datum:t,proxyButton:i}}contextToggleVisibility(e){const{datum:t,proxyButton:i}=this.findNode(e);this.doClick(e.event,t,i)}contextToggleOtherSeries(e){this.doDoubleClick(e.event,this.findNode(e).datum)}onContextClick(e,t){const{sourceEvent:i}=e,n=t.datum;this.preventHidingAll&&this.contextMenuDatum?.enabled&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!1:this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!0;const o=this.ctx.chartService.series.length>1&&this.ctx.chartService.series[0]?.getLegendData("category")[0]?.hideToggleOtherSeries!==!0?"show":"hide";this.ctx.contextMenuRegistry.toggle("toggle-other-series",o);const{offsetX:r,offsetY:a}=i,{x:l,y:c}=Hi.toCanvasPoint(t,r,a);this.ctx.contextMenuRegistry.dispatchContext("legend-item",{widgetEvent:e,canvasX:l,canvasY:c},{legendItem:n})}onClick(e,t,i){this.doClick(e,t,i)&&e.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(e=>e.getLegendData("category")).filter(e=>e.enabled).length}doClick(e,t,i){const{listeners:{legendItemClick:n},ctx:{chartService:s,highlightManager:o},preventHidingAll:r,toggleSeries:a}=this;if(!t)return!1;const{legendType:l,seriesId:c,itemId:d,enabled:p,legendItemName:g}=t,m=s.series.find(C=>C.id===c);if(!m)return!1;let y=p;const b=DV("click",t,e);return n&&Zr([m.properties,this.ctx.chartService],n,b.apiEvent),b.defaultPrevented||(a&&(y=!p,r&&!y&&this.getVisibleItemCount()<2&&(y=!0),i.setChecked(y),this.ctx.eventsHub.emit("legend:item-click",{legendType:l,series:m,itemId:d,enabled:y,legendItemName:g})),y?o.updateHighlight(this.id,{series:m,itemId:d,datum:void 0,datumIndex:void 0,legendItemName:g}):o.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0,skipAnimations:t.skipAnimations??!1})),!0}onDoubleClick(e,t){this.doDoubleClick(e,t)&&e.preventDefault()}doDoubleClick(e,t){const{listeners:{legendItemDoubleClick:i},ctx:{chartService:n},toggleSeries:s}=this;if(!t)return!1;const{legendType:o,id:r,itemId:a,seriesId:l}=t,c=n.series.find(p=>p.id===r);if(!c)return!1;const d=DV("dblclick",t,e);if(i&&Zr([c.properties,this.ctx.chartService],i,d.apiEvent),d.defaultPrevented)return!0;if(s){const p=n.series.flatMap(b=>b.getLegendData("category"));let g=0;const m=new Set;for(const b of p)b.enabled&&(g+=1,b.legendItemName!=null&&m.add(b.legendItemName));m.size>0&&(g=m.size);const y=p.find(b=>b.itemId===a&&b.seriesId===l);this.ctx.eventsHub.emit("legend:item-double-click",{legendType:o,series:c,itemId:a,numVisibleItems:g,enabled:y?.enabled??!1,legendItemName:y?.legendItemName})}return this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(e,t){let i;return e instanceof FocusEvent?i=Hi.toCanvas(t).computeCenter():(e.preventDefault(),i=Hi.toCanvasPoint(t,e.offsetX,e.offsetY)),{canvasX:i.x,canvasY:i.y,showArrow:!1}}onHover(e,t){if(!this.enabled)throw new Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(t.pageIndex);const i=t.datum,n=i?this.ctx.chartService.series.find(s=>s.id===i?.id):void 0;if(i&&this.truncatedItems.has(i.itemId??i.id)){const s=this.toTooltipMeta(e,t);this.ctx.tooltipManager.updateTooltip(this.id,s,[{type:"structured",title:this.getItemLabel(i)}])}else this.ctx.tooltipManager.removeTooltip(this.id);i?.enabled&&n?this.updateHighlight({series:n,itemId:i?.itemId,datum:void 0,datumIndex:void 0,legendItemName:i?.legendItemName}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(e){this.ctx.interactionManager.isState(32)?this.ctx.highlightManager.updateHighlight(this.id,e):this.ctx.interactionManager.isState(2)&&(this.pendingHighlightDatum=e,this.ctx.animationManager.onBatchStop(()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)}))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(e){const t=this.positionLegendScene(e);this.positionLegendDOM(t)}positionLegendScene(e){if(!this.enabled||!this.data.length)return;const{placement:t,floating:i,xOffset:n,yOffset:s}=qS(this.position),o=i?new Le(0,0,e.width,e.height):e.layoutBox,{x:r,y:a,width:l,height:c}=o,[d,p]=this.calculateLegendDimensions(o),{oldPages:g}=this.calcLayout(d,p),m=this.computePagedBBox();if(this.visible){const y=this.spacing;let b,C;switch(t){case"top":b=(l-m.width)/2,C=0;break;case"bottom":b=(l-m.width)/2,C=c-m.height;break;case"right":b=l-m.width,C=(c-m.height)/2;break;case"left":b=0,C=(c-m.height)/2;break;case"top-right":case"right-top":b=l-m.width,C=0;break;case"top-left":case"left-top":b=0,C=0;break;case"bottom-right":case"right-bottom":b=l-m.width,C=c-m.height;break;case"bottom-left":case"left-bottom":b=0,C=c-m.height;break}if(!i){let w,x;switch(t){case"top":case"top-right":case"top-left":w=m.height+y,x="top";break;case"bottom":case"bottom-right":case"bottom-left":w=m.height+y,x="bottom";break;case"left":case"left-top":case"left-bottom":w=m.width+y,x="left";break;case"right":case"right-top":case"right-bottom":w=m.width+y,x="right";break}o.shrink(w,x)}b+=n,C+=s,this.group.translationX=Math.floor(r+b-m.x),this.group.translationY=Math.floor(a+C-m.y),this.containerNode.x=m.x,this.containerNode.y=m.y,this.containerNode.width=m.width,this.containerNode.height=m.height}return g}positionLegendDOM(e){const{ctx:t,itemSelection:i,pagination:n,pages:s,group:o}=this,r=this.visible&&this.enabled,a=this.isInteractive();this.domProxy.update({visible:r,interactive:a,ctx:t,itemSelection:i,group:o,pagination:n,oldPages:e,newPages:s,datumReader:this,itemListener:this})}calculateLegendDimensions(e){const{width:t,height:i}=e,{placement:n}=qS(this.position),s=t/i,o=.5,r=.2,a=.25;let l,c;switch(n){case"top":case"top-left":case"top-right":case"bottom":case"bottom-left":case"bottom-right":{const d=s<1?Math.min(o,r*(1/s)):r;l=this.maxWidth?Math.min(this.maxWidth,t):t,c=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*d);break}case"left":case"left-top":case"left-bottom":case"right":case"right-top":case"right-bottom":{const d=s>1?Math.min(o,a*s):a;l=this.maxWidth?Math.min(this.maxWidth,t):Math.round(t*d),c=this.maxHeight?Math.min(this.maxHeight,i):i;break}}return[l,c]}cachedCallWithContext(e,t){const{callbackCache:i,chartService:n}=this.ctx;return i.call([this,n],e,t)}};mn.className="Legend";A([k],mn.prototype,"toggleSeries",2);A([k],mn.prototype,"pagination",2);A([k],mn.prototype,"item",2);A([k],mn.prototype,"listeners",2);A([Vu((e,t,i)=>{if(e.updateGroupVisibility(),t===i)return;const{ctx:{legendManager:n,stateManager:s}}=e;i===!1&&t===!0&&s.restoreState(n)}),k],mn.prototype,"enabled",2);A([k],mn.prototype,"position",2);A([k],mn.prototype,"maxWidth",2);A([k],mn.prototype,"maxHeight",2);A([k],mn.prototype,"reverseOrder",2);A([k],mn.prototype,"orientation",2);A([k],mn.prototype,"preventHidingAll",2);A([k],mn.prototype,"border",2);A([k],mn.prototype,"cornerRadius",2);A([k],mn.prototype,"fill",2);A([k],mn.prototype,"fillOpacity",2);A([k],mn.prototype,"padding",2);A([k],mn.prototype,"spacing",2);A([k],mn.prototype,"xOffset",2);A([k],mn.prototype,"yOffset",2);var Uhe={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new mn(e),packageType:"community",removable:"standalone-only"},eC=class extends Qe{constructor(e){super(),this.ctx=e,this.rectNode=new Tn,this.border=new Kh(this.rectNode),this.cornerRadius=0,this.padding=0,this.cleanup=new Ui,this.node=this.createNode(),this.node.append([this.rectNode]),this.rectNode.fill=void 0,this.cleanup.register(e.scene.attachNode(this.node),e.eventsHub.on("layout:complete",t=>this.onLayoutComplete(t)))}destroy(){this.cleanup.flush()}getPadding(){const{border:e,padding:t}=this,i=e.enabled?e.strokeWidth:0;if(typeof t=="number"){const n=t+i;return{top:n,right:n,bottom:n,left:n}}return{top:(t.top??0)+i,right:(t.right??0)+i,bottom:(t.bottom??0)+i,left:(t.left??0)+i}}createNode(){return new ut({name:"series-area-container",zIndex:4})}onLayoutComplete(e){const{x:t,y:i,width:n,height:s}=e.series.paddedRect;this.rectNode.x=t,this.rectNode.y=i,this.rectNode.width=n,this.rectNode.height=s}};A([k],eC.prototype,"border",2);A([k],eC.prototype,"clip",2);A([rn("rectNode","cornerRadius"),k],eC.prototype,"cornerRadius",2);A([k],eC.prototype,"padding",2);var $he={type:"root",optionsKey:"seriesArea",packageType:"community",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new eC(e)};function a0(e,t,i,n,s){const o=(p,g,m,y)=>{i.animate({id:`${e}_${t}_${g.id}_${p}`,groupId:e,from:m?1:0,to:1,ease:yv,collapsable:m,onUpdate(b,C){C&&p!=="removed"||(g.path.clear(!0),y(b,g),g.checkPathDirty())},onStop(){p==="added"&&(g.path.clear(!0),y(1,g),g.checkPathDirty())},phase:jr[p]})},r=new zn,a=p=>(r.resetPathDirty(),p(0,r),r.resetPathDirty(),p(1,r),r.checkPathDirty(),r.isPathDirty()),{addPhaseFn:l,updatePhaseFn:c,removePhaseFn:d}=s;for(const p of n)i.isSkipped()||(o("removed",p,!a(d),d),o("updated",p,!a(c),c)),o("added",p,!a(l),l)}function Zh(e,t,i,n,s,o){if(e.visible&&n.itemStyler){const r=s||e.isSeriesHighlighted(o),a=e.getHighlightStateString(o,s||t!=null&&o?.series===t.series&&o?.datumIndex===t.datumIndex,t?.datumIndex),l={border:n.border,color:n.color,cornerRadius:n.cornerRadius,datum:t?.datum,enabled:n.enabled,fill:n.fill,fillOpacity:n.fillOpacity,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontWeight:n.fontWeight,itemId:t?.itemId,seriesId:e.id,padding:n.padding,highlighted:r,highlightState:a},c=e.ctx.optionsGraphService.resolvePartial(["series",`${e.declarationOrder}`,"label"],e.cachedCallWithContext(n.itemStyler,{...i,...l}),{pick:!1})??{};return _t(c,l)}return n}function s$(e,t,i,n,s,o,r){if(e.visible&&n.enabled&&s){const a=Zh(e,t.datum,i,n,o,r);t.visible=!0,t.x=s.x,t.y=s.y,t.text=s.text,t.fill=a.color,t.setAlign(s),t.setFont(a),t.setBoxing(a)}else t.visible=!1}var Yhe={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function o$({isUpward:e,isVertical:t,placement:i,spacing:n=0,rect:s}){let o=s.x+s.width/2,r=s.y+s.height/2,a="center",l="middle";if(i!=="inside-center"){const c=(e?1:-1)*(t?-1:1),{direction:d,textAlignment:p}=Yhe[i],g=(d+1)*.5;if(t){const m=e?s.y+s.height:s.y,y=s.height*c;r=m+y*g+n*p*c,l=p===c?"top":"bottom"}else{const m=e?s.x:s.x+s.width,y=s.width*c;o=m+y*g+n*p*c,a=p===c?"left":"right"}}return{x:o,y:r,textAlign:a,textBaseline:l}}function Gi({id:e},t,i,...n){for(const s of n)s.cleanup();yc(e,t,i,n,{opacity:0},{opacity:1},{phase:"trailing"})}function ZS({id:e},t,i,...n){yc(e,t,i,n,{opacity:1},{opacity:0},{phase:"remove"})}function Xh(e){return{opacity:1}}var As=0,js=1,Ws=2,Us=3,Wr=4,Khe=3,qhe=20,tT=100;function ek(e,t,i,n,s,o,r,a){let l=0;for(;l<tT&&e[n]==null&&n<s;)n+=1,l+=1;for(;l<tT&&e[s]==null&&s>n;)s-=1,l+=1;if(l>=tT||n>=s)return o;const c=Number.isFinite(t)?Jr(e[s],t,i,a)-Jr(e[n],t,i,a):Tv(s,e.length)-Tv(n,e.length);if(c===0||!Number.isFinite(c))return o;const d=Math.abs(c)/(s-n);let p;if(r<Khe?p=!0:r>qhe?p=!1:p=d<=o,o=Math.min(o,d),!p)return o;const g=Math.floor((n+s)/2),m=ek(e,t,i,n,g,o,r+1,a),y=ek(e,t,i,g+1,s,o,r+1,a);return Math.min(m,y,o)}function Zhe(e,t,i,n){return ek(e,t,i,0,e.length-1,1/(e.length-1),0,n)}function dD(e,t,i,n){if(Number.isFinite(t)){const s=n?.smallestKeyInterval,o=n?.xNeedsValueOf??!0,r=s==null?Zhe(e,t,i,o):s/(i-t);return uU(Math.trunc(1/r))>>3}else{let s=Math.ceil(Math.log2(e.length))-1;return s=Math.min(Math.max(s,0),24),Math.trunc(2**s)}}function bf(e,t){switch(e){case"category":return[Number.NaN,Number.NaN];case"number":case"time":case"ordinal-time":case"unit-time":{let i=1/0,n=-1/0;for(const s of t){const o=Number(s);i=Math.min(i,o),n=Math.max(n,o)}return[i,n]}case"color":case"log":case"mercator":return[0,0]}}function Tv(e,t){return e/t}function Jr(e,t,i,n){return n?(e.valueOf()-t)/(i-t):(e-t)/(i-t)}function tP(e,t){return Math.trunc(Math.min(Math.floor(e*t),t-1)*Wr)}function Iv(e,t,i,n,s,o,{positive:r,xNeedsValueOf:a=!0,yNeedsValueOf:l=!0}={}){const c=new Int32Array(o*Wr).fill(-1),d=new Float64Array(o*Wr).fill(Number.NaN),p=Number.isFinite(n)&&Number.isFinite(s),g=e.length,m=p?s-n:0,y=1/g;let b=-1,C=-1,w=Number.NaN,x=-1,M=Number.NaN,E=-1,I=Number.NaN,N=-1,T=Number.NaN;const P=z=>{const j=z;c[j+As]=C,c[j+js]=x,c[j+Ws]=E,c[j+Us]=N,d[j+As]=w,d[j+js]=M,d[j+Ws]=I,d[j+Us]=T},O=z=>{const j=z;C=c[j+As],x=c[j+js],E=c[j+Ws],N=c[j+Us],w=d[j+As],M=d[j+js],I=d[j+Ws],T=d[j+Us]},G=e.length,B=t===i;for(let z=0;z<G;z++){const j=e[z];if(j==null)continue;const X=t[z],q=B?X:i[z];let H,K;if(l?(H=X==null?Number.NaN:X.valueOf(),K=q==null?Number.NaN:q.valueOf()):(H=X??Number.NaN,K=q??Number.NaN),r!=null&&H>=0!==r)continue;let U;p?a?U=(j.valueOf()-n)/m:U=(j-n)/m:U=z*y;const de=Math.trunc(Math.min(Math.floor(U*o),o-1)*Wr);de!==b&&(b!==-1&&P(b),b=de,O(de));const te=!Number.isNaN(K),V=!Number.isNaN(H);C===-1?(C=z,w=U,x=z,M=U,te&&(E=z,I=K),V&&(N=z,T=H)):(U<w&&(C=z,w=U),U>M&&(x=z,M=U),te&&K<I&&(E=z,I=K),V&&H>T&&(N=z,T=H))}return b!==-1&&P(b),{indexData:c,valueData:d}}function kv(e,t,i,{inPlace:n=!1}={}){const s=Math.trunc(i/2),o=n?e:new Int32Array(s*Wr),r=n?t:new Float64Array(s*Wr);for(let a=0;a<s;a+=1){const l=Math.trunc(a*Wr),c=Math.trunc(l*2),d=Math.trunc(c+Wr),p=e[d+As]===-1,g=p||t[c+As]<t[d+As]?c:d;o[l+As]=e[g+As],r[l+As]=t[g+As];const m=p||t[c+js]>t[d+js]?c:d;o[l+js]=e[m+js],r[l+js]=t[m+js];const y=p||t[c+Ws]<t[d+Ws]?c:d;o[l+Ws]=e[y+Ws],r[l+Ws]=t[y+Ws];const b=p||t[c+Us]>t[d+Us]?c:d;o[l+Us]=e[b+Us],r[l+Us]=t[b+Us]}return{maxRange:s,indexData:o,valueData:r}}var Xhe=1e3,Qhe=10;function TV(e,t,i,n,s,o,r){const a=e[o];if(a==null)return-1;const l=Number.isFinite(t)?Jr(a,t,i,r):Tv(o,e.length),c=tP(l,s);return o===n[c+As]||o===n[c+js]||o===n[c+Ws]||o===n[c+Us]?c:-1}function Jhe(e,t,i,n,s,o){if(t.length<Xhe)return;const[r,a]=bf(e,n);let l=dD(t,r,a,{xNeedsValueOf:s});const{indexData:c,valueData:d}=Iv(t,i,i,r,a,l,{xNeedsValueOf:s,yNeedsValueOf:o});let p=[],g=[],m=-1;for(let b=0;b<t.length;b+=1){const C=TV(t,r,a,c,l,b,s);if(C===-1)continue;const w=g.push(b)-1;C!==m&&(p.push(w),m=C)}p.push(g.length-1);const y=[{maxRange:l,metaIndices:p,indices:g}];for(;g.length>Qhe&&l>64;){({maxRange:l}=kv(c,d,l,{inPlace:!0}));const b=g;p=[],g=[],m=-1;for(const C of b){const w=TV(t,r,a,c,l,C,s);if(w===-1)continue;const x=g.push(C)-1;w!==m&&(p.push(x),m=w)}p.push(g.length-1),y.push({maxRange:l,metaIndices:p,indices:g})}return y.reverse(),y}var iP=class extends Qe{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(e){this._dirty=!1}isDirty(){return this._dirty}onChangeDetection(e){this.markDirty()}},rl=class extends iP{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};A([k,Me()],rl.prototype,"enabled",2);A([k,Me()],rl.prototype,"color",2);A([k,Me()],rl.prototype,"xOffset",2);A([k,Me()],rl.prototype,"yOffset",2);A([k,Me()],rl.prototype,"blur",2);var Xs=class extends iP{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){const{size:e,shape:t,fill:i,fillOpacity:n,stroke:s,strokeWidth:o,strokeOpacity:r,lineDash:a,lineDashOffset:l}=this;return{size:e,shape:t,fill:i,fillOpacity:n,stroke:s,strokeWidth:o,strokeOpacity:r,lineDash:a,lineDashOffset:l}}getDiameter(){return this.size+this.strokeWidth}};A([k,Me()],Xs.prototype,"enabled",2);A([k,Uo({})],Xs.prototype,"shape",2);A([k,Me()],Xs.prototype,"size",2);A([k,Uo({})],Xs.prototype,"fill",2);A([k,Me()],Xs.prototype,"fillOpacity",2);A([k,Me()],Xs.prototype,"stroke",2);A([k,Me()],Xs.prototype,"strokeWidth",2);A([k,Me()],Xs.prototype,"strokeOpacity",2);A([k],Xs.prototype,"lineDash",2);A([k],Xs.prototype,"lineDashOffset",2);A([k,Uo({})],Xs.prototype,"itemStyler",2);var r$=class extends Qe{constructor(){super(...arguments),this.enabled=!1}};A([k],r$.prototype,"enabled",2);var xc=class extends Qe{constructor(){super(...arguments),this.interaction=new r$,this.position=new _h,this.range=void 0,this.class=void 0}formatTooltip(e,t,i){const n=this.renderer==null?void 0:Zr(e,this.renderer,i);return typeof n=="string"?{type:"raw",rawHtmlString:n}:n!=null?{type:"structured",...t,...n}:{type:"structured",...t}}};A([k],xc.prototype,"enabled",2);A([k],xc.prototype,"showArrow",2);A([k],xc.prototype,"renderer",2);A([k],xc.prototype,"interaction",2);A([k],xc.prototype,"position",2);A([k],xc.prototype,"range",2);A([k],xc.prototype,"class",2);function Qh(){return new xc}var nP=class extends zn{constructor(){super(...arguments),this.segmentPath=new zn}drawPath(e){if(!this.segments||this.segments.length===0){super.drawPath(e);return}e.save();const t=new Path2D;Og(t,{x0:0,y0:0,x1:e.canvas.width,y1:e.canvas.height},!1);for(const n of this.segments)Og(t,n.clipRect);e.clip(t),super.drawPath(e),e.restore();const{segmentPath:i}=this;i.setProperties({opacity:this.opacity,visible:this.visible,lineCap:this.lineCap,lineJoin:this.lineJoin,pointerEvents:this.pointerEvents});for(const{clipRect:n,fill:s,stroke:o,...r}of this.segments){e.save(),i.path=this.path,i.setProperties(r),i.fill=this.fill==null?"none":s,i.stroke=this.stroke==null?"none":o;const a=new Path2D;Og(a,n),e.clip(a),i.drawPath(e),e.restore()}}};A([uM()],nP.prototype,"segments",2);function Og(e,{x0:t,y0:i,x1:n,y1:s},o=!0){const r=Math.min(t,n),a=Math.min(i,s),l=Math.max(t,n),c=Math.max(i,s);e.moveTo(r,a),o?(e.lineTo(l,a),e.lineTo(l,c),e.lineTo(r,c)):(e.lineTo(r,c),e.lineTo(l,c),e.lineTo(l,a)),e.closePath()}var a$=class extends hs{constructor(){super(...arguments),this.segments=[],this.scalablePath=new(gM(zn))}renderInContext(e){if(!this.visible)return;const{ctx:t}=e;if(!this.segments||this.segments?.length===0)return super.renderInContext(e);t.save();const i=new Path2D;Og(i,{x0:0,y0:0,x1:t.canvas.width,y1:t.canvas.height},!1);for(const s of this.segments)Og(i,s.clipRect);t.clip(i);for(const s of this.children())s.visible&&s.render(e);t.restore();const{scalablePath:n}=this;for(const{clipRect:s,...o}of this.segments){t.save();const r=new Path2D;Og(r,s),t.clip(r),n.setProperties(o);for(const a of this.children())!a.visible||!(a instanceof zn)||(n.path=a.path,n.setProperties({opacity:a.opacity,lineCap:a.lineCap,lineJoin:a.lineJoin,...gre(a)&&{scalingX:a.scalingX,scalingY:a.scalingY,scalingCenterX:a.scalingCenterX,scalingCenterY:a.scalingCenterY}}),n.render(e));t.restore()}}};A([uM()],a$.prototype,"segments",2);var l$=class{constructor(e,t,i){this.root=new ipe(e,t,i)}clear(e){this.root.clear(e)}addValue(e,t){const i={hitTester:e,value:t,distanceSquared:(n,s)=>e.distanceSquared(n,s)};this.root.addElem(i)}find(e,t){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(e,t,i),i.best}},epe=class{constructor(e,t,i,n){this.nw=e,this.ne=t,this.sw=i,this.se=n}addElem(e){this.nw.addElem(e),this.ne.addElem(e),this.sw.addElem(e),this.se.addElem(e)}find(e,t,i){this.nw.find(e,t,i),this.ne.find(e,t,i),this.sw.find(e,t,i),this.se.find(e,t,i)}},tpe=class{constructor(e,t,i){this.capacity=e,this.maxdepth=t,this.boundary=i??Le.NaN,this.elems=[],this.subdivisions=void 0}clear(e){this.elems.length=0,this.boundary=e,this.subdivisions=void 0}addElem(e){this.addCondition(e)&&(this.subdivisions===void 0?this.maxdepth===0||this.elems.length<this.capacity?this.elems.push(e):this.subdivide(e):this.subdivisions.addElem(e))}find(e,t,i){this.findCondition(e,t,i)&&(this.subdivisions===void 0?this.findAction(e,t,i):this.subdivisions.find(e,t,i))}subdivide(e){this.subdivisions=this.makeSubdivisions();for(const t of this.elems)this.subdivisions.addElem(t);this.subdivisions.addElem(e),this.elems.length=0}makeSubdivisions(){const{x:e,y:t,width:i,height:n}=this.boundary,{capacity:s}=this,o=this.maxdepth-1,r=i/2,a=n/2,l=new Le(e,t,r,a),c=new Le(e+r,t,r,a),d=new Le(e,t+a,r,a),p=new Le(e+r,t+a,r,a);return new epe(this.child(s,o,l),this.child(s,o,c),this.child(s,o,d),this.child(s,o,p))}},ipe=class c$ extends tpe{addCondition(t){const{x:i,y:n}=t.hitTester.midPoint;return this.boundary.containsPoint(i,n)}findCondition(t,i,n){const{best:s}=n;return s.distanceSquared!==0&&this.boundary.distanceSquared(t,i)<s.distanceSquared}findAction(t,i,n){const s=lM(t,i,this.elems,n.best.distanceSquared);s.nearest!==void 0&&s.distanceSquared<n.best.distanceSquared&&(n.best=s)}child(t,i,n){return new c$(t,i,n)}},sP=class extends BM{constructor({clipFocusBox:e,categoryKey:t,...i}){super(i),this.categoryKey=t,this.clipFocusBox=e??!0}dataCount(){return this.processedData?.dataSources?.get(this.id)?.data?.length??0}getHasData(e){const{dataModel:t,processedData:i}=this;if(!t||!i)return super.hasData;const n=t.resolveColumnById(this,e,i);for(const s of n)if(s!=null&&(typeof s!="number"||!Number.isNaN(s)))return!0;return!1}getScaleInformation({xScale:e,yScale:t}){const i=Ut.is(e),n=Ut.is(t);return{isContinuousX:i,isContinuousY:n,xScaleType:e?.type,yScaleType:t?.type}}getModulePropertyDefinitions(){const e=this.axes.x?.scale,t=this.axes.y?.scale;return this.moduleMap.mapModules(i=>i.getPropertyDefinitions(this.getScaleInformation({xScale:e,yScale:t}))).flat()}async requestDataModel(e,t,i){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:n,processedData:s}=await e.request(this.id,t??Sg.empty(),i);return this.dataModel=n,this.processedData=s,this.events.emit("data-processed",{dataModel:n,processedData:s}),{dataModel:n,processedData:s}}isProcessedDataAnimatable(){const{processedData:e,ctx:t}=this;if(!e)return!1;const i=this.getNodeData();if(i!=null&&i.length>t.animationManager.maxAnimatableItems)return!1;const n=e.reduced?.animationValidation;if(!n)return!0;const{orderedKeys:s,uniqueKeys:o}=n;return s&&o}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(e){const t=this.getNodeData();if(t===void 0||t.length===0)return;const i=this.computeFocusDatumIndex(e,t);if(i===void 0)return;const{clipFocusBox:n}=this,s=t[i],o={...e,datumIndex:i},r=this.computeFocusBounds(o);if(r!==void 0)return{bounds:r,clipFocusBox:n,datum:s,datumIndex:i}}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);return t.sort((i,n)=>i.datumIndex-n.datumIndex),t}isDatumEnabled(e,t){const{missing:i=!1,enabled:n=!0,focusable:s=!0}=e[t];return!i&&n&&s}computeFocusDatumIndex(e,t){const i=(r,a)=>{for(;r>=0&&!this.isDatumEnabled(t,r);)r+=a;return r===-1?void 0:r},n=(r,a)=>{for(;r<t.length&&!this.isDatumEnabled(t,r);)r+=a;return r===t.length?void 0:r};let s;const o=st(0,e.datumIndex,t.length-1);return e.datumIndexDelta<0?s=i(o,e.datumIndexDelta):e.datumIndexDelta>0?s=n(o,e.datumIndexDelta):s=n(o,1)??i(o,-1),s===void 0?e.datumIndexDelta===0?void 0:e.datumIndex-e.datumIndexDelta:s}dataModelPropertyIsKey(e){const{processedData:t}=this;return t?t.defs.keys.some(i=>i.id===e&&i.idsMap?.get(this.id)?.has(e)===!0):!1}keysOrValues(e){const{dataModel:t,processedData:i}=this;return!t||!i?[]:this.dataModelPropertyIsKey(e)?t.resolveKeysById(this,e,i):t.resolveColumnById(this,e,i)}sortOrder(e){const{dataModel:t,processedData:i}=this;if(!(!t||!i))return this.dataModelPropertyIsKey(e)?t.getKeySortOrder(this,e,i):t.getColumnSortOrder(this,e,i)}getCategoryKey(){return this.categoryKey}getCategoryValue(e){const{processedData:t,dataModel:i}=this,n=this.getCategoryKey();return!t||!i||!n||(t.invalidData?.get(this.id)?.[e]??!1)?void 0:this.keysOrValues(n)[e]}datumIndexForCategoryValue(e){const{processedData:t,dataModel:i}=this,n=this.getCategoryKey();if(!t||!i||!n)return;e=e.valueOf();const s=t.invalidData?.get(this.id),o=this.keysOrValues(n);for(let r=0;r<o.length;r+=1){if(s?.[r]===!0)continue;const a=o[r]?.valueOf();if(qs(e,a))return r}}},Qf={x:["xKey"],y:["yKey"]},Jf={x:["xName"],y:["yName"]},oP=class extends OM{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.yKey=n.properties.yKey}},Mc=class extends Tr{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1,this.segmentation=new Cb}};A([k],Mc.prototype,"legendItemName",2);A([k],Mc.prototype,"pickOutsideVisibleMinorAxis",2);A([k],Mc.prototype,"segmentation",2);var l0=100,Xu=class extends sP{constructor({pathsPerSeries:e=["path"],pathsZIndexSubOrderOffset:t=[],datumSelectionGarbageCollection:i=!0,animationAlwaysUpdateSelections:n=!1,segmentedDataNodes:s=!0,animationResetFns:o,propertyKeys:r,propertyNames:a,...l}){if(super({propertyKeys:r,propertyNames:a,canHaveAxes:!0,...l}),this.NodeEvent=oP,this.dataNodeGroup=this.contentGroup.appendChild(new a$({name:`${this.id}-series-dataNodes`,zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new hs({name:`${this.id}-series-labels`})),this.labelSelection=ks.select(this.labelGroup,Fo),this.highlightSelection=ks.select(this.highlightGroup,()=>this.nodeFactory()),this.annotationSelections=new Set,this.seriesBelowStackContext=void 0,this.debug=at.create(),!r||!a)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:e,pathsZIndexSubOrderOffset:t,propertyKeys:r,propertyNames:a,animationResetFns:o,animationAlwaysUpdateSelections:n,datumSelectionGarbageCollection:i,segmentedDataNodes:s},this.paths=e.map(c=>new nP({name:`${this.id}-${c}`})),this.datumSelection=ks.select(this.dataNodeGroup,()=>this.nodeFactory(),i),this.animationState=new xb("empty",{empty:{update:{target:"ready",action:c=>this.animateEmptyUpdateReady(c)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:c=>this.animateReadyHighlight(c),resize:c=>this.animateReadyResize(c),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:c=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(c):this.animateWaitingUpdateReady(c)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:c=>this.resetAllAnimation(c),reset:"empty"},clearing:{update:{target:"empty",action:c=>this.animateClearingUpdateEmpty(c)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){return this.contextNodeData?.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),this.attachPaths(this.paths)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.detachPaths(this.paths)}updatedDomains(){this.animationState.transition("updateData")}attachPaths(e){for(const t of e)this.contentGroup.appendChild(t)}detachPaths(e){for(const t of e)t.remove()}renderToOffscreenCanvas(){const e=this.getNodeData();return e!=null&&e.length>l0}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"?this.animationState.transition("skip"):e==="disabled"&&this.animationState.transition("disable")}addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>this.onLegendItemClick(e)),this.ctx.eventsHub.on("legend:item-double-click",e=>this.onLegendItemDoubleClick(e)))}destroy(){super.destroy(),this._contextNodeData=void 0}isSeriesHighlighted(e){const{series:t,legendItemName:i}=e??{},{legendItemName:n}=this.properties;return t===this||n!=null&&n===i}strokewidthChange(){const e=("strokeWidth"in this.properties&&this.properties.strokeWidth)??0,t=this.properties.highlight.highlightedSeries.strokeWidth??e,i=this.properties.highlight.highlightedItem?.strokeWidth??e;return e>i||t>i}update({seriesRect:e}){const{_contextNodeData:t}=this,i=this.checkResize(e),n=this.updateHighlightSelection();this.contentGroup.batchedUpdate(()=>{const o=this.updateSelections(),r=this.contextNodeData?.segments;this.opts.segmentedDataNodes?this.dataNodeGroup.segments=r??this.dataNodeGroup.segments:this.dataNodeGroup.segments=void 0,this.updateNodes(n,i||o)});const s=this.getAnimationData(e,t);s&&(i&&this.animationState.transition("resize",s),this.animationState.transition("update",s),this.processedDataUpdated=!1)}createStackContext(){}updateSelections(){var e;const t=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!this.visible&&t)return!1;const{nodeDataRefresh:i}=this;if(!i&&!this.isPathOrSelectionDirty())return!1;if(i){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();const n=this.isProcessedDataAnimatable();this._contextNodeData&&((e=this._contextNodeData).animationValid??(e.animationValid=n));const{dataModel:s,processedData:o}=this;s!==void 0&&o!==void 0&&this.events.emit("data-update",{dataModel:s,processedData:o}),this.updateSeriesSelections()}return i}updateSeriesSelections(){const{datumSelection:e,labelSelection:t,paths:i}=this,n=this._contextNodeData;if(!n)return;const{nodeData:s,labelData:o,itemId:r}=n;this.updatePaths({itemId:r,contextData:n,paths:i}),this.datumSelection=this.updateDatumSelection({nodeData:s,datumSelection:e}),this.labelGroup.batchedUpdate(()=>{this.labelSelection=this.updateLabelSelection({labelData:o,labelSelection:t})??t})}getShapeFillBBox(){const{axes:e}=this,t=e.x,i=e.y,[n,s]=Gn(t?.range??[0,1]),[o,r]=Gn(i?.range??[0,1]),a=this.getSeriesDomain("x"),l=[t?.scale.convert(a.at(0)),t?.scale.convert(a.at(-1))],c=this.getSeriesDomain("y"),d=[i?.scale.convert(c.at(0)),i?.scale.convert(c.at(-1))],[p,g]=Gn(l),[m,y]=Gn(d);return{axis:new Le(n,o,s-n,r-o),series:new Le(p,m,g-p,y-m)}}updateNodes(e,t){const{highlightSelection:i,datumSelection:n}=this,s=!this.ctx.animationManager.isSkipped(),o=this.visible&&this._contextNodeData!=null;this.contentGroup.visible=s||o,this.highlightGroup.visible=(s||o)&&e,this.updateDatumStyles({datumSelection:i,isHighlight:!0});const r=this.ctx.chartService.highlight?.drawingMode??"overlay";this.updateDatumNodes({datumSelection:i,isHighlight:!0,drawingMode:r}),this.animationState.transition("highlight",i);const{dataNodeGroup:a,labelSelection:l,paths:c,labelGroup:d}=this,{itemId:p}=this.contextNodeData??{};if(this.updatePathNodes({itemId:p,paths:c,visible:o,animationEnabled:s}),a.visible=s||o,d.visible=o,!a.visible)return;this.hasItemStylers()&&this.updateDatumStyles({datumSelection:n,isHighlight:!1});const g=this.strokewidthChange()||this.hasChangesOnHighlight;(t||g)&&(this.updateDatumNodes({datumSelection:n,isHighlight:!1,drawingMode:"overlay"}),this.usesPlacedLabels||this.labelGroup.batchedUpdate(()=>{this.updateLabelNodes({labelSelection:l,isHighlight:!1})}))}getHighlightData(e,t){return t?[{...t}]:void 0}updateHighlightSelection(){const{highlightSelection:e,_contextNodeData:t}=this;if(!t)return!1;const i=this.ctx.highlightManager?.getActiveHighlight(),s=this.isSeriesHighlighted(i)&&i?.datum?i:void 0;if(s==null)return!1;const{nodeData:o}=t,r=this.getHighlightData(o,s);return this.highlightSelection=this.updateHighlightSelectionItem({items:r,highlightSelection:e}),!0}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:e}of this.datumSelection)e.datum.missing!==!0&&(yield e)}getQuadTree(){if(this.quadtree===void 0){const{width:e,height:t}=this.ctx.scene.canvas,i=new Le(0,0,e,t);this.quadtree=new l$(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(e){}pickNodeDataExactShape(e){const{x:t,y:i}=e,{dataNodeGroup:n}=this,s=n.pickNodes(t,i).filter(o=>o.datum.missing!==!0);if(s.length!==0)return s.map(r=>r.datum)}pickModulesExactShape(e){for(const t of this.moduleMap.modules()){const{datum:i}=t.pickNodeExact(e)??{};if(i!=null&&i?.missing!==!0)return[i]}}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);return t.length!==0?t:this.pickNodeDataExactShape(e)??this.pickModulesExactShape(e)??[]}pickNodeDataClosestDatum(e){const{x:t,y:i}=e,{axes:n,_contextNodeData:s}=this;if(!s)return;const o=n.x,r=n.y,a={x:t,y:i};let l=1/0,c;for(const d of s.nodeData){const{point:{x:p=Number.NaN,y:g=Number.NaN}={}}=d;if(Number.isNaN(p)||Number.isNaN(g)||!(o?.inRange(p)&&r?.inRange(g)))continue;const y=Math.max((a.x-p)**2+(a.y-g)**2,0);y<l&&(l=y,c=d)}if(l!=null)return{datum:c,distance:Math.sqrt(l)}}pickModulesClosestDatum(e){let t=1/0,i;for(const n of this.moduleMap.modules()){const s=n.pickNodeNearest(e);s!==void 0&&s.distanceSquared<t&&(t=s.distanceSquared,i=s.datum)}if(t!=null)return{datum:i,distance:Math.sqrt(t)}}pickNodeClosestDatum(e){let t=1/0,i;const n=this.pickNodeDataClosestDatum(e);n!=null&&n.distance<t&&(t=n.distance,i=n.datum);const s=this.pickModulesClosestDatum(e);if(s!=null&&s.distance<t&&(t=s.distance,i=s.datum),i){const o=Math.max(t-(i.point?.size??0)/2,0);return{datum:i,distance:o}}}pickNodeMainAxisFirst(e,t){const{x:i,y:n}=e,{axes:s,_contextNodeData:o}=this,{pickOutsideVisibleMinorAxis:r}=this.properties;if(!o)return;const a=s.x,l=s.y;if(a==null||l==null)return;const c=[a,l].filter(y=>y.isCategoryLike()).map(y=>y.direction);if(t&&c.length===0)return;const[d="x"]=c,p=[i,n];d!=="x"&&p.reverse();const g=[1/0,1/0];let m;for(const y of o.nodeData){const{x:b=Number.NaN,y:C=Number.NaN}=y.point??y.midPoint??{};if(Number.isNaN(b)||Number.isNaN(C)||y.missing===!0)continue;const w=[a?.inRange(b,1),l?.inRange(C,1)];if(d!=="x"&&w.reverse(),!w[0]||!r&&!w[1])continue;const x=[b,C];d!=="x"&&x.reverse();let M=!0;for(let E=0;E<x.length;E++){const I=Math.abs(x[E]-p[E]);if(I>g[E]){M=!1;break}else I<g[E]&&(g[E]=I,g.fill(1/0,E+1,g.length))}M&&(m=y)}if(m){let y=Math.max(g[0]**2+g[1]**2-(m.point?.size??0),0);for(const b of this.moduleMap.modules()){const C=b.pickNodeMainAxisFirst(e,d);if(C!==void 0&&C.distanceSquared<y){m=C.datum,y=C.distanceSquared;break}}return{datum:m,distance:Math.sqrt(y)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}visibleRangeIndices(e,t,i,n){let s;if(n==null){const{processedData:c,dataModel:d}=this;s=d.getColumnSortOrder(this,e,c)??1}else s=n.sortOrder;const o=this.keysOrValues(e),r=0,[a,l]=bv(s,i?.length??o.length,t,c=>{const d=i?.[c]??c;return this.xCoordinateRange(o[d],r,d)});return a<l?[a,l]:[l,a]}domainForVisibleRange(e,t,i,n,s){const{processedData:o,dataModel:r}=this,[a,l]=n,c=this.keysOrValues(i),d=this.sortOrder(i);if(d!=null){const y=this.visibleRangeIndices(i,n,s,{sortOrder:d});return r.getDomainBetweenRange(this,t,y,o)}const p=t.map(y=>this.keysOrValues(y));let g=1/0,m=-1/0;for(const[y,b]of c.entries()){const[C,w]=this.xCoordinateRange(b,0,y);if(!(w<a||C>l))for(let x=0;x<t.length;x++){const M=p[x][y];g=Math.min(g,M),m=Math.max(m,M)}}return g>m?[Number.NaN,Number.NaN]:[g,m]}domainForClippedRange(e,t,i){const{processedData:n,dataModel:s,axes:o}=this,a=npe(o[e==="x"?"y":"x"]);if(!a)return t.flatMap(y=>s.getDomain(this,y,"value",n));const l=this.keysOrValues(i),c=s.getColumnSortOrder(this,i,n);if(c!=null){const y=spe(c,l.length,a,b=>l[b]);return s.getDomainBetweenRange(this,t,y,n)}const d=t.map(y=>this.keysOrValues(y)),p=a[0].valueOf(),g=a[1].valueOf(),m=[];for(const[y,b]of l.entries()){const C=b.valueOf();if(C<p||C>g)continue;const w=d.map(x=>x[y]);C>=p&&m.push(...w),C<=g&&m.push(...w)}return m}zoomFittingVisibleItems(e,t,i,n,s){const{dataModel:o,processedData:r}=this;if(!o||!r)return;const a=this.axes.x;if(n!=null)return;const l=this.sortOrder(e);if(l==null)return;const c=this.keysOrValues(e);if(s>c.length)return{x:[0,1],y:void 0};const d=a.scale,p=d.range;d.range=[0,1];let[g,m]=this.visibleRangeIndices(e,i,void 0,{sortOrder:l});m-=1;const y=0;this.xCoordinateRange(c[g],y,g)[0]<i[0]&&(g+=1),this.xCoordinateRange(c[m],y,m)[1]>i[1]&&(m-=1);let b;if(Math.abs(m-g)>=s-1)b=i;else{const C=(i[0]+i[1])/2;for(;Math.abs(m-g)<s-1&&(g>0||m<c.length-1);)if(g===0)m+=1;else if(m===c.length-1)g-=1;else{const M=this.xCoordinateRange(c[g-1],y,g-1)[0],E=this.xCoordinateRange(c[m+1],y,m+1)[1];Math.abs(M-C)<Math.abs(E-C)?g-=1:m+=1}const w=this.xCoordinateRange(c[g],y,g)[0],x=this.xCoordinateRange(c[m],y,m)[1];b=[Math.min(i[0],w),Math.max(i[1],x)]}return d.range=p,{x:b,y:void 0}}countVisibleItems(e,t,i,n,s){const{dataModel:o,processedData:r}=this;if(!o||!r)return 1/0;const a=this.keysOrValues(e),l=t.map(T=>o.resolveColumnById(this,T,r)),c=this.shouldFlipXY(),d=c?this.axes.y:this.axes.x,p=c?this.axes.x:this.axes.y,g=c?n??[0,1]:i,m=c?i:n??[0,1];if(n==null){const T=this.sortOrder(e);if(T!=null){const P=d.scale,O=P.range;P.range=[0,1];const G=this.keysOrValues(e);let[B,z]=this.visibleRangeIndices(e,g,void 0,{sortOrder:T});z-=1;const j=0;this.xCoordinateRange(G[B],j,B)[0]<g[0]&&(B+=1),this.xCoordinateRange(G[z],j,z)[1]>g[1]&&(z-=1);const X=Math.abs(z-B)+1;return P.range=O,X}}const y=(T,P,O)=>T[0]+(O-P[0])/(P[1]-P[0])*(T[1]-T[0]),b=d.range.toSorted(),C=p.range.toSorted(),w=y(b,d.visibleRange,g[0]),x=y(b,d.visibleRange,g[1]),M=y(C,p.visibleRange,Math.min(...m)),E=y(C,p.visibleRange,Math.max(...m)),I=Math.round((g[0]+(g[1]-g[0])/2)*a.length),N=0;return lU(0,a.length-1,I,s,T=>{const[P,O]=this.xCoordinateRange(a[T],N,T),[G,B]=this.yCoordinateRange(l.map(z=>z[T]),N,T);return!Kt(P)||!Kt(O)||!Kt(G)||!Kt(B)?!1:P>=w&&O<=x&&G>=M&&B<=E})}minTimeInterval(){let e;try{e=this.keysOrValues("xValue")}catch{}if(e==null||e.length>1e3)return;let t=1/0,i=e[0],n;for(let s=1;s<e.length;s++){const o=e[s];if(o!=null&&i!=null){const r=o.valueOf()-i.valueOf(),a=Math.sign(r);if(a===0)continue;if(n!==void 0&&a!==n)return;t=Math.min(t,Math.abs(r)),n=a}i=o}if(Number.isFinite(t))return t}updateHighlightSelectionItem(e){const{items:t,highlightSelection:i}=e,n=t??[];return this.updateDatumSelection({nodeData:n,datumSelection:i})}updateDatumSelection(e){return e.datumSelection}updateDatumNodes(e){}updateDatumStyles(e){}updatePaths(e){for(const t of e.paths)t.visible=!1}updatePathNodes(e){const{paths:t,visible:i}=e;for(const n of t)n.visible=i}resetPathAnimation(e){const{path:t}=this.opts?.animationResetFns??{};if(t)for(const i of e.paths)cs([i],t)}resetDatumAnimation(e){const{datum:t}=this.opts?.animationResetFns??{};t&&cs([e.datumSelection],t)}resetLabelAnimation(e){const{label:t}=this.opts?.animationResetFns??{};t&&cs([e.labelSelection],t)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(e),this.resetDatumAnimation(e),this.resetLabelAnimation(e),e.contextData?.animationValid===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){const{datum:t}=this.opts?.animationResetFns??{};t&&cs([e],t)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(e,t){const{_contextNodeData:i}=this;return i?{datumSelection:this.datumSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:t,paths:this.paths,seriesRect:e}:void 0}updateLabelSelection(e){return e.labelSelection}getScaling(e){if(e instanceof zL){const{range:t,domain:i}=e;return{type:"log",convert:n=>e.convert(n),domain:[i[0],i[1]],range:[t[0],t[1]]}}else if(e instanceof Ut){const{range:t,domain:i}=e;return{type:"continuous",domain:[i[0],i[1]],range:[t[0],t[1]]}}else if(e instanceof mc)return{type:"category",domain:e instanceof mu?e.bands:e.domain,inset:e.inset,step:e.step}}calculateScaling(){const e={};for(const t of Object.values(mM)){const i=this.axes[t];if(!i)continue;const n=this.getScaling(i.scale);n!=null&&(e[t]=n)}return e}};function npe(e){let t,i;if((e instanceof Yo||e instanceof Sc)&&({min:t,max:i}=e),!(t==null&&i==null))return t??(t=-1/0),i??(i=1/0),[t,i]}function spe(e,t,i,n){const s=i[0].valueOf(),o=i[1].valueOf();let r=hv(0,t-1,l=>{const c=e===1?l:t-l,d=n(c)?.valueOf();return!Number.isFinite(d)||d>=s}),a=jd(0,t-1,l=>{const c=e===1?l:t-l,d=n(c)?.valueOf();return!Number.isFinite(d)||d<=o});return r==null||a==null?[0,0]:(e===-1&&([r,a]=[t-a,t-r]),r=Math.max(r,0),a=Math.min(a+1,t),[r,a])}var em=class extends Qe{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};A([k],em.prototype,"type",2);A([k],em.prototype,"tension",2);A([k],em.prototype,"position",2);var yn=class extends Mc{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new em,this.shadow=new rl,this.marker=new Xs,this.label=new Yi,this.tooltip=Qh(),this.connectMissingData=!1}};A([k],yn.prototype,"xKey",2);A([k],yn.prototype,"xName",2);A([k],yn.prototype,"yKey",2);A([k],yn.prototype,"yName",2);A([k],yn.prototype,"yFilterKey",2);A([k],yn.prototype,"normalizedTo",2);A([k],yn.prototype,"fill",2);A([k],yn.prototype,"fillOpacity",2);A([k],yn.prototype,"stroke",2);A([k],yn.prototype,"strokeWidth",2);A([k],yn.prototype,"strokeOpacity",2);A([k],yn.prototype,"lineDash",2);A([k],yn.prototype,"lineDashOffset",2);A([k],yn.prototype,"interpolation",2);A([k],yn.prototype,"styler",2);A([k],yn.prototype,"shadow",2);A([k],yn.prototype,"marker",2);A([k],yn.prototype,"label",2);A([k],yn.prototype,"tooltip",2);A([k],yn.prototype,"connectMissingData",2);function Wo(e){switch(e.type){case"linear":case"step":case"multi-line":return[{x:e.x0,y:e.y0},{x:e.x1,y:e.y1}];case"cubic":return[{x:e.cp0x,y:e.cp0y},{x:e.cp3x,y:e.cp3y}]}}function ope(e){const t=Wo(e);return t[0].x>t[1].x&&t.reverse(),t}function u$(e,t){const{x:i,y:n}=t;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:i,y0:n,x1:i,y1:n};case"step":return{type:"step",moveTo:e.moveTo,x0:i,y0:n,x1:i,y1:n,stepX:i};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:i,cp0y:n,cp1x:i,cp1y:n,cp2x:i,cp2y:n,cp3x:i,cp3y:n};case"multi-line":return{type:"multi-line",moveTo:e.moveTo,x0:i,y0:n,x1:i,y1:n,midPoints:e.midPoints.map(()=>({x:i,y:n}))}}}function Cf(e,t,i){const[n,s]=Wo(e),o=s.x===n.x?0:(i.x-t.x)/(s.x-n.x),r=s.y===n.y?0:(i.y-t.y)/(s.y-n.y);switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:t.x,cp0y:t.y,cp1x:i.x-(e.cp2x-n.x)*o,cp1y:i.y-(e.cp2y-n.y)*r,cp2x:i.x-(e.cp1x-n.x)*o,cp2y:i.y-(e.cp1y-n.y)*r,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y,stepX:i.x-(e.stepX-n.x)*o};case"multi-line":return{type:"multi-line",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y,midPoints:e.midPoints.map(a=>({x:t.x+(a.x-n.x)*o,y:t.y+(a.y-n.y)*r}))}}}function rP(e,t,i){const{moveTo:n}=e,[s,o]=ope(e),{x:r,y:a}=s,{x:l,y:c}=o;if(i<r)return Cf(e,s,s);if(t>l)return Cf(e,o,o);switch(e.type){case"linear":{const d=a===c?void 0:(c-a)/(l-r),p=d==null?a:d*(t-r)+a,g=d==null?a:d*(i-r)+a;return{type:"linear",moveTo:n,x0:t,y0:p,x1:i,y1:g}}case"step":if(i<=e.stepX){const d=e.y0;return{type:"step",moveTo:n,x0:t,y0:d,x1:i,y1:d,stepX:i}}else if(t>=e.stepX){const d=e.y1;return{type:"step",moveTo:n,x0:t,y0:d,x1:i,y1:d,stepX:t}}else{const{y0:d,y1:p,stepX:g}=e;return{type:"step",moveTo:n,x0:t,y0:d,x1:i,y1:p,stepX:g}}case"cubic":{const d=Wx(e.cp0x,e.cp1x,e.cp2x,e.cp3x,t);let[p,g]=fv(e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,d);const m=Wx(g[0].x,g[1].x,g[2].x,g[3].x,i);return[g,p]=fv(g[0].x,g[0].y,g[1].x,g[1].y,g[2].x,g[2].y,g[3].x,g[3].y,m),{type:"cubic",moveTo:n,cp0x:g[0].x,cp0y:g[0].y,cp1x:g[1].x,cp1y:g[1].y,cp2x:g[2].x,cp2y:g[2].y,cp3x:g[3].x,cp3y:g[3].y}}case"multi-line":{const{midPoints:d}=e,p=d.findLastIndex(N=>N.x<=t);let g=d.findIndex(N=>N.x>=i);g===-1&&(g=d.length);const m=p>=0?d[p]:void 0,y=m?.x??r,b=m?.y??a,C=g<d.length?d[g]:void 0,w=C?.x??l,x=C?.y??c,M=b===x?void 0:(x-b)/(w-y),E=M==null?b:M*(y-r)+b,I=M==null?b:M*(w-r)+b;return{type:"multi-line",moveTo:n,x0:t,y0:E,x1:i,y1:I,midPoints:d.slice(Math.max(p,0),g)}}}}var d$=(e=>(e[e.MoveTo=0]="MoveTo",e[e.LineTo=1]="LineTo",e[e.Skip=2]="Skip",e))(d$||{});function h$(e){const t=[];let i=0,n=Number.NaN,s=Number.NaN;for(const{x:o,y:r}of e){if(i>0){const a=i===1;t.push({type:"linear",moveTo:a,x0:n,y0:s,x1:o,y1:r})}i+=1,n=o,s=r}return t}var rpe={start:0,middle:.5,end:1};function p$(e,t){const i=[];let n=0,s=Number.NaN,o=Number.NaN;const r=typeof t=="number"?t:rpe[t];for(const{x:a,y:l}of e){if(n>0){const c=n===1,d=s+(a-s)*r;i.push({type:"step",moveTo:c,x0:s,y0:o,x1:a,y1:l,stepX:d})}n+=1,s=a,o=l}return i}var tS=.05;function g$(e,t){const i=Array.isArray(e)?e:Array.from(e);if(i.length<=1)return[];const n=i.map((o,r)=>{const a=r===0?o:i[r-1],l=r===i.length-1?o:i[r+1],c=r===0||r===i.length-1;if(Math.sign(a.y-o.y)===Math.sign(l.y-o.y))return 0;if(!c){const d=Math.abs(a.y-l.y),p=Math.abs(o.y-a.y)/d,g=Math.abs(o.y-l.y)/d;if(p<=tS||1-p<=tS||g<=tS||1-g<=tS)return 0}return(l.y-a.y)/(l.x-a.x)});n[1]===0&&(n[0]*=2),n.at(-2)===0&&(n[n.length-1]*=2);const s=[];for(let o=1;o<i.length;o+=1){const r=i[o-1],a=n[o-1],l=i[o],c=n[o],d=l.x-r.x,p=l.y-r.y;let g=d*t/3,m=d*a*t/3,y=d*t/3,b=d*c*t/3;c===0&&Math.abs(m)>Math.abs(p)&&(g*=Math.abs(p/m),m=Math.sign(m)*Math.abs(p)),a===0&&Math.abs(b)>Math.abs(p)&&(y*=Math.abs(p/b),b=Math.sign(b)*Math.abs(p)),s.push({type:"cubic",moveTo:o===1,cp0x:r.x,cp0y:r.y,cp1x:r.x+g,cp1y:r.y+m,cp2x:l.x-y,cp2y:l.y-b,cp3x:l.x,cp3y:l.y})}return s}function Dn(e,t,i){return(t-e)*i+e}function IV(e,t){const{x0:i,y0:n,x1:s,y1:o}=e,a=(o-n)/(s-i)*(t-i)+n;return{leftCp1x:i,leftCp1y:n,leftCp2x:t,leftCp2y:a,stepX:t,stepY0:a,stepY1:a,rightCp1x:t,rightCp1y:a,rightCp2x:s,rightCp2y:o}}function ape(e,t){const{cp0x:i,cp0y:n,cp1x:s,cp1y:o,cp2x:r,cp2y:a,cp3x:l,cp3y:c}=e,d=Wx(i,s,r,l,t),[p,g]=fv(i,n,s,o,r,a,l,c,d),m=p[3].y;return{leftCp1x:p[1].x,leftCp1y:p[1].y,leftCp2x:p[2].x,leftCp2y:p[2].y,stepX:t,stepY0:m,stepY1:m,rightCp1x:g[1].x,rightCp1y:g[1].y,rightCp2x:g[2].x,rightCp2y:g[2].y}}function lpe(e){const{x0:t,y0:i,x1:n,y1:s,stepX:o}=e;return{leftCp1x:(t+o)/2,leftCp1y:i,leftCp2x:(t+o)/2,leftCp2y:i,stepX:o,stepY0:i,stepY1:s,rightCp1x:(o+n)/2,rightCp1y:s,rightCp2x:(o+n)/2,rightCp2y:s}}function kV(e,t){return e.type==="linear"?IV(e,t):e.type==="cubic"?ape(e,t):e.type==="step"?lpe(e):IV(e,t)}function f$(e,t,i,n,s,o,r){switch(t){case 0:r?e.moveTo(s,o):e.moveTo(i,n);break;case 1:r?e.lineTo(s,o):e.lineTo(i,n);break}}function m$(e,t,i,n,s,o){o?e.lineTo(t,i):e.lineTo(n,s)}function y$(e,t,i,n,s,o,r,a,l,c){c?e.cubicCurveTo(o,r,n,s,t,i):e.cubicCurveTo(n,s,o,r,a,l)}function v$(e,t,i,n,s,o,r){r?(e.lineTo(o,s),e.lineTo(o,i),e.lineTo(t,i)):(e.lineTo(o,i),e.lineTo(o,s),e.lineTo(n,s))}function cpe(e,t,i,n,s,o,r){if(r){for(let a=o.length-1;a>=0;a--){const{x:l,y:c}=o[a];e.lineTo(l,c)}e.lineTo(t,i)}else{for(const{x:a,y:l}of o)e.lineTo(a,l);e.lineTo(n,s)}}function Iy(e,t,i,n){const[s,o]=Wo(t);switch(f$(e,i,s.x,s.y,o.x,o.y,n),t.type){case"linear":m$(e,t.x0,t.y0,t.x1,t.y1,n);break;case"cubic":y$(e,t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,n);break;case"step":v$(e,t.x0,t.y0,t.x1,t.y1,t.stepX,n);break;case"multi-line":cpe(e,t.x0,t.y0,t.x1,t.y1,t.midPoints,n);break}}function b$(e,t,i){const[n,s]=Wo(e),[o,r]=Wo(t),a=Dn(n.x,o.x,i),l=Dn(n.y,o.y,i),c=Dn(s.x,r.x,i),d=Dn(s.y,r.y,i);return[{x:a,y:l},{x:c,y:d}]}function tk(e,t,i,n,s,o){const[{x:r,y:a},{x:l,y:c}]=b$(t,i,n);if(f$(e,s,r,a,l,c,o),t.type==="cubic"&&i.type==="cubic"){const d=Dn(t.cp1x,i.cp1x,n),p=Dn(t.cp1y,i.cp1y,n),g=Dn(t.cp2x,i.cp2x,n),m=Dn(t.cp2y,i.cp2y,n);y$(e,r,a,d,p,g,m,l,c,o)}else if(t.type==="step"&&i.type==="step"){const d=Dn(t.stepX,i.stepX,n);v$(e,r,a,l,c,d,o)}else if(t.type==="linear"&&i.type==="linear")m$(e,r,a,l,c,o);else{let d;t.type==="step"?d=t.stepX:i.type==="step"?d=i.stepX:d=(r+l)/2;const p=kV(t,d),g=kV(i,d),m=Dn(p.leftCp1x,g.leftCp1x,n),y=Dn(p.leftCp1y,g.leftCp1y,n),b=Dn(p.leftCp2x,g.leftCp2x,n),C=Dn(p.leftCp2y,g.leftCp2y,n),w=Dn(p.stepX,g.stepX,n),x=Dn(p.stepY0,g.stepY0,n),M=Dn(p.stepY1,g.stepY1,n),E=Dn(p.rightCp1x,g.rightCp1x,n),I=Dn(p.rightCp1y,g.rightCp1y,n),N=Dn(p.rightCp2x,g.rightCp2x,n),T=Dn(p.rightCp2y,g.rightCp2y,n);o?(e.cubicCurveTo(N,T,E,I,w,M),e.lineTo(w,x),e.cubicCurveTo(b,C,m,y,r,a)):(e.cubicCurveTo(m,y,b,C,w,x),e.lineTo(w,M),e.cubicCurveTo(E,I,N,T,l,c))}}var upe=1e3,C$=(e=>(e[e.Zero=0]="Zero",e[e.Split=1]="Split",e))(C$||{});function dpe(e,t){return e==null||t==null||typeof e!="object"||typeof t!="object"?!1:"id"in e&&"id"in t?e.id===t.id:e.toString()===t.toString()}function Ps(e){return kI(e).valueOf()}function $n(e,t){if(!t)return Number.NaN;if(e instanceof Date&&(e=e.getTime()),t.type==="continuous"&&typeof e=="number")return(e-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0];if(t.type==="log"&&typeof e=="number")return t.convert(e);if(t.type!=="category")return Number.NaN;const i=Ps(e);let n=t.domain.findIndex(s=>Ps(s)===i);return n===-1&&(n=t.domain.findIndex(s=>dpe(e,s))),n>=0?t.inset+t.step*n:Number.NaN}function LV({data:e},t){return e.map((i,n)=>({xValue0Index:t.indexOf(Ps(i.xValue0)),xValue1Index:t.indexOf(Ps(i.xValue1)),datumIndex:n}))}function PV(e){return Object.values(e.scales).every(t=>t.type==="category"?t.domain.length<upe:!0)}function hpe(e,t){const i=t.scales.x,n=e.scales.x;if(i?.type!=="category"||n?.type!=="category")return!0;let s=-1/0;for(const o of i.domain){const r=$n(o,n);if(Number.isFinite(r)){if(r<s)return!1;s=r}}return!0}function ppe(e,t){let i=-1/0;for(const n of e){const s=$n(n.value,t.scales.x);if(Number.isFinite(s)){if(s<i)return!1;i=s}}return!0}function gpe(e,t){const i=new Map;for(const{xValue0:d,xValue1:p}of e.data){const g=Ps(d),m=Ps(p);i.set(g,d).set(m,p)}const n=Array.from(i,([d,p])=>({axisValue:d,value:p}));n.sort((d,p)=>$n(d.value,e.scales.x)-$n(p.value,e.scales.x));const s=[];for(const{xValue0:d,xValue1:p}of t.data){const g=Ps(d),m=Ps(p);i.has(g)||(i.set(g,d),s.push({axisValue:g,value:d})),i.has(m)||(i.set(m,p),s.push({axisValue:m,value:p}))}s.sort((d,p)=>$n(d.value,t.scales.x)-$n(p.value,t.scales.x));const o=n;let r=0;for(const d of s){for(let p=o.length-1;p>=r;p-=1){const g=$n(d.value,t.scales.x),m=$n(o[p].value,t.scales.x);if(g>m){r=p+1;break}}o.splice(r,0,d),r+=1}if(!ppe(o,t))return;const a=o.map(d=>d.axisValue),l=LV(t,a),c=LV(e,a);return{axisValues:a,oldDataAxisIndices:l,newDataAxisIndices:c}}function NV(e,t,i,n,s){if(s.xValue1Index===s.xValue0Index+1)return e;const o=Wo(e);let r,a;if(t.scales.x?.type==="category"){const l=(o[1].x-o[0].x)/(s.xValue1Index-s.xValue0Index);r=o[0].x+(n-s.xValue0Index)*l,a=r+l}else{const l=i[n],c=i[n+1];r=$n(l,t.scales.x),a=$n(c,t.scales.x)}return rP(e,r,a)}function w$(e,t){const[i,n]=Wo(e),s=$n(0,t.scales.y);return Cf(e,{x:i.x,y:s},{x:n.x,y:s})}function S$(e){const[t,i]=Wo(e);return u$(e,{x:(t.x+i.x)/2,y:(t.y+i.y)/2})}function x$(e,t,i,n,s,o){let r,a;if(s.xValue0Index>=o.xValue1Index){const p=n.findLast(m=>m.xValue1Index<=o.xValue1Index)?.datumIndex,g=p==null?void 0:i.data[p];r=g?.xValue1,a=g?.yValue1}else if(s.xValue0Index<=o.xValue0Index){const p=n.find(m=>m.xValue0Index>=o.xValue0Index)?.datumIndex,g=p==null?void 0:i.data[p];r=g?.xValue0,a=g?.yValue0}if(r==null||a==null)switch(t){case 0:return w$(e,i);case 1:return S$(e)}const l=$n(r,i.scales.x),c=$n(a,i.scales.y),d={x:l,y:c};return Cf(e,d,d)}function aP(e,t){if(t==null)return;const i=Ps(e.xValue0),n=Ps(e.xValue1);return t.find(s=>Ps(s.xValue0)===i&&Ps(s.xValue1)===n)?.span}function FV(e,t,i,n,s,o,r){const a=e.data[n.datumIndex],l=a.span,c=aP(a,s);if(c==null){const d=x$(l,t,e,i,n,o);r.added.push({from:d,to:l})}else r.removed.push({from:c,to:c}),r.moved.push({from:c,to:l}),r.added.push({from:l,to:l})}function OV(e,t,i,n,s,o,r){const a=e.data[n.datumIndex],l=a.span,c=aP(a,s);if(c==null){const d=x$(l,t,e,i,n,o);r.removed.push({from:l,to:d})}else r.removed.push({from:l,to:l}),r.moved.push({from:l,to:c}),r.added.push({from:c,to:c})}function BV(e,t,i,n,s){const o=n.scales.x,r=t[s.xValue0Index],a=t[s.xValue1Index];let l,c;if(o?.type==="continuous"||o?.type==="log"?(l=i.data.findLast(w=>Ps(w.xValue0)<=r),c=i.data.find(w=>Ps(w.xValue1)>=a)):(l=i.data.find(w=>Ps(w.xValue0)===r),c=i.data.find(w=>Ps(w.xValue1)===a)),l==null||c==null)return;const[{x:d},{x:p}]=Wo(e),g=$n(l.xValue0,i.scales.x),m=$n(l.yValue0,i.scales.y),y=$n(c.xValue1,i.scales.x),b=$n(c.yValue1,i.scales.y);let C=n.data[s.datumIndex].span;return C=Cf(C,{x:g,y:m},{x:y,y:b}),C=rP(C,d,p),C}function fpe(e,t,i,n,s,o,r,a,l){const c=s+1,d=r.find(M=>M.xValue0Index<=s&&M.xValue1Index>=c),p=o.find(M=>M.xValue0Index<=s&&M.xValue1Index>=c),g=t.zeroData,m=e.zeroData;if(d==null&&p!=null){FV(e,i,o,p,g,a,l);return}else if(d!=null&&p==null){OV(t,i,r,d,m,a,l);return}else if(d==null||p==null)return;let y;d.xValue0Index===p.xValue0Index&&d.xValue1Index===p.xValue1Index?y=0:d.xValue0Index<=p.xValue0Index&&d.xValue1Index>=p.xValue1Index?y=-1:d.xValue0Index>=p.xValue0Index&&d.xValue1Index<=p.xValue1Index?y=1:y=0;const b=t.data[d.datumIndex],C=NV(b.span,t,n,s,d),w=e.data[p.datumIndex],x=NV(w.span,e,n,s,p);if(y===1){const M=BV(C,n,t,e,p);M==null?OV(t,i,r,d,m,a,l):(l.removed.push({from:C,to:M}),l.moved.push({from:M,to:x}),l.added.push({from:x,to:x}))}else if(y===-1){const M=BV(x,n,e,t,d);M==null?FV(e,i,o,p,g,a,l):(l.removed.push({from:C,to:C}),l.moved.push({from:C,to:M}),l.added.push({from:M,to:x}))}else l.removed.push({from:C,to:C}),l.moved.push({from:C,to:x}),l.added.push({from:x,to:x})}function mpe(e,t,i,n){const s={removed:[],moved:[],added:[]},{axisValues:o,oldDataAxisIndices:r,newDataAxisIndices:a}=e,l={xValue0Index:Math.max(r.at(0)?.xValue0Index??-1/0,a.at(0)?.xValue0Index??-1/0),xValue1Index:Math.min(r.at(-1)?.xValue1Index??1/0,a.at(-1)?.xValue1Index??1/0)};for(let c=0;c<o.length-1;c+=1)fpe(t,i,n,o,c,a,r,l,s);return s}function ype(e,t){const i=[],n=[],s=[];for(let o=0;o<t.data.length;o+=1){const r=t.data[o].span,a=e.data[o].span;i.push({from:r,to:r}),n.push({from:r,to:a}),s.push({from:a,to:a})}return{removed:i,moved:n,added:s}}function GV(e,t,i){const{span:n}=t;switch(i){case 0:return aP(t,e.zeroData)??w$(n,e);case 1:return S$(n)}}function vpe(e,t,i){const n=[],s=[];for(const o of t.data){const r=o.span,a=GV(t,o,i);s.push({from:r,to:a})}for(const o of e.data){const r=o.span,a=GV(e,o,i);n.push({from:a,to:r})}return{removed:s,moved:[],added:n}}function Uy(e,t,i){if(!PV(e)||!PV(t)||!hpe(e,t))return;const n=gpe(e,t);return n==null?vpe(e,t,i):n.axisValues.length===n.oldDataAxisIndices.length+n.newDataAxisIndices.length+2?ype(e,t):mpe(n,e,t,i)}function _V(e){return e.type==="continuous"||e.type==="log"}function VV(e){return e.type==="category"}function rh(e,t){return e===void 0||t===void 0?e!==void 0||t!==void 0:_V(e)&&_V(t)?e.type===t.type&&Kl(e.domain,t.domain)&&Kl(e.range,t.range):VV(e)&&VV(t)?e.inset===t.inset&&e.step===t.step&&Kl(e.domain,t.domain):!1}function Lv(e){return e==null?!1:e.type==="category"?e.domain.every(t=>t!=null):e.domain.every(t=>Number.isFinite(t)||t instanceof Date)&&e.range.every(t=>Number.isFinite(t))}function $y(e,t){let i;const n=e.map(s=>s.point);switch(t.type){case"linear":i=h$(n);break;case"smooth":i=g$(n,t.tension);break;case"step":i=p$(n,t.position);break}return i.map((s,o)=>({span:s,xValue0:e[o].xDatum,yValue0:e[o].yDatum,xValue1:e[o+1].xDatum,yValue1:e[o+1].yDatum}))}function Pv(e,t,i=.001){return Math.abs(e.x-t.x)<i&&Math.abs(e.y-t.y)<i}function lP({path:e},t){let i;for(const{span:n}of t){const[s,o]=Wo(n),r=i!=null&&Pv(i,s)?2:0;Iy(e,n,r,!1),i=o}}function XS(e,t,i){let n;for(const s of i){const[o,r]=b$(s.from,s.to,e),a=n!=null&&Pv(n,o)?2:0;tk(t.path,s.from,s.to,e,a,!1),n=r}}function cP(e,t,i){const n=(a,l)=>XS(a,l,t.removed),s=(a,l)=>XS(a,l,t.moved),o=(a,l)=>XS(a,l,t.added),r=uP(e,i);return{status:e,path:{addPhaseFn:o,updatePhaseFn:s,removePhaseFn:n},pathProperties:r}}function uP(e,t){const i=t==="none"?"updated":e,n={fromFn(s,o){const r={phase:jr[i]},a=s.previousDatum??o;return a!=null&&(r.segments=a),e==="removed"?r.finish={visible:!1}:e==="added"&&(r.start={visible:!0}),r},toFn(s,o){const r={phase:jr[i]},a=o;return a!=null&&(r.segments=a),r}};return t==="fade"?{fromFn(s,o){const r=e==="added"?0:s.opacity,a=e==="removed"?s.previousDatum??o:o;return{...n.fromFn(s,o),opacity:r,segments:a}},toFn(s,o){const r=e==="removed"?0:1,a=e==="removed"?s.previousDatum??o:o;return{...n.toFn(s,o),opacity:r,segments:a}}}:n}function M$(e,t,i){const n=e.scales.x?.type==="category",s=t.scales.x?.type==="category";if(n!==s||!Lv(e.scales.x)||!Lv(t.scales.x)||e.strokeData==null||t.strokeData==null)return;let o="updated";t.visible&&!e.visible?o="removed":!t.visible&&e.visible&&(o="added");const r=Uy({scales:e.scales,data:e.strokeData.spans},{scales:t.scales,data:t.strokeData.spans},1);if(r==null)return;const a=cP(o,r,"fade"),l=(i?.changed??!0)||!rh(e.scales.x,t.scales.x)||!rh(e.scales.y,t.scales.y)||o!=="updated";return{status:o,stroke:a,hasMotion:l}}function D$({path:e},{spans:t,phantomSpans:i}){let n=0,s={x:Number.NaN,y:Number.NaN},o={x:Number.NaN,y:Number.NaN};for(let r=0;r<t.length;r+=1){const{span:a}=t[r],{span:l}=i[r],{0:c,1:d}=Wo(a),{0:p,1:g}=Wo(l);if(Pv(s,c)&&Pv(o,p))Iy(e,a,2,!1);else{for(let m=r-1;m>=n;m-=1)Iy(e,i[m].span,1,!0);e.closePath(),Iy(e,a,0,!1),n=r}s=d,o=g}for(let r=t.length-1;r>=n;r-=1)Iy(e,i[r].span,1,!0);e.closePath()}function QS(e,{path:t},i,n){for(let s=0;s<i.length;s+=1){const o=i[s],r=n[s];tk(t,o.from,o.to,e,0,!1),tk(t,r.from,r.to,e,1,!0),t.closePath()}}function A$(e,t,i,n){const s=(l,c)=>QS(l,c,t.removed,i.removed),o=(l,c)=>QS(l,c,t.moved,i.moved),r=(l,c)=>QS(l,c,t.added,i.added),a=uP(e,n);return{status:e,path:{addPhaseFn:r,updatePhaseFn:o,removePhaseFn:s},pathProperties:a}}function R$(e,t){const i=e.scales.x?.type==="category",n=t.scales.x?.type==="category";if(i!==n||!Lv(e.scales.x)||!Lv(t.scales.x))return;let s="updated";t.visible&&!e.visible?s="removed":!t.visible&&e.visible&&(s="added");const o=Uy({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},0);if(o==null)return;const r=Uy({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},0);if(r==null)return;const a=Uy({scales:e.scales,data:e.strokeData.spans,zeroData:e.fillData.phantomSpans},{scales:t.scales,data:t.strokeData.spans,zeroData:t.fillData.phantomSpans},0);if(a==null)return;const l="none",c=A$(s,o,r,l),d=cP(s,a,l);return{status:s,fill:c,stroke:d}}function Nv({id:e},t,i,...n){const s={phase:i?jr[i]:"trailing"};yc(e,"markers",t,n,{opacity:0},{opacity:1},s);for(const o of n)o.cleanup()}function E$({id:e},t,...i){yc(e,"markers",t,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"});for(const n of i)n.cleanup()}function dP({id:e,nodeDataDependencies:t},i,...n){const s=t.seriesRectWidth;hn(e,"markers",i,n,{fromFn:(a,l)=>{const c=l.midPoint?.x??s;let d=st(0,XW(c/s),1);return Number.isNaN(d)&&(d=0),{scalingX:0,scalingY:0,delay:d,duration:$x,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function hD(e){return{opacity:1,scalingX:1,scalingY:1}}function Fv(e,t){return{x:t.point?.x??Number.NaN,y:t.point?.y??Number.NaN,scalingCenterX:t.point?.x??Number.NaN,scalingCenterY:t.point?.y??Number.NaN}}function pD(e,{datumIndex:t}){const i=e.getNodeData();if(i===void 0)return;const n=i[t],{point:s}=n??{};if(n==null||s==null)return;const o=e.getFormattedMarkerStyle(n),r=Rn.anchor(o.shape),a=s.focusSize??o.size,l=4+a,c=l/2,d=(r.x-.5)*a,p=(r.y-.5)*a,g=n.point.x-c-d,m=n.point.y-c-p;return Hi.toCanvas(e.contentGroup,new Le(g,m,l,l))}function hP(e,t,i,n=i){return n.enabled??i.enabled?(t.step??wh(t.range)/Math.max(1,e))>1:!1}function gD(e,t,i,n){return n??(n={stroke:t.stroke,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth}),MM.reduce((s,o)=>(s[o]=e.getMarkerStyle(i,{},void 0,{highlightState:o},void 0,n),s),{})}function pP({id:e,visible:t,nodeDataDependencies:i},n,...s){const{seriesRectWidth:o,seriesRectHeight:r}=i;yc(e,"path_properties",n,s,{clipX:0},{clipX:o},{phase:"initial",start:{clip:!0,clipY:r,visible:t},finish:{clip:!1,visible:t}})}function c0({id:e},t,i,n="add",...s){yc(e,t,i,s,{opacity:0},{opacity:1},{phase:n})}function gP(e){return t=>({visible:e.getVisible(),opacity:e.getOpacity(),clipScalingX:1,clip:!1})}function u0({nodeDataDependencies:e},t){const i=n=>Number.isFinite(n)?n:0;t.clipX=i(e.seriesRectWidth),t.clipY=i(e.seriesRectHeight)}function zV(e){return e.isReversed()!==e.range[1]<e.range[0]}function fD(e,t,i,n,s,o=!0){if(t.scale.domain.length===0||i.scale.domain.length===0)return;const r=e.key==="x"?t:i,{scale:a,direction:l}=r,c=l==="x",d=a.bandwidth??0,p=o?((a.step??0)-d)/2:0,g=Math.max(n.x,s.width-(n.x+n.width)),m=Math.max(n.y,s.height-(n.y+n.height)),y=()=>zV(c?t:i)?c?n.width+g:n.height+m:c?-g:-m,b=()=>zV(c?t:i)?c?-g:-m:c?n.width+g:n.height+m;return(w=>{const x=[];let M=-1;for(let E=0;E<w.length;E++){const I=w[E];if(PS(I))continue;const{start:N,stop:T,...P}=w[E],O=w[M]?.stop,G=w.slice(E+1).find(q=>q.start!=null)?.start;let B=a.convert(N??O)-p,z=a.convert(T??G)+2*p;const j=N!=null&&Number.isNaN(B),X=T!=null&&Number.isNaN(z);j||X||(Number.isNaN(B)&&(B=y()),Number.isNaN(z)&&(z=b()),T!=null&&(M=E),x.push({start:B,stop:z,...P}))}return x})(e.segments).map(({stop:w,start:x,...M})=>{const E=c?x:-g,I=c?-m:x,N=c?w+d:n.width+g,T=c?n.height+m:w+d;return{clipRect:{x0:E,y0:I,x1:N,y1:T},...M}})}var T$=new Set(["time","timestamp","date","datetime"]);function fP(e,t,i){if(e!=="x"&&e!=="y"||!Zt(t))return;const n=I$(e,i);if(n==null||!(n in t))return;const s=t[n],o=k$(e,i),r=mP(n,s);return r?{type:r,position:o}:typeof s=="number"?{type:"number",position:o}:{type:"category",position:o}}function tC(e,t,i){if(e!=="x"&&e!=="y"||!Zt(t))return;const n=I$(e,i);if(n==null||!(n in t))return;const s=k$(e,i),o=mP(n,t[n]);if(o)return{type:o,position:s}}function mP(e,t){if(Ph(t)||T$.has(e)&&av(t))return"time"}function I$(e,t){let i;return e==="x"?"xKey"in t&&(i=t.xKey):e==="y"&&"yKey"in t&&(i=t.yKey),i}function k$(e,t){return"direction"in t&&t.direction==="horizontal"?e==="x"?"left":"bottom":e==="x"?"bottom":"left"}var bpe=.125,Cpe=.25,wpe=bb(Jhe),mD=class extends Xu{constructor(e){super({moduleCtx:e,propertyKeys:Qf,propertyNames:Jf,categoryKey:"xValue",pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],datumSelectionGarbageCollection:!1,segmentedDataNodes:!1,pickModes:[2,0],animationResetFns:{path:gP({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:Xh,datum:(t,i)=>({...hD(),...Fv(t,i)})},clipFocusBox:!1}),this.properties=new yn,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0,this.backgroundGroup=new ut({name:`${this.id}-background`,zIndex:0}),this._isStacked=void 0,this.fillSpans=[],this.phantomSpans=[],this.strokeSpans=[]}get pickModeAxis(){return"main"}get hasData(){return this.getHasData("xValue")}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||this.contextNodeData!=null&&(this.contextNodeData.fillData.spans.length>l0||this.contextNodeData.strokeData.spans.length>l0)}attachSeries(e,t,i){super.attachSeries(e,t,i),e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.backgroundGroup.remove()}attachPaths([e,t]){this.backgroundGroup.appendChild(e),this.contentGroup.appendChild(t),t.zIndex=-1}detachPaths([e,t]){e.remove(),t.remove()}isStacked(){return(this.seriesGrouping?.stackCount??1)>1}isNormalized(){return this.properties.normalizedTo!=null}setSeriesIndex(e){const i=this.isStacked()===this._isStacked;return this._isStacked=i,super.setSeriesIndex(e,i)}setZIndex(e){super.setZIndex(e),this.isStacked()?(this.backgroundGroup.zIndex=[0,e],this.contentGroup.zIndex=[1,e,0]):(this.backgroundGroup.zIndex=[1,e,0,0],this.contentGroup.zIndex=[1,e,0,1])}async processData(e){if(this.data==null)return;const{data:t,visible:i,seriesGrouping:{groupIndex:n=this.id,stackCount:s=1}={}}=this,{xKey:o,yKey:r,yFilterKey:a,connectMissingData:l,normalizedTo:c}=this.properties,d=!this.ctx.animationManager.isSkipped(),p=this.axes.x?.scale,g=this.axes.y?.scale,{xScaleType:m,yScaleType:y}=this.getScaleInformation({xScale:p,yScale:g}),b=s>1||c!=null,C={value:`area-stack-${n}-yValue`,marker:`area-stack-${n}-yValues-marker`},w={invalidValue:null};(Ny(c)||l)&&s>1&&(w.invalidValue=0),i||(w.forceValue=0);const x=[Mu(o,m,{id:"xValue"}),vi(r,y,{id:"yValueRaw",...w}),...a==null?[]:[vi(a,y,{id:"yFilterRaw"})]];b&&x.push(...Ev(r,"normal",{id:"yValueCumulative",...w,groupId:C.marker},y)),Ny(c)&&x.push(vi(r,y,{id:"yValue",...w,groupId:C.value}),sD(Object.values(C),c)),d&&x.push(Qb());const{dataModel:M,processedData:E}=await this.requestDataModel(e,t,{props:x,groupByKeys:b,groupByData:!b});this.dataAggregationFilters=this.aggregateData(M,E),this.animationState.transition("updateData")}xCoordinateRange(e,t){const{marker:i}=this.properties,n=this.axes.x.scale.convert(e),s=i.enabled?.5*i.size*t:0;return[n-s,n+s]}yCoordinateRange(e,t){const{marker:i}=this.properties,n=this.axes.y.scale.convert(e[0]),s=i.enabled?.5*i.size*t:0;return[n-s,n+s]}yValueKey(){return this.isNormalized()?"yValue":"yValueRaw"}yCumulativeKey(e){return e.type==="grouped"?"yValueCumulative":this.yValueKey()}getSeriesDomain(e){const{dataModel:t,processedData:i,axes:n}=this;if(!t||!i)return[];const s=n.y;if(e==="x"){const r=t.resolveProcessedDataDefById(this,"xValue"),a=t.getDomain(this,"xValue","key",i);return r?.def.type==="key"&&r.def.valueType==="category"?a:vo($u(a))}const o=this.domainForClippedRange("y",[this.yCumulativeKey(i)],"xValue");if(s instanceof Yo&&!(s instanceof jh)){const r=Number.isFinite(o[1]-o[0])?[Math.min(o[0],0),Math.max(o[1],0)]:[];return vo(r)}else return vo(o)}getSeriesRange(e,t){const[i,n]=this.domainForVisibleRange("y",[this.yCumulativeKey(this.processedData)],"xValue",t);return[Math.min(i,0),Math.max(n,0)]}getZoomRangeFittingItems(e,t,i){return this.zoomFittingVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}aggregateData(e,t){if(Uf(t))return;const i=this.axes.x;if(i==null)return;const{scale:n}=i,s=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,this.yCumulativeKey(t),t),r=e.getDomain(this,"xValue","key",t),a=e.resolveColumnNeedsValueOf(this,"xValue",t),l=e.resolveColumnNeedsValueOf(this,this.yCumulativeKey(t),t);return wpe(n.type,s,o,r,a,l)}stackAggregatedData(e){const{indices:t,metaIndices:i}=e,{visible:n,axes:s,dataModel:o,processedData:r,seriesBelowStackContext:a}=this,l=s.x,c=s.y;if(!n)return this.phantomSpans=[],this.fillSpans=[],this.strokeSpans=[],a;if(l==null||c==null||o==null||r==null)return;const{scale:d}=l,{scale:p}=c,g=(d.bandwidth??0)/2,m=o.resolveKeysById(this,"xValue",r),y=o.resolveColumnById(this,this.yCumulativeKey(r),r);let[b,C]=bv(1,i.length-1,l.range,E=>{const I=i[E],N=i[E+1],T=t[I],P=t[N],O=m[T],G=m[P],{0:B}=this.xCoordinateRange(O,0),{1:z}=this.xCoordinateRange(G,0);return[B,z]});b=Math.max(b-1,0),C=Math.min(C+1,i.length-1);let w=[];if(a?.fillSpans)w=a?.fillSpans;else for(let E=b;E<C;E+=1){const I=i[E],N=i[E+1],T=t[I],P=t[N],O=m[T],G=m[P],B={type:"linear",moveTo:!1,x0:d.convert(O)+g,y0:p.convert(0),x1:d.convert(G)+g,y1:p.convert(0)};w.push({span:B,xValue0:O,xValue1:G,yValue0:0,yValue1:0})}this.phantomSpans=w;const x=[],M=[];for(let E=b;E<C;E+=1){const I=i[E],N=i[E+1],T=t[I],P=t[N],O=m[T],G=m[P],B=y[T],z=y[P],j=[];for(let H=I+1;H<N;H++){const K=t[H];j.push({x:d.convert(m[K])+g,y:p.convert(y[K])})}const q={span:{type:"multi-line",moveTo:!1,x0:d.convert(O)+g,y0:p.convert(B),x1:d.convert(G)+g,y1:p.convert(z),midPoints:j},xValue0:O,xValue1:G,yValue0:B,yValue1:z};x.push(q),M.push(q)}return this.fillSpans=x,this.strokeSpans=M,{stack:[],fillSpans:x,strokeSpans:M}}stackYValueData(){const{visible:e,axes:t,dataModel:i,processedData:n,seriesBelowStackContext:s,properties:o}=this,r=t.x,a=t.y;if(r==null||a==null||i==null||n==null)return;const{interpolation:l}=o,{scale:c}=r,{scale:d}=a,p=(c.bandwidth??0)/2;let g=i.resolveKeysById(this,"xValue",n),m=i.resolveColumnById(this,this.yValueKey(),n);const y=!this.isStacked()&&this.properties.connectMissingData,b=n.invalidKeys?.get(this.id),w=(y?n.invalidData?.get(this.id):void 0)??b;w!=null&&(g=g.filter((B,z)=>w[z]===!1),m=m.filter((B,z)=>w[z]===!1));let[x,M]=bv(1,g.length,r.range,B=>this.xCoordinateRange(g[B],0));x=Math.max(x-2,0),M=Math.min(M+2,g.length);let E;if(s?.fillSpans)E=s?.fillSpans;else{const B=[];for(let z=x;z<M;z+=1){const j=g[z];B.push({point:{x:c.convert(j)+p,y:d.convert(0)},xDatum:j,yDatum:0})}E=$y(B,{type:"linear"})}if(this.phantomSpans=E,!e)return this.fillSpans=E,this.strokeSpans=[],s;let I=s?.stack;if(I==null){I=[];for(let B=x;B<M-1;B+=1)I.push({leading:0,trailing:0,dataValid:!0,breakBefore:!1})}const N=I.slice();let T=!1;for(let B=0;B<N.length;B+=1){const z=x+B,j=x+B+1;let{leading:X,trailing:q,breakBefore:H}=I[B];const K=m[z],U=m[j],de=!Number.isFinite(K),te=!Number.isFinite(U),V=!de&&!te;V&&(X+=K,q+=U),B!==0&&V!==T&&(H=!0),T=V,N[B]={leading:X,trailing:q,dataValid:V,breakBefore:H}}const P=[],O=[],G=[];for(let B=0;B<N.length;B+=1){const{leading:z,dataValid:j,breakBefore:X}=N[B],q=x+B;if(X){if(G.length!==0){const H=N[B-1],K={point:{x:c.convert(g[q])+p,y:d.convert(H.trailing)},xDatum:g[q],yDatum:H.trailing};G.push(K);const U=$y(G,l);P.push(...U),O.push(...U)}G.length=0}if(j){const H={point:{x:c.convert(g[q])+p,y:d.convert(z)},xDatum:g[q],yDatum:z};G.push(H)}else P.push(E[B])}if(G.length!==0){const B=N.at(-1),z=x+N.length,j={point:{x:c.convert(g[z])+p,y:d.convert(B.trailing)},xDatum:g[z],yDatum:B.trailing};G.push(j);const X=$y(G,l);P.push(...X),O.push(...X),G.length=0}return this.fillSpans=P,this.strokeSpans=O,{stack:N,fillSpans:P,strokeSpans:O}}createStackContext(){const e=this.axes.x;if(e==null)return;const{scale:t}=e,[i,n]=t.range,s=Math.abs(n-i),o=this.dataAggregationFilters?.find(r=>r.maxRange>s);return o?this.stackAggregatedData(o):this.stackYValueData()}createNodeData(){const{axes:e,data:t,processedData:i,dataModel:n,dataAggregationFilters:s}=this,o=e.x,r=e.y;if(!o||!r||!t||!n||!i)return;const{xKey:a,xName:l,yFilterKey:c,yKey:d,yName:p,legendItemName:g,marker:m,label:y,fill:b,stroke:C}=this.properties,w=o.scale,x=r.scale,{isContinuousY:M}=this.getScaleInformation({xScale:w,yScale:x}),E=(w.bandwidth??0)/2,I=i.type==="grouped",N=n.resolveKeysById(this,"xValue",i),T=n.resolveColumnById(this,"yValueRaw",i),P=I?n.resolveColumnById(this,"yValueCumulative",i):T,O=c==null?void 0:n.resolveColumnById(this,"yFilterRaw",i),G=this.getSeriesDomain("y"),B=[],z=[],{visibleSameStackCount:j}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);let X=!1;const q=i.dataSources.get(this.id)?.data??[],H=i.invalidData?.get(this.id),[K,U]=w.range,de=Math.abs(U-K),te=s?.find(xe=>xe.maxRange>de);let V=0,W=0;const ee=te?.indices;[V,W]=this.visibleRangeIndices("xValue",o.range,ee),V=Math.max(V-2,0),W=Math.min(W+2,ee?.length??N.length),i.input.count<1e3&&(V=0,W=i.input.count);const pe=(xe,De,Ee)=>{let Je;return(Ny(this.properties.normalizedTo)?M&&EM(Ee):!Number.isNaN(Ee))&&(Je=De),{x:w.convert(xe)+E,y:x.convert(Je),size:m.size}},be=xe=>{const De=N[xe];if(De==null)return;const Ee=q[xe],Je=T[xe],ze=P[xe],ct=Number.isFinite(Je)&&H?.[xe]!==!0,Xe=pe(De,+ze,Je),pt=O==null?void 0:O[xe]===Je;if(pt===!1&&(X=!0),ct&&m&&z.push({series:this,itemId:d,datum:Ee,datumIndex:xe,midPoint:{x:Xe.x,y:Xe.y},cumulativeValue:+ze,yValue:Je,xValue:De,yKey:d,xKey:a,point:Xe,fill:m.fill??b,stroke:m.stroke??C,strokeWidth:m.strokeWidth??this.properties.strokeWidth,selected:pt}),y.enabled&&ct){const Ge=this.getLabelText(Je,Ee,d,"y",G,y,{value:Je,datum:Ee,xKey:a,yKey:d,xName:l,yName:p,legendItemName:g});B.push({series:this,itemId:d,datum:Ee,datumIndex:xe,x:Xe.x,y:Xe.y,labelText:Ge})}};for(let xe=V;xe<W;xe+=1){const De=ee?.[xe]??xe;N[De]!=null&&be(De)}const Ce=fD(this.properties.segmentation,o,r,this.chart.seriesRect,this.ctx.scene,!1);return{itemId:d,fillData:{itemId:d,spans:this.fillSpans,phantomSpans:this.phantomSpans},strokeData:{itemId:d,spans:this.strokeSpans},labelData:B,nodeData:z,scales:this.calculateScaling(),visible:this.visible,stackVisible:j>0,crossFiltering:X,styles:gD(this,this.properties,m),segments:Ce}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){const{paths:[t,i],visible:n,animationEnabled:s}=e,o=this.contextNodeData?.crossFiltering===!0,r=this.contextNodeData?.segments,a=_t(this.getHighlightStyle(),this.getStyle(!1)),{strokeWidth:l,stroke:c,strokeOpacity:d,lineDash:p,lineDashOffset:g,fill:m,fillOpacity:y,opacity:b}=a;i.setProperties({segments:r,fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:c,strokeWidth:l,strokeOpacity:d*(o?Cpe:1),lineDash:p,lineDashOffset:g,opacity:b,visible:n||s}),i.datum=r,Zl(t,{fill:m,stroke:void 0,fillOpacity:y*(o?bpe:1)},this.getShapeFillBBox()),t.setProperties({segments:r,lineJoin:"round",pointerEvents:1,fillShadow:this.properties.shadow,opacity:b,visible:n||s}),t.datum=r,u0(this,i),u0(this,t)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty("AreaSeries")}updateFillPath(e,t){const[i]=e;i.path.clear(),D$(i,t.fillData),i.markDirty("AreaSeries")}updateStrokePath(e,t){const{spans:i}=t.strokeData,[,n]=e;n.path.clear(),lP(n,i),n.markDirty("AreaSeries")}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,{contextNodeData:n,processedData:s,axes:o,properties:r}=this,{marker:a,styler:l}=r,c=l?this.getStyle(!1).marker:void 0,d=n?.crossFiltering===!0||hP(s.input.count,o.x.scale,a,c);return a.isDirty()&&(i.clear(),i.cleanup()),i.update(d?t:[])}updateDatumStyles(e){const{datumSelection:t,isHighlight:i}=e,{marker:n}=this.properties,s=this.ctx.highlightManager.getActiveHighlight();t.each((o,r)=>{if(!t.isGarbage(o)){const a=this.getHighlightState(s,e.isHighlight,r.datumIndex),l=this.getStyle(i,a),{stroke:c,strokeWidth:d,strokeOpacity:p}=l,g=this.makeItemStylerParams(this.dataModel,this.processedData,r.datumIndex,l.marker);r.style=this.getMarkerStyle(n,r,g,{isHighlight:i,highlightState:a},l.marker,{stroke:c,strokeWidth:d,strokeOpacity:p})}})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const{datumSelection:i,isHighlight:n}=e,s=this.getShapeFillBBox(),o=this.ctx.highlightManager.getActiveHighlight();i.each((r,a)=>{const l=a.style??t.styles[this.getHighlightState(o,n,a.datumIndex)];this.applyMarkerStyle(l,r,a.point,s,{selected:a.selected})}),n||this.properties.marker.markClean()}updateLabelSelection(e){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])}updateLabelNodes(e){const{isHighlight:t=!1}=e,i=this.ctx.highlightManager?.getActiveHighlight(),n=this.makeLabelFormatterParams();e.labelSelection.each((s,o)=>{const r=Zh(this,o,n,this.properties.label,t,i),{enabled:a,fontStyle:l,fontWeight:c,fontSize:d,fontFamily:p,color:g}=r;a&&o?.labelText?(s.fontStyle=l,s.fontWeight=c,s.fontSize=d,s.fontFamily=p,s.textAlign="center",s.textBaseline="bottom",s.text=o.labelText,s.x=o.x,s.y=o.y-10,s.fill=g,s.visible=!0,s.fillOpacity=this.getHighlightStyle(t,o.datumIndex).opacity??1,s.setBoxing(r)):s.visible=!1})}makeStylerParams(e,t){const{id:i}=this,{marker:n,fill:s,fillOpacity:o,lineDash:r,lineDashOffset:a,stroke:l,strokeOpacity:c,strokeWidth:d,xKey:p,yKey:g}=this.properties,m=Gf(t??0);return{marker:{fill:n.fill,fillOpacity:n.fillOpacity,size:n.size,shape:n.shape,stroke:n.stroke,strokeOpacity:n.strokeOpacity,strokeWidth:n.strokeWidth,lineDash:n.lineDash,lineDashOffset:n.lineDashOffset},highlightState:m,highlighted:e,fill:s,fillOpacity:o,lineDash:r,lineDashOffset:a,seriesId:i,stroke:l,strokeOpacity:c,strokeWidth:d,xKey:p,yKey:g}}makeItemStylerParams(e,t,i,n){const{xKey:s,yKey:o}=this.properties,r=e.resolveKeysById(this,"xValue",t)[i],a=e.resolveColumnById(this,"yValueRaw",t)[i],l=e.getDomain(this,"xValue","key",t),c=e.getDomain(this,this.yCumulativeKey(t),"value",t),d=this.filterItemStylerFillParams(n.fill)??n.fill;return{...AM(r,a,s,o,l,c),xValue:r,yValue:a,...n,fill:d}}makeLabelFormatterParams(){const{xKey:e,xName:t,yKey:i,yName:n,legendItemName:s}=this.properties;return{xKey:e,xName:t,yKey:i,yName:n,legendItemName:s}}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:s,properties:o}=this,{xKey:r,xName:a,yKey:l,yName:c,tooltip:d,legendItemName:p}=o,g=s.x,m=s.y;if(!i||!n||!g||!m)return;const y=n.dataSources.get(this.id)?.data?.[e],b=i.resolveKeysById(this,"xValue",n)[e],C=i.resolveColumnById(this,"yValueRaw",n)[e];if(b==null)return;const w=this.getStyle(!1),x=this.makeItemStylerParams(i,n,e,w.marker),M=this.getMarkerStyle(this.properties.marker,{datumIndex:e,datum:y},x,{isHighlight:!1},w.marker);return this.formatTooltipWithContext(d,{heading:this.getAxisValueText(g,"tooltip",b,y,r,p),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(m,"tooltip",C,y,l,p)}]},{seriesId:t,datum:y,title:c,xKey:r,xName:a,yKey:l,yName:c,...M,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:n,strokeWidth:s,lineDash:o,marker:r}=this.getStyle(!1),a=!r.enabled||r.fill==null,l=a?e:r.fill;return{marker:{...this.getMarkerStyle(this.properties.marker,{},void 0,{isHighlight:!1,checkForHighlight:!1},{size:r.size,shape:r.shape,fill:l,fillOpacity:a?i:r.fillOpacity,stroke:r.stroke}),enabled:r.enabled||s<=0},line:{stroke:t,strokeOpacity:n,strokeWidth:s,lineDash:o}}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:n}=this,{yKey:s,yName:o,legendItemName:r,showInLegend:a}=this.properties;return[{legendType:e,id:t,itemId:s,legendItemName:r,seriesId:t,enabled:n&&i.getItemEnabled({seriesId:t,itemId:s}),label:{text:r??o??s},symbol:this.legendItemSymbol(),hideInLegend:!a}]}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:n,paths:s}=e,{animationManager:o}=this.ctx;this.updateAreaPaths(s,n),pP(this,o,...s),cs([t],Fv),dP(this,o,t),Gi(this,"labels",o,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{datumSelection:i,labelSelection:n,contextData:s,paths:o,previousContextData:r}=e,[a,l]=o;if(s.visible===!1&&r?.visible===!1||a==null&&l==null)return;this.resetDatumAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateAreaPaths(o,s)},d=()=>{t.skipCurrentBatch(),c()};if(s==null||r==null){c(),Nv(this,t,"added",i),c0(this,"fill_path_properties",t,"add",a),c0(this,"stroke_path_properties",t,"add",l),Gi(this,"labels",t,n);return}if(s.crossFiltering!==r.crossFiltering){d();return}const p=R$(s,r);if(p===void 0){d();return}else if(p.status==="no-op")return;Nv(this,t,void 0,i),hn(this.id,"fill_path_properties",t,[a],p.fill.pathProperties),a0(this.id,"fill_path_update",t,[a],p.fill.path),hn(this.id,"stroke_path_properties",t,[l],p.stroke.pathProperties),a0(this.id,"stroke_path_update",t,[l],p.stroke.path),Gi(this,"labels",t,n),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(o,s)})}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Rn}getStyle(e,t){const{styler:i,marker:n,fill:s,fillOpacity:o,lineDash:r,lineDashOffset:a,stroke:l,strokeOpacity:c,strokeWidth:d}=this.properties,{size:p,shape:g,fill:m="transparent",fillOpacity:y}=n;let b={};if(i){const C=this.makeStylerParams(e,t),w=this.cachedCallWithContext(i,C)??{};b=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],w,{pick:!1})??{}}return b.marker??(b.marker={}),{fill:b.fill??s,fillOpacity:b.fillOpacity??o,lineDash:b.lineDash??r,lineDashOffset:b.lineDashOffset??a,stroke:b.stroke??l,strokeOpacity:b.strokeOpacity??c,strokeWidth:b.strokeWidth??d,marker:{enabled:b.marker.enabled??n.enabled,fill:b.marker.fill??m,fillOpacity:b.marker.fillOpacity??y,shape:b.marker.shape??g,size:b.marker.size??p,lineDash:b.marker.lineDash??n.lineDash??r,lineDashOffset:b.marker.lineDashOffset??n.lineDashOffset??a,stroke:b.marker.stroke??n.stroke??l,strokeOpacity:b.marker.strokeOpacity??n.strokeOpacity??c,strokeWidth:b.marker.strokeWidth??n.strokeWidth??d}}}getFormattedMarkerStyle(e){const t=this.getStyle(!1),i=this.makeItemStylerParams(this.dataModel,this.processedData,e.datumIndex,t.marker);return this.getMarkerStyle(this.properties.marker,e,i,{isHighlight:!0},void 0,t)}computeFocusBounds(e){return pD(this,e)}hasItemStylers(){return this.properties.styler!=null||this.properties.marker.itemStyler!=null||this.properties.label.itemStyler!=null}};mD.className="AreaSeries";mD.type="area";var Spe={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:e=>new mD(e),stackable:!0,predictAxis:tC,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",Hu],["image",bc],["pattern",jo]]},stroke:{$palette:"stroke"},fillOpacity:.8,strokeOpacity:1,strokeWidth:{$isUserOption:["./stroke",2,0]},lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:Vh,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:{$isUserOption:["./stroke",1,0]},fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",Ub],["pattern",jo]]},stroke:{$palette:"stroke"}},label:{...Za,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:ju(),segmentation:qM}}},L$={type:"series",name:"area",chartType:"cartesian",options:p5,create:e=>new mD(e)},yP=class extends Tn{constructor(){super(...arguments),this.direction="x",this.featherRatio=0}get feathered(){return Math.abs(this.featherRatio)>1e-6}isPointInPath(e,t){return this.feathered?this.getBBox().containsPoint(e,t):super.isPointInPath(e,t)}updatePath(){if(!this.feathered){super.updatePath();return}const{path:e,borderPath:t,x:i,y:n,width:s,height:o,direction:r,featherRatio:a}=this;if(e.clear(),t.clear(),r==="x"){const l=Math.abs(a)*s;a>0?(e.moveTo(i,n),e.lineTo(i+s-l,n),e.lineTo(i+s,n+o/2),e.lineTo(i+s-l,n+o),e.lineTo(i,n+o),e.closePath()):(e.moveTo(i+l,n),e.lineTo(i+s,n),e.lineTo(i+s,n+o),e.lineTo(i+l,n+o),e.lineTo(i,n+o/2),e.closePath())}else{const l=Math.abs(a)*o;a>0?(e.moveTo(i,n+l),e.lineTo(i+s/2,n),e.lineTo(i+s,n+l),e.lineTo(i+s,n+o),e.lineTo(i,n+o),e.closePath()):(e.moveTo(i,n),e.lineTo(i+s,n),e.lineTo(i+s,n+o-l),e.lineTo(i+s/2,n+o),e.lineTo(i,n+o-l),e.closePath())}}renderStroke(e){if(!this.feathered){super.renderStroke(e);return}const{stroke:t,strokeWidth:i}=this;if(t&&i){const{globalAlpha:n}=e,{lineDash:s,lineDashOffset:o,lineCap:r,lineJoin:a,path:l}=this;this.applyStrokeAndAlpha(e),e.lineWidth=i,s&&e.setLineDash(s),o&&(e.lineDashOffset=o),r&&(e.lineCap=r),a&&(e.lineJoin=a),e.stroke(l.getPath2D()),e.globalAlpha=n}}};A([Me()],yP.prototype,"direction",2);A([Me()],yP.prototype,"featherRatio",2);function yD(e,t){for(const i of t){const n=i.datum;n===void 0?fe.error("undefined datum"):e.addValue(i,n)}}function vD(e,t){const{x:i,y:n}=t,{nearest:s,distanceSquared:o}=e.getQuadTree().find(i,n);if(s!==void 0)return{datum:s.value,distance:Math.sqrt(o)}}var vP=class extends Mc{constructor(){super(...arguments),this.direction="vertical"}};A([k],vP.prototype,"direction",2);var P$=class extends Xu{constructor(){super(...arguments),this.groupScale=new _f,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}get hasData(){return this.getHasData("xValue")}padBandExtent(e,t){const i=typeof t=="boolean"?1:.5,n=Kt(this.smallestDataInterval)?this.smallestDataInterval*i:0,s=$u(e)??[Number.NaN,Number.NaN];return typeof t=="boolean"?s[t?0:1]-=(t?1:-1)*n:(s[0]-=n,s[1]+=n),vo(s)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const e=this.getBarDirection();return this.axes[e]}getCategoryAxis(){const e=this.getCategoryDirection();return this.axes[e]}getBandwidth(e,t){return Ut.is(e.scale)?e.scale.calcBandwidth(this.smallestDataInterval,t):e.scale.bandwidth}xCoordinateRange(e){const t=this.axes[this.getCategoryDirection()],i=t.scale,n=this.getBandwidth(t,0)??0,s=Ut.is(i)?n*-.5:0,o=i.convert(e)+s;return[o,o+n]}yCoordinateRange(e){const i=this.axes[this.getBarDirection()].scale,n=e.map(s=>i.convert(s));if(n.length===1){const s=i.convert(0);return[Math.min(n[0],s),Math.max(n[0],s)]}return[Math.min(...n),Math.max(...n)]}updateGroupScale(e){const t=[],{groupScale:i}=this,n=this.getBandwidth(e),{index:s,visibleGroupCount:o}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let a=0;a<o;a++)t.push(String(a));return i.domain=t,i.range=[0,n??0],e instanceof Hh?i.paddingInner=e.groupPaddingInner:e instanceof Wf?(i.paddingInner=e.groupPaddingInner,i.round=i.padding!==0):i.padding=0,{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:s}}resolveKeyDirection(e){return this.getBarDirection()==="x"?e==="x"?"y":"x":e}initQuadTree(e){yD(e,this.datumNodesIter())}pickNodeClosestDatum(e){return vD(this,e)}},xpe=1e3;function iS(e,t){return Array.from({length:e},(i,n)=>{const s=n*Wr,o=t[s+As],r=t[s+js];return Math.trunc((o+r)/2)})}function Mpe(e,t,i,n,s,o){if(t.length<xpe)return;const[r,a]=bf(e,s);let l=dD(t,r,a,{smallestKeyInterval:o}),{indexData:c,valueData:d}=Iv(t,n,i??n,r,a,l,{positive:!0}),{indexData:p,valueData:g}=Iv(t,n,i??n,r,a,l,{positive:!1}),m=iS(l,c),y=iS(l,p);const b=[{maxRange:l,positiveIndices:m,positiveIndexData:c,negativeIndices:y,negativeIndexData:p}];for(;l>64;)({indexData:c,valueData:d}=kv(c,d,l)),{indexData:p,valueData:g,maxRange:l}=kv(p,g,l),m=iS(l,c),y=iS(l,p),b.push({maxRange:l,positiveIndices:m,positiveIndexData:c,negativeIndices:y,negativeIndexData:p});return b.reverse(),b}var bP=class extends Yi{constructor(){super(...arguments),this.placement="inside-center",this.spacing=0}};A([k],bP.prototype,"placement",2);A([k],bP.prototype,"spacing",2);var Ki=class extends vP{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new rl,this.label=new bP,this.tooltip=Qh(),this.sparklineMode=!1}};A([k],Ki.prototype,"xKey",2);A([k],Ki.prototype,"xName",2);A([k],Ki.prototype,"yKey",2);A([k],Ki.prototype,"yName",2);A([k],Ki.prototype,"yFilterKey",2);A([k],Ki.prototype,"stackGroup",2);A([k],Ki.prototype,"normalizedTo",2);A([k],Ki.prototype,"fill",2);A([k],Ki.prototype,"fillOpacity",2);A([k],Ki.prototype,"stroke",2);A([k],Ki.prototype,"strokeWidth",2);A([k],Ki.prototype,"strokeOpacity",2);A([k],Ki.prototype,"lineDash",2);A([k],Ki.prototype,"lineDashOffset",2);A([k],Ki.prototype,"cornerRadius",2);A([k],Ki.prototype,"crisp",2);A([k],Ki.prototype,"styler",2);A([k],Ki.prototype,"itemStyler",2);A([k],Ki.prototype,"shadow",2);A([k],Ki.prototype,"label",2);A([k],Ki.prototype,"tooltip",2);A([k],Ki.prototype,"sparklineMode",2);function N$(e,t,i,n){if(t!=null){const[s,o]=t;if(s!==0||o!==1)return!1}if(Ut.is(e)){const s=e.calcBandwidth(n)-e.calcBandwidth(i);if(s>0&&s<1)return!1}if(mc.is(e)){const{bandwidth:s,step:o}=e;if(s>0&&s<1)return!1;const r=o-s;if(r>0&&r<1)return!1}return!0}var iT=e=>C1(e.yValue??0);function Ov(e,t,i){const{startingX:n,startingY:s}=Ape(e,t);return{isVertical:e,calculate:(r,a)=>{let l=e?r.x:n,c=e?s:r.y,d=e?r.width:0,p=e?0:r.height;const{opacity:g=1}=r;a&&(Number.isNaN(l)||Number.isNaN(c))&&({x:l,y:c}=a,d=e?a.width:0,p=e?0:a.height,e&&!iT(a)?c+=a.height:!e&&iT(a)&&(l+=a.width));let m;return r.clipBBox==null?m=void 0:iT(r)?m=e?new Le(l,c-p,d,p):new Le(l-d,c,d,p):m=new Le(l,c,d,p),{x:l,y:c,width:d,height:p,clipBBox:m,opacity:g}},mode:i}}function Dpe(e,t){return{isVertical:e,calculate:i=>({x:e?i.x:i.x+i.width/2,y:e?i.y+i.height/2:i.y,width:e?i.width:0,height:e?0:i.height,clipBBox:i.clipBBox,opacity:i.opacity??1}),mode:t}}function Bv(e,t){const i=r=>r==null||Number.isNaN(r.x)||Number.isNaN(r.y);return{toFn:(r,a,l)=>l==="removed"&&r.datum==null&&e.mode==="fade"?{...Gv(r,a),opacity:0}:l==="removed"||i(a)?e.calculate(a,r.previousDatum):{x:a.x,y:a.y,width:a.width,height:a.height,clipBBox:a.clipBBox,opacity:a.opacity??1},fromFn:(r,a,l)=>{l==="updated"&&i(a)?l="removed":l==="updated"&&i(r.previousDatum)&&(l="added");let c;l==="unknown"||l==="added"?(r.previousDatum==null&&e.mode==="fade"?c={...Gv(r,a),opacity:0}:c=e.calculate(a,r.previousDatum),l==="unknown"&&(l=t)):c={x:r.x,y:r.y,width:r.width,height:r.height,clipBBox:r.clipBBox,opacity:r.opacity??1};const d=jr[l];return{...c,phase:d}},applyFn:(r,a,l)=>{r.setProperties(a),r.crisp=l==="end"&&(r.datum?.crisp??!1)}}}function Ape(e,t){const i=t[e?"y":"x"];let n=1/0,s=0;return i?(e?s=i.scale.convert(Ut.is(i.scale)?0:Math.max(...i.range)):n=i.scale.convert(Ut.is(i.scale)?0:Math.min(...i.range)),{startingX:n,startingY:s}):{startingX:n,startingY:s}}function Gv(e,{x:t,y:i,width:n,height:s,clipBBox:o,opacity:r=1}){return{x:t,y:i,width:n,height:s,clipBBox:o,opacity:r,crisp:e.datum?.crisp??!1}}function CP(e,t){if(t===void 0)return;const{x:i,y:n,width:s,height:o}=t;return Hi.toCanvas(e.contentGroup,new Le(i,n,s,o))}function F$(e,t,i,n,s,o,r){let a=o?.reduced?.diff?.[e];if(a?.changed)return a;if(!r)return{changed:!1,added:new Set,updated:new Set,removed:new Set,moved:new Set};const l=Rpe(n,s);return a==null&&o?.reduced?.diff!=null?(a={changed:!0,added:new Set,updated:new Set,removed:new Set,moved:new Set},l?a.updated=new Set(Array.from(t,({datum:c})=>i(c))):a.added=new Set(Array.from(t,({datum:c})=>i(c)))):l&&(a={changed:!0,added:new Set,updated:new Set(Array.from(t,({datum:c})=>i(c))),removed:new Set,moved:new Set}),a}function HV(e){return typeof e=="object"&&e!==null&&"groupScale"in e}function Rpe(e,t){if(!t)return!1;const i=e.scales,n=t.scales;if(!rh(i.x,n.x)||!rh(i.y,n.y))return!0;if(!HV(e)||!HV(t))return!1;const s=e.groupScale,o=t.groupScale;return!rh(s,o)}var Epe=bb(Mpe),iC=class extends P${constructor(e){super({moduleCtx:e,propertyKeys:Qf,propertyNames:Jf,categoryKey:"xValue",pickModes:[2,1,0],pathsPerSeries:[],datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:Gv,label:Xh}}),this.properties=new Ki,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return this.properties.yFilterKey!=null&&(this.seriesGrouping==null||this.seriesGrouping.stackIndex===0)}async processData(e){if(!this.data)return;const{xKey:t,yKey:i,yFilterKey:n,normalizedTo:s}=this.properties,{seriesGrouping:{groupIndex:o=this.id}={},data:r}=this,l=(this.seriesGrouping?.stackCount??0)>1||s!=null,c=l,d=!this.ctx.animationManager.isSkipped(),p=this.getCategoryAxis()?.scale,g=this.getValueAxis()?.scale,{isContinuousX:m,xScaleType:y,yScaleType:b}=this.getScaleInformation({xScale:p,yScale:g}),C=`bar-stack-${o}-yValues`,w=`${C}-trailing`,x=this.visible?{}:{forceValue:0},M=[Mu(t,y,{id:"xValue"}),vi(i,b,{id:"yValue-raw",invalidValue:null,...x})];this.crossFilteringEnabled()&&M.push(vi(n,b,{id:"yFilterValue",invalidValue:null,...x})),l&&M.push(...Ev(i,"normal",{id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:C,separateNegative:!0,...x},b),...Ev(i,"trailing",{id:"yValue-start",invalidValue:null,missingValue:0,groupId:w,separateNegative:!0,...x},b)),m&&M.push(Z3,X3),Kt(s)&&M.push(sD([C,w],Math.abs(s))),d&&this.processedData&&M.push(oD(this.id,this.processedData)),(d||!c)&&M.push(Qb());const{dataModel:E,processedData:I}=await this.requestDataModel(e,r,{props:M,groupByKeys:c,groupByData:!c});this.dataAggregationFilters=this.aggregateData(E,I),this.smallestDataInterval=I.reduced?.smallestKeyInterval,this.largestDataInterval=I.reduced?.largestKeyInterval,this.animationState.transition("updateData")}yCumulativeKey(e){return e.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw"}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(i==null||t==null)return[];if(e===this.getCategoryDirection()){const a=i.resolveProcessedDataDefById(this,"xValue"),l=i.getDomain(this,"xValue","key",t);return a?.def.type==="key"&&a.def.valueType==="category"?l:this.padBandExtent(l)}const n=this.yCumulativeKey(i);let s=this.domainForClippedRange(e,[n],"xValue");const o=this.crossFilteringEnabled()?i.getDomain(this,"yFilterValue","value",t):void 0;o!=null&&(s=[Math.min(s[0],o[0]),Math.max(s[1],o[1])]);const r=this.getValueAxis();if(r instanceof Yo&&!(r instanceof jh)){const a=Number.isFinite(s[1]-s[0])?[Math.min(0,s[0]),Math.max(0,s[1])]:[];return vo(a)}else return vo(s)}getSeriesRange(e,t){if((this.properties.direction==="horizontal"?"x":"y")!==e)return[];const n=this.yCumulativeKey(this.dataModel),[s,o]=this.domainForVisibleRange("y",[n],"xValue",t);return[Math.min(s,0),Math.max(o,0)]}getZoomRangeFittingItems(e,t,i){const n=this.yCumulativeKey(this.dataModel);return this.zoomFittingVisibleItems("xValue",[n],e,t,i)}getVisibleItems(e,t,i){const n=this.yCumulativeKey(this.dataModel);return this.countVisibleItems("xValue",[n],e,t,i)}aggregateData(e,t){if(Uf(t))return;const i=this.axes.x;if(i==null)return;const n=e.resolveKeysById(this,"xValue",t),s=e.hasColumnById(this,"yValue-start"),o=s?e.resolveColumnById(this,"yValue-start",t):void 0,r=s?e.resolveColumnById(this,"yValue-end",t):e.resolveColumnById(this,"yValue-raw",t),{index:a}=e.resolveProcessedDataDefById(this,"xValue"),l=t.domain.keys[a];return Epe(i.scale.type,n,o,r,l,t.reduced?.smallestKeyInterval)}createNodeData(){const{dataModel:e,processedData:t,groupScale:i,dataAggregationFilters:n}=this,s=this.getCategoryAxis(),o=this.getValueAxis();if(!e||!t||!s||!o)return;const r=t.dataSources?.get(this.id);if(r==null)return;const a=s.scale,l=o.scale,{xKey:c,yKey:d,xName:p,yName:g,legendItemName:m,label:y}=this.properties,b=this.getSeriesDomain("y"),C=o.isReversed(),{barWidth:w,groupIndex:x}=this.updateGroupScale(s),M=i.convert(String(x)),E=Ut.is(a)?w*-.5:0,I=e.hasColumnById(this,"yValue-start"),N=e.resolveKeysById(this,"xValue",t),T=e.resolveColumnById(this,"yValue-raw",t),P=I?e.resolveColumnById(this,"yValue-start",t):void 0,O=I?e.resolveColumnById(this,"yValue-end",t):void 0,G=this.crossFilteringEnabled()?e.resolveColumnById(this,"yFilterValue",t):void 0,B=!this.ctx.animationManager.isSkipped(),z=be=>a.convert(N[be])+M+E,[j,X]=a.range,q=Math.abs(X-j),H=n?.find(be=>be.maxRange>q),K=H==null&&(this.properties.crisp??N$(s?.scale,s?.visibleRange,this.smallestDataInterval,this.largestDataInterval)),U=l.convert(0),de=({datum:be,datumIndex:Ce,xValue:Fe,yValue:xe,cumulativeValue:De,phantom:Ee,currY:Je,prevY:ze,x:ct,width:Xe,isPositive:pt,yRange:Ge,labelText:lt,opacity:kt,featherRatio:wt,crossScale:Ve=1})=>{const ot=pt!==C,Lt=l.convert(Je),li=l.convert(ze),dt=l.convert(Ge),ci=this.getBarDirection()==="x",_s=Xe*.5*(1-Ve),Zi={x:ci?Math.min(Lt,li):ct+_s,y:ci?ct+_s:Math.min(Lt,li),width:ci?Math.abs(li-Lt):Xe*Ve,height:ci?Xe*Ve:Math.abs(li-Lt)},Ot=new Le(Zi.x,Zi.y,Zi.width,Zi.height),wi={x:ci?Math.min(U,dt):ct+_s,y:ci?ct+_s:Math.min(U,dt),width:ci?Math.abs(U-dt):Xe*Ve,height:ci?Xe*Ve:Math.abs(U-dt)},da=this.shouldFlipXY()?Zi.height:Zi.width,ap=y.spacing+(typeof y.padding=="number"?y.padding:0);return{series:this,itemId:Ee?Ls(d,Ee):d,datum:be,datumIndex:Ce,cumulativeValue:De,phantom:Ee,xValue:Fe,yValue:xe,yKey:d,xKey:c,capDefaults:{lengthRatioMultiplier:da,lengthMax:da},x:wi.x,y:wi.y,width:wi.width,height:wi.height,midPoint:{x:Zi.x+Zi.width/2,y:Zi.y+Zi.height/2},opacity:kt,featherRatio:wt,topLeftCornerRadius:ci!==ot,topRightCornerRadius:ot,bottomRightCornerRadius:ci===ot,bottomLeftCornerRadius:!ot,clipBBox:Ot,crisp:K,label:lt==null?void 0:{text:lt,...o$({isUpward:ot,isVertical:!ci,placement:y.placement,spacing:ap,rect:Zi})},missing:xe==null,focusable:!Ee}},te=[],V=[],W=[],ee=(be,Ce,Fe,xe,De,Ee,Je=0,ze=1)=>{const ct=N[be];if(ct==null)return;const Xe=r.data[be],pt=T[be],Ge=G==null?void 0:Number(G[be]),lt=pt>=0&&!Object.is(pt,-0);if(!Number.isFinite(De)||Ge!=null&&!Number.isFinite(Ge))return;const kt=y.enabled&&pt!=null?this.getLabelText(Ge??pt,Xe,d,"y",b,y,{datum:Xe,value:Ge??pt,xKey:c,yKey:d,xName:p,yName:g,legendItemName:m}):void 0,wt=Ge!=null&&Ge>pt,Ve=de({datum:Xe,datumIndex:be,xValue:ct,yValue:Ge??pt,cumulativeValue:Ge??De,phantom:!1,currY:Ge==null?De:xe+Ge,prevY:xe,x:Ce,width:Fe,isPositive:lt,yRange:Math.max(xe+(Ge??-1/0),Ee),labelText:kt,opacity:ze,featherRatio:Je,crossScale:wt?.6:void 0});if(V.push(Ve),W.push(Ve),Ge!=null){const ot=de({datum:r.data[be],datumIndex:be,xValue:ct,yValue:Ge,cumulativeValue:Ge,phantom:!0,currY:De,prevY:xe,x:Ce,width:Fe,isPositive:lt,yRange:Ee,labelText:void 0,opacity:ze,featherRatio:Je,crossScale:void 0});te.push(ot)}};if(H!=null){const{positiveIndices:be,positiveIndexData:Ce,negativeIndices:Fe,negativeIndexData:xe}=H,De=C?-1:1;for(let Ee=0;Ee<2;Ee+=1){const Je=Ee===0,ze=Je?be:Fe,ct=Je?Ce:xe,Xe=Je?Ws:Us,pt=Je?Us:Ws,[Ge,lt]=this.visibleRangeIndices("xValue",s.range,ze);for(let kt=Ge;kt<lt;kt+=1){const wt=kt*Wr,Ve=ct[wt+As],ot=ct[wt+js],Lt=ct[wt+Xe],li=ct[wt+pt];if(Ve===-1||N[li]==null||N[Lt]==null)continue;const dt=z(Math.trunc((Ve+ot)/2)),ci=Math.abs(z(ot)-z(Ve))+w;if(dt-ci<0||dt>q)continue;const _s=Math.abs(ot-Ve)+1,Zi=mc.is(a)?Math.min(a.bandwidth*Math.max(_s-1,1)/(a.step*_s),1):1;let Ot,wi,da=0;if(I)Ot=Number(P[Lt]),wi=Number(O[li]);else{const ap=Number(T[li]),VD=Number(T[Lt]);Ot=0,wi=ap,da=(Je?1:-1)*De*(1-VD/ap)}ee(li,dt,ci,Ot,wi,wi,da,Zi)}}}else if(t.type==="grouped"){const be=t.invalidData?.get(this.id),Ce=w,Fe=I?e.resolveProcessedDataIndexById(this,"yValue-range"):-1,xe=t.columnScopes.findIndex(ze=>ze.has(this.id)),{groups:De}=t,[Ee,Je]=bv(1,De.length,s.range,ze=>{const Xe=De[ze].keys[0];return this.xCoordinateRange(Xe)});for(let ze=Ee;ze<Je;ze+=1){const ct=De[ze],{aggregation:Xe}=ct,pt=ct.datumIndices[xe];if(pt!=null)for(const Ge of pt){const lt=ze+Ge,kt=z(lt);if(be?.[lt]===!0)continue;const wt=T[lt];if(wt==null)continue;const Ve=wt>=0&&!Object.is(wt,-0),ot=I?Number(P?.[lt]):0,Lt=I?Number(O?.[lt]):wt;let li=Lt;I&&(li=Xe[Fe][Ve?1:0]),ee(lt,kt,Ce,ot,Lt,li)}}}else{const be=t.invalidData?.get(this.id),Ce=w;let[Fe,xe]=this.visibleRangeIndices("xValue",s.range);t.input.count<1e3&&(Fe=0,xe=t.input.count);for(let De=Fe;De<xe;De+=1){if(be?.[De]===!0)continue;const Ee=T[De];if(Ee==null)continue;const Je=z(De),ze=Number(Ee);ee(De,Je,Ce,0,ze,ze)}}const pe=fD(this.properties.segmentation,s,o,this.chart.seriesRect,this.ctx.scene);return{itemId:d,nodeData:te.length>0?[...te,...V]:V,labelData:W,scales:this.calculateScaling(),visible:this.visible||B,groupScale:this.getScaling(this.groupScale),styles:nL(this.getItemStyle.bind(this)),segments:pe}}nodeFactory(){return new yP}getHighlightData(e,t){const i=e.find(n=>n.datum===t.datum&&!n.phantom);return i==null?void 0:[{...i}]}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>this.getDatumId(t))}makeStylerParams(e,t){const{id:i}=this,{cornerRadius:n,fill:s,fillOpacity:o,lineDash:r,lineDashOffset:a,stackGroup:l,stroke:c,strokeOpacity:d,strokeWidth:p,xKey:g,yKey:m}=this.properties,y=Gf(t??0);return{cornerRadius:n,fill:s,fillOpacity:o,highlightState:y,highlighted:e,lineDash:r,lineDashOffset:a,seriesId:i,stackGroup:l,stroke:c,strokeOpacity:d,strokeWidth:p,xKey:g,yKey:m}}makeItemStylerParams(e,t,i,n,s,o){const{id:r}=this,{xKey:a,yKey:l,stackGroup:c}=this.properties,d=t.dataSources.get(r)?.data?.[i],p=e.resolveColumnById(this,"yValue-raw",t)[i],g=e.getDomain(this,"xValue","key",t),m=e.getDomain(this,this.yCumulativeKey(e),"value",t),y=this.ctx.highlightManager?.getActiveHighlight(),b=this.getHighlightStateString(y,s,i),C=this.filterItemStylerFillParams(o.fill)??o.fill;return{seriesId:r,...AM(n,p,a,l,g,m),datum:d,xValue:n,yValue:p,stackGroup:c,highlighted:s,highlightState:b,...o,fill:C}}getStyle(e,t,i){const{cornerRadius:n,fill:s,fillOpacity:o,lineDash:r,lineDashOffset:a,stroke:l,strokeOpacity:c,strokeWidth:d,styler:p}=this.properties;let g={};if(!e&&p){const m=this.makeStylerParams(t,i);g=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.cachedCallWithContext(p,m)??{},{pick:!1})??{}}return{cornerRadius:g.cornerRadius??n,fill:g.fill??s,fillOpacity:g.fillOpacity??o,lineDash:g.lineDash??r,lineDashOffset:g.lineDashOffset??a,opacity:1,stroke:g.stroke??l,strokeOpacity:g.strokeOpacity??c,strokeWidth:g.strokeWidth??d}}getItemStyle(e,t,i){const{properties:n,dataModel:s,processedData:o}=this,{itemStyler:r}=n,a=this.getHighlightStyle(t,e,i);let l=_t(a,this.getStyle(e===void 0,t,i));if(r&&s!=null&&o!=null&&e!=null){const c=s.resolveKeysById(this,"xValue",o)[e],d=this.cachedDatumCallback(Ls(this.getDatumId({xValue:c,phantom:!1}),t?"highlight":"node"),()=>{const p=this.makeItemStylerParams(s,o,e,c,t,l);return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.callWithContext(r,p))});d&&(l=_t(d,l))}return l}updateDatumStyles(e){const t=this.ctx.highlightManager.getActiveHighlight();e.datumSelection.each((i,n)=>{if(!e.datumSelection.isGarbage(i)){const s=this.getHighlightState(t,e.isHighlight,n.datumIndex);n.style=this.getItemStyle(n.datumIndex,e.isHighlight,s)}})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const i=this.ctx.highlightManager.getActiveHighlight(),{shadow:n}=this.properties,s=this.getCategoryDirection()==="x",o=this.getShapeFillBBox(),r=this.getBarDirection();e.datumSelection.each((a,l)=>{const c=l.style??t.styles[this.getHighlightState(i,e.isHighlight,l.datumIndex)];Zl(a,c,o),a.drawingMode=e.drawingMode;const d=c.cornerRadius??0;a.topLeftCornerRadius=l.topLeftCornerRadius?d:0,a.topRightCornerRadius=l.topRightCornerRadius?d:0,a.bottomRightCornerRadius=l.bottomRightCornerRadius?d:0,a.bottomLeftCornerRadius=l.bottomLeftCornerRadius?d:0,a.visible=s?(l.clipBBox?.width??l.width)>0:(l.clipBBox?.height??l.height)>0,a.direction=r,a.featherRatio=l.featherRatio,a.crisp=l.crisp,a.fillShadow=n})}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=1})}updateLabelNodes(e){const{isHighlight:t=!1}=e,i={xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xKey,yKey:this.properties.yKey,yName:this.properties.yName??this.properties.yKey,legendItemName:this.properties.legendItemName??this.properties.xName??this.properties.xKey},n=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((s,o)=>{s.fillOpacity=this.getHighlightStyle(t,o?.datumIndex).opacity??1,s$(this,s,i,this.properties.label,o.label,t,n)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s}=this,{xKey:o,xName:r,yKey:a,yName:l,legendItemName:c,stackGroup:d,tooltip:p}=s,g=this.getCategoryAxis(),m=this.getValueAxis();if(!i||!n||!g||!m)return;const y=n.dataSources.get(this.id)?.data?.[e],b=i.resolveKeysById(this,"xValue",n)[e],C=i.resolveColumnById(this,"yValue-raw",n)[e];if(b==null)return;const w=this.getItemStyle(e,!1);return this.formatTooltipWithContext(p,{heading:this.getAxisValueText(g,"tooltip",b,y,o,c),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:a,value:this.getAxisValueText(m,"tooltip",C,y,a,c)}]},{seriesId:t,datum:y,title:l,xKey:o,xName:r,yKey:a,yName:l,legendItemName:c,stackGroup:d,...w,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:n,strokeOpacity:s,lineDash:o,lineDashOffset:r}=this.getStyle(!1,!1,0);return{marker:{fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:n,strokeOpacity:s,strokeWidth:i,lineDash:o,lineDashOffset:r}}}getLegendData(e){const{showInLegend:t}=this.properties;if(e!=="category")return[];const{id:i,ctx:{legendManager:n},visible:s}=this,{yKey:o,yName:r,legendItemName:a}=this.properties;return[{legendType:"category",id:i,itemId:o,seriesId:i,enabled:s&&n.getItemEnabled({seriesId:i,itemId:o}),label:{text:a??r??o},symbol:this.legendItemSymbol(),legendItemName:a,hideInLegend:!t}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t,annotationSelections:i}){const n=Bv(Ov(this.isVertical(),this.axes,"normal"),"unknown");hn(this.id,"nodes",this.ctx.animationManager,[e],n),Gi(this,"labels",this.ctx.animationManager,t),Gi(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(e){const{datumSelection:t,labelSelection:i,annotationSelections:n,contextData:s,previousContextData:o}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=F$(this.id,t,this.getDatumId.bind(this),e.contextData,o,this.processedData,this.processedDataUpdated),a=o==null?"fade":"normal",l=Bv(Ov(this.isVertical(),this.axes,a),"added");hn(this.id,"nodes",this.ctx.animationManager,[t],l,(c,d)=>this.getDatumId(d),r),(!r||r?.changed||!rh(s.groupScale,o?.groupScale))&&(Gi(this,"labels",this.ctx.animationManager,i),Gi(this,"annotations",this.ctx.animationManager,...n))}getDatumId(e){return Ls(e.xValue,e.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){const t=this.contextNodeData?.nodeData[e].clipBBox;return CP(this,t)}hasItemStylers(){return this.properties.styler!=null||this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}};iC.className="BarSeries";iC.type="bar";var O$={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:e=>new iC(e),stackable:!0,groupable:!0,predictAxis:tC,defaultAxes:R3,themeTemplate:{zoom:{autoScaling:{enabled:{$and:[{$eq:[{$path:"../axes"},"x"]},{$not:{$eq:[{$path:"/series/0/direction"},"horizontal"]}}]}}},series:{direction:"vertical",fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",Hu],["image",bc],["pattern",jo]]},stroke:{$palette:"stroke"},fillOpacity:1,strokeWidth:{$isUserOption:["./stroke",2,0]},lineDash:[0],lineDashOffset:0,label:{...Za,padding:{$isUserOption:["./spacing",0,8]},enabled:!1,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$if:[{$or:[{$eq:[{$path:"./placement"},"outside-start"]},{$eq:[{$path:"./placement"},"outside-end"]}]},{$ref:"textColor"},{$ref:"chartBackgroundColor"}]},placement:"inside-center"},shadow:{enabled:!1,color:Vh,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}},highlight:ju(),segmentation:qM}}},B$={type:"series",name:"bar",chartType:"cartesian",options:aD,create:e=>new iC(e)},nS=3,Tpe=5,jV=.05;function Ipe(e,t,i){const{xValues:n,yValues:s,xDomain:o,yDomain:r,xNeedsValueOf:a,yNeedsValueOf:l}=e,{x0:c,y0:d,x1:p,y1:g}=i;let m=0,y=1/0;const b=(c+p)/2,C=(d+g)/2;for(const w of t){const x=n[w],M=s[w];if(x==null||M==null)continue;const E=Jr(x,o.min,o.max,a),I=Jr(M,r.min,r.max,l),N=(E-b)**2+(I-C)**2;N<y&&(y=N,m=w)}return m}function kpe(e,t,i){const{xValues:n,yValues:s,xDomain:o,yDomain:r,xNeedsValueOf:a,yNeedsValueOf:l}=e,{x0:c,y0:d,x1:p,y1:g}=i;let m=0;for(const y of t){const b=n[y],C=s[y];if(b==null||C==null)continue;const w=Jr(b,o.min,o.max,a),x=Jr(C,r.min,r.max,l);w>=c&&w<=p&&x>=d&&x<=g&&(m+=1)}return m}function Lpe(e,t,i){const{xValues:n,yValues:s,xDomain:o,yDomain:r,xNeedsValueOf:a,yNeedsValueOf:l}=e,{x0:c,y0:d,x1:p,y1:g}=i,m=[{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]}],y=(c+p)/2,b=(d+g)/2;for(const w of t){const x=n[w],M=s[w];if(x==null||M==null)continue;const E=Jr(x,o.min,o.max,a),I=Jr(M,r.min,r.max,l),N=(E>y?1:0)+(I>b?2:0),T=m[N];T.indices.push(w),T.x0=Math.min(T.x0,E),T.y0=Math.min(T.y0,I),T.x1=Math.max(T.x1,E),T.y1=Math.max(T.y1,I)}const C=[];for(const w of m){const{indices:x,x0:M,x1:E,y0:I,y1:N}=w;if(x.length===0)continue;const T=ik(e,x,{x0:M,y0:I,x1:E,y1:N});C.push(T)}return C}function ik(e,t,i){const{x0:n,y0:s,x1:o,y1:r}=i;let l=t.length<Tpe&&o-n<jV&&r-s<jV||n===o&&s===r?null:Lpe(e,t,i);if(l?.length===1)return l[0];l?.length===0&&(l=null);const c=Math.hypot(o-n,r-s),d=Ipe(e,t,i);return{scale:c,x0:n,y0:s,x1:o,y1:r,indices:t,primaryDatumIndex:d,children:l}}function Ppe(e,t,i,n,s,o,r,a,l,c){const[d,p]=bf(e,o),[g,m]=bf(t,r),[y,b]=a,C={xValues:i,yValues:n,xDomain:{min:d,max:p},yDomain:{min:g,max:m},xNeedsValueOf:l,yNeedsValueOf:c},w=[];if(s!=null&&b>y){const x=Array.from({length:nS},()=>[]);for(let M=0;M<s.length;M+=1){const I=(s[M]-y)/(b-y),N=Math.trunc(I*nS);N>=0&&N<nS&&x[N].push(M)}for(let M=0;M<x.length;M+=1){const E=x[M],I=ik(C,E,{x0:0,y0:0,x1:1,y1:1});if(I!=null){const N=M/nS;w.push({sizeRatio:N,node:I})}}}else{const x=i.map((E,I)=>I),M=ik(C,x,{x0:0,y0:0,x1:1,y1:1});M!=null&&w.push({sizeRatio:0,node:M})}return w.length>0?{xValues:i,yValues:n,xd0:d,xd1:p,yd0:g,yd1:m,filters:w,xNeedsValueOf:l,yNeedsValueOf:c}:void 0}function G$(e,t,i,n,s,o){const{xRange:r,yRange:a,xVisibleRange:[l,c],yVisibleRange:[d,p],minSize:g,maxSize:m}=i,{xValues:y,yValues:b,xd0:C,xd1:w,yd0:x,yd1:M,xNeedsValueOf:E,yNeedsValueOf:I}=t,N=1/Math.min(r/(c-l),a/(p-d)),T={xValues:y,yValues:b,xDomain:{min:C,max:w},yDomain:{min:x,max:M},xNeedsValueOf:E,yNeedsValueOf:I};for(const{sizeRatio:P,node:O}of t.filters){const G=.5*(g+P*(m-g)),B=G*N,z=e*B,j=l-G/r,X=c+G/r,q=d-G/a,H=p+G/a,K=[O];for(;K.length>0;){const U=K.pop();if(!(U.x1<j||U.x0>X||U.y1<q||U.y0>H))if(e!==1&&U.scale<=z)n!=null&&(n.count+=1),s?.push({datumIndex:U.primaryDatumIndex,count:U.indices.length,area:(U.x1-U.x0)*(U.y1-U.y0),dilation:st(1,U.scale/B,e)});else if(U.children==null){const{indices:de}=U;if(n!=null){const V=U.x0>=l&&U.x1<=c&&U.y0>=d&&U.y1<=p?de.length:kpe(T,de,{x0:l,y0:d,x1:c,y1:p});n.count+=V}o?.push(...de)}else K.push(...U.children)}}}function JS(e,t,i){const n={count:0};return G$(e,t,i,n,void 0,void 0),n.count}var Npe=100,Fpe=12;function Ope(e,t,i){if(JS(1,e,t)<=i)return 1;let n=1,s=2;for(;JS(s,e,t)>i&&s<Npe;)n*=2,s*=2;for(let o=0;o<Fpe;o+=1){const r=(s+n)/2;JS(r,e,t)>i?n=r:s=r}return(n+s)/2}function Bpe(e,t,i){const n=[],s=[];return G$(e,t,i,void 0,n,s),{groupedAggregation:n,singleDatumIndices:s}}var wP=class extends Xs{constructor(){super(...arguments),this.maxSize=30}};A([k,Me()],wP.prototype,"maxSize",2);A([k,_1()],wP.prototype,"domain",2);var _$=class extends Yi{constructor(){super(...arguments),this.placement="top"}};A([k],_$.prototype,"placement",2);var ai=class extends Mc{constructor(){super(...arguments),this.label=new _$,this.tooltip=Qh(),this.maxRenderedItems=1/0,this.marker=new wP}};A([k],ai.prototype,"xKey",2);A([k],ai.prototype,"yKey",2);A([k],ai.prototype,"sizeKey",2);A([k],ai.prototype,"labelKey",2);A([k],ai.prototype,"xFilterKey",2);A([k],ai.prototype,"yFilterKey",2);A([k],ai.prototype,"sizeFilterKey",2);A([k],ai.prototype,"xName",2);A([k],ai.prototype,"yName",2);A([k],ai.prototype,"sizeName",2);A([k],ai.prototype,"labelName",2);A([k],ai.prototype,"title",2);A([Fs("marker.shape")],ai.prototype,"shape",2);A([Fs("marker.size")],ai.prototype,"size",2);A([Fs("marker.maxSize")],ai.prototype,"maxSize",2);A([Fs("marker.domain")],ai.prototype,"domain",2);A([Fs("marker.fill")],ai.prototype,"fill",2);A([Fs("marker.fillOpacity")],ai.prototype,"fillOpacity",2);A([Fs("marker.stroke")],ai.prototype,"stroke",2);A([Fs("marker.strokeWidth")],ai.prototype,"strokeWidth",2);A([Fs("marker.strokeOpacity")],ai.prototype,"strokeOpacity",2);A([Fs("marker.lineDash")],ai.prototype,"lineDash",2);A([Fs("marker.lineDashOffset")],ai.prototype,"lineDashOffset",2);A([Fs("marker.itemStyler")],ai.prototype,"itemStyler",2);A([k],ai.prototype,"styler",2);A([k],ai.prototype,"label",2);A([k],ai.prototype,"tooltip",2);A([k],ai.prototype,"maxRenderedItems",2);var Gpe=class extends oP{constructor(e,t,i,n){super(e,t,i,n),this.sizeKey=n.properties.sizeKey}},nC=class extends Xu{constructor(e){super({moduleCtx:e,propertyKeys:{...Qf,label:["labelKey"],size:["sizeKey"]},propertyNames:{...Jf,label:["labelName"],size:["sizeName"]},categoryKey:void 0,pickModes:[2,1,0],pathsPerSeries:[],datumSelectionGarbageCollection:!1,animationResetFns:{label:Xh,datum:hD},usesPlacedLabels:!0,clipFocusBox:!1}),this.NodeEvent=Gpe,this.properties=new ai,this.dataAggregation=void 0,this.sizeScale=new oh}get pickModeAxis(){return"main-category"}get type(){return super.type}get hasData(){return this.getHasData("xValue")}async processData(e){if(this.data==null||!this.visible)return;const t=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:n,yScaleType:s}=this.getScaleInformation({xScale:t,yScale:i}),o=this.sizeScale.type,{xKey:r,yKey:a,sizeKey:l,xFilterKey:c,yFilterKey:d,sizeFilterKey:p,labelKey:g,marker:m}=this.properties,{dataModel:y,processedData:b}=await this.requestDataModel(e,this.data,{props:[vi(r,n,{id:"xValue"}),vi(a,s,{id:"yValue"}),...c==null?[]:[vi(c,n,{id:"xFilterValue"})],...d==null?[]:[vi(d,s,{id:"yFilterValue"})],...p==null?[]:[vi(p,o,{id:"sizeFilterValue"})],...l?[vi(l,o,{id:"sizeValue"})]:[],...g?[vi(g,"category",{id:"labelValue"})]:[]]}),C=l?y.resolveProcessedDataIndexById(this,"sizeValue"):void 0,w=m.domain?[m.domain[0],m.domain[1]]:void 0;this.sizeScale.domain=w??(C==null?void 0:b.domain.values[C])??[],this.dataAggregation=this.aggregateData(y,b),this.animationState.transition("updateData")}xCoordinateRange(e,t,i){const{properties:n,sizeScale:s}=this,{size:o,sizeKey:r}=n,a=this.axes.x.scale.convert(e),l=r==null?void 0:this.dataModel.resolveColumnById(this,"sizeValue",this.processedData),d=.5*(l==null?o:s.convert(l[i]))*t;return[a-d,a+d]}yCoordinateRange(e,t,i){const{properties:n,sizeScale:s}=this,{size:o,sizeKey:r}=n,a=this.axes.y.scale.convert(e[0]),l=r==null?void 0:this.dataModel.resolveColumnById(this,"sizeValue",this.processedData),d=.5*(l==null?o:s.convert(l[i]))*t;return[a-d,a+d]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const n={x:"xValue",y:"yValue"},s=n[e],o=t.resolveProcessedDataDefById(this,s),r=t.getDomain(this,s,"value",i);if(o?.def.type==="value"&&o?.def.valueType==="category")return r;const l=n[e==="x"?"y":"x"],c=this.domainForClippedRange(e,[s],l);return vo($u(c))}getSeriesRange(e,t){return this.domainForVisibleRange("y",["yValue"],"xValue",t)}getVisibleItems(e,t,i){const{dataAggregation:n,axes:s}=this,o=s.x,r=s.y;if(n==null||o==null||r==null)return this.countVisibleItems("xValue",["yValue"],e,t,i);const a=this.aggregationOptions(o,r,e,t??[0,1]);return JS(0,n,a)}aggregateData(e,t){if(t.type==="grouped"||t.input.count<=this.properties.maxRenderedItems)return;const i=this.axes.x,n=this.axes.y;if(i==null||n==null)return;const s=i.scale,o=n.scale;if(!Ut.is(s)||!Ut.is(o))return;const{sizeScale:r,properties:a}=this,{sizeKey:l}=a,c=e.resolveColumnById(this,"xValue",t),d=e.resolveColumnById(this,"yValue",t),p=l?e.resolveColumnById(this,"sizeValue",t):void 0,g=e.getDomain(this,"xValue","value",t),m=e.getDomain(this,"yValue","value",t),y=l?r.domain:[0,0],b=e.resolveColumnNeedsValueOf(this,"xValue",t),C=e.resolveColumnNeedsValueOf(this,"yValue",t);return Ppe(s.type,o.type,c,d,p,g,m,y,b,C)}aggregationOptions(e,t,i=e.visibleRange,n=t.visibleRange){const{processedData:s,dataModel:o}=this,{sizeKey:r}=this.properties,[a,l]=this.getSizeRange(),c=Math.abs(e.range[1]-e.range[0]),d=Math.abs(t.range[1]-t.range[0]),p=Math.max(a,1),g=r?Math.max(l,1):p,m=e.scale,y=t.scale;return s!=null&&o!=null&&(Ut.is(m)&&(i=FI(i,m.domain.map(us),o.getDomain(this,"xValue","value",s).map(us))),Ut.is(y)&&(n=FI(n,y.domain.map(us),o.getDomain(this,"yValue","value",s).map(us)))),{xRange:c,yRange:d,minSize:p,maxSize:g,xVisibleRange:i,yVisibleRange:n}}createNodeData(){const{axes:e,dataModel:t,processedData:i,sizeScale:n,visible:s}=this,{xKey:o,yKey:r,sizeKey:a,xFilterKey:l,yFilterKey:c,sizeFilterKey:d,labelKey:p,xName:g,yName:m,sizeName:y,labelName:b,label:C,legendItemName:w,marker:x,maxRenderedItems:M}=this.properties,{enabled:E,placement:I}=C,N=Rn.anchor(x.shape),T=e.x,P=e.y;if(!(t&&i&&T&&P))return;const O=!this.ctx.animationManager.isSkipped(),G=t.resolveColumnById(this,"xValue",i),B=t.resolveColumnById(this,"yValue",i),z=a==null?void 0:t.resolveColumnById(this,"sizeValue",i),j=p==null?void 0:t.resolveColumnById(this,"labelValue",i),X=l==null?void 0:t.resolveColumnById(this,"xFilterValue",i),q=c==null?void 0:t.resolveColumnById(this,"yFilterValue",i),H=d==null?void 0:t.resolveColumnById(this,"sizeFilterValue",i);let K;p?K=[]:a?K=t.getDomain(this,"sizeValue","value",i):K=[];const U=T.scale,de=P.scale,te=(U.bandwidth??0)/2,V=(de.bandwidth??0)/2,W=[];n.range=this.getSizeRange();const ee=yo(C),pe=i.dataSources.get(this.id)?.data;if(pe==null)return;const be=gf(C),Ce=(xe,De,Ee,Je)=>{const ze=pe[xe],ct=G[xe],Xe=B[xe],pt=z?.[xe],Ge=U.convert(ct)+te,lt=de.convert(Xe)+V;let kt;X!=null&&q!=null&&(kt=X[xe]===ct&&q[xe]===Xe,H!=null&&kt&&(kt=H[xe]===pt));let wt;if(E){let Lt,li,dt;p&&j?(Lt=j[xe],li=p,dt="label"):a?(Lt=pt,li=a,dt="size"):(Lt=Xe,li=r,dt="y");const ci=this.getLabelText(Lt,ze,li,dt,K,C,{value:Lt,datum:ze,xKey:o,yKey:r,sizeKey:a,labelKey:p,xName:g,yName:m,sizeName:y,labelName:b,legendItemName:w});let{width:_s,height:Zi}=ht(ci)?th(ci,C):ee.measureLines(String(ci));_s+=be.left+be.right,Zi+=be.bottom+be.top,wt={text:ci,width:_s,height:Zi}}else wt={text:"",width:0,height:0};const Ve=pt==null?n.range[0]:n.convert(pt),ot={x:Ge,y:lt,size:Math.sqrt(Ee)*Ve};W.push({series:this,itemId:r,yKey:r,xKey:o,datum:ze,datumIndex:xe,xValue:ct,yValue:Xe,sizeValue:pt,capDefaults:{lengthRatioMultiplier:x.getDiameter(),lengthMax:1/0},point:ot,midPoint:{x:Ge,y:lt},label:wt,anchor:N,placement:I,count:De,dilation:Ee,area:Je,selected:kt})},{dataAggregation:Fe}=this;if(s)if(Fe==null)for(let xe=0;xe<pe.length;xe++)Ce(xe,1,1,0);else{const xe=this.aggregationOptions(T,P),De=Ope(Fe,xe,M),{groupedAggregation:Ee,singleDatumIndices:Je}=Bpe(De,Fe,xe);for(const{datumIndex:ze,count:ct,dilation:Xe,area:pt}of Ee)Ce(ze,ct,Xe,pt);for(const ze of Je)Ce(ze,1,1,0)}return{itemId:r,nodeData:W,labelData:E?W:[],scales:this.calculateScaling(),visible:this.visible||O,styles:gD(this,this.properties,x)}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,{sizeKey:n}=this.properties;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());let s;return n&&(s=o=>Ls(o.xValue,o.yValue,o.sizeValue,_n(o.label.text))),i.update(t,void 0,s)}updateDatumStyles(e){const{datumSelection:t,isHighlight:i}=e,{xKey:n,yKey:s,sizeKey:o,labelKey:r,marker:a}=this.properties,l={xKey:n,yKey:s,sizeKey:o,labelKey:r},c=this.ctx.highlightManager.getActiveHighlight();t.each((d,p)=>{if(!t.isGarbage(d)){const g=this.getHighlightState(c,e.isHighlight,p.datumIndex),m=this.getStyle(e.isHighlight,g);p.style=this.getMarkerStyle(a,p,l,{isHighlight:i,highlightState:g,resolveMarkerSubPath:[]},m)}})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const{datumSelection:i,isHighlight:n,drawingMode:s}=e;this.sizeScale.range=this.getSizeRange();const o=this.getShapeFillBBox(),r=this.dataAggregation!=null,a=this.ctx.highlightManager.getActiveHighlight();i.each((l,c,d)=>{const{point:{size:p},count:g,area:m,dilation:y}=c;let b=c.style??t.styles[this.getHighlightState(a,n,c.datumIndex)];if(b={...b},b.size=p,y>1){const C=b.fillOpacity??0,w=.269669+683e-6*g+-37.534348*m+.004449*g*m+-0*g**2+44.428603*m**2;b.fillOpacity=st(C/y,C/.1*w,1)}this.applyMarkerStyle(b,l,c.point,o,{selected:c.selected}),l.drawingMode=s,l.zIndex=r?[-g,d]:0}),n||this.properties.marker.markClean()}updatePlacedLabelData(e){this.labelSelection.update(e.map(t=>({...t.datum,point:{x:t.x,y:t.y,size:t.datum.point.size}})),t=>{t.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{isHighlight:t=!1}=e,i=this.ctx.highlightManager?.getActiveHighlight(),n=this.makeLabelFormatterParams();e.labelSelection.each((s,o)=>{const r=Zh(this,o,n,this.properties.label,t,i);s.text=o.label.text,s.fill=r.color,s.x=o.point?.x??0,s.y=o.point?.y??0,s.fontStyle=r.fontStyle,s.fontWeight=r.fontWeight,s.fontSize=r.fontSize,s.fontFamily=r.fontFamily,s.textBaseline="top",s.fillOpacity=this.getHighlightStyle(t,o.datumIndex).opacity??1,s.setBoxing(r)})}makeStylerParams(e,t){const{id:i,properties:{size:n,maxSize:s,shape:o,fill:r,fillOpacity:a,lineDash:l,lineDashOffset:c,stroke:d,strokeOpacity:p,strokeWidth:g,xKey:m,yKey:y,sizeKey:b,labelKey:C}}=this,w=Gf(t??0);return this.type==="bubble"?{highlightState:w,highlighted:e,size:n,maxSize:s,shape:o,fill:r,fillOpacity:a,lineDash:l,lineDashOffset:c,seriesId:i,sizeKey:b,stroke:d,strokeOpacity:p,strokeWidth:g,xKey:m,yKey:y,labelKey:C}:this.type==="scatter"?{highlightState:w,highlighted:e,size:n,shape:o,fill:r,fillOpacity:a,lineDash:l,lineDashOffset:c,seriesId:i,stroke:d,strokeOpacity:p,strokeWidth:g,xKey:m,yKey:y,labelKey:C}:this.type}makeLabelFormatterParams(){const{xKey:e,xName:t,yKey:i,yName:n,sizeKey:s,sizeName:o,labelKey:r,labelName:a,legendItemName:l}=this.properties;return{xKey:e,xName:t,yKey:i,yName:n,sizeKey:s,sizeName:o,labelKey:r,labelName:a,legendItemName:l}}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:s,properties:o,ctx:r}=this,{formatManager:a}=r,{xKey:l,xName:c,yKey:d,yName:p,sizeKey:g,sizeName:m,labelKey:y,labelName:b,title:C,tooltip:w,marker:x,legendItemName:M}=o,E=s.x,I=s.y;if(!i||!n||!E||!I)return;const N=n.dataSources.get(this.id)?.data?.[e],T=i.resolveColumnById(this,"xValue",n)[e],P=i.resolveColumnById(this,"yValue",n)[e];if(T==null)return;const O=[];if(this.isLabelEnabled()&&y!=null){const B=i.resolveColumnById(this,"labelValue",n)[e],z=a.format(this.callWithContext.bind(this),{type:"category",value:B,datum:N,seriesId:t,legendItemName:M,key:y,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});O.push({label:b,fallbackLabel:y,value:z??df(B)})}if(O.push({label:c,fallbackLabel:l,value:this.getAxisValueText(E,"tooltip",T,N,l,M)},{label:p,fallbackLabel:d,value:this.getAxisValueText(I,"tooltip",P,N,d,M)}),g!=null){const B=i.resolveColumnById(this,"sizeValue",n)[e],z=i.getDomain(this,"sizeValue","value",n),j=a.format(this.callWithContext.bind(this),{type:"number",value:B,datum:N,seriesId:t,legendItemName:M,key:g,source:"tooltip",property:"size",boundSeries:this.getFormatterContext("size"),domain:z,fractionDigits:void 0});O.push({label:m,fallbackLabel:g,value:j??df(B)})}const G=this.getMarkerStyle(x,{datum:N,datumIndex:e},{xKey:l,yKey:d,sizeKey:g,labelKey:y,highlighted:!0},{resolveMarkerSubPath:[]});return this.formatTooltipWithContext(w,{title:C,symbol:this.legendItemSymbol(),data:O},{seriesId:t,datum:N,title:d,xKey:l,xName:c,yKey:d,yName:p,sizeKey:g,sizeName:m,labelKey:y,labelName:b,legendItemName:M,...G,...this.getModuleTooltipParams()})}legendItemSymbol(){const e=this.getStyle(!1);return{marker:this.getMarkerStyle(this.properties.marker,{},void 0,{isHighlight:!1,checkForHighlight:!1,resolveMarkerSubPath:[]},e)}}getLegendData(){const{id:e,ctx:{legendManager:t},visible:i}=this,{yKey:n,yName:s,legendItemName:o,title:r,showInLegend:a}=this.properties;return[{legendType:"category",id:e,itemId:n,seriesId:e,enabled:i&&t.getItemEnabled({seriesId:e,itemId:n}),label:{text:o??r??s??n},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!a}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){E$(this,this.ctx.animationManager,e),Gi(this,"labels",this.ctx.animationManager,t)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Rn}getStyle(e,t){const{properties:i}=this;let n={};if(i.styler){const s=this.makeStylerParams(e,t),o=this.cachedCallWithContext(i.styler,s)??{};n=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],o,{pick:!1})??{}}return{fill:n.fill??i.fill,fillOpacity:n.fillOpacity??i.fillOpacity,lineDash:n.lineDash??i.lineDash,lineDashOffset:n.lineDashOffset??i.lineDashOffset,shape:n.shape??i.shape,size:n.size??i.size,maxSize:n.maxSize??i.maxSize,stroke:n.stroke??i.stroke,strokeOpacity:n.strokeOpacity??i.strokeOpacity,strokeWidth:n.strokeWidth??i.strokeWidth}}getSizeRange(){const{size:e,maxSize:t}=this.getStyle(!1);return[e,t]}getFormattedMarkerStyle(e){const{xKey:t,yKey:i,sizeKey:n,labelKey:s,marker:o}=this.properties;return this.getMarkerStyle(o,e,{xKey:t,yKey:i,sizeKey:n,labelKey:s},{resolveMarkerSubPath:[]})}computeFocusBounds(e){return pD(this,e)}hasItemStylers(){const{styler:e,itemStyler:t,marker:i,label:n}=this.properties;return!!(e??t??i.itemStyler??n.itemStyler)}initQuadTree(e){yD(e,this.datumNodesIter())}pickNodeDataClosestDatum(e){return vD(this,e)}};nC.className="BubbleSeries";nC.type="bubble";var _pe={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:e=>new nC(e),predictAxis:fP,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",Ub],["image",bc],["pattern",jo]]},stroke:{$palette:"stroke"},fillOpacity:.8,maxRenderedItems:1e4,label:{...Za,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:ju()}}},V$={type:"series",name:"bubble",chartType:"cartesian",options:bde,create:e=>new nC(e)},kn=class extends Mc{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new rl,this.label=new Yi,this.tooltip=Qh()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,cornerRadius:a}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,cornerRadius:a,opacity:1}}};A([k],kn.prototype,"xKey",2);A([k],kn.prototype,"yKey",2);A([k],kn.prototype,"xName",2);A([k],kn.prototype,"yName",2);A([k],kn.prototype,"fill",2);A([k],kn.prototype,"fillOpacity",2);A([k],kn.prototype,"stroke",2);A([k],kn.prototype,"strokeWidth",2);A([k],kn.prototype,"strokeOpacity",2);A([k],kn.prototype,"lineDash",2);A([k],kn.prototype,"lineDashOffset",2);A([k],kn.prototype,"cornerRadius",2);A([k],kn.prototype,"areaPlot",2);A([k],kn.prototype,"bins",2);A([k],kn.prototype,"aggregation",2);A([k],kn.prototype,"binCount",2);A([k],kn.prototype,"shadow",2);A([k],kn.prototype,"label",2);A([k],kn.prototype,"tooltip",2);var WV=10,bD=class extends Xu{constructor(e){super({moduleCtx:e,propertyKeys:Qf,propertyNames:Jf,categoryKey:void 0,pickModes:[1,0],datumSelectionGarbageCollection:!0,animationResetFns:{datum:Gv,label:Xh}}),this.properties=new kn,this.calculatedBins=[]}get hasData(){return this.calculatedBins.length>0}deriveBins(e){const t=Ib(e[0],e[1],WV).ticks,i=xv(e[0],e[1],WV),[n]=t,s=o=>[o,o+i];return[[n-i,n],...t.map(s)]}calculateNiceBins(e,t){const i=Math.floor(e[0]),n=e[1],s=t||1,{start:o,binSize:r}=this.calculateNiceStart(i,n,s);return this.getBins(o,n,r,s)}getBins(e,t,i,n){const s=[],o=this.calculatePrecision(i);for(let r=0;r<n;r++){const a=Math.round((e+r*i)*o)/o;let l=Math.round((e+(r+1)*i)*o)/o;r===n-1&&(l=Math.max(l,t)),s[r]=[a,l]}return s}calculatePrecision(e){let t=10;if(Number.isFinite(e)&&e>0)for(;e<1;)t*=10,e*=10;return t}calculateNiceStart(e,t,i){const n=Math.abs(t-e)/i,s=Math.floor(Math.log10(n)),o=Math.pow(10,s);return{start:Math.floor(e/o)*o,binSize:n}}async processData(e){const{visible:t}=this,{xKey:i,yKey:n,areaPlot:s,aggregation:o}=this.properties,r=this.axes.x?.scale,a=this.axes.y?.scale,{xScaleType:l,yScaleType:c}=this.getScaleInformation({yScale:a,xScale:r}),d=t?{}:{forceValue:0},p=[Mu(i,l),Q3];if(n){let x=WI("groupAgg",{visible:t});o==="count"||(o==="sum"?x=V3("groupAgg",{visible:t}):o==="mean"&&(x=z3("groupAgg",{visible:t}))),s&&(x=UI("groupAgg",x)),p.push(vi(n,c,{invalidValue:void 0,...d}),x)}else{p.push(Y3("count"));let x=WI("groupAgg",{visible:t});s&&(x=UI("groupAgg",x)),p.push(x)}let g=[];const m=x=>{const M=vo(x.domain.keys[0]);if(M.length===0)return x.domain.groups=[],()=>[];const E=av(this.properties.binCount)?this.calculateNiceBins(M,this.properties.binCount):this.properties.bins??this.deriveBins(M),I=E.length;return g=[...E],N=>{let T=N[0];if(Ph(T)&&(T=T.getTime()),!av(T))return[];for(let P=0;P<I;P++){const O=E[P];if(T>=O[0]&&T<O[1]||P===I-1&&T<=O[1])return O}return[]}},{dataModel:y,processedData:b}=await this.requestDataModel(e,this.data,{props:p,groupByFn:m}),C=b,w=new Map;for(const[x,M]of C.groups.entries()){const E=M.keys;w.set(Ls(...E),{group:M,groupIndex:x})}this.calculatedBins=g.map(x=>{const M=w.get(Ls(...x));if(M){const{group:E,groupIndex:I}=M,[[N,T]=[0,0]]=E.aggregation,P=[...y.forEachDatum(this,C,E,I)],O=this.frequency(E),G=N+T;return{domain:x,datum:P,groupIndex:I,frequency:O,total:G}}else return{domain:x,datum:[],groupIndex:-1,frequency:0,total:0}}),this.animationState.transition("updateData")}xCoordinateRange(){return[Number.NaN,Number.NaN]}yCoordinateRange(){return[Number.NaN,Number.NaN]}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i||!this.calculatedBins.length)return[];const n=i.getDomain(this,"groupAgg","aggregate",t),s=this.calculatedBins[0].domain[0],o=this.calculatedBins[(this.calculatedBins?.length??0)-1].domain[1];return vo(e==="x"?[s,o]:n)}getSeriesRange(e,[t,i]){const{dataModel:n,processedData:s}=this;if(!n||s?.type!=="grouped")return[Number.NaN,Number.NaN];const o=this.axes.x.scale,r=0;let a=-1/0;for(const{keys:l,aggregation:c}of s.groups){const[[d,p]=[0,0]]=c,[g,m]=l,[y,b]=Gn([o.convert(g),o.convert(m)]);if(b>=t&&y<=i){const C=d+p;a=Math.max(a,C)}}return r>a?[Number.NaN,Number.NaN]:[r,a]}frequency(e){return e.datumIndices.reduce((t,i)=>t+i.length,0)}createNodeData(){const{axes:e,processedData:t,dataModel:i}=this,n=e.x,s=e.y;if(!n||!s||!i)return;const{scale:o}=n,{scale:r}=s,{xKey:a,yKey:l,xName:c,yName:d,label:p}=this.properties,g=!this.ctx.animationManager.isSkipped(),m=[],y={itemId:this.properties.yKey??this.id,nodeData:m,labelData:m,scales:this.calculateScaling(),animationValid:!0,visible:this.visible||g,styles:nL(this.getItemStyle.bind(this))};if(t==null||t.type!=="grouped")return y;for(const{domain:b,datum:C,groupIndex:w,frequency:x,total:M}of this.calculatedBins){const[E,I]=b,N=o.convert(E),T=o.convert(I),P=r.convert(0),O=r.convert(M),G=Math.abs(T-N),B=Math.abs(O-P),z=Math.min(N,T),j=Math.min(P,O);let X;p.enabled&&M!==0&&(X={x:z+G/2,y:j+B/2,text:this.getLabelText(M,C,l,"y",[],p,{value:M,datum:C,xKey:a,yKey:l,xName:c,yName:d})});const q={x:z+G/2,y:j+B/2},H=s.isReversed();m.push({series:this,datumIndex:w,datum:C,aggregatedValue:M,frequency:x,domain:b,yKey:l,xKey:a,x:z,y:j,xValue:N,yValue:O,width:G,height:B,midPoint:q,topLeftCornerRadius:!H,topRightCornerRadius:!H,bottomRightCornerRadius:H,bottomLeftCornerRadius:H,label:X,crisp:!0})}return m.sort((b,C)=>b.x-C.x),y}nodeFactory(){return new Tn}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e;return i.update(t,void 0,n=>Ls(...n.domain))}getItemStyle(e,t,i){const{properties:n}=this,s=this.getHighlightStyle(t,e,i);return _t(s,n.getStyle())}updateDatumStyles(e){const{datumSelection:t,isHighlight:i}=e;t.each((n,s)=>{t.isGarbage(n)||(s.style=this.getItemStyle(s.datumIndex,i))})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const i=this.ctx.highlightManager.getActiveHighlight(),{shadow:n}=this.properties,s=this.getShapeFillBBox();e.datumSelection.each((o,r)=>{const a=r.style??t.styles[this.getHighlightState(i,e.isHighlight,r.datumIndex)],{cornerRadius:l=0}=a,{topLeftCornerRadius:c,topRightCornerRadius:d,bottomRightCornerRadius:p,bottomLeftCornerRadius:g}=r;Zl(o,a,s),o.topLeftCornerRadius=c?l:0,o.topRightCornerRadius=d?l:0,o.bottomRightCornerRadius=p?l:0,o.bottomLeftCornerRadius=g?l:0,o.crisp=r.crisp,o.fillShadow=n})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,n=>{n.pointerEvents=1,n.textAlign="center",n.textBaseline="middle"})}updateLabelNodes(e){const t=this.isLabelEnabled(),i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((n,s)=>{const o=Zh(this,s,this.properties,this.properties.label,!1,i),{enabled:r,fontStyle:a,fontWeight:l,fontSize:c,fontFamily:d,color:p}=o;r&&t&&s?.label?(n.text=s.label.text,n.x=s.label.x,n.y=s.label.y,n.fontStyle=a,n.fontWeight=l,n.fontFamily=d,n.fontSize=c,n.fill=p,n.visible=!0,n.fillOpacity=this.getHighlightStyle(!1,s.datumIndex).opacity??1,n.setBoxing(o)):n.visible=!1})}initQuadTree(e){const{value:t}=this.contentGroup.children().next();t instanceof ut&&yD(e,t.children())}pickNodeClosestDatum(e){return vD(this,e)}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:s,properties:o,ctx:{localeManager:r}}=this,{xKey:a,xName:l,yKey:c,yName:d,tooltip:p,legendItemName:g}=o,m=s.x,y=s.y;if(!i||n?.type!=="grouped"||!m||!y)return;const b=n.groups[e],{aggregation:C,keys:w}=b,[[x,M]=[0,0]]=C,E=this.frequency(b),I=w,[N,T]=I,P=x+M,O={data:[...i.forEachDatum(this,n,b,e)],aggregatedValue:P,frequency:E,domain:I},G=[{label:l,fallbackLabel:a,value:`${this.getAxisValueText(m,"tooltip",N,O,a,g)} - ${this.getAxisValueText(m,"tooltip",T,O,a,g)}`},{label:r.t("seriesHistogramTooltipFrequency"),value:this.getAxisValueText(y,"tooltip",E,O,c,g)}];if(c!=null){let B;switch(o.aggregation){case"sum":B=r.t("seriesHistogramTooltipSum",{yName:d??c});break;case"mean":B=r.t("seriesHistogramTooltipMean",{yName:d??c});break;case"count":B=r.t("seriesHistogramTooltipCount",{yName:d??c});break}G.push({label:B,value:this.getAxisValueText(y,"tooltip",P,O,c,g)})}return this.formatTooltipWithContext(p,{symbol:this.legendItemSymbol(),data:G},{seriesId:t,datum:O,title:d,xKey:a,xName:l,yKey:c,yName:d,xRange:[N,T],frequency:E,...this.getItemStyle(e,!1)})}legendItemSymbol(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r}=this.properties;return{marker:{fill:zi(e)??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:t,strokeOpacity:s,strokeWidth:n,lineDash:o,lineDashOffset:r}}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:n}=this,{xKey:s,yName:o,showInLegend:r}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:n&&i.getItemEnabled({seriesId:t,itemId:s}),label:{text:o??s??"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!r}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){const i=Bv(Ov(!0,this.axes,"normal"),"unknown");hn(this.id,"datums",this.ctx.animationManager,[e],i),Gi(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){const t=Bv(Ov(!0,this.axes,"normal"),"added"),i={changed:!0,added:new Set,removed:new Set};hn(this.id,"datums",this.ctx.animationManager,[e.datumSelection],t,(n,s)=>Ls(...s.domain),i),i?.changed&&Gi(this,"labels",this.ctx.animationManager,e.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){return CP(this,this.contextNodeData?.nodeData[e])}hasItemStylers(){return this.properties.label.itemStyler!=null}};bD.className="HistogramSeries";bD.type="histogram";var Vpe={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:e=>new bD(e),predictAxis:tC,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",Hu],["image",bc],["pattern",jo]]},stroke:{$palette:"stroke"},strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{...Za,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},shadow:{enabled:!1,color:Vh,xOffset:3,yOffset:3,blur:5},highlight:ju()}}},z$={type:"series",name:"histogram",chartType:"cartesian",enterprise:!0,options:Cde,create:e=>new bD(e)},zpe=1e3,Hpe=10;function UV(e,t,i,n,s,o,r,a){const l=e[o];if(l==null)return!1;const c=Number.isFinite(t)?Jr(l,t,i,r):Tv(o,a),d=tP(c,s);return o===n[d+As]||o===n[d+js]||o===n[d+Ws]||o===n[d+Us]}function jpe(e,t,i,n,s,o){const r=t.length;if(r<zpe)return;const[a,l]=bf(e,n);let c=dD(t,a,l,{xNeedsValueOf:s});const{indexData:d,valueData:p}=Iv(t,i,i,a,l,c,{xNeedsValueOf:s,yNeedsValueOf:o});let g=[];for(let y=0;y<r;y++)UV(t,a,l,d,c,y,s,r)&&g.push(y);const m=[{maxRange:c,indices:g}];for(;g.length>Hpe&&c>64;)({maxRange:c}=kv(d,p,c,{inPlace:!0})),g=g.filter(y=>UV(t,a,l,d,c,y,s,r)),m.push({maxRange:c,indices:g});return m.reverse(),m}var vn=class extends Mc{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new em,this.marker=new Xs,this.label=new Yi,this.tooltip=Qh(),this.connectMissingData=!1,this.sparklineMode=!1}};A([k],vn.prototype,"xKey",2);A([k],vn.prototype,"yKey",2);A([k],vn.prototype,"xName",2);A([k],vn.prototype,"yName",2);A([k],vn.prototype,"yFilterKey",2);A([k],vn.prototype,"stackGroup",2);A([k],vn.prototype,"normalizedTo",2);A([k],vn.prototype,"title",2);A([k],vn.prototype,"stroke",2);A([k],vn.prototype,"strokeWidth",2);A([k],vn.prototype,"strokeOpacity",2);A([k],vn.prototype,"lineDash",2);A([k],vn.prototype,"lineDashOffset",2);A([k],vn.prototype,"interpolation",2);A([k],vn.prototype,"styler",2);A([k],vn.prototype,"marker",2);A([k],vn.prototype,"label",2);A([k],vn.prototype,"tooltip",2);A([k],vn.prototype,"connectMissingData",2);A([k],vn.prototype,"sparklineMode",2);var Wpe=.25,Upe=bb(jpe),sC=class extends Xu{constructor(e){super({moduleCtx:e,propertyKeys:Qf,propertyNames:Jf,categoryKey:"xValue",pickModes:[2,1,0],datumSelectionGarbageCollection:!1,segmentedDataNodes:!1,animationResetFns:{path:gP({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:Xh,datum:(t,i)=>({...hD(),...Fv(t,i)})},clipFocusBox:!1}),this.properties=new vn,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}get hasData(){return this.getHasData("xValue")}isNormalized(){return this.properties.normalizedTo!=null}async processData(e){if(this.data==null)return;const{data:t,visible:i,seriesGrouping:{groupIndex:n=this.id,stackCount:s=0}={}}=this,{xKey:o,yKey:r,yFilterKey:a,connectMissingData:l,normalizedTo:c}=this.properties,d=!this.ctx.animationManager.isSkipped(),p=this.axes.x?.scale,g=this.axes.y?.scale,{isContinuousX:m,xScaleType:y,yScaleType:b}=this.getScaleInformation({xScale:p,yScale:g}),C=s>1||c!=null,w={invalidValue:null};l&&C&&(w.invalidValue=0),C&&!i&&(w.forceValue=0);const x={value:`area-stack-${n}-yValue`,marker:`area-stack-${n}-yValues-marker`},M=[];(!m||C)&&M.push(Mu(o,y,{id:"xKey"})),M.push(vi(o,y,{id:"xValue"}),vi(r,b,{id:"yValueRaw",...w,invalidValue:void 0})),a!=null&&M.push(vi(a,b,{id:"yFilterRaw"})),C&&M.push(...Ev(r,"normal",{id:"yValueCumulative",...w,groupId:x.marker},b)),Ny(c)&&M.push(vi(r,b,{id:"yValue",...w,groupId:x.value}),sD(Object.values(x),c)),d&&(M.push(Qb(m?["xValue"]:void 0)),this.processedData&&M.push(oD(this.id,this.processedData)));const{dataModel:E,processedData:I}=await this.requestDataModel(e,t,{props:M,groupByKeys:C,groupByData:!C});this.dataAggregationFilters=this.aggregateData(E,I),this.animationState.transition("updateData")}yValueKey(){return this.isNormalized()?"yValue":"yValueRaw"}yCumulativeKey(e){return e.type==="grouped"?"yValueCumulative":this.yValueKey()}xCoordinateRange(e,t){const{marker:i}=this.properties,n=this.axes.x.scale.convert(e),s=i.enabled?.5*i.size*t:0;return[n-s,n+s]}yCoordinateRange(e,t){const{marker:i}=this.properties,n=this.axes.y.scale.convert(e[0]),s=i.enabled?.5*i.size*t:0;return[n-s,n+s]}getSeriesDomain(e){const{dataModel:t,processedData:i,axes:n}=this;if(!t||!i)return[];const s=n.y;if(e==="x"){const r=t.resolveProcessedDataDefById(this,"xValue"),a=t.getDomain(this,"xValue","value",i);return r?.def.type==="value"&&r.def.valueType==="category"?a:vo($u(a))}const o=this.domainForClippedRange("y",[this.yCumulativeKey(i)],"xValue");if(this.isNormalized()&&s instanceof Yo&&!(s instanceof jh)){const r=Number.isFinite(o[1]-o[0])?[Math.min(o[0],0),Math.max(o[1],0)]:[];return vo(r)}else return vo(o)}getSeriesRange(e,t){return this.domainForVisibleRange("y",[this.yCumulativeKey(this.processedData)],"xValue",t)}getZoomRangeFittingItems(e,t,i){return this.zoomFittingVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}aggregateData(e,t){if(t.type!=="ungrouped"||Uf(t))return;const i=this.axes.x;if(i==null)return;const{scale:n}=i,s=e.resolveColumnById(this,"xValue",t),o=e.resolveColumnById(this,this.yCumulativeKey(t),t),r=e.getDomain(this,"xValue","value",t),a=e.resolveColumnNeedsValueOf(this,"xValue",t),l=e.resolveColumnNeedsValueOf(this,this.yCumulativeKey(t),t);return Upe(n.type,s,o,r,a,l)}createNodeData(){const{dataModel:e,processedData:t,axes:i,dataAggregationFilters:n}=this,s=i.x,o=i.y;if(!e||!t||!s||!o)return;const{xKey:r,xName:a,yFilterKey:l,yKey:c,yName:d,marker:p,label:g,connectMissingData:m,interpolation:y,legendItemName:b}=this.properties,C=s.scale,w=o.scale,x=(C.bandwidth??0)/2,M=(w.bandwidth??0)/2,E=p.enabled?p.size:0,I=t.dataSources.get(this.id)?.data??[],N=e.resolveColumnById(this,"xValue",t),T=e.resolveColumnById(this,"yValueRaw",t),P=e.resolveColumnById(this,this.yCumulativeKey(t),t),O=l==null?void 0:e.resolveColumnById(this,"yFilterRaw",t),G=this.getSeriesDomain("y"),B={lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},z=[],j=[],X=Ce=>{const Fe=I[Ce],xe=N[Ce],De=T[Ce],Ee=P[Ce],Je=O?.[Ce],ze=C.convert(xe)+x,ct=w.convert(Ee)+M;if(!Number.isFinite(ze))return;if(De!=null){const pt=g.enabled?this.getLabelText(De,Fe,c,"y",G,g,{value:De,datum:Fe,xKey:r,yKey:c,xName:a,yName:d,legendItemName:b}):void 0;z.push({series:this,datum:Fe,datumIndex:Ce,yKey:c,xKey:r,point:{x:ze,y:ct,size:E},midPoint:{x:ze,y:ct},cumulativeValue:Ee,yValue:De,xValue:xe,capDefaults:B,labelText:pt,selected:Je})}const Xe=j.at(-1);if(De!=null){const pt={point:{x:ze,y:ct},xDatum:xe,yDatum:De};Array.isArray(Xe)?Xe.push(pt):Xe==null?j.push([pt]):(Xe.skip+=1,j.push([pt]))}else m||(Array.isArray(Xe)||Xe==null?j.push({skip:0}):Xe.skip+=1)},[q,H]=C.range,K=Math.abs(H-q),de=n?.find(Ce=>Ce.maxRange>K)?.indices;let[te,V]=this.visibleRangeIndices("xValue",s.range,de);te=Math.max(te-1,0),V=Math.min(V+1,de?.length??N.length),t.input.count<1e3&&(te=0,V=t.input.count);for(let Ce=te;Ce<V;Ce+=1)X(de?.[Ce]??Ce);const W=j.flatMap(Ce=>Array.isArray(Ce)?$y(Ce,y):[]),ee={itemId:c,spans:W},pe=O?.some((Ce,Fe)=>Ce===T[Fe])??!1,be=fD(this.properties.segmentation,s,o,this.chart.seriesRect,this.ctx.scene,!1);return{itemId:c,nodeData:z,labelData:z,strokeData:ee,scales:this.calculateScaling(),visible:this.visible,crossFiltering:pe,styles:gD(this,this.properties,p),segments:be}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){const{paths:[t],visible:i,animationEnabled:n}=e,s=this.contextNodeData?.crossFiltering===!0,o=_t(this.getHighlightStyle(),this.getStyle(!1)),{strokeWidth:r,stroke:a,strokeOpacity:l,lineDash:c,lineDashOffset:d,opacity:p}=o,g=this.contextNodeData?.segments;t.setProperties({segments:g,fill:void 0,lineJoin:"round",pointerEvents:1,opacity:p,stroke:a,strokeWidth:r,strokeOpacity:l*(s?Wpe:1),lineDash:c,lineDashOffset:d}),t.datum=g,n||(t.visible=i),u0(this,t)}updateDatumSelection(e){let{nodeData:t}=e;const{datumSelection:i}=e,{contextNodeData:n,processedData:s,axes:o,properties:r}=this,{marker:a}=r;return t=n?.crossFiltering===!0||hP(s.input.count,o.x.scale,a)?t:[],a.isDirty()&&(i.clear(),i.cleanup()),i.update(t,void 0,c=>Ls(c.xValue))}updateDatumStyles(e){const{datumSelection:t,isHighlight:i}=e,{marker:n}=this.properties,s=this.ctx.highlightManager.getActiveHighlight();t.each((o,r)=>{if(!t.isGarbage(o)){const a=this.getHighlightState(s,e.isHighlight,r.datumIndex),l=this.getStyle(i,a),{stroke:c,strokeWidth:d,strokeOpacity:p}=l,g=this.makeItemStylerParams(this.dataModel,this.processedData,r.datumIndex,l.marker);r.style=this.getMarkerStyle(n,r,g,{isHighlight:i,highlightState:a},l.marker,{stroke:c,strokeWidth:d,strokeOpacity:p})}})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const{datumSelection:i,isHighlight:n,drawingMode:s}=e,o=this.ctx.animationManager.isSkipped(),r=this.getShapeFillBBox(),a=this.ctx.highlightManager.getActiveHighlight();i.each((l,c)=>{const d=this.getHighlightState(a,n,c.datumIndex),p=c.style??t.styles[d];this.applyMarkerStyle(p,l,c.point,r,{applyTranslation:o,selected:c.selected}),l.drawingMode=s}),n||this.properties.marker.markClean()}updateLabelSelection(e){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])}updateLabelNodes(e){const{isHighlight:t=!1}=e,i=this.ctx.highlightManager?.getActiveHighlight(),n=this.makeLabelFormatterParams();e.labelSelection.each((s,o)=>{const r=Zh(this,o,n,this.properties.label,t,i),{enabled:a,fontStyle:l,fontWeight:c,fontSize:d,fontFamily:p,color:g}=r;a&&o?.labelText?(s.fontStyle=l,s.fontWeight=c,s.fontSize=d,s.fontFamily=p,s.textAlign="center",s.textBaseline="bottom",s.text=o.labelText,s.x=o.point.x,s.y=o.point.y-10,s.fill=g,s.visible=!0,s.fillOpacity=this.getHighlightStyle(t,o.datumIndex).opacity??1,s.setBoxing(r)):s.visible=!1})}makeStylerParams(e,t){const{id:i}=this,{marker:n,lineDash:s,lineDashOffset:o,stroke:r,strokeOpacity:a,strokeWidth:l,xKey:c,yKey:d}=this.properties,p=Gf(t??0);return{marker:{fill:n.fill,fillOpacity:n.fillOpacity,size:n.size,shape:n.shape,stroke:n.stroke,strokeOpacity:n.strokeOpacity,strokeWidth:n.strokeWidth,lineDash:n.lineDash,lineDashOffset:n.lineDashOffset},highlightState:p,highlighted:e,lineDash:s,lineDashOffset:o,seriesId:i,stroke:r,strokeOpacity:a,strokeWidth:l,xKey:c,yKey:d}}makeItemStylerParams(e,t,i,n){const{xKey:s,yKey:o}=this.properties,r=e.resolveColumnById(this,"xValue",t)[i],a=e.resolveColumnById(this,"yValueRaw",t)[i],l=e.getDomain(this,"xValue","key",t),c=e.getDomain(this,this.yCumulativeKey(t),"value",t),d=this.filterItemStylerFillParams(n.fill)??n.fill;return{...AM(r,a,s,o,l,c),xValue:r,yValue:a,...n,fill:d}}makeLabelFormatterParams(){const{xKey:e,xName:t,yKey:i,yName:n,legendItemName:s}=this.properties;return{xKey:e,xName:t,yKey:i,yName:n,legendItemName:s}}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:s,properties:o}=this,{xKey:r,xName:a,yKey:l,yName:c,tooltip:d,legendItemName:p}=o,g=s.x,m=s.y;if(!i||!n||!g||!m)return;const y=n.dataSources.get(this.id)?.data?.[e],b=i.resolveColumnById(this,"xValue",n)[e],C=i.resolveColumnById(this,"yValueRaw",n)[e];if(b==null)return;const w=this.getStyle(!1),x=this.makeItemStylerParams(i,n,e,w.marker),M=this.getMarkerStyle(this.properties.marker,{datumIndex:e,datum:y},x,{isHighlight:!1},w.marker);return this.formatTooltipWithContext(d,{heading:this.getAxisValueText(g,"tooltip",b,y,r,p),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(m,"tooltip",C,y,l,p)}]},{seriesId:t,datum:y,title:c,xKey:r,xName:a,yKey:l,yName:c,...M,...this.getModuleTooltipParams()})}legendItemSymbol(){const{stroke:e,strokeOpacity:t,strokeWidth:i,lineDash:n,marker:s}=this.getStyle(!1);return{marker:{...this.getMarkerStyle(this.properties.marker,{},void 0,{isHighlight:!1,checkForHighlight:!1},{size:s.size,shape:s.shape,fill:s.fill,fillOpacity:s.fillOpacity,stroke:s.stroke,strokeOpacity:s.strokeOpacity,strokeWidth:s.strokeWidth,lineDash:s.lineDash,lineDashOffset:s.lineDashOffset}),enabled:this.properties.marker.enabled},line:{stroke:e,strokeOpacity:t,strokeWidth:i,lineDash:n}}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:n}=this,{yKey:s,yName:o,title:r,legendItemName:a,showInLegend:l}=this.properties;return[{legendType:e,id:t,itemId:s,legendItemName:a,seriesId:t,enabled:n&&i.getItemEnabled({seriesId:t,itemId:s}),label:{text:a??r??o??s},symbol:this.legendItemSymbol(),hideInLegend:!l}]}updatePaths(e){this.updateLinePaths(e.paths,e.contextData)}updateLinePaths(e,t){const i=t.strokeData.spans,[n]=e;n.path.clear(),lP(n,i),n.markDirty("LineSeries")}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,annotationSelections:n,contextData:s,paths:o}=e,{animationManager:r}=this.ctx;this.updateLinePaths(o,s),pP(this,r,...o),cs([t],Fv),dP(this,r,t),Gi(this,"labels",r,i),Gi(this,"annotations",r,...n)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateLinePaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{datumSelection:i,labelSelection:n,annotationSelections:s,contextData:o,paths:r,previousContextData:a}=e,[l]=r;if(o.visible===!1&&a?.visible===!1)return;this.resetDatumAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateLinePaths(r,o)},d=()=>{t.skipCurrentBatch(),c()};if(o==null||a==null){c(),Nv(this,t,"added",i),c0(this,"path_properties",t,"add",l),Gi(this,"labels",t,n),Gi(this,"annotations",t,...s);return}if(o.crossFiltering!==a.crossFiltering){d();return}const p=M$(o,a,this.processedData?.reduced?.diff?.[this.id]);if(p===void 0){d();return}else if(p.status==="no-op")return;hn(this.id,"path_properties",t,[l],p.stroke.pathProperties),p.status==="added"?this.updateLinePaths(r,o):p.status==="removed"?this.updateLinePaths(r,a):a0(this.id,"path_update",t,[l],p.stroke.path),p.hasMotion&&(Nv(this,t,void 0,i),Gi(this,"labels",t,n),Gi(this,"annotations",t,...s)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateLinePaths(r,o)})}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new Rn}getStyle(e,t){const{styler:i,marker:n,lineDash:s,lineDashOffset:o,stroke:r,strokeOpacity:a,strokeWidth:l}=this.properties,{size:c,shape:d,fill:p="transparent",fillOpacity:g}=n;let m={};if(i){const y=this.makeStylerParams(e,t),b=this.cachedCallWithContext(i,y)??{};m=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],b,{pick:!1})??{}}return m.marker??(m.marker={}),{lineDash:m.lineDash??s,lineDashOffset:m.lineDashOffset??o,stroke:m.stroke??r,strokeOpacity:m.strokeOpacity??a,strokeWidth:m.strokeWidth??l,marker:{fill:m.marker.fill??p,fillOpacity:m.marker.fillOpacity??g,shape:m.marker.shape??d,size:m.marker.size??c,lineDash:m.marker.lineDash??n.lineDash??s,lineDashOffset:m.marker.lineDashOffset??n.lineDashOffset??o,stroke:m.marker.stroke??n.stroke??r,strokeOpacity:m.marker.strokeOpacity??n.strokeOpacity??a,strokeWidth:m.marker.strokeWidth??n.strokeWidth??l}}}getFormattedMarkerStyle(e){const t=this.getStyle(!1),i=this.makeItemStylerParams(this.dataModel,this.processedData,e.datumIndex,t.marker);return this.getMarkerStyle(this.properties.marker,e,i,{isHighlight:!0},void 0,t)}computeFocusBounds(e){return pD(this,e)}hasItemStylers(){return this.properties.styler!=null||this.properties.marker.itemStyler!=null||this.properties.label.itemStyler!=null}};sC.className="LineSeries";sC.type="line";var H$={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:e=>new sC(e),stackable:!0,predictAxis:tC,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{stroke:YM,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear"},marker:{shape:"circle",size:7,strokeWidth:{$isUserOption:["./stroke",1,0]},fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",Ub],["image",bc],["pattern",jo]]},stroke:{$palette:"stroke"}},label:{...Za,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:ju(),segmentation:qM}}},j$={type:"series",name:"line",chartType:"cartesian",options:lD,create:e=>new sC(e)},CD=class extends nC{};CD.className="ScatterSeries";CD.type="scatter";var $pe={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:e=>new CD(e),predictAxis:fP,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",Ub],["image",bc],["pattern",jo]]},stroke:{$palette:"stroke"},fillOpacity:.8,maxRenderedItems:1e4,label:{...Za,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:ju()}}},W$={type:"series",name:"scatter",chartType:"cartesian",options:Sde,create:e=>new CD(e)},U$=class nk{constructor(t,i,n,s){this.startAngle=t,this.endAngle=i,this.innerRadius=n,this.outerRadius=s}clone(){const{startAngle:t,endAngle:i,innerRadius:n,outerRadius:s}=this;return new nk(t,i,n,s)}equals(t){return this.startAngle===t.startAngle&&this.endAngle===t.endAngle&&this.innerRadius===t.innerRadius&&this.outerRadius===t.outerRadius}[aM](t,i){return new nk(this.startAngle*(1-i)+t.startAngle*i,this.endAngle*(1-i)+t.endAngle*i,this.innerRadius*(1-i)+t.innerRadius*i,this.outerRadius*(1-i)+t.outerRadius*i)}};function $$({startAngle:e,endAngle:t,innerRadius:i,outerRadius:n}){let s=1/0,o=1/0,r=-1/0,a=-1/0;const l=(c,d)=>{s=Math.min(c,s),o=Math.min(d,o),r=Math.max(c,r),a=Math.max(d,a)};return l(i*Math.cos(e),i*Math.sin(e)),l(i*Math.cos(t),i*Math.sin(t)),l(n*Math.cos(e),n*Math.sin(e)),l(n*Math.cos(t),n*Math.sin(t)),Wd(0,e,t)&&l(n,0),Wd(Math.PI*.5,e,t)&&l(0,n),Wd(Math.PI,e,t)&&l(-n,0),Wd(Math.PI*1.5,e,t)&&l(0,-n),new Le(s,o,r-s,a-o)}function sk(e,t,i){const n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),{innerRadius:s,outerRadius:o}=i;if(i.startAngle===i.endAngle||n<Math.min(s,o)||n>Math.max(s,o))return!1;const r=Hx(i.startAngle),a=Hx(i.endAngle),l=Math.atan2(t,e);return r<a?l<=a&&l>=r:l<=a&&l>=-Math.PI||l>=r&&l<=Math.PI}function Ype(e,t,i,n,s,o,r,a,l,c){if(Number.isNaN(e)||Number.isNaN(t))return 0;[s,n]=[n,s];const d=(c-a)/(l-r),p=a-d*r,g=Math.pow(d,2)+1,m=2*(d*(p-t)-e),y=Math.pow(e,2)+Math.pow(p-t,2)-Math.pow(i,2),b=Math.pow(m,2)-4*g*y;if(b<0)return 0;const C=(-m+Math.sqrt(b))/2/g,w=(-m-Math.sqrt(b))/2/g;let x=0;for(const M of[C,w]){if(!(M>=Math.min(r,l)&&M<=Math.max(r,l)))continue;const I=d*M+p,N=M-e,T=I-t,P=Math.atan2(T,N);Wd(P,n,s)&&x++}return x}function $V(e,t){const{startAngle:i,endAngle:n,innerRadius:s,outerRadius:o}=t,r={x:o*Math.cos(i),y:o*Math.sin(i)},a={x:o*Math.cos(n),y:o*Math.sin(n)},l=s===0?{x:0,y:0}:{x:s*Math.cos(i),y:s*Math.sin(i)},c=s===0?{x:0,y:0}:{x:s*Math.cos(n),y:s*Math.sin(n)};return Oy(e.start.x,e.start.y,e.end.x,e.end.y,r.x,r.y,l.x,l.y)||Oy(e.start.x,e.start.y,e.end.x,e.end.y,a.x,a.y,c.x,c.y)||Ype(0,0,o,i,n,!0,e.start.x,e.start.y,e.end.x,e.end.y)}function Kpe(e,t){const i={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y},s={x:e.x,y:e.y+e.height},o={x:e.x+e.width,y:e.y+e.height};return $V({start:i,end:n},t)||$V({start:s,end:o},t)}function YV(e,t,i,n){if(i===0&&n===0)return 0;if(Math.asin(Math.abs(1*i)/(e+1*i))+Math.asin(Math.abs(1*n)/(e+1*n))-t<0)return 1;let o=0,r=1;for(let a=0;a<8;a+=1){const l=(o+r)/2;Math.asin(Math.abs(l*i)/(e+l*i))+Math.asin(Math.abs(l*n)/(e+l*n))-t<0?o=l:r=l}return o}var qpe=1e-6;function Au(e,t){return dM(e,t)<qpe?t:On(e-t)+t}function sS(e,t,i=0){const s=Math.abs(t-e)>=2*Math.PI?2*Math.PI:On(t-e);return e=Au(e,i),t=e+s,{startAngle:e,endAngle:t}}function oS(e,t,i,n,s,o){const r=Math.sin(o),a=Math.cos(o),l=e**2+t**2-i**2;let c,d,p,g;if(a>.5){const M=r/a,E=1+M**2,I=-2*(e+t*M),N=I**2-4*E*l;if(N<0)return;const T=(-I+Math.sqrt(N))/(2*E),P=(-I-Math.sqrt(N))/(2*E);c=T,d=T*M,p=P,g=P*M}else{const M=a/r,E=1+M**2,I=-2*(t+e*M),N=I**2-4*E*l;if(N<0)return;const T=(-I+Math.sqrt(N))/(2*E),P=(-I-Math.sqrt(N))/(2*E);c=T*M,d=T,p=P*M,g=P}const m=a,y=r,b=c*m+d*y,C=p*m+g*y,w=b>0?Au(Math.atan2(d-t,c-e),n):Number.NaN,x=C>0?Au(Math.atan2(g-t,p-e),n):Number.NaN;if(w>=n&&w<=s)return w;if(x>=n&&x<=s)return x}function rS(e,t,i,n,s,o){const r=Math.hypot(e,t),a=(r**2-i**2+o**2)/(2*r),l=r-a,c=Math.atan2(t,e),d=Math.acos(-l/i),p=Au(c+d,n),g=Au(c-d,n);if(p>=n&&p<=s)return p;if(g>=n&&g<=s)return g}var nT=class{constructor(e,t,i,n,s){this.cx=e,this.cy=t,this.r=i,this.a0=n,this.a1=s,this.a0>=this.a1&&(this.a0=Number.NaN,this.a1=Number.NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(e){return{x:this.cx+this.r*Math.cos(e),y:this.cy+this.r*Math.sin(e)}}clipStart(e){e==null||!this.isValid()||e<this.a0||(this.a0=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=Number.NaN,this.a1=Number.NaN))}clipEnd(e){e==null||!this.isValid()||e>this.a1||(this.a1=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=Number.NaN,this.a1=Number.NaN))}},ys=class extends zn{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(e){this.concentricEdgeInset=e,this.radialEdgeInset=e}set cornerRadius(e){this.startOuterCornerRadius=e,this.endOuterCornerRadius=e,this.startInnerCornerRadius=e,this.endInnerCornerRadius=e}computeBBox(){return $$(this).translate(this.centerX,this.centerY)}normalizedRadii(){const{concentricEdgeInset:e}=this;let{innerRadius:t,outerRadius:i}=this;return t=t>0?t+e:0,i=Math.max(i-e,0),{innerRadius:t,outerRadius:i}}normalizedClipSector(){const{clipSector:e}=this;if(e==null)return;const{startAngle:t,endAngle:i}=sS(this.startAngle,this.endAngle),{innerRadius:n,outerRadius:s}=this.normalizedRadii(),o=sS(e.startAngle,e.endAngle,t);return new U$(Math.max(t,o.startAngle),Math.min(i,o.endAngle),Math.max(n,e.innerRadius),Math.min(s,e.outerRadius))}getAngleOffset(e){return e>0?this.radialEdgeInset/e:0}arc(e,t,i,n,s,o,r,a){if(e<=0)return;const{startAngle:l,endAngle:c}=sS(this.startAngle,this.endAngle),{innerRadius:d,outerRadius:p}=this.normalizedRadii(),g=this.normalizedClipSector();if(a&&d<=0)return;const m=a?this.getAngleOffset(d+e):this.getAngleOffset(p-e),y=r?l+m+t:c-m-t,b=a?d+e:p-e,C=b*Math.cos(y),w=b*Math.sin(y);if(g!=null&&(!r&&!(y>=l-1e-6&&y<=g.endAngle-1e-6)||r&&!(y>=g.startAngle+1e-6&&y<=c-1e-6)||a&&b<g.innerRadius-1e-6||!a&&b>g.outerRadius+1e-6))return;const x=new nT(C,w,e,i,n);if(g!=null){a?(x.clipStart(oS(C,w,e,i,n,g.endAngle)),x.clipEnd(oS(C,w,e,i,n,g.startAngle))):(x.clipStart(oS(C,w,e,i,n,g.startAngle)),x.clipEnd(oS(C,w,e,i,n,g.endAngle)));let T,P;if(r?(T=rS(C,w,e,i,n,g.innerRadius),P=rS(C,w,e,i,n,g.outerRadius)):(T=rS(C,w,e,i,n,g.outerRadius),P=rS(C,w,e,i,n,g.innerRadius)),x.clipStart(T),x.clipEnd(P),T!=null){const{x:O,y:G}=x.pointAt(T),B=Au(Math.atan2(G,O),l);r?o?.clipStart(B):s.clipEnd(B)}if(P!=null){const{x:O,y:G}=x.pointAt(P),B=Au(Math.atan2(G,O),l);r?s.clipStart(B):o?.clipEnd(B)}}if(g!=null){const{x:T,y:P}=x.pointAt((x.a0+x.a1)/2);if(!sk(T,P,g))return}const{x:M,y:E}=x.pointAt(r===a?x.a0:x.a1),I=Au(Math.atan2(E,M),l),N=a?o:s;return r?N?.clipStart(I):N?.clipEnd(I),x}updatePath(){const{path:t,centerX:i,centerY:n,concentricEdgeInset:s,radialEdgeInset:o}=this;let{startOuterCornerRadius:r,endOuterCornerRadius:a,startInnerCornerRadius:l,endInnerCornerRadius:c}=this;const{startAngle:d,endAngle:p}=sS(this.startAngle,this.endAngle),{innerRadius:g,outerRadius:m}=this.normalizedRadii(),y=this.normalizedClipSector(),b=p-d,C=b>=2*Math.PI-1e-6;if(t.clear(),g===0&&m===0||g>m)return;if((y?.startAngle??d)===(y?.endAngle??p))return;if(C&&this.clipSector==null&&r===0&&a===0&&l===0&&c===0){t.moveTo(i+m*Math.cos(d),n+m*Math.sin(d)),t.arc(i,n,m,d,p),g>s&&(t.moveTo(i+g*Math.cos(p),n+g*Math.sin(p)),t.arc(i,n,g,p,d,!0)),t.closePath();return}else if(this.clipSector==null&&Math.abs(g-m)<1e-6){t.arc(i,n,m,d,p,!1),t.arc(i,n,m,p,d,!0),t.closePath();return}const w=this.getAngleOffset(g),x=this.getAngleOffset(m);if(b<2*x)return;const E=(y?.innerRadius??g)>s,I=g<s||b<2*w,N=m-g,T=Math.max(r,l,a,c),P=T>0?Math.min(N/T,1):1;r*=P,a*=P,l*=P,c*=P;const O=YV(m,b-2*x,-r,-a);if(r*=O,a*=O,!I&&E){const xe=YV(g,b-2*w,l,c);l*=xe,c*=xe}else l=0,c=0;const G=Math.max(r+l,a+c),B=G>0?Math.min(N/G,1):1;r*=B,a*=B,l*=B,c*=B;let z=0,j=0;const X=r/(m-r),q=a/(m-a);if(X>=0&&X<1-1e-6)z=Math.asin(X);else{z=b/2;const xe=m/(1/Math.sin(z)+1);r=Math.min(xe,r)}if(q>=0&&q<1-1e-6)j=Math.asin(q);else{j=b/2;const xe=m/(1/Math.sin(j)+1);a=Math.min(xe,a)}const H=Math.asin(l/(g+l)),K=Math.asin(c/(g+c)),U=y?.outerRadius??m,de=this.getAngleOffset(U),te=new nT(0,0,U,d+de,p-de),V=y?.innerRadius??g,W=this.getAngleOffset(V),ee=E?new nT(0,0,V,d+W,p-W):void 0;y!=null&&(te.clipStart(y.startAngle),te.clipEnd(y.endAngle),ee?.clipStart(y.startAngle),ee?.clipEnd(y.endAngle));const pe=this.arc(r,z,d-Math.PI*.5,d+z,te,ee,!0,!1),be=this.arc(a,j,p-j,p+Math.PI*.5,te,ee,!1,!1),Ce=this.arc(c,K,p+Math.PI*.5,p+Math.PI-K,te,ee,!1,!0),Fe=this.arc(l,H,d+Math.PI+H,d+Math.PI*1.5,te,ee,!0,!0);if(I){const xe=b<Math.PI*.5?o*(1+Math.cos(b))/Math.sin(b):Number.NaN;let De;xe>0&&xe<m?De=Math.max(Math.hypot(o,xe),g):De=o,De=Math.max(De,g);const Ee=d+b*.5;t.moveTo(i+De*Math.cos(Ee),n+De*Math.sin(Ee))}else if(!(Fe?.isValid()===!0||ee?.isValid()===!0)){const xe=d+b/2,De=g*Math.cos(xe),Ee=g*Math.sin(xe);t.moveTo(i+De,n+Ee)}if(pe?.isValid()===!0){const{cx:xe,cy:De,r:Ee,a0:Je,a1:ze}=pe;t.arc(i+xe,n+De,Ee,Je,ze)}if(te.isValid()){const{r:xe,a0:De,a1:Ee}=te;t.arc(i,n,xe,De,Ee)}if(be?.isValid()===!0){const{cx:xe,cy:De,r:Ee,a0:Je,a1:ze}=be;t.arc(i+xe,n+De,Ee,Je,ze)}if(!I){if(Ce?.isValid()===!0){const{cx:xe,cy:De,r:Ee,a0:Je,a1:ze}=Ce;t.arc(i+xe,n+De,Ee,Je,ze)}if(ee?.isValid()===!0){const{r:xe,a0:De,a1:Ee}=ee;t.arc(i,n,xe,Ee,De,!0)}if(Fe?.isValid()===!0){const{cx:xe,cy:De,r:Ee,a0:Je,a1:ze}=Fe;t.arc(i+xe,n+De,Ee,Je,ze)}}t.closePath()}isPointInPath(e,t){const{startAngle:i,endAngle:n,innerRadius:s,outerRadius:o}=this.clipSector??this;return sk(e-this.centerX,t-this.centerY,{startAngle:i,endAngle:n,innerRadius:Math.min(s,o),outerRadius:Math.max(s,o)})}};ys.className="Sector";A([Me()],ys.prototype,"centerX",2);A([Me()],ys.prototype,"centerY",2);A([Me()],ys.prototype,"innerRadius",2);A([Me()],ys.prototype,"outerRadius",2);A([Me()],ys.prototype,"startAngle",2);A([Me()],ys.prototype,"endAngle",2);A([Uo({})],ys.prototype,"clipSector",2);A([Me()],ys.prototype,"concentricEdgeInset",2);A([Me()],ys.prototype,"radialEdgeInset",2);A([Me()],ys.prototype,"startOuterCornerRadius",2);A([Me()],ys.prototype,"endOuterCornerRadius",2);A([Me()],ys.prototype,"startInnerCornerRadius",2);A([Me()],ys.prototype,"endInnerCornerRadius",2);var Y$=class extends Ii{constructor(){super(...arguments),this.showInLegend=!1}};A([k],Y$.prototype,"showInLegend",2);var SP=class extends Yi{constructor(){super(...arguments),this.spacing=2}set(e,t){return super.set(e)}};A([k],SP.prototype,"text",2);A([k],SP.prototype,"spacing",2);var xP=class extends Qe{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};A([k],xP.prototype,"fill",2);A([k],xP.prototype,"fillOpacity",2);var tm=class extends Yi{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};A([k],tm.prototype,"offset",2);A([k],tm.prototype,"minAngle",2);A([k],tm.prototype,"minSpacing",2);A([k],tm.prototype,"maxCollisionOffset",2);A([k],tm.prototype,"avoidCollisions",2);var MP=class extends Yi{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};A([k],MP.prototype,"positionOffset",2);A([k],MP.prototype,"positionRatio",2);var oC=class extends Qe{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};A([k],oC.prototype,"colors",2);A([k],oC.prototype,"length",2);A([k],oC.prototype,"strokeWidth",2);A([k],oC.prototype,"itemStyler",2);var Ct=class extends Tr{constructor(){super(...arguments),this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=Object.values(cn),this.strokes=Object.values(Pl),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new Ff(SP),this.title=new Y$,this.innerCircle=new xP,this.shadow=new rl,this.calloutLabel=new tm,this.sectorLabel=new MP,this.calloutLine=new oC,this.tooltip=Qh()}};A([k],Ct.prototype,"angleKey",2);A([k],Ct.prototype,"angleName",2);A([k],Ct.prototype,"angleFilterKey",2);A([k],Ct.prototype,"radiusKey",2);A([k],Ct.prototype,"radiusName",2);A([k],Ct.prototype,"radiusMin",2);A([k],Ct.prototype,"radiusMax",2);A([k],Ct.prototype,"calloutLabelKey",2);A([k],Ct.prototype,"calloutLabelName",2);A([k],Ct.prototype,"sectorLabelKey",2);A([k],Ct.prototype,"sectorLabelName",2);A([k],Ct.prototype,"legendItemKey",2);A([k],Ct.prototype,"defaultColorRange",2);A([k],Ct.prototype,"defaultPatternFills",2);A([k],Ct.prototype,"fills",2);A([k],Ct.prototype,"strokes",2);A([k],Ct.prototype,"fillOpacity",2);A([k],Ct.prototype,"strokeOpacity",2);A([k],Ct.prototype,"lineDash",2);A([k],Ct.prototype,"lineDashOffset",2);A([k],Ct.prototype,"cornerRadius",2);A([k],Ct.prototype,"itemStyler",2);A([k],Ct.prototype,"rotation",2);A([k],Ct.prototype,"outerRadiusOffset",2);A([k],Ct.prototype,"outerRadiusRatio",2);A([k],Ct.prototype,"innerRadiusOffset",2);A([k],Ct.prototype,"innerRadiusRatio",2);A([k],Ct.prototype,"strokeWidth",2);A([k],Ct.prototype,"sectorSpacing",2);A([k],Ct.prototype,"hideZeroValueSectorsInLegend",2);A([k],Ct.prototype,"innerLabels",2);A([k],Ct.prototype,"title",2);A([k],Ct.prototype,"innerCircle",2);A([k],Ct.prototype,"shadow",2);A([k],Ct.prototype,"calloutLabel",2);A([k],Ct.prototype,"sectorLabel",2);A([k],Ct.prototype,"calloutLine",2);A([k],Ct.prototype,"tooltip",2);function ex(e,t,i,n){const s=[i.convert(0),i.convert(1)],o=[n.convert(0),n.convert(1)],r=Math.PI/-2+ds(t),a=e?"initial":"update",l=({radius:y})=>({innerRadius:s[0],outerRadius:s[0]+(s[1]-s[0])*y}),c=({radius:y})=>({innerRadius:o[0],outerRadius:o[0]+(o[1]-o[0])*y});return{nodes:{toFn:(y,b,C,{prevLive:w})=>{let{startAngle:x,endAngle:M,innerRadius:E,outerRadius:I}=b;const{stroke:N,fill:T}=b.sectorFormat;if(C==="removed"&&w?(x=w.datum?.endAngle,M=w.datum?.endAngle):C==="removed"&&!w&&(x=r,M=r),C==="removed"){const P=l(b);E=P.innerRadius,I=P.outerRadius}return{startAngle:x,endAngle:M,outerRadius:I,innerRadius:E,stroke:N,fill:T}},fromFn:(y,b,C,{prevFromProps:w})=>{let{startAngle:x,endAngle:M,innerRadius:E,outerRadius:I}=y,{fill:N,stroke:T}=b.sectorFormat;if(C==="updated"&&y.previousDatum==null&&(C="added"),C==="unknown"||C==="added"&&!w?(x=r,M=r,E=b.innerRadius,I=b.outerRadius):C==="added"&&w&&(x=w.endAngle??r,M=w.endAngle??r,E=w.innerRadius??b.innerRadius,I=w.outerRadius??b.outerRadius),C==="added"&&!e){const P=c(b);E=P.innerRadius,I=P.outerRadius}return C==="updated"&&(N=y.fill??N,T=(typeof y.stroke=="string"?y.stroke:void 0)??T),{startAngle:x,endAngle:M,innerRadius:E,outerRadius:I,fill:N,stroke:T,phase:a}}},innerCircle:{fromFn:(y,b)=>({size:y.previousDatum?.radius??y.size??0,phase:a}),toFn:(y,b)=>({size:b.radius??0})}}}function K$(e,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,stroke:t.sectorFormat.stroke}}function q$(e,t){const i=t.y-e.centerY,n=t.x-e.centerX,s=Math.atan2(i,n),o=e.getItemNodes();for(const r of o)if(r.datum.missing!==!0&&Wd(s,r.startAngle,r.endAngle)){const a=Math.hypot(n,i);let l=0;return a<r.innerRadius?l=r.innerRadius-a:a>r.outerRadius&&(l=a-r.outerRadius),{datum:r.datum,distance:l}}}var Z$=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.FOREGROUND=1]="FOREGROUND",e[e.HIGHLIGHT=2]="HIGHLIGHT",e[e.LABEL=3]="LABEL",e))(Z$||{}),X$={angle:["angleKey"],radius:["radiusKey"]},Q$={angle:["angleName"],radius:["radiusName"]},DP=class extends sP{constructor({categoryKey:e,pickModes:t=[1,0],canHaveAxes:i=!1,animationResetFns:n,...s}){super({...s,categoryKey:e,pickModes:t,canHaveAxes:i}),this.directions=["angle","radius"],this.itemGroup=this.contentGroup.appendChild(new ut),this.nodeData=[],this.itemSelection=ks.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=ks.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=ks.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.animationResetFns=n,this.animationState=new xb("empty",{empty:{update:{target:"ready",action:o=>this.animateEmptyUpdateReady(o)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:o=>this.animateReadyHighlight(o),highlightMarkers:o=>this.animateReadyHighlightMarkers(o),resize:o=>this.animateReadyResize(o),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:o=>this.animateWaitingUpdateReady(o)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:o=>this.animateClearingUpdateEmpty(o)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}setZIndex(e){super.setZIndex(e),this.contentGroup.zIndex=[e,1],this.highlightGroup.zIndex=[e,2],this.labelGroup.zIndex=[e,3]}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}labelFactory(){const e=new Fo;return e.pointerEvents=1,e}addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>this.onLegendItemClick(e)),this.ctx.eventsHub.on("legend:item-double-click",e=>this.onLegendItemDoubleClick(e)))}getInnerRadius(){return 0}computeLabelsBBox(e,t){return null}getShapeFillBBox(){const e=this.radius;return{series:new Le(-e,-e,e*2,e*2),axis:new Le(-e,-e,e*2,e*2)}}resetAllAnimation(){const{item:e,label:t}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&cs([this.itemSelection,this.highlightSelection],e),t&&cs([this.labelSelection],t),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(e){const{item:t}=this.animationResetFns??{};t&&cs([this.highlightSelection],t)}animateReadyHighlightMarkers(e){}animateReadyResize(e){this.resetAllAnimation()}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(e){const t=this.getNodeData()?.[e.datumIndex];if(t!==void 0)return this.itemSelection.select(i=>i instanceof zn&&i.datum===t)[0]}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}isSeriesHighlighted(e,t){const{series:i,legendItemName:n,itemId:s}=e??{},o=typeof s=="number"?t?.[s]:void 0;return i===this||o!=null&&o===n}},Zpe=class extends OM{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey,this.calloutLabelKey=n.properties.calloutLabelKey,this.sectorLabelKey=n.properties.sectorLabelKey}},rC=class extends DP{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{...X$,sectorLabel:["sectorLabelKey"],calloutLabel:["calloutLabelKey"]},propertyNames:{...Q$,sectorLabel:["sectorLabelName"],calloutLabel:["calloutLabelName"]},pickModes:[1,0],animationResetFns:{item:K$,label:Xh}}),this.properties=new Ct,this.phantomNodeData=void 0,this.backgroundGroup=new hs({name:`${this.id}-background`,zIndex:0}),this.noVisibleData=!1,this.previousRadiusScale=new oh,this.radiusScale=new oh,this.phantomGroup=this.backgroundGroup.appendChild(new ut({name:"phantom"})),this.phantomSelection=ks.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new ut({name:"pieCalloutLabels"})),this.calloutLabelSelection=new ks(this.calloutLabelGroup,ut),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new ut({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Rn({shape:"circle"})),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Rn({shape:"circle"})),this.innerLabelsGroup=this.contentGroup.appendChild(new ut({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new ut({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=ks.select(this.innerLabelsGroup,Fo),this.innerCircleSelection=ks.select(this.innerCircleGroup,()=>new Rn({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=Zpe,this.angleScale=new oh,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2),this.phantomGroup.opacity=.2,this.innerLabelsGroup.pointerEvents=1}get calloutNodeData(){return this.phantomNodeData??this.nodeData}get hasData(){return this.getHasData("angleValue")}attachSeries(e,t,i){super.attachSeries(e,t,i),e?.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.backgroundGroup.remove()}setZIndex(e){super.setZIndex(e),this.backgroundGroup.zIndex=[0,e]}nodeFactory(){const e=new ys;return e.miterLimit=1e9,e}getSeriesDomain(e){return e==="angle"?this.angleScale.domain:this.radiusScale.domain}async processData(e){if(this.data==null)return;const{visible:t,id:i,ctx:{legendManager:n}}=this,{angleKey:s,angleFilterKey:o,radiusKey:r,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c}=this.properties,d=()=>(C,w)=>t&&n.getItemEnabled({seriesId:i,itemId:w})?C:0,p=!this.ctx.animationManager.isSkipped(),g=[],m=[];c?g.push(Mu(c,"category",{id:"legendItemKey"})):a?g.push(Mu(a,"category",{id:"calloutLabelKey"})):l&&g.push(Mu(l,"category",{id:"sectorLabelKey"}));const y=this.radiusScale.type,b=this.angleScale.type;r&&m.push(q3(r,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax,missingValue:this.properties.radiusMax??1,processor:d}),vi(r,y,{id:"radiusRaw",processor:d}),YS("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),a&&m.push(vi(a,"category",{id:"calloutLabelValue"})),l&&m.push(vi(l,"category",{id:"sectorLabelValue"})),c&&m.push(vi(c,"category",{id:"legendItemValue"})),o&&m.push($I(o,b,{id:"angleFilterValue",onlyPositive:!0,invalidValue:0,processor:d}),vi(o,b,{id:"angleFilterRaw"}),YS("angleFilterValue",[0,1],0,0)),p&&this.processedData?.reduced?.animationValidation?.uniqueKeys&&g.length>0&&m.push(oD(this.id,this.processedData)),m.push(Qb()),await this.requestDataModel(e,this.data,{props:[...g,$I(s,b,{id:"angleValue",onlyPositive:!0,invalidValue:0,processor:d}),vi(s,b,{id:"angleRaw"}),YS("angleValue",[0,1],0,0),...m]});for(const C of this.processedData?.defs?.values??[]){const{id:w,missing:x,property:M}=C,E=wU(this,x);w!=="angleRaw"&&E>0&&fe.warnOnce(`no value was found for the key '${String(M)}' on ${E} data element${E>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:e=[],phantomNodeData:t}=this.createNodeData()??{};this.nodeData=e,this.phantomNodeData=t,this.nodeDataRefresh=!1}getProcessedDataValues(e,t){const i=e.resolveColumnById(this,"angleValue",t),n=e.resolveColumnById(this,"angleRaw",t),s=this.properties.angleFilterKey==null?void 0:e.resolveColumnById(this,"angleFilterValue",t),o=this.properties.angleFilterKey==null?void 0:e.resolveColumnById(this,"angleFilterRaw",t),r=this.properties.radiusKey?e.resolveColumnById(this,"radiusValue",t):void 0,a=this.properties.radiusKey?e.resolveColumnById(this,"radiusRaw",t):void 0,l=this.properties.calloutLabelKey?e.resolveColumnById(this,"calloutLabelValue",t):void 0,c=this.properties.sectorLabelKey?e.resolveColumnById(this,"sectorLabelValue",t):void 0,d=this.properties.legendItemKey?e.resolveColumnById(this,"legendItemValue",t):void 0;return{angleValues:i,angleRawValues:n,angleFilterValues:s,angleFilterRawValues:o,radiusValues:r,radiusRawValues:a,calloutLabelValues:l,sectorLabelValues:c,legendItemValues:d}}createNodeData(){const{id:e,processedData:t,dataModel:i,angleScale:n,ctx:{legendManager:s},visible:o}=this,{rotation:r,innerRadiusRatio:a}=this.properties;if(!i||t?.type!=="ungrouped")return;const l=this.getProcessedDataValues(i,t),{angleValues:c,angleRawValues:d,angleFilterValues:p,angleFilterRawValues:g,radiusValues:m,radiusRawValues:y,legendItemValues:b}=l,C=g?.some((T,P)=>T>d[P])??!1;let w=0,x=0;const M=[],E=g==null?void 0:[],I=t.dataSources.get(this.id)?.data??[],N=t.invalidData?.get(this.id);for(const[T,P]of I.entries()){if(N?.[T]===!0)continue;const O=C?p[T]:c[T],G=g!=null&&!C?Math.sqrt(g[T]/d[T]):1,B=n.convert(w)+ds(r);w=O,x+=O;const z=n.convert(w)+ds(r),j=Math.abs(z-B),X=B+j/2,q=d[T],K=(m?.[T]??1)*G,U=y?.[T],de=b?.[T],te=this.getLabels(T,P,X,j,l),V=this.getItemStyle({datum:P,datumIndex:T},!1),W={itemId:T,series:this,datum:P,datumIndex:T,angleValue:q,midAngle:X,midCos:Math.cos(X),midSin:Math.sin(X),startAngle:B,endAngle:z,radius:K,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(K),0),sectorFormat:V,radiusValue:U,legendItemValue:de,enabled:o&&s.getItemEnabled({seriesId:e,itemId:T}),focusable:!0,...te};M.push(W),E?.push({...W,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1})}return this.zerosumOuterRing.visible=x===0,this.zerosumInnerRing.visible=x===0&&a!=null&&a!==1&&a>0,{itemId:e,nodeData:M,labelData:M,phantomNodeData:E}}getLabelContent(e,t,i){const{id:n,ctx:s,properties:o}=this,{formatManager:r}=s,{calloutLabel:a,sectorLabel:l,calloutLabelKey:c,sectorLabelKey:d,legendItemKey:p}=o,g=i.calloutLabelValues?.[e],m=i.sectorLabelValues?.[e],y=i.legendItemValues?.[e],b={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},C={callout:void 0,sector:void 0,legendItem:void 0};return c&&(C.callout=this.getLabelText(g,t,c,"calloutLabel",[],a,{...b,value:g})),d&&(C.sector=this.getLabelText(m,t,d,"sectorLabel",[],l,{...b,value:m})),p!=null&&y!=null&&(C.legendItem=r.format(this.callWithContext.bind(this),{type:"category",value:y,datum:t,seriesId:n,legendItemName:void 0,key:p,source:"legend-label",property:"legendItem",domain:[],boundSeries:this.getFormatterContext("legendItem")})??y),C}getLabels(e,t,i,n,s){const{properties:o}=this,{calloutLabel:r,sectorLabel:a,legendItemKey:l}=o,c=this.getLabelContent(e,t,s),d={};return r.enabled&&c.callout&&n>=ds(r.minAngle)&&(d.calloutLabel={...this.getTextAlignment(i),text:c.callout,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),a.enabled&&c.sector&&(d.sectorLabel={text:c.sector}),l&&c.legendItem&&(d.legendItem={key:l,text:c.legendItem}),d}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"top"},{textAlign:"right",textBaseline:"middle"}],i=Hx(e),n=-.75*Math.PI,s=i-n,o=Math.floor(s/(Math.PI/2)),r=Cse(o,t.length);return t[r]}getFillParams(e,t,i){if(!(!Ar(e)||e.bounds==="item"))return{centerX:0,centerY:0,innerRadius:t,outerRadius:i}}getItemStyle({datum:e,datumIndex:t},i,n,s){const{fills:o,strokes:r,itemStyler:a}=this.properties,l=r[t],c=o[t],{fill:d,fillOpacity:p,stroke:g,strokeWidth:m,strokeOpacity:y,lineDash:b,lineDashOffset:C,cornerRadius:w,opacity:x}=_t(this.getHighlightStyle(i,t,n,s),{fill:c,stroke:l},this.properties);let M;return a&&(M=this.cachedDatumCallback(this.getDatumId(t)+(i?"-highlight":"-hide"),()=>{const E=this.makeItemStylerParams(e,t,i,{fill:d,fillOpacity:p,stroke:g,strokeWidth:m,strokeOpacity:y,lineDash:b,lineDashOffset:C,cornerRadius:w});return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.callWithContext(a,E),{proxyPaths:{fill:["fills",`${t}`],stroke:["strokes",`${t}`]}})})),{fill:M?.fill??d,fillOpacity:M?.fillOpacity??p,stroke:M?.stroke??g,strokeWidth:M?.strokeWidth??m,strokeOpacity:M?.strokeOpacity??y,lineDash:M?.lineDash??b,lineDashOffset:M?.lineDashOffset??C,cornerRadius:M?.cornerRadius??w,opacity:x}}makeItemStylerParams(e,t,i,n){const{angleKey:s,radiusKey:o,calloutLabelKey:r,sectorLabelKey:a,legendItemKey:l}=this.properties,c=this.filterItemStylerFillParams(n.fill)??n.fill;return{datum:e,angleKey:s,radiusKey:o,calloutLabelKey:r,sectorLabelKey:a,legendItemKey:l,...n,fill:c,highlighted:i,highlightState:this.getHighlightStateString(this.ctx.highlightManager?.getActiveHighlight(),i,t),seriesId:this.id}}getCalloutLineStyle(e,t){const{properties:i}=this;let n={};if(i.calloutLine.itemStyler){const s=this.getHighlightStateString(this.ctx.highlightManager?.getActiveHighlight(),t,e.datumIndex),o={angleKey:i.angleKey,angleName:i.angleName??i.angleKey,calloutLabelKey:i.calloutLabelKey,calloutLabelName:i.calloutLabelName??i.calloutLabelKey,datum:e.datum,highlighted:t,highlightState:s,legendItemKey:i.legendItemKey,radiusKey:i.radiusKey,radiusName:i.radiusName??i.radiusKey,sectorLabelKey:i.sectorLabelKey,sectorLabelName:i.sectorLabelName??i.sectorLabelKey,seriesId:this.id};n=this.cachedCallWithContext(i.calloutLine.itemStyler,o)??{}}return{length:n.length??i.calloutLine.length,strokeWidth:n.strokeWidth??i.calloutLine.strokeWidth,color:n.color,colors:i.calloutLine.colors}}getInnerRadius(){const{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:i=0}=this.properties,n=e*t+i;return n===e||n<0?0:n}getOuterRadius(){const{outerRadiusRatio:e,outerRadiusOffset:t}=this.properties;return Math.max(this.radius*e+t,0)}updateRadiusScale(e){const t=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t);const i=n=>({...n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){const e=Math.max(0,this.radiusScale.range[1]);if(e===0)return Number.NaN;const i=2+(this.properties.title?.spacing??0),n=Math.max(0,-e);return-e-i-n}update({seriesRect:e}){const{title:t}=this.properties,i={seriesRectWidth:e?.width,seriesRectHeight:e?.height},n=qa(this.nodeDataDependencies,i)!=null;if(n&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){const s=this.getTitleTranslationY();t.node.y=Number.isFinite(s)?s:0;const o=t.node.getBBox();t.node.visible=t.enabled&&Number.isFinite(s)&&!this.bboxIntersectsSurroundingSeries(o)}for(const s of[this.zerosumInnerRing,this.zerosumOuterRing])s.fillOpacity=0,s.stroke=this.properties.calloutLabel.color,s.strokeWidth=1,s.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(e)}updateTitleNodes(){const{oldTitle:e}=this,{title:t}=this.properties;e!==t&&(e&&e.node.remove(),t&&(t.node.textBaseline="bottom",this.labelGroup?.appendChild(t.node)),this.oldTitle=t)}updateNodeMidPoint(){const e=t=>{const i=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,i),y:t.midSin*Math.max(0,i)}};for(const t of this.nodeData)e(t);if(this.phantomNodeData)for(const t of this.phantomNodeData)e(t)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,calloutLabelSelection:n,labelSelection:s,innerLabelsSelection:o}=this,r=this.nodeData.map(l=>({...l,sectorFormat:{...l.sectorFormat}})),a=(l,c)=>{l.update(c,void 0,d=>this.getDatumId(d.datumIndex)),this.ctx.animationManager.isSkipped()&&l.cleanup()};a(e,this.nodeData),a(t,r),a(i,this.phantomNodeData??[]),n.update(this.calloutNodeData,l=>{const c=new _o;c.tag=0,c.pointerEvents=1,l.appendChild(c);const d=new Fo;d.tag=1,d.pointerEvents=1,l.appendChild(d)}),s.update(this.nodeData),o.update(this.properties.innerLabels,l=>{l.pointerEvents=1})}updateInnerCircleSelection(){const{innerCircle:e}=this.properties;let t=0;const i=this.getInnerRadius();if(i>0){const s=Math.min(i,this.getOuterRadius());t=Math.ceil(s*2+1)}const n=e?[{radius:t}]:[];this.innerCircleSelection.update(n)}updateNodes(e){const t=this.ctx.highlightManager.getActiveHighlight(),{visible:i,dataModel:n,processedData:s}=this;if(this.backgroundGroup.visible=i,this.contentGroup.visible=i,!n||!s)return;const{legendItemValues:o}=this.getProcessedDataValues(n,s),r=this.isSeriesHighlighted(t,o),a=this.ctx.chartService.highlight?.drawingMode??"overlay";this.highlightGroup.visible=i&&r,this.labelGroup.visible=i,this.innerCircleSelection.each((m,{radius:y})=>{m.setProperties({fill:this.properties.innerCircle?.fill,opacity:this.properties.innerCircle?.fillOpacity,size:y})});const l=this.radiusScale.range[0],c=this.radiusScale.range[1],d=this.getShapeFillBBox(),p=this.ctx.animationManager.isSkipped(),g=(m,y,b,C,w)=>{const x=this.getItemStyle(y,C,void 0,o);y.sectorFormat.fill=x.fill,y.sectorFormat.stroke=x.stroke,p&&(m.startAngle=y.startAngle,m.endAngle=y.endAngle,m.innerRadius=y.innerRadius,m.outerRadius=y.outerRadius),(C||p)&&(m.fill=x.fill,m.stroke=x.stroke);const M=this.getFillParams(x.fill,l,c);Zl(m,x,d,M),m.drawingMode=w,m.cornerRadius=x.cornerRadius,m.fillShadow=this.properties.shadow;const E=Math.max((this.properties.sectorSpacing+(x.stroke==null?0:x.strokeWidth))/2,0);m.inset=E,m.lineJoin=this.properties.sectorSpacing>=0||E>0?"miter":"round"};this.itemSelection.each((m,y,b)=>g(m,y,b,!1,"overlay")),this.phantomSelection.each((m,y,b)=>g(m,y,b,!1,"overlay")),this.highlightSelection.each((m,y,b)=>{g(m,y,b,!0,a),m.visible=y.itemId===t?.itemId}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{strokes:e}=this.properties,{offset:t}=this.properties.calloutLabel;for(const i of this.calloutLabelSelection.selectByTag(0)){const n=i.closestDatum(),{length:s,strokeWidth:o,color:r,colors:a}=this.getCalloutLineStyle(n,!1),l=o,c=ure(a)?a:e,{calloutLabel:d,outerRadius:p,datumIndex:g}=n;if(d?.text&&!d.hidden&&p!==0){i.visible=!0,i.strokeWidth=l,i.stroke=r??c[g%c.length],i.strokeOpacity=this.getHighlightStyle(!1,n.datumIndex).opacity??1,i.fill=void 0;const m=n.midCos*p,y=n.midSin*p;let b=n.midCos*(p+s),C=n.midSin*(p+s);if((d.collisionTextAlign??d.collisionOffsetY!==0)&&d.box!=null){const x=d.box;let M=b,E=C;b<x.x?M=x.x:b>x.x+x.width&&(M=x.x+x.width),C<x.y?E=x.y:C>x.y+x.height&&(E=x.y+x.height);const I=M-b,N=E-C,T=Math.sqrt(Math.pow(I,2)+Math.pow(N,2)),P=T-t;P>0&&(b=b+I*P/T,C=C+N*P/T)}i.x1=m,i.y1=y,i.x2=b,i.y2=C}else i.visible=!1}}getLabelOverflow(e,t){const i=-this.centerX,n=i+t.width,s=-this.centerY,o=s+t.height,r=1;let a=e.width;e.x+r<i?a=(e.x+e.width-i)/e.width:e.x+e.width-r>n&&(a=(n-e.x)/e.width);const l=e.y+r<s||e.y+e.height-r>o,c=this.bboxIntersectsSurroundingSeries(e);return{maxWidth:a,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:c}}bboxIntersectsSurroundingSeries(e){const{surroundingRadius:t}=this;if(t==null)return!1;const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n=t**2;return i.some(s=>s.x**2+s.y**2>n)}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t}=this.properties,{offset:i,minSpacing:n}=t,s=e.convert(0),o=C=>!C.calloutLabel||C.outerRadius===0,r=this.calloutNodeData,a=r.filter(C=>!o(C));for(const C of a){const w=C.calloutLabel;w!=null&&(w.hidden=!1,w.collisionTextAlign=void 0,w.collisionOffsetY=0)}if(a.length<=1)return;const l=a.filter(C=>C.midCos<0).sort((C,w)=>C.midSin-w.midSin),c=a.filter(C=>C.midCos>=0).sort((C,w)=>C.midSin-w.midSin),d=a.filter(C=>C.midSin<0&&C.calloutLabel?.textAlign==="center").sort((C,w)=>C.midCos-w.midCos),p=a.filter(C=>C.midSin>=0&&C.calloutLabel?.textAlign==="center").sort((C,w)=>C.midCos-w.midCos),g=C=>{const w=C.calloutLabel;if(w==null)return Le.zero.clone();const x=this.getLabelStyle(C,t),M=gf(x),E=this.getCalloutLineStyle(C,!1).length,I=C.outerRadius+E+i,N=C.midCos*I,T=C.midSin*I+w.collisionOffsetY,P=w.collisionTextAlign??w.textAlign,O=w.textBaseline;return Fo.measureBBox(w.text,N,T,{font:this.properties.calloutLabel,textAlign:P,textBaseline:O}).grow(M)},m=(C,w,x)=>{const M=g(C).grow(n/2),E=g(w).grow(n/2);M.x<E.x+E.width&&M.x+M.width>E.x&&(x==="to-top"?M.y<E.y+E.height:M.y+M.height>E.y)&&(w.calloutLabel.collisionOffsetY=x==="to-top"?M.y-E.y-E.height:M.y+M.height-E.y)},y=C=>{const w=C.slice().sort((M,E)=>Math.abs(M.midSin)-Math.abs(E.midSin))[0],x=C.indexOf(w);for(let M=x-1;M>=0;M--){const E=C[M+1],I=C[M];m(E,I,"to-top")}for(let M=x+1;M<C.length;M++){const E=C[M-1],I=C[M];m(E,I,"to-bottom")}},b=C=>{const w=a.some(T=>T.calloutLabel.collisionOffsetY!==0),x=C.map(T=>g(T)),M=x.map(T=>T.clone().grow(n/2));let E=!1;for(let T=0;T<M.length&&!E;T++){const P=M[T];for(let O=T+1;O<C.length;O++){const G=M[O];if(P.collidesBBox(G)){E=!0;break}}}const I=r.map(T=>{const{startAngle:P,endAngle:O,outerRadius:G}=T;return{startAngle:P,endAngle:O,innerRadius:s,outerRadius:G}}),N=x.some(T=>I.some(P=>Kpe(T,P)));if(!(!E&&!w&&!N))for(const T of C){if(T.calloutLabel.textAlign!=="center")continue;const P=T.calloutLabel;T.midCos<0?P.collisionTextAlign="right":T.midCos>0?P.collisionTextAlign="left":P.collisionTextAlign="center"}};y(l),y(c),b(d),b(p)}getLabelStyle(e,t){const i=this.ctx.highlightManager?.getActiveHighlight();return Zh(this,e,this.properties,t,!1,i)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i}=this.properties,n=new Fo;for(const s of this.calloutLabelSelection.selectByTag(1)){const o=s.closestDatum(),r=o.calloutLabel,a=t.convert(o.radius),l=Math.max(0,a);if(!r?.text||l===0||r.hidden){s.visible=!1;continue}const c=this.getLabelStyle(o,i),d=this.getCalloutLineStyle(o,!1).length,p=l+d+i.offset,g=o.midCos*p,m=o.midSin*p+r.collisionOffsetY,y={textAlign:r.collisionTextAlign??r.textAlign,textBaseline:r.textBaseline};n.text=r.text,n.x=g,n.y=m,n.setFont(c),n.setAlign(y),n.setBoxing(c);const b=n.getBBox();let C=r.text,w=!0;if(i.avoidCollisions){const{maxWidth:x,hasVerticalOverflow:M}=this.getLabelOverflow(b,e);if(b.width>x){const E={font:this.properties.calloutLabel,textWrap:"on-space",overflow:"hide",maxWidth:x};C=L1(r.text,E)}w=!M}s.text=C,s.x=g,s.y=m,s.setFont(c),s.setAlign(y),s.setBoxing(c),s.fill=c.color,s.fillOpacity=this.getHighlightStyle(!1,o.datumIndex).opacity??1,s.visible=w}}computeLabelsBBox(e,t){const{calloutLabel:i}=this.properties,{offset:n,maxCollisionOffset:s,minSpacing:o}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const r=[],a=new Fo;let l;const{title:c}=this.properties;if(c?.text&&c.enabled){const d=this.getTitleTranslationY();Number.isFinite(d)&&(a.text=c.text,a.x=0,a.y=d,a.setFont(c),a.setAlign({textBaseline:"bottom",textAlign:"center"}),l=a.getBBox(),r.push(l))}for(const d of this.calloutNodeData){const p=d.calloutLabel;if(!p||d.outerRadius===0)continue;const g=this.getLabelStyle(d,i),m=this.getCalloutLineStyle(d,!1).length,y=d.outerRadius+m+n,b=d.midCos*y,C=d.midSin*y+p.collisionOffsetY;a.text=p.text,a.x=b,a.y=C,a.setFont(g),a.setAlign({textAlign:p.collisionTextAlign??p.textAlign,textBaseline:p.textBaseline}),a.setBoxing(g);const w=a.getBBox();if(p.box=w,Math.abs(p.collisionOffsetY)>s){p.hidden=!0;continue}if(l){const x=-this.centerY,M=new Le(l.x-o,x,l.width+2*o,l.y+l.height+o-x);if(w.collidesBBox(M)){p.hidden=!0;continue}}if(e.hideWhenNecessary){const{maxWidth:x,hasVerticalOverflow:M,hasSurroundingSeriesOverflow:E}=this.getLabelOverflow(w,t),I=w.width>x;if(M||I||E){p.hidden=!0;continue}}p.hidden=!1,r.push(w)}return r.length===0?null:Le.merge(r)}updateSectorLabelNodes(){const{properties:e}=this,{positionOffset:t,positionRatio:i}=this.properties.sectorLabel,n=this.radiusScale.convert(0),s=n<=0&&this.ctx.legendManager.getData(this.id)?.filter(a=>a.enabled).length===1,o={textAlign:"center",textBaseline:"middle"},r=(a,l)=>{const{outerRadius:c,startAngle:d,endAngle:p}=l;let g=!1;if(l.sectorLabel&&c!==0){const m=this.getLabelStyle(l,e.sectorLabel),y=n*(1-i)+c*i+t;a.fill=m.color,a.fillOpacity=this.getHighlightStyle(!1,l.datumIndex).opacity??1,a.text=l.sectorLabel.text,s?(a.x=0,a.y=0):(a.x=l.midCos*y,a.y=l.midSin*y),a.setFont(m),a.setAlign(o),a.setBoxing(m);const b=a.getBBox(),C=[[b.x,b.y],[b.x+b.width,b.y],[b.x+b.width,b.y+b.height],[b.x,b.y+b.height]],w={startAngle:d,endAngle:p,innerRadius:n,outerRadius:c};C.every(([x,M])=>sk(x,M,w))&&(g=!0)}a.visible=g};this.labelSelection.each(r)}updateInnerLabelNodes(){const e=[],t=[];this.innerLabelsSelection.each((d,p)=>{const{fontStyle:g,fontWeight:m,fontSize:y,fontFamily:b,color:C}=p;d.fontStyle=g,d.fontWeight=m,d.fontSize=y,d.fontFamily=b,d.text=p.text,d.x=0,d.y=0,d.fill=C,d.textAlign="center",e.push(d.getBBox()),t.push(p.spacing)});const i=d=>d===0?0:t[d],n=d=>d===t.length-1?0:t[d],s=e.reduce((d,p)=>Math.max(d,p.width),0),o=e.reduce((d,p,g)=>d+p.height+i(g)+n(g),0),r=this.getInnerRadius(),l=Math.sqrt(Math.pow(s/2,2)+Math.pow(o/2,2))<=(r>0?r:this.getOuterRadius()),c=[];for(let d=0,p=-o/2;d<e.length;d++){const m=e[d].height+p+i(d);c.push(m),p=m+n(d)}this.innerLabelsSelection.each((d,p,g)=>{d.visible=l,Array.isArray(d.text)?d.y=c[g]-e[g].height:d.y=c[g]})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}pickNodeClosestDatum(e){return q$(this,e)}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s,ctx:{formatManager:o}}=this,{legendItemKey:r,calloutLabelKey:a,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:d,angleKey:p,angleName:g,radiusKey:m,radiusName:y,tooltip:b}=s,C=this.properties.title.node.getPlainText();if(!i||!n)return;const w=n.dataSources.get(this.id)?.data?.[e],x=this.getProcessedDataValues(i,n),{angleRawValues:M}=x,E=M[e],I=this.getLabelContent(e,w,x),N=I.legendItem??I.callout??I.sector??g,T=i.getDomain(this,"angleRaw","value",n),P=o.format(this.callWithContext.bind(this),{type:"number",value:E,datum:w,seriesId:t,legendItemName:void 0,key:p,source:"tooltip",property:"angle",domain:T,boundSeries:this.getFormatterContext("angle"),fractionDigits:void 0})??df(E,3);return this.formatTooltipWithContext(b,{title:C,symbol:this.legendItemSymbol(e),data:[{label:_n(N),fallbackLabel:p,value:P}]},{seriesId:t,datum:w,title:g,legendItemKey:r,calloutLabelKey:a,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:d,angleKey:p,angleName:g,radiusKey:m,radiusName:y,...this.getItemStyle({datum:w,datumIndex:e},!1)})}legendItemSymbol(e){const t=this.processedData?.dataSources.get(this.id)?.data?.[e],i=this.getItemStyle({datum:t,datumIndex:e},!1),{fillOpacity:n,strokeOpacity:s,strokeWidth:o,lineDash:r,lineDashOffset:a}=this.properties;let{fill:l}=i;const{stroke:c}=i;return Ar(l)&&(l={...l,gradient:"linear",rotation:0,reverse:!1}),{marker:{fill:l,stroke:c,fillOpacity:n,strokeOpacity:s,strokeWidth:o,lineDash:r,lineDashOffset:a}}}getLegendData(e){const{visible:t,processedData:i,dataModel:n,id:s,ctx:{legendManager:o}}=this;if(!n||!i||e!=="category")return[];const{angleKey:r,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c,showInLegend:d}=this.properties;if(!c&&(!a||a===r)&&(!l||l===r))return[];const p=this.getProcessedDataValues(n,i),{angleRawValues:g}=p,m=this.properties.title?.showInLegend&&this.properties.title.text,y=[],b=this.properties.hideZeroValueSectorsInLegend,C=i.dataSources.get(this.id)?.data,w=i.invalidData?.get(this.id);for(let x=0;x<i.input.count;x++){const M=C?.[x],E=g[x];if(w?.[x]===!0||b&&E===0)continue;const I=[];m&&I.push(m);const N=this.getLabelContent(x,M,p);c&&N.legendItem!==void 0?I.push(N.legendItem):a&&a!==r&&N.callout!==void 0?I.push(N.callout):l&&l!==r&&N.sector!==void 0&&I.push(N.sector),I.length!==0&&y.push({legendType:"category",id:s,datum:M,itemId:x,seriesId:s,hideToggleOtherSeries:!0,enabled:t&&o.getItemEnabled({seriesId:s,itemId:x}),label:{text:I.map(T=>_n(T)).join(" - ")},symbol:this.legendItemSymbol(x),legendItemName:c==null?void 0:M[c],hideInLegend:!d})}return y}setLegendState(e){const{id:t,ctx:{legendManager:i,updateService:n}}=this;for(const[s,o]of e.entries())i.toggleItem(o,t,s);i.update(),n.update(5)}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=ex(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);hn(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(n,s)=>this.getDatumId(s.datumIndex)),hn(this.id,"innerCircle",t,[this.innerCircleSelection],i.innerCircle),Gi(this,"callout",t,this.calloutLabelSelection),Gi(this,"sector",t,this.labelSelection),Gi(this,"inner",t,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,processedData:n,radiusScale:s,previousRadiusScale:o}=this,{animationManager:r}=this.ctx,a=n?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=(a?.moved.size??0)===0,c=(n?.defs.keys.length??0)>0,d=n?.reduced?.animationValidation?.uniqueKeys??!0;(!l||!c||!d)&&this.ctx.animationManager.skipCurrentBatch();const p=!this.nodeData.some(m=>m.enabled),g=ex(!1,this.properties.rotation,s,o);hn(this.id,"nodes",r,[e,t,i],g.nodes,(m,y)=>this.getDatumId(y.datumIndex),a),hn(this.id,"innerCircle",r,[this.innerCircleSelection],g.innerCircle),Gi(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Gi(this,"sector",this.ctx.animationManager,this.labelSelection),this.noVisibleData!==p&&(this.noVisibleData=p,Gi(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:n,previousRadiusScale:s}=this,{animationManager:o}=this.ctx,r=ex(!1,this.properties.rotation,n,s);hn(this.id,"nodes",o,[e,t,i],r.nodes,(a,l)=>this.getDatumId(l.datumIndex)),hn(this.id,"innerCircle",o,[this.innerCircleSelection],r.innerCircle),ZS(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),ZS(this,"sector",this.ctx.animationManager,this.labelSelection),ZS(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(e){const{dataModel:t,processedData:i}=this;if(!t||!i)return`${e}`;const{calloutLabelKey:n,sectorLabelKey:s,legendItemKey:o}=this.properties;if(!i.reduced?.animationValidation?.uniqueKeys)return`${e}`;if(o){const r=t.resolveKeysById(this,"legendItemKey",i);return Ls(r[e])}else if(n){const r=t.resolveKeysById(this,"calloutLabelKey",i);return Ls(r[e])}else if(s){const r=t.resolveKeysById(this,"sectorLabelKey",i);return Ls(r[e])}return`${e}`}hasItemStylers(){return!(this.properties.itemStyler==null&&this.properties.calloutLabel.itemStyler==null&&this.properties.sectorLabel.itemStyler==null&&this.properties.innerLabels.every(e=>e.itemStyler==null))}};rC.className="DonutSeries";rC.type="donut";var ok={series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:zr.LARGE},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{...Za,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{...Za,enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"chartBackgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2,colors:{$map:[{$if:[{$or:[{$isGradient:{$value:"$1"}},{$isPattern:{$value:"$1"}},{$isImage:{$value:"$1"}}]},{$path:["../../strokes/$index",{$ref:"foregroundColor"}]},{$value:"$1"}]},{$if:[{$eq:[{$path:"../strokeWidth"},0]},{$path:"../fills"},{$path:"../strokes"}]}]}},fills:{$applyCycle:[{$cacheMax:{$size:{$path:["./data",{$path:"/data"}]}}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",E3],["pattern",jo],["image",bc]]}]},strokes:{$applyCycle:[{$cacheMax:{$size:{$path:["./data",{$path:"/data"}]}}},{$palette:"strokes"}]},fillOpacity:1,strokeOpacity:1,strokeWidth:{$isUserOption:["./strokes/0",2,0]},lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:Vh,xOffset:3,yOffset:3,blur:5},highlight:ju()},legend:{enabled:!0}},Xpe={...ok,series:{...ok.series,innerRadiusRatio:{$if:[{$eq:[{$path:["./innerRadiusOffset",void 0]},void 0]},.7,void 0]},innerLabels:{$apply:{...Za,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:2}},highlight:I3()}},Qpe={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:e=>new rC(e),themeTemplate:Xpe},Jpe={type:"series",name:"donut",chartType:"polar",options:xde,create:e=>new rC(e)},wD=class extends rC{};wD.className="PieSeries";wD.type="pie";var ege={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:e=>new wD(e),themeTemplate:ok},tge={type:"series",name:"pie",chartType:"polar",options:Wh,create:e=>new wD(e)};function ige(){za.register(n$,$he,Uhe,Bhe,Spe,O$,_pe,H$,$pe,Qpe,ege,Vpe);for(const e of[Yo,Wf,Sc,Hh,jh,Yu])nh.register(e.type,{moduleFactory:t=>new e(t)})}function nge(){for(const e of za.modules){if(e.packageType==="enterprise"&&!Gle(e)&&fe.errorOnce("Unexpected enterprise module registered: "+e.identifier),e.type==="root"&&e.themeTemplate)for(const t of e.chartTypes)TI.set(t,e.themeTemplate);if(e.type==="series"){if(e.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${e.identifier}`);yr.register(e.identifier,e)}if(e.type==="series-option"&&e.themeTemplate)for(const t of e.seriesTypes)yr.setThemeTemplate(t,e.themeTemplate);if(e.type==="axis-option"&&e.themeTemplate)for(const t of e.axisTypes){const i=nh.getThemeTemplate(t),n=_t(e.themeTemplate,i);nh.setThemeTemplate(t,n)}e.type==="axis"&&nh.register(e.identifier,e),e.type==="legend"&&cL.register(e.identifier,e)}if(za.hasEnterpriseModules()){const e=_le();e.length>0&&fe.errorOnce("Enterprise modules expected but not registered: ",e)}}var uo=Symbol("IGNORED_PROP");function xr(e,t){const i={};for(const n of Object.keys(t)){const s=t[n];s!==uo&&Object.hasOwn(e,n)&&(i[n]=s)}return i}function J$(e){const{enabled:t,mode:i,showArrow:n,range:s,position:o,pagination:r,delay:a,wrapping:l,interaction:c,renderer:d,...p}=e,g=xr(e,{enabled:t,showArrow:n,range:s,position:o,interaction:c,renderer:d,...p});return{chartTooltipOptions:xr(e,{enabled:uo,showArrow:uo,range:uo,position:uo,mode:i,pagination:r,delay:a,wrapping:l,...p}),seriesTooltipOptions:g}}function sge(e){const{animation:t,background:i,container:n,contextMenu:s,context:o,footnote:r,height:a,listeners:l,locale:c,minHeight:d,minWidth:p,overrideDevicePixelRatio:g,padding:m,subtitle:y,theme:b,title:C,width:w,type:x,cursor:M,nodeClickRange:E,tooltip:I={},value:N,scale:T={},startAngle:P,endAngle:O,highlightStyle:G,highlight:B,segmentation:z,bar:j,needle:X,targets:q,outerRadius:H,innerRadius:K,outerRadiusRatio:U,innerRadiusRatio:de,cornerRadius:te,cornerMode:V,label:W,secondaryLabel:ee,spacing:pe,...be}=e,{chartTooltipOptions:Ce,seriesTooltipOptions:Fe}=J$(I),xe=xr(e,{animation:t,background:i,container:n,contextMenu:s,context:o,footnote:r,height:a,listeners:l,locale:c,minHeight:d,minWidth:p,overrideDevicePixelRatio:g,padding:m,subtitle:y,theme:b,title:C,tooltip:Ce,width:w}),De=xr(e,{needle:X==null?uo:{enabled:!0,...X},startAngle:P,endAngle:O,scale:T,type:x,cursor:M,context:o,nodeClickRange:E,tooltip:Fe,value:N,highlightStyle:G,highlight:B,segmentation:z,bar:j,targets:q,outerRadius:H,innerRadius:K,outerRadiusRatio:U,innerRadiusRatio:de,cornerRadius:te,cornerMode:V,label:W,secondaryLabel:ee,spacing:pe,...be});return{...xe,series:[De]}}function oge(e){const{animation:t,background:i,container:n,contextMenu:s,context:o,footnote:r,height:a,listeners:l,locale:c,minHeight:d,minWidth:p,overrideDevicePixelRatio:g,padding:m,subtitle:y,theme:b,title:C,width:w,type:x,cursor:M,nodeClickRange:E,tooltip:I={},value:N,scale:T={},direction:P="vertical",thickness:O,highlightStyle:G,highlight:B,segmentation:z,bar:j,targets:X,cornerRadius:q,cornerMode:H,label:K,...U}=e,{chartTooltipOptions:de,seriesTooltipOptions:te}=J$(I),V=xr(e,{animation:t,background:i,container:n,contextMenu:s,context:o,footnote:r,height:a,listeners:l,locale:c,minHeight:d,minWidth:p,overrideDevicePixelRatio:g,padding:m,subtitle:y,theme:b,title:C,tooltip:de,width:w}),W=xr(e,{scale:T,type:x,cursor:M,context:o,nodeClickRange:E,tooltip:te,value:N,direction:P,thickness:O,highlightStyle:G,highlight:B,segmentation:z,bar:j,targets:X,cornerRadius:q,cornerMode:H,label:K,...U});return{...V,series:[W]}}function KV(e,t){if(t==null)return e;const{targets:i,...n}=t;return e=_t(e,n),e.targets!=null&&i!=null&&(e.targets=tW(e.targets,i)),e}function rge(e,t){switch(e.type){case"radial-gauge":return sge(KV(e,t));case"linear-gauge":return oge(KV(e,t));default:return{}}}var ur={stroke:Bi},rs={fill:Ob},qV={color:"white",fill:Bi},kl={color:Bi},Od={color:Fb,fontSize:{$rem:zr.LARGE},fontFamily:{$ref:"fontFamily"}},rk={...Od,fontSize:{$ref:"fontSize"},color:_b,fill:Bb,stroke:Gb,strokeWidth:1,divider:{stroke:Vb,strokeWidth:1,strokeOpacity:.5}},sT={...ur,background:{fill:An,fillOpacity:.2},handle:{...rs},text:{...kl},statistics:{...rk}},age={line:{...ur,handle:{...rs},text:{...kl}},"horizontal-line":{...ur,handle:{...rs},axisLabel:{...qV},text:{...kl}},"vertical-line":{...ur,handle:{...rs},axisLabel:{...qV},text:{...kl}},"disjoint-channel":{...ur,background:{fill:An,fillOpacity:.2},handle:{...rs},text:{...kl}},"parallel-channel":{...ur,background:{fill:An,fillOpacity:.2},handle:{...rs},text:{...kl}},"fibonacci-retracement":{...ur,strokes:Mv,rangeStroke:Bi,handle:{...rs},text:{...kl,position:"center"},label:{...Od,color:void 0,fontSize:{$rem:zr.SMALLER}}},"fibonacci-retracement-trend-based":{...ur,strokes:Mv,rangeStroke:Bi,handle:{...rs},text:{...kl,position:"center"},label:{...Od,color:void 0,fontSize:{$rem:zr.SMALLER}}},callout:{...ur,...Od,color:{$ref:"textColor"},handle:{...rs},fill:An,fillOpacity:.2},comment:{...Od,color:"white",fontWeight:700,handle:{...rs},fill:Bi},note:{...Od,color:jb,fill:Bi,stroke:{$ref:"chartBackgroundColor"},strokeWidth:1,strokeOpacity:1,handle:{...rs},background:{fill:zb,stroke:Hb,strokeWidth:1}},text:{...Od,handle:{...rs}},arrow:{...ur,handle:{...rs},text:{...kl}},"arrow-up":{fill:{$palette:"up.fill"},handle:{...rs,stroke:Bi}},"arrow-down":{fill:{$palette:"down.fill"},handle:{...rs,stroke:Bi}},"date-range":{...sT},"price-range":{...sT},"date-price-range":{...sT},"quick-date-price-range":{up:{...ur,fill:An,fillOpacity:.2,handle:{...rs},statistics:{...rk,color:"#fff",fill:An,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...ur,stroke:Av,fill:Dv,fillOpacity:.2,handle:{...rs,stroke:Av},statistics:{...rk,color:"#fff",fill:Dv,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}},axesButtons:{enabled:!0}},lge=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"],cge=[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"fibonacci-retracement-drawing",tooltip:"toolbarAnnotationsFibonacciAnnotations",value:"fibonacci-menu"},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}];function uge(e,t,i){const{dateKey:n="date",highKey:s="high",openKey:o="open",lowKey:r="low",closeKey:a="close",volumeKey:l="volume",chartType:c="candlestick",navigator:d=!1,volume:p=!0,rangeButtons:g=!0,statusBar:m=!0,toolbar:y=!0,zoom:b=!0,sync:C=!1,theme:w,data:x,formatter:M,...E}=e,I=hge(c,n,s,r,o,a),N=dge(i,o,a,p,l),P={navigator:{enabled:d,...p?{miniChart:{enabled:d,series:[{type:"line",xKey:n,yKey:l,stroke:YM,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null}},O={annotations:{enabled:y,optionsToolbar:{enabled:y},snap:!0,toolbar:{enabled:y,buttons:cge,padding:0},data:x,xKey:n,volumeKey:p?l:void 0}},G=m?{statusBar:{enabled:!0,data:x,highKey:s,openKey:o,lowKey:r,closeKey:a,volumeKey:p?l:void 0}}:null,B={zoom:{enabled:b,autoScaling:{enabled:!0},enableIndependentAxes:!0}},z={ranges:{enabled:g}},j=C?{sync:{enabled:C,nodeInteraction:!0,zoom:!0}}:null,X=p?[{type:"number",position:"left",keys:[l],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percent",align:"end"}}]:[];return{theme:{baseTheme:typeof w=="string"?w:"ag-financial",..._t(typeof w=="object"?w:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:6},chartToolbar:{enabled:y},annotations:{...age},axes:{number:{interval:{maxSpacing:45},label:{format:".2f"}}}},bar:{series:{fillOpacity:.5}},line:{series:{marker:{enabled:!1},...QV(c,{hlc:{stroke:{$palette:"altNeutral.stroke"},strokeWidth:2},line:{stroke:{$palette:"neutral.stroke"}},"step-line":{stroke:{$palette:"neutral.stroke"},interpolation:{type:"step"}}})}},candlestick:{series:{...QV(c,{"hollow-candlestick":{item:{up:{fill:"transparent"}}}})}},"range-area":{series:{fillOpacity:.3,strokeWidth:2}}}})},animation:{enabled:!1},legend:{enabled:!1},series:[...N,...I],axes:[{type:"number",position:"right",keys:[o,a,s,r],crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percent",align:"start"}},...X,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:x,formatter:M,...O,...P,...G,...B,...z,...j,...E}}function dge(e,t,i,n,s){return n?[{type:"bar",xKey:"date",yKey:s,tooltip:{enabled:!1},itemStyler({datum:o}){const{up:r,down:a}=e().palette;return{fill:o[t]<o[i]?r?.fill:a?.fill}},focusPriority:1,highlight:{enabled:!1}}]:[]}var ZV="range-area";function hge(e,t,i,n,s,o){const r={xKey:t,openKey:s,closeKey:o,highKey:i,lowKey:n},a={xKey:t,yKey:o},l={pickOutsideVisibleMinorAxis:!0};switch(e??"candlestick"){case"ohlc":return pge(l,r);case"line":case"step-line":return gge(l,a);case"hlc":return fge(l,a,r);case"high-low":return mge(l,r);case"candlestick":case"hollow-candlestick":return XV(l,r);default:return fe.warnOnce(`unknown chart type: ${e}; expected one of: ${lge.join(", ")}`),XV(l,r)}}function pge(e,t){return[{type:"ohlc",focusPriority:0,...e,...t}]}function gge(e,t){return[{type:"line",focusPriority:0,...e,...t}]}function fge(e,t,{xKey:i,highKey:n,closeKey:s,lowKey:o}){return[{type:ZV,focusPriority:0,...e,xKey:i,yHighKey:n,yLowKey:s,fill:zM,stroke:_M},{type:ZV,focusPriority:0,...e,xKey:i,yHighKey:s,yLowKey:o,fill:HM,stroke:VM},{type:"line",...e,...t}]}function mge(e,{xKey:t,highKey:i,lowKey:n}){return[{type:"range-bar",...e,xKey:t,yHighKey:i,yLowKey:n,fill:WM,stroke:jM,tooltip:{range:"nearest"},focusPriority:0}]}function XV(e,t){return[{type:"candlestick",focusPriority:0,...e,...t}]}function QV(e,t){return t[e]??t.default}var eY={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:$M,lineDash:[0],label:{enabled:!1}}},oT={...eY,nice:!1},aS={mode:"compact",position:{anchorTo:"node",placement:["right","left"]},showArrow:!1},rT={style:[{stroke:{$ref:"gridLineColor"}}],width:2},yge={number:{gridLine:rT},time:{gridLine:rT},category:{gridLine:rT}},vge={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},navigator:{enabled:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:{...oT,interval:{values:[0]}},log:{...oT},time:{...oT},category:{...eY}}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:{...aS,position:{...aS.position,anchorTo:"pointer"},range:"nearest"},axes:yge},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3}},tooltip:aS},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4},tooltip:aS}}},tY=ls(bge);function bge(e,t){return typeof e=="string"?{...t,baseTheme:e}:e!=null?{...e,baseTheme:tY(e.baseTheme,t)}:t}function iY(e){if(Array.isArray(e)&&e.length!==0){const t=e.find(i=>i!=null);if(typeof t=="number")return{data:e.map((n,s)=>({x:s,y:n})),series:[{xKey:"x",yKey:"y"}],datumKey:"y"};if(Array.isArray(t))return{data:e.map(n=>({x:n?.[0],y:n?.[1],datum:n})),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}else if(e?.length===0)return{data:e,series:[{xKey:"x",yKey:"y"}],datumKey:"y"};return{data:e}}function Cge(e){switch(e?.type){case"number":{const{type:t,min:i,max:n,reverse:s}=e;return xr(e,{type:t,reverse:s,min:i,max:n})}case"time":{const{type:t,min:i,max:n,reverse:s}=e;return xr(e,{type:t,reverse:s,min:i,max:n})}case"category":default:{const{paddingInner:t,paddingOuter:i,reverse:n}=e??{};return xr({...e,type:"category"},{type:"category",reverse:n,paddingInner:t,paddingOuter:i})}}}function wge(e,t,i){const n={};return e?.stroke!=null&&(n.style=[{stroke:e?.stroke}],n.enabled??(n.enabled=!0)),e?.strokeWidth!=null&&(n.width=e?.strokeWidth,n.enabled??(n.enabled=!0)),i.type==="bar"&&i.direction!=="horizontal"&&(n.enabled??(n.enabled=!0)),e?.visible!=null&&(n.enabled=e.visible),n.enabled??(n.enabled=t),n}var Sge=ls((e,t,i)=>n=>{const s=n.datum[n.xKey],o=n.datum[n.yKey],r=i==null?n.datum:n.datum[i],a=t?.renderer?.({context:e,datum:r,xValue:s,yValue:o});if(typeof a=="string")return a;const l=a?.content??o.toFixed(2);return a?.title?{heading:void 0,title:void 0,data:[{label:a.title,value:l}]}:{heading:void 0,title:l,data:[]}});function xge(e){const{background:t,container:i,height:n,listeners:s,locale:o,minHeight:r,minWidth:a,overrideDevicePixelRatio:l,padding:c,width:d,theme:p,data:g,crosshair:m,axis:y,min:b,max:C,tooltip:w,context:x,styleNonce:M,...E}=e,I=xr(e,{background:t,container:i,height:n,listeners:s,locale:o,minHeight:r,minWidth:a,overrideDevicePixelRatio:l,padding:c,width:d,styleNonce:M,tooltip:uo,context:uo,data:uo,crosshair:uo,axis:uo,min:uo,max:uo,theme:uo}),{data:N,series:[T]=[],datumKey:P}=iY(g),O=E;T!=null&&Object.assign(O,T),O.tooltip={...w,renderer:Sge(x,w,P)},I.theme=tY(p,vge),I.data=N,I.series=[O];const G=O.type!=="bar"||O.direction!=="horizontal",[B,z]=G?["bottom","left"]:["left","bottom"],j={...Cge(y),position:B,...xr(e,{crosshair:m})},X={type:"number",gridLine:wge(y,!1,e),position:z,...xr(e,{min:b,max:C})};return I.axes=G?[X,j]:[j,X],I}var Mge={chartType:ye("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),dateKey:ce,openKey:ce,highKey:ce,lowKey:ce,closeKey:ce,volumeKey:ce,navigator:Z,volume:Z,rangeButtons:Z,statusBar:Z,toolbar:Z,zoom:Z,sync:Z,theme:Ue,container:Ue,width:Ue,height:Ue,minWidth:Ue,minHeight:Ue,listeners:Ue,initialState:Ue,title:Ue,data:tl,formatter:Ue},ak={theme:Ue,container:Ue,animation:Ue,background:Ue,contextMenu:Ue,context:()=>!0,listeners:Ue,locale:Ue,width:Ue,height:Ue,minWidth:Ue,minHeight:Ue,title:Ue,subtitle:Ue,footnote:Ue,padding:Ue,tooltip:{...Ft,...tt.tooltip}};ak.overrideDevicePixelRatio=Ze(J);var aT=["showInLegend","showInMiniChart","grouped","stacked","stackGroup","tooltip","listeners","errorBar","xKey","yKey","type"],lT={visible:Z,reverse:Z,stroke:Re,strokeWidth:J},tx={context:()=>!0,tooltip:Ue,theme:Ue,background:Ue,container:Ue,width:Ue,height:Ue,minWidth:Ue,minHeight:Ue,padding:Ue,listeners:Ue,locale:Ue,data:Ue,styleNonce:ce,axis:hb({number:{...lT,min:gi(ue,_a("max")),max:gi(ue,Va("min"))},category:{...lT,paddingInner:Be,paddingOuter:Be},time:{...lT,min:gi(rt(ue,Ya),_a("max")),max:gi(rt(ue,Ya),Va("min"))}},"axis options","category"),min:gi(ue,_a("max")),max:gi(ue,Va("min")),crosshair:{enabled:Z,snap:Z,...we,...Ne},xKey:ce,yKey:ce};tx.overrideDevicePixelRatio=Ze(ue);var Dge={type:"preset",name:"price-volume",enterprise:!0,options:Mge,create:uge},Age={type:"preset",name:"gauge-preset",enterprise:!0,options:hb({"linear-gauge":{...Ae(ku,["type"]),...ak},"radial-gauge":{...Ae(Yb,["type"]),...ak}},"gauge options"),create:rge},Rge={type:"preset",name:"sparkline",options:hb({area:{...tx,...Ae(p5,aT)},bar:{...tx,...Ae(aD,aT)},line:{...tx,...Ae(lD,aT)}},"sparkline options"),create:xge,processData:iY};function nY(e){const t=new Map;for(const i of e){if(!(i instanceof Xu))continue;const s=(i.seriesGrouping?.stackCount??0)>0?i.seriesGrouping?.groupIndex:void 0;if(s==null){i.seriesBelowStackContext=void 0,i.createStackContext();continue}const o=`${i.type}-${s}`;let r=t.get(o);r==null&&(r=[],t.set(o,r)),r.push(i)}for(const i of t.values()){i.sort((s,o)=>(s.seriesGrouping?.stackIndex??0)-(o.seriesGrouping?.stackIndex??0));let n;for(const s of i)s.seriesBelowStackContext=n,n=s.createStackContext()}}var Ege=["top","right","bottom","left"],aC=class sY extends GM{constructor(t,i){super(t,i),this.paired=!0,this.axes=[],this.lastUpdateClipRect=void 0,this.lastLayoutWidth=Number.NaN,this.lastLayoutHeight=Number.NaN}onAxisChange(t,i){super.onAxisChange(t,i),this.syncAxisChanges(t,i),this.ctx!=null&&this.ctx.zoomManager.updateAxes(t)}destroySeries(t){super.destroySeries(t),this.lastLayoutWidth=Number.NaN,this.lastLayoutHeight=Number.NaN}getChartType(){return"cartesian"}setRootClipRects(t){const{seriesRoot:i,annotationRoot:n}=this;i.setClipRect(t),n.setClipRect(t)}async processData(){await super.processData(),this.syncStatus==="init"&&(this.syncStatus="domains-calculated"),this.ctx.updateService.dispatchProcessData({series:{shouldFlipXY:this.shouldFlipXY()}})}async processDomains(){await super.processDomains();for(const t of this.axes){const i=await this.getSyncedDomain(t);i!=null&&t.setDomains(i)}}performLayout(t){const{seriesRoot:i,annotationRoot:n}=this,{clipSeries:s,seriesRect:o,visible:r}=this.updateAxes(t.layoutBox);this.seriesRoot.visible=r,this.seriesRect=o,this.animationRect=t.layoutBox;const{x:a,y:l}=o;if(t.width!==this.lastLayoutWidth||t.height!==this.lastLayoutHeight)for(const m of[i,n])m.translationX=Math.floor(a),m.translationY=Math.floor(l);else{const{translationX:m,translationY:y}=i;yc(this.id,"seriesRect",this.ctx.animationManager,[i,n],{translationX:m,translationY:y},{translationX:Math.floor(a),translationY:Math.floor(l)},{phase:"update"})}this.lastLayoutWidth=t.width,this.lastLayoutHeight=t.height;const c=this.modulesManager.getModule("seriesArea"),d=o.clone().grow(c.getPadding()),p=c.clip||s?d:void 0,{lastUpdateClipRect:g}=this;this.lastUpdateClipRect=p,this.ctx.animationManager.isActive()&&g!=null?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:g,to:d,onUpdate:m=>this.setRootClipRects(m),onComplete:()=>this.setRootClipRects(p)}):this.setRootClipRects(p),this.ctx.layoutManager.emitLayoutComplete(t,{axes:this.axes.map(m=>m.getLayoutState()),series:{visible:r,rect:o,paddedRect:d},clipSeries:s}),nY(this.series)}updateAxes(t){const{clipSeries:i,seriesRect:n,overflows:s}=this.resolveAxesLayout(t);for(const o of this.axes)o.update(),o.setCrossLinesVisible(!s),this.clipAxis(o,n,t);return{clipSeries:i,seriesRect:n,visible:!s}}resolveAxesLayout(t){let i,n,s=0;const o=10,r=this.axes.filter(a=>a.crossAt?.value!=null);do if(n=i??this.getDefaultState(),i=this.updateAxesPass(new Map(n.axisAreaWidths),t.clone(),r),s++>o){fe.warn("Max iterations reached. Unable to stabilize axes layout.");break}while(!this.isLayoutStable(i,n));return this.lastAreaWidths=i.axisAreaWidths,i}updateAxesPass(t,i,n){const s=new Map,o={};let r=!1,a=!1;for(const M of Ege){const E=this.modulesManager.getModule("seriesArea").getPadding()[M],I=this.axes.findLast(N=>N.position===M);I?I.seriesAreaPadding=E:i.shrink(E,M)}const l=(t.get("left")??0)+(t.get("right")??0),c=(t.get("top")??0)+(t.get("bottom")??0),d=this.buildCrossLinePadding(t),p=d.left+d.right,g=d.top+d.bottom;i.width<=l+p||i.height<=c+g?r=!0:i.shrink(d);const{scene:m}=this.ctx,y=i.clone().shrink(Object.fromEntries(t));for(const M of this.axes){const{position:E="left",direction:I}=M,N=I==="y";let T;this.sizeAxis(M,y,E),M.thickness==null?T=cT(N,m)*(M.maxThicknessRatio??1):T=M.thickness;const{primaryTickCount:P,bbox:O}=M.calculateLayout(M.nice?o[I]:void 0,{sizeLimit:T-M.label.spacing,padding:this.padding});o[I]??(o[I]=P),a||(a=M.dataDomain.clipped||M.visibleRange[0]>0||M.visibleRange[1]<1),M.thickness==null&&(T=Math.min(cT(N,O)??0,T)),s.set(M.id,Math.ceil(T))}let b;n.length>0&&(b=this.calculateAxesCrossPositions(s,y,n));const C=I1(this.axes,M=>M.position??"left"),w=new Map,x=new Map;for(const[M,E]of $r(C)){let I=cT(M!=="left"&&M!=="right",m)%m.pixelRatio,N=0;for(const T of E??[]){x.set(T.id,I);const P=s.get(T.id)??0;N=Math.max(N,I+P),T.layoutConstraints.stacked&&(I+=P+sY.AxesPadding)}w.set(M,Math.ceil(N))}for(const[M,E]of $r(C))this.positionAxes({axes:E??[],position:M,axisWidths:s,axisOffsets:x,axisAreaWidths:w,axisBound:i,seriesRect:y});return b!=null&&this.applyAxisCrossing(y,b),{clipSeries:a,seriesRect:y,axisAreaWidths:w,overflows:r}}calculateAxesCrossPositions(t,i,n){const s=new Map,o=this.axes.find(a=>a.direction==="x"),r=this.axes.find(a=>a.direction==="y");for(const a of n){const{crossPosition:l,visible:c}=this.calculateAxisCrossPosition(a,o,r);a.setAxisVisible(c),this.adjustAxisWidth(a,t,l,i,c),l!=null&&s.set(a.id,l)}return s}calculateAxisCrossPosition(t,i,n){const s=t.direction==="x"?n:i;if(!s)return{crossPosition:void 0,visible:!0};const{scale:{domain:o,bandwidth:r},range:a}=s,l=(r??0)/2,c=s.scale.convert(t.crossAt?.value,{clamp:!1})+l;return s.inRange(c)?{crossPosition:c,visible:!0}:t.crossAt?.sticky===!1?{crossPosition:void 0,visible:!1}:{crossPosition:Number.isNaN(c)?a[o[0]]:pf(c,a),visible:!0}}adjustAxisWidth(t,i,n,s,o){const r=t.getModuleMap().getModule("crosshair")?.enabled===!0,a=this.modulesManager.getModule("annotations")?.enabled===!0,l=this.ctx.annotationManager.createMemento(),c=a||l.some(g=>{switch(g.type){case"vertical-line":return t.direction==="x";case"horizontal-line":return t.direction==="y";default:return!1}});if(r||c)return;const d=i.get(t.id)??0,p=o?this.calculateAxisBleedingWidth(t,d,n,s):0;i.set(t.id,p)}calculateAxisBleedingWidth(t,i,n,s){if(n==null)return i;switch(t.position){case"left":case"top":return Math.max(0,i-n);case"right":return Math.max(0,n+i-s.width);case"bottom":return Math.max(0,n+i-s.height);default:return i}}applyAxisCrossing(t,i){for(const n of this.axes){const s=i.get(n.id);if(s==null){n.crossAxisTranslation.x=0,n.crossAxisTranslation.y=0;continue}const o=n.direction==="x";n.crossAxisTranslation.x=o?0:t.x+s-n.translation.x,n.crossAxisTranslation.y=o?t.y+s-n.translation.y:0}}buildCrossLinePadding(t){var i;const n={top:0,right:0,bottom:0,left:0};for(const s of this.axes){const{position:o,label:r}=s;if(s.crossLines)for(const a of s.crossLines)a instanceof Os&&(a.position=o??"top",(i=a.label).parallel??(i.parallel=r.parallel)),a.calculatePadding?.(n)}for(const[s,o=0]of $r(n))n[s]=Math.max(o-(t.get(s)??0),0);return n}clampToOutsideSeriesRect(t,i,n,s){const o=n==="x"?t.x:t.y,r=n==="x"?t.width:t.height;return s===1?Math.min(i,o+r):Math.max(i,o)}async getSyncedDomain(t){const i=this.modulesManager.getModule("sync");if(i?.enabled)return await i.getSyncedDomain(t)}syncAxisChanges(t,i){const n=this.modulesManager.getModule("sync");if(!n?.enabled)return;const s=new Set(i??[]);for(const o of t)s.delete(o);for(const o of s)n.removeAxis(o)}sizeAxis(t,i,n){const s=t instanceof Yo,o=n==="left"||n==="right",{width:r,height:a}=i,l=o?a:r;let c=0,d=l,{min:p,max:g}=this.ctx.zoomManager.getAxisZoom(t.id);const{width:m,unit:y,align:b}=t.layoutConstraints;y==="px"?d=c+m:d=d*m/100,b==="end"&&(c=l-(d-c),d=l),o&&(s?[c,d]=[d,c]:[p,g]=[1-g,1-p]),t.range=[c,d],t.visibleRange=[p,g],t.gridLength=o?r:a}positionAxes(t){const{axes:i,axisBound:n,axisWidths:s,axisOffsets:o,axisAreaWidths:r,seriesRect:a,position:l}=t,c=r.get(l)??0;let d="x",p="y",g=1;(l==="top"||l==="bottom")&&(d="y",p="x");let m=n[d];(l==="right"||l==="bottom")&&(g=-1,m+=d==="x"?n.width:n.height);for(const y of i){const b=r.get(p==="x"?"left":"top")??0,C=s.get(y.id)??0,w=o.get(y.id)??0;y.gridPadding=c-w-C,y.translation[p]=n[p]+b,y.translation[d]=this.clampToOutsideSeriesRect(a,m+g*(w+C),d,g)}}shouldFlipXY(){return this.series.every(t=>t instanceof Xu&&t.shouldFlipXY())}getDefaultState(){const t=new Map;if(this.lastAreaWidths)for(const{position:i="left"}of this.axes){const n=this.lastAreaWidths.get(i);n!=null&&t.set(i,n)}return{axisAreaWidths:t,clipSeries:!1,overflows:!1}}isLayoutStable(t,i){if(i.overflows!==t.overflows||i.clipSeries!==t.clipSeries)return!1;for(const n of t.axisAreaWidths.keys())if(!i.axisAreaWidths.has(n))return!1;for(const[n,s]of i.axisAreaWidths.entries()){const o=t.axisAreaWidths.get(n);if((s!=null||o!=null)&&s!==o)return!1}return!0}clipAxis(t,i,n){const s=Math.ceil(t.gridLine?.width??0),o=Math.ceil(t.line?.width??0);let{width:r,height:a}=i;switch(r+=t.direction==="x"?s:o,a+=t.direction==="y"?s:o,t.clipGrid(i.x,i.y,r,a),t.position){case"left":case"right":t.clipTickLines(n.x,i.y-s,n.width+s,i.height+s*2);break;case"top":case"bottom":t.clipTickLines(i.x-s,n.y,i.width+s*2,n.height+s);break}}};aC.className="CartesianChart";aC.type="cartesian";aC.AxesPadding=15;A([ms({changeValue(e,t){this.onAxisChange(e,t)}})],aC.prototype,"axes",2);var Tge=aC;function cT(e,t){return e?t?.width:t?.height}var SD={mode:Ze(ye("integrated","standalone")),container:F4,context:()=>!0,theme:Ue,series:tl,annotations:Ue,navigator:Ue,initialState:{chartType:ce,annotations:Ue,legend:Vn({visible:Z,seriesId:ce,itemId:ce,legendItemName:ce},"legend state array"),zoom:Ue}},oY={...tt,...SD,axes:Nh(2),data:tl},rY={...tt,...SD,axes:Nh(2),data:tl},Ige={...tt,...SD,data:tl,topology:Soe},kge={...tt,...SD,data:tl},Lge=new Set(["number","log","time"]),Pge=e=>Zt(e)&&!Lge.has(e.type),Nge={type:"chart",name:"cartesian",options:oY,detect:c3,create(e,t){return new Tge(e,t)},validate(e,t,i){const n=[];e?.series?.[0]?.type==="histogram"&&e?.axes?.some(Pge)&&(n.push(new eh("invalid","only continuous axis types when histogram series is used",e.axes,i,"axes")),e=Ae(e,["axes"]));const s=Is(e,t,i);return s.invalid.push(...n),s}},aY=()=>{throw new Error("Enterprise module placeholder cannot be initialised")},Fge={type:"chart",name:"standalone",placeholder:!0,options:{},detect:d3,create:aY},Oge={type:"chart",name:"topology",placeholder:!0,options:{},detect:u3,create:aY},wf=class extends gL{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}update(){super.update(),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled}layoutCrossLines(){const e=this.label.getSideFlag(),t=this.hasDefinedDomain()||this.hasVisibleSeries(),{rotation:i,parallelFlipRotation:n,regularFlipRotation:s}=this.calculateRotations();for(const o of this.crossLines)o.sideFlag=-e,o.direction=i===-Math.PI/2?"angle":"radius",o.parallelFlipRotation=n,o.regularFlipRotation=s,o.calculateLayout?.(t,this.reverse)}updatePosition(){super.updatePosition();const e=Math.floor(this.translation.x),t=Math.floor(this.translation.y);this.tickLineGroup.translationX=e,this.tickLineGroup.translationY=t,this.tickLabelGroup.translationX=e,this.tickLabelGroup.translationY=t,this.crossLineRangeGroup.translationX=e,this.crossLineRangeGroup.translationY=t,this.crossLineLineGroup.translationX=e,this.crossLineLineGroup.translationY=t,this.crossLineLabelGroup.translationX=e,this.crossLineLabelGroup.translationY=t,this.tickLabelGroupSelection.each(qx())}computeLabelsBBox(e,t){return null}computeRange(){}getAxisLinePoints(){}};A([k],wf.prototype,"shape",2);A([k],wf.prototype,"innerRadiusRatio",2);var AP=class extends GM{constructor(e,t){super(e,t),this.padding=new Fh(40),this.ctx.axisManager.axisGroup.zIndex=8}getChartType(){return"polar"}async performLayout(e){const{layoutBox:t}=e,i=t.clone().shrink(this.modulesManager.getModule("seriesArea").getPadding());this.seriesRect=i,this.animationRect=i,this.seriesRoot.translationX=i.x,this.seriesRoot.translationY=i.y,await this.computeCircle(i);for(const n of this.axes)n.update();this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:i,paddedRect:t}})}updateAxes(e,t,i,n){const s=this.axes.find(l=>l.direction==="angle"),o=this.axes.find(l=>l.direction==="radius");if(!(s instanceof wf)||!(o instanceof wf))return;const r=s.scale,a=o.innerRadiusRatio;s.innerRadiusRatio=a,s.computeRange(),s.gridLength=n,o.gridAngles=r.ticks({nice:s.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.map(l=>r.convert(l)),o.gridRange=s.range,o.range=[n,n*a];for(const l of[s,o])l.translation.x=e.x+t,l.translation.y=e.y+i,l.calculateLayout()}async computeCircle(e){const t=this.series.filter(Bge),i=this.axes.filter(Gge),n=(c,d,p)=>{this.updateAxes(e,c,d,p);for(const m of t)m.centerX=c,m.centerY=d,m.radius=p;const g=t.filter(m=>m.type==="donut"||m.type==="pie");if(g.length>1){const m=g.map(y=>{const b=y.getInnerRadius();return{series:y,innerRadius:b}}).sort((y,b)=>y.innerRadius-b.innerRadius);m.at(-1).series.surroundingRadius=void 0;for(let y=0;y<m.length-1;y++)m[y].series.surroundingRadius=m[y+1].innerRadius}},s=e.width/2,o=e.height/2,r=Math.max(0,Math.min(e.width,e.height)/2);let a=r;n(s,o,a);const l=async({hideWhenNecessary:c=!1}={})=>{const d=[];for(const m of wg(i,t)){const y=await m.computeLabelsBBox({hideWhenNecessary:c},e);y&&d.push(y)}if(d.length===0){n(s,o,r);return}const p=Le.merge(d),g=this.refineCircle(p,a,e);n(g.centerX,g.centerY,g.radius),a=g.radius};await l(),await l(),await l(),await l({hideWhenNecessary:!0}),await l({hideWhenNecessary:!0});for(const c of wg(i,t))await c.computeLabelsBBox({hideWhenNecessary:!0},e);return{radius:a,centerX:s,centerY:o}}refineCircle(e,t,i){const s=-t,o=-t,r=t,a=t;let l=Math.max(0,s-e.x),c=Math.max(0,o-e.y),d=Math.max(0,e.x+e.width-r),p=Math.max(0,e.y+e.height-a);l=d=Math.max(l,d),c=p=Math.max(c,p);const g=i.width-l-d,m=i.height-c-p;let y=Math.min(g,m)/2;const b=.5*i.width/2,C=.5*i.height/2,w=Math.min(b,C);if(y<w){y=w;const E=l+d,I=c+p;if(2*y+I>i.height){const N=i.height-2*y;Math.min(c,p)*2>N?(c=N/2,p=N/2):c>p?c=N-p:p=N-c}if(2*y+E>i.width){const N=i.width-2*y;Math.min(l,d)*2>N?(l=N/2,d=N/2):l>d?l=N-d:d=N-l}}const x=l+2*y+d,M=c+2*y+p;return{centerX:(i.width-x)/2+l+y,centerY:(i.height-M)/2+c+y,radius:y}}};AP.className="PolarChart";AP.type="polar";function Bge(e){return e instanceof DP}function Gge(e){return e instanceof wf}var _ge={type:"chart",name:"polar",options:rY,detect:Tce,create(e,t){return new AP(e,t)},validate(e,t,i){const n=[],s=e?.series?.[0]?.type;(s==="pie"||s==="donut")&&e?.axes&&(n.push(new R1([],e.axes,i,"axes")),e=Ae(e,["axes"]));const o=Is(e,t,i);return o.invalid.push(...n),o}},Vge=[Nge,hde,pde,gde,fde,mde,yde,L$,B$,V$,z$,j$,W$],zge=[_ge,Jpe,tge],Hge=[...Vge,...zge,Fge,Oge,Dge,Age,Rge],jge=1e3,RP=class cu{constructor(t,i,n,s,o,r=jge){this.name=t,this.buildItem=i,this.releaseItem=n,this.destroyItem=s,this.maxPoolSize=o,this.cleanupTimeMs=r,this.freePool=[],this.busyPool=new Set}static getPool(t,i,n,s,o){return this.pools.has(t)||this.pools.set(t,new cu(t,i,n,s,o)),this.pools.get(t)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}hasFree(){return this.freePool.length>0}obtain(t){if(!this.hasFree()&&this.isFull())throw new Error("AG Charts - pool exhausted");let i=this.freePool.pop();return i==null?(i=this.buildItem(t),cu.debug(()=>[`Pool[name=${this.name}]: Created instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i])):cu.debug(()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i]),this.busyPool.add(i),{item:i,release:()=>this.release(i)}}obtainFree(){const t=this.freePool.pop();if(t==null)throw new Error("AG Charts - pool has no free instances");return cu.debug(()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,t]),this.busyPool.add(t),{item:t,release:()=>this.release(t)}}release(t){if(!this.busyPool.has(t))throw new Error("AG Charts - cannot free item from pool which is not tracked as busy.");cu.debug(()=>[`Pool[name=${this.name}]: Releasing instance (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t]),this.releaseItem(t),this.busyPool.delete(t),this.freePool.push(t),cu.debug(()=>[`Pool[name=${this.name}]: Returned instance to free pool (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t]);const i=Date.now(),n=i+this.cleanupTimeMs*.5;this.cleanPoolTimer&&(this.cleanPoolDue??1/0)<n&&(clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=void 0),this.cleanPoolTimer||(this.cleanPoolDue=i+this.cleanupTimeMs,this.cleanPoolTimer=setTimeout(this.cleanPool.bind(this),this.cleanupTimeMs))}cleanPool(){const t=this.freePool.splice(0);for(const i of t)this.destroyItem(i);cu.debug(()=>[`Pool[name=${this.name}]: Cleaned pool of ${t.length} items (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`])}destroy(){this.cleanPool();for(const t of this.busyPool.values())this.destroyItem(t);this.busyPool.clear()}};RP.pools=new Map;RP.debug=at.create(!0,"pool");var Wge=RP;zs.registerMany(Hge,mv);var Bl=at.create(!0,"opts"),bu=class{static licenseCheck(t){this.licenseChecked||(this.licenseManager=Du.licenseManager?.(t),this.licenseManager?.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(t){return Du.licenseManager?.({}).getLicenseDetails(t)}static getInstance(t){return JV.getInstance(t)}static create(t,i){const n=at.check("scene:stats","scene:stats:verbose")?performance.now():void 0;return Bl.group("AgCharts.create()",()=>{t=at.inDevelopmentMode(()=>Vl(zi(t)))??t,this.licenseCheck(t);const s=JV.createOrUpdate({userOptions:t,licenseManager:this.licenseManager,optionsMetadata:i,apiStartTime:n});return this.licenseManager?.isDisplayWatermark()&&this.licenseManager&&Du.injectWatermark?.(s.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()),s})}static createFinancialChart(t){return Bl.group("AgCharts.createFinancialChart()",()=>this.create(t,{presetType:"price-volume"}))}static createGauge(t){return Bl.group("AgCharts.createGauge()",()=>this.create(t,{presetType:"gauge-preset"}))}static __createSparkline(t){return Bl.group("AgCharts.__createSparkline()",()=>{const{pool:i,...n}=t;return this.create(n,{presetType:"sparkline",pool:i??!0,domMode:"minimal",withDragInterpretation:!1})})}};bu.licenseChecked=!1;var Ea=class uu{static getInstance(t){const i=GM.getInstance(t);return i?MV.chartInstances.get(i):void 0}static initialiseModules(){uu.initialised||(ige(),nge(),uu.initialised=!0)}static createOrUpdate(t){let{proxy:i}=t;const{userOptions:n,licenseManager:s,processedOverrides:o=i?.chart?.chartOptions.processedOverrides??{},specialOverrides:r=i?.chart?.chartOptions.specialOverrides??{},optionsMetadata:a=i?.chart?.chartOptions.optionMetadata??{},deltaOptions:l,data:c,stripSymbols:d=!1,apiStartTime:p}=t,g=Du.styles==null?[]:[["ag-charts-enterprise",Du.styles]];uu.initialiseModules(),Bl(()=>[">>> AgCharts.createOrUpdate() user options",zi(n)]);const{presetType:m}=a;let y=n;bu.optionsMutationFn&&y&&(y=bu.optionsMutationFn(zi(y,jy.OPTIONS_CLONE_OPTS_FAST),m),Bl(()=>[">>> AgCharts.createOrUpdate() MUTATED user options",zi(y)]));const b=this.getPool(a);let C=!1,w,x=i?.chart;x==null&&b?.hasFree()&&(w=b.obtainFree(),x=w.item);const{document:M,window:E,styleContainer:I,...N}=y??{},T=x?.getChartOptions(),P=new jy(T,N,o,{...r,document:M,window:E,styleContainer:I},a,l,d,p);(x==null||zs.detectChartDefinition(P.processedOptions)!==zs.detectChartDefinition(x.chartOptions.processedOptions))&&(w?.release(),w=this.getPool(P.optionMetadata)?.obtain(P),w?x=w.item:(C=!0,x=uu.createChartInstance(P,x))),P.optionsGraph&&x.ctx.optionsGraphService.updateCallback((O,G,B)=>P.optionsGraph?.resolvePartial(O,G,B));for(const[O,G]of g)x.ctx.domManager.addStyles(O,G);return x.ctx.fontManager.updateFonts(P.googleFonts),c!=null&&x.ctx.dataService.restoreData(c),i==null?(i=new MV(x,uu.callbackApi,s),i.releaseChart=w?.release):(w||C)&&(i.releaseChart?.(),i.chart=x,i.releaseChart=w?.release),Bl.check()&&typeof globalThis.window<"u"&&(globalThis.agChartInstances??(globalThis.agChartInstances={}),globalThis.agChartInstances[x.id]=x),x.queuedUserOptions.push(P.userOptions),x.queuedChartOptions.push(P),x.requestFactoryUpdate(O=>{Bl.group(">>>> Chart.applyOptions()",()=>{O.applyOptions(P);const G=O.queuedUserOptions.indexOf(P.userOptions)+1;O.queuedUserOptions.splice(0,G),O.queuedChartOptions.splice(0,G)})}),i}static markRemovedProperties(t,i,n=!1){if(typeof t!="object")return n;for(const s of Object.keys(t))t[s]===void 0&&(Object.assign(t,{[s]:Symbol("UNSET")}),n||(n=!0));return n}static updateUserDelta(t,i,n){i=zi(i,jy.OPTIONS_CLONE_OPTS_FAST);const s=xu(i,uu.markRemovedProperties,new Set(["data"]),void 0,void 0,!1);Bl(()=>[">>> AgCharts.updateUserDelta() user delta",zi(i)]),uu.createOrUpdate({proxy:t,deltaOptions:i,stripSymbols:s,apiStartTime:n})}static createChartInstance(t,i){const n=i?.destroy({keepTransferableResources:!0});return zs.detectChartDefinition(t.processedOptions).create(t,n)}static getPool(t){if(t.pool===!0)return Wge.getPool(t.presetType??"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}};Ea.caretaker=new FW(mv);Ea.initialised=!1;Ea.callbackApi={caretaker:Ea.caretaker,create(e,t,i,n,s){return Ea.createOrUpdate({userOptions:e,processedOverrides:t,specialOverrides:i,optionsMetadata:n,data:s})},update(e,t,i,n){return Ea.createOrUpdate({userOptions:e,proxy:t,specialOverrides:i,apiStartTime:n})},updateUserDelta(e,t,i){return Ea.updateUserDelta(e,t,i)}};Ea.detachAndClear=e=>e.detachAndClear();Ea.destroy=e=>e.destroy();var JV=Ea,Uge={};il(Uge,{Arc:()=>al,BBox:()=>Le,Caption:()=>Ii,CategoryScale:()=>_f,Group:()=>ut,Line:()=>_o,LinearScale:()=>oh,Marker:()=>Rn,Path:()=>zn,RadialColumnShape:()=>Pr,Rect:()=>Tn,Scene:()=>CM,Sector:()=>ys,Shape:()=>on,TranslatableGroup:()=>hs,getRadialColumnWidth:()=>lY,toRadians:()=>ds});var al=class extends zn{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0}get fullPie(){return ho(On(this.startAngle),On(this.endAngle))}updatePath(){const e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?e.closePath():this.type===2&&!this.fullPie&&(e.lineTo(this.centerX,this.centerY),e.closePath())}computeBBox(){return new Le(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(e,t){const i=this.getBBox();return this.type!==0&&i.containsPoint(e,t)&&this.path.isPointInPath(e,t)}};al.className="Arc";A([Me()],al.prototype,"centerX",2);A([Me()],al.prototype,"centerY",2);A([Me()],al.prototype,"radius",2);A([Me()],al.prototype,"startAngle",2);A([Me()],al.prototype,"endAngle",2);A([Me()],al.prototype,"counterClockwise",2);A([Me()],al.prototype,"type",2);function uT(e,t,i){const n=Math.hypot(e,t),o=Math.atan2(t,e)+i;return{x:Math.cos(o)*n,y:Math.sin(o)*n}}var Pr=class extends zn{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(e){}computeBBox(){const{innerRadius:e,outerRadius:t,columnWidth:i}=this,n=this.getRotation(),s=-i/2,o=i/2,r=-t,a=-e;let l=1/0,c=1/0,d=-1/0,p=-1/0;for(let g=0;g<4;g+=1){const{x:m,y}=uT(g%2===0?s:o,g<2?r:a,n);l=Math.min(m,l),c=Math.min(y,c),d=Math.max(m,d),p=Math.max(y,p)}return new Le(l,c,d-l,p-c)}getRotation(){const{startAngle:e,endAngle:t}=this,i=dM(e,t);return On(e+i/2+Math.PI/2)}updatePath(){const{isBeveled:e}=this;e?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:e,innerRadius:t,outerRadius:i,path:n}=this,s=-e/2,o=e/2,r=-i,a=-t,l=this.getRotation(),c=[[s,a],[s,r],[o,r],[o,a]].map(([d,p])=>uT(d,p,l));n.clear(!0),n.moveTo(c[0].x,c[0].y),n.lineTo(c[1].x,c[1].y),n.lineTo(c[2].x,c[2].y),n.lineTo(c[3].x,c[3].y),n.closePath()}updateBeveledPath(){const{columnWidth:e,path:t,outerRadius:i,innerRadius:n,axisInnerRadius:s,axisOuterRadius:o,isRadiusAxisReversed:r}=this,a=ho(n,s),l=Math.asin(e/2/n),c=this.getRotation(),d=(P,O)=>uT(P,O,c),p=(P,O)=>Math.hypot(P,O),g=(P,O)=>O>P?0:Math.sqrt(P**2-O**2),m=(P,O,G)=>G?P<O:P>O,y=a&&!Number.isNaN(l)&&l<Math.PI/6;let b=-e/2,C=e/2;const w=-i,x=-n*(y?Math.cos(l):1),M=m(o,p(n,e/2),!r);if(M){const P=g(o,n);b=-P,C=P}t.clear(!0);const E=d(b,x);t.moveTo(E.x,E.y);const I=ho(n,i),N=m(o,p(i,e/2),!r);if(I&&y)t.arc(0,0,n,On(-l-Math.PI/2)+c,On(l-Math.PI/2)+c,!1);else if(N){const P=-g(o,e/2),O=g(o,i);if(!M){const G=d(b,P);t.lineTo(G.x,G.y)}if(t.arc(0,0,o,Math.atan2(P,b)+c,Math.atan2(w,-O)+c,!1),!ho(O,0)){const G=d(O,w);t.lineTo(G.x,G.y)}t.arc(0,0,o,Math.atan2(w,O)+c,Math.atan2(P,C)+c,!1)}else{const P=d(b,w),O=d(C,w);t.lineTo(P.x,P.y),t.lineTo(O.x,O.y)}const T=d(C,x);if(t.lineTo(T.x,T.y),y)t.arc(0,0,n,On(l-Math.PI/2)+c,On(-l-Math.PI/2)+c,!0);else{const P=d(b,x);t.lineTo(P.x,P.y)}t.closePath()}};Pr.className="RadialColumnShape";A([Me()],Pr.prototype,"isBeveled",2);A([Me()],Pr.prototype,"columnWidth",2);A([Me()],Pr.prototype,"startAngle",2);A([Me()],Pr.prototype,"endAngle",2);A([Me()],Pr.prototype,"outerRadius",2);A([Me()],Pr.prototype,"innerRadius",2);A([Me()],Pr.prototype,"axisInnerRadius",2);A([Me()],Pr.prototype,"axisOuterRadius",2);A([Me()],Pr.prototype,"isRadiusAxisReversed",2);function lY(e,t,i,n,s){const o=dM(e,t),r=o*(1-n)/2;if(e+=r,t-=r,o<.001)return 2*i*s;if(o>=2*Math.PI){const m=e+o/2;e=m-Math.PI,t=m+Math.PI}const a=i*Math.cos(e),l=i*Math.sin(e),c=i*Math.cos(t),d=i*Math.sin(t),p=Math.floor(Math.hypot(a-c,l-d)),g=2*i*s;return Math.max(1,Math.min(g,p))}var $ge={};il($ge,{ChartTheme:()=>Xr,DEFAULT_ANNOTATION_HANDLE_FILL:()=>Ob,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>_b,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>Vb,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>Dv,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>Av,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>Bb,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>Gb,DEFAULT_CAPTION_ALIGNMENT:()=>vu,DEFAULT_CAPTION_LAYOUT_STYLE:()=>yu,DEFAULT_FIBONACCI_STROKES:()=>Mv,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>An,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>Bi,DEFAULT_GRIDLINE_ENABLED:()=>Vr,DEFAULT_POLAR_SERIES_STROKE:()=>UM,DEFAULT_SEPARATION_LINES_COLOUR:()=>Nb,DEFAULT_SHADOW_COLOUR:()=>Vh,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>$M,DEFAULT_TEXTBOX_COLOR:()=>jb,DEFAULT_TEXTBOX_FILL:()=>zb,DEFAULT_TEXTBOX_STROKE:()=>Hb,DEFAULT_TEXT_ANNOTATION_COLOR:()=>Fb,DEFAULT_TOOLBAR_POSITION:()=>Wb,IS_DARK_THEME:()=>Fg,PALETTE_ALT_DOWN_FILL:()=>LL,PALETTE_ALT_DOWN_STROKE:()=>IL,PALETTE_ALT_NEUTRAL_FILL:()=>PL,PALETTE_ALT_NEUTRAL_STROKE:()=>NL,PALETTE_ALT_UP_FILL:()=>kL,PALETTE_ALT_UP_STROKE:()=>TL,PALETTE_DOWN_FILL:()=>HM,PALETTE_DOWN_STROKE:()=>VM,PALETTE_NEUTRAL_FILL:()=>WM,PALETTE_NEUTRAL_STROKE:()=>jM,PALETTE_UP_FILL:()=>zM,PALETTE_UP_STROKE:()=>_M,getChartTheme:()=>r0,resolveOperation:()=>Kge,themeNames:()=>Yge,themeSymbols:()=>EL,themes:()=>qL});var Yge=Object.keys(qL);function Kge(e){const t=Xr.getDefaultPublicParameters(),i=Xr.getDefaultColors();return new i$({line:{operation:e}},{series:[{type:"line"}]},t,i).resolve().operation}var qge={};il(qge,{Color:()=>si,interpolateColor:()=>qW});var Zge={};il(Zge,{AGGREGATION_INDEX_X_MAX:()=>js,AGGREGATION_INDEX_X_MIN:()=>As,AGGREGATION_INDEX_Y_MAX:()=>Us,AGGREGATION_INDEX_Y_MIN:()=>Ws,AGGREGATION_SPAN:()=>Wr,AbstractBarSeries:()=>P$,AbstractBarSeriesProperties:()=>vP,ActionOnSet:()=>ms,AnchoredPopover:()=>mY,Animation:()=>JW,AnimationManager:()=>iU,Arc:()=>al,Axis:()=>gL,AxisGroupZIndexMap:()=>FU,AxisInterval:()=>Bh,AxisLabel:()=>Ci,AxisTick:()=>Gh,BASE_FONT_SIZE:()=>Fl,BBox:()=>Le,Background:()=>qf,BackgroundModule:()=>n$,BandScale:()=>mc,BarSeries:()=>iC,BarSeriesModule:()=>O$,BaseModuleInstance:()=>rM,BaseProperties:()=>Qe,BaseToolbar:()=>PP,Border:()=>Kh,ButtonWidget:()=>vb,CallbackCache:()=>wW,Caption:()=>Ii,CartesianAxis:()=>Lb,CartesianCrossLine:()=>Os,CartesianSeries:()=>Xu,CartesianSeriesNodeEvent:()=>oP,CartesianSeriesProperties:()=>Mc,CategoryAxis:()=>Wf,CategoryScale:()=>_f,ChangeDetectableProperties:()=>iP,Chart:()=>GM,ChartAxisDirection:()=>mM,ChartOptions:()=>jy,ChartUpdateType:()=>_y,CollapseMode:()=>C$,Color:()=>si,ColorScale:()=>Nf,ConicGradient:()=>dW,ContextMenuBuiltins:()=>nU,ContextMenuRegistry:()=>sU,ContinuousScale:()=>Ut,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>Qf,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>Jf,DEFAULT_POLAR_DIRECTION_KEYS:()=>X$,DEFAULT_POLAR_DIRECTION_NAMES:()=>Q$,DEFAULT_TOOLTIP_CLASS:()=>Yn,DEFAULT_TOOLTIP_DARK_CLASS:()=>b3,DIRECTION_SWAP_AXES:()=>R3,DOMManager:()=>jW,DataChangeDescription:()=>vU,DataController:()=>xU,DataModel:()=>RI,DataModelSeries:()=>sP,DataService:()=>wM,DataSet:()=>Sg,Debug:()=>at,Deprecated:()=>Xge,DeprecatedAndRenamedTo:()=>Qge,DiscreteTimeAxis:()=>a5,DiscreteTimeScale:()=>oa,DragInterpreter:()=>cU,DraggablePopover:()=>yY,DropShadow:()=>rl,ExtendedPath2D:()=>af,FILL_GRADIENT_BLANK_DEFAULTS:()=>fue,FILL_GRADIENT_CONIC_SERIES_DEFAULTS:()=>Cue,FILL_GRADIENT_LINEAR_DEFAULTS:()=>Hu,FILL_GRADIENT_LINEAR_HIERARCHY_DEFAULTS:()=>mue,FILL_GRADIENT_LINEAR_KEYED_DEFAULTS:()=>vue,FILL_GRADIENT_LINEAR_SINGLE_DEFAULTS:()=>yue,FILL_GRADIENT_RADIAL_DEFAULTS:()=>KM,FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS:()=>Ub,FILL_GRADIENT_RADIAL_REVERSED_SERIES_DEFAULTS:()=>E3,FILL_GRADIENT_RADIAL_SERIES_DEFAULTS:()=>bue,FILL_IMAGE_BLANK_DEFAULTS:()=>Due,FILL_IMAGE_DEFAULTS:()=>bc,FILL_PATTERN_BLANK_DEFAULTS:()=>Sue,FILL_PATTERN_DEFAULTS:()=>jo,FILL_PATTERN_HIERARCHY_DEFAULTS:()=>xue,FILL_PATTERN_KEYED_DEFAULTS:()=>Mue,FILL_PATTERN_SINGLE_DEFAULTS:()=>wue,FONT_SIZE:()=>U1,FONT_SIZE_RATIO:()=>zr,FillGradientDefaults:()=>zu,FillImageDefaults:()=>fc,FillPatternDefaults:()=>In,FloatingToolbar:()=>Nfe,FormatManager:()=>hf,Gradient:()=>pM,Group:()=>ut,GroupedCategoryAxis:()=>Hh,HdpiCanvas:()=>tL,HierarchyNode:()=>ffe,HierarchySeries:()=>mfe,HierarchySeriesProperties:()=>Qu,HighlightManager:()=>oU,HighlightProperties:()=>gc,HighlightState:()=>rU,HighlightStyle:()=>wb,Image:()=>im,InteractionManager:()=>tU,InteractionState:()=>eU,InterpolationProperties:()=>em,Invalidating:()=>mb,LABEL_BOXING_DEFAULTS:()=>Za,LARGEST_KEY_INTERVAL:()=>X3,LEGEND_CONTAINER_THEME:()=>k3,Label:()=>Yi,LayoutElement:()=>rL,LayoutManager:()=>mU,LegendMarkerLabel:()=>Lr,Line:()=>_o,LineSeries:()=>sC,LineSeriesModule:()=>H$,LinearGradient:()=>hW,LinearScale:()=>oh,LogScale:()=>zL,LonLatBBox:()=>yfe,MIN_CATEGORY_SPACING:()=>Ey,Marker:()=>Rn,Menu:()=>Tfe,MenuItemRadioWidget:()=>IP,MenuItemWidget:()=>AD,MenuWidget:()=>kP,MercatorScale:()=>vfe,ModuleRegistry:()=>zs,Motion:()=>SI,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>jr,NativeWidget:()=>uf,NewAreaSeriesModule:()=>L$,NewBarSeriesModule:()=>B$,NewBubbleSeriesModule:()=>V$,NewHistogramSeriesModule:()=>z$,NewLineSeriesModule:()=>j$,NewScatterSeriesModule:()=>W$,NiceMode:()=>IU,Node:()=>rc,NumberAxis:()=>Yo,ObserveChanges:()=>Vu,OrdinalTimeScale:()=>Ng,PHASE_METADATA:()=>vv,PHASE_ORDER:()=>cg,PREV_NEXT_KEYS:()=>Gy,Padding:()=>Fh,ParallelStateMachine:()=>Yle,Path:()=>zn,PointerEvents:()=>aW,PolarAxis:()=>wf,PolarSeries:()=>DP,PolarZIndexMap:()=>Z$,Popover:()=>LP,PropertiesArray:()=>Ff,Property:()=>k,ProxyInteractionService:()=>$W,ProxyOnWrite:()=>xre,ProxyProperty:()=>Fs,ProxyPropertyOnWrite:()=>rn,QUICK_TRANSITION:()=>$x,QuadtreeNearest:()=>l$,RENDER_TO_OFFSCREEN_CANVAS_THRESHOLD:()=>l0,RadialColumnShape:()=>Pr,Range:()=>sl,Rect:()=>Tn,RepeatType:()=>QW,Rotatable:()=>Of,RotatableGroup:()=>mre,RotatableText:()=>TW,SAFE_FILLS_OPERATION:()=>pue,SAFE_FILL_OPERATION:()=>hue,SAFE_RANGE2_OPERATION:()=>gue,SAFE_STROKE_FILL_OPERATION:()=>YM,SEGMENTATION_DEFAULTS:()=>qM,SKIP_JS_BUILTINS:()=>B1,SMALLEST_KEY_INTERVAL:()=>Z3,SORT_DOMAIN_GROUPS:()=>Q3,Scalable:()=>gM,ScalableGroup:()=>fre,ScaleAlignment:()=>uW,Scene:()=>CM,SceneArrayChangeDetection:()=>_1,SceneChangeDetection:()=>Me,SceneObjectChangeDetection:()=>Uo,SceneRefChangeDetection:()=>uM,Sector:()=>ys,SectorBox:()=>U$,SegmentOptions:()=>sa,Segmentation:()=>Cb,SegmentedPath:()=>nP,Selection:()=>ks,Series:()=>BM,SeriesContentZIndexMap:()=>p3,SeriesGroupingChangedEvent:()=>Jx,SeriesItemHighlightStyle:()=>pc,SeriesMarker:()=>Xs,SeriesNodeEvent:()=>OM,SeriesNodePickMode:()=>m3,SeriesProperties:()=>Tr,SeriesTooltip:()=>xc,SeriesZIndexMap:()=>h3,Shape:()=>on,SliderWidget:()=>eL,SpanJoin:()=>d$,StateMachine:()=>xb,StateMachineProperty:()=>$le,StopProperties:()=>V1,SvgPath:()=>gY,TIME_AXIS_KEYS:()=>T$,TRIPLE_EQ:()=>sW,Text:()=>Fo,ThemeConstants:()=>IW,ThemeSymbols:()=>EL,TimeAxisParentLevel:()=>$f,TimeScale:()=>yf,Toolbar:()=>Lfe,ToolbarButtonProperties:()=>lC,ToolbarButtonWidget:()=>vY,ToolbarWidget:()=>bM,Tooltip:()=>kr,TooltipManager:()=>Yx,TooltipPosition:()=>_h,Transformable:()=>Hi,TransformableGroup:()=>lg,TransformableText:()=>lf,Translatable:()=>Bf,TranslatableGroup:()=>hs,TranslatableSvgPath:()=>Afe,UnitTimeScale:()=>mu,UpdateService:()=>yU,Vec2:()=>yg,Vec4:()=>Cv,WIDGET_HTML_EVENTS:()=>W1,Widget:()=>nl,WidgetEventUtil:()=>ql,ZIndexMap:()=>YW,ZoomManager:()=>fU,accumulateGroup:()=>J3,accumulatedValue:()=>H3,accumulativeValueProperty:()=>$I,addEscapeEventListener:()=>Y1,addHitTestersToQuadtree:()=>yD,addMouseCloseListener:()=>OW,addOverrideFocusVisibleEventListener:()=>_W,addTouchCloseListener:()=>BW,adjustLabelPlacement:()=>o$,aggregationDomain:()=>bf,aggregationIndexForXRatio:()=>tP,aggregationRangeFittingPoints:()=>dD,aggregationXRatioForDatumIndex:()=>Tv,aggregationXRatioForXValue:()=>Jr,angleBetween:()=>dM,angleCategoryAxisOptionsDefs:()=>jL,angleNumberAxisOptionsDefs:()=>l5,angularPadding:()=>vI,animationValidation:()=>Qb,annotationCalloutStylesDefs:()=>D5,annotationChannelStyleDefs:()=>YL,annotationChannelTextDefs:()=>w5,annotationCommentStylesDefs:()=>A5,annotationCrossLineStyleDefs:()=>KI,annotationDisjointChannelStyleDefs:()=>x5,annotationFibonacciStylesDefs:()=>qI,annotationLineStyleDefs:()=>o0,annotationLineTextDefs:()=>cD,annotationMeasurerStylesDefs:()=>KS,annotationNoteStylesDefs:()=>R5,annotationOptionsDef:()=>Kf,annotationParallelChannelStyleDefs:()=>M5,annotationQuickMeasurerStylesDefs:()=>E5,annotationShapeStylesDefs:()=>ZI,annotationTextStylesDef:()=>Jb,applyShapeFillBBox:()=>f3,applyShapeStyle:()=>Zl,areScalingEqual:()=>rh,area:()=>UI,autoSizedLabelOptionsDefs:()=>Iu,axisLabelsOverlap:()=>BI,bezier2DDistance:()=>yW,bezier2DExtrema:()=>mW,boxPlotHighlightStyleOptionsDef:()=>XI,boxPlotSeriesThemeableOptionsDef:()=>T5,boxPlotStyleOptionsDef:()=>KL,buildResetPathFn:()=>gP,calculateDataDiff:()=>F$,calculateLabelRotation:()=>s3,calculateLabelTranslation:()=>wfe,calculatePlacement:()=>y3,calculateSegments:()=>fD,callWithContext:()=>Zr,candlestickSeriesThemeableOptionsDef:()=>I5,cartesianAxisBandHighlightOptions:()=>Xb,cartesianAxisCrosshairOptions:()=>Uu,cartesianAxisLabelOptionsDefs:()=>qb,cartesianAxisOptionsDefs:()=>wc,cartesianChartOptionsDefs:()=>oY,cartesianCrossLineOptionsDefs:()=>Nl,cartesianNumericAxisLabel:()=>OL,cartesianTimeAxisLabel:()=>Zb,cartesianTimeAxisParentLevel:()=>iD,checkCrisp:()=>N$,chordSeriesThemeableOptionsDef:()=>k5,clampArray:()=>pf,clipSpanX:()=>rP,clippedRoundRect:()=>HS,collapseSpanToPoint:()=>u$,collapsedStartingBarPosition:()=>Ov,commonAxisIntervalOptionsDefs:()=>BL,commonAxisLabelOptionsDefs:()=>Cc,commonAxisOptionsDefs:()=>zh,commonChartOptionsDefs:()=>tt,commonCrossLineLabelOptionsDefs:()=>xh,commonCrossLineOptionsDefs:()=>Fa,commonSeriesOptionsDefs:()=>la,commonSeriesThemeableOptionsDefs:()=>Mt,compactAggregationIndices:()=>kv,compareDates:()=>xL,computeBarFocusBounds:()=>CP,computeMarkerFocusBounds:()=>pD,coneFunnelSeriesThemeableOptionsDef:()=>L5,continuousAxisOptions:()=>Hf,countExpandingSearch:()=>lU,createAggregationIndices:()=>Iv,createButton:()=>Sfe,createCheckbox:()=>xfe,createDatumId:()=>Ls,createDeprecationWarning:()=>EP,createIcon:()=>pY,createIdsGenerator:()=>AL,createSelect:()=>Mfe,createTextArea:()=>Dfe,dateToNumber:()=>us,dateTruncationForDomain:()=>SL,datesSortOrder:()=>ML,datumKeys:()=>Kx,datumStylerProperties:()=>AM,deconstructSelectionsOrNodes:()=>xM,deepClone:()=>zi,deepFreeze:()=>Vl,diff:()=>oD,discreteTimeAxisIntervalOptionsDefs:()=>GL,drawCorner:()=>My,drawMarkerUnitPolygon:()=>Ay,durationDay:()=>Sh,durationHour:()=>sh,durationMinute:()=>fu,durationMonth:()=>mL,durationSecond:()=>Pg,durationWeek:()=>BU,durationYear:()=>wv,easing:()=>SI,enterpriseModule:()=>Du,errorBarOptionsDefs:()=>XM,errorBarThemeableOptionsDefs:()=>$b,estimateTickCount:()=>YU,evaluateBezier:()=>rf,expandLegendPosition:()=>qS,extent:()=>$u,extractDecoratedProperties:()=>eW,fillsOptionsDef:()=>Rv,findMinMax:()=>Gn,findQuadtreeMatch:()=>vD,findRangeExtent:()=>wh,fixNumericExtent:()=>vo,focusCursorAtEnd:()=>vre,formatNumber:()=>UW,formatObjectValidator:()=>F3,formatPercent:()=>WW,formatTicks:()=>JU,formatValue:()=>df,fromToMotion:()=>hn,funnelSeriesThemeableOptionsDef:()=>P5,generateTicks:()=>o3,getAngleRatioRadians:()=>lW,getColorStops:()=>fW,getCrossLineValue:()=>EU,getDateTicksForInterval:()=>DL,getDatumRefPoint:()=>iL,getElementBBox:()=>SW,getIconClassNames:()=>fM,getItemStyles:()=>nL,getItemStylesPerItemId:()=>jae,getLabelStyles:()=>Zh,getLastFocus:()=>q1,getMarkerStyles:()=>gD,getMissCount:()=>wU,getPath:()=>O1,getPathComponents:()=>SU,getRadialColumnWidth:()=>lY,getSequentialColors:()=>$o,getShapeFill:()=>g3,getShapeStyle:()=>VI,getTextAlign:()=>n3,getTextBaseline:()=>i3,getTimeIntervalTicks:()=>e3,groupAccumulativeValueProperty:()=>Ev,groupAverage:()=>z3,groupCount:()=>WI,groupSum:()=>V3,hasNoModifiers:()=>yb,heatmapSeriesThemeableOptionsDef:()=>N5,highlightStates:()=>MM,initRovingTabIndex:()=>tae,interpolatePoints:()=>$y,interpolationOptionsDefs:()=>QM,intervalCeil:()=>GU,intervalEpoch:()=>Sv,intervalExtent:()=>vL,intervalFloor:()=>vr,intervalHierarchy:()=>Eb,intervalMilliseconds:()=>po,intervalNext:()=>yL,intervalPrevious:()=>_U,intervalRange:()=>Rr,intervalRangeCount:()=>bL,intervalRangeStartIndex:()=>CL,intervalStep:()=>Tu,intervalUnit:()=>cc,isAgStandaloneChartOptions:()=>d3,isAgTopologyChartOptions:()=>u3,isBetweenAngles:()=>Wd,isButtonClickEvent:()=>K1,isChartAxisDirection:()=>Kre,isContinuous:()=>EM,isDecoratedObject:()=>cM,isDenseInterval:()=>mf,isGradientFill:()=>Ar,isGradientOrPatternFill:()=>dre,isImageFill:()=>bh,isInputPending:()=>xW,isObjectWithProperty:()=>nW,isObjectWithStringProperty:()=>Voe,isPatternFill:()=>lc,isProperties:()=>ih,isScaleValid:()=>Lv,jsonApply:()=>By,jsonDiff:()=>qa,jsonPropertyCompare:()=>MW,jsonWalk:()=>xu,keyProperty:()=>Mu,legendSymbolSvg:()=>v3,lineDistanceSquared:()=>jx,linearGaugeSeriesOptionsDef:()=>ku,linearGaugeSeriesThemeableOptionsDef:()=>i0,linearGaugeTargetOptionsDef:()=>JM,linearPoints:()=>h$,listDecoratedProperties:()=>Su,lowestGranularityForInterval:()=>Tb,lowestGranularityUnitForTicks:()=>wL,lowestGranularityUnitForValue:()=>kM,makeAccessibleClickListener:()=>iae,makeSeriesTooltip:()=>Qh,mapLineBackgroundSeriesThemeableOptionsDef:()=>B5,mapLineSeriesThemeableOptionsDef:()=>O5,mapMarkerSeriesThemeableOptionsDef:()=>G5,mapShapeBackgroundSeriesThemeableOptionsDef:()=>V5,mapShapeSeriesThemeableOptionsDef:()=>_5,mapValues:()=>iW,markerEnabled:()=>hP,markerFadeInAnimation:()=>Nv,markerOptionsDefs:()=>Qr,markerScaleInAnimation:()=>E$,markerStyleOptionsDefs:()=>Wu,markerSwipeScaleInAnimation:()=>dP,memo:()=>SM,merge:()=>gv,mergeArrayDefaults:()=>tW,mergeDefaults:()=>_t,midpointStartingBarPosition:()=>Dpe,minimumTimeAxisDatumGranularity:()=>o5,moduleRegistry:()=>za,motion:()=>Ofe,multiSeriesHighlightStyle:()=>ju,nearestSquared:()=>lM,nearestSquaredInContainer:()=>Boe,nextPowerOf2:()=>uU,nightingaleSeriesThemeableOptionsDef:()=>z5,normaliseGroupTo:()=>sD,normalisePropertyTo:()=>YS,normalisedExtentWithMetadata:()=>_L,normalizeAngle180:()=>Hx,normalizeAngle360:()=>On,normalizeAngle360FromDegrees:()=>ac,normalizeAngle360Inclusive:()=>Yoe,normalizeContinuousDomains:()=>sL,numberFormatValidator:()=>aa,objectsEqual:()=>qs,objectsEqualWith:()=>F1,ohlcSeriesThemeableOptionsDef:()=>F5,ordinalTimeAxisOptionsDefs:()=>mg,pairUpSpans:()=>Uy,partialAssign:()=>mI,pathFadeInAnimation:()=>c0,pathMotion:()=>a0,pathSwipeInAnimation:()=>pP,pick:()=>_S,pickByMatchingAngle:()=>q$,plotAreaPathFill:()=>D$,plotInterpolatedAreaSeriesFillSpans:()=>QS,plotInterpolatedLinePathStroke:()=>XS,plotLinePathStroke:()=>lP,pointsEq:()=>Pv,polarChartOptionsDefs:()=>rY,predictCartesianAxis:()=>fP,predictCartesianTimeAxis:()=>tC,predictTimeAxisType:()=>mP,prepareAreaFillAnimationFns:()=>A$,prepareAreaPathAnimation:()=>R$,prepareAxisAnimationContext:()=>kU,prepareAxisAnimationFunctions:()=>LU,prepareBarAnimationFunctions:()=>Bv,prepareLinePathAnimation:()=>M$,prepareLinePathPropertyAnimation:()=>uP,prepareLinePathStrokeAnimationFns:()=>cP,preparePieSeriesAnimationFunctions:()=>ex,previousPowerOf2:()=>MI,processedDataIsAnimatable:()=>Uf,pyramidSeriesThemeableOptionsDef:()=>H5,radarAreaSeriesThemeableOptionsDef:()=>j5,radarLineSeriesThemeableOptionsDef:()=>W5,radialBarSeriesThemeableOptionsDef:()=>U5,radialColumnSeriesThemeableOptionsDef:()=>$5,radialGaugeSeriesOptionsDef:()=>Yb,radialGaugeSeriesThemeableOptionsDef:()=>n0,radialGaugeTargetOptionsDef:()=>eD,radialSeriesStylerDef:()=>Mh,radiusCategoryAxisOptionsDefs:()=>u5,radiusNumberAxisOptionsDefs:()=>c5,range:()=>PM,rangeAreaSeriesThemeableOptionsDef:()=>Y5,rangeBarSeriesThemeableOptionsDef:()=>K5,rangeValidator:()=>ZM,rangedValueProperty:()=>q3,rescaleSpan:()=>Cf,resetAxisFillSelectionFn:()=>NU,resetAxisGroupFn:()=>PU,resetAxisLabelSelectionFn:()=>qx,resetAxisLineSelectionFn:()=>PI,resetBarSelectionsFn:()=>Gv,resetLabelFn:()=>Xh,resetMarkerFn:()=>hD,resetMarkerPositionFn:()=>Fv,resetMotion:()=>cs,resetPieSelectionsFn:()=>K$,rowCountProperty:()=>Y3,sankeySeriesThemeableOptionsDef:()=>q5,scale:()=>$n,sectorBox:()=>$$,seriesLabelFadeInAnimation:()=>Gi,seriesLabelFadeOutAnimation:()=>ZS,seriesLabelOptionsDefs:()=>Jt,setElementBBox:()=>Ux,setPath:()=>G1,shadowOptionsDefs:()=>ol,shallowClone:()=>j1,simpleMemorize:()=>ls,simpleMemorize2:()=>bb,singleSeriesHighlightStyle:()=>I3,smoothPoints:()=>g$,solveBezier:()=>Wx,sortAndUniqueDates:()=>NI,spanRange:()=>Wo,splitBezier2D:()=>fv,stackCartesianSeries:()=>nY,standaloneChartOptionsDefs:()=>kge,staticFromToMotion:()=>yc,stepPoints:()=>p$,stopPageScrolling:()=>VW,sum:()=>Vue,sumValues:()=>nD,sunburstSeriesThemeableOptionsDef:()=>Z5,textOrSegments:()=>Ns,tickFormat:()=>ace,ticksEqual:()=>GI,ticksSpacing:()=>QU,timeInterval:()=>tD,timeIntervalMaxLabelSize:()=>t3,timeIntervalUnit:()=>Kb,toDegrees:()=>Koe,toHighlightString:()=>Gf,toRadians:()=>ds,toolbarButtonOptionsDefs:()=>Yd,tooltipContentAriaLabel:()=>w3,tooltipHtml:()=>x3,tooltipOptionsDefs:()=>Ft,topologyChartOptionsDefs:()=>Ige,trailingAccumulatedValue:()=>j3,trailingAccumulatedValueProperty:()=>Uue,treemapSeriesThemeableOptionsDef:()=>X5,updateClipPath:()=>u0,updateLabelNode:()=>s$,validateCrossLineValue:()=>TU,valueProperty:()=>vi,visibleRangeIndices:()=>bv,waterfallSeriesThemeableOptionsDef:()=>Q5,withTemporaryDomain:()=>RL,without:()=>Ae});function EP(){return(e,t)=>{const i=[`Property [${e}] is deprecated.`,t].filter(Boolean).join(" ");fe.warnOnce(i)}}function Xge(e,t){const i=EP(),n=t?.default;return vh((s,o,r)=>(r!==n&&i(o.toString(),e),r))}function Qge(e,t){const i=EP();return vh((n,s,o)=>(o!==n[e]&&(i(s.toString(),`Use [${e}] instead.`),G1(n,e,t?t(o):o)),fI),(n,s)=>(i(s.toString(),`Use [${e}] instead.`),O1(n,e)))}var yg={add:Jge,angle:sfe,apply:pfe,equal:dfe,distance:tfe,distanceSquared:ife,from:hfe,gradient:rfe,intercept:afe,intersectAtX:cfe,intersectAtY:lfe,length:xD,lengthSquared:cY,multiply:efe,normalized:nfe,origin:uY,required:gfe,rotate:ofe,round:ufe,sub:TP};function Jge(e,t){return typeof t=="number"?{x:e.x+t,y:e.y+t}:{x:e.x+t.x,y:e.y+t.y}}function TP(e,t){return typeof t=="number"?{x:e.x-t,y:e.y-t}:{x:e.x-t.x,y:e.y-t.y}}function efe(e,t){return typeof t=="number"?{x:e.x*t,y:e.y*t}:{x:e.x*t.x,y:e.y*t.y}}function xD(e){return Math.hypot(e.x,e.y)}function cY(e){return e.x*e.x+e.y*e.y}function tfe(e,t){return xD(TP(e,t))}function ife(e,t){return cY(TP(e,t))}function nfe(e){const t=xD(e);return{x:e.x/t,y:e.y/t}}function sfe(e,t){return t==null?Math.atan2(e.y,e.x):Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)}function ofe(e,t,i=uY()){const n=xD(e);return{x:i.x+n*Math.cos(t),y:i.y+n*Math.sin(t)}}function rfe(e,t,i){const n=t.x-e.x;return(i==null?t.y-e.y:i-t.y-(i-e.y))/n}function afe(e,t,i){return(i==null?e.y:i-e.y)-t*e.x}function lfe(e,t,i=0,n){return{x:e===1/0?1/0:(i-t)/e,y:n==null?i:n-i}}function cfe(e,t,i=0,n){const s=e===1/0?1/0:e*i+t;return{x:i,y:n==null?s:n-s}}function ufe(e,t=2){return{x:WG(e.x,t),y:WG(e.y,t)}}function dfe(e,t){return e.x===t.x&&e.y===t.y}function hfe(e,t){if(typeof e=="number")return{x:e,y:t};if("currentX"in e)return{x:e.currentX,y:e.currentY};if("offsetWidth"in e)return{x:e.offsetWidth,y:e.offsetHeight};if("width"in e)return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y+e.height}];if("x1"in e)return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}];throw new Error(`Values can not be converted into a vector: [${JSON.stringify(e)}] [${t}]`)}function pfe(e,t){return e.x=t.x,e.y=t.y,e}function gfe(e){return{x:e?.x??0,y:e?.y??0}}function uY(){return{x:0,y:0}}var dY=class ix{constructor(t,i,n,s,o,r,a,l,c,d){this.series=t,this.datumIndex=i,this.datum=n,this.sizeValue=s,this.colorValue=o,this.sumSize=r,this.depth=a,this.parent=l,this.children=c,this.style=d,this.midPoint={x:0,y:0}}get hasChildren(){return this.children.length>0}walk(t,i=ix.Walk.PreOrder){i===ix.Walk.PreOrder&&t(this);for(const n of this.children)n.walk(t,i);i===ix.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*t}};dY.Walk={PreOrder:0,PostOrder:1};var ffe=dY,mfe=class extends BM{constructor(e){super({moduleCtx:e,pickModes:[1,0]}),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new Nf,this.animationState=new xb("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}processData(){const{NodeClass:e}=this,{childrenKey:t,sizeKey:i,colorKey:n,colorRange:s}=this.properties;let o=0,r=1/0,a=-1/0;const l=(g,m,y)=>{const b=y.depth==null?0:y.depth+1,C=t==null?void 0:g[t],w=C==null||C.length===0;let x=i==null?void 0:g[i];Number.isFinite(x)?x=Math.max(x,0):x=w?1:0;const M=x;o=Math.max(o,b);const E=n==null?void 0:g[n];typeof E=="number"&&(r=Math.min(r,E),a=Math.max(a,E));const I=this.getItemStyle({datumIndex:m,datum:g,depth:b,colorValue:E},w,!1);return c(new e(this,m,g,x,E,M,b,y,[],I),C)},c=(g,m)=>{const{datumIndex:y}=g;if(m)for(const[b,C]of m.entries()){const w=l(C,y.concat(b),g);g.children.push(w),g.sumSize+=w.sumSize}return g},d=c(new e(this,[],void 0,0,void 0,0,void 0,void 0,[],{}),this.data?.data),p=[r,a];this.colorScale.domain=r<a?[r,a]:[0,1],this.colorScale.range=s??["black"],this.colorScale.update(),this.rootNode=d,this.maxDepth=o,this.colorDomain=p}update({seriesRect:e}){this.updateSelections(),this.updateNodes();const t=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",t),this.animationState.transition("update",t)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(){return{}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}dataCount(){return Number.NaN}getSeriesDomain(){return[Number.NaN,Number.NaN]}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}getLegendData(e){const{colorKey:t,colorRange:i}=this.properties,{id:n,ctx:{legendManager:s},visible:o}=this;return e==="gradient"&&t!=null&&i!=null?[{legendType:"gradient",enabled:o&&s.getItemEnabled({seriesId:n}),seriesId:n,series:this.getFormatterContext("color"),colorRange:i,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(e){return e.datumIndex.join(":")}getDatumId(e){return this.getDatumIdFromData(e)}removeMeIndexPathForIndex(e){return this.datumSelection.at(e+1)?.datum.datumIndex??[]}removeMeIndexForIndexPath(e){for(const{index:t,datum:i}of this.datumSelection)if(Kl(i.datumIndex,e))return t-1;return 0}pickFocus(e){if(!this.rootNode?.children.length)return;const t=st(0,e.datumIndex-e.datumIndexDelta,this.datumSelection.length-1),{datumIndexDelta:i,otherIndexDelta:n}=e;let s=this.removeMeIndexPathForIndex(t);const o=s.reduce((l,c)=>l.children[c],this.rootNode);if(n>0&&o.hasChildren)s=[...s,0];else if(n<0&&s.length>1)s=s.slice(0,-1);else if(n===0&&i!==0){const l=o.parent.children.length-1;s=s.slice(),s[s.length-1]=st(0,s.at(-1)+i,l)}const r=s.reduce((l,c)=>l.children[c],this.rootNode),a=this.computeFocusBounds(this.datumSelection.at(t+1));if(a!=null)return{datum:r,datumIndex:this.removeMeIndexForIndexPath(s),otherIndex:r.depth,bounds:a,clipFocusBox:!0}}getDatumAriaText(e,t){if(!(e instanceof this.NodeClass)){fe.error(`datum is not HierarchyNode: ${JSON.stringify(e)}`);return}return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(e.depth??-1)+1,count:e.children.length,description:t})}getCategoryValue(e){}datumIndexForCategoryValue(e){}},Qu=class extends Tr{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(cn),this.strokes=Object.values(Pl)}};A([k],Qu.prototype,"childrenKey",2);A([k],Qu.prototype,"sizeKey",2);A([k],Qu.prototype,"colorKey",2);A([k],Qu.prototype,"colorName",2);A([k],Qu.prototype,"fills",2);A([k],Qu.prototype,"strokes",2);A([k],Qu.prototype,"colorRange",2);var yfe=class hY{constructor(t,i,n,s){this.lon0=t,this.lat0=i,this.lon1=n,this.lat1=s}extend(t,i,n,s){return this.lon0=Math.min(this.lon0,t),this.lat0=Math.min(this.lat0,i),this.lon1=Math.max(this.lon1,n),this.lat1=Math.max(this.lat1,s),this}merge(t){return this.extend(t.lon0,t.lat0,t.lon1,t.lat1)}static extend(t,i,n,s,o){return t?t.extend(i,n,s,o):new hY(i,n,s,o)}},MD=Math.PI/180,dT=e=>e*MD,hT=e=>-Math.log(Math.tan(Math.PI*.25+e*MD*.5)),pT=e=>e/MD,gT=e=>(Math.atan(Math.exp(-e))-Math.PI*.25)/(MD*.5),vfe=class lk extends hM{constructor(t,i){super(),this.domain=t,this.range=i,this.type="mercator",this.defaultTickCount=0,this.bounds=lk.bounds(t)}static bounds(t){const[[i,n],[s,o]]=t,r=dT(i),a=hT(n),l=dT(s),c=hT(o);return new Le(Math.min(r,l),Math.min(a,c),Math.abs(l-r),Math.abs(c-a))}static fixedScale(){return new lk([[pT(0),gT(0)],[pT(1),gT(1)]],[[0,0],[1,1]])}toDomain(){}normalizeDomains(...t){let i=-1/0,n=1/0,s=-1/0,o=1/0;for(const r of t)for(const[a,l]of r)i=Math.min(a,i),n=Math.max(a,n),s=Math.min(l,s),o=Math.max(l,o);return{domain:[[i,s],[n,o]],animatable:!0}}convert([t,i]){const[[n,s],[o,r]]=this.range,a=(o-n)/this.bounds.width,l=(r-s)/this.bounds.height;return[(dT(t)-this.bounds.x)*a+n,(hT(i)-this.bounds.y)*l+s]}invert([t,i]){const[[n,s],[o,r]]=this.range,a=(o-n)/this.bounds.width,l=(r-s)/this.bounds.height;return[pT((t-n)/a+this.bounds.x),gT((i-s)/l+this.bounds.y)]}},bfe={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},Cfe={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}};function wfe({yDirection:e,padding:t=0,position:i="top",bbox:n}){const s=e?bfe:Cfe,{xTranslationDirection:o,yTranslationDirection:r}=s[i],a=o*(t+n.width/2),l=r*(t+n.height/2);return{xTranslation:a,yTranslation:l}}function Sfe(e,t){const i=ft("button",DD("ag-charts-input ag-charts-button",t));return e.label===void 0?(i.append(pY(e.icon)),i.ariaLabel=e.altText):i.append(e.label),i.addEventListener("click",e.onPress),sf(i,t),i}function xfe(e,t){const i=ft("input",DD("ag-charts-input ag-charts-checkbox",t));return i.type="checkbox",i.checked=e.checked,i.addEventListener("change",n=>e.onChange(i.checked,n)),i.addEventListener("keydown",n=>{K1(n)&&(n.preventDefault(),i.click())}),sf(i,t),i}function Mfe(e,t){const i=ft("select",DD("ag-charts-input ag-charts-select",t));return i.append(...e.options.map(n=>{const s=ft("option");return s.value=n.value,s.textContent=n.label,s})),Tt(i,"data-preventdefault",!1),i.value=e.value,i.addEventListener("change",n=>e.onChange(i.value,n)),sf(i,t),i}function Dfe(e,t){const i=ft("textarea",DD("ag-charts-input ag-charts-textarea",t));return i.value=e.value,i.addEventListener("input",n=>e.onChange(i.value,n)),sf(i,t),Tt(i,"data-preventdefault",!1),i}function pY(e){const t=ft("span",`ag-charts-icon ag-charts-icon-${e}`);return Tt(t,"aria-hidden",!0),t}function DD(e,t){return t==null?e:`${e} ${t.class}`}var gY=class extends zn{constructor(e=""){super(),this._d="",this.d=e}get d(){return this._d}set d(e){e!==this._d&&(this._d=e,this.path.clear(),this.path.appendSvg(e),this.checkPathDirty())}},Afe=class extends Bf(gY){isPointInPath(e,t){return super.isPointInPath(e-this.translationX,t-this.translationY)}},im=class extends rc{constructor(e){super(),this.sourceImage=e,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}render(e){const{ctx:t}=e,i=this.sourceImage;i&&(t.globalAlpha=this.opacity,t.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height)),super.render(e)}};A([Me()],im.prototype,"x",2);A([Me()],im.prototype,"y",2);A([Me()],im.prototype,"width",2);A([Me()],im.prototype,"height",2);A([Me()],im.prototype,"opacity",2);var Rfe={};il(Rfe,{ButtonWidget:()=>vb,MenuItemRadioWidget:()=>IP,MenuItemWidget:()=>AD,MenuWidget:()=>kP,NativeWidget:()=>uf,SliderWidget:()=>eL,ToolbarWidget:()=>bM,WIDGET_HTML_EVENTS:()=>W1,Widget:()=>nl,WidgetEventUtil:()=>ql});var AD=class extends X1{constructor(){super(ft("div"),"menuitem")}},IP=class extends X1{constructor(){super(ft("div"),"menuitemradio")}setChecked(e){Tt(this.elem,"aria-checked",e)}},Efe=["Escape","ArrowLeft"],kP=class fY extends Q1{constructor(t="vertical"){super(t,"menu"),this.handleMouseEnter=(i,n)=>{n.hasPopup()||this.expandSubMenu(i,void 0)},this.handleMouseMove=(i,n)=>{n.focus({preventScroll:!0})}}destructor(){this.collapse({mode:"2"})}addSeparator(){const t=$a().createElement("div");return Tt(t,"role","separator"),this.elem.appendChild(t),t}onChildAdded(t){super.onChildAdded(t),t.addListener("mouseenter",this.handleMouseEnter),t.addListener("mousemove",this.handleMouseMove)}onChildRemoved(t){super.onChildRemoved(t),t.removeListener("mouseenter",this.handleMouseEnter),t.removeListener("mousemove",this.handleMouseMove)}addSubMenu(){const t=new AD,i=new fY(this.orientation);i.id=_x();const n=()=>{this.collapseExpandedSubMenu(i),t.expandControlled()},s=o=>{yb(o.sourceEvent)&&o.sourceEvent.code==="ArrowRight"&&(this.collapseExpandedSubMenu(i),t.expandControlled())};return t.setControlled(i),t.setAriaHasPopup("menu"),t.addListener("click",n),t.addListener("mouseenter",n),t.addListener("keydown",s),this.addChild(t),{subMenuButton:t,subMenu:i}}expandSubMenu(t,i){const{expansionScope:n}=this;n&&(this.collapseExpandedSubMenu(i),i?.expand(t))}collapseExpandedSubMenu(t){const{expansionScope:i}=this;i&&(i.expandedSubMenu?.collapse({mode:"4"}),i.expandedSubMenu=t)}expand(t){if(this.expansionScope!=null)return;this.expansionScope={lastFocus:q1(t.sourceEvent),expandedSubMenu:void 0,abort:()=>this.collapse({mode:"1"}),close:()=>this.collapse({mode:"0"}),removers:new Ui};const i=this.expansionScope,n=this.children.map(s=>s.getElement());Tt(i.lastFocus,"aria-expanded",!0),i.removers.register(OW(this.elem,i.abort),BW(this.elem,i.abort),...this.children.map(s=>Y1(s.getElement(),i.close,Efe)),t?.overrideFocusVisible&&_W(this.elem,n,t.overrideFocusVisible)),this.internalListener?.dispatch("expand-widget",this,{type:"expand-widget"}),this.children[0]?.focus({preventScroll:!0})}collapse(t){const{mode:i="0"}=t??{};if(this.expansionScope===void 0)return;const{lastFocus:n,removers:s,expandedSubMenu:o}=this.expansionScope;this.expansionScope=void 0,o?.collapse({mode:"3"}),Tt(n,"aria-expanded",!1),i==="0"&&n?.focus({preventScroll:!0}),s.flush(),this.internalListener?.dispatch("collapse-widget",this,{type:"collapse-widget",mode:i})}},ez="canvas-overlay",LP=class extends rM{constructor(e,t,i){super(),this.ctx=e,this.hideFns=[],this.setOwnedWidget=(()=>{let n;return s=>{n?.destroy(),n=s}})(),this.moduleId=`popover-${t}`,i?.detached?this.element=ft("div"):this.element=e.domManager.addChild(ez,this.moduleId),this.element.setAttribute("role","presentation"),this.hideFns.push(()=>this.setOwnedWidget(void 0)),this.cleanup.register(()=>e.domManager.removeChild(ez,this.moduleId))}attachTo(e){this.element.parentElement||e.element.append(this.element)}hide(e){const{lastFocus:t=this.lastFocus}=e??{};if(this.element.children.length!==0){for(const i of this.hideFns)i();t?.focus(),this.lastFocus=void 0}}removeChildren(){this.element.replaceChildren()}initPopoverElement(e,t){if(!this.element.parentElement)throw new Error("Can not show popover that has not been attached to a parent.");return e??(e=ft("div","ag-charts-popover")),e.classList.toggle("ag-charts-popover",!0),t.ariaLabel!=null&&e.setAttribute("aria-label",t.ariaLabel),t.class!=null&&e.classList.add(t.class),this.element.replaceChildren(e),e}showWidget(e,t,i){this.setOwnedWidget(t),this.initPopoverElement(t.getElement(),i),t.addListener("collapse-widget",()=>{e.setControlled(void 0),this.setOwnedWidget(void 0)}),e.setControlled(t),e.expandControlled()}showWithChildren(e,t){const i=this.initPopoverElement(void 0,t);if(i.replaceChildren(...e),this.hideFns.push(()=>this.removeChildren()),t.onHide&&this.hideFns.push(t.onHide),t.initialFocus&&t.sourceEvent){const n=q1(t.sourceEvent);n!==void 0&&(this.lastFocus=n,this.initialFocus=t.initialFocus)}return i}getPopoverElement(){return this.element.firstElementChild}updatePosition(e){const t=this.getPopoverElement();t&&(t.style.setProperty("right","unset"),t.style.setProperty("bottom","unset"),e.x!=null&&t.style.setProperty("left",`${Math.floor(e.x)}px`),e.y!=null&&t.style.setProperty("top",`${Math.floor(e.y)}px`),this.initialFocus?.focus(),this.initialFocus=void 0)}},mY=class extends LP{setAnchor(e,t){this.anchor=e,this.fallbackAnchor=t,this.updatePosition(e),this.repositionWithinBounds()}updateAnchor(e){const t=e.anchor??this.anchor,i=e.fallbackAnchor??this.fallbackAnchor;t&&this.setAnchor(t,i)}showWidget(e,t,i){super.showWidget(e,t,i),this.updateAnchor(i)}showWithChildren(e,t){const i=super.showWithChildren(e,t);return this.updateAnchor(t),$t().requestAnimationFrame(()=>{this.repositionWithinBounds()}),i}repositionWithinBounds(){const{anchor:e,ctx:t,fallbackAnchor:i}=this,n=this.getPopoverElement();if(!e||!n)return;const s=t.domManager.getBoundingClientRect(),{offsetWidth:o,offsetHeight:r}=n;let a=st(0,e.x,s.width-o),l=st(0,e.y,s.height-r);a!==e.x&&i?.x!=null&&(a=st(0,i.x-o,s.width-o)),l!==e.y&&i?.y!=null&&(l=st(0,i.y-r,s.height-r)),this.updatePosition({x:a,y:l})}},Tfe=class extends mY{show(e,t){const i=new kP("vertical");for(const n of t.items)i.addChild(this.createRow(t,n,i));i.addClass("ag-charts-menu"),this.showWidget(e,i,t)}allocRow(e,t){if(e.menuItemRole==null||e.menuItemRole==="menuitem")return new AD;{e.menuItemRole;const i=new IP;return i.setChecked(e.value===t.value),i}}createRow(e,t,i){const n=t.value===e.value,s=this.allocRow(e,t);if(s.addClass("ag-charts-menu__row"),s.toggleClass("ag-charts-menu__row--active",n),typeof t.value=="string"&&(s.getElement().dataset.popoverId=t.value),t.icon!=null){const r=ft("span",`ag-charts-menu__icon ${fM(t.icon)}`);s.getElement().appendChild(r)}const o=t.strokeWidth!=null;if(o&&(s.toggleClass("ag-charts-menu__row--stroke-width-visible",o),s.setCSSVariable("--strokeWidth",o?`${t.strokeWidth}px`:null)),t.label!=null){const r=ft("span","ag-charts-menu__label");r.textContent=this.ctx.localeManager.t(t.label),s.getElement().appendChild(r)}return"altText"in t&&s.setAriaLabel(this.ctx.localeManager.t(t.altText)),s.addListener("click",({sourceEvent:r})=>{e.onPress?.(t),r.preventDefault(),r.stopPropagation(),i.collapse()}),s}},yY=class extends LP{constructor(){super(...arguments),this.dragged=!1}setDragHandle(e){e.addListener("drag-start",t=>{e.addClass(this.dragHandleDraggingClass),this.onDragStart(t)}),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",()=>{e.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)})}onDragStart(e){const t=this.getPopoverElement();t&&(e.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:yg.from(e.clientX,e.clientY),position:yg.from(Number(t.style.getPropertyValue("left").replace("px","")),Number(t.style.getPropertyValue("top").replace("px","")))})}onDragMove(e){const{dragStartState:t}=this,i=this.getPopoverElement();if(!t||!i)return;const n=yg.sub(yg.from(e.clientX,e.clientY),t.client),s=yg.add(t.position,n),o=this.ctx.domManager.getBoundingClientRect(),r={};s.x>=0&&s.x+i.offsetWidth<=o.width&&(r.x=s.x),s.y>=0&&s.y+i.offsetHeight<=o.height&&(r.y=s.y),this.updatePosition(r)}onDragEnd(){this.dragStartState=void 0}},lC=class extends Qe{};A([k],lC.prototype,"icon",2);A([k],lC.prototype,"label",2);A([k],lC.prototype,"ariaLabel",2);A([k],lC.prototype,"tooltip",2);var Ife={"disjoint-channel":"false","fibonacci-menu":"menu","fibonacci-retracement":"false","fibonacci-retracement-trend-based":"false","fill-color":"dialog","horizontal-line":"false","line-color":"dialog","line-menu":"menu","line-stroke-width":"menu","line-style-type":"menu","measurer-menu":"menu","pan-end":"false","pan-left":"false","pan-right":"false","pan-start":"false","parallel-channel":"false","shape-menu":"menu","text-color":"dialog","text-menu":"menu","text-size":"menu","vertical-line":"false","zoom-in":"false","zoom-out":"false",callout:"false",clear:"false",comment:"false",delete:"false",line:"false",lock:"false",menu:"menu",note:"false",reset:"false",settings:"dialog",text:"false"};function kfe(e){return typeof e!="string"?"false":Ife[e]}var vY=class extends vb{constructor(e){super(),this.localeManager=e}update(e){const{localeManager:t}=this;e.tooltip&&(this.elem.title=t.t(e.tooltip));let i="";if(e.icon!=null&&(i=`<span class="${fM(e.icon)} ag-charts-toolbar__icon"></span>`),e.label!=null){const s=t.t(e.label);i=`${i}<span class="ag-charts-toolbar__label">${s}</span>`}const n=kfe(e.value);n=="false"?(this.setAriaHasPopup(void 0),this.setAriaExpanded(void 0)):(this.setAriaHasPopup(n),this.setAriaExpanded(!1)),this.elem.innerHTML=i}setChecked(e){Tt(this.elem,"aria-checked",e)}},tz="ag-charts-toolbar__button--active",PP=class extends bM{constructor({eventsHub:e,localeManager:t},i,n){super(n),this.ariaLabelId=i,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new KW,this.hasPrefix=!1,this.buttonWidgets=[],this.updateAriaLabel=()=>this.setAriaLabel(this.localeManager.t(this.ariaLabelId)),this.eventsHub=e,this.localeManager=t,this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal",n==="horizontal"),this.toggleClass("ag-charts-toolbar--vertical",n==="vertical"),this.eventsHub.on("locale:change",this.updateAriaLabel),this.updateAriaLabel()}setAriaLabelId(e){this.ariaLabelId=e,this.updateAriaLabel()}addToolbarListener(e,t){return this.events.addListener(e,t)}clearButtons(){this.expanded?.collapse({mode:"2"});for(const e of this.buttonWidgets)e.destroy();this.buttonWidgets.splice(0)}updateButtons(e){const{buttonWidgets:t}=this;for(const[i,n]of e.entries())(this.buttonWidgets.at(i)??this.createButton(i,n)).update(n);for(let i=e.length;i<t.length;i++)this.buttonWidgets.at(i)?.destroy();this.buttonWidgets.splice(e.length),this.refreshButtonClasses()}updateButtonByIndex(e,t){this.buttonWidgets.at(e)?.update(t)}clearActiveButton(){for(const e of this.buttonWidgets)e.toggleClass(tz,!1)}toggleActiveButtonByIndex(e){if(e!==-1)for(const[t,i]of this.buttonWidgets.entries())i.toggleClass(tz,e!=null&&e===t)}toggleButtonEnabledByIndex(e,t){e!==-1&&this.buttonWidgets.at(e)?.setEnabled(t)}toggleSwitchCheckedByIndex(e,t){e!==-1&&this.buttonWidgets.at(e)?.setChecked(t)}getButtonBounds(){return this.buttonWidgets.map(e=>this.getButtonWidgetBounds(e))}setButtonHiddenByIndex(e,t){this.buttonWidgets.at(e)?.setHidden(t)}getButtonWidgetBounds(e){const t=this.getBounds(),i=e.getBounds();return new Le(i.x+t.x,i.y+t.y,i.width,i.height)}refreshButtonClasses(){const{buttonWidgets:e,hasPrefix:t}=this;let i,n,s;for(const[o,r]of e.entries())i=!t&&o===0||s!=r.section,n=o===e.length-1||r.section!=e.at(o+1)?.section,r.toggleClass("ag-charts-toolbar__button--first",i),r.toggleClass("ag-charts-toolbar__button--last",n),r.toggleClass("ag-charts-toolbar__button--gap",o>0&&i),s=r.section}createButton(e,t){const i=this.createButtonWidget();return i.addClass("ag-charts-toolbar__button"),i.addListener("click",n=>{const s={index:e,...t instanceof Qe?t.toJson():t},o=this.getButtonWidgetBounds(i),r={event:n,button:s,buttonBounds:o,buttonWidget:i};this.events.dispatch("button-pressed",r)}),i.addListener("focus",()=>{const n={button:{index:e}};this.events.dispatch("button-focused",n)}),i.addListener("expand-controlled-widget",n=>{this.expanded?.collapse({mode:"4"}),this.expanded=n.controlled;const s=this.expanded.addListener("collapse-widget",()=>{this.expanded=void 0,s()})}),t.section&&(i.section=t.section),this.buttonWidgets.push(i),this.addChild(i),i}},Lfe=class extends PP{createButtonWidget(){return new vY(this.localeManager)}},Pfe=class extends yY{constructor(e,t,i){super(e,t),this.onPopoverMoved=i,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(e,t={}){this.showWithChildren(e,{...t,class:"ag-charts-floating-toolbar"})}hide(){this.dragged=!1,super.hide()}getBounds(){const e=this.getPopoverElement();return new Le(e?.offsetLeft??0,e?.offsetTop??0,e?.offsetWidth??0,e?.offsetHeight??0)}hasBeenDragged(){return this.dragged}setAnchor(e,t,i){const n=this.getPopoverElement();if(!n)return;const s=e.position??"above",{offsetWidth:o,offsetHeight:r}=n;let a=e.y-r-i,l=e.x-o/2;s==="below"?a=e.y+i:s==="right"?(a=e.y-r/2,l=e.x+t):s==="above-left"&&(l=e.x),this.updatePosition({x:l,y:a})}ignorePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="none")}capturePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="unset")}updatePosition(e){const t=this.getBounds(),i=this.ctx.domManager.getBoundingClientRect();e.x=Math.floor(st(0,e.x,i.width-t.width)),e.y=Math.floor(st(0,e.y,i.height-t.height)),super.updatePosition(e),this.onPopoverMoved()}},Nfe=class extends PP{constructor(e,t,i){super(e,t,"horizontal"),this.hasPrefix=!0,this.popover=new Pfe(e,i,this.onPopoverMoved.bind(this)),this.dragHandle=new Ffe(e.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}destroy(){super.destroy(),this.popover.destroy()}show(e={}){this.popover.show([this.dragHandle.getElement(),this.getElement()],e)}hide(){this.popover.hide()}setAnchor(e){this.popover.setAnchor(e,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){const e=this.popover.getBounds();if(this.popoverBounds?.equals(e))return;this.popoverBounds=e.clone();const t=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:e,buttonBounds:t})}getButtonWidgetBounds(e){const t=this.popover.getBounds(),i=super.getButtonWidgetBounds(e),n=this.dragHandle.getBounds();return new Le(i.x+t.x-n.width,i.y+t.y,i.width,i.height)}},Ffe=class extends uf{constructor(e){super(ft("div","ag-charts-floating-toolbar__drag-handle"));const t=new uf(ft("span",`${fM("drag-handle")} ag-charts-toolbar__icon`));t.setAriaHidden(!0),this.addChild(t),this.elem.title=e}},Ofe={...DU,...AU};bu.create.bind(bu),bu.__createSparkline.bind(bu);function iz(e,t){return{...e,container:t.current}}function Bfe(e,t){const i=R.forwardRef(function(s,o){const{options:r,style:a,className:l}=s,c=R.useRef(null),d=R.useRef();R.useLayoutEffect(()=>{const g=e(iz(r,c));return d.current=g,()=>{g.destroy()}},[]);const p=d.current===void 0;return R.useEffect(()=>{p||d.current?.update(iz(r,c)).catch(g=>console.error(g))},[r]),R.useImperativeHandle(o,()=>d.current,[]),R.useMemo(()=>R.createElement("div",{ref:c,style:a,className:l}),[a,l])});return i.displayName=t,i}var nz=Bfe(e=>bu.create(e),"AgCharts");const Gfe=()=>{const{getMonthlyAttendance:e,isLoading:t,getCounts:i,isLoadingAttendance:n}=ub(),[s,o]=R.useState({}),[r,a]=R.useState({}),[l,c]=R.useState(new Date),[d,p]=R.useState({classes:0,students:0,teachers:0,subjects:0}),g=async b=>{const C=await e(b);if(C.success){if(C.monthlyAttendance.length===0){o({}),a({});return}const w=C.monthlyAttendance.map(E=>({month:new Date(0,E.month-1).toLocaleString("default",{month:"short"}),presentPercentage:parseFloat(E.totalPresent.replace("%","")),absentPercentage:parseFloat(E.totalAbsent.replace("%",""))}));o({data:w,series:[{type:"bar",xKey:"month",yKey:"presentPercentage",yName:"Present",fill:"#6c62ff"},{type:"bar",xKey:"month",yKey:"absentPercentage",yName:"Absent",fill:"oklch(44.4% 0.177 26.899)"}],animation:{enabled:!0,duration:1700}});const x=w.reduce((E,I)=>E+I.presentPercentage,0),M=w.reduce((E,I)=>E+I.absentPercentage,0);a({data:[{category:"Present",value:x},{category:"Absent",value:M,fill:"oklch(44.4% 0.177 26.899)"}],series:[{type:"pie",angleKey:"value",labelKey:"category",title:{text:"Overall Attendance Distribution"},fills:["#6c62ff","oklch(44.4% 0.177 26.899)"]}],animation:{enabled:!0,duration:1700,easing:"easeInOutQuad"}})}else Oi.error(C.message)},m=b=>{c(b)};return R.useEffect(()=>{const b=l.getFullYear();g(b)},[l]),R.useEffect(()=>{(async()=>{const C=await i();C.success?p(C.counts):Oi.error(C.message)})()},[i]),t?F.jsx("div",{className:"w-full h-[400px] flex items-center justify-center",children:F.jsx(En,{className:"animate-spin text-[#6c62ff]"})}):F.jsxs("div",{className:"p-4 md:p-6",children:[F.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 w-full",children:[F.jsx(Vd,{name:"Classes",count:d.classes,icon:F.jsx(Py,{className:"text-xl text-yellow-400"})}),F.jsx(Vd,{name:"Students",count:d.students,icon:F.jsx(t1,{className:"text-xl text-blue-500"})}),F.jsx(Vd,{name:"Teachers",count:d.teachers,icon:F.jsx(Tj,{className:"text-xl text-purple-600"})}),F.jsx(Vd,{name:"Subjects",count:d.subjects,icon:F.jsx(Rj,{className:"text-xl text-green-600"})})]}),F.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:items-center gap-4",children:[F.jsxs("h3",{className:"text-lg sm:text-xl md:text-2xl font-semibold flex-1",children:["Visual representation of attendance for the year ",l.getFullYear()]}),F.jsx(C4,{selected:l,onChange:m,dateFormat:"yyyy",showYearPicker:!0,className:"p-2 bg-gray-100 text-gray-700 rounded-md border-2 border-[#6c62ff] focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto transition duration-150",disabled:t})]}),F.jsx("div",{className:"mt-8",children:n?F.jsx("div",{className:"w-full h-[400px] flex items-center justify-center",children:F.jsx(En,{className:"animate-spin text-[#6c62ff]"})}):F.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 md:gap-8",children:[F.jsx("div",{className:"w-full lg:w-2/3 h-64 sm:h-80 md:h-96",children:F.jsx(nz,{className:"h-full w-full border-2 rounded-lg",options:s})}),F.jsx("div",{className:"w-full lg:w-1/3 h-64 sm:h-80 md:h-96",children:F.jsx(nz,{className:"h-full w-full border-2 rounded-lg",options:r})})]})})]})},_fe=({setIsOpen:e})=>{const{user:t}=Es(),[i,n]=R.useState(""),s=()=>{const r=new Date().getHours();r<12?n("Good Morning"):r<18?n("Good Afternoon"):n("Good Evening")};R.useEffect(()=>{s();const r=setInterval(s,6e4);return()=>clearInterval(r)},[]);const o=t?.email.slice(0,1).toUpperCase();return F.jsxs("div",{className:"w-full border-b py-8 h-11 flex justify-between items-center",children:[F.jsxs("div",{className:"flex items-center gap-4",children:[F.jsx(yQ,{onClick:()=>e(r=>!r),className:"ml-2 cursor-e-resize text-gray-500"}),F.jsxs("p",{className:"text-xl font-semibold",children:[i,","," ",t.firstName&&t.secondName?`${t.firstName.charAt(0).toUpperCase()+t.firstName.slice(1)} ${t.secondName.charAt(0).toUpperCase()+t.secondName.slice(1)}`:"Admin"]})]}),F.jsx("div",{className:"flex items-center gap-4",children:F.jsx("div",{className:"w-[40px] h-[40px] font-semibold text-xl text-white mr-3 rounded-full cursor-pointer flex items-center justify-center",style:{backgroundColor:t.color||"rgb(37, 99, 235)"},children:o})})]})},Vfe=({isOpen:e})=>{const{user:t}=Es(),i=O0(),[n,s]=R.useState(!1),[o,r]=R.useState(!1);R.useEffect(()=>{const d=()=>{r(window.innerWidth<768),window.innerWidth>=768&&s(!1)};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const a=()=>{localStorage.removeItem("token"),Es.setState({isAuthorized:!1,user:null,token:null}),i("/signin"),qe.success("logged out successfully")},l=()=>{o&&s(!1)},c=({to:d,icon:p,label:g,...m})=>F.jsxs(XH,{to:d,...m,onClick:l,className:({isActive:y})=>Mi("flex items-center gap-3 p-3 rounded-md transition-colors duration-150","hover:bg-[#f3f4ff] hover:text-[#6c62ff]",y&&"bg-[#eceeff] border-r-4 border-[#6c62ff] text-[#6c62ff] font-semibold",!o&&e&&"justify-center"),title:!o&&e?g:void 0,children:[F.jsx(p,{className:"w-5 h-5 flex-shrink-0"}),F.jsx("span",{className:Mi("truncate",!o&&e&&"hidden"),children:g})]});return F.jsxs(F.Fragment,{children:[o&&F.jsx("button",{onClick:()=>s(!n),className:"fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-lg hover:bg-gray-100 transition md:hidden","aria-label":"Toggle menu",children:n?F.jsx(IQ,{className:"w-6 h-6"}):F.jsx(fQ,{className:"w-6 h-6"})}),o&&n&&F.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:()=>s(!1)}),F.jsxs("aside",{className:Mi("h-screen bg-white border-r flex flex-col transition-all duration-300",!o&&(e?"w-[50px]":"w-[250px]"),o&&"fixed left-0 top-0 w-[250px] z-40",o&&!n&&"-translate-x-full",o&&n&&"translate-x-0 shadow-2xl"),children:[F.jsxs("div",{className:"flex items-center justify-center py-[12px] border-b",children:[F.jsx("img",{src:ej,alt:"logo",className:"w-10"}),F.jsxs("div",{className:Mi("ml-2 flex items-center gap-2",!o&&e&&"hidden"),children:[F.jsxs("p",{className:"font-semibold",children:["INTANGO ",F.jsx("span",{className:"text-[#6c62ff]",children:"TSS"})]}),F.jsx("span",{className:"inline-block mt-1 px-3 py-1 text-xs rounded-full border bg-white transform hover:scale-105 transition-all duration-200",children:t?.role})]})]}),F.jsxs("nav",{className:"flex-1 mt-4 px-2 space-y-1 overflow-y-auto",children:[t?.role.toLowerCase()==="admin"&&F.jsxs(F.Fragment,{children:[F.jsx(c,{to:"/",icon:uE,label:"Dashboard"}),F.jsx(c,{to:"/teachers",icon:Tj,label:"Teachers"}),F.jsx(c,{to:"/students",icon:t1,label:"Students"}),F.jsx(c,{to:"/classes",icon:Py,label:"Classes"}),F.jsx(c,{to:"/attendance",icon:dE,label:"Attendance"}),F.jsx(c,{to:"/timetable",icon:MS,label:"Timetable"})]}),t?.role.toLowerCase()==="teacher"&&F.jsxs(F.Fragment,{children:[F.jsx(c,{to:"/teacher",end:!0,icon:uE,label:"Dashboard"}),F.jsx(c,{to:"/teacher/students",icon:Py,label:"Students"}),F.jsx(c,{to:"/teacher/classes",icon:Py,label:"Classes"}),F.jsx(c,{to:"/teacher/attendance",icon:dE,label:"Attendance"}),F.jsx(c,{to:"/timetable",icon:MS,label:"Timetable"})]}),t?.role.toLowerCase()==="student"&&F.jsxs(F.Fragment,{children:[F.jsx(c,{to:"/student",end:!0,icon:uE,label:"Dashboard"}),F.jsx(c,{to:"/student/attendance",icon:dE,label:"Attendance"}),F.jsx(c,{to:"/timetable",icon:MS,label:"Timetable"})]})]}),F.jsx("div",{className:Mi("mt-auto mb-4 px-2",!o&&e&&"hidden"),children:F.jsxs("div",{className:"border-t-2 pt-3",children:[F.jsxs("button",{onClick:a,className:"flex w-full items-center justify-center gap-2 px-4 py-2 bg-red-500 text-white font-semibold rounded-lg shadow hover:bg-red-700 transition",children:[F.jsx(pQ,{size:20}),F.jsx("span",{children:"Logout"})]}),F.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 truncate",children:t?.email})]})})]})]})},NP=({setState:e,name:t})=>F.jsxs("div",{className:"flex w-full justify-between items-center border-2 p-3 rounded-lg",children:[F.jsx("h3",{className:"font-semibold text-2xl",children:t}),F.jsxs("button",{onClick:()=>e(i=>!i),className:"bg-[#6c62ff] px-5 py-3 rounded-lg text-white flex items-center gap-2",children:[F.jsx(bQ,{}),"  Add ",t]})]});var Dh=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const n=t?this.allAsyncListeners:this.allSyncListeners;let s=n.get(e);return!s&&i&&(s=new Set,n.set(e,s)),s}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const n=this.getListeners(e,i,!1);n&&(n.delete(t),n.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const{frameworkOverrides:n}=this,s=a=>{const l=n?()=>n.wrapIncoming(a):a;t?this.dispatchAsync(l):l()},o=this.getListeners(i,t,!1);if((o?.size??0)>0){const a=new Set(o);for(const l of a)o?.has(l)&&s(()=>l(e))}const r=this.getGlobalListeners(t);if(r.size>0){const a=new Set(r);for(const l of a)s(()=>l(i,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(const t of e)t()}};function Ql(e){return e==null||e===""?null:e}function Pe(e){return e!=null&&e!==""}function ki(e){return!Pe(e)}function ck(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function _v(e,t){const i=e?JSON.stringify(e):null,n=t?JSON.stringify(t):null;return i===n}function zfe(e,t,i=!1){const n=e==null,s=t==null;if(e?.toNumber&&(e=e.toNumber()),t?.toNumber&&(t=t.toNumber()),n&&s)return 0;if(n)return-1;if(s)return 1;function o(r,a){return r>a?1:r<a?-1:0}if(typeof e!="string"||!i)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}var Hfe=/[&<>"']/g,jfe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function nm(e){return e?.toString().toString()??null}function Yy(e){return nm(e)?.replace(Hfe,t=>jfe[t])??null}function Sa(e){return e.eRootDiv.getRootNode()}function $i(e){return Sa(e).activeElement}function Kn(e){const{gos:t,eRootDiv:i}=e;let n=null;const s=t.get("getDocument");return s&&Pe(s)?n=s():i&&(n=i.ownerDocument),n&&Pe(n)?n:document}function bY(e){const t=$i(e);return t===null||t===Kn(e).body}function CY(e){return Kn(e).defaultView||window}function FP(e){let t=null,i=null;try{t=Kn(e).fullscreenElement}catch{}finally{t||(t=Sa(e));const n=t.querySelector("body");n?i=n:t instanceof ShadowRoot?i=t:t instanceof Document?i=t?.documentElement:i=t}return i}function Wfe(e){return FP(e)?.clientWidth??(window.innerWidth||-1)}function Ufe(e){return FP(e)?.clientHeight??(window.innerHeight||-1)}function ca(e,t,i){i==null||typeof i=="string"&&i==""?wY(e,t):ua(e,t,i)}function ua(e,t,i){e.setAttribute(SY(t),i.toString())}function wY(e,t){e.removeAttribute(SY(t))}function SY(e){return`aria-${e}`}function Ah(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function $fe(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function Yfe(e){return e.getAttribute("aria-label")}function Sf(e,t){ca(e,"label",t)}function Vv(e,t){ca(e,"labelledby",t)}function xY(e,t){ca(e,"live",t)}function Kfe(e,t){ca(e,"atomic",t)}function qfe(e,t){ca(e,"relevant",t)}function Zfe(e,t){ca(e,"invalid",t)}function Xfe(e,t){ca(e,"disabled",t)}function MY(e,t){ca(e,"hidden",t)}function uk(e,t){ua(e,"expanded",t)}function Qfe(e,t){ua(e,"setsize",t)}function Jfe(e,t){ua(e,"posinset",t)}function eme(e,t){ua(e,"rowcount",t)}function DY(e,t){ua(e,"rowindex",t)}function tme(e,t){ua(e,"rowspan",t)}function ime(e,t){ua(e,"colcount",t)}function AY(e,t){ua(e,"colindex",t)}function nme(e,t){ua(e,"colspan",t)}function sme(e,t){ua(e,"sort",t)}function ome(e){wY(e,"sort")}function RY(e,t){ca(e,"selected",t)}function rme(e,t){ca(e,"controls",t)}function ame(e,t){rme(e,t.id),Vv(t,e.id)}function sz(e,t){ca(e,"owns",t)}function RD(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var lme="[tabindex], input, select, button, textarea, [href]",EY="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Ky(e){return!e||!e.matches("input, select, button, textarea")||!e.matches(EY)?!1:Dc(e)}function _i(e,t,i={}){const{skipAriaHidden:n}=i;e.classList.toggle("ag-hidden",!t),n||MY(e,!t)}function cme(e,t,i={}){const{skipAriaHidden:n}=i;e.classList.toggle("ag-invisible",!t),n||MY(e,!t)}function zv(e,t){const i="disabled",n=t?o=>o.setAttribute(i,""):o=>o.removeAttribute(i);n(e);const s=e.querySelectorAll("input")??[];for(const o of s)n(o)}function ah(e,t,i){let n=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++n>i)break}else if(e===i)break}return!1}function Jh(e){const{height:t,width:i,borderTopWidth:n,borderRightWidth:s,borderBottomWidth:o,borderLeftWidth:r,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:d,marginTop:p,marginRight:g,marginBottom:m,marginLeft:y,boxSizing:b}=window.getComputedStyle(e),C=Number.parseFloat;return{height:C(t||"0"),width:C(i||"0"),borderTopWidth:C(n||"0"),borderRightWidth:C(s||"0"),borderBottomWidth:C(o||"0"),borderLeftWidth:C(r||"0"),paddingTop:C(a||"0"),paddingRight:C(l||"0"),paddingBottom:C(c||"0"),paddingLeft:C(d||"0"),marginTop:C(p||"0"),marginRight:C(g||"0"),marginBottom:C(m||"0"),marginLeft:C(y||"0"),boxSizing:b}}function OP(e){const t=Jh(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function Hv(e){const t=Jh(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function TY(e){const{height:t,marginBottom:i,marginTop:n}=Jh(e);return Math.floor(t+i+n)}function d0(e){const{width:t,marginLeft:i,marginRight:n}=Jh(e);return Math.floor(t+i+n)}function IY(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:n,borderRightWidth:s,borderBottomWidth:o}=Jh(e);return{top:t.top+(i||0),left:t.left+(n||0),right:t.right+(s||0),bottom:t.bottom+(o||0)}}function h0(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i)),i}function p0(e,t,i){i&&(t*=-1),e.scrollLeft=t}function bo(e){for(;e?.firstChild;)e.firstChild.remove()}function Lu(e){e?.parentNode&&e.remove()}function kY(e){return!!e.offsetParent}function Dc(e){return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!kY(e)||window.getComputedStyle(e).visibility!=="visible")}function BP(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function nx(e){return()=>{const t=e();return t?GP(t)||LY(t):!0}}function GP(e){return e.clientWidth<e.scrollWidth}function LY(e){return e.clientHeight<e.scrollHeight}function g0(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):ja(e,t)}function ja(e,t){t=_P(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function qy(e,t){t=_P(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function _P(e){return typeof e=="number"?`${e}px`:e}function VP(e){return e instanceof Node||e instanceof HTMLElement}function Oo(e,t,i){i==null||i===""?e.removeAttribute(t):e.setAttribute(t,i.toString())}function Ac(e,t,i){const s=CY(e).ResizeObserver,o=s?new s(i):null;return o?.observe(t),()=>o?.disconnect()}function Rc(e,t){const i=CY(e);i.requestAnimationFrame?i.requestAnimationFrame(t):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(t):i.setTimeout(t,0)}var PY="data-ref",fT;function oz(){return fT??(fT=document.createTextNode(" ")),fT.cloneNode()}function cC(e){const{attrs:t,children:i,cls:n,ref:s,role:o,tag:r}=e,a=document.createElement(r);if(n&&(a.className=n),s&&a.setAttribute(PY,s),o&&a.setAttribute("role",o),t)for(const l of Object.keys(t))a.setAttribute(l,t[l]);if(i)if(typeof i=="string")a.textContent=i;else{let l=!0;for(const c of i)c&&(typeof c=="string"?(a.appendChild(document.createTextNode(c)),l=!1):typeof c=="function"?a.appendChild(c()):(l&&(a.appendChild(oz()),l=!1),a.append(cC(c)),a.appendChild(oz())))}return a}var ume=["touchstart","touchend","touchmove","touchcancel","scroll"],dme=["wheel"],mT={},NY=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof mT[i]=="boolean")return mT[i];const n=document.createElement(e[i]||"div");return i="on"+i,mT[i]=i in n}})();function hme(e,t){return!t||!e?!1:gme(t).indexOf(e)>=0}function pme(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function gme(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():pme(t)}function fme(e,t,i){const n=mme(t);let s;n!=null&&(s={passive:n}),e.addEventListener(t,i,s)}var mme=e=>{const t=ume.includes(e),i=dme.includes(e);if(t)return!0;if(i)return!1};function FY(e,t,i){if(i===0)return!1;const n=Math.abs(e.clientX-t.clientX),s=Math.abs(e.clientY-t.clientY);return Math.max(n,s)<=i}var Zy=(e,t)=>{const i=e.identifier;for(let n=0,s=t.length;n<s;++n){const o=t[n];if(o.identifier===i)return o}return null};function jv(e,t){return e.gos.isElementInThisInstance(t.target)}function yme(e,t,i){const s=e.getBoundingClientRect().height,o=Wfe(i)-2,r=Ufe(i)-2;if(!e.offsetParent)return;const l=IY(e.offsetParent),{clientY:c,clientX:d}=t;let p=c-l.top-s/2,g=d-l.left-10;const m=Kn(i),y=m.defaultView||window,b=y.pageYOffset||m.documentElement.scrollTop,C=y.pageXOffset||m.documentElement.scrollLeft;o>0&&g+e.clientWidth>o+C&&(g=o+C-e.clientWidth),g<0&&(g=0),r>0&&p+e.clientHeight>r+b&&(p=r+b-e.clientHeight),p<0&&(p=0),e.style.left=`${g}px`,e.style.top=`${p}px`}var sx=(e,...t)=>{for(const i of t){const[n,s,o,r]=i;n.addEventListener(s,o,r),e.push(i)}},zP=e=>{if(e){for(const[t,i,n,s]of e)t.removeEventListener(i,n,s);e.length=0}},du=e=>{e.cancelable&&e.preventDefault()};function vme(e,t){return t}function OY(e){return e?.getLocaleTextFunc()??vme}function bme(e,t,i,n){const s=t[i];return e.getLocaleTextFunc()(i,typeof s=="function"?s(n):s,n)}function Cme(e){return(t,i,n)=>e({key:t,defaultValue:i,variableValues:n})}function wme(e){return(t,i,n)=>{let s=e?.[t];if(s&&n?.length){let o=0;for(;!(o>=n.length||s.indexOf("${variable}")===-1);)s=s.replace("${variable}",n[o++])}return s??i}}var ll=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new Dh),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService?.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const n of Object.keys(t)){const s=t[n];s&&i.push(this._setupListener(e,n,s))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;let n;if(Sme(e))e.__addEventListener(t,i),n=()=>(e.__removeEventListener(t,i),null);else{const s=xme(e);e instanceof HTMLElement?fme(e,t,i):s?e.addListener(t,i):e.addEventListener(t,i),n=s?()=>(e.removeListener(t,i),null):()=>(e.removeEventListener(t,i),null)}return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==n),null)}setupPropertyListener(e,t){const{gos:i}=this;i.addPropertyEventListener(e,t);const n=()=>(i.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==n),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,n=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=s.changeSet.id}const o={type:"propertyChanged",changeSet:s.changeSet,source:s.source};t(o)};for(const s of e)this.setupPropertyListener(s,n)}getLocaleTextFunc(){return OY(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function Sme(e){return e.__addEventListener!==void 0}function xme(e){return e.eventServiceType==="global"}var he=class extends ll{},rz={};function HP(e,t){rz[t]||(e(),rz[t]=!0)}var Mme={pending:!1,funcs:[]},Dme={pending:!1,funcs:[]};function dk(e,t="setTimeout",i){const n=t==="raf"?Dme:Mme;if(n.funcs.push(e),n.pending)return;n.pending=!0;const s=()=>{const o=n.funcs.slice();n.funcs.length=0,n.pending=!1;for(const r of o)r()};t==="raf"?Rc(i,s):window.setTimeout(s,0)}function ps(e,t,i){let n;return function(...s){const o=this;window.clearTimeout(n),n=window.setTimeout(function(){e.isAlive()&&t.apply(o,s)},i)}}function az(e,t){let i=0;return function(...n){const s=this,o=Date.now();o-i<t||(i=o,e.apply(s,n))}}function Ame(e,t,i,n=100){const s=Date.now();let o=null,r=!1;const a=()=>{o!=null&&(window.clearInterval(o),o=null)};e.addDestroyFunc(a);const l=()=>{const c=Date.now()-s>n;(t()||c)&&(i(),r=!0,a())};l(),r||(o=window.setInterval(l,10))}var BY=new Set(["__proto__","constructor","prototype"]);function Rme(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(const i of Object.keys(e).filter(n=>!BY.has(n)))t(i,e[i])}}function Ys(e,t,i=!0,n=!1){Pe(t)&&Rme(t,(s,o)=>{let r=e[s];r!==o&&(n&&r==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(r={},e[s]=r),lz(o)&&lz(r)&&!Array.isArray(r)?Ys(r,o,i,n):(i||o!==void 0)&&(e[s]=o))})}function lz(e){return typeof e=="object"&&e!==null}var jP=class Ll{static applyGlobalGridOptions(t){if(!Ll.gridOptions)return{...t};let i={};return Ys(i,Ll.gridOptions,!0,!0),Ll.mergeStrategy==="deep"?Ys(i,t,!0,!0):i={...i,...t},Ll.gridOptions.context&&(i.context=Ll.gridOptions.context),t.context&&(Ll.mergeStrategy==="deep"&&i.context&&Ys(t.context,i.context,!0,!0),i.context=t.context),i}static applyGlobalGridOption(t,i){if(Ll.mergeStrategy==="deep"){const n=GY(t);if(n&&typeof n=="object"&&typeof i=="object")return Ll.applyGlobalGridOptions({[t]:i})[t]}return i}};jP.gridOptions=void 0;jP.mergeStrategy="shallow";var WP=jP;function GY(e){return WP.gridOptions?.[e]}var _Y={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1,enableFilterHandlers:!1},VY="https://www.ag-grid.com";function Rh(e,t,...i){e.get("debug")&&console.log("AG Grid: "+t,...i)}function Xy(e,...t){HP(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function Bg(e,...t){HP(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}var zY=new Set,f0={},lh={},ox,HY=!1,jY=!1,Eme=!1;function Tme(e){const[t,i]=e.version.split(".")||[],[n,s]=ox.split(".")||[];return t===n&&i===s}function Ime(e){ox||(ox=e.version);const t=n=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${n} Please update all modules to the same version.`;e.version?Tme(e)||Bg(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${ox}.`)):Bg(t(`'${e.moduleName}' is incompatible.`));const i=e.validate?.();i&&!i.isValid&&Bg(`${i.message}`)}function Wv(e,t,i=!1){i||(HY=!0),Ime(e);const n=e.rowModels??["all"];zY.add(e);let s;t!==void 0?(jY=!0,lh[t]===void 0&&(lh[t]={}),s=lh[t]):s=f0;for(const o of n)s[o]===void 0&&(s[o]={}),s[o][e.moduleName]=e;if(e.dependsOn)for(const o of e.dependsOn)Wv(o,t,i)}function kme(e){delete lh[e]}function hk(e,t,i){const n=s=>!!f0[s]?.[e]||!!lh[t]?.[s]?.[e];return n(i)||n("all")}function UP(){return jY}function Lme(e,t){const i=lh[e]??{};return[...Object.values(f0.all??{}),...Object.values(i.all??{}),...Object.values(f0[t]??{}),...Object.values(i[t]??{})]}function Pme(){return new Set(zY)}function Nme(e,t){const i=lh[e]??{};return[...Object.values(i.all??{}),...Object.values(i[t]??{})]}function Fme(){return HY}function Ome(){return Eme}var ep=class{static register(e){Wv(e,void 0)}static registerModules(e){for(const t of e)Wv(t,void 0)}},ke="34.3.1",cz=2e3,uz=100,WY="_version_",UY=null,Gg=`${VY}/javascript-data-grid`;function Bme(e){UY=e}function Gme(e){Gg=e}function $Y(e,t,i){return UY?.(e,t)??[Hme(e,t,i)]}function $P(e,t,i,n,s){e(`${n?"warning":"error"} #${t}`,...$Y(t,i,s))}function _me(e){if(!e)return String(e);const t={};for(const i of Object.keys(e))typeof e[i]!="object"&&typeof e[i]!="function"&&(t[i]=e[i]);return JSON.stringify(t)}function Vme(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=_me(e)),t}function m0(e){return e===void 0?"undefined":e===null?"null":e}function pk(e,t){return`${e}?${t.toString()}`}function zme(e,t,i){const n=Array.from(t.entries()).sort((o,r)=>r[1].length-o[1].length);let s=pk(e,t);for(const[o,r]of n){if(o===WY)continue;const a=s.length-i;if(a<=0)break;const l="...",c=a+l.length,d=r.length-c>uz?r.slice(0,r.length-c)+l:r.slice(0,uz)+l;t.set(o,d),s=pk(e,t)}return s}function YY(e,t){const i=new URLSearchParams;if(i.append(WY,ke),t)for(const o of Object.keys(t))i.append(o,Vme(t[o]));const n=`${Gg}/errors/${e}`,s=pk(n,i);return s.length<=cz?s:zme(n,i,cz)}var Hme=(e,t,i)=>{const n=YY(e,t);return`${`${i?i+` 
`:""}Visit ${n}`}${i?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function Se(...e){$P(Xy,e[0],e[1],!0)}function oi(...e){$P(Bg,e[0],e[1],!1)}function ky(e,t,i){$P(Bg,e,t,!1,i)}function jme(e,t){const i=t[0];return`error #${i} `+$Y(i,t[1],e).join(" ")}function Wa(...e){return jme(void 0,e)}function KY(e,t){return e.get("rowModelType")===t}function en(e,t){return KY(e,"clientSide")}function tp(e,t){return KY(e,"serverSide")}function gs(e,t){return e.get("domLayout")===t}function ch(e){return v0(e)!==void 0}function qY(e){return typeof e.get("getRowHeight")=="function"}function Wme(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function Pu(e,t,i=!1,n){const{gos:s,environment:o}=e;if(n==null&&(n=o.getDefaultRowHeight()),qY(s)){if(i)return{height:n,estimated:!0};const l={node:t,data:t.data},c=s.getCallback("getRowHeight")(l);if(gk(c))return c===0&&Se(23),{height:Math.max(1,c),estimated:!1}}if(t.detail&&s.get("masterDetail"))return Ume(s);const r=s.get("rowHeight");return{height:r&&gk(r)?r:n,estimated:!1}}function Ume(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return gk(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function uh(e){const{environment:t,gos:i}=e,n=i.get("rowHeight");if(!n||ki(n))return t.getDefaultRowHeight();const s=t.refreshRowHeightVariable();return s!==-1?s:(Se(24),t.getDefaultRowHeight())}function gk(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function ZY(e,t,i){const n=t[e.getDomDataKey()];return n?n[i]:void 0}function Eh(e,t,i,n){const s=e.getDomDataKey();let o=t[s];ki(o)&&(o={},t[s]=o),o[i]=n}function _g(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function XY(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||gs(e,"print"))}function Ta(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function fk(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function QY(e){return e.get("grandTotalRow")}function JY(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function e6(e,t,i){return!!t.group&&!t.footer&&JY(e,i)}function xf(e){const t=e.getCallback("getRowId");return t===void 0?t:i=>{let n=t(i);return typeof n!="string"&&(HP(()=>Se(25,{id:n}),"getRowIdString"),n=String(n)),n}}function $me(e,t){const i=e.get("groupHideParentOfSingleChild");return!!(i===!0||i==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function Yme(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function Vg(e){return e?.checkboxes??!0}function rx(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function y0(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function yT(e){return e?.hideDisabledCheckboxes??!1}function Kme(e){return typeof e.get("rowSelection")!="string"}function Nu(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function t6(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const i=e.get("suppressRowClickSelection"),n=e.get("suppressRowDeselection");return i&&n?!1:i?"enableDeselection":n?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function qme(e){const t=t6(e);return t===!0||t==="enableSelection"}function Zme(e){const t=t6(e);return t===!0||t==="enableDeselection"}function mk(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function v0(e){const t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t?.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function b0(e){return v0(e)==="multiRow"}function Xme(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function C0(e){const t=e.get("rowSelection");if(typeof t=="string"){const i=e.get("groupSelectsChildren"),n=e.get("groupSelectsFiltered");return i&&n?"filteredDescendants":i?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function i6(e,t=!0){const i=e.get("rowSelection");return typeof i!="object"?t?"all":void 0:i.mode==="multiRow"?i.selectAll:"all"}function Qme(e){const t=e.get("rowSelection");return typeof t=="string"?!1:t?.mode==="multiRow"?t.ctrlASelectsRows??!1:!1}function Uv(e){const t=C0(e);return t==="descendants"||t==="filteredDescendants"}function dz(e){const t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function Jme(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function Bo(e){return e.get("columnMenu")==="legacy"}function eye(e){return!Bo(e)}function tye(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function iye(e,t,i){typeof e!="object"&&(e={});const n={...e};for(const s of i){const o=t[s];typeof o<"u"&&(n[s]=o)}return n}function nye(e,t){if(!e)return;const i={};let n=!1;for(const r of Object.keys(e))i[r]=e[r],n=!0;if(!n)return;const s={type:"gridOptionsChanged",options:i};t.dispatchEvent(s);const o={type:"componentStateChanged",...i};t.dispatchEvent(o)}function $e(e,t){return e.addCommon(t)}function ax(e,t){return e[t]??e.gridOptions?.[t]??GY(t)??_Y[t]}function hz({gos:e},t){return t.button===2||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var sye={resizable:!0,sortable:!0},oye=0;function n6(){return oye++}function Fu(e){return e instanceof ip}var ip=class extends he{constructor(e,t,i,n){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=n,this.isColumn=!0,this.instanceId=n6(),this.autoHeaderHeight=null,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new Dh,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=Yy(i)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:i,colFlex:n}}=this;t?.initCol(this);const s=e.hide;s!==void 0?this.visible=!s:this.visible=!e.initialHide,i?.initCol(this),n?.initCol(this)}setColDef(e,t,i){const n=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),n&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",i)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:i}}=this,n=e.get("suppressFieldDotNotation");this.fieldContainsDots=Pe(t)&&t.includes(".")&&!n,this.tooltipFieldContainsDots=Pe(i)&&i.includes(".")&&!n}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:i=>{const n=e.recreateColDef(this.colDef);this.setColDef(n,n,i.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=e.width,n=e.initialWidth;return i!=null?t=i:n!=null?t=n:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);const i=this.frameworkEventListenerService?.wrap(e,t)??t;this.colEventSvc.addEventListener(e,i)}removeEventListener(e,t){const i=this.frameworkEventListenerService?.unwrap(e,t)??t;this.colEventSvc.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return $e(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable({rowNode:e,column:this})??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??sye[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}createColumnEvent(e,t){return $e(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return ki(this.sort)}isSorting(){return Pe(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){return Se(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const i=e===!0;this.visible!==i&&(this.visible=i,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e?.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e?.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return $e(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(ki(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(ki(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(e,t,i){const n=this.createColumnEvent(e,t);i&&Ys(n,i),this.colEventSvc.dispatchEvent(n)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function Ds(e){return e instanceof lx}var lx=class extends he{constructor(e,t,i,n){super(),this.colGroupDef=e,this.groupId=t,this.padding=i,this.level=n,this.isColumn=!1,this.expandable=!1,this.instanceId=n6(),this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)Fu(t)?e(t):Ds(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(const t of this.children)Fu(t)?e.push(t):Ds(t)&&t.addLeafColumns(e)}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);for(const t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(const t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const n=this.findChildrenRemovingPadding();for(let o=0,r=n.length;o<r;o++){const a=n[o];if(!a.isVisible())continue;const l=a.getColumnGroupShow();l==="open"?(e=!0,i=!0):l==="closed"?(t=!0,i=!0):(e=!0,t=!0)}const s=e&&t&&i;this.expandable!==s&&(this.expandable=s,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{for(const n of i)Ds(n)&&n.isPadding()?t(n.children):e.push(n)};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},rye={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function pz(e,t,i){const n={},s=e.gos;return Object.assign(n,s.get("defaultColGroupDef")),Object.assign(n,t),s.validateColDef(n,i),n}var aye=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=ck(e);let i=0;for(;;){let n=e??t;if(n?i!==0&&(n+="_"+i):n=i,!this.existingKeys[n]){const s=String(n);return e&&i>0&&Se(273,{providedId:e,usedId:s}),this.existingKeys[s]=!0,s}i++}}};function fi(e){if(e?.length)return e[e.length-1]}function Ju(e,t,i){if(e===t)return!0;if(!e||!t)return e==null&&t==null;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s]&&!i?.(e[s],t[s]))return!1;return!0}function my(e,t){if(e)for(const i of e)t(i)}function ea(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function gz(e,t,i){for(let n=0;n<t.length;n++)ea(e,t[n]);for(let n=t.length-1;n>=0;n--)e.splice(i,0,t[n])}var ED="ag-Grid-AutoColumn",s6="ag-Grid-SelectionColumn",o6="ag-Grid-RowNumbersColumn";function r6(e){const t=[],i=n=>{for(let s=0;s<n.length;s++){const o=n[s];Fu(o)?t.push(o):Ds(o)&&i(o.getChildren())}};return i(e),t}function Ol(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}function w0(e,t,i){const n={};if(!t)return;ec(null,t,o=>{n[o.getInstanceId()]=o}),i&&ec(null,i,o=>{n[o.getInstanceId()]=null});const s=Object.values(n).filter(o=>o!=null);e.context.destroyBeans(s)}function YP(e){return e.getId().startsWith(ED)}function Ec(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(s6)??!1}function Jl(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(o6)??!1}function lye(e){return Ec(e)||Jl(e)}function S0(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function cye(e,t){return Ju(e,t,(i,n)=>i.getColId()===n.getColId())}function uye(e){e.map={};for(const t of e.list)e.map[t.getId()]=t}function zg(e){return e==="optionsUpdated"?"gridOptionsChanged":e}function Qy(e,t){const i=e===t,n=e.getColDef()===t,s=e.getColId()==t;return i||n||s}var dye=(e,t)=>(i,n)=>{const s={value1:void 0,value2:void 0};let o=!1;return e&&(e[i]!==void 0&&(s.value1=e[i],o=!0),Pe(n)&&e[n]!==void 0&&(s.value2=e[n],o=!0)),!o&&t&&(t[i]!==void 0&&(s.value1=t[i]),Pe(n)&&t[n]!==void 0&&(s.value2=t[n])),s},hye=(e,t)=>{Ds(e)&&e.setupExpandable(),e.originalParent=t};function pye(e,t=null,i,n,s){const o=new aye,{existingCols:r,existingGroups:a,existingColKeys:l}=gye(n);o.addExistingKeys(l);const c=a6(e,t,0,i,r,o,a,s),{colGroupSvc:d}=e,p=d?.findMaxDepth(c,0)??0,g=d?d.balanceColumnTree(c,0,p,o):c;return ec(null,g,hye),{columnTree:g,treeDepth:p}}function gye(e){const t=[],i=[],n=[];return e&&ec(null,e,s=>{if(Ds(s)){const o=s;i.push(o)}else{const o=s;n.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:i,existingColKeys:n}}function a6(e,t,i,n,s,o,r,a){if(!t)return[];const{colGroupSvc:l}=e,c=new Array(t.length);for(let d=0;d<c.length;d++){const p=t[d];l&&Cye(p)?c[d]=l.createProvidedColumnGroup(n,p,i,s,o,r,a):c[d]=fye(e,n,p,s,o,a)}return c}function fye(e,t,i,n,s,o){const r=yye(i,n);r&&n?.splice(r.idx,1);let a=r?.column;if(a){const l=yk(e,i,a.getColId());a.setColDef(l,i,o),mye(e,a,l,o)}else{const l=s.getUniqueKey(i.colId,i.field),c=yk(e,i,l);a=new ip(c,i,l,t),e.context.createBean(a)}return e.dataTypeSvc?.addColumnListeners(a),a}function l6(e,t,i,n,s,o,r,a){const{sortSvc:l,pinnedCols:c,colFlex:d}=e;i!==void 0&&t.setVisible(!i,a),l&&(l.updateColSort(t,n,a),s!==void 0&&l.setColSortIndex(t,s)),o!==void 0&&c?.setColPinned(t,o),r!==void 0&&d?.setColFlex(t,r)}function mye(e,t,i,n){l6(e,t,i.hide,i.sort,i.sortIndex,i.pinned,i.flex,n);const s=t.getFlex();if(!(s!=null&&s>0))if(i.width!=null)t.setActualWidth(i.width,n);else{const o=t.getActualWidth();t.setActualWidth(o,n)}}function yye(e,t){if(t)for(let i=0;i<t.length;i++){const n=t[i].getUserProvidedColDef();if(!n)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(n.field===e.field)return{idx:i,column:t[i]};continue}if(n===e)return{idx:i,column:t[i]}}}function yk(e,t,i,n){const{gos:s,dataTypeSvc:o}=e,r={},a=s.get("defaultColDef");Ys(r,a,!1,!0);const l=vye(e,r,t,i);l&&bye(e,l,r);const c=r.cellDataType;Ys(r,t,!1,!0),c!==void 0&&(r.cellDataType=c);const d=s.get("autoGroupColumnDef"),p=Ta(s);return t.rowGroup&&d&&p&&Ys(r,{sort:d.sort,initialSort:d.initialSort},!1,!0),o&&(o.postProcess(r),o.validateColDef(r)),s.validateColDef(r,i,n),r}function vye(e,t,i,n){const s=e.dataTypeSvc?.updateColDefAndGetColumnType(t,i,n),o=i.type??s??t.type;return t.type=o,o?S0(o):void 0}function bye(e,t,i){if(!t.length)return;const n=Object.assign({},rye),s=e.gos.get("columnTypes")||{};for(const o of Object.keys(s)){const r=s[o];o in n?Se(34,{key:o}):(r.type&&Se(35),n[o]=r)}for(const o of t){const r=n[o.trim()];r?Ys(i,r,!1,!0):Se(36,{t:o})}}function Cye(e){return e.children!==void 0}function ec(e,t,i){if(t)for(let n=0;n<t.length;n++){const s=t[n];Ds(s)&&ec(s,s.getChildren(),i),i(s,e)}}function c6(e,t){const i=[],n=[],s=[];return e.forEach(r=>{const a=r.getColDef().lockPosition;a==="right"?s.push(r):a==="left"||a===!0?i.push(r):n.push(r)}),t.get("enableRtl")?[...s,...n,...i]:[...i,...n,...s]}function u6(e,t){let i=!0;return ec(null,t,n=>{if(!Ds(n))return;const s=n;if(!s.getColGroupDef()?.marryChildren)return;const a=[];for(const g of s.getLeafColumns()){const m=e.indexOf(g);a.push(m)}const l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),d=l-c,p=s.getLeafColumns().length-1;d>p&&(i=!1)}),i}function d6(e,t){if(!e||e.length==0)return;const i=t(e[0]);for(let n=1;n<e.length;n++)if(i!==t(e[n]))return;return i}function h6(e,t,i){if(!t.length)return;const n=t.length===1?t[0]:null,s=d6(t,o=>o.getPinned());e.dispatchEvent({type:"columnPinned",pinned:s??null,columns:t,column:n,source:i})}function wye(e,t,i){if(!t.length)return;const n=t.length===1?t[0]:null,s=d6(t,o=>o.isVisible());e.dispatchEvent({type:"columnVisible",visible:s,columns:t,column:n,source:i})}function Sye(e,t,i,n){e.dispatchEvent({type:t,columns:i,column:i&&i.length==1?i[0]:null,source:n})}function Mf(e,t,i,n,s=null){t?.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:s,finished:i,source:n})}function Yr(e,t,i){const{colModel:n,rowGroupColsSvc:s,pivotColsSvc:o,autoColSvc:r,selectionColSvc:a,colAnimation:l,visibleCols:c,pivotResultCols:d,environment:p,valueColsSvc:g,eventSvc:m,gos:y}=e,b=n.getColDefCols()??[],C=a?.getColumns();if(!b.length&&!C?.length)return!1;if(t?.state&&!t.state.forEach)return Se(32),!1;const w=(I,N,T,P,O)=>{if(!I)return;const G=dye(N,t.defaultState),B=G("flex").value1;if(l6(e,I,G("hide").value1,G("sort").value1,G("sortIndex").value1,G("pinned").value1,B,i),B==null){const z=G("width").value1;if(z!=null){const j=I.getColDef().minWidth??p.getDefaultColumnMinWidth();j!=null&&z>=j&&I.setActualWidth(z,i)}}O||!I.isPrimary()||(g?.syncColumnWithState(I,i,G),s?.syncColumnWithState(I,i,G,T),o?.syncColumnWithState(I,i,G,P))},x=(I,N,T)=>{const P=p6(e,i),O=N.slice(),G={},B={},z=[],j=[],X=[];let q=0;const H=s?.columns.slice()??[],K=o?.columns.slice()??[];for(const te of I){const V=te.colId;if(V.startsWith(ED)){z.push(te),X.push(te);continue}if(Ec(V)){j.push(te),X.push(te);continue}const ee=T(V);ee?(w(ee,te,G,B,!1),ea(O,ee)):(X.push(te),q+=1)}const U=te=>w(te,null,G,B,!1);O.forEach(U),s?.sortColumns(fz.bind(s,G,H)),o?.sortColumns(fz.bind(o,B,K)),n.refreshCols(!1,i);const de=(te,V,W=[])=>{for(const ee of V){const pe=te(ee.colId);ea(W,pe),w(pe,ee,null,null,!0)}W.forEach(U)};return de(te=>r?.getColumn(te)??null,z,r?.getColumns()?.slice()),de(te=>a?.getColumn(te)??null,j,a?.getColumns()?.slice()),Mye(t,n,y),c.refresh(i),m.dispatchEvent({type:"columnEverythingChanged",source:i}),P(),{unmatchedAndAutoStates:X,unmatchedCount:q}};l?.start();let{unmatchedAndAutoStates:M,unmatchedCount:E}=x(t.state||[],b,I=>n.getColDefCol(I));if(M.length>0||Pe(t.defaultState)){const I=d?.getPivotResultCols()?.list??[];E=x(M,I,N=>d?.getPivotResultCol(N)??null).unmatchedCount}return l?.finish(),E===0}function xye(e,t){const{colModel:i,autoColSvc:n,selectionColSvc:s,eventSvc:o,gos:r}=e,a=i.getColDefCols();if(!a?.length)return;const l=i.getColDefColTree(),c=r6(l),d=[];let p=1e3,g=1e3;const m=x=>{const M=g6(x);ki(M.rowGroupIndex)&&M.rowGroup&&(M.rowGroupIndex=p++),ki(M.pivotIndex)&&M.pivot&&(M.pivotIndex=g++),d.push(M)};n?.getColumns()?.forEach(m),s?.getColumns()?.forEach(m),c?.forEach(m),Yr(e,{state:d},t);const y=n?.getColumns()??[],w=[...s?.getColumns()??[],...y,...a].map(x=>({colId:x.colId}));Yr(e,{state:w,applyOrder:!0},t),o.dispatchEvent($e(r,{type:"columnsReset",source:t}))}function p6(e,t){const{rowGroupColsSvc:i,pivotColsSvc:n,valueColsSvc:s,colModel:o,sortSvc:r,eventSvc:a}=e,l={rowGroupColumns:i?.columns.slice()??[],pivotColumns:n?.columns.slice()??[],valueColumns:s?.columns.slice()??[]},c=x0(e),d={};for(const p of c)d[p.colId]=p;return()=>{const p=(N,T,P,O)=>{const G=T.map(O),B=P.map(O);if(Ju(G,B))return;const j=new Set(T);for(const q of P)j.delete(q)||j.add(q);const X=[...j];a.dispatchEvent({type:N,columns:X,column:X.length===1?X[0]:null,source:t})},g=N=>{const T=[];return o.forAllCols(P=>{const O=d[P.getColId()];O&&N(O,P)&&T.push(P)}),T},m=N=>N.getColId();p("columnRowGroupChanged",l.rowGroupColumns,i?.columns??[],m),p("columnPivotChanged",l.pivotColumns,n?.columns??[],m);const b=g((N,T)=>{const P=N.aggFunc!=null,O=P!=T.isValueActive(),G=P&&N.aggFunc!=T.getAggFunc();return O||G});b.length>0&&Sye(a,"columnValueChanged",b,t),Mf(a,g((N,T)=>N.width!=T.getActualWidth()),!0,t),h6(a,g((N,T)=>N.pinned!=T.getPinned()),t),wye(a,g((N,T)=>N.hide==T.isVisible()),t);const E=g((N,T)=>N.sort!=T.getSort()||N.sortIndex!=T.getSortIndex());E.length>0&&r?.dispatchSortChangedEvents(t,E);const I=x0(e);Aye(c,I,t,o,a)}}function x0(e){const{colModel:t,rowGroupColsSvc:i,pivotColsSvc:n}=e,s=t.getColDefCols();if(ki(s)||!t.isAlive())return[];const o=i?.columns,r=n?.columns,a=[],l=d=>{const p=d.isRowGroupActive()&&o?o.indexOf(d):null,g=d.isPivotActive()&&r?r.indexOf(d):null,m=d.isValueActive()?d.getAggFunc():null,y=d.getSort()!=null?d.getSort():null,b=d.getSortIndex()!=null?d.getSortIndex():null;a.push({colId:d.getColId(),width:d.getActualWidth(),hide:!d.isVisible(),pinned:d.getPinned(),sort:y,sortIndex:b,aggFunc:m,rowGroup:d.isRowGroupActive(),rowGroupIndex:p,pivot:d.isPivotActive(),pivotIndex:g,flex:d.getFlex()??null})};t.forAllCols(d=>l(d));const c=new Map(t.getCols().map((d,p)=>[d.getColId(),p]));return a.sort((d,p)=>{const g=c.has(d.colId)?c.get(d.colId):-1,m=c.has(p.colId)?c.get(p.colId):-1;return g-m}),a}function g6(e){const t=(y,b)=>y??b??null,i=e.getColDef(),n=t(i.sort,i.initialSort),s=t(i.sortIndex,i.initialSortIndex),o=t(i.hide,i.initialHide),r=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let c=t(i.rowGroupIndex,i.initialRowGroupIndex),d=t(i.rowGroup,i.initialRowGroup);c==null&&!d&&(c=null,d=null);let p=t(i.pivotIndex,i.initialPivotIndex),g=t(i.pivot,i.initialPivot);p==null&&!g&&(p=null,g=null);const m=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:s,hide:o,pinned:r,width:a,flex:l,rowGroup:d,rowGroupIndex:c,pivot:g,pivotIndex:p,aggFunc:m}}function Mye(e,t,i){if(!e.applyOrder||!e.state)return;const n=[];for(const s of e.state)s.colId!=null&&n.push(s.colId);Dye(t.cols,n,t,i)}function Dye(e,t,i,n){if(e==null)return;let s=[];const o={};for(const a of t){if(o[a])continue;const l=e.map[a];l&&(s.push(l),o[a]=!0)}let r=0;for(const a of e.list){const l=a.getColId();if(o[l]!=null)continue;l.startsWith(ED)?s.splice(r++,0,a):s.push(a)}if(s=c6(s,n),!u6(s,i.getColTree())){Se(39);return}e.list=s}function Aye(e,t,i,n,s){const o={};for(const d of t)o[d.colId]=d;const r={};for(const d of e)o[d.colId]&&(r[d.colId]=!0);const a=e.filter(d=>r[d.colId]),l=t.filter(d=>r[d.colId]),c=[];l.forEach((d,p)=>{const g=a?.[p];if(g&&g.colId!==d.colId){const m=n.getCol(g.colId);m&&c.push(m)}}),c.length&&s.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,finished:!0,source:i})}var fz=(e,t,i,n)=>{const s=e[i.getId()],o=e[n.getId()],r=s!=null,a=o!=null;if(r&&a)return s-o;if(r)return-1;if(a)return 1;const l=t.indexOf(i),c=t.indexOf(n),d=l>=0,p=c>=0;return d&&p?l-c:d?-1:1},Rye=class extends he{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(zg(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),zg(e.source)))}createColsFromColDefs(e){const{beans:t}=this,{valueCache:i,colAutosize:n,rowGroupColsSvc:s,pivotColsSvc:o,valueColsSvc:r,visibleCols:a,eventSvc:l,groupHierarchyColSvc:c}=t,d=this.colDefs?p6(t,e):void 0;i?.expire();const p=this.colDefCols?.list,g=this.colDefCols?.tree,m=pye(t,this.colDefs,!0,g,e);w0(t,this.colDefCols?.tree,m.columnTree);const y=m.columnTree,b=m.treeDepth,C=r6(y),w={};for(const x of C)w[x.getId()]=x;this.colDefCols={tree:y,treeDepth:b,list:C,map:w},this.createColumnsForService([c],this.colDefCols,e),s?.extractCols(e,p),o?.extractCols(e,p),r?.extractCols(e,p),this.ready=!0,this.refreshCols(!0,e),a.refresh(e),l.dispatchEvent({type:"columnEverythingChanged",source:e}),d&&(this.changeEventsDispatching=!0,d(),this.changeEventsDispatching=!1),l.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&n?.applyAutosizeStrategy()}refreshCols(e,t){if(!this.colDefCols)return;const i=this.cols?.tree;this.saveColOrder();const{autoColSvc:n,selectionColSvc:s,rowNumbersSvc:o,quickFilter:r,pivotResultCols:a,showRowGroupCols:l,rowAutoHeight:c,visibleCols:d,colViewport:p,eventSvc:g}=this.beans,m=this.selectCols(a,this.colDefCols);this.createColumnsForService([n,s,o],m,t);const y=Wme(this.gos,this.showingPivotResult);(!e||y)&&this.restoreColOrder(m),this.positionLockedCols(m),l?.refresh(),r?.refreshCols(),this.setColSpanActive(),c?.setAutoHeightActive(m),d.clear(),p.clear(),!Ju(i,this.cols.tree)&&g.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,i){for(const n of e)n&&(n.createColumns(t,s=>{this.lastOrder=s(this.lastOrder),this.lastPivotOrder=s(this.lastPivotOrder)},i),n.addColumns(t))}selectCols(e,t){const i=e?.getPivotResultCols()??null;this.showingPivotResult=i!=null;const{map:n,list:s,tree:o,treeDepth:r}=i??t;return this.cols={list:s.slice(),map:{...n},tree:o.slice(),treeDepth:r},i&&(i.list.some(l=>this.cols?.map[l.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];const{valueColsSvc:e,selectionColSvc:t,gos:i}=this.beans,n=this.isPivotMode()&&!this.showingPivotResult,s=t?.isSelectionColumnEnabled(),o=i.get("rowNumbers"),r=e?.columns;return this.cols.list.filter(l=>{const c=YP(l);if(n){const d=r?.includes(l);return c||d||s&&Ec(l)||o&&Jl(l)}else return c||l.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,i){Yr(this.beans,{state:e.map(n=>({colId:typeof n=="string"?n:n.getColId(),hide:!t}))},i)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const i=t.filter(p=>e.map[p.getId()]!=null);if(i.length===0)return;if(i.length===e.list.length){e.list=i;return}const n=p=>{const g=p.getOriginalParent();return g?g.getChildren().length>1?!0:n(g):!1};if(!i.some(p=>n(p))){const p=new Set(i);for(const g of e.list)p.has(g)||i.push(g);e.list=i;return}const s=new Map;for(let p=0;p<i.length;p++){const g=i[p];s.set(g,p)}const o=e.list.filter(p=>!s.has(p));if(o.length===0){e.list=i;return}const r=(p,g)=>{const m=g?g.getOriginalParent():p.getOriginalParent();if(!m)return null;let y=null,b=null;for(const C of m.getChildren())if(!(C===g||C===p)){if(C instanceof ip){const w=s.get(C);if(w==null)continue;(y==null||y<w)&&(y=w,b=C);continue}C.forEachLeafColumn(w=>{const x=s.get(w);x!=null&&(y==null||y<x)&&(y=x,b=w)})}return b??r(p,m)},a=[],l=new Map;for(const p of o){const g=r(p,null);if(g==null){a.push(p);continue}const m=l.get(g);m===void 0?l.set(g,p):Array.isArray(m)?m.push(p):l.set(g,[m,p])}const c=new Array(e.list.length);let d=c.length-1;for(let p=a.length-1;p>=0;p--)c[d--]=a[p];for(let p=i.length-1;p>=0;p--){const g=i[p],m=l.get(g);if(m)if(Array.isArray(m))for(let y=m.length-1;y>=0;y--){const b=m[y];c[d--]=b}else c[d--]=m;c[d--]=g}e.list=c}positionLockedCols(e){e.list=c6(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(e){return this.colDefCols&&this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[],e)}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(e=>e.getColDef().colSpan!=null)}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1,t);const{visibleCols:i,eventSvc:n}=this.beans;i.refresh(t),n.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){const e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);const t=zg(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){w0(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(e){const{pivotResultCols:t,autoColSvc:i,selectionColSvc:n,groupHierarchyColSvc:s}=this.beans;my(this.colDefCols?.list,e),my(i?.columns?.list,e),my(n?.columns?.list,e),my(s?.columns?.list,e),my(t?.getPivotResultCols()?.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){return this.cols?.map[e]??null}getColFromCollection(e,t){if(t==null)return null;const{map:i,list:n}=t;if(typeof e=="string"&&i[e])return i[e];for(let a=0;a<n.length;a++)if(Qy(n[a],e))return n[a];const{autoColSvc:s,selectionColSvc:o,groupHierarchyColSvc:r}=this.beans;return s?.getColumn(e)??o?.getColumn(e)??r?.getColumn(e)??null}},f6=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}},sm=class extends he{};function uC(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),i??e}var je=null;function mz(e){return typeof e?.getGui=="function"}var dC=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(!e)return;if(e.indexOf(" ")>=0){const n=(e||"").split(" ");if(n.length>1){for(const s of n)this.toggleCss(s,t);return}}this.cssClassStates[e]!==t&&e.length&&(this.getGui()?.classList.toggle(e,t),this.cssClassStates[e]=t)}},Eye=0,hC=class extends ll{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=Eye++,this.cssManager=new dC(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(i=>[i.selector,i])),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui());const e="component-"+Object.getPrototypeOf(this)?.constructor?.name;for(const t of this.css??[])this.beans.environment.addGlobalCSS(t,e)}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(PY):null}applyElementsToComponent(e,t,i,n=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){const s=this[t];if(s===je)this[t]=n??e;else{const o=i?.[t];if(!this.suppressDataRefValidation&&!o)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${s}`)}}}createChildComponentsFromTags(e,t){const i=[];for(const n of e.childNodes??[])i.push(n);for(const n of i){if(!(n instanceof HTMLElement))continue;const s=this.createComponentFromElement(n,o=>{const r=o.getGui();if(r)for(const a of n.attributes??[])r.setAttribute(a.name,a.value)},t);if(s){if(s.addItems&&n.children.length){this.createChildComponentsFromTags(n,t);const o=Array.prototype.slice.call(n.children);s.addItems(o)}this.swapComponentForNode(s,e,n)}else n.childNodes&&this.createChildComponentsFromTags(n,t)}}createComponentFromElement(e,t,i){const n=e.nodeName,s=this.getDataRefAttribute(e),o=n.indexOf("AG-")===0,r=o?this.componentSelectors.get(n):null;let a=null;if(r){const l=i&&s?i[s]:void 0;a=new r.component(l),a.setParentComponent(this),this.createBean(a,null,t)}else if(o)throw new Error(`selector: ${n}`);return this.applyElementsToComponent(e,s,i,a),a}swapComponentForNode(e,t,i){const n=e.getGui();t.replaceChild(n,i),t.insertBefore(document.createComment(i.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui());for(const i of e)i.setAttribute("tabindex",t.toString())}setTemplate(e,t,i){let n;typeof e=="string"||e==null?n=BP(e):n=cC(e),this.setTemplateFromElement(n,t,i)}setTemplateFromElement(e,t,i,n=!1){if(this.eGui=e,this.suppressDataRefValidation=n,t)for(let s=0;s<t.length;s++){const o=t[s];this.componentSelectors.set(o.selector,o)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return e==null?null:(i||(i=this.eGui),VP(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};!i||!n||n.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};!i||!n||n.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;cme(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;_i(this.eGui,e,{skipAriaHidden:i});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},qi=class extends hC{};function m6(e){return typeof e=="object"&&!!e.component}function Tye(e,t){return new Nt(i=>{i(window.setInterval(e,t))})}var Nt=class Ly{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return t.length?new Ly(i=>{let n=t.length;const s=new Array(n);t.forEach((o,r)=>{o.then(a=>{s[r]=a,n--,n===0&&i(s)})})}):Ly.resolve()}static resolve(t=null){return new Ly(i=>i(t))}then(t){return new Ly(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(n=>i(t(n)))})}onDone(t){this.status=1,this.resolution=t;for(const i of this.waiters)i(t)}onReject(t){}};function Iye(e){return e?e.prototype&&"getGui"in e.prototype:!1}function y6(e,t,i,n){const{name:s}=i;let o,r,a,l,c,d;if(t){const p=t,g=p[s+"Selector"],m=g?g(n):null,y=b=>{typeof b=="string"?o=b:b!=null&&b!==!0&&(e.isFrameworkComponent(b)?a=b:r=b)};m?(y(m.component),l=m.params,c=m.popup,d=m.popupPosition):y(p[s])}return{compName:o,jsComp:r,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:d}}var kye=class extends he{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,i,n=!1){return this.getCompDetails(this.gridOptions,e,t,i,n)}getCompDetails(e,t,i,n,s=!1){const{name:o,cellRenderer:r}=t;let{compName:a,jsComp:l,fwComp:c,paramsFromSelector:d,popupFromSelector:p,popupPositionFromSelector:g}=y6(this.beans.frameworkOverrides,e,t,n),m,y;const b=M=>{const E=this.registry.getUserComponent(o,M);E&&(l=E.componentFromFramework?void 0:E.component,c=E.componentFromFramework?E.component:void 0,m=E.params,y=E.processParams)};if(a!=null&&b(a),l==null&&c==null&&i!=null&&b(i),l&&r&&!Iye(l)&&(l=this.agCompUtils?.adaptFunction(t,l)),!l&&!c){const{validation:M}=this.beans;s&&(a!==i||!i)?a?M?.isProvidedUserComp(a)||oi(50,{compName:a}):i?M||oi(260,{...this.gos.getModuleErrorParams(),propName:o,compName:i}):oi(216,{name:o}):i&&!M&&oi(146,{comp:i});return}const C=this.mergeParams(e,t,n,d,m,y),w=l==null,x=l??c;return{componentFromFramework:w,componentClass:x,params:C,type:t,popupFromSelector:p,popupPositionFromSelector:g,newAgStackInstance:()=>this.newAgStackInstance(x,w,C,t)}}newAgStackInstance(e,t,i,n){const s=!t;let o;s?o=new e:o=this.frameworkCompWrapper.wrap(e,n.mandatoryMethods,n.optionalMethods,n),this.createBean(o);const r=o.init?.(i);return r==null?Nt.resolve(o):r.then(()=>o)}mergeParams(e,t,i,n=null,s,o){const r={...i,...s},l=e?.[t.name+"Params"];if(typeof l=="function"){const c=l(i);Ys(r,c)}else typeof l=="object"&&Ys(r,l);return Ys(r,n),o?o(r):r}},Lye={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},Pye={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},Nye={name:"headerComponent",optionalMethods:["refresh"]},Fye={name:"innerHeaderComponent"},Oye={name:"innerHeaderGroupComponent"},Bye={name:"headerGroupComponent"},Gye={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},_ye={name:"loadingCellRenderer",cellRenderer:!0},Vye={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},zye={name:"loadingOverlayComponent",optionalMethods:["refresh"]},Hye={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},jye={name:"tooltipComponent"},KP={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},Wye={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},Uye={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},$ye={name:"loadingCellRenderer",cellRenderer:!0},Yye={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},Kye={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function qye(e,t){return e.getCompDetailsFromGridOptions(Pye,"agDragAndDropImage",t,!0)}function Zye(e,t,i){return e.getCompDetails(t,Nye,"agColumnHeader",i)}function Xye(e,t,i){return e.getCompDetails(t,Fye,void 0,i)}function Qye(e,t){const i=t.columnGroup.getColGroupDef();return e.getCompDetails(i,Bye,"agColumnGroupHeader",t)}function Jye(e,t,i){return e.getCompDetails(t,Oye,void 0,i)}function eve(e,t){return e.getCompDetailsFromGridOptions(Uye,void 0,t,!0)}function tve(e,t){return e.getCompDetailsFromGridOptions($ye,"agLoadingCellRenderer",t,!0)}function ive(e,t){return e.getCompDetailsFromGridOptions(Yye,"agGroupRowRenderer",t,!0)}function nve(e,t){return e.getCompDetailsFromGridOptions(Kye,"agDetailCellRenderer",t,!0)}function yz(e,t,i){return e.getCompDetails(t,Gye,void 0,i)}function vz(e,t,i){return e.getCompDetails(t,_ye,"agSkeletonCellRenderer",i,!0)}function v6(e,t,i){return e.getCompDetails(t,Vye,"agCellEditor",i,!0)}function sve(e,t,i,n){const s=t.filter;return m6(s)&&(t={filter:s.component,filterParams:t.filterParams}),e.getCompDetails(t,KP,n,i,!0)}function ove(e,t,i){return e.getCompDetails(t,Lye,"agDateInput",i,!0)}function rve(e,t){return e.getCompDetailsFromGridOptions(zye,"agLoadingOverlay",t,!0)}function ave(e,t){return e.getCompDetailsFromGridOptions(Hye,"agNoRowsOverlay",t,!0)}function lve(e,t){return e.getCompDetails(t.colDef,jye,"agTooltipComponent",t,!0)}function cve(e,t,i,n){return e.getCompDetails(t,Wye,n,i)}function b6(e,t){return y6(e,t,KP)}function vT(e,t,i){return e.mergeParams(t,KP,i)}function $v(e){const t=e;return t?.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}function uve(e){return typeof e=="object"&&!!e.getComp}var oe={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},qP=class extends hC{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e?.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},bT,CT,wT,ST,vk,bk,xT;function ed(){return bT===void 0&&(bT=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),bT}function C6(){return CT===void 0&&(CT=/(firefox)/i.test(navigator.userAgent)),CT}function w6(){return wT===void 0&&(wT=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),wT}function dh(){return ST===void 0&&(ST=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),ST}function Ck(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!C6())?null:t.toString()}function dve(){if(xT!==void 0)return xT;if(!document.body)return-1;let e=1e6;const t=C6()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const n=e*2;if(i.style.height=n+"px",n>t||i.clientHeight!==n)break;e=n}return i.remove(),xT=e,e}function hve(){return bk==null&&S6(),bk}function S6(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.remove(),i!=null&&(bk=i,vk=i===0)}function x6(){return vk==null&&S6(),vk}var ZP="T",pve=new RegExp(`[${ZP} ]`),gve=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${ZP}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function Ia(e,t){return e.toString().padStart(t,"0")}function zo(e,t=!0,i=ZP){if(!e)return null;let n=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(s=>Ia(s,2)).join("-");return t&&(n+=i+[e.getHours(),e.getMinutes(),e.getSeconds()].map(s=>Ia(s,2)).join(":")),n}function lS(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),Ia(e.getDate(),2),Ia(e.getHours(),2),`:${Ia(e.getMinutes(),2)}`,`:${Ia(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,Ia(e.getDate(),2)].map(String):null}var MT=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},bz=["January","February","March","April","May","June","July","August","September","October","November","December"],DT=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function wk(e,t){if(t==null)return zo(e,!1);const i=Ia(e.getFullYear(),4),n={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>bz[e.getMonth()],MMM:()=>bz[e.getMonth()].slice(0,3),MM:()=>Ia(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${MT(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${MT(e.getDate())}`,DD:()=>Ia(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>DT[e.getDay()],ddd:()=>DT[e.getDay()].slice(0,3),dd:()=>DT[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${MT(e.getDay())}`,d:()=>`${e.getDay()}`},s=new RegExp(Object.keys(n).join("|"),"g");return t.replace(s,o=>o in n?n[o]():o)}function cx(e,t=!1){return!!Co(e,t)}function fve(e){return cx(e,!0)}function Co(e,t=!1,i){if(!e||!i&&!gve.test(e))return null;const[n,s]=e.split(pve);if(!n)return null;const o=n.split("-").map(m=>Number.parseInt(m,10));if(o.filter(m=>!isNaN(m)).length!==3)return null;const[r,a,l]=o,c=new Date(r,a-1,l);if(c.getFullYear()!==r||c.getMonth()!==a-1||c.getDate()!==l||!s&&t)return null;if(!s||s==="00:00:00")return c;const[d,p,g]=s.split(":").map(m=>Number.parseInt(m,10));if(d>=0&&d<24)c.setHours(d);else if(t)return null;if(p>=0&&p<60)c.setMinutes(p);else if(t)return null;if(g>=0&&g<60)c.setSeconds(g);else if(t)return null;return c}function Sk(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:n,filterByPercentageOfBestMatch:s}=e;let o=(i??[]).map((l,c)=>({value:l,relevance:mve(t,l),idx:c}));if(o.sort((l,c)=>l.relevance-c.relevance),n&&(o=o.filter(l=>l.relevance<Math.max(l.value.length,t.length))),o.length>0&&s&&s>0){const c=o[0].relevance*s;o=o.filter(d=>c-d.relevance<0)}const r=[],a=[];for(const l of o)r.push(l.value),a.push(l.idx);return{values:r,indices:a}}function mve(e,t){e.length<t.length&&([e,t]=[t,e]);let i=[],n=[];const s=e.length,o=t.length;for(let a=0;a<=o;a++)i[a]=a;let r=0;for(let a=1;a<=s;a++){n[0]=a;for(let l=1;l<=o;l++){const c=e[a-1],d=t[l-1];if(c.toLocaleLowerCase()===d.toLocaleLowerCase())++r,c===d&&++r,a>1&&l>1&&e[a-2].toLocaleLowerCase()===t[l-2].toLocaleLowerCase()&&(++r,e[a-2]===t[l-2]&&++r),a<s/2-10&&++r,n[l]=i[l-1];else{const p=n[l-1],g=i[l],m=i[l-1];n[l]=1+Math.min(p,g,m)}}[i,n]=[n,i]}return i[o]/(r+1)}function M6(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}var xk=!1,M0=0;function yve(e){M0>0||(e.addEventListener("keydown",D0),e.addEventListener("mousedown",D0))}function vve(e){M0>0||(e.removeEventListener("keydown",D0),e.removeEventListener("mousedown",D0))}function D0(e){const t=xk,i=e.type==="keydown";i&&(e.ctrlKey||e.metaKey||e.altKey)||t!==i&&(xk=i)}function bve(e){const t=Kn(e);return yve(t),M0++,()=>{M0--,vve(t)}}function Cve(){return xk}function Hg(e,t,i=!1){const n=lme;let s=EY;t&&(s+=", "+t),i&&(s+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll(n)).filter(l=>Dc(l)),r=Array.prototype.slice.apply(e.querySelectorAll(s));return r.length?((l,c)=>l.filter(d=>c.indexOf(d)===-1))(o,r):o}function Th(e,t=!1,i=!1,n=!1){const s=Hg(e,n?".ag-tab-guard":null,i),o=t?fi(s):s[0];return o?(o.focus({preventScroll:!0}),!0):!1}function np(e,t,i,n){const s=Hg(t,i?':not([tabindex="-1"])':null),o=$i(e);let r;i?r=s.findIndex(l=>l.contains(o)):r=s.indexOf(o);const a=r+(n?-1:1);return a<0||a>=s.length?null:s[a]}function D6(e,t=5){let i=0;for(;e&&Ck(e)===null&&++i<=t;)e=e.parentElement;return Ck(e)===null?null:e}var wve=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",Sve=class extends hC{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(wve)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:n,disabled:s}=this.config;s!=null&&this.setDisabled(s),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;bo(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(_i(t,!1),Ah(t,"presentation")):(_i(t,!0),Ah(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(g0(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return zv(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},A6=class extends Sve{constructor(e,t,i,n){super(e,t,i),this.className=n}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),i!=null&&this.onValueChange(i),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();i==null||i==""||Yfe(e)!==null?Vv(e,""):Vv(e,t??"")}setAriaLabel(e){return Sf(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return ja(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function xve(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var Kd=class extends A6{constructor(e,t,i="text",n="input"){super(e,e?.template??xve(n),[],t),this.inputType=i,this.displayFieldTag=n,this.eLabel=je,this.eWrapper=je,this.eInput=je}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:i,className:n}=this;e.classList.add(`${n}-label`),t.classList.add(`${n}-input-wrapper`),i.classList.add(`${n}-input`),this.addCss("ag-input-field"),i.id=i.id||`ag-${this.getCompId()}-input`;const{inputName:s,inputWidth:o}=this.config;s!=null&&this.setInputName(s),o!=null&&this.setInputWidth(o),this.addInputListeners(),this.activateTabIndex([i])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag==="input"&&(this.inputType=e,Oo(this.eInput,"type",e))}getInputElement(){return this.eInput}setInputWidth(e){return g0(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Oo(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Sf(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return zv(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Oo(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";Oo(this.eInput,"autocomplete",t)}return this}},XP=class extends Kd{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;const i=this.eInput;i.checked=e,i.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const n=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:n.id,name:n.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},QP={selector:"AG-CHECKBOX",component:XP},Mve=class extends XP{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},sp=class extends Kd{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const i=this.eInput;return i.value!==e&&(i.value=Pe(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{M6(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:i=>{i.clipboardData?.getData("text")?.split("").some(s=>!e.test(s))&&i.preventDefault()}})}},TD={selector:"AG-INPUT-TEXT-FIELD",component:sp},Dve=class extends Kd{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},Ave={selector:"AG-INPUT-TEXT-AREA",component:Dve},JP=class extends sp{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const o=Number.parseFloat(e.value),r=isNaN(o)?"":this.normalizeValue(o.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:i,max:n,step:s}=this.config;typeof t=="number"&&this.setPrecision(t),typeof i=="number"&&this.setMin(i),typeof n=="number"&&this.setMax(n),typeof s=="number"&&this.setStep(s)}onWheel(e){$i(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return e===""?"":(this.precision!=null&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){const i=this.precision;if(i==null)return e;if(t){const s=Number.parseFloat(e).toFixed(i);return Number.parseFloat(s).toString()}const n=String(e).split(".");if(n.length>1){if(n[1].length<=i)return e;if(i>0)return`${n[0]}.${n[1].slice(0,i)}`}return n[0]}setMin(e){return this.min===e?this:(this.min=e,Oo(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Oo(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Oo(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(Pe(i)){let n=this.isScientificNotation(i);if(n&&this.eInput.validity.valid)return e(i);if(!n){i=this.adjustPrecision(i);const s=this.normalizeValue(i);n=i!=s}if(n)return t(i)}return e(i)}getValue(){const e=this.eInput;if(!e.validity.valid)return;const t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},Rve={selector:"AG-INPUT-NUMBER-FIELD",component:JP},Eve=class extends sp{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=ed();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){$i(this.beans)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?zo(e??null,!!this.includeTime)??void 0:e;return this.min===t?this:(this.min=t,Oo(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?zo(e??null,!!this.includeTime)??void 0:e;return this.max===t?this:(this.max=t,Oo(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,Oo(this.eInput,"step",e),this)}setIncludeTime(e){return this.includeTime===e?this:(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1),this)}getDate(){if(this.eInput.validity.valid)return Co(this.getValue())??void 0}setDate(e,t){this.setValue(zo(e??null,this.includeTime),t)}},R6={selector:"AG-INPUT-DATE-FIELD",component:Eve},Tve=".ag-list-item{align-items:center;display:flex;height:var(--ag-list-item-height);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}",Ive="ag-active-item",kve=(e,t)=>({tag:"div",cls:`ag-list-item ag-${e}-list-item`,attrs:{role:"option"},children:[{tag:"span",ref:"eText",children:t}]}),Lve=class extends hC{constructor(e,t,i){super(kve(e,t)),this.label=t,this.value=i,this.eText=je}postConstruct(){this.createTooltip(),this.addEventListeners()}setHighlighted(e){const t=this.getGui();t.classList.toggle(Ive,e),RY(t,e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}getHeight(){return this.getGui().clientHeight}setIndex(e,t){const i=this.getGui();Jfe(i,e),Qfe(i,t)}createTooltip(){const e={getTooltipValue:()=>this.label,getGui:()=>this.getGui(),getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>GP(this.eText)},t=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("highlightTooltipFeature",!1,e,this));t&&(this.tooltipFeature=t)}addEventListeners(){const e=this.getParentComponent();e&&(this.addGuiEventListener("mouseover",()=>{e.highlightItem(this)}),this.addGuiEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation(),e.setValue(this.value)}))}},Pve=class extends hC{constructor(e="default"){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.options=[],this.listItems=[],this.highlightedItem=null,this.registerCSS(Tve)}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()})}handleKeyDown(e){const t=e.key;switch(t){case oe.ENTER:if(!this.highlightedItem)this.setValue(this.getValue());else{const i=this.listItems.indexOf(this.highlightedItem);this.setValueByIndex(i)}break;case oe.DOWN:case oe.UP:e.preventDefault(),this.navigate(t);break;case oe.PAGE_DOWN:case oe.PAGE_UP:case oe.PAGE_HOME:case oe.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){const{value:t,text:i}=e,n=i??t;return this.options.push({value:t,text:n}),this.renderOption(t,n),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0);for(const e of this.listItems)e.destroy();bo(this.getGui()),this.listItems=[],this.refreshAriaRole()}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const i=this.options.findIndex(n=>n.value===e);if(i!==-1){const n=this.options[i];this.value=n.value,this.displayValue=n.text,this.highlightItem(this.listItems[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.listItems[e])}highlightItem(e){const t=e.getGui();if(!Dc(t))return;this.clearHighlighted(),e.setHighlighted(!0),this.highlightedItem=e;const i=this.getGui(),{scrollTop:n,clientHeight:s}=i,{offsetTop:o,offsetHeight:r}=t;(o+r>n+s||o<n)&&t.scrollIntoView({block:"nearest"})}hideItemTooltip(){this.highlightedItem?.tooltipFeature?.attemptToHideTooltip()}destroy(){this.hideItemTooltip(),super.destroy()}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}clearHighlighted(){this.highlightedItem?.setHighlighted(!1),this.highlightedItem=null}renderOption(e,t){const i=new Lve(this.cssIdentifier,t,e);i.setParentComponent(this);const n=this.createManagedBean(i);this.listItems.push(n),this.getGui().appendChild(n.getGui())}navigate(e){const t=e===oe.DOWN;let i;const{listItems:n,highlightedItem:s}=this;if(!s)i=t?n[0]:fi(n);else{let r=n.indexOf(s)+(t?1:-1);r=Math.min(Math.max(r,0),n.length-1),i=n[r]}this.highlightItem(i)}navigateToPage(e){const{listItems:t,highlightedItem:i}=this;if(!i||t.length===0)return;const n=t.indexOf(i),s=this.options.length-1,o=t[0].getHeight(),r=Math.floor(this.getGui().clientHeight/o);let a=-1;e===oe.PAGE_HOME?a=0:e===oe.PAGE_END?a=s:e===oe.PAGE_DOWN?a=Math.min(n+r,s):e===oe.PAGE_UP&&(a=Math.max(n-r,0)),a!==-1&&this.highlightItem(t[a])}refreshAriaRole(){Ah(this.getGui(),this.options.length===0?"presentation":"listbox")}updateIndices(){this.refreshAriaRole();const e=this.listItems,t=e.length;e.forEach((i,n)=>{i.setIndex(n+1,t)})}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},Nve=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}",Fve={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},Ove=class extends A6{constructor(e){if(super(e,e?.template||Fve,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=je,this.eWrapper=je,this.eDisplayField=je,this.eIcon=je,this.registerCSS(Nve),this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:n,minPickerWidth:s,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!n,i!=null&&this.setPickerMaxHeight(i),s!=null&&this.setPickerMinWidth(s),o!=null&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:n}=this.config;if(i){const s=this.beans.iconSvc.createIconNoSpan(i);s&&this.eIcon.appendChild(s)}n!=null&&this.setInputWidth(n)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),uk(e,!1),this.ariaRole&&Ah(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case oe.UP:case oe.DOWN:case oe.ENTER:case oe.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case oe.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:i,pickerAriaLabelValue:n,modalPicker:s=!0},maxPickerHeight:o,minPickerWidth:r,maxPickerWidth:a,variableWidth:l,beans:c,eWrapper:d}=this,p={modal:s,eChild:e,closeOnEsc:!0,closedCallback:()=>{const b=bY(c);this.beforeHidePicker(),b&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,n),anchorToElement:d};e.style.position="absolute";const g=c.popupSvc,m=g.addPopup(p);l?(r&&(e.style.minWidth=r),e.style.width=_P(d0(d)),a&&(e.style.maxWidth=a)):g0(e,a??d0(d));const y=o??`${OP(g.getPopupParent())}px`;return e.style.setProperty("max-height",y),this.alignPickerToComponent(),m.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:i,gos:n},eWrapper:s,pickerComponent:o}=this,r=n.get("enableRtl")?"right":"left";i.positionPopupByComponent({type:t,eventSource:s,ePopup:o.getGui(),position:"under",alignSide:r,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();uk(t,e);const i=this.eWrapper.classList;i.toggle("ag-picker-expanded",e),i.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return g0(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},Bve=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}",eN=class extends Ove{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(Bve)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:nx(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),i&&t==null&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new Pve("select"));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),i=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",i),ame(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:n=>{n?.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}beforeHidePicker(){this.listComponent?.hideItemTooltip(),super.beforeHidePicker()}onKeyDown(e){const{key:t}=e;switch(t===oe.TAB&&this.hidePicker(),t){case oe.ENTER:case oe.UP:case oe.DOWN:case oe.PAGE_UP:case oe.PAGE_DOWN:case oe.PAGE_HOME:case oe.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case oe.ESCAPE:super.onKeyDown(e);break;case oe.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this.setValue(void 0,!0),this}setValue(e,t,i){const{listComponent:n,config:{placeholder:s},eDisplayField:o,tooltipFeature:r}=this;if(this.value===e||!n)return this;if(i||n.setValue(e,!0),n.getValue()===this.getValue())return this;let l=n.getDisplayValue();return l==null&&s&&(l=s),o.textContent=l,r?.setTooltipAndRefresh(l??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},Gve={selector:"AG-SELECT",component:eN},_ve=':where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',tN=typeof window!="object"||!window?.document?.fonts?.forEach,Df=(e,t,i,n,s,o)=>{if(tN)return;n&&(e=`@layer ${CSS.escape(n)} { ${e} }`);let r=jg.map.get(t);if(r||(r=[],jg.map.set(t,r)),r.some(d=>d.css===e))return;const a=document.createElement("style");o&&a.setAttribute("nonce",o),a.dataset.agGlobalCss=i,a.textContent=e;const l={css:e,el:a,priority:s};let c;for(const d of r){if(d.priority>s)break;c=d}if(c){c.el.insertAdjacentElement("afterend",a);const d=r.indexOf(c);r.splice(d+1,0,l)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),r.push(l)},E6=(e,t,i,n)=>{Df(_ve,e,"shared",t,0,i),n?.forEach((s,o)=>s.forEach(r=>Df(r,e,o,t,0,i)))},Vve=e=>{jg.grids.add(e)},zve=e=>{if(jg.grids.delete(e),jg.grids.size===0){jg.map=new WeakMap;for(const t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},Cz,jg=(Cz=typeof window=="object"?window:{}).agStyleInjectionState??(Cz.agStyleInjectionState={map:new WeakMap,grids:new Set}),Xa=e=>new T6(e),hu="$default",Hve=0,T6=class{constructor({feature:e,params:t,modeParams:i={},css:n,cssImports:s}){this.feature=e,this.css=n,this.cssImports=s,this.modeParams={[hu]:{...i[hu]??{},...t??{}},...i}}use(e,t,i){let n=this._inject;if(n==null){let{css:s}=this;if(s){const o=`ag-theme-${this.feature??"part"}-${++Hve}`;typeof s=="function"&&(s=s()),s=`:where(.${o}) {
${s}
}
`;for(const r of this.cssImports??[])s=`@import url(${JSON.stringify(r)});
${s}`;n={css:s,class:o}}else n=!1;this._inject=n}return n&&e&&Df(n.css,e,n.class,t,1,i),n?n.class:!1}},jve=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),I6=e=>`--ag-${jve(e)}`,Qa=e=>`var(${I6(e)})`,Wve=(e,t,i)=>Math.max(t,Math.min(i,e)),Uve=e=>{const t=new Map;return i=>{const n=i;return t.has(n)||t.set(n,e(i)),t.get(n)}},xa=e=>({ref:"accentColor",mix:e}),dr=e=>({ref:"foregroundColor",mix:e}),br=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),$ve=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),go={ref:"backgroundColor"},xg={ref:"foregroundColor"},Gl={ref:"accentColor"},A0={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:dr(.15),chromeBackgroundColor:br(.02),browserColorScheme:"light"},Yve={...A0,textColor:xg,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:xa(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:go,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Gl,toggleButtonOffBackgroundColor:br(.3),toggleButtonSwitchBackgroundColor:go,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}},Kve=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],qve=Uve(e=>(e=e.toLowerCase(),Kve.find(t=>e.endsWith(t.toLowerCase()))??"length")),ID=e=>typeof e=="object"&&e?.ref?Qa(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,iN=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){const t=Qa(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?Qa(e.onto):"transparent"}, ${t} ${Wve(e.mix*100,0,100)}%)`}return!1},Zve=ID,Mg=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,i=>i[0]==="-"?i:" "+Qa(i)+" ")})`:e&&"ref"in e?Qa(e.ref):!1,Xve=ID,Mk=(e,t)=>typeof e=="string"?e:e===!0?Mk({},t):e===!1?t==="columnBorder"?Mk({color:"transparent"},t):"none":e&&"ref"in e?Qa(e.ref):k6(e.style??"solid")+" "+Mg(e.width??{ref:"borderWidth"})+" "+iN(e.color??{ref:"borderColor"}),Qve=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?Qa(e.ref):[Mg(e.offsetX??0),Mg(e.offsetY??0),Mg(e.radius??0),Mg(e.spread??0),iN(e.color??{ref:"foregroundColor"})].join(" "),k6=ID,L6=e=>typeof e=="string"?e.includes(",")?e:wz(e):e&&"googleFont"in e?L6(e.googleFont):e&&"ref"in e?Qa(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),wz(t))).join(", "):!1,wz=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),Jve=ID,P6=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?P6({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?Qa(e.ref):!1,ebe=(e,t,i)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&i.warn(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?Qa(e.ref):!1,tbe={color:iN,colorScheme:Zve,length:Mg,scale:Xve,border:Mk,borderStyle:k6,shadow:Qve,image:P6,fontFamily:L6,fontWeight:Jve,duration:ebe},ibe=(e,t,i)=>{const n=qve(e);return tbe[n](t,e,i)},nbe=e=>new N6(e),N6=class F6{constructor(t,i=[]){this.themeLogger=t,this.parts=i}withPart(t){return typeof t=="function"&&(t=t()),t instanceof T6?new F6(this.themeLogger,[...this.parts,t]):(this.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(t){return this.withPart(Xa({feature:t}))}withParams(t,i=hu){return this.withPart(Xa({modeParams:{[i]:t}}))}_startUse({styleContainer:t,cssLayer:i,nonce:n,loadThemeGoogleFonts:s,moduleCss:o}){if(tN)return;obe(),E6(t,i,n,o);const r=sbe(this);if(r.length>0)for(const a of r)s&&rbe(a,n);for(const a of this.parts)a.use(t,i,n)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=Sz(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){const i={[hu]:{...Yve}};for(const n of Sz(this.parts))for(const s of Object.keys(n.modeParams)){const o=n.modeParams[s];if(o){const r=i[s]??(i[s]={}),a=new Set;for(const l of Object.keys(o)){const c=o[l];c!==void 0&&(r[l]=c,a.add(l))}if(s===hu)for(const l of Object.keys(i)){const c=i[l];if(l!==hu)for(const d of a)delete c[d]}}}this._paramsCache=t=i}return t}_getPerInstanceCss(t){const i="##SELECTOR##";let n=this._paramsCssCache;if(!n){let s="",o="";const r=this._getModeParams();for(const l of Object.keys(r)){const c=r[l];if(l!==hu){const p=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(l):l}"]) & {
`;s+=p,o+=p}for(const d of Object.keys(c).sort()){const p=c[d],g=ibe(d,p,this.themeLogger);if(g===!1)this.themeLogger.error(107,{key:d,value:p});else{const m=I6(d),y=m.replace("--ag-","--ag-inherited-");s+=`	${m}: var(${y}, ${g});
`,o+=`	${y}: var(${m});
`}}l!==hu&&(s+=`}
`,o+=`}
`)}let a=`${i} {
${s}}
`;a+=`:has(> ${i}):not(${i}) {
${o}}
`,this._paramsCssCache=n=a}return n.replaceAll(i,`:where(.${t})`)}},Sz=e=>{const t=new Map;for(const n of e)t.set(n.feature,n);const i=[];for(const n of e)(!n.feature||t.get(n.feature)===n)&&i.push(n);return i},sbe=e=>{const t=new Set,i=o=>{if(Array.isArray(o))o.forEach(i);else{const r=o?.googleFont;typeof r=="string"&&t.add(r)}};return Object.values(e._getModeParams()).flatMap(o=>Object.values(o)).forEach(i),Array.from(t).sort()},xz=!1,obe=()=>{if(!xz){xz=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},rbe=async(e,t)=>{const i=`@import url('https://${abe}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;Df(i,document.head,`googleFont:${e}`,void 0,0,t)},abe="fonts.googleapis.com",lbe=1,cbe=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=lbe++,e?.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(const t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];for(const t of e.beanClasses){const i=new t;i.beanName?this.beans[i.beanName]=i:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(i)}for(const t of e.derivedBeans??[]){const{beanName:i,bean:n}=t(this);this.beans[i]=n,this.createdBeans.push(n)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){const i=this.beans;for(const n of e)n.preWireBeans?.(i),n.wireBeans?.(i);for(const n of e)n.preConstruct?.();t&&e.forEach(t);for(const n of e)n.postConstruct?.()}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[],this.destroyCallback?.()}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},ube=0,dbe=class extends ll{constructor(){super(...arguments),this.beanName="environment",this.paramsClass=`ag-theme-params-${++ube}`,this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){const{gos:e,eRootDiv:t}=this;e.setInstanceDomData(t),this.eStyleContainer=e.get("themeStyleContainer")??(t.getRootNode()===document?document.head:t),this.cssLayer=e.get("themeCssLayer"),this.styleNonce=e.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.initVariables(),this.addDestroyFunc(()=>zve(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e,t=[]){const{theme:i}=this;let n;i?n=`${this.paramsClass} ${i._getCssClass()}`:n=this.applyLegacyThemeClasses();for(const s of Array.from(e.classList))s.startsWith("ag-theme-")&&e.classList.remove(s);if(n){const s=e.className;e.className=`${s}${s?" ":""}${n}${t?.length?" "+t.join(" "):""}`}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let i=!1;for(const n of Array.from(t.classList))n.startsWith("ag-theme-")&&(i=!0,e=e?`${e} ${n}`:n);i&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?Df(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}handleThemeChange(){const{gos:e,theme:t}=this,i=e.get("theme");let n;if(i==="legacy")n=void 0;else{const s=i??this.getDefaultTheme();s instanceof N6?n=s:this.themeError(s)}n!==t&&this.handleNewTheme(n),this.postProcessThemeChange(n,i)}handleNewTheme(e){const{gos:t,eRootDiv:i,globalCSS:n}=this,s=this.getAdditionalCss();if(e){Vve(this),E6(this.eStyleContainer,this.cssLayer,this.styleNonce,s);for(const[r,a]of n)Df(r,this.eStyleContainer,a,this.cssLayer,0,this.styleNonce);n.length=0}this.theme=e,e?._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:s});let o=this.eParamsStyle;if(!o){o=this.eParamsStyle=cC({tag:"style"});const r=t.get("styleNonce");r&&o.setAttribute("nonce",r),i.appendChild(o)}tN||(o.textContent=e?._getPerInstanceCss(this.paramsClass)||""),this.applyThemeClasses(i),this.fireStylesChangedEvent("themeChanged")}},hbe=class extends ll{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){this.dynamicBeans??(this.dynamicBeans={});for(const t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t,...i){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));const n=this.dynamicBeans[e];if(n==null){if(t)throw new Error(this.getDynamicError(e,!1));return}return new n(...i)}},pbe=class extends ll{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new Dh}addListener(e,t,i){this.globalSvc.addEventListener(e,t,i)}removeListener(e,t,i){this.globalSvc.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},O6=class extends ll{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){const i="title",n=this.ctrl.getGui();n&&(e!=null&&(e!=""||t)?n.setAttribute(i,e):n.removeAttribute(i))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){if(this.tooltipManager==null){const e=this.beans.registry.createDynamicBean("tooltipStateManager",!0,this.ctrl,()=>this.tooltip);e&&(this.tooltipManager=this.createBean(e,this.beans.context))}}attemptToShowTooltip(){this.tooltipManager?.prepareToShowTooltip()}attemptToHideTooltip(){this.tooltipManager?.hideTooltip()}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},gbe=1e3,fbe=1e3,Mz=100,Dz,cS=!1,mbe=class extends ll{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){return e==="show"?this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!dh()&&(cS?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},Mz):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){const t=e.relatedTarget,i=this.tooltipCtrl.getGui(),n=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(t)||this.interactionEnabled&&n?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||cS)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-Dz<gbe}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.clearEventHandlers(),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e=this.getTooltipValue(),t=this.tooltipCtrl;if(!Pe(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}const i=this.gos.addCommon({location:t.getLocation?.()??"UNKNOWN",value:e,hideTooltipCallback:()=>this.hideTooltip(!0),...t.getAdditionalParams?.()});this.state=2,this.tooltipInstanceCount++;const n=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(i,n)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),Dz=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}const n=t.getGui();this.tooltipComp=t,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const s=this.getLocaleTextFunc(),o=this.popupSvc?.addPopup({eChild:n,ariaLabel:s("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const r=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:r}),this.setEventHandlers(r)}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Kn(this.beans),{keydown:r=>{n.contains(r?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:n,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){const e=this.tooltipComp?.getGui(),t=$i(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupSvc?.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=this.tooltipTrigger===0?fbe:0;window.setTimeout(()=>{e(),this.destroyBean(t)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){for(const e of[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener])e&&e();this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){cS=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},Mz)}unlockService(){cS=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},ybe=class extends O6{constructor(e,t,i){super(e,i),this.highlightTracker=t,this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct(),this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",({currentValue:e})=>{this.setTooltipMode(e)}),this.setTooltipMode(this.gos.get("tooltipTrigger")),this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(e){this.tooltipMode===1&&(e.highlighted?this.attemptToShowTooltip():this.attemptToHideTooltip())}setTooltipMode(e="focus"){this.tooltipMode=e==="focus"?1:0}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight),super.destroy()}},uS=0,vbe=200,bbe=class extends ll{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}getPopupParent(){const e=this.gos.get("popupParent");return e||this.getDefaultPopupParent()}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:n,skipObserver:s}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e,e.type,e.ePopup,null,e.mouseEvent)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:s,eventSource:o,alignSide:r="left",position:a="over",type:l}=e,c=o.getBoundingClientRect(),d=this.getParentRect();this.setAlignedTo(o,t);const p=()=>{let g=c.left-d.left;r==="right"&&(g-=t.offsetWidth-c.width);let m;return a==="over"?(m=c.top-d.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,c,d,e.nudgeY||0)==="under"?m=c.top-d.top+c.height:m=c.top-t.offsetHeight-(n||0)*2-d.top),{x:g,y:m}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:s,updatePosition:p,postProcessCallback:()=>this.callPostProcessPopup(e,l,t,o,null)})}shouldRenderUnderOrAbove(e,t,i,n){const s=i.bottom-t.bottom,o=t.top-i.top,r=e.offsetHeight+n;return s>r?"under":o>r||o>s?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const n=this.popupList[i],{alignedToElement:s}=n;if(!s)return;const o=["right","left","over","above","under"];for(const r of o)s.classList.remove(`ag-has-popup-positioned-${r}`),e.classList.remove(`ag-popup-positioned-${r}`);t&&(s.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){const i=this.getPopupIndex(t);if(i!==-1){const n=this.popupList[i];n.alignedToElement=e}}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:n,nudgeY:s,skipObserver:o,updatePosition:r}=e,a={width:0,height:0},l=(c=!1)=>{let{x:d,y:p}=r();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,n&&(d+=n),s&&(p+=s),i&&(d=this.keepXYWithinBounds(t,d,1),p=this.keepXYWithinBounds(t,p,0)),t.style.left=`${d}px`,t.style.top=`${p}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!o){const c=Ac(this.beans,t,()=>l(!0));setTimeout(()=>c(),vbe)}}getParentRect(){const e=Kn(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),IY(t)}keepXYWithinBounds(e,t,i){const n=i===0,s=n?"clientHeight":"clientWidth",o=n?"top":"left",r=n?"height":"width",a=n?"scrollTop":"scrollLeft",l=Kn(this.beans),c=l.documentElement,d=this.getPopupParent(),p=e.getBoundingClientRect(),g=d.getBoundingClientRect(),m=l.documentElement.getBoundingClientRect(),y=d===l.body,b=Math.ceil(p[r]);let w=y?(n?TY:d0)(c)+c[a]:d[s];y&&(w-=Math.abs(m[o]-g[o]));const x=w-b;return Math.min(Math.max(t,0),Math.max(x,0))}addPopup(e){const{eChild:t,ariaLabel:i,ariaOwns:n,alwaysOnTop:s,positionCallback:o,anchorToElement:r}=e,a=this.getPopupIndex(t);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(t);const l=this.createPopupWrapper(t,!!s,i,n),c=this.addEventListenersToPopup({...e,wrapperEl:l});return o&&o(),this.addPopupToPopupList(t,l,c,r),{hideFunc:c}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();Pe(e.style.top)||(e.style.top=`${i.top*-1}px`),Pe(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i,n){const s=this.getPopupParent(),{environment:o,gos:r}=this.beans,a=cC({tag:"div"});return o.applyThemeClasses(a),a.classList.add("ag-popup"),e.classList.add(r.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Ah(e,"dialog"),i?Sf(e,i):n&&(e.id||(e.id=`popup-component-${uS}`),sz(n,e.id)),a.appendChild(e),s.appendChild(a),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),a}addEventListenersToPopup(e){const t=this.beans,i=Kn(t),{wrapperEl:n,eChild:s,closedCallback:o,afterGuiAttached:r,closeOnEsc:a,modal:l,ariaOwns:c}=e;let d=!1;const p=b=>{if(!n.contains($i(t)))return;b.key===oe.ESCAPE&&!this.isStopPropagation(b)&&y({keyboardEvent:b})},g=b=>y({mouseEvent:b}),m=b=>y({touchEvent:b}),y=(b={})=>{const{mouseEvent:C,touchEvent:w,keyboardEvent:x,forceHide:M}=b;!M&&(this.isEventFromCurrentPopup({mouseEvent:C,touchEvent:w},s)||d)||(d=!0,n.remove(),i.removeEventListener("keydown",p),i.removeEventListener("mousedown",g),i.removeEventListener("touchstart",m),i.removeEventListener("contextmenu",g),this.eventSvc.removeListener("dragStarted",g),o&&o(C||w||x),this.removePopupFromPopupList(s,c))};return r&&r({hidePopup:y}),window.setTimeout(()=>{a&&i.addEventListener("keydown",p),l&&(i.addEventListener("mousedown",g),this.eventSvc.addListener("dragStarted",g),i.addEventListener("touchstart",m),i.addEventListener("contextmenu",g))},0),y}addPopupToPopupList(e,t,i,n){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:uS,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n),uS=uS+1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const n=this.popupList[i];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then(o=>o&&o()),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;const s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=s,n.isAnchored=!0,s}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&sz(t,null),this.popupList=this.popupList.filter(i=>i.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:n,ePopup:s}=e,o=n.getBoundingClientRect(),r=p=>Number.parseInt(p.substring(0,p.length-1),10),a=(p,g)=>{const m=i[p]-o[p],y=r(s.style[p]);return{initialDiff:m,lastDiff:m,initial:y,last:y,direction:g}},l=a("top",0),c=a("left",1),d=this.beans.frameworkOverrides;return new Nt(p=>{d.wrapIncoming(()=>{Tye(()=>{const g=t.getBoundingClientRect(),m=n.getBoundingClientRect();if(m.top==0&&m.left==0&&m.height==0&&m.width==0){e.hidePopup();return}const b=(C,w)=>{const x=r(s.style[w]);C.last!==x&&(C.initial=x,C.last=x);const M=g[w]-m[w];if(M!=C.lastDiff){const E=this.keepXYWithinBounds(s,C.initial+C.initialDiff-M,C.direction);s.style[w]=`${E}px`,C.last=E}C.lastDiff=M};b(l,"top"),b(c,"left")},200).then(g=>{p(()=>{g!=null&&window.clearInterval(g)})})},"popupPositioning")})}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:n}=e,s=i||n;if(!s)return!1;const o=this.getPopupIndex(t);if(o===-1)return!1;for(let r=o;r<this.popupList.length;r++){const a=this.popupList[r];if(hme(a.element,s))return!0}return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){const t=Kn(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=i.length,s=this.getWrapper(e);if(!s||n<=1||!t.contains(e))return;const o=[],r=[];for(const g of i)g!==s&&(g.classList.contains("ag-always-on-top")?r.push(g):o.push(g));const a=[],l=r.length,p=s.classList.contains("ag-always-on-top")||!l?[...o,...r,s]:[...o,s,...r];for(let g=0;g<=n;g++){const m=p[g];if(i[g]===p[g]||m===s)continue;const y=m.querySelectorAll("div");for(const b of y)b.scrollTop!==0&&a.push([b,b.scrollTop]);g===0?t.insertAdjacentElement("afterbegin",m):p[g-1].insertAdjacentElement("afterend",m)}for(;a.length;){const g=a.pop();g[0].scrollTop=g[1]}}},Cbe=class extends qP{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(e){const{value:t}=e,i=this.getGui();i.textContent=nm(t);const n=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();i.classList.add(`ag-${n}-tooltip`)}},B6=(e,t)=>{if(t!=null&&e?.setPointerCapture)try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch{}return!1},wbe=(e,t)=>{if(typeof PointerEvent>"u"||!(t instanceof PointerEvent))return null;const i=t.pointerId;if(!B6(e,i))return null;const n={eElement:e,pointerId:i,onLost(s){xbe(n,s)}};return e.addEventListener("lostpointercapture",n.onLost),n},Sbe=e=>{if(!e)return;G6(e);const{eElement:t,pointerId:i}=e;if(t){try{t.releasePointerCapture(i)}catch{}e.eElement=null}},G6=e=>{const{eElement:t,onLost:i}=e;t&&i&&(t.removeEventListener("lostpointercapture",i),e.onLost=null)},xbe=(e,t)=>{G6(e);const{eElement:i,pointerId:n}=e;i&&t.pointerId===n&&B6(i,n)},ig,Dg,Tl=e=>{if(!Dg)Dg=new WeakSet;else if(Dg.has(e))return!1;return Dg.add(e),!0},Mbe=class extends ll{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){return this.drag?.start.target??null}isPointer(){return!!ig?.has(Sa(this.beans))}hasPointerCapture(){const e=this.drag?.pointerCapture;return!!(e&&this.beans.eRootDiv.hasPointerCapture?.(e.pointerId))}destroy(){this.drag&&this.cancelDrag();const e=this.dragSources;for(const t of e)Az(t);e.length=0,super.destroy()}removeDragSource(e){const t=this.dragSources;for(let i=0,n=t.length;i<n;++i){const s=t[i];if(s.params===e){t.splice(i,1),Az(s);break}}}addDragSource(e){if(!this.isAlive())return;const{eElement:t,includeTouch:i}=e,n=[];let s;if(i){const c=t.style;c&&(s=c.touchAction,c.touchAction="none")}const o={handlers:n,params:e,oldTouchAction:s};this.dragSources.push(o),sx(n,[t,"pointerdown",c=>this.onPointerDown(e,c),{passive:!1}],[t,"mousedown",c=>this.onMouseDown(e,c)]);const l=this.gos.get("suppressTouch");i&&!l&&sx(n,[t,"touchstart",d=>this.onTouchStart(e,d),{passive:!1}])}cancelDrag(e){const t=this.drag;e??(e=t?.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),t?.params.onDragCancel?.(),this.destroyDrag()}shouldPreventMouseEvent(e){const t=e.type;return(t==="mousemove"||t==="pointermove")&&e.cancelable&&jv(this.beans,e)&&!Ky(RT(e))}initDrag(e,...t){this.drag=e;const i=this.beans,n=a=>this.onScroll(a),s=a=>this.onKeyDown(a),o=Sa(i),r=Kn(i);sx(e.handlers,[o,"contextmenu",du],[o,"keydown",s],[r,"scroll",n,{capture:!0}],[r.defaultView||window,"scroll",n],...t)}destroyDrag(){this.dragging=!1;const e=this.drag;if(e){const t=e.rootEl;ig?.get(t)===e&&ig?.delete(t),this.drag=null,Sbe(e.pointerCapture),zP(e.handlers)}}onPointerDown(e,t){if(this.isPointer())return;const i=this.beans;if(Dg?.has(t))return;const n=t.pointerType;if(n==="touch"&&(i.gos.get("suppressTouch")||!e.includeTouch||(e.stopPropagationForTouch&&t.stopPropagation(),Ky(RT(t))))||!t.isPrimary||n==="mouse"&&t.button!==0)return;this.destroyDrag();const s=Sa(i),o=e.eElement,r=t.pointerId,a=new AT(s,e,t,r);ig??(ig=new WeakMap),ig.set(s,a);const l=p=>{p.pointerId===r&&this.onMouseOrPointerMove(p)},c=p=>{p.pointerId===r&&this.onMouseOrPointerUp(p)},d=p=>{p.pointerId===r&&Tl(p)&&this.cancelDrag()};this.initDrag(a,[s,"pointerup",c],[s,"pointercancel",d],[s,"pointermove",l,{passive:!1}],[s,"touchmove",du,{passive:!1}],[o,"mousemove",du,{passive:!1}]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):Tl(t)}onTouchStart(e,t){if(this.gos.get("suppressTouch")||!e.includeTouch||!Tl(t)||Ky(RT(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer()){du(t);return}this.destroyDrag();const n=this.beans,s=Sa(n),o=new AT(s,e,t.touches[0]),r=c=>this.onTouchMove(c),a=c=>this.onTouchUp(c),l=t.target??e.eElement;this.initDrag(o,[Sa(n),"touchmove",du,{passive:!1}],[l,"touchmove",r,{passive:!0}],[l,"touchend",a,{passive:!0}],[l,"touchcancel",a,{passive:!0}]),e.dragStartPixels===0&&this.onMove(o.start)}onMouseDown(e,t){if(t.button!==0||Dg?.has(t)||this.isPointer())return;const i=this.beans;this.destroyDrag();const n=new AT(Sa(i),e,t),s=a=>this.onMouseOrPointerMove(a),o=a=>this.onMouseOrPointerUp(a),r=Sa(i);this.initDrag(n,[r,"mousemove",s],[r,"mouseup",o]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):Tl(t)}onScroll(e){if(!Tl(e))return;const t=this.drag,i=t?.lastDrag;i&&this.dragging&&t.params?.onDragging(i)}onMouseOrPointerMove(e){Tl(e)&&(ed()&&Kn(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&du(e),this.onMove(e))}onTouchMove(e){const t=this.drag;if(!t||!Tl(e))return;const i=Zy(t.start,e.touches);i&&(e.preventDefault(),this.onMove(i))}onMove(e){const t=this.drag;if(!t)return;t.lastDrag=e;const i=t.params;if(!this.dragging){const n=t.start,o=i.dragStartPixels??4;if(FY(e,n,o)||(this.dragging=!0,i.capturePointer&&(t.pointerCapture=wbe(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:i.eElement}),i.onDragStart(n),this.drag!==t)||(i.onDragging(n),this.drag!==t))return}i.onDragging(e)}onTouchUp(e){const t=this.drag;t&&Tl(e)&&this.onUp(Zy(t.start,e.changedTouches))}onMouseOrPointerUp(e){Tl(e)&&this.onUp(e)}onUp(e){const t=this.drag;t&&(e||(e=t.lastDrag),e&&this.dragging&&(this.dragging=!1,t.params.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement})),this.destroyDrag())}onKeyDown(e){e.key===oe.ESCAPE&&this.cancelDrag()}},Az=e=>{zP(e.handlers);const t=e.oldTouchAction;if(t!=null){const i=e.params.eElement.style;i&&(i.touchAction=t)}},AT=class{constructor(e,t,i,n=null){this.rootEl=e,this.params=t,this.start=i,this.pointerId=n,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},RT=e=>{const t=e.target;return t instanceof Element?t:null},Dbe=class extends ll{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageParent=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.lastDropTarget=null}addDragSource(e,t=!1){const i={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:n=>this.onDragStart(e,n),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(i),this.beans.dragSvc.addDragSource(i)}setDragImageCompIcon(e,t=!1){const i=this.dragImageComp;i&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,i.setIcon(e,t))}removeDragSource(e){const{dragSourceAndParamsList:t,beans:i}=this,n=t.find(s=>s.dragSource===e);n&&(i.dragSvc?.removeDragSource(n),ea(t,n))}destroy(){const{dragSourceAndParamsList:e,dropTargets:t,beans:i}=this,n=i.dragSvc;for(const s of e)n?.removeDragSource(s);e.length=0,t.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){const e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();const i=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-i.left,this.dragInitialSourcePointerOffsetY=t.clientY-i.top,e.onDragStarted?.(),this.createAndUpdateDragImageComp(e)}onDragStop(e){const{dragSource:t,lastDropTarget:i}=this;if(t?.onDragStopped?.(),i){const n=this.dropTargetEvent(i,e,!1);i.onDragStop?.(n)}this.clearDragAndDropProperties()}onDragCancel(){const{dragSource:e,lastDropTarget:t,lastMouseEvent:i}=this;if(e?.onDragCancelled?.(),t&&i){const n=this.dropTargetEvent(t,i,!1);t.onDragCancel?.(n)}this.clearDragAndDropProperties()}onDragging(e,t=!1){this.positionDragImageComp(e);const i=this.findCurrentDropTarget(e),{lastDropTarget:n,dragSource:s,dragItem:o}=this;let r=!1;if(i!==n){if(r=!0,n){const a=this.dropTargetEvent(n,e,t);n.onDragLeave?.(a)}if(n!==null&&!i?this.handleExit(s,o):n===null&&i&&this.handleEnter(s,o),i){const a=this.dropTargetEvent(i,e,t);i.onDragEnter?.(a)}this.lastDropTarget=i}else if(i){const a=this.dropTargetEvent(i,e,t);i.onDragging?.(a),a?.changed&&(r=!0)}this.lastMouseEvent=e,r&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageParent=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let n=!1;const s=(a,l)=>{for(const c of l){const{width:d,height:p,left:g,right:m,top:y,bottom:b}=c.getBoundingClientRect();if(d===0||p===0)return!1;const C=a.clientX>=g&&a.clientX<m,w=a.clientY>=y&&a.clientY<b;if(!C||!w)return!1}return!0};for(const a of i)if(s(e,a)){n=!0;break}const{eElement:o,type:r}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(o)?!1:n&&t.isInterestedIn(r,o)}findCurrentDropTarget(e){const t=this.dropTargets.filter(o=>this.isMouseOnDropTarget(e,o)),i=t.length;if(i===0)return null;if(i===1)return t[0];const s=Sa(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const o of s)for(const r of t)if(this.getAllContainersFromDropTarget(r).flatMap(l=>l).indexOf(o)!==-1)return r;return null}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.find(t=>t.external&&t.getContainer()===e)||null}dropTargetEvent(e,t,i){const{dragSource:n,dragItem:s,lastDraggingEvent:o,lastMouseEvent:r,dragInitialSourcePointerOffsetX:a,dragInitialSourcePointerOffsetY:l}=this,c=e.getContainer(),d=c.getBoundingClientRect(),{clientX:p,clientY:g}=t,m=p-(r?.clientX||0),y=g-(r?.clientY||0),b=this.createEvent({event:t,x:p-d.left,y:g-d.top,vDirection:y>0?"down":y<0?"up":null,hDirection:m<0?"left":m>0?"right":null,initialSourcePointerOffsetX:a,initialSourcePointerOffsetY:l,dragSource:n,fromNudge:i,dragItem:s,dropZoneTarget:c,dropTarget:o?.dropTarget??null,changed:!!o?.changed});return this.lastDraggingEvent=b,b}positionDragImageComp(e){const t=this.dragImageComp?.getGui();t&&yme(t,e,this.beans)}removeDragImageComp(e){this.dragImageComp===e&&(this.dragImageComp=null),e&&(e.getGui()?.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){const t=this.createDragImageComp(e)??null;this.dragImageCompPromise=t,t?.then(i=>{if(t!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive()){this.destroyBean(i);return}this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;const n=this.dragImageComp;n!==i&&(this.dragImageComp=i,this.removeDragImageComp(n)),i&&(this.appendDragImageComp(i),this.updateDragImageComp())})}appendDragImageComp(e){const t=e.getGui(),i=t.style;i.position="absolute",i.zIndex="9999",this.beans.dragSvc?.hasPointerCapture()&&(i.pointerEvents="none"),this.gos.setInstanceDomData(t),this.beans.environment.applyThemeClasses(t),i.top="20px",i.left="20px";const n=FP(this.beans);this.dragImageParent=n,n?n.appendChild(t):this.warnNoBody()}updateDragImageComp(){const{dragImageComp:e,dragSource:t,lastDropTarget:i,lastDraggingEvent:n,dragImageLastLabel:s}=this;if(!e)return;this.setDragImageCompIcon(i?.getIconName?.(n)??null);let o=t?.dragItemName;typeof o=="function"&&(o=o(n)),o||(o=""),s!==o&&(this.dragImageLastLabel=o,e.setLabel(o))}},Abe=class extends Dbe{createEvent(e){return $e(this.gos,e)}createDragImageComp(e){const{gos:t,beans:i}=this;return qye(i.userCompFactory,$e(t,{dragSource:e}))?.newAgStackInstance()}handleEnter(e,t){e?.onGridEnter?.(t)}handleExit(e,t){e?.onGridExit?.(t)}warnNoBody(){Se(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){const i={getContainer:e,isInterestedIn:n=>n===1||n===0,getIconName:()=>"notAllowed"};this.addDropTarget(i),t.addDestroyFunc(()=>this.removeDropTarget(i))}};function _6(e,t){return e+"_"+t}function dn(e){return e instanceof Yv}var Yv=class extends he{constructor(e,t,i,n){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=i,this.pinned=n,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=Yy(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return _6(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){for(const e of this.displayedChildren)dn(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=fi(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(const t of this.displayedChildren??[])e+=t.getActualWidth();return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(const t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(const t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(const t of this.displayedChildren??[])Fu(t)?e.push(t):dn(t)&&t.addDisplayedLeafColumns(e)}addLeafColumns(e){for(const t of this.children??[])Fu(t)?e.push(t):dn(t)&&t.addLeafColumns(e)}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e?.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e?.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}for(const i of this.children??[]){if(dn(i)&&!i.displayedChildren?.length)continue;switch(i.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},Dk="row-group-",nN="t-",sN="b-",Rbe=0,Ou=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this._leafs=void 0,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Rbe++,this.alreadyRendered=!1,this.hovered=!1,this.__selected=!1,this.beans=e}get allLeafChildren(){const e=this._leafs;return e===void 0?this.beans.groupStage?.loadLeafs?.(this)??null:e}set allLeafChildren(e){this._leafs=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const{valueCache:i,eventSvc:n}=this.beans,s=this.data;this.data=e,i?.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();const o=this.createDataChangedEvent(e,s,t);if(this.__localEventService?.dispatchEvent(o),this.sibling){this.sibling.data=e;const a=this.sibling.createDataChangedEvent(e,s,t);this.sibling.__localEventService?.dispatchEvent(a)}n.dispatchEvent({type:"rowNodeDataChanged",node:this});const r=this.pinnedSibling;r&&(r.data=e,r.__localEventService?.dispatchEvent(r.createDataChangedEvent(e,s,t)),n.dispatchEvent({type:"rowNodeDataChanged",node:r}))}updateDataOnDetailNode(){const e=this.detailNode;e&&(e.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return this.rowIndex==null?(oi(13),null):this.rowPinned==="top"?nN+this.rowIndex:this.rowPinned==="bottom"?sN+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){const{selectionSvc:i}=this.beans,n=i?.createDaemonNode?.(this),s=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),i&&(i.updateRowSelectable(this),i.syncInRowNode(this,n));const o=this.createDataChangedEvent(e,s,!1);this.__localEventService?.dispatchEvent(o)}setId(e){const t=xf(this.beans.gos);if(t)if(this.data){const i=this.parent?.getRoute()??[];this.id=t({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Dk)&&oi(14,{groupPrefix:Dk})}else this.id=void 0;else this.id=e}setRowTop(e){if(this.oldRowTop=this.rowTop,this.rowTop===e)return;this.rowTop=e,this.dispatchRowEvent("topChanged");const t=e!==null;this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,i){this.beans.expansionSvc?.setExpanded(this,e,t,i)}setDataValue(e,t,i){const{colModel:n,valueSvc:s,gos:o,editSvc:r}=this.beans,a=typeof e!="string"?e:n.getCol(e)??n.getColDefCol(e);if(!a)return!1;const l=s.getValueForDisplay(a,this,void 0,void 0,"api").value;if(o.get("readOnlyEdit")){const{beans:{eventSvc:d},data:p,rowIndex:g,rowPinned:m}=this;return d.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:g,rowPinned:m,column:a,colDef:a.colDef,data:p,node:this,oldValue:l,newValue:t,value:t,source:i}),!1}if(r&&!r.committing){const d=r.setDataValue({rowNode:this,column:a},t,i);if(d!=null)return d}const c=s.setValue(this,a,t,i);return this.dispatchCellChangedEvent(a,t,l),c&&this.pinnedSibling?.dispatchCellChangedEvent(a,t,l),c}updateHasChildren(){let e=this.group&&!this.footer||!!this.childrenAfterGroup?.length;const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){const n={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};this.__localEventService?.dispatchEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){if(this.footer)return this.sibling.isSelected();const e=this.rowPinned&&this.pinnedSibling;return e?e.isSelected():this.__selected}depthFirstSearch(e){const t=this.childrenAfterGroup;if(t)for(let i=0,n=t.length;i<n;++i)t[i].depthFirstSearch(e);e(this)}dispatchRowEvent(e){this.__localEventService?.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,i="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:i})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){(this.__localEventService??(this.__localEventService=new Dh)).addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){this.beans.validation?.checkRowEvents(e);const i=this.__localEventService??(this.__localEventService=new Dh);this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,i);const n=this.frameworkEventListenerService?.wrap(e,t)??t;i.addEventListener(e,n)}removeEventListener(e,t){const i=this.frameworkEventListenerService?.unwrap(e,t)??t;this.removeLocalListener(e,i)}removeLocalListener(e,t){const i=this.__localEventService;i&&(i.removeEventListener(e,t),i.noRegisteredListenersExist()&&(this.__localEventService=null))}isFullWidthCell(){if(Se(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const e=[];let t=this;for(;t?.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){const e=this.childStore;return e?e.getFirstNode():this.childrenAfterSort?.[0]??null}};function Ebe(e,t,i){return $e(t,{type:i,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var Tbe=new Set(["__autoHeights","__checkAutoHeightsDebounced","__localEventService","__objectId","_leafs","childStore","oldRowTop","sticky","treeNodeFlags","treeParent"]),Ibe=(e,t)=>{const i=new Ou(t);for(const n of Object.keys(e))Tbe.has(n)||(i[n]=e[n]);return i.oldRowTop=null,i},V6=e=>{for(;e?.length;){const t=e[0];if(t.data)return t;e=t.childrenAfterGroup}},z6={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},kbe=new Set(Object.values(z6));function ru(e,t){const i=e.filterUi;if(!i)return null;if(i.created)return i.promise;if(t)return null;const n=i.create(i.refreshed),s=i;return s.created=!0,s.promise=n,n}function Lbe(e,t,i,n,s,o,r){return t.refresh?.({...i,model:n,source:o,additionalEventAttributes:r}),e().then(a=>{if(a){const{filter:l,filterParams:c}=a;H6(l,c,n,s,o,r)}})}function H6(e,t,i,n,s,o){e?.refresh?.({...t,model:i,state:n,source:s,additionalEventAttributes:o})}function j6(e,t,i){const n=e();n?.created&&n.promise.then(s=>{const o=t();H6(s,n.filterParams,o,i()??{model:o},"ui")})}function Rz(e,t,i,n,s,o,r){let a,l=!1,c;switch(e){case"apply":{const d=n();c=d?.model??null,r&&(c=r(c)),a={state:d?.state,model:c},l=!0;break}case"clear":{a={model:null};break}case"reset":{a={model:null},l=!0,c=null;break}case"cancel":{a={model:i()};break}}s(a),l?o(c):j6(t,i,n)}function Un(e,t){return e[t]??null}function Zs(e){return cC(e)}function Pbe(e){return{tag:"div",cls:e}}var Nbe=class extends qi{constructor(e){const{className:t="ag-filter-apply-panel"}=e??{};super(Pbe(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){const i=this.buttons;if(this.buttons=e,i===e)return;const n=this.getGui();bo(n);let s;this.destroyListeners();const o=document.createDocumentFragment(),r=this.className,a=({type:c,label:d})=>{const p=w=>{this.dispatchLocalEvent({type:c,event:w})};["apply","clear","reset","cancel"].includes(c)||Se(75);const g=c==="apply",y=Zs({tag:"button",attrs:{type:g&&t?"submit":"button"},ref:`${c}FilterButton`,cls:`ag-button ag-standard-button ${r}-button${g?" "+r+"-apply-button":""}`,children:d});this.activateTabIndex([y]),g&&(s=y);const b=w=>{w.key===oe.ENTER&&(w.preventDefault(),p(w))},C=this.listeners;y.addEventListener("click",p),C.push(()=>y.removeEventListener("click",p)),y.addEventListener("keydown",b),C.push(()=>y.removeEventListener("keydown",b)),o.append(y)};for(const c of e)a(c);this.eApply=s;const l=this.validationTooltipFeature;s&&!l?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!s&&l&&(this.validationTooltipFeature=this.destroyBean(l)),n.append(o)}getApplyButton(){return this.eApply}updateValidity(e,t=null){const i=this.eApply;i&&(zv(i,e===!1),this.validationMessage=t??null,this.validationTooltipFeature?.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){for(const e of this.listeners)e();this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},Fbe={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`};function gu(e,t,i){return bme(e,Fbe,t,i)}function oN(e,t){const{debounceMs:i}=e;return kD(e)?(i!=null&&Se(71),0):i??t}function kD(e){return(e.buttons?.indexOf("apply")??-1)>=0}var Obe=class extends qi{constructor(e,t,i,n,s,o){super(),this.column=e,this.wrapper=t,this.eventParent=i,this.updateModel=n,this.isGlobalButtons=s,this.enableGlobalButtonCheck=o,this.hidePopup=null,this.applyActive=!1}postConstruct(){const{comp:e,params:t}=this.wrapper,i=t,n=i.useForm,s=n?"form":"div";this.setTemplate({tag:s,cls:"ag-filter-wrapper"}),n&&this.addManagedElementListeners(this.getGui(),{submit:o=>{o?.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=i,this.resetButtonsPanel(i),this.addManagedListeners(this.eventParent,{filterParamsChanged:({column:o,params:r})=>{o===this.column&&this.resetButtonsPanel(r,this.params)},filterStateChanged:({column:o,state:r})=>{o===this.column&&this.eButtons?.updateValidity(r.valid!==!1)},filterAction:({column:o,action:r,event:a})=>{o===this.column&&this.afterAction(r,a)},...this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:o})=>{if(o!==this.isGlobalButtons){this.isGlobalButtons=o;const r=this.params;this.resetButtonsPanel(r,r,!0)}}}:void 0})}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,i){const{buttons:n,readOnly:s}=t??{},{buttons:o,readOnly:r,useForm:a}=e;if(!i&&s===r&&_v(n,o))return;const l=o&&o.length>0&&!e.readOnly&&!this.isGlobalButtons;let c=this.eButtons;if(l){const d=o.map(p=>{const g=`${p}Filter`;return{type:p,label:gu(this,g)}});if(this.applyActive=kD(this.params),!c){c=this.createBean(new Nbe),this.appendChild(c.getGui());const p=this.column,g=m=>({event:y})=>{this.updateModel(p,m,{fromButtons:!0}),this.afterAction(m,y)};c?.addManagedListeners(c,{apply:g("apply"),clear:g("clear"),reset:g("reset"),cancel:g("cancel")}),this.eButtons=c}c.updateButtons(d,a)}else this.applyActive=!1,c&&(Lu(c.getGui()),this.eButtons=this.destroyBean(c))}close(e){const t=this.hidePopup;if(!t)return;const i=e,n=i?.key;let s;(n===oe.ENTER||n===oe.SPACE)&&(s={keyboardEvent:i}),t(s),this.hidePopup=null}afterAction(e,t){const{params:i,applyActive:n}=this,s=i?.closeOnApply;switch(e){case"apply":{t?.preventDefault(),s&&n&&this.close(t);break}case"reset":{s&&n&&this.close();break}case"cancel":{s&&this.close(t);break}}}handleKeyDown(e){!e.defaultPrevented&&e.key===oe.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply",{fromButtons:!0}),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},Bbe={tag:"div",cls:"ag-filter"},Gbe=class extends qi{constructor(e,t,i){super(Bbe),this.column=e,this.source=t,this.enableGlobalButtonCheck=i,this.wrapper=null}postConstruct(){this.beans.colFilter?.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){return this.wrapper?.then(e=>e.comp)??null}afterInit(){return this.wrapper?.then(()=>{})??Nt.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.wrapper?.then(t=>{this.comp?.afterGuiAttached(e),t?.comp?.afterGuiAttached?.(e)})}afterGuiDetached(){this.wrapper?.then(e=>{e?.comp?.afterGuiDetached?.()})}createFilter(e){const{column:t,source:i,beans:{colFilter:n}}=this,s=n.getFilterUiForDisplay(t)??null;this.wrapper=s,s?.then(o=>{if(!o)return;const{isHandler:r,comp:a}=o;let l;if(r){const c=!!this.enableGlobalButtonCheck,d=this.createBean(new Obe(t,o,n,n.updateModel.bind(n),c&&n.isGlobalButtons,c));this.comp=d,l=d.getGui()}else l=a.getGui(),Pe(l)||Se(69,{guiFromFilter:l});this.appendChild(l),e?this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()}):a.afterGuiAttached?.(this.afterGuiAttachedParams)})}onFilterDestroyed(e){const{source:t,column:i}=e;(t==="api"||t==="paramsUpdated")&&i.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(bo(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){this.beans.colFilter?.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},Ez={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Tz=["january","february","march","april","may","june","july","august","september","october","november","december"];function _be(e,t){return e==null?-1:t==null?1:Number.parseFloat(e)-Number.parseFloat(t)}function Iz(e){return e instanceof Date&&!isNaN(e.getTime())}var Ak={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>t===!1,numberOfInputs:0}]}),date:()=>({isValidDate:Iz}),dateString:({dataTypeDefinition:e})=>({comparator:(t,i)=>{const n=e.dateParser(i);return i==null||n<t?-1:n>t?1:0},isValidDate:t=>typeof t=="string"&&Iz(e.dateParser(t))}),dateTime:e=>Ak.date(e),dateTimeString:e=>Ak.dateString(e),object:()=>{},text:()=>{}},Rk={number:()=>({comparator:_be}),boolean:({t:e})=>({valueFormatter:t=>Pe(t.value)?e(String(t.value),t.value?"True":"False"):e("blanks","(Blanks)")}),date:({formatValue:e,t})=>({valueFormatter:i=>{const n=e(i);return Pe(n)?n:t("blanks","(Blanks)")},treeList:!0,treeListFormatter:(i,n)=>{if(i==="NaN")return t("invalidDate","Invalid Date");if(n===1&&i!=null){const s=Tz[Number(i)-1];return t(s,Ez[s])}return i??t("blanks","(Blanks)")},treeListPathGetter:i=>lS(i,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:i})=>({valueFormatter:n=>{const s=e(n);return Pe(s)?s:i("blanks","(Blanks)")},treeList:!0,treeListPathGetter:n=>lS(t.dateParser(n??void 0),!1),treeListFormatter:(n,s)=>{if(s===1&&n!=null){const o=Tz[Number(n)-1];return i(o,Ez[o])}return n??i("blanks","(Blanks)")}}),dateTime:e=>{const t=Rk.date(e);return t.treeListPathGetter=lS,t},dateTimeString(e){const t=e.dataTypeDefinition.dateParser,i=Rk.dateString(e);return i.treeListPathGetter=n=>lS(t(n??void 0)),i},object:({formatValue:e,t})=>({valueFormatter:i=>{const n=e(i);return Pe(n)?n:t("blanks","(Blanks)")}}),text:()=>{}};function Vbe(e,t,i,n,s,o,r){let a=t,l=i;const c=e==="agSetColumnFilter";!l&&n.baseDataType==="object"&&!c&&(l=({column:m,node:y})=>s({column:m,node:y,value:o.valueSvc.getValue(m,y)}));const p=(c?Rk:Ak)[n.baseDataType],g=p({dataTypeDefinition:n,formatValue:s,t:r});return a=typeof t=="object"?{...g,...t}:g,{filterParams:a,filterValueGetter:l}}var zbe={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},Hbe={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function jbe(e,t=!1){return(t?Hbe:zbe)[e??"text"]}var W6="ag-resizer-wrapper",au=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),Wbe={tag:"div",cls:W6,children:[au("eTopLeft","topLeft"),au("eTop","top"),au("eTopRight","topRight"),au("eRight","right"),au("eBottomRight","bottomRight"),au("eBottom","bottom"),au("eBottomLeft","bottomLeft"),au("eLeft","left")]},Ube=class extends he{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){const{clientHeight:t,clientWidth:i}=this.offsetParent,n=i/2-this.getWidth()/2,s=t/2-this.getHeight()/2;this.offsetElement(n,s,e)}initialisePosition(e){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:i,minWidth:n,width:s,minHeight:o,height:r,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let c=0,d=0;const p=Dc(this.element);if(p){const g=this.findBoundaryElement(),m=window.getComputedStyle(g);if(m.minWidth!=null){const y=g.offsetWidth-this.element.offsetWidth;d=Number.parseInt(m.minWidth,10)-y}if(m.minHeight!=null){const y=g.offsetHeight-this.element.offsetHeight;c=Number.parseInt(m.minHeight,10)-y}}if(this.minHeight=o||c,this.minWidth=n||d,s&&this.setWidth(s),r&&this.setHeight(r),(!s||!r)&&this.refreshSize(),t)this.center(e);else if(a||l)this.offsetElement(a,l,e);else if(p&&i){let g=this.boundaryEl,m=!0;if(g||(g=this.findBoundaryElement(),m=!1),g){const y=Number.parseFloat(g.style.top),b=Number.parseFloat(g.style.left);m?this.offsetElement(isNaN(b)?0:b,isNaN(y)?0:y,e):this.setPosition(b,y)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragSvc?.addDragSource(i),this.moveElementDragListener=i):(this.dragSvc?.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const n=!!e[t],s=this.getResizerElement(t),o={dragStartPixels:0,eElement:s,onDragStart:r=>this.onResizeStart(r,t),onDragging:this.onResize.bind(this),onDragStop:r=>this.onResizeEnd(r,t)};(n||!this.isAlive()&&!n)&&(n?(this.dragSvc?.addDragSource(o),this.resizeListeners.push(o),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=n)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let n=!1;if(typeof e=="string"&&e.includes("%"))qy(i,e),e=TY(i),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(n?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?qy(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:Number.parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const n=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:n.top,r=e?0:s.top;let a=0;if(t){const c=this.element.parentElement;if(c){const{bottom:d}=c.getBoundingClientRect();a=d-n.bottom}}return i+r-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let n=!1;if(typeof e=="string"&&e.includes("%"))ja(t,e),e=d0(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:s}=this.offsetParent,o=i?this.position.x:this.element.getBoundingClientRect().left;s&&e+o>s&&(e=s-o)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?ja(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:Number.parseFloat(e)))}offsetElement(e=0,t=0,i){const{forcePopupParentAsOffsetParent:n}=this.config,s=n?this.boundaryEl:this.element;s&&(this.popupSvc?.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:i}),this.setPosition(Number.parseFloat(s.style.left),Number.parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e&&this.popupSvc?(this.resizeObserverSubscriber?.(),this.resizeObserverSubscriber=Ac(this.beans,this.popupSvc?.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:n,anywhereWithin:s,topBuffer:o}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!i,!!s,r)?0:r,c=this.shouldSkipY(t,!!n,o,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,i,n){const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:s.left;let l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=r.right;return l?!0:(t?l=n<0&&e.clientX>a+o.left||n>0&&e.clientX<a+o.left:i?l=n<0&&e.clientX>r.right||n>0&&e.clientX<a+o.left:l=n<0&&e.clientX>r.right||n>0&&e.clientX<r.right,l)}shouldSkipY(e,t,i=0,n){const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:s.top;let l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=r.bottom;return l?!0:(t?l=n<0&&e.clientY>a+o.top+i||n>0&&e.clientY<a+o.top:l=n<0&&e.clientY>r.bottom||n>0&&e.clientY<r.bottom,l)}createResizeMap(){const e=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(Zs(Wbe)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0,this.element.querySelector(`.${W6}`)?.remove(),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:n}=this.config;!i&&!n&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let n=0;n<e.length;n++){const s=e[n],o=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s===this.element)continue;let r=this.minHeight||0,a=this.minWidth||0;if(o){const l=window.getComputedStyle(s);l.minHeight&&(r=Number.parseInt(l.minHeight,10)),l.minWidth&&(a=Number.parseInt(l.minWidth,10))}else r=s.offsetHeight,a=s.offsetWidth;t+=r,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let n=0;n<i.length;n++){const s=i[n];s!==t&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(t=i[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:n,isRight:s,isBottom:o,isLeft:r}=this.currentResizer,a=s||r,l=o||n,{movementX:c,movementY:d}=this.calculateMouseMovement({e,isLeft:r,isTop:n}),p=this.position.x,g=this.position.y;let m=0,y=0;if(a&&c){const b=r?-1:1,C=this.getWidth(),w=C+c*b;let x=!1;r&&(m=C-w,(p+m<=0||w<=this.minWidth)&&(x=!0,m=0)),x||this.setWidth(w)}if(l&&d){const b=n?-1:1,C=this.getHeight(),w=C+d*b;let x=!1;n?(y=C-w,(g+y<=0||w<=this.minHeight)&&(x=!0,y=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&C<w&&this.getMinSizeOfSiblings().height+w>this.element.parentElement.offsetHeight&&(x=!0),x||this.setHeight(w)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&m||y)&&this.offsetElement(p+m,g+y)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());const{movementX:s,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+s,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragSvc?.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},U6="__ag_Grid_Stop_Propagation";function Ih(e){e[U6]=!0}function tc(e){return e[U6]===!0}var $be="ag-focus-managed",om=class extends he{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;const n=np(this.beans,this.eFocusable,!1,i.shiftKey);n&&(n.focus(),i.preventDefault())},...t}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:i}}=this;e.classList.add($be),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),i&&this.addManagedElementListeners(e,{focusout:i})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||tc(t))return;const{callbacks:i}=this;if(i.shouldStopEventPropagation(t)){Ih(t);return}t.key===oe.TAB?i.onTabKeyDown(t):i.handleKeyDown&&i.handleKeyDown(t)}})}},Ybe=class extends qi{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){const e={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new om(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new Ube(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){const t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}refresh(e){const t=e,i=this.params;this.params=t,t.source==="colDef"&&this.updateParams(t,i);const s=t.state,o=this.state;return this.state=s,(s.model!==o.model||s.state!==o.state)&&this.setModelIntoUi(s.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=kD(e),this.setupApplyDebounced()}doesFilterPass(e){Se(283);const{getHandler:t,model:i,column:n}=this.params;return t().doesFilterPass({...e,model:i,handlerParams:this.beans.colFilter.getHandlerParams(n)})}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return Se(284),this.params.model!=null}setupApplyDebounced(){const e=oN(this.params,this.defaultDebounceMs),t=ps(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return Se(285),this.params.model}setModel(e){Se(286);const{beans:t,params:i}=this;return t.colFilter.setModelForColumnLegacy(i.column,e)}applyModel(e="api"){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){const{params:t,state:i}=this,n=!this.areModelsEqual(t.model,i.model);return n&&t.onAction("apply",e),n}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();const i=this.getModelFromUi(),n={model:i,state:this.getState(),valid:this.canApply(i)};this.state=n;const s=this.params;s.onStateChange(n),s.onUiChange(this.getUiChangeEventParams()),this.gos.get("enableFilterHandlers")||this.eventSvc.dispatchEvent({type:"filterModified",column:s.column,filterInstance:this}),e??(e=this.applyActive?void 0:"debounce"),e==="immediately"?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):e==="debounce"&&this.applyDebounced()}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e?.container,this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:i}=this;if(!t)return;const n=e==="floatingFilter"||e==="columnFilter";n?(t.restoreLastSize(),t.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(n)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e){return gu(this,e)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||e==null&&t==null?!0:e==null||t==null?!1:this.areNonNullModelsEqual(e,t)}};function $6(e){return!!e.operator}function Kbe(e,t,i){if(t==null)return null;let n=null;const{compName:s,jsComp:o,fwComp:r}=b6(e,t);return s?n={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[s]:o==null&&r==null&&t.filter===!0&&(n=i()),n}var ux={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},rN=class extends he{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?ux.AUTO_HEIGHT:t.print?ux.PRINT:ux.NORMAL;this.view.updateLayoutClasses(i,t)}},lu="Viewport",kz="fakeVScrollComp",ET=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],Lz=100,TT=150,qbe=class extends he{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=ps(this,()=>this.lastScrollSource[1]=null,TT),this.resetLastVScrollDebounced=ps(this,()=>this.lastScrollSource[0]=null,TT)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,i=>{this.centerRowsCtrl=i.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,lu)});for(const e of ET){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?ps(this,this.onVScroll.bind(this,lu),Lz):this.onVScroll.bind(this,lu),n=t?ps(this,this.onVScroll.bind(this,kz),Lz):this.onVScroll.bind(this,kz);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,n)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...ET,lu]){if(this.lastScrollSource[1]===t)continue;const i=this.getViewportForSource(t);p0(i,e,this.enableRtl)}}getViewportForSource(e){return e===lu?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const n=h0(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(n),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===lu?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:i}=this;i?.setScrollTop(t),this.nextScrollTop=t,e===lu?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,i?.active?i.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},TT)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!dh()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=OP(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const i of ET)if(this.getViewportForSource(i).scrollLeft!==e){t=!0;break}t&&this.onHScroll(lu)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const n=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:n:e=Math.min(Math.max(e,0),n)),p0(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:i,lastScrollTop:n}=this;return{top:n,bottom:n+i}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:i}=this.beans,n=i.getRowCount();let s=-1;for(let o=0;o<n;o++){const r=i.getRow(o);if(typeof e=="function"){if(r&&e(r)){s=o;break}}else if(e===r||e===r.data){s=o;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t,i=0){if(gs(this.gos,"print"))return;const{rowModel:n}=this.beans,s=n.getRowCount();if(typeof e!="number"||e<0||e>=s){Se(88,{index:e});return}this.clearRetryListeners();const{frameworkOverrides:o,pageBounds:r,rowContainerHeight:a,rowRenderer:l}=this.beans;o.wrapIncoming(()=>{const c=this.ctrlsSvc.getGridBodyCtrl(),d=n.getRow(e);let p,g,m=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:y,stickyBottomHeight:b}=c,C=d.rowTop,w=d.rowHeight,x=r.getPixelOffset(),M=d.rowTop-x,E=M+d.rowHeight,I=this.getVScrollPosition(),N=a.divStretchOffset,T=I.top+N,P=I.bottom+N,O=P-T,G=a.getScrollPositionForPixel(M),B=a.getScrollPositionForPixel(E-O),z=Math.min((G+B)/2,M),j=T+y>M,X=P-b<E;let q=null;t==="top"?q=G-y:t==="bottom"?q=B+b:t==="middle"?q=z:j?q=G-y:X&&(B-G>O?q=G-y:q=B+b),q!==null&&(this.setVerticalScrollPosition(q),l.redraw({afterScroll:!0})),p=C!==d.rowTop||w!==d.rowHeight,g=y!==c.stickyTopHeight||b!==c.stickyBottomHeight,m++}while((p||g)&&m<10);if(this.animationFrameSvc?.flushAllFrames(),i<10&&(d?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){const y=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const b=this.getVScrollPosition().top;y!==b&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=n.getRowCount())&&this.ensureIndexVisible(e,t,i+1)}})}})}clearRetryListeners(){for(const e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){const{colModel:i,frameworkOverrides:n}=this.beans,s=i.getCol(e);if(!s||s.isPinned()||!this.visibleCols.isColDisplayed(s))return;const o=this.getPositionedHorizontalScroll(s,t);n.wrapIncoming(()=>{o!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:n}=this.isColumnOutsideViewport(e),s=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?i:n)||s,l=r?n:i;t!=="auto"&&(a=t==="start",l=t==="end");const c=t==="middle";if(a||l||c){const{colLeft:d,colMiddle:p,colRight:g}=this.getColumnBounds(e);return c?p-o/2:a?r?g:d:r?d-o:g-o}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:n,colRight:s}=this.getColumnBounds(e),o=this.enableRtl,r=o?t>s:i<s,a=o?i<n:t>n;return{columnBeforeStart:r,columnAfterEnd:a}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleCols.bodyWidth,n=e.getActualWidth(),s=e.getLeft(),o=t?-1:1,r=t?i-s:s,a=r+n*o,l=r+n/2*o;return{colLeft:r,colMiddle:l,colRight:a}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=t,n=e+t;return{start:i,end:n,width:e}}},aN=class extends he{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=gs(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:i}=this.beans,n=t.bodyWidth,s=t.getColsLeftWidth(),o=t.getDisplayedColumnsRightWidth();let r;e?r=n+s+o:(r=n,this.addSpacer&&(this.gos.get("enableRtl")?s:o)===0&&i.verticalScrollShowing&&(r+=i.getScrollbarWidth())),this.callback(r)}},Zbe=class extends he{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:i}=this,n=()=>{Rc(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(n),i.registerBodyViewportResizeListener(n)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const i=this.centerContainerCtrl.getCenterWidth();i!==this.centerWidth&&(this.centerWidth=i,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=OP(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function dx(e,t,i,n){const s=t.getColDef().cellRendererParams?.suppressMouseEventHandling;return Y6(e,t,i,n,s)}function Xbe(e,t,i,n){const s=t?.suppressMouseEventHandling;return Y6(e,void 0,i,n,s)}function Y6(e,t,i,n,s){return s?s($e(e,{column:t,node:i,event:n})):!1}function K6(e,t,i){let n=t;for(;n;){const s=ZY(e,n,i);if(s)return s;n=n.parentElement}return null}var R0="cellCtrl";function lN(e,t){return K6(e,t,R0)}var E0="renderedRow";function Qbe(e,t){return K6(e,t,E0)}function Ek(e,t,i,n,s){const o=n?n.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const r=$e(e,{event:t,editing:s,column:n,node:i,data:i.data,colDef:n.getColDef()});return!!(o&&o(r))}function Jbe(e){const{pinnedRowModel:t,rowModel:i}=e,[n,s]=[t?.isEmpty("top")??!0,t?.isEmpty("bottom")??!0],o=n?null:"top";let r,a;s?(r=null,a=i.getRowCount()-1):(r="bottom",a=t?.getPinnedBottomRowCount()??-1);const{visibleCols:l,rangeSvc:c}=e,d=l.allCols;!c||!d?.length||c.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:a,rowEndPinned:r})}var eCe=65,tCe=67,iCe=86,nCe=68,sCe=90,oCe=89;function rCe(e){const{keyCode:t}=e;let i;switch(t){case eCe:i=oe.A;break;case tCe:i=oe.C;break;case iCe:i=oe.V;break;case nCe:i=oe.D;break;case sCe:i=oe.Z;break;case oCe:i=oe.Y;break;default:i=e.code}return i}var aCe=class extends he{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){const t=["dblclick","contextmenu","mouseover","mouseout","click",NY("touchstart")?"touchstart":"mousedown"];for(const i of t){const n=this.processMouseEvent.bind(this,i);this.addManagedElementListeners(this.element,{[i]:n})}}processMouseEvent(e,t){if(!jv(this.beans,t)||tc(t))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(i?.column&&i.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,n,i)):(i&&i.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:lN(t,e),rowCtrl:Qbe(t,e)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):n?.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,i){const n=this.editSvc?.isEditing(e,{withOpenEditor:!0})??!1;!Ek(this.gos,i,e.rowNode,e.column,n)&&t==="keydown"&&(!n&&this.beans.navigation?.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,n),M6(i)&&e.processCharacter(i)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const{rowNode:n}=e,{focusSvc:s,navigation:o}=this.beans,a=s.getFocusedCell()?.column;if(!Ek(this.gos,i,n,a,!1)){const c=i.key;if(t==="keydown")switch(c){case oe.PAGE_HOME:case oe.PAGE_END:case oe.PAGE_UP:case oe.PAGE_DOWN:o?.handlePageScrollingKey(i,!0);break;case oe.LEFT:case oe.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case oe.UP:case oe.DOWN:e.onKeyboardNavigate(i);break;case oe.TAB:e.onTabKeyDown(i);break}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!jv(this.beans,e))return;const i=rCe(e),{clipboardSvc:n,undoRedo:s}=this.beans;if(i===oe.A)return this.onCtrlAndA(e);if(i===oe.C)return this.onCtrlAndC(n,e);if(i===oe.D)return this.onCtrlAndD(n,e);if(i===oe.V)return this.onCtrlAndV(n,e);if(i===oe.X)return this.onCtrlAndX(n,e);if(i===oe.Y)return this.onCtrlAndY(s);if(i===oe.Z)return this.onCtrlAndZ(s,e)}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:i,selectionSvc:n},gos:s}=this;i&&Nu(s)&&!Qme(s)&&t.isRowsToRender()?Jbe(this.beans):n&&n.selectAllRowNodes({source:"keyboardSelectAll",selectAll:i6(s)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:i}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(i,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:i}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(i,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){const{cellCtrl:i}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(i,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e?.redo("ui")}},q6=class extends he{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,i=t!=null?`${t}px`:"";this.eContainer.style.height=i,this.eViewport&&(this.eViewport.style.height=i)}},dS=e=>e.topRowCtrls,hS=e=>e.getStickyTopRowCtrls(),pS=e=>e.getStickyBottomRowCtrls(),gS=e=>e.bottomRowCtrls,fS=e=>e.allRowCtrls,IT=e=>e.getCtrls("top"),kT=e=>e.getCtrls("center"),LT=e=>e.getCtrls("bottom"),lCe={center:{type:"center",name:"center-cols",getRowCtrls:fS,getSpannedRowCtrls:kT},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:fS,getSpannedRowCtrls:kT},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:fS,getSpannedRowCtrls:kT},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:fS},topCenter:{type:"center",name:"floating-top",getRowCtrls:dS,getSpannedRowCtrls:IT},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:dS,getSpannedRowCtrls:IT},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:dS,getSpannedRowCtrls:IT},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:dS},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:hS},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:hS},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:hS},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:hS},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:pS},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:pS},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:pS},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:pS},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:gS,getSpannedRowCtrls:LT},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:gS,getSpannedRowCtrls:LT},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:gS,getSpannedRowCtrls:LT},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:gS}};function Z6(e){return`ag-${pC(e).name}-viewport`}function hx(e){const t=pC(e);return t.container??`ag-${t.name}-container`}function cCe(e){return`ag-${pC(e).name}-spanned-cells-container`}function pC(e){return lCe[e]}var uCe=["topCenter","topLeft","topRight"],dCe=["bottomCenter","bottomLeft","bottomRight"],hCe=["center","left","right"],pCe=["center","left","right","fullWidth"],gCe=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],fCe=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],mCe=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],X6=["stickyTopCenter","stickyTopLeft","stickyTopRight"],Q6=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],yCe=[...X6,"stickyTopFullWidth",...Q6,"stickyBottomFullWidth"],vCe=[...uCe,...dCe,...hCe,...X6,...Q6],bCe=class extends he{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=pC(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new Zbe(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,i,n){this.comp=e,this.eContainer=t,this.eSpannedContainer=i,this.eViewport=n,this.createManagedBean(new aCe(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:s,rangeSvc:o}=this.beans,r=()=>this.onPinnedWidthChanged();this.forContainers(fCe,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(s?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:r})}),this.forContainers(mCe,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(s?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:r})}),this.forContainers(pCe,()=>this.createManagedBean(new q6(this.eContainer,this.name==="center"?n:void 0))),o&&this.forContainers(vCe,()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer))),this.forContainers(gCe,()=>this.createManagedBean(new aN(a=>this.comp.setContainerWidth(`${a}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i,displayedColumnsWidthChanged:i,displayedRowsChanged:n=>this.onDisplayedRowsChanged(n.afterScroll)}),i(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const n=this.options.getSpannedRowCtrls(e);n&&this.comp.setSpannedRowCtrls(n,!1)}})}listenOnDomOrder(){if(yCe.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const i=this.gos.get("ensureDomOrder"),n=gs(this.gos,"print");this.comp.setDomOrder(i||n)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=i=>{e.dragging&&i.cancelable&&i.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Hv(this.eViewport)}getCenterViewportScrollLeft(){return h0(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=Ac(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return kY(this.eViewport)}getViewportScrollLeft(){return h0(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||GP(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){p0(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const i=gs(this.gos,"print"),s=this.gos.get("embedFullWidthRows")||i,o=t.filter(r=>{const a=r.isFullWidth();return this.options.fullWidth?!s&&a:s||!a});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},CCe="ag-force-vertical-scroll",wCe="ag-selectable",SCe="ag-column-moving",xCe=class extends he{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,i,n,s,o,r){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=n,this.eBottom=s,this.eStickyTop=o,this.eStickyBottom=r,this.eCenterColsViewport=i.querySelector(`.${Z6("center")}`),this.eFullWidthContainer=i.querySelector(`.${hx("fullWidth")}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${hx("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=r.querySelector(`.${hx("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new rN(this.comp)),this.scrollFeature=this.createManagedBean(new qbe(i)),this.beans.rowDragSvc?.setupRowDrag(i,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,i,s,o,r]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(n),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),i=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:i,rowResizeEnded:i}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const i=t&&e.getScrollbarWidth()||0,n=x6()?16:0,s=`calc(100% + ${i+n}px)`;Rc(this.beans,()=>this.comp.setBodyViewportWidth(s)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let i=this.gos.get("treeData");if(!i){const n=t.isPivotMode();i=(e?e.columns.length:0)>=(n?2:1)}this.comp.setGridRootRole(i?"treegrid":"grid")}addFocusListeners(e){for(const t of e)this.addManagedElementListeners(t,{focusin:i=>{const{target:n}=i,s=ah(n,"ag-root",t);t.classList.toggle("ag-has-focus",!s)},focusout:i=>{const{target:n,relatedTarget:s}=i,o=t.contains(s),r=ah(s,"ag-root",t);ah(n,"ag-root",t)||(!o||r)&&t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss(SCe,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(wCe,e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){const e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,i=t.isLastRowIndexKnown()?t.getRowCount():-1,n=i===-1?-1:e+i;this.comp.setRowCount(n)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?CCe:null,i=gs(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&LY(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let i=t.sizesMeasured;const n=()=>{const s=i&&_g(this.gos)&&!e.stretching,o=s?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(o,s)};n(),this.addManagedEventListeners({heightScaleChanged:n}),this.addManagedPropertyListener("animateRows",n),this.addManagedEventListeners({gridStylesChanged:()=>{!i&&t.sizesMeasured&&(i=!0,n())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:i,eTop:n,eBottom:s,beans:{popupSvc:o,touchSvc:r}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),r?.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,o)});const l=this.onStickyWheel.bind(this);for(const d of[t,i,n,s])this.addManagedElementListeners(d,{wheel:l});const c=this.onHorizontalWheel.bind(this);for(const d of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(d).eContainer,{wheel:c});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&jv(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:n}=e||t;(n===this.eBodyViewport||n===this.ctrlsSvc.get("center").eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,i=e?.getPinnedTopTotalHeight(),n=e?.getPinnedBottomTotalHeight(),s=t.getPinnedRowBorderWidth(),o=t.getRowBorderWidth(),r=s-o,a=i?r+i:0,l=n?r+n:0;this.comp.setTopHeight(a),this.comp.setBottomHeight(l),this.comp.setTopInvisible(a<=0),this.comp.setBottomInvisible(l<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){const t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),i=this.pinnedRowModel?.getPinnedTopTotalHeight()??0;let n=0;t>0&&(n+=t),i>0&&(n+=i),n>0&&(n+=1),this.comp.setStickyTopTop(`${n}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:i}=this,n=e?.getPinnedBottomTotalHeight()??0,o=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,r=n+o;i.setStickyBottomBottom(`${r}px`)}};function MCe(e,t){return lN(e,t.target)?.getFocusedCellPosition()??null}function Pz(e,t){const i=gs(e.gos,"normal"),n=t;let s,o;n.clientX!=null||n.clientY!=null?(s=n.clientX,o=n.clientY):(s=n.x,o=n.y);const{pageFirstPixel:r}=e.pageBounds.getCurrentPagePixelRange();if(o+=r,i){const a=e.ctrlsSvc.getScrollFeature(),l=a.getVScrollPosition(),c=a.getHScrollPosition();s+=c.left,o+=l.top}return{x:s,y:o}}var J6=class extends qi{constructor(e,t){super(),this.direction=t,this.eViewport=je,this.eContainer=je,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",w6()||dh())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=x6(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),i=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),Rc(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;Ame(this,()=>Dc(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},DCe={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},ACe=class extends J6{constructor(){super(DCe,"horizontal"),this.eLeftSpacer=je,this.eRightSpacer=je,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new aN(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,n=this.scrollVisibleSvc.getScrollbarWidth();i&&(t+=n),ja(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=n);let s=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(s+=n),ja(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=n)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),n=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=i?0:n===0&&t?16:n,r=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),qy(this.getGui(),o),qy(this.eViewport,o),qy(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(r,100):r()}getScrollPosition(){return h0(this.eViewport,this.enableRtl)}setScrollPosition(e){Dc(this.eViewport)||this.attemptSettingScrollPosition(e),p0(this.eViewport,e,this.enableRtl)}},RCe={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},ECe=class extends J6{constructor(){super(RCe,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new q6(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,i=this.invisibleScrollbar,n=t&&e.getScrollbarWidth()||0,s=n===0&&i?16:n;this.toggleCss("ag-scrollbar-invisible",i),ja(this.getGui(),s),ja(this.eViewport,s),ja(this.eContainer,s),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const i=e.getGridBodyCtrl().eBodyViewport,n=this.getScrollPosition(),s=i.scrollTop;n!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Dc(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},TCe="ag-column-first",ICe="ag-column-last";function eK(e,t,i,n){return ki(e)?[]:LCe(e.headerClass,e,t,i,n)}function tK(e,t,i){e.toggleCss(TCe,i.isColAtEdge(t,"first")),e.toggleCss(ICe,i.isColAtEdge(t,"last"))}function kCe(e,t,i,n){return $e(t,{colDef:e,column:i,columnGroup:n})}function LCe(e,t,i,n,s){if(ki(e))return[];let o;if(typeof e=="function"){const r=kCe(t,i,n,s);o=e(r)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}function PCe(e,t,i){t.addManagedElementListeners(i,{keydown:n=>{if(!n.defaultPrevented&&n.key===oe.TAB){const s=n.shiftKey;np(e,i,!1,s)||Af(e,s)&&n.preventDefault()}}})}function NCe(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function hh(e){return e.gos.get("suppressHeaderFocus")||!!e.overlays?.isExclusive()}function LD(e){return e.gos.get("suppressCellFocus")||!!e.overlays?.isExclusive()}function Af(e,t,i=!1){const n=e.ctrlsSvc.get("gridCtrl");return!i&&n.focusNextInnerContainer(t)?!0:((i||!t&&!n.isDetailGrid())&&n.forceFocusOutOfContainer(t),!1)}function Oa(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function cN(e){const t=[],i=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const n of i){if(!n)continue;const s=n.getGroupRowCount()||0;for(let o=0;o<s;o++){const r=n.getGroupRowCtrlAtIndex(o),a=t[o];if(r){const l=FCe(e,r);(a==null||l>a)&&(t[o]=l)}}}return t}function FCe(e,t){let n=e.colModel.isPivotMode()?BCe(e):nK(e);const s=t.getHeaderCellCtrls();for(const o of s){const{column:r}=o,a=r.getAutoHeaderHeight();a!=null&&a>n&&r.isAutoHeaderHeight()&&(n=a)}return n}function uN(e){let i=e.colModel.isPivotMode()?OCe(e):gC(e);return e.colModel.forAllCols(n=>{const s=n.getAutoHeaderHeight();s!=null&&s>i&&n.isAutoHeaderHeight()&&(i=s)}),i}function gC(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function iK(e){return e.gos.get("floatingFiltersHeight")??gC(e)}function nK(e){return e.gos.get("groupHeaderHeight")??gC(e)}function OCe(e){return e.gos.get("pivotHeaderHeight")??gC(e)}function BCe(e){return e.gos.get("pivotGroupHeaderHeight")??nK(e)}function GCe(e,t){return e.headerRowIndex===t.headerRowIndex&&e.column===t.column}var _Ce=class extends he{setComp(e,t,i){this.comp=e,this.eGui=t;const{beans:n}=this,{headerNavigation:s,touchSvc:o,ctrlsSvc:r}=n;s&&this.createManagedBean(new om(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,n),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,n)}),this.onPivotModeChanged(n),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),o?.mockHeaderContextMenu(this,a),r.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>Rc(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){const{beans:e}=this;let t=0;const i=cN(e).reduce((o,r)=>o+r,0),n=uN(e);if(e.filterManager?.hasFloatingFilters()&&(t+=iK(e)),t+=i,t+=n,this.headerHeight===t)return;this.headerHeight=t;const s=`${t+1}px`;this.comp.setHeightAndMinHeight(s),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const i=e.visibleCols.allCols.some(n=>n.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",i)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,n=i!==t?"LEFT":"RIGHT",{beans:s}=this,{headerNavigation:o,focusSvc:r}=s;(o.navigateHorizontally(n,!0,e)||!i&&r.focusOverlay(!1)||Af(s,i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:i}=this.beans;switch(e.key){case oe.LEFT:t="LEFT";case oe.RIGHT:{Pe(t)||(t="RIGHT"),i.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case oe.UP:t="UP";case oe.DOWN:{Pe(t)||(t="DOWN"),i.navigateVertically(t,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:i,beans:n}=this;!t&&i.contains($i(n))||i.contains(t)||(n.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,i){const{menuSvc:n,ctrlsSvc:s}=this.beans;if(!e&&!i||!n?.isHeaderContextMenuEnabled())return;const{target:o}=e??t;(o===this.eGui||o===s.getHeaderRowContainerCtrl()?.eViewport)&&n.showHeaderContextMenu(void 0,e,i)}},dN=class extends he{constructor(e,t,i,n){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=n,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?fi(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,i=e.get("suppressColumnMoveAnimation"),n=Pe(this.columnOrGroup.getOldLeft());t?.isActive()&&n&&!i?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),i=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=i,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===i&&this.setLeft(i)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:i,visibleCols:n}=this.beans;if(!gs(i,"print")||e.getPinned()==="left")return t;const o=n.getColsLeftWidth();if(e.getPinned()==="right"){const r=n.bodyWidth;return o+r+t}return o+t}setLeft(e){if(Pe(e)&&(this.eCell.style.left=`${e}px`),dn(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&nme(this.ariaEl,t.length)}}},VCe=0,sK="headerCtrl",hN=class extends he{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+VCe++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,i,n,s){t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,i,n,s),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.beans.focusSvc.focusedHeader,n=i.getDefinition(),s=n?.suppressHeaderKeyboardEvent;if(!Pe(s))return!1;const o=$e(this.gos,{colDef:n,column:i,headerRowIndex:t,event:e});return!!s(o)}getWrapperHasFocus(){return $i(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let i;if(typeof t=="function"){const n=this.getHeaderClassParams();i=t(n)}else i=t;i&&this.comp.setUserStyles(i)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:i,compBean:n}=e,{beans:s}=this,o=p=>{if(!this.isAlive()||!n.isAlive())return;const{paddingTop:g,paddingBottom:m,borderBottomWidth:y,borderTopWidth:b}=Jh(this.eGui),C=g+m+y+b,x=t.offsetHeight+C;if(p<5){const E=!Kn(s)?.contains(t),I=x==0;if(E||I){dk(()=>o(p+1),"raf",s);return}}this.setColHeaderHeight(this.column,x)};let r=!1,a;const l=()=>{const p=this.column.isAutoHeaderHeight();p&&!r&&c(),!p&&r&&d()},c=()=>{r=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),o(0),a=Ac(this.beans,t,()=>o(0))},d=()=>{r=!1,a&&a(),this.comp.toggleCss("ag-header-cell-auto-height",!1),a=void 0};l(),n.addDestroyFunc(()=>d()),n.addManagedListeners(this.column,{widthChanged:()=>r&&o(0)}),n.addManagedEventListeners({sortChanged:()=>{r&&window.setTimeout(()=>o(0))}}),i&&i(l)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:i,eGui:n}=this;!e||!t||!n||(tK(e,t,i.visibleCols),AY(n,i.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=hh(this.beans);this.eGui&&Oo(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=$i(this.beans),i=e.key===oe.LEFT||e.key===oe.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i))return;const s=e.key===oe.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const o=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(o,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(s)}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:i}=this.beans;return i?i.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:i}=this;let n=e.key===oe.LEFT!==t.get("enableRtl");const s=i.getPinned(),o=t.get("enableRtl");return s&&o!==(s==="right")&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case oe.PAGE_DOWN:case oe.PAGE_UP:case oe.PAGE_HOME:case oe.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=sK,{eGui:i,gos:n}=this;Eh(n,i,t,this),e.addDestroyFunc(()=>Eh(n,i,t,null))}focus(e){if(!this.isAlive())return!1;const{eGui:t}=this;return t?(t.focus(),this.lastFocusEvent=e||null):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const n=e??t,{menuSvc:s,gos:o}=this.beans;o.get("preventDefaultOnContextMenu")&&n.preventDefault(),s?.isHeaderContextMenuEnabled(i)&&s.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:i}=this;e.isColumn?i.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):i.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},zCe=class extends hN{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,i,n,s){this.comp=e;const{rowCtrl:o,column:r,beans:a}=this,{colResize:l,context:c,colHover:d,rangeSvc:p}=a,g=uC(this,c,s);this.setGui(t,g),this.updateState(),this.setupWidth(g),this.setupMovingCss(g),this.setupMenuClass(g),this.setupSortableClass(g),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:n,checkMeasuringCallback:y=>this.setRefreshFunction("measuring",y),compBean:g}),this.addColumnHoverListener(g),this.setupFilterClass(g),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(g),this.setupSelectAll(g),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=g.createManagedBean(l.createResizeFeature(o.pinned,r,i,e,this)):_i(i,!1),d?.createHoverFeature(g,[r],t),p?.createRangeHighlightFeature(g,r,e),g.createManagedBean(new dN(r,t,a)),g.createManagedBean(new om(t,{shouldStopEventPropagation:y=>this.shouldStopEventPropagation(y),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(g),g.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),g.addManagedListeners(r,{colDefChanged:()=>this.refresh()}),g.addManagedListeners(r,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const m=()=>this.checkDisplayName();g.addManagedEventListeners({columnValueChanged:m,columnRowGroupChanged:m,columnPivotChanged:m,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),g.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return $e(t.gos,{colDef:i,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return Zye(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:i,gos:n}=this.beans;return $e(n,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!i&&(!this.openFilterEnabled||Bo(this.gos)),showColumnMenu:(o,r)=>{e?.showColumnMenu({column:this.column,buttonElement:o,positionBy:"button",onClosedCallback:r})},showColumnMenuAfterMouseClick:(o,r)=>{e?.showColumnMenu({column:this.column,mouseEvent:o,positionBy:"mouse",onClosedCallback:r})},showFilter:o=>{e?.showFilterMenu({column:this.column,buttonElement:o,containerType:"columnFilter",positionBy:"button"})},progressSort:o=>{t?.progressSort(this.column,!!o,"uiColumnSorted")},setSort:(o,r)=>{t?.setSortForColumn(this.column,o,!!r,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(o,r)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(o,r)}})}setupSelectAll(e){const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature?.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{const i=t.createSelectAllFeature(this.column);i&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(i),this.selectAllFeature?.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!i&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===oe.SPACE&&this.selectAllFeature?.onSpaceKeyDown(e),e.key===oe.ENTER&&this.onEnterKeyDown(e),e.key===oe.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&this.beans.sortSvc?.progressSort(this.column,e.shiftKey,"uiColumnSorted")}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();Nz(i)&&i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),Cve()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),i=eK(t,this.gos,this.column,null),n=this.userHeaderClasses;this.userHeaderClasses=new Set(i);for(const s of i)n.has(s)?n.delete(s):this.comp.toggleCss(s,!0);for(const s of n)this.comp.toggleCss(s,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(const e of Object.values(this.refreshFunctions))e()}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const i=this.column.getActualWidth();this.comp.setWidth(`${i}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp?.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const i=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",i),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,i=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:n}=this,s=cN(this.beans),o=s.reduce((g,m)=>g+m,0)===0;if(i.toggleCss("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.toggleCss("ag-header-span-height",!1),i.toggleCss("ag-header-span-total",!1);return}const{numberOfParents:r,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.toggleCss("ag-header-span-height",r>0);const l=uN(n);if(r===0){i.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${l}px`);return}i.toggleCss("ag-header-span-total",a);const c=(this.column.getFirstRealParent()?.getLevel()??-1)+1,d=s.length-c;let p=0;for(let g=0;g<d;g++)p+=s[s.length-1-g];e.style.setProperty("top",`${-p}px`),e.style.setProperty("height",`${l+p}px`)}refreshAriaSort(){if(this.sortable){const e=this.getLocaleTextFunc(),t=this.beans.sortSvc?.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort($fe(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!Bo(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains($i(this.beans)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,i)=>t==="filter"?-1:i.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnounce?.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=s=>this.handleMouseOverChange(s.type==="mouseenter"),i=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},n=s=>this.handleContextMenuMouseEvent(s,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:i,contextmenu:n})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return Nz(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function Nz(e){return typeof e?.getAnchorElementForMenu=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var HCe=0,PT=class extends he{constructor(e,t,i){super(),this.rowIndex=e,this.pinned=t,this.type=i,this.instanceId=HCe++,this.comp=null,this.allCtrls=[];let n="ag-header-row-column";i==="group"?n="ag-header-row-group":i==="filter"&&(n="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${n}`}setRowIndex(e){this.rowIndex=e,this.comp?.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=gs(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,i=!0){this.comp=e,t=uC(this,this.beans.context,t),i&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),i=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:i,virtualColumnsChanged:n=>this.onVirtualColumnsChanged(n.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",i),e.addManagedPropertyListener("ensureDomOrder",n=>this.isEnsureDomOrder=n.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=gs(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=cN(this.beans);for(let s=0;s<t.length;s++){if(s===this.rowIndex&&this.type==="group")return{topOffset:e,rowHeight:t[s]};e+=t[s]}const i=uN(this.beans);if(this.type==="column")return{topOffset:e,rowHeight:i};e+=i;const n=iK(this.beans);return{topOffset:e,rowHeight:n}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const n of t)this.recycleAndCreateHeaderCtrls(n,this.ctrlsById,e);const i=n=>{const{focusSvc:s,visibleCols:o}=this.beans;return s.isHeaderWrapperFocused(n)?o.isVisible(n.column):!1};if(e)for(const[n,s]of e)i(s)?this.ctrlsById.set(n,s):this.destroyBean(s);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,i){if(e.isEmptyGroup())return;const n=e.getUniqueId();let s;if(i&&(s=i.get(n),i.delete(n)),s&&s.column!=e&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":{s=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":s=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:s=this.createBean(new zCe(e,this));break}t.set(n,s)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];for(const t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(e=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const i=this.allCtrls.find(s=>s.column==e);return i?i.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},jCe=class extends he{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:i,ctrlsSvc:n,colModel:s,colMoves:o}=this.beans;this.setupCenterWidth(),i?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(o,this.eViewport);const r=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:r,advancedFilterEnabledChanged:r});const a=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;n.register(a,this),s.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,filterManager:i,visibleCols:n}=this.beans;let s=0;const o=t.getFocusHeaderToUseAfterRefresh(),r=()=>{const p=n.headerGroupRowCount;s=p,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));const g=this.groupsRowCtrls.length;if(g!==p){if(g>p){for(let m=p;m<g;m++)this.destroyBean(this.groupsRowCtrls[m]);this.groupsRowCtrls.length=p;return}for(let m=g;m<p;m++){const y=this.createBean(new PT(m,this.pinned,"group"));this.groupsRowCtrls.push(y)}}},a=()=>{const p=s++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new PT(p,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==p&&this.columnsRowCtrl.setRowIndex(p)},l=()=>{this.includeFloatingFilter=!!i?.hasFloatingFilters()&&!this.hidden;const p=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){p();return}e||p();const g=s++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==g&&this.filtersRowCtrl.setRowIndex(g):this.filtersRowCtrl=this.createBean(new PT(g,this.pinned,"filter"))},c=this.getAllCtrls();r(),a(),l();const d=this.getAllCtrls();this.comp.setCtrls(d),this.restoreFocusOnHeader(t,o),c.length!==d.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=i=>i?.getHeaderCellCtrls().find(n=>n.column===e);if(Fu(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let i=0;i<this.groupsRowCtrls.length;i++){const n=t(this.groupsRowCtrls[i]);if(n)return n}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,i){const s=this.getAllCtrls()[e];return s?s.focusHeader(t,i):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const i=e?.createBodyDropTarget(this.pinned,t);i&&this.createManagedBean(i)}restoreFocusOnHeader(e,t){if(!t)return;const{column:i}=t;i.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new aN(e=>this.comp.setCenterWidth(`${e}px`),!0))}},WCe=class extends he{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(Oz(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory?.showMenuAfterContextMenuEvent(e,t,i)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}hideFilterMenu(){Oz(this.beans)?.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!this.activeMenuFactory?.isMenuEnabled(e)&&(Bo(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&Fu(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(dh()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!Bo(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.beans.filterManager?.isFilterAllowed(e)&&!Bo(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return Bo(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,i,n){const{positionBy:s,onClosedCallback:o}=t,r=t.column;if(s==="button"){const{buttonElement:a}=t;e?.showMenuAfterButtonClick(r,a,i,o,n)}else if(s==="mouse"){const{mouseEvent:a}=t;e?.showMenuAfterMouseEvent(r,a,i,o,n)}else if(r){const a=this.beans,l=a.ctrlsSvc;l.getScrollFeature().ensureColumnVisible(r,"auto"),Rc(a,()=>{const c=l.getHeaderRowContainerCtrl(r.getPinned())?.getHeaderCtrlForColumn(r);c&&e?.showMenuAfterButtonClick(r,c.getAnchorElementForMenu(n),i,o,n)})}}};function Fz(e,t,i){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",i))}function Oz(e){const{enterpriseMenuFactory:t,filterMenuFactory:i,gos:n}=e;return t&&Bo(n)?t:i}var PD=class extends qP{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},oK=class extends qi{constructor(){super()}},UCe={tag:"span",cls:"ag-overlay-loading-center"},$Ce=class extends oK{init(){const e=Ql(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??UCe),!e){const i=this.getLocaleTextFunc()("loadingOoo","Loading...");this.getGui().textContent=i,this.beans.ariaAnnounce.announceValue(i,"overlay")}}},YCe={tag:"span",cls:"ag-overlay-no-rows-center"},KCe=class extends oK{init(){const e=Ql(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??YCe),!e){const i=this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=i,this.beans.ariaAnnounce.announceValue(i,"overlay")}}};function qCe(e,t,i){const n=wr(e,t,i);if(n){const{className:o}=n;if(typeof o=="string"&&o.includes("ag-icon")||typeof o=="object"&&o["ag-icon"])return n}const s=Zs({tag:"span"});return s.appendChild(n),s}function wr(e,t,i){let n=null;e==="smallDown"?Se(262):e==="smallLeft"?Se(263):e==="smallRight"&&Se(264);const s=i?.getColDef().icons;if(s&&(n=s[e]),t.gos&&!n){const o=t.gos.get("icons");o&&(n=o[e])}if(n){let o;if(typeof n=="function")o=n();else if(typeof n=="string")o=n;else{Se(38,{iconName:e});return}if(typeof o=="string")return BP(o);if(VP(o))return o;Se(133,{iconName:e});return}else{const o=t.registry.getIcon(e);return o||t.validation?.validateIcon(e),Zs({tag:"span",cls:`ag-icon ag-icon-${o??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var ZCe=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}",XCe={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},QCe=class extends qi{constructor(){super(),this.dragSource=null,this.eIcon=je,this.eLabel=je,this.eGhost=je,this.registerCSS(ZCe)}postConstruct(){const e=t=>qCe(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(XCe),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eGhost:i,eIcon:n,dragSource:s,dropIconMap:o,gos:r}=this;bo(n);let a=null;e||(e=s?.getDefaultIconName?s.getDefaultIconName():"notAllowed"),a=o[e],i.classList.toggle("ag-dnd-ghost-not-allowed",e==="notAllowed"),n.classList.toggle("ag-shake-left-to-right",t),!(a===o.hide&&r.get("suppressDragLeaveHidesColumns"))&&a&&n.appendChild(a)}setLabel(e){this.eLabel.textContent=e}},JCe=".ag-checkbox-cell{height:100%}",ewe={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},twe=class extends qi{constructor(){super(ewe,[QP]),this.eCheckbox=je,this.registerCSS(JCe)}init(t){this.refresh(t);const{eCheckbox:i,beans:n}=this,s=i.getInputElement();s.setAttribute("tabindex","-1"),xY(s,"polite"),this.addManagedListeners(s,{click:o=>{if(Ih(o),i.isDisabled())return;const r=i.getValue();this.onCheckboxChanged(r)},dblclick:o=>{Ih(o)}}),this.addManagedElementListeners(t.eGridCell,{keydown:o=>{if(o.key===oe.SPACE&&!i.isDisabled()){t.eGridCell===$i(n)&&i.toggle();const r=i.getValue();this.onCheckboxChanged(r),o.preventDefault()}}})}refresh(t){return this.params=t,this.updateCheckbox(t),!0}updateCheckbox(t){let i,n=!0;const{value:s,column:o,node:r}=t;if(r.group&&o)if(typeof s=="boolean")i=s;else{const g=o.getColId();g.startsWith(ED)?i=s==null||s===""?void 0:s==="true":r.aggData&&r.aggData[g]!==void 0||r.sourceRowIndex>=0?i=s??void 0:n=!1}else i=s??void 0;const{eCheckbox:a}=this;if(!n){a.setDisplayed(!1);return}a.setValue(i);const l=t.disabled??!o?.isCellEditable(r);a.setDisabled(l);const c=this.getLocaleTextFunc(),d=RD(c,i),p=l?d:`${c("ariaToggleCellValue","Press SPACE to toggle cell value")} (${d})`;a.setInputAriaLabel(p)}onCheckboxChanged(t){const{params:i}=this,{column:n,node:s,value:o}=i;this.beans?.editSvc?.setEditingCells([{column:n,colId:n.getColId(),rowIndex:s.rowIndex,rowPinned:s.rowPinned,state:"changed",oldValue:o,newValue:o}],{update:!0,forceRefreshOfEditCellsOnly:!0});const r=s.setDataValue(n,t,"renderer");this.beans.editSvc?.stopEditing({rowNode:s,column:n},{source:this.beans.editSvc?.isBatchEditing()?"ui":"api"}),r||this.updateCheckbox(i)}},Bz=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){const{all:t,visible:i,order:n}=this;t.has(e)||(t.add(e),i.add(e),n.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),ea(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(const t of this.visible)if(t.id==e)return t}clear(){const{all:e,visible:t,order:i,queued:n}=this;e.clear(),n.clear(),t.clear(),i.length=0}sort(){const{sortSvc:e,rowNodeSorter:t,gos:i}=this.beans,n=e?.getSortOptions()??[],s=swe(this.order);if(this.order.sort((r,a)=>(r.pinnedSibling?.rowIndex??0)-(a.pinnedSibling?.rowIndex??0)),this.order=t?.doFullSort(this.order,n)??this.order,!s)return;const o=QY(i);o==="bottom"||o==="pinnedBottom"?this.order.push(s):this.order.unshift(s)}hide(e){const{all:t,visible:i}=this;t.forEach(n=>e(n)?i.delete(n):i.add(n)),this.order=Array.from(i),this.sort()}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function rK(e){if(e.level===-1)return!0;const t=e.parent;return t?.childrenAfterSort?.some(i=>i==e)?rK(t):!1}function NT(e,t){const{gos:i,rowModel:n,filterManager:s}=e;return tp(i)?!n.getRowNode(t.id):s?.isAnyFilterPresent()?!rK(t):i.get("pivotMode")?!t.group:!1}function iwe(e){return!!e.footer&&e.level===-1}function nwe(e){return!!e.pinnedSibling&&iwe(e.pinnedSibling)}function swe(e){const t=e.findIndex(nwe);if(t>-1)return e.splice(t,1)?.[0]}var Gz=class extends he{postConstruct(){const{gos:e,beans:t}=this;this.top=new Bz(t,"top"),this.bottom=new Bz(t,"bottom");const i=s=>NT(t,s.pinnedSibling),n=()=>{const s=e.get("isRowPinned");s&&e.get("enableRowPinning")&&t.rowModel.forEachNode(o=>this.pinRow(o,s(o)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:s})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow(),this.forContainers(r=>r.hide(i));const o=this.refreshRowPositions();(!s||o)&&this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(rwe),this.refreshRowPositions()},rowNodeDataChanged:({node:s})=>{(e.get("isRowPinnable")?.(s)??!0)||this.pinRow(s,null)},firstDataRendered:n}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(s=>s.hide(i)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:s})=>{this._grandTotalPinned=s==="pinnedBottom"?"bottom":s==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",n)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(t=>{const i=[];t.forEach(n=>i.push(n)),i.forEach(n=>this.pinRow(n,null)),t.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,i){if(e.footer&&e.level>-1)return;if(e.footer&&e.level===-1){this._grandTotalPinned=t,lwe(this.beans);return}const n=e.rowPinned??e.pinnedSibling?.rowPinned;if(n!=null&&t!=null&&t!=n){const r=e.rowPinned?e:e.pinnedSibling,a=e.rowPinned?e.pinnedSibling:e;this.pinRow(r,null,i),this.pinRow(a,t,i);return}const o=i&&awe(this.beans,e,i);if(o){o.forEach(r=>this.pinRow(r,t));return}if(t==null){const r=e.rowPinned?e:e.pinnedSibling,a=this.findPinnedRowNode(r);if(!a)return;a.delete(r);const l=r.pinnedSibling;FT(r),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(l)}else{const r=_z(this.beans,e,t),a=this.getContainer(t);a.add(r),NT(this.beans,e)&&a.hide(l=>NT(this.beans,l.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0;const i=n=>{if(n.rowHeightEstimated){const s=Pu(this.beans,n);n.setRowTop(t),n.setRowHeight(s.height),t+=s.height,e=!0}};return this.bottom.forEach(i),t=0,this.top.forEach(i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return Vz(this.top)}getPinnedBottomTotalHeight(){return Vz(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){const e=t=>{const i=[];return this.forEachPinnedRow(t,n=>i.push(n.pinnedSibling.id)),i};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,i)=>{for(const n of e[i]){const s=this.beans.rowModel.getRowNode(n);s?this.pinRow(s,i):t.queue(n)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{const i=new Set;e.forEachQueued(n=>{const s=this.beans.rowModel.getRowNode(n);s&&i.add(s)});for(const n of i)e.unqueue(n.id),this.pinRow(n,t)})}pinGrandTotalRow(){const{gos:e,beans:t,_grandTotalPinned:i}=this,n=t.rowModel;if(!en(e))return;const s=n.rootNode?.sibling;if(!s)return;const o=s.pinnedSibling,r=o&&this.findPinnedRowNode(o);if(i){if(r&&r.floating!==i&&(r.delete(o),FT(o)),!r||r.floating!==i){const a=_z(t,s,i);this.getContainer(i).add(a)}}else{if(!r)return;r.delete(o),FT(o)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(t=>t.forEach(i=>i.setRowHeight(i.rowHeight,!0)))}getContainer(e){return e==="top"?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){const t=n=>owe(this.beans,n);if(e)return t(this.getContainer(e));let i=!1;return this.forContainers(n=>{const s=t(n);i||(i=s)}),i}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e?.dispatchRowEvent("rowPinned")}};function owe(e,t){let i=0,n=!1;return t.forEach((s,o)=>{if(n||(n=s.rowTop!==i),s.setRowTop(i),s.rowHeightEstimated||s.rowHeight==null){const r=Pu(e,s).height;n||(n=s.rowHeight!==r),s.setRowHeight(r)}s.setRowIndex(o),i+=s.rowHeight}),n}function _z(e,t,i){if(t.pinnedSibling)return t.pinnedSibling;const n=Ibe(t,e);n.setRowTop(null),n.setRowIndex(null),n.rowPinned=i;const s=i==="top"?nN:sN;return n.id=`${s}${i}-${t.id}`,n.pinnedSibling=t,t.pinnedSibling=n,n}function FT(e){if(!e.pinnedSibling)return;e.rowPinned=null,e.setRowTop(null),e.setRowIndex(null);const t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function rwe(e){const t=new Set;e.forEach(i=>{i.group&&t.add(i)}),t.forEach(i=>e.delete(i))}function awe(e,t,i){const{rowSpanSvc:n}=e,s=(i&&n?.isCellSpanning(i,t))??!1;if(i&&s)return n?.getCellSpan(i,t)?.spannedNodes}function Vz(e){const t=e.size();if(t===0)return 0;const i=e.getByIndex(t-1);return i===void 0?0:i.rowTop+i.rowHeight}function lwe({gos:e,rowModel:t}){en(e)&&t.refreshModel({step:"map"})}var zz=class extends he{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){const t=i=>{i.setRowHeight(i.rowHeight,!0)};yy(this.pinnedBottomRows,t),yy(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0;const i=n=>{if(n.rowHeightEstimated){const s=Pu(this.beans,n);n.setRowTop(t),n.setRowHeight(s.height),t+=s.height,e=!0}};return yy(this.pinnedBottomRows,i),t=0,yy(this.pinnedTopRows,i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i=this.getCache(t);if(e===void 0){i.order.length=0,i.cache={};return}const n=xf(this.gos),s=t==="top"?nN:sN,o=new Set(i.order),r=[],a=new Set;let l=0,c=-1;for(const d of e){const p=n?.({data:d,level:0,rowPinned:t})??s+this.nextId++;if(a.has(p)){Se(96,{id:p,data:d});continue}c++,a.add(p),r.push(p);const g=Jy(i,p);if(g!==void 0)g.data!==d&&g.updateData(d),l+=this.setRowTopAndRowIndex(g,l,c),o.delete(p);else{const m=new Ou(this.beans);m.id=p,m.data=d,m.rowPinned=t,l+=this.setRowTopAndRowIndex(m,l,c),i.cache[p]=m,i.order.push(p)}}for(const d of o)Jy(i,d)?.clearRowTopAndRowIndex(),delete i.cache[d];i.order=r}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(Pu(this.beans,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return Hz(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return Hz(this.pinnedBottomRows)}getPinnedTopRowCount(){return Ik(this.pinnedTopRows)}getPinnedBottomRowCount(){return Ik(this.pinnedBottomRows)}getPinnedTopRow(e){return Tk(this.pinnedTopRows,e)}getPinnedBottomRow(e){return Tk(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return Jy(this.getCache(t),e)}forEachPinnedRow(e,t){return yy(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function Hz(e){const t=Ik(e);if(t===0)return 0;const i=Tk(e,t-1);return i===void 0?0:i.rowTop+i.rowHeight}function Jy(e,t){return e.cache[t]}function Tk(e,t){return Jy(e,e.order[t])}function yy(e,t){e.order.forEach((i,n)=>{const s=Jy(e,i);s&&t(s,n)})}function Ik(e){return e.order.length}var cwe=class extends he{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){const{gos:e}=this,t=()=>{const i=e.get("enableRowPinning"),n=QY(e),o=!!i||(n==="pinnedBottom"||n==="pinnedTop"),r=o?this.inner instanceof zz:this.inner instanceof Gz;this.inner&&r&&this.destroyBean(this.inner),(r||!this.inner)&&(this.inner=this.createManagedBean(o?new Gz:new zz))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,i){return this.inner.pinRow(e,t,i)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}};function fC(e){return!!(e.rowPinned&&e.pinnedSibling)}function hr(e,t,i,n){const s=t==="top";if(!i)return hr(e,t,s?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),n);if(!n){const l=s?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return hr(e,t,i,s?e.getPinnedTopRow(l-1):e.getPinnedBottomRow(l-1))}let o=!1,r=!1;const a=[];return e.forEachPinnedRow(t,l=>{if(l===i&&!o){o=!0,a.push(l);return}if(o&&l===n){r=!0,a.push(l);return}o&&!r&&a.push(l)}),a}var uwe={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},dwe=class extends qi{constructor(){super(uwe,[QP]),this.eCheckbox=je}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:i}=this,n=t.isSelected(),s=RD(e,n),[o,r]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(o,r);i.setValue(n,!0),i.setInputAriaLabel(`${a} (${s})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:Ih,click:n=>{Ih(n),this.beans.selectionSvc?.handleSelectionEvent(n,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:n,previousValue:s})=>{const o=typeof n=="object"?yT(n):void 0,r=typeof s=="object"?yT(s):void 0;o!==r&&this.onSelectableChanged()}),mk(this.gos)||typeof this.getIsVisible()=="function"){const n=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n}),this.addManagedListeners(this.rowNode,{dataChanged:n,cellChanged:n}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:i,gos:n}=this,s=t.selectable,o=this.getIsVisible();let r;if(typeof o=="function"){const p=i?.callbackParams;if(!e)r=o({...p,node:t,data:t.data});else{const g=e.createColumnFunctionCallbackParams(t);r=o({...p,...g})}}else r=o??!1;const a=s&&!r||!s&&r,l=s||r,c=n.get("rowSelection"),d=c&&typeof c!="string"?!yT(c):!!e?.getColDef().showDisabledCheckboxes;this.setVisible(l&&(a?d:!0)),this.setDisplayed(l&&(a?d:!0)),l&&this.eCheckbox.setDisabled(a),i?.removeHidden&&this.setDisplayed(l)}getIsVisible(){const e=this.overrides;if(e)return e.isVisible;const t=this.gos.get("rowSelection");return t&&typeof t!="string"?Vg(t):this.column?.getColDef()?.checkboxSelection}},hwe=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t;const{rowModel:i,pinnedRowModel:n}=this;return t??(t=i.getRowNode(e)),n?.isManual()&&(t??(t=n.getPinnedRowById(e,"top")),t??(t=n.getPinnedRowById(e,"bottom"))),t}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const i=t[0].id===this.rootId,n=t.findIndex(s=>s.id===e.id);if(n>-1){const s=t.slice(0,n),o=t.slice(n+1);return this.setEndRange(e),i?{keep:s,discard:o}:{keep:o,discard:s}}else return{keep:t,discard:[]}}extend(e,t=!1){const i=this.getRoot();if(i==null){const s=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&s.push(o)),s.push(e),this.setRoot(e),{keep:s,discard:[]}}const n=this.getNodesInRange(i,e);if(!n)return this.setRoot(e),{keep:[e],discard:[]};if(n.find(s=>s.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const s=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:s}}}getNodesInRange(e,t){const{pinnedRowModel:i,rowModel:n}=this;if(!i?.isManual())return n.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&!t.rowPinned)return hr(i,"top",e,void 0).concat(n.getNodesInRangeForSelection(n.getRow(0),t)??[]);if(e.rowPinned==="bottom"&&!t.rowPinned){const s=hr(i,"bottom",void 0,e),o=n.getRowCount(),r=n.getRow(o-1);return(n.getNodesInRangeForSelection(t,r)??[]).concat(s)}if(!e.rowPinned&&!t.rowPinned)return n.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&t.rowPinned==="top")return hr(i,"top",e,t);if(e.rowPinned==="bottom"&&t.rowPinned==="top"){const s=hr(i,"top",t,void 0),o=hr(i,"bottom",void 0,e),r=n.getRow(0),a=n.getRow(n.getRowCount()-1);return s.concat(n.getNodesInRangeForSelection(r,a)??[]).concat(o)}if(!e.rowPinned&&t.rowPinned==="top")return hr(i,"top",t,void 0).concat(n.getNodesInRangeForSelection(n.getRow(0),e)??[]);if(e.rowPinned==="top"&&t.rowPinned==="bottom"){const s=hr(i,"top",e,void 0),o=hr(i,"bottom",void 0,t),r=n.getRow(0),a=n.getRow(n.getRowCount()-1);return s.concat(n.getNodesInRangeForSelection(r,a)??[]).concat(o)}if(e.rowPinned==="bottom"&&t.rowPinned==="bottom")return hr(i,"bottom",e,t);if(!e.rowPinned&&t.rowPinned==="bottom"){const s=hr(i,"bottom",void 0,t),o=n.getRow(n.getRowCount());return(n.getNodesInRangeForSelection(e,o)??[]).concat(s)}return null}},pwe=class extends he{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains($i(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new XP);this.cbSelectAll=t,t.addCss("ag-header-select-all"),Ah(t.getGui(),"presentation"),this.showOrHideSelectAll();const i=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:i,paginationChanged:i,modelUpdated:i}),this.addManagedPropertyListener("rowSelection",({currentValue:n,previousValue:s})=>{const o=r=>typeof r=="string"||!r||r.mode==="singleRow"?void 0:r.selectAll;o(n)!==o(s)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,i=this.cbSelectAll,n=t.getSelectAllState(e);i.setValue(n);const s=t.hasNodesToSelect(e);i.setDisabled(!s),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){const t=this.getLocaleTextFunc(),{headerCellCtrl:i,cbSelectAll:n,cbSelectAllVisible:s}=this,o=n.getValue(),r=RD(t,o),a=t("ariaRowSelectAll","Press Space to toggle all rows selection");i.setAriaDescriptionProperty("selectAll",s?`${a} (${r})`:null),n.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||i.announceAriaDescription()}checkSelectionType(e){return b0(this.gos)?!0:(Se(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:i}=this.beans;return en(t)||tp(t)?!0:(Se(129,{feature:e,rowModel:i.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let i="uiSelectAll";t==="currentPage"?i="uiSelectAllCurrentPage":t==="filtered"&&(i="uiSelectAllFiltered");const n={source:i,selectAll:t},s=this.beans.selectionSvc;e?s.selectAllRowNodes(n):s.deselectAllRowNodes(n)}isCheckboxSelection(){const{column:e,gos:t,beans:i}=this,o=typeof t.get("rowSelection")=="object"?"headerCheckbox":"headerCheckboxSelection";return aK(i,e)&&this.checkRightRowModelType(o)&&this.checkSelectionType(o)}getSelectAllMode(){const e=i6(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:i}=this.column.getColDef();return t?"currentPage":i?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function aK({gos:e,selectionColSvc:t},i){const n=e.get("rowSelection"),s=i.getColDef(),{headerCheckboxSelection:o}=s;let r=!1;if(typeof n=="object"){const l=Ec(i),c=YP(i);(y0(n)==="autoGroupColumn"&&c||l&&t?.isSelectionColumnEnabled())&&(r=rx(n))}else typeof o=="function"?r=o($e(e,{column:i,colDef:s})):r=!!o;return r}var gwe=class extends he{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new hwe(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const i=mk(e);i!==this.isRowSelectable&&(this.isRowSelectable=i,this.updateSelectable())}),this.isRowSelectable=mk(e),this.addManagedEventListeners({cellValueChanged:i=>this.updateRowSelectable(i.node),rowNodeDataChanged:i=>this.updateRowSelectable(i.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new dwe}createSelectAllFeature(e){if(aK(this.beans,e))return new pwe(e)}isMultiSelect(){return b0(this.gos)}onRowCtrlSelected(e,t,i){const n=!!e.rowNode.isSelected();e.forEachGui(i,s=>{s.rowComp.toggleCss("ag-row-selected",n);const o=s.element;RY(o,n),o.contains($i(this.beans))&&t(s)})}announceAriaRowSelection(e){if(this.isRowSelectionBlocked(e))return;const t=e.isSelected(),i=this.beans.editSvc?.isEditing({rowNode:e});if(!e.selectable||i)return;const s=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(s,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!fC(e)||!ch(this.gos)}updateRowSelectable(e,t){const i=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:this.isRowSelectable?.(e)??!0;return this.setRowSelectable(e,i,t),i}setRowSelectable(e,t,i){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),i)return;if(Uv(this.gos)){const s=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:s??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){let t=!1,i=!1;if(!e.childrenAfterGroup?.length)return e.selectable?e.__selected:null;for(let n=0;n<e.childrenAfterGroup.length;n++){const s=e.childrenAfterGroup[n];let o=s.isSelected();if(!s.selectable){const r=this.calculateSelectedFromChildren(s);if(r===null)continue;o=r}switch(o){case!0:t=!0;break;case!1:i=!0;break;default:return}}if(!(t&&i))return t?!0:i?!1:e.selectable?e.__selected:null}selectRowNode(e,t,i,n="api"){const s=!e.selectable&&t,o=e.__selected===t;if(s||o)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const r=e.sibling;r&&r.footer&&r.__localEventService&&r.dispatchRowEvent("rowSelected");const a=e.pinnedSibling;return a?.rowPinned&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({...Ebe(e,this.gos,"rowSelected"),event:i||null,source:n}),!0}isCellCheckboxSelection(e,t){const i=this.gos.get("rowSelection");if(i&&typeof i!="string"){const n=Ec(e)&&Vg(i);return e.isColumnFunc(t,n)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,i,n){const{gos:s,selectionCtx:o}=this,r=e.isSelected(),a=Uv(s),l=qme(s),c=Zme(s),d=this.isMultiSelect(),p=n==="rowClicked";if(p&&!(l||c))return null;if(t&&i&&d){const g=o.getRoot();if(g)if(g.isSelected()){const m=o.isInRange(e)?o.truncate(e):o.extend(e,a);return{deselect:m.discard,select:m.keep,reset:!1}}else{const m=o.extend(e,a);return{select:[],deselect:m.keep,reset:!1}}else return null}else if(t&&d){const g=o.selectAll?this.beans.rowModel.getRow(0):void 0,m=o.getRoot(g),y=o.isInRange(e)?o.truncate(e):o.extend(e,a);return{select:y.keep,deselect:y.discard,reset:o.selectAll||!!(m&&!m.isSelected())}}else if(i){if(p){const g=!r;return g&&!l||!g&&!c?null:(o.setRoot(e),{node:e,newValue:g,clearSelection:!1})}return o.setRoot(e),{node:e,newValue:!r,clearSelection:!d}}else{o.setRoot(e);const g=Xme(s),m=C0(s)==="filteredDescendants",y=p&&(!g||!l);if(m&&r===void 0&&en(s))return{node:e,newValue:!1,checkFilteredNodes:!0,clearSelection:!d||y};if(p){const b=r?!g:l;return b===r&&!y||b&&!l||!b&&!c?null:{node:e,newValue:b,clearSelection:!d||y,keepDescendants:e.group&&a}}return{node:e,newValue:!r,clearSelection:!d||y}}}},Wg={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},lK=class extends he{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:n,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:r,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:d,onTabKeyDown:p,handleKeyDown:g,isEmpty:m,eFocusableElement:y}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=n,this.providedFocusInnerElement=a,this.eFocusableElement=y,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!r,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=d,this.providedOnTabKeyDown=p,this.providedHandleKeyDown=g,this.providedIsEmpty=m}postConstruct(){this.createManagedBean(new om(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards();for(const e of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():Hg(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){const t=Kn(this.beans),i=Hg(t.body,null,!0),n=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(n===-1)return;let s,o;e?(s=0,o=n):(s=n+1,o=i.length);const r=i.slice(s,o),a=this.gos.get("tabIndex");r.sort((l,c)=>{const d=Number.parseInt(l.getAttribute("tabindex")||"0"),p=Number.parseInt(c.getAttribute("tabindex")||"0");return p===a?1:d===a?-1:d===0?1:p===0?-1:d-p}),r[e?r.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=Hg(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return np(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},fwe=class extends he{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:n}=this,s=[t,i],o={setTabIndex:C=>{for(const w of s)C!=null?w.setAttribute("tabindex",C):w.removeAttribute("tabindex")}};this.addTabGuards(t,i);const{focusTrapActive:r=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:d,onTabKeyDown:p,shouldStopEventPropagation:g,isEmpty:m,forceFocusOutWhenTabGuardsAreEmpty:y,isFocusableContainer:b}=e;this.tabGuardCtrl=this.createManagedBean(new lK({comp:o,focusTrapActive:r,eTopGuard:t,eBottomGuard:i,eFocusableElement:n,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:d,onTabKeyDown:p,shouldStopEventPropagation:g,isEmpty:m,forceFocusOutWhenTabGuardsAreEmpty:y,isFocusableContainer:b}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=Kn(this.beans).createElement("div"),i=e==="top"?Wg.TAB_GUARD_TOP:Wg.TAB_GUARD_BOTTOM;return t.classList.add(Wg.TAB_GUARD,i),Ah(t,"presentation"),t}addTabGuards(e,t){const i=this.eFocusableElement;i.insertAdjacentElement("afterbegin",e),i.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];bo(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){VP(t)||(t=t.getGui());const{eBottomGuard:n}=this;n?n.insertAdjacentElement("beforebegin",t):e(t,i)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;Lu(e),Lu(t),super.destroy()}},mwe=class extends qi{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new fwe(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,i){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,i)}},ywe=500,vwe=550,mS,bwe=e=>{if(!mS)mS=new WeakSet;else if(mS.has(e))return!1;return mS.add(e),!0},Bd=class{constructor(e,t=!1){this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let i=this.eventSvc;if(!i){if(i===null)return;this.eventSvc=i=new Dh;const n=this.onTouchStart.bind(this);this.startListener=n,this.eElement.addEventListener("touchstart",n,{passive:!0})}i.addEventListener(e,t)}removeEventListener(e,t){this.eventSvc?.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!bwe(e))return;const t=e.touches[0];this.touchStart=t;const i=this.handlers;if(!i.length){const n=this.eElement,s=n.ownerDocument,o=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this),a=this.onTouchCancel.bind(this),l={passive:!0},c={passive:!1};sx(i,[n,"touchmove",o,l],[s,"touchcancel",a,l],[s,"touchend",r,c],[s,"contextmenu",du,c])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{this.longPressTimer=0,this.touchStart===t&&!this.moved&&(this.moved=!0,this.eventSvc?.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},vwe)}onTouchMove(e){const{moved:t,touchStart:i}=this;if(!t&&i){const n=Zy(i,e.touches);n&&!FY(n,i,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){const t=this.touchStart;!t||!Zy(t,e.changedTouches)||(this.moved||(this.eventSvc?.dispatchEvent({type:"tap",touchStart:t}),this.checkDoubleTap(t)),this.preventClick&&du(e),this.cancel())}onTouchCancel(e){const t=this.touchStart;!t||!Zy(t,e.changedTouches)||(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){let t=Date.now();const i=this.lastTapTime;i&&t-i>ywe&&(this.eventSvc?.dispatchEvent({type:"doubleTap",touchStart:e}),t=null),this.lastTapTime=t}cancel(){this.clearLongPress(),zP(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){const e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}},Cwe=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.includes("x"),this.scrollVertically=e.scrollAxis.includes("y"),this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}get scrolling(){return this.tickingInterval!==null}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const n=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<n.left+s,this.tickRight=e.clientX>n.right-s,this.tickUp=e.clientY<n.top+s&&!i,this.tickDown=e.clientY>n.bottom-s&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},cK=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${VY}/${this.frameworkName}-data-grid`,Gme(this.baseDocLink)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}};function wwe(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var Swe=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],jz=Object.fromEntries(Swe.map((e,t)=>[e,t]));function xwe(e,t){const i=(e.beanName?jz[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,n=(t.beanName?jz[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return i-n}function Mwe(e,t){return e?.beanName==="gridDestroySvc"?-1:t?.beanName==="gridDestroySvc"?1:0}var Dwe=class extends he{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:n,ctrlsSvc:s}=this.beans;n?.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new rN(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const o=Ac(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>o()),s.register("gridCtrl",this)}isDetailGrid(){return D6(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry?.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(e===!1)t.setCursor(null);else{const i=e===1?"ew-resize":"ns-resize";t.setCursor(i)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:n}=this.getNextFocusableIndex(t,e);if(n<0||n>=t.length)return!1;if(n===0){if(i>0){const{visibleCols:s,focusSvc:o}=this.beans,r=s.allCols,a=fi(r);if(o.focusGridView({column:a,backwards:!0}))return!0}return!1}return this.focusContainer(t[n],e)}focusInnerElement(e){if(this.gos.getCallback("focusGridInnerElement")?.({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),{focusSvc:n,visibleCols:s}=this.beans,o=s.allCols;if(e){if(i.length>1)return this.focusContainer(fi(i),e);const r=fi(o);if(n.focusGridView({column:r,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||hh(this.beans)){if(n.focusGridView({column:o[0],backwards:e}))return!0;for(let r=1;r<i.length;r++)if(Th(i[r].getGui(),e))return!0;return!1}return n.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:n}=this.getNextFocusableIndex(t,e);if(n===-1||i<0||i>=t.length)return;const s=t[i];s.setAllowFocus?.(!0),setTimeout(()=>{s.setAllowFocus?.(!1)})}isFocusable(){const e=this.beans;return!LD(e)||!hh(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){const i=$i(this.beans),n=e.findIndex(o=>o.getGui().contains(i)),s=n+(t?-1:1);return{indexWithFocus:n,nextIndex:s}}focusContainer(e,t){e.setAllowFocus?.(!0);const i=Th(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},it=(e,t)=>{for(const i of Object.keys(t))t[i]=e;return t},Wz={dispatchEvent:"CommunityCore",...it("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...it("GridState",{getState:0,setState:0}),...it("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...it("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...it("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...it("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...it("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...it("ValueCache",{expireValueCache:0}),...it("CellApi",{getCellValue:0}),...it("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...it("Sort",{onSortChanged:0}),...it("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...it("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...it("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...it("HighlightChanges",{flashCells:0}),...it("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...it("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...it("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...it("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...it("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...it("ColumnResize",{setColumnWidths:0}),...it("ColumnHover",{isColumnHovered:0}),...it("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...it("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...it("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...it("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...it("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...it("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...it("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...it("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...it("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0}),...it("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...it("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0}),...it("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...it("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...it("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...it("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...it("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...it("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...it("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...it("ContextMenu",{showContextMenu:0}),...it("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...it("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...it("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...it("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...it("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...it("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0}),...it("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...it("StatusBar",{getStatusPanel:0}),...it("AiToolkit",{getStructuredSchema:0})},OT={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},Awe=(e,t)=>e.eventSvc.dispatchEvent(t),uK=class{};Reflect.defineProperty(uK,"name",{value:"GridApi"});var Rwe=class extends he{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new uK,this.fns={...OT,dispatchEvent:Awe},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(Wz))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:i,beans:n}=this;i!==OT&&(i[e]=n?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{const{beans:i,fns:{[e]:n}}=this;return n?n(i,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:n}=this;if(!t)Se(26,{fnName:e,preDestroyLink:n});else{const s=Wz[e];i.assertModuleRegistered(s,`api.${e}`)&&Se(27,{fnName:e,module:s})}}destroy(){super.destroy(),this.fns=OT,this.beans=null}};function Ewe(e){return e.context.getId()}function Twe(e){e.gridDestroySvc.destroy()}function Iwe(e){return e.gridDestroySvc.destroyCalled}function kwe(e,t){return e.gos.get(t)}function Lwe(e,t,i){dK(e,{[t]:i})}function dK(e,t){e.gos.updateGridOptions({options:t})}function Pwe(e,t){const i=t.replace(/Module$/,"");return e.gos.isModuleRegistered(i)}var Nwe={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},Fwe=class extends qi{constructor(e,t,i){super(Nwe),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(wr("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:i,eCell:n,gos:s}=this,o=i.getColDef().dndSourceOnRowDrag,r=e.dataTransfer;if(r.setDragImage(n,0,0),o){const a=$e(s,{rowNode:t,dragEvent:e});o(a)}else try{const a=JSON.stringify(t.data);r.setData("application/json",a),r.setData("text/plain",a)}catch{}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function Owe(e,t){e.rowDragSvc?.rowDragFeature?.addRowDropZone(t)}function Bwe(e,t){const i=e.dragAndDrop?.findExternalZone(t.getContainer());i&&e.dragAndDrop?.removeDropTarget(i)}function Gwe(e,t){return e.rowDragSvc?.rowDragFeature?.getRowDropZone(t)}function _we(e){const t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}}function Vwe(e,t){const i=e.rowDropHighlightSvc;if(!i)return;const n=t?.row;let s=t?.dropIndicatorPosition;s!=="above"&&s!=="below"&&s!=="inside"&&(s="none");const o=n?.rowIndex;o==null||s==="none"?i.clear():i.set(n,s)}var zwe=class extends Mbe{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}},Hwe=class extends he{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:i}=this.beans;return i.addDragSource(t),()=>i.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},jwe={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},Wwe=class extends qi{constructor(e,t,i,n,s,o=!1){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=n,this.dragStartPixels=s,this.alwaysVisible=o,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){const{beans:e,customGui:t}=this;t?this.setDragElement(t,this.dragStartPixels):(this.setTemplate(jwe),this.getGui().appendChild(wr("rowDrag",e,null)),this.addDragSource()),this.alwaysVisible||this.initCellDrag()}initCellDrag(){const{beans:e,gos:t,rowNode:i}=this,n=this.refreshVisibility.bind(this);this.addManagedPropertyListener("suppressRowDrag",n),this.addManagedListeners(i,{dataChanged:n,cellChanged:n}),this.addManagedListeners(e.eventSvc,t.get("rowDragManaged")?{sortChanged:n,filterChanged:n,columnRowGroupChanged:n,newColumnsLoaded:n}:{newColumnsLoaded:n})}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}refreshVisibility(){if(this.alwaysVisible)return;const e={skipAriaHidden:!0};if(this.isNeverDisplayed()){this.setDisplayed(!1,e);return}const t=this.column;let i=typeof t?.getColDef().rowDrag=="function",n=!t||this.isCustomGui()||t.isRowDrag(this.rowNode);n&&this.rowNode.footer&&this.gos.get("rowDragManaged")&&(n=!1,i=!0),this.setDisplayed(i||n,e),this.setVisible(n,e)}isNeverDisplayed(){const{gos:e,beans:t}=this;return!!(e.get("suppressRowDrag")||e.get("rowDragManaged")&&t.rowDragSvc.rowDragFeature?.shouldPreventRowMove()&&!t.dragAndDrop?.hasExternalDropZones())}getSelectedNodes(){const e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];const i=this.beans.selectionSvc?.getSelectedNodes()??[];return i.indexOf(e)!==-1?i:[e]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:n=>{n?.preventDefault()}})[0]);const i=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:n=>{const s=n?.dragItem||this.getDragItem(),o=(n?.dropTarget?.rows.length??s.rowNodes?.length)||1,r=this.getRowDragText(this.column);return r?r(s,o):o===1?this.cellValueFn():`${o} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},px=class{constructor(){this.reordered=!1,this.removals=new Set,this.updates=new Set,this.adds=new Set}};function Uwe(e){const{rowIndex:t,rowPinned:i,column:n}=e;return`${t}.${i??"null"}.${n.getId()}`}function hK(e,t){const i=e.column===t.column,n=e.rowPinned===t.rowPinned,s=e.rowIndex===t.rowIndex;return i&&n&&s}function $we(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(Pe(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function Ywe(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function Kwe(e){let t=0,i;const{pinnedRowModel:n,rowModel:s,pageBounds:o}=e;return n?.getPinnedTopRowCount()?i="top":s.getRowCount()?(i=null,t=o.getFirstRow()):n?.getPinnedBottomRowCount()&&(i="bottom"),i===void 0?null:{rowIndex:t,rowPinned:i}}function qwe(e){let t,i=null;const{pinnedRowModel:n,pageBounds:s}=e,o=n?.getPinnedBottomRowCount(),r=n?.getPinnedTopRowCount();return o?(i="bottom",t=o-1):e.rowModel.getRowCount()?t=s.getLastRow():r&&(i="top",t=r-1),t===void 0?null:{rowIndex:t,rowPinned:i}}function uc(e,t){switch(t.rowPinned){case"top":return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case"bottom":return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function Ag(e,t){const i=e.spannedRowRenderer?.getCellByPosition(t);if(i)return i;const n=e.rowRenderer.getRowByPosition(t);return n?n.getCellCtrl(t.column):null}function Zwe(e,t,i){const{rowModel:n,pinnedRowModel:s}=e;let o;return o??(o=n?.getRowNode(t)),i?o??(o=s?.getPinnedRowById(t,i)):(o??(o=s?.getPinnedRowById(t,"top")),o??(o=s?.getPinnedRowById(t,"bottom"))),o}function T0(e,t,i=!1){const{rowIndex:n,rowPinned:s}=t,{pageBounds:o,pinnedRowModel:r,rowModel:a}=e;if(n===0)return s==="top"?null:s==="bottom"&&a.isRowsToRender()?{rowIndex:o.getLastRow(),rowPinned:null}:r?.isRowsToRender("top")?{rowIndex:r.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(i){const l=s?void 0:a.getRow(n);return pK(e,l,!0)??{rowIndex:n-1,rowPinned:s}}return{rowIndex:n-1,rowPinned:s}}function Uz(e,t,i=!1){const{rowIndex:n,rowPinned:s}=t,{pageBounds:o,pinnedRowModel:r,rowModel:a}=e;if(Xwe(e,t))return s==="bottom"?null:s==="top"&&a.isRowsToRender()?{rowIndex:o.getFirstRow(),rowPinned:null}:r?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(i){const l=s?void 0:a.getRow(n);return pK(e,l)??{rowIndex:n+1,rowPinned:s}}return{rowIndex:n+1,rowPinned:s}}function pK(e,t,i=!1){const{gos:n,rowRenderer:s}=e;if(!t?.sticky||!XY(n))return;const o=s.getStickyTopRowCtrls(),r=s.getStickyBottomRowCtrls(),a=!r.some(p=>p.rowNode.rowIndex===t.rowIndex),l=a?o:r,c=(i?-1:1)*(a?-1:1);let d;for(let p=0;p<l.length;p++)if(l[p].rowNode.rowIndex===t.rowIndex){d=l[p+c];break}return d?{rowIndex:d.rowNode.rowIndex,rowPinned:null}:void 0}function Xwe(e,t){const{rowPinned:i,rowIndex:n}=t,{pinnedRowModel:s,pageBounds:o}=e;return i==="top"?(s?.getPinnedTopRowCount()??0)-1<=n:i==="bottom"?(s?.getPinnedBottomRowCount()??0)-1<=n:o.getLastRow()<=n}var Kv=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:i,children:n}=e;if(n)for(let s=0;s<n.length;++s)this.depthFirstSearchChangedPath(n[s],t);t(i)}depthFirstSearchEverything(e,t,i){const n=e.childrenAfterGroup;if(n)for(let s=0,o=n.length;s<o;++s){const r=n[s];r.childrenAfterGroup?this.depthFirstSearchEverything(r,t,i):i&&t(r)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const n={rowNode:t,children:null};this.mapToItems[t.id]=n,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;){this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={});for(const n of t)this.nodeIdsToColumns[i.id][n.getId()]=!0;i=i.parent}}linkPathItems(e,t){let i=e;for(let n=0;n<t;n++){const s=this.mapToItems[i.id],o=this.mapToItems[i.parent.id];o.children||(o.children=[]),o.children.push(s),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(s=>i[s.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(s=>!i[s.getId()])}},Qwe=class{constructor(e,t){this.beans=e,this.groupThrottled=!1,this.scrollChanged=!1,this.scrollChanging=!1,this.oldVScroll=null,this.groupTimer=null,this.groupTarget=null,this.onGroupThrottle=()=>{this.groupTimer=null,this.groupThrottled=!0,this.beans.dragAndDrop?.nudge()};const i=()=>t.scrollFeature.getVScrollPosition().top;this.autoScroll=new Cwe({scrollContainer:t.eBodyViewport,scrollAxis:"y",getVerticalPosition:i,setVerticalPosition:n=>t.scrollFeature.setVerticalScrollPosition(n),onScrollCallback:()=>{const n=i();if(this.oldVScroll!==n){this.oldVScroll=n,this.scrollChanging=!0;return}const s=this.scrollChanging;this.scrollChanged=s,this.scrollChanging=!1,s&&(this.beans.dragAndDrop?.nudge(),this.scrollChanged=!1)}})}updateGroup(e,t){this.groupTarget&&this.groupTarget!==e&&this.clearGroup(),e&&(t&&this.groupThrottled&&!e.expanded&&e.childrenAfterSort?.length&&e.isExpandable()&&e.setExpanded(!0,void 0,!0),e.expanded&&e.childrenAfterSort?.length&&(this.groupThrottled=!0,this.groupTarget=e))}startGroup(e){this.groupTarget=e,this.groupTimer===null&&(this.groupTimer=window.setTimeout(this.onGroupThrottle,this.beans.gos.get("rowDragInsertDelay")))}clearGroup(){this.groupThrottled=!1,this.groupTarget=null;const e=this.groupTimer;e!==null&&(this.groupTimer=null,window.clearTimeout(e))}clear(){this.clearGroup(),this.autoScroll.ensureCleared(),this.oldVScroll=null,this.scrollChanged=!1,this.scrollChanging=!1}},Jwe=class extends he{constructor(e){super(),this.eContainer=e,this.lastDraggingEvent=null,this.nudger=null}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,t=>{this.nudger=new Qwe(e,t.gridBodyCtrl)})}destroy(){super.destroy(),this.nudger?.clear(),this.nudger=null,this.lastDraggingEvent=null,this.eContainer=null}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(e){return e?.dropTarget?.allowed===!1||this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){const{rowGroupColsSvc:e,filterManager:t,sortSvc:i}=this.beans;return!!((e?.columns??[]).length||t?.isAnyFilterPresent()||i?.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const i=this.beans.selectionSvc?.getSelectedNodes();if(i&&i.indexOf(t)>=0)return i.slice().sort(iSe)}return[t]}onDragEnter(e){this.dragging(e,!0)}onDragging(e){this.dragging(e,!1)}dragging(e,t){const{lastDraggingEvent:i,beans:n}=this;if(t){const r=this.getRowNodes(e);e.dragItem.rowNodes=r,Kz(r,!0)}this.lastDraggingEvent=e;const s=e.fromNudge,o=this.makeRowsDrop(i,e,s,!1);n.rowDropHighlightSvc?.fromDrag(e),t&&this.dispatchGridEvent("rowDragEnter",e),this.dispatchGridEvent("rowDragMove",e),o?.rowDragManaged&&o.moved&&o.allowed&&o.sameGrid&&!o.suppressMoveWhenRowDragging&&(!s&&!this.nudger?.autoScroll.scrolling||this.nudger?.scrollChanged)&&this.dropRows(o),this.nudger?.autoScroll.check(e.event)}isFromThisGrid(e){return e.dragSource.dragSourceDomDataKey===this.gos.getDomDataKey()}makeRowsDrop(e,t,i,n){const{beans:s,gos:o}=this,r=this.newRowsDrop(t,n),a=s.rowModel;if(t.dropTarget=r,t.changed=!1,!r)return null;let{sameGrid:l,rootNode:c,source:d,target:p,rows:g}=r;p??(p=a.getRow(a.getRowCount()-1)??null);const m=!!this.beans.groupStage?.treeData&&l;let y=null;if(p?.footer){const M=gx(a,-1,p)??gx(a,1,p);y=p.sibling??c,p=M??null}p?.detail&&(p=p.parent),r.moved&&(r.moved=d!==p);let b=.5;if(p&&(l&&r.moved&&(y||!m)?b=d.rowIndex>p.rowIndex?-.5:.5:b=(r.y-p.rowTop-p.rowHeight/2)/p.rowHeight||0),!m&&l&&p&&r.moved&&en(o)){const M=nSe(a,r);M&&(b=d.rowIndex>M.rowIndex?-.5:.5,p=M,r.moved&&(r.moved=d!==p))}const C=this.nudger;C?.updateGroup(p,i),m&&!y&&C&&(!p||b>=.5&&p.rowIndex===s.pageBounds.getLastRow()?y=c:r.moved&&this.targetShouldBeParent(p,b,g)&&(C.groupThrottled&&(y=p),!i&&(!y||p&&!p.expanded&&p.childrenAfterSort?.length)&&C.startGroup(p)),y??(y=p?.parent??c));let w=!1;if(y){if(y===p&&y!==c){const M=y.expanded?gx(a,1,p):null;M?.parent===y?(p=M,b=-.5):w=!0}if(p&&!w){let M=p;for(;M&&M!==c&&M!==y;)p=M,M=M.parent}}r.target=p,r.newParent=y,r.moved&&(r.moved=d!==p);const x=b<0?"above":"below";return r.position=r.moved?w?"inside":x:"none",this.validateRowsDrop(r,m,x,n),t.changed||(t.changed=tSe(e?.dropTarget,r)),r}newRowsDrop(e,t){const{beans:i,gos:n}=this,s=i.rowModel.rootNode,o=en(n)?n.get("rowDragManaged"):!1,r=n.get("suppressMoveWhenRowDragging"),a=this.isFromThisGrid(e);let{rowNode:l,rowNodes:c}=e.dragItem;if(c||(c=l?[l]:[]),l||(l=c[0]),!l||!s)return null;const d=this.beans.dragAndDrop.isDropZoneWithinThisGrid(e);let p=!0;o&&(!c.length||this.shouldPreventRowMove()||(r||!a)&&!d)&&(p=!1);const g=Pz(i,e).y,m=this.getOverNode(g);return{api:i.gridApi,context:i.gridOptions.context,draggingEvent:e,rowDragManaged:o,suppressMoveWhenRowDragging:r,sameGrid:a,withinGrid:d,rootNode:s,moved:l!==m,y:g,overNode:m,overIndex:m?.rowIndex??-1,position:"none",source:l,target:m??null,newParent:null,rows:c,allowed:p,highlight:!t&&o&&r&&(d||!a)}}validateRowsDrop(e,t,i,n){const{rowDragManaged:s,suppressMoveWhenRowDragging:o}=e;t||(e.newParent=null),o&&!e.moved&&(e.allowed=!1);const r=(!s||e.allowed)&&this.gos.get("isRowValidDropPosition");if(r){t&&e.newParent&&$z(e.rows,e.newParent)&&(e.newParent=null);const a=r(e);if(!a)e.allowed=!1;else if(typeof a=="object"){a.rows!==void 0&&(e.rows=a.rows??[]),t&&a.newParent!==void 0&&(e.newParent=a.newParent),a.target!==void 0&&(e.target=a.target),a.position&&(e.position=a.position),a.allowed!==void 0?e.allowed=a.allowed:s||(e.allowed=!0);const l=e.draggingEvent;a.changed&&l&&(l.changed=!0),!n&&a.highlight!==void 0&&(e.highlight=a.highlight)}}s&&(e.rows=this.filterRows(e)),t&&e.newParent&&$z(e.rows,e.newParent)&&(e.newParent=null),o&&(!e.rows.length||e.position==="none")&&(e.allowed=!1),(!e.allowed||!e.newParent)&&e.position==="inside"&&(e.position=i)}targetShouldBeParent(e,t,i){const n=e.rowIndex,s=.25;if(t<-.5+s)return!1;if(t<.5-s)return!0;let o,r=n+1;const a=this.beans.rowModel;do o=a.getRow(r++);while(o?.footer);const l=e.childrenAfterGroup;if(o&&o.parent===e&&l?.length){const c=new Set(i);for(const d of l)if(d.rowIndex!==null&&!c.has(d))return!0}return!1}addRowDropZone(e){if(!e.getContainer()){Se(55);return}const t=this.beans.dragAndDrop;if(t.findExternalZone(e.getContainer())){Se(56);return}const i=e.fromGrid?e:{getContainer:e.getContainer,onDragEnter:e.onDragEnter&&(s=>e.onDragEnter(this.rowDragEvent("rowDragEnter",s))),onDragLeave:e.onDragLeave&&(s=>e.onDragLeave(this.rowDragEvent("rowDragLeave",s))),onDragging:e.onDragging&&(s=>e.onDragging(this.rowDragEvent("rowDragMove",s))),onDragStop:e.onDragStop&&(s=>e.onDragStop(this.rowDragEvent("rowDragEnd",s))),onDragCancel:e.onDragCancel&&(s=>e.onDragCancel(this.rowDragEvent("rowDragCancel",s)))},n={isInterestedIn:s=>s===2,getIconName:()=>"move",external:!0,...i};t.addDropTarget(n),this.addDestroyFunc(()=>t.removeDropTarget(n))}getRowDropZone(e){return{getContainer:this.getContainer.bind(this),onDragEnter:i=>{this.onDragEnter(i),e?.onDragEnter?.(this.rowDragEvent("rowDragEnter",i))},onDragLeave:i=>{this.onDragLeave(i),e?.onDragLeave?.(this.rowDragEvent("rowDragLeave",i))},onDragging:i=>{this.onDragging(i),e?.onDragging?.(this.rowDragEvent("rowDragMove",i))},onDragStop:i=>{this.onDragStop(i),e?.onDragStop?.(this.rowDragEvent("rowDragEnd",i))},onDragCancel:i=>{this.onDragCancel(i),e?.onDragCancel?.(this.rowDragEvent("rowDragCancel",i))},fromGrid:!0}}getOverNode(e){const{pageBounds:t,rowModel:i}=this.beans,s=e>t.getCurrentPagePixelRange().pageLastPixel?-1:i.getRowIndexAtPixel(e);return s>=0?i.getRow(s):void 0}rowDragEvent(e,t){const i=this.beans,{dragItem:n,dropTarget:s,event:o,vDirection:r}=t,a=s?.rootNode===i.rowModel.rootNode,l=a?s.y:Pz(i,t).y,c=a?s.overNode:this.getOverNode(l),d=a?s.overIndex:c?.rowIndex??-1;return{api:i.gridApi,context:i.gridOptions.context,type:e,event:o,node:n.rowNode,nodes:n.rowNodes,overIndex:d,overNode:c,y:l,vDirection:r,rowsDrop:s}}dispatchGridEvent(e,t){const i=this.rowDragEvent(e,t);this.eventSvc.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e)}onDragStop(e){const t=this.makeRowsDrop(this.lastDraggingEvent,e,!1,!0);this.dispatchGridEvent("rowDragEnd",e),t?.allowed&&t.rowDragManaged&&(t.suppressMoveWhenRowDragging||!t.sameGrid||this.nudger?.autoScroll.scrolling)&&this.dropRows(t),this.stopDragging(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e)}stopDragging(e){this.nudger?.clear(),this.beans.rowDropHighlightSvc?.fromDrag(null),Kz(e.dragItem.rowNodes,!1)}dropRows(e){return e.sameGrid?this.csrmMoveRows(e):this.csrmAddRows(e)}csrmAddRows({position:e,target:t,rows:i}){const n=xf(this.gos),s=this.beans.rowModel,o=i.filter(({data:a,rowPinned:l})=>!s.getRowNode(n?.({data:a,level:0,rowPinned:l})??a.id)).map(({data:a})=>a);if(o.length===0)return!1;const r=t?Yz(t)+(e==="above"?0:1):void 0;return s.updateRowData({add:o,addIndex:r}),!0}filterRows({newParent:e,rows:t}){let i;for(let n=0,s=t.length;n<s;++n){let o=!0;const r=t[n];(!r||r.footer||r.rowTop===null&&r!==this.beans.rowModel.getRowNode(r.id)||e&&r.parent!==e&&eSe(r,e)||!kk(r))&&(o=!1),o?i?.push(r):i??(i=t.slice(0,n))}return i??t}csrmMoveRows({position:e,target:t,rows:i,newParent:n,rootNode:s}){let o=!1;const r=new Set;for(const g of i){n&&g.parent!==n&&(g.treeParent=n,o=!0);const m=kk(g);m&&r.add(m)}if(!o&&r.size===0)return!1;const a=this.beans.focusSvc,l=a.getFocusedCell(),c=l&&Ag(this.beans,l);if(r.size&&this.reorderLeafChildren(r,...this.getMoveRowsBounds(r,t,e==="above"))&&(o=!0),!o)return!1;const d=this.beans.rowModel,p=new px;return p.reordered=!0,d.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new Kv(!1,s),changedRowNodes:p}),c?c.focusCell():a.clearFocusedCell(),!0}getMoveRowsBounds(e,t,i){const n=this.beans.rowModel.rootNode?._leafs?.length??0;let s=t?Yz(t):-1;s<0||s>=n?s=n:i||++s;let o=s,r=Math.min(s,n-1);for(const a of e){const l=a.sourceRowIndex;l<o&&(o=l),l>r&&(r=l)}return[o,s,r]}reorderLeafChildren(e,t,i,n){let s=!1;const o=this.beans.rowModel.rootNode?._leafs;if(!e.size||!o)return!1;let r=t;for(let l=t;l<i;++l){const c=o[l];e.has(c)||(c.sourceRowIndex!==r&&(c.sourceRowIndex=r,o[r]=c,s=!0),++r)}let a=n;for(let l=n;l>=i;--l){const c=o[l];e.has(c)||(c.sourceRowIndex!==a&&(c.sourceRowIndex=a,o[a]=c,s=!0),--a)}for(const l of e)l.sourceRowIndex!==r&&(l.sourceRowIndex=r,o[r]=l,s=!0),++r;return s}},gx=(e,t,i)=>{if(i){const n=e.getRowCount();let s=i.rowIndex+t;for(;s>=0&&s<n;){const o=e.getRow(s);if(!o||!o.footer&&!o.detail)return o;s+=t}}},eSe=(e,t)=>{let i=t;for(;i;){if(i===e)return!0;i=i.parent}return!1},$z=(e,t)=>{for(let i=0,n=e.length;i<n;++i)if(e[i].parent!==t)return!1;return!0},Yz=e=>{const t=kk(e);return t!==void 0?t.sourceRowIndex:-1},kk=e=>e.data?e:V6(e.childrenAfterGroup),tSe=(e,t)=>e!==t&&(!e||e.sameGrid!==t.sameGrid||e.allowed!==t.allowed||e.position!==t.position||e.target!==t.target||e.source!==t.source||e.newParent!==t.newParent||!Ju(e.rows,t.rows)),iSe=({rowIndex:e},{rowIndex:t})=>e!==null&&t!==null?e-t:0,Kz=(e,t)=>{for(let i=0,n=e?.length||0;i<n;++i){const s=e[i];s.dragging!==t&&(s.dragging=t,s.dispatchRowEvent("draggingChanged"))}},nSe=(e,t)=>{let i=null,n=t.target;if(n&&t.rows.indexOf(n)<0)return null;const s=t.source;if(!n||!s)return null;let o=n.rowIndex-s.rowIndex;const r=o<0?-1:1;o=t.suppressMoveWhenRowDragging?Math.abs(o):1;const a=new Set(t.rows);do{const l=gx(e,r,n);if(!l)break;a.has(l)||(i=l,--o),n=l}while(o>0);return i},sSe=class extends he{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){const i=t.createManagedBean(new Jwe(e)),n=this.beans.dragAndDrop;n.addDropTarget(i),t.addDestroyFunc(()=>n.removeDropTarget(i)),this.rowDragFeature=i}createRowDragComp(e,t,i,n,s,o){return new Wwe(e,t,i,n,s,o)}createRowDragCompForRow(e,t){if(Nu(this.gos))return;const i=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${i("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,i,n,s,o){const r=this.gos;return r.get("rowDragManaged")&&(!en(r)||r.get("pagination"))?void 0:this.createRowDragComp(i,e,t,n,s,o)}},oSe=class extends he{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.dragging=!1,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){const e=this.row,t=this.dragging;!e||e?.rowIndex===null||this.position==="none"?this.clear():this.set(e,this.position),this.dragging=t}destroy(){this.clear(),super.destroy()}clear(){const e=this.row;this.dragging=!1,e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){const i=e!==this.row,n=e.uiLevel,s=t!==this.position,o=n!==this.uiLevel;this.dragging=!1,(i||s||o)&&(i&&this.clear(),this.uiLevel=n,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}fromDrag(e){const t=e?.dropTarget;if(t){const{highlight:i,target:n,position:s}=t;if(i&&n&&s!=="none"){this.set(n,s),this.dragging=!0;return}}this.dragging&&this.clear()}},gK={moduleName:"Drag",version:ke,beans:[zwe]},rSe={moduleName:"DragAndDrop",version:ke,dynamicBeans:{dndSourceComp:Fwe},icons:{rowDrag:"grip"}},fK={moduleName:"SharedDragAndDrop",version:ke,beans:[Abe],dependsOn:[gK],userComponents:{agDragAndDropImage:QCe},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},aSe={moduleName:"RowDrag",version:ke,beans:[oSe,sSe],apiFunctions:{addRowDropZone:Owe,removeRowDropZone:Bwe,getRowDropZoneParams:Gwe,getRowDropPositionIndicator:_we,setRowDropPositionIndicator:Vwe},dependsOn:[fK]},lSe={moduleName:"HorizontalResize",version:ke,beans:[Hwe],dependsOn:[gK]},cSe=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",uSe=class extends he{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:i,executeLaterFuncs:n}=this;if(i.length===0&&n.length===0){e(),t();return}const s=o=>{for(;o.length;){const r=o.pop();r&&r()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),s(i)},0),window.setTimeout(()=>{t(),s(n)},200)})}};function dSe(e,t,i){e.colMoves?.moveColumnByIndex(t,i,"api")}function hSe(e,t,i){e.colMoves?.moveColumns(t,i,"api")}var pSe=class extends he{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;if(t)for(const i of t)i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:i,pivotColsSvc:n}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&i?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&n?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function gSe(e,t){!t||t.length<=1||t.filter(n=>e.indexOf(n)<0).length>0||t.sort((n,s)=>{const o=e.indexOf(n),r=e.indexOf(s);return o-r})}function fSe(e){const t=[...e];for(const i of e){let n=null,s=i.getParent();for(;s!=null&&s.getDisplayedLeafColumns().length===1;)n=s,s=s.getParent();if(n!=null){const r=!!n.getColGroupDef()?.marryChildren?n.getProvidedColumnGroup().getLeafColumns():n.getLeafColumns();for(const a of r)t.includes(a)||t.push(a)}}return t}function mSe(e,t,i,n){const s=n.allCols;let o=null,r=null;for(let a=0;a<e.length;a++){const l=e[a],c=i.getProposedColumnOrder(t,l);if(!i.doesOrderPassRules(c))continue;const d=c.filter(g=>s.includes(g));if(r===null)r=d;else if(!Ju(d,r))break;const p=vSe(c);(o===null||p<o.fragCount)&&(o={move:l,fragCount:p})}return o}function mK(e){const{isFromHeader:t,fromLeft:i,xPosition:n,fromEnter:s,fakeEvent:o,pinned:r,gos:a,colModel:l,colMoves:c,visibleCols:d}=e;let{allMovingColumns:p}=e;t&&(p=fSe(p));const g=p.slice();gSe(l.getCols(),g);const m=CSe({movingCols:g,draggingRight:i,xPosition:n,pinned:r,gos:a,colModel:l,visibleCols:d}),y=ySe(g,l);if(m.length===0)return;const b=m[0];if(y!==null&&(t||!s)&&!o&&(!i&&b>=y||i&&b<=y))return;const w=mSe(m,g,c,d);if(!w)return;const x=w.move;if(!(x>l.getCols().length-g.length))return{columns:g,toIndex:x}}function yK(e){const{columns:t,toIndex:i}=mK(e)||{},{finished:n,colMoves:s}=e;return!t||i==null?null:(s.moveColumns(t,i,"uiColumnMoved",n),n?null:{columns:t,toIndex:i})}function ySe(e,t){const i=t.getCols(),n=e.map(l=>i.indexOf(l)).sort((l,c)=>l-c),s=n[0];return fi(n)-s!==n.length-1?null:s}function vSe(e){function t(n){const s=[];let o=n.getOriginalParent();for(;o!=null;)s.push(o),o=o.getOriginalParent();return s}let i=0;for(let n=0;n<e.length-1;n++){let s=t(e[n]),o=t(e[n+1]);[s,o]=s.length>o.length?[s,o]:[o,s];for(const r of s)o.indexOf(r)===-1&&i++}return i}function bSe(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function CSe(e){const{movingCols:t,draggingRight:i,xPosition:n,pinned:s,gos:o,colModel:r,visibleCols:a}=e;if(o.get("suppressMovableColumns")||t.some(M=>M.getColDef().suppressMovable))return[];const c=bSe(a,s),d=r.getCols(),p=c.filter(M=>t.includes(M)),g=c.filter(M=>!t.includes(M)),m=d.filter(M=>!t.includes(M));let y=0,b=n;if(i){let M=0;for(const E of p)M+=E.getActualWidth();b-=M}if(b>0){for(let M=0;M<g.length;M++){const E=g[M];if(b-=E.getActualWidth(),b<0)break;y++}i&&y++}let C;if(y>0){const M=g[y-1];C=m.indexOf(M)+1}else C=m.indexOf(g[0]),C===-1&&(C=0);const w=[C],x=(M,E)=>M-E;if(i){let M=C+1;const E=d.length-1;for(;M<=E;)w.push(M),M++;w.sort(x)}else{let M=C;const E=d.length-1;let I=d[M];for(;M<=E&&c.indexOf(I)<0;)M++,w.push(M),I=d[M];M=C-1;const N=0;for(;M>=N;)w.push(M),M--;w.sort(x).reverse()}return w}function Lk(e){const{pinned:t,fromKeyboard:i,gos:n,ctrlsSvc:s,useHeaderRow:o,skipScrollPadding:r}=e;let a=s.getHeaderRowContainerCtrl(t)?.eViewport,{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),n.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!r&&(l+=s.get("center").getCenterViewportScrollLeft()),l):0}function BT(e,t){for(const i of e)i.moving=t,i.dispatchColEvent("movingChanged","uiColumnMoved")}var qz=7,Pk=100,yS=Pk/2,wSe=5,SSe=100,xSe=class extends he{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!Pe(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,{dragItem:i}=t||{},n=i?.columns??[];for(const s of n){const o=s.getPinned();if(s.getColDef().lockPinned){if(o==e)return"move";continue}const r=i?.containerType;if(r===e||!e)return"move";if(e&&(!o||r!==e))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,i=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(i,!0,"uiColumnDragged");else{const s=t.visibleState,o=(i||[]).filter(r=>s[r.getId()]&&!r.isVisible());this.setColumnsVisible(o,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(i,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,n=!1){const{gos:s,ctrlsSvc:o}=this.beans,r=s.get("suppressMoveWhenColumnDragging");if(n&&!r){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!n&&ki(e.hDirection))return;const a=Lk({x:e.x,pinned:this.pinned,gos:s,ctrlsSvc:o});t||this.checkCenterForScrolling(a),r?this.handleColumnDragWhileSuppressingMovement(e,t,i,a,n):this.handleColumnDragWhileAllowingMovement(e,t,i,a,n)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e?.length)return;const n=e.filter(s=>!s.getColDef().lockVisible);n.length&&this.beans.colModel.setColsVisible(n,t,i)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:i}=e;this.beans.colMoves.moveColumns(t,i,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,i,n,s){const o=this.getAllMovingColumns(e,!0);if(s){const r=this.isAttemptingToPin(o);r&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(o,r)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:l,fromEnter:t,fakeEvent:i,fromLeft:a})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,n)}}handleColumnDragWhileAllowingMovement(e,t,i,n,s){const o=this.getAllMovingColumns(e),r=this.normaliseDirection(e.hDirection)==="right",a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:n,fromLeft:r,fromEnter:t,fakeEvent:i}),c=yK({...l,finished:s});c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){const i=e.dragSource.getDragItem();let n=null;t?(n=i.columnsInSplit,n||(n=i.columns)):n=i.columns;const s=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return n?n.filter(s):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:n,fromLeft:s,fromEnter:o,fakeEvent:r}=e,{gos:a,colModel:l,colMoves:c,visibleCols:d}=this.beans;return{allMovingColumns:t,isFromHeader:i,fromLeft:s,xPosition:n,pinned:this.pinned,fromEnter:o,fakeEvent:r,gos:a,colModel:l,colMoves:c,visibleCols:d}}highlightHoveredColumn(e,t){const{gos:i,colModel:n}=this.beans,s=i.get("enableRtl"),o=n.getCols().filter(d=>d.isVisible()&&d.getPinned()===this.pinned);let r=null,a=null,l=null;for(const d of o){if(a=d.getActualWidth(),r=this.getNormalisedColumnLeft(d,0,s),r!=null){const p=r+a;if(r<=t&&p>=t){l=d;break}}r=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let d=o.length-1;d>=0;d--){const p=o[d],g=o[d].getParent();if(!g){l=p;break}const m=g?.getDisplayedLeafColumns();if(m.length){l=fi(m);break}}if(!l)return;r=this.getNormalisedColumnLeft(l,0,s),a=l.getActualWidth()}if(this.lastHighlightedColumn?.column!==l&&this.clearHighlighted(),l==null||r==null||a==null)return;let c;t-r<a/2!==s?c=0:c=1,Zz(l,c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){const{gos:i,visibleCols:n}=this.beans,s=i.get("enableRtl"),{firstMovingCol:o,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,s);if(!o||!r||a==null)return;const l=n.allCols,c=l.indexOf(o),d=l.indexOf(r),p=a===0!==s,g=c<d||c===d&&!p;let m=0;if(p?g&&(m-=1):g||(m+=1),d+m===c)return;const y=l[d+m];if(!y)return;const b=this.getNormalisedColumnLeft(y,20,s);return{fromLeft:g,xPosition:b}}getColumnMoveAndTargetInfo(e,t,i){const n=this.lastHighlightedColumn||{},{firstMovingCol:s,lastMovingCol:o}=MSe(e);if(!s||!o||n.column||!t)return{firstMovingCol:s,...n};const a=this.getPinDirection()==="left";return{firstMovingCol:s,position:a?1:0,column:a!==i?s:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,i){const{gos:n,ctrlsSvc:s}=this.beans,o=e.getLeft();if(o==null)return null;const r=e.getActualWidth();return Lk({x:i?o+r-t:o+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:n,ctrlsSvc:s})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>qz;return t&&i||e.some(n=>n.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:n,fakeEvent:s,fromLeft:o}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:o,fromEnter:n,fakeEvent:s}),{columns:a,toIndex:l}=mK(r)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(Zz(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),i=t.getCenterViewportScrollLeft(),n=i+t.getCenterWidth();let s,o;this.gos.get("enableRtl")?(s=e<i+yS,o=e>n-yS):(o=e<i+yS,s=e>n-yS),this.needToMoveRight=s,this.needToMoveLeft=o,o||s?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),SSe),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*wSe,e>Pk&&(e=Pk);let t=null;const i=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:n,dragAndDrop:s,gos:o}=this.beans;if(this.failedMoveAttempts<=qz+1||!n)return;if(s.setDragImageCompIcon("pinned"),!o.get("suppressMoveWhenColumnDragging")){const r=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(r,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,i=!1){const n=(e||[]).filter(r=>!r.getColDef().lockPinned);if(!n.length)return 0;i&&(t=this.getPinDirection());const{pinnedCols:s,dragAndDrop:o}=this.beans;return s?.setColsPinned(n,t,"uiColumnDragged"),i&&o.nudge(),n.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function Zz(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function MSe(e){const t=e.length;let i,n;for(let s=0;s<t;s++){if(!i){const o=e[s];o.getLeft()!=null&&(i=o)}if(!n){const o=e[t-1-s];o.getLeft()!=null&&(n=o)}if(i&&n)break}return{firstMovingCol:i,lastMovingCol:n}}var DSe=class extends he{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,i=this.pinned;e.whenReady(this,n=>{let s;const o=n.gridBodyCtrl.eBodyViewport;switch(i){case"left":s=[[o,n.left.eContainer],[n.bottomLeft.eContainer],[n.topLeft.eContainer]];break;case"right":s=[[o,n.right.eContainer],[n.bottomRight.eContainer],[n.topRight.eContainer]];break;default:s=[[o,n.center.eViewport],[n.bottomCenter.eViewport],[n.topCenter.eViewport]];break}this.eSecondaryContainers=s}),this.moveColumnFeature=this.createManagedBean(new xSe(i)),this.bodyDropPivotTarget=this.createManagedBean(new pSe(i)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},ASe=class extends he{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,i){const n=this.beans.colModel.getCols();if(!n)return;const s=n[e];this.moveColumns([s],t,i)}moveColumns(e,t,i,n=!0){const{colModel:s,colAnimation:o,visibleCols:r,eventSvc:a}=this.beans,l=s.getCols();if(!l)return;if(t>l.length-e.length){Se(30,{toIndex:t});return}o?.start();const c=s.getColsForKeys(e);this.doesMovePassRules(c,t)&&(gz(s.getCols(),c,t),r.refresh(i),a.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,toIndex:t,finished:n,source:i})),o?.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){const{colModel:t,gos:i}=this.beans;return!(!u6(e,t.getColTree())||!(s=>{const o=c=>c?c==="left"||c===!0?-1:1:0,r=i.get("enableRtl");let a=r?1:-1,l=!0;for(const c of s){const d=o(c.getColDef().lockPosition);r?d>a&&(l=!1):d<a&&(l=!1),a=d}return l})(e))}getProposedColumnOrder(e,t){const n=this.beans.colModel.getCols().slice();return gz(n,e,t),n}createBodyDropTarget(e,t){return new DSe(e,t)}moveHeader(e,t,i,n,s){const{ctrlsSvc:o,gos:r,colModel:a,visibleCols:l,focusSvc:c}=this.beans,d=t.getBoundingClientRect(),p=d.left,g=dn(i),m=g?d.width:i.getActualWidth(),y=e==="left"!==r.get("enableRtl"),b=Lk({x:y?p-20:p+m+20,pinned:n,fromKeyboard:!0,gos:r,ctrlsSvc:o}),C=c.focusedHeader;yK({allMovingColumns:g?i.getLeafColumns():[i],isFromHeader:!0,fromLeft:e==="right",xPosition:b,pinned:n,fromEnter:!1,fakeEvent:!1,gos:r,colModel:a,colMoves:this,visibleCols:l,finished:!0});let w;if(g){const x=i.getDisplayedLeafColumns();w=y?x[0]:fi(x)}else w=i;if(o.getScrollFeature().ensureColumnVisible(w,"auto"),(!s.isAlive()||r.get("ensureDomOrder"))&&C){let x;if(g){const M=i.getGroupId(),E=i.getLeafColumns();if(!E.length)return;const I=E[0].getParent();if(!I)return;x=RSe(I,M)}else x=i;x&&c.focusHeaderPosition({headerPosition:{...C,column:x}})}}setDragSourceForHeader(e,t,i){const{gos:n,colModel:s,dragAndDrop:o,visibleCols:r}=this.beans;let a=!n.get("suppressDragLeaveHidesColumns");const l=dn(t),c=l?t.getProvidedColumnGroup().getLeafColumns():[t],p={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:l?()=>TSe(t,r.allCols):()=>ESe(t),dragItemName:i,onDragStarted:()=>{a=!n.get("suppressDragLeaveHidesColumns"),BT(c,!0)},onDragStopped:()=>BT(c,!1),onDragCancelled:()=>BT(c,!1),onGridEnter:g=>{if(a){const{columns:m=[],visibleState:y}=g??{},b=l?w=>!y||y[w.getColId()]:()=>!0,C=m.filter(w=>!w.getColDef().lockVisible&&b(w));s.setColsVisible(C,!0,"uiColumnMoved")}},onGridExit:g=>{if(a){const m=g?.columns?.filter(y=>!y.getColDef().lockVisible)||[];s.setColsVisible(m,!1,"uiColumnMoved")}}};return o.addDragSource(p,!0),p}};function RSe(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function ESe(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function TSe(e,t){const i=e.getProvidedColumnGroup().getLeafColumns(),n={};for(const a of i)n[a.getId()]=a.isVisible();const s=[];for(const a of t)i.indexOf(a)>=0&&(s.push(a),ea(i,a));for(const a of i)s.push(a);const o=[],r=e.getLeafColumns();for(const a of s)r.indexOf(a)!==-1&&o.push(a);return{columns:s,columnsInSplit:o,visibleState:n,containerType:o[0]?.pinned}}var ISe={moduleName:"ColumnMove",version:ke,beans:[ASe,uSe],apiFunctions:{moveColumnByIndex:dSe,moveColumns:hSe},dependsOn:[fK],css:[cSe]},kSe=class extends he{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const n=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||n.push(i),this.getPreferredWidthForElements(n)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const i=document.createElement("form");i.style.position="fixed";const n=this.centerRowContainerCtrl.eContainer;for(const o of e)this.cloneItemIntoDummy(o,i);n.appendChild(i);const s=i.offsetWidth;return i.remove(),t=t??this.gos.get("autoSizePadding"),s+t}getHeaderCellForColumn(e){let t=null;for(const i of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){const n=i.getHtmlElementForColumnHeader(e);n!=null&&(t=n)}return t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const n=document.createElement("div"),s=n.classList;["ag-header-cell","ag-header-group-cell"].some(a=>i.classList.contains(a))?(s.add("ag-header","ag-header-row"),n.style.position="static"):s.add("ag-row");let r=e.parentElement;for(;r;){if(["ag-header-row","ag-row"].some(l=>r.classList.contains(l))){for(let l=0;l<r.classList.length;l++){const c=r.classList[l];c!="ag-row-position-absolute"&&s.add(c)}break}r=r.parentElement}n.appendChild(i),t.appendChild(n)}},vK={moduleName:"AutoWidth",version:ke,beans:[kSe]};function LSe(e,t,i=!0,n="api"){e.colResize?.setColumnWidths(t,!1,i,n)}var PSe=class extends he{constructor(e,t,i,n){super(),this.comp=e,this.eResize=t,this.pinned=i,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:e,gos:t,colAutosize:i}=this.beans,n=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(n),!t.get("suppressAutoSize")&&i&&this.addDestroyFunc(i.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:n,groupAfterColumns:s,groupAfterStartWidth:o,groupAfterRatios:r}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=n,this.resizeTakeFromCols=s,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=r,this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const n=this.normaliseDragChange(t),s=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(s,i,e)}getInitialValues(e){const t=l=>l.reduce((c,d)=>c+d.getActualWidth(),0),i=(l,c)=>l.map(d=>d.getActualWidth()/c),n=this.getColumnsToResize(),s=t(n),o=i(n,s),r={columnsToResize:n,resizeStartWidth:s,resizeRatios:o};let a=null;if(e&&(a=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),a){const l=a.getDisplayedLeafColumns(),c=r.groupAfterColumns=l.filter(p=>p.isResizable()),d=r.groupAfterStartWidth=t(c);r.groupAfterRatios=i(c,d)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;const n={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(n,e,t,i)}resizeColumns(e,t,i,n=!0){const{columnsToResize:s,resizeStartWidth:o,resizeRatios:r,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,d=[];if(d.push({columns:s,ratios:r,width:t}),a){const p=t-o;d.push({columns:a,ratios:c,width:l-p})}this.beans.colResize?.resizeColumnSets({resizeSets:d,finished:n,source:i}),n&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},NSe=class extends he{constructor(e,t,i,n,s){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=n,this.ctrl=s}postConstruct(){const e=[];let t,i;const n=()=>{if(_i(this.eResize,t),!t)return;const{horizontalResizeSvc:r,colAutosize:a}=this.beans,l=r.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(l),i&&a&&e.push(a.addColumnAutosizeListeners(this.eResize,this.column))},s=()=>{for(const r of e)r();e.length=0},o=()=>{const r=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(r!==t||a!==i)&&(t=r,i=a,s(),n())};o(),this.addDestroyFunc(s),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:i,lastResizeAmount:n,resizeStartWidth:s,beans:o}=this,r=this.normaliseResizeAmount(t),a=s+r,l=[{key:i,newWidth:a}],{pinnedCols:c,ctrlsSvc:d,colResize:p}=o;if(this.column.getPinned()){const g=c?.leftWidth??0,m=c?.rightWidth??0,y=Hv(d.getGridBodyCtrl().eBodyViewport)-50;if(g+m+(r-n)>y)return}this.lastResizeAmount=r,p?.setColumnWidths(l,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i=this.pinned!=="left",n=this.pinned==="right";return this.gos.get("enableRtl")?i&&(t*=-1):n&&(t*=-1),t}},FSe=class extends he{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,i,n){const s=[],{colModel:o,gos:r,visibleCols:a}=this.beans;for(const l of e){const c=o.getColDefCol(l.key)||o.getCol(l.key);if(!c)continue;if(s.push({width:l.newWidth,ratios:[1],columns:[c]}),r.get("colResizeDefault")==="shift"&&(t=!t),t){const p=a.getColAfter(c);if(!p)continue;const g=c.getActualWidth()-l.newWidth,m=p.getActualWidth()+g;s.push({width:m,ratios:[1],columns:[p]})}}s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:i,source:n})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:n}=e;if(!(!t||t.every(d=>OSe(d)))){if(i){const d=t&&t.length>0?t[0].columns:null;Mf(this.eventSvc,d,i,n)}return}const o=[],r=[];for(const d of t){const{width:p,columns:g,ratios:m}=d,y={},b={};for(const x of g)r.push(x);let C=!0,w=0;for(;C;){if(w++,w>1e3){oi(31);break}C=!1;const x=[];let M=0,E=p;g.forEach((N,T)=>{if(b[N.getId()])E-=y[N.getId()];else{x.push(N);const O=m[T];M+=O}});const I=1/M;x.forEach((N,T)=>{const P=T===x.length-1;let O;P?O=E:(O=Math.round(m[T]*p*I),E-=O);const G=N.getMinWidth(),B=N.getMaxWidth();O<G?(O=G,b[N.getId()]=!0,C=!0):B>0&&O>B&&(O=B,b[N.getId()]=!0,C=!0),y[N.getId()]=O})}for(const x of g){const M=y[x.getId()];x.getActualWidth()!==M&&(x.setActualWidth(M,n),o.push(x))}}const a=o.length>0;let l=[];if(a){const{colFlex:d,visibleCols:p,colViewport:g}=this.beans;l=d?.refreshFlexedColumns({resizingCols:r,skipSetLeft:!0})??[],p.setLeftValues(n),p.updateBodyWidths(),g.checkViewportColumns()}const c=r.concat(l);(a||i)&&Mf(this.eventSvc,c,i,n,l)}resizeHeader(e,t,i){if(!e.isResizable())return;const n=e.getActualWidth(),s=e.getMinWidth(),o=e.getMaxWidth(),r=Math.min(Math.max(n+t,s),o);this.setColumnWidths([{key:e,newWidth:r}],i,!0,"uiColumnResized")}createResizeFeature(e,t,i,n,s){return new NSe(e,t,i,n,s)}createGroupResizeFeature(e,t,i,n){return new PSe(e,t,i,n)}};function OSe(e){const{columns:t,width:i}=e;let n=0,s=0,o=!0;for(const l of t){const c=l.getMinWidth();n+=c||0;const d=l.getMaxWidth();d>0?s+=d:o=!1}const r=i>=n,a=!o||i<=s;return r&&a}var BSe={moduleName:"ColumnResize",version:ke,beans:[FSe],apiFunctions:{setColumnWidths:LSe},dependsOn:[lSe,vK]},GSe=class extends he{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);for(const t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(const e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},_Se=class extends hN{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,i,n,s){const{column:o,beans:r}=this,{context:a,colNames:l,colHover:c,rangeSvc:d,colResize:p}=r;this.comp=e,s=uC(this,a,s),this.setGui(t,s),this.displayName=l.getDisplayNameForColumnGroup(o,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(s),this.setupExpandable(s),this.setupTooltip(),this.setupAutoHeight({wrapperElement:n,compBean:s}),this.setupUserComp(),this.addHeaderMouseListeners(s),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const g=this.rowCtrl.pinned,m=o.getProvidedColumnGroup().getLeafColumns();c?.createHoverFeature(s,m,t),d?.createRangeHighlightFeature(s,o,e),s.createManagedBean(new dN(o,t,r)),s.createManagedBean(new GSe(e,o)),p?this.resizeFeature=s.createManagedBean(p.createGroupResizeFeature(e,i,g,o)):e.setResizableDisplayed(!1),s.createManagedBean(new om(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(s,m),s.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(s),s.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.getDefinition();return $e(t.gos,{colDef:i,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");i!=null?i===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,n=fi(t)===e;if(!i&&!n)return;const s=e.getHighlighted(),o=!!this.rowCtrl.getHeaderCellCtrls().find(l=>l.column.isMoving());let r=!1,a=!1;if(o){const l=this.beans.gos.get("enableRtl"),c=s===1,d=s===0;i&&(l?a=c:r=d),n&&(l?r=d:a=c)}this.comp.toggleCss("ag-header-highlight-before",r),this.comp.toggleCss("ag-header-highlight-after",a)}resizeHeader(e,t){const{resizeFeature:i}=this;if(!i)return;const n=i.getInitialValues(t);i.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:i,enterpriseMenuFactory:n}=this.beans,s=this.column,o=s.getProvidedColumnGroup(),r=$e(i,{displayName:this.displayName,columnGroup:s,setExpanded:l=>{e.setColumnGroupOpened(o,l,"gridInitializing")},setTooltip:(l,c)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(l,c)},showColumnMenu:(l,c)=>n?.showMenuAfterButtonClick(o,l,"columnMenu",c),showColumnMenuAfterMouseClick:(l,c)=>n?.showMenuAfterMouseEvent(o,l,"columnMenu",c),eGridHeader:this.eGui}),a=Qye(t,r);a&&this.comp.setUserCompDetails(a)}addHeaderMouseListeners(e){const t=s=>this.handleMouseOverChange(s.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),n=s=>this.handleContextMenuMouseEvent(s,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:i,contextmenu:n})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),i=eK(t,this.gos,null,e);e.isPadding()?(i.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&i.push("ag-header-span-height")):(i.push("ag-header-group-cell-with-group"),t?.wrapHeaderText&&i.push("ag-header-cell-wrap-text"));for(const n of i)this.comp.toggleCss(n,!0)}setupMovingCss(e){const{column:t}=this,n=t.getProvidedColumnGroup().getLeafColumns(),s=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(const o of n)e.addManagedListeners(o,{movingChanged:s});s()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===oe.ENTER){const i=this.column,n=!i.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(i.getProvidedColumnGroup(),n,"uiColumnExpanded")}}setDragSource(e){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function VSe(e,t,i){e.colGroupSvc?.setColumnGroupOpened(t,i,"api")}function zSe(e,t,i){return e.colGroupSvc?.getColumnGroup(t,i)??null}function HSe(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null}function jSe(e,t,i){return e.colNames.getDisplayNameForColumnGroup(t,i)||""}function WSe(e){return e.colGroupSvc?.getColumnGroupState()??[]}function USe(e,t){e.colGroupSvc?.setColumnGroupState(t,"api")}function $Se(e){e.colGroupSvc?.resetColumnGroupState("api")}function YSe(e){return e.visibleCols.treeLeft}function KSe(e){return e.visibleCols.treeCenter}function qSe(e){return e.visibleCols.treeRight}function ZSe(e){return e.visibleCols.getAllTrees()}function XSe(e,t){for(let i=0;i<t.length;i++){const n=e.indexOf(t[i]);n>=0&&(e[n]=e[e.length-1],e.pop())}}var QSe=class extends he{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colFlex:i,colModel:n,colGroupSvc:s,colViewport:o,selectionColSvc:r}=this.beans;t||this.buildTrees(n,s),s?.updateOpenClosedVisibility(),this.leftCols=GT(this.treeLeft),this.centerCols=GT(this.treeCenter),this.rightCols=GT(this.treeRight),r?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(n),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(a=>a.isAutoHeight()),i?.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(n,this.leftCols,this.rightCols,e),o.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let i=t.getParent();for(;i;){if(!i.isPadding()){const n=i.getProvidedColumnGroup().getLevel()+1;n>e&&(e=n);break}i=i.getParent()}}return e}updateBodyWidths(){const e=Ol(this.centerCols),t=Ol(this.leftCols),i=Ol(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,i,n){let s,o;this.gos.get("enableRtl")?(s=t?t[0]:null,o=i?fi(i):null):(s=t?fi(t):null,o=i?i[0]:null);for(const r of e.getCols())r.setLastLeftPinned(r===s,n),r.setFirstRightPinned(r===o,n)}buildTrees(e,t){const i=e.getColsToShow(),n=i.filter(l=>l.getPinned()=="left"),s=i.filter(l=>l.getPinned()=="right"),o=i.filter(l=>l.getPinned()!="left"&&l.getPinned()!="right"),r=new f6,a=l=>t?t.createColumnGroups(l):l.columns;this.treeLeft=a({columns:n,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:s,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:o,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),i=[],n=[],s=[];for(const o of t){const r=o.getPinned();r?r===!0||r==="left"?i.push(o):s.push(o):n.push(o)}this.ariaOrderColumns=i.concat(n).concat(s)}getAriaColIndex(e){let t;return dn(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(const e of[this.treeLeft,this.treeRight,this.treeCenter])for(const t of e)dn(t)&&t.checkLeft()}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const n=t.getCols().slice(0),s=this.gos.get("enableRtl");for(const o of[this.leftCols,this.rightCols,this.centerCols]){if(s){let r=Ol(o);for(const a of o)r-=a.getActualWidth(),a.setLeft(r,e)}else{let r=0;for(const a of o)a.setLeft(r,e),r+=a.getActualWidth()}XSe(n,o)}for(const o of n)o.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,i,n){const s=[];let o=null;for(let r=0;r<t.length;r++){const a=t[r],l=t.length-r,c=Math.min(a.getColSpan(e),l),d=[a];if(c>1){const g=c-1;for(let m=1;m<=g;m++)d.push(t[r+m]);r+=g}let p;if(i){p=!1;for(const g of d)i(g)&&(p=!0)}else p=!0;p&&(s.length===0&&o&&(n&&n(a))&&s.push(o),s.push(a)),o=a}return s}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,i=t.indexOf(e);return i>0?t[i-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};ph(this.treeCenter,!1,e),ph(this.treeLeft,!1,e),ph(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const n=this[t[i]];if(n.length)return e?fi(n):n[0]}return null}getColAfter(e){const t=this.allCols,i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getColsLeftWidth(){return Ol(this.leftCols)}getDisplayedColumnsRightWidth(){return Ol(this.rightCols)}isColAtEdge(e,t){const i=this.allCols;if(!i.length)return!1;const n=t==="first";let s;if(dn(e)){const o=e.getDisplayedLeafColumns();if(!o.length)return!1;s=n?o[0]:fi(o)}else s=e;return(n?i[0]:fi(i))===s}};function ph(e,t,i){if(e)for(let n=0;n<e.length;n++){const s=e[n];if(dn(s)){const o=t?s.getDisplayedChildren():s.getChildren();ph(o,t,i)}i(s)}}function GT(e){const t=[];return ph(e,!0,i=>{Fu(i)&&t.push(i)}),t}var JSe=class extends he{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return ec(null,t,i=>{Ds(i)&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const i=[];ec(null,t,n=>{if(Ds(n)){const s=n.getColGroupDef(),o={groupId:n.getGroupId(),open:s?s.openByDefault:void 0};i.push(o)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){const{colModel:i,colAnimation:n,visibleCols:s,eventSvc:o}=this.beans;if(!i.getColTree().length)return;n?.start();const a=[];for(const l of e){const c=l.groupId,d=l.open,p=this.getProvidedColGroup(c);p&&p.isExpanded()!==d&&(p.setExpanded(d),a.push(p))}s.refresh(t,!0),a.length&&o.dispatchEvent({type:"columnGroupOpened",columnGroup:a.length===1?a[0]:void 0,columnGroups:a}),n?.finish()}setColumnGroupOpened(e,t,i){let n;Ds(e)?n=e.getId():n=e||"",this.setColumnGroupState([{groupId:n,open:t}],i)}getProvidedColGroup(e){let t=null;return ec(null,this.beans.colModel.getColTree(),i=>{Ds(i)&&i.getId()===e&&(t=i)}),t}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),s=t==="After"?fi(n):n[0],o=`getCol${t}`;for(;;){const r=this.beans.visibleCols[o](s);if(!r)return null;const a=this.getColGroupAtLevel(r,i);if(a!==e)return a}}getColGroupAtLevel(e,t){let i=e.getParent(),n,s;for(;n=i.getProvidedColumnGroup().getLevel(),s=i.getPaddingLevel(),!(n+s<=t);)i=i.getParent();return i}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();ph(e,!1,t=>{dn(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(dn(e))return e;const i=this.beans.visibleCols.getAllTrees(),n=typeof t=="number";let s=null;return ph(i,!1,o=>{if(dn(o)){const r=o;let a;n?a=e===r.getGroupId()&&t===r.getPartId():a=e===r.getGroupId(),a&&(s=r)}}),s}createColumnGroups(e){const{columns:t,idCreator:i,pinned:n,oldDisplayedGroups:s,isStandaloneStructure:o}=e,r=this.mapOldGroupsById(s),a=[];let l=t;for(;l.length;){const c=l;l=[];let d=0;const p=g=>{const m=d;d=g;const y=c[m],C=(dn(y)?y.getProvidedColumnGroup():y).getOriginalParent();if(C==null){for(let x=m;x<g;x++)a.push(c[x]);return}const w=this.createColumnGroup(C,i,r,n,o);for(let x=m;x<g;x++)w.addChild(c[x]);l.push(w)};for(let g=1;g<c.length;g++){const m=c[g],b=(dn(m)?m.getProvidedColumnGroup():m).getOriginalParent(),C=c[d],x=(dn(C)?C.getProvidedColumnGroup():C).getOriginalParent();b!==x&&p(g)}d<c.length&&p(c.length)}return o||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,i,n,s,o,r){const a=s.getUniqueKey(t.groupId||null,null),l=pz(this.beans,t,a),c=new lx(l,a,!1,i);this.createBean(c);const d=this.findExistingGroup(t,o);d&&o.splice(d.idx,1);const p=d?.group;p&&c.setExpanded(p.isExpanded());const g=a6(this.beans,l.children,i+1,e,n,s,o,r);return c.setChildren(g),c}balanceColumnTree(e,t,i,n){const s=[];for(let o=0;o<e.length;o++){const r=e[o];if(Ds(r)){const a=r,l=this.balanceColumnTree(a.getChildren(),t+1,i,n);a.setChildren(l),s.push(a)}else{let a,l;for(let c=t;c<i;c++){const d=n.getUniqueKey(null,null),p=pz(this.beans,null,d),g=new lx(p,d,!0,c);this.createBean(g),l&&l.setChildren([g]),l=g,a||(a=l)}if(a&&l)if(s.push(a),e.some(d=>Ds(d))){l.setChildren([r]);continue}else{l.setChildren(e);break}s.push(r)}}return s}findDepth(e){let t=0,i=e;for(;i?.[0]&&Ds(i[0]);)t++,i=i[0].getChildren();return t}findMaxDepth(e,t){let i=t;for(let n=0;n<e.length;n++){const s=e[n];if(Ds(s)){const o=s,r=this.findMaxDepth(o.getChildren(),t+1);i<r&&(i=r)}}return i}balanceTreeForAutoCols(e,t){const i=[];for(const n of e){let s=n;for(let o=t-1;o>=0;o--){const r=new lx(null,`FAKE_PATH_${n.getId()}}_${o}`,!0,o);this.createBean(r),r.setChildren([s]),s.originalParent=r,s=r}t===0&&(n.originalParent=null),i.push(s)}return i}findExistingGroup(e,t){if(e.groupId!=null)for(let n=0;n<t.length;n++){const s=t[n];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:n,group:s}}}createColumnGroup(e,t,i,n,s){const o=e.getGroupId(),r=t.getInstanceIdForKey(o),a=_6(o,r);let l=i[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),Pe(l)?l.reset():(l=new Yv(e,o,r,n),s||this.createBean(l)),l}mapOldGroupsById(e){const t={},i=n=>{for(const s of n)if(dn(s)){const o=s;t[s.getUniqueId()]=o,i(o.getChildren())}};return e&&i(e),t}setupParentsIntoCols(e,t){for(const i of e??[])if(i.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),i.parent=t,dn(i)){const n=i;this.setupParentsIntoCols(n.getChildren(),n)}}},exe={moduleName:"ColumnGroup",version:ke,dynamicBeans:{headerGroupCellCtrl:_Se},beans:[JSe],apiFunctions:{getAllDisplayedColumnGroups:ZSe,getCenterDisplayedColumnGroups:KSe,getColumnGroup:zSe,getColumnGroupState:WSe,getDisplayNameForColumnGroup:jSe,getLeftDisplayedColumnGroups:YSe,getProvidedColumnGroup:HSe,getRightDisplayedColumnGroups:qSe,resetColumnGroupState:$Se,setColumnGroupOpened:VSe,setColumnGroupState:USe}},txe={tag:"div",cls:"ag-skeleton-container"},ixe=class extends qi{constructor(){super(txe)}init(t){const i=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",i),this.addDestroyFunc(()=>Vv(t.eParentOfValue)),Vv(t.eParentOfValue,i),t.deferRender?this.setupLoading(t):t.node.failedLoad?this.setupFailed():this.setupLoading(t)}setupFailed(){const t=this.getLocaleTextFunc();this.getGui().textContent=t("loadingError","ERR");const i=t("ariaSkeletonCellLoadingFailed","Row failed to load");Sf(this.getGui(),i)}setupLoading(t){const i=Zs({tag:"div",cls:"ag-skeleton-effect"}),n=t.node.rowIndex;if(n!=null){const r=75+25*(n%2===0?Math.sin(n):Math.cos(n));i.style.width=`${r}%`}this.getGui().appendChild(i);const s=this.getLocaleTextFunc(),o=t.deferRender?s("ariaDeferSkeletonCellLoading","Cell is loading"):s("ariaSkeletonCellLoading","Row data is loading");Sf(this.getGui(),o)}refresh(t){return!1}},nxe={moduleName:"CheckboxCellRenderer",version:ke,userComponents:{agCheckboxCellRenderer:twe}},sxe={moduleName:"SkeletonCellRenderer",version:ke,userComponents:{agSkeletonCellRenderer:ixe}};function oxe(e,t){const i=e.colModel.getColDefCol(t);return i?i.getColDef():null}function rxe(e){return e.colModel.getColumnDefs(!0)}function axe(e,t,i){return e.colNames.getDisplayNameForColumn(t,i)||""}function lxe(e,t){return e.colModel.getColDefCol(t)}function cxe(e){return e.colModel.getColDefCols()}function uxe(e,t){return Yr(e,t,"api")}function dxe(e){return x0(e)}function hxe(e){xye(e,"api")}function pxe(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function gxe(e){return e.visibleCols.isPinningLeft()}function fxe(e){return e.visibleCols.isPinningRight()}function mxe(e,t){return e.visibleCols.getColAfter(t)}function yxe(e,t){return e.visibleCols.getColBefore(t)}function vxe(e,t,i){e.colModel.setColsVisible(t,i,"api")}function bxe(e,t,i){e.pinnedCols?.setColsPinned(t,i,"api")}function Cxe(e){return e.colModel.getCols()}function wxe(e){return e.visibleCols.leftCols}function Sxe(e){return e.visibleCols.centerCols}function xxe(e){return e.visibleCols.rightCols}function Mxe(e){return e.visibleCols.allCols}function Dxe(e){return e.colViewport.getViewportColumns()}function Nk(e,t){if(!e)return;const i=e,n={};for(const s of Object.keys(i)){if(t&&t.indexOf(s)>=0||BY.has(s))continue;const o=i[s];typeof o=="object"&&o!==null&&o.constructor===Object?n[s]=Nk(o):n[s]=o}return n}var Axe=class extends he{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,i,n,s=!1){const o=e.slice();t?o.sort((l,c)=>i.indexOf(l)-i.indexOf(c)):(i||s)&&o.sort((l,c)=>n.indexOf(l)-n.indexOf(c));const r=this.rowGroupColsSvc?.columns,a=this.pivotColsSvc?.columns;return this.buildColumnDefs(o,r,a)}buildColumnDefs(e,t=[],i=[]){const n=[],s={};for(const o of e){const r=this.createDefFromColumn(o,t,i);let a=!0,l=r,c=o.getOriginalParent(),d=null;for(;c;){let p=null;if(c.isPadding()){c=c.getOriginalParent();continue}const g=s[c.getGroupId()];if(g){g.children.push(l),a=!1;break}if(p=this.createDefFromGroup(c),p&&(p.children=[l],s[p.groupId]=p,l=p,c=c.getOriginalParent()),c!=null&&d===c){a=!1;break}d=c}a&&n.push(l)}return n}createDefFromGroup(e){const t=Nk(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const n=Nk(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?i.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=e.isVisible()?void 0:!0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,n}},Rxe=class extends he{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(e={}){const t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);const i=this.flexViewportWidth,{visibleCols:n,colDelayRenderSvc:s}=this.beans,o=n.centerCols;let r=-1;if(e.resizingCols){const b=new Set(e.resizingCols);for(let C=o.length-1;C>=0;C--)if(b.has(o[C])){r=C;break}}let a=!1;const l=o.map((b,C)=>{const w=b.getFlex(),x=w!=null&&w>0&&C>r;return a||(a=x),{col:b,isFlex:x,flex:Math.max(0,w??0),initialSize:b.getActualWidth(),min:b.getMinWidth(),max:b.getMaxWidth(),targetSize:0}});if(a?(s?.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(s),!i||!a)return[];let c=l.length,d=l.reduce((b,C)=>b+C.flex,0),p=i;const g=(b,C)=>{b.frozenSize=C,b.col.setActualWidth(C,t),p-=C,d-=b.flex,c-=1},m=b=>b.frozenSize!=null;for(const b of l)b.isFlex||g(b,b.initialSize);for(;c>0;){const b=Math.round(d<1?p*d:p);let C,w=0,x=0;for(const I of l){if(m(I))continue;C=I,x+=b*(I.flex/d);const N=x-w,T=Math.round(N);I.targetSize=T,w+=T}C&&(C.targetSize+=b-w);let M=0;for(const I of l){if(m(I))continue;const N=I.targetSize,T=Math.min(Math.max(N,I.min),I.max);M+=T-N,I.violationType=T===N?void 0:T<N?"max":"min",I.targetSize=T}const E=M===0?"all":M>0?"min":"max";for(const I of l)m(I)||(E==="all"||I.violationType===E)&&g(I,I.targetSize)}e.skipSetLeft||n.setLeftValues(t),e.updateBodyWidths&&n.updateBodyWidths();const y=l.filter(b=>b.isFlex&&!b.violationType).map(b=>b.col);if(e.fireResizedEvent){const b=l.filter(w=>w.initialSize!==w.frozenSize).map(w=>w.col),C=l.filter(w=>w.flex).map(w=>w.col);Mf(this.eventSvc,b,!0,t,C)}return this.revealColumns(s),y}revealColumns(e){this.columnsHidden&&(e?.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){const{flex:t,initialFlex:i}=e.colDef;t!==void 0?e.flex=t:i!==void 0&&(e.flex=i)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}};function ev(e,t,i){if(!t||!e)return;if(!i)return e[t];const n=t.split(".");let s=e;for(let o=0;o<n.length;o++){if(s==null)return;s=s[n[o]]}return s}var Exe=["dateTimeString","dateString","text","number","boolean","date"],Txe=class extends he{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===oe.SPACE}},date({formatValue:e}){return{cellEditor:"agDateCellEditor",keyCreator:e}},dateString({formatValue:e}){return{cellEditor:"agDateStringCellEditor",keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:i}){return{cellEditorParams:{useFormatter:!0},comparator:(n,s)=>{const o=t.getColDefCol(i),r=o?.getColDef();if(!o||!r)return 0;const a=n==null?"":e({column:o,node:null,value:n}),l=s==null?"":e({column:o,node:null,value:s});return a===l?0:a>l?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={},i={},n=d=>p=>{const{column:g,node:m,value:y}=p;let b=g.getColDef().valueFormatter;return b===d.groupSafeValueFormatter&&(b=d.valueFormatter),this.beans.valueSvc.formatValue(g,m,y,b)};for(const d of Object.keys(e)){const p=e[d],g={...p,groupSafeValueFormatter:Jz(p,this.gos)};t[d]=g,i[d]=n(g)}const s=this.gos.get("dataTypeDefinitions")??{},o={};for(const d of Object.keys(s)){const p=s[d],g=this.processDataTypeDefinition(p,s,[d],e);g&&(t[d]=g,p.dataTypeMatcher&&(o[d]=p.dataTypeMatcher),i[d]=n(g))}const{valueParser:r,valueFormatter:a}=e.object,{valueParser:l,valueFormatter:c}=t.object;this.hasObjectValueParser=l!==r,this.hasObjectValueFormatter=c!==a,this.formatValueFuncs=i,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(o,e)}sortKeysInMatchers(e,t){const i={...e};for(const n of Exe)delete i[n],i[n]=e[n]??t[n].dataTypeMatcher;return i}processDataTypeDefinition(e,t,i,n){let s;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let r=n[o];const a=t[o];if(r&&a&&(r=a),!Qz(e,r,o))return;s=Xz(r,e)}else{if(i.includes(o)){Se(44);return}const r=t[o];if(!Qz(e,r,o))return;const a=this.processDataTypeDefinition(r,t,[...i,o],n);if(!a)return;s=Xz(a,e)}return{...s,groupSafeValueFormatter:Jz(s,this.gos)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:n}=t;const{field:s}=t;if(n===void 0&&(n=e.cellDataType),(n==null||n===!0)&&(n=this.canInferCellDataType(e,t)?this.inferCellDataType(s,i):!1),!n){e.cellDataType=!1;return}const o=this.dataTypeDefinitions[n];if(!o){Se(47,{cellDataType:n});return}return e.cellDataType=n,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,n,o,i),o.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=n=>{t.add(n.key)};e.__addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){const{gos:i}=this;if(!en(i))return!1;const n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(_T(t,n))return!1;const s=t.type===null?e.type:t.type;if(s){const o=i.get("columnTypes")??{};if(S0(s).some(a=>{const l=o[a.trim()];return l&&_T(l,n)}))return!1}return!_T(e,n)}inferCellDataType(e,t){if(!e)return;let i;const n=this.getInitialData();if(n){const o=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");i=ev(n,e,o)}else this.initWaitForRowData(t);return i==null?void 0:Object.keys(this.dataTypeMatchers).find(o=>this.dataTypeMatchers[o](i))??"object"}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const t=this.beans.rowModel.rootNode?._leafs;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:i,eventSvc:n}=this.beans;t&&i&&(i.shouldQueueResizeOperations=!0);const[s]=this.addManagedEventListeners({rowDataUpdateStarted:o=>{const{firstRowData:r}=o;r&&(s?.(),this.isPendingInference=!1,this.processColumnsPendingInference(r,t),this.columnStateUpdatesPendingInference={},t&&i?.processResizeOperations(),n.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const n={},s={};for(const o of Object.keys(this.columnStateUpdatesPendingInference)){const r=this.columnStateUpdatesPendingInference[o],a=this.colModel.getCol(o);if(!a)return;const l=a.getColDef();if(!this.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const c=a.getColDef();if(t&&c.type&&c.type!==l.type){const d=kxe(a,r);d.rowGroup&&d.rowGroupIndex==null&&(n[o]=d),d.pivot&&d.pivotIndex==null&&(s[o]=d),i.push(d)}}t&&i.push(...this.generateColumnStateForRowGroupAndPivotIndexes(n,s)),i.length&&Yr(this.beans,{state:i},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},{rowGroupColsSvc:n,pivotColsSvc:s}=this.beans;return n?.restoreColumnOrder(i,e),s?.restoreColumnOrder(i,t),Object.values(i)}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const n=yk(this.beans,i,e.getColId());return e.setColDef(n,i,t),!0}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e==="dateTime"||e==="dateTimeString"}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;const i=this.getDataTypeDefinition(e)?.dataTypeMatcher;return i?i(t):!0}validateColDef(e){const t=i=>Se(48,{property:i});if(e.cellDataType==="object"){const{object:i}=this.dataTypeDefinitions;e.valueFormatter===i.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===i.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){const t=e.cellDataType;if(!t||typeof t!="string")return;const{dataTypeDefinitions:i,beans:n,formatValueFuncs:s}=this,o=i[t];o&&n.colFilter?.setColDefPropsForDataType(e,o,s[t])}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,i,n){const s=this.formatValueFuncs[t],o=this.columnDefinitionPropsPerDataType[i.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:i,colId:n,formatValue:s});Object.assign(e,o)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),i=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:n=>Co(n.newValue&&String(n.newValue)),valueFormatter:n=>n.value==null?"":!(n.value instanceof Date)||isNaN(n.value.getTime())?t("invalidDate","Invalid Date"):zo(n.value,i)??"",dataTypeMatcher:n=>n instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:i=>Co(i)??void 0,dateFormatter:i=>zo(i??null,t)??void 0,valueParser:i=>cx(String(i.newValue))?i.newValue:null,valueFormatter:i=>cx(String(i.value))?String(i.value):"",dataTypeMatcher:i=>typeof i=="string"&&cx(i)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>t.newValue?.trim?.()===""?null:Number(t.newValue),valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:ck(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>t.newValue==null?t.newValue:t.newValue?.trim?.()===""?null:String(t.newValue).toLowerCase()==="true",valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:t=>typeof t=="string"&&fve(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>ck(t.value)??""}}}destroyColumnStateUpdateListeners(){for(const e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function Xz(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...S0(e.columnTypes),...S0(t.columnTypes)]),i}function Qz(e,t,i){return t?t.baseDataType!==e.baseDataType?(Se(46),!1):!0:(Se(45,{parentCellDataType:i}),!1)}function Jz(e,t){if(e.valueFormatter)return i=>{if(i.node?.group){const n=(i.colDef.pivotValueColumn??i.column).getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(i);if(e.baseDataType==="number"&&n!=="count"){if(typeof i.value=="number")return e.valueFormatter(i);if(typeof i.value=="object"){if(!i.value)return;if("toNumber"in i.value)return e.valueFormatter({...i,value:i.value.toNumber()});if("value"in i.value)return e.valueFormatter({...i,value:i.value.value})}}return}}else if(t.get("groupHideOpenParents")&&i.column.isRowGroupActive()&&typeof i.value=="string"&&!e.dataTypeMatcher?.(i.value))return;return e.valueFormatter(i)}}function Ixe(e,t,i,n){if(!t[i])return!1;const s=e[i];return s===null?(t[i]=!1,!1):n===void 0?!!s:s===n}function _T(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,n])=>Ixe(e,t,i,n))}function kxe(e,t){const i=g6(e);for(const n of t)delete i[n],n==="rowGroup"?delete i.rowGroupIndex:n==="pivot"&&delete i.pivotIndex;return i}var Lxe={moduleName:"DataType",version:ke,beans:[Txe],dependsOn:[nxe]},Pxe={moduleName:"ColumnFlex",version:ke,beans:[Rxe]},bK={moduleName:"ColumnApi",version:ke,beans:[Axe],apiFunctions:{getColumnDef:oxe,getDisplayNameForColumn:axe,getColumn:lxe,getColumns:cxe,applyColumnState:uxe,getColumnState:dxe,resetColumnState:hxe,isPinning:pxe,isPinningLeft:gxe,isPinningRight:fxe,getDisplayedColAfter:mxe,getDisplayedColBefore:yxe,setColumnsVisible:vxe,setColumnsPinned:bxe,getAllGridColumns:Cxe,getDisplayedLeftColumns:wxe,getDisplayedCenterColumns:Sxe,getDisplayedRightColumns:xxe,getAllDisplayedColumns:Mxe,getAllDisplayedVirtualColumns:Dxe,getColumnDefs:rxe}};function Nxe(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(s=>s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")).join(" ")}var Fxe=class extends he{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const n=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:s}=this.beans;return i&&s?s.getHeaderName(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,i){const n=t?.getColGroupDef();return n?this.getHeaderName(n,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,n,s){const o=e.headerValueGetter;if(o){const r=$e(this.gos,{colDef:e,column:t,columnGroup:i,providedColumnGroup:n,location:s});return typeof o=="function"?o(r):typeof o=="string"?this.beans.expressionSvc?.evaluate(o,r)??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return Nxe(e.field)}return""}},Oxe=class extends he{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){const{visibleCols:n}=this,s=n.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!s)){if(this.scrollWidth=e,this.scrollPosition=t,n.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const r=n.bodyWidth;this.viewportLeft=r-t-e,this.viewportRight=r-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(i)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t];break}return i??[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||Bxe(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),n=this.viewportLeft-200,s=this.viewportRight+200,o=t<n&&i<n,r=t>s&&i>s;return!o&&!r}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=o=>{const r=o.getLeft();return Pe(r)&&r>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:n}=this,s=n.centerCols;return n.getColsForRow(e,s,i,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const i=n=>{const s=new Set,o={};for(const r of n){let a=r.getParent();const l=r.isSpanHeaderHeight();for(;a&&!s.has(a);){if(l&&a.isPadding()){a=a.getParent();continue}const d=a.getProvidedColumnGroup().getLevel();o[d]??(o[d]=[]),o[d].push(a),s.add(a),a=a.getParent()}}return o};this.rowsOfHeadersToRenderLeft=i(e),this.rowsOfHeadersToRenderRight=i(t),this.rowsOfHeadersToRenderCenter=i(this.headerColsWithinViewport)}extractViewport(){const e=n=>`${n.getId()}-${n.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),i=this.colsWithinViewportHash!==t;return i&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),i}};function Bxe(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var Gxe=class extends he{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class i{refresh(){return!1}getGui(){return this.eGui}init(s){const o=t(s),r=typeof o;if(r==="string"||r==="number"||r==="boolean"){this.eGui=BP("<span>"+o+"</span>");return}if(o==null){this.eGui=Zs({tag:"span"});return}this.eGui=o}}return i}},_xe={moduleName:"CellRendererFunction",version:ke,beans:[Gxe]},Vxe=class extends hbe{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(e!=null)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:i,dynamicBeans:n,selectors:s}=e;if(i){const o=(r,a,l,c)=>{this.agGridDefaults[r]=a,(l||c)&&(this.agGridDefaultOverrides[r]={params:l,processParams:c})};for(const r of Object.keys(i)){let a=i[r];if(uve(a)&&(a=a.getComp(this.beans)),typeof a=="object"){const{classImp:l,params:c,processParams:d}=a;o(r,l,c,d)}else o(r,a)}}this.registerDynamicBeans(n);for(const o of s??[])this.selectors[o.selector]=o;if(t)for(const o of Object.keys(t))this.icons[o]=t[o]}getUserComponent(e,t){const i=(a,l,c,d)=>({componentFromFramework:l,component:a,params:c,processParams:d}),{frameworkOverrides:n}=this.beans,s=n.frameworkComponent(t,this.gos.get("components"));if(s!=null)return i(s,!0);const o=this.jsComps[t];if(o){const a=n.isFrameworkComponent(o);return i(o,a)}const r=this.agGridDefaults[t];if(r){const a=this.agGridDefaultOverrides[t];return i(r,!1,a?.params,a?.processParams)}return this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){return t?Wa(279,{name:e}):this.beans.validation?.missingDynamicBean(e)??Wa(256)}},zxe=23,Hxe=class extends he{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(const e of this.readyCallbacks)e(this.params);this.readyCallbacks.length=0}},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){const e=Object.values(this.params);this.ready=e.length===zxe&&e.every(t=>t?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const i=this.readyCallbacks.indexOf(t);i>=0&&this.readyCallbacks.splice(i,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},jxe='.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-virtual-list-item{height:var(--ag-list-item-height);position:absolute;width:100%}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}',Wxe={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:go,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Gl,rangeSelectionBackgroundColor:xa(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:xa(.5),rangeHeaderHighlightColor:$ve(.08),rowNumbersSelectedColor:xa(.5),rowHoverColor:xa(.08),columnHoverColor:xa(.05),selectedRowBackgroundColor:xa(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:go,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:dr(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:dr(.1),iconButtonActiveColor:Gl,iconButtonActiveBackgroundColor:xa(.28),iconButtonActiveIndicatorColor:Gl,menuBorder:{color:dr(.2)},menuBackgroundColor:br(.03),menuTextColor:br(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:dr(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Gl},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:dr(.2)},panelBackgroundColor:go,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:dr(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:dr(.13)},selectCellBackgroundColor:dr(.07),selectCellBorder:{color:dr(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:go,filterPanelApplyButtonBackgroundColor:Gl,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:xg,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:xg,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:dr(.15),statusBarLabelColor:xg,statusBarLabelFontWeight:500,statusBarValueColor:xg,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"}},Uxe=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",CK={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},$xe={...CK,cellBatchEditTextColor:"#f3d0b3"},Yxe=()=>Xa({feature:"batchEditStyle",params:CK,css:Uxe}),Kxe=Yxe(),qxe=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",Zxe={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},Xxe=()=>Xa({feature:"buttonStyle",params:{...Zxe,buttonBackgroundColor:go,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Gl}},css:qxe}),Qxe=Xxe(),Jxe=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",e0e=()=>Xa({feature:"columnDropStyle",css:Jxe}),wK=e0e(),t0e={warn:(...e)=>{Se(e[0],e[1])},error:(...e)=>{oi(e[0],e[1])},preInitErr:(...e)=>{ky(e[0],e[2],e[1])}},i0e=()=>nbe(t0e).withParams(Wxe).withPart(Qxe).withPart(wK).withPart(Kxe),n0e='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',s0e=()=>Xa({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:go,checkboxUncheckedBorderColor:br(.3),checkboxCheckedBackgroundColor:Gl,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:go,checkboxIndeterminateBackgroundColor:br(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:go,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:n0e}),o0e=s0e(),SK=()=>({...A0,...$xe,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:br(.05),rowHoverColor:xa(.15),selectedRowBackgroundColor:xa(.2),menuBackgroundColor:br(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:xg,findMatchColor:go,findActiveMatchColor:go,checkboxUncheckedBorderColor:br(.4),toggleButtonOffBackgroundColor:br(.4),rowBatchEditBackgroundColor:br(.1)}),r0e=()=>({...SK(),backgroundColor:"#1f2836"}),a0e=()=>Xa({feature:"colorScheme",params:A0,modeParams:{light:A0,dark:SK(),"dark-blue":r0e()}}),l0e=a0e(),xK={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},MK={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>'},c0e=(e={})=>{let t="";for(const i of[...Object.keys(xK),...Object.keys(MK)]){const n=u0e(i,e.strokeWidth);t+=`.ag-icon-${i}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(n)}'); }
`}return t},u0e=(e,t=1.5)=>{const i=MK[e];if(i)return i;const n=xK[e];if(!n)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+n+"</svg>"},d0e=(e={})=>Xa({feature:"iconSet",css:()=>c0e(e)}),h0e=d0e(),p0e=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',g0e=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}",f0e={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},m0e=()=>Xa({feature:"inputStyle",params:{...f0e,inputBackgroundColor:go,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Gl},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:br(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>p0e+g0e}),y0e=m0e(),v0e='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',b0e={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},C0e=()=>Xa({feature:"tabStyle",params:{...b0e,tabBarBorder:!0,tabBarBackgroundColor:dr(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:go},css:v0e}),w0e=C0e(),S0e=()=>i0e().withPart(o0e).withPart(l0e).withPart(h0e).withPart(w0e).withPart(y0e).withPart(wK).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),x0e=S0e(),M0e={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},D0e={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},A0e={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},eH={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},tH={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},iH={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},VT={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},nH={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0};function R0e(e,t){for(const i of t.sort((n,s)=>n.moduleName.localeCompare(s.moduleName))){const n=i.css;n&&e.set(`module-${i.moduleName}`,n)}}var E0e=class extends dbe{constructor(){super(...arguments),this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1}initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(eH),this.getSizeEl(tH),this.getSizeEl(iH),this.getSizeEl(VT),this.getSizeEl(nH),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(nH)}getRowBorderWidth(){return this.getCSSVariablePixelValue(VT)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(eH)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(tH)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(M0e)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(D0e),i=this.getCSSVariablePixelValue(A0e);return e-1+i*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(iH)}refreshRowHeightVariable(){const{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),i=this.gos.get("rowHeight");if(i==null||isNaN(i)||!isFinite(i))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;const n=`${i}px`;return t!=n?(e.style.setProperty("--ag-line-height",n),i):t!=""?Number.parseFloat(t):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const i=this.measureSizeEl(e);return i==="detached"||i==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const i=t.offsetWidth;return i===zT?"no-styles":(this.sizesMeasured=!0,i)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=Zs({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const i=this.getMeasurementContainer();t=Zs({tag:"div"});const{border:n,noWarn:s}=e;n?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${zT}px)`)):t.style.width=`var(${e.cssName}, ${zT}px)`,i.appendChild(t),this.sizeEls.set(e,t);let o=this.measureSizeEl(e);o==="no-styles"&&!s&&Se(9,{variable:e});const r=Ac(this.beans,t,()=>{const a=this.measureSizeEl(e);a==="detached"||a==="no-styles"||(this.lastKnownValues.set(e,a),a!==o&&(o=a,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}fireStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(VT);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&oi(t?106:239)}getAdditionalCss(){const e=new Map;return e.set("core",[jxe]),R0e(e,Array.from(Pme())),e}getDefaultTheme(){return x0e}themeError(e){oi(240,{theme:e})}},zT=15538,T0e=class extends pbe{postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}};function DK(e,t,i){const n=e.visibleCols.headerGroupRowCount;if(i>=n)return{column:t,headerRowIndex:i};let s=t.getParent();for(;s&&s.getProvidedColumnGroup().getLevel()>i;)s=s.getParent();const o=t.isSpanHeaderHeight();return!s||o&&s.isPadding()?{column:t,headerRowIndex:n}:{column:s,headerRowIndex:s.getProvidedColumnGroup().getLevel()}}var I0e=class extends he{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,i=>{this.gridBodyCon=i.gridBodyCtrl});const t=Kn(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let i;const{colModel:n,colGroupSvc:s,ctrlsSvc:o}=this.beans;if(typeof e=="string"?(i=n.getCol(e),i||(i=s?.getColumnGroup(e)??null)):i=e,!i)return null;const a=o.getHeaderRowContainerCtrl()?.getAllCtrls(),l=fi(a||[]).type==="filter",c=Oa(this.beans)-1;let d=-1,p=i;for(;p;)d++,p=p.getParent();let g=d;return t&&l&&g===c-1&&g++,g===-1?null:{headerRowIndex:g,column:i}}navigateVertically(e,t){const{focusSvc:i,visibleCols:n}=this.beans,{focusedHeader:s}=i;if(!s)return!1;const{headerRowIndex:o}=s,r=s.column,a=Oa(this.beans),l=this.getHeaderRowType(o),c=n.headerGroupRowCount;let{headerRowIndex:d,column:p,headerRowIndexWithoutSpan:g}=e==="UP"?k0e(l,r,o):L0e(r,o,c),m=!1;return d<0&&(d=0,p=r,m=!0),d>=a?(d=-1,this.currentHeaderRowWithoutSpan=-1):g!==void 0&&(this.currentHeaderRowWithoutSpan=g),!m&&!p?!1:i.focusHeaderPosition({headerPosition:{headerRowIndex:d,column:p},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,i){const{focusSvc:n,gos:s}=this.beans,o={...n.focusedHeader};let r,a;this.currentHeaderRowWithoutSpan!==-1?o.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=o.headerRowIndex,e==="LEFT"!==s.get("enableRtl")?(a="Before",r=this.findHeader(o,a)):(a="After",r=this.findHeader(o,a));const l=s.getCallback("tabToNextHeader");if(t&&l){const c=n.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:r,direction:a});if(c){const{headerRowIndex:d}=n.focusedHeader||{};d!=null&&d!=o.headerRowIndex&&(this.currentHeaderRowWithoutSpan=d)}return c}return r||!t?n.focusHeaderPosition({headerPosition:r,direction:a,fromTab:t,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(o,a,i)}focusNextHeaderRow(e,t,i){const n=this.beans,s=e.headerRowIndex;let o=null,r;const a=Oa(n),l=this.beans.visibleCols.allCols;if(t==="Before"){if(s<=0)return!1;o=fi(l),r=s-1,this.currentHeaderRowWithoutSpan-=1}else o=l[0],r=s+1,this.currentHeaderRowWithoutSpan<a?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:c,headerRowIndex:d}=DK(this.beans,o,r);return d>=a&&(d=-1),n.focusSvc.focusHeaderPosition({headerPosition:{column:c,headerRowIndex:d},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(dn(e)){const n=e.getDisplayedLeafColumns();i=t==="Before"?fi(n):n[0]}else i=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(i)}findHeader(e,t){const{colGroupSvc:i,visibleCols:n}=this.beans;let s=e.column;if(s instanceof Yv){const l=s.getDisplayedLeafColumns();s=t==="Before"?l[0]:l[l.length-1]}const o=t==="Before"?n.getColBefore(s):n.getColAfter(s);if(!o)return;const r=n.headerGroupRowCount;if(e.headerRowIndex>=r)return{headerRowIndex:e.headerRowIndex,column:o};const a=i?.getColGroupAtLevel(o,e.headerRowIndex);return a?a.isPadding()&&o.isSpanHeaderHeight()?{headerRowIndex:n.headerGroupRowCount,column:o}:{headerRowIndex:e.headerRowIndex,column:a??o}:{headerRowIndex:o instanceof ip&&o.isSpanHeaderHeight()?n.headerGroupRowCount:e.headerRowIndex,column:o}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function k0e(e,t,i){const n=i-1;if(e!=="filter"){const s=t instanceof ip&&t.isSpanHeaderHeight();let o=t.getParent();for(;o&&(o.getProvidedColumnGroup().getLevel()>n||s&&o.isPadding());)o=o.getParent();if(o)return s?{column:o,headerRowIndex:o.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:n}:{column:o,headerRowIndex:n,headerRowIndexWithoutSpan:n}}return{column:t,headerRowIndex:n,headerRowIndexWithoutSpan:n}}function L0e(e,t,i){const n=t+1,s={column:e,headerRowIndex:n,headerRowIndexWithoutSpan:n};if(e instanceof Yv){if(n>=i)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:i,headerRowIndexWithoutSpan:n};let r=e.getDisplayedChildren()[0];if(r instanceof Yv&&r.isPadding()){const l=r.getDisplayedLeafColumns()[0];l.isSpanHeaderHeight()&&(r=l)}s.column=r,r instanceof ip&&r.isSpanHeaderHeight()&&(s.headerRowIndex=i,s.headerRowIndexWithoutSpan=n)}return s}var P0e=class extends he{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(bve(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy($i(this.beans),sK)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const e=$i(this.beans);return this.isDomDataPresentInHierarchy(e,R0)?!0:this.isDomDataPresentInHierarchy(e,E0)}isDomDataPresentInHierarchy(e,t){let i=e;for(;i;){if(ZY(this.gos,i,t))return!0;i=i.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:i,column:n}=e,s={rowIndex:t,rowPinned:i,column:n,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return o&&(s.isFullWidthCell=o.isFullWidth()),s}clearFocusedCell(){if(this.focusedCell==null)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:i,rowPinned:n,forceBrowserFocus:s=!1,preventScrollOnBrowserFocus:o=!1,sourceEvent:r}=e,a=this.colModel.getCol(t);if(!a){this.focusedCell=null;return}this.focusedCell={rowIndex:i,rowPinned:Ql(n),column:a};const l=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...l,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:s,preventScrollOnBrowserFocus:o,sourceEvent:r}),this.previousCellFocusParams=l}isCellFocused(e){return this.focusedCell==null?!1:hK(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;const{column:t,rowCtrl:{rowIndex:i,pinned:n}}=e,{column:s,headerRowIndex:o}=this.focusedHeader;return t===s&&i===o&&n==s.getPinned()}focusHeaderPosition(e){if(this.setFocusRecovered(),hh(this.beans))return!1;const{direction:t,fromTab:i,allowUserOverride:n,event:s,fromCell:o,rowWithoutSpanValue:r,scroll:a=!0}=e;let{headerPosition:l}=e;if(o&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(l);if(n){const c=this.focusedHeader,d=Oa(this.beans);if(i){const p=this.gos.getCallback("tabToNextHeader");p&&(l=this.getHeaderPositionFromUserFunc({userFunc:p,direction:t,currentPosition:c,headerPosition:l,headerRowCount:d}))}else{const p=this.gos.getCallback("navigateToNextHeader");if(p&&s){const g={key:s.key,previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:d,event:s};l=p(g)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:t,event:s,fromCell:o,rowWithoutSpanValue:r,scroll:a}):!1}focusHeaderPositionFromUserFunc(e){if(hh(this.beans))return!1;const{userFunc:t,headerPosition:i,direction:n,event:s}=e,o=this.focusedHeader,r=Oa(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:n,currentPosition:o,headerPosition:i,headerRowCount:r});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:n,event:s})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:n,headerPosition:s,headerRowCount:o}=e,a=t({backwards:i==="Before",previousHeaderPosition:n,nextHeaderPosition:s,headerRowCount:o});return a===!0?n:a===!1?null:a}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:n,rowWithoutSpanValue:s,event:o,scroll:r=!0}=e,{column:a,headerRowIndex:l}=t,{filterManager:c,ctrlsSvc:d,headerNavigation:p}=this.beans;if(this.focusedHeader&&GCe(e.headerPosition,this.focusedHeader))return!1;if(l===-1)return c?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:o});r&&p?.scrollToColumn(a,i);const m=d.getHeaderRowContainerCtrl(a.getPinned())?.focusHeader(t.headerRowIndex,a,o)||!1;return p&&m&&(s!=null||n)&&(p.currentHeaderRowWithoutSpan=s??-1),m}focusFirstHeader(){if(this.overlays?.isExclusive()&&this.focusOverlay())return!0;const e=this.visibleCols.allCols[0];if(!e)return!1;const t=DK(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.isExclusive()&&this.focusOverlay(!0))return!0;const t=Oa(this.beans)-1,i=fi(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===Ql(t)}focusOverlay(e){const t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&Th(t,e)}focusGridView(e){const{backwards:t=!1,canFocusOverlay:i=!0,event:n}=e;if(this.overlays?.isExclusive())return i&&this.focusOverlay(t);if(LD(this.beans))return t&&!hh(this.beans)?this.focusLastHeader():i&&this.focusOverlay(t)?!0:t?!1:Af(this.beans,t);const s=t?qwe(this.beans):Kwe(this.beans);if(s){const o=e.column??this.focusedHeader?.column,{rowIndex:r,rowPinned:a}=s,l=uc(this.beans,s);if(!o||!l||r==null)return!1;if(o.isSuppressNavigable(l)){const c=this.gos.get("enableRtl");let d;return!n||n.key===oe.TAB?d=c?oe.LEFT:oe.RIGHT:d=n.key,this.beans.navigation?.navigateToNextCell(null,d,{rowIndex:r,column:o,rowPinned:a||null},!0),!0}return this.navigation?.ensureCellVisible({rowIndex:r,column:o,rowPinned:a}),t&&this.rowRenderer.getRowByPosition(s)?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(s,t)||(this.setFocusedCell({rowIndex:r,column:o,rowPinned:Ql(a),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:r,rowPinned:a,column:o})),!0}return!!(i&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){const i=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:Oa(this.beans)-1}}):this.focusGridView({column:i})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},N0e=class extends he{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.horizontalScrollShowing=this.gos.get("alwaysShowHorizontalScroll")===!0,this.verticalScrollShowing=this.gos.get("alwaysShowVerticalScroll")===!0,this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsSvc.get("center");if(!e||this.colAnimation?.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),i=typeof e=="number"&&e>=0?e:hve();i!=null&&(this.scrollbarWidth=i,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},F0e=class extends he{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:i}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:e?.getState()??{}}),this.destroyCalled=!0,t.get("gridCtrl")?.destroyGridUi(),i.destroy(),super.destroy()}},fx=new Set(["gridPreDestroyed","fillStart","pasteStart"]),O0e=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],pN=O0e.reduce((e,t)=>(e[t]=tye(t),e),{}),vy=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),B0e={tag:"span",cls:"ag-sort-indicator-container",children:[vy("Order","order"),vy("Asc","ascending-icon"),vy("Desc","descending-icon"),vy("Mixed","mixed-icon"),vy("None","none-icon")]},gN=class extends qi{constructor(e){super(),this.eSortOrder=je,this.eSortAsc=je,this.eSortDesc=je,this.eSortMixed=je,this.eSortNone=je,e||this.setTemplate(B0e)}attachCustomElements(e,t,i,n,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=n,this.eSortNone=s}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),n=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:n,columnRowGroupChanged:n}),this.onSortChanged()}addInIcon(e,t,i){if(t==null)return;const n=wr(e,this.beans,i);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:i,column:n,gos:s,beans:o}=this,r=o.sortSvc.getDisplaySortForColumn(n);if(e&&_i(e,r==="asc",{skipAriaHidden:!0}),t&&_i(t,r==="desc",{skipAriaHidden:!0}),i){const a=!n.getColDef().unSortIcon&&!s.get("unSortIcon"),l=r==null;_i(i,!a&&l,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:i}=this;this.addInIcon("sortUnSort",e,t);const n=t.getColDef().showRowGroup;Ta(i)&&n&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:i}=this;if(e){const n=t.sortSvc.getDisplaySortForColumn(i)==="mixed";_i(e,n,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:i}}=this;if(!e)return;const n=i.getColumnsWithSortingOrdered(),s=i.getDisplaySortIndexForColumn(t)??-1,o=n.some(a=>i.getDisplaySortIndexForColumn(a)??!1),r=s>=0&&o;_i(e,r,{skipAriaHidden:!0}),s>=0?e.textContent=(s+1).toString():bo(e)}},G0e={selector:"AG-SORT-INDICATOR",component:gN},qv=["asc","desc",null],_0e=class extends he{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,i){const n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)}progressSortFromEvent(e,t){const n=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,n,"uiColumnSorted")}setSortForColumn(e,t,i,n){t!=="asc"&&t!=="desc"&&(t=null);const{gos:s,showRowGroupCols:o}=this.beans,r=Ta(s);let a=[e];if(r&&e.getColDef().showRowGroup){const p=o?.getSourceColumnsForGroupColumn?.(e)?.filter(g=>g.isSortable());p&&(a=[e,...p])}for(const d of a)this.setColSort(d,t,n);const l=(i||s.get("alwaysMultiSort"))&&!s.get("suppressMultiSort"),c=[];if(!l){const d=this.clearSortBarTheseColumns(a,n);c.push(...d)}this.updateSortIndex(e),c.push(...a),this.dispatchSortChangedEvents(n,c)}updateSortIndex(e){const{gos:t,colModel:i,showRowGroupCols:n}=this.beans,s=Ta(t),o=n?.getShowRowGroupCol(e.getId()),r=s&&o||e,a=this.getColumnsWithSortingOrdered();i.forAllCols(d=>this.setColSortIndex(d,null));const l=a.filter(d=>s&&d.getColDef().showRowGroup?!1:d!==r);(r.getSort()?[...l,r]:l).forEach((d,p)=>this.setColSortIndex(d,p))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{t.getSort()&&(e=!0)}),e}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventSvc.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.beans.colModel.forAllCols(n=>{e.includes(n)||(n.getSort()&&i.push(n),this.setColSort(n,void 0,t))}),i}getNextSortDirection(e){const t=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??qv,i=t.indexOf(e.getSort()),n=i<0,s=i==t.length-1;return n||s?t[0]:t[i+1]}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:i,rowGroupColsSvc:n}=this.beans;let s=[];if(t.forAllCols(c=>{c.getSort()&&s.push(c)}),t.isPivotMode()){const c=Ta(e);s=s.filter(d=>{const p=!!d.getAggFunc(),g=!d.isPrimary(),m=c?i?.getShowRowGroupCol(d.getId()):d.getColDef().showRowGroup;return p||g||m})}const o=n?.columns.filter(c=>!!c.getSort())??[],r={};s.forEach((c,d)=>r[c.getId()]=d),s.sort((c,d)=>{const p=c.getSortIndex(),g=d.getSortIndex();if(p!=null&&g!=null)return p-g;if(p==null&&g==null){const m=r[c.getId()],y=r[d.getId()];return m>y?1:-1}else return g==null?-1:1});const a=Ta(e)&&!!o.length;a&&(s=[...new Set(s.map(c=>i?.getShowRowGroupCol(c.getId())??c))]);const l=new Map;if(s.forEach((c,d)=>l.set(c,d)),a)for(const c of o){const d=i.getShowRowGroupCol(c.getId());l.set(c,l.get(d))}return l}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=Ta(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();const n=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,s=n[0].getSort();return n.every(r=>r.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,i){let n=0;e.addManagedListeners(t,{movingChanged:()=>{n=Date.now()}}),i&&e.addManagedElementListeners(i,{click:o=>{const r=t.isMoving(),l=Date.now()-n<50;r||l||this.progressSortFromEvent(t,o)}});const s=()=>{const o=t.getSort();if(e.toggleCss("ag-header-cell-sorted-asc",o==="asc"),e.toggleCss("ag-header-cell-sorted-desc",o==="desc"),e.toggleCss("ag-header-cell-sorted-none",!o),t.getColDef().showRowGroup){const l=!this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t)?.every(c=>t.getSort()==c.getSort());e.toggleCss("ag-header-cell-sorted-mixed",l)}};e.addManagedEventListeners({sortChanged:s,columnRowGroupChanged:s})}initCol(e){const{sort:t,initialSort:i,sortIndex:n,initialSortIndex:s}=e.colDef;t!==void 0?(t==="asc"||t==="desc")&&(e.sort=t):(i==="asc"||i==="desc")&&(e.sort=i),n!==void 0?n!==null&&(e.sortIndex=n):s!==null&&(e.sortIndex=s)}updateColSort(e,t,i){t!==void 0&&(t==="desc"||t==="asc"?this.setColSort(e,t,i):this.setColSort(e,void 0,i))}setColSort(e,t,i){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",i)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new gN(e)}getSortIndicatorSelector(){return G0e}},Ug={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};function sH(e){return`"${e}"`}var V0e=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."},rowGroupingHierarchy:{version:"34.3",message:"Use `colDef.groupHierarchy` instead."}}),z0e={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?typeof e=="string"?Ug[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:Ug[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?Ug[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{const t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(i=>t.includes(i))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},H0e=()=>({autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:i})=>i?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},cellRendererParams:{validate:t=>(t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer")&&"checkbox"in t.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(t,i)=>i.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:i})=>i==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:i})=>i==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:i})=>i==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{const i=t.headerValueGetter;return typeof i=="function"||typeof i=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t.smallDown)return Wa(262);if(t.smallLeft)return Wa(263);if(t.smallRight)return Wa(264)}return null}},sortingOrder:{validate:t=>{const i=t.sortingOrder;if(Array.isArray(i)&&i.length>0){const n=i.filter(s=>!qv.includes(s));if(n.length>0)return`sortingOrder must be an array with elements from [${qv.map(m0).join()}], currently it includes [${n.map(m0).join()}]`}else if(!Array.isArray(i)||i.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${i}`;return null}},type:{validate:t=>{const i=t.type;return i instanceof Array?i.some(s=>typeof s!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof i=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:i})=>i?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:i,cellSelection:n,suppressRowTransform:s,enableCellSpan:o,rowDragEntireRow:r,enableCellTextSelection:a})=>typeof i=="object"&&i?.mode==="singleRow"&&i?.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":n?"colDef.spanRows is not supported with cellSelection.":s?"colDef.spanRows is not supported with suppressRowTransform.":o?r?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."},groupHierarchy:{validate(t,{groupHierarchyConfig:i={}},n){const s=new Set(["year","quarter","month","formattedMonth","day","hour","minute","second"]),o=[];for(const r of t.groupHierarchy??[]){if(typeof r=="object"){n.validation?.validateColDef(r);continue}!s.has(r)&&!(r in i)&&o.push(sH(r))}if(o.length>0){const r=`The following parts of colDef.groupHierarchy are not recognised: ${o.join(", ")}.`,a=`Choose one of ${[...s].map(sH).join(", ")}, or define your own parts in gridOptions.groupHierarchyConfig.`;return`${r}
${a}`}return null}}}),j0e={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,headerTooltipValueGetter:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,tooltipComponentSelector:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0,rowGroupingHierarchy:void 0,groupHierarchy:void 0},W0e=()=>Object.keys(j0e),U0e=()=>({objectName:"colDef",allProperties:W0e(),docsUrl:"column-properties/",deprecations:V0e(),validations:H0e()}),$0e=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],Y0e=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers","groupHierarchyConfig"],K0e=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],AK=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],q0e=["theme","rowSelection"],Z0e=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],RK=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows","ssrmExpandAllAffectsAllRows"],X0e=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"],Q0e=()=>[...K0e,...Y0e,...$0e,...AK,...X0e,...RK,...Z0e,...q0e],J0e=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}});function ba(e,t,i){return typeof t=="number"||t==null?t==null||t>=i?null:`${e}: value should be greater than or equal to ${i}`:`${e}: value should be a number`}var eMe={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},tMe=()=>{const e={autoSizePadding:{validate({autoSizePadding:i}){return ba("autoSizePadding",i,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:i}){return ba("cacheBlockSize",i,1)}},cacheOverflowSize:{validate({cacheOverflowSize:i}){return ba("cacheOverflowSize",i,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:i=>{const n=i.domLayout,s=["autoHeight","normal","print"];return n&&!s.includes(n)?`domLayout must be one of [${s.join()}], currently it's ${n}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:i,pinnedTopRowData:n,pinnedBottomRowData:s}){return i&&(n||s)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({enableRowPinning:i,isRowPinnable:n,pinnedTopRowData:s,pinnedBottomRowData:o}){return n&&(s||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!i&&n?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate({enableRowPinning:i,isRowPinned:n,pinnedTopRowData:s,pinnedBottomRowData:o}){return n&&(s||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!i&&n?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},groupHierarchyConfig:{validate({groupHierarchyConfig:i={}},n,s){for(const o of Object.keys(i))s.validation?.validateColDef(i[o]);return null}},icons:{validate:({icons:i})=>{if(i){if(i.smallDown)return Wa(262);if(i.smallLeft)return Wa(263);if(i.smallRight)return Wa(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:i}){return ba("infiniteInitialRowCount",i,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},ssrmExpandAllAffectsAllRows:{validate:i=>{if(typeof i.ssrmExpandAllAffectsAllRows=="boolean"){if(i.rowModelType!=="serverSide")return"'ssrmExpandAllAffectsAllRows' is only supported with the Server Side Row Model.";if(i.ssrmExpandAllAffectsAllRows&&typeof i.getRowId!="function")return"'getRowId' callback must be provided for Server Side Row Model grouping to work correctly."}return null}},keepDetailRowsCount:{validate({keepDetailRowsCount:i}){return ba("keepDetailRowsCount",i,1)}},paginationPageSize:{validate({paginationPageSize:i}){return ba("paginationPageSize",i,1)}},paginationPageSizeSelector:{validate:i=>{const n=i.paginationPageSizeSelector;return typeof n=="boolean"||n==null||n.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:i}){return ba("rowBuffer",i,0)}},rowClass:{validate:i=>typeof i.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:i}){return i&&typeof i=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':i&&typeof i!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":i&&i.mode!=="multiRow"&&i.mode!=="singleRow"?`Selection mode "${i.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:i=>{const n=i.rowStyle;return n&&typeof n=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:i}){return ba("serverSideInitialRowCount",i,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:i=>{const n=i.sortingOrder;if(Array.isArray(n)&&n.length>0){const s=n.filter(o=>!qv.includes(o));if(s.length>0)return`sortingOrder must be an array with elements from [${qv.map(m0).join()}], currently it includes [${s.map(m0).join()}]`}else if(!Array.isArray(n)||n.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${n}`;return null}},tooltipHideDelay:{validate:i=>i.tooltipHideDelay&&i.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:i=>i.tooltipShowDelay&&i.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:i=>{const n=i.rowModelType??"clientSide";switch(n){case"clientSide":{const{treeDataChildrenField:s,treeDataParentIdField:o,getDataPath:r,getRowId:a}=i;if(!s&&!o&&!r)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(s){if(r)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(o)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(o){if(!a)return"getRowId callback not provided, tree data with parent id cannot be built.";if(r)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const s=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${n} row model.`;return i.isServerSideGroup&&i.getServerSideGroupKey?null:s}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:i}){return ba("viewportRowModelBufferSize",i,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:i}){return ba("viewportRowModelPageSize",i,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:i,showOpenedGroup:n}){return i?.field&&n?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":i?.valueGetter&&n?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:i=>{const n=i.renderingMode,s=["default","legacy"];return n&&!s.includes(n)?`renderingMode must be one of [${s.join()}], currently it's ${n}`:null}},autoSizeStrategy:{validate:({autoSizeStrategy:i})=>{if(!i)return null;const n=["fitCellContents","fitGridWidth","fitProvidedWidth"],s=i.type;return s!=="fitCellContents"&&s!=="fitGridWidth"&&s!=="fitProvidedWidth"?`Invalid Auto-size strategy. \`autoSizeStrategy\` must be one of ${n.map(o=>'"'+o+'"').join(", ")}, currently it's ${s}`:s==="fitProvidedWidth"&&typeof i.width!="number"?`When using the 'fitProvidedWidth' auto-size strategy, must provide a numeric \`width\`. You provided ${i.width}`:null}}},t={};for(const i of RK)t[i]={expectedType:"boolean"};for(const i of AK)t[i]={expectedType:"number"};return Ys(t,e),t},iMe=()=>({objectName:"gridOptions",allProperties:[...Q0e(),...Object.values(pN)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:J0e(),validations:tMe()}),nMe=0,sMe=0,oH="__ag_grid_instance",oMe=class extends he{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=sMe++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new Dh,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const n=fx.has(t);if(n&&!e||!n&&e||!rMe(t))return;const s=(o,r)=>{const a=pN[o],l=this.gridOptions[a];typeof l=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>l(r))};if(this.gridReadyFired)s(t,i);else if(t==="gridReady"){s(t,i),this.gridReadyFired=!0;for(const o of this.queueEvents)s(o.eventName,o.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:i})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??_Y[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return Pe(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(i=>e(this.addCommon(i)))}updateGridOptions({options:e,force:t,source:i="api"}){const n={id:nMe++,properties:[]},s=[],{gridOptions:o,validation:r}=this;for(const a of Object.keys(e)){const l=WP.applyGlobalGridOption(a,e[a]);r?.warnOnInitialPropertyUpdate(i,a);const c=t||typeof l=="object"&&i==="api",d=o[a];if(c||d!==l){o[a]=l;const p={type:a,currentValue:l,previousValue:d,changeSet:n,source:i};s.push(p)}}this.validateGridOptions(this.gridOptions),n.properties=s.map(a=>a.type);for(const a of s)Rh(this,`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propEventSvc.dispatchEvent(a)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const i of Object.keys(e)){const n=e[i];if(n==null||n===!1)continue;let s=t[i];typeof s=="function"&&(s=s(e,this.gridOptions,this.beans)),s&&this.assertModuleRegistered(s,i)}}validateGridOptions(e){this.validateOptions(e,eMe),this.validation?.processGridOptions(e)}validateColDef(e,t,i){(i||!this.beans.dataTypeSvc?.isColPendingInference(t))&&(this.validateOptions(e,z0e),this.validation?.validateColDef(e))}assertModuleRegistered(e,t){const i=Array.isArray(e)?e.some(n=>this.isModuleRegistered(n)):this.isModuleRegistered(e);return i||oi(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),i}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:UP(),rowModelType:this.get("rowModelType"),isUmd:Ome()}}isModuleRegistered(e){return hk(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[oH]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){const i=t[oH];if(Pe(i))return i===this.instanceId;t=t.parentElement}return!1}};function rMe(e){return!!pN[e]}function EK(e){const t={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:t},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:t},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:t},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var aMe=EK(!0),lMe=EK(!1),cMe=class extends qi{constructor(){super(...arguments),this.eFilter=je,this.eFilterButton=je,this.eSortIndicator=je,this.eMenu=je,this.eLabel=je,this.eText=je,this.eSortOrder=je,this.eSortAsc=je,this.eSortDesc=je,this.eSortMixed=je,this.eSortNone=je,this.isLoadingInnerComponent=!1}refresh(e){const t=this.params;if(this.params=e,this.workOutTemplate(e,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){const i={...e};Ys(i,e.innerHeaderComponentParams),this.innerHeaderComponent.refresh?.(i)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const i=e.template;return i?i?.trim?i.trim():i:t?aMe:lMe}init(e){this.params=e;const{sortSvc:t,touchSvc:i,rowNumbersSvc:n,userCompFactory:s}=this.beans,o=t?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!o),this.setTemplate(this.currentTemplate,o?[o]:void 0),i?.setupForHeader(this),this.setMenu(),this.setupSort(),n?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(s,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const i=Xye(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(n=>{this.isLoadingInnerComponent=!1,n&&(this.isAlive()?(this.innerHeaderComponent=n,this.eText&&this.eText.appendChild(n.getGui())):this.destroyBean(n))}))}setDisplayName(e){const{displayName:t}=e,i=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||i===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=nm(t))}addInIcon(e,t,i){const n=wr(e,this.beans,i);n&&t.appendChild(n)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Lu(this.eMenu),this.eMenu=void 0;return}const{gos:e,eMenu:t,params:i}=this,n=Bo(e);this.addInIcon(n?"menu":"menuAlt",t,i.column),t.classList.toggle("ag-header-menu-icon",!n);const s=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=s,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(s)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:i}=this;t||this.toggleMenuAlwaysShow(!0),i.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){const{params:t,gos:i,beans:n,eMenu:s,eFilterButton:o}=this,r=t.column,a=Bo(i);if(e&&!a){if(n.menuSvc?.isFilterMenuInHeaderEnabled(r))return t.showFilter(o??s??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(s??o??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:i}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:n,eSortOrder:s,eSortAsc:o,eSortDesc:r,eSortMixed:a,eSortNone:l}=this;n.attachCustomElements(s,o,r,a,l)}this.eSortIndicator.setupSort(i),this.currentSort&&e.setupHeader(this,i,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;const i=()=>{const n=t.column.isFilterActive();_i(e,n,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,i,"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,i,n){if(!e)return Lu(t),!1;const s=this.params.column;return this.addInIcon(n,t,s),this.addManagedListeners(s,{filterChanged:i}),i(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:i}=this;return e?t??i??this.getGui():i??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},uMe={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},dMe=class extends qi{constructor(){super(uMe),this.agOpened=je,this.agClosed=je,this.agLabel=je,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:i}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),i?.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&Se(89)}workOutInnerHeaderGroupComponent(e,t){const i=Jye(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(n=>{this.isLoadingInnerComponent=!1,n&&(this.isAlive()?(this.innerHeaderGroupComponent=n,this.agLabel.appendChild(n.getGui())):this.destroyBean(n))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:i},beans:n}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const s=l=>{if(tc(l))return;const c=!i.isExpanded();n.colGroupSvc.setColumnGroupOpened(i.getProvidedColumnGroup(),c,"uiColumnExpanded")};this.addTouchAndClickListeners(n,t,s),this.addTouchAndClickListeners(n,e,s);const o=l=>{Ih(l)};this.addManagedElementListeners(t,{dblclick:o}),this.addManagedElementListeners(e,{dblclick:o}),this.addManagedElementListeners(this.getGui(),{dblclick:s}),this.updateIconVisibility();const r=i.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t,i){e.touchSvc?.setupForHeaderGroupElement(this,t,i),this.addManagedElementListeners(t,{click:i})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:i}}=this;if(i.isExpandable()){const n=i.isExpanded();_i(e,n),_i(t,!n)}else _i(e,!1),_i(t,!1)}addInIcon(e,t){const i=wr(e,this.beans,null);i&&t.appendChild(i)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:t,agClosed:i}=this;_i(t,!1),_i(i,!1)}}setupLabel(e){const{displayName:t,columnGroup:i}=e,n=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;Pe(t)&&!n&&(this.agLabel.textContent=nm(t)),this.toggleCss("ag-sticky-label",!i.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},hMe={moduleName:"ColumnHeaderComp",version:ke,userComponents:{agColumnHeader:cMe},icons:{menu:"menu",menuAlt:"menu-alt"}},pMe={moduleName:"ColumnGroupHeaderComp",version:ke,userComponents:{agColumnGroupHeader:dMe},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},gMe=class extends he{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&Se(92)}createTask(e,t,i,n,s=!1){this.verify();let o=i;n&&this.batchFrameworkComps&&(o="f1");const r={task:e,index:t,createOrder:++this.taskCount,deferred:s};this.addTaskToList(this[o],r),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((i,n)=>i.deferred!==n.deferred?i.deferred?-1:1:i.index!==n.index?t*(n.index-i.index):n.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:i,f1:n,destroyTasks:s,beans:o}=this,{ctrlsSvc:r,frameworkOverrides:a}=o,l=t.list,c=i.list,d=n.list,p=Date.now();let g=0;const m=e<=0,y=r.getScrollFeature();for(;m||g<e;){if(!y.scrollGridIfNeeded()){let C;if(l.length)this.sortTaskList(t),C=l.pop().task;else if(c.length)this.sortTaskList(i),C=c.pop().task;else if(d.length)a.wrapOutgoing(()=>{for(;(m||g<e)&&!y.scrollGridIfNeeded();){if(d.length)this.sortTaskList(n),C=d.pop().task,C();else break;g=Date.now()-p}}),C=()=>{};else if(s.length)C=s.pop();else break;C()}g=Date.now()-p}l.length||c.length||d.length||s.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);Rc(this.beans,e)}isQueueEmpty(){return!this.ticking}},fMe={moduleName:"AnimationFrame",version:ke,beans:[gMe]},mMe=class extends he{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return wr(e,this.beans,t?.column)}},yMe=class extends he{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!dh())return;const t=(i,n,s)=>{const{rowCtrl:o,cellCtrl:r}=e.getControlsForEventTarget(s?.target??null);r?.column&&r.dispatchCellContextMenuEvent(s??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,s,o,r)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!dh()||NY("dblclick"))return!1;const n=Date.now(),s=n-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=n,s})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){const{gos:t,sortSvc:i,menuSvc:n}=this.beans;if(t.get("suppressTouch"))return;const{params:s,eMenu:o,eFilterButton:r}=e,a=new Bd(e.getGui(),!0);e.addDestroyFunc(()=>a.destroy());const l=e.shouldSuppressMenuHide(),c=l&&Pe(o)&&s.enableMenu;let d=a;if(c&&(d=new Bd(o,!0),e.addDestroyFunc(()=>d.destroy())),s.enableMenu||n?.isHeaderContextMenuEnabled(s.column)){const p=c?"tap":"longTap",g=m=>s.showColumnMenuAfterMouseClick(m.touchStart);e.addManagedListeners(d,{[p]:g}),e.addManagedListeners(a,{longTap:g})}if(s.enableSorting){const p=g=>{const m=g.touchStart.target;l&&(o?.contains(m)||r?.contains(m))||i?.progressSort(s.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:p})}if(s.enableFilterButton&&r){const p=new Bd(r,!0);e.addManagedListeners(p,{tap:()=>s.showFilter(r)}),e.addDestroyFunc(()=>p.destroy())}}setupForHeaderGroup(e){const t=e.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){const i=new Bd(t.eGridHeader,!0),n=s=>t.showColumnMenuAfterMouseClick(s.touchStart);e.addManagedListeners(i,{longTap:n}),e.addDestroyFunc(()=>i.destroy())}}setupForHeaderGroupElement(e,t,i){const n=new Bd(t,!0);e.addManagedListeners(n,{tap:i}),e.addDestroyFunc(()=>n.destroy())}mockContextMenu(e,t,i){if(!dh())return;const n=new Bd(t),s=o=>{jv(this.beans,o.touchEvent)&&i(void 0,o.touchStart,o.touchEvent)};e.addManagedListeners(n,{longTap:s}),e.addDestroyFunc(()=>n.destroy())}},vMe={moduleName:"Touch",version:ke,beans:[yMe]},bMe=class extends he{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===oe.UP,n=e===oe.DOWN,s=e===oe.LEFT;let o,r;const{pageBounds:a,gos:l,visibleCols:c,pinnedRowModel:d}=this.beans,{rowPinned:p}=t;if(i||n)p&&d?i?r=0:r=p==="top"?d.getPinnedTopRowCount()-1:d.getPinnedBottomRowCount()-1:r=i?a.getFirstRow():a.getLastRow(),o=t.column;else{const g=l.get("enableRtl");r=t.rowIndex,o=(s!==g?c.allCols:[...c.allCols].reverse()).find(y=>this.isCellGoodToFocusOn({rowIndex:r,rowPinned:null,column:y}))}return o?{rowIndex:r,rowPinned:p,column:o}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,n=!1;for(;!n;){switch(e){case oe.UP:i=this.getCellAbove(i);break;case oe.DOWN:i=this.getCellBelow(i);break;case oe.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case oe.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,Se(8,{key:e});break}i?n=this.isCellGoodToFocusOn(i):n=!0}return i}isCellGoodToFocusOn(e){const t=e.column;let i;const{pinnedRowModel:n,rowModel:s}=this.beans;switch(e.rowPinned){case"top":i=n?.getPinnedTopRow(e.rowIndex);break;case"bottom":i=n?.getPinnedBottomRow(e.rowIndex);break;default:i=s.getRow(e.rowIndex);break}return i?!this.isSuppressNavigable(t,i):!1}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){if(!e)return null;const t=this.rowSpanSvc?.getCellEnd(e)??e,i=Uz(this.beans,t,!0);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}getCellAbove(e){if(!e)return null;const t=this.rowSpanSvc?.getCellStart(e)??e,i=T0(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},!0);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:i}=this.beans,n=t.allCols;let s=e.rowIndex,o=e.rowPinned,r=t.getColAfter(e.column);if(!r){r=n[0];const a=Uz(this.beans,e,!0);if(ki(a)||!a.rowPinned&&!(i?.isRowInPage(a.rowIndex)??!0))return null;s=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:s,column:r,rowPinned:o}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:i,pagination:n}=t,s=i.allCols;let o=e.rowIndex,r=e.rowPinned,a=i.getColBefore(e.column);if(!a){a=fi(s);const l=T0(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(ki(l)||!l.rowPinned&&!(n?.isRowInPage(l.rowIndex)??!0))return null;o=l?l.rowIndex:null,r=l?l.rowPinned:null}return{rowIndex:o,column:a,rowPinned:r}}isSuppressNavigable(e,t){const{suppressNavigable:i}=e.colDef;if(typeof i=="boolean")return i;if(typeof i=="function"){const n=e.createColumnFunctionCallbackParams(t);return i(n)}return!1}};function CMe(e){return e.focusSvc.getFocusedCell()}function wMe(e){return e.focusSvc.clearFocusedCell()}function SMe(e,t,i,n){e.focusSvc.setFocusedCell({rowIndex:t,column:i,rowPinned:n,forceBrowserFocus:!0})}function xMe(e,t){return e.navigation?.tabToNextCell(!1,t)??!1}function MMe(e,t){return e.navigation?.tabToNextCell(!0,t)??!1}function DMe(e,t,i=!1){const n=e.headerNavigation?.getHeaderPositionForColumn(t,i);n&&e.focusSvc.focusHeaderPosition({headerPosition:n})}var AMe=class extends he{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new TK,this.rowValidations=new IK,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;const i=this.getEditRow(e);t?i.delete(t):i.clear(),i.size===0&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||this.edits.size===0)return;const i=e&&this.edits.get(e);if(i)return i;if(t.checkSiblings){const n=e.pinnedSibling;if(n)return this.getEditRow(n)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(!e||this.edits.size===0)return;const i=this.getEditRow(e),n=e.pinnedSibling,s=t&&n&&this.getEditRow(n);if(!i&&!s)return;const o=Object.assign({},e.data),r=(a,l)=>a.forEach(({pendingValue:c},d)=>{c!==Er&&(l[d.getColId()]=c)});return i&&r(i,o),s&&r(s,o),o}getEdit(e,t){const i=this._getEdit(e);return t&&i?{...i}:i}_getEdit(e){if(!this.suspendEdits&&this.edits.size!==0)return e.rowNode&&e.column&&this.getEditRow(e.rowNode)?.get(e.column)}getEditMap(e=!0){if(this.suspendEdits||this.edits.size===0)return new Map;if(!e)return this.edits;const t=new Map;return this.edits.forEach((i,n)=>{const s=new Map;i.forEach(({editorState:o,...r},a)=>s.set(a,{...r})),t.set(n,s)}),t}setEditMap(e){this.edits.clear(),e.forEach((t,i)=>{const n=new Map;t.forEach((s,o)=>n.set(o,{...s})),this.edits.set(i,n)})}setEdit(e,t){(this.edits.size===0||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);const i=this._getEdit(e),n=Object.assign({editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0},...i,...t});return this.getEditRow(e.rowNode).set(e.column,n),n}clearEditValue(e){const{rowNode:t,column:i}=e;if(t)if(i){const n=this._getEdit(e);n&&(n.editorValue=void 0,n.pendingValue=n.sourceValue,n.state="changed")}else this.getEditRow(t)?.forEach(n=>{n.editorValue=void 0,n.pendingValue=n.sourceValue,n.state="changed"})}getState(e){if(!this.suspendEdits)return this.getEdit(e)?.state}getEditPositions(e){if(this.suspendEdits||(e??this.edits).size===0)return[];const t=[];return(e??this.edits).forEach((i,n)=>{for(const s of i.keys()){const{editorState:o,...r}=i.get(s);t.push({rowNode:n,column:s,...r})}}),t}hasRowEdits(e,t){return this.suspendEdits||this.edits.size===0?!1:!!this.getEditRow(e,t)}hasEdits(e={},t={}){if(this.suspendEdits||this.edits.size===0)return!1;const{rowNode:i,column:n}=e,{withOpenEditor:s}=t;if(i){const o=this.getEditRow(i,t);return o?n?s?this.getEdit(e)?.state==="editing":o.has(n)??!1:o.size!==0?s?Array.from(o.values()).some(({state:r})=>r==="editing"):!0:!1:!1}return s?this.getEditPositions().some(({state:o})=>o==="editing"):this.edits.size>0}start(e){const t=this.getEditRow(e.rowNode)??new Map,{rowNode:i,column:n}=e;n&&!t.has(n)&&t.set(n,{editorValue:void 0,pendingValue:Er,sourceValue:this.beans.valueSvc.getValue(n,i,!1,"api"),state:"editing",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}}),this.edits.set(i,t)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(const e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},TK=class{constructor(){this.cellValidations=new Map}getCellValidation(e){const{rowNode:t,column:i}=e||{};return this.cellValidations?.get(t)?.get(i)}hasCellValidation(e){return!e?.rowNode||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){const{rowNode:i,column:n}=e;this.cellValidations.has(i)||this.cellValidations.set(i,new Map),this.cellValidations.get(i).set(n,t)}clearCellValidation(e){const{rowNode:t,column:i}=e;this.cellValidations.get(t)?.delete(i)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},IK=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return e?.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function fN(e,t={}){const{rowIndex:i,rowId:n,rowCtrl:s,rowPinned:o}=t;if(s)return s;const{rowModel:r,rowRenderer:a}=e;let{rowNode:l}=t;return l||(n?l=Zwe(e,n,o):i!=null&&(l=r.getRow(i))),a.getRowCtrls(l?[l]:[])?.[0]}function Ei(e,t={}){const{cellCtrl:i,colId:n,columnId:s,column:o}=t;if(i)return i;const r=e.colModel.getCol(n??s??Fk(o)),a=t.rowCtrl??fN(e,t),l=a?.getCellCtrl(r)??void 0;if(l)return l;const c=t.rowNode??a?.rowNode;if(c)return e.rowRenderer.getCellCtrls([c],[r])?.[0]}function rH(e){const{editSvc:t}=e;t?.isBatchEditing()?$g(e):t?.stopEditing(void 0,{source:"api"})}function RMe(e,t,i){const{gos:n,popupSvc:s}=t;if(!n.get("stopEditingWhenCellsLoseFocus"))return;const o=r=>{const a=r.relatedTarget;if(Ck(a)===null){rH(t);return}let l=i.some(c=>c.contains(a))&&n.isElementInThisInstance(a);l||(l=!!s&&(s.getActivePopups().some(c=>c.contains(a))||s.isElementWithinCustomPopup(a))),l||rH(t)};for(const r of i)e.addManagedElementListeners(r,{focusout:o})}function Fk(e){if(e)return typeof e=="string"?e:e.getColId()}var Er=Symbol("unedited");function kK(e,t={}){const i=[],n=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(const s of n){const o=s.comp?.getCellEditor();o&&i.push({ctrl:s,editor:$v(o)})}return i}var EMe=(e,t={})=>kK(e,t).map(i=>i.editor);function TMe(e,t,i,n,s,o){t.length===0&&i?.rowNode&&i?.column&&Rf(e,i,{key:n,event:s,cellStartedEdit:o});const{valueSvc:r,editSvc:a,editModelSvc:l}=e,{rowNode:c,column:d}=i??{};for(const p of t){const{rowNode:g,column:m}=p,y=Ei(e,p);if(!y){if(g&&m){const C=r.getValue(m,g,void 0,"api"),M=(i?.rowNode===g&&i?.column===m&&n||void 0)??a?.getCellDataValue(p,!1)??r.getValueForDisplay(m,g)?.value??C??Er;l?.setEdit(p,{pendingValue:M,sourceValue:C,state:"editing"})}continue}const b=o&&c===y.rowNode&&y.column===d;Rf(e,{rowNode:c,column:y.column},{key:b?n:null,event:b?s:null,cellStartedEdit:b&&o})}}function zl({pendingValue:e,sourceValue:t}){return e===Er&&(e=t),e!==t}function Rf(e,t,i){const n=e.gos.get("enableGroupEdit"),{key:s,event:o,cellStartedEdit:r,silent:a}=i??{},l=Ei(e,t),c=l?.comp?.getCellEditor(),d=PK(e,t,s,r&&!a),p=e.editModelSvc?.getEdit(t);let g=d.value;if(g===void 0&&(g=p?.sourceValue),e.editModelSvc?.setEdit(t,{editorValue:g,state:"editing"}),c){c.refresh?.(d);return}const m=t.column.getColDef(),y=v6(e.userCompFactory,m,d),b=y?.popupFromSelector!=null?y.popupFromSelector:!!m.cellEditorPopup,C=y?.popupPositionFromSelector!=null?y.popupPositionFromSelector:m.cellEditorPopupPosition;if(NK(y.params,o),l){l.editCompDetails=y,l.onEditorAttachedFuncs.push(()=>l.rangeFeature?.unsetComp()),l.comp?.setEditDetails(y,b,C,e.gos.get("reactiveCustomComponents")),l?.rowCtrl?.refreshRow({suppressFlash:!0});const w=e.editModelSvc?.getEdit(t,!0);!a&&!w?.editorState?.cellStartedEditing&&(e.editSvc?.dispatchCellEvent(t,o,"cellEditingStarted",n?{value:g}:{}),e.editModelSvc?.setEdit(t,{editorState:{cellStartedEditing:!0}}))}}function LK(e,t,i){const n={editorValueExists:!1};if(mN(e)&&(t.getValidationErrors?.()?.length??0)>0||i?.isCancelling)return n;if(i?.isStopping){const o=t?.isCancelAfterEnd?.();if(o)return{...n,isCancelAfterEnd:o}}return{editorValue:t.getValue(),editorValueExists:!0}}function PK(e,t,i,n){const{valueSvc:s,gos:o,editSvc:r}=e,a=e.gos.get("enableGroupEdit"),l=Ei(e,t),c=t.rowNode?.rowIndex??void 0,d=r?.isBatchEditing(),p=e.colModel.getCol(t.column.getId()),{rowNode:g,column:m}=t,y=l.comp?.getCellEditor(),b=r?.getCellDataValue(t,!1),C=b===void 0?y?LK(e,y)?.editorValue:void 0:b,w=C===Er?s.getValueForDisplay(p,g)?.value:C;return $e(o,{value:a?C:w,eventKey:i??null,column:m,colDef:m.getColDef(),rowIndex:c,node:g,data:g.data,cellStartedEdit:n??!1,onKeyDown:l?.onKeyDown.bind(l),stopEditing:x=>{r.stopEditing(t,{source:d?"ui":"api",suppressNavigateAfterEdit:x}),I0(e,t)},eGridCell:l?.eGui,parseValue:x=>s.parseValue(p,g,x,l?.value),formatValue:l?.formatValue.bind(l),validate:()=>{r?.validateEdit()}})}function Ok(e,t){const{editModelSvc:i}=e;i?.getEditMap().forEach((n,s)=>{n.forEach((o,r)=>{!t&&(o.state==="editing"||o.pendingValue===Er)||!zl(o)&&(o.state!=="editing"||t)&&i?.removeEdits({rowNode:s,column:r})})})}function IMe(e,t){const i=t.comp?.getCellEditor();if(!i?.refresh)return;const{eventKey:n,cellStartedEdit:s}=t.editCompDetails.params,{column:o}=t,r=PK(e,t,n,s),a=o.getColDef(),l=v6(e.userCompFactory,a,r);i.refresh(NK(l.params,n))}function NK(e,t){return t instanceof KeyboardEvent&&e.column.getColDef().cellEditor==="agNumberCellEditor"?e.suppressPreventDefault=["-","+",".","e"].includes(t?.key??"")||e.suppressPreventDefault:t?.preventDefault?.(),e}function qd(e,t){for(const i of e.editModelSvc?.getEditPositions()??[]){const n=Ei(e,i);if(!n)continue;const s=n.comp?.getCellEditor();if(!s)continue;const{editorValue:o,editorValueExists:r,isCancelAfterEnd:a}=LK(e,s,t);a&&e.editModelSvc?.setEdit(i,{editorState:{isCancelAfterEnd:a}}),mx(e,i,o,void 0,!r,t)}}function mx(e,t,i,n,s,o){const{editModelSvc:r,valueSvc:a}=e;if(!r)return;const{rowNode:l,column:c}=t;if(!(l&&c))return;let d=r.getEdit(t,!0);d?.sourceValue||(d=r.setEdit(t,{sourceValue:a.getValue(c,l,void 0,"api"),pendingValue:d?d.editorValue:Er})),r.setEdit(t,{editorValue:s?d.sourceValue:i}),o?.persist&&kMe(e,t)}function kMe(e,t){const{editModelSvc:i}=e,n=i?.getEdit(t,!0);i?.setEdit(t,{pendingValue:n?.editorValue})}function $g(e,t,i){t||(t=e.editModelSvc?.getEditPositions());for(const n of t??[])I0(e,n,i)}function I0(e,t,i){const n=e.gos.get("enableGroupEdit"),{editModelSvc:s}=e,o=Ei(e,t),r=s?.getEdit(t,!0);if(!o){r&&s?.setEdit(t,{state:"changed"});return}const{comp:a}=o;if(a&&!a.getCellEditor()){if(o?.refreshCell(),r){s?.setEdit(t,{state:"changed"});const c=n?aH(i,r):{valueChanged:!1,newValue:void 0,oldValue:r.sourceValue};lH(e,t,c,i)}return}if(mN(e)){const c=a?.getCellEditor()?.getValidationErrors?.(),d=s?.getCellValidationModel();c?.length?d?.setCellValidation(t,{errorMessages:c}):d?.clearCellValidation(t)}s?.setEdit(t,{state:"changed"}),a?.setEditDetails(),a?.refreshEditStyles(!1,!1),o?.refreshCell({force:!0,suppressFlash:!0});const l=s?.getEdit(t);if(l&&l.state==="changed"){const c=n?aH(i,l):{valueChanged:zl(l)&&!i?.cancel,newValue:i?.cancel||l.editorState.isCancelAfterEnd?void 0:l?.editorValue??r?.pendingValue,oldValue:l?.sourceValue};lH(e,t,c,i)}}function aH(e,t){return e?.cancel?{valueChanged:!1,oldValue:t.sourceValue,newValue:void 0,value:t.sourceValue}:{valueChanged:!1,oldValue:t.sourceValue,newValue:t.pendingValue,value:t.sourceValue}}function lH(e,t,i,{silent:n,event:s}={}){const{editSvc:o,editModelSvc:r}=e,a=r?.getEdit(t),{editorState:l}=a||{},{isCancelBeforeStart:c}=l||{};!n&&!c&&(o?.dispatchCellEvent(t,s,"cellEditingStopped",i),r?.setEdit(t,{editorState:{cellStoppedEditing:!0}}))}function mN(e){const{gos:t,colModel:i}=e,n=!!t.get("getFullRowEditValidationErrors"),s=i.getColumnDefs()?.filter(r=>r.editable).some(({cellEditorParams:r})=>{const{minLength:a,maxLength:l,getValidationErrors:c,min:d,max:p}=r||{};return a!==void 0||l!==void 0||c!==void 0||d!==void 0||p!==void 0}),o=e.gridApi.getCellEditorInstances().some(r=>r.getValidationElement||r.getValidationErrors);return s||n||o}function kh(e,t){if(!(t||mN(e)))return;const i=kK(e),n=new TK,{ariaAnnounce:s,localeSvc:o,editModelSvc:r,gos:a}=e,l=a.get("editType")==="fullRow",d=OY(o)("ariaValidationErrorPrefix","Cell Editor Validation");for(const g of i){const{ctrl:m,editor:y}=g,{rowNode:b,column:C}=m,w=y.getValidationErrors?.()??[],x=y.getValidationElement?.(!1)||!y.isPopup?.()&&m.eGui;if(x){const M=w!=null&&w.length>0,E=M?w.join(". "):"";Zfe(x,M),M&&s.announceValue(`${d} ${w}`,"editorValidation"),x instanceof HTMLInputElement?x.setCustomValidity(E):x.classList.toggle("invalid",M)}w?.length>0&&n.setCellValidation({rowNode:b,column:C},{errorMessages:w})}qd(e,{persist:!1}),r?.setCellValidationModel(n);const p=new Set;for(const{ctrl:g}of i)p.add(g.rowCtrl);if(l){const g=LMe(e);r?.setRowValidationModel(g)}for(const g of p.values()){g.rowEditStyleFeature?.applyRowStyles();for(const m of g.getAllCellCtrls())m.tooltipFeature?.refreshTooltip(!0),m.editorTooltipFeature?.refreshTooltip(!0),m.editStyleFeature?.applyCellStyles?.()}}var LMe=e=>{const t=new IK,i=e.gos.get("getFullRowEditValidationErrors"),n=e.editModelSvc?.getEditMap();if(!n)return t;for(const s of n.keys()){const o=n.get(s);if(!o)continue;const r=[],{rowIndex:a,rowPinned:l}=s;for(const d of o.keys()){const p=o.get(d);if(!p)continue;const{editorValue:g,pendingValue:m,sourceValue:y}=p,b=g??(m===Er?void 0:m)??y;r.push({column:d,colId:d.getColId(),rowIndex:a,rowPinned:l,oldValue:y,newValue:b})}const c=i?.({editorsState:r})??[];c.length>0&&t.setRowValidation({rowNode:s},{errorMessages:c})}return t};function PMe(e){kh(e,!0);const t=e.editModelSvc?.getCellValidationModel().getCellValidationMap();if(!t)return null;const i=[];return t.forEach((n,s)=>{n.forEach(({errorMessages:o},r)=>{i.push({column:r,rowIndex:s.rowIndex,rowPinned:s.rowPinned,messages:o??null})})}),i}function NMe(e,t,i,{rowNode:n,column:s},o){return $e(e.gos,{type:i,node:n,data:n.data,value:o,column:s,colDef:s.getColDef(),rowPinned:n.rowPinned,event:t,rowIndex:n.rowIndex})}function FMe(e,t=!1){return e===oe.DELETE?!0:!t&&e===oe.BACKSPACE?w6():!1}var OMe=class extends he{constructor(e,t,i,n){super(),this.cellCtrl=e,this.rowNode=i,this.rowCtrl=n,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case oe.ENTER:this.onEnterKeyDown(e);break;case oe.F2:this.onF2KeyDown(e);break;case oe.ESCAPE:this.onEscapeKeyDown(e);break;case oe.TAB:this.onTabKeyDown(e);break;case oe.BACKSPACE:case oe.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case oe.DOWN:case oe.UP:case oe.RIGHT:case oe.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){const{cellCtrl:i,beans:n}=this;if(!n.editSvc?.isEditing(i,{withOpenEditor:!0})){if(e.shiftKey&&i.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const s=i.getFocusedCellPosition();n.navigation?.navigateToNextCell(e,t,s,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:i}=this.beans;if(!t)return;const n=t.extendLatestRangeInDirection(e);n&&(e.key===oe.LEFT||e.key===oe.RIGHT?i?.ensureColumnVisible(n.column):i?.ensureRowVisible(n.rowIndex))}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:n,rowNode:s}=this,{gos:o,rangeSvc:r,eventSvc:a,editSvc:l}=n;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),FMe(e,o.get("enableCellEditingOnBackspace"))&&!l?.isEditing(i,{withOpenEditor:!0})){if(r&&Nu(o))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const{column:c}=i,d=this.beans.valueSvc.getDeleteValue(c,s);s.setDataValue(c,d,"cellClear")}}else l?.isEditing(i,{withOpenEditor:!0})||n.editSvc?.startEditing(i,{startedEdit:!0,event:t});a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){const{cellCtrl:t,beans:i}=this,{editSvc:n,navigation:s}=i,o=n?.isEditing(t,{withOpenEditor:!0}),r=t.rowNode,a=n?.isRowEditing(r,{withOpenEditor:!0}),l=c=>{n?.startEditing(c,{startedEdit:!0,event:e,source:"edit"})&&e.preventDefault()};if(o||a){if(this.isCtrlEnter(e)){n?.applyBulkEdit(t,i?.rangeSvc?.getCellRanges()||[]);return}if(kh(i),n?.checkNavWithValidation(void 0,e)==="block-stop")return;n?.isEditing(t,{withOpenEditor:!0})?n?.stopEditing(t,{event:e,source:"edit"}):a&&!t.isCellEditable()?n?.stopEditing({rowNode:r},{event:e,source:"edit"}):l(t)}else if(i.gos.get("enterNavigatesVertically")){const c=e.shiftKey?oe.UP:oe.DOWN;s?.navigateToNextCell(null,c,t.cellPosition,!1)}else{if(n?.hasValidationErrors())return;n?.hasValidationErrors(t)&&n.revertSingleCellEdit(t,!0),l(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===oe.ENTER}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:i}}=this;i?.isEditing()&&(kh(this.beans),i?.checkNavWithValidation(void 0,e)==="block-stop")||i?.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:i}}=this;i?.checkNavWithValidation(t,e)==="block-stop"&&i.revertSingleCellEdit(t),i?.stopEditing(t,{event:e,cancel:!0})}processCharacter(e){const i=e.target!==this.eGui,{beans:{editSvc:n},cellCtrl:s}=this;if(i||n?.isEditing(s,{withOpenEditor:!0}))return;if(e.key===oe.SPACE)this.onSpaceKeyDown(e);else if(n?.isCellEditable(s,"ui")){if(n?.hasValidationErrors()&&!n?.hasValidationErrors(s))return;n?.startEditing(s,{startedEdit:!0,event:e,source:"api"}),!s.editCompDetails?.params?.suppressPreventDefault&&e.preventDefault()}}onSpaceKeyDown(e){const{gos:t,editSvc:i}=this.beans,{rowNode:n}=this.cellCtrl;!i?.isEditing(this.cellCtrl,{withOpenEditor:!0})&&ch(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,n,"spaceKey"),e.preventDefault()}},BMe=class extends he{constructor(e,t,i){super(),this.cellCtrl=e,this.column=i,this.beans=t}onMouseEvent(e,t){if(!tc(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:i,editSvc:n,editModelSvc:s,frameworkOverrides:o,gos:r}=this.beans,a=e.ctrlKey||e.metaKey,{cellCtrl:l}=this,{column:c,cellPosition:d,rowNode:p}=l,g=dx(r,c,p,e);i&&a&&!g&&i.getCellRangeCount(d)>1&&i.intersectLastRange(!0);const m=l.createEvent(e,"cellClicked");m.isEventHandlingSuppressed=g,t.dispatchEvent(m);const y=c.getColDef();if(y.onCellClicked&&window.setTimeout(()=>{o.wrapOutgoing(()=>{y.onCellClicked(m)})},0),!g&&s?.getState(l)!=="editing"){const b=n?.isEditing(),C=s?.getCellValidationModel().getCellValidationMap().size??0,w=s?.getRowValidationModel().getRowValidationMap().size??0;if(b&&(C>0||w>0))return;n?.shouldStartEditing(l,e)?n?.startEditing(l,{event:e}):n?.shouldStopEditing(l,e)&&(this.beans.gos.get("editType")==="fullRow"?n?.stopEditing(l,{event:e,source:"edit"}):n?.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:n}=this,{eventSvc:s,frameworkOverrides:o,editSvc:r,editModelSvc:a,gos:l}=i,c=dx(l,n.column,n.rowNode,e),d=t.getColDef(),p=n.createEvent(e,"cellDoubleClicked");if(p.isEventHandlingSuppressed=c,s.dispatchEvent(p),typeof d.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{d.onCellDoubleClicked(p)})},0),!c&&r?.shouldStartEditing(n,e)&&a?.getState(n)!=="editing"){const g=r?.isEditing(),m=a?.getCellValidationModel().getCellValidationMap().size??0,y=a?.getRowValidationModel().getRowValidationMap().size??0;if(g&&(m>0||y>0))return;r?.startEditing(n,{event:e})}}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:n}=e,s=e.target,{cellCtrl:o,beans:r}=this,{eventSvc:a,rangeSvc:l,rowNumbersSvc:c,focusSvc:d,gos:p,editSvc:g}=r,{column:m,rowNode:y,cellPosition:b}=o,C=dx(p,m,y,e),w=()=>{const I=o.createEvent(e,"cellMouseDown");I.isEventHandlingSuppressed=C,a.dispatchEvent(I)};if(C){w();return}if(this.isRightClickInExistingRange(e))return;const x=l&&!l.isEmpty(),M=this.containsWidget(s),E=Jl(m);if(c&&E&&!c.handleMouseDownOnCell(b,e)){l&&e.preventDefault(),e.stopImmediatePropagation();return}if(!n||!x){const I=g?.isEditing(o),T=p.get("enableCellTextSelection")&&e.defaultPrevented,P=(ed()||T)&&!I&&!Ky(s)&&!M;o.focusCell(P,e)}if(n&&x&&!d.isCellFocused(b)){e.preventDefault();const I=d.getFocusedCell();if(I){const{column:N,rowIndex:T,rowPinned:P}=I;g?.isEditing(I)&&g?.stopEditing(I),d.setFocusedCell({column:N,rowIndex:T,rowPinned:P,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}if(!M){if(l){E&&e.preventDefault();const I=hz(r,e)&&E;if(n)l.extendLatestRangeToCell(b);else if(!I){const N=t||i;l.setRangeToCell(b,N)}}w()}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.cellPosition),n=hz(this.beans,e);if(i&&n)return!0}return!1}containsWidget(e){return ah(e,"ag-selection-checkbox",3)||ah(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),i?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),i?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,i=t.contains(e.target),n=t.contains(e.relatedTarget);return i&&n}},GMe=class extends he{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();Ju(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,i=e.getColSpan(t),n=[];if(i===1)n.push(e);else{let s=e;const o=e.getPinned();for(let r=0;s&&r<i&&(n.push(s),s=this.beans.visibleCols.getColAfter(s),!(!s||ki(s)||o!==s.getPinned()));r++);}return n}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=fi(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;const{visibleCols:t}=this.beans,i=t.getColsLeftWidth();if(this.column.getPinned()==="right"){const n=t.bodyWidth;return i+n+(e||0)}return i+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;const i=uh(this.beans)*this.rowSpan;this.eContent.style.height=`${i}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},_Me="ag-cell",VMe="ag-cell-auto-height",zMe="ag-cell-normal-height",HMe="ag-cell-focus",jMe="ag-cell-first-right-pinned",WMe="ag-cell-last-left-pinned",UMe="ag-cell-not-inline-editing",$Me="ag-cell-wrap-text",YMe=0,Yg=class extends he{constructor(e,t,i,n){super(),this.column=e,this.rowNode=t,this.rowCtrl=n,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=i,this.gos=i.gos,this.editSvc=i.editSvc,this.hasEdit=!!i.editSvc;const{colId:s}=e;this.instanceId=s+"-"+YMe++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){const{beans:e}=this;this.positionFeature=new GMe(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this,e),this.editStyleFeature=e.editSvc?.createCellStyleFeature(this,e),this.mouseListener=new BMe(this,e,this.column),this.keyboardListener=new OMe(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature();const{rangeSvc:t}=e;t&&Nu(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this)),Jl(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,e),kh(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,i,n,s,o,r){if(this.comp=e,this.eGui=t,this.printLayout=s,r??(r=this),this.addDomData(r),this.addFeatures(),r.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n,r),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.editStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),this.rowResizeFeature?.refreshRowResizer(),o&&this.isCellEditable()||this.hasEdit&&this.editSvc?.isEditing(this,{withOpenEditor:!0})?this.editSvc?.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0}):this.showValue(!1,!0),this.onCompAttachedFuncs.length){for(const a of this.onCompAttachedFuncs)a();this.onCompAttachedFuncs=[]}}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){const{beans:e,column:t}=this,{userCompFactory:i,ctrlsSvc:n,eventSvc:s}=e,o=t.getColDef(),r=this.createCellRendererParams();r.deferRender=!0;const a=vz(i,o,r);if(n.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let l;const c=new Nt(p=>{l=p}),[d]=this.addManagedListeners(s,{bodyScrollEnd:()=>{l(),d()}});return{loadingComp:a,onReady:c}}return{loadingComp:a,onReady:Nt.resolve()}}showValue(e,t){const{beans:i,column:n,rowNode:s,rangeFeature:o}=this,{userCompFactory:r}=i;let a=this.getValueToDisplay(),l;const c=s.stub&&s.groupData?.[n.getId()]==null,d=n.getColDef();if(c||this.isCellRenderer()){const p=this.createCellRendererParams();!c||Jl(n)?l=yz(r,d,p):l=vz(r,d,p)}if(!l&&!c&&i.findSvc?.isMatch(s,n)){const p=this.createCellRendererParams();l=yz(r,{...n.getColDef(),cellRenderer:"agFindCellRenderer"},p)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(s,{checkSiblings:!0})){const p=this.editSvc.prepDetailsDuringBatch(this,{compDetails:l,valueToDisplay:a});p&&(p.compDetails?l=p.compDetails:p.valueToDisplay&&(a=p.valueToDisplay))}this.comp.setRenderDetails(l,a,e),this.customRowDragComp?.refreshVisibility(),!t&&o&&Rc(i,()=>o?.refreshHandle()),this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){const e="ag-cell-value",t=this.column.getColDef().cellRenderer==="agCheckboxCellRenderer";let i="";return t&&(i=" ag-allow-overflow"),`${e}${i}`}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&fC(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:i}=this.beans.gridOptions,n=y0(t),s=Ec(this.column);return i==="custom"&&n!=="selectionColumn"&&s?!1:e.checkboxSelection||s&&typeof t=="object"&&Vg(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),n=this.includeDndSource!=this.isIncludeControl(e.dndSource),s=this.isAutoHeight!=this.column.isAutoHeight();return t||i||n||s}onPopupEditorClosed(){const{editSvc:e}=this.beans;e?.isEditing(this,{withOpenEditor:!0})&&e?.stopEditing(this,{source:e?.isBatchEditing()?"ui":"api"})}stopEditing(e=!1){const{editSvc:t}=this.beans;return t?.stopEditing(this,{cancel:e,source:t?.isBatchEditing()?"ui":"api"})??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:i,rowNode:n,comp:s,eGui:o,beans:{valueSvc:r,gos:a,editSvc:l}}=this;return $e(a,{value:e,valueFormatted:t,getValue:()=>r.getValueForDisplay(i,n).value,setValue:d=>l?.setDataValue({rowNode:n,column:i},d)||n.setDataValue(i,d),formatValue:this.formatValue.bind(this),data:n.data,node:n,pinned:i.getPinned(),colDef:i.getColDef(),column:i,refreshCell:this.refreshCell.bind(this),eGridCell:o,eParentOfValue:s.getParentOfValue(),registerRowDragger:(d,p,g,m)=>this.registerRowDragger(d,p,m),setTooltip:(d,p)=>{a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(d,p),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){if(this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e),this.hasEdit&&this.editCompDetails){const{editSvc:t,comp:i}=this;!i?.getCellEditor()&&t.isEditing(this,{withOpenEditor:!0})&&t.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:e,suppressFlash:t,newData:i}={}){const{editStyleFeature:n,customStyleFeature:s,rowCtrl:{rowEditStyleFeature:o},beans:{cellFlashSvc:r,filterManager:a},column:l,comp:c,suppressRefreshCell:d,tooltipFeature:p}=this;if(d)return;const{field:g,valueGetter:m,showRowGroup:y,enableCellChangeFlash:b}=l.getColDef(),C=g==null&&m==null&&y==null,w=e||C||i,x=!!c,M=this.updateAndFormatValue(x),E=w||M;if(x){if(E){this.showValue(!!i,!1);const I=a?.isSuppressFlashingCellsBecauseFiltering();!t&&!I&&b&&r?.flashCell(this),n?.applyCellStyles?.(),s?.applyUserStyles(),s?.applyClassesFromColDef(),o?.applyRowStyles()}p?.refreshTooltip(),s?.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted,{value:n,valueFormatted:s}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=n,this.valueFormatted=s,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i:!0}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}addDomData(e){const t=this.eGui;Eh(this.beans.gos,t,R0,this),e.addDestroyFunc(()=>Eh(this.beans.gos,t,R0,null))}createEvent(e,t){const{rowNode:i,column:n,value:s,beans:o}=this;return NMe(o,e,t,{rowNode:i,column:n},s)}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:i}=this;tK(e,t,i.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);AY(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){const i=this.editSvc?.allowedFocusTargetOnValidation(this);i&&i!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){const{beans:{editSvc:t,focusSvc:i},comp:n}=this;if(!n||t?.isEditing(this)||!this.isCellFocused()||!i.shouldTakeFocus())return;const s=()=>{if(!this.isAlive())return;const o=n.getFocusableElement();this.isCellFocused()&&o.focus({preventScroll:!0})};if(e){setTimeout(s,0);return}s()}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),this.rangeFeature?.onCellSelectionChanged(),this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(Jl(this.column)&&(e=!0),Oo(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss(jMe,e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss(WMe,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){const{beans:t}=this;if(LD(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}const i=this.isCellFocused(),n=t.editSvc?.isEditing(this)??!1;if(this.comp.toggleCss(HMe,i),i&&e?.forceBrowserFocus){let s=this.comp.getFocusableElement();if(n){const o=Hg(s,null,!0);o.length&&(s=o[0])}s.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}i&&e&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:Ql(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss(_Me,!0),e.toggleCss(UMe,!0);const t=this.column.isAutoHeight()==!0;e.toggleCss(VMe,t),e.toggleCss(zMe,!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editSvc?.isEditing(this)?this.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.comp.toggleCss($Me,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu"),{beans:n}=this;n.eventSvc.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout(()=>{n.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(i)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){return this.eGui?.contains($i(this.beans))??!1}createSelectionCheckbox(){const e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const n=this.createRowDragComp(e,t,i);n&&(this.customRowDragComp=n,this.addDestroyFunc(()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null}),n.refreshVisibility())}createRowDragComp(e,t,i){const n=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,i);if(n)return this.beans.context.createBean(n),n}cellEditorAttached(){for(const e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function yN(e,t,i,n,s,o){if(i==null&&t==null)return;const r={},a={},l=(c,d)=>{for(const p of c.split(" "))p.trim()!=""&&d(p)};if(i){const c=Object.keys(i);for(let d=0;d<c.length;d++){const p=c[d],g=i[p];let m;typeof g=="string"?m=e?e.evaluate(g,n):!0:typeof g=="function"&&(m=g(n)),l(p,y=>{m?r[y]=!0:a[y]=!0})}}if(t&&o)for(const c of Object.keys(t))l(c,d=>{r[d]||(a[d]=!0)});o&&Object.keys(a).forEach(o),Object.keys(r).forEach(s)}function cH(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var KMe=class extends he{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const i=this.gos,n=r=>{if(typeof r=="string")e.push(r);else if(Array.isArray(r))for(const a of r)e.push(a)},s=i.get("rowClass");s&&n(s);const o=i.getCallback("getRowClass");if(o){const r={data:t.data,node:t,rowIndex:t.rowIndex},a=o(r);n(a)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,i=>{e.push(i)},()=>{})}processRowClassRules(e,t,i){const{gos:n,expressionSvc:s}=this.beans,o=$e(n,{data:e.data,node:e,rowIndex:e.rowIndex});yN(s,void 0,n.get("rowClassRules"),o,t,i)}processStylesFromGridOptions(e){const t=this.gos,i=t.get("rowStyle"),n=t.getCallback("getRowStyle");let s;if(n){const o={data:e.data,node:e,rowIndex:e.rowIndex};s=n(o)}if(s||i)return Object.assign({},i,s)}},qMe=0,k0=class extends he{constructor(e,t,i,n,s){super(),this.rowNode=e,this.useAnimationFrameForCreate=n,this.printLayout=s,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+qMe++,this.rowId=Yy(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=cH(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=t.editSvc?.createRowStyleFeature(this,t),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=Yy(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,n){const{context:s,focusSvc:o}=this.beans;n=uC(this,s,n);const r={rowComp:e,element:t,containerType:i,compBean:n};this.allRowGuis.push(r),this.updateGui(i,r),this.initialiseRowComp(r);const a=this.rowNode,l=this.rowType==="FullWidthLoading"||a.stub,c=!a.data&&this.beans.rowModel.getType()==="infinite";!l&&!c&&!a.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const d=this.fullWidthGui?.element;d&&!this.beans.editSvc?.isEditing(this)&&o.isRowFocused(a.rowIndex,a.rowPinned)&&o.shouldTakeFocus()&&setTimeout(()=>d.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";for(const i of this.allRowGuis)i.element.style.display=t}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),ch(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const i=e.rowComp,n=this.getInitialRowClasses(e.containerType);for(const s of n)i.toggleCss(s,!0);this.executeSlideAndFadeAnimations(e),this.rowNode.group&&uk(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),Eh(t,e.element,E0,this),e.compBean.addDestroyFunc(()=>Eh(t,e.element,E0,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=Yy(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(dk(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(dk(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){const t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const i=this.createBean(t,this.beans.context);this.rowDragComps.push(i),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(n=>n!==i),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(i,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:i,beans:{visibleCols:n}}=this,s=!!e||!n.isPinningLeft(),o=!!t,r=!!i||!n.isPinningRight();return s&&o&&r}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.colModel.isPivotMode(),s=e6(this.gos,this.rowNode,n);e?this.rowType="FullWidthLoading":i?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":s?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:i}=this.beans;if(!i?.active||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(i.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){if(!this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode))return new Yg(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){return!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,i=null){const n={list:[],map:{}},s=(c,d,p)=>{p!=null?n.list.splice(p,0,d):n.list.push(d),n.map[c]=d},o=[];for(const c of t){const d=c.getInstanceId();let p=e.map[d];p&&!this.isCorrectCtrlForSpan(p)&&(p.destroy(),p=void 0),p||(p=this.getNewCellCtrl(c)),p&&s(d,p)}for(const c of e.list){const d=c.column.getInstanceId();if(n.map[d]!=null)continue;!this.isCellEligibleToBeRemoved(c,i)?o.push([d,c]):c.destroy()}if(o.length)for(const[c,d]of o){const p=n.list.findIndex(m=>m.column.getLeft()>d.column.getLeft()),g=p===-1?void 0:Math.max(p-1,0);s(c,d,g)}const{focusSvc:r,visibleCols:a}=this.beans,l=r.getFocusedCell();if(l&&l.column.getPinned()==i){const c=l.column.getInstanceId();if(!n.map[c]&&a.allCols.includes(l.column)){const p=this.createFocusedCellCtrl();if(p){const g=n.list.findIndex(y=>y.column.getLeft()>p.column.getLeft()),m=g===-1?void 0:Math.max(g-1,0);s(c,p,m)}}}return n}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,i=e.getFocusedCell();if(!i)return;const n=t?.getCellSpan(i.column,this.rowNode);if(n){if(n.firstNode!==this.rowNode||!n.doesSpanContain(i))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(i.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(const t of this.allRowGuis){const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const n=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const s=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,s,"right")}}isCellEligibleToBeRemoved(e,t){const{column:s}=e;if(s.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;const{visibleCols:o,editSvc:r}=this.beans,a=r?.isEditing(e),l=e.isCellFocused();return a||l?!(o.allCols.indexOf(s)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||gs(this.gos,"print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=Pe(this.rowNode.oldRowTop),{visibleCols:i}=this.beans,n=i.isPinningLeft(),s=i.isPinningRight();if(t){const{slideInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=n,o.right=s}else{const{fadeInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=n,o.right=s}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(r,a)=>r?r.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(r.element,a).params):!0,t=e(this.fullWidthGui,null),i=e(this.centerGui,null),n=e(this.leftGui,"left"),s=e(this.rightGui,"right");return t&&i&&n&&s}addListeners(){const{beans:e,gos:t,rowNode:i}=this,{expansionSvc:n,eventSvc:s,context:o,rowSpanSvc:r}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...n?.getRowExpandedListeners(this)??{}}),i.detail&&this.addManagedListeners(i.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(i,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(s,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),r&&this.addManagedListeners(r,{spannedCellsUpdated:({pinned:a})=>{a&&!i.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,o),this.tooltipFeature=this.destroyBean(this.tooltipFeature,o),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,o)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){for(const l of this.allRowGuis)this.addRowDraggerToRow(l);return}this.rowDragComps=this.destroyBeans(this.rowDragComps,o)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(const e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(const t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}for(const i of this.getAllCellCtrls())i.refreshCell(e);for(const i of this.allRowGuis)this.setRowCompRowId(i.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(i.rowComp);this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.rowEditStyleFeature?.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=e?.row===this.rowNode?e.position:"none",i=t==="above",n=t==="inside",s=t==="below",r=this.gos.get("treeData")&&(s||i),a=this.rowNode.uiLevel.toString();for(const l of this.allRowGuis){const c=l.rowComp;c.toggleCss("ag-row-highlight-above",i),c.toggleCss("ag-row-highlight-inside",n),c.toggleCss("ag-row-highlight-below",s),c.toggleCss("ag-row-highlight-indent",r),r?l.element.style.setProperty("--ag-row-highlight-level",a):l.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){const e=this.rowNode.dragging;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Ql(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:i,column:n}=t;if(!(i.element===e.target))return;const r=this.rowNode,{focusSvc:a,navigation:l}=this.beans,c=a.getFocusedCell(),d={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:c?.column??n};l?.navigateToNextCell(e,e.key,d,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||tc(e))return;const t=this.allRowGuis.find(a=>a.element.contains(e.target)),i=t?t.element:null,n=i===e.target,s=$i(this.beans);let o=!1;i&&s&&(o=i.contains(s)&&s.classList.contains("ag-cell"));let r=null;!n&&!o&&(r=np(this.beans,i,!1,e.shiftKey)),(this.isFullWidth()&&n||!r)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const e=this.allRowGuis.find(t=>Dc(t.element))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(const i of this.allRowGuis)Oo(i.element,"tabindex",t)}onFullWidthRowFocused(e){const t=this.rowNode,i=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1;let n;if(this.fullWidthGui)n=this.fullWidthGui.element;else{const o=this.beans.colModel.getCol(e?.column)?.pinned;o?n=o==="right"?this.rightGui?.element:this.leftGui?.element:n=this.centerGui?.element}n&&(n.classList.toggle("ag-full-width-focus",i),i&&e?.forceBrowserFocus&&n.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};for(const n of e.list)n!==t&&(i.list.push(n),i.map[n.column.getInstanceId()]=n);return i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){const{rowNode:i}=this;return $e(this.gos,{type:e,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){if(tc(e))return;const t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),i=this.getColumnForFullWidth(t);if(!(!t||!i))return{rowGui:t,column:i}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e?.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=ah(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;const{rangeSvc:t,focusSvc:i}=this.beans;t?.removeAllCellRanges();const n=this.findFullWidthInfoForEvent(e);if(!n)return;const{rowGui:s,column:o}=n,r=s.element,a=e.target,l=this.rowNode;let c=e.defaultPrevented||ed();r&&r.contains(a)&&Ky(a)&&(c=!1),i.setFocusedCell({rowIndex:l.rowIndex,column:o,rowPinned:l.rowPinned,forceBrowserFocus:c})}isSuppressMouseEvent(e){const{gos:t,rowNode:i}=this;if(this.isFullWidth()){const s=this.findFullWidthRowGui(e.target);return Xbe(t,s?.rowComp.getFullWidthCellRendererParams(),i,e)}const n=lN(t,e.target);return n!=null&&dx(t,n.column,i,e)}onRowClick(e){if(tc(e)||this.lastMouseDownOnDragger)return;const i=this.isSuppressMouseEvent(e),{eventSvc:n,selectionSvc:s}=this.beans,o=this.createRowEventWithSource("rowClicked",e);o.isEventHandlingSuppressed=i,n.dispatchEvent(o),!i&&s?.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){this.rowType==="FullWidthDetail"&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){const{gos:i,rowNode:n}=this,s=$e(i,{fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(r,a,l,c)=>this.addFullWidthRowDragging(r,a,l,c),setTooltip:(r,a)=>{i.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(r,a)}}),o=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return nve(o,s);case"FullWidthGroup":{const{value:r,valueFormatted:a}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return s.value=r,s.valueFormatted=a,ive(o,s)}case"FullWidthLoading":return tve(o,s);default:return eve(o,s)}}setupFullWidthRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,i="",n){const{rowDragSvc:s,context:o}=this.beans;if(!s||!this.isFullWidth())return;const r=s.createRowDragComp(()=>i,this.rowNode,void 0,e,t,n);this.createBean(r,o),this.addDestroyFunc(()=>{this.destroyBean(r,o)})}onUiLevelChanged(){const e=cH(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;for(const n of this.allRowGuis)n.rowComp.toggleCss(t,!0),n.rowComp.toggleCss(i,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e){this.firstRowOnPage=e;for(const i of this.allRowGuis)i.rowComp.toggleCss("ag-row-first",e)}if(this.lastRowOnPage!==t){this.lastRowOnPage=t;for(const i of this.allRowGuis)i.rowComp.toggleCss("ag-row-last",t)}}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=[];if(this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),!!e.length)for(const t of e)for(const i of this.allRowGuis)i.rowComp.toggleCss(t,!0)}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!0)},e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,i=>i.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),i=this.isFullWidth(),{rowNode:n,beans:s}=this,o=[];o.push("ag-row"),o.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&o.push("ag-opacity-zero"),o.push(n.rowIndex%2===0?"ag-row-even":"ag-row-odd"),n.isRowPinned()&&(o.push("ag-row-pinned"),s.pinnedRowModel?.isManual()&&o.push("ag-row-pinned-manual")),!n.isRowPinned()&&n.pinnedSibling&&o.push("ag-row-pinned-source"),n.isSelected()&&o.push("ag-row-selected"),n.footer&&o.push("ag-row-footer"),o.push("ag-row-level-"+this.rowLevel),n.stub&&o.push("ag-row-loading"),i&&o.push("ag-full-width-row"),s.expansionSvc?.addExpandedCss(o,n),n.dragging&&o.push("ag-row-dragging");const{rowStyleSvc:r}=s;return r&&(r.processClassesFromGridOptions(o,n),r.preProcessRowClassRules(o,n)),o.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&o.push("ag-row-first"),this.isLastRowOnPage()&&o.push("ag-row-last"),i&&(t==="left"&&o.push("ag-cell-last-left-pinned"),t==="right"&&o.push("ag-cell-first-right-pinned")),o}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,t=>{(t===this.centerGui||t===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:i}=e,{rowNode:n,beans:s,gos:o}=this;i.addManagedListeners(t,{pointerenter:r=>{r.pointerType==="mouse"&&n.dispatchRowEvent("mouseEnter")},pointerleave:r=>{r.pointerType==="mouse"&&n.dispatchRowEvent("mouseLeave")}}),i.addManagedListeners(n,{mouseEnter:()=>{!s.dragSvc?.dragging&&!o.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(i=>i.element);for(const i of t)i.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,n=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),n)}forEachGui(e,t){if(e)t(e);else for(const i of this.allRowGuis)t(i)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),s=qY(this.gos)?Pu(this.beans,this.rowNode).height:void 0,o=s?`${Math.min(i,s)-2}px`:void 0;this.forEachGui(e,r=>{r.element.style.height=`${t}px`,o&&r.element.style.setProperty("--ag-line-height",o)})}destroyFirstPass(e=!1){this.active=!1;const{rowNode:t}=this;if(!e&&_g(this.gos)&&!t.sticky)if(t.rowTop!=null){const s=this.roundRowTopToBounds(t.rowTop);this.setRowTop(s)}else for(const s of this.allRowGuis)s.rowComp.toggleCss("ag-opacity-zero",!0);this.fullWidthGui?.element.contains($i(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventSvc.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=t=>{for(const i of t.list)i.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){const e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const i=this.beans.pageBounds.getPixelOffset();return e+i*(t?1:-1)}setRowTop(e){if(!this.printLayout&&Pe(e)){const t=this.applyPaginationOffset(e),s=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(s)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(t.sticky)i=t.stickyRowTop;else{const n=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,s=this.applyPaginationOffset(n);i=t.isRowPinned()?s:this.beans.rowContainerHeight.getRealPixelPosition(s)}return i+"px"}setRowTopStyle(e){for(const t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)}getCellCtrl(e,t=!1){let i=null;for(const n of this.getAllCellCtrls())n.column==e&&(i=n);if(i!=null||t)return i;for(const n of this.getAllCellCtrls())n?.getColSpanningList().indexOf(e)>=0&&(i=n);return i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){const t=this.rowNode.getRowIndexString();if(t===null)return;const i=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),n=this.rowNode.rowIndex%2===0,s=i+this.rowNode.rowIndex+1;this.forEachGui(e,o=>{o.rowComp.setRowIndex(t),o.rowComp.toggleCss("ag-row-even",n),o.rowComp.toggleCss("ag-row-odd",!n),DY(o.element,s)})}},ZMe=class extends he{constructor(){super(),this.beanName="navigation",this.onPageDown=az(this.onPageDown,100),this.onPageUp=az(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const i=e.key,n=e.altKey,s=e.ctrlKey||e.metaKey,o=!!this.beans.rangeSvc&&e.shiftKey,r=MCe(this.gos,e);let a=!1;switch(i){case oe.PAGE_HOME:case oe.PAGE_END:!s&&!n&&(this.onHomeOrEndKey(i),a=!0);break;case oe.LEFT:case oe.RIGHT:case oe.UP:case oe.DOWN:if(!r)return!1;s&&!n&&!o&&(this.onCtrlUpDownLeftRight(i,r),a=!0);break;case oe.PAGE_DOWN:case oe.PAGE_UP:!s&&!n&&(a=this.handlePageUpDown(i,r,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===oe.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:i,focusIndex:n,focusColumn:s,isAsync:o,rowPinned:r}){const{scrollFeature:a}=this.gridBodyCon;Pe(i)&&!i.isPinned()&&a.ensureColumnVisible(i),Pe(e)&&a.ensureIndexVisible(e,t),o||a.ensureIndexVisible(n);const{focusSvc:l,rangeSvc:c}=this.beans;l.setFocusedCell({rowIndex:n,column:s,rowPinned:r,forceBrowserFocus:!0}),c?.setRangeToCell({rowIndex:n,rowPinned:r,column:s})}onPageDown(e){const t=this.beans,i=HT(t),n=this.getViewportHeight(),{pageBounds:s,rowModel:o,rowAutoHeight:r}=t,a=s.getPixelOffset(),l=i.top+n,c=o.getRowIndexAtPixel(l+a);r?.active?this.navigateToNextPageWithAutoHeight(e,c):this.navigateToNextPage(e,c)}onPageUp(e){const t=this.beans,i=HT(t),{pageBounds:n,rowModel:s,rowAutoHeight:o}=t,r=n.getPixelOffset(),a=i.top,l=s.getRowIndexAtPixel(a+r);o?.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,i=!1){const{pageBounds:n,rowModel:s}=this.beans,o=this.getViewportHeight(),r=n.getFirstRow(),a=n.getLastRow(),l=n.getPixelOffset(),c=s.getRow(e.rowIndex),d=i?c?.rowHeight-o-l:o-l,p=c?.rowTop+d;let g=s.getRowIndexAtPixel(p+l);if(g===e.rowIndex){const y=i?-1:1;t=g=e.rowIndex+y}let m;i?(m="bottom",g<r&&(g=r),t<r&&(t=r)):(m="top",g>a&&(g=a),t>a&&(t=a)),this.isRowTallerThanView(s.getRow(g))&&(t=g,m="top"),this.navigateTo({scrollIndex:t,scrollType:m,scrollColumn:null,focusIndex:g,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const n=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const i=t?-1:1,n=this.getViewportHeight(),{pageBounds:s,rowModel:o}=this.beans,r=s.getLastRow();let a=0,l=e.rowIndex;for(;l>=0&&l<=r;){const c=o.getRow(l);if(c){const d=c.rowHeight??0;if(a+d>n)break;a+=d}l+=i}return Math.max(0,Math.min(l,r))}getViewportHeight(){const e=this.beans,t=HT(e),i=this.beans.scrollVisibleSvc.getScrollbarWidth();let n=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(n-=i),n}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),n=this.getNormalisedPosition(i),{rowIndex:s,rowPinned:o,column:r}=n??i,a=r;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:a,focusIndex:s,focusColumn:a,rowPinned:o})}onHomeOrEndKey(e){const t=e===oe.PAGE_HOME,{visibleCols:i,pageBounds:n,rowModel:s}=this.beans,o=i.allCols,r=t?n.getFirstRow():n.getLastRow(),a=s.getRow(r);if(!a)return;const l=(t?o:[...o].reverse()).find(c=>!c.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:l,focusIndex:r,focusColumn:l})}onTabKeyDown(e,t){const i=t.shiftKey,n=this.tabToNextCellCommon(e,i,t),s=this.beans,{ctrlsSvc:o,pageBounds:r,focusSvc:a,gos:l}=s;if(n!==!1){n?t.preventDefault():n===null&&o.get("gridCtrl").allowFocusForNextCoreContainer(i);return}if(i){const{rowIndex:c,rowPinned:d}=e.getRowPosition();(d?c===0:c===r.getFirstRow())&&(l.get("headerHeight")===0||hh(s)?Af(s,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof Yg&&e.focusCell(!0),(a.focusOverlay(!1)||Af(s,i))&&t.preventDefault()}tabToNextCell(e,t){const i=this.beans,{focusSvc:n,rowRenderer:s}=i,o=n.getFocusedCell();if(!o)return!1;let r=Ag(i,o);return!r&&(r=s.getRowByPosition(o),!r?.isFullWidth())?!1:!!this.tabToNextCellCommon(r,e,t,"api")}tabToNextCellCommon(e,t,i,n="ui"){const{editSvc:s,focusSvc:o}=this.beans;let r;const a=e instanceof Yg?e:e.getAllCellCtrls()?.[0];return s?.isEditing()?r=s?.moveToNextCell(a,t,i,n):r=this.moveToNextCellNotEditing(e,t,i),r===null?r:r||!!o.focusedHeader}moveToNextCellNotEditing(e,t,i){const n=this.beans.visibleCols.allCols;let s;if(e instanceof k0){if(s={...e.getRowPosition(),column:t?n[0]:fi(n)},this.gos.get("embedFullWidthRows")&&i){const r=e.findFullWidthInfoForEvent(i);r&&(s.column=r.column)}}else s=e.getFocusedCellPosition();const o=this.findNextCellToFocusOn(s,{backwards:t,startEditing:!1});if(o===!1)return null;if(o instanceof Yg)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o,t);return Pe(o)}findNextCellToFocusOn(e,{backwards:t,startEditing:i,skipToNextEditableCell:n}){let s=e;const o=this.beans,{cellNavigation:r,gos:a,focusSvc:l,rowRenderer:c,rangeSvc:d}=o;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=r.getNextTabbedCell(s,t);const p=a.getCallback("tabToNextCell");if(Pe(p)){const b=p({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:s||null});if(b===!0)s=e;else{if(b===!1)return!1;s={rowIndex:b.rowIndex,column:b.column,rowPinned:b.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const y=Oa(o);return l.focusHeaderPosition({headerPosition:{headerRowIndex:y+s.rowIndex,column:s.column},fromCell:!0}),null}const g=a.get("editType")==="fullRow";if(i&&(!g||n)&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const m=Ag(o,s);if(!m){const y=c.getRowByPosition(s);if(!y||!y.isFullWidth()||i)continue;return{...y.getRowPosition(),column:s?.column}}if(!r.isSuppressNavigable(m.column,m.rowNode))return m.setFocusedCellPosition(s),d?.setRangeToCell(s),m}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:i,rowModel:n}=this.beans;return t==="top"?i?.getPinnedTopRow(e):t==="bottom"?i?.getPinnedBottomRow(e):n.getRow(e)}navigateToNextCell(e,t,i,n){let s=i,o=!1;const r=this.beans,{cellNavigation:a,focusSvc:l,gos:c}=r;for(;s&&(s===i||!this.isValidNavigateCell(s));)c.get("enableRtl")?t===oe.LEFT&&(s=this.getLastCellOfColSpan(s)):t===oe.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=a.getNextCellToFocus(t,s),o=ki(s);if(o&&e&&e.key===oe.UP&&(s={rowIndex:-1,rowPinned:null,column:i.column}),n){const p=c.getCallback("navigateToNextCell");if(Pe(p)){const m=p({key:t,previousCellPosition:i,nextCellPosition:s||null,event:e});Pe(m)?s={rowPinned:m.rowPinned,rowIndex:m.rowIndex,column:m.column}:s=null}}if(!s)return;if(s.rowIndex<0){const p=Oa(r);l.focusHeaderPosition({headerPosition:{headerRowIndex:p+s.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}const d=this.getNormalisedPosition(s);d?this.focusPosition(d):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){if(!!this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);const i=Ag(this.beans,e);return i?(e=i.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:i,rowRenderer:n,focusSvc:s,eventSvc:o}=this.beans,r=i.allCols;if(!n.getRowByPosition(e)?.isFullWidth())return!1;const l=s.getFocusedCell(),c={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?fi(r):r[0])};this.focusPosition(c);const d=t??(l!=null&&$we(c,l));return o.dispatchEvent({type:"fullWidthRowFocused",rowIndex:c.rowIndex,rowPinned:c.rowPinned,column:c.column,isFullWidthCell:!0,fromBelow:d}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:i}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),i?.setRangeToCell(e)}isValidNavigateCell(e){return!!uc(this.beans,e)}getLastCellOfColSpan(e){const t=Ag(this.beans,e);if(!t)return e;const i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:fi(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=XY(this.gos),i=this.beans.rowModel.getRow(e.rowIndex),n=t&&i?.sticky,{scrollFeature:s}=this.gridBodyCon;!n&&ki(e.rowPinned)&&s.ensureIndexVisible(e.rowIndex),e.column.isPinned()||s.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function HT(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var XMe={moduleName:"KeyboardNavigation",version:ke,beans:[ZMe,bMe,I0e],apiFunctions:{getFocusedCell:CMe,clearFocusedCell:wMe,setFocusedCell:SMe,setFocusedHeader:DMe,tabToNextCell:xMe,tabToPreviousCell:MMe}},QMe=class extends he{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:i}=this.beans;t?t.calculatePages():e.calculateBounds(0,i.getRowCount()-1)}},JMe=class extends he{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this,i=e?.rowTop??0,n=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:i,pageLastPixel:n}}calculateBounds(e,t){const{rowModel:i}=this.beans,n=i.getRowBounds(e);n&&(n.rowIndex=e),this.topRowBounds=n;const s=i.getRowBounds(t);s&&(s.rowIndex=t),this.bottomRowBounds=s,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},eDe=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",tDe=class extends he{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const i of this.elements)i&&(_i(i,t),ja(i,e))}},iDe=class extends he{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:i}=this.beans,n=gs(e,"print"),s=n?0:t.getColsLeftWidth(),o=n?0:t.getDisplayedColumnsRightWidth();s!=this.leftWidth&&(this.leftWidth=s,i.dispatchEvent({type:"leftPinnedWidthChanged"})),o!=this.rightWidth&&(this.rightWidth=o,i.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=Hv(e);if(t<=50)return;const i=this.getPinnedColumnsOverflowingViewport(t-50),n=this.gos.getCallback("processUnpinnedColumns"),{columns:s,hasLockedPinned:o}=i;let r=s;!r.length&&!o||(n&&(r=n({columns:r,viewportWidth:t})),r?.length&&(r=r.filter(a=>!Jl(a)),this.setColsPinned(r,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new tDe(e,t)}setColsPinned(e,t,i){const{colModel:n,colAnimation:s,visibleCols:o,gos:r}=this.beans;if(!n.cols||!e?.length)return;if(gs(r,"print")){Se(37);return}s?.start();let a;t===!0||t==="left"?a="left":t==="right"?a="right":a=null;const l=[];for(const c of e){if(!c)continue;const d=n.getCol(c);d&&d.getPinned()!==a&&(this.setColPinned(d,a),l.push(d))}l.length&&(o.refresh(i),h6(this.eventSvc,l,i)),s?.finish()}initCol(e){const{pinned:t,initialPinned:i}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,i)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;const i=e.pinned==="left",n=e.pinned==="right";e.hidden=!0;const s=()=>{const o=i?this.leftWidth:this.rightWidth;if(o==null)return;const r=o==0,a=e.hidden!==r,l=this.gos.get("enableRtl"),c=t.getScrollbarWidth(),p=t.verticalScrollShowing&&(l&&i||!l&&n)?o+c:o;e.comp.setPinnedContainerWidth(`${p}px`),e.comp.setDisplayed(!r),a&&(e.hidden=r,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:s,rightPinnedWidthChanged:s,scrollVisibilityChanged:s,scrollbarWidthChanged:s})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:n,rightWidth:s}=this,o=Hv(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(n+s+e>o)if(o>n+s)e=o-n-s;else return 0}return e}getPinnedColumnsOverflowingViewport(e){const t=this.rightWidth??0,i=this.leftWidth??0,n=t+i;let s=!1;if(n<e)return{columns:[],hasLockedPinned:s};const{visibleCols:o}=this.beans,r=[...o.leftCols],a=[...o.rightCols];let l=0,c=0;const d=0,p=[];let g=n-d-e;for(;(c<r.length||l<a.length)&&g>0;){if(l<a.length){const m=a[l++];if(m.colDef.lockPinned){s=!0;continue}g-=m.getActualWidth(),p.push(m)}if(c<r.length&&g>0){const m=r[c++];if(m.colDef.lockPinned){s=!0;continue}g-=m.getActualWidth(),p.push(m)}}return{columns:p,hasLockedPinned:s}}},nDe={moduleName:"PinnedColumn",version:ke,beans:[iDe],css:[eDe]},sDe=class extends he{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=ps(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=Kn(e),i=this.descriptionContainer=t.createElement("div");i.classList.add("ag-aria-description-container"),xY(i,"polite"),qfe(i,"additions text"),Kfe(i,!0),e.eGridDiv.appendChild(i)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(bo(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},oDe={moduleName:"Aria",version:ke,beans:[sDe]},rDe=":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}",uH="ag-delay-render",aDe=class extends he{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,t=>{t.gridBodyCtrl.eGridBody.classList.add(uH)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive()||(this.requesters.delete(e),this.requesters.size>0))return;const{renderStatus:t,ctrlsSvc:i}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++,setTimeout(()=>this.revealColumns(e));return}this.timesRetried=0}i.getGridBodyCtrl().eGridBody.classList.remove(uH),this.alreadyRevealed=!0}},lDe={moduleName:"ColumnDelayRender",version:ke,beans:[aDe],css:[rDe]};function cDe(e){e.overlays?.showLoadingOverlay()}function uDe(e){e.overlays?.showNoRowsOverlay()}function dDe(e){e.overlays?.hideOverlay()}var hDe=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",pDe={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},FK=class extends qi{constructor(){super(pDe),this.eOverlayWrapper=je,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(hDe)}handleKeyDown(e){if(e.key!==oe.TAB||e.defaultPrevented||tc(e))return;const t=this.beans;if(np(t,this.eOverlayWrapper,!1,e.shiftKey))return;let n=!1;e.shiftKey?n=t.focusSvc.focusGridView({column:fi(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):n=Af(t,!1),n&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList,{AUTO_HEIGHT:n,NORMAL:s,PRINT:o}=ux;i.toggle(n,t.autoHeight),i.toggle(s,t.normal),i.toggle(o,t.print)}postConstruct(){this.createManagedBean(new rN(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,n){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.isGridFocused()){const s=$i(this.beans);s&&!bY(this.beans)&&(this.elToFocusAfter=s)}e.then(s=>{if(this.activePromise!==e){this.activeOverlay!==s&&(this.destroyBean(s),s=null);return}if(this.activePromise=null,!!s){if(this.activeOverlay!==s&&(this.eOverlayWrapper.appendChild(s.getGui()),this.activeOverlay=s,n)){const o=s;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,({currentValue:r})=>{o.refresh?.($e(this.gos,{...r??{}}))})}i&&this.isGridFocused()&&Th(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),bo(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=$i(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},gDe={selector:"AG-OVERLAY-WRAPPER",component:FK},fDe=class extends he{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=en(this.gos),this.isServerSide=!this.isClientSide&&tp(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");!t&&(t!==void 0||e.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){Se(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return gDe}getOverlayWrapperCompClass(){return FK}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}const{state:e,isClientSide:t,isServerSide:i,beans:{gos:n,colModel:s,rowModel:o}}=this;let r=this.gos.get("loading");r!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&r===void 0&&!n.get("suppressLoadingOverlay")&&(r=!n.get("columnDefs")||!s.ready||!n.get("rowData")&&t),r?e!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&o.isEmpty()&&!n.get("suppressNoRowsOverlay")?e!==2&&this.doShowNoRowsOverlay():(e===1||!i&&e!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(rve(this.beans.userCompFactory,$e(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(ave(this.beans.userCompFactory,$e(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){const n=e?.newAgStackInstance()??null;this.eWrapper?.showOverlay(n,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;this.state===2&&(t=this.beans.ctrlsSvc.get("gridHeaderCtrl")?.headerHeight||0),this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}},mDe={moduleName:"Overlay",version:ke,userComponents:{agLoadingOverlay:$Ce,agNoRowsOverlay:KCe},apiFunctions:{showLoadingOverlay:cDe,showNoRowsOverlay:uDe,hideOverlay:dDe},beans:[fDe]},yDe=class extends he{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=dve(),Rh(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;Rh(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}},vDe=400,bDe=class extends he{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{for(const o of this.getAllCellCtrls())o.onCellSelectionChanged()},t=()=>{for(const o of this.getAllCellCtrls())o.updateRangeBordersIfRangeCount()},i=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},n=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>n()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Nu(this.gos)?i():n()}),Nu(this.gos)&&i()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",n=>this.onSuppressCellFocusChanged(n.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:n,previousValue:s})=>{(!s&&n||s&&!n)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:i}=this.beans;if(i&&this.addManagedPropertyListener("showOpenedGroup",()=>{const n=i.getShowRowGroupCols();n.length&&this.refreshCells({columns:n,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const n=this.gridBodyCtrl;n.setStickyTopHeight(0),n.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=gs(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new CDe(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),i=this.cachedRowCtrls?.getEntries()??[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}isCellBeingRendered(e,t){const i=this.rowCtrlsByRowIndex[e];return!t||!i?!!i:i.isFullWidth()?!0:!!this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:e,column:t,rowPinned:null})||!!i.getCellCtrl(t)||!i.isRowRendered()}updateCellFocus(e){for(const t of this.getAllCellCtrls())t.onCellFocused(e);for(const t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if(e?.rowIndex!=null&&!e.rowPinned){const t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(const t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(const t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;if(t)for(const i of this.getAllCellCtrls())t.onFlashCells(i,e)},columnHoverChanged:()=>{for(const e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(const e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(const e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(const e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const e=this.colModel.getCols();for(const t of e){const i=l=>{for(const c of this.getAllCellCtrls())c.column===t&&l(c)},n=()=>{i(l=>l.onLeftChanged())},s=()=>{i(l=>l.onWidthChanged())},o=()=>{i(l=>l.onFirstRightPinnedChanged())},r=()=>{i(l=>l.onLastLeftPinnedChanged())},a=()=>{i(l=>l.onColDefChanged())};t.__addEventListener("leftChanged",n),t.__addEventListener("widthChanged",s),t.__addEventListener("firstRightPinnedChanged",o),t.__addEventListener("lastLeftPinnedChanged",r),t.__addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",n),t.__removeEventListener("widthChanged",s),t.__removeEventListener("firstRightPinnedChanged",o),t.__removeEventListener("lastLeftPinnedChanged",r),t.__removeEventListener("colDefChanged",a)})}}onDomLayoutChanged(){const e=gs(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];for(const i of this.getAllRowCtrls()){const n=i.getCellCtrl(e,!0)?.eGui;n&&t.push(n)}return t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,i){const{pinnedRowModel:n,beans:s,printLayout:o}=this,r=Object.fromEntries(e.map(l=>[l.rowNode.id,l]));n?.forEachPinnedRow(t,(l,c)=>{const d=e[c];d&&n.getPinnedRowById(d.rowNode.id,t)===void 0&&(d.destroyFirstPass(),d.destroySecondPass()),l.id in r&&i?(e[c]=r[l.id],delete r[l.id]):e[c]=new k0(l,s,!1,!1,o)});const a=(t==="top"?n?.getPinnedTopRowCount():n?.getPinnedBottomRowCount())??0;e.length=a}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const i=n=>{const s=n[e.rowIndex];s&&s.rowNode===e&&(s.destroyFirstPass(),s.destroySecondPass(),n[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":i(this.topRowCtrls);break;case"bottom":i(this.bottomRowCtrls);break;default:i(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;if(t?.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),e!=null){for(const n of e??[])this.redrawRow(n,!0);this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,n=e.animate&&_g(this.gos),s=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:o,gos:r}=this;if(o){o.checkStickyRows();const a=o.extraTopHeight+o.extraBottomHeight;a&&this.updateContainerHeights(a)}this.recycleRows(s,n),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(r.get("enableRowPinning")?i:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let i=this.pageBounds.getCurrentPageHeight();i===0&&(i=1),t.setModelHeight(i+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error(Wa(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,i=this.findPositionToFocus(e);if(!i){t.focusHeaderPosition({headerPosition:{headerRowIndex:Oa(this.beans)-1,column:e.column}});return}if(e.rowIndex!==i.rowIndex||e.rowPinned!=i.rowPinned){t.setFocusedCell({...i,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus($e(this.gos,{...i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(e){const{pagination:t,pageBounds:i}=this.beans;let n=e;for(n.rowPinned==null&&t&&i&&!t.isRowInPage(n.rowIndex)&&(n={rowPinned:null,rowIndex:i.getFirstRow()});n;){if(n.rowPinned==null&&i)if(n.rowIndex<i.getFirstRow()){if(n=T0(this.beans,{rowPinned:null,rowIndex:0}),!n)return null}else n.rowIndex>i.getLastRow()&&(n={rowPinned:null,rowIndex:i.getLastRow()});const s=this.getRowByPosition(n);if(s?.isAlive())return{...s.getRowPosition(),column:e.column};n=T0(this.beans,n)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let n=0;n<i;n++){const s=t[n].getAllCellCtrls(),o=s.length;for(let r=0;r<o;r++)e.push(s[r])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),i=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...i,...e?.getCtrls("top")??[],...e?.getCtrls("bottom")??[],...e?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,i){const n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,i)}refreshCells({rowNodes:e,columns:t,force:i,suppressFlash:n}={}){const s={force:i,newData:!1,suppressFlash:n};for(const o of this.getCellCtrls(e,t))o.refreshOrDestroyCell(s);this.refreshFullWidth(e)}refreshRows(e={}){for(const t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||(t=!0,this.redrawRow(i.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=Bk(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(n=>{const s=n.rowNode;return Gk(s,t)})}getCellCtrls(e,t){let i;Pe(t)&&(i={},t.forEach(s=>{const o=this.colModel.getCol(s);Pe(o)&&(i[o.getId()]=!0)}));const n=[];for(const s of this.getRowCtrls(e))for(const o of s.getAllCellCtrls()){const r=o.column.getId();i&&!i[r]||n.push(o)}return n}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const i of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[i].rowNode.id==null&&e.push(i);this.removeRowCtrls(e);const t={};for(const i of Object.values(this.rowCtrlsByRowIndex)){const n=i.rowNode;t[n.id]=i}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){for(const i of e){const n=this.rowCtrlsByRowIndex[i];n&&(n.destroyFirstPass(t),n.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]}}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{focusSvc:t,animationFrameSvc:i}=this.beans,{afterScroll:n}=e;let s;const o=this.stickyRowFeature;o&&(s=t?.getFocusCellToUseAfterRefresh()||void 0);const r=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(o){l=o.checkStickyRows();const d=o.extraTopHeight+o.extraBottomHeight;d&&this.updateContainerHeights(d)}const c=this.firstRenderedRow!==r||this.lastRenderedRow!==a;if(!(n&&!l&&!c)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,n),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(n&&!l),s!=null)){const d=t?.getFocusCellToUseAfterRefresh();s!=null&&d==null&&(i?.flushAllFrames(),this.restoreFocusedCell(s))}}removeRowCompsNotToDraw(e,t){const i={};for(const o of e)i[o]=!0;const s=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!i[o]);this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){const t=[];for(let r=this.firstRenderedRow;r<=this.lastRenderedRow;r++)t.push(r);const i=this.beans.pagination,n=this.beans.focusSvc?.getFocusedCell()?.rowIndex;n!=null&&(n<this.firstRenderedRow||n>this.lastRenderedRow)&&(!i||i.isRowInPage(n))&&n<this.rowModel.getRowCount()&&t.push(n);const s=r=>{const a=r.rowNode.rowIndex;a==null||a===n||(a<this.firstRenderedRow||a>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(r)&&t.push(a)};for(const r of Object.values(this.rowCtrlsByRowIndex))s(r);if(e)for(const r of Object.values(e))s(r);t.sort((r,a)=>r-a);const o=[];for(let r=0;r<t.length;r++){const a=t[r],l=this.rowModel.getRow(a);l&&!l.sticky&&o.push(a)}return o}recycleRows(e,t=!1,i=!1){const n=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(n,!t);for(const s of n)this.createOrUpdateRowCtrl(s,e,t,i);if(e){const{animationFrameSvc:s}=this.beans;s?.active&&i&&!this.printLayout?s.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),i=e.isPinningRight();(this.pinningLeft!==t||i!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];for(const t of this.getFullWidthRowCtrls()){const i=t.rowNode.rowIndex;e.push(i.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=Bk(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const n=i.rowNode;return!(t!=null&&!Gk(n,t))})}createOrUpdateRowCtrl(e,t,i,n){let s,o=this.rowCtrlsByRowIndex[e];if(o||(s=this.rowModel.getRow(e),Pe(s)&&Pe(t)&&t[s.id]&&s.alreadyRendered&&(o=t[s.id],t[s.id]=null)),!o)if(s||(s=this.rowModel.getRow(e)),Pe(s))o=this.createRowCon(s,i,n);else return;s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o}destroyRowCtrls(e,t){const i=[];if(e){for(const n of Object.values(e))if(n){if(this.cachedRowCtrls&&n.isCacheable()){this.cachedRowCtrls.addRow(n);continue}if(n.destroyFirstPass(!t),t){const s=n.instanceId;this.zombieRowCtrls[s]=n,i.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[s]})}else n.destroySecondPass()}}t&&(i.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(const n of i)n()},vDe))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=uh(this.beans);return e*t}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:i}=this;e.updateOffset();let n,s;if(!i.isRowsToRender())n=0,s=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),n=t.getFirstRow(),s=t.getLastRow();else{const d=this.getRowBufferInPixels(),p=this.ctrlsSvc.getScrollFeature(),g=this.gos.get("suppressRowVirtualisation");let m=!1,y,b;do{const E=t.getPixelOffset(),{pageFirstPixel:I,pageLastPixel:N}=t.getCurrentPagePixelRange(),T=e.divStretchOffset,P=p.getVScrollPosition(),O=P.top,G=P.bottom;g?(y=I+T,b=N+T):(y=Math.max(O+E-d,I)+T,b=Math.min(G+E+d,N)+T),this.firstVisibleVPixel=Math.max(O+E,I)+T,this.lastVisibleVPixel=Math.min(G+E,N)+T,m=this.ensureAllRowsInRangeHaveHeightsCalculated(y,b)}while(m);let C=i.getRowIndexAtPixel(y),w=i.getRowIndexAtPixel(b);const x=t.getFirstRow(),M=t.getLastRow();C<x&&(C=x),w>M&&(w=M),n=C,s=w}const o=gs(this.gos,"normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);o&&!r&&s-n>a&&(s=n+a);const l=n!==this.firstRenderedRow,c=s!==this.lastRenderedRow;(l||c)&&(this.firstRenderedRow=n,this.lastRenderedRow=s,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:n,lastRow:s}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,Rc(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const i=this.pinnedRowModel?.ensureRowHeightsValid(),n=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:s,rowModel:o}=this,r=o.ensureRowHeightsValid(e,t,s.getFirstRow(),s.getLastRow());return(r||n)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),n||r||i?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){const n=e.rowNode,s=this.focusSvc.isRowFocused(n.rowIndex,n.rowPinned),o=this.editSvc?.isEditing(e),r=n.detail;return s||o||r?!!this.isRowPresent(n):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.beans.pagination?.isRowInPage(e.rowIndex)??!0:!1}createRowCon(e,t,i){const n=this.cachedRowCtrls?.getRow(e)??null;if(n)return n;const s=i&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;return new k0(e,this.beans,t,s,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(n=>n.rowNode),t=this.getStickyTopRowCtrls().map(n=>n.rowNode),i=this.getStickyBottomRowCtrls().map(n=>n.rowNode);return[...t,...e,...i]}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(n=>n.rowNode.rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(n=>n.rowNode.rowIndex===i)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const n=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!n}},CDe=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e?.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],ea(this.entriesList,i)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],ea(this.entriesList,e)}getEntries(){return this.entriesList}};function Bk(e){if(!e)return;const t={top:{},bottom:{},normal:{}};for(const i of e){const n=i.id;switch(i.rowPinned){case"top":t.top[n]=i;break;case"bottom":t.bottom[n]=i;break;default:t.normal[n]=i;break}}return t}function Gk(e,t){const i=e.id;switch(e.rowPinned){case"top":return t.top[i]!=null;case"bottom":return t.bottom[i]!=null;default:return t.normal[i]!=null}}var wDe=class extends he{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=Ta(e),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Ta(e))}doFullSort(e,t){const i=e.map((n,s)=>({currentPos:s,rowNode:n}));return i.sort(this.compareRowNodes.bind(this,t)),i.map(n=>n.rowNode)}compareRowNodes(e,t,i){const n=t.rowNode,s=i.rowNode;for(let o=0,r=e.length;o<r;o++){const a=e[o],l=a.sort==="desc",c=this.getValue(n,a.column),d=this.getValue(s,a.column);let p;const g=this.getComparator(a,n);if(g?p=g(c,d,n,s,l):p=zfe(c,d,this.isAccentedSort),!isNaN(p)&&p!==0)return a.sort==="asc"?p:p*-1}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,n=i.getColDef().comparator;if(n!=null)return n;if(!i.getColDef().showRowGroup)return;const s=!t.group&&i.getColDef().field;if(!s)return;const o=this.beans.colModel.getColDefCol(s);if(o)return o.getColDef().comparator}getValue(e,t){const{valueSvc:i,colModel:n,showRowGroupCols:s,gos:o}=this.beans;if(!this.primaryColumnsSortGroups)return i.getValue(t,e,!1);if(e.rowGroupColumn===t){if(JY(o,n.isPivotActive())){const c=e.data?e:V6(e.childrenAfterGroup);return c&&i.getValue(t,c,!1)}const l=s?.getShowRowGroupCol(t.getId());return l?e.groupData?.[l.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return i.getValue(t,e,!1)}};function SDe(e){e.sortSvc?.onSortChanged("api")}var OK={moduleName:"Sort",version:ke,beans:[_0e,wDe],apiFunctions:{onSortChanged:SDe},userComponents:{agSortIndicator:gN},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},xDe=class extends he{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:i}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),i.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),Rh(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,zg(e.source))}}};function MDe(e){e.valueCache?.expire()}function DDe(e,t){const{colKey:i,rowNode:n,useFormatter:s}=t,o=e.colModel.getColDefCol(i)??e.colModel.getCol(i);if(ki(o))return null;const r=e.valueSvc.getValueForDisplay(o,n,s);return s?r.valueFormatted??nm(r.value):r.value}var ADe="paste",RDe=class extends he{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;en(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:i}=this.beans;if(e.source===ADe||t.get("suppressChangeDetection"))return;const n=e.node,s=[n],o=this.clientSideRowModel,r=o?.rootNode;if(r&&!n.isRowPinned()){const a=t.get("aggregateOnlyChangedColumns"),l=new Kv(a,r);l.addParentNode(n.parent,[e.column]),o.doAggregate(l),l.forEachChangedNodeDepthFirst(c=>{s.push(c),c.sibling&&s.push(c.sibling)})}i.refreshCells({rowNodes:s})}},EDe=class extends he{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);oi(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return oi(16,{expression:e,params:t,e:i}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const i=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",i);return t[e]=n,n}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}},TDe=class extends he{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){if(this.active){const n=this.cacheVersion;e.__cacheVersion!==n&&(e.__cacheVersion=n,e.__cacheData={}),e.__cacheData[t]=i}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},IDe={moduleName:"ValueCache",version:ke,beans:[TDe],apiFunctions:{expireValueCache:MDe}},kDe={moduleName:"Expression",version:ke,beans:[EDe]},LDe={moduleName:"ChangeDetection",version:ke,beans:[RDe]},PDe={moduleName:"CellApi",version:ke,apiFunctions:{getCellValue:DDe}},NDe=class extends he{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEditSvc=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEditSvc=!!e.editSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=tp(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=t=>this.callColumnCellValueChangedHandler(t);this.eventSvc.addListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValueForDisplay(e,t,i=!1,n=!1,s="ui"){const{showRowGroupColValueSvc:o}=this.beans,r=!e&&t.group,a=e?.colDef.showRowGroup,l=!this.isTreeData||t.footer;if(o&&l&&(r||a)){const b=o.getGroupValue(t,e);if(b==null)return{value:null,valueFormatted:null};if(!i)return{value:b.value,valueFormatted:null};const C=o.formatAndPrefixGroupColValue(b,e,n);return{value:b.value,valueFormatted:C}}if(!e)return{value:t.key,valueFormatted:null};const c=t.leafGroup&&this.colModel.isPivotMode(),d=t.group&&t.expanded&&!t.footer&&!c,p=this.gos.get("groupSuppressBlankHeader")||!t.sibling,g=d&&!p,m=this.getValue(e,t,g,s),y=i&&!(n&&e.colDef.useValueFormatterForExport===!1);return{value:m,valueFormatted:y?this.formatValue(e,t,m):null}}getValue(e,t,i=!1,n="ui"){if(this.initialised||this.init(),!t)return;const s=e.getColDef(),o=s.field,r=e.getColId(),a=t.data;if(this.hasEditSvc&&n==="ui"){const b=this.editSvc;if(b.isEditing()){const C=b.getCellDataValue({rowNode:t,column:e},!0);if(C!==void 0)return C}}let l;const c=s.showRowGroup;if(typeof c=="string"&&(this.beans.rowGroupColsSvc?.getColumnIndex(c)??-1)>t.level)return null;const d=typeof c!="string"||!t.group,p=t.groupData&&r in t.groupData,g=!i&&t.aggData&&t.aggData[r]!==void 0,m=this.isSsrm&&i&&!!s.aggFunc,y=this.isSsrm&&t.footer&&t.field&&(s.showRowGroup===!0||s.showRowGroup===t.field);if(this.isTreeData&&g)l=t.aggData[r];else if(this.isTreeData&&s.valueGetter)l=this.executeValueGetter(s.valueGetter,a,e,t);else if(this.isTreeData&&o&&a)l=ev(a,o,e.isFieldContainsDots());else if(p)l=t.groupData[r];else if(g)l=t.aggData[r];else if(s.valueGetter&&!m){if(!d)return l;l=this.executeValueGetter(s.valueGetter,a,e,t)}else if(y)l=ev(a,t.field,e.isFieldContainsDots());else if(o&&a&&!m){if(!d)return l;l=ev(a,o,e.isFieldContainsDots())}if(this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){const b=l.substring(1);l=this.executeValueGetter(b,a,e,t)}return l}parseValue(e,t,i,n){const s=e.getColDef(),o=s.valueParser;if(Pe(o)){const r=$e(this.gos,{node:t,data:t?.data,oldValue:n,newValue:i,colDef:s,column:e});return typeof o=="function"?o(r):this.expressionSvc?.evaluate(o,r)}return i}getDeleteValue(e,t){return Pe(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t).value)??null:null}formatValue(e,t,i,n,s=!0){const{expressionSvc:o}=this.beans;let r=null,a;const l=e.getColDef();if(n?a=n:s&&(a=l.valueFormatter),a){const c=t?t.data:null,d=$e(this.gos,{value:i,node:t,data:c,colDef:l,column:e});typeof a=="function"?r=a(d):r=o?o.evaluate(a,d):null}else if(l.refData)return l.refData[i]||"";return r==null&&Array.isArray(i)&&(r=i.join(", ")),r}setValue(e,t,i,n){const s=this.colModel.getColDefCol(t);if(!e||!s)return!1;ki(e.data)&&(e.data={});const{field:o,valueSetter:r}=s.getColDef();if(ki(o)&&ki(r))return Se(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(s,i))return Se(135),!1;const a=$e(this.gos,{node:e,data:e.data,oldValue:this.getValue(s,e,void 0,n),newValue:i,colDef:s.getColDef(),column:s});a.newValue=i;let l;if(Pe(r)?typeof r=="function"?l=r(a):l=this.expressionSvc?.evaluate(r,a):l=this.setValueUsingField(e.data,o,i,s.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();const c=this.getValue(s,e);return this.dispatchCellValueChangedEvent(e,a,c,n),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,a,c,n),!0}dispatchCellValueChangedEvent(e,t,i,n){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:i,value:i,source:n})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,n){if(!t)return!1;let s=!1;if(!n)s=e[t]===i,s||(e[t]=i);else{const o=t.split(".");let r=e;for(;o.length>0&&r;){const a=o.shift();o.length===0?(s=r[a]===i,s||(r[a]=i)):r=r[a]}}return!s}executeValueGetterWithValueCache(e,t,i,n){const s=i.getColId(),o=this.valueCache.getValue(n,s);if(o!==void 0)return o;const r=this.executeValueGetterWithoutValueCache(e,t,i,n);return this.valueCache.setValue(n,s,r),r}executeValueGetterWithoutValueCache(e,t,i,n){const s=$e(this.gos,{data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});let o;return typeof e=="function"?o=e(s):o=this.expressionSvc?.evaluate(e,s),o}getValueCallback(e,t){const i=this.colModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),n=e.getColDef().keyCreator;let s=i;if(n){const o=$e(this.gos,{value:i,colDef:e.getColDef(),column:e,node:t,data:t.data});s=n(o)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&Se(121)),s}},FDe={moduleName:"CommunityCore",version:ke,beans:[F0e,Rwe,Vxe,kye,yDe,QSe,T0e,oMe,Rye,JMe,QMe,bDe,NDe,P0e,E0e,N0e,Hxe,xDe,Fxe,Oxe,mMe],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:Ewe,destroy:Twe,isDestroyed:Iwe,getGridOption:kwe,setGridOption:Lwe,updateGridOptions:dK,isModuleRegistered:Pwe},dependsOn:[Lxe,ISe,BSe,OK,hMe,exe,pMe,mDe,LDe,fMe,XMe,nDe,oDe,vMe,_xe,Pxe,kDe,sxe,lDe]},BK={AdvancedFilter:1,AiToolkit:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},jT=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],ODe={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:jT,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],RowModelSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...jT,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...jT,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},BDe={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function GDe(e,t){const i=[];for(const n of Array.isArray(e)?e:[e]){const s=ODe[n];if(s)for(const o of s){const r=BDe[o];(!r||r===t)&&i.push(o)}else i.push(n)}return i}var GK=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,_De=e=>{const t=e.map(n=>`import { ${tv(n)} } from '${BK[n]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(n=>n==="IntegratedCharts"||n==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(n=>tv(n,!0)).join(", ")} ]); 

For more info see: ${Gg}/modules/`};function tv(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function VDe(e,t){const i=t.filter(o=>o==="IntegratedCharts"||o==="Sparklines");let n="";return!globalThis?.agCharts&&i.length>0?n=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(o=>BK[o])&&(n=n+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),n}function _K({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var dH=({reasonOrId:e,moduleName:t,gridScoped:i,gridId:n,rowModelType:s,additionalText:o,isUmd:r})=>{const a=GDe(t,s),l=typeof e=="string"?e:WDe[e];if(r)return VDe(l,a);const c=a.filter(g=>g==="IntegratedCharts"||g==="Sparklines"),d=c.length>0?`${c.map(g=>tv(g)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${l} as ${a.length>1?"one of "+a.map(g=>tv(g)).join(", "):tv(a[0])} is not registered${i?" for gridId: "+n:""}. ${d} Check if you have registered the module:
`}
${_De(a)}`+(o?` 

${o}`:"")},hH=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,zDe=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,HDe={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e?.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:i})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",i],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${zDe(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:i,pageSizeOptions:n})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${i?"":" the default"} paginationPageSizeSelector=[${n?.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:i,jsComps:n})=>{const s=[],o=[...Object.keys(i??[]).filter(a=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(a)),...Object.keys(n??[]).filter(a=>!!n[a])],r=Sk({inputValue:t,allSuggestions:o,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return s.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),r.length>0&&s.push(`         Did you mean: [${r.slice(0,3)}]?
`),s.push("If using a custom component check it has been registered correctly."),s},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${Gg}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({inputValue:e,allSuggestions:t})=>{const i=Sk({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,i.length>0?`         Did you mean: [${i.slice(0,3)}]?`:"","If using a custom aggregation function check it has been registered correctly."].join(`
`)},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:i})=>["duplicate group keys for row data, keys should be unique",e,t,...i??[]],187:({rowId:e,firstData:t,secondData:i})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",i],188:e=>`getRowId callback must be provided for Server Side Row Model ${e?.feature||"selection"} to work correctly.`,189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:dH,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${Gg}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e?.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>hH("IntegratedChartsModule"),258:()=>hH("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:i,gridId:n,rowModelType:s})=>dH({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:Ug[t],gridId:n,gridScoped:i,rowModelType:s}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${Gg}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>GK(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children.";break}return t},275:_K,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`,291:()=>"License Key being set multiple times with different values. This can result in an incorrect license key being used,",292:({colId:e})=>`The Multi Filter for column '${e}' has buttons configured against the child filters. When 'enableFilterHandlers=true', buttons must instead be provided against the parent Multi Filter params. The child filter buttons will be ignored.`};function jDe(e,t){const i=HDe[e];if(!i)return[`Missing error text for error id ${e}!`];const n=i(t),o=`
See ${YY(e,t)}`;return Array.isArray(n)?n.concat(o):[n,o]}var WDe={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},pH=new WeakMap,gH=new WeakMap,UDe=1,$De=class{create(e,t,i,n,s,o){const r=WP.applyGlobalGridOptions(t),a=r.gridId??String(UDe++),l=this.getRegisteredModules(s,a,r.rowModelType),c=this.createBeansList(r.rowModelType,l,a),d=this.createProvidedBeans(e,r,s);if(!c)return;const g={providedBeanInstances:d,beanClasses:c,id:a,beanInitComparator:xwe,beanDestroyComparator:Mwe,derivedBeans:[wwe],destroyCallback:()=>{gH.delete(y),pH.delete(e),kme(a),o?.()}},m=new cbe(g);this.registerModuleFeatures(m,l),i(m),m.getBean("syncSvc").start(),n?.(m);const y=m.getBean("gridApi");return pH.set(e,y),gH.set(y,e),y}getRegisteredModules(e,t,i){return Wv(FDe,void 0,!0),e?.modules?.forEach(n=>Wv(n,t)),Lme(t,fH(i))}registerModuleFeatures(e,t){const i=e.getBean("registry"),n=e.getBean("apiFunctionSvc");for(const s of t){i.registerModule(s);const o=s.apiFunctions;if(o){const r=Object.keys(o);for(const a of r)n?.addFunction(a,o[a])}}}createProvidedBeans(e,t,i){let n=i?i.frameworkOverrides:null;ki(n)&&(n=new cK);const s={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:i?i.globalListener:null,globalSyncListener:i?i.globalSyncListener:null,frameworkOverrides:n};return i?.providedBeanInstances&&Object.assign(s,i.providedBeanInstances),s}createBeansList(e,t,i){const n={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},s=fH(e),o=n[s];if(!o){ky(201,{rowModelType:s},`Unknown rowModelType ${s}.`);return}if(!Fme()){ky(272,void 0,GK());return}if(!e){const a=Object.entries(n).filter(([l,c])=>hk(c,i,l));if(a.length==1){const[l,c]=a[0];if(l!==s){const d={moduleName:c,rowModelType:l};ky(275,d,_K(d));return}}}if(!hk(o,i,s)){ky(200,{reasonOrId:`rowModelType = '${s}'`,moduleName:o,gridScoped:UP(),gridId:i,rowModelType:s},`Missing module ${o}Module for rowModelType ${s}.`);return}const r=new Set;for(const a of t)for(const l of a.beans??[])r.add(l);return Array.from(r)}};function fH(e){return e??"clientSide"}function td(e){const t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function ND(e){const t=e.rowModel;return t.getType()==="infinite"?t:void 0}function YDe(e){const t=e.rowModel;return t.getType()==="serverSide"?t:void 0}var KDe=class extends he{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");return t?Cme(t):wme(e.get("localeText"))}};function qDe(e,t=!1){const i=[],n=[],s=[],o=[],r=[],a=[],l=[],c=[],d=[];let p=0;for(let g=0;g<e.length;g++){const{colId:m,sort:y,sortIndex:b,rowGroup:C,rowGroupIndex:w,aggFunc:x,pivot:M,pivotIndex:E,pinned:I,hide:N,width:T,flex:P}=e[g];d.push(m),y&&(i[b??p++]={colId:m,sort:y}),C&&(n[w??0]=m),typeof x=="string"&&s.push({colId:m,aggFunc:x}),M&&(o[E??0]=m),I&&(I==="right"?a:r).push(m),N&&l.push(m),(P!=null||T)&&c.push({colId:m,flex:P??void 0,width:T})}return{sort:i.length?{sortModel:WT(i)}:void 0,rowGroup:n.length?{groupColIds:WT(n)}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:o.length||t?{pivotMode:t,pivotColIds:WT(o)}:void 0,columnPinning:r.length||a.length?{leftColIds:r,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:c.length?{columnSizingModel:c}:void 0,columnOrder:d.length?{orderedColIds:d}:void 0}}function WT(e){return e.filter(t=>t!=null)}function ZDe(e){const t=[];for(const{groupId:i,open:n}of e)n&&t.push(i);return t.length?{openColumnGroupIds:t}:void 0}var XDe=class{wrap(e,t,i,n){const s=this.createWrapper(e,n);for(const o of t??[])this.createMethod(s,o,!0);for(const o of i??[])this.createMethod(s,o,!1);return s}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&Se(49,{methodName:t}),null)}}};function UT(e){return e.get("tooltipShowMode")==="whenTruncated"}function QDe(e,t){if(typeof e!="number")return"";const i=t(),n=i("thousandSeparator",","),s=i("decimalSeparator",".");return e.toString().replace(".",s).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${n}`)}var JDe=class extends he{getFileName(e){const t=this.getDefaultFileExtension();return e?.length||(e=this.getDefaultFileName()),e.includes(".")?e:`${e}.${t}`}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},eAe=class{constructor(e){const{colModel:t,rowGroupColsSvc:i,colNames:n,valueSvc:s,gos:o,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.colModel=t,this.rowGroupColsSvc=i,this.colNames=n,this.valueSvc=s,this.gos=o,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,n,s){const o=t===0&&e6(this.gos,s,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||s.group)&&(e.isRowGroupDisplayed(s.rowGroupColumn?.getColId()??"")||o))return{value:this.processRowGroupCallback($e(this.gos,{column:e,node:s}))??""};if(this.processCellCallback)return{value:this.processCellCallback($e(this.gos,{accumulatedRowIndex:i,column:e,node:s,value:this.valueSvc.getValueForDisplay(e,s,void 0,void 0).value,type:n,parseValue:g=>this.valueSvc.parseValue(e,s,g,this.valueSvc.getValue(e,s,void 0)),formatValue:g=>this.valueSvc.formatValue(e,s,g)??g}))??""};const r=this.gos.get("treeData"),a=this.valueSvc,l=s.level===-1&&s.footer,c=e.colDef.showRowGroup===!0&&(s.group||r);if(!l&&(o||c)){let g="",m=s;for(;m&&m.level!==-1;){const{value:y,valueFormatted:b}=a.getValueForDisplay(o?void 0:e,m,!0,!0);g=` -> ${b??y??""}${g}`,m=m.parent}return{value:g,valueFormatted:g}}const{value:d,valueFormatted:p}=a.getValueForDisplay(e,s,!0,!0);return{value:d??"",valueFormatted:p}}getHeaderName(e,t){return e?e($e(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function tAe(e,t){const i=document.defaultView||window;if(!i){Se(52);return}const n=document.createElement("a"),s=i.URL.createObjectURL(t);n.setAttribute("href",s),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),n.remove(),i.setTimeout(()=>{i.URL.revokeObjectURL(s)},0)}var iAe={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},ao="clientSide",xs="serverSide",ng="infinite",nAe={onGroupExpandedOrCollapsed:[ao],refreshClientSideRowModel:[ao],isRowDataEmpty:[ao],forEachLeafNode:[ao],forEachNodeAfterFilter:[ao],forEachNodeAfterFilterAndSort:[ao],resetRowHeights:[ao,xs],applyTransaction:[ao],applyTransactionAsync:[ao],flushAsyncTransactions:[ao],getBestCostNodeSelection:[ao],getServerSideSelectionState:[xs],setServerSideSelectionState:[xs],applyServerSideTransaction:[xs],applyServerSideTransactionAsync:[xs],applyServerSideRowData:[xs],retryServerSideLoads:[xs],flushServerSideAsyncTransactions:[xs],refreshServerSide:[xs],getServerSideGroupLevelState:[xs],refreshInfiniteCache:[ng],purgeInfiniteCache:[ng],getInfiniteRowCount:[ng],isLastRowIndexKnown:[ng,xs],expandAll:[ao,xs],collapseAll:[ao,xs],onRowHeightChanged:[ao,xs],setRowCount:[ng,xs],getCacheBlockState:[ng,xs]},sAe={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function oAe(e,t,i){const n=sAe[e];if(n){const{version:o,new:r,old:a,message:l}=n,c=a??e;return(...d)=>{const p=r?`Please use ${r} instead. `:"";return Xy(`Since ${o} api.${c} is deprecated. ${p}${l??""}`),t.apply(t,d)}}const s=nAe[e];return s?(...o)=>{const r=i.rowModel.getType();if(!s.includes(r)){Bg(`api.${e} can only be called when gridOptions.rowModelType is ${s.join(" or ")}`);return}return t.apply(t,o)}:t}var rAe={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",highlightTooltipFeature:"Tooltip",tooltipStateManager:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},aAe={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},lAe={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},cAe=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),uAe=class extends he{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,Bme(jDe)}warnOnInitialPropertyUpdate(e,t){e==="api"&&iAe[t]&&Se(22,{key:t})}processGridOptions(e){this.processOptions(e,iMe())}validateApiFunction(e,t){return oAe(e,t,this.beans)}missingUserComponent(e,t,i,n){const s=Ug[t];s?this.gos.assertModuleRegistered(s,`AG Grid '${e}' component: ${t}`):Se(101,{propertyName:e,componentName:t,agGridDefaults:i,jsComps:n})}missingDynamicBean(e){const t=rAe[e];return t?Wa(200,{...this.gos.getModuleErrorParams(),moduleName:t,reasonOrId:e}):void 0}checkRowEvents(e){hAe.has(e)&&Se(10,{eventType:e})}validateIcon(e){if(cAe.has(e)&&Se(43,{iconName:e}),aAe[e])return;const t=lAe[e];if(t){oi(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:UP(),gridId:this.beans.context.getId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}Se(134,{iconName:e})}isProvidedUserComp(e){return!!Ug[e]}validateColDef(e){this.processOptions(e,U0e())}processOptions(e,t){const{validations:i,deprecations:n,allProperties:s,propertyExceptions:o,objectName:r,docsUrl:a}=t;s&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(n)],s,r,a);const l=new Set;if(Object.keys(e).forEach(d=>{const p=n[d];if(p){const{message:x,version:M}=p;l.add(`As of v${M}, ${String(d)} is deprecated. ${x??""}`)}const g=e[d];if(g==null||g===!1)return;const m=i[d];if(!m)return;const{dependencies:y,validate:b,supportedRowModels:C,expectedType:w}=m;if(w){const x=typeof g;if(x!==w){l.add(`${String(d)} should be of type '${w}' but received '${x}' (${g}).`);return}}if(C){const x=this.gridOptions.rowModelType??"clientSide";if(!C.includes(x)){l.add(`${String(d)} is not supported with the '${x}' row model. It is only valid with: ${C.join(", ")}.`);return}}if(y){const x=this.checkForRequiredDependencies(d,y,e);if(x){l.add(x);return}}if(b){const x=b(e,this.gridOptions,this.beans);if(x){l.add(x);return}}}),l.size>0)for(const d of l)Xy(d)}checkForRequiredDependencies(e,t,i){const s=Object.entries(t).filter(([o,r])=>{const a=i[o];return!r.required.includes(a)});return s.length===0?null:s.map(([o,r])=>`'${String(e)}' requires '${o}' to be one of [${r.required.map(a=>a===null?"null":a===void 0?"undefined":a).join(", ")}]. ${r.reason??""}`).join(`
           `)}checkProperties(e,t,i,n,s){const o=["__ob__","__v_skip","__metadata__"],r=dAe(Object.getOwnPropertyNames(e),[...o,...t,...i],i),a=Object.keys(r);for(const l of a){const c=r[l];let d=`invalid ${n} property '${l}' did you mean any of these: ${c.slice(0,8).join(", ")}.`;i.includes("context")&&(d+=`
If you are trying to annotate ${n} with application data, use the '${n}.context' property instead.`),Xy(d)}if(a.length>0&&s){const l=this.beans.frameworkOverrides.getDocLink(s);Xy(`to see all the valid ${n} properties please check: ${l}`)}}};function dAe(e,t,i){const n={},s=e.filter(o=>!t.some(r=>r===o));if(s.length>0)for(const o of s)n[o]=Sk({inputValue:o,allSuggestions:i}).values;return n}var hAe=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),pAe={moduleName:"Validation",version:ke,beans:[uAe]};function VK(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter)}var gAe=class extends he{constructor(){super(...arguments),this.beanName="filterStage",this.step="filter",this.refreshProps=["excludeChildrenWhenTreeDataFiltering"]}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){const t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const i=(n,s)=>{n.hasChildren()&&e&&!s?n.childrenAfterFilter=n.childrenAfterGroup.filter(o=>{const r=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,a=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return r||a}):n.childrenAfterFilter=n.childrenAfterGroup,VK(n)};if(this.doingTreeDataFiltering()){const n=(o,r)=>{if(o.childrenAfterGroup)for(let a=0;a<o.childrenAfterGroup.length;a++){const l=o.childrenAfterGroup[a],c=r||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?n(o.childrenAfterGroup[a],c):i(l,c)}i(o,r)},s=o=>n(o,!1);t.executeFromRootNode(s)}else{const n=s=>i(s,!1);t.forEachChangedNodeDepthFirst(n,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},fAe=class extends hN{constructor(){super(...arguments),this.iconCreated=!1}wireComp(e,t,i,n,s){this.comp=e;const o=uC(this,this.beans.context,s);this.eButtonShowMainFilter=i,this.eFloatingFilterBody=n,this.setGui(t,o),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(o),this.setupLeft(o),this.setupHover(o),this.setupFocus(o),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(o),this.setupUi(),o.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(o);const r=()=>this.onColDefChanged(o);o.addManagedListeners(this.column,{colDefChanged:r}),o.addManagedEventListeners({filterSwitched:({column:a})=>{a===this.column&&r()}}),o.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return $e(t.gos,{colDef:i,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=wr("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new om(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();Sf(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){const{beans:t}=this;if($i(t)===this.eGui)return;const s=np(t,this.eGui,null,e.shiftKey);if(s){t.headerNavigation?.scrollToColumn(this.column),e.preventDefault(),s.focus();return}const o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let i=this.column;do if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case oe.UP:case oe.DOWN:case oe.LEFT:case oe.RIGHT:if(t)return;Ih(e);case oe.ENTER:t&&Th(this.eGui)&&e.preventDefault();break;case oe.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),n=!!e.relatedTarget&&ah(e.relatedTarget,"ag-floating-filter");if(i&&n&&e.target===this.eGui){const s=this.lastFocusEvent,o=!!(s&&s.key===oe.TAB);if(s&&o){const r=s.shiftKey;Th(this.eGui,r)}}this.focusThis()}setupHover(e){this.beans.colHover?.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new dN(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!Bo(this.gos)}setupUserComp(){if(!this.active)return;const e=this.beans.colFilter?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{beans:{colFilter:t},column:i,gos:n}=this,s=o=>{if(o?.source==="filterDestroyed"&&(!this.isAlive()||!t?.isAlive()))return;const r=this.comp.getFloatingFilterComp();r&&r.then(a=>{if(a){if(n.get("enableFilterHandlers")){const d=o;let p="filter";d?.afterFloatingFilter?p="ui":d?.afterDataChange?p="dataChanged":o?.source==="api"&&(p="api"),this.updateFloatingFilterParams(this.userCompDetails,p);return}const l=t?.getCurrentFloatingFilterParentModel(i),c=o?{...o,columns:o.columns??[],source:o.source==="api"?"api":"columnFilter"}:null;a.onParentModelChanged(l,c)}})};[this.destroySyncListener]=e.addManagedListeners(i,{filterChanged:s}),t?.isFilterActive(i)&&s(null)}setupWidth(e){const t=()=>{const i=`${this.column.getActualWidth()}px`;this.comp.setWidth(i)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const n=this.beans.colFilter,s=this.active?n?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!s?this.updateCompDetails(e,s,i):o.then(r=>{!r||n?.areFilterCompsDifferent(this.userCompDetails??null,s)?this.updateCompDetails(e,s,i):this.updateFloatingFilterParams(s,"colDef")})}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){if(!e)return;let i=e.params;this.comp.getFloatingFilterComp()?.then(n=>{typeof n?.refresh=="function"&&(this.gos.get("enableFilterHandlers")&&(i={...i,model:Un(this.beans.colFilter?.model??{},this.column.getColId()),source:t}),n.refresh(i))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function mAe(e,t){const i=e.colModel.getCol(t);if(!i){oi(12,{colKey:t});return}e.menuSvc?.showColumnMenu({column:i,positionBy:"auto"})}function yAe(e){e.menuSvc?.hidePopupMenu()}var vAe={moduleName:"SharedMenu",version:ke,beans:[WCe],apiFunctions:{showColumnMenu:mAe,hidePopupMenu:yAe}},bAe=class extends bbe{postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getDefaultPopupParent(){return this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i,event:n}=e,s=t.getBoundingClientRect(),o=this.getParentRect();this.setAlignedTo(t,i);let r=!1;const a=()=>{const l=this.keepXYWithinBounds(i,s.top-o.top,0),c=i.clientWidth>0?i.clientWidth:200;r||(i.style.minWidth=`${c}px`,r=!0);const p=o.right-o.left-c;let g;return this.gos.get("enableRtl")?(g=y(),g<0&&(g=m(),this.setAlignedStyles(i,"left")),g>p&&(g=0,this.setAlignedStyles(i,"right"))):(g=m(),g>p&&(g=y(),this.setAlignedStyles(i,"right")),g<0&&(g=0,this.setAlignedStyles(i,"left"))),{x:g,y:l};function m(){return s.right-o.left-2}function y(){return s.left-o.left-c}};this.positionPopup({ePopup:i,keepWithinBounds:!0,updatePosition:a,postProcessCallback:()=>this.callPostProcessPopup(e,"subMenu",i,t,n instanceof MouseEvent?n:void 0)})}callPostProcessPopup(e,t,i,n,s){const o=this.gos.getCallback("postProcessPopup");if(o){const{column:r,rowNode:a}=e;o({column:r,rowNode:a,ePopup:i,type:t,eventSource:n,mouseEvent:s})}}getActivePopups(){return this.popupList.map(e=>e.element)}handleThemeChange(e){if(e.themeChanged){const t=this.beans.environment;for(const i of this.popupList)t.applyThemeClasses(i.wrapper)}}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isStopPropagation(e){return tc(e)}},FD={moduleName:"Popup",version:ke,beans:[bAe]},CAe=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function wAe(e){const t=e.filterManager;return!!t?.isColumnFilterPresent()||!!t?.isAggregateFilterPresent()}function SAe(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function xAe(e,t){const i=e.colModel.getColDefCol(t);if(i)return e.colFilter?.destroyFilter(i,"api")}function MAe(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function DAe(e){return e.filterManager?.getFilterModel()??{}}function AAe(e,t,i){const{gos:n,colModel:s,colFilter:o}=e;i&&!n.get("enableFilterHandlers")&&(Se(288),i=!1);const r=s.getColDefCol(t);return r?o?.getModelForColumn(r,i)??null:null}function RAe(e,t,i){return e.filterManager?.setColumnFilterModel(t,i)??Promise.resolve()}function EAe(e,t){const i=e.colModel.getCol(t);if(!i){oi(12,{colKey:t});return}e.menuSvc?.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"})}function TAe(e){e.menuSvc?.hideFilterMenu()}function IAe(e,t){const i=e.colModel.getCol(t);if(!i){oi(12,{colKey:t});return}return e.colFilter?.getHandler(i,!0)}function kAe(e,t){const{colModel:i,colFilter:n,gos:s}=e;if(!s.get("enableFilterHandlers")){Se(287);return}const{colId:o,action:r}=t;if(o){const a=i.getColById(o);a&&n?.updateModel(a,r)}else n?.updateAllModels(r)}var LAe={filterHandler:()=>({doesFilterPass:()=>!0})},PAe=class extends he{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap={...z6},this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});const e=this.gos,t={...e.get("initialState")?.filter?.filterModel??{}};this.initialModel=t,this.model={...t},e.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e,t="api",i){const{colModel:n,dataTypeSvc:s,filterManager:o}=this.beans;if(s?.isPendingInference){this.modelUpdates.push({model:e,source:t});return}const r=[],a=this.getModel(!0);if(e){const l=new Set(Object.keys(e));this.allColumnFilters.forEach((c,d)=>{const p=e[d];r.push(this.setModelOnFilterWrapper(c,p)),l.delete(d)}),l.forEach(c=>{const d=n.getColDefCol(c)||n.getCol(c);if(!d){Se(62,{colId:c});return}if(!d.isFilterAllowed()){Se(63,{colId:c});return}const p=this.getOrCreateFilterWrapper(d,!0);if(!p){Se(64,{colId:c});return}r.push(this.setModelOnFilterWrapper(p,e[c],!0))})}else this.model={},this.allColumnFilters.forEach(l=>{r.push(this.setModelOnFilterWrapper(l,null))});Nt.all(r).then(()=>{const l=this.getModel(!0),c=[];this.allColumnFilters.forEach((d,p)=>{const g=a?a[p]:null,m=l?l[p]:null;_v(g,m)||c.push(d.column)}),c.length>0?o?.onFilterChanged({columns:c,source:t}):i&&this.updateActive("filterChanged")})}getModel(e){const t={},{allColumnFilters:i,initialModel:n,beans:{colModel:s}}=this;if(i.forEach((o,r)=>{const a=this.getModelFromFilterWrapper(o);Pe(a)&&(t[r]=a)}),!e)for(const o of Object.keys(n)){const r=n[o];Pe(r)&&!i.has(o)&&s.getCol(o)?.isFilterAllowed()&&(t[o]=r)}return t}setState(e,t,i="api"){if(this.state.clear(),t)for(const n of Object.keys(t)){const s=t[n];this.state.set(n,{model:Un(this.model,n),state:s})}this.setModel(e,i,!0)}getState(){const e=this.state;if(!e.size)return;const t={};let i=!1;return e.forEach((n,s)=>{const o=n.state;o!=null&&(i=!0,t[s]=o)}),i?t:void 0}getModelFromFilterWrapper(e){const i=e.column.getColId();if(e.isHandler)return Un(this.model,i);const n=e.filter;return n?typeof n.getModel!="function"?(Se(66),null):n.getModel():Un(this.initialModel,i)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};const{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}updateActiveFilters(){const e=c=>c?c.isFilterActive?c.isFilterActive():(Se(67),!1):!1,{colModel:t,gos:i}=this.beans,n=!!fk(i),s=c=>{if(!c.isPrimary())return!0;const p=!t.isPivotActive();return!c.isValueActive()||!p?!1:t.isPivotMode()?!0:n},o=[],r=[],a=(c,d,p)=>{d&&(s(c)?o.push(p):r.push(p))},l=[];return this.allColumnFilters.forEach(c=>{const d=c.column,p=d.getColId();if(c.isHandler)l.push(Nt.resolve().then(()=>{a(d,this.isHandlerActive(d),{colId:p,isHandler:!0,handler:c.handler,handlerParams:c.handlerParams})}));else{const g=ru(c);g&&l.push(g.then(m=>{a(d,e(m),{colId:p,isHandler:!1,comp:m})}))}}),Nt.all(l).then(()=>{this.activeAggregateFilters=o,this.activeColumnFilters=r})}updateFilterFlagInColumns(e,t){const i=[];return this.allColumnFilters.forEach(n=>{const s=n.column;if(n.isHandler)i.push(Nt.resolve().then(()=>{this.setColFilterActive(s,this.isHandlerActive(s),e,t)}));else{const o=ru(n);o&&i.push(o.then(r=>{this.setColFilterActive(s,r.isFilterActive(),e,t)}))}}),this.beans.groupFilter?.updateFilterFlags(e,t),Nt.all(i)}doFiltersPass(e,t,i){const{data:n,aggData:s}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,r=i?s:n,a=this.model;for(let l=0;l<o.length;l++){const c=o[l],{colId:d,isHandler:p}=c;if(d!==t)if(p){const{handler:g,handlerParams:m}=c;if(!g.doesFilterPass({node:e,data:r,model:Un(a,d),handlerParams:m}))return!1}else{const g=c.comp;if(typeof g.doesFilterPass!="function"){oi(91);continue}if(!g.doesFilterPass({node:e,data:r}))return!1}}return!0}getHandlerParams(e){const t=this.allColumnFilters.get(e.getColId());return t?.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:i}=this.beans,n=()=>{this.isAlive()&&i?.onFilterChanged(e)};t.isRefreshInProgress()?setTimeout(n,0):n()}updateBeforeFilterChanged(e={}){const{column:t,additionalEventAttributes:i}=e,n=t?.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(s=>{const{column:o,isHandler:r}=s;n!==o.getColId()&&(r&&s.handler.onAnyFilterChanged?.(),ru(s,r)?.then(a=>{typeof a?.onAnyFilterChanged=="function"&&a.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){const t=[];this.allColumnFilters.forEach(i=>{const n=i.isHandler;n&&i.handler.onNewRowsLoaded?.();const s=ru(i,n);s&&t.push(s.then(o=>{o.onNewRowsLoaded?.()}))}),Nt.all(t).then(()=>this.updateActive(e,{afterDataChange:!0}))}updateActive(e,t){this.updateFilterFlagInColumns(e,t).then(()=>this.updateActiveFilters())}createGetValue(e,t){const{filterValueSvc:i,colModel:n}=this.beans;return(s,o)=>{const r=o?n.getCol(o):e;return r?i.getValue(r,s,t):void 0}}isFilterActive(e){const t=this.cachedFilter(e);if(t?.isHandler)return this.isHandlerActive(e);const i=t?.filter;return i?i.isFilterActive():Un(this.initialModel,e.getColId())!=null}isHandlerActive(e){const t=Pe(Un(this.model,e.getColId()));if(t)return t;const i=this.beans.groupFilter;return i?.isGroupFilter(e)?i.isFilterActive(e):!1}getOrCreateFilterUi(e){const t=this.getOrCreateFilterWrapper(e,!0);return t?ru(t):null}getFilterUiForDisplay(e){const t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;const i=ru(t);return i?i.then(n=>({comp:n,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){const i=this.getOrCreateFilterWrapper(e,t);return i?.isHandler?i.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let i=this.cachedFilter(e);return!i&&t&&(i=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,i)),i}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>this.beans.dataTypeSvc?.getBaseDataType(e),t)}getDefaultFilterFromDataType(e,t=!1){return Jme(this.gos)?t?"agSetColumnFloatingFilter":"agSetColumnFilter":jbe(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,i,n,s,o){const r=()=>{const c=this.createFilterCompParams(e,s,o),d=n(c,s);return sve(this.beans.userCompFactory,t,d,i)},a=r();return a?{compDetails:a,createFilterUi:c=>(c?r():a).newAgStackInstance()}:null}createFilterInstance(e,t,i,n){const s=this.beans.selectableFilter;s?.isSelectable(t)&&(t=s.getFilterDef(e,t));const{handler:o,handlerParams:r,handlerGenerator:a}=this.createHandler(e,t,i)??{},l=this.createFilterComp(e,t,i,n,!!o,"init");if(!l)return{compDetails:null,createFilterUi:null,handler:o,handlerGenerator:a,handlerParams:r};const{compDetails:c,createFilterUi:d}=l;return this.isGlobalButtons&&(c.params?.buttons?.length||Se(281,{colId:e.getColId()})),{compDetails:c,handler:o,handlerGenerator:a,handlerParams:r,createFilterUi:d}}createBaseFilterParams(e,t){const{filterManager:i,rowModel:n}=this.beans;return $e(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:s=>i?.doesRowPassOtherFilters(e.getColId(),s)??!0,rowModel:n})}createFilterCompParams(e,t,i,n){const s=this.filterChangedCallbackFactory(e),o=this.createBaseFilterParams(e,n);if(o.filterChangedCallback=s,o.filterModifiedCallback=n?()=>{}:r=>this.filterModified(e,r),t){const r=o,a=e.getColId(),l=Un(this.model,a);r.model=l,r.state=this.state.get(a)??{model:l},r.onModelChange=(c,d)=>{this.updateStoredModel(a,c),this.refreshHandlerAndUi(e,c,"ui",!1,d).then(()=>{s({...d,source:"columnFilter"})})},r.onStateChange=c=>{this.updateState(e,c),this.updateOrRefreshFilterUi(e)},r.onAction=(c,d,p)=>{this.updateModel(e,c,d),this.dispatchLocalEvent({type:"filterAction",column:e,action:c,event:p})},r.getHandler=()=>this.getHandler(e,!0),r.onUiChange=c=>this.filterUiChanged(e,c),r.source=i}return o}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,i){const n=t(),s={created:!0,create:t,filterParams:e.params,compDetails:e,promise:n};return n.then(i),s}createFilterWrapper(e){const{compDetails:t,handler:i,handlerGenerator:n,handlerParams:s,createFilterUi:o}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),a=>a),r=e.getColId();if(i)return delete this.initialModel[r],i.init?.({...s,source:"init",model:Un(this.model,r)}),{column:e,isHandler:!0,handler:i,handlerGenerator:n,handlerParams:s,filterUi:this.createFilterUiForHandler(t,o)};if(o){const a={column:e,filterUi:null,isHandler:!1};return a.filterUi=this.createFilterUiLegacy(t,o,l=>{a.filter=l??void 0}),a}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t,i){const{gos:n,frameworkOverrides:s,registry:o}=this.beans;let r;const a=m=>{const y=m.filter;if(m6(y)){const b=y.handler;return b||(r=y.doesFilterPass,r?()=>({doesFilterPass:r}):void 0)}return typeof y=="string"?y:void 0},l=n.get("enableFilterHandlers"),c=l?a(t):void 0,d=m=>()=>this.createBean(o.createDynamicBean(m,!0));let p,g;if(typeof c=="string"){const m=n.get("filterHandlers")?.[c];m!=null?p=m:kbe.has(c)&&(p=d(c),g=c)}else p=c;if(!p){let m;const{compName:y,jsComp:b,fwComp:C}=b6(s,t);y?m=y:b==null&&C==null&&t.filter===!0&&(m=i),g=this.handlerMap[m],g&&(p=d(g))}return p?{filterHandler:p,handlerNameOrCallback:r??g}:l?(en(n)&&Se(277,{colId:e.getColId()}),LAe):void 0}createHandler(e,t,i){const n=this.createHandlerFunc(e,t,i);if(!n)return;const s=vT(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:o,filterHandler:r}=n,{handler:a,handlerParams:l}=this.createHandlerFromFunc(e,r,s);return{handler:a,handlerParams:l,handlerGenerator:o??r}}createHandlerFromFunc(e,t,i){const n=e.getColDef(),s=t($e(this.gos,{column:e,colDef:n})),o=this.createHandlerParams(e,i);return{handler:s,handlerParams:o}}createHandlerParams(e,t){const i=e.getColDef(),n=e.getColId(),s=this.filterChangedCallbackFactory(e);return $e(this.gos,{colDef:i,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:o=>this.beans.filterManager?.doesRowPassOtherFilters(n,o)??!0,onModelChange:(o,r)=>{this.updateStoredModel(n,o),this.refreshHandlerAndUi(e,o,"handler",!1,r).then(()=>{s({...r,source:"columnFilter"})})},filterParams:t})}onColumnsChanged(){const e=[],{colModel:t,filterManager:i,groupFilter:n}=this.beans;this.allColumnFilters.forEach((o,r)=>{let a;o.column.isPrimary()?a=t.getColDefCol(r):a=t.getCol(r),!(a&&a===o.column)&&(e.push(o.column),this.disposeFilterWrapper(o,"columnChanged"),this.disposeColumnListener(r))});const s=n&&e.every(o=>n.isGroupFilter(o));e.length>0&&!s&&i?.onFilterChanged({columns:e,source:"api"})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const i=this.beans.groupFilter;return i?.isGroupFilter(e)?i.isFilterAllowed(e):!0}getFloatingFilterCompDetails(e,t){const{userCompFactory:i,frameworkOverrides:n,selectableFilter:s}=this.beans,o=g=>{const m=this.getOrCreateFilterUi(e);m?.then(y=>{g($v(y))})},r=e.getColDef(),a=s?.isSelectable(r)?s.getFilterDef(e,r):r,l=Kbe(n,a,()=>this.getDefaultFloatingFilter(e))??"agReadOnlyFloatingFilter",c=this.gos.get("enableFilterHandlers"),d=vT(i,a,this.createFilterCompParams(e,c,"init",!0)),p=$e(this.gos,{column:e,filterParams:d,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:o,showParentFilter:t});if(c){const g=p,m=e.getColId(),y=this.filterChangedCallbackFactory(e);g.onUiChange=b=>this.floatingFilterUiChanged(e,b),g.model=Un(this.model,m),g.onModelChange=(b,C)=>{this.updateStoredModel(m,b),this.refreshHandlerAndUi(e,b,"floating",!0,C).then(()=>{y({...C,source:"columnFilter"})})},g.getHandler=()=>this.getHandler(e,!0),g.source="init"}return cve(i,r,p,l)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,i,n){const s="paramsUpdated";if(e.isHandler){const o=t.getColId();delete this.initialModel[o],this.state.delete(o);const r=e.filterUi,a=this.createFilterUiForHandler(i,n);e.filterUi=a;const l=this.eventSvc;r?.created?r.promise.then(c=>{this.destroyBean(c),l.dispatchEvent({type:"filterDestroyed",source:s,column:t})}):l.dispatchEvent({type:"filterHandlerDestroyed",source:s,column:t})}else this.destroyFilter(t,s)}destroyFilter(e,t="api"){const i=e.getColId(),n=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialModel[i],n&&this.disposeFilterWrapper(n,t).then(s=>{s&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[e],source:"api"})})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let i=!1;const{column:n,isHandler:s,filterUi:o}=e,r=n.getColId();s&&(i=this.isHandlerActive(n),this.destroyBean(e.handler),delete this.model[r],this.state.delete(r));const a=()=>{this.setColFilterActive(n,!1,"filterDestroyed"),this.allColumnFilters.delete(r),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:n})};if(o){if(o.created)return o.promise.then(l=>(i=s?i:!!l?.isFilterActive(),this.destroyBean(l),a(),i));a()}return Nt.resolve(i)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:t?.source??"columnFilter"})}}filterParamsChanged(e,t="api"){const i=this.allColumnFilters.get(e);if(!i)return;const n=this.beans,s=i.column,o=s.getColDef(),r=s.isFilterAllowed(),a=this.getDefaultFilter(s),l=n.selectableFilter,c=l?.isSelectable(o)?l.getFilterDef(s,o):o,d=r?this.createHandlerFunc(s,c,this.getDefaultFilter(s)):void 0,p=!!d,g=i.isHandler;if(g!=p){this.destroyFilter(s,"paramsUpdated");return}const{compDetails:m,createFilterUi:y}=(r?this.createFilterComp(s,c,a,C=>C,p,"colDef"):null)??{compDetails:null,createFilterUi:null},b=m?.params??vT(n.userCompFactory,c,this.createFilterCompParams(s,p,"colDef"));if(g){const C=d?.handlerNameOrCallback??d?.filterHandler,w=Un(this.model,e);if(i.handlerGenerator!=C){const x=i.handler,{handler:M,handlerParams:E}=this.createHandlerFromFunc(s,d.filterHandler,b);i.handler=M,i.handlerParams=E,i.handlerGenerator=C,delete this.model[e],M.init?.({...E,source:"init",model:null}),this.destroyBean(x),w!=null&&this.beans.filterManager?.onFilterChanged({columns:[s],source:t})}else{const x=this.createHandlerParams(s,m?.params);i.handlerParams=x,i.handler.refresh?.({...x,source:"colDef",model:w})}}if(this.areFilterCompsDifferent(i.filterUi?.compDetails??null,m)||!i.filterUi||!m){this.destroyFilterUi(i,s,m,y);return}i.filterUi.filterParams=b,ru(i,g)?.then(C=>{(C?.refresh?C.refresh(b):!0)===!1?this.destroyFilterUi(i,s,m,y):this.dispatchLocalEvent({type:"filterParamsChanged",column:s,params:b})})}refreshHandlerAndUi(e,t,i,n,s){const o=this.cachedFilter(e);if(!o)return n&&this.getOrCreateFilterWrapper(e,!0),Nt.resolve();if(!o.isHandler)return Nt.resolve();const{filterUi:r,handler:a,handlerParams:l}=o;return Lbe(()=>{if(r){const{created:c,filterParams:d}=r;if(c)return r.promise.then(p=>p?{filter:p,filterParams:d}:void 0);r.refreshed=!0}return Nt.resolve(void 0)},a,l,t,this.state.get(e.getColId())??{model:t},i,s)}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:n}=t;return!(i===n||i?.render&&n?.render&&i.render===n.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);const i=this.getOrCreateFilterUi(t);return i?new Promise(n=>{i.then(s=>{n($v(s))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:i})=>{this.setModelForColumn(e,t).then(()=>i())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){const{state:n,model:s}=this,o=e.getColId(),r=n.get(o);return r?r.model??null:Un(s,o)}const i=this.cachedFilter(e);return i?this.getModelFromFilterWrapper(i):null}setModelForColumn(e,t){if(this.beans.dataTypeSvc?.isPendingInference){let i=()=>{};const n=new Promise(s=>{i=s});return this.columnModelUpdates.push({key:e,model:t,resolve:i}),n}return new Promise(i=>{this.setModelForColumnLegacy(e,t).then(n=>i(n))})}getStateForColumn(e){return this.state.get(e)??{model:Un(this.model,e)}}setModelForColumnLegacy(e,t){const i=this.beans.colModel.getColDefCol(e),n=i?this.getOrCreateFilterWrapper(i,!0):null;return n?this.setModelOnFilterWrapper(n,t):Nt.resolve()}setColDefPropsForDataType(e,t,i){const n=e.filter,s=n===!0?this.getDefaultFilterFromDataType(()=>t.baseDataType):n;if(typeof s!="string")return;let o,r;const a=this.beans,{filterParams:l,filterValueGetter:c}=e;s==="agMultiColumnFilter"?{filterParams:o,filterValueGetter:r}=a.multiFilter?.getParamsForDataType(l,c,t,i)??{}:{filterParams:o,filterValueGetter:r}=Vbe(s,l,c,t,i,a,this.getLocaleTextFunc()),e.filterParams=o,r&&(e.filterValueGetter=r)}setColFilterActive(e,t,i,n){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",i)),e.dispatchColEvent("filterChanged",i,n)}setModelOnFilterWrapper(e,t,i){return new Nt(n=>{if(e.isHandler){const o=e.column,r=o.getColId(),a=this.model[r];if(this.updateStoredModel(r,t),i&&t===a){n();return}this.refreshHandlerAndUi(o,t,"api").then(()=>n());return}const s=ru(e);if(s){s.then(o=>{if(typeof o?.setModel!="function"){Se(65),n();return}(o.setModel(t)||Nt.resolve()).then(()=>n())});return}n()})}updateStoredModel(e,t){Pe(t)?this.model[e]=t:delete this.model[e];const i=this.state.get(e),n={model:t,state:i?.state};this.state.set(e,n)}filterModified(e,t){this.getOrCreateFilterUi(e)?.then(i=>{this.eventSvc.dispatchEvent({type:"filterModified",column:e,filterInstance:i,...t})})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"filterUiChanged",column:e,...t})}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"floatingFilterUiChanged",column:e,...t})}updateModel(e,t,i){const n=e.getColId(),s=this.cachedFilter(e),o=()=>s?.filterUi;Rz(t,o,()=>Un(this.model,n),()=>this.state.get(n),r=>this.updateState(e,r),r=>o()?.filterParams?.onModelChange(r,i),s?.isHandler?s.handler.processModelToApply?.bind(s.handler):void 0)}updateAllModels(e,t){const i=[];this.allColumnFilters.forEach((n,s)=>{const o=this.beans.colModel.getColDefCol(s);o&&Rz(e,()=>n.filterUi,()=>Un(this.model,s),()=>this.state.get(s),r=>this.updateState(o,r),r=>{this.updateStoredModel(s,r),this.dispatchLocalEvent({type:"filterAction",column:o,action:e}),i.push(this.refreshHandlerAndUi(o,r,"ui"))},n?.isHandler?n.handler.processModelToApply?.bind(n.handler):void 0)}),i.length&&Nt.all(i).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){const t=e.getColId();j6(()=>this.cachedFilter(e)?.filterUi,()=>Un(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){const{state:e,model:t,activeFilterComps:i}=this;for(const s of i)if(s.source==="COLUMN_MENU")return!1;let n=!1;for(const s of e.keys()){const o=e.get(s);if(o.valid===!1)return!1;(o.model??null)!==Un(t,s)&&(n=!0)}return n}hasUnappliedModel(e){const{model:t,state:i}=this;return(i.get(e)?.model??null)!==Un(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if(t==="newFiltersToolPanel")return!0;const i=this.beans.filterPanelSvc;return i?.isActive?!!i.getState(e.getColId()):!1}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function NAe(e){return!!e.filterManager?.isAnyFilterPresent()}function FAe(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var OAe=class extends he{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:n})=>this.onAdvFilterEnabledChanged(n),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:i}=this;this.alwaysPassFilter=i.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=i.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterState(e,t,i="api"){this.isAdvFilterEnabled()||this.colFilter?.setState(e,t,i)}setFilterModel(e,t="api",i){if(this.isAdvFilterEnabled()){i||this.warnAdvFilters();return}this.colFilter?.setModel(e,t)}getFilterModel(){return this.colFilter?.getModel()??{}}getFilterState(){return this.colFilter?.getState()}isColumnFilterPresent(){return!!this.colFilter?.isFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){e?this.colFilter?.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){fk(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:i,columns:n=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):Nt.resolve()).then(()=>{const s={source:t,type:"filterChanged",columns:n};i&&Ys(s,i),this.eventSvc.dispatchEvent(s),this.colFilter?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!fk(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){const{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){const{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.isFilterAllowed(e)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){if(this.isAdvFilterEnabled()){if(this.beans.dataTypeSvc?.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getFilterInstance(e)??Promise.resolve(void 0)}warnAdvFilters(){Se(68)}setupAdvFilterHeaderComp(e){this.advancedFilter?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){for(const e of this.advFilterModelUpdateQueue)this.setAdvFilterModel(e);this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setModelForColumn(e,t)??Promise.resolve()}},BAe=class extends he{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(e,t,i,n){e&&!e.isColumn||this.showPopup(e,s=>{this.popupSvc?.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:s})},i,t.target,Bo(this.gos),n)}showMenuAfterButtonClick(e,t,i,n){if(e&&!e.isColumn)return;let s=-1,o="left";const r=Bo(this.gos);!r&&this.gos.get("enableRtl")&&(s=1,o="right");const a=r?void 0:4*s,l=r?void 0:4;this.showPopup(e,c=>{this.popupSvc?.positionPopupByComponent({type:i,eventSource:t,ePopup:c,nudgeX:a,nudgeY:l,alignSide:o,keepWithinBounds:!0,position:"under",column:e})},i,t,r,n)}showPopup(e,t,i,n,s,o){const r=e?this.createBean(new Gbe(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!r?.hasFilter()||!e){oi(57);return}const a=Zs({tag:"div",cls:`ag-menu${s?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(a,{keydown:b=>this.trapFocusWithin(b,a)}),a.appendChild(r?.getGui());let l;const c=()=>r?.afterGuiDetached(),d=eye(this.gos)?n??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,p=b=>{Fz(e,!1,"contextMenu");const C=b instanceof KeyboardEvent;this.tabListener&&(this.tabListener=this.tabListener()),C&&n&&Dc(n)&&D6(n)?.focus({preventScroll:!0}),c(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e),o?.()},g=this.getLocaleTextFunc(),m=s&&i!=="columnFilter"?g("ariaLabelColumnMenu","Column Menu"):g("ariaLabelColumnFilter","Column Filter"),y=this.popupSvc?.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:p,positionCallback:()=>t(a),anchorToElement:d,ariaLabel:m});y&&(this.hidePopup=l=y.hideFunc),r.afterInit().then(()=>{t(a),r.afterGuiAttached({container:i,hidePopup:l})}),Fz(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==oe.TAB||e.defaultPrevented||np(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),Th(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},GAe=class extends he{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,i){if(!t)return;const n=e.getColDef(),{selectableFilter:s,valueSvc:o}=this.beans,r=i??s?.getFilterValueGetter(e.getColId())??n.filterValueGetter;return r?this.executeFilterValueGetter(r,t.data,e,t,n):o.getValue(e,t)}executeFilterValueGetter(e,t,i,n,s){const{expressionSvc:o,valueSvc:r}=this.beans,a=$e(this.gos,{data:t,node:n,column:i,colDef:s,getValue:r.getValueCallback.bind(r,n)});return typeof e=="function"?e(a):o?.evaluate(e,a)}},_Ae={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},VAe=class extends qi{constructor(){super(_Ae,[TD]),this.eFloatingFilterText=je}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){const i=e,n=i.getHandler();if(n.getModelAsString){const s=n.getModelAsString(i.model);this.eFloatingFilterText.setValue(s)}}}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}refresh(e){this.init(e)}},vN=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){const i=e.filterOptions??t;this.filterOptions!==i&&(this.filterOptions=i,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){const{filterOptions:e}=this;if(e)for(const t of e){if(typeof t=="string")continue;const i=[["displayKey"],["displayName"],["predicate","test"]],n=s=>s.some(o=>t[o]!=null)?!0:(Se(72,{keys:s}),!1);if(!i.every(n)){this.filterOptions=e.filter(s=>s===t)||[];continue}this.customFilterOptions[t.displayKey]=t}}getDefaultItem(e){const{filterOptions:t}=this;if(e)return e;if(t.length>=1){const i=t[0];if(typeof i=="string")return i;if(i.displayKey)return i.displayKey;Se(73)}else Se(74)}getCustomOption(e){return this.customFilterOptions[e]}};function iv(e,t,i){return i==null?e.splice(t):e.splice(t,i)}function L0(e){return e==null||typeof e=="string"&&e.trim().length===0}function zAe(e){return e==="AND"||e==="OR"?e:"AND"}function HAe(e,t,i){if(e==null)return;const{predicate:n}=e;if(n!=null&&!t.some(s=>s==null))return n(t,i)}function jAe(e,t){let i=e.length;return i>t&&(e.splice(t),Se(78),i=t),i}function Zv(e,t){const i=t.getCustomOption(e);if(i){const{numberOfInputs:s}=i;return s??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}var bN=class extends Ybe{constructor(e,t,i){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=i,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);const t=new vN;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){this.setNumConditions(e),this.defaultJoinOperator=zAe(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions();const t=this.getGui();this.isReadOnly()?t.setAttribute("tabindex","-1"):t.removeAttribute("tabindex")}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{const n=i===0?e:this.optionsFactory.defaultOption;t.setValue(n,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOrs:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areNonNullModelsEqual(e,t){const i=!e.operator,n=!t.operator;if(!i&&n||i&&!n)return!1;let o;if(i){const r=e,a=t;o=this.areSimpleModelsEqual(r,a)}else{const r=e,a=t;o=r.operator===a.operator&&Ju(r.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return o}setModelIntoUi(e,t){if(e==null)return this.resetUiToDefaults(t),Nt.resolve();if(e.operator){const n=e;let s=n.conditions;s==null&&(s=[],Se(77));const o=jAe(s,this.maxNumConditions),r=this.getNumConditions();if(o<r)this.removeConditionsAndOperators(o);else if(o>r)for(let l=r;l<o;l++)this.createJoinOperatorPanel(),this.createOption();const a=n.operator==="OR";this.eJoinAnds.forEach(l=>l.setValue(!a,!0)),this.eJoinOrs.forEach(l=>l.setValue(a,!0)),s.forEach((l,c)=>{this.eTypes[c].setValue(l.type,!0),this.setConditionIntoUi(l,c)})}else{const n=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(n.type,!0),this.setConditionIntoUi(n,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),Nt.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(Se(79),t=1),this.maxNumConditions=t;let i=e.numAlwaysVisibleConditions??1;i<1&&(Se(80),i=1),i>t&&(Se(81),i=t),this.numAlwaysVisibleConditions=i}createOption(){const e=this.getGui(),t=this.createManagedBean(new eN);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());const i=this.createEValue();this.eConditionBodies.push(i),e.appendChild(i),this.putOptionsIntoDropdown(t),this.resetType(t);const n=this.getNumConditions()-1;this.forEachPositionInput(n,s=>this.resetInput(s)),this.addChangedListeners(t,n)}createJoinOperatorPanel(){const e=Zs({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);const t=this.createJoinOperator(this.eJoinAnds,e,"and"),i=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);const n=this.eJoinPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(t,n,s),this.resetJoinOperatorOr(i,n,s),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const n=this.createManagedBean(new Mve);e.push(n);const s="ag-filter-condition-operator";return n.addCss(s),n.addCss(`${s}-${i}`),t.appendChild(n.getGui()),n}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;for(const i of t)e.addOption(i);e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const i=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<i){this.removeConditionsAndOperators(i+1);const n=e+1,s=i-n;s>0&&this.removeConditionsAndOperators(n,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((n,s)=>{const o=this.isConditionDisabled(s,e);n.setDisabled(o||this.filterListOptions.length<=1),s===1&&(zv(this.eJoinPanels[0],o),this.eJoinAnds[0].setDisabled(o),this.eJoinOrs[0].setDisabled(o))}),this.eConditionBodies.forEach((n,s)=>{_i(n,this.isConditionBodyVisible(s))});const i=(t??this.getJoinOperator())==="OR";for(const n of this.eJoinAnds)n.setValue(!i,!0);for(const n of this.eJoinOrs)n.setValue(i,!0);this.forEachInput((n,s,o,r)=>{this.setElementDisplayed(n,s<r),this.setElementDisabled(n,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:i,eConditionBodies:n,eJoinPanels:s,eJoinAnds:o,eJoinOrs:r}=this;this.removeComponents(i,e,t),this.removeElements(n,e,t),this.removeEValues(e,t);const a=Math.max(e-1,0);this.removeElements(s,a,t),this.removeComponents(o,a,t),this.removeComponents(r,a,t)}removeElements(e,t,i){const n=iv(e,t,i);for(const s of n)Lu(s)}removeComponents(e,t,i){const n=iv(e,t,i);for(const s of n)Lu(s.getGui()),this.destroyBean(s)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus){let t;if(!this.isReadOnly()){const i=this.getInputs(0)[0];i instanceof Kd&&this.isConditionBodyVisible(0)?t=i.getInputElement():t=this.eTypes[0]?.getFocusableElement()}(t??this.getGui()).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();const e=this.params;if(this.beans.colFilter?.shouldKeepStateOnDetach(e.column))return;e.onStateChange({model:e.model});let t=-1,i=-1,n=!1;const s=this.getJoinOperator();for(let r=this.getNumConditions()-1;r>=0;r--)if(this.isConditionUiComplete(r))t===-1&&(t=r,i=r);else{const a=r>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(r-1),l=r<t;(a||l)&&(this.removeConditionsAndOperators(r,1),n=!0,l&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,s),n&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getModelAsString(e){return this.params.getHandler()?.getModelAsString?.(e)??""}getPlaceholderText(e,t){let i=this.translate(e);if(typeof this.filterPlaceholder=="function"){const n=this.eTypes[t].getValue(),s=this.translate(n);i=this.filterPlaceholder({filterOptionKey:n,filterOption:s,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput((t,i,n,s)=>{if(!(t instanceof Kd))return;const o=i===0&&s>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",r=i===0&&s>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,n)),t.setInputAriaLabel(r)})}setElementValue(e,t,i){e instanceof Kd&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){mz(e)&&_i(e.getGui(),t)}setElementDisabled(e,t){mz(e)&&zv(e.getGui(),t)}attachElementOnChange(e,t){e instanceof Kd&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const n=Zv(t,this.optionsFactory),s=this.getInputs(e);for(let o=0;o<s.length;o++){const r=s[o];r!=null&&i(r,o,e,n)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return Zv(t,this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinAnds.forEach((t,i)=>this.resetJoinOperatorAnd(t,i,this.joinOperatorId+i)),this.eJoinOrs.forEach((t,i)=>this.resetJoinOperatorOr(t,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){const i=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),i)}resetJoinOperator(e,t,i,n,s){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(n),t)}updateJoinOperatorsDisabled(){const e=(t,i)=>this.updateJoinOperatorDisabled(t,i);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((n,s,o)=>{o===t&&this.setElementValue(n,i[s]!=null?i[s]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,n)=>{this.setElementValue(t,i===0&&n===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,i=>{this.attachElementOnChange(i,this.listener)}))}hasInvalidInputs(){return!1}isReadOnly(){return!!this.params.readOnly}},zK=class{constructor(e,t,i,n,s,o){this.alive=!0,this.context=e,this.eParent=s;const r=ove(t,i,n);r&&r.newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}if(this.dateComp=a,!a)return;s.appendChild(a.getGui()),a?.afterGuiAttached?.();const{tempValue:l,disabled:c}=this;l&&a.setDate(l),c!=null&&a.setDisabled?.(c),o?.(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){const t=this.dateComp;t?t.setDisabled?.(e):this.disabled=e}setDisplayed(e){_i(this.eParent,e)}setInputPlaceholder(e){this.dateComp?.setInputPlaceholder?.(e)}setInputAriaLabel(e){this.dateComp?.setInputAriaLabel?.(e)}afterGuiAttached(e){this.dateComp?.afterGuiAttached?.(e)}updateParams(e){this.dateComp?.refresh?.(e)}},CN=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function HK(e,t){const{dateFrom:i,dateTo:n,type:s}=e||{};return[i&&Co(i,void 0,!0)||null,n&&Co(n,void 0,!0)||null].slice(0,Zv(s,t))}var mH=1e3,yH=1/0,WAe=class extends bN{constructor(){super("dateFilter",HK,CN),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=mH,this.maxValidYear=yH,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);const t=(l,c)=>{const d=e[l];if(d!=null)if(isNaN(d))Se(82,{param:l});else return d==null?c:Number(d);return c},i=t("minValidYear",mH),n=t("maxValidYear",yH);this.minValidYear=i,this.maxValidYear=n,i>n&&Se(83);const{minValidDate:s,maxValidDate:o}=e,r=s instanceof Date?s:Co(s);this.minValidDate=r;const a=o instanceof Date?o:Co(o);this.maxValidDate=a,r&&a&&r>a&&Se(84)}createDateCompWrapper(e){const{beans:{userCompFactory:t,context:i,gos:n},params:s}=this,o=new zK(i,t,s.colDef,$e(n,{onDateChanged:()=>this.onUiChanged(),filterParams:s,location:"filter"}),e);return this.addDestroyFunc(()=>o.destroy()),o}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){const e=Zs({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,n){const s=Zs({tag:"div",cls:`ag-filter-${n} ag-filter-date-${n}`});t.push(s),e.appendChild(s),i.push(this.createDateCompWrapper(s))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),iv(this.eConditionPanelsFrom,e,t),iv(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){const n=iv(e,t,i);for(const s of n)s.destroy()}isValidDateValue(e){if(e===null)return!1;const{minValidDate:t,maxValidDate:i,minValidYear:n,maxValidYear:s}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<n)return!1;if(i){if(e>i)return!1}else if(e.getUTCFullYear()>s)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,n,s,o)=>{s!==e||!t||n>=o||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),i={},n=this.getValues(e),s=this.params.useIsoSeparator?"T":" ";return n.length>0&&(i.dateFrom=zo(n[0],!0,s)),n.length>1&&(i.dateTo=zo(n[1],!0,s)),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...i}}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(n=>{n.setInputPlaceholder(t),n.setInputAriaLabel(i)})}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,n,s,o)=>{n<o&&t.push(i.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}},jK=class extends he{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){const t=e.filterParams,i=new vN;this.optionsFactory=i,i.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(i,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if(e.source==="colDef"){const t=e.filterParams,i=this.optionsFactory;i.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:i,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){const t=e.model;if(t==null)return!0;const{operator:i}=t,n=[];if(i){const r=t;n.push(...r.conditions??[])}else n.push(t);const s=i&&i==="OR"?"some":"every",o=this.params.getValue(e.node);return n[s](r=>this.individualConditionPasses(e,r,o))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??""}validateModel(e){const{model:t,filterParams:{filterOptions:i,maxNumConditions:n}}=e;if(t==null)return;let o=$6(t)?t.conditions:[t];const r=i?.map(d=>typeof d=="string"?d:d.displayKey)??this.defaultOptions;if(!(!o||o.every(d=>r.find(p=>p===d.type)!==void 0))){this.params={...e,model:null},e.onModelChange(null);return}let l=!1;const c=this.filterType;if((o&&!o.every(d=>d.filterType===c)||t.filterType!==c)&&(o=o.map(d=>({...d,filterType:c})),l=!0),typeof n=="number"&&o&&o.length>n&&(o=o.slice(0,n),l=!0),l){const d=o.length>1?{...t,filterType:c,conditions:o}:{...o[0],filterType:c};this.params={...e,model:d},e.onModelChange(d)}}individualConditionPasses(e,t,i){const n=this.optionsFactory,s=this.mapValuesFromModel(t,n),o=n.getCustomOption(t.type),r=HAe(o,s,i);return r??(i==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,i,t,e))}},WK=class extends jK{evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:i,includeBlanksInGreaterThan:n,includeBlanksInLessThan:s,includeBlanksInRange:o}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(i)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(n)return!0;break;case"lessThan":case"lessThanOrEqual":if(s)return!0;break;case"inRange":if(o)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const n=i.type;if(!this.isValid(t))return n==="notEqual"||n==="notBlank";const s=this.comparator(),o=e[0]!=null?s(e[0],t):0;switch(n){case"equals":return o===0;case"notEqual":return o!==0;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{const r=s(e[1],t);return this.params.filterParams.inRangeInclusive?o>=0&&r<=0:o>0&&r<0}case"blank":return L0(t);case"notBlank":return!L0(t);default:return Se(76,{filterModelType:n}),!0}}},UK={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},UAe={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},wN=class extends he{constructor(e,t,i){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=i}getModelAsString(e,t){const i=this.getLocaleTextFunc(),n=t==="filterToolPanel";if(!e)return n?gu(this,"filterSummaryInactive"):null;if(e.operator!=null){const o=e,a=(o.conditions??[]).map(c=>this.getModelAsString(c,t)),l=o.operator==="AND"?"andCondition":"orCondition";return a.join(` ${gu(this,l)} `)}else{if(e.type==="blank"||e.type==="notBlank")return n?gu(this,e.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):i(e.type,e.type);{const o=e,r=this.optionsFactory.getCustomOption(o.type),{displayKey:a,displayName:l,numberOfInputs:c}=r||{};return a&&l&&c===0?i(a,l):this.conditionToString(o,n,o.type==="inRange"||c===2,a,l)}}}updateParams(e){const{optionsFactory:t,filterParams:i}=e;this.optionsFactory=t,this.filterParams=i}conditionForToolPanel(e,t,i,n,s,o){let r;const a=this.getTypeKey(e);return a&&(r=gu(this,a)),s&&o&&(r=this.getLocaleTextFunc()(s,o)),r!=null?t?`${r} ${gu(this,"filterSummaryInRangeValues",[i(),n()])}`:`${r} ${i()}`:null}getTypeKey(e){const t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}},$K=class extends wN{constructor(e,t){super(e,t,i=>{const{dataTypeSvc:n,valueSvc:s}=this.beans,o=t.column,r=n?.getDateFormatterFunction(o),a=r?r(i??void 0):i;return s.formatValue(o,null,a)}),this.filterTypeKeys=UK}conditionToString(e,t,i,n,s){const{type:o}=e,r=Co(e.dateFrom),a=Co(e.dateTo),l=this.filterParams.inRangeFloatingFilterDateFormat,c=t?this.formatValue.bind(this):g=>wk(g,l),d=()=>r!==null?c(r):"null",p=()=>a!==null?c(a):"null";if(t){const g=this.conditionForToolPanel(o,i,d,p,n,s);if(g!=null)return g}return i?`${d()}-${p()}`:r!=null?c(r):`${o}`}};function $Ae(e,t){const i=t;return i<e?-1:i>e?1:0}var YAe=class extends WK{constructor(){super(HK,CN),this.filterType="date",this.FilterModelFormatterClass=$K}comparator(){return this.params.filterParams.comparator??$Ae}isValid(e){const t=this.params.filterParams.isValidDate;return!t||t(e)}},YK=class extends qi{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}const t=e.operator;let i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const i=e;return this.isTypeEditable(i.type)}init(e){this.params=e;const t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){const i=e;this.onModelUpdated(i.model)}}setParams(e){const t=new vN;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const i=this.optionsFactory.defaultOption;t||(this.lastType=i),this.readOnly=!!e.filterParams.readOnly;const n=this.isTypeEditable(i);this.setEditable(n)}refresh(e){this.params=e;const t=e,i=this.reactive;if((!i||t.source==="colDef")&&this.updateParams(e),i){const{source:n,model:s}=t;if(n==="dataChanged"||n==="ui")return;this.onModelUpdated(s)}}updateParams(e){const t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){const t=this.optionsFactory.getCustomOption(e)?.numberOfInputs;return t==null||t==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},KAe={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},qAe=class extends YK{constructor(){super(KAe,[TD]),this.eReadOnlyText=je,this.eDateWrapper=je,this.FilterModelFormatterClass=$K,this.filterType="date",this.defaultOptions=CN}setParams(e){super.setParams(e),this.createDateComponent();const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const i=e?Co(e.dateFrom):null;this.dateComp.setDate(i),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){_i(this.eDateWrapper,e),_i(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){const e=this.dateComp.getDate();if(this.reactive){const t=this.params;t.onUiChange();const i=t.model,n=zo(e),s=n==null?null:{...i??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption},dateFrom:n};t.onModelChange(s,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t?.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){const{filterParams:e}=this.params,t=oN(e,this.defaultDebounceMs);return $e(this.gos,{onDateChanged:ps(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:i,params:n}=this;this.dateComp=new zK(e,t,n.column.getColDef(),this.getDateComponentParams(),i,s=>{s.setInputAriaLabel(this.getAriaLabel(n))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},ZAe={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},XAe=class extends qi{constructor(){super(ZAe,[TD]),this.eDateInput=je,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&ed();const{minValidYear:n,maxValidYear:s,minValidDate:o,maxValidDate:r,buttons:a,includeTime:l,colDef:c}=e.filterParams||{},d=this.beans.dataTypeSvc,p=l??d?.getDateIncludesTimeFlag?.(c.cellDataType)??!1;if(i?p?(t.type="datetime-local",t.step="1"):t.type="date":t.type="text",o&&n&&Se(85),r&&s&&Se(86),o&&r){const[g,m]=[o,r].map(y=>y instanceof Date?y:Co(y));g&&m&&g.getTime()>m.getTime()&&Se(87)}o?o instanceof Date?t.min=wk(o):t.min=o:n&&(t.min=`${n}-01-01`),r?r instanceof Date?t.max=wk(r):t.max=r:s&&(t.max=`${s}-12-31`),this.isApply=e.location==="floatingFilter"&&!!a?.includes("apply")}refresh(e){this.params=e,this.setParams(e)}getDate(){return Co(this.eDateInput.getValue())}setDate(e){const t=this.params.filterParams.colDef.cellDataType,i=this.beans.dataTypeSvc?.getDateIncludesTimeFlag(t)??!1;this.eDateInput.setValue(zo(e,i))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e?.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){return e?.filterParams?.browserDatePicker??!0}},SN=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function _k(e){const{allowedCharPattern:t}=e??{};return t??null}function Vk(e){return e==null||isNaN(e)?null:e}function KK(e,t){const{filter:i,filterTo:n,type:s}=e||{};return[Vk(i),Vk(n)].slice(0,Zv(s,t))}var QAe=class extends bN{constructor(){super("numberFilter",KK,SN),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}setElementValue(e,t,i){const{numberFormatter:n}=this.params,s=!i&&n?n(t??null):t;super.setElementValue(e,s)}createEValue(){const e=_k(this.params),t=Zs({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,n){const s=this.createManagedBean(n?new sp({allowedCharPattern:n}):new JP);s.addCss(`ag-filter-${i}`),s.addCss("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeEValues(e,t){const i=n=>this.removeComponents(n,e,t);i(this.eValuesFrom),i(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(i,n,s,o)=>{n<o&&t.push(Vk(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}stringToFloat(e){if(typeof e=="number")return e;let t=Ql(e);t!=null&&t.trim()===""&&(t=null);const i=this.params.numberParser;return i?i(t):t==null||t.trim()==="-"?null:Number.parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{t.getInputElement().validity.valid||(e=!0)}),e}},qK=class extends wN{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=UK}conditionToString(e,t,i,n,s){const{filter:o,filterTo:r,type:a}=e,l=this.formatValue.bind(this);if(t){const c=this.conditionForToolPanel(a,i,()=>l(o),()=>l(r),n,s);if(c!=null)return c}return i?`${l(o)}-${l(r)}`:o!=null?l(o):`${a}`}},JAe=class extends WK{constructor(){super(KK,SN),this.filterType="number",this.FilterModelFormatterClass=qK}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}},ZK=class extends he{constructor(e){super(),this.params=e,this.eInput=je,this.onValueChanged=()=>{}}setupGui(e){this.eInput=this.createManagedBean(new sp(this.params?.config));const t=this.eInput.getGui();e.appendChild(t);const i=n=>this.onValueChanged(n);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){const{eInput:i}=this;i.setInputAriaLabel(e),t!==void 0&&i.setAutoComplete(t)}};function zk(e){const t=e?.trim();return t===""?e:t}function XK(e,t){const{filter:i,filterTo:n,type:s}=e||{};return[i||null,n||null].slice(0,Zv(s,t))}var eRe={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},QK=class extends YK{constructor(){super(...arguments),this.eFloatingFilterInputContainer=je,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(eRe)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){const t=e.browserAutoComplete??!1,{inputSvc:i,defaultDebounceMs:n,readOnly:s}=this;if(i.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=kD(e.filterParams),!s){const o=oN(e.filterParams,n),r=ps(this,this.syncUpWithParentFilter.bind(this),o);i.setValueChangedListener(r)}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,i=t.getValue();bo(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(i,!0)}syncUpWithParentFilter(e){const t=e.key===oe.ENTER,i=this.reactive;if(i&&this.params.onUiChange(),this.applyActive&&!t)return;const{inputSvc:n,params:s,lastType:o}=this;let r=n.getValue();if(s.filterParams.trimInput&&(r=zk(r),n.setValue(r,!0)),i){const a=s,l=a.model,c=this.convertValue(r),d=c==null?null:{...l??{filterType:this.filterType,type:o??this.optionsFactory.defaultOption},filter:c};a.onModelChange(d,{afterFloatingFilter:!0})}else s.parentFilterInstance(a=>{a?.onFloatingFilterChanged(o||null,r||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},tRe=class extends he{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new JP),this.eTextInput=this.createManagedBean(new sp),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),i=this.eTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,n=>this.onValueChanged(n)),this.setupListeners(i,n=>this.onValueChanged(n))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},iRe=class extends QK{constructor(){super(...arguments),this.FilterModelFormatterClass=qK,this.filterType="number",this.defaultOptions=SN}updateParams(e){_k(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=_k(e.filterParams),this.allowedCharPattern?this.createManagedBean(new ZK({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new tRe)}convertValue(e){return e?Number(e):null}},xN=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],nRe=class extends bN{constructor(){super("textFilter",XK,xN),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,n,s,o)=>{n<o&&t.push(Ql(i.getValue()))}),t}createEValue(){const e=Zs({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:i}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,i,"to"),e}createFromToElement(e,t,i){const n=this.createManagedBean(new sp);n.addCss(`ag-filter-${i}`),n.addCss("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeEValues(e,t){const i=o=>this.removeComponents(o,e,t),{eValuesFrom:n,eValuesTo:s}=this;i(n),i(s)}},JK=class extends wN{constructor(){super(...arguments),this.filterTypeKeys=UAe}conditionToString(e,t,i,n,s){const{filter:o,filterTo:r,type:a}=e;if(t){const l=d=>()=>gu(this,"filterSummaryTextQuote",[d]),c=this.conditionForToolPanel(a,i,l(o),l(r),n,s);if(c!=null)return c}return i?`${o}-${r}`:o!=null?`${o}`:`${a}`}},sRe=({filterOption:e,value:t,filterText:i})=>{if(i==null)return!1;switch(e){case"contains":return t.includes(i);case"notContains":return!t.includes(i);case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return t.indexOf(i)===0;case"endsWith":{const n=t.lastIndexOf(i);return n>=0&&n===t.length-i.length}default:return!1}},oRe=e=>e,rRe=e=>e==null?null:e.toString().toLowerCase(),aRe=class extends jK{constructor(){super(XK,xN),this.filterType="text",this.FilterModelFormatterClass=JK}updateParams(e){super.updateParams(e);const t=e.filterParams;this.matcher=t.textMatcher??sRe,this.formatter=t.textFormatter??(t.caseSensitive?oRe:rRe)}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,n){const s=e.map(g=>this.formatter(g))||[],o=this.formatter(t),{api:r,colDef:a,column:l,context:c,filterParams:{textFormatter:d}}=this.params;if(i.type==="blank")return L0(t);if(i.type==="notBlank")return!L0(t);const p={api:r,colDef:a,column:l,context:c,node:n.node,data:n.data,filterOption:i.type,value:o,textFormatter:d};return s.some(g=>this.matcher({...p,filterText:g}))}processModelToApply(e){if(e&&this.params.filterParams.trimInput){const t=i=>{const n={...i},{filter:s,filterTo:o}=i;return s&&(n.filter=zk(s)??null),o&&(n.filterTo=zk(o)??null),n};return $6(e)?{...e,conditions:e.conditions.map(t)}:t(e)}return e}},lRe=class extends QK{constructor(){super(...arguments),this.FilterModelFormatterClass=JK,this.filterType="text",this.defaultOptions=xN}createFloatingFilterInputService(){return this.createManagedBean(new ZK)}};function cRe(e){return!!e.quickFilter?.isFilterPresent()}function uRe(e){return e.quickFilter?.getText()}function dRe(e){e.quickFilter?.resetCache()}var hRe=class extends he{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",i=>this.setFilter(i.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){const{autoColSvc:e,colModel:t,gos:i,pivotResultCols:n}=this.beans,s=t.isPivotMode(),o=e?.getColumns(),r=t.getColDefCols();let a=(s&&!i.get("applyQuickFilterBeforePivotOrAgg")?n?.getPivotResultCols()?.list:r)??[];o&&(a=a.concat(o)),this.colsToUse=i.get("includeHiddenColumnsInQuickFilter")?a:a.filter(l=>l.isVisible()||l.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassCache(e,i):this.doesRowPassNoCache(e,i))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return Pe(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){Se(70,{newFilter:e});return}const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(i=>{const n=this.getTextForColumn(i,e);return Pe(n)&&n.includes(t)})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.includes(t)}doesRowPassMatcher(e,t){let i;e?(this.checkGenerateAggText(t),i=t.quickFilterAggregateText):i=this.getAggText(t);const{quickFilterParts:n,matcher:s}=this;return s(n,i)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let i=this.beans.filterValueSvc.getValue(e,t);const n=e.getColDef();if(n.getQuickFilterText){const s=$e(this.gos,{value:i,node:t,data:t.data,column:e,colDef:n});i=n.getQuickFilterText(s)}return Pe(i)?i.toString().toUpperCase():null}getAggText(e){const t=[];for(const i of this.colsToUse){const n=this.getTextForColumn(i,e);Pe(n)&&t.push(n)}return t.join(`
`)}},pRe={moduleName:"ClientSideRowModelFilter",version:ke,rowModels:["clientSide"],beans:[gAe]},MN={moduleName:"FilterCore",version:ke,beans:[OAe],apiFunctions:{isAnyFilterPresent:NAe,onFilterChanged:FAe},css:[CAe],dependsOn:[pRe]},e8={moduleName:"FilterValue",version:ke,beans:[GAe]},OD={moduleName:"ColumnFilter",version:ke,beans:[PAe,BAe],dynamicBeans:{headerFilterCellCtrl:fAe},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:wAe,getColumnFilterInstance:SAe,destroyFilter:xAe,setFilterModel:MAe,getFilterModel:DAe,getColumnFilterModel:AAe,setColumnFilterModel:RAe,showColumnFilter:EAe,hideColumnFilter:TAe,getColumnFilterHandler:IAe,doFilterAction:kAe},dependsOn:[MN,FD,e8,vAe]},gRe={moduleName:"CustomFilter",version:ke,userComponents:{agReadOnlyFloatingFilter:VAe},dependsOn:[OD]},fRe={moduleName:"TextFilter",version:ke,dependsOn:[OD],userComponents:{agTextColumnFilter:{classImp:nRe,params:{useForm:!0}},agTextColumnFloatingFilter:lRe},dynamicBeans:{agTextColumnFilterHandler:aRe}},mRe={moduleName:"NumberFilter",version:ke,dependsOn:[OD],userComponents:{agNumberColumnFilter:{classImp:QAe,params:{useForm:!0}},agNumberColumnFloatingFilter:iRe},dynamicBeans:{agNumberColumnFilterHandler:JAe}},yRe={moduleName:"DateFilter",version:ke,dependsOn:[OD],userComponents:{agDateColumnFilter:{classImp:WAe,params:{useForm:!0}},agDateInput:XAe,agDateColumnFloatingFilter:qAe},dynamicBeans:{agDateColumnFilterHandler:YAe}},vRe={moduleName:"QuickFilterCore",version:ke,rowModels:["clientSide"],beans:[hRe],dependsOn:[MN,e8]},bRe={moduleName:"QuickFilter",version:ke,apiFunctions:{isQuickFilterPresent:cRe,getQuickFilter:uRe,resetQuickFilter:dRe},dependsOn:[vRe]},CRe={moduleName:"ExternalFilter",version:ke,dependsOn:[MN]},wRe=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",$T=(e,t,i)=>{const{editModelSvc:n}=e,s=n?.getCellValidationModel()?.getCellValidation(t)?.errorMessages,o=n?.getRowValidationModel().getRowValidation(t)?.errorMessages,r=s||o;return r?.length?r.join(i("tooltipValidationErrorSeparator",". ")):void 0},SRe=class extends he{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,i,n){e&&t.destroyBean(e);const s=this.gos,o=UT(s),{column:r,eGui:a}=t,l=r.getColDef();!n&&o&&!l.headerComponent&&(n=nx(()=>a.querySelector(".ag-header-cell-text")));const c="header",p=this.beans.colNames.getDisplayNameForColumn(r,"header",!0),g=i??p,m={getGui:()=>a,getLocation:()=>c,getTooltipValue:()=>i??l?.headerTooltipValueGetter?.($e(s,{location:c,colDef:l,column:r,value:g,valueFormatted:p}))??l?.headerTooltip,shouldDisplayTooltip:n,getAdditionalParams:()=>({column:r,colDef:r.getColDef()})};let y=this.createTooltipFeature(m);return y&&(y=t.createBean(y),t.setRefreshFunction("tooltip",()=>y.refreshTooltip())),y}setupHeaderGroupTooltip(e,t,i,n){e&&t.destroyBean(e);const s=this.gos,o=UT(s),{column:r,eGui:a}=t,l=r.getColGroupDef();!n&&o&&!l?.headerGroupComponent&&(n=nx(()=>a.querySelector(".ag-header-group-text")));const c="headerGroup",p=this.beans.colNames.getDisplayNameForColumnGroup(r,"header"),g=i??p,m={getGui:()=>a,getLocation:()=>c,getTooltipValue:()=>i??l?.headerTooltipValueGetter?.($e(s,{location:c,colDef:l,column:r,value:g,valueFormatted:p}))??l?.headerTooltip,shouldDisplayTooltip:n,getAdditionalParams:()=>{const b={column:r};return l&&(b.colDef=l),b}},y=this.createTooltipFeature(m);return y&&t.createBean(y)}enableCellTooltipFeature(e,t,i){const{beans:n}=this,{gos:s,editSvc:o}=n,{column:r,rowNode:a}=e;let l="cell";const c=()=>{const m=!!!o?.isEditing(e)&&$T(n,e,this.getLocaleTextFunc());if(m)return l="cellEditor",m;l="cell";const y=r.getColDef(),b=a.data;if(y.tooltipField&&Pe(b))return ev(b,y.tooltipField,r.isTooltipFieldContainsDots());const C=y.tooltipValueGetter;return C?C($e(s,{location:"cell",colDef:r.getColDef(),column:r,rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,value:e.value,valueFormatted:e.valueFormatted})):null},d=UT(s);i||(d&&!e.isCellRenderer()?i=()=>{const g=!!o?.isEditing(e);if(!g&&$T(n,e,this.getLocaleTextFunc()))return!0;if(!r.isTooltipEnabled())return!1;const b=nx(()=>{const C=e.eGui;return C.children.length===0?C:C.querySelector(".ag-cell-value")});return!g&&b()}:i=()=>!o?.isEditing(e));const p={getGui:()=>e.eGui,getLocation:()=>l,getTooltipValue:t!=null?()=>t:c,shouldDisplayTooltip:i,getAdditionalParams:()=>({column:r,colDef:r.getColDef(),rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,valueFormatted:e.valueFormatted})};return this.createTooltipFeature(p,n)}setupFullWidthRowTooltip(e,t,i,n){const s={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n},o=this.beans,r=o.context;e&&t.destroyBean(e,r);const a=this.createTooltipFeature(s,o);if(a)return t.createBean(a,r)}setupCellEditorTooltip(e,t){const{beans:i}=this,{context:n}=i,s=t.getValidationElement?.(!0)||!t.isPopup?.()&&e.eGui;if(!s)return;const o={getGui:()=>s,getTooltipValue:()=>$T(i,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{const{editModelSvc:a}=i,l=a?.getRowValidationModel()?.getRowValidationMap(),c=a?.getCellValidationModel()?.getCellValidationMap(),d=!!l&&l.size>0,p=!!c&&c.size>0;return d||p}},r=this.createTooltipFeature(o,i);if(r)return e.createBean(r,n)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=Pe(t.tooltipField)||Pe(t.tooltipValueGetter)||Pe(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},xRe=class extends mbe{createTooltipComp(e,t){lve(this.beans.userCompFactory,e)?.newAgStackInstance().then(t)}setEventHandlers(e){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:e})}clearEventHandlers(){this.onColumnMovedEventCallback?.(),this.onColumnMovedEventCallback=void 0}},t8={moduleName:"Tooltip",version:ke,beans:[SRe],dynamicBeans:{tooltipFeature:O6,highlightTooltipFeature:ybe,tooltipStateManager:xRe},userComponents:{agTooltipComponent:Cbe},dependsOn:[FD],css:[wRe]},vg=class{constructor(e){this.cellValueChanges=e}},YT=class extends vg{constructor(e,t,i,n){super(e),this.initialRange=t,this.finalRange=i,this.ranges=n}},MRe=10,vH=class{constructor(e){this.actionStack=[],this.maxStackSize=e||MRe,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},DRe=class extends he{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&hK(this.activeCellEdit,t),n=this.activeRowEdit!==null&&Ywe(this.activeRowEdit,t);if(!(i||n||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:r,column:a,oldValue:l,value:c}=e,d={rowPinned:o,rowIndex:r,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const i=e.get("undoRedoCellEditingLimit");if(i<=0)return;this.undoStack=new vH(i),this.redoStack=new vH(i),this.addListeners();const n=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:s=>{s.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:n,newColumnsLoaded:n,columnGroupOpened:n,columnRowGroupChanged:n,columnMoved:n,columnPinned:n,columnVisible:n,rowDragEnd:n}),t.whenReady(this,s=>{this.gridBodyCtrl=s.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(e){const{eventSvc:t,undoStack:i,redoStack:n}=this;t.dispatchEvent({type:"undoStarted",source:e});const s=this.undoRedo(i,n,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:s})}redo(e){const{eventSvc:t,undoStack:i,redoStack:n}=this;t.dispatchEvent({type:"redoStarted",source:e});const s=this.undoRedo(n,i,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:s})}undoRedo(e,t,i,n,s){if(!e)return!1;const o=e.pop();return o?.cellValueChanges?(this.processAction(o,r=>r[n],s),o instanceof YT?this.processRange(o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),!0):!1}processAction(e,t,i){for(const n of e.cellValueChanges){const{rowIndex:s,rowPinned:o,columnId:r}=n,a={rowIndex:s,rowPinned:o},l=uc(this.beans,a);l.displayed&&l.setDataValue(r,t(n),i)}}processRange(e){let t;const i=this.beans.rangeSvc;i.removeAllCellRanges(!0),e.forEach((n,s)=>{if(!n)return;const o=n.startRow,r=n.endRow;s===e.length-1&&(t={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:n.startColumn.getColId()},this.setLastFocusedCell(t));const a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:n.startColumn,columns:n.columns};i.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:n}=t,s={rowIndex:i,rowPinned:n},o=uc(this.beans,s),r={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r)}setLastFocusedCell(e){const{rowIndex:t,columnId:i,rowPinned:n}=e,{colModel:s,focusSvc:o,rangeSvc:r}=this.beans,a=s.getCol(i);if(!a)return;const{scrollFeature:l}=this.gridBodyCtrl;l.ensureIndexVisible(t),l.ensureColumnVisible(a);const c={rowIndex:t,column:a,rowPinned:n};o.setFocusedCell({...c,forceBrowserFocus:!0}),r?.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new vg(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new vg(this.cellValueChanges);this.pushActionsToUndoStack(i)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new vg(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new YT(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:i}=this.beans;t&&Nu(i)?e=new YT(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new vg(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:e})=>this.stopBigChange("batchEditing",e),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:e})=>this.stopBigChange("bulkEditing",e)})}startBigChange(e){this.updateBigChange(e,!0)}updateBigChange(e,t){e==="bulkEditing"?this.bulkEditing=t:this.batchEditing=t}stopBigChange(e,t){if(e==="bulkEditing"&&!this.bulkEditing||e==="batchEditing"&&!this.batchEditing||(this.updateBigChange(e,!1),t?.length===0))return;const i=new vg(t??[]);this.pushActionsToUndoStack(i),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},ARe=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{display:block;height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}",RRe={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},ERe=class extends PD{constructor(){super(RRe,[QP]),this.eEditor=je}initialiseEditor(e){const t=e.value??void 0,i=this.eEditor;i.setValue(t),i.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(i,{fieldValueChanged:s=>this.setAriaLabel(s.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),i=RD(t,e),n=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${n} (${i})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{getValidationErrors:t}=e,i=this.getValue();return t?t({value:i,internalErrors:null,cellEditorParams:e}):null}},BD=class extends PD{constructor(e){super(),this.cellEditorInput=e,this.eEditor=je}initialiseEditor(e){const{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());const{eEditor:i}=this,{cellStartedEdit:n,eventKey:s,suppressPreventDefault:o}=e;i.getInputElement().setAttribute("title",""),t.init(i,e);let r,a=!0;n?(this.focusAfterAttached=!0,s===oe.BACKSPACE||s===oe.DELETE?r="":s&&s.length===1?o?a=!1:r=s:(r=t.getStartValue(),s!==oe.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,r=t.getStartValue()),a&&r!=null&&i.setStartValue(r),this.addGuiEventListener("keydown",l=>{const{key:c}=l;(c===oe.PAGE_UP||c===oe.PAGE_DOWN)&&l.preventDefault()})}afterGuiAttached(){const e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;ed()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():this.cellEditorInput.setCaret?.()}focusIn(){const{eEditor:e}=this,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},TRe={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},IRe=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return TRe}getAgComponents(){return[R6]}init(e,t){this.eEditor=e,this.params=t;const{min:i,max:n,step:s,colDef:o}=t;i!=null&&e.setMin(i),n!=null&&e.setMax(n),s!=null&&e.setStep(s),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const t=this.eEditor.getInputElement().valueAsDate,{params:i}=this,{min:n,max:s,getValidationErrors:o}=i;let r=[];const a=this.getLocaleTextFunc();if(t instanceof Date&&!isNaN(t.getTime())){if(n){const l=n instanceof Date?n:new Date(n);if(t<l){const c=l.toLocaleDateString();r.push(a("minDateValidation",`Date must be after ${c}`,[c]))}}if(s){const l=s instanceof Date?s:new Date(s);if(t>l){const c=l.toLocaleDateString();r.push(a("maxDateValidation",`Date must be before ${c}`,[c]))}}}return r.length||(r=null),o?o({value:t,cellEditorParams:i,internalErrors:r}):r}getValue(){const{eEditor:e,params:t}=this,i=e.getDate();return!Pe(i)&&!Pe(t.value)?t.value:i??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return zo(e,this.includeTime??!1)}},kRe=class extends BD{constructor(){super(new IRe(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},LRe={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},PRe=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return LRe}getAgComponents(){return[R6]}init(e,t){this.eEditor=e,this.params=t;const{min:i,max:n,step:s,colDef:o}=t;i!=null&&e.setMin(i),n!=null&&e.setMax(n),s!=null&&e.setStep(s),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const{eEditor:e,params:t}=this,i=e.getInputElement().value,n=this.formatDate(this.parseDate(i??void 0)),{min:s,max:o,getValidationErrors:r}=t;let a=[];if(n){const l=new Date(n),c=this.getLocaleTextFunc();if(s){const d=new Date(s);if(l<d){const p=d.toLocaleDateString();a.push(c("minDateValidation",`Date must be after ${p}`,[p]))}}if(o){const d=new Date(o);if(l>d){const p=d.toLocaleDateString();a.push(c("maxDateValidation",`Date must be before ${p}`,[p]))}}}return a.length||(a=null),r?r({value:this.getValue(),cellEditorParams:t,internalErrors:a}):a}getValue(){const{params:e,eEditor:t}=this,i=this.formatDate(t.getDate());return!Pe(i)&&!Pe(e.value)?e.value:e.parseValue(i??"")}getStartValue(){return zo(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Co(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):zo(e??null,this.includeTime??!1)??void 0}},NRe=class extends BD{constructor(){super(new PRe(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},FRe={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},ORe=class extends PD{constructor(){super(FRe,[Ave]),this.eEditor=je}initialiseEditor(e){const{eEditor:t}=this,{cellStartedEdit:i,eventKey:n,maxLength:s,cols:o,rows:r}=e;this.focusAfterAttached=i,t.getInputElement().setAttribute("title",""),t.setMaxLength(s||200).setCols(o||60).setRows(r||10);let a;i?(this.focusAfterAttached=!0,n===oe.BACKSPACE||n===oe.DELETE?a="":n&&n.length===1?a=n:(a=this.getStartValue(e),n!==oe.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,a=this.getStartValue(e)),a!=null&&t.setValue(a,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}getStartValue(e){const{value:t}=e;return t?.toString()??t}onKeyDown(e){const t=e.key;(t===oe.LEFT||t===oe.UP||t===oe.RIGHT||t===oe.DOWN||e.shiftKey&&t===oe.ENTER)&&e.stopPropagation()}afterGuiAttached(){const{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:i}=this,n=this.getLocaleTextFunc();e.setInputAriaLabel(n("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),i&&e.getInputElement().select())}getValue(){const{eEditor:e,params:t}=this,{value:i}=t,n=e.getValue();return!Pe(n)&&!Pe(i)?i:t.parseValue(n)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:i}=e,n=this.getLocaleTextFunc(),s=this.getValue();let o=[];return typeof s=="string"&&t!=null&&s.length>t&&o.push(n("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),i?i({value:s,internalErrors:o,cellEditorParams:e}):o}},BRe={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},GRe=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return BRe}getAgComponents(){return[Rve]}init(e,t){this.eEditor=e,this.params=t;const{max:i,min:n,precision:s,step:o}=t;i!=null&&e.setMax(i),n!=null&&e.setMin(n),s!=null&&e.setPrecision(s),o!=null&&e.setStep(o);const r=e.getInputElement();t.preventStepping?e.addManagedElementListeners(r,{keydown:this.preventStepping}):t.showStepperButtons&&r.classList.add("ag-number-field-input-stepper")}getValidationErrors(){const{params:e}=this,{min:t,max:i,getValidationErrors:n}=e,o=this.eEditor.getInputElement().valueAsNumber,r=this.getLocaleTextFunc();let a=[];return typeof o=="number"&&(t!=null&&o<t&&a.push(r("minValueValidation",`Must be greater than or equal to ${t}.`,[String(t)])),i!=null&&o>i&&a.push(r("maxValueValidation",`Must be less than or equal to ${i}.`,[String(i)]))),a.length||(a=null),n?n({value:o,cellEditorParams:e,internalErrors:a}):a}preventStepping(e){(e.key===oe.UP||e.key===oe.DOWN)&&e.preventDefault()}getValue(){const{eEditor:e,params:t}=this,i=e.getValue();if(!Pe(i)&&!Pe(t.value))return t.value;let n=t.parseValue(i);if(n==null)return n;if(typeof n=="string"){if(n==="")return null;n=Number(n)}return isNaN(n)?null:n}getStartValue(){return this.params.value}setCaret(){ed()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},_Re=class extends BD{constructor(){super(new GRe(()=>this.getLocaleTextFunc()))}},VRe={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},zRe=class extends PD{constructor(){super(VRe,[Gve]),this.eEditor=je,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;const{eEditor:t,valueSvc:i,gos:n}=this,{values:s,value:o,eventKey:r}=e;if(ki(s)){Se(58);return}this.startedByEnter=r!=null?r===oe.ENTER:!1;let a=!1;s.forEach(p=>{const g={value:p},m=i.formatValue(e.column,null,p),y=m!=null;g.text=y?m:p,t.addOption(g),a=a||o===p}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:d}=e;l!=null&&t.setPickerGap(l),d!=null&&t.setPickerMaxHeight(d),c!=null&&t.setPickerMaxWidth(c),n.get("editType")!=="fullRow"&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:e}=this,{values:t,getValidationErrors:i}=e,n=this.getValue();let s=[];if(t&&!t.includes(n)){const o=this.getLocaleTextFunc();s.push(o("invalidSelectionValidation","Invalid selection."))}else s=null;return i?i({value:n,internalErrors:s,cellEditorParams:e}):s}},HRe={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},jRe=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return HRe}getAgComponents(){return[TD]}init(e,t){this.eEditor=e,this.params=t;const i=t.maxLength;i!=null&&e.setMaxLength(i)}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:i}=e,n=this.getValue(),s=this.getLocaleTextFunc();let o=[];return t!=null&&typeof n=="string"&&n.length>t&&o.push(s("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),i?i({value:n,cellEditorParams:e,internalErrors:o}):o}getValue(){const{eEditor:e,params:t}=this,i=e.getValue();return!Pe(i)&&!Pe(t.value)?t.value:t.parseValue(i)}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){ed()&&this.eEditor.getInputElement().focus({preventScroll:!0});const e=this.eEditor,t=e.getValue(),i=Pe(t)&&t.length||0;i&&e.getInputElement().setSelectionRange(i,i)}},bH=class extends BD{constructor(){super(new jRe(()=>this.getLocaleTextFunc()))}};function WRe(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function URe(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function i8(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function n8(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}function $Re(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}function YRe(e){e.undoRedo?.undo("api")}function KRe(e){e.undoRedo?.redo("api")}function qRe(e,t){return e.editModelSvc?.getEditRowDataValue(t,{checkSiblings:!0})}function ZRe(e){const t=e.editModelSvc?.getEditMap(),i=[];return t?.forEach((n,s)=>{const{rowIndex:o,rowPinned:r}=s;n.forEach((a,l)=>{const{editorValue:c,pendingValue:d,sourceValue:p,state:g}=a,m=zl(a);let y=c??d;y===Er&&(y=void 0);const b={newValue:y,oldValue:p,state:g,column:l,colId:l.getColId(),colKey:l.getColId(),rowIndex:o,rowPinned:r};(g==="editing"||g==="changed"&&m)&&i.push(b)})}),i}function XRe(e,t=!1){const{editSvc:i}=e;if(i?.isBatchEditing()){if(t)for(const n of e.editModelSvc?.getEditPositions()??[])n.state==="editing"&&i.revertSingleCellEdit(n);else qd(e,{persist:!0});$g(e,void 0,{cancel:t})}else i?.stopEditing(void 0,{cancel:t,source:"edit",forceStop:!t,forceCancel:t})}function QRe(e,t){const i=Ei(e,t);return e.editSvc?.isEditing(i)??!1}function JRe(e,t){const{key:i,colKey:n,rowIndex:s,rowPinned:o}=t,{editSvc:r,colModel:a}=e,l=a.getCol(n);if(!l){Se(12,{colKey:n});return}const d=uc(e,{rowIndex:s,rowPinned:o||null});if(!d){Se(290,{rowIndex:s,rowPinned:o});return}if(!l.isCellEditable(d))return;o==null&&n8(e,s),i8(e,n),r?.startEditing({rowNode:d,column:l},{event:i?new KeyboardEvent("keydown",{key:i}):void 0,source:"api"})}function eEe(e){return e.editSvc?.validateEdit()||null}function tEe(e){return e.undoRedo?.getCurrentUndoStackSize()??0}function iEe(e){return e.undoRedo?.getCurrentRedoStackSize()??0}var nEe={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},sEe=class extends qP{constructor(e){super(nEe),this.params=e}postConstruct(){Eh(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,i=n=>{Ek(this.gos,n,t.node,t.column,!0)||t.onKeyDown(n)};this.addManagedElementListeners(e,{keydown:i})}};function oEe(e,{column:t},i,n,s="ui"){if(i instanceof KeyboardEvent&&(i.key===oe.TAB||i.key===oe.ENTER||i.key===oe.F2||i.key===oe.BACKSPACE&&n))return!0;if(i?.shiftKey&&e.rangeSvc?.getCellRanges().length!=0)return!1;const r=t?.getColDef(),a=rEe(e.gos,r),l=i?.type;return l==="click"&&i?.detail===1&&a===1||l==="dblclick"&&i?.detail===2&&a===2?!0:s==="api"?n??!1:!1}function rEe(e,t){return e.get("suppressClickEdit")===!0?0:e.get("singleClickEdit")===!0||t?.singleClickEdit?1:2}function Hk(e,{rowNode:t,column:i},n="ui"){const s=i.getColDef().editable,o=e.editModelSvc;return i.isColumnFunc(t,s)||!!o&&o.hasEdits({rowNode:t,column:i},{withOpenEditor:!0})}function aEe(e,t,i="ui"){const n=Hk(e,t,i);return n===!0||i==="ui"?n:e.colModel.getCols().some(o=>Hk(e,{rowNode:t.rowNode,column:o},i))}var P0=(e,t=!1)=>{if(e!==void 0)return zl(e)||t&&e.state==="editing"};function s8(e,t,i=!1){return P0(e.editModelSvc?.getEdit(t),i)}var o8=(e,t,i)=>{if(e)for(let n=0,s=e.length;n<s;++n){const o=e[n];if(o.data&&(P0(t?.getEdit({rowNode:o,column:i}))||P0(t?.getEdit({rowNode:o.pinnedSibling,column:i})))||o8(o.childrenAfterGroup,t,i))return!0}};function r8(e,t){const{column:i,rowNode:n}=t;return e.gos.get("groupTotalRow")&&!n?.footer?!1:o8(n?.childrenAfterGroup,e.editModelSvc,i)}function a8(e,{rowNode:t,column:i}){if(t=t.pinnedSibling,!!t)return P0(e.editModelSvc?.getEdit({rowNode:t,column:i}))}var lEe=class extends he{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){const{cellCtrl:e,editSvc:t,beans:i}=this;if(t?.isBatchEditing()&&t.isEditing()){const s=s8(i,e)||r8(i,e)||a8(i,e);this.applyBatchingStyle(s)}else this.applyBatchingStyle(!1);const n=!!this.editModelSvc?.getCellValidationModel().hasCellValidation(this.cellCtrl);this.cellComp.toggleCss("ag-cell-editing-error",n)}applyBatchingStyle(e){this.cellComp.toggleCss("ag-cell-editing",e??!1),this.cellComp.toggleCss("ag-cell-batch-edit",(e&&this.editSvc?.isBatchEditing())??!1)}},cEe=class extends he{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){const{rowCtrl:e,editModelSvc:t,beans:i}=this;let n=e.rowNode,s=t?.getEditRow(n);const o=this.editModelSvc?.getRowValidationModel().hasRowValidation({rowNode:n});if(!s&&n.pinnedSibling&&(n=n.pinnedSibling,s=t?.getEditRow(n)),s){const r=Array.from(s.keys()).some(a=>{const l={rowNode:n,column:a};return s8(i,l,!0)||r8(i,l)||a8(i,l)});this.applyStyle(o,r);return}this.applyStyle(o)}applyStyle(e=!1,t=!1){const i=this.editSvc?.isBatchEditing()??!1,n=this.gos.get("editType")==="fullRow";this.rowCtrl?.forEachGui(void 0,({rowComp:s})=>{s.toggleCss("ag-row-editing",n&&t),s.toggleCss("ag-row-batch-edit",n&&t&&i),s.toggleCss("ag-row-inline-editing",t),s.toggleCss("ag-row-not-inline-editing",!t),s.toggleCss("ag-row-editing-invalid",n&&t&&e)})}},uEe=({rowModel:e,pinnedRowModel:t,editModelSvc:i},n)=>{const s=new Set;e.forEachNode(o=>n.has(o)&&s.add(o)),t?.forEachPinnedRow("top",o=>n.has(o)&&s.add(o)),t?.forEachPinnedRow("bottom",o=>n.has(o)&&s.add(o));for(const o of n)s.has(o)||i.removeEdits({rowNode:o});return s},dEe=({editModelSvc:e},t,i)=>{for(const n of t)e?.getEditRow(n)?.forEach((s,o)=>!i.has(o)&&e.removeEdits({rowNode:n,column:o}))},hEe=e=>()=>{const t=new Set(e.colModel.getCols()),i=e.editModelSvc.getEditMap(!0),n=new Set(i.keys());dEe(e,uEe(e,n),t)},pEe=new Set(["undo","redo","paste","bulk","rangeSvc"]),gEe=new Set(["ui","api"]),l8={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"},fEe=new Set(Object.keys(l8)),mEe=new Set(["paste","rangeSvc","renderer","cellClear","redo","undo"]),vS={cancel:!0,source:"api"},yEe={cancel:!1,source:"api"},sg={checkSiblings:!0},by={force:!0,suppressFlash:!0},vEe=class extends he{constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1,this.stopping=!1,this.committing=!1}postConstruct(){const{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",({currentValue:n})=>{this.stopEditing(void 0,vS),this.createStrategy(n)});const t=hEe(e),i=()=>{const n=this.model.getCellValidationModel().getCellValidationMap().size>0,s=this.model.getRowValidationModel().getRowValidationMap().size>0;return n||s?this.stopEditing(void 0,vS):this.isEditing()&&(this.isBatchEditing()?$g(e,this.model.getEditPositions()):this.stopEditing(void 0,yEe)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowExpansionStateChanged:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:i,filterChanged:i,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,vS)):(this.stopEditing(void 0,vS),this.batch=!1)}createStrategy(e){const{beans:t,gos:i,strategy:n}=this,s=CH(i,e);if(n){if(n.beanName===s)return n;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(s,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,i,n="ui"){const s=oEe(this.beans,e,t,i,n);return s&&(this.strategy??(this.strategy=this.createStrategy())),s}shouldStopEditing(e,t,i="ui"){return this.strategy?.shouldStop(e,t,i)??null}shouldCancelEditing(e,t,i="ui"){return this.strategy?.shouldCancel(e,t,i)??null}validateEdit(){return PMe(this.beans)}isEditing(e,t){return this.model.hasEdits(e,t??sg)}isRowEditing(e,t){return(e&&this.model.hasRowEdits(e,t))??!1}startEditing(e,t){const{startedEdit:i=!0,event:n=null,source:s="ui",ignoreEventKey:o=!1,silent:r}=t;if(this.strategy??(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;const a=Ei(this.beans,e);if(a&&!a.comp){a.onCompAttachedFuncs.push(()=>this.startEditing(e,t));return}const l=this.shouldStartEditing(e,n,i,s);if(l===!1&&s!=="api"){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,s)&&!t.continueEditing&&this.stopEditing(void 0,{source:s}),l&&this.isBatchEditing()&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start({position:e,event:n,source:s,ignoreEventKey:o,startedEdit:i,silent:r})}stopEditing(e,t){const{event:i,cancel:n,source:s="ui",forceCancel:o,forceStop:r}=t||{},{beans:a,model:l}=this;if(fEe.has(s)&&this.isBatchEditing())return this.bulkRefresh(e),!1;const c=this.committing?l8[s]:s;if(!(this.committing||this.isEditing(e)||this.isBatchEditing()&&l.hasEdits(e,sg))||!this.strategy||this.stopping)return!1;this.stopping=!0;const p=Ei(a,e);p&&(p.onEditorAttachedFuncs=[]);let g=l.getEditMap(!0),m=!1;const y=!n&&(!!this.shouldStopEditing(e,i,c)||this.committing&&!this.batch)||(r??!1),b=n&&!!this.shouldCancelEditing(e,i,c)||(o??!1);if(y||b){qd(a,{persist:!0,isCancelling:b||n,isStopping:y});const C=l.getEditMap(),w=this.processEdits(C,n,s);this.strategy?.stop(n,i);for(const x of w)l.clearEditValue(x);this.bulkRefresh(void 0,g);for(const x of l.getEditPositions(C)){const M=Ei(a,x),E=zl(x);M?.refreshCell({force:!0,suppressFlash:!E})}g=C,m||(m=y)}else if(i instanceof KeyboardEvent&&this.batch&&this.strategy?.midBatchInputsAllowed(e)&&this.isEditing(e,{withOpenEditor:!0})){const{key:C}=i,w=C===oe.ENTER,x=C===oe.ESCAPE,M=C===oe.TAB;(w||M||x)&&(w||M?qd(a,{persist:!0}):x&&this.revertSingleCellEdit(p),this.isBatchEditing()?this.strategy?.cleanupEditors():$g(a,l.getEditPositions(),{event:i,cancel:x}),i.preventDefault(),this.bulkRefresh(e,g,{suppressFlash:!0}),g=l.getEditMap())}else qd(a,{persist:!0}),g=l.getEditMap();return m&&e&&this.model.removeEdits(e),this.navigateAfterEdit(t,p?.cellPosition),Ok(a),this.model.hasEdits()||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap()),this.bulkRefresh(),b&&this.beans.rowRenderer.refreshRows({rowNodes:Array.from(g.keys())}),this.isBatchEditing()&&(this.beans.rowRenderer.refreshRows({suppressFlash:!0,force:!0}),m&&y&&this.dispatchBatchEvent("batchEditingStopped",g)),this.stopping=!1,m}navigateAfterEdit(e,t){if(!e||!t)return;const{event:i,suppressNavigateAfterEdit:n}=e;if(!(i instanceof KeyboardEvent)||n)return;const{key:o,shiftKey:r}=i,a=this.gos.get("enterNavigatesVerticallyAfterEdit");if(o!==oe.ENTER||!a)return;const l=r?oe.UP:oe.DOWN;this.beans.navigation?.navigateToNextCell(null,l,t,!1)}processEdits(e,t=!1,i){const n=Array.from(e.keys()),s=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,o=[];for(const r of n){const a=e.get(r);for(const l of a.keys()){const c=a.get(l),d={rowNode:r,column:l},p=zl(c);!t&&p&&!s&&(this.setNodeDataValue(r,l,c.pendingValue,void 0,i)||o.push(d))}}return o}setNodeDataValue(e,t,i,n,s="edit"){const{beans:o}=this,r=Ei(o,{rowNode:e,column:t}),a=gEe.has(s)?"edit":s;r&&(r.suppressRefreshCell=!0),this.commitNextEdit();const l=e.setDataValue(t,i,a);return r&&(r.suppressRefreshCell=!1),n&&r?.refreshCell(by),l}setEditMap(e,t){this.strategy??(this.strategy=this.createStrategy()),this.strategy?.setEditMap(e,t),this.bulkRefresh();let i=by;t?.forceRefreshOfEditCellsOnly&&(i={...bEe(e),...by}),this.beans.rowRenderer.refreshCells(i)}dispatchEditValuesChanged({rowNode:e,column:t},i={}){if(!e||!t||!i)return;const{pendingValue:n,sourceValue:s}=i,{rowIndex:o,rowPinned:r,data:a}=e;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:e,rowIndex:o,rowPinned:r,column:t,source:"api",data:a,newValue:n,oldValue:s,value:n,colDef:t.getColDef()})}bulkRefresh(e={},t,i={}){const{beans:n,gos:s}=this,{editModelSvc:o,rowModel:r}=n;en(s)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),i):t&&o?.getEditMap(!1)?.forEach((a,l)=>{for(const c of a.keys())this.refCell({rowNode:l,column:c},a.get(c),i)}))}refCell({rowNode:e,column:t},i,n={}){const{beans:s,gos:o}=this,r=new Set([e]),a=new Set,l=e.pinnedSibling;l&&r.add(l);const c=e.sibling;c&&a.add(c);let d=e.parent;for(;d;)d.sibling?.footer&&o.get("groupTotalRow")||!d.parent&&d.sibling&&o.get("grandTotalRow")?a.add(d.sibling):a.add(d),d=d.parent;for(const p of r)this.dispatchEditValuesChanged({rowNode:p,column:t},i);for(const p of r)Ei(s,{rowNode:p,column:t})?.refreshCell(n);for(const p of a)Ei(s,{rowNode:p,column:t})?.refreshCell(n)}stopAllEditing(e=!1,t="ui"){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t="ui"){const{rowNode:i}=e,{gos:n,beans:s}=this;if(i.group){if(n.get("treeData")){if(!i.data&&!n.get("enableGroupEdit"))return!1}else if(!n.get("enableGroupEdit"))return!1}const o=CH(n)==="fullRow"?aEe(s,e,t):Hk(s,e,t);return o&&(this.strategy??(this.strategy=this.createStrategy())),o}cellEditingInvalidCommitBlocks(){return this.gos.get("invalidEditValueMode")==="block"}checkNavWithValidation(e,t,i=!0){if(this.hasValidationErrors(e)){const n=Ei(this.beans,e);return this.cellEditingInvalidCommitBlocks()?(t?.preventDefault?.(),i&&(!n?.hasBrowserFocus()&&n?.focusCell(),n?.comp?.getCellEditor()?.focusIn?.()),"block-stop"):(n&&this.revertSingleCellEdit(n),"revert-continue")}return"continue"}revertSingleCellEdit(e,t=!1){const i=Ei(this.beans,e);i?.comp?.getCellEditor()&&($g(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),Rf(this.beans,e,{silent:!0}),kh(this.beans),i?.refreshCell(by),t&&(i?.focusCell(),i?.comp?.getCellEditor()?.focusIn?.()))}hasValidationErrors(e){kh(this.beans);const t=Ei(this.beans,e);t&&(t.refreshCell(by),t.rowCtrl.rowEditStyleFeature?.applyRowStyles());let i=!1;return e?.rowNode?(i||(i=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(i||(i=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(i||(i=this.model.getCellValidationModel().getCellValidationMap().size>0),i||(i=this.model.getRowValidationModel().getRowValidationMap().size>0)),i}moveToNextCell(e,t,i,n="ui"){let s;const o=this.isEditing(),r=o&&this.checkNavWithValidation(void 0,i)==="block-stop";return e instanceof Yg&&o&&(s=this.strategy?.moveToNextEditingCell(e,t,i,n,r)),s===null||(s=s||!!this.beans.focusSvc.focusedHeader,s===!1&&!r&&this.stopEditing()),s}getCellDataValue({rowNode:e,column:t},i=!0){if(!e||!t)return;let n=this.model.getEdit({rowNode:e,column:t});const s=e.pinnedSibling;if(s){const r=this.model.getEdit({rowNode:s,column:t});r&&(n=r)}const o=i?n?.editorValue??n?.pendingValue:n?.pendingValue;return o===Er||!n?n?.sourceValue??this.valueSvc.getValue(t,e,!1,"api"):o}addStopEditingWhenGridLosesFocus(e){RMe(this,this.beans,e)}createPopupEditorWrapper(e){return new sEe(e)}commitNextEdit(){this.committing=!0}setDataValue(e,t,i){try{if((!this.isEditing()||this.committing)&&!mEe.has(i))return;const{beans:n}=this;this.strategy??(this.strategy=this.createStrategy());const s=this.isBatchEditing()?"ui":this.committing?i??"api":"api";if(!i||pEe.has(i))return mx(n,e,t,i,void 0,{persist:!0}),this.setNodeDataValue(e.rowNode,e.column,t,!0,i);const o=this.model.getEdit(e);if(o){if(o.pendingValue===t)return!1;if(o.sourceValue!==t)return mx(n,e,t,i,void 0,{persist:!0}),this.stopEditing(e,{source:s,suppressNavigateAfterEdit:!0}),!0;if(o.sourceValue===t)return n.editModelSvc?.removeEdits(e),this.dispatchEditValuesChanged(e,{...o,pendingValue:t}),!0}return mx(n,e,t,i,void 0,{persist:!0}),this.stopEditing(e,{source:s,suppressNavigateAfterEdit:!0}),!0}finally{this.committing=!1}}handleColDefChanged(e){IMe(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){if(!this.batch||!this.model.hasRowEdits(e.rowNode,sg))return;const{rowNode:n,column:s}=e,{compDetails:o,valueToDisplay:r}=t;if(o){const{params:l}=o;return l.data=this.model.getEditRowDataValue(n,sg),{compDetails:o}}const a=this.model.getEditRow(e.rowNode,sg);if(r!==void 0&&a?.has(s))return{valueToDisplay:this.valueSvc.getValue(s,n)}}cleanupEditors(){this.strategy?.cleanupEditors()}dispatchCellEvent(e,t,i,n){this.strategy?.dispatchCellEvent(e,t,i,n)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return $e(this.gos,{type:e,...e==="batchEditingStopped"?{changes:this.toEventChangeList(t)}:{}})}toEventChangeList(e){return this.model.getEditPositions(e).map(t=>({rowIndex:t.rowNode.rowIndex,rowPinned:t.rowNode.rowPinned,columnId:t.column.getColId(),newValue:t.pendingValue,oldValue:t.sourceValue}))}applyBulkEdit({rowNode:e,column:t},i){if(!i||i.length===0)return;const{beans:n,rangeSvc:s,valueSvc:o}=this;qd(n,{persist:!0});const r=this.model.getEditMap(!0),a=r.get(e)?.get(t)?.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"}),i.forEach(c=>{if(s?.forEachRowInRange(c,d=>{const p=uc(n,d);if(p===void 0)return;const g=r.get(p)??new Map;for(const m of c.columns)if(m&&this.isCellEditable({rowNode:p,column:m},"api")){const y=o.getValue(m,p,!0,"api");let b=o.parseValue(m,p??null,a,y);Number.isNaN(b)&&(b=null),g.set(m,{editorValue:void 0,pendingValue:b,sourceValue:y,state:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}g.size>0&&r.set(p,g)}),this.setEditMap(r),this.batch){this.cleanupEditors(),Ok(n),this.bulkRefresh();return}this.commitNextEdit(),this.stopEditing(void 0,{source:"bulk"}),this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(r)})}),this.bulkRefresh();const l=Ei(n,{rowNode:e,column:t});l&&l.focusCell(!0)}createCellStyleFeature(e,t){return new lEe(e,t)}createRowStyleFeature(e,t){return new cEe(e,t)}setEditingCells(e,t){const{beans:i}=this,{colModel:n,valueSvc:s}=i,o=new Map;for(let{colId:r,column:a,colKey:l,rowIndex:c,rowPinned:d,newValue:p,state:g}of e){const m=r?n.getCol(r):l?n.getCol(l):a;if(!m)continue;const y=uc(i,{rowIndex:c,rowPinned:d});if(!y)continue;const b=s.getValue(m,y,!0,"api");if(!t?.forceRefreshOfEditCellsOnly&&!zl({pendingValue:p,sourceValue:b})&&g!=="editing")continue;let C=o.get(y);C||(C=new Map,o.set(y,C)),p===void 0&&(p=Er),C.set(m,{editorValue:void 0,pendingValue:p,sourceValue:b,state:g??"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}this.setEditMap(o,t)}onCellFocused(e){const t=Ei(this.beans,e);if(!t||!this.isEditing(t,sg))return;const i=this.model.getEdit(t);if(!i||!zl(i))return;const s=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");this.beans.ariaAnnounce?.announceValue(s,"pendingChange")}allowedFocusTargetOnValidation(e){return Ei(this.beans,e)}};function bEe(e){return{rowNodes:e?Array.from(e.keys()):void 0,columns:e?[...new Set(Array.from(e.values()).flatMap(t=>Array.from(t.keys())))]:void 0}}function CH(e,t){return t??e.get("editType")??"singleCell"}var c8=class extends he{postConstruct(){this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:this.onCellFocusChanged?.bind(this),cellFocusCleared:this.onCellFocusChanged?.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t;const i=e.previousParams,{editSvc:n,beans:s}=this,o=e.type==="cellFocused"?e.sourceEvent:null;i&&(t=Ei(s,i));const{gos:r,editModelSvc:a}=s,l=e.type==="cellFocusCleared";if(n.isEditing(void 0,{withOpenEditor:!0})){const{column:c,rowIndex:d,rowPinned:p}=e,g={column:c,rowNode:uc(s,{rowIndex:d,rowPinned:p})},m=r.get("invalidEditValueMode")==="block";if(m)return;const y=!m,b=!!a?.getCellValidationModel().hasCellValidation(g),C=y&&b;(i||l?n.stopEditing(void 0,{cancel:C,source:l&&y?"api":void 0,event:o}):!0)||(n.isBatchEditing()?n.cleanupEditors():n.stopEditing(void 0,{source:"api"}))}t?.refreshCell({suppressFlash:!0,force:!0})}stop(e,t){const i=this.model.getEditPositions(),n={all:[],pass:[],fail:[]};for(const s of i){if(n.all.push(s),(this.model.getCellValidationModel().getCellValidation(s)?.errorMessages?.length??0)>0){n.fail.push(s);continue}n.pass.push(s)}if(e)for(const s of i)I0(this.beans,s,{cancel:e}),this.model.stop(s);else{const s=this.processValidationResults(n);if(s.destroy.length>0)for(const o of s.destroy)I0(this.beans,o,{event:t,cancel:e}),this.model.stop(o);if(s.keep.length>0)for(const o of s.keep){const r=Ei(this.beans,o);this.editSvc?.cellEditingInvalidCommitBlocks()||r&&this.editSvc.revertSingleCellEdit(r)}}return!0}cleanupEditors({rowNode:e}={},t){qd(this.beans,{persist:!1});const i=this.model.getEditPositions(),n=[];if(e)for(const s of i)s.rowNode!==e&&n.push(s);else for(const s of i)n.push(s);$g(this.beans,n),Ok(this.beans,t)}setFocusOutOnEditor(e){e.comp?.getCellEditor()?.focusOut?.()}setFocusInOnEditor(e){const t=e.comp,i=t?.getCellEditor();if(i?.focusIn)i.focusIn();else{const n=this.beans.gos.get("editType")==="fullRow";e.focusCell(n),e.onEditorAttachedFuncs.push(()=>t?.getCellEditor()?.focusIn?.())}}setupEditors(e){const{event:t,ignoreEventKey:i=!1,startedEdit:n,position:s,cells:o=this.model.getEditPositions()}=e,r=t instanceof KeyboardEvent&&!i&&t.key||void 0;TMe(this.beans,o,s,r,t,n)}dispatchCellEvent(e,t,i,n){const s=Ei(this.beans,e);s&&this.eventSvc.dispatchEvent({...s.createEvent(t??null,i),...n})}dispatchRowEvent(e,t,i){if(i)return;const n=fN(this.beans,e);n&&this.eventSvc.dispatchEvent(n.createRowEvent(t))}shouldStop(e,t,i="ui"){const n=this.editSvc.isBatchEditing();return n&&i==="api"?!0:n&&(i==="ui"||i==="edit")?!1:i==="api"?!0:t instanceof KeyboardEvent&&!n?t.key===oe.ENTER:null}shouldCancel(e,t,i="ui"){const n=this.editSvc.isBatchEditing();return!!(t instanceof KeyboardEvent&&!n&&t.key===oe.ESCAPE||n&&i==="api"||i==="api")}setEditMap(e,t){t?.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});const i=[];if(e.forEach((n,s)=>{n.forEach((o,r)=>{o.state==="editing"&&i.push({...o,rowNode:s,column:r})})}),t?.update&&(e=new Map([...this.model.getEditMap(),...e])),this.model?.setEditMap(e),i.length>0){const n=i.at(-1),s=n.pendingValue===Er?void 0:n.pendingValue;this.start({position:n,event:new KeyboardEvent("keydown",{key:s}),source:"api"});const o=Ei(this.beans,n);o&&this.setFocusInOnEditor(o)}}destroy(){this.cleanupEditors(),super.destroy()}},CEe=class extends c8{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}shouldStop(e,t,i="ui"){const{rowNode:n}=e||{};if(!fN(this.beans,{rowNode:this.rowNode}))return!0;const o=super.shouldStop({rowNode:this.rowNode},t,i);return o!==null?o:this.rowNode?n!==this.rowNode:!1}midBatchInputsAllowed({rowNode:e}){return e?this.model.hasEdits({rowNode:e}):!1}clearEdits(e){this.model.clearEditValue(e)}start(e){const{position:t,silent:i,startedEdit:n,event:s,ignoreEventKey:o}=e,{rowNode:r}=t;this.rowNode!==r&&super.cleanupEditors(t);const a=this.beans.visibleCols.allCols,l=[],c=[];for(const d of a)d.isCellEditable(r)&&c.push(d);if(c.length!=0){this.dispatchRowEvent({rowNode:r},"rowEditingStarted",i),this.startedRows.push(r);for(const d of c){const p={rowNode:r,column:d};l.push(p),this.model.hasEdits(p)||this.model.start(p)}this.rowNode=r,this.setupEditors({cells:l,position:t,startedEdit:n,event:s,ignoreEventKey:o})}}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){const{rowNode:i}=this;if(i&&!this.model.hasRowEdits(i))return!1;const n=[];if(e||this.model.getEditMap().forEach((s,o)=>{if(!(!s||s.size===0)){for(const r of s.values())if(zl(r)){n.push(o);break}}}),kh(this.beans),!e&&this.editSvc?.checkNavWithValidation({rowNode:i})==="block-stop")return!1;super.stop(e,t);for(const s of n)this.dispatchRowEvent({rowNode:s},"rowValueChanged");return this.cleanupEditors({rowNode:i},!0),this.rowNode=void 0,!0}onCellFocusChanged(e){const{rowIndex:t}=e,i=e.previousParams;if(i?.rowIndex===t||e.sourceEvent instanceof KeyboardEvent)return;const n=Ei(this.beans,i);this.gos.get("invalidEditValueMode")==="block"&&n&&(this.model.getCellValidationModel().getCellValidation(n)||this.model.getRowValidationModel().getRowValidation(n))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){super.cleanupEditors(e,t);for(const i of this.startedRows)this.dispatchRowEvent({rowNode:i},"rowEditingStopped");this.startedRows.length=0}moveToNextEditingCell(e,t,i,n="ui",s=!1){const o=e.cellPosition;let r;this.model.suspend(!0);try{r=this.beans.navigation?.findNextCellToFocusOn(o,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(r===!1)return null;if(r==null)return!1;const a=r.cellPosition,l=e.isCellEditable(),c=r.isCellEditable(),d=a&&o.rowIndex===a.rowIndex&&o.rowPinned===a.rowPinned;l&&this.setFocusOutOnEditor(e),this.restoreEditors();const p=this.gos.get("suppressStartEditOnTab");return c&&!s?p?r.focusCell(!0,i):(r.comp?.getCellEditor()||Rf(this.beans,r,{event:i,cellStartedEdit:!0}),this.setFocusInOnEditor(r),r.focusCell(!1,i)):(c&&s&&this.setFocusInOnEditor(r),r.focusCell(!0,i)),!d&&!s&&(this.editSvc?.stopEditing({rowNode:e.rowNode},{event:i}),this.cleanupEditors(r,!0),p?r.focusCell(!0,i):this.editSvc.startEditing(r,{startedEdit:!0,event:i,source:n,ignoreEventKey:!0})),e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:i},n)=>{if(i!=="editing")return;const s=Ei(this.beans,{rowNode:t,column:n});s&&!s.comp?.getCellEditor()&&Rf(this.beans,s,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}},wEe=class extends c8{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t,i="ui"){const n=super.shouldStop(e,t,i);if(n!==null)return n;const{rowNode:s,column:o}=e||{};return(!this.rowNode||!this.column)&&s&&o?null:this.rowNode!==s||this.column!==o}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e){const{position:t,startedEdit:i,event:n,ignoreEventKey:s}=e;(this.rowNode!==t.rowNode||this.column!==t.column)&&super.cleanupEditors(),this.rowNode=t.rowNode,this.column=t.column,this.model.start(t),this.setupEditors({cells:[t],position:t,startedEdit:i,event:n,ignoreEventKey:s})}dispatchRowEvent(e,t,i){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){const{colModel:t,editSvc:i}=this.beans,{rowIndex:n,column:s,rowPinned:o}=e,r=uc(this.beans,{rowIndex:n,rowPinned:o}),a=Fk(s),l=t.getCol(a),c=e.previousParams;if(c){const d=Fk(c.column);if(c?.rowIndex===n&&d===a&&c?.rowPinned===o)return}i?.isEditing({rowNode:r,column:l},{withOpenEditor:!0})&&e.type==="cellFocused"||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,i,n="ui",s=!1){const o=this.beans.focusSvc.getFocusedCell();o&&(e=Ag(this.beans,o)??e);const r=e.cellPosition;let a;const l=this.beans.gos.get("editType")==="fullRow";l&&this.model.suspend(!0),s||(e.eGui.focus(),this.editSvc?.stopEditing(e,{source:this.editSvc?.isBatchEditing()?"ui":"api",event:i}));try{a=this.beans.navigation?.findNextCellToFocusOn(r,{backwards:t,startEditing:!0})}finally{l&&this.model.suspend(!1)}if(a===!1)return null;if(a==null)return!1;const c=a.cellPosition,d=e.isCellEditable(),p=a.isCellEditable(),g=c&&r.rowIndex===c.rowIndex&&r.rowPinned===c.rowPinned;d&&!s&&this.setFocusOutOnEditor(e);const m=this.gos.get("suppressStartEditOnTab");if(!g&&!s&&(super.cleanupEditors(a,!0),m?a.focusCell(!0,i):this.editSvc.startEditing(a,{startedEdit:!0,event:i,source:n,ignoreEventKey:!0})),p&&!s){if(a.focusCell(!1,i),m)a.focusCell(!0,i);else if(!a.comp?.getCellEditor()){const y=this.editSvc?.isEditing(a,{withOpenEditor:!0});Rf(this.beans,a,{event:i,cellStartedEdit:!0,silent:y}),this.setFocusInOnEditor(a),this.cleanupEditors(a)}}else p&&s&&this.setFocusInOnEditor(a),a.focusCell(!0,i);return e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},id={moduleName:"EditCore",version:ke,beans:[AMe,vEe],apiFunctions:{getEditingCells:ZRe,getEditRowValues:qRe,getCellEditorInstances:EMe,startEditingCell:JRe,stopEditing:XRe,isEditing:QRe,validateEdit:eEe},dynamicBeans:{singleCell:wEe,fullRow:CEe},dependsOn:[FD,t8],css:[ARe]},SEe={moduleName:"UndoRedoEdit",version:ke,beans:[DRe],apiFunctions:{undoCellEditing:YRe,redoCellEditing:KRe,getCurrentUndoSize:tEe,getCurrentRedoSize:iEe},dependsOn:[id]},xEe={moduleName:"TextEditor",version:ke,userComponents:{agCellEditor:bH,agTextCellEditor:bH},dependsOn:[id]},MEe={moduleName:"NumberEditor",version:ke,userComponents:{agNumberCellEditor:{classImp:_Re}},dependsOn:[id]},DEe={moduleName:"DateEditor",version:ke,userComponents:{agDateCellEditor:kRe,agDateStringCellEditor:NRe},dependsOn:[id]},AEe={moduleName:"CheckboxEditor",version:ke,userComponents:{agCheckboxCellEditor:ERe},dependsOn:[id]},REe={moduleName:"SelectEditor",version:ke,userComponents:{agSelectCellEditor:zRe},dependsOn:[id]},EEe={moduleName:"LargeTextEditor",version:ke,userComponents:{agLargeTextCellEditor:ORe},dependsOn:[id]},TEe={moduleName:"CustomEditor",version:ke,dependsOn:[id]},IEe=class extends he{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,zg(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),uye(e))}createColumns(e,t){const i=()=>{w0(this.beans,this.columns?.tree),this.columns=null},n=e.treeDepth,o=(this.columns?.treeDepth??-1)==n,r=this.generateSelectionCols();if(cye(r,this.columns?.list??[])&&o)return;i();const{colGroupSvc:l}=this.beans,c=l?.findDepth(e.tree)??0,d=l?.balanceTreeForAutoCols(r,c)??[];this.columns={list:r,tree:d,treeDepth:c,map:{}},t(g=>{if(!g)return null;const m=g.filter(y=>!Ec(y));return[...r,...m]})}updateColumns(e){const t=zg(e.source);for(const i of this.columns?.list??[]){const n=this.createSelectionColDef(e.currentValue);i.setColDef(n,null,t),Yr(this.beans,{state:[{...n,colId:i.getColId()}]},t)}}getColumn(e){return this.columns?.list.find(t=>Qy(t,e))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){const{gos:e,beans:t}=this,i=e.get("rowSelection");if(typeof i!="object"||!ch(e))return!1;const n=(t.autoColSvc?.getColumns()?.length??0)>0;if(i.checkboxLocation==="autoGroupColumn"&&n)return!1;const s=!!Vg(i),o=rx(i);return s||o}createSelectionColDef(e){const{gos:t}=this,i=e??t.get("selectionColumnDef"),n=t.get("enableRtl"),{rowSpan:s,spanRows:o,...r}=i??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:n?"right":"left",comparator(a,l,c,d){const p=c.isSelected(),g=d.isSelected();return p===g?0:p?1:-1},editable:!1,suppressFillHandle:!0,pinned:null,...r,colId:s6,chartDataType:"excluded"}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);const i=new ip(e,null,t,!1);return this.createBean(i),[i]}onSelectionOptionsChanged(e,t,i){const n=t&&typeof t!="string"?Vg(t):void 0,s=e&&typeof e!="string"?Vg(e):void 0,o=n!==s,r=t&&typeof t!="string"?rx(t):void 0,a=e&&typeof e!="string"?rx(e):void 0,l=r!==a,c=y0(e),d=y0(t);(o||l||c!==d)&&this.beans.colModel.refreshAll(i)}destroy(){w0(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(e,t,i){if(!this.columns?.list.length)return;const n=e.length+t.length+i.length;if(n===0)return;const s=this.columns.list[0];if(!s.isVisible())return;const o=()=>{let l;switch(s.pinned){case"left":case!0:l=e;break;case"right":l=i;break;default:l=t}l&&ea(l,s)};(this.beans.rowNumbersSvc?.getColumn(o6)?2:1)===n&&o()}};function kEe(e,t){if(!t.nodes.every(r=>r.rowPinned&&!fC(r)?(Se(59),!1):r.id===void 0?(Se(60),!1):!0))return;const{nodes:n,source:s,newValue:o}=t;e.selectionSvc?.setNodesSelected({nodes:n,source:s??"api",newValue:o})}function LEe(e,t,i="apiSelectAll"){e.selectionSvc?.selectAllRowNodes({source:i,selectAll:t})}function PEe(e,t,i="apiSelectAll"){e.selectionSvc?.deselectAllRowNodes({source:i,selectAll:t})}function NEe(e,t="apiSelectAllFiltered"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"filtered"})}function FEe(e,t="apiSelectAllFiltered"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"filtered"})}function OEe(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"currentPage"})}function BEe(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function GEe(e){return e.selectionSvc?.getSelectedNodes()??[]}function _Ee(e){return e.selectionSvc?.getSelectedRows()??[]}var VEe=class extends gwe{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=v0(e),this.groupSelectsDescendants=Uv(e),this.groupSelectsFiltered=C0(e)==="filteredDescendants",this.masterSelectsDetail=dz(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const t=Uv(e),i=v0(e),n=C0(e)==="filteredDescendants";this.masterSelectsDetail=dz(e)==="detail",(t!==this.groupSelectsDescendants||n!==this.groupSelectsFiltered||i!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=n,this.mode=i)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,i){if(this.isRowSelectionBlocked(t))return 0;const n=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,i);if(n==null)return 0;if(this.selectionCtx.selectAll=!1,"select"in n)return n.reset?this.resetNodes():this.selectRange(n.deselect,!1,i),this.selectRange(n.select,!0,i);{const s=n.checkFilteredNodes?d8(n.node):n.newValue;return this.setNodesSelected({nodes:[n.node],newValue:s,clearSelection:n.clearSelection,keepDescendants:n.keepDescendants,event:e,source:i})}}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:i,nodes:n,event:s,source:o,keepDescendants:r=!1}){if(n.length===0)return 0;const{gos:a}=this;if(!ch(a)&&e)return Se(132),0;if(n.length>1&&!this.isMultiSelect())return Se(130),0;let l=0;for(let c=0;c<n.length;c++){const d=n[c],p=og(d);if(p.rowPinned&&!fC(p)){Se(59);continue}if(p.id===void 0){Se(60);continue}this.groupSelectsFiltered&&p.group&&!a.get("treeData")||this.selectRowNode(p,e,s,o)&&(this.detailSelection.delete(p.id),l++),this.groupSelectsDescendants&&p.childrenAfterGroup?.length&&(l+=this.selectChildren(p,e,o))}return i||(n.length===1&&o==="api"&&this.selectionCtx.setRoot(og(n[0])),e&&(t||!this.isMultiSelect())&&(l+=this.clearOtherNodes(og(n[0]),r,o)),l>0&&(this.updateGroupsFromChildrenSelections(o),this.dispatchSelectionChanged(o))),l}selectRange(e,t,i){let n=0;return e.forEach(s=>{const o=og(s);if(o.group&&this.groupSelectsDescendants)return;this.selectRowNode(o,t,void 0,i)&&n++}),n>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),n}selectChildren(e,t,i){const n=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return n?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:i,nodes:n}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,n)=>{e(i)&&t.set(n,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:i,rowModel:n}=this.beans;if(!en(i))return!1;const s=n.rootNode;if(!s)return!1;t||(t=new Kv(!0,s),t.active=!1);let o=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==s){const a=this.calculateSelectedFromChildren(r);o=this.selectRowNode(r,a===null?!1:a,void 0,e)||o}}),o}clearOtherNodes(e,t,i){const n=new Map;let s=0;return this.selectedNodes.forEach(o=>{const r=o.id==e.id;if((t?!HEe(e,o):!0)&&!r){const l=this.selectedNodes.get(o.id);s+=this.setNodesSelected({nodes:[l],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:i}),this.groupSelectsDescendants&&o.parent&&n.set(o.parent.id,o.parent)}}),n.forEach(o=>{const r=this.calculateSelectedFromChildren(o);this.selectRowNode(o,r===null?!1:r,void 0,i)}),s}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new Ou(this.beans);return t.id=e.id,t.data=e.data,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!en(e))return;const i=t.getTopLevelNodes();if(i===null)return;const n=[];function s(o){for(let r=0,a=o.length;r<a;r++){const l=o[r];l.isSelected()?n.push(l):l.group&&l.childrenAfterGroup&&s(l.childrenAfterGroup)}}return s(i),n}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){const i=en(this.gos);let n=!1;const s=o=>{const r=this.selectRowNode(og(o),!1,void 0,e);n||(n=r)};if(t==="currentPage"||t==="filtered"){if(!i){oi(102);return}this.getNodesToSelect(t).forEach(s)}else this.selectedNodes.forEach(s),this.reset(e);if(this.selectionCtx.selectAll=!1,i&&this.groupSelectsDescendants){const o=this.updateGroupsFromChildrenSelections(e);n||(n=o)}n&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,i=0;return this.getNodesToSelect(e).forEach(n=>{this.groupSelectsDescendants&&n.group||(n.isSelected()?t++:n.selectable&&i++)}),{selectedCount:t,notSelectedCount:i}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:i}=this.getSelectedCounts(e);return u8(t,i)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[],i=s=>t.push(s);if(e==="currentPage")return this.forEachNodeOnPage(s=>{if(!s.group){i(s);return}if(!s.expanded&&!s.footer){const o=r=>{i(r),r.childrenAfterFilter?.forEach(o)};o(s);return}this.groupSelectsDescendants||i(s)}),t;const n=this.beans.rowModel;return e==="filtered"?(n.forEachNodeAfterFilter(i),t):(n.forEachNode(i),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:i}=this.beans,n=t.getFirstRow(),s=t.getLastRow();for(let o=n;o<=s;o++){const r=i.getRow(o);r&&e(r)}}selectAllRowNodes(e){const{gos:t,selectionCtx:i}=this;if(!ch(t)){Se(132);return}if(Kme(t)&&!b0(t)){Se(130);return}if(!this.canSelectAll())return;const{source:n,selectAll:s}=e;let o=!1;if(this.getNodesToSelect(s).forEach(r=>{const a=this.selectRowNode(og(r),!0,void 0,n);o||(o=a)}),i.selectAll=!0,en(t)&&this.groupSelectsDescendants){const r=this.updateGroupsFromChildrenSelections(n);o||(o=r)}o&&this.dispatchSelectionChanged(n)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,i){if(e||(e=[]),!Array.isArray(e)){oi(103);return}const n=new Set(e),s=[];this.beans.rowModel.forEachNode(o=>{n.has(o.id)&&s.push(o)}),i&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:s,source:t})}canSelectAll(){return en(this.beans.gos)}updateSelectable(e){const{gos:t,rowModel:i}=this.beans;if(!ch(t))return;const n="selectableChanged",s=e!==void 0,o=en(t)&&this.groupSelectsDescendants,r=[],a=l=>{if(s&&!l.group)return;if(o&&l.group){const d=l.childrenAfterGroup?.some(p=>p.selectable)??!1;this.setRowSelectable(l,d,!0);return}!this.updateRowSelectable(l,!0)&&l.isSelected()&&r.push(l)};if(o){if(e===void 0){const l=i.rootNode;e=l?new Kv(!1,l):void 0}e?.forEachChangedNodeDepthFirst(a,!s,!s)}else i.forEachNode(a);r.length&&this.setNodesSelected({nodes:r,newValue:!1,source:n}),!s&&o&&this.updateGroupsFromChildrenSelections?.(n)}updateSelectableAfterGrouping(e){this.updateSelectable(e),this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections?.("rowGroupChanged",e)&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){if(!this.masterSelectsDetail)return;const i=e.detailNode?.detailGridInfo?.api;if(!i)return;const n=zEe(i);if(e.isSelected()!==n&&this.selectRowNode(e,n,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!n){const o=this.detailSelection.get(e.id)??new Set;for(const r of i.getSelectedNodes())o.add(r.id);this.detailSelection.set(e.id,o)}}setDetailSelectionState(e,t,i){if(this.masterSelectsDetail){if(!b0(t)){Se(269);return}switch(e.isSelected()){case!0:{i.selectAll();break}case!1:{i.deselectAll();break}case void 0:{const n=this.detailSelection.get(e.id);if(n){const s=[];for(const o of n){const r=i.getRowNode(o);r&&s.push(r)}i.setNodesSelected({nodes:s,newValue:!0,source:"masterDetail"})}break}}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function og(e){return fC(e)?e.pinnedSibling:e.footer?e.sibling:e}function zEe(e){let t=0,i=0;return e.forEachNode(n=>{n.isSelected()?t++:n.selectable&&i++}),u8(t,i)}function u8(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function HEe(e,t){let i=t.parent;for(;i;){if(i===e)return!0;i=i.parent}return!1}function d8(e){const t=e.isSelected()===!1,i=e.childrenAfterFilter?.some(d8)??!1;return t||i}var jEe={moduleName:"SharedRowSelection",version:ke,beans:[IEe],apiFunctions:{setNodesSelected:kEe,selectAll:LEe,deselectAll:PEe,selectAllFiltered:NEe,deselectAllFiltered:FEe,selectAllOnCurrentPage:OEe,deselectAllOnCurrentPage:BEe,getSelectedNodes:GEe,getSelectedRows:_Ee}},WEe={moduleName:"RowSelection",version:ke,rowModels:["clientSide","infinite","viewport"],beans:[VEe],dependsOn:[jEe]};function UEe(e){e.expansionSvc?.expandAll(!0)}function $Ee(e){e.expansionSvc?.expandAll(!1)}function h8(e){e.rowModel?.onRowHeightChanged()}function p8(e){if(e.rowAutoHeight?.active){Se(3);return}e.rowModel?.resetRowHeights()}function YEe(e,t,i){const n=YDe(e);if(n){if(e.rowGroupColsSvc?.columns.length===0){if(t<0){oi(238);return}n.setRowCount(t,i);return}oi(28);return}ND(e)?.setRowCount(t,i)}function KEe(e){return tp(e.gos)?e.rowModel.getBlockStates():e.rowNodeBlockLoader?.getBlockState()??{}}function qEe(e){return e.rowModel.isLastRowIndexKnown()}var ZEe={moduleName:"CsrmSsrmSharedApi",version:ke,apiFunctions:{expandAll:UEe,collapseAll:$Ee}},XEe={moduleName:"RowModelSharedApi",version:ke,apiFunctions:{onRowHeightChanged:h8,resetRowHeights:p8}},QEe={moduleName:"SsrmInfiniteSharedApi",version:ke,apiFunctions:{setRowCount:YEe,getCacheBlockState:KEe,isLastRowIndexKnown:qEe}},JEe=class extends he{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(n=>{if(!n){oi(18),t||oi(20);return}if(this.isGridApi(n))return n;const s=n;return"current"in s?s.current?.api:(s.api||oi(19),s.api)}).filter(n=>!!n&&!n.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){if(!this.consuming)for(const t of this.getAlignedGridApis())t.isDestroyed()||t.dispatchEvent(e)}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach(n=>{i.push(t(n))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":Se(21);break}})}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;if(t)for(const i of e.columnGroups){let n=null;i&&(n=t.getProvidedColGroup(i.getGroupId())),!(i&&!n)&&t.setColumnGroupOpened(n,i.isExpanded(),"alignedGridChanged")}}processColumnEvent(e){const t=e.column;let i=null;const n=this.beans,{colResize:s,ctrlsSvc:o,colModel:r}=n;if(t&&(i=r.getColDefCol(t.getColId())),t&&!i)return;const a=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const p=e.api.getColumnState().map(g=>({colId:g.colId}));Yr(n,{state:p,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const p=e.api.getColumnState().map(g=>({colId:g.colId,hide:g.hide}));Yr(n,{state:p},"alignedGridChanged")}break;case"columnPinned":{const p=e.api.getColumnState().map(g=>({colId:g.colId,pinned:g.pinned}));Yr(n,{state:p},"alignedGridChanged")}break;case"columnResized":{const d=e,p={};for(const g of a)p[g.getId()]={key:g.getColId(),newWidth:g.getActualWidth()};for(const g of d.flexColumns??[])p[g.getId()]&&delete p[g.getId()];s?.setColumnWidths(Object.values(p),!1,d.finished,"alignedGridChanged");break}}const c=o.getGridBodyCtrl().isVerticalScrollShowing();for(const d of this.getAlignedGridApis())d.setGridOption("alwaysShowVerticalScroll",c)}},eTe={moduleName:"AlignedGrids",version:ke,beans:[JEe],dependsOn:[bK]},tTe=class extends he{constructor(e){super(),this.rootNode=e,this.nextId=0,this.allNodesMap={},wH(e)}getRowNode(e){return this.allNodesMap[e]}setNewRowData(e){const{selectionSvc:t,pinnedRowModel:i,groupStage:n}=this.beans;t?.reset("rowDataChanged"),i?.isManual()&&i.reset(),this.dispatchRowDataUpdateStarted(e),this.allNodesMap=Object.create(null),this.nextId=0;const s=wH(this.rootNode),o=new Array(e.length);s._leafs=o;let r=0;const a=n?.getNestedDataGetter(),l=a?new Set:null,c=(d,p)=>{const g=d.level+1;for(let m=0,y=p.length;m<y;++m){const b=p[m];if(!b)continue;const C=this.createRowNode(b,g);if(C.sourceRowIndex=r,o[r++]=C,l&&!l.has(b)){l.add(b),C.treeParent=d;const w=a(b);w&&c(C,w)}}};c(s,e),o.length=r}setImmutableRowData(e,t){const{rootNode:i,gos:n}=this;this.dispatchRowDataUpdateStarted(t);const s=xf(n),o=e.changedRowNodes,{adds:r,updates:a}=o,l=new Set,c=[],d=this.beans.groupStage?.getNestedDataGetter();let p=n.get("suppressMaintainUnsortedOrder")?void 0:!1,g=-1,m=!1;const y=(w,x)=>{if(!p&&p!==void 0){const M=w.sourceRowIndex;p=M<=g,g=M}w.data!==x&&(w.updateData(x),r.has(w)||a.add(w),!w.selectable&&w.isSelected()&&c.push(w))},b=(w,x,M)=>{for(let E=0,I=x.length;E<I;++E){const N=x[E];if(!N)continue;let T=this.getRowNode(s({data:N,level:M}));if(T?(y(T,N),m||(m=!!d&&T.treeParent!==w)):(T=this.createRowNode(N,M),r.add(T)),!d||l.has(T)){l.add(T);continue}l.add(T),T.treeParent=w;const P=d(N);P&&b(T,P,M+1)}};b(i,t,0);const C=this.deleteUnusedNodes(l,o,c)||p||r.size>0;if(C){const w=i._leafs??(i._leafs=[]);p===void 0?rTe(w,l,o):oTe(w,l)&&(o.reordered=!0)}(C||m||a.size)&&(e.rowDataUpdated=!0,this.deselect(c))}deleteUnusedNodes(e,{removals:t},i){const n=this.rootNode._leafs;for(let s=0,o=n.length;s<o;s++){const r=n[s];e.has(r)||(t.add(r),r.isSelected()&&i.push(r),this.deleteNode(r))}return t.size>0}updateRowData(e,t){if(this.dispatchRowDataUpdateStarted(e.add),this.beans.groupStage?.getNestedDataGetter())return Se(268),{remove:[],update:[],add:[]};const i=[],n=xf(this.gos),s=this.executeRemove(n,e,t,i),o=this.executeUpdate(n,e,t,i),r=this.executeAdd(e,t);return this.deselect(i),{remove:s,update:o,add:r}}executeRemove(e,{remove:t},{adds:i,updates:n,removals:s},o){const r=this.rootNode._leafs,a=r?.length,l=t?.length;if(!l||!a)return[];let c=0,d=a,p=0,g;const m=new Array(l);for(let y=0;y<l;++y){const b=this.lookupNode(e,t[y]);if(!b)continue;const C=b.sourceRowIndex;C<d&&(d=C),C>p&&(p=C),b.isSelected()&&o.push(b),this.deleteNode(b),i.delete(b)?(g??(g=new Set),g.add(b)):(n.delete(b),s.add(b)),m[c++]=b}return m.length=c,c&&sTe(r,d,p,s,g),m}executeUpdate(e,{update:t},{adds:i,updates:n},s){const o=t?.length;if(!o)return[];const r=new Array(o);let a=0;for(let l=0;l<o;l++){const c=t[l],d=this.lookupNode(e,c);d&&(d.updateData(c),!d.selectable&&d.isSelected()&&s.push(d),r[a++]=d,i.has(d)||n.add(d))}return r.length=a,r}executeAdd(e,t){var i;const n=(i=this.rootNode)._leafs??(i._leafs=[]),s=n.length,o=e.add,r=o?.length;if(!r)return[];const a=s+r;let l=this.sanitizeAddIndex(n,e.addIndex);if(l<s){for(let p=s-1,g=a-1;p>=l;--p){const m=n[p];m.sourceRowIndex=g,n[g--]=m}t.reordered=!0}n.length=a;const c=new Array(r),d=t.adds;for(let p=0;p<r;p++){const g=this.createRowNode(o[p],0);d.add(g),g.sourceRowIndex=l,n[l]=g,c[p]=g,l++}return c}dispatchRowDataUpdateStarted(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}deselect(e){const t="rowDataChanged",i=this.beans.selectionSvc;e.length&&i?.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),i?.updateGroupsFromChildrenSelections?.(t),e.length&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:i?.getSelectedNodes()??null,serverSideState:null})}createRowNode(e,t){const i=new Ou(this.beans);i.parent=this.rootNode,i.level=t,i.group=!1,i.expanded=!1,i.setDataAndId(e,String(this.nextId++));const n=i.id,s=this.allNodesMap;return s[n]&&Se(2,{nodeId:n}),s[n]=i,i}deleteNode(e){e.clearRowTopAndRowIndex();const t=e.id,i=this.allNodesMap;i[t]===e&&delete i[t];const n=e.pinnedSibling;n&&this.beans.pinnedRowModel?.pinRow(n,null)}lookupNode(e,t){if(!e)return nTe(this.rootNode._leafs,t);const i=e({data:t,level:0}),n=this.allNodesMap[i];return n||(oi(4,{id:i}),null)}sanitizeAddIndex(e,t){const i=e.length;if(typeof t!="number"||t<0||t>=i||Number.isNaN(t))return i;t=Math.ceil(t);const n=this.gos;return t>0&&n.get("treeData")&&n.get("getDataPath")&&(t=iTe(e,t)),t}},iTe=(e,t)=>{for(let i=0,n=e.length;i<n;i++)if(e[i]?.rowIndex==t-1)return i+1;return t},wH=e=>{e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",e._leafs?.length!==0&&(e._leafs=[]);const t=[],i=[],n=[],s=[];e.childrenAfterGroup=t,e.childrenAfterSort=i,e.childrenAfterAggFilter=n,e.childrenAfterFilter=s;const o=e.sibling;return o&&(o.childrenAfterGroup=t,o.childrenAfterSort=i,o.childrenAfterAggFilter=n,o.childrenAfterFilter=s,o.childrenMapped=e.childrenMapped),e.updateHasChildren(),e},nTe=(e,t)=>{if(e)for(let i=0,n=e.length;i<n;i++){const s=e[i];if(s.data===t)return s}return oi(5,{data:t}),null},sTe=(e,t,i,n,s)=>{t=Math.max(0,t);for(let o=t,r=e.length;o<r;++o){const a=e[o];o<=i&&(n.has(a)||s?.has(a))||(a.sourceRowIndex=t,e[t++]=a)}e.length=t},oTe=(e,t)=>{const i=t.size;e.length=i;let n=0,s=!1,o=!1;for(const r of t){const a=r.sourceRowIndex;a===n?o||(o=s):(a>=0?o=!0:s=!0,r.sourceRowIndex=n,e[n]=r),++n}return o},rTe=(e,t,{removals:i,adds:n})=>{const s=e.length;e.length=t.size;let o=0;for(let r=0;r<s;++r){const a=e[r];i.has(a)||(o!==r&&(a.sourceRowIndex=o,e[o]=a),++o)}for(const r of n)r.sourceRowIndex<0&&(r.sourceRowIndex=o,e[o++]=r);e.length=o},g8=e=>{const t=e.childrenAfterSort,i=e.sibling;if(i&&(i.childrenAfterSort=t),!!t)for(let n=0,s=t.length-1;n<=s;n++){const o=t[n],r=n===0,a=n===s;o.firstChild!==r&&(o.firstChild=r,o.dispatchRowEvent("firstChildChanged")),o.lastChild!==a&&(o.lastChild=a,o.dispatchRowEvent("lastChildChanged")),o.childIndex!==n&&(o.childIndex=n,o.dispatchRowEvent("childIndexChanged"))}},aTe=class extends he{constructor(){super(...arguments),this.beanName="sortStage",this.step="sort",this.refreshProps=["postSortRows","groupDisplayType","accentedSort"]}execute(e){const t=this.beans.sortSvc.getSortOptions(),i=t.length>0&&!!e.changedRowNodes&&this.gos.get("deltaSort");this.sort(t,i,e.changedRowNodes,e.changedPath)}sort(e,t,i,n){const{gos:s,colModel:o,rowGroupColsSvc:r,rowNodeSorter:a,rowRenderer:l,showRowGroupCols:c}=this.beans,d=s.get("groupMaintainOrder"),p=o.getCols().some(x=>x.isRowGroupActive()),g=r?.columns,m=o.isPivotMode(),y=s.getCallback("postSortRows");let b=!1,C;const w=x=>{const M=m&&x.leafGroup;let E=d&&p&&!x.leafGroup;E&&(C??(C=this.shouldSortContainsGroupCols(e)),E&&(E=!C));let I=null;if(E){let N=!1;if(g){const T=x.level+1;T<g.length&&(N=g[T].getSort()===null)}N||(I=uTe(x))}else!e.length||M||(t&&i?I=lTe(a,x,i,n,e):I=a.doFullSort(x.childrenAfterAggFilter,e));if(I||(I=x.childrenAfterAggFilter?.slice(0)??[]),b||(b=x.childrenAfterSort?.[0]!==I[0]),x.childrenAfterSort=I,g8(x),y){const N={nodes:x.childrenAfterSort};y(N)}};if(n?.forEachChangedNodeDepthFirst(w),b&&s.get("groupHideOpenParents")){const x=c?.getShowRowGroupCols();x?.length&&l.refreshCells({columns:x,force:!0})}}shouldSortContainsGroupCols(e){const t=e.length;if(!t)return!1;if(Ta(this.gos)){for(let i=0;i<t;++i){const n=e[i].column;if(n.isPrimary()&&n.isRowGroupActive())return!0}return!1}for(let i=0;i<t;++i)if(e[i].column.getColDef().showRowGroup)return!0;return!1}},lTe=(e,t,i,n,s)=>{const o=t.childrenAfterAggFilter,r=t.childrenAfterSort;if(!r)return e.doFullSort(o,s);const a=new Set,l=[],{updates:c,adds:d}=i;for(let g=0,m=o.length;g<m;++g){const y=o[g];c.has(y)||d.has(y)||n&&!n.canSkip(y)?l.push({currentPos:l.length,rowNode:y}):a.add(y)}const p=r.filter(g=>a.has(g)).map((g,m)=>({currentPos:m,rowNode:g}));return l.sort((g,m)=>e.compareRowNodes(s,g,m)),cTe(e,s,l,p)},cTe=(e,t,i,n)=>{let s=0,o=0;const r=i.length,a=n.length,l=new Array(r+a);let c=0;for(;s<r&&o<a;){const d=i[s],p=n[o];e.compareRowNodes(t,d,p)<0?(l[c++]=d.rowNode,++s):(l[c++]=p.rowNode,++o)}for(;s<r;)l[c++]=i[s++].rowNode;for(;o<a;)l[c++]=n[o++].rowNode;return l},uTe=e=>{const t=e.childrenAfterSort,i=e.childrenAfterAggFilter,n=t?.length,s=i?.length;if(!n||!s)return null;const o=new Array(s),r=new Set;for(let l=0;l<s;++l)r.add(i[l]);let a=0;for(let l=0;l<n;++l){const c=t[l];r.delete(c)&&(o[a++]=c)}if(r.size===0&&a===n)return t;for(const l of r)o[a++]=l;return o.length=a,o},dTe=class extends he{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowCountReady=!1,this.nodeManager=void 0,this.rowsToDisplay=[],this.rowDataUpdatedPending=!1,this.asyncTransactions=null,this.asyncTransactionsTimer=0,this.started=!1,this.refreshingModel=!1,this.rowNodesCountReady=!1,this.stages=[],this.stagesRefreshProps=new Map,this.onRowHeightChanged_debounced=ps(this,this.onRowHeightChanged.bind(this),100)}postConstruct(){const e=this.beans,t=new Ou(e);this.rootNode=t,this.nodeManager=this.createBean(new tTe(t));const i=this.refreshModel.bind(this,{step:"group"}),n=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:n,columnRowGroupChanged:i,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:i,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)}),this.addPropertyListeners()}addPropertyListeners(){const{beans:e,stagesRefreshProps:t}=this,i=[e.groupStage,e.filterStage,e.pivotStage,e.aggStage,e.sortStage,e.filterAggStage,e.flattenStage].filter(n=>!!n);this.stages=i;for(let n=i.length-1;n>=0;--n)for(const s of i[n].refreshProps)t.set(s,n);this.addManagedPropertyListeners([...t.keys()],n=>{const s=n.changeSet?.properties;s&&this.onPropChange(s)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,i,n){let s,o=!1;do{s=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(r,i),c=Math.min(a,n);for(let d=l;d<=c;d++){const p=this.getRow(d);if(p.rowHeightEstimated){const g=Pu(this.beans,p);p.setRowHeight(g.height),s=!0,o=!0}}s&&this.setRowTopAndRowIndex()}while(s);return o}onPropChange(e){const{nodeManager:t,gos:i,beans:n}=this,s=n.groupStage;if(!t)return;const o=new Set(e),r=s?.onPropChange(o);let a;o.has("rowData")?a=i.get("rowData"):r&&(a=s?.extractData()),a&&!Array.isArray(a)&&(a=null,Se(1));const l={step:"nothing",changedProps:o};a&&(!r&&!this.isEmpty()&&a.length>0&&i.exists("getRowId")&&!i.get("resetRowDataOnUpdate")?(l.keepRenderedRows=!0,l.animate=!i.get("suppressAnimationFrame"),l.changedRowNodes=new px,t.setImmutableRowData(l,a)):(l.rowDataUpdated=!0,l.newData=!0,t.setNewRowData(a),this.rowNodesCountReady=!0));const c=l.rowDataUpdated?"group":this.getRefreshedStage(e);c&&(l.step=c,this.refreshModel(l))}getRefreshedStage(e){const{stages:t,stagesRefreshProps:i}=this,n=t.length;let s=n;for(let o=0,r=e.length;o<r&&s;++o)s=Math.min(s,i.get(e[o])??s);return s<n?t[s].step:null}setRowTopAndRowIndex(e){const{beans:t,rowsToDisplay:i}=this,n=t.environment.getDefaultRowHeight();let s=0;const o=gs(this.gos,"normal");for(let r=0,a=i.length;r<a;++r){const l=i[r],c=l.id;if(c!=null&&e?.add(c),l.rowHeight==null){const d=Pu(t,l,o,n);l.setRowHeight(d.height,d.estimated)}l.setRowTop(s),l.setRowIndex(r),s+=l.rowHeight}}clearRowTopAndRowIndex(e,t){const i=e.active,n=r=>{r?.id!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},s=r=>{n(r),n(r.detailNode),n(r.sibling);const a=r.childrenAfterGroup;if(!r.hasChildren()||!a)return;const l=r.level==-1;if(!(i&&!l&&!r.expanded))for(let d=0,p=a.length;d<p;++d)s(a[d])},o=this.rootNode;o&&s(o)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay.length}getTopLevelRowCount(){const{rootNode:e,rowsToDisplay:t}=this;if(!e||!t.length)return 0;if(t[0]===e)return 1;const n=e.sibling?.displayed?1:0;return(e.childrenAfterSort?.length??0)+n}getTopLevelRowDisplayedIndex(e){const{beans:t,rootNode:i,rowsToDisplay:n}=this;if(!i||!n.length||n[0]===i)return e;const o=i.childrenAfterSort,r=l=>{let c=o[l];if(this.gos.get("groupHideOpenParents"))for(;c.expanded&&c.childrenAfterSort&&c.childrenAfterSort.length>0;)c=c.childrenAfterSort[0];return c.rowIndex},a=t.footerSvc;return a?a?.getTopDisplayIndex(n,e,o,r):r(e)}getTopLevelIndexFromDisplayedIndex(e){const{rootNode:t,rowsToDisplay:i}=this;if(!t||!i.length||i[0]===t)return e;let s=this.getRow(e);s.footer&&(s=s.sibling);let o=s.parent;for(;o&&o!==t;)s=o,o=s.parent;const r=t.childrenAfterSort?.indexOf(s)??-1;return r>=0?r:e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){this.refreshModel({step:"map",keepRenderedRows:!0,animate:_g(this.gos)})}onFilterChanged({afterDataChange:e,columns:t}){if(!e){const n=t.length===0||t.some(s=>s.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:n,keepRenderedRows:!0,animate:_g(this.gos)})}}onSortChanged(){this.refreshModel({step:"sort",keepRenderedRows:!0,animate:_g(this.gos)})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.beans.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new Kv(!1,this.rootNode);return t.active=e,t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:i,rowDataUpdated:n}=e;return!(!t||i||!n||t.removals.size||t.adds.size)}refreshModel(e){const{nodeManager:t,beans:i,eventSvc:n,started:s,refreshingModel:o}=this;if(!t)return;const r=!!e.rowDataUpdated,a=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&r));if(s&&r&&n.dispatchEvent({type:"rowDataUpdated"}),!s||o||i.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e)){this.rowDataUpdatedPending||(this.rowDataUpdatedPending=r);return}switch(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.step="group"),this.refreshingModel=!0,i.masterDetailSvc?.refreshModel(e),r&&e.step!=="group"&&i.colFilter?.refreshModel(),e.step){case"group":this.doGrouping(e);case"filter":this.doFilter(a);case"pivot":this.doPivot(a);case"aggregate":this.doAggregate(a);case"filter_aggregates":this.doFilterAggregates(a);case"sort":this.doSort(e.changedRowNodes,a);case"map":this.doRowsToDisplay()}const l=new Set;this.setRowTopAndRowIndex(l),this.clearRowTopAndRowIndex(a,l),this.refreshingModel=!1,n.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){return!this.rootNode?._leafs?.length||!this.beans.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,n=!1;const s=[],o=Uv(this.gos);return this.forEachNodeAfterFilterAndSort(r=>{if(n)return;if(i&&(r===t||r===e)&&(n=!0,o&&r.group)){f8(s,r);return}if(!i){if(r!==t&&r!==e)return;i=!0,t===e&&(n=!0)}(!r.group||!o)&&s.push(r)}),s}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay,i=t.length;if(this.isEmpty()||i===0)return-1;let n=0,s=i-1;if(e<=0)return 0;if(t[s].rowTop<=e)return s;let r=-1,a=-1;for(;;){const l=Math.floor((n+s)/2),c=t[l];if(this.isRowInPixel(c,e)||(c.rowTop<e?n=l+1:c.rowTop>e&&(s=l-1),r===n&&a===s))return l;r=n,a=s}}isRowInPixel(e,t){const i=e.rowTop,n=i+e.rowHeight;return i<=t&&n>t}forEachLeafNode(e){const t=this.rootNode?._leafs;if(t)for(let i=0,n=t.length;i<n;++i)e(t[i],i)}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){const t=this.rowsToDisplay;for(let i=0,n=t.length;i<n;++i)e(t[i],i)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,i=>i.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,i=>i.childrenAfterSort)}forEachPivotNode(e,t,i){const{colModel:n,rowGroupColsSvc:s}=this.beans;if(!n.isPivotMode())return;if(!s?.columns.length){e(this.rootNode,0);return}const o=i?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,r=>r.leafGroup?null:r[o])}depthFirstSearchRowNodes(e,t=!1,i=o=>o.childrenAfterGroup,n=this.rootNode,s=0){let o=s;if(!n)return o;const r=n===this.rootNode;if(r||e(n,o++),n.hasChildren()&&!n.footer){const a=i(n);if(a){const l=this.beans.footerSvc;o=l?.addTotalRows(o,n,e,t,r,"top")??o;for(const c of a)o=this.depthFirstSearchRowNodes(e,t,i,c,o);return l?.addTotalRows(o,n,e,t,r,"bottom")??o}}return o}doAggregate(e){const t=this.rootNode;t&&this.beans.aggStage?.execute({rowNode:t,changedPath:e})}doFilterAggregates(e){const t=this.rootNode,i=this.beans.filterAggStage;if(i){i.execute({rowNode:t,changedPath:e});return}t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){const i=this.beans.sortStage;if(i){i.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t});return}t.forEachChangedNodeDepthFirst(n=>{n.childrenAfterSort=n.childrenAfterAggFilter.slice(0),g8(n)})}doGrouping(e){const t=this.rootNode,n=this.beans.groupStage?.execute({rowNode:t,changedRowNodes:e.changedRowNodes,changedPath:e.changedPath,afterColumnsChanged:!!e.afterColumnsChanged});if(n===void 0){const s=t._leafs;t.childrenAfterGroup=s,t.updateHasChildren();const o=t.sibling;o&&(o.childrenAfterGroup=s)}(n||e.rowDataUpdated)&&this.beans.colFilter?.refreshModel(),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){const t=this.beans.filterStage;if(t){t.execute({rowNode:this.rootNode,changedPath:e});return}e.forEachChangedNodeDepthFirst(i=>{i.childrenAfterFilter=i.childrenAfterGroup,VK(i)},!0)}doPivot(e){this.beans.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){const t=this.nodeManager?.getRowNode(e);return typeof t=="object"?t:typeof e=="string"&&e.indexOf(Dk)===0?this.beans.groupStage?.getNode(e):void 0}batchUpdateRowData(e,t){if(!this.asyncTransactionsTimer){this.asyncTransactions=[];const i=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimer=setTimeout(()=>this.executeBatchUpdateRowData(),i)}this.asyncTransactions.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){const e=this.asyncTransactionsTimer;e&&(clearTimeout(e),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){const{nodeManager:e,beans:t,eventSvc:i,asyncTransactions:n}=this;if(!e)return;t.valueCache?.onDataChanged();const s=[],o=[],r=new px;for(const{rowDataTransaction:a,callback:l}of n??[]){this.rowNodesCountReady=!0;const c=e.updateRowData(a,r);s.push(c),l&&o.push(l.bind(null,c))}this.commitTransactions(r),o.length>0&&setTimeout(()=>{for(let a=0,l=o.length;a<l;a++)o[a]()},0),s.length>0&&i.dispatchEvent({type:"asyncTransactionsFlushed",results:s}),this.asyncTransactionsTimer=0,this.asyncTransactions=null}updateRowData(e){const t=this.nodeManager;if(!t)return null;this.beans.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;const i=new px,n=t.updateRowData(e,i);return this.commitTransactions(i),n}commitTransactions(e){this.refreshModel({step:"group",rowDataUpdated:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:e,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{beans:e,rootNode:t}=this,i=e.flattenStage;if(i){this.rowsToDisplay=i.execute({rowNode:t});return}const n=this.rootNode.childrenAfterSort??[];for(const s of n)s.setUiLevel(0);this.rowsToDisplay=n}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0);const i=e.sibling;i?.setRowHeight(i.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i?.setRowHeight(i.rowHeight,!0);const n=t.sibling;n?.setRowHeight(n.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){e.rowHeightChanged&&!this.beans.rowAutoHeight?.active&&this.resetRowHeights()}onGridReady(){this.started||this.setInitialData()}destroy(){super.destroy(),this.nodeManager=this.destroyBean(this.nodeManager),this.started=!1,this.rootNode=null,this.rowsToDisplay=[],this.asyncTransactions=null,clearTimeout(this.asyncTransactionsTimer)}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},f8=(e,t)=>{const i=t.childrenAfterGroup;if(i)for(let n=0,s=i.length;n<s;++n){const o=i[n];o.data&&e.push(o),o.group&&f8(e,o)}};function hTe(e){e.expansionSvc?.onGroupExpandedOrCollapsed()}function pTe(e,t){const i=td(e);i&&((!t||t==="everything")&&(t="group"),i.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function gTe(e){return td(e)?.isEmpty()??!0}function fTe(e,t){td(e)?.forEachLeafNode(t)}function mTe(e,t){td(e)?.forEachNodeAfterFilter(t)}function yTe(e,t){td(e)?.forEachNodeAfterFilterAndSort(t)}function vTe(e,t){return e.frameworkOverrides.wrapIncoming(()=>td(e)?.updateRowData(t))}function bTe(e,t,i){e.frameworkOverrides.wrapIncoming(()=>td(e)?.batchUpdateRowData(t,i))}function CTe(e){e.frameworkOverrides.wrapIncoming(()=>td(e)?.flushAsyncTransactions())}function wTe(e){return e.selectionSvc?.getBestCostNodeSelection()}var STe={moduleName:"ClientSideRowModel",version:ke,rowModels:["clientSide"],beans:[dTe,aTe],dependsOn:[OK]},xTe={moduleName:"ClientSideRowModelApi",version:ke,apiFunctions:{onGroupExpandedOrCollapsed:hTe,refreshClientSideRowModel:pTe,isRowDataEmpty:gTe,forEachLeafNode:fTe,forEachNodeAfterFilter:mTe,forEachNodeAfterFilterAndSort:yTe,applyTransaction:vTe,applyTransactionAsync:bTe,flushAsyncTransactions:CTe,getBestCostNodeSelection:wTe,resetRowHeights:p8,onRowHeightChanged:h8},dependsOn:[ZEe,XEe]},MTe=class extends he{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:i,columnKeys:n,skipRowGroups:s,exportRowNumbers:o}=t,r=this.getColumnsToExport({allColumns:i,skipRowGroups:s,columnKeys:n,exportRowNumbers:o});return[this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t)].reduce((a,l)=>l(a),e).parse()}processRow(e,t,i,n){const s=t.shouldRowBeSkipped||(()=>!1),r=t.rowPositions!=null||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!r,l=this.colModel.isPivotMode()?n.leafGroup:!n.group,c=!!n.footer,d=n.allChildrenCount===1&&n.childrenAfterGroup?.length===1&&$me(this.gos,n);if(!l&&!c&&(t.skipRowGroups||d||a)||t.onlySelected&&!n.isSelected()||t.skipPinnedTop&&n.rowPinned==="top"||t.skipPinnedBottom&&n.rowPinned==="bottom"||n.stub||n.level===-1&&!l&&!c||s($e(this.gos,{node:n})))return;const m=e.onNewBodyRow(n);if(i.forEach((y,b)=>{m.onColumn(y,b,n)}),t.getCustomContentBelowRow){const y=t.getCustomContentBelowRow($e(this.gos,{node:n}));y&&e.addCustomContent(y)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const n=new f6,{colGroupSvc:s}=this.beans,o=s?s.createColumnGroups({columns:t,idCreator:n,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(o,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const n=i.onNewHeaderRow();t.forEach((s,o)=>{n.onColumn(s,o,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{const n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="top").sort((s,o)=>s.rowIndex-o.rowIndex).map(s=>this.pinnedRowModel?.getPinnedTopRow(s.rowIndex)).forEach(n):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("top",n),i}}processRows(e,t){return i=>{const n=this.rowModel,s=en(this.gos),o=tp(this.gos),r=!s&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(c=>c.rowPinned==null).sort((c,d)=>c.rowIndex-d.rowIndex).map(c=>n.getRow(c.rowIndex)).forEach(a);else if(this.colModel.isPivotMode())s?n.forEachPivotNode(a,!0,l==="filteredAndSorted"):o?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a);else if(e.onlySelectedAllPages||r){const c=this.beans.selectionSvc?.getSelectedNodes()??[];this.replicateSortedOrder(c),c.forEach(a)}else l==="all"?n.forEachNode(a):s||o?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a);return i}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:i}=this.beans;if(!t||!i)return;const n=t.getSortOptions(),s=(o,r)=>o.rowIndex!=null&&r.rowIndex!=null?o.rowIndex-r.rowIndex:o.level===r.level?o.parent?.id===r.parent?.id?i.compareRowNodes(n,{rowNode:o,currentPos:o.rowIndex??-1},{rowNode:r,currentPos:r.rowIndex??-1}):s(o.parent,r.parent):o.level>r.level?s(o.parent,r):s(o,r.parent);e.sort(s)}processPinnedBottomRows(e,t){return i=>{const n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="bottom").sort((s,o)=>s.rowIndex-o.rowIndex).map(s=>this.pinnedRowModel?.getPinnedBottomRow(s.rowIndex)).forEach(n):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("bottom",n),i}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:i=!1,exportRowNumbers:n=!1,columnKeys:s}=e,{colModel:o,gos:r,visibleCols:a}=this,l=o.isPivotMode(),c=g=>Ec(g)?!1:!Jl(g)||n;if(s?.length)return o.getColsForKeys(s).filter(c);const d=r.get("treeData");let p=[];return t&&!l?p=o.getCols():p=a.allCols,p=p.filter(g=>c(g)&&(i&&!d?!YP(g):!0)),p}recursivelyAddHeaderGroups(e,t,i){const n=[];for(const s of e){const o=s;if(o.getChildren)for(const r of o.getChildren()??[])n.push(r)}e.length>0&&dn(e[0])&&this.doAddHeaderHeader(t,e,i),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,t,i)}doAddHeaderHeader(e,t,i){const n=e.onNewHeaderGroupingRow();let s=0;for(const o of t){const r=o;let a;i?a=i($e(this.gos,{columnGroup:r})):a=this.beans.colNames.getDisplayNameForColumnGroup(r,"header");const c=(r.isExpandable()?r.getLeafColumns():[]).reduce((d,p,g,m)=>{let y=fi(d);return p.getColumnGroupShow()==="open"?(!y||y[1]!=null)&&(y=[g],d.push(y)):y&&y[1]==null&&(y[1]=g-1),g===m.length-1&&y&&y[1]==null&&(y[1]=g),d},[]);n.onColumn(r,a||"",s++,r.getLeafColumns().length-1,c)}}},DTe={moduleName:"SharedExport",version:ke,beans:[MTe]},SH=`\r
`,ATe=class extends eAe{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,SH),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,n)=>{n!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,n){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(n)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){t!=0&&(this.result+=this.columnSeparator);const n=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(n.valueFormatted??n.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(Se(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=SH),this.isFirstLine=!1}},RTe=class extends JDe{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){Se(51);return}const t=this.getMergedParams(e),i=this.getData(t),n=new Blob(["\uFEFF",i],{type:"text/plain"}),s=typeof t.fileName=="function"?t.fileName($e(this.gos,{})):t.fileName;tAe(this.getFileName(s),n)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:i,rowGroupColsSvc:n,valueSvc:s,gos:o}=this,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:d,columnSeparator:p}=e;return new ATe({colModel:t,colNames:i,valueSvc:s,gos:o,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:d||!1,columnSeparator:p||",",rowGroupColsSvc:n})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function ETe(e,t){return e.csvCreator?.getDataAsCsv(t)}function TTe(e,t){e.csvCreator?.exportDataAsCsv(t)}var ITe={moduleName:"CsvExport",version:ke,beans:[RTe],apiFunctions:{getDataAsCsv:ETe,exportDataAsCsv:TTe},dependsOn:[DTe]},kTe=class extends he{constructor(e,t,i){super(),this.id=e,this.parentCache=t,this.params=i,this.state="needsLoading",this.version=0,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:i,beans:n,rowNodes:s}=this;for(let o=0;o<e;o++){const r=i+o,a=new Ou(n);a.setRowHeight(t),a.uiLevel=0,a.setRowIndex(r),a.setRowTop(t*r),s.push(a)}}getBlockStateJson(){const{id:e,startRow:t,endRow:i,state:n}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:i,pageStatus:n}}}setDataAndId(e,t,i){Pe(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(ki(this.params.datasource.getRows)){Se(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){const{startRow:e,endRow:t,version:i,params:{sortModel:n,filterModel:s},gos:o}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,i),failCallback:this.pageLoadFailed.bind(this,i),sortModel:n,filterModel:s,context:$e(o,{}).context}}forEachNode(e,t,i){this.rowNodes.forEach((n,s)=>{this.startRow+s<i&&e(n,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);const i=e-this.startRow;return this.rowNodes[i]}processServerResult(e){const{rowNodes:t,beans:i}=this;t.forEach((s,o)=>{const r=e.rowData?e.rowData[o]:void 0;!s.id&&s.alreadyRendered&&r&&(t[o]=new Ou(i),t[o].setRowIndex(s.rowIndex),t[o].setRowTop(s.rowTop),t[o].setRowHeight(s.rowHeight),s.clearRowTopAndRowIndex()),this.setDataAndId(t[o],r,this.startRow+o)});const n=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,n)}destroy(){for(const e of this.rowNodes)e.clearRowTopAndRowIndex();super.destroy()}},LTe=2,PTe=class extends he{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let n=this.blocks[i];if(!n){if(t)return;n=this.createBlock(i)}return n.getRow(e)}createBlock(e){const t=this.params,i=this.createBean(new kTe(e,this,t));return this.blocks[i.id]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),t.rowNodeBlockLoader.addBlock(i),i}refreshCache(){if(this.blockCount==0){this.purgeCache();return}for(const t of this.getBlocksInOrder())t.setStateWaitingToLoad();this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){for(const e of this.getBlocksInOrder())this.destroyBlock(e);super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(Rh(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(r=>r!=e),i=(r,a)=>a.lastAccessed-r.lastAccessed;t.sort(i);const n=this.params.maxBlocksInCache>0,s=n?this.params.maxBlocksInCache-1:null,o=LTe-1;t.forEach((r,a)=>{const l=r.state==="needsLoading"&&a>=o,c=n?a>=s:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(r)||this.isBlockFocused(r))return;this.removeBlockFromCache(r)}})}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const{startRow:i,endRow:n}=e;return t.rowIndex>=i&&t.rowIndex<n}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:i}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,i-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:i,overflowSize:n}=this.params,o=(e.id+1)*i+n;this.rowCount<o&&(this.rowCount=o)}}setRowCount(e,t){this.rowCount=e,Pe(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};for(const i of this.getBlocksInOrder())i.forEachNode(e,t,this.rowCount)}getBlocksInOrder(){const e=(i,n)=>i.id-n.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];for(const t of this.getBlocksInOrder())t.id*this.params.blockSize>=this.rowCount&&e.push(t);if(e.length>0)for(const t of e)this.destroyBlock(t)}purgeCache(){for(const e of this.getBlocksInOrder())this.removeBlockFromCache(e);this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let n=-1,s=!1;const o={value:0};let r=!1;for(const l of this.getBlocksInOrder())if(!r){if(s&&n+1!==l.id){r=!0;continue}n=l.id,l.forEachNode(c=>{const d=c===e||c===t;(s||d)&&i.push(c),d&&(s=!s)},o,this.rowCount)}return r||s?[]:i}},NTe=class extends he{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){if(this.gos.get("rowModelType")!=="infinite")return;const e=this.beans,t=new Ou(e);this.rootNode=t,t.level=-1,this.rowHeight=uh(e),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache())}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy(),this.rootNode=null}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=uh(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){let e;this.cacheParams?e=!_v(this.cacheParams.sortModel,this.beans.sortSvc?.getSortModel()??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?.getRowNodesInRange(e,t)??[]}reset(){if(!this.datasource)return;xf(this.gos)!=null||this.beans.selectionSvc?.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const e=this.beans,{filterManager:t,sortSvc:i,rowNodeBlockLoader:n,eventSvc:s,gos:o}=e;this.cacheParams={datasource:this.datasource,filterModel:t?.getFilterModel()??{},sortModel:i?.getSortModel()??[],rowNodeBlockLoader:n,initialRowCount:o.get("infiniteInitialRowCount"),maxBlocksInCache:o.get("maxBlocksInCache"),rowHeight:uh(e),overflowSize:o.get("cacheOverflowSize"),blockSize:o.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new PTe(this.cacheParams)),s.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache?.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache?.refreshCache()}purgeCache(){this.infiniteCache?.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?.isLastRowIndexKnown()??!1}setRowCount(e,t){this.infiniteCache?.setRowCount(e,t)}resetRowHeights(){}onRowHeightChanged(){}};function FTe(e){ND(e)?.refreshCache()}function OTe(e){ND(e)?.purgeCache()}function BTe(e){return ND(e)?.getRowCount()}var GTe=class extends he{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=Yme(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=ps(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){ea(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){Rh(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(i=>i.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length;for(const i of t)i.load();this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach(t=>{const{id:i,state:n}=t.getBlockStateJson();e[i]=n}),e}printCacheStatus(){Rh(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},_Te={moduleName:"InfiniteRowModelCore",version:ke,rowModels:["infinite"],beans:[NTe,GTe]},VTe={moduleName:"InfiniteRowModel",version:ke,apiFunctions:{refreshInfiniteCache:FTe,purgeInfiniteCache:OTe,getInfiniteRowCount:BTe},dependsOn:[_Te,QEe]},zTe="",HTe="",jTe={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},WTe=class extends qi{constructor(){super(jTe),this.eValue=je,this.eDelta=je,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),n=e.formatValue(i),s=Pe(n)?n:i,o=t>=0,r=this.eDelta;o?r.textContent=zTe+s:r.textContent=HTe+s,r.classList.toggle("ag-value-change-delta-up",o),r.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),bo(this.eDelta)}refresh(e,t=!1){const{value:i,valueFormatted:n}=e,{eValue:s,lastValue:o,beans:r}=this;if(i===o||(Pe(n)?s.textContent=n:Pe(i)?s.textContent=i:bo(s),r.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;const a=i&&typeof i=="object"&&"toNumber"in i?i.toNumber():i,l=o&&typeof o=="object"&&"toNumber"in o?o.toNumber():o;if(a===l)return!1;if(typeof a=="number"&&typeof l=="number"){const c=a-l;this.showDelta(e,c)}return o&&s.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},UTe=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",$Te={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},YTe=class extends qi{constructor(){super($Te),this.eCurrent=je,this.refreshCount=0,this.registerCSS(UTe)}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious?.remove();const{beans:t,eCurrent:i}=this,n=Zs({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=n,n.textContent=i.textContent,this.getGui().insertBefore(n,i),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.ePrevious?.remove(),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let i=e.value;if(ki(i)&&(i=""),i===this.lastValue||this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=i;const n=this.eCurrent;return Pe(e.valueFormatted)?n.textContent=e.valueFormatted:Pe(e.value)?n.textContent=i:bo(n),!0}},KTe=class extends he{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,i=this.beans.gos.get("cellFlashDuration"),n=this.beans.gos.get("cellFadeDuration")){const s=this.animations[t];s.delete(e);const o=Date.now(),r=o+i,a=o+i+n,l={phase:"flash",flashEndTime:r,fadeEndTime:a};s.set(e,l);const c=`ag-cell-${t}`,d=`${c}-animation`,{comp:p,eGui:{style:g}}=e;p.toggleCss(c,!0),p.toggleCss(d,!1),g.removeProperty("transition"),g.removeProperty("transition-delay"),this.nextAnimationTime&&r+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),i)}),this.nextAnimationTime=r)}advanceAnimations(){const e=Date.now();let t=null;for(const i of Object.keys(this.animations)){const n=this.animations[i],s=`ag-cell-${i}`,o=`${s}-animation`;for(const[r,a]of n){if(!r.isAlive()||!r.comp){n.delete(r);continue}const{phase:l,flashEndTime:c,fadeEndTime:d}=a,p=l==="flash"?c:d;if(!(e+15>=p)){t=Math.min(p,t??1/0);continue}const{comp:m,eGui:{style:y}}=r;switch(l){case"flash":m.toggleCss(s,!1),m.toggleCss(o,!0),y.transition=`background-color ${d-c}ms`,y.transitionDelay=`${c-e}ms`,t=Math.min(d,t??1/0),a.phase="fade";break;case"fade":m.toggleCss(s,!1),m.toggleCss(o,!1),y.removeProperty("transition"),y.removeProperty("transition-delay"),n.delete(r);break}}}t==null?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;const i=Uwe(e.cellPosition);t.cells[i]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t?.flashDuration,t?.fadeDuration)}destroy(){for(const e of Object.keys(this.animations))this.animations[e].clear()}};function qTe(e,t={}){const{cellFlashSvc:i}=e;i&&e.frameworkOverrides.wrapIncoming(()=>{for(const n of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns))i.flashCell(n,t)})}var ZTe={moduleName:"HighlightChanges",version:ke,beans:[KTe],userComponents:{agAnimateShowChangeCellRenderer:WTe,agAnimateSlideCellRenderer:YTe},apiFunctions:{flashCells:qTe}};function XTe(e){return e.stateSvc?.getState()??{}}function QTe(e,t,i){return e.stateSvc?.setState(t,i)}function xH(e){return e={...e},e.version||(e.version="32.1.0"),e.version==="32.1.0"&&(e=JTe(e)),e.version=ke,e}function JTe(e){return e.cellSelection=eIe(e,"rangeSelection"),e}function eIe(e,t){if(e&&typeof e=="object")return e[t]}var tIe=class extends he{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=ps(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=ps(this,()=>{this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(this.updateCachedState("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowGroupExpansion",void 0)):(this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("ssrmRowGroupExpansion",void 0))},0),this.onRowSelectedDebounced=ps(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){const{gos:e,ctrlsSvc:t,colDelayRenderSvc:i}=this.beans;this.isClientSideRowModel=en(e);const n=xH(e.get("initialState")??{}),s=n.partialColumnState;delete n.partialColumnState,this.cachedState=n;const o=this.suppressEventsAndDispatchInitEvent.bind(this);t.whenReady(this,()=>o(()=>this.setupStateOnGridReady(n))),(n.columnOrder||n.columnVisibility||n.columnSizing||n.columnPinning||n.columnGroup)&&i?.hideColumns("columnState");const[r,a,l]=this.addManagedEventListeners({newColumnsLoaded:({source:c})=>{c==="gridInitializing"&&(r(),o(()=>{this.setupStateOnColumnsInitialised(n,!!s),i?.revealColumns("columnState")}))},rowCountReady:()=>{a?.(),o(()=>this.setupStateOnRowCountReady(n))},firstDataRendered:()=>{l?.(),o(()=>this.setupStateOnFirstDataRendered(n))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){const i=xH(e);delete i.partialColumnState,this.cachedState=i,this.startSuppressEvents();const n="api",s=t?new Set(t):void 0;this.setGridReadyState(i,n,s),this.setColumnsInitialisedState(i,n,!!s,s),this.setRowCountState(i,n,s),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(i,n,s),this.stopSuppressEvents(n)})}setGridReadyState(e,t,i){t==="api"&&!i?.has("sideBar")&&this.beans.sideBar?.comp?.setState(e.sideBar),this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");const t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,i,n){this.setColumnState(e,t,i,n),this.setColumnGroupState(e,t,n),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);const i=n=>()=>this.updateColumnState([n]);this.addManagedEventListeners({columnValueChanged:i("aggregation"),columnMoved:i("columnOrder"),columnPinned:i("columnPinning"),columnResized:i("columnSizing"),columnVisible:i("columnVisibility"),columnPivotChanged:i("pivot"),columnPivotModeChanged:i("pivot"),columnRowGroupChanged:i("rowGroup"),sortChanged:i("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,i){const{filter:n,rowGroupExpansion:s,ssrmRowGroupExpansion:o,rowSelection:r,pagination:a}=e,l=(d,p)=>!i?.has(d)&&(p||t==="api");l("filter",n)&&this.setFilterState(n),l("rowGroupExpansion",s)&&this.setRowGroupExpansionState(o,s,t),l("rowSelection",r)&&this.setRowSelectionState(r,t),l("pagination",a)&&this.setPaginationState(a,t);const c=this.updateCachedState.bind(this);c("filter",this.getFilterState()),this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(c("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),c("rowGroupExpansion",void 0)):(c("rowGroupExpansion",this.getRowGroupExpansionState()),c("ssrmRowGroupExpansion",void 0)),c("rowSelection",this.getRowSelectionState()),c("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");const t=this.updateCachedState.bind(this),i=()=>{this.updateRowGroupExpansionStateTimer=0,this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(t("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),t("rowGroupExpansion",void 0)):(t("rowGroupExpansion",this.getRowGroupExpansionState()),t("ssrmRowGroupExpansion",void 0))},n=()=>t("filter",this.getFilterState()),{gos:s,colFilter:o}=this.beans;this.addManagedEventListeners({filterChanged:n,rowExpansionStateChanged:this.onRowGroupOpenedDebounced,expandOrCollapseAll:i,columnRowGroupChanged:i,rowDataUpdated:()=>{(s.get("groupDefaultExpanded")!==0||s.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(i)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:r=>{(r.newPage||r.newPageSize)&&t("pagination",this.getPaginationState())}}),o&&this.addManagedListeners(o,{filterStateChanged:n})}setFirstDataRenderedState(e,t,i){const{scroll:n,cellSelection:s,focusedCell:o,columnOrder:r,rowPinning:a}=e,l=(p,g)=>!i?.has(p)&&(g||t==="api");l("focusedCell",o)&&this.setFocusedCellState(o),l("cellSelection",s)&&this.setCellSelectionState(s),l("scroll",n)&&this.setScrollState(n),l("rowPinning",a)&&this.setRowPinningState(a),this.setColumnPivotState(!!r?.orderedColIds,t);const c=this.updateCachedState.bind(this);c("sideBar",this.getSideBarState()),c("focusedCell",this.getFocusedCellState());const d=this.getRangeSelectionState();c("rangeSelection",d),c("cellSelection",d),c("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");const t=this.updateCachedState.bind(this),i=()=>t("focusedCell",this.getFocusedCellState());this.addManagedEventListeners({cellFocused:i,cellFocusCleared:i,cellSelectionChanged:n=>{if(n.finished){const s=this.getRangeSelectionState();t("rangeSelection",s),t("cellSelection",s)}},bodyScrollEnd:()=>t("scroll",this.getScrollState()),pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())})}getColumnState(){const e=this.beans;return qDe(x0(e),e.colModel.isPivotMode())}setColumnState(e,t,i,n){const{sort:s,rowGroup:o,aggregation:r,pivot:a,columnPinning:l,columnVisibility:c,columnSizing:d,columnOrder:p}=e;let g=!1;const m=(B,z)=>{const j=!n?.has(B)&&!!(z||t==="api");return g||(g=j),j},y={},b=B=>{let z=y[B];return z||(z={colId:B},y[B]=z,z)},C={},w=m("sort",s);w&&s?.sortModel.forEach(({colId:B,sort:z},j)=>{const X=b(B);X.sort=z,X.sortIndex=j}),(w||!i)&&(C.sort=null,C.sortIndex=null);const x=m("rowGroup",o);x&&o?.groupColIds.forEach((B,z)=>{const j=b(B);j.rowGroup=!0,j.rowGroupIndex=z}),(x||!i)&&(C.rowGroup=null,C.rowGroupIndex=null);const M=m("aggregation",r);M&&r?.aggregationModel.forEach(({colId:B,aggFunc:z})=>{b(B).aggFunc=z}),(M||!i)&&(C.aggFunc=null);const E=m("pivot",a);E&&(a?.pivotColIds.forEach((B,z)=>{const j=b(B);j.pivot=!0,j.pivotIndex=z}),this.gos.updateGridOptions({options:{pivotMode:!!a?.pivotMode},source:t})),(E||!i)&&(C.pivot=null,C.pivotIndex=null);const I=m("columnPinning",l);if(I){for(const B of l?.leftColIds??[])b(B).pinned="left";for(const B of l?.rightColIds??[])b(B).pinned="right"}(I||!i)&&(C.pinned=null);const N=m("columnVisibility",c);if(N)for(const B of c?.hiddenColIds??[])b(B).hide=!0;(N||!i)&&(C.hide=null);const T=m("columnSizing",d);if(T)for(const{colId:B,flex:z,width:j}of d?.columnSizingModel??[]){const X=b(B);X.flex=z??null,X.width=j}(T||!i)&&(C.flex=null);const P=p?.orderedColIds,O=!!P?.length&&!n?.has("columnOrder"),G=O?P.map(B=>b(B)):Object.values(y);(G.length||g)&&(this.columnStates=G,Yr(this.beans,{state:G,applyOrder:O,defaultState:C},t))}setColumnPivotState(e,t){const i=this.columnStates;this.columnStates=void 0;const n=this.columnGroupStates;this.columnGroupStates=void 0;const s=this.beans,{pivotResultCols:o,colGroupSvc:r}=s;if(o?.isPivotResultColsPresent()){if(i){const a=[];for(const l of i)o.getPivotResultCol(l.colId)&&a.push(l);Yr(s,{state:a,applyOrder:e},t)}n&&r?.setColumnGroupState(n,t)}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState();return ZDe(t)}setColumnGroupState(e,t,i){const n=this.beans.colGroupSvc;if(!n||i?.has("columnGroup")||t!=="api"&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const s=new Set(e.columnGroup?.openColumnGroupIds),r=n.getColumnGroupState().map(({groupId:a})=>{const l=s.has(a);return l&&s.delete(a),{groupId:a,open:l}});for(const a of s)r.push({groupId:a,open:!0});r.length&&(this.columnGroupStates=r),n.setColumnGroupState(r,t)}getFilterState(){const e=this.beans.filterManager;let t=e?.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);const i=e?.getFilterState(),n=e?.getAdvFilterModel()??void 0;return t||n||i?{filterModel:t,columnFilterState:i,advancedFilterModel:n}:void 0}setFilterState(e){const t=this.beans.filterManager,{filterModel:i,columnFilterState:n,advancedFilterModel:s}=e??{filterModel:null,columnFilterState:null,advancedFilterModel:null};(i!==void 0||n!==void 0)&&t?.setFilterState(i??null,n??null,"columnFilter"),s!==void 0&&t?.setAdvFilterModel(s??null,"advancedFilter")}getRangeSelectionState(){const e=this.beans.rangeSvc?.getCellRanges().map(t=>{const{id:i,type:n,startRow:s,endRow:o,columns:r,startColumn:a}=t;return{id:i,type:n,startRow:s,endRow:o,colIds:r.map(l=>l.getColId()),startColId:a.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:i,colModel:n,visibleCols:s}=this.beans;if(!Nu(t)||!i)return;const o=[];for(const r of e?.cellRanges??[]){const a=[];for(const c of r.colIds){const d=n.getCol(c);d&&a.push(d)}if(!a.length)continue;let l=n.getCol(r.startColId);if(!l){const c=s.allCols,d=new Set(a);l=c.find(p=>d.has(p))}o.push({...r,columns:a,startColumn:l})}i.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:i}=e?.getVScrollPosition()??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:i}=e??{top:0,left:0},{frameworkOverrides:n,rowRenderer:s,animationFrameSvc:o,ctrlsSvc:r}=this.beans;n.wrapIncoming(()=>{r.get("center").setCenterViewportScrollLeft(i),r.getScrollFeature()?.setVerticalScrollPosition(t),s.redraw({afterScroll:!0}),o?.flushAllFrames()})}getSideBarState(){return this.beans.sideBar?.comp?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:n}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:n}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{focusSvc:t,colModel:i}=this.beans;if(!e){t.clearFocusedCell();return}const{colId:n,rowIndex:s,rowPinned:o}=e;t.setFocusedCell({column:i.getCol(n),rowIndex:s,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const i=e.getCurrentPage(),n=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!i&&!n))return{page:i,pageSize:n}}setPaginationState(e,t){const{pagination:i,gos:n}=this.beans;if(!i)return;const{pageSize:s,page:o}=e??{page:0,pageSize:n.get("paginationPageSize")},r=t==="gridInitializing";s&&!n.get("paginationAutoPageSize")&&i.setPageSize(s,r?"initialState":"pageSizeSelector"),typeof o=="number"&&(r?i.setPage(o):i.goToPage(o))}getRowSelectionState(){const e=this.beans.selectionSvc;if(!e)return;const t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!t?.toggledNodes?.length?void 0:t}setRowSelectionState(e,t){this.beans.selectionSvc?.setSelectionState(e,t,t==="api")}getRowGroupExpansionState(){const{expansionSvc:e}=this.beans;if(e)return e.getExpansionState()}getRowPinningState(){return this.beans.pinnedRowModel?.getPinnedState()}setRowPinningState(e){const t=this.beans.pinnedRowModel;e?t?.setPinnedState(e):t?.reset()}setRowGroupExpansionState(e,t,i){const n=this.beans.expansionSvc;if(!n)return;const s=t??{expandedRowGroupIds:[],collapsedRowGroupIds:[]};n.setExpansionState(s,i)}updateColumnState(e){const t=this.getColumnState();let i=!1;const n=this.cachedState;for(const s of Object.keys(t)){const o=t[s];_v(o,n[s])||(i=!0)}this.cachedState={...n,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),_v(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){const e=this.staleStateKeys;for(const t of e)t==="rowSelection"&&this.setCachedStateValue(t,this.getRowSelectionState());e.clear()}dispatchStateUpdateEvent(e){if(!this.suppressEvents){for(const t of e)this.queuedUpdateSources.add(t);this.dispatchStateUpdateEventDebounced()}}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){this.suppressEvents=!0,this.beans.colAnimation?.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.beans.colAnimation?.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}},iIe={moduleName:"GridState",version:ke,beans:[tIe],apiFunctions:{getState:XTe,setState:QTe}};function nIe(e){return e.rowModel.isLastRowIndexKnown()}function sIe(e){return e.pagination?.getPageSize()??100}function oIe(e){return e.pagination?.getCurrentPage()??0}function rIe(e){return e.pagination?.getTotalPages()??1}function aIe(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function lIe(e){e.pagination?.goToNextPage()}function cIe(e){e.pagination?.goToPreviousPage()}function uIe(e){e.pagination?.goToFirstPage()}function dIe(e){e.pagination?.goToLastPage()}function hIe(e,t){e.pagination?.goToPage(t)}var pIe=class extends he{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,i=()=>{const n=Math.max(uh(t),1),s=Math.floor(e/n);t.pagination.setPageSize(s,"autoCalculated")};this.isBodyRendered?ps(this,i,50)():(i(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Cy="paginationPageSizeSelector",gIe={tag:"span",cls:"ag-paging-page-size"},fIe=class extends qi{constructor(){super(gIe),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(Cy,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){bo(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Cy)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),i=!t||!e.includes(t);if(i){const s=this.gos.exists("paginationPageSize"),o=this.gos.get(Cy)!==!0;Se(94,{pageSizeSet:s,pageSizesSet:o,pageSizeOptions:e,paginationPageSizeOption:t}),o||Se(95,{paginationPageSizeOption:t,paginationPageSizeSelector:Cy}),e.unshift("")}const n=String(i?"":t);this.selectPageSizeComp?(Ju(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(n,!0)):this.createPageSizeSelectorComp(e,n),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const i=this.getLocaleTextFunc(),n=i("pageSizeSelectorLabel","Page Size:"),s=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new eN).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(s).setLabel(n).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(Cy);return!Array.isArray(t)||!t?.length?e:[...t].sort((i,n)=>i-n)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},mIe={selector:"AG-PAGE-SIZE-SELECTOR",component:fIe},yIe=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",vIe=class extends mwe{constructor(){super(),this.btFirst=je,this.btPrevious=je,this.btNext=je,this.btLast=je,this.lbRecordCount=je,this.lbFirstRowOnPage=je,this.lbLastRowOnPage=je,this.lbCurrent=je,this.lbTotal=je,this.pageSizeComp=je,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(yIe)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[mIe]);const{btFirst:t,btPrevious:i,btNext:n,btLast:s}=this;this.activateTabIndex([t,i,n,s]),t.insertAdjacentElement("afterbegin",wr(e?"last":"first",this.beans)),i.insertAdjacentElement("afterbegin",wr(e?"next":"previous",this.beans)),n.insertAdjacentElement("afterbegin",wr(e?"previous":"next",this.beans)),s.insertAdjacentElement("afterbegin",wr(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):NCe(this.beans,o),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){if(!this.areListenersSetup){this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)});for(const e of[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}]){const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:n=>{(n.key===oe.ENTER||n.key===oe.SPACE)&&(n.preventDefault(),i())}})}PCe(this.beans,this,this.getGui()),this.areListenersSetup=!0}}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):QDe(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const n=this.isZeroPagesToDisplay(),s=e===i-1;this.nextButtonDisabled=s||n,this.lastButtonDisabled=!t||n||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){Xfe(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),i=this.pagination.getMasterRowCount(),n=e?i:null,s=this.pagination.getCurrentPage(),o=this.pagination.getPageSize();let r,a;this.isZeroPagesToDisplay()?r=a=0:(r=o*s+1,a=r+o-1,e&&a>n&&(a=n));const l=r+o-1,c=!e&&i<l,d=this.formatNumber(r);this.lbFirstRowOnPage.textContent=d;let p;const g=this.getLocaleTextFunc();c?p=g("pageLastRowUnknown","?"):p=this.formatNumber(a),this.lbLastRowOnPage.textContent=p;const y=t>0?s+1:0,b=this.formatNumber(y);this.lbCurrent.textContent=b;let C,w;if(e)C=this.formatNumber(t),w=this.formatNumber(n);else{const x=g("more","more");C=x,w=x}this.lbTotal.textContent=C,this.lbRecordCount.textContent=w,this.announceAriaStatus(d,p,w,b,C)}announceAriaStatus(e,t,i,n,s){const o=this.getLocaleTextFunc(),r=o("page","Page"),a=o("to","to"),l=o("of","of"),c=`${e} ${a} ${t} ${l} ${i}`,d=`${r} ${n} ${l} ${s}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnounce?.announceValue(c,"paginationRow")),d!==this.ariaPageStatus&&(this.ariaPageStatus=d,this.ariaAnnounce?.announceValue(d,"paginationPage"))}},bIe={selector:"AG-PAGINATION",component:vIe},CIe=class extends he{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return bIe}isPaginateChildRows(){const e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;if(!this.active||t===e||typeof t!="number")return;const{editSvc:i}=this.beans;i?.isEditing()&&(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){if(!this.active)return;let t=e;this.paginateChildRows||(t=this.beans.rowModel.getTopLevelIndexFromDisplayedIndex?.(e)??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return this.active?e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return Pe(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:Pe(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Pe(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Pe(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}const i=this.pageSize,n=t-1;this.totalPages=Math.floor(n/i)+1,this.adjustCurrentPageIfInvalid();const s=this.currentPage,o=i*s;let r=i*(s+1)-1;if(r>n&&(r=n),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(o),r===n)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const a=e.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=a-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}const{pageSize:t,currentPage:i}=this,n=e-1;this.totalPages=Math.floor(n/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*i,this.bottomDisplayedRowIndex=t*(i+1)-1,this.bottomDisplayedRowIndex>n&&(this.bottomDisplayedRowIndex=n)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:n=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:n,keepRenderedRows:t})}},wIe={moduleName:"Pagination",version:ke,beans:[CIe,pIe],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:nIe,paginationGetPageSize:sIe,paginationGetCurrentPage:oIe,paginationGetTotalPages:rIe,paginationGetRowCount:aIe,paginationGoToNextPage:lIe,paginationGoToPreviousPage:cIe,paginationGoToFirstPage:uIe,paginationGoToLastPage:dIe,paginationGoToPage:hIe},dependsOn:[FD]};function SIe(e,t={}){const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))}function m8(e,t,i,n,s){t&&(n&&t.parent&&t.parent.level!==-1&&m8(e,t.parent,i,n,s),t.setExpanded(i,void 0,s))}function xIe(e,t){return e.rowModel.getRowNode(t)}function MIe(e,t,i,n){e.rowRenderer.addRenderedRowListener(t,i,n)}function DIe(e){return e.rowRenderer.getRenderedNodes()}function AIe(e,t,i){e.rowModel.forEachNode(t,i)}function RIe(e){return e.rowRenderer.firstRenderedRow}function EIe(e){return e.rowRenderer.lastRenderedRow}function TIe(e,t){return e.rowModel.getRow(t)}function IIe(e){return e.rowModel.getRowCount()}var kIe={moduleName:"RowApi",version:ke,apiFunctions:{redrawRows:SIe,setRowNodeExpanded:m8,getRowNode:xIe,addRenderedRowListener:MIe,getRenderedNodes:DIe,forEachNode:AIe,getFirstDisplayedRowIndex:RIe,getLastDisplayedRowIndex:EIe,getDisplayedRowAtIndex:TIe,getDisplayedRowCount:IIe}},LIe={moduleName:"ScrollApi",version:ke,apiFunctions:{getVerticalPixelRange:WRe,getHorizontalPixelRange:URe,ensureColumnVisible:i8,ensureIndexVisible:n8,ensureNodeVisible:$Re}};function PIe(e,t,i){if(!t)return;const n=e.ctrlsSvc.getGridBodyCtrl().eGridBody,s=`aria-${t}`;i===null?n.removeAttribute(s):n.setAttribute(s,i)}function NIe(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function FIe(e){e.frameworkOverrides.wrapIncoming(()=>{for(const t of e.ctrlsSvc.getHeaderRowContainerCtrls())t.refresh()})}function OIe(e){return e.animationFrameSvc?.isQueueEmpty()??!0}function BIe(e){e.animationFrameSvc?.flushAllFrames()}function GIe(e){return{rowHeight:uh(e),headerHeight:gC(e)}}function _Ie(e,t={}){const i=[];for(const o of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns)){const r=o.getCellRenderer();r!=null&&i.push($v(r))}if(t.columns?.length)return i;const n=[],s=Bk(t.rowNodes);for(const o of e.rowRenderer.getAllRowCtrls()){if(s&&!Gk(o.rowNode,s)||!o.isFullWidth())continue;const r=o.getFullWidthCellRenderers();for(let a=0;a<r.length;a++){const l=r[a];l!=null&&n.push($v(l))}}return[...n,...i]}var VIe={moduleName:"RenderApi",version:ke,apiFunctions:{setGridAriaProperty:PIe,refreshCells:NIe,refreshHeader:FIe,isAnimationFrameQueueEmpty:OIe,flushAllAnimationFrames:BIe,getSizesForCurrentTheme:GIe,getCellRendererInstances:_Ie}};function zIe(e,t){typeof t=="number"?e.colAutosize?.sizeColumnsToFit(t,"api"):e.colAutosize?.sizeColumnsToFitGridBody(t)}function y8({colAutosize:e,visibleCols:t},i,n){Array.isArray(i)?e?.autoSizeCols({colKeys:i,skipHeader:n,source:"api"}):e?.autoSizeCols({...i,colKeys:i.colIds??t.allCols,source:"api"})}function HIe(e,t){t&&typeof t=="object"?y8(e,t):e.colAutosize?.autoSizeAllColumns({source:"api",skipHeader:t})}var jIe=class extends he{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){const{gos:e}=this,t=e.get("autoSizeStrategy");if(t){let i=!1;const n=t.type;if(n==="fitGridWidth"||n==="fitProvidedWidth")i=!0;else if(n==="fitCellContents"){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered(t)});const s=e.get("rowData");i=s!=null&&s.length>0&&en(e)}i&&this.beans.colDelayRenderSvc?.hideColumns(n)}}autoSizeCols(e){const{eventSvc:t,visibleCols:i}=this.beans;this.innerAutoSizeCols(e).then(n=>{const s=c=>Mf(t,Array.from(c),!0,"autosizeColumns");if(!e.scaleUpToFitGridWidth)return s(n);const o=MH(this.beans),r=c=>i.leftCols.some(d=>Qy(d,c)),a=c=>i.rightCols.some(d=>Qy(d,c)),l=e.colKeys.filter(c=>!Ec(c)&&!Jl(c)&&!r(c)&&!a(c));this.sizeColumnsToFit(o,e.source,!0,{defaultMaxWidth:e.defaultMaxWidth,defaultMinWidth:e.defaultMinWidth,columnLimits:e.columnLimits?.map(c=>({...c,key:c.colId})),colKeys:l,onlyScaleUp:!0}),s(n)})}innerAutoSizeCols(e){return new Promise((t,i)=>{if(this.shouldQueueResizeOperations)return this.pushResizeOperation(()=>this.innerAutoSizeCols(e).then(t,i));const{colKeys:n,skipHeader:s,skipHeaderGroups:o,stopAtGroup:r,defaultMaxWidth:a,defaultMinWidth:l,columnLimits:c=[],source:d="api"}=e,{animationFrameSvc:p,renderStatus:g,colModel:m,autoWidthCalc:y,visibleCols:b}=this.beans;if(p?.flushAllFrames(),this.timesDelayed<5&&g&&(!g.areHeaderCellsRendered()||!g.areCellsRendered())){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.innerAutoSizeCols(e).then(t,i)});return}this.timesDelayed=0;const C=new Set;let w=-1;const x=Object.fromEntries(c.map(({colId:I,...N})=>[I,N])),M=s??this.gos.get("skipHeaderOnAutoSize"),E=o??M;for(;w!==0;){w=0;const I=[];for(const N of n){if(!N||lye(N))continue;const T=m.getCol(N);if(!T||C.has(T))continue;const P=y.getPreferredWidthForColumn(T,M);if(P>0){const O=x[T.colId]??{};O.minWidth??(O.minWidth=l),O.maxWidth??(O.maxWidth=a);const G=WIe(T,P,O);T.setActualWidth(G,d),C.add(T),w++}I.push(T)}I.length&&b.refresh(d)}E||this.autoSizeColumnGroupsByColumns(n,d,r),t(C)})}autoSizeColumn(e,t,i){this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const{colModel:n,ctrlsSvc:s}=this.beans,o=new Set,r=n.getColsForKeys(e);for(const l of r){let c=l.getParent();for(;c&&c!=i;)c.isPadding()||o.add(c),c=c.getParent()}let a;for(const l of o){for(const c of s.getHeaderRowContainerCtrls())if(a=c.getHeaderCtrlForColumn(l),a)break;a?.resizeLeafColumnsToFit(t)}}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e));return}this.autoSizeCols({colKeys:this.beans.visibleCols.allCols,...e})}addColumnAutosizeListeners(e,t){const i=this.gos.get("skipHeaderOnAutoSize"),n=()=>{this.autoSizeColumn(t,"uiColumnResized",i)};e.addEventListener("dblclick",n);const s=new Bd(e);return s.addEventListener("doubleTap",n),()=>{e.removeEventListener("dblclick",n),s.destroy()}}addColumnGroupResize(e,t,i){const n=this.gos.get("skipHeaderOnAutoSize"),s=()=>{const o=[],r=t.getDisplayedLeafColumns();for(const a of r)a.getColDef().suppressAutoSize||o.push(a.getColId());o.length>0&&this.autoSizeCols({colKeys:o,skipHeader:n,stopAtGroup:t,source:"uiColumnResized"}),i()};return e.addEventListener("dblclick",s),()=>e.removeEventListener("dblclick",s)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const i=MH(this.beans);if(i>0){this.sizeColumnsToFit(i,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):Se(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",i,n){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,n));return}const s={};for(const{key:y,...b}of n?.columnLimits??[])s[typeof y=="string"?y:y.getColId()]=b;const o=this.beans.visibleCols.allCols;if(e<=0||!o.length)return;const r=Ol(o);if(n?.onlyScaleUp&&r>e||e===r&&o.every(b=>{if(b.colDef.suppressSizeToFit)return!0;const C=s?.[b.getId()],w=C?.minWidth??n?.defaultMinWidth,x=C?.maxWidth??n?.defaultMaxWidth,M=b.getActualWidth();return(w==null||M>=w)&&(x==null||M<=x)}))return;const l=[],c=[];for(const y of o){const b=n?.colKeys?.some(C=>Qy(y,C))??!0;y.getColDef().suppressSizeToFit||!b?c.push(y):l.push(y)}const d=l.slice(0);let p=!1;const g=y=>{ea(l,y),c.push(y)};for(const y of l){y.resetActualWidth(t);const b=s?.[y.getId()],C=b?.minWidth??n?.defaultMinWidth,w=b?.maxWidth??n?.defaultMaxWidth,x=y.getActualWidth();typeof C=="number"&&x<C?y.setActualWidth(C,t,!0):typeof w=="number"&&x>w&&y.setActualWidth(w,t,!0)}for(;!p;){p=!0;const y=e-Ol(c);if(y<=0)for(const b of l){const C=s?.[b.getId()]?.minWidth??n?.defaultMinWidth??b.minWidth;b.setActualWidth(C,t,!0)}else{const b=y/Ol(l);let C=y;for(let w=l.length-1;w>=0;w--){const x=l[w],M=s?.[x.getId()],E=M?.minWidth??n?.defaultMinWidth,I=M?.maxWidth??n?.defaultMaxWidth,N=x.getMinWidth(),T=x.getMaxWidth(),P=typeof E=="number"&&E>N?E:N,O=typeof I=="number"&&I<T?I:T;let G=Math.round(x.getActualWidth()*b);G<P?(G=P,g(x),p=!1):G>O?(G=O,g(x),p=!1):w===0&&(G=C),x.setActualWidth(G,t,!0),C-=G}}}for(const y of d)y.fireColumnWidthChangedEvent(t);const m=this.beans.visibleCols;m.setLeftValues(t),m.updateBodyWidths(),!i&&Mf(this.eventSvc,d,!0,t)}applyAutosizeStrategy(){const{gos:e,colDelayRenderSvc:t}=this.beans,i=e.get("autoSizeStrategy");i?.type!=="fitGridWidth"&&i?.type!=="fitProvidedWidth"||setTimeout(()=>{if(!this.isAlive())return;const n=i.type;if(n==="fitGridWidth"){const{columnLimits:s,defaultMinWidth:o,defaultMaxWidth:r}=i,a=s?.map(({colId:l,minWidth:c,maxWidth:d})=>({key:l,minWidth:c,maxWidth:d}));this.sizeColumnsToFitGridBody({defaultMinWidth:o,defaultMaxWidth:r,columnLimits:a})}else n==="fitProvidedWidth"&&this.sizeColumnsToFit(i.width,"sizeColumnsToFit");t?.revealColumns(n)})}onFirstDataRendered({colIds:e,...t}){setTimeout(()=>{if(!this.isAlive())return;const i="autosizeColumns";e?this.autoSizeCols({...t,source:i,colKeys:e}):this.autoSizeAllColumns({...t,source:i}),this.beans.colDelayRenderSvc?.revealColumns(t.type)})}processResizeOperations(){this.shouldQueueResizeOperations=!1;for(const e of this.resizeOperationQueue)e();this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function WIe(e,t,i={}){const n=i.minWidth??e.getMinWidth();t<n&&(t=n);const s=i.maxWidth??e.getMaxWidth();return t>s&&(t=s),t}function MH({ctrlsSvc:e,scrollVisibleSvc:t}){const i=e.getGridBodyCtrl(),s=i.isVerticalScrollShowing()?t.getScrollbarWidth():0;return Hv(i.eGridBody)-s}var UIe={moduleName:"ColumnAutoSize",version:ke,beans:[jIe],apiFunctions:{sizeColumnsToFit:zIe,autoSizeColumns:y8,autoSizeAllColumns:HIe},dependsOn:[vK]},$Ie=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function YIe(e){return e.pinnedRowModel?.getPinnedTopRowCount()??0}function KIe(e){return e.pinnedRowModel?.getPinnedBottomRowCount()??0}function qIe(e,t){return e.pinnedRowModel?.getPinnedTopRow(t)}function ZIe(e,t){return e.pinnedRowModel?.getPinnedBottomRow(t)}function XIe(e,t,i){return e.pinnedRowModel?.forEachPinnedRow(t,i)}var QIe={moduleName:"PinnedRow",version:ke,beans:[cwe],css:[$Ie],apiFunctions:{getPinnedTopRowCount:YIe,getPinnedBottomRowCount:KIe,getPinnedTopRow:qIe,getPinnedBottomRow:ZIe,forEachPinnedRow:XIe},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},JIe=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){const e=this.firstNode.__autoHeights?.[this.col.getColId()];if(e==null)return;let t=0;for(const i of this.spannedNodes)i!==this.lastNode&&(t+=i.rowHeight);return e-t}},eke=class extends he{constructor(e){super(),this.column=e}buildCache(e){const{column:t,beans:{gos:i,pinnedRowModel:n,rowModel:s,valueSvc:o,pagination:r}}=this,{colDef:a}=t,l=this.getNodeMap(e),c=new Map,d=i.getCallback("isFullWidthRow"),p=a.equals,g=a.spanRows,m=typeof g=="function";let y=null,b=null,C;const w=(M,E)=>{y=M,b=null,C=E},x=M=>{const E=!M.isExpandable()&&!M.group&&!M.detail&&(d?!d({rowNode:M}):!0);if(M.rowIndex==null||!E){w(null,null);return}if(y==null||M.level!==y.level||M.footer||b&&M.rowIndex-1!==b?.getLastNode().rowIndex){w(M,o.getValue(t,M));return}const I=o.getValue(t,M);if(m){const N=$e(i,{valueA:C,nodeA:y,valueB:I,nodeB:M,column:t,colDef:a});if(!g(N)){w(M,I);return}}else if(p?!p(C,I):C!==I){w(M,I);return}if(!b){const N=l?.get(y);N?.firstNode===y?(N.reset(),b=N):b=new JIe(t,y),c.set(y,b)}b.addSpannedNode(M),c.set(M,b)};switch(e){case"center":s.forEachDisplayedNode?.(M=>{(!r||r.isRowInPage(M.rowIndex))&&x(M)}),this.centerValueNodeMap=c;break;case"top":n?.forEachPinnedRow("top",x),this.topValueNodeMap=c;break;case"bottom":n?.forEachPinnedRow("bottom",x),this.bottomValueNodeMap=c;break}}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this.getNodeMap(e.rowPinned).get(e)}getNodeMap(e){switch(e){case"top":return this.topValueNodeMap;case"bottom":return this.bottomValueNodeMap;default:return this.centerValueNodeMap}}},tke=class extends he{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=ps(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=ps(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;const i=this.createManagedBean(new eke(e));this.spanningColumns.set(e,i),i.buildCache("top"),i.buildCache("bottom"),i.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){const{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t?.createCtrls("top"),t?.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t?.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){const i=this.spanningColumns.get(e);return i?i.isCellSpanning(t):!1}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:i}=this.beans,n=e.column,s=e.rowIndex,o=this.spanningColumns.get(n);if(!o)return;let r;switch(e.rowPinned){case"top":r=t?.getPinnedTopRow(s);break;case"bottom":r=t?.getPinnedBottomRow(s);break;default:r=i.getRow(s)}if(r)return o.getCellSpan(r)}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){const i=this.spanningColumns.get(e);if(i)return i.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[i,n]of this.spanningColumns)if(n.isCellSpanning(e)){const s=n.getCellSpan(e);t(i,s)}}destroy(){super.destroy(),this.spanningColumns.clear()}},ike=class extends Yg{constructor(e,t,i){super(e.col,e.firstNode,i,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,i,n,s,o,r){this.eWrapper=i,super.setComp(e,t,i,n,s,o,r),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){const{eGui:e,rowNode:t}=this;!e||t.rowIndex==null||DY(e,t.rowIndex)}setAriaRowSpan(){tme(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if(LD(t)){this.focusedCellPosition=void 0;return}const i=this.isCellFocused();i||(this.focusedCellPosition=void 0),e&&i&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},nke=class extends k0{onRowIndexChanged(){super.onRowIndexChanged();for(const e of this.getAllCellCtrls())e.refreshAriaRowIndex()}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){const t=this.beans.rowSpanSvc?.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new ike(t,this,this.beans)}isCorrectCtrlForSpan(e){const t=this.beans.rowSpanSvc?.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!1:e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},ske=class extends he{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,i=this.getCtrlsMap(e),n=i.size,s=this.getAllRelevantRowControls(e),o=new Map;let r=!1;for(const l of s)l.isAlive()&&t?.forEachSpannedColumn(l.rowNode,(c,d)=>{if(o.has(d.firstNode))return;const p=i.get(d.firstNode);if(p){o.set(d.firstNode,p),i.delete(d.firstNode);return}r=!0;const g=new nke(d.firstNode,this.beans,!1,!1,!1);o.set(d.firstNode,g)});this.setCtrlsMap(e,o);const a=o.size===n;if(!(!r&&a)){for(const l of i.values())l.destroyFirstPass(!0),l.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:t}=this.beans,i=t?.getCellSpanByPosition(e);if(!i)return;const n=this.getCtrlsMap(e.rowPinned).get(i.firstNode);if(n)return n.getAllCellCtrls().find(s=>s.column===e.column)}getCtrls(e){return[...this.getCtrlsMap(e).values()]}destroyRowCtrls(e){for(const t of this.getCtrlsMap(e).values())t.destroyFirstPass(!0),t.destroySecondPass();this.setCtrlsMap(e,new Map)}getCtrlsMap(e){switch(e){case"top":return this.topCtrls;case"bottom":return this.bottomCtrls;default:return this.centerCtrls}}setCtrlsMap(e,t){switch(e){case"top":this.topCtrls=t;break;case"bottom":this.bottomCtrls=t;break;default:this.centerCtrls=t;break}}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},oke={moduleName:"CellSpan",version:ke,beans:[tke,ske]},rke=class extends he{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,i=e.colDef,n=i.cellClassRules,s=this.getCellClassParams(e,i);yN(this.beans.expressionSvc,n===this.cellClassRules?void 0:this.cellClassRules,n,s,o=>t.toggleCss(o,!0),o=>t.toggleCss(o,!1)),this.cellClassRules=n}applyUserStyles(){const e=this.column,t=e.colDef,i=t.cellStyle;if(!i)return;let n;if(typeof i=="function"){const s=this.getCellClassParams(e,t);n=i(s)}else n=i;n&&this.cellComp.setUserStyles(n)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,i=e.colDef,n=this.getCellClassParams(e,i);for(const o of this.staticClasses)t.toggleCss(o,!1);const s=this.beans.cellStyles.getStaticCellClasses(i,n);this.staticClasses=s;for(const o of s)t.toggleCss(o,!0)}getCellClassParams(e,t){const{value:i,rowNode:n}=this.cellCtrl;return $e(this.beans.gos,{value:i,data:n.data,node:n,colDef:t,column:e,rowIndex:n.rowIndex})}},ake=class extends he{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,i,n){yN(this.beans.expressionSvc,void 0,e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let n;return typeof i=="function"?n=i(t):n=i,typeof n=="string"&&(n=[n]),n||[]}createCellCustomStyleFeature(e,t){return new rke(e,t)}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(s=>{i(s)})}},lke={moduleName:"CellStyle",version:ke,beans:[ake]},cke={moduleName:"RowStyle",version:ke,beans:[KMe]};function uke(e,t){return!!e.colHover?.isHovered(t)}var dke=class extends he{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=i=>{const{beans:n,gos:s,element:o,columns:r}=this,a=n.colHover;if(i??!!s.get("columnHoverHighlight"))this.destroyManagedListeners=this.addManagedElementListeners(o,{mouseover:a.setMouseOver.bind(a,r),mouseout:a.clearMouseOver.bind(a)});else{for(const c of this.destroyManagedListeners)c();this.destroyManagedListeners=[]}}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},hke="ag-column-hover",pke=class extends he{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,i){const n=()=>{const s=this.isHovered(i);t.toggleCss("ag-column-hover",s)};e.addManagedEventListeners({columnHoverChanged:n}),n()}onCellColumnHover(e,t){if(!t)return;const i=this.isHovered(e);t.toggleCss(hke,i)}addHeaderFilterColumnHoverListener(e,t,i,n){this.createHoverFeature(e,[i],n);const s=()=>{const o=this.isHovered(i);t.toggleCss("ag-column-hover",o)};e.addManagedEventListeners({columnHoverChanged:s}),s()}createHoverFeature(e,t,i){e.createManagedBean(new dke(t,i))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},gke={moduleName:"ColumnHover",version:ke,beans:[pke],apiFunctions:{isColumnHovered:uke}},fke=class extends he{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addListener(e,t){const i=this.wrapSvc?.wrap(e,t)??t,n=!fx.has(e),s=n?this.asyncListeners:this.syncListeners;s.has(e)||s.set(e,new Set),s.get(e).add(i),this.eventSvc.addListener(e,i,n)}removeListener(e,t){const i=this.wrapSvc?.unwrap(e,t)??t,s=!!this.asyncListeners.get(e)?.delete(i);s||this.syncListeners.get(e)?.delete(i),this.eventSvc.removeListener(e,i,s)}addGlobalListener(e){const t=this.wrapSvc?.wrapGlobal(e)??e,i=(o,r)=>{fx.has(o)&&t(o,r)},n=(o,r)=>{fx.has(o)||t(o,r)};this.globalListenerPairs.set(e,{syncListener:i,asyncListener:n});const s=this.eventSvc;s.addGlobalListener(i,!1),s.addGlobalListener(n,!0)}removeGlobalListener(e){const{eventSvc:t,wrapSvc:i,globalListenerPairs:n}=this,s=i?.unwrapGlobal(e)??e;if(n.has(s)){const{syncListener:r,asyncListener:a}=n.get(s);t.removeGlobalListener(r,!1),t.removeGlobalListener(a,!0),n.delete(e)}else this.syncGlobalListeners.delete(s),t.removeGlobalListener(s,!1)}destroyEventListeners(e,t){e.forEach((i,n)=>{i.forEach(s=>this.eventSvc.removeListener(n,s,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){for(const i of e)this.eventSvc.removeGlobalListener(i,t);e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:i,asyncListener:n})=>{t.removeGlobalListener(i,!1),t.removeGlobalListener(n,!0)}),e.clear()}};function mke(e,t,i){e.apiEventSvc?.addListener(t,i)}function yke(e,t,i){e.apiEventSvc?.removeListener(t,i)}function vke(e,t){e.apiEventSvc?.addGlobalListener(t)}function bke(e,t){e.apiEventSvc?.removeGlobalListener(t)}var Cke={moduleName:"EventApi",version:ke,apiFunctions:{addEventListener:mke,addGlobalListener:vke,removeEventListener:yke,removeGlobalListener:bke},beans:[fke]},wke={moduleName:"Locale",version:ke,beans:[KDe]},Ske=class extends he{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=ps(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){const{visibleCols:e,rowModel:t,rowSpanSvc:i,pinnedRowModel:n}=this.beans,s=e.autoHeightCols;let o=!1;const r=a=>{const l=a.__autoHeights;let c=Pu(this.beans,a).height;for(const d of s){let p=l?.[d.getColId()];const g=i?.getCellSpan(d,a);if(g){if(g.getLastNode()!==a)continue;if(p=i?.getCellSpan(d,a)?.getLastNodeAutoHeight(),!p)return}if(p==null){if(this.colSpanSkipCell(d,a))continue;return}c=Math.max(p,c)}c!==a.rowHeight&&(a.setRowHeight(c),o=!0)};n?.forEachPinnedRow?.("top",r),n?.forEachPinnedRow?.("bottom",r),t.forEachDisplayedNode?.(r),o&&t.onRowHeightChanged?.()}setRowAutoHeight(e,t,i){if(e.__autoHeights??(e.__autoHeights={}),t==null){delete e.__autoHeights[i.getId()];return}const n=e.__autoHeights[i.getId()];e.__autoHeights[i.getId()]=t,n!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){const{colModel:i,colViewport:n,visibleCols:s}=this.beans;if(!i.colSpanActive)return!1;let o=[];switch(e.getPinned()){case"left":o=s.getLeftColsForRow(t);break;case"right":o=s.getRightColsForRow(t);break;case null:o=n.getColsWithinViewport(t);break}return!o.includes(e)}setupCellAutoHeight(e,t,i){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const n=t.parentElement,{rowNode:s,column:o}=e,r=this.beans,a=d=>{if(this.beans.editSvc?.isEditing(e)||!e.isAlive()||!i.isAlive())return;const{paddingTop:p,paddingBottom:g,borderBottomWidth:m,borderTopWidth:y}=Jh(n),b=p+g+m+y,w=t.offsetHeight+b;if(d<5){const M=!Kn(r)?.contains(t),E=w==0;if(M||E){window.setTimeout(()=>a(d+1),0);return}}this.setRowAutoHeight(s,w,o)},l=()=>a(0);l();const c=Ac(r,t,l);return i.addDestroyFunc(()=>{c(),this.setRowAutoHeight(s,void 0,o)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;const e=this.beans.rowRenderer.getAllRowCtrls();let t=null;for(const{rowNode:i}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(i).filter(s=>s.isAutoHeight())),t.length!==0){if(!i.__autoHeights)return!1;for(const n of t){const s=i.__autoHeights[n.getColId()];if(!s||i.rowHeight<s)return!1}}return!0}},xke={moduleName:"RowAutoHeight",version:ke,beans:[Ske]},op={moduleName:"AllCommunity",version:ke,dependsOn:[STe,ITe,VTe,pAe,xEe,MEe,DEe,AEe,REe,EEe,TEe,SEe,fRe,mRe,yRe,gRe,bRe,CRe,iIe,eTe,wIe,bK,kIe,LIe,VIe,UIe,aSe,QIe,WEe,IDe,lke,gke,cke,Cke,PDe,ZTe,t8,wke,xke,rSe,xTe,oke]},Gs=Y.createContext({}),v8=Y.createContext("default"),mC=(e,t,i,n)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const o=e.newAgStackInstance();let r,a,l=!1;return o.then(c=>{if(l){t.destroyBean(c);return}r=c,a=r.getGui(),i.appendChild(a),DH(n,r)}),()=>{l=!0,r&&(a?.remove(),t.destroyBean(r),n&&DH(n,void 0))}},DH=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const i=e;i.current=t}},fr=(...e)=>e.filter(i=>i!=null&&i!=="").join(" "),Sr=class b8{constructor(...t){this.classesMap={};for(const i of t)this.classesMap[i]=!0}setClass(t,i){if(!!this.classesMap[t]==i)return this;const s=new b8;return s.classesMap={...this.classesMap},s.classesMap[t]=i,s}toString(){return Object.keys(this.classesMap).filter(i=>this.classesMap[i]).join(" ")}},rm=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,i=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===i()},jk=Y.version?.split(".")[0],C8=jk==="16"||jk==="17";function Mke(){return jk==="19"}var yx=!1;function Dke(e){return yx||setTimeout(()=>yx=!1,0),yx=!0,e()}var Xv=(e,t)=>{!C8&&e&&!yx?JH.flushSync(t):t()},Ake=e=>{C8?e():Y.startTransition(e)};function Rke(e,t,i){return Y.useSyncExternalStore?Y.useSyncExternalStore(e,t):i}function N0(e,t,i){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(i||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const n=[],s=[],o=new Map,r=new Map;for(let a=0;a<t.length;a++){const l=t[a];r.set(l.instanceId,l)}for(let a=0;a<e.length;a++){const l=e[a];o.set(l.instanceId,l),r.has(l.instanceId)&&n.push(l)}for(let a=0;a<t.length;a++){const l=t[a],c=l.instanceId;o.has(c)||s.push(l)}return n.length===e.length&&s.length===0?e:n.length===0&&s.length===t.length?t:n.length===0?s:s.length===0?n:[...n,...s]}var w8=R.forwardRef((e,t)=>{const{registry:i,context:n}=R.useContext(Gs),s=R.useRef(null),o=R.useRef(null),r=R.useRef(null),a=R.useRef(null),l=R.useRef(null),c=R.useRef(),[d,p]=R.useState(),[g,m]=R.useState(),[y,b]=R.useState(),[C,w]=R.useState(()=>new Sr),[x,M]=R.useState(()=>new Sr("ag-hidden")),[E,I]=R.useState(()=>new Sr("ag-hidden")),[N,T]=R.useState(()=>new Sr("ag-invisible"));R.useImperativeHandle(t,()=>({refresh(){return!1}})),R.useLayoutEffect(()=>mC(d,n,o.current),[d]);const P=R.useCallback(K=>{if(s.current=K,!K||n.isDestroyed()){c.current=n.destroyBean(c.current);return}const U={setInnerRenderer:(te,V)=>{p(te),b(V)},setChildCount:te=>m(te),toggleCss:(te,V)=>w(W=>W.setClass(te,V)),setContractedDisplayed:te=>I(V=>V.setClass("ag-hidden",!te)),setExpandedDisplayed:te=>M(V=>V.setClass("ag-hidden",!te)),setCheckboxVisible:te=>T(V=>V.setClass("ag-invisible",!te)),setCheckboxSpacing:te=>T(V=>V.setClass("ag-group-checkbox-spacing",te))},de=i.createDynamicBean("groupCellRendererCtrl",!0);de&&(c.current=n.createBean(de),c.current.init(U,K,r.current,a.current,l.current,w8,e))},[]),O=R.useMemo(()=>`ag-cell-wrapper ${C.toString()}`,[C]),G=R.useMemo(()=>`ag-group-expanded ${x.toString()}`,[x]),B=R.useMemo(()=>`ag-group-contracted ${E.toString()}`,[E]),z=R.useMemo(()=>`ag-group-checkbox ${N.toString()}`,[N]),j=d?.componentFromFramework,X=j?d.componentClass:void 0,q=d==null&&y!=null,H=nm(y);return Y.createElement("span",{className:O,ref:P,...e.colDef?{}:{role:c.current?.getCellAriaRole()}},Y.createElement("span",{className:G,ref:a}),Y.createElement("span",{className:B,ref:l}),Y.createElement("span",{className:z,ref:r}),Y.createElement("span",{className:"ag-group-value",ref:o},q?H:j?Y.createElement(X,{...d.params}):null),Y.createElement("span",{className:"ag-group-child-count"},g))}),AH=w8,DN=R.createContext({setMethods:()=>{}}),Eke=e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:n,setMethods:s}=e,[{key:o,...r},a]=R.useState(t);return R.useEffect(()=>{i(l=>a(l))},[]),Y.createElement(DN.Provider,{value:{setMethods:s}},Y.createElement(n,{key:o,...r}))},Tke=R.memo(Eke),Ike=0;function RH(){return`agPortalKey_${++Ike}`}var S8=class{constructor(e,t,i,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=RH(),this.portalKey=RH(),this.instanceCreated=this.isStatelessComponent()?Nt.resolve(!1):new Nt(s=>{this.resolveInstanceCreated=s})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i){setTimeout(()=>this.callMethod(e,t));return}const n=i[e];if(n)return n.apply(i,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new Nt(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{this.componentInstance=t,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=G0.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return R.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this[`${e}Component`];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function GD(e,t,i){for(const n of e){const s=t[n];s&&(i[n]=s)}}var Ko=class extends S8{constructor(){super(...arguments),this.awaitUpdateCallback=new Nt(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Tke}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:i=>this.setMethods(i),addUpdateCallback:i=>{this.updateCallback=()=>(i(this.getProps()),new Nt(n=>{setTimeout(()=>{n()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,GD(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new Nt(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},kke=class extends Ko{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Lke=class extends Ko{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Pke=class extends Ko{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:n}=this;return e.label=t,e.icon=i,e.shake=n,e}},Nke=class extends Ko{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new Nt(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const t=new Nt(i=>{this.resolveFilterPassCallback=i});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},Fke=class extends Ko{constructor(){super(...arguments),this.awaitSetMethodsCallback=new Nt(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function x8(e,t){e.parentFilterInstance(i=>{(i.setModel(t)||Nt.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Oke=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=i=>this.updateModel(i)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){GD(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),x8(this.floatingFilterParams,e)}},Bke=class extends Ko{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),x8(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Gke=class extends Ko{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},_ke=class extends Ko{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Vke=class extends Ko{refresh(e){this.sourceParams=e,this.refreshProps()}},zke=class extends Ko{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Hke=class extends Ko{refresh(e){this.sourceParams=e,this.refreshProps()}},jke=class extends Ko{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Wke=class extends Ko{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function AN(){Se(231)}var Uke=1e3,$ke=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||Uke}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,i=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){Xv(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,i)})}}},Yke=({ctrl:e})=>{const t=e.isAlive(),{context:i}=R.useContext(Gs),[n,s]=R.useState(),[o,r]=R.useState(),a=R.useRef(),l=R.useRef(null),c=R.useRef(null),d=R.useRef(null),p=R.useRef(),g=R.useRef();t&&!g.current&&(g.current=new dC(()=>l.current));const m=R.useCallback(w=>{if(l.current=w,!w||!e.isAlive()||i.isDestroyed()){a.current=i.destroyBean(a.current);return}a.current=i.createBean(new sm);const x=()=>{const E=e.getSelectAllGui();E&&(c.current?.insertAdjacentElement("afterend",E),a.current.addDestroyFunc(()=>E.remove()))},M={setWidth:E=>{l.current&&(l.current.style.width=E)},toggleCss:(E,I)=>g.current.toggleCss(E,I),setUserStyles:E=>r(E),setAriaSort:E=>{l.current&&(E?sme(l.current,E):ome(l.current))},setUserCompDetails:E=>s(E),getUserCompInstance:()=>p.current||void 0,refreshSelectAllGui:x,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(M,w,c.current,d.current,a.current),x()},[]);R.useLayoutEffect(()=>mC(n,i,d.current,p),[n]),R.useEffect(()=>{e.setDragSource(l.current)},[n]);const y=R.useMemo(()=>!!(n?.componentFromFramework&&rm(n.componentClass)),[n]),b=n?.componentFromFramework,C=n?.componentClass;return Y.createElement("div",{ref:m,style:o,className:"ag-header-cell",role:"columnheader"},Y.createElement("div",{ref:c,className:"ag-header-cell-resize",role:"presentation"}),Y.createElement("div",{ref:d,className:"ag-header-cell-comp-wrapper",role:"presentation"},b?y?Y.createElement(C,{...n.params}):Y.createElement(C,{...n.params,ref:p}):null))},Kke=R.memo(Yke),qke=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){GD(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},Zke=({ctrl:e})=>{const{context:t,gos:i}=R.useContext(Gs),[n,s]=R.useState(),[o,r]=R.useState(()=>new Sr("ag-header-cell","ag-floating-filter")),[a,l]=R.useState(()=>new Sr),[c,d]=R.useState(()=>new Sr("ag-floating-filter-button","ag-hidden")),[p,g]=R.useState("false"),[m,y]=R.useState(),[,b]=R.useState(1),C=R.useRef(),w=R.useRef(null),x=R.useRef(null),M=R.useRef(null),E=R.useRef(null),I=R.useRef(),N=R.useRef(),T=te=>{te!=null&&I.current&&I.current(te)},P=R.useCallback(te=>{if(w.current=te,!te||!e.isAlive()||t.isDestroyed()){C.current=t.destroyBean(C.current);return}C.current=t.createBean(new sm),N.current=new Nt(W=>{I.current=W});const V={toggleCss:(W,ee)=>r(pe=>pe.setClass(W,ee)),setUserStyles:W=>s(W),addOrRemoveBodyCssClass:(W,ee)=>l(pe=>pe.setClass(W,ee)),setButtonWrapperDisplayed:W=>{d(ee=>ee.setClass("ag-hidden",!W)),g(W?"false":"true")},setWidth:W=>{w.current&&(w.current.style.width=W)},setCompDetails:W=>y(W),getFloatingFilterComp:()=>N.current?N.current:null,setMenuIcon:W=>E.current?.appendChild(W)};e.setComp(V,te,E.current,x.current,C.current)},[]);R.useLayoutEffect(()=>mC(m,t,x.current,T),[m]);const O=R.useMemo(()=>o.toString(),[o]),G=R.useMemo(()=>a.toString(),[a]),B=R.useMemo(()=>c.toString(),[c]),z=R.useMemo(()=>!!(m&&m.componentFromFramework&&rm(m.componentClass)),[m]),j=R.useMemo(()=>i.get("reactiveCustomComponents"),[]),X=R.useMemo(()=>i.get("enableFilterHandlers"),[]),[q,H]=R.useState();R.useEffect(()=>{if(m?.componentFromFramework)if(j){const te=X?qke:Oke,V=new te(m.params,()=>b(W=>W+1));T(V),H(V)}else AN()},[m]);const K=q?.getProps(),U=m?.componentFromFramework,de=m?.componentClass;return Y.createElement("div",{ref:P,style:n,className:O,role:"gridcell"},Y.createElement("div",{ref:x,className:G,role:"presentation"},U?j?K&&Y.createElement(DN.Provider,{value:{setMethods:te=>q.setMethods(te)}},Y.createElement(de,{...K})):Y.createElement(de,{...m.params,ref:z?()=>{}:T}):null),Y.createElement("div",{ref:M,"aria-hidden":p,className:B,role:"presentation"},Y.createElement("button",{ref:E,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Xke=R.memo(Zke),Qke=({ctrl:e})=>{const{context:t}=R.useContext(Gs),[i,n]=R.useState(),[s,o]=R.useState(()=>new Sr),[r,a]=R.useState(()=>new Sr),[l,c]=R.useState("false"),[d,p]=R.useState(),[g,m]=R.useState(),y=R.useRef(),b=R.useRef(null),C=R.useRef(null),w=R.useRef(null),x=R.useRef(),M=R.useCallback(O=>{if(b.current=O,!O||!e.isAlive()||t.isDestroyed()){y.current=t.destroyBean(y.current);return}y.current=t.createBean(new sm);const G={setWidth:B=>{b.current&&(b.current.style.width=B)},toggleCss:(B,z)=>o(j=>j.setClass(B,z)),setUserStyles:B=>n(B),setHeaderWrapperHidden:B=>{const z=w.current;z&&(B?z.style.setProperty("display","none"):z.style.removeProperty("display"))},setHeaderWrapperMaxHeight:B=>{const z=w.current;z&&(B!=null?z.style.setProperty("max-height",`${B}px`):z.style.removeProperty("max-height"),z.classList.toggle("ag-header-cell-comp-wrapper-limited-height",B!=null))},setUserCompDetails:B=>m(B),setResizableDisplayed:B=>{a(z=>z.setClass("ag-hidden",!B)),c(B?"false":"true")},setAriaExpanded:B=>p(B),getUserCompInstance:()=>x.current||void 0};e.setComp(G,O,C.current,w.current,y.current)},[]);R.useLayoutEffect(()=>mC(g,t,w.current),[g]),R.useEffect(()=>{b.current&&e.setDragSource(b.current)},[g]);const E=R.useMemo(()=>!!(g?.componentFromFramework&&rm(g.componentClass)),[g]),I=R.useMemo(()=>"ag-header-group-cell "+s.toString(),[s]),N=R.useMemo(()=>"ag-header-cell-resize "+r.toString(),[r]),T=g?.componentFromFramework,P=g?.componentClass;return Y.createElement("div",{ref:M,style:i,className:I,role:"columnheader","aria-expanded":d},Y.createElement("div",{ref:w,className:"ag-header-cell-comp-wrapper",role:"presentation"},T?E?Y.createElement(P,{...g.params}):Y.createElement(P,{...g.params,ref:x}):null),Y.createElement("div",{ref:C,"aria-hidden":l,className:N}))},Jke=R.memo(Qke),e1e=({ctrl:e})=>{const{gos:t,context:i}=R.useContext(Gs),{topOffset:n,rowHeight:s}=R.useMemo(()=>e.getTopAndHeight(),[]),o=R.useMemo(()=>t.get("tabIndex"),[]),[r,a]=R.useState(()=>e.getAriaRowIndex()),l=e.headerRowClass,[c,d]=R.useState(()=>s+"px"),[p,g]=R.useState(()=>n+"px"),m=R.useRef(null),[y,b]=R.useState(()=>e.getUpdatedHeaderCtrls()),C=R.useRef(),w=R.useRef(null),x=R.useCallback(I=>{if(w.current=I,!I||!e.isAlive()||i.isDestroyed()){C.current=i.destroyBean(C.current);return}C.current=i.createBean(new sm);const N={setHeight:T=>d(T),setTop:T=>g(T),setHeaderCtrls:(T,P,O)=>{const G=m.current,B=N0(G,T,P);B!==G&&(m.current=B,Xv(O,()=>b(B)))},setWidth:T=>{w.current&&(w.current.style.width=T)},setRowIndex:T=>{a(T)}};e.setComp(N,C.current,!1)},[]),M=R.useMemo(()=>({height:c,top:p}),[c,p]),E=R.useCallback(I=>{switch(e.type){case"group":return Y.createElement(Jke,{ctrl:I,key:I.instanceId});case"filter":return Y.createElement(Xke,{ctrl:I,key:I.instanceId});default:return Y.createElement(Kke,{ctrl:I,key:I.instanceId})}},[]);return Y.createElement("div",{ref:x,className:l,role:"row",style:M,tabIndex:o,"aria-rowindex":r},y.map(E))},t1e=R.memo(e1e),i1e=({pinned:e})=>{const[t,i]=R.useState(!0),[n,s]=R.useState([]),{context:o}=R.useContext(Gs),r=R.useRef(null),a=R.useRef(null),l=R.useRef(),c=e==="left",d=e==="right",p=!c&&!d,g=R.useCallback(b=>{if(r.current=b,!b||o.isDestroyed()){l.current=o.destroyBean(l.current);return}l.current=o.createBean(new jCe(e));const C={setDisplayed:i,setCtrls:w=>s(w),setCenterWidth:w=>{a.current&&(a.current.style.width=w)},setViewportScrollLeft:w=>{r.current&&(r.current.scrollLeft=w)},setPinnedContainerWidth:w=>{r.current&&(r.current.style.width=w,r.current.style.minWidth=w,r.current.style.maxWidth=w)}};l.current.setComp(C,r.current)},[]),m=t?"":"ag-hidden",y=()=>n.map(b=>Y.createElement(t1e,{ctrl:b,key:b.instanceId}));return c?Y.createElement("div",{ref:g,className:"ag-pinned-left-header "+m,"aria-hidden":!t,role:"rowgroup"},y()):d?Y.createElement("div",{ref:g,className:"ag-pinned-right-header "+m,"aria-hidden":!t,role:"rowgroup"},y()):p?Y.createElement("div",{ref:g,className:"ag-header-viewport "+m,role:"rowgroup",tabIndex:-1},Y.createElement("div",{ref:a,className:"ag-header-container",role:"presentation"},y())):null},KT=R.memo(i1e),n1e=()=>{const[e,t]=R.useState(()=>new Sr),[i,n]=R.useState(),{context:s}=R.useContext(Gs),o=R.useRef(null),r=R.useRef(),a=R.useCallback(d=>{if(o.current=d,!d||s.isDestroyed()){r.current=s.destroyBean(r.current);return}r.current=s.createBean(new _Ce);const p={toggleCss:(g,m)=>t(y=>y.setClass(g,m)),setHeightAndMinHeight:g=>n(g)};r.current.setComp(p,d,d)},[]),l=R.useMemo(()=>"ag-header "+e.toString(),[e]),c=R.useMemo(()=>({height:i,minHeight:i}),[i]);return Y.createElement("div",{ref:a,className:l,style:c,role:"presentation"},Y.createElement(KT,{pinned:"left"}),Y.createElement(KT,{pinned:null}),Y.createElement(KT,{pinned:"right"}))},s1e=R.memo(n1e),o1e=(e,t)=>{R.useEffect(()=>{const i=t.current;if(i){const n=i.parentElement;if(n){const s=document.createComment(e);return n.insertBefore(s,i),()=>{s.remove()}}}},[e])},Gd=o1e,r1e=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new Nt(i=>{this.resolveInstanceCreated=i}),this.onValueChange=i=>this.updateValue(i),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){GD(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},a1e=e=>{const t=R.useRef(e),i=R.useRef(),n=R.useRef(!1),s=R.useRef(!1),[,o]=R.useState(0);n.current&&(s.current=!0),R.useEffect(()=>(n.current||(i.current=t.current(),n.current=!0),o(r=>r+1),()=>{s.current&&i.current?.()}),[])},l1e=e=>{const[t,i]=R.useState(),n=R.useContext(Gs),{context:s,popupSvc:o,gos:r,editSvc:a}=n,{editDetails:l,cellCtrl:c,eParentCell:d}=e;return a1e(()=>{const{compDetails:p}=l,g=r.get("stopEditingWhenCellsLoseFocus");let m,y;if(!s.isDestroyed()){y=s.createBean(a.createPopupEditorWrapper(p.params));const b=y.getGui();if(e.jsChildComp){const I=e.jsChildComp.getGui();I&&b.appendChild(I)}const{column:C,rowNode:w}=c,x={column:C,rowNode:w,type:"popupCellEditor",eventSource:d,ePopup:b,position:l.popupPosition,keepWithinBounds:!0},M=o?.positionPopupByComponent.bind(o,x),E=o?.addPopup({modal:g,eChild:b,closeOnEsc:!0,closedCallback:()=>{c.onPopupEditorClosed()},anchorToElement:d,positionCallback:M,ariaOwns:d});m=E?E.hideFunc:void 0,i(y),e.jsChildComp?.afterGuiAttached?.()}return()=>{m?.(),s.destroyBean(y)}}),R.useLayoutEffect(()=>()=>{c.isCellFocused()&&t?.getGui().contains($i(n))&&d.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?G0.createPortal(e.wrappedContent,t.getGui()):null},EH=R.memo(l1e),c1e=(e,t,i)=>{const{compProxy:n}=e;i(n);const s=n.getProps(),o=rm(t);return Y.createElement(DN.Provider,{value:{setMethods:r=>n.setMethods(r)}},o?Y.createElement(t,{...s}):Y.createElement(t,{...s,ref:r=>n.setRef(r)}))},TH=(e,t,i)=>e.compProxy?c1e(e,t,i):Y.createElement(t,{...e.compDetails.params,ref:i}),u1e=(e,t,i,n,s)=>{const o=e.compDetails,r=o.componentClass,a=o.componentFromFramework&&!e.popup,l=o.componentFromFramework&&e.popup,c=!o.componentFromFramework&&e.popup;return a?TH(e,r,t):l?Y.createElement(EH,{editDetails:e,cellCtrl:n,eParentCell:i,wrappedContent:TH(e,r,t)}):c&&s?Y.createElement(EH,{editDetails:e,cellCtrl:n,eParentCell:i,jsChildComp:s}):null},d1e=(e,t,i,n,s,o)=>{const{context:r}=R.useContext(Gs),a=R.useCallback(()=>{const l=s.current;if(!l)return;const c=l.getGui();c&&c.parentElement&&c.remove(),r.destroyBean(l),s.current=void 0},[]);R.useEffect(()=>{const l=e!=null,c=e?.compDetails&&!e.compDetails.componentFromFramework,d=t&&i==null;if(!(l&&c&&!d)){a();return}const g=e.compDetails;if(s.current){const y=s.current,C=y.refresh!=null&&e.force==!1?y.refresh(g.params):!1;if(C===!0||C===void 0)return;a()}g.newAgStackInstance().then(y=>{if(!y)return;const b=y.getGui();if(!b)return;(t?i:o.current).appendChild(b),s.current=y})},[e,t,n]),R.useEffect(()=>a,[])},M8=d1e,h1e=({cellCtrl:e,parent:t})=>{const i=R.useRef(),n=R.useMemo(()=>{const{loadingComp:s}=e.getDeferLoadingCellRenderer();return s?{value:void 0,compDetails:s,force:!1}:void 0},[e]);if(M8(n,!1,void 0,1,i,t),n?.compDetails?.componentFromFramework){const s=n.compDetails.componentClass;return Y.createElement(s,{...n.compDetails.params})}return Y.createElement(Y.Fragment,null)},p1e=({cellCtrl:e,printLayout:t,editingCell:i})=>{const n=R.useContext(Gs),{context:s}=n,{column:{colIdSanitised:o},instanceId:r}=e,a=R.useRef(),[l,c]=R.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[d,p]=R.useState(),[g,m]=R.useState(1),[y,b]=R.useState(),[C,w]=R.useState(!1),[x,M]=R.useState(!1),[E,I]=R.useState(!1),[N,T]=R.useState(),P=R.useMemo(()=>e.isForceWrapper(),[e]),O=R.useMemo(()=>e.getCellAriaRole(),[e]),G=R.useRef(null),B=R.useRef(null),z=R.useRef(null),j=R.useRef(),X=R.useRef(),q=R.useRef(),H=R.useRef([]),K=R.useRef(),U=R.useRef(),[de,te]=R.useState(0),V=R.useCallback(Ge=>{U.current=Ge,te(lt=>lt+1)},[]),W=l!=null&&(C||E||x)&&(d==null||!!d.popup),ee=P||W,pe=R.useMemo(()=>e.getCellValueClass(),[e]),be=R.useCallback(Ge=>{if(X.current=Ge,Ge){const lt=Ge.isCancelBeforeStart&&Ge.isCancelBeforeStart();setTimeout(()=>{lt?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(Ge))})}},[e]),Ce=R.useRef();Ce.current||(Ce.current=new dC(()=>G.current)),M8(l,ee,U.current,de,j,G);const Fe=R.useRef();R.useLayoutEffect(()=>{const Ge=Fe.current,lt=l;if(Fe.current=l,Ge==null||Ge.compDetails==null||lt==null||lt.compDetails==null)return;K.current?.refreshVisibility();const kt=Ge.compDetails,wt=lt.compDetails;if(kt.componentClass!=wt.componentClass||z.current?.refresh==null)return;z.current.refresh(wt.params)!=!0&&m(ot=>ot+1)},[l]),R.useLayoutEffect(()=>{if(!(d&&!d.compDetails.componentFromFramework)||s.isDestroyed())return;const lt=d.compDetails,kt=d.popup===!0,wt=lt.newAgStackInstance();return wt.then(Ve=>{if(!Ve)return;const ot=Ve.getGui();be(Ve),kt||((P?q:G).current?.appendChild(ot),Ve.afterGuiAttached?.()),T(Ve)}),()=>{wt.then(Ve=>{const ot=Ve.getGui();e.disableEditorTooltipFeature(),s.destroyBean(Ve),be(void 0),T(void 0),ot?.remove()})}},[d]);const xe=R.useCallback(Ge=>{if(q.current=Ge,!Ge||s.isDestroyed()||!e.isAlive()){const wt=H.current;H.current=[];for(const Ve of wt)Ve();return}let lt;const kt=wt=>{wt&&(Ge.insertAdjacentElement("afterbegin",wt.getGui()),H.current.push(()=>{Lu(wt.getGui()),s.destroyBean(wt),K.current===lt&&(K.current=void 0)}))};C&&kt(e.createSelectionCheckbox()),E&&kt(e.createDndSource()),x&&(lt=e.createRowDragComp(),K.current=lt,lt&&(kt(lt),lt.refreshVisibility()))},[e,s,E,x,C]),De=R.useCallback(()=>{const Ge=!e.isCellSpanning()||B.current,lt=G.current;if(!lt||!Ge||!e||!e.isAlive()||s.isDestroyed()){a.current=s.destroyBean(a.current);return}a.current=s.createBean(new sm);const kt={toggleCss:(Ve,ot)=>Ce.current.toggleCss(Ve,ot),setUserStyles:Ve=>b(Ve),getFocusableElement:()=>G.current,setIncludeSelection:Ve=>w(Ve),setIncludeRowDrag:Ve=>M(Ve),setIncludeDndSource:Ve=>I(Ve),getCellEditor:()=>X.current??null,getCellRenderer:()=>z.current??j.current,getParentOfValue:()=>U.current??q.current??G.current,setRenderDetails:(Ve,ot,Lt)=>{const li=()=>{c(dt=>dt?.compDetails!==Ve||dt?.value!==ot||dt?.force!==Lt?{value:ot,compDetails:Ve,force:Lt}:dt)};if(Ve?.params?.deferRender&&!e.rowNode.group){const{loadingComp:dt,onReady:ci}=e.getDeferLoadingCellRenderer();if(dt){c({value:void 0,compDetails:dt,force:!1}),ci.then(()=>Ake(li));return}}li()},setEditDetails:(Ve,ot,Lt,li)=>{if(Ve){let dt;Ve.componentFromFramework&&(li?dt=new r1e(Ve.params,()=>m(ci=>ci+1)):AN()),p({compDetails:Ve,popup:ot,popupPosition:Lt,compProxy:dt}),ot||c(void 0)}else e.hasBrowserFocus()&&kt.getFocusableElement().focus({preventScroll:!0}),X.current=void 0,p(void 0)},refreshEditStyles:(Ve,ot)=>{if(!G.current)return;const{current:Lt}=Ce;Lt.toggleCss("ag-cell-value",!ee),Lt.toggleCss("ag-cell-inline-editing",!!Ve&&!ot),Lt.toggleCss("ag-cell-popup-editing",!!Ve&&!!ot),Lt.toggleCss("ag-cell-not-inline-editing",!Ve||!!ot)}},wt=q.current||void 0;e.setComp(kt,lt,B.current??void 0,wt,t,i,a.current)},[]),Ee=R.useCallback(Ge=>{G.current=Ge,De()},[]),Je=R.useCallback(Ge=>{B.current=Ge,De()},[]),ze=R.useMemo(()=>!!(l?.compDetails?.componentFromFramework&&rm(l.compDetails.componentClass)),[l]);R.useLayoutEffect(()=>{if(!G.current)return;const{current:Ge}=Ce;Ge.toggleCss("ag-cell-value",!ee),Ge.toggleCss("ag-cell-inline-editing",!!d&&!d.popup),Ge.toggleCss("ag-cell-popup-editing",!!d&&!!d.popup),Ge.toggleCss("ag-cell-not-inline-editing",!d||!!d.popup)});const ct=()=>{const{compDetails:Ge,value:lt}=l;if(!Ge)return lt?.toString?.()??lt;if(Ge.componentFromFramework){const kt=Ge.componentClass;return Y.createElement(R.Suspense,{fallback:Y.createElement(h1e,{cellCtrl:e,parent:G})},ze?Y.createElement(kt,{...Ge.params,key:g}):Y.createElement(kt,{...Ge.params,key:g,ref:z}))}},Xe=()=>{const Ge=()=>l==null?null:ee?Y.createElement("span",{role:"presentation",id:`cell-${r}`,className:pe,ref:V},ct()):ct(),lt=kt=>u1e(kt,be,G.current,e,N);return d!=null?d.popup?Y.createElement(Y.Fragment,null,Ge(),lt(d)):lt(d):Ge()},pt=()=>Y.createElement("div",{ref:Ee,style:y,role:O,"col-id":o},ee?Y.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:xe},Xe()):Xe());return e.isCellSpanning()?Y.createElement("div",{ref:Je,className:"ag-spanned-cell-wrapper",role:"presentation"},pt()):pt()},g1e=R.memo(p1e),f1e=({rowCtrl:e,containerType:t})=>{const{context:i,gos:n,editSvc:s}=R.useContext(Gs),o=R.useContext(v8)==="default",r=R.useRef(),a=R.useRef(e.getDomOrder()),l=e.isFullWidth(),c=e.rowNode.displayed,[d,p]=R.useState(()=>c?e.rowNode.getRowIndexString():null),[g,m]=R.useState(()=>e.rowId),[y,b]=R.useState(()=>e.businessKey),[C,w]=R.useState(()=>e.rowStyles),x=R.useRef(null),[M,E]=R.useState(()=>null),[I,N]=R.useState(),[T,P]=R.useState(()=>c?e.getInitialRowTop(t):void 0),[O,G]=R.useState(()=>c?e.getInitialTransform(t):void 0),B=R.useRef(null),z=R.useRef(),j=R.useRef(),X=R.useRef(!1),[q,H]=R.useState(0);R.useEffect(()=>{if(X.current||!I||q>10)return;const Ee=B.current?.firstChild;Ee?(e.setupDetailRowAutoHeight(Ee),X.current=!0):H(Je=>Je+1)},[I,q]);const K=R.useRef();K.current||(K.current=new dC(()=>B.current));const U=R.useRef(()=>{}),de=R.useCallback(Ee=>(U.current=Ee,()=>{U.current=()=>{}}),[]),te=Rke(de,()=>x.current,[]),V=o?te:M,W=R.useCallback(Ee=>{if(B.current=Ee,r.current=Ee?i.createBean(new sm):i.destroyBean(r.current),!Ee){e.unsetComp(t);return}if(!e.isAlive()||i.isDestroyed())return;const Je={setTop:P,setTransform:G,toggleCss:(ze,ct)=>K.current.toggleCss(ze,ct),setDomOrder:ze=>a.current=ze,setRowIndex:p,setRowId:m,setRowBusinessKey:b,setUserStyles:w,setCellCtrls:(ze,ct)=>{const Xe=x.current,pt=N0(Xe,ze,a.current);pt!==Xe&&(x.current=pt,o?U.current():Xv(ct,()=>E(pt)))},showFullWidth:ze=>{j.current=ze.params,N(ze)},getFullWidthCellRenderer:()=>z.current,getFullWidthCellRendererParams:()=>j.current,refreshFullWidth:ze=>{const ct=ze();return j.current=ct,Fe.current?(N(Xe=>({...Xe,params:ct})),!0):!z.current||!z.current.refresh?!1:z.current.refresh(ct)}};e.setComp(Je,Ee,t,r.current)},[]);R.useLayoutEffect(()=>mC(I,i,B.current,z),[I]);const ee=R.useMemo(()=>{const Ee={top:T,transform:O};return Object.assign(Ee,C),Ee},[T,O,C]),pe=l&&I?.componentFromFramework,be=!l&&V!=null,Ce=R.useMemo(()=>!!(I?.componentFromFramework&&rm(I.componentClass)),[I]),Fe=R.useRef(!1);R.useEffect(()=>{Fe.current=Ce&&!!I&&!!n.get("reactiveCustomComponents")},[Ce,I]);const xe=()=>V?.map(Ee=>Y.createElement(g1e,{cellCtrl:Ee,editingCell:s?.isEditing(Ee,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:Ee.instanceId})),De=()=>{const Ee=I.componentClass;return Ce?Y.createElement(Ee,{...I.params}):Y.createElement(Ee,{...I.params,ref:z})};return Y.createElement("div",{ref:W,role:"row",style:ee,"row-index":d,"row-id":g,"row-business-key":y},be?xe():pe?De():null)},IH=R.memo(f1e),m1e=({name:e})=>{const{context:t,gos:i}=R.useContext(Gs),n=R.useMemo(()=>pC(e),[e]),s=R.useRef(null),o=R.useRef(null),r=R.useRef(null),a=R.useRef([]),l=R.useRef([]),[c,d]=R.useState(()=>[]),p=!!i.get("enableCellSpan")&&!!n.getSpannedRowCtrls,g=R.useRef([]),m=R.useRef([]),[y,b]=R.useState(()=>[]),C=R.useRef(!1),w=R.useRef(),x=R.useMemo(()=>fr("ag-viewport",Z6(e)),[e]),M=R.useMemo(()=>fr(hx(e)),[e]),E=R.useMemo(()=>fr("ag-spanning-container",cCe(e)),[e]),I=n.type==="center"||p,N=I?s:o;Gd(" AG Row Container "+e+" ",N);const T=R.useCallback(()=>{const q=!I||s.current!=null,H=o.current!=null,K=!p||r.current!=null;return q&&H&&K},[]),P=R.useCallback(()=>s.current==null&&o.current==null&&r.current==null,[]),O=R.useCallback(()=>{if(P()&&(w.current=t.destroyBean(w.current)),!t.isDestroyed()&&T()){const q=U=>{const de=N0(l.current,a.current,C.current);de!==l.current&&(l.current=de,Xv(U,()=>d(de)))},H=U=>{const de=N0(m.current,g.current,C.current);de!==m.current&&(m.current=de,Xv(U,()=>b(de)))},K={setHorizontalScroll:U=>{s.current&&(s.current.scrollLeft=U)},setViewportHeight:U=>{s.current&&(s.current.style.height=U)},setRowCtrls:({rowCtrls:U,useFlushSync:de})=>{const te=!!de&&a.current.length>0&&U.length>0;a.current=U,q(te)},setSpannedRowCtrls:(U,de)=>{const te=!!de&&g.current.length>0&&U.length>0;g.current=U,H(te)},setDomOrder:U=>{C.current!=U&&(C.current=U,q(!1))},setContainerWidth:U=>{o.current&&(o.current.style.width=U)},setOffsetTop:U=>{o.current&&(o.current.style.transform=`translateY(${U})`)}};w.current=t.createBean(new bCe(e)),w.current.setComp(K,o.current,r.current??void 0,s.current)}},[T,P]),G=R.useCallback(q=>{o.current=q,O()},[O]),B=R.useCallback(q=>{r.current=q,O()},[O]),z=R.useCallback(q=>{s.current=q,O()},[O]),j=()=>Y.createElement("div",{className:M,ref:G,role:I?"presentation":"rowgroup"},c.map(q=>Y.createElement(IH,{rowCtrl:q,containerType:n.type,key:q.instanceId})));if(!I)return j();const X=()=>Y.createElement("div",{className:E,ref:B,role:"presentation"},y.map(q=>Y.createElement(IH,{rowCtrl:q,containerType:n.type,key:q.instanceId})));return Y.createElement("div",{className:x,ref:z,role:"rowgroup"},j(),p?X():null)},y1e=R.memo(m1e),v1e=()=>{const e=R.useContext(Gs),{context:t,overlays:i}=e,[n,s]=R.useState(""),[o,r]=R.useState(0),[a,l]=R.useState(0),[c,d]=R.useState("0px"),[p,g]=R.useState("0px"),[m,y]=R.useState("100%"),[b,C]=R.useState("0px"),[w,x]=R.useState("0px"),[M,E]=R.useState("100%"),[I,N]=R.useState(!0),[T,P]=R.useState(!0),[O,G]=R.useState(null),[B,z]=R.useState(""),[j,X]=R.useState(null),[q,H]=R.useState("ag-layout-normal"),K=R.useRef();K.current||(K.current=new dC(()=>U.current));const U=R.useRef(null),de=R.useRef(null),te=R.useRef(null),V=R.useRef(null),W=R.useRef(null),ee=R.useRef(null),pe=R.useRef(null),be=R.useRef([]),Ce=R.useRef([]);Gd(" AG Grid Body ",U),Gd(" AG Pinned Top ",de),Gd(" AG Sticky Top ",te),Gd(" AG Middle ",ee),Gd(" AG Pinned Bottom ",pe);const Fe=R.useCallback(ot=>{if(U.current=ot,!ot||t.isDestroyed()){be.current=t.destroyBeans(be.current);for(const Ot of Ce.current)Ot();Ce.current=[];return}const Lt=(Ot,wi)=>{Ot.appendChild(wi),Ce.current.push(()=>wi.remove())},li=Ot=>{const wi=t.createBean(new Ot);return be.current.push(wi),wi},dt=(Ot,wi,da)=>{Lt(Ot,document.createComment(da)),Lt(Ot,li(wi).getGui())};dt(ot,ACe," AG Fake Horizontal Scroll ");const ci=i?.getOverlayWrapperCompClass();ci&&dt(ot,ci," AG Overlay Wrapper "),W.current&&dt(W.current,ECe," AG Fake Vertical Scroll ");const _s={setRowAnimationCssOnBodyViewport:s,setColumnCount:Ot=>{U.current&&ime(U.current,Ot)},setRowCount:Ot=>{U.current&&eme(U.current,Ot)},setTopHeight:r,setBottomHeight:l,setStickyTopHeight:d,setStickyTopTop:g,setStickyTopWidth:y,setTopInvisible:N,setBottomInvisible:P,setColumnMovingCss:(Ot,wi)=>K.current.toggleCss(Ot,wi),updateLayoutClasses:H,setAlwaysVerticalScrollClass:G,setPinnedTopBottomOverflowY:z,setCellSelectableCss:(Ot,wi)=>X(wi?Ot:null),setBodyViewportWidth:Ot=>{ee.current&&(ee.current.style.width=Ot)},registerBodyViewportResizeListener:Ot=>{if(ee.current){const wi=Ac(e,ee.current,Ot);Ce.current.push(()=>wi())}},setStickyBottomHeight:C,setStickyBottomBottom:x,setStickyBottomWidth:E,setGridRootRole:Ot=>ot.setAttribute("role",Ot)},Zi=t.createBean(new xCe);be.current.push(Zi),Zi.setComp(_s,ot,ee.current,de.current,pe.current,te.current,V.current)},[]),xe=R.useMemo(()=>fr("ag-root","ag-unselectable",q),[q]),De=R.useMemo(()=>fr("ag-body-viewport",n,q,O,j),[n,q,O,j]),Ee=R.useMemo(()=>fr("ag-body",q),[q]),Je=R.useMemo(()=>fr("ag-floating-top",I?"ag-invisible":null,j),[j,I]),ze=R.useMemo(()=>fr("ag-sticky-top",j),[j]),ct=R.useMemo(()=>fr("ag-sticky-bottom",b==="0px"?"ag-invisible":null,j),[j,b]),Xe=R.useMemo(()=>fr("ag-floating-bottom",T?"ag-invisible":null,j),[j,T]),pt=R.useMemo(()=>({height:o,minHeight:o,overflowY:B}),[o,B]),Ge=R.useMemo(()=>({height:c,top:p,width:m}),[c,p,m]),lt=R.useMemo(()=>({height:b,bottom:w,width:M}),[b,w,M]),kt=R.useMemo(()=>({height:a,minHeight:a,overflowY:B}),[a,B]),wt=ot=>Y.createElement(y1e,{name:ot,key:`${ot}-container`}),Ve=({section:ot,children:Lt,className:li,style:dt})=>Y.createElement("div",{ref:ot,className:li,role:"presentation",style:dt},Lt.map(wt));return Y.createElement("div",{ref:Fe,className:xe},Y.createElement(s1e,null),Ve({section:de,className:Je,style:pt,children:["topLeft","topCenter","topRight","topFullWidth"]}),Y.createElement("div",{className:Ee,ref:W,role:"presentation"},Ve({section:ee,className:De,children:["left","center","right","fullWidth"]})),Ve({section:te,className:ze,style:Ge,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Ve({section:V,className:ct,style:lt,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Ve({section:pe,className:Xe,style:kt,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},b1e=R.memo(v1e),C1e=(e,t)=>{const{children:i,eFocusableElement:n,onTabKeyDown:s,gridCtrl:o,forceFocusOutWhenTabGuardsAreEmpty:r,isEmpty:a}=e,{context:l}=R.useContext(Gs),c=R.useRef(null),d=R.useRef(null),p=R.useRef(),g=w=>{const x=w==null?void 0:parseInt(w,10).toString();for(const M of[c,d])x===void 0?M.current?.removeAttribute("tabindex"):M.current?.setAttribute("tabindex",x)};R.useImperativeHandle(t,()=>({forceFocusOutOfContainer(w){p.current?.forceFocusOutOfContainer(w)}}));const m=R.useCallback(()=>{const w=c.current,x=d.current;if(!w&&!x||l.isDestroyed()){p.current=l.destroyBean(p.current);return}if(w&&x){const M={setTabIndex:g};p.current=l.createBean(new lK({comp:M,eTopGuard:w,eBottomGuard:x,eFocusableElement:n,onTabKeyDown:s,forceFocusOutWhenTabGuardsAreEmpty:r,focusInnerElement:E=>o.focusInnerElement(E),isEmpty:a}))}},[]),y=R.useCallback(w=>{c.current=w,m()},[m]),b=R.useCallback(w=>{d.current=w,m()},[m]),C=w=>{const x=w==="top"?Wg.TAB_GUARD_TOP:Wg.TAB_GUARD_BOTTOM;return Y.createElement("div",{className:`${Wg.TAB_GUARD} ${x}`,role:"presentation",ref:w==="top"?y:b})};return Y.createElement(Y.Fragment,null,C("top"),i,C("bottom"))},w1e=R.forwardRef(C1e),S1e=R.memo(w1e),x1e=({context:e})=>{const[t,i]=R.useState(""),[n,s]=R.useState(""),[o,r]=R.useState(null),[a,l]=R.useState(null),[c,d]=R.useState(!1),[p,g]=R.useState(),m=R.useRef(),y=R.useRef(null),b=R.useRef(),[C,w]=R.useState(null),x=R.useRef(()=>{}),M=R.useRef(),E=R.useRef([]),I=R.useCallback(()=>{},[]);Gd(" AG Grid ",y);const N=R.useCallback(z=>{if(y.current=z,m.current=z?e.createBean(new Dwe):e.destroyBean(m.current),!z||e.isDestroyed())return;const j=m.current;x.current=j.focusInnerElement.bind(j);const X={destroyGridUi:()=>{},setRtlClass:i,forceFocusOutOfContainer:q=>{if(!q&&M.current?.isDisplayed()){M.current.forceFocusOutOfContainer(q);return}b.current?.forceFocusOutOfContainer(q)},updateLayoutClasses:s,getFocusableContainers:()=>{const q=[],H=y.current?.querySelector(".ag-root");H&&q.push({getGui:()=>H});for(const K of E.current)K.isDisplayed()&&q.push(K);return q},setCursor:r,setUserSelect:l};j.setComp(X,z,z),d(!0)},[]);R.useEffect(()=>{const z=m.current,j=y.current;if(!p||!z||!C||!j||e.isDestroyed())return;const X=[],{watermarkSelector:q,paginationSelector:H,sideBarSelector:K,statusBarSelector:U,gridHeaderDropZonesSelector:de}=z.getOptionalSelectors(),te=[];if(de){const W=e.createBean(new de.component),ee=W.getGui();j.insertAdjacentElement("afterbegin",ee),te.push(ee),X.push(W)}if(K){const W=e.createBean(new K.component),ee=W.getGui(),pe=C.querySelector(".ag-tab-guard-bottom");pe&&(pe.insertAdjacentElement("beforebegin",ee),te.push(ee)),X.push(W),E.current.push(W)}const V=W=>{const ee=e.createBean(new W),pe=ee.getGui();return j.insertAdjacentElement("beforeend",pe),te.push(pe),X.push(ee),ee};if(U&&V(U.component),H){const W=V(H.component);M.current=W,E.current.push(W)}return q&&V(q.component),()=>{e.destroyBeans(X);for(const W of te)W.remove()}},[p,C,e]);const T=R.useMemo(()=>fr("ag-root-wrapper",t,n),[t,n]),P=R.useMemo(()=>fr("ag-root-wrapper-body","ag-focus-managed",n),[n]),O=R.useMemo(()=>({userSelect:a??"",WebkitUserSelect:a??"",cursor:o??""}),[a,o]),G=R.useCallback(z=>{b.current=z,g(z!==null)},[]),B=R.useCallback(()=>!m.current?.isFocusable(),[]);return Y.createElement("div",{ref:N,className:T,style:O,role:"presentation"},Y.createElement("div",{className:P,ref:w,role:"presentation"},c&&C&&!e.isDestroyed()&&Y.createElement(Gs.Provider,{value:e.getBeans()},Y.createElement(S1e,{ref:G,eFocusableElement:C,onTabKeyDown:I,gridCtrl:m.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:B},Y.createElement(b1e,null)))))},M1e=R.memo(x1e),D1e=class extends he{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(t=>!!t.eGui))}},D8={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},A1e={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...D8},A8=new Set(Object.keys(A1e)),R1e=new Set(Object.keys(D8)),R8=e=>{const t=R.useRef(),i=R.useRef(null),n=R.useRef(null),s=R.useRef([]),o=R.useRef([]),r=R.useRef(e),a=R.useRef(),l=R.useRef(),c=R.useRef(!1),[d,p]=R.useState(void 0),[,g]=R.useState(0),m=R.useCallback(w=>{if(i.current=w,!w){for(const B of s.current)B();s.current.length=0;return}const x=e.modules||[];n.current||(n.current=new $ke(()=>g(B=>B+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),s.current.push(()=>{n.current?.destroy(),n.current=null}));const M=iye(e.gridOptions,e,Object.keys(e).filter(B=>!A8.has(B))),E=()=>{if(c.current){const B=()=>a.current?.shouldQueueUpdates()?void 0:o.current.shift();let z=B();for(;z;)z(),z=B()}},I=new k1e(E);a.current=I;const N=new D1e,T={providedBeanInstances:{frameworkCompWrapper:new T1e(n.current,M),renderStatus:N},modules:x,frameworkOverrides:I,setThemeOnGridDiv:!0},P=B=>{p(B),B.createBean(N),s.current.push(()=>{B.destroy()}),B.getBean("ctrlsSvc").whenReady({addDestroyFunc:z=>{s.current.push(z)}},()=>{if(B.isDestroyed())return;const z=t.current;z&&e.passGridApi?.(z)})},O=B=>{B.getBean("ctrlsSvc").whenReady({addDestroyFunc:z=>{s.current.push(z)}},()=>{for(const z of o.current)z();o.current.length=0,c.current=!0})},G=new $De;M.gridId??(M.gridId=l.current),t.current=G.create(w,M,P,O,T),s.current.push(()=>{t.current=void 0}),t.current&&(l.current=t.current.getGridId())},[]),y=R.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),b=R.useCallback(w=>{c.current&&!a.current?.shouldQueueUpdates()?w():o.current.push(w)},[]);R.useEffect(()=>{const w=E1e(r.current,e);r.current=e,b(()=>{t.current&&nye(w,t.current)})},[e]);const C=!Y.useSyncExternalStore||ax(e,"renderingMode")==="legacy"?"legacy":"default";return Y.createElement("div",{style:y,className:e.className,ref:m},Y.createElement(v8.Provider,{value:C},d&&!d.isDestroyed()?Y.createElement(M1e,{key:d.instanceId,context:d}):null,n.current?.getPortals()??null))};function E1e(e,t){const i={};for(const n of Object.keys(t)){if(A8.has(n)){R1e.has(n)&&Se(274,{prop:n});continue}const s=t[n];e[n]!==s&&(i[n]=s)}return i}var T1e=class extends XDe{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const i=this.gridOptions;if(ax(i,"reactiveCustomComponents")){const r=(a=>{switch(a){case"filter":return ax(i,"enableFilterHandlers")?Fke:Nke;case"floatingFilterComponent":return ax(i,"enableFilterHandlers")?Gke:Bke;case"dateComponent":return Lke;case"dragAndDropImageComponent":return Pke;case"loadingOverlayComponent":return Vke;case"noRowsOverlayComponent":return Hke;case"statusPanel":return jke;case"toolPanel":return Wke;case"menuItem":return zke;case"cellRenderer":return kke;case"innerHeaderComponent":return _ke}})(t.name);if(r)return new r(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":AN();break}const s=!t.cellRenderer&&t.name!=="toolPanel";return new S8(e,this.parent,t,s)}},I1e=R.forwardRef((e,t)=>{const i=R.useContext(Gs),{registry:n,context:s,gos:o,rowModel:r}=i,[a,l]=R.useState(()=>new Sr),[c,d]=R.useState(()=>new Sr),[p,g]=R.useState(),[m,y]=R.useState(),b=R.useRef(),C=R.useRef(null),w=R.useRef(),x=R.useMemo(()=>Nme(e.api.getGridId(),p?.rowModelType??"clientSide"),[e]),M=R.useMemo(()=>a.toString()+" ag-details-row",[a]),E=R.useMemo(()=>c.toString()+" ag-details-grid",[c]);t&&R.useImperativeHandle(t,()=>({refresh(){return b.current?.refresh()??!1}})),e.template&&Se(230);const I=R.useCallback(T=>{if(C.current=T,!T||s.isDestroyed()){b.current=s.destroyBean(b.current),w.current?.();return}const P={toggleCss:(G,B)=>l(z=>z.setClass(G,B)),toggleDetailGridCss:(G,B)=>d(z=>z.setClass(G,B)),setDetailGrid:G=>g(G),setRowData:G=>y(G),getGui:()=>C.current},O=n.createDynamicBean("detailCellRendererCtrl",!0);if(O&&(s.createBean(O),O.init(P,e),b.current=O,o.get("detailRowAutoHeight"))){const G=()=>{if(C.current==null)return;const B=C.current.clientHeight;B!=null&&B>0&&setTimeout(()=>{e.node.setRowHeight(B),(en(o)||tp(o))&&r.onRowHeightChanged()},0)};w.current=Ac(i,T,G),G()}},[]),N=R.useCallback(T=>{b.current?.registerDetailWithMaster(T)},[]);return Y.createElement("div",{className:M,ref:I},p&&Y.createElement(R8,{className:E,...p,modules:x,rowData:m,passGridApi:N}))}),k1e=class extends cK{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:AH,agGroupRowRenderer:AH,agDetailCellRenderer:I1e},this.wrapIncoming=(t,i)=>i==="ensureVisible"?Dke(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return Mke()}},rp=class extends R.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return Y.createElement(R8,{...this.props,passGridApi:this.setGridApi})}};ep.registerModules([op]);const L1e=()=>{const[e,t]=R.useState(!1),[i,n]=R.useState(""),[s,o]=R.useState(""),[r,a]=R.useState(""),[l,c]=R.useState(""),[d,p]=R.useState(""),[g,m]=R.useState([]),[y,b]=R.useState([]),C=R.useRef(null),{getClassesAndSubjects:w,addTeacher:x,isLoading:M,getAllTeachers:E,deleteTeacher:I,updateTeacher:N}=ub(),[T,P]=R.useState([{headerName:"id",valueGetter:W=>W.node.rowIndex+1},{field:"firstName",filter:!0},{field:"secondName",filter:!0},{field:"email",filter:!0},{field:"role",filter:!0},{headerName:"Action",cellRenderer:W=>{const ee=W.data;return F.jsxs("div",{className:"flex items-center gap-3 justify-center h-full",children:[F.jsx("button",{onClick:()=>de(ee.email),className:"text-red-500 hover:text-red-700",children:F.jsx(n1,{size:18})}),F.jsx("button",{onClick:()=>te(ee),className:"text-[#6c62ff] hover:text-[#5b52ff]",children:F.jsx(i1,{size:18})})]})},width:120}]),[O,G]=R.useState([]);R.useEffect(()=>{e?C.current.showModal():C.current.close()},[e]),R.useEffect(()=>{(async()=>{try{const ee=await w();console.log("Fetched:",ee),m(ee.classes||[])}catch(ee){console.error("Error fetching classes:",ee)}})()},[w]);const B=()=>{b([...y,{class_Id:"",assignedSubjects:[]}])},z=(W,ee)=>{const pe=[...y];pe[W].class_Id=ee,pe[W].assignedSubjects=[],b(pe)},j=(W,ee)=>{const pe=[...y],be=pe[W].assignedSubjects;be.includes(ee)?pe[W].assignedSubjects=be.filter(Ce=>Ce!==ee):pe[W].assignedSubjects.push(ee),b(pe)},X=W=>{b(y.filter((ee,pe)=>pe!==W))},[q,H]=R.useState(!1),[K,U]=R.useState(null),de=async W=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{const ee=await I(W);if(ee.success){Oi.success("Teacher deleted successfully");const pe=await E();G(pe.teachers||[])}else Oi.error(ee.message||"Failed to delete teacher")}catch(ee){console.error(ee),Oi.error("Failed to delete teacher")}},te=W=>{H(!0),U(W.email),n(W.email),o(W.firstName||""),a(W.secondName||"");const ee=W.classes||[],pe=W.subjectIds||[],be=ee.map(Ce=>{const Fe=g.find(Ee=>Ee._id.toString()===Ce.toString()),xe=Fe?Fe.subjectIds.map(Ee=>Ee._id.toString()):[],De=pe.filter(Ee=>xe.includes(Ee.toString()));return{class_Id:Ce.toString(),assignedSubjects:De}});b(be),t(!0)},V=async W=>{W.preventDefault();const ee=y.map(Ce=>Ce.class_Id).filter(Ce=>Ce.trim()!==""),pe=y.flatMap(Ce=>Ce.assignedSubjects);if(q){const Ce={email:K,firstName:s,secondName:r,classes:ee,subjectIds:pe};try{const Fe=await N(Ce);if(Fe.success){Oi.success("Teacher updated successfully"),t(!1),H(!1),U(null),n(""),o(""),a(""),c(""),b([]);const xe=await E();G(xe.teachers||[])}else Oi.error(Fe.message||"Failed to update teacher")}catch(Fe){console.error(Fe),Oi.error("Failed to update teacher")}return}const be={email:i,firstName:s,secondName:r,password:l,classes:ee,subjectIds:pe};try{if((await x(be)).success===!0){Oi.success("Teacher added successfully"),t(!1),n(""),o(""),a(""),c(""),b([]);const Fe=await E();G(Fe.teachers||[])}}catch(Ce){console.log("Error adding teacher:",Ce),Oi.error(Ce.message)}};return R.useEffect(()=>{(async()=>{try{const ee=await E();G(ee.teachers||[])}catch(ee){console.log("Error fetching teachers:",ee),Oi.error("Error fetching teachers")}})()},[E]),F.jsxs("div",{children:[F.jsx(NP,{setState:t,name:"Teacher"}),F.jsxs("dialog",{ref:C,className:"p-6 rounded-lg w-[650px] overflow-y-auto max-h-[90vh]",children:[F.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Add Teacher"}),F.jsxs("form",{className:"space-y-4",onSubmit:V,children:[F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium",children:"Email"}),F.jsx("input",{type:"email",value:i,onChange:W=>n(W.target.value),placeholder:"Enter email",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg",required:!0})]}),F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium",children:"First Name"}),F.jsx("input",{type:"text",value:s,onChange:W=>o(W.target.value),placeholder:"Enter first name",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg",required:!0})]}),F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium",children:"Second Name"}),F.jsx("input",{type:"text",value:r,onChange:W=>a(W.target.value),placeholder:"Enter second name",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg",required:!0})]}),F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium",children:"Password"}),F.jsx("input",{type:"password",value:l,onChange:W=>c(W.target.value),placeholder:"Enter password",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg",required:!q})]}),F.jsxs("div",{className:"border-t pt-4",children:[F.jsxs("div",{className:"flex justify-between items-center mb-2",children:[F.jsx("h3",{className:"text-lg font-medium",children:"Assign Classes & Subjects"}),F.jsx("button",{type:"button",onClick:B,className:"bg-indigo-500 text-white px-3 py-2 rounded-lg",children:"+ Add Class"})]}),y.map((W,ee)=>{const pe=g.find(be=>be._id.toString()===W.class_Id);return F.jsxs("div",{className:"border p-3 mb-3 rounded-lg bg-gray-50",children:[F.jsxs("div",{className:"flex justify-between items-center mb-2",children:[F.jsx("label",{className:"font-semibold",children:"Class"}),F.jsx("button",{type:"button",onClick:()=>X(ee),className:"text-red-500 text-sm",children:"Remove"})]}),F.jsxs("select",{value:W.class_Id,onChange:be=>z(ee,be.target.value),className:"w-full p-2 border rounded mb-2",children:[F.jsx("option",{value:"",children:"Select Class"}),g.map(be=>F.jsx("option",{value:be._id,children:be.name},be._id))]}),pe&&F.jsxs("div",{className:"ml-2 mb-3",children:[F.jsx("label",{className:"font-semibold block mb-1",children:"Available Subjects"}),F.jsx("div",{className:"flex flex-wrap gap-3",children:pe.subjectIds.map(be=>F.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[F.jsx("input",{type:"checkbox",checked:W.assignedSubjects.includes(be._id),onChange:()=>j(ee,be._id)}),be.name]},be._id))})]})]},ee)})]}),F.jsxs("div",{className:"flex justify-end space-x-4 mt-4",children:[F.jsx("button",{disabled:M,type:"button",onClick:()=>{t(!1),H(!1),U(null),n(""),o(""),a(""),c(""),b([])},className:"bg-red-500 text-white px-4 py-2 rounded-lg",children:"Close"}),F.jsx("button",{type:"submit",className:"bg-[#6c62ff] text-white px-6 py-2 rounded-lg",children:M?"Submitting...":q?"Update":"Submit"})]})]})]}),F.jsxs("div",{className:"w-96 flex gap-4 p-2 items-center",children:[F.jsx(W0,{}),F.jsx("input",{type:"text",onChange:W=>p(W.target.value),className:"py-2 px-8 outline-none border rounded focus:border-gray-400",placeholder:"Search..."})]}),F.jsx("div",{className:"",style:{height:490},children:M?F.jsxs("div",{className:"w-full h-full flex justify-center items-center",children:[" ",F.jsx(En,{className:"animate-spin text-[#6c62ff]"})]}):F.jsx(rp,{rowData:O,columnDefs:T,pagination:!0,paginationPageSize:20,quickFilterText:d})})]})};ep.registerModules([op]);const P1e=()=>{const[e,t]=R.useState(!1),[i,n]=R.useState(null),s=async j=>{if(window.confirm("Are you sure you want to delete this class?"))try{await P(j),qe.success("Class deleted successfully")}catch(X){qe.error(X.message)}},o=j=>{n(j._id),t(!0),p(j.name),c(j.subjectIds.map(X=>X.name)),a(!0)},[r,a]=R.useState(!1),[l,c]=R.useState([]),[d,p]=R.useState(""),[g,m]=R.useState(""),y=R.useRef(null),[b,C]=R.useState(""),[w,x]=R.useState([]),[M,E]=R.useState([{headerName:"id",valueGetter:j=>j.node.rowIndex+1},{field:"name",filter:!0},{field:"createdAt",headerName:"Created At",valueGetter:j=>new Date(j.data.createdAt).toLocaleDateString()},{field:"updatedAt",headerName:"updatedAt",valueGetter:j=>new Date(j.data.createdAt).toLocaleDateString()},{headerName:"Subjects",field:"subjectIds",valueGetter:j=>j.data.subjectIds.map(X=>X.name).join(", ")},{headerName:"Action",cellRenderer:j=>{const X=j.data;return F.jsxs("div",{className:"flex items-center gap-3 justify-center  h-full",children:[F.jsx("button",{onClick:()=>s(X._id),className:"text-red-500 hover:text-red-700",children:F.jsx(n1,{size:18})}),F.jsx("button",{onClick:()=>o(X),className:"text-[#6c62ff] hover:text-[#5b52ff]",children:F.jsx(i1,{size:18})})]})},width:120}]),{isLoading:I,addClass:N,getClasses:T,deleteClass:P,updateClass:O}=ub();R.useEffect(()=>{r?y.current.showModal():y.current.close()},[r]),R.useEffect(()=>{(async()=>{try{const X=await T();x(X.classes)}catch(X){console.log("Error fetching classes:",X),qe.error(X.message)}})()},[T]);const G=async j=>{if(j.preventDefault(),l.length===0)return qe.error("All fields are required");const X={name:d.toUpperCase(),subjectIds:l};try{let q;e&&i?(q=await O({id:i,...X}),q.success&&(qe.success("Class updated successfully"),T().then(H=>x(H.classes)),t(!1),n(null))):(q=await N(X),q.success&&(qe.success("Class added successfully"),x(H=>[...H,q.class]))),q.success||qe.error(q.message||"Operation failed")}catch(q){qe.error(q.message||"Something went wrong")}finally{a(!1),m(""),c([]),p("")}},B=j=>{if(j.key==="Enter"){j.preventDefault();const X=g.trim();X&&!l.includes(X)&&(c([...l,X]),m(""))}},z=j=>{c(l.filter(X=>X!==j))};return F.jsxs("div",{children:[F.jsx(NP,{setState:a,name:"Class"}),F.jsxs("dialog",{ref:y,className:"p-6 rounded-lg w-[600px] overflow-y-hidden",children:[F.jsx("h2",{className:"text-2xl font-semibold mb-4",children:e?"Edit Class":"Add Class"}),F.jsxs("form",{className:"space-y-4",onSubmit:G,children:[F.jsxs("div",{children:[F.jsx("label",{htmlFor:"secondName",className:"block text-sm font-medium text-gray-700",children:"Name"}),F.jsx("input",{type:"text",value:d,onChange:j=>p(j.target.value),placeholder:"Enter class name",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),F.jsxs("div",{children:[F.jsx("label",{htmlFor:"subjectsInput",className:"block text-sm font-medium text-gray-700",children:"Subjects"}),F.jsxs("div",{className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus-within:ring-2 focus-within:ring-indigo-500 flex flex-wrap items-center gap-2",children:[l.map(j=>F.jsxs("div",{className:"inline-flex items-center bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:[j,F.jsx("button",{type:"button",onClick:()=>z(j),className:"ml-1 -mr-0.5 inline-flex items-center justify-center p-0.5 rounded-full hover:bg-indigo-200","aria-label":`Remove ${j}`,children:F.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},j)),F.jsx("input",{type:"text",id:"subjectsInput",placeholder:"Type a subject and press Enter",className:"flex-grow p-0 border-none outline-none focus:ring-0",value:g,onChange:j=>m(j.target.value),onKeyDown:B})]})]}),F.jsxs("div",{className:"flex justify-end space-x-4 mt-4",children:[F.jsx("button",{type:"button",onClick:()=>a(!1),className:"bg-red-500 text-white px-4 py-2 rounded-lg",children:"Close"}),F.jsx("button",{disabled:I,type:"submit",className:"bg-[#6c62ff] text-white px-6 py-2 rounded-lg",children:I?"Submitting...":e?"Update":"Submit"})]})]})]}),F.jsxs("div",{className:"w-96 flex gap-4 p-2 items-center",children:[F.jsx(W0,{}),F.jsx("input",{type:"text",onChange:j=>C(j.target.value),className:"py-2 px-8 outline-none border rounded focus:border-gray-400",placeholder:"Search..."})]}),F.jsx("div",{className:"",style:{height:490},children:I?F.jsxs("div",{className:"w-full h-full flex justify-center items-center",children:[" ",F.jsx(En,{className:"animate-spin text-[#6c62ff]"})]}):F.jsx(rp,{rowData:w,columnDefs:M,pagination:!0,paginationPageSize:20,quickFilterText:b})})]})};ep.registerModules([op]);const N1e=()=>{const[e,t]=R.useState(!1),[i,n]=R.useState(null),[s,o]=R.useState([{headerName:"ID",valueGetter:te=>te.node.rowIndex+1},{field:"firstName",filter:!0},{field:"secondName",filter:!0},{field:"email",filter:!0},{field:"role",filter:!0},{headerName:"Action",cellRenderer:te=>{const V=te.data;return F.jsxs("div",{className:"flex items-center gap-3 justify-center h-full",children:[F.jsx("button",{onClick:async()=>de(V._id),className:"text-red-500 hover:text-red-700",children:F.jsx(n1,{size:16})}),F.jsx("button",{onClick:()=>U(V),className:"text-[#6c62ff] hover:text-[#5b52ff]",children:F.jsx(i1,{size:16})})]})}}]),[r,a]=R.useState([]),[l,c]=R.useState(!1),[d,p]=R.useState(""),[g,m]=R.useState(""),[y,b]=R.useState(""),[C,w]=R.useState(""),[x,M]=R.useState(""),[E,I]=R.useState([]),[N,T]=R.useState(""),[P,O]=R.useState(""),{addStudent:G,getAllClasses:B,isLoading:z,getStudentsByClass:j,updateStudent:X,deleteStudent:q}=ub(),H=R.useRef(null);R.useEffect(()=>{l?H.current.showModal():H.current.close()},[l]),R.useEffect(()=>{(async()=>{try{const V=await B();console.log(V),I(V.classes),V.classes.length>0&&O(V.classes[0]._id)}catch(V){console.log("Error fetching classes:",V),qe.error(V.message)}})()},[B]),R.useEffect(()=>{P?(async()=>{try{const V=await j(P);V.success?a(V.students||[]):(qe.error(V.message||"Error fetching students"),a([]))}catch(V){console.log("Error fetching students:",V),qe.error("Failed to load students"),a([])}})():a([])},[j,P]);const K=async te=>{if(te.preventDefault(),!d||!g||!x||!e&&(!y||!C))return qe.error("Please fill in all required fields.");try{if(e&&i){const V={id:i,email:y,firstName:d,secondName:g,classId:x};C&&(V.password=C);const W=await X(V);W.success?(qe.success("Student updated successfully"),a(ee=>ee.map(pe=>pe._id===i?{...pe,firstName:d,secondName:g,email:y,classId:x}:pe)),t(!1),n(null)):qe.error(W.message||"Failed to update student")}else{const W=await G({email:y,firstName:d,secondName:g,password:C,classId:x});W.success===!0?qe.success("Student Added!"):qe.error(W.message||"Error adding student.")}}catch(V){console.error("Error adding/updating student",V),qe.error("Error processing request")}finally{p(""),m(""),b(""),w(""),M(""),c(!1)}},U=te=>{t(!0),n(te._id),p(te.firstName||""),m(te.secondName||""),b(te.email||""),M(te.classId||P||""),c(!0)},de=async te=>{if(window.confirm("Are you sure you want to delete this student?"))try{const V=await q(te);V.success?(a(W=>W.filter(ee=>ee._id!==te)),qe.success("Student deleted")):qe.error(V.message||"Failed to delete student")}catch{qe.error("Error deleting student")}};return F.jsxs("div",{children:[F.jsx(NP,{setState:c,name:"Student"}),F.jsxs("dialog",{ref:H,className:"p-6 rounded-lg w-[600px] overflow-y-hidden",children:[F.jsx("h2",{className:"text-2xl font-semibold mb-4",children:e?"Edit Student":"Add Student"}),F.jsxs("form",{className:"space-y-4",onSubmit:K,children:[F.jsxs("div",{children:[F.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),F.jsx("input",{type:"email",id:"email",value:y,onChange:te=>b(te.target.value),placeholder:"Enter email",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),F.jsxs("div",{children:[F.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),F.jsx("input",{type:"text",id:"firstName",value:d,onChange:te=>p(te.target.value),placeholder:"Enter first name",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),F.jsxs("div",{children:[F.jsx("label",{htmlFor:"secondName",className:"block text-sm font-medium text-gray-700",children:"Second Name"}),F.jsx("input",{type:"text",id:"secondName",value:g,onChange:te=>m(te.target.value),placeholder:"Enter second name",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),F.jsxs("div",{children:[F.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),F.jsx("input",{type:"password",id:"password",value:C,onChange:te=>w(te.target.value),placeholder:e?"Enter new password (optional)":"Enter password",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!e})]}),F.jsxs("div",{children:[F.jsx("label",{htmlFor:"classId",className:"block text-sm font-medium text-gray-700",children:"Classes"}),F.jsxs("select",{id:"classId",value:x,onChange:te=>M(te.target.value),className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,children:[F.jsx("option",{value:"",children:"Select a class"}),E.map(te=>F.jsx("option",{value:te._id,children:te.name},te._id))]})]}),F.jsxs("div",{className:"flex justify-end space-x-4 mt-4",children:[F.jsx("button",{type:"button",onClick:()=>c(!1),className:"bg-red-500 text-white px-4 py-2 rounded-lg",children:"Close"}),F.jsx("button",{type:"submit",className:"bg-[#6c62ff] text-white px-6 py-2 rounded-lg",disabled:z,children:z?"Submitting...":e?"Update":"Submit"})]})]})]}),F.jsxs("div",{className:"flex justify-between",children:[F.jsxs("div",{className:"w-96 flex gap-4 p-2 items-center",children:[F.jsx(W0,{}),F.jsx("input",{type:"text",onChange:te=>T(te.target.value),className:"py-2 px-8 outline-none border rounded focus:border-gray-400",placeholder:"Search..."})]}),F.jsxs("div",{className:"flex items-center",children:[F.jsx("p",{className:"text-nowrap mr-3 text-gray-700",children:"Filter by class"}),F.jsx("select",{name:"class",id:"class",value:P,onChange:te=>O(te.target.value),className:"mt-1 w-full p-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 hover:bg-indigo-50",children:E.map(te=>F.jsx("option",{value:te._id,className:"text-gray-900",children:te.name},te._id))})]})]}),F.jsx("div",{className:"",style:{height:490},children:z?F.jsxs("div",{className:"w-full h-full flex justify-center items-center",children:[" ",F.jsx(En,{className:"animate-spin text-[#6c62ff]"})]}):F.jsx(rp,{rowData:r,columnDefs:s,pagination:!0,paginationPageSize:20,quickFilterText:N})})]})},F1e=e=>F.jsx("div",{children:"Attendance"}),qT="http://localhost:4000/api/timetable",E8=eb((e,t)=>({timetables:[],isLoading:!1,uploadTimetable:async i=>{e({isLoading:!0});try{const{data:n}=await nt.post(`${qT}/upload`,i,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${localStorage.getItem("token")}`}});return n}catch(n){return console.error("Error uploading timetable:",n),{success:!1,message:n.response?.data?.message||"Failed to upload timetable"}}finally{e({isLoading:!1})}},getTimetables:async(i=null)=>{e({isLoading:!0});try{const n=i?{classId:i}:{},{data:s}=await nt.get(qT,{params:n,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return s.success&&e({timetables:s.timetables}),s}catch(n){return console.error("Error fetching timetables:",n),{success:!1,message:n.response?.data?.message||"Failed to fetch timetables"}}finally{e({isLoading:!1})}},deleteTimetable:async i=>{e({isLoading:!0});try{const{data:n}=await nt.delete(`${qT}/${i}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return n}catch(n){return console.error("Error deleting timetable:",n),{success:!1,message:n.response?.data?.message||"Failed to delete timetable"}}finally{e({isLoading:!1})}}})),am=({name:e})=>F.jsxs("header",{className:"ml-4",children:[F.jsx("h2",{className:"text-3xl font-semibold",children:e}),F.jsxs("p",{className:"text-gray-600 mt-2",children:["View search, and manage all your ",e.toLowerCase()," here."]})]}),O1e=()=>{const{user:e}=Es(),{timetables:t,isLoading:i,uploadTimetable:n,getTimetables:s,deleteTimetable:o}=E8(),[r,a]=R.useState({title:"",description:"",classId:"",file:null});R.useEffect(()=>{s()},[s]);const l=g=>{const m=g.target.files[0];m&&a(y=>({...y,file:m}))},c=async g=>{if(g.preventDefault(),!r.title||!r.file){qe.error("Title and file are required");return}const m=new FormData;m.append("title",r.title),m.append("description",r.description),m.append("classId",r.classId),m.append("timetable",r.file);const y=await n(m);y.success?(qe.success("Timetable uploaded successfully"),a({title:"",description:"",classId:"",file:null}),s()):qe.error(y.message||"Failed to upload timetable")},d=async g=>{if(window.confirm("Are you sure you want to delete this timetable?")){const m=await o(g);m.success?(qe.success("Timetable deleted successfully"),s()):qe.error(m.message||"Failed to delete timetable")}},p=(g,m)=>{const y=document.createElement("a");y.href=g,y.download=m,y.target="_blank",document.body.appendChild(y),y.click(),document.body.removeChild(y)};return F.jsxs("div",{className:"p-4",children:[F.jsx(am,{name:"Timetable Management"}),F.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[F.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[F.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Upload Timetable"}),F.jsxs("form",{onSubmit:c,className:"space-y-4",children:[F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),F.jsx("input",{type:"text",value:r.title,onChange:g=>a(m=>({...m,title:g.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter timetable title",required:!0})]}),F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),F.jsx("textarea",{value:r.description,onChange:g=>a(m=>({...m,description:g.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter description (optional)",rows:3})]}),F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class (Optional)"}),F.jsx("input",{type:"text",value:r.classId,onChange:g=>a(m=>({...m,classId:g.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter class ID (optional)"})]}),F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"File *"}),F.jsx("input",{type:"file",onChange:l,accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),F.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supported formats: PDF, JPG, PNG, DOC, DOCX (Max 10MB)"})]}),F.jsxs("button",{type:"submit",disabled:i,className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[i?F.jsx(En,{className:"w-4 h-4 animate-spin"}):F.jsx(RQ,{className:"w-4 h-4"}),"Upload Timetable"]})]})]}),F.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[F.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Uploaded Timetables"}),i?F.jsx("div",{className:"flex items-center justify-center py-8",children:F.jsx(En,{className:"w-6 h-6 animate-spin text-blue-500"})}):t.length===0?F.jsx("p",{className:"text-gray-500 text-center py-8",children:"No timetables uploaded yet"}):F.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:t.map(g=>F.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:F.jsxs("div",{className:"flex items-start justify-between",children:[F.jsxs("div",{className:"flex-1",children:[F.jsx("h3",{className:"font-medium text-gray-900",children:g.title}),g.description&&F.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g.description}),F.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[F.jsxs("span",{children:["Uploaded by: ",g.uploadedBy?.firstName," ",g.uploadedBy?.secondName]}),F.jsx("span",{children:new Date(g.createdAt).toLocaleDateString()})]})]}),F.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[F.jsx("button",{onClick:()=>p(g.fileUrl,g.fileName),className:"p-2 text-blue-500 hover:bg-blue-50 rounded-md transition-colors",title:"Download",children:F.jsx(Ej,{className:"w-4 h-4"})}),F.jsx("button",{onClick:()=>d(g._id),className:"p-2 text-red-500 hover:bg-red-50 rounded-md transition-colors",title:"Delete",children:F.jsx(MQ,{className:"w-4 h-4"})})]})]})},g._id))})]})]})]})},wy="http://localhost:4000/api/teacher",_D=eb(e=>({isLoadingClasses:!1,isLoading:!1,isLoadingAttendance:!1,getClasses:async()=>{const{user:t}=Es.getState();e({isLoadingClasses:!0});try{const{data:i}=await nt.post(wy+"/classes",{id:t._id});return i}catch(i){return console.error("Error to get  classes: ",i),{success:!1,message:i.response?.data?.message||"Failed to get classes"}}finally{e({isLoadingClasses:!1})}},getAllClassesAndSubjects:async()=>{const{user:t}=Es.getState();e({isLoading:!0});try{const{data:i}=await nt.post(wy+"/getAllClassesAndSubjects",{id:t._id});return i}catch(i){return console.error("Error to get  classes: ",i),{success:!1,message:i.response?.data?.message||"Failed to get classes"}}finally{e({isLoading:!1})}},getStudentsAttendanceForDay:async(t,i,n)=>{const{user:s}=Es.getState();e({isLoadingAttendance:!0});try{const{data:o}=await nt.post(wy+"/getAttendance",{takenByTeacherId:s._id,date:t,classId:i,subjectId:n});return o}catch(o){return console.error("Error to get  attendance: ",o),{success:!1,message:o.response?.data?.message||"Failed to get attendance"}}finally{e({isLoadingAttendance:!1})}},submitAttendance:async(t,i,n,s)=>{const{user:o}=Es.getState();e({isLoadingAttendance:!0});try{const{data:r}=await nt.post(wy+"/submitAttendance",{date:t,classId:i,subjectId:n,takenByTeacherId:o._id,attendanceData:s});return r}catch(r){return console.error("Error to submit attendance: ",r),{success:!1,message:r.response?.data?.message||"Failed to submit attendance"}}finally{e({isLoadingAttendance:!1})}},getTeacherOverview:async()=>{const{user:t}=Es.getState();e({isLoading:!0});try{const{data:i}=await nt.post(wy+"/getTeacherCount",{id:t._id});return i}catch(i){return console.error("Error to get  teacher overview: ",i),{success:!1,message:i.response?.data?.message||"Failed to get teacher overview"}}finally{e({isLoading:!1})}}}));ep.registerModules([op]);const kH=Y.memo(e=>{const{value:t,data:i,colDef:n}=e,[s,o]=R.useState(t);R.useEffect(()=>{o(t)},[t]);const r=()=>{const a=!s;o(a),e.node.setData({...e.data,isPresent:a})};return F.jsx("div",{className:"flex justify-center items-center h-full",children:F.jsx("input",{type:"checkbox",checked:s,onChange:r,className:"cursor-pointer h-4 w-4 text-[#6c62ff] border-gray-300 rounded focus:ring-[#6c62ff]"})})}),LH="p-2 bg-gray-100 text-gray-700 rounded-md border-2 border-[#6c62ff] focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto transition duration-150",B1e=()=>{const[e,t]=R.useState([]),[i,n]=R.useState(""),[s,o]=R.useState(""),[r,a]=R.useState([]),l=R.useRef(),[c,d]=R.useState([{headerName:"#",valueGetter:P=>P.node.rowIndex+1,width:70},{field:"firstName",headerName:"First Name",filter:!0,width:150},{field:"secondName",headerName:"Second Name",filter:!0,width:150},{headerName:"Present",field:"isPresent",cellRenderer:kH,editable:!1,sortable:!1,filter:!1,width:100}]),{isLoading:p,isLoadingAttendance:g,getAllClassesAndSubjects:m,getStudentsAttendanceForDay:y,submitAttendance:b}=_D(),C=P=>P?Array.isArray(P)?P.map(O=>({_id:O._id,name:O.name})):typeof P=="string"?P.split(",").map(O=>O.trim()):[]:[];R.useEffect(()=>{(async()=>{try{const O=await m();if(O.classes.length===0){Oi.error("No classes found");return}let G=[];if(Array.isArray(O)?G=O:O?.classes?.classes&&(G=O.classes.classes),G.length>0){t(G),n(G[0]._id||"");const B=C(G[0].subjectIds);o(B[0]?._id||"")}else Oi.error("No classes found")}catch(O){console.error(O),Oi.error(O.message||"Failed to load classes")}})()},[m]);const w=R.useMemo(()=>e.find(P=>P._id===i),[e,i]),x=R.useMemo(()=>C(w?.subjectIds),[w]),M=P=>{const O=P.target.value;n(O);const G=e.find(z=>z._id===O),B=C(G?.subjectIds);o(B[0]?._id||"")},E=P=>o(P.target.value),I=async P=>{if(P.preventDefault(),!i||!s){Oi.error("Please select both Class and Subject.");return}const O=new Date().toISOString().split("T")[0];try{if(g)return;const G=await y(O,i,s);console.log(G),G?.success&&G.attendanceList?(a(G.attendanceList.map(B=>({...B,id:B.studentId}))),Oi.success("Attendance data retrieved successfully.")):(Oi.error(G?.message||"Failed to load attendance data."),a([]))}catch(G){console.error(G),Oi.error(G.message||"Failed to load attendance")}},N=async()=>{if(!l.current)return;const P=[];if(l.current.api.forEachNode(B=>P.push(B.data)),P.length===0){Oi.error("No attendance data to submit.");return}const O=new Date().toISOString().split("T")[0],G=P.map(B=>({studentId:B.studentId,isPresent:B.isPresent}));try{const B=await b(O,i,s,G);B.success?Oi.success("Attendance submitted successfully."):Oi.error(B.message||"Failed to submit attendance.")}catch{Oi.error("Error submitting attendance.")}},T=P=>{if(!l.current)return;const O=r.map(G=>({...G,isPresent:P}));a(O),l.current.api.setRowData(O)};return F.jsxs("div",{className:"p-4 sm:p-3",children:[F.jsx(am,{name:"Attendance"}),F.jsxs("div",{className:"bg-white shadow-sm p-4 w-full mt-4 rounded-lg",children:[F.jsx("form",{onSubmit:I,children:F.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[F.jsxs("div",{children:[F.jsx("h2",{className:"text-lg font-bold",children:"Select Class"}),F.jsx("select",{className:LH,onChange:M,value:i,children:e.map(P=>F.jsx("option",{value:P._id,children:P.name},P._id))})]}),F.jsxs("div",{children:[F.jsx("h2",{className:"text-lg font-bold",children:"Select Subject"}),F.jsx("select",{className:LH,onChange:E,value:s,children:x.map(P=>F.jsx("option",{value:P._id,children:P.name},P._id))})]}),F.jsx("div",{className:"flex gap-4 mt-4 md:mt-0",children:F.jsx("button",{type:"submit",className:"bg-[#6c62ff] text-white px-4 py-2 rounded-md shadow-md hover:bg-[#6c62ff] focus:outline-none",children:g?F.jsx(En,{className:"animate-spin h-5 w-5"}):"Load Students"})})]})}),r.length>0&&F.jsxs("div",{className:"mt-4 flex gap-4",children:[F.jsx("button",{onClick:()=>T(!0),className:"bg-green-500 text-white px-4 py-2 rounded-md shadow-md hover:bg-green-600 focus:outline-none",children:"Select All Present"}),F.jsx("button",{onClick:()=>T(!1),className:"bg-red-500 text-white px-4 py-2 rounded-md shadow-md hover:bg-red-600 focus:outline-none",children:"Select All Absent"}),F.jsx("button",{onClick:N,className:"bg-blue-500 text-white px-4 py-2 rounded-md shadow-md hover:bg-blue-600 focus:outline-none",children:g?F.jsx(En,{className:"animate-spin h-5 w-5"}):"Submit Attendance"})]})]}),F.jsx("div",{className:"mt-6",children:F.jsx("div",{className:"ag-theme-alpine",style:{height:400},children:F.jsx(rp,{ref:l,columnDefs:c,rowData:r,pagination:!0,getRowId:P=>P.data.id,frameworkComponents:{checkboxCellRenderer:kH},rowSelection:"multiple"})})})]})},G1e=eb(e=>({isLoading:!1,isLoadingSubjects:!1,getAttendace:async(t,i,n,s)=>{e({isLoading:!0});try{const{data:o}=await nt.post("http://localhost:4000/api/student/fetch-attendance",{studentId:t,month:i,year:n,subjectId:s});return o}catch(o){return console.error("Error to get  attendance: ",o),{success:!1,message:o.response?.data?.message||"Failed to get attendance"}}finally{e({isLoading:!1})}},getSubjects:async t=>{e({isLoadingSubjects:!0});try{const{data:i}=await nt.post("http://localhost:4000/api/student/fetch-subjects",{studentId:t});return e({subjects:i.subjects||[]}),i}catch(i){return console.error("Error to get  subjects: ",i),{success:!1,message:i.response?.data?.message||"Failed to get subjects"}}finally{e({isLoadingSubjects:!1})}}}));ep.registerModules([op]);const _1e=()=>{const{getAttendace:e,isLoading:t,getSubjects:i,isLoadingSubjects:n}=G1e(),{user:s}=Es(),[o,r]=R.useState(""),[a,l]=R.useState([]),[c,d]=R.useState(new Date),[p,g]=R.useState([{headerName:"Date",field:"date",sortable:!0,filter:!0,flex:1},{headerName:"Status",field:"status",sortable:!0,filter:!0,flex:1}]),[m,y]=R.useState([]),b="p-2 bg-gray-100 text-gray-700 rounded-md border-2 border-[#6c62ff] focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto transition duration-150",C=M=>r(M.target.value),w=M=>d(M),x=async M=>{M.preventDefault();const E=c.getMonth()+1,I=c.getFullYear(),N=await e(s._id,E,I,o);if(N.success){if(N.attendance.length===0){y([]),qe.error("No attendance records found for the selected month and subject");return}const T=N.attendance.length,P=[{headerName:"#",valueGetter:B=>B.node.rowIndex+1,width:70,sortable:!1,filter:!1,pinned:"left"},{field:"date",headerName:"Date",filter:!0,width:150,pinned:"left"}],O=Array.from({length:T},(B,z)=>({headerName:`${new Date(I,E-1,z+1).toLocaleDateString("en-US",{weekday:"short"}).toLowerCase()}, ${z+1}`,field:`day_${z+1}`,editable:!1,sortable:!1,filter:!1,width:80,dayIndex:z,cellRendererFramework:q=>F.jsx("input",{type:"checkbox",disabled:!0,checked:!!q.value,"aria-label":`day-${z+1}`})}));g([...P,...O]);const G={date:`${E}/${I}`,month:E};N.attendance.forEach((B,z)=>{G[`day_${z+1}`]=B}),y([G]),qe.success("Attendance fetched successfully")}else qe.error(N.message||"Failed to fetch attendance")};return R.useEffect(()=>{(async()=>{const E=await i(s._id);E.success&&(console.log(E),l(E.subjects),E.subjects.length>0&&r(E.subjects[0]._id))})()},[i,s._id]),F.jsxs("div",{children:[F.jsx(am,{name:"Attendance"}),n?F.jsx("div",{className:"w-full h-[400px] flex items-center justify-center",children:F.jsx(En,{className:"animate-spin text-[#6c62ff]"})}):F.jsxs("div",{children:[F.jsx("form",{onSubmit:x,children:F.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mt-3 bg-white p-4 rounded-md shadow-sm",children:[F.jsxs("div",{children:[F.jsx("h2",{className:"text-lg font-semibold",children:"Select Subject"}),F.jsx("select",{className:b,onChange:C,value:o,children:a.map(M=>F.jsx("option",{value:M._id,children:M.name},M._id))})]}),F.jsxs("div",{children:[F.jsx("h2",{className:"text-lg font-semibold",children:"Select Date & Year"}),F.jsx(C4,{selected:c,onChange:w,dateFormat:"yyyy/MM",showMonthYearPicker:!0,className:b})]}),F.jsx("button",{type:"submit",className:"bg-[#6c62ff] text-white px-4 py-2 rounded-md shadow-md hover:bg-[#6c62ff] focus:outline-none mt-4 md:mt-0",children:t?F.jsx(En,{className:"animate-spin h-5 w-5"}):"Search"})]})}),F.jsx("div",{className:"mt-6",children:F.jsx("div",{className:"ag-theme-alpine",style:{height:400},children:F.jsx(rp,{columnDefs:p,rowData:m,pagination:!0,rowSelection:"multiple"})})})]})]})},V1e=()=>{const[e,t]=R.useState({totalClasses:0,totalStudents:0,totalSubjects:0}),{getTeacherOverview:i,isLoading:n}=_D();return R.useEffect(()=>{(async()=>{const{count:o}=await i();console.log(o),t({totalClasses:o.totalClasses,totalStudents:o.totalStudents,totalSubjects:o.totalSubjects})})()},[i]),F.jsx("div",{children:n?F.jsx("div",{className:"flex justify-center items-center h-64",children:F.jsx(En,{className:"animate-spin text-4xl text-[#6c62ff]"})}):F.jsxs("div",{className:"flex gap-8 w-full items-center",children:[F.jsx(Vd,{name:"Total Classes",count:e.totalClasses,icon:F.jsx(Py,{className:" text-xl text-yellow-400 "})}),F.jsx(Vd,{name:"Total Students",count:e.totalStudents,icon:F.jsx(t1,{className:" text-xl text-blue-500 "})}),F.jsx(Vd,{name:"Total Subjects",count:e.totalSubjects,icon:F.jsx(Rj,{className:" text-xl text-green-600 "})})]})})},T8=({setSearchInput:e})=>F.jsxs("div",{className:"flex gap-2 items-center mt-2 flex-1",children:[F.jsx(W0,{}),F.jsx("input",{className:"py-2 px-8 outline-none border rounded focus:border-gray-400 w-full",type:"text",onChange:t=>e(t.target.value),placeholder:"Search..."})]}),z1e=({classes:e,setclassToDisplayStudents:t,classToDisplayStudents:i})=>F.jsxs("div",{className:"flex items-center",children:[F.jsx("p",{className:"text-nowrap mr-3 text-gray-700",children:"Filter by class"}),F.jsx("select",{name:"class",id:"class",value:i,onChange:n=>t(n.target.value),className:"mt-1 w-full p-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 hover:bg-indigo-50",children:e.map((n,s)=>F.jsx("option",{value:n._id,children:n.name},s))})]});ep.registerModules([op]);const H1e=()=>{const[e,t]=R.useState([]),[i,n]=R.useState([]),[s,o]=R.useState(""),[r,a]=R.useState(""),[l,c]=R.useState([{headerName:"ID",valueGetter:y=>y.node.rowIndex+1},{field:"firstName",filter:!0,flex:1},{field:"secondName",filter:!0,flex:1},{field:"email",filter:!0,flex:1}]),{getStudentsByClass:d,isLoading:p}=ub(),{getClasses:g,isLoadingClasses:m}=_D();return R.useEffect(()=>{(async()=>{try{const b=await g();b.classes.length===0&&qe.error("No classes found for the teacher"),t(b.classes.classes),a(b.classes.classes[0]?._id||"")}catch(b){console.log(b),qe.error(b.message)}})()},[g,a]),R.useEffect(()=>{r?(async()=>{try{const b=await d(r);console.log(b),b.success?(b.students.length===0&&qe.error("No students found for the selected class"),n(b.students)):(qe.error(b.message||"Error fetching students"),n([]))}catch(b){console.log("Error fetching students:",b),qe.error("Failed to load students"),n([])}})():n([])},[d,r]),F.jsx(F.Fragment,{children:m?F.jsxs("div",{className:"w-full flex items-center justify-center h-full",children:["      ",F.jsx(En,{className:"animate-spin text-[#6c62ff]"})]}):F.jsxs(F.Fragment,{children:[F.jsx(am,{name:"Students"}),F.jsxs("div",{className:"w-full justify-between flex gap-5",children:[F.jsx(T8,{setSearchInput:o}),F.jsx(z1e,{classes:e,setclassToDisplayStudents:a})]}),F.jsx("div",{className:"mt-2",style:{height:490},children:p?F.jsxs("div",{className:"w-full h-full flex justify-center items-center",children:[" ",F.jsx(En,{className:"animate-spin text-[#6c62ff]"})]}):F.jsx(rp,{rowData:i,columnDefs:l,pagination:!0,paginationPageSize:20,quickFilterText:s})})]})})};ep.registerModules([op]);const j1e=()=>{const[e,t]=R.useState(""),{isLoading:i,getAllClassesAndSubjects:n}=_D(),[s,o]=R.useState([]),[r,a]=R.useState([{headerName:"ID",valueGetter:l=>l.node.rowIndex+1},{field:"name",filter:!0,flex:1},{field:"subjectIds",filter:!0,flex:1}]);return R.useEffect(()=>{(async()=>{try{const c=await n();if(c?.classes?.classes){const d=c.classes.classes.map(p=>({...p,subjectIds:p.subjectIds.map(g=>g.name).join(", ")}));o(d)}}catch(c){console.error(c),Oi.error(c.message)}})()},[n]),F.jsxs("div",{children:[F.jsx(am,{name:"Classes"}),F.jsx("div",{className:"w-[80%] justify-between flex gap-5",children:F.jsx(T8,{setSearchInput:t})}),F.jsx("div",{className:"mt-2",style:{height:490},children:i?F.jsxs("div",{className:"w-full h-full flex justify-center items-center",children:[" ",F.jsx(En,{className:"animate-spin text-[#6c62ff]"})]}):F.jsx(rp,{rowData:s,columnDefs:r,pagination:!0,paginationPageSize:20,quickFilterText:e})})]})},W1e=()=>F.jsx("div",{children:"StudentDashboard"}),PH=()=>{const{user:e}=Es(),{timetables:t,isLoading:i,getTimetables:n}=E8();R.useEffect(()=>{n()},[n]);const s=(r,a)=>{const l=document.createElement("a");l.href=r,l.download=a,l.target="_blank",document.body.appendChild(l),l.click(),document.body.removeChild(l)},o=r=>{const a=r.split(".").pop().toLowerCase();return["pdf"].includes(a)?"":["jpg","jpeg","png"].includes(a)?"":["doc","docx"].includes(a)?"":""};return F.jsxs("div",{className:"p-4",children:[F.jsx(am,{name:"Timetable"}),F.jsx("div",{className:"mt-6",children:i?F.jsxs("div",{className:"flex items-center justify-center py-12",children:[F.jsx(En,{className:"w-8 h-8 animate-spin text-blue-500"}),F.jsx("span",{className:"ml-2 text-gray-600",children:"Loading timetables..."})]}):t.length===0?F.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[F.jsx(MS,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),F.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Timetables Available"}),F.jsx("p",{className:"text-gray-500",children:e?.role.toLowerCase()==="admin"?"Upload your first timetable to get started.":"No timetables have been uploaded yet. Please check back later."})]}):F.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(r=>F.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200",children:F.jsxs("div",{className:"p-6",children:[F.jsx("div",{className:"flex items-start justify-between mb-4",children:F.jsxs("div",{className:"flex items-center",children:[F.jsx("span",{className:"text-2xl mr-3",children:o(r.fileName)}),F.jsxs("div",{children:[F.jsx("h3",{className:"font-semibold text-gray-900 text-lg leading-tight",children:r.title}),r.classId&&F.jsxs("p",{className:"text-sm text-blue-600 font-medium mt-1",children:["Class: ",r.classId.name]})]})]})}),r.description&&F.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:r.description}),F.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:F.jsxs("span",{children:["Uploaded by: ",r.uploadedBy?.firstName," ",r.uploadedBy?.secondName]})}),F.jsxs("div",{className:"flex items-center justify-between",children:[F.jsx("span",{className:"text-xs text-gray-400",children:new Date(r.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),F.jsxs("button",{onClick:()=>s(r.fileUrl,r.fileName),className:"flex items-center gap-2 bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors text-sm font-medium",children:[F.jsx(Ej,{className:"w-4 h-4"}),"Download"]})]})]})},r._id))})})]})},lo=({children:e})=>{const{isAuthorized:t,isCheckingAuth:i}=Es();return i?F.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:F.jsx(En,{className:"animate-spin text-[#6c62ff]"})}):t?e:F.jsx(bg,{to:"/signin",replace:!0})},U1e=({children:e})=>{const{isAuthorized:t,isCheckingAuth:i}=Es();return i?F.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:F.jsx(En,{className:"animate-spin text-[#6c62ff]"})}):t?F.jsx(bg,{to:"/",replace:!0}):e};function $1e(){const{checkAuth:e}=Es(),[t,i]=R.useState(!1);R.useEffect(()=>{e()},[e]);const{isCheckingAuth:n,isAuthorized:s,user:o}=Es();return n?F.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:F.jsx(En,{className:"animate-spin text-[#6c62ff]"})}):F.jsxs(F.Fragment,{children:[F.jsx(vJ,{}),s?F.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[F.jsx(Vfe,{isOpen:t}),F.jsxs("div",{className:"flex flex-col flex-1",children:[F.jsx(_fe,{setIsOpen:i}),F.jsxs("main",{className:"flex-1 p-3",children:[o?.role.toLowerCase()==="admin"&&F.jsxs(Pw,{children:[F.jsx(Mn,{path:"/",element:F.jsx(lo,{children:F.jsx(Gfe,{})})}),F.jsx(Mn,{path:"/teachers",element:F.jsx(lo,{children:F.jsx(L1e,{})})}),F.jsx(Mn,{path:"/classes",element:F.jsx(lo,{children:F.jsx(P1e,{})})}),F.jsx(Mn,{path:"/students",element:F.jsx(lo,{children:F.jsx(N1e,{})})}),F.jsx(Mn,{path:"/attendance",element:F.jsx(lo,{children:F.jsx(F1e,{})})}),F.jsx(Mn,{path:"/timetable",element:F.jsx(lo,{children:F.jsx(O1e,{})})}),F.jsx(Mn,{path:"*",element:F.jsx(bg,{to:"/",replace:!0})})]}),o?.role.toLowerCase()==="teacher"&&F.jsxs(Pw,{children:[F.jsx(Mn,{path:"/teacher",element:F.jsx(lo,{children:F.jsx(V1e,{})})}),F.jsx(Mn,{path:"/teacher/attendance",element:F.jsx(lo,{children:F.jsx(B1e,{})})}),F.jsx(Mn,{path:"/teacher/students",element:F.jsx(lo,{children:F.jsx(H1e,{})})}),F.jsx(Mn,{path:"/teacher/classes",element:F.jsx(lo,{children:F.jsx(j1e,{})})}),F.jsx(Mn,{path:"/timetable",element:F.jsx(lo,{children:F.jsx(PH,{})})}),F.jsx(Mn,{path:"*",element:F.jsx(bg,{to:"/teacher",replace:!0})})]}),o?.role.toLowerCase()==="student"&&F.jsxs(Pw,{children:[F.jsx(Mn,{path:"/student",element:F.jsx(lo,{children:F.jsx(W1e,{})})}),F.jsx(Mn,{path:"/student/attendance",element:F.jsx(lo,{children:F.jsx(_1e,{})})}),F.jsx(Mn,{path:"/timetable",element:F.jsx(lo,{children:F.jsx(PH,{})})}),F.jsx(Mn,{path:"*",element:F.jsx(bg,{to:"/student",replace:!0})})]})]})]})]}):F.jsxs(Pw,{children:[F.jsx(Mn,{path:"/signin",element:F.jsx(U1e,{children:F.jsx(bJ,{})})}),F.jsx(Mn,{path:"*",element:F.jsx(bg,{to:"/signin",replace:!0})})]})]})}t7.createRoot(document.getElementById("root")).render(F.jsx(pZ,{children:F.jsx($1e,{})}));
