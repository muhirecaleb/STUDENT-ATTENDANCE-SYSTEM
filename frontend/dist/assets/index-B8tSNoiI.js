function hpe(e,t){for(var i=0;i<t.length;i++){const n=t[i];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();function M7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wO={exports:{}},px={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z$;function ppe(){if(Z$)return px;Z$=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(n,s,o){var r=null;if(o!==void 0&&(r=""+o),s.key!==void 0&&(r=""+s.key),"key"in s){o={};for(var a in s)a!=="key"&&(o[a]=s[a])}else o=s;return s=o.ref,{$$typeof:e,type:n,key:r,ref:s!==void 0?s:null,props:o}}return px.Fragment=t,px.jsx=i,px.jsxs=i,px}var q$;function gpe(){return q$||(q$=1,wO.exports=ppe()),wO.exports}var X=gpe(),DO={exports:{}},kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q$;function fpe(){if(Q$)return kt;Q$=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),r=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),p=Symbol.iterator;function f(H){return H===null||typeof H!="object"?null:(H=p&&H[p]||H["@@iterator"],typeof H=="function"?H:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function C(H,U,ee){this.props=H,this.context=U,this.refs=b,this.updater=ee||m}C.prototype.isReactComponent={},C.prototype.setState=function(H,U){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,U,"setState")},C.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function x(){}x.prototype=C.prototype;function w(H,U,ee){this.props=H,this.context=U,this.refs=b,this.updater=ee||m}var M=w.prototype=new x;M.constructor=w,v(M,C.prototype),M.isPureReactComponent=!0;var T=Array.isArray;function L(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function O(H,U,ee){var ie=ee.ref;return{$$typeof:e,type:H,key:U,ref:ie!==void 0?ie:null,props:ee}}function _(H,U){return O(H.type,U,H.props)}function B(H){return typeof H=="object"&&H!==null&&H.$$typeof===e}function V(H){var U={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ee){return U[ee]})}var j=/\/+/g;function K(H,U){return typeof H=="object"&&H!==null&&H.key!=null?V(""+H.key):U.toString(36)}function Y(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(L,L):(H.status="pending",H.then(function(U){H.status==="pending"&&(H.status="fulfilled",H.value=U)},function(U){H.status==="pending"&&(H.status="rejected",H.reason=U)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function G(H,U,ee,ie,oe){var ae=typeof H;(ae==="undefined"||ae==="boolean")&&(H=null);var me=!1;if(H===null)me=!0;else switch(ae){case"bigint":case"string":case"number":me=!0;break;case"object":switch(H.$$typeof){case e:case t:me=!0;break;case u:return me=H._init,G(me(H._payload),U,ee,ie,oe)}}if(me)return oe=oe(H),me=ie===""?"."+K(H,0):ie,T(oe)?(ee="",me!=null&&(ee=me.replace(j,"$&/")+"/"),G(oe,U,ee,"",function(ge){return ge})):oe!=null&&(B(oe)&&(oe=_(oe,ee+(oe.key==null||H&&H.key===oe.key?"":(""+oe.key).replace(j,"$&/")+"/")+me)),U.push(oe)),1;me=0;var xe=ie===""?".":ie+":";if(T(H))for(var be=0;be<H.length;be++)ie=H[be],ae=xe+K(ie,be),me+=G(ie,U,ee,ae,oe);else if(be=f(H),typeof be=="function")for(H=be.call(H),be=0;!(ie=H.next()).done;)ie=ie.value,ae=xe+K(ie,be++),me+=G(ie,U,ee,ae,oe);else if(ae==="object"){if(typeof H.then=="function")return G(Y(H),U,ee,ie,oe);throw U=String(H),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return me}function $(H,U,ee){if(H==null)return H;var ie=[],oe=0;return G(H,ie,"","",function(ae){return U.call(ee,ae,oe++)}),ie}function W(H){if(H._status===-1){var U=H._result;U=U(),U.then(function(ee){(H._status===0||H._status===-1)&&(H._status=1,H._result=ee)},function(ee){(H._status===0||H._status===-1)&&(H._status=2,H._result=ee)}),H._status===-1&&(H._status=0,H._result=U)}if(H._status===1)return H._result.default;throw H._result}var Q=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},q={map:$,forEach:function(H,U,ee){$(H,function(){U.apply(this,arguments)},ee)},count:function(H){var U=0;return $(H,function(){U++}),U},toArray:function(H){return $(H,function(U){return U})||[]},only:function(H){if(!B(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return kt.Activity=d,kt.Children=q,kt.Component=C,kt.Fragment=i,kt.Profiler=s,kt.PureComponent=w,kt.StrictMode=n,kt.Suspense=l,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,kt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return I.H.useMemoCache(H)}},kt.cache=function(H){return function(){return H.apply(null,arguments)}},kt.cacheSignal=function(){return null},kt.cloneElement=function(H,U,ee){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ie=v({},H.props),oe=H.key;if(U!=null)for(ae in U.key!==void 0&&(oe=""+U.key),U)!R.call(U,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&U.ref===void 0||(ie[ae]=U[ae]);var ae=arguments.length-2;if(ae===1)ie.children=ee;else if(1<ae){for(var me=Array(ae),xe=0;xe<ae;xe++)me[xe]=arguments[xe+2];ie.children=me}return O(H.type,oe,ie)},kt.createContext=function(H){return H={$$typeof:r,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:o,_context:H},H},kt.createElement=function(H,U,ee){var ie,oe={},ae=null;if(U!=null)for(ie in U.key!==void 0&&(ae=""+U.key),U)R.call(U,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(oe[ie]=U[ie]);var me=arguments.length-2;if(me===1)oe.children=ee;else if(1<me){for(var xe=Array(me),be=0;be<me;be++)xe[be]=arguments[be+2];oe.children=xe}if(H&&H.defaultProps)for(ie in me=H.defaultProps,me)oe[ie]===void 0&&(oe[ie]=me[ie]);return O(H,ae,oe)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(H){return{$$typeof:a,render:H}},kt.isValidElement=B,kt.lazy=function(H){return{$$typeof:u,_payload:{_status:-1,_result:H},_init:W}},kt.memo=function(H,U){return{$$typeof:c,type:H,compare:U===void 0?null:U}},kt.startTransition=function(H){var U=I.T,ee={};I.T=ee;try{var ie=H(),oe=I.S;oe!==null&&oe(ee,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(L,Q)}catch(ae){Q(ae)}finally{U!==null&&ee.types!==null&&(U.types=ee.types),I.T=U}},kt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},kt.use=function(H){return I.H.use(H)},kt.useActionState=function(H,U,ee){return I.H.useActionState(H,U,ee)},kt.useCallback=function(H,U){return I.H.useCallback(H,U)},kt.useContext=function(H){return I.H.useContext(H)},kt.useDebugValue=function(){},kt.useDeferredValue=function(H,U){return I.H.useDeferredValue(H,U)},kt.useEffect=function(H,U){return I.H.useEffect(H,U)},kt.useEffectEvent=function(H){return I.H.useEffectEvent(H)},kt.useId=function(){return I.H.useId()},kt.useImperativeHandle=function(H,U,ee){return I.H.useImperativeHandle(H,U,ee)},kt.useInsertionEffect=function(H,U){return I.H.useInsertionEffect(H,U)},kt.useLayoutEffect=function(H,U){return I.H.useLayoutEffect(H,U)},kt.useMemo=function(H,U){return I.H.useMemo(H,U)},kt.useOptimistic=function(H,U){return I.H.useOptimistic(H,U)},kt.useReducer=function(H,U,ee){return I.H.useReducer(H,U,ee)},kt.useRef=function(H){return I.H.useRef(H)},kt.useState=function(H){return I.H.useState(H)},kt.useSyncExternalStore=function(H,U,ee){return I.H.useSyncExternalStore(H,U,ee)},kt.useTransition=function(){return I.H.useTransition()},kt.version="19.2.0",kt}var J$;function Bz(){return J$||(J$=1,DO.exports=fpe()),DO.exports}var P=Bz();const se=M7(P),A7=hpe({__proto__:null,default:se},[P]);var MO={exports:{}},gx={},AO={exports:{}},kO={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e5;function mpe(){return e5||(e5=1,(function(e){function t(G,$){var W=G.length;G.push($);e:for(;0<W;){var Q=W-1>>>1,q=G[Q];if(0<s(q,$))G[Q]=$,G[W]=q,W=Q;else break e}}function i(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var $=G[0],W=G.pop();if(W!==$){G[0]=W;e:for(var Q=0,q=G.length,H=q>>>1;Q<H;){var U=2*(Q+1)-1,ee=G[U],ie=U+1,oe=G[ie];if(0>s(ee,W))ie<q&&0>s(oe,ee)?(G[Q]=oe,G[ie]=W,Q=ie):(G[Q]=ee,G[U]=W,Q=U);else if(ie<q&&0>s(oe,W))G[Q]=oe,G[ie]=W,Q=ie;else break e}}return $}function s(G,$){var W=G.sortIndex-$.sortIndex;return W!==0?W:G.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var r=Date,a=r.now();e.unstable_now=function(){return r.now()-a}}var l=[],c=[],u=1,d=null,p=3,f=!1,m=!1,v=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function M(G){for(var $=i(c);$!==null;){if($.callback===null)n(c);else if($.startTime<=G)n(c),$.sortIndex=$.expirationTime,t(l,$);else break;$=i(c)}}function T(G){if(v=!1,M(G),!m)if(i(l)!==null)m=!0,L||(L=!0,V());else{var $=i(c);$!==null&&Y(T,$.startTime-G)}}var L=!1,I=-1,R=5,O=-1;function _(){return b?!0:!(e.unstable_now()-O<R)}function B(){if(b=!1,L){var G=e.unstable_now();O=G;var $=!0;try{e:{m=!1,v&&(v=!1,x(I),I=-1),f=!0;var W=p;try{t:{for(M(G),d=i(l);d!==null&&!(d.expirationTime>G&&_());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,p=d.priorityLevel;var q=Q(d.expirationTime<=G);if(G=e.unstable_now(),typeof q=="function"){d.callback=q,M(G),$=!0;break t}d===i(l)&&n(l),M(G)}else n(l);d=i(l)}if(d!==null)$=!0;else{var H=i(c);H!==null&&Y(T,H.startTime-G),$=!1}}break e}finally{d=null,p=W,f=!1}$=void 0}}finally{$?V():L=!1}}}var V;if(typeof w=="function")V=function(){w(B)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,K=j.port2;j.port1.onmessage=B,V=function(){K.postMessage(null)}}else V=function(){C(B,0)};function Y(G,$){I=C(function(){G(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(G){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var W=p;p=$;try{return G()}finally{p=W}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(G,$){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var W=p;p=G;try{return $()}finally{p=W}},e.unstable_scheduleCallback=function(G,$,W){var Q=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Q+W:Q):W=Q,G){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=W+q,G={id:u++,callback:$,priorityLevel:G,startTime:W,expirationTime:q,sortIndex:-1},W>Q?(G.sortIndex=W,t(c,G),i(l)===null&&G===i(c)&&(v?(x(I),I=-1):v=!0,Y(T,W-Q))):(G.sortIndex=q,t(l,G),m||f||(m=!0,L||(L=!0,V()))),G},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(G){var $=p;return function(){var W=p;p=$;try{return G.apply(this,arguments)}finally{p=W}}}})(kO)),kO}var t5;function ype(){return t5||(t5=1,AO.exports=mpe()),AO.exports}var TO={exports:{}},Oo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i5;function vpe(){if(i5)return Oo;i5=1;var e=Bz();function t(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var n={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(l,c,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:d==null?null:""+d,children:l,containerInfo:c,implementation:u}}var r=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Oo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Oo.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return o(l,c,null,u)},Oo.flushSync=function(l){var c=r.T,u=n.p;try{if(r.T=null,n.p=2,l)return l()}finally{r.T=c,n.p=u,n.d.f()}},Oo.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},Oo.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Oo.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,d=a(u,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,f=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:d,integrity:p,fetchPriority:f}):u==="script"&&n.d.X(l,{crossOrigin:d,integrity:p,fetchPriority:f,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Oo.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=a(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},Oo.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,d=a(u,c.crossOrigin);n.d.L(l,u,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Oo.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=a(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},Oo.requestFormReset=function(l){n.d.r(l)},Oo.unstable_batchedUpdates=function(l,c){return l(c)},Oo.useFormState=function(l,c,u){return r.H.useFormState(l,c,u)},Oo.useFormStatus=function(){return r.H.useHostTransitionStatus()},Oo.version="19.2.0",Oo}var n5;function k7(){if(n5)return TO.exports;n5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),TO.exports=vpe(),TO.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s5;function bpe(){if(s5)return gx;s5=1;var e=ype(),t=Bz(),i=k7();function n(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function o(h){var g=h,y=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,(g.flags&4098)!==0&&(y=g.return),h=g.return;while(h)}return g.tag===3?y:null}function r(h){if(h.tag===13){var g=h.memoizedState;if(g===null&&(h=h.alternate,h!==null&&(g=h.memoizedState)),g!==null)return g.dehydrated}return null}function a(h){if(h.tag===31){var g=h.memoizedState;if(g===null&&(h=h.alternate,h!==null&&(g=h.memoizedState)),g!==null)return g.dehydrated}return null}function l(h){if(o(h)!==h)throw Error(n(188))}function c(h){var g=h.alternate;if(!g){if(g=o(h),g===null)throw Error(n(188));return g!==h?null:h}for(var y=h,S=g;;){var A=y.return;if(A===null)break;var k=A.alternate;if(k===null){if(S=A.return,S!==null){y=S;continue}break}if(A.child===k.child){for(k=A.child;k;){if(k===y)return l(A),h;if(k===S)return l(A),g;k=k.sibling}throw Error(n(188))}if(y.return!==S.return)y=A,S=k;else{for(var z=!1,Z=A.child;Z;){if(Z===y){z=!0,y=A,S=k;break}if(Z===S){z=!0,S=A,y=k;break}Z=Z.sibling}if(!z){for(Z=k.child;Z;){if(Z===y){z=!0,y=k,S=A;break}if(Z===S){z=!0,S=k,y=A;break}Z=Z.sibling}if(!z)throw Error(n(189))}}if(y.alternate!==S)throw Error(n(190))}if(y.tag!==3)throw Error(n(188));return y.stateNode.current===y?h:g}function u(h){var g=h.tag;if(g===5||g===26||g===27||g===6)return h;for(h=h.child;h!==null;){if(g=u(h),g!==null)return g;h=h.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),_=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function V(h){return h===null||typeof h!="object"?null:(h=B&&h[B]||h["@@iterator"],typeof h=="function"?h:null)}var j=Symbol.for("react.client.reference");function K(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===j?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case v:return"Fragment";case C:return"Profiler";case b:return"StrictMode";case T:return"Suspense";case L:return"SuspenseList";case O:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case m:return"Portal";case w:return h.displayName||"Context";case x:return(h._context.displayName||"Context")+".Consumer";case M:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case I:return g=h.displayName||null,g!==null?g:K(h.type)||"Memo";case R:g=h._payload,h=h._init;try{return K(h(g))}catch{}}return null}var Y=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},Q=[],q=-1;function H(h){return{current:h}}function U(h){0>q||(h.current=Q[q],Q[q]=null,q--)}function ee(h,g){q++,Q[q]=h.current,h.current=g}var ie=H(null),oe=H(null),ae=H(null),me=H(null);function xe(h,g){switch(ee(ae,g),ee(oe,h),ee(ie,null),g.nodeType){case 9:case 11:h=(h=g.documentElement)&&(h=h.namespaceURI)?b$(h):0;break;default:if(h=g.tagName,g=g.namespaceURI)g=b$(g),h=S$(g,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}U(ie),ee(ie,h)}function be(){U(ie),U(oe),U(ae)}function ge(h){h.memoizedState!==null&&ee(me,h);var g=ie.current,y=S$(g,h.type);g!==y&&(ee(oe,h),ee(ie,y))}function Re(h){oe.current===h&&(U(ie),U(oe)),me.current===h&&(U(me),cx._currentValue=W)}var Ne,Pe;function Be(h){if(Ne===void 0)try{throw Error()}catch(y){var g=y.stack.trim().match(/\n( *(at )?)/);Ne=g&&g[1]||"",Pe=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ne+h+Pe}var Ue=!1;function Ae(h,g){if(!h||Ue)return"";Ue=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(g){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(Ce){var ye=Ce}Reflect.construct(h,[],Te)}else{try{Te.call()}catch(Ce){ye=Ce}h.call(Te.prototype)}}else{try{throw Error()}catch(Ce){ye=Ce}(Te=h())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(Ce){if(Ce&&ye&&typeof Ce.stack=="string")return[Ce.stack,ye.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=S.DetermineComponentFrameRoot(),z=k[0],Z=k[1];if(z&&Z){var ne=z.split(`
`),he=Z.split(`
`);for(A=S=0;S<ne.length&&!ne[S].includes("DetermineComponentFrameRoot");)S++;for(;A<he.length&&!he[A].includes("DetermineComponentFrameRoot");)A++;if(S===ne.length||A===he.length)for(S=ne.length-1,A=he.length-1;1<=S&&0<=A&&ne[S]!==he[A];)A--;for(;1<=S&&0<=A;S--,A--)if(ne[S]!==he[A]){if(S!==1||A!==1)do if(S--,A--,0>A||ne[S]!==he[A]){var De=`
`+ne[S].replace(" at new "," at ");return h.displayName&&De.includes("<anonymous>")&&(De=De.replace("<anonymous>",h.displayName)),De}while(1<=S&&0<=A);break}}}finally{Ue=!1,Error.prepareStackTrace=y}return(y=h?h.displayName||h.name:"")?Be(y):""}function Ve(h,g){switch(h.tag){case 26:case 27:case 5:return Be(h.type);case 16:return Be("Lazy");case 13:return h.child!==g&&g!==null?Be("Suspense Fallback"):Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return Ae(h.type,!1);case 11:return Ae(h.type.render,!1);case 1:return Ae(h.type,!0);case 31:return Be("Activity");default:return""}}function $e(h){try{var g="",y=null;do g+=Ve(h,y),y=h,h=h.return;while(h);return g}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var Qe=Object.prototype.hasOwnProperty,Oe=e.unstable_scheduleCallback,Ze=e.unstable_cancelCallback,dt=e.unstable_shouldYield,Tt=e.unstable_requestPaint,gt=e.unstable_now,Lt=e.unstable_getCurrentPriorityLevel,Gi=e.unstable_ImmediatePriority,Ti=e.unstable_UserBlockingPriority,Ht=e.unstable_NormalPriority,Hi=e.unstable_LowPriority,zc=e.unstable_IdlePriority,Fy=e.log,uP=e.unstable_setDisableYieldValue,CC=null,ia=null;function Gh(h){if(typeof Fy=="function"&&uP(h),ia&&typeof ia.setStrictMode=="function")try{ia.setStrictMode(CC,h)}catch{}}var na=Math.clz32?Math.clz32:Que,Zue=Math.log,que=Math.LN2;function Que(h){return h>>>=0,h===0?32:31-(Zue(h)/que|0)|0}var mM=256,yM=262144,vM=4194304;function Zg(h){var g=h&42;if(g!==0)return g;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return h&261888;case 262144:case 524288:case 1048576:case 2097152:return h&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function bM(h,g,y){var S=h.pendingLanes;if(S===0)return 0;var A=0,k=h.suspendedLanes,z=h.pingedLanes;h=h.warmLanes;var Z=S&134217727;return Z!==0?(S=Z&~k,S!==0?A=Zg(S):(z&=Z,z!==0?A=Zg(z):y||(y=Z&~h,y!==0&&(A=Zg(y))))):(Z=S&~k,Z!==0?A=Zg(Z):z!==0?A=Zg(z):y||(y=S&~h,y!==0&&(A=Zg(y)))),A===0?0:g!==0&&g!==A&&(g&k)===0&&(k=A&-A,y=g&-g,k>=y||k===32&&(y&4194048)!==0)?g:A}function xC(h,g){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&g)===0}function Jue(h,g){switch(h){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function e4(){var h=vM;return vM<<=1,(vM&62914560)===0&&(vM=4194304),h}function dP(h){for(var g=[],y=0;31>y;y++)g.push(h);return g}function wC(h,g){h.pendingLanes|=g,g!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function ede(h,g,y,S,A,k){var z=h.pendingLanes;h.pendingLanes=y,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=y,h.entangledLanes&=y,h.errorRecoveryDisabledLanes&=y,h.shellSuspendCounter=0;var Z=h.entanglements,ne=h.expirationTimes,he=h.hiddenUpdates;for(y=z&~y;0<y;){var De=31-na(y),Te=1<<De;Z[De]=0,ne[De]=-1;var ye=he[De];if(ye!==null)for(he[De]=null,De=0;De<ye.length;De++){var Ce=ye[De];Ce!==null&&(Ce.lane&=-536870913)}y&=~Te}S!==0&&t4(h,S,0),k!==0&&A===0&&h.tag!==0&&(h.suspendedLanes|=k&~(z&~g))}function t4(h,g,y){h.pendingLanes|=g,h.suspendedLanes&=~g;var S=31-na(g);h.entangledLanes|=g,h.entanglements[S]=h.entanglements[S]|1073741824|y&261930}function i4(h,g){var y=h.entangledLanes|=g;for(h=h.entanglements;y;){var S=31-na(y),A=1<<S;A&g|h[S]&g&&(h[S]|=g),y&=~A}}function n4(h,g){var y=g&-g;return y=(y&42)!==0?1:hP(y),(y&(h.suspendedLanes|g))!==0?0:y}function hP(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function pP(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function s4(){var h=$.p;return h!==0?h:(h=window.event,h===void 0?32:W$(h.type))}function o4(h,g){var y=$.p;try{return $.p=h,g()}finally{$.p=y}}var Vh=Math.random().toString(36).slice(2),Qs="__reactFiber$"+Vh,kr="__reactProps$"+Vh,By="__reactContainer$"+Vh,gP="__reactEvents$"+Vh,tde="__reactListeners$"+Vh,ide="__reactHandles$"+Vh,r4="__reactResources$"+Vh,DC="__reactMarker$"+Vh;function fP(h){delete h[Qs],delete h[kr],delete h[gP],delete h[tde],delete h[ide]}function _y(h){var g=h[Qs];if(g)return g;for(var y=h.parentNode;y;){if(g=y[By]||y[Qs]){if(y=g.alternate,g.child!==null||y!==null&&y.child!==null)for(h=k$(h);h!==null;){if(y=h[Qs])return y;h=k$(h)}return g}h=y,y=h.parentNode}return null}function zy(h){if(h=h[Qs]||h[By]){var g=h.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return h}return null}function MC(h){var g=h.tag;if(g===5||g===26||g===27||g===6)return h.stateNode;throw Error(n(33))}function Gy(h){var g=h[r4];return g||(g=h[r4]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Bs(h){h[DC]=!0}var a4=new Set,l4={};function qg(h,g){Vy(h,g),Vy(h+"Capture",g)}function Vy(h,g){for(l4[h]=g,h=0;h<g.length;h++)a4.add(g[h])}var nde=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),c4={},u4={};function sde(h){return Qe.call(u4,h)?!0:Qe.call(c4,h)?!1:nde.test(h)?u4[h]=!0:(c4[h]=!0,!1)}function SM(h,g,y){if(sde(g))if(y===null)h.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":h.removeAttribute(g);return;case"boolean":var S=g.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){h.removeAttribute(g);return}}h.setAttribute(g,""+y)}}function CM(h,g,y){if(y===null)h.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(g);return}h.setAttribute(g,""+y)}}function ed(h,g,y,S){if(S===null)h.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(y);return}h.setAttributeNS(g,y,""+S)}}function Wa(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function d4(h){var g=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function ode(h,g,y){var S=Object.getOwnPropertyDescriptor(h.constructor.prototype,g);if(!h.hasOwnProperty(g)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var A=S.get,k=S.set;return Object.defineProperty(h,g,{configurable:!0,get:function(){return A.call(this)},set:function(z){y=""+z,k.call(this,z)}}),Object.defineProperty(h,g,{enumerable:S.enumerable}),{getValue:function(){return y},setValue:function(z){y=""+z},stopTracking:function(){h._valueTracker=null,delete h[g]}}}}function mP(h){if(!h._valueTracker){var g=d4(h)?"checked":"value";h._valueTracker=ode(h,g,""+h[g])}}function h4(h){if(!h)return!1;var g=h._valueTracker;if(!g)return!0;var y=g.getValue(),S="";return h&&(S=d4(h)?h.checked?"true":"false":h.value),h=S,h!==y?(g.setValue(h),!0):!1}function xM(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var rde=/[\n"\\]/g;function ja(h){return h.replace(rde,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function yP(h,g,y,S,A,k,z,Z){h.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?h.type=z:h.removeAttribute("type"),g!=null?z==="number"?(g===0&&h.value===""||h.value!=g)&&(h.value=""+Wa(g)):h.value!==""+Wa(g)&&(h.value=""+Wa(g)):z!=="submit"&&z!=="reset"||h.removeAttribute("value"),g!=null?vP(h,z,Wa(g)):y!=null?vP(h,z,Wa(y)):S!=null&&h.removeAttribute("value"),A==null&&k!=null&&(h.defaultChecked=!!k),A!=null&&(h.checked=A&&typeof A!="function"&&typeof A!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?h.name=""+Wa(Z):h.removeAttribute("name")}function p4(h,g,y,S,A,k,z,Z){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(h.type=k),g!=null||y!=null){if(!(k!=="submit"&&k!=="reset"||g!=null)){mP(h);return}y=y!=null?""+Wa(y):"",g=g!=null?""+Wa(g):y,Z||g===h.value||(h.value=g),h.defaultValue=g}S=S??A,S=typeof S!="function"&&typeof S!="symbol"&&!!S,h.checked=Z?h.checked:!!S,h.defaultChecked=!!S,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(h.name=z),mP(h)}function vP(h,g,y){g==="number"&&xM(h.ownerDocument)===h||h.defaultValue===""+y||(h.defaultValue=""+y)}function Hy(h,g,y,S){if(h=h.options,g){g={};for(var A=0;A<y.length;A++)g["$"+y[A]]=!0;for(y=0;y<h.length;y++)A=g.hasOwnProperty("$"+h[y].value),h[y].selected!==A&&(h[y].selected=A),A&&S&&(h[y].defaultSelected=!0)}else{for(y=""+Wa(y),g=null,A=0;A<h.length;A++){if(h[A].value===y){h[A].selected=!0,S&&(h[A].defaultSelected=!0);return}g!==null||h[A].disabled||(g=h[A])}g!==null&&(g.selected=!0)}}function g4(h,g,y){if(g!=null&&(g=""+Wa(g),g!==h.value&&(h.value=g),y==null)){h.defaultValue!==g&&(h.defaultValue=g);return}h.defaultValue=y!=null?""+Wa(y):""}function f4(h,g,y,S){if(g==null){if(S!=null){if(y!=null)throw Error(n(92));if(Y(S)){if(1<S.length)throw Error(n(93));S=S[0]}y=S}y==null&&(y=""),g=y}y=Wa(g),h.defaultValue=y,S=h.textContent,S===y&&S!==""&&S!==null&&(h.value=S),mP(h)}function Wy(h,g){if(g){var y=h.firstChild;if(y&&y===h.lastChild&&y.nodeType===3){y.nodeValue=g;return}}h.textContent=g}var ade=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function m4(h,g,y){var S=g.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?h.setProperty(g,""):g==="float"?h.cssFloat="":h[g]="":S?h.setProperty(g,y):typeof y!="number"||y===0||ade.has(g)?g==="float"?h.cssFloat=y:h[g]=(""+y).trim():h[g]=y+"px"}function y4(h,g,y){if(g!=null&&typeof g!="object")throw Error(n(62));if(h=h.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||g!=null&&g.hasOwnProperty(S)||(S.indexOf("--")===0?h.setProperty(S,""):S==="float"?h.cssFloat="":h[S]="");for(var A in g)S=g[A],g.hasOwnProperty(A)&&y[A]!==S&&m4(h,A,S)}else for(var k in g)g.hasOwnProperty(k)&&m4(h,k,g[k])}function bP(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lde=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cde=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wM(h){return cde.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}function td(){}var SP=null;function CP(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var jy=null,Uy=null;function v4(h){var g=zy(h);if(g&&(h=g.stateNode)){var y=h[kr]||null;e:switch(h=g.stateNode,g.type){case"input":if(yP(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),g=y.name,y.type==="radio"&&g!=null){for(y=h;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+ja(""+g)+'"][type="radio"]'),g=0;g<y.length;g++){var S=y[g];if(S!==h&&S.form===h.form){var A=S[kr]||null;if(!A)throw Error(n(90));yP(S,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(g=0;g<y.length;g++)S=y[g],S.form===h.form&&h4(S)}break e;case"textarea":g4(h,y.value,y.defaultValue);break e;case"select":g=y.value,g!=null&&Hy(h,!!y.multiple,g,!1)}}}var xP=!1;function b4(h,g,y){if(xP)return h(g,y);xP=!0;try{var S=h(g);return S}finally{if(xP=!1,(jy!==null||Uy!==null)&&(uA(),jy&&(g=jy,h=Uy,Uy=jy=null,v4(g),h)))for(g=0;g<h.length;g++)v4(h[g])}}function AC(h,g){var y=h.stateNode;if(y===null)return null;var S=y[kr]||null;if(S===null)return null;y=S[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(h=h.type,S=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!S;break e;default:h=!1}if(h)return null;if(y&&typeof y!="function")throw Error(n(231,g,typeof y));return y}var id=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wP=!1;if(id)try{var kC={};Object.defineProperty(kC,"passive",{get:function(){wP=!0}}),window.addEventListener("test",kC,kC),window.removeEventListener("test",kC,kC)}catch{wP=!1}var Hh=null,DP=null,DM=null;function S4(){if(DM)return DM;var h,g=DP,y=g.length,S,A="value"in Hh?Hh.value:Hh.textContent,k=A.length;for(h=0;h<y&&g[h]===A[h];h++);var z=y-h;for(S=1;S<=z&&g[y-S]===A[k-S];S++);return DM=A.slice(h,1<S?1-S:void 0)}function MM(h){var g=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&g===13&&(h=13)):h=g,h===10&&(h=13),32<=h||h===13?h:0}function AM(){return!0}function C4(){return!1}function Tr(h){function g(y,S,A,k,z){this._reactName=y,this._targetInst=A,this.type=S,this.nativeEvent=k,this.target=z,this.currentTarget=null;for(var Z in h)h.hasOwnProperty(Z)&&(y=h[Z],this[Z]=y?y(k):k[Z]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?AM:C4,this.isPropagationStopped=C4,this}return d(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=AM)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=AM)},persist:function(){},isPersistent:AM}),g}var Qg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kM=Tr(Qg),TC=d({},Qg,{view:0,detail:0}),ude=Tr(TC),MP,AP,IC,TM=d({},TC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:TP,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==IC&&(IC&&h.type==="mousemove"?(MP=h.screenX-IC.screenX,AP=h.screenY-IC.screenY):AP=MP=0,IC=h),MP)},movementY:function(h){return"movementY"in h?h.movementY:AP}}),x4=Tr(TM),dde=d({},TM,{dataTransfer:0}),hde=Tr(dde),pde=d({},TC,{relatedTarget:0}),kP=Tr(pde),gde=d({},Qg,{animationName:0,elapsedTime:0,pseudoElement:0}),fde=Tr(gde),mde=d({},Qg,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),yde=Tr(mde),vde=d({},Qg,{data:0}),w4=Tr(vde),bde={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sde={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cde={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xde(h){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(h):(h=Cde[h])?!!g[h]:!1}function TP(){return xde}var wde=d({},TC,{key:function(h){if(h.key){var g=bde[h.key]||h.key;if(g!=="Unidentified")return g}return h.type==="keypress"?(h=MM(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Sde[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:TP,charCode:function(h){return h.type==="keypress"?MM(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?MM(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Dde=Tr(wde),Mde=d({},TM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D4=Tr(Mde),Ade=d({},TC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:TP}),kde=Tr(Ade),Tde=d({},Qg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ide=Tr(Tde),Rde=d({},TM,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Ede=Tr(Rde),Lde=d({},Qg,{newState:0,oldState:0}),Pde=Tr(Lde),Nde=[9,13,27,32],IP=id&&"CompositionEvent"in window,RC=null;id&&"documentMode"in document&&(RC=document.documentMode);var Ode=id&&"TextEvent"in window&&!RC,M4=id&&(!IP||RC&&8<RC&&11>=RC),A4=" ",k4=!1;function T4(h,g){switch(h){case"keyup":return Nde.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I4(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var $y=!1;function Fde(h,g){switch(h){case"compositionend":return I4(g);case"keypress":return g.which!==32?null:(k4=!0,A4);case"textInput":return h=g.data,h===A4&&k4?null:h;default:return null}}function Bde(h,g){if($y)return h==="compositionend"||!IP&&T4(h,g)?(h=S4(),DM=DP=Hh=null,$y=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return M4&&g.locale!=="ko"?null:g.data;default:return null}}var _de={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R4(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g==="input"?!!_de[h.type]:g==="textarea"}function E4(h,g,y,S){jy?Uy?Uy.push(S):Uy=[S]:jy=S,g=yA(g,"onChange"),0<g.length&&(y=new kM("onChange","change",null,y,S),h.push({event:y,listeners:g}))}var EC=null,LC=null;function zde(h){p$(h,0)}function IM(h){var g=MC(h);if(h4(g))return h}function L4(h,g){if(h==="change")return g}var P4=!1;if(id){var RP;if(id){var EP="oninput"in document;if(!EP){var N4=document.createElement("div");N4.setAttribute("oninput","return;"),EP=typeof N4.oninput=="function"}RP=EP}else RP=!1;P4=RP&&(!document.documentMode||9<document.documentMode)}function O4(){EC&&(EC.detachEvent("onpropertychange",F4),LC=EC=null)}function F4(h){if(h.propertyName==="value"&&IM(LC)){var g=[];E4(g,LC,h,CP(h)),b4(zde,g)}}function Gde(h,g,y){h==="focusin"?(O4(),EC=g,LC=y,EC.attachEvent("onpropertychange",F4)):h==="focusout"&&O4()}function Vde(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return IM(LC)}function Hde(h,g){if(h==="click")return IM(g)}function Wde(h,g){if(h==="input"||h==="change")return IM(g)}function jde(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var sa=typeof Object.is=="function"?Object.is:jde;function PC(h,g){if(sa(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var y=Object.keys(h),S=Object.keys(g);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var A=y[S];if(!Qe.call(g,A)||!sa(h[A],g[A]))return!1}return!0}function B4(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function _4(h,g){var y=B4(h);h=0;for(var S;y;){if(y.nodeType===3){if(S=h+y.textContent.length,h<=g&&S>=g)return{node:y,offset:g-h};h=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=B4(y)}}function z4(h,g){return h&&g?h===g?!0:h&&h.nodeType===3?!1:g&&g.nodeType===3?z4(h,g.parentNode):"contains"in h?h.contains(g):h.compareDocumentPosition?!!(h.compareDocumentPosition(g)&16):!1:!1}function G4(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var g=xM(h.document);g instanceof h.HTMLIFrameElement;){try{var y=typeof g.contentWindow.location.href=="string"}catch{y=!1}if(y)h=g.contentWindow;else break;g=xM(h.document)}return g}function LP(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g&&(g==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||g==="textarea"||h.contentEditable==="true")}var Ude=id&&"documentMode"in document&&11>=document.documentMode,Ky=null,PP=null,NC=null,NP=!1;function V4(h,g,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;NP||Ky==null||Ky!==xM(S)||(S=Ky,"selectionStart"in S&&LP(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),NC&&PC(NC,S)||(NC=S,S=yA(PP,"onSelect"),0<S.length&&(g=new kM("onSelect","select",null,g,y),h.push({event:g,listeners:S}),g.target=Ky)))}function Jg(h,g){var y={};return y[h.toLowerCase()]=g.toLowerCase(),y["Webkit"+h]="webkit"+g,y["Moz"+h]="moz"+g,y}var Yy={animationend:Jg("Animation","AnimationEnd"),animationiteration:Jg("Animation","AnimationIteration"),animationstart:Jg("Animation","AnimationStart"),transitionrun:Jg("Transition","TransitionRun"),transitionstart:Jg("Transition","TransitionStart"),transitioncancel:Jg("Transition","TransitionCancel"),transitionend:Jg("Transition","TransitionEnd")},OP={},H4={};id&&(H4=document.createElement("div").style,"AnimationEvent"in window||(delete Yy.animationend.animation,delete Yy.animationiteration.animation,delete Yy.animationstart.animation),"TransitionEvent"in window||delete Yy.transitionend.transition);function ef(h){if(OP[h])return OP[h];if(!Yy[h])return h;var g=Yy[h],y;for(y in g)if(g.hasOwnProperty(y)&&y in H4)return OP[h]=g[y];return h}var W4=ef("animationend"),j4=ef("animationiteration"),U4=ef("animationstart"),$de=ef("transitionrun"),Kde=ef("transitionstart"),Yde=ef("transitioncancel"),$4=ef("transitionend"),K4=new Map,FP="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");FP.push("scrollEnd");function Yl(h,g){K4.set(h,g),qg(g,[h])}var RM=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},Ua=[],Xy=0,BP=0;function EM(){for(var h=Xy,g=BP=Xy=0;g<h;){var y=Ua[g];Ua[g++]=null;var S=Ua[g];Ua[g++]=null;var A=Ua[g];Ua[g++]=null;var k=Ua[g];if(Ua[g++]=null,S!==null&&A!==null){var z=S.pending;z===null?A.next=A:(A.next=z.next,z.next=A),S.pending=A}k!==0&&Y4(y,A,k)}}function LM(h,g,y,S){Ua[Xy++]=h,Ua[Xy++]=g,Ua[Xy++]=y,Ua[Xy++]=S,BP|=S,h.lanes|=S,h=h.alternate,h!==null&&(h.lanes|=S)}function _P(h,g,y,S){return LM(h,g,y,S),PM(h)}function tf(h,g){return LM(h,null,null,g),PM(h)}function Y4(h,g,y){h.lanes|=y;var S=h.alternate;S!==null&&(S.lanes|=y);for(var A=!1,k=h.return;k!==null;)k.childLanes|=y,S=k.alternate,S!==null&&(S.childLanes|=y),k.tag===22&&(h=k.stateNode,h===null||h._visibility&1||(A=!0)),h=k,k=k.return;return h.tag===3?(k=h.stateNode,A&&g!==null&&(A=31-na(y),h=k.hiddenUpdates,S=h[A],S===null?h[A]=[g]:S.push(g),g.lane=y|536870912),k):null}function PM(h){if(50<ix)throw ix=0,KN=null,Error(n(185));for(var g=h.return;g!==null;)h=g,g=h.return;return h.tag===3?h.stateNode:null}var Zy={};function Xde(h,g,y,S){this.tag=h,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oa(h,g,y,S){return new Xde(h,g,y,S)}function zP(h){return h=h.prototype,!(!h||!h.isReactComponent)}function nd(h,g){var y=h.alternate;return y===null?(y=oa(h.tag,g,h.key,h.mode),y.elementType=h.elementType,y.type=h.type,y.stateNode=h.stateNode,y.alternate=h,h.alternate=y):(y.pendingProps=g,y.type=h.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=h.flags&65011712,y.childLanes=h.childLanes,y.lanes=h.lanes,y.child=h.child,y.memoizedProps=h.memoizedProps,y.memoizedState=h.memoizedState,y.updateQueue=h.updateQueue,g=h.dependencies,y.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},y.sibling=h.sibling,y.index=h.index,y.ref=h.ref,y.refCleanup=h.refCleanup,y}function X4(h,g){h.flags&=65011714;var y=h.alternate;return y===null?(h.childLanes=0,h.lanes=g,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=y.childLanes,h.lanes=y.lanes,h.child=y.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=y.memoizedProps,h.memoizedState=y.memoizedState,h.updateQueue=y.updateQueue,h.type=y.type,g=y.dependencies,h.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),h}function NM(h,g,y,S,A,k){var z=0;if(S=h,typeof h=="function")zP(h)&&(z=1);else if(typeof h=="string")z=epe(h,y,ie.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case O:return h=oa(31,y,g,A),h.elementType=O,h.lanes=k,h;case v:return nf(y.children,A,k,g);case b:z=8,A|=24;break;case C:return h=oa(12,y,g,A|2),h.elementType=C,h.lanes=k,h;case T:return h=oa(13,y,g,A),h.elementType=T,h.lanes=k,h;case L:return h=oa(19,y,g,A),h.elementType=L,h.lanes=k,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case w:z=10;break e;case x:z=9;break e;case M:z=11;break e;case I:z=14;break e;case R:z=16,S=null;break e}z=29,y=Error(n(130,h===null?"null":typeof h,"")),S=null}return g=oa(z,y,g,A),g.elementType=h,g.type=S,g.lanes=k,g}function nf(h,g,y,S){return h=oa(7,h,S,g),h.lanes=y,h}function GP(h,g,y){return h=oa(6,h,null,g),h.lanes=y,h}function Z4(h){var g=oa(18,null,null,0);return g.stateNode=h,g}function VP(h,g,y){return g=oa(4,h.children!==null?h.children:[],h.key,g),g.lanes=y,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}var q4=new WeakMap;function $a(h,g){if(typeof h=="object"&&h!==null){var y=q4.get(h);return y!==void 0?y:(g={value:h,source:g,stack:$e(g)},q4.set(h,g),g)}return{value:h,source:g,stack:$e(g)}}var qy=[],Qy=0,OM=null,OC=0,Ka=[],Ya=0,Wh=null,Gc=1,Vc="";function sd(h,g){qy[Qy++]=OC,qy[Qy++]=OM,OM=h,OC=g}function Q4(h,g,y){Ka[Ya++]=Gc,Ka[Ya++]=Vc,Ka[Ya++]=Wh,Wh=h;var S=Gc;h=Vc;var A=32-na(S)-1;S&=~(1<<A),y+=1;var k=32-na(g)+A;if(30<k){var z=A-A%5;k=(S&(1<<z)-1).toString(32),S>>=z,A-=z,Gc=1<<32-na(g)+A|y<<A|S,Vc=k+h}else Gc=1<<k|y<<A|S,Vc=h}function HP(h){h.return!==null&&(sd(h,1),Q4(h,1,0))}function WP(h){for(;h===OM;)OM=qy[--Qy],qy[Qy]=null,OC=qy[--Qy],qy[Qy]=null;for(;h===Wh;)Wh=Ka[--Ya],Ka[Ya]=null,Vc=Ka[--Ya],Ka[Ya]=null,Gc=Ka[--Ya],Ka[Ya]=null}function J4(h,g){Ka[Ya++]=Gc,Ka[Ya++]=Vc,Ka[Ya++]=Wh,Gc=g.id,Vc=g.overflow,Wh=h}var Js=null,Wi=null,Zt=!1,jh=null,Xa=!1,jP=Error(n(519));function Uh(h){var g=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw FC($a(g,h)),jP}function eU(h){var g=h.stateNode,y=h.type,S=h.memoizedProps;switch(g[Qs]=h,g[kr]=S,y){case"dialog":zt("cancel",g),zt("close",g);break;case"iframe":case"object":case"embed":zt("load",g);break;case"video":case"audio":for(y=0;y<sx.length;y++)zt(sx[y],g);break;case"source":zt("error",g);break;case"img":case"image":case"link":zt("error",g),zt("load",g);break;case"details":zt("toggle",g);break;case"input":zt("invalid",g),p4(g,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":zt("invalid",g);break;case"textarea":zt("invalid",g),f4(g,S.value,S.defaultValue,S.children)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||g.textContent===""+y||S.suppressHydrationWarning===!0||y$(g.textContent,y)?(S.popover!=null&&(zt("beforetoggle",g),zt("toggle",g)),S.onScroll!=null&&zt("scroll",g),S.onScrollEnd!=null&&zt("scrollend",g),S.onClick!=null&&(g.onclick=td),g=!0):g=!1,g||Uh(h,!0)}function tU(h){for(Js=h.return;Js;)switch(Js.tag){case 5:case 31:case 13:Xa=!1;return;case 27:case 3:Xa=!0;return;default:Js=Js.return}}function Jy(h){if(h!==Js)return!1;if(!Zt)return tU(h),Zt=!0,!1;var g=h.tag,y;if((y=g!==3&&g!==27)&&((y=g===5)&&(y=h.type,y=!(y!=="form"&&y!=="button")||lO(h.type,h.memoizedProps)),y=!y),y&&Wi&&Uh(h),tU(h),g===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));Wi=A$(h)}else if(g===31){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));Wi=A$(h)}else g===27?(g=Wi,op(h.type)?(h=pO,pO=null,Wi=h):Wi=g):Wi=Js?qa(h.stateNode.nextSibling):null;return!0}function sf(){Wi=Js=null,Zt=!1}function UP(){var h=jh;return h!==null&&(Lr===null?Lr=h:Lr.push.apply(Lr,h),jh=null),h}function FC(h){jh===null?jh=[h]:jh.push(h)}var $P=H(null),of=null,od=null;function $h(h,g,y){ee($P,g._currentValue),g._currentValue=y}function rd(h){h._currentValue=$P.current,U($P)}function KP(h,g,y){for(;h!==null;){var S=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,S!==null&&(S.childLanes|=g)):S!==null&&(S.childLanes&g)!==g&&(S.childLanes|=g),h===y)break;h=h.return}}function YP(h,g,y,S){var A=h.child;for(A!==null&&(A.return=h);A!==null;){var k=A.dependencies;if(k!==null){var z=A.child;k=k.firstContext;e:for(;k!==null;){var Z=k;k=A;for(var ne=0;ne<g.length;ne++)if(Z.context===g[ne]){k.lanes|=y,Z=k.alternate,Z!==null&&(Z.lanes|=y),KP(k.return,y,h),S||(z=null);break e}k=Z.next}}else if(A.tag===18){if(z=A.return,z===null)throw Error(n(341));z.lanes|=y,k=z.alternate,k!==null&&(k.lanes|=y),KP(z,y,h),z=null}else z=A.child;if(z!==null)z.return=A;else for(z=A;z!==null;){if(z===h){z=null;break}if(A=z.sibling,A!==null){A.return=z.return,z=A;break}z=z.return}A=z}}function ev(h,g,y,S){h=null;for(var A=g,k=!1;A!==null;){if(!k){if((A.flags&524288)!==0)k=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var z=A.alternate;if(z===null)throw Error(n(387));if(z=z.memoizedProps,z!==null){var Z=A.type;sa(A.pendingProps.value,z.value)||(h!==null?h.push(Z):h=[Z])}}else if(A===me.current){if(z=A.alternate,z===null)throw Error(n(387));z.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(h!==null?h.push(cx):h=[cx])}A=A.return}h!==null&&YP(g,h,y,S),g.flags|=262144}function FM(h){for(h=h.firstContext;h!==null;){if(!sa(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function rf(h){of=h,od=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function eo(h){return iU(of,h)}function BM(h,g){return of===null&&rf(h),iU(h,g)}function iU(h,g){var y=g._currentValue;if(g={context:g,memoizedValue:y,next:null},od===null){if(h===null)throw Error(n(308));od=g,h.dependencies={lanes:0,firstContext:g},h.flags|=524288}else od=od.next=g;return y}var Zde=typeof AbortController<"u"?AbortController:function(){var h=[],g=this.signal={aborted:!1,addEventListener:function(y,S){h.push(S)}};this.abort=function(){g.aborted=!0,h.forEach(function(y){return y()})}},qde=e.unstable_scheduleCallback,Qde=e.unstable_NormalPriority,cs={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function XP(){return{controller:new Zde,data:new Map,refCount:0}}function BC(h){h.refCount--,h.refCount===0&&qde(Qde,function(){h.controller.abort()})}var _C=null,ZP=0,tv=0,iv=null;function Jde(h,g){if(_C===null){var y=_C=[];ZP=0,tv=JN(),iv={status:"pending",value:void 0,then:function(S){y.push(S)}}}return ZP++,g.then(nU,nU),g}function nU(){if(--ZP===0&&_C!==null){iv!==null&&(iv.status="fulfilled");var h=_C;_C=null,tv=0,iv=null;for(var g=0;g<h.length;g++)(0,h[g])()}}function ehe(h,g){var y=[],S={status:"pending",value:null,reason:null,then:function(A){y.push(A)}};return h.then(function(){S.status="fulfilled",S.value=g;for(var A=0;A<y.length;A++)(0,y[A])(g)},function(A){for(S.status="rejected",S.reason=A,A=0;A<y.length;A++)(0,y[A])(void 0)}),S}var sU=G.S;G.S=function(h,g){V3=gt(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Jde(h,g),sU!==null&&sU(h,g)};var af=H(null);function qP(){var h=af.current;return h!==null?h:Oi.pooledCache}function _M(h,g){g===null?ee(af,af.current):ee(af,g.pool)}function oU(){var h=qP();return h===null?null:{parent:cs._currentValue,pool:h}}var nv=Error(n(460)),QP=Error(n(474)),zM=Error(n(542)),GM={then:function(){}};function rU(h){return h=h.status,h==="fulfilled"||h==="rejected"}function aU(h,g,y){switch(y=h[y],y===void 0?h.push(g):y!==g&&(g.then(td,td),g=y),g.status){case"fulfilled":return g.value;case"rejected":throw h=g.reason,cU(h),h;default:if(typeof g.status=="string")g.then(td,td);else{if(h=Oi,h!==null&&100<h.shellSuspendCounter)throw Error(n(482));h=g,h.status="pending",h.then(function(S){if(g.status==="pending"){var A=g;A.status="fulfilled",A.value=S}},function(S){if(g.status==="pending"){var A=g;A.status="rejected",A.reason=S}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw h=g.reason,cU(h),h}throw cf=g,nv}}function lf(h){try{var g=h._init;return g(h._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(cf=y,nv):y}}var cf=null;function lU(){if(cf===null)throw Error(n(459));var h=cf;return cf=null,h}function cU(h){if(h===nv||h===zM)throw Error(n(483))}var sv=null,zC=0;function VM(h){var g=zC;return zC+=1,sv===null&&(sv=[]),aU(sv,h,g)}function GC(h,g){g=g.props.ref,h.ref=g!==void 0?g:null}function HM(h,g){throw g.$$typeof===p?Error(n(525)):(h=Object.prototype.toString.call(g),Error(n(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h)))}function uU(h){function g(ce,le){if(h){var de=ce.deletions;de===null?(ce.deletions=[le],ce.flags|=16):de.push(le)}}function y(ce,le){if(!h)return null;for(;le!==null;)g(ce,le),le=le.sibling;return null}function S(ce){for(var le=new Map;ce!==null;)ce.key!==null?le.set(ce.key,ce):le.set(ce.index,ce),ce=ce.sibling;return le}function A(ce,le){return ce=nd(ce,le),ce.index=0,ce.sibling=null,ce}function k(ce,le,de){return ce.index=de,h?(de=ce.alternate,de!==null?(de=de.index,de<le?(ce.flags|=67108866,le):de):(ce.flags|=67108866,le)):(ce.flags|=1048576,le)}function z(ce){return h&&ce.alternate===null&&(ce.flags|=67108866),ce}function Z(ce,le,de,ke){return le===null||le.tag!==6?(le=GP(de,ce.mode,ke),le.return=ce,le):(le=A(le,de),le.return=ce,le)}function ne(ce,le,de,ke){var ut=de.type;return ut===v?De(ce,le,de.props.children,ke,de.key):le!==null&&(le.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===R&&lf(ut)===le.type)?(le=A(le,de.props),GC(le,de),le.return=ce,le):(le=NM(de.type,de.key,de.props,null,ce.mode,ke),GC(le,de),le.return=ce,le)}function he(ce,le,de,ke){return le===null||le.tag!==4||le.stateNode.containerInfo!==de.containerInfo||le.stateNode.implementation!==de.implementation?(le=VP(de,ce.mode,ke),le.return=ce,le):(le=A(le,de.children||[]),le.return=ce,le)}function De(ce,le,de,ke,ut){return le===null||le.tag!==7?(le=nf(de,ce.mode,ke,ut),le.return=ce,le):(le=A(le,de),le.return=ce,le)}function Te(ce,le,de){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return le=GP(""+le,ce.mode,de),le.return=ce,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case f:return de=NM(le.type,le.key,le.props,null,ce.mode,de),GC(de,le),de.return=ce,de;case m:return le=VP(le,ce.mode,de),le.return=ce,le;case R:return le=lf(le),Te(ce,le,de)}if(Y(le)||V(le))return le=nf(le,ce.mode,de,null),le.return=ce,le;if(typeof le.then=="function")return Te(ce,VM(le),de);if(le.$$typeof===w)return Te(ce,BM(ce,le),de);HM(ce,le)}return null}function ye(ce,le,de,ke){var ut=le!==null?le.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return ut!==null?null:Z(ce,le,""+de,ke);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case f:return de.key===ut?ne(ce,le,de,ke):null;case m:return de.key===ut?he(ce,le,de,ke):null;case R:return de=lf(de),ye(ce,le,de,ke)}if(Y(de)||V(de))return ut!==null?null:De(ce,le,de,ke,null);if(typeof de.then=="function")return ye(ce,le,VM(de),ke);if(de.$$typeof===w)return ye(ce,le,BM(ce,de),ke);HM(ce,de)}return null}function Ce(ce,le,de,ke,ut){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return ce=ce.get(de)||null,Z(le,ce,""+ke,ut);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case f:return ce=ce.get(ke.key===null?de:ke.key)||null,ne(le,ce,ke,ut);case m:return ce=ce.get(ke.key===null?de:ke.key)||null,he(le,ce,ke,ut);case R:return ke=lf(ke),Ce(ce,le,de,ke,ut)}if(Y(ke)||V(ke))return ce=ce.get(de)||null,De(le,ce,ke,ut,null);if(typeof ke.then=="function")return Ce(ce,le,de,VM(ke),ut);if(ke.$$typeof===w)return Ce(ce,le,de,BM(le,ke),ut);HM(le,ke)}return null}function et(ce,le,de,ke){for(var ut=null,ai=null,st=le,Et=le=0,jt=null;st!==null&&Et<de.length;Et++){st.index>Et?(jt=st,st=null):jt=st.sibling;var li=ye(ce,st,de[Et],ke);if(li===null){st===null&&(st=jt);break}h&&st&&li.alternate===null&&g(ce,st),le=k(li,le,Et),ai===null?ut=li:ai.sibling=li,ai=li,st=jt}if(Et===de.length)return y(ce,st),Zt&&sd(ce,Et),ut;if(st===null){for(;Et<de.length;Et++)st=Te(ce,de[Et],ke),st!==null&&(le=k(st,le,Et),ai===null?ut=st:ai.sibling=st,ai=st);return Zt&&sd(ce,Et),ut}for(st=S(st);Et<de.length;Et++)jt=Ce(st,ce,Et,de[Et],ke),jt!==null&&(h&&jt.alternate!==null&&st.delete(jt.key===null?Et:jt.key),le=k(jt,le,Et),ai===null?ut=jt:ai.sibling=jt,ai=jt);return h&&st.forEach(function(up){return g(ce,up)}),Zt&&sd(ce,Et),ut}function mt(ce,le,de,ke){if(de==null)throw Error(n(151));for(var ut=null,ai=null,st=le,Et=le=0,jt=null,li=de.next();st!==null&&!li.done;Et++,li=de.next()){st.index>Et?(jt=st,st=null):jt=st.sibling;var up=ye(ce,st,li.value,ke);if(up===null){st===null&&(st=jt);break}h&&st&&up.alternate===null&&g(ce,st),le=k(up,le,Et),ai===null?ut=up:ai.sibling=up,ai=up,st=jt}if(li.done)return y(ce,st),Zt&&sd(ce,Et),ut;if(st===null){for(;!li.done;Et++,li=de.next())li=Te(ce,li.value,ke),li!==null&&(le=k(li,le,Et),ai===null?ut=li:ai.sibling=li,ai=li);return Zt&&sd(ce,Et),ut}for(st=S(st);!li.done;Et++,li=de.next())li=Ce(st,ce,Et,li.value,ke),li!==null&&(h&&li.alternate!==null&&st.delete(li.key===null?Et:li.key),le=k(li,le,Et),ai===null?ut=li:ai.sibling=li,ai=li);return h&&st.forEach(function(dpe){return g(ce,dpe)}),Zt&&sd(ce,Et),ut}function Ei(ce,le,de,ke){if(typeof de=="object"&&de!==null&&de.type===v&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case f:e:{for(var ut=de.key;le!==null;){if(le.key===ut){if(ut=de.type,ut===v){if(le.tag===7){y(ce,le.sibling),ke=A(le,de.props.children),ke.return=ce,ce=ke;break e}}else if(le.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===R&&lf(ut)===le.type){y(ce,le.sibling),ke=A(le,de.props),GC(ke,de),ke.return=ce,ce=ke;break e}y(ce,le);break}else g(ce,le);le=le.sibling}de.type===v?(ke=nf(de.props.children,ce.mode,ke,de.key),ke.return=ce,ce=ke):(ke=NM(de.type,de.key,de.props,null,ce.mode,ke),GC(ke,de),ke.return=ce,ce=ke)}return z(ce);case m:e:{for(ut=de.key;le!==null;){if(le.key===ut)if(le.tag===4&&le.stateNode.containerInfo===de.containerInfo&&le.stateNode.implementation===de.implementation){y(ce,le.sibling),ke=A(le,de.children||[]),ke.return=ce,ce=ke;break e}else{y(ce,le);break}else g(ce,le);le=le.sibling}ke=VP(de,ce.mode,ke),ke.return=ce,ce=ke}return z(ce);case R:return de=lf(de),Ei(ce,le,de,ke)}if(Y(de))return et(ce,le,de,ke);if(V(de)){if(ut=V(de),typeof ut!="function")throw Error(n(150));return de=ut.call(de),mt(ce,le,de,ke)}if(typeof de.then=="function")return Ei(ce,le,VM(de),ke);if(de.$$typeof===w)return Ei(ce,le,BM(ce,de),ke);HM(ce,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,le!==null&&le.tag===6?(y(ce,le.sibling),ke=A(le,de),ke.return=ce,ce=ke):(y(ce,le),ke=GP(de,ce.mode,ke),ke.return=ce,ce=ke),z(ce)):y(ce,le)}return function(ce,le,de,ke){try{zC=0;var ut=Ei(ce,le,de,ke);return sv=null,ut}catch(st){if(st===nv||st===zM)throw st;var ai=oa(29,st,null,ce.mode);return ai.lanes=ke,ai.return=ce,ai}finally{}}}var uf=uU(!0),dU=uU(!1),Kh=!1;function JP(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eN(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Yh(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Xh(h,g,y){var S=h.updateQueue;if(S===null)return null;if(S=S.shared,(pi&2)!==0){var A=S.pending;return A===null?g.next=g:(g.next=A.next,A.next=g),S.pending=g,g=PM(h),Y4(h,null,y),g}return LM(h,S,g,y),PM(h)}function VC(h,g,y){if(g=g.updateQueue,g!==null&&(g=g.shared,(y&4194048)!==0)){var S=g.lanes;S&=h.pendingLanes,y|=S,g.lanes=y,i4(h,y)}}function tN(h,g){var y=h.updateQueue,S=h.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var A=null,k=null;if(y=y.firstBaseUpdate,y!==null){do{var z={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};k===null?A=k=z:k=k.next=z,y=y.next}while(y!==null);k===null?A=k=g:k=k.next=g}else A=k=g;y={baseState:S.baseState,firstBaseUpdate:A,lastBaseUpdate:k,shared:S.shared,callbacks:S.callbacks},h.updateQueue=y;return}h=y.lastBaseUpdate,h===null?y.firstBaseUpdate=g:h.next=g,y.lastBaseUpdate=g}var iN=!1;function HC(){if(iN){var h=iv;if(h!==null)throw h}}function WC(h,g,y,S){iN=!1;var A=h.updateQueue;Kh=!1;var k=A.firstBaseUpdate,z=A.lastBaseUpdate,Z=A.shared.pending;if(Z!==null){A.shared.pending=null;var ne=Z,he=ne.next;ne.next=null,z===null?k=he:z.next=he,z=ne;var De=h.alternate;De!==null&&(De=De.updateQueue,Z=De.lastBaseUpdate,Z!==z&&(Z===null?De.firstBaseUpdate=he:Z.next=he,De.lastBaseUpdate=ne))}if(k!==null){var Te=A.baseState;z=0,De=he=ne=null,Z=k;do{var ye=Z.lane&-536870913,Ce=ye!==Z.lane;if(Ce?(Wt&ye)===ye:(S&ye)===ye){ye!==0&&ye===tv&&(iN=!0),De!==null&&(De=De.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var et=h,mt=Z;ye=g;var Ei=y;switch(mt.tag){case 1:if(et=mt.payload,typeof et=="function"){Te=et.call(Ei,Te,ye);break e}Te=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=mt.payload,ye=typeof et=="function"?et.call(Ei,Te,ye):et,ye==null)break e;Te=d({},Te,ye);break e;case 2:Kh=!0}}ye=Z.callback,ye!==null&&(h.flags|=64,Ce&&(h.flags|=8192),Ce=A.callbacks,Ce===null?A.callbacks=[ye]:Ce.push(ye))}else Ce={lane:ye,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},De===null?(he=De=Ce,ne=Te):De=De.next=Ce,z|=ye;if(Z=Z.next,Z===null){if(Z=A.shared.pending,Z===null)break;Ce=Z,Z=Ce.next,Ce.next=null,A.lastBaseUpdate=Ce,A.shared.pending=null}}while(!0);De===null&&(ne=Te),A.baseState=ne,A.firstBaseUpdate=he,A.lastBaseUpdate=De,k===null&&(A.shared.lanes=0),ep|=z,h.lanes=z,h.memoizedState=Te}}function hU(h,g){if(typeof h!="function")throw Error(n(191,h));h.call(g)}function pU(h,g){var y=h.callbacks;if(y!==null)for(h.callbacks=null,h=0;h<y.length;h++)hU(y[h],g)}var ov=H(null),WM=H(0);function gU(h,g){h=fd,ee(WM,h),ee(ov,g),fd=h|g.baseLanes}function nN(){ee(WM,fd),ee(ov,ov.current)}function sN(){fd=WM.current,U(ov),U(WM)}var ra=H(null),Za=null;function Zh(h){var g=h.alternate;ee(jn,jn.current&1),ee(ra,h),Za===null&&(g===null||ov.current!==null||g.memoizedState!==null)&&(Za=h)}function oN(h){ee(jn,jn.current),ee(ra,h),Za===null&&(Za=h)}function fU(h){h.tag===22?(ee(jn,jn.current),ee(ra,h),Za===null&&(Za=h)):qh()}function qh(){ee(jn,jn.current),ee(ra,ra.current)}function aa(h){U(ra),Za===h&&(Za=null),U(jn)}var jn=H(0);function jM(h){for(var g=h;g!==null;){if(g.tag===13){var y=g.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||dO(y)||hO(y)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var ad=0,It=null,Ii=null,us=null,UM=!1,rv=!1,df=!1,$M=0,jC=0,av=null,the=0;function kn(){throw Error(n(321))}function rN(h,g){if(g===null)return!1;for(var y=0;y<g.length&&y<h.length;y++)if(!sa(h[y],g[y]))return!1;return!0}function aN(h,g,y,S,A,k){return ad=k,It=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,G.H=h===null||h.memoizedState===null?QU:xN,df=!1,k=y(S,A),df=!1,rv&&(k=yU(g,y,S,A)),mU(h),k}function mU(h){G.H=KC;var g=Ii!==null&&Ii.next!==null;if(ad=0,us=Ii=It=null,UM=!1,jC=0,av=null,g)throw Error(n(300));h===null||ds||(h=h.dependencies,h!==null&&FM(h)&&(ds=!0))}function yU(h,g,y,S){It=h;var A=0;do{if(rv&&(av=null),jC=0,rv=!1,25<=A)throw Error(n(301));if(A+=1,us=Ii=null,h.updateQueue!=null){var k=h.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}G.H=JU,k=g(y,S)}while(rv);return k}function ihe(){var h=G.H,g=h.useState()[0];return g=typeof g.then=="function"?UC(g):g,h=h.useState()[0],(Ii!==null?Ii.memoizedState:null)!==h&&(It.flags|=1024),g}function lN(){var h=$M!==0;return $M=0,h}function cN(h,g,y){g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~y}function uN(h){if(UM){for(h=h.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}UM=!1}ad=0,us=Ii=It=null,rv=!1,jC=$M=0,av=null}function lr(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return us===null?It.memoizedState=us=h:us=us.next=h,us}function Un(){if(Ii===null){var h=It.alternate;h=h!==null?h.memoizedState:null}else h=Ii.next;var g=us===null?It.memoizedState:us.next;if(g!==null)us=g,Ii=h;else{if(h===null)throw It.alternate===null?Error(n(467)):Error(n(310));Ii=h,h={memoizedState:Ii.memoizedState,baseState:Ii.baseState,baseQueue:Ii.baseQueue,queue:Ii.queue,next:null},us===null?It.memoizedState=us=h:us=us.next=h}return us}function KM(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function UC(h){var g=jC;return jC+=1,av===null&&(av=[]),h=aU(av,h,g),g=It,(us===null?g.memoizedState:us.next)===null&&(g=g.alternate,G.H=g===null||g.memoizedState===null?QU:xN),h}function YM(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return UC(h);if(h.$$typeof===w)return eo(h)}throw Error(n(438,String(h)))}function dN(h){var g=null,y=It.updateQueue;if(y!==null&&(g=y.memoCache),g==null){var S=It.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(g={data:S.data.map(function(A){return A.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),y===null&&(y=KM(),It.updateQueue=y),y.memoCache=g,y=g.data[g.index],y===void 0)for(y=g.data[g.index]=Array(h),S=0;S<h;S++)y[S]=_;return g.index++,y}function ld(h,g){return typeof g=="function"?g(h):g}function XM(h){var g=Un();return hN(g,Ii,h)}function hN(h,g,y){var S=h.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=y;var A=h.baseQueue,k=S.pending;if(k!==null){if(A!==null){var z=A.next;A.next=k.next,k.next=z}g.baseQueue=A=k,S.pending=null}if(k=h.baseState,A===null)h.memoizedState=k;else{g=A.next;var Z=z=null,ne=null,he=g,De=!1;do{var Te=he.lane&-536870913;if(Te!==he.lane?(Wt&Te)===Te:(ad&Te)===Te){var ye=he.revertLane;if(ye===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Te===tv&&(De=!0);else if((ad&ye)===ye){he=he.next,ye===tv&&(De=!0);continue}else Te={lane:0,revertLane:he.revertLane,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},ne===null?(Z=ne=Te,z=k):ne=ne.next=Te,It.lanes|=ye,ep|=ye;Te=he.action,df&&y(k,Te),k=he.hasEagerState?he.eagerState:y(k,Te)}else ye={lane:Te,revertLane:he.revertLane,gesture:he.gesture,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},ne===null?(Z=ne=ye,z=k):ne=ne.next=ye,It.lanes|=Te,ep|=Te;he=he.next}while(he!==null&&he!==g);if(ne===null?z=k:ne.next=Z,!sa(k,h.memoizedState)&&(ds=!0,De&&(y=iv,y!==null)))throw y;h.memoizedState=k,h.baseState=z,h.baseQueue=ne,S.lastRenderedState=k}return A===null&&(S.lanes=0),[h.memoizedState,S.dispatch]}function pN(h){var g=Un(),y=g.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=h;var S=y.dispatch,A=y.pending,k=g.memoizedState;if(A!==null){y.pending=null;var z=A=A.next;do k=h(k,z.action),z=z.next;while(z!==A);sa(k,g.memoizedState)||(ds=!0),g.memoizedState=k,g.baseQueue===null&&(g.baseState=k),y.lastRenderedState=k}return[k,S]}function vU(h,g,y){var S=It,A=Un(),k=Zt;if(k){if(y===void 0)throw Error(n(407));y=y()}else y=g();var z=!sa((Ii||A).memoizedState,y);if(z&&(A.memoizedState=y,ds=!0),A=A.queue,mN(CU.bind(null,S,A,h),[h]),A.getSnapshot!==g||z||us!==null&&us.memoizedState.tag&1){if(S.flags|=2048,lv(9,{destroy:void 0},SU.bind(null,S,A,y,g),null),Oi===null)throw Error(n(349));k||(ad&127)!==0||bU(S,g,y)}return y}function bU(h,g,y){h.flags|=16384,h={getSnapshot:g,value:y},g=It.updateQueue,g===null?(g=KM(),It.updateQueue=g,g.stores=[h]):(y=g.stores,y===null?g.stores=[h]:y.push(h))}function SU(h,g,y,S){g.value=y,g.getSnapshot=S,xU(g)&&wU(h)}function CU(h,g,y){return y(function(){xU(g)&&wU(h)})}function xU(h){var g=h.getSnapshot;h=h.value;try{var y=g();return!sa(h,y)}catch{return!0}}function wU(h){var g=tf(h,2);g!==null&&Pr(g,h,2)}function gN(h){var g=lr();if(typeof h=="function"){var y=h;if(h=y(),df){Gh(!0);try{y()}finally{Gh(!1)}}}return g.memoizedState=g.baseState=h,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ld,lastRenderedState:h},g}function DU(h,g,y,S){return h.baseState=y,hN(h,Ii,typeof S=="function"?S:ld)}function nhe(h,g,y,S,A){if(QM(h))throw Error(n(485));if(h=g.action,h!==null){var k={payload:A,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){k.listeners.push(z)}};G.T!==null?y(!0):k.isTransition=!1,S(k),y=g.pending,y===null?(k.next=g.pending=k,MU(g,k)):(k.next=y.next,g.pending=y.next=k)}}function MU(h,g){var y=g.action,S=g.payload,A=h.state;if(g.isTransition){var k=G.T,z={};G.T=z;try{var Z=y(A,S),ne=G.S;ne!==null&&ne(z,Z),AU(h,g,Z)}catch(he){fN(h,g,he)}finally{k!==null&&z.types!==null&&(k.types=z.types),G.T=k}}else try{k=y(A,S),AU(h,g,k)}catch(he){fN(h,g,he)}}function AU(h,g,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){kU(h,g,S)},function(S){return fN(h,g,S)}):kU(h,g,y)}function kU(h,g,y){g.status="fulfilled",g.value=y,TU(g),h.state=y,g=h.pending,g!==null&&(y=g.next,y===g?h.pending=null:(y=y.next,g.next=y,MU(h,y)))}function fN(h,g,y){var S=h.pending;if(h.pending=null,S!==null){S=S.next;do g.status="rejected",g.reason=y,TU(g),g=g.next;while(g!==S)}h.action=null}function TU(h){h=h.listeners;for(var g=0;g<h.length;g++)(0,h[g])()}function IU(h,g){return g}function RU(h,g){if(Zt){var y=Oi.formState;if(y!==null){e:{var S=It;if(Zt){if(Wi){t:{for(var A=Wi,k=Xa;A.nodeType!==8;){if(!k){A=null;break t}if(A=qa(A.nextSibling),A===null){A=null;break t}}k=A.data,A=k==="F!"||k==="F"?A:null}if(A){Wi=qa(A.nextSibling),S=A.data==="F!";break e}}Uh(S)}S=!1}S&&(g=y[0])}}return y=lr(),y.memoizedState=y.baseState=g,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:IU,lastRenderedState:g},y.queue=S,y=XU.bind(null,It,S),S.dispatch=y,S=gN(!1),k=CN.bind(null,It,!1,S.queue),S=lr(),A={state:g,dispatch:null,action:h,pending:null},S.queue=A,y=nhe.bind(null,It,A,k,y),A.dispatch=y,S.memoizedState=h,[g,y,!1]}function EU(h){var g=Un();return LU(g,Ii,h)}function LU(h,g,y){if(g=hN(h,g,IU)[0],h=XM(ld)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var S=UC(g)}catch(z){throw z===nv?zM:z}else S=g;g=Un();var A=g.queue,k=A.dispatch;return y!==g.memoizedState&&(It.flags|=2048,lv(9,{destroy:void 0},she.bind(null,A,y),null)),[S,k,h]}function she(h,g){h.action=g}function PU(h){var g=Un(),y=Ii;if(y!==null)return LU(g,y,h);Un(),g=g.memoizedState,y=Un();var S=y.queue.dispatch;return y.memoizedState=h,[g,S,!1]}function lv(h,g,y,S){return h={tag:h,create:y,deps:S,inst:g,next:null},g=It.updateQueue,g===null&&(g=KM(),It.updateQueue=g),y=g.lastEffect,y===null?g.lastEffect=h.next=h:(S=y.next,y.next=h,h.next=S,g.lastEffect=h),h}function NU(){return Un().memoizedState}function ZM(h,g,y,S){var A=lr();It.flags|=h,A.memoizedState=lv(1|g,{destroy:void 0},y,S===void 0?null:S)}function qM(h,g,y,S){var A=Un();S=S===void 0?null:S;var k=A.memoizedState.inst;Ii!==null&&S!==null&&rN(S,Ii.memoizedState.deps)?A.memoizedState=lv(g,k,y,S):(It.flags|=h,A.memoizedState=lv(1|g,k,y,S))}function OU(h,g){ZM(8390656,8,h,g)}function mN(h,g){qM(2048,8,h,g)}function ohe(h){It.flags|=4;var g=It.updateQueue;if(g===null)g=KM(),It.updateQueue=g,g.events=[h];else{var y=g.events;y===null?g.events=[h]:y.push(h)}}function FU(h){var g=Un().memoizedState;return ohe({ref:g,nextImpl:h}),function(){if((pi&2)!==0)throw Error(n(440));return g.impl.apply(void 0,arguments)}}function BU(h,g){return qM(4,2,h,g)}function _U(h,g){return qM(4,4,h,g)}function zU(h,g){if(typeof g=="function"){h=h();var y=g(h);return function(){typeof y=="function"?y():g(null)}}if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function GU(h,g,y){y=y!=null?y.concat([h]):null,qM(4,4,zU.bind(null,g,h),y)}function yN(){}function VU(h,g){var y=Un();g=g===void 0?null:g;var S=y.memoizedState;return g!==null&&rN(g,S[1])?S[0]:(y.memoizedState=[h,g],h)}function HU(h,g){var y=Un();g=g===void 0?null:g;var S=y.memoizedState;if(g!==null&&rN(g,S[1]))return S[0];if(S=h(),df){Gh(!0);try{h()}finally{Gh(!1)}}return y.memoizedState=[S,g],S}function vN(h,g,y){return y===void 0||(ad&1073741824)!==0&&(Wt&261930)===0?h.memoizedState=g:(h.memoizedState=y,h=W3(),It.lanes|=h,ep|=h,y)}function WU(h,g,y,S){return sa(y,g)?y:ov.current!==null?(h=vN(h,y,S),sa(h,g)||(ds=!0),h):(ad&42)===0||(ad&1073741824)!==0&&(Wt&261930)===0?(ds=!0,h.memoizedState=y):(h=W3(),It.lanes|=h,ep|=h,g)}function jU(h,g,y,S,A){var k=$.p;$.p=k!==0&&8>k?k:8;var z=G.T,Z={};G.T=Z,CN(h,!1,g,y);try{var ne=A(),he=G.S;if(he!==null&&he(Z,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var De=ehe(ne,S);$C(h,g,De,ua(h))}else $C(h,g,S,ua(h))}catch(Te){$C(h,g,{then:function(){},status:"rejected",reason:Te},ua())}finally{$.p=k,z!==null&&Z.types!==null&&(z.types=Z.types),G.T=z}}function rhe(){}function bN(h,g,y,S){if(h.tag!==5)throw Error(n(476));var A=UU(h).queue;jU(h,A,g,W,y===null?rhe:function(){return $U(h),y(S)})}function UU(h){var g=h.memoizedState;if(g!==null)return g;g={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ld,lastRenderedState:W},next:null};var y={};return g.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ld,lastRenderedState:y},next:null},h.memoizedState=g,h=h.alternate,h!==null&&(h.memoizedState=g),g}function $U(h){var g=UU(h);g.next===null&&(g=h.alternate.memoizedState),$C(h,g.next.queue,{},ua())}function SN(){return eo(cx)}function KU(){return Un().memoizedState}function YU(){return Un().memoizedState}function ahe(h){for(var g=h.return;g!==null;){switch(g.tag){case 24:case 3:var y=ua();h=Yh(y);var S=Xh(g,h,y);S!==null&&(Pr(S,g,y),VC(S,g,y)),g={cache:XP()},h.payload=g;return}g=g.return}}function lhe(h,g,y){var S=ua();y={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},QM(h)?ZU(g,y):(y=_P(h,g,y,S),y!==null&&(Pr(y,h,S),qU(y,g,S)))}function XU(h,g,y){var S=ua();$C(h,g,y,S)}function $C(h,g,y,S){var A={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(QM(h))ZU(g,A);else{var k=h.alternate;if(h.lanes===0&&(k===null||k.lanes===0)&&(k=g.lastRenderedReducer,k!==null))try{var z=g.lastRenderedState,Z=k(z,y);if(A.hasEagerState=!0,A.eagerState=Z,sa(Z,z))return LM(h,g,A,0),Oi===null&&EM(),!1}catch{}finally{}if(y=_P(h,g,A,S),y!==null)return Pr(y,h,S),qU(y,g,S),!0}return!1}function CN(h,g,y,S){if(S={lane:2,revertLane:JN(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},QM(h)){if(g)throw Error(n(479))}else g=_P(h,y,S,2),g!==null&&Pr(g,h,2)}function QM(h){var g=h.alternate;return h===It||g!==null&&g===It}function ZU(h,g){rv=UM=!0;var y=h.pending;y===null?g.next=g:(g.next=y.next,y.next=g),h.pending=g}function qU(h,g,y){if((y&4194048)!==0){var S=g.lanes;S&=h.pendingLanes,y|=S,g.lanes=y,i4(h,y)}}var KC={readContext:eo,use:YM,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useLayoutEffect:kn,useInsertionEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useSyncExternalStore:kn,useId:kn,useHostTransitionStatus:kn,useFormState:kn,useActionState:kn,useOptimistic:kn,useMemoCache:kn,useCacheRefresh:kn};KC.useEffectEvent=kn;var QU={readContext:eo,use:YM,useCallback:function(h,g){return lr().memoizedState=[h,g===void 0?null:g],h},useContext:eo,useEffect:OU,useImperativeHandle:function(h,g,y){y=y!=null?y.concat([h]):null,ZM(4194308,4,zU.bind(null,g,h),y)},useLayoutEffect:function(h,g){return ZM(4194308,4,h,g)},useInsertionEffect:function(h,g){ZM(4,2,h,g)},useMemo:function(h,g){var y=lr();g=g===void 0?null:g;var S=h();if(df){Gh(!0);try{h()}finally{Gh(!1)}}return y.memoizedState=[S,g],S},useReducer:function(h,g,y){var S=lr();if(y!==void 0){var A=y(g);if(df){Gh(!0);try{y(g)}finally{Gh(!1)}}}else A=g;return S.memoizedState=S.baseState=A,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:A},S.queue=h,h=h.dispatch=lhe.bind(null,It,h),[S.memoizedState,h]},useRef:function(h){var g=lr();return h={current:h},g.memoizedState=h},useState:function(h){h=gN(h);var g=h.queue,y=XU.bind(null,It,g);return g.dispatch=y,[h.memoizedState,y]},useDebugValue:yN,useDeferredValue:function(h,g){var y=lr();return vN(y,h,g)},useTransition:function(){var h=gN(!1);return h=jU.bind(null,It,h.queue,!0,!1),lr().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,g,y){var S=It,A=lr();if(Zt){if(y===void 0)throw Error(n(407));y=y()}else{if(y=g(),Oi===null)throw Error(n(349));(Wt&127)!==0||bU(S,g,y)}A.memoizedState=y;var k={value:y,getSnapshot:g};return A.queue=k,OU(CU.bind(null,S,k,h),[h]),S.flags|=2048,lv(9,{destroy:void 0},SU.bind(null,S,k,y,g),null),y},useId:function(){var h=lr(),g=Oi.identifierPrefix;if(Zt){var y=Vc,S=Gc;y=(S&~(1<<32-na(S)-1)).toString(32)+y,g="_"+g+"R_"+y,y=$M++,0<y&&(g+="H"+y.toString(32)),g+="_"}else y=the++,g="_"+g+"r_"+y.toString(32)+"_";return h.memoizedState=g},useHostTransitionStatus:SN,useFormState:RU,useActionState:RU,useOptimistic:function(h){var g=lr();g.memoizedState=g.baseState=h;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=y,g=CN.bind(null,It,!0,y),y.dispatch=g,[h,g]},useMemoCache:dN,useCacheRefresh:function(){return lr().memoizedState=ahe.bind(null,It)},useEffectEvent:function(h){var g=lr(),y={impl:h};return g.memoizedState=y,function(){if((pi&2)!==0)throw Error(n(440));return y.impl.apply(void 0,arguments)}}},xN={readContext:eo,use:YM,useCallback:VU,useContext:eo,useEffect:mN,useImperativeHandle:GU,useInsertionEffect:BU,useLayoutEffect:_U,useMemo:HU,useReducer:XM,useRef:NU,useState:function(){return XM(ld)},useDebugValue:yN,useDeferredValue:function(h,g){var y=Un();return WU(y,Ii.memoizedState,h,g)},useTransition:function(){var h=XM(ld)[0],g=Un().memoizedState;return[typeof h=="boolean"?h:UC(h),g]},useSyncExternalStore:vU,useId:KU,useHostTransitionStatus:SN,useFormState:EU,useActionState:EU,useOptimistic:function(h,g){var y=Un();return DU(y,Ii,h,g)},useMemoCache:dN,useCacheRefresh:YU};xN.useEffectEvent=FU;var JU={readContext:eo,use:YM,useCallback:VU,useContext:eo,useEffect:mN,useImperativeHandle:GU,useInsertionEffect:BU,useLayoutEffect:_U,useMemo:HU,useReducer:pN,useRef:NU,useState:function(){return pN(ld)},useDebugValue:yN,useDeferredValue:function(h,g){var y=Un();return Ii===null?vN(y,h,g):WU(y,Ii.memoizedState,h,g)},useTransition:function(){var h=pN(ld)[0],g=Un().memoizedState;return[typeof h=="boolean"?h:UC(h),g]},useSyncExternalStore:vU,useId:KU,useHostTransitionStatus:SN,useFormState:PU,useActionState:PU,useOptimistic:function(h,g){var y=Un();return Ii!==null?DU(y,Ii,h,g):(y.baseState=h,[h,y.queue.dispatch])},useMemoCache:dN,useCacheRefresh:YU};JU.useEffectEvent=FU;function wN(h,g,y,S){g=h.memoizedState,y=y(S,g),y=y==null?g:d({},g,y),h.memoizedState=y,h.lanes===0&&(h.updateQueue.baseState=y)}var DN={enqueueSetState:function(h,g,y){h=h._reactInternals;var S=ua(),A=Yh(S);A.payload=g,y!=null&&(A.callback=y),g=Xh(h,A,S),g!==null&&(Pr(g,h,S),VC(g,h,S))},enqueueReplaceState:function(h,g,y){h=h._reactInternals;var S=ua(),A=Yh(S);A.tag=1,A.payload=g,y!=null&&(A.callback=y),g=Xh(h,A,S),g!==null&&(Pr(g,h,S),VC(g,h,S))},enqueueForceUpdate:function(h,g){h=h._reactInternals;var y=ua(),S=Yh(y);S.tag=2,g!=null&&(S.callback=g),g=Xh(h,S,y),g!==null&&(Pr(g,h,y),VC(g,h,y))}};function e3(h,g,y,S,A,k,z){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(S,k,z):g.prototype&&g.prototype.isPureReactComponent?!PC(y,S)||!PC(A,k):!0}function t3(h,g,y,S){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(y,S),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(y,S),g.state!==h&&DN.enqueueReplaceState(g,g.state,null)}function hf(h,g){var y=g;if("ref"in g){y={};for(var S in g)S!=="ref"&&(y[S]=g[S])}if(h=h.defaultProps){y===g&&(y=d({},y));for(var A in h)y[A]===void 0&&(y[A]=h[A])}return y}function i3(h){RM(h)}function n3(h){console.error(h)}function s3(h){RM(h)}function JM(h,g){try{var y=h.onUncaughtError;y(g.value,{componentStack:g.stack})}catch(S){setTimeout(function(){throw S})}}function o3(h,g,y){try{var S=h.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function MN(h,g,y){return y=Yh(y),y.tag=3,y.payload={element:null},y.callback=function(){JM(h,g)},y}function r3(h){return h=Yh(h),h.tag=3,h}function a3(h,g,y,S){var A=y.type.getDerivedStateFromError;if(typeof A=="function"){var k=S.value;h.payload=function(){return A(k)},h.callback=function(){o3(g,y,S)}}var z=y.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(h.callback=function(){o3(g,y,S),typeof A!="function"&&(tp===null?tp=new Set([this]):tp.add(this));var Z=S.stack;this.componentDidCatch(S.value,{componentStack:Z!==null?Z:""})})}function che(h,g,y,S,A){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(g=y.alternate,g!==null&&ev(g,y,A,!0),y=ra.current,y!==null){switch(y.tag){case 31:case 13:return Za===null?dA():y.alternate===null&&Tn===0&&(Tn=3),y.flags&=-257,y.flags|=65536,y.lanes=A,S===GM?y.flags|=16384:(g=y.updateQueue,g===null?y.updateQueue=new Set([S]):g.add(S),ZN(h,S,A)),!1;case 22:return y.flags|=65536,S===GM?y.flags|=16384:(g=y.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=g):(y=g.retryQueue,y===null?g.retryQueue=new Set([S]):y.add(S)),ZN(h,S,A)),!1}throw Error(n(435,y.tag))}return ZN(h,S,A),dA(),!1}if(Zt)return g=ra.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=A,S!==jP&&(h=Error(n(422),{cause:S}),FC($a(h,y)))):(S!==jP&&(g=Error(n(423),{cause:S}),FC($a(g,y))),h=h.current.alternate,h.flags|=65536,A&=-A,h.lanes|=A,S=$a(S,y),A=MN(h.stateNode,S,A),tN(h,A),Tn!==4&&(Tn=2)),!1;var k=Error(n(520),{cause:S});if(k=$a(k,y),tx===null?tx=[k]:tx.push(k),Tn!==4&&(Tn=2),g===null)return!0;S=$a(S,y),y=g;do{switch(y.tag){case 3:return y.flags|=65536,h=A&-A,y.lanes|=h,h=MN(y.stateNode,S,h),tN(y,h),!1;case 1:if(g=y.type,k=y.stateNode,(y.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(tp===null||!tp.has(k))))return y.flags|=65536,A&=-A,y.lanes|=A,A=r3(A),a3(A,h,y,S),tN(y,A),!1}y=y.return}while(y!==null);return!1}var AN=Error(n(461)),ds=!1;function to(h,g,y,S){g.child=h===null?dU(g,null,y,S):uf(g,h.child,y,S)}function l3(h,g,y,S,A){y=y.render;var k=g.ref;if("ref"in S){var z={};for(var Z in S)Z!=="ref"&&(z[Z]=S[Z])}else z=S;return rf(g),S=aN(h,g,y,z,k,A),Z=lN(),h!==null&&!ds?(cN(h,g,A),cd(h,g,A)):(Zt&&Z&&HP(g),g.flags|=1,to(h,g,S,A),g.child)}function c3(h,g,y,S,A){if(h===null){var k=y.type;return typeof k=="function"&&!zP(k)&&k.defaultProps===void 0&&y.compare===null?(g.tag=15,g.type=k,u3(h,g,k,S,A)):(h=NM(y.type,null,S,g,g.mode,A),h.ref=g.ref,h.return=g,g.child=h)}if(k=h.child,!NN(h,A)){var z=k.memoizedProps;if(y=y.compare,y=y!==null?y:PC,y(z,S)&&h.ref===g.ref)return cd(h,g,A)}return g.flags|=1,h=nd(k,S),h.ref=g.ref,h.return=g,g.child=h}function u3(h,g,y,S,A){if(h!==null){var k=h.memoizedProps;if(PC(k,S)&&h.ref===g.ref)if(ds=!1,g.pendingProps=S=k,NN(h,A))(h.flags&131072)!==0&&(ds=!0);else return g.lanes=h.lanes,cd(h,g,A)}return kN(h,g,y,S,A)}function d3(h,g,y,S){var A=S.children,k=h!==null?h.memoizedState:null;if(h===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((g.flags&128)!==0){if(k=k!==null?k.baseLanes|y:y,h!==null){for(S=g.child=h.child,A=0;S!==null;)A=A|S.lanes|S.childLanes,S=S.sibling;S=A&~k}else S=0,g.child=null;return h3(h,g,k,y,S)}if((y&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},h!==null&&_M(g,k!==null?k.cachePool:null),k!==null?gU(g,k):nN(),fU(g);else return S=g.lanes=536870912,h3(h,g,k!==null?k.baseLanes|y:y,y,S)}else k!==null?(_M(g,k.cachePool),gU(g,k),qh(),g.memoizedState=null):(h!==null&&_M(g,null),nN(),qh());return to(h,g,A,y),g.child}function YC(h,g){return h!==null&&h.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function h3(h,g,y,S,A){var k=qP();return k=k===null?null:{parent:cs._currentValue,pool:k},g.memoizedState={baseLanes:y,cachePool:k},h!==null&&_M(g,null),nN(),fU(g),h!==null&&ev(h,g,S,!0),g.childLanes=A,null}function eA(h,g){return g=iA({mode:g.mode,children:g.children},h.mode),g.ref=h.ref,h.child=g,g.return=h,g}function p3(h,g,y){return uf(g,h.child,null,y),h=eA(g,g.pendingProps),h.flags|=2,aa(g),g.memoizedState=null,h}function uhe(h,g,y){var S=g.pendingProps,A=(g.flags&128)!==0;if(g.flags&=-129,h===null){if(Zt){if(S.mode==="hidden")return h=eA(g,S),g.lanes=536870912,YC(null,h);if(oN(g),(h=Wi)?(h=M$(h,Xa),h=h!==null&&h.data==="&"?h:null,h!==null&&(g.memoizedState={dehydrated:h,treeContext:Wh!==null?{id:Gc,overflow:Vc}:null,retryLane:536870912,hydrationErrors:null},y=Z4(h),y.return=g,g.child=y,Js=g,Wi=null)):h=null,h===null)throw Uh(g);return g.lanes=536870912,null}return eA(g,S)}var k=h.memoizedState;if(k!==null){var z=k.dehydrated;if(oN(g),A)if(g.flags&256)g.flags&=-257,g=p3(h,g,y);else if(g.memoizedState!==null)g.child=h.child,g.flags|=128,g=null;else throw Error(n(558));else if(ds||ev(h,g,y,!1),A=(y&h.childLanes)!==0,ds||A){if(S=Oi,S!==null&&(z=n4(S,y),z!==0&&z!==k.retryLane))throw k.retryLane=z,tf(h,z),Pr(S,h,z),AN;dA(),g=p3(h,g,y)}else h=k.treeContext,Wi=qa(z.nextSibling),Js=g,Zt=!0,jh=null,Xa=!1,h!==null&&J4(g,h),g=eA(g,S),g.flags|=4096;return g}return h=nd(h.child,{mode:S.mode,children:S.children}),h.ref=g.ref,g.child=h,h.return=g,h}function tA(h,g){var y=g.ref;if(y===null)h!==null&&h.ref!==null&&(g.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(n(284));(h===null||h.ref!==y)&&(g.flags|=4194816)}}function kN(h,g,y,S,A){return rf(g),y=aN(h,g,y,S,void 0,A),S=lN(),h!==null&&!ds?(cN(h,g,A),cd(h,g,A)):(Zt&&S&&HP(g),g.flags|=1,to(h,g,y,A),g.child)}function g3(h,g,y,S,A,k){return rf(g),g.updateQueue=null,y=yU(g,S,y,A),mU(h),S=lN(),h!==null&&!ds?(cN(h,g,k),cd(h,g,k)):(Zt&&S&&HP(g),g.flags|=1,to(h,g,y,k),g.child)}function f3(h,g,y,S,A){if(rf(g),g.stateNode===null){var k=Zy,z=y.contextType;typeof z=="object"&&z!==null&&(k=eo(z)),k=new y(S,k),g.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=DN,g.stateNode=k,k._reactInternals=g,k=g.stateNode,k.props=S,k.state=g.memoizedState,k.refs={},JP(g),z=y.contextType,k.context=typeof z=="object"&&z!==null?eo(z):Zy,k.state=g.memoizedState,z=y.getDerivedStateFromProps,typeof z=="function"&&(wN(g,y,z,S),k.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(z=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),z!==k.state&&DN.enqueueReplaceState(k,k.state,null),WC(g,S,k,A),HC(),k.state=g.memoizedState),typeof k.componentDidMount=="function"&&(g.flags|=4194308),S=!0}else if(h===null){k=g.stateNode;var Z=g.memoizedProps,ne=hf(y,Z);k.props=ne;var he=k.context,De=y.contextType;z=Zy,typeof De=="object"&&De!==null&&(z=eo(De));var Te=y.getDerivedStateFromProps;De=typeof Te=="function"||typeof k.getSnapshotBeforeUpdate=="function",Z=g.pendingProps!==Z,De||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(Z||he!==z)&&t3(g,k,S,z),Kh=!1;var ye=g.memoizedState;k.state=ye,WC(g,S,k,A),HC(),he=g.memoizedState,Z||ye!==he||Kh?(typeof Te=="function"&&(wN(g,y,Te,S),he=g.memoizedState),(ne=Kh||e3(g,y,ne,S,ye,he,z))?(De||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(g.flags|=4194308)):(typeof k.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=S,g.memoizedState=he),k.props=S,k.state=he,k.context=z,S=ne):(typeof k.componentDidMount=="function"&&(g.flags|=4194308),S=!1)}else{k=g.stateNode,eN(h,g),z=g.memoizedProps,De=hf(y,z),k.props=De,Te=g.pendingProps,ye=k.context,he=y.contextType,ne=Zy,typeof he=="object"&&he!==null&&(ne=eo(he)),Z=y.getDerivedStateFromProps,(he=typeof Z=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(z!==Te||ye!==ne)&&t3(g,k,S,ne),Kh=!1,ye=g.memoizedState,k.state=ye,WC(g,S,k,A),HC();var Ce=g.memoizedState;z!==Te||ye!==Ce||Kh||h!==null&&h.dependencies!==null&&FM(h.dependencies)?(typeof Z=="function"&&(wN(g,y,Z,S),Ce=g.memoizedState),(De=Kh||e3(g,y,De,S,ye,Ce,ne)||h!==null&&h.dependencies!==null&&FM(h.dependencies))?(he||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(S,Ce,ne),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(S,Ce,ne)),typeof k.componentDidUpdate=="function"&&(g.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof k.componentDidUpdate!="function"||z===h.memoizedProps&&ye===h.memoizedState||(g.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||z===h.memoizedProps&&ye===h.memoizedState||(g.flags|=1024),g.memoizedProps=S,g.memoizedState=Ce),k.props=S,k.state=Ce,k.context=ne,S=De):(typeof k.componentDidUpdate!="function"||z===h.memoizedProps&&ye===h.memoizedState||(g.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||z===h.memoizedProps&&ye===h.memoizedState||(g.flags|=1024),S=!1)}return k=S,tA(h,g),S=(g.flags&128)!==0,k||S?(k=g.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:k.render(),g.flags|=1,h!==null&&S?(g.child=uf(g,h.child,null,A),g.child=uf(g,null,y,A)):to(h,g,y,A),g.memoizedState=k.state,h=g.child):h=cd(h,g,A),h}function m3(h,g,y,S){return sf(),g.flags|=256,to(h,g,y,S),g.child}var TN={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function IN(h){return{baseLanes:h,cachePool:oU()}}function RN(h,g,y){return h=h!==null?h.childLanes&~y:0,g&&(h|=ca),h}function y3(h,g,y){var S=g.pendingProps,A=!1,k=(g.flags&128)!==0,z;if((z=k)||(z=h!==null&&h.memoizedState===null?!1:(jn.current&2)!==0),z&&(A=!0,g.flags&=-129),z=(g.flags&32)!==0,g.flags&=-33,h===null){if(Zt){if(A?Zh(g):qh(),(h=Wi)?(h=M$(h,Xa),h=h!==null&&h.data!=="&"?h:null,h!==null&&(g.memoizedState={dehydrated:h,treeContext:Wh!==null?{id:Gc,overflow:Vc}:null,retryLane:536870912,hydrationErrors:null},y=Z4(h),y.return=g,g.child=y,Js=g,Wi=null)):h=null,h===null)throw Uh(g);return hO(h)?g.lanes=32:g.lanes=536870912,null}var Z=S.children;return S=S.fallback,A?(qh(),A=g.mode,Z=iA({mode:"hidden",children:Z},A),S=nf(S,A,y,null),Z.return=g,S.return=g,Z.sibling=S,g.child=Z,S=g.child,S.memoizedState=IN(y),S.childLanes=RN(h,z,y),g.memoizedState=TN,YC(null,S)):(Zh(g),EN(g,Z))}var ne=h.memoizedState;if(ne!==null&&(Z=ne.dehydrated,Z!==null)){if(k)g.flags&256?(Zh(g),g.flags&=-257,g=LN(h,g,y)):g.memoizedState!==null?(qh(),g.child=h.child,g.flags|=128,g=null):(qh(),Z=S.fallback,A=g.mode,S=iA({mode:"visible",children:S.children},A),Z=nf(Z,A,y,null),Z.flags|=2,S.return=g,Z.return=g,S.sibling=Z,g.child=S,uf(g,h.child,null,y),S=g.child,S.memoizedState=IN(y),S.childLanes=RN(h,z,y),g.memoizedState=TN,g=YC(null,S));else if(Zh(g),hO(Z)){if(z=Z.nextSibling&&Z.nextSibling.dataset,z)var he=z.dgst;z=he,S=Error(n(419)),S.stack="",S.digest=z,FC({value:S,source:null,stack:null}),g=LN(h,g,y)}else if(ds||ev(h,g,y,!1),z=(y&h.childLanes)!==0,ds||z){if(z=Oi,z!==null&&(S=n4(z,y),S!==0&&S!==ne.retryLane))throw ne.retryLane=S,tf(h,S),Pr(z,h,S),AN;dO(Z)||dA(),g=LN(h,g,y)}else dO(Z)?(g.flags|=192,g.child=h.child,g=null):(h=ne.treeContext,Wi=qa(Z.nextSibling),Js=g,Zt=!0,jh=null,Xa=!1,h!==null&&J4(g,h),g=EN(g,S.children),g.flags|=4096);return g}return A?(qh(),Z=S.fallback,A=g.mode,ne=h.child,he=ne.sibling,S=nd(ne,{mode:"hidden",children:S.children}),S.subtreeFlags=ne.subtreeFlags&65011712,he!==null?Z=nd(he,Z):(Z=nf(Z,A,y,null),Z.flags|=2),Z.return=g,S.return=g,S.sibling=Z,g.child=S,YC(null,S),S=g.child,Z=h.child.memoizedState,Z===null?Z=IN(y):(A=Z.cachePool,A!==null?(ne=cs._currentValue,A=A.parent!==ne?{parent:ne,pool:ne}:A):A=oU(),Z={baseLanes:Z.baseLanes|y,cachePool:A}),S.memoizedState=Z,S.childLanes=RN(h,z,y),g.memoizedState=TN,YC(h.child,S)):(Zh(g),y=h.child,h=y.sibling,y=nd(y,{mode:"visible",children:S.children}),y.return=g,y.sibling=null,h!==null&&(z=g.deletions,z===null?(g.deletions=[h],g.flags|=16):z.push(h)),g.child=y,g.memoizedState=null,y)}function EN(h,g){return g=iA({mode:"visible",children:g},h.mode),g.return=h,h.child=g}function iA(h,g){return h=oa(22,h,null,g),h.lanes=0,h}function LN(h,g,y){return uf(g,h.child,null,y),h=EN(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function v3(h,g,y){h.lanes|=g;var S=h.alternate;S!==null&&(S.lanes|=g),KP(h.return,g,y)}function PN(h,g,y,S,A,k){var z=h.memoizedState;z===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:A,treeForkCount:k}:(z.isBackwards=g,z.rendering=null,z.renderingStartTime=0,z.last=S,z.tail=y,z.tailMode=A,z.treeForkCount=k)}function b3(h,g,y){var S=g.pendingProps,A=S.revealOrder,k=S.tail;S=S.children;var z=jn.current,Z=(z&2)!==0;if(Z?(z=z&1|2,g.flags|=128):z&=1,ee(jn,z),to(h,g,S,y),S=Zt?OC:0,!Z&&h!==null&&(h.flags&128)!==0)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&v3(h,y,g);else if(h.tag===19)v3(h,y,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}switch(A){case"forwards":for(y=g.child,A=null;y!==null;)h=y.alternate,h!==null&&jM(h)===null&&(A=y),y=y.sibling;y=A,y===null?(A=g.child,g.child=null):(A=y.sibling,y.sibling=null),PN(g,!1,A,y,k,S);break;case"backwards":case"unstable_legacy-backwards":for(y=null,A=g.child,g.child=null;A!==null;){if(h=A.alternate,h!==null&&jM(h)===null){g.child=A;break}h=A.sibling,A.sibling=y,y=A,A=h}PN(g,!0,y,null,k,S);break;case"together":PN(g,!1,null,null,void 0,S);break;default:g.memoizedState=null}return g.child}function cd(h,g,y){if(h!==null&&(g.dependencies=h.dependencies),ep|=g.lanes,(y&g.childLanes)===0)if(h!==null){if(ev(h,g,y,!1),(y&g.childLanes)===0)return null}else return null;if(h!==null&&g.child!==h.child)throw Error(n(153));if(g.child!==null){for(h=g.child,y=nd(h,h.pendingProps),g.child=y,y.return=g;h.sibling!==null;)h=h.sibling,y=y.sibling=nd(h,h.pendingProps),y.return=g;y.sibling=null}return g.child}function NN(h,g){return(h.lanes&g)!==0?!0:(h=h.dependencies,!!(h!==null&&FM(h)))}function dhe(h,g,y){switch(g.tag){case 3:xe(g,g.stateNode.containerInfo),$h(g,cs,h.memoizedState.cache),sf();break;case 27:case 5:ge(g);break;case 4:xe(g,g.stateNode.containerInfo);break;case 10:$h(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,oN(g),null;break;case 13:var S=g.memoizedState;if(S!==null)return S.dehydrated!==null?(Zh(g),g.flags|=128,null):(y&g.child.childLanes)!==0?y3(h,g,y):(Zh(g),h=cd(h,g,y),h!==null?h.sibling:null);Zh(g);break;case 19:var A=(h.flags&128)!==0;if(S=(y&g.childLanes)!==0,S||(ev(h,g,y,!1),S=(y&g.childLanes)!==0),A){if(S)return b3(h,g,y);g.flags|=128}if(A=g.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),ee(jn,jn.current),S)break;return null;case 22:return g.lanes=0,d3(h,g,y,g.pendingProps);case 24:$h(g,cs,h.memoizedState.cache)}return cd(h,g,y)}function S3(h,g,y){if(h!==null)if(h.memoizedProps!==g.pendingProps)ds=!0;else{if(!NN(h,y)&&(g.flags&128)===0)return ds=!1,dhe(h,g,y);ds=(h.flags&131072)!==0}else ds=!1,Zt&&(g.flags&1048576)!==0&&Q4(g,OC,g.index);switch(g.lanes=0,g.tag){case 16:e:{var S=g.pendingProps;if(h=lf(g.elementType),g.type=h,typeof h=="function")zP(h)?(S=hf(h,S),g.tag=1,g=f3(null,g,h,S,y)):(g.tag=0,g=kN(null,g,h,S,y));else{if(h!=null){var A=h.$$typeof;if(A===M){g.tag=11,g=l3(null,g,h,S,y);break e}else if(A===I){g.tag=14,g=c3(null,g,h,S,y);break e}}throw g=K(h)||h,Error(n(306,g,""))}}return g;case 0:return kN(h,g,g.type,g.pendingProps,y);case 1:return S=g.type,A=hf(S,g.pendingProps),f3(h,g,S,A,y);case 3:e:{if(xe(g,g.stateNode.containerInfo),h===null)throw Error(n(387));S=g.pendingProps;var k=g.memoizedState;A=k.element,eN(h,g),WC(g,S,null,y);var z=g.memoizedState;if(S=z.cache,$h(g,cs,S),S!==k.cache&&YP(g,[cs],y,!0),HC(),S=z.element,k.isDehydrated)if(k={element:S,isDehydrated:!1,cache:z.cache},g.updateQueue.baseState=k,g.memoizedState=k,g.flags&256){g=m3(h,g,S,y);break e}else if(S!==A){A=$a(Error(n(424)),g),FC(A),g=m3(h,g,S,y);break e}else{switch(h=g.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(Wi=qa(h.firstChild),Js=g,Zt=!0,jh=null,Xa=!0,y=dU(g,null,S,y),g.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(sf(),S===A){g=cd(h,g,y);break e}to(h,g,S,y)}g=g.child}return g;case 26:return tA(h,g),h===null?(y=E$(g.type,null,g.pendingProps,null))?g.memoizedState=y:Zt||(y=g.type,h=g.pendingProps,S=vA(ae.current).createElement(y),S[Qs]=g,S[kr]=h,io(S,y,h),Bs(S),g.stateNode=S):g.memoizedState=E$(g.type,h.memoizedProps,g.pendingProps,h.memoizedState),null;case 27:return ge(g),h===null&&Zt&&(S=g.stateNode=T$(g.type,g.pendingProps,ae.current),Js=g,Xa=!0,A=Wi,op(g.type)?(pO=A,Wi=qa(S.firstChild)):Wi=A),to(h,g,g.pendingProps.children,y),tA(h,g),h===null&&(g.flags|=4194304),g.child;case 5:return h===null&&Zt&&((A=S=Wi)&&(S=Vhe(S,g.type,g.pendingProps,Xa),S!==null?(g.stateNode=S,Js=g,Wi=qa(S.firstChild),Xa=!1,A=!0):A=!1),A||Uh(g)),ge(g),A=g.type,k=g.pendingProps,z=h!==null?h.memoizedProps:null,S=k.children,lO(A,k)?S=null:z!==null&&lO(A,z)&&(g.flags|=32),g.memoizedState!==null&&(A=aN(h,g,ihe,null,null,y),cx._currentValue=A),tA(h,g),to(h,g,S,y),g.child;case 6:return h===null&&Zt&&((h=y=Wi)&&(y=Hhe(y,g.pendingProps,Xa),y!==null?(g.stateNode=y,Js=g,Wi=null,h=!0):h=!1),h||Uh(g)),null;case 13:return y3(h,g,y);case 4:return xe(g,g.stateNode.containerInfo),S=g.pendingProps,h===null?g.child=uf(g,null,S,y):to(h,g,S,y),g.child;case 11:return l3(h,g,g.type,g.pendingProps,y);case 7:return to(h,g,g.pendingProps,y),g.child;case 8:return to(h,g,g.pendingProps.children,y),g.child;case 12:return to(h,g,g.pendingProps.children,y),g.child;case 10:return S=g.pendingProps,$h(g,g.type,S.value),to(h,g,S.children,y),g.child;case 9:return A=g.type._context,S=g.pendingProps.children,rf(g),A=eo(A),S=S(A),g.flags|=1,to(h,g,S,y),g.child;case 14:return c3(h,g,g.type,g.pendingProps,y);case 15:return u3(h,g,g.type,g.pendingProps,y);case 19:return b3(h,g,y);case 31:return uhe(h,g,y);case 22:return d3(h,g,y,g.pendingProps);case 24:return rf(g),S=eo(cs),h===null?(A=qP(),A===null&&(A=Oi,k=XP(),A.pooledCache=k,k.refCount++,k!==null&&(A.pooledCacheLanes|=y),A=k),g.memoizedState={parent:S,cache:A},JP(g),$h(g,cs,A)):((h.lanes&y)!==0&&(eN(h,g),WC(g,null,null,y),HC()),A=h.memoizedState,k=g.memoizedState,A.parent!==S?(A={parent:S,cache:S},g.memoizedState=A,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=A),$h(g,cs,S)):(S=k.cache,$h(g,cs,S),S!==A.cache&&YP(g,[cs],y,!0))),to(h,g,g.pendingProps.children,y),g.child;case 29:throw g.pendingProps}throw Error(n(156,g.tag))}function ud(h){h.flags|=4}function ON(h,g,y,S,A){if((g=(h.mode&32)!==0)&&(g=!1),g){if(h.flags|=16777216,(A&335544128)===A)if(h.stateNode.complete)h.flags|=8192;else if(K3())h.flags|=8192;else throw cf=GM,QP}else h.flags&=-16777217}function C3(h,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!F$(g))if(K3())h.flags|=8192;else throw cf=GM,QP}function nA(h,g){g!==null&&(h.flags|=4),h.flags&16384&&(g=h.tag!==22?e4():536870912,h.lanes|=g,hv|=g)}function XC(h,g){if(!Zt)switch(h.tailMode){case"hidden":g=h.tail;for(var y=null;g!==null;)g.alternate!==null&&(y=g),g=g.sibling;y===null?h.tail=null:y.sibling=null;break;case"collapsed":y=h.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:S.sibling=null}}function ji(h){var g=h.alternate!==null&&h.alternate.child===h.child,y=0,S=0;if(g)for(var A=h.child;A!==null;)y|=A.lanes|A.childLanes,S|=A.subtreeFlags&65011712,S|=A.flags&65011712,A.return=h,A=A.sibling;else for(A=h.child;A!==null;)y|=A.lanes|A.childLanes,S|=A.subtreeFlags,S|=A.flags,A.return=h,A=A.sibling;return h.subtreeFlags|=S,h.childLanes=y,g}function hhe(h,g,y){var S=g.pendingProps;switch(WP(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(g),null;case 1:return ji(g),null;case 3:return y=g.stateNode,S=null,h!==null&&(S=h.memoizedState.cache),g.memoizedState.cache!==S&&(g.flags|=2048),rd(cs),be(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(h===null||h.child===null)&&(Jy(g)?ud(g):h===null||h.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,UP())),ji(g),null;case 26:var A=g.type,k=g.memoizedState;return h===null?(ud(g),k!==null?(ji(g),C3(g,k)):(ji(g),ON(g,A,null,S,y))):k?k!==h.memoizedState?(ud(g),ji(g),C3(g,k)):(ji(g),g.flags&=-16777217):(h=h.memoizedProps,h!==S&&ud(g),ji(g),ON(g,A,h,S,y)),null;case 27:if(Re(g),y=ae.current,A=g.type,h!==null&&g.stateNode!=null)h.memoizedProps!==S&&ud(g);else{if(!S){if(g.stateNode===null)throw Error(n(166));return ji(g),null}h=ie.current,Jy(g)?eU(g):(h=T$(A,S,y),g.stateNode=h,ud(g))}return ji(g),null;case 5:if(Re(g),A=g.type,h!==null&&g.stateNode!=null)h.memoizedProps!==S&&ud(g);else{if(!S){if(g.stateNode===null)throw Error(n(166));return ji(g),null}if(k=ie.current,Jy(g))eU(g);else{var z=vA(ae.current);switch(k){case 1:k=z.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:k=z.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":k=z.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":k=z.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":k=z.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof S.is=="string"?z.createElement("select",{is:S.is}):z.createElement("select"),S.multiple?k.multiple=!0:S.size&&(k.size=S.size);break;default:k=typeof S.is=="string"?z.createElement(A,{is:S.is}):z.createElement(A)}}k[Qs]=g,k[kr]=S;e:for(z=g.child;z!==null;){if(z.tag===5||z.tag===6)k.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===g)break e;for(;z.sibling===null;){if(z.return===null||z.return===g)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}g.stateNode=k;e:switch(io(k,A,S),A){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&ud(g)}}return ji(g),ON(g,g.type,h===null?null:h.memoizedProps,g.pendingProps,y),null;case 6:if(h&&g.stateNode!=null)h.memoizedProps!==S&&ud(g);else{if(typeof S!="string"&&g.stateNode===null)throw Error(n(166));if(h=ae.current,Jy(g)){if(h=g.stateNode,y=g.memoizedProps,S=null,A=Js,A!==null)switch(A.tag){case 27:case 5:S=A.memoizedProps}h[Qs]=g,h=!!(h.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||y$(h.nodeValue,y)),h||Uh(g,!0)}else h=vA(h).createTextNode(S),h[Qs]=g,g.stateNode=h}return ji(g),null;case 31:if(y=g.memoizedState,h===null||h.memoizedState!==null){if(S=Jy(g),y!==null){if(h===null){if(!S)throw Error(n(318));if(h=g.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(557));h[Qs]=g}else sf(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;ji(g),h=!1}else y=UP(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=y),h=!0;if(!h)return g.flags&256?(aa(g),g):(aa(g),null);if((g.flags&128)!==0)throw Error(n(558))}return ji(g),null;case 13:if(S=g.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(A=Jy(g),S!==null&&S.dehydrated!==null){if(h===null){if(!A)throw Error(n(318));if(A=g.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[Qs]=g}else sf(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;ji(g),A=!1}else A=UP(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=A),A=!0;if(!A)return g.flags&256?(aa(g),g):(aa(g),null)}return aa(g),(g.flags&128)!==0?(g.lanes=y,g):(y=S!==null,h=h!==null&&h.memoizedState!==null,y&&(S=g.child,A=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(A=S.alternate.memoizedState.cachePool.pool),k=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(k=S.memoizedState.cachePool.pool),k!==A&&(S.flags|=2048)),y!==h&&y&&(g.child.flags|=8192),nA(g,g.updateQueue),ji(g),null);case 4:return be(),h===null&&nO(g.stateNode.containerInfo),ji(g),null;case 10:return rd(g.type),ji(g),null;case 19:if(U(jn),S=g.memoizedState,S===null)return ji(g),null;if(A=(g.flags&128)!==0,k=S.rendering,k===null)if(A)XC(S,!1);else{if(Tn!==0||h!==null&&(h.flags&128)!==0)for(h=g.child;h!==null;){if(k=jM(h),k!==null){for(g.flags|=128,XC(S,!1),h=k.updateQueue,g.updateQueue=h,nA(g,h),g.subtreeFlags=0,h=y,y=g.child;y!==null;)X4(y,h),y=y.sibling;return ee(jn,jn.current&1|2),Zt&&sd(g,S.treeForkCount),g.child}h=h.sibling}S.tail!==null&&gt()>lA&&(g.flags|=128,A=!0,XC(S,!1),g.lanes=4194304)}else{if(!A)if(h=jM(k),h!==null){if(g.flags|=128,A=!0,h=h.updateQueue,g.updateQueue=h,nA(g,h),XC(S,!0),S.tail===null&&S.tailMode==="hidden"&&!k.alternate&&!Zt)return ji(g),null}else 2*gt()-S.renderingStartTime>lA&&y!==536870912&&(g.flags|=128,A=!0,XC(S,!1),g.lanes=4194304);S.isBackwards?(k.sibling=g.child,g.child=k):(h=S.last,h!==null?h.sibling=k:g.child=k,S.last=k)}return S.tail!==null?(h=S.tail,S.rendering=h,S.tail=h.sibling,S.renderingStartTime=gt(),h.sibling=null,y=jn.current,ee(jn,A?y&1|2:y&1),Zt&&sd(g,S.treeForkCount),h):(ji(g),null);case 22:case 23:return aa(g),sN(),S=g.memoizedState!==null,h!==null?h.memoizedState!==null!==S&&(g.flags|=8192):S&&(g.flags|=8192),S?(y&536870912)!==0&&(g.flags&128)===0&&(ji(g),g.subtreeFlags&6&&(g.flags|=8192)):ji(g),y=g.updateQueue,y!==null&&nA(g,y.retryQueue),y=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),S=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==y&&(g.flags|=2048),h!==null&&U(af),null;case 24:return y=null,h!==null&&(y=h.memoizedState.cache),g.memoizedState.cache!==y&&(g.flags|=2048),rd(cs),ji(g),null;case 25:return null;case 30:return null}throw Error(n(156,g.tag))}function phe(h,g){switch(WP(g),g.tag){case 1:return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return rd(cs),be(),h=g.flags,(h&65536)!==0&&(h&128)===0?(g.flags=h&-65537|128,g):null;case 26:case 27:case 5:return Re(g),null;case 31:if(g.memoizedState!==null){if(aa(g),g.alternate===null)throw Error(n(340));sf()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 13:if(aa(g),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(n(340));sf()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return U(jn),null;case 4:return be(),null;case 10:return rd(g.type),null;case 22:case 23:return aa(g),sN(),h!==null&&U(af),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 24:return rd(cs),null;case 25:return null;default:return null}}function x3(h,g){switch(WP(g),g.tag){case 3:rd(cs),be();break;case 26:case 27:case 5:Re(g);break;case 4:be();break;case 31:g.memoizedState!==null&&aa(g);break;case 13:aa(g);break;case 19:U(jn);break;case 10:rd(g.type);break;case 22:case 23:aa(g),sN(),h!==null&&U(af);break;case 24:rd(cs)}}function ZC(h,g){try{var y=g.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var A=S.next;y=A;do{if((y.tag&h)===h){S=void 0;var k=y.create,z=y.inst;S=k(),z.destroy=S}y=y.next}while(y!==A)}}catch(Z){xi(g,g.return,Z)}}function Qh(h,g,y){try{var S=g.updateQueue,A=S!==null?S.lastEffect:null;if(A!==null){var k=A.next;S=k;do{if((S.tag&h)===h){var z=S.inst,Z=z.destroy;if(Z!==void 0){z.destroy=void 0,A=g;var ne=y,he=Z;try{he()}catch(De){xi(A,ne,De)}}}S=S.next}while(S!==k)}}catch(De){xi(g,g.return,De)}}function w3(h){var g=h.updateQueue;if(g!==null){var y=h.stateNode;try{pU(g,y)}catch(S){xi(h,h.return,S)}}}function D3(h,g,y){y.props=hf(h.type,h.memoizedProps),y.state=h.memoizedState;try{y.componentWillUnmount()}catch(S){xi(h,g,S)}}function qC(h,g){try{var y=h.ref;if(y!==null){switch(h.tag){case 26:case 27:case 5:var S=h.stateNode;break;case 30:S=h.stateNode;break;default:S=h.stateNode}typeof y=="function"?h.refCleanup=y(S):y.current=S}}catch(A){xi(h,g,A)}}function Hc(h,g){var y=h.ref,S=h.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(A){xi(h,g,A)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(A){xi(h,g,A)}else y.current=null}function M3(h){var g=h.type,y=h.memoizedProps,S=h.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(A){xi(h,h.return,A)}}function FN(h,g,y){try{var S=h.stateNode;Ohe(S,h.type,y,g),S[kr]=g}catch(A){xi(h,h.return,A)}}function A3(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&op(h.type)||h.tag===4}function BN(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||A3(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&op(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function _N(h,g,y){var S=h.tag;if(S===5||S===6)h=h.stateNode,g?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(h,g):(g=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,g.appendChild(h),y=y._reactRootContainer,y!=null||g.onclick!==null||(g.onclick=td));else if(S!==4&&(S===27&&op(h.type)&&(y=h.stateNode,g=null),h=h.child,h!==null))for(_N(h,g,y),h=h.sibling;h!==null;)_N(h,g,y),h=h.sibling}function sA(h,g,y){var S=h.tag;if(S===5||S===6)h=h.stateNode,g?y.insertBefore(h,g):y.appendChild(h);else if(S!==4&&(S===27&&op(h.type)&&(y=h.stateNode),h=h.child,h!==null))for(sA(h,g,y),h=h.sibling;h!==null;)sA(h,g,y),h=h.sibling}function k3(h){var g=h.stateNode,y=h.memoizedProps;try{for(var S=h.type,A=g.attributes;A.length;)g.removeAttributeNode(A[0]);io(g,S,y),g[Qs]=h,g[kr]=y}catch(k){xi(h,h.return,k)}}var dd=!1,hs=!1,zN=!1,T3=typeof WeakSet=="function"?WeakSet:Set,_s=null;function ghe(h,g){if(h=h.containerInfo,rO=MA,h=G4(h),LP(h)){if("selectionStart"in h)var y={start:h.selectionStart,end:h.selectionEnd};else e:{y=(y=h.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var A=S.anchorOffset,k=S.focusNode;S=S.focusOffset;try{y.nodeType,k.nodeType}catch{y=null;break e}var z=0,Z=-1,ne=-1,he=0,De=0,Te=h,ye=null;t:for(;;){for(var Ce;Te!==y||A!==0&&Te.nodeType!==3||(Z=z+A),Te!==k||S!==0&&Te.nodeType!==3||(ne=z+S),Te.nodeType===3&&(z+=Te.nodeValue.length),(Ce=Te.firstChild)!==null;)ye=Te,Te=Ce;for(;;){if(Te===h)break t;if(ye===y&&++he===A&&(Z=z),ye===k&&++De===S&&(ne=z),(Ce=Te.nextSibling)!==null)break;Te=ye,ye=Te.parentNode}Te=Ce}y=Z===-1||ne===-1?null:{start:Z,end:ne}}else y=null}y=y||{start:0,end:0}}else y=null;for(aO={focusedElem:h,selectionRange:y},MA=!1,_s=g;_s!==null;)if(g=_s,h=g.child,(g.subtreeFlags&1028)!==0&&h!==null)h.return=g,_s=h;else for(;_s!==null;){switch(g=_s,k=g.alternate,h=g.flags,g.tag){case 0:if((h&4)!==0&&(h=g.updateQueue,h=h!==null?h.events:null,h!==null))for(y=0;y<h.length;y++)A=h[y],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((h&1024)!==0&&k!==null){h=void 0,y=g,A=k.memoizedProps,k=k.memoizedState,S=y.stateNode;try{var et=hf(y.type,A);h=S.getSnapshotBeforeUpdate(et,k),S.__reactInternalSnapshotBeforeUpdate=h}catch(mt){xi(y,y.return,mt)}}break;case 3:if((h&1024)!==0){if(h=g.stateNode.containerInfo,y=h.nodeType,y===9)uO(h);else if(y===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":uO(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(n(163))}if(h=g.sibling,h!==null){h.return=g.return,_s=h;break}_s=g.return}}function I3(h,g,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:pd(h,y),S&4&&ZC(5,y);break;case 1:if(pd(h,y),S&4)if(h=y.stateNode,g===null)try{h.componentDidMount()}catch(z){xi(y,y.return,z)}else{var A=hf(y.type,g.memoizedProps);g=g.memoizedState;try{h.componentDidUpdate(A,g,h.__reactInternalSnapshotBeforeUpdate)}catch(z){xi(y,y.return,z)}}S&64&&w3(y),S&512&&qC(y,y.return);break;case 3:if(pd(h,y),S&64&&(h=y.updateQueue,h!==null)){if(g=null,y.child!==null)switch(y.child.tag){case 27:case 5:g=y.child.stateNode;break;case 1:g=y.child.stateNode}try{pU(h,g)}catch(z){xi(y,y.return,z)}}break;case 27:g===null&&S&4&&k3(y);case 26:case 5:pd(h,y),g===null&&S&4&&M3(y),S&512&&qC(y,y.return);break;case 12:pd(h,y);break;case 31:pd(h,y),S&4&&L3(h,y);break;case 13:pd(h,y),S&4&&P3(h,y),S&64&&(h=y.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(y=whe.bind(null,y),Whe(h,y))));break;case 22:if(S=y.memoizedState!==null||dd,!S){g=g!==null&&g.memoizedState!==null||hs,A=dd;var k=hs;dd=S,(hs=g)&&!k?gd(h,y,(y.subtreeFlags&8772)!==0):pd(h,y),dd=A,hs=k}break;case 30:break;default:pd(h,y)}}function R3(h){var g=h.alternate;g!==null&&(h.alternate=null,R3(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&fP(g)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var Zi=null,Ir=!1;function hd(h,g,y){for(y=y.child;y!==null;)E3(h,g,y),y=y.sibling}function E3(h,g,y){if(ia&&typeof ia.onCommitFiberUnmount=="function")try{ia.onCommitFiberUnmount(CC,y)}catch{}switch(y.tag){case 26:hs||Hc(y,g),hd(h,g,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:hs||Hc(y,g);var S=Zi,A=Ir;op(y.type)&&(Zi=y.stateNode,Ir=!1),hd(h,g,y),rx(y.stateNode),Zi=S,Ir=A;break;case 5:hs||Hc(y,g);case 6:if(S=Zi,A=Ir,Zi=null,hd(h,g,y),Zi=S,Ir=A,Zi!==null)if(Ir)try{(Zi.nodeType===9?Zi.body:Zi.nodeName==="HTML"?Zi.ownerDocument.body:Zi).removeChild(y.stateNode)}catch(k){xi(y,g,k)}else try{Zi.removeChild(y.stateNode)}catch(k){xi(y,g,k)}break;case 18:Zi!==null&&(Ir?(h=Zi,w$(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,y.stateNode),Sv(h)):w$(Zi,y.stateNode));break;case 4:S=Zi,A=Ir,Zi=y.stateNode.containerInfo,Ir=!0,hd(h,g,y),Zi=S,Ir=A;break;case 0:case 11:case 14:case 15:Qh(2,y,g),hs||Qh(4,y,g),hd(h,g,y);break;case 1:hs||(Hc(y,g),S=y.stateNode,typeof S.componentWillUnmount=="function"&&D3(y,g,S)),hd(h,g,y);break;case 21:hd(h,g,y);break;case 22:hs=(S=hs)||y.memoizedState!==null,hd(h,g,y),hs=S;break;default:hd(h,g,y)}}function L3(h,g){if(g.memoizedState===null&&(h=g.alternate,h!==null&&(h=h.memoizedState,h!==null))){h=h.dehydrated;try{Sv(h)}catch(y){xi(g,g.return,y)}}}function P3(h,g){if(g.memoizedState===null&&(h=g.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{Sv(h)}catch(y){xi(g,g.return,y)}}function fhe(h){switch(h.tag){case 31:case 13:case 19:var g=h.stateNode;return g===null&&(g=h.stateNode=new T3),g;case 22:return h=h.stateNode,g=h._retryCache,g===null&&(g=h._retryCache=new T3),g;default:throw Error(n(435,h.tag))}}function oA(h,g){var y=fhe(h);g.forEach(function(S){if(!y.has(S)){y.add(S);var A=Dhe.bind(null,h,S);S.then(A,A)}})}function Rr(h,g){var y=g.deletions;if(y!==null)for(var S=0;S<y.length;S++){var A=y[S],k=h,z=g,Z=z;e:for(;Z!==null;){switch(Z.tag){case 27:if(op(Z.type)){Zi=Z.stateNode,Ir=!1;break e}break;case 5:Zi=Z.stateNode,Ir=!1;break e;case 3:case 4:Zi=Z.stateNode.containerInfo,Ir=!0;break e}Z=Z.return}if(Zi===null)throw Error(n(160));E3(k,z,A),Zi=null,Ir=!1,k=A.alternate,k!==null&&(k.return=null),A.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)N3(g,h),g=g.sibling}var Xl=null;function N3(h,g){var y=h.alternate,S=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Rr(g,h),Er(h),S&4&&(Qh(3,h,h.return),ZC(3,h),Qh(5,h,h.return));break;case 1:Rr(g,h),Er(h),S&512&&(hs||y===null||Hc(y,y.return)),S&64&&dd&&(h=h.updateQueue,h!==null&&(S=h.callbacks,S!==null&&(y=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var A=Xl;if(Rr(g,h),Er(h),S&512&&(hs||y===null||Hc(y,y.return)),S&4){var k=y!==null?y.memoizedState:null;if(S=h.memoizedState,y===null)if(S===null)if(h.stateNode===null){e:{S=h.type,y=h.memoizedProps,A=A.ownerDocument||A;t:switch(S){case"title":k=A.getElementsByTagName("title")[0],(!k||k[DC]||k[Qs]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=A.createElement(S),A.head.insertBefore(k,A.querySelector("head > title"))),io(k,S,y),k[Qs]=h,Bs(k),S=k;break e;case"link":var z=N$("link","href",A).get(S+(y.href||""));if(z){for(var Z=0;Z<z.length;Z++)if(k=z[Z],k.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&k.getAttribute("rel")===(y.rel==null?null:y.rel)&&k.getAttribute("title")===(y.title==null?null:y.title)&&k.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){z.splice(Z,1);break t}}k=A.createElement(S),io(k,S,y),A.head.appendChild(k);break;case"meta":if(z=N$("meta","content",A).get(S+(y.content||""))){for(Z=0;Z<z.length;Z++)if(k=z[Z],k.getAttribute("content")===(y.content==null?null:""+y.content)&&k.getAttribute("name")===(y.name==null?null:y.name)&&k.getAttribute("property")===(y.property==null?null:y.property)&&k.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&k.getAttribute("charset")===(y.charSet==null?null:y.charSet)){z.splice(Z,1);break t}}k=A.createElement(S),io(k,S,y),A.head.appendChild(k);break;default:throw Error(n(468,S))}k[Qs]=h,Bs(k),S=k}h.stateNode=S}else O$(A,h.type,h.stateNode);else h.stateNode=P$(A,S,h.memoizedProps);else k!==S?(k===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):k.count--,S===null?O$(A,h.type,h.stateNode):P$(A,S,h.memoizedProps)):S===null&&h.stateNode!==null&&FN(h,h.memoizedProps,y.memoizedProps)}break;case 27:Rr(g,h),Er(h),S&512&&(hs||y===null||Hc(y,y.return)),y!==null&&S&4&&FN(h,h.memoizedProps,y.memoizedProps);break;case 5:if(Rr(g,h),Er(h),S&512&&(hs||y===null||Hc(y,y.return)),h.flags&32){A=h.stateNode;try{Wy(A,"")}catch(et){xi(h,h.return,et)}}S&4&&h.stateNode!=null&&(A=h.memoizedProps,FN(h,A,y!==null?y.memoizedProps:A)),S&1024&&(zN=!0);break;case 6:if(Rr(g,h),Er(h),S&4){if(h.stateNode===null)throw Error(n(162));S=h.memoizedProps,y=h.stateNode;try{y.nodeValue=S}catch(et){xi(h,h.return,et)}}break;case 3:if(CA=null,A=Xl,Xl=bA(g.containerInfo),Rr(g,h),Xl=A,Er(h),S&4&&y!==null&&y.memoizedState.isDehydrated)try{Sv(g.containerInfo)}catch(et){xi(h,h.return,et)}zN&&(zN=!1,O3(h));break;case 4:S=Xl,Xl=bA(h.stateNode.containerInfo),Rr(g,h),Er(h),Xl=S;break;case 12:Rr(g,h),Er(h);break;case 31:Rr(g,h),Er(h),S&4&&(S=h.updateQueue,S!==null&&(h.updateQueue=null,oA(h,S)));break;case 13:Rr(g,h),Er(h),h.child.flags&8192&&h.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(aA=gt()),S&4&&(S=h.updateQueue,S!==null&&(h.updateQueue=null,oA(h,S)));break;case 22:A=h.memoizedState!==null;var ne=y!==null&&y.memoizedState!==null,he=dd,De=hs;if(dd=he||A,hs=De||ne,Rr(g,h),hs=De,dd=he,Er(h),S&8192)e:for(g=h.stateNode,g._visibility=A?g._visibility&-2:g._visibility|1,A&&(y===null||ne||dd||hs||pf(h)),y=null,g=h;;){if(g.tag===5||g.tag===26){if(y===null){ne=y=g;try{if(k=ne.stateNode,A)z=k.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{Z=ne.stateNode;var Te=ne.memoizedProps.style,ye=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;Z.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(et){xi(ne,ne.return,et)}}}else if(g.tag===6){if(y===null){ne=g;try{ne.stateNode.nodeValue=A?"":ne.memoizedProps}catch(et){xi(ne,ne.return,et)}}}else if(g.tag===18){if(y===null){ne=g;try{var Ce=ne.stateNode;A?D$(Ce,!0):D$(ne.stateNode,!1)}catch(et){xi(ne,ne.return,et)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===h)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break e;for(;g.sibling===null;){if(g.return===null||g.return===h)break e;y===g&&(y=null),g=g.return}y===g&&(y=null),g.sibling.return=g.return,g=g.sibling}S&4&&(S=h.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,oA(h,y))));break;case 19:Rr(g,h),Er(h),S&4&&(S=h.updateQueue,S!==null&&(h.updateQueue=null,oA(h,S)));break;case 30:break;case 21:break;default:Rr(g,h),Er(h)}}function Er(h){var g=h.flags;if(g&2){try{for(var y,S=h.return;S!==null;){if(A3(S)){y=S;break}S=S.return}if(y==null)throw Error(n(160));switch(y.tag){case 27:var A=y.stateNode,k=BN(h);sA(h,k,A);break;case 5:var z=y.stateNode;y.flags&32&&(Wy(z,""),y.flags&=-33);var Z=BN(h);sA(h,Z,z);break;case 3:case 4:var ne=y.stateNode.containerInfo,he=BN(h);_N(h,he,ne);break;default:throw Error(n(161))}}catch(De){xi(h,h.return,De)}h.flags&=-3}g&4096&&(h.flags&=-4097)}function O3(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var g=h;O3(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),h=h.sibling}}function pd(h,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)I3(h,g.alternate,g),g=g.sibling}function pf(h){for(h=h.child;h!==null;){var g=h;switch(g.tag){case 0:case 11:case 14:case 15:Qh(4,g,g.return),pf(g);break;case 1:Hc(g,g.return);var y=g.stateNode;typeof y.componentWillUnmount=="function"&&D3(g,g.return,y),pf(g);break;case 27:rx(g.stateNode);case 26:case 5:Hc(g,g.return),pf(g);break;case 22:g.memoizedState===null&&pf(g);break;case 30:pf(g);break;default:pf(g)}h=h.sibling}}function gd(h,g,y){for(y=y&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var S=g.alternate,A=h,k=g,z=k.flags;switch(k.tag){case 0:case 11:case 15:gd(A,k,y),ZC(4,k);break;case 1:if(gd(A,k,y),S=k,A=S.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(he){xi(S,S.return,he)}if(S=k,A=S.updateQueue,A!==null){var Z=S.stateNode;try{var ne=A.shared.hiddenCallbacks;if(ne!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ne.length;A++)hU(ne[A],Z)}catch(he){xi(S,S.return,he)}}y&&z&64&&w3(k),qC(k,k.return);break;case 27:k3(k);case 26:case 5:gd(A,k,y),y&&S===null&&z&4&&M3(k),qC(k,k.return);break;case 12:gd(A,k,y);break;case 31:gd(A,k,y),y&&z&4&&L3(A,k);break;case 13:gd(A,k,y),y&&z&4&&P3(A,k);break;case 22:k.memoizedState===null&&gd(A,k,y),qC(k,k.return);break;case 30:break;default:gd(A,k,y)}g=g.sibling}}function GN(h,g){var y=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),h=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(h=g.memoizedState.cachePool.pool),h!==y&&(h!=null&&h.refCount++,y!=null&&BC(y))}function VN(h,g){h=null,g.alternate!==null&&(h=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==h&&(g.refCount++,h!=null&&BC(h))}function Zl(h,g,y,S){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)F3(h,g,y,S),g=g.sibling}function F3(h,g,y,S){var A=g.flags;switch(g.tag){case 0:case 11:case 15:Zl(h,g,y,S),A&2048&&ZC(9,g);break;case 1:Zl(h,g,y,S);break;case 3:Zl(h,g,y,S),A&2048&&(h=null,g.alternate!==null&&(h=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==h&&(g.refCount++,h!=null&&BC(h)));break;case 12:if(A&2048){Zl(h,g,y,S),h=g.stateNode;try{var k=g.memoizedProps,z=k.id,Z=k.onPostCommit;typeof Z=="function"&&Z(z,g.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(ne){xi(g,g.return,ne)}}else Zl(h,g,y,S);break;case 31:Zl(h,g,y,S);break;case 13:Zl(h,g,y,S);break;case 23:break;case 22:k=g.stateNode,z=g.alternate,g.memoizedState!==null?k._visibility&2?Zl(h,g,y,S):QC(h,g):k._visibility&2?Zl(h,g,y,S):(k._visibility|=2,cv(h,g,y,S,(g.subtreeFlags&10256)!==0||!1)),A&2048&&GN(z,g);break;case 24:Zl(h,g,y,S),A&2048&&VN(g.alternate,g);break;default:Zl(h,g,y,S)}}function cv(h,g,y,S,A){for(A=A&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var k=h,z=g,Z=y,ne=S,he=z.flags;switch(z.tag){case 0:case 11:case 15:cv(k,z,Z,ne,A),ZC(8,z);break;case 23:break;case 22:var De=z.stateNode;z.memoizedState!==null?De._visibility&2?cv(k,z,Z,ne,A):QC(k,z):(De._visibility|=2,cv(k,z,Z,ne,A)),A&&he&2048&&GN(z.alternate,z);break;case 24:cv(k,z,Z,ne,A),A&&he&2048&&VN(z.alternate,z);break;default:cv(k,z,Z,ne,A)}g=g.sibling}}function QC(h,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var y=h,S=g,A=S.flags;switch(S.tag){case 22:QC(y,S),A&2048&&GN(S.alternate,S);break;case 24:QC(y,S),A&2048&&VN(S.alternate,S);break;default:QC(y,S)}g=g.sibling}}var JC=8192;function uv(h,g,y){if(h.subtreeFlags&JC)for(h=h.child;h!==null;)B3(h,g,y),h=h.sibling}function B3(h,g,y){switch(h.tag){case 26:uv(h,g,y),h.flags&JC&&h.memoizedState!==null&&tpe(y,Xl,h.memoizedState,h.memoizedProps);break;case 5:uv(h,g,y);break;case 3:case 4:var S=Xl;Xl=bA(h.stateNode.containerInfo),uv(h,g,y),Xl=S;break;case 22:h.memoizedState===null&&(S=h.alternate,S!==null&&S.memoizedState!==null?(S=JC,JC=16777216,uv(h,g,y),JC=S):uv(h,g,y));break;default:uv(h,g,y)}}function _3(h){var g=h.alternate;if(g!==null&&(h=g.child,h!==null)){g.child=null;do g=h.sibling,h.sibling=null,h=g;while(h!==null)}}function ex(h){var g=h.deletions;if((h.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var S=g[y];_s=S,G3(S,h)}_3(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)z3(h),h=h.sibling}function z3(h){switch(h.tag){case 0:case 11:case 15:ex(h),h.flags&2048&&Qh(9,h,h.return);break;case 3:ex(h);break;case 12:ex(h);break;case 22:var g=h.stateNode;h.memoizedState!==null&&g._visibility&2&&(h.return===null||h.return.tag!==13)?(g._visibility&=-3,rA(h)):ex(h);break;default:ex(h)}}function rA(h){var g=h.deletions;if((h.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var S=g[y];_s=S,G3(S,h)}_3(h)}for(h=h.child;h!==null;){switch(g=h,g.tag){case 0:case 11:case 15:Qh(8,g,g.return),rA(g);break;case 22:y=g.stateNode,y._visibility&2&&(y._visibility&=-3,rA(g));break;default:rA(g)}h=h.sibling}}function G3(h,g){for(;_s!==null;){var y=_s;switch(y.tag){case 0:case 11:case 15:Qh(8,y,g);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:BC(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,_s=S;else e:for(y=h;_s!==null;){S=_s;var A=S.sibling,k=S.return;if(R3(S),S===y){_s=null;break e}if(A!==null){A.return=k,_s=A;break e}_s=k}}}var mhe={getCacheForType:function(h){var g=eo(cs),y=g.data.get(h);return y===void 0&&(y=h(),g.data.set(h,y)),y},cacheSignal:function(){return eo(cs).controller.signal}},yhe=typeof WeakMap=="function"?WeakMap:Map,pi=0,Oi=null,_t=null,Wt=0,Ci=0,la=null,Jh=!1,dv=!1,HN=!1,fd=0,Tn=0,ep=0,gf=0,WN=0,ca=0,hv=0,tx=null,Lr=null,jN=!1,aA=0,V3=0,lA=1/0,cA=null,tp=null,Ms=0,ip=null,pv=null,md=0,UN=0,$N=null,H3=null,ix=0,KN=null;function ua(){return(pi&2)!==0&&Wt!==0?Wt&-Wt:G.T!==null?JN():s4()}function W3(){if(ca===0)if((Wt&536870912)===0||Zt){var h=yM;yM<<=1,(yM&3932160)===0&&(yM=262144),ca=h}else ca=536870912;return h=ra.current,h!==null&&(h.flags|=32),ca}function Pr(h,g,y){(h===Oi&&(Ci===2||Ci===9)||h.cancelPendingCommit!==null)&&(gv(h,0),np(h,Wt,ca,!1)),wC(h,y),((pi&2)===0||h!==Oi)&&(h===Oi&&((pi&2)===0&&(gf|=y),Tn===4&&np(h,Wt,ca,!1)),Wc(h))}function j3(h,g,y){if((pi&6)!==0)throw Error(n(327));var S=!y&&(g&127)===0&&(g&h.expiredLanes)===0||xC(h,g),A=S?She(h,g):XN(h,g,!0),k=S;do{if(A===0){dv&&!S&&np(h,g,0,!1);break}else{if(y=h.current.alternate,k&&!vhe(y)){A=XN(h,g,!1),k=!1;continue}if(A===2){if(k=g,h.errorRecoveryDisabledLanes&k)var z=0;else z=h.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){g=z;e:{var Z=h;A=tx;var ne=Z.current.memoizedState.isDehydrated;if(ne&&(gv(Z,z).flags|=256),z=XN(Z,z,!1),z!==2){if(HN&&!ne){Z.errorRecoveryDisabledLanes|=k,gf|=k,A=4;break e}k=Lr,Lr=A,k!==null&&(Lr===null?Lr=k:Lr.push.apply(Lr,k))}A=z}if(k=!1,A!==2)continue}}if(A===1){gv(h,0),np(h,g,0,!0);break}e:{switch(S=h,k=A,k){case 0:case 1:throw Error(n(345));case 4:if((g&4194048)!==g)break;case 6:np(S,g,ca,!Jh);break e;case 2:Lr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((g&62914560)===g&&(A=aA+300-gt(),10<A)){if(np(S,g,ca,!Jh),bM(S,0,!0)!==0)break e;md=g,S.timeoutHandle=C$(U3.bind(null,S,y,Lr,cA,jN,g,ca,gf,hv,Jh,k,"Throttled",-0,0),A);break e}U3(S,y,Lr,cA,jN,g,ca,gf,hv,Jh,k,null,-0,0)}}break}while(!0);Wc(h)}function U3(h,g,y,S,A,k,z,Z,ne,he,De,Te,ye,Ce){if(h.timeoutHandle=-1,Te=g.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:td},B3(g,k,Te);var et=(k&62914560)===k?aA-gt():(k&4194048)===k?V3-gt():0;if(et=ipe(Te,et),et!==null){md=k,h.cancelPendingCommit=et(J3.bind(null,h,g,k,y,S,A,z,Z,ne,De,Te,null,ye,Ce)),np(h,k,z,!he);return}}J3(h,g,k,y,S,A,z,Z,ne)}function vhe(h){for(var g=h;;){var y=g.tag;if((y===0||y===11||y===15)&&g.flags&16384&&(y=g.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var A=y[S],k=A.getSnapshot;A=A.value;try{if(!sa(k(),A))return!1}catch{return!1}}if(y=g.child,g.subtreeFlags&16384&&y!==null)y.return=g,g=y;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function np(h,g,y,S){g&=~WN,g&=~gf,h.suspendedLanes|=g,h.pingedLanes&=~g,S&&(h.warmLanes|=g),S=h.expirationTimes;for(var A=g;0<A;){var k=31-na(A),z=1<<k;S[k]=-1,A&=~z}y!==0&&t4(h,y,g)}function uA(){return(pi&6)===0?(nx(0),!1):!0}function YN(){if(_t!==null){if(Ci===0)var h=_t.return;else h=_t,od=of=null,uN(h),sv=null,zC=0,h=_t;for(;h!==null;)x3(h.alternate,h),h=h.return;_t=null}}function gv(h,g){var y=h.timeoutHandle;y!==-1&&(h.timeoutHandle=-1,_he(y)),y=h.cancelPendingCommit,y!==null&&(h.cancelPendingCommit=null,y()),md=0,YN(),Oi=h,_t=y=nd(h.current,null),Wt=g,Ci=0,la=null,Jh=!1,dv=xC(h,g),HN=!1,hv=ca=WN=gf=ep=Tn=0,Lr=tx=null,jN=!1,(g&8)!==0&&(g|=g&32);var S=h.entangledLanes;if(S!==0)for(h=h.entanglements,S&=g;0<S;){var A=31-na(S),k=1<<A;g|=h[A],S&=~k}return fd=g,EM(),y}function $3(h,g){It=null,G.H=KC,g===nv||g===zM?(g=lU(),Ci=3):g===QP?(g=lU(),Ci=4):Ci=g===AN?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,la=g,_t===null&&(Tn=1,JM(h,$a(g,h.current)))}function K3(){var h=ra.current;return h===null?!0:(Wt&4194048)===Wt?Za===null:(Wt&62914560)===Wt||(Wt&536870912)!==0?h===Za:!1}function Y3(){var h=G.H;return G.H=KC,h===null?KC:h}function X3(){var h=G.A;return G.A=mhe,h}function dA(){Tn=4,Jh||(Wt&4194048)!==Wt&&ra.current!==null||(dv=!0),(ep&134217727)===0&&(gf&134217727)===0||Oi===null||np(Oi,Wt,ca,!1)}function XN(h,g,y){var S=pi;pi|=2;var A=Y3(),k=X3();(Oi!==h||Wt!==g)&&(cA=null,gv(h,g)),g=!1;var z=Tn;e:do try{if(Ci!==0&&_t!==null){var Z=_t,ne=la;switch(Ci){case 8:YN(),z=6;break e;case 3:case 2:case 9:case 6:ra.current===null&&(g=!0);var he=Ci;if(Ci=0,la=null,fv(h,Z,ne,he),y&&dv){z=0;break e}break;default:he=Ci,Ci=0,la=null,fv(h,Z,ne,he)}}bhe(),z=Tn;break}catch(De){$3(h,De)}while(!0);return g&&h.shellSuspendCounter++,od=of=null,pi=S,G.H=A,G.A=k,_t===null&&(Oi=null,Wt=0,EM()),z}function bhe(){for(;_t!==null;)Z3(_t)}function She(h,g){var y=pi;pi|=2;var S=Y3(),A=X3();Oi!==h||Wt!==g?(cA=null,lA=gt()+500,gv(h,g)):dv=xC(h,g);e:do try{if(Ci!==0&&_t!==null){g=_t;var k=la;t:switch(Ci){case 1:Ci=0,la=null,fv(h,g,k,1);break;case 2:case 9:if(rU(k)){Ci=0,la=null,q3(g);break}g=function(){Ci!==2&&Ci!==9||Oi!==h||(Ci=7),Wc(h)},k.then(g,g);break e;case 3:Ci=7;break e;case 4:Ci=5;break e;case 7:rU(k)?(Ci=0,la=null,q3(g)):(Ci=0,la=null,fv(h,g,k,7));break;case 5:var z=null;switch(_t.tag){case 26:z=_t.memoizedState;case 5:case 27:var Z=_t;if(z?F$(z):Z.stateNode.complete){Ci=0,la=null;var ne=Z.sibling;if(ne!==null)_t=ne;else{var he=Z.return;he!==null?(_t=he,hA(he)):_t=null}break t}}Ci=0,la=null,fv(h,g,k,5);break;case 6:Ci=0,la=null,fv(h,g,k,6);break;case 8:YN(),Tn=6;break e;default:throw Error(n(462))}}Che();break}catch(De){$3(h,De)}while(!0);return od=of=null,G.H=S,G.A=A,pi=y,_t!==null?0:(Oi=null,Wt=0,EM(),Tn)}function Che(){for(;_t!==null&&!dt();)Z3(_t)}function Z3(h){var g=S3(h.alternate,h,fd);h.memoizedProps=h.pendingProps,g===null?hA(h):_t=g}function q3(h){var g=h,y=g.alternate;switch(g.tag){case 15:case 0:g=g3(y,g,g.pendingProps,g.type,void 0,Wt);break;case 11:g=g3(y,g,g.pendingProps,g.type.render,g.ref,Wt);break;case 5:uN(g);default:x3(y,g),g=_t=X4(g,fd),g=S3(y,g,fd)}h.memoizedProps=h.pendingProps,g===null?hA(h):_t=g}function fv(h,g,y,S){od=of=null,uN(g),sv=null,zC=0;var A=g.return;try{if(che(h,A,g,y,Wt)){Tn=1,JM(h,$a(y,h.current)),_t=null;return}}catch(k){if(A!==null)throw _t=A,k;Tn=1,JM(h,$a(y,h.current)),_t=null;return}g.flags&32768?(Zt||S===1?h=!0:dv||(Wt&536870912)!==0?h=!1:(Jh=h=!0,(S===2||S===9||S===3||S===6)&&(S=ra.current,S!==null&&S.tag===13&&(S.flags|=16384))),Q3(g,h)):hA(g)}function hA(h){var g=h;do{if((g.flags&32768)!==0){Q3(g,Jh);return}h=g.return;var y=hhe(g.alternate,g,fd);if(y!==null){_t=y;return}if(g=g.sibling,g!==null){_t=g;return}_t=g=h}while(g!==null);Tn===0&&(Tn=5)}function Q3(h,g){do{var y=phe(h.alternate,h);if(y!==null){y.flags&=32767,_t=y;return}if(y=h.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!g&&(h=h.sibling,h!==null)){_t=h;return}_t=h=y}while(h!==null);Tn=6,_t=null}function J3(h,g,y,S,A,k,z,Z,ne){h.cancelPendingCommit=null;do pA();while(Ms!==0);if((pi&6)!==0)throw Error(n(327));if(g!==null){if(g===h.current)throw Error(n(177));if(k=g.lanes|g.childLanes,k|=BP,ede(h,y,k,z,Z,ne),h===Oi&&(_t=Oi=null,Wt=0),pv=g,ip=h,md=y,UN=k,$N=A,H3=S,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,Mhe(Ht,function(){return s$(),null})):(h.callbackNode=null,h.callbackPriority=0),S=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||S){S=G.T,G.T=null,A=$.p,$.p=2,z=pi,pi|=4;try{ghe(h,g,y)}finally{pi=z,$.p=A,G.T=S}}Ms=1,e$(),t$(),i$()}}function e$(){if(Ms===1){Ms=0;var h=ip,g=pv,y=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||y){y=G.T,G.T=null;var S=$.p;$.p=2;var A=pi;pi|=4;try{N3(g,h);var k=aO,z=G4(h.containerInfo),Z=k.focusedElem,ne=k.selectionRange;if(z!==Z&&Z&&Z.ownerDocument&&z4(Z.ownerDocument.documentElement,Z)){if(ne!==null&&LP(Z)){var he=ne.start,De=ne.end;if(De===void 0&&(De=he),"selectionStart"in Z)Z.selectionStart=he,Z.selectionEnd=Math.min(De,Z.value.length);else{var Te=Z.ownerDocument||document,ye=Te&&Te.defaultView||window;if(ye.getSelection){var Ce=ye.getSelection(),et=Z.textContent.length,mt=Math.min(ne.start,et),Ei=ne.end===void 0?mt:Math.min(ne.end,et);!Ce.extend&&mt>Ei&&(z=Ei,Ei=mt,mt=z);var ce=_4(Z,mt),le=_4(Z,Ei);if(ce&&le&&(Ce.rangeCount!==1||Ce.anchorNode!==ce.node||Ce.anchorOffset!==ce.offset||Ce.focusNode!==le.node||Ce.focusOffset!==le.offset)){var de=Te.createRange();de.setStart(ce.node,ce.offset),Ce.removeAllRanges(),mt>Ei?(Ce.addRange(de),Ce.extend(le.node,le.offset)):(de.setEnd(le.node,le.offset),Ce.addRange(de))}}}}for(Te=[],Ce=Z;Ce=Ce.parentNode;)Ce.nodeType===1&&Te.push({element:Ce,left:Ce.scrollLeft,top:Ce.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<Te.length;Z++){var ke=Te[Z];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}MA=!!rO,aO=rO=null}finally{pi=A,$.p=S,G.T=y}}h.current=g,Ms=2}}function t$(){if(Ms===2){Ms=0;var h=ip,g=pv,y=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||y){y=G.T,G.T=null;var S=$.p;$.p=2;var A=pi;pi|=4;try{I3(h,g.alternate,g)}finally{pi=A,$.p=S,G.T=y}}Ms=3}}function i$(){if(Ms===4||Ms===3){Ms=0,Tt();var h=ip,g=pv,y=md,S=H3;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Ms=5:(Ms=0,pv=ip=null,n$(h,h.pendingLanes));var A=h.pendingLanes;if(A===0&&(tp=null),pP(y),g=g.stateNode,ia&&typeof ia.onCommitFiberRoot=="function")try{ia.onCommitFiberRoot(CC,g,void 0,(g.current.flags&128)===128)}catch{}if(S!==null){g=G.T,A=$.p,$.p=2,G.T=null;try{for(var k=h.onRecoverableError,z=0;z<S.length;z++){var Z=S[z];k(Z.value,{componentStack:Z.stack})}}finally{G.T=g,$.p=A}}(md&3)!==0&&pA(),Wc(h),A=h.pendingLanes,(y&261930)!==0&&(A&42)!==0?h===KN?ix++:(ix=0,KN=h):ix=0,nx(0)}}function n$(h,g){(h.pooledCacheLanes&=g)===0&&(g=h.pooledCache,g!=null&&(h.pooledCache=null,BC(g)))}function pA(){return e$(),t$(),i$(),s$()}function s$(){if(Ms!==5)return!1;var h=ip,g=UN;UN=0;var y=pP(md),S=G.T,A=$.p;try{$.p=32>y?32:y,G.T=null,y=$N,$N=null;var k=ip,z=md;if(Ms=0,pv=ip=null,md=0,(pi&6)!==0)throw Error(n(331));var Z=pi;if(pi|=4,z3(k.current),F3(k,k.current,z,y),pi=Z,nx(0,!1),ia&&typeof ia.onPostCommitFiberRoot=="function")try{ia.onPostCommitFiberRoot(CC,k)}catch{}return!0}finally{$.p=A,G.T=S,n$(h,g)}}function o$(h,g,y){g=$a(y,g),g=MN(h.stateNode,g,2),h=Xh(h,g,2),h!==null&&(wC(h,2),Wc(h))}function xi(h,g,y){if(h.tag===3)o$(h,h,y);else for(;g!==null;){if(g.tag===3){o$(g,h,y);break}else if(g.tag===1){var S=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(tp===null||!tp.has(S))){h=$a(y,h),y=r3(2),S=Xh(g,y,2),S!==null&&(a3(y,S,g,h),wC(S,2),Wc(S));break}}g=g.return}}function ZN(h,g,y){var S=h.pingCache;if(S===null){S=h.pingCache=new yhe;var A=new Set;S.set(g,A)}else A=S.get(g),A===void 0&&(A=new Set,S.set(g,A));A.has(y)||(HN=!0,A.add(y),h=xhe.bind(null,h,g,y),g.then(h,h))}function xhe(h,g,y){var S=h.pingCache;S!==null&&S.delete(g),h.pingedLanes|=h.suspendedLanes&y,h.warmLanes&=~y,Oi===h&&(Wt&y)===y&&(Tn===4||Tn===3&&(Wt&62914560)===Wt&&300>gt()-aA?(pi&2)===0&&gv(h,0):WN|=y,hv===Wt&&(hv=0)),Wc(h)}function r$(h,g){g===0&&(g=e4()),h=tf(h,g),h!==null&&(wC(h,g),Wc(h))}function whe(h){var g=h.memoizedState,y=0;g!==null&&(y=g.retryLane),r$(h,y)}function Dhe(h,g){var y=0;switch(h.tag){case 31:case 13:var S=h.stateNode,A=h.memoizedState;A!==null&&(y=A.retryLane);break;case 19:S=h.stateNode;break;case 22:S=h.stateNode._retryCache;break;default:throw Error(n(314))}S!==null&&S.delete(g),r$(h,y)}function Mhe(h,g){return Oe(h,g)}var gA=null,mv=null,qN=!1,fA=!1,QN=!1,sp=0;function Wc(h){h!==mv&&h.next===null&&(mv===null?gA=mv=h:mv=mv.next=h),fA=!0,qN||(qN=!0,khe())}function nx(h,g){if(!QN&&fA){QN=!0;do for(var y=!1,S=gA;S!==null;){if(h!==0){var A=S.pendingLanes;if(A===0)var k=0;else{var z=S.suspendedLanes,Z=S.pingedLanes;k=(1<<31-na(42|h)+1)-1,k&=A&~(z&~Z),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(y=!0,u$(S,k))}else k=Wt,k=bM(S,S===Oi?k:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(k&3)===0||xC(S,k)||(y=!0,u$(S,k));S=S.next}while(y);QN=!1}}function Ahe(){a$()}function a$(){fA=qN=!1;var h=0;sp!==0&&Bhe()&&(h=sp);for(var g=gt(),y=null,S=gA;S!==null;){var A=S.next,k=l$(S,g);k===0?(S.next=null,y===null?gA=A:y.next=A,A===null&&(mv=y)):(y=S,(h!==0||(k&3)!==0)&&(fA=!0)),S=A}Ms!==0&&Ms!==5||nx(h),sp!==0&&(sp=0)}function l$(h,g){for(var y=h.suspendedLanes,S=h.pingedLanes,A=h.expirationTimes,k=h.pendingLanes&-62914561;0<k;){var z=31-na(k),Z=1<<z,ne=A[z];ne===-1?((Z&y)===0||(Z&S)!==0)&&(A[z]=Jue(Z,g)):ne<=g&&(h.expiredLanes|=Z),k&=~Z}if(g=Oi,y=Wt,y=bM(h,h===g?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),S=h.callbackNode,y===0||h===g&&(Ci===2||Ci===9)||h.cancelPendingCommit!==null)return S!==null&&S!==null&&Ze(S),h.callbackNode=null,h.callbackPriority=0;if((y&3)===0||xC(h,y)){if(g=y&-y,g===h.callbackPriority)return g;switch(S!==null&&Ze(S),pP(y)){case 2:case 8:y=Ti;break;case 32:y=Ht;break;case 268435456:y=zc;break;default:y=Ht}return S=c$.bind(null,h),y=Oe(y,S),h.callbackPriority=g,h.callbackNode=y,g}return S!==null&&S!==null&&Ze(S),h.callbackPriority=2,h.callbackNode=null,2}function c$(h,g){if(Ms!==0&&Ms!==5)return h.callbackNode=null,h.callbackPriority=0,null;var y=h.callbackNode;if(pA()&&h.callbackNode!==y)return null;var S=Wt;return S=bM(h,h===Oi?S:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),S===0?null:(j3(h,S,g),l$(h,gt()),h.callbackNode!=null&&h.callbackNode===y?c$.bind(null,h):null)}function u$(h,g){if(pA())return null;j3(h,g,!0)}function khe(){zhe(function(){(pi&6)!==0?Oe(Gi,Ahe):a$()})}function JN(){if(sp===0){var h=tv;h===0&&(h=mM,mM<<=1,(mM&261888)===0&&(mM=256)),sp=h}return sp}function d$(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:wM(""+h)}function h$(h,g){var y=g.ownerDocument.createElement("input");return y.name=g.name,y.value=g.value,h.id&&y.setAttribute("form",h.id),g.parentNode.insertBefore(y,g),h=new FormData(h),y.parentNode.removeChild(y),h}function The(h,g,y,S,A){if(g==="submit"&&y&&y.stateNode===A){var k=d$((A[kr]||null).action),z=S.submitter;z&&(g=(g=z[kr]||null)?d$(g.formAction):z.getAttribute("formAction"),g!==null&&(k=g,z=null));var Z=new kM("action","action",null,S,A);h.push({event:Z,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(sp!==0){var ne=z?h$(A,z):new FormData(A);bN(y,{pending:!0,data:ne,method:A.method,action:k},null,ne)}}else typeof k=="function"&&(Z.preventDefault(),ne=z?h$(A,z):new FormData(A),bN(y,{pending:!0,data:ne,method:A.method,action:k},k,ne))},currentTarget:A}]})}}for(var eO=0;eO<FP.length;eO++){var tO=FP[eO],Ihe=tO.toLowerCase(),Rhe=tO[0].toUpperCase()+tO.slice(1);Yl(Ihe,"on"+Rhe)}Yl(W4,"onAnimationEnd"),Yl(j4,"onAnimationIteration"),Yl(U4,"onAnimationStart"),Yl("dblclick","onDoubleClick"),Yl("focusin","onFocus"),Yl("focusout","onBlur"),Yl($de,"onTransitionRun"),Yl(Kde,"onTransitionStart"),Yl(Yde,"onTransitionCancel"),Yl($4,"onTransitionEnd"),Vy("onMouseEnter",["mouseout","mouseover"]),Vy("onMouseLeave",["mouseout","mouseover"]),Vy("onPointerEnter",["pointerout","pointerover"]),Vy("onPointerLeave",["pointerout","pointerover"]),qg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qg("onBeforeInput",["compositionend","keypress","textInput","paste"]),qg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ehe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sx));function p$(h,g){g=(g&4)!==0;for(var y=0;y<h.length;y++){var S=h[y],A=S.event;S=S.listeners;e:{var k=void 0;if(g)for(var z=S.length-1;0<=z;z--){var Z=S[z],ne=Z.instance,he=Z.currentTarget;if(Z=Z.listener,ne!==k&&A.isPropagationStopped())break e;k=Z,A.currentTarget=he;try{k(A)}catch(De){RM(De)}A.currentTarget=null,k=ne}else for(z=0;z<S.length;z++){if(Z=S[z],ne=Z.instance,he=Z.currentTarget,Z=Z.listener,ne!==k&&A.isPropagationStopped())break e;k=Z,A.currentTarget=he;try{k(A)}catch(De){RM(De)}A.currentTarget=null,k=ne}}}}function zt(h,g){var y=g[gP];y===void 0&&(y=g[gP]=new Set);var S=h+"__bubble";y.has(S)||(g$(g,h,2,!1),y.add(S))}function iO(h,g,y){var S=0;g&&(S|=4),g$(y,h,S,g)}var mA="_reactListening"+Math.random().toString(36).slice(2);function nO(h){if(!h[mA]){h[mA]=!0,a4.forEach(function(y){y!=="selectionchange"&&(Ehe.has(y)||iO(y,!1,h),iO(y,!0,h))});var g=h.nodeType===9?h:h.ownerDocument;g===null||g[mA]||(g[mA]=!0,iO("selectionchange",!1,g))}}function g$(h,g,y,S){switch(W$(g)){case 2:var A=ope;break;case 8:A=rpe;break;default:A=vO}y=A.bind(null,g,y,h),A=void 0,!wP||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(A=!0),S?A!==void 0?h.addEventListener(g,y,{capture:!0,passive:A}):h.addEventListener(g,y,!0):A!==void 0?h.addEventListener(g,y,{passive:A}):h.addEventListener(g,y,!1)}function sO(h,g,y,S,A){var k=S;if((g&1)===0&&(g&2)===0&&S!==null)e:for(;;){if(S===null)return;var z=S.tag;if(z===3||z===4){var Z=S.stateNode.containerInfo;if(Z===A)break;if(z===4)for(z=S.return;z!==null;){var ne=z.tag;if((ne===3||ne===4)&&z.stateNode.containerInfo===A)return;z=z.return}for(;Z!==null;){if(z=_y(Z),z===null)return;if(ne=z.tag,ne===5||ne===6||ne===26||ne===27){S=k=z;continue e}Z=Z.parentNode}}S=S.return}b4(function(){var he=k,De=CP(y),Te=[];e:{var ye=K4.get(h);if(ye!==void 0){var Ce=kM,et=h;switch(h){case"keypress":if(MM(y)===0)break e;case"keydown":case"keyup":Ce=Dde;break;case"focusin":et="focus",Ce=kP;break;case"focusout":et="blur",Ce=kP;break;case"beforeblur":case"afterblur":Ce=kP;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=x4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=hde;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=kde;break;case W4:case j4:case U4:Ce=fde;break;case $4:Ce=Ide;break;case"scroll":case"scrollend":Ce=ude;break;case"wheel":Ce=Ede;break;case"copy":case"cut":case"paste":Ce=yde;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=D4;break;case"toggle":case"beforetoggle":Ce=Pde}var mt=(g&4)!==0,Ei=!mt&&(h==="scroll"||h==="scrollend"),ce=mt?ye!==null?ye+"Capture":null:ye;mt=[];for(var le=he,de;le!==null;){var ke=le;if(de=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||de===null||ce===null||(ke=AC(le,ce),ke!=null&&mt.push(ox(le,ke,de))),Ei)break;le=le.return}0<mt.length&&(ye=new Ce(ye,et,null,y,De),Te.push({event:ye,listeners:mt}))}}if((g&7)===0){e:{if(ye=h==="mouseover"||h==="pointerover",Ce=h==="mouseout"||h==="pointerout",ye&&y!==SP&&(et=y.relatedTarget||y.fromElement)&&(_y(et)||et[By]))break e;if((Ce||ye)&&(ye=De.window===De?De:(ye=De.ownerDocument)?ye.defaultView||ye.parentWindow:window,Ce?(et=y.relatedTarget||y.toElement,Ce=he,et=et?_y(et):null,et!==null&&(Ei=o(et),mt=et.tag,et!==Ei||mt!==5&&mt!==27&&mt!==6)&&(et=null)):(Ce=null,et=he),Ce!==et)){if(mt=x4,ke="onMouseLeave",ce="onMouseEnter",le="mouse",(h==="pointerout"||h==="pointerover")&&(mt=D4,ke="onPointerLeave",ce="onPointerEnter",le="pointer"),Ei=Ce==null?ye:MC(Ce),de=et==null?ye:MC(et),ye=new mt(ke,le+"leave",Ce,y,De),ye.target=Ei,ye.relatedTarget=de,ke=null,_y(De)===he&&(mt=new mt(ce,le+"enter",et,y,De),mt.target=de,mt.relatedTarget=Ei,ke=mt),Ei=ke,Ce&&et)t:{for(mt=Lhe,ce=Ce,le=et,de=0,ke=ce;ke;ke=mt(ke))de++;ke=0;for(var ut=le;ut;ut=mt(ut))ke++;for(;0<de-ke;)ce=mt(ce),de--;for(;0<ke-de;)le=mt(le),ke--;for(;de--;){if(ce===le||le!==null&&ce===le.alternate){mt=ce;break t}ce=mt(ce),le=mt(le)}mt=null}else mt=null;Ce!==null&&f$(Te,ye,Ce,mt,!1),et!==null&&Ei!==null&&f$(Te,Ei,et,mt,!0)}}e:{if(ye=he?MC(he):window,Ce=ye.nodeName&&ye.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&ye.type==="file")var ai=L4;else if(R4(ye))if(P4)ai=Wde;else{ai=Vde;var st=Gde}else Ce=ye.nodeName,!Ce||Ce.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?he&&bP(he.elementType)&&(ai=L4):ai=Hde;if(ai&&(ai=ai(h,he))){E4(Te,ai,y,De);break e}st&&st(h,ye,he),h==="focusout"&&he&&ye.type==="number"&&he.memoizedProps.value!=null&&vP(ye,"number",ye.value)}switch(st=he?MC(he):window,h){case"focusin":(R4(st)||st.contentEditable==="true")&&(Ky=st,PP=he,NC=null);break;case"focusout":NC=PP=Ky=null;break;case"mousedown":NP=!0;break;case"contextmenu":case"mouseup":case"dragend":NP=!1,V4(Te,y,De);break;case"selectionchange":if(Ude)break;case"keydown":case"keyup":V4(Te,y,De)}var Et;if(IP)e:{switch(h){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else $y?T4(h,y)&&(jt="onCompositionEnd"):h==="keydown"&&y.keyCode===229&&(jt="onCompositionStart");jt&&(M4&&y.locale!=="ko"&&($y||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&$y&&(Et=S4()):(Hh=De,DP="value"in Hh?Hh.value:Hh.textContent,$y=!0)),st=yA(he,jt),0<st.length&&(jt=new w4(jt,h,null,y,De),Te.push({event:jt,listeners:st}),Et?jt.data=Et:(Et=I4(y),Et!==null&&(jt.data=Et)))),(Et=Ode?Fde(h,y):Bde(h,y))&&(jt=yA(he,"onBeforeInput"),0<jt.length&&(st=new w4("onBeforeInput","beforeinput",null,y,De),Te.push({event:st,listeners:jt}),st.data=Et)),The(Te,h,he,y,De)}p$(Te,g)})}function ox(h,g,y){return{instance:h,listener:g,currentTarget:y}}function yA(h,g){for(var y=g+"Capture",S=[];h!==null;){var A=h,k=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||k===null||(A=AC(h,y),A!=null&&S.unshift(ox(h,A,k)),A=AC(h,g),A!=null&&S.push(ox(h,A,k))),h.tag===3)return S;h=h.return}return[]}function Lhe(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function f$(h,g,y,S,A){for(var k=g._reactName,z=[];y!==null&&y!==S;){var Z=y,ne=Z.alternate,he=Z.stateNode;if(Z=Z.tag,ne!==null&&ne===S)break;Z!==5&&Z!==26&&Z!==27||he===null||(ne=he,A?(he=AC(y,k),he!=null&&z.unshift(ox(y,he,ne))):A||(he=AC(y,k),he!=null&&z.push(ox(y,he,ne)))),y=y.return}z.length!==0&&h.push({event:g,listeners:z})}var Phe=/\r\n?/g,Nhe=/\u0000|\uFFFD/g;function m$(h){return(typeof h=="string"?h:""+h).replace(Phe,`
`).replace(Nhe,"")}function y$(h,g){return g=m$(g),m$(h)===g}function Ri(h,g,y,S,A,k){switch(y){case"children":typeof S=="string"?g==="body"||g==="textarea"&&S===""||Wy(h,S):(typeof S=="number"||typeof S=="bigint")&&g!=="body"&&Wy(h,""+S);break;case"className":CM(h,"class",S);break;case"tabIndex":CM(h,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":CM(h,y,S);break;case"style":y4(h,S,k);break;case"data":if(g!=="object"){CM(h,"data",S);break}case"src":case"href":if(S===""&&(g!=="a"||y!=="href")){h.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){h.removeAttribute(y);break}S=wM(""+S),h.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){h.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(y==="formAction"?(g!=="input"&&Ri(h,g,"name",A.name,A,null),Ri(h,g,"formEncType",A.formEncType,A,null),Ri(h,g,"formMethod",A.formMethod,A,null),Ri(h,g,"formTarget",A.formTarget,A,null)):(Ri(h,g,"encType",A.encType,A,null),Ri(h,g,"method",A.method,A,null),Ri(h,g,"target",A.target,A,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){h.removeAttribute(y);break}S=wM(""+S),h.setAttribute(y,S);break;case"onClick":S!=null&&(h.onclick=td);break;case"onScroll":S!=null&&zt("scroll",h);break;case"onScrollEnd":S!=null&&zt("scrollend",h);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(n(61));if(y=S.__html,y!=null){if(A.children!=null)throw Error(n(60));h.innerHTML=y}}break;case"multiple":h.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":h.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){h.removeAttribute("xlink:href");break}y=wM(""+S),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?h.setAttribute(y,""+S):h.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?h.setAttribute(y,""):h.removeAttribute(y);break;case"capture":case"download":S===!0?h.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?h.setAttribute(y,S):h.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?h.setAttribute(y,S):h.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?h.removeAttribute(y):h.setAttribute(y,S);break;case"popover":zt("beforetoggle",h),zt("toggle",h),SM(h,"popover",S);break;case"xlinkActuate":ed(h,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":ed(h,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":ed(h,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":ed(h,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":ed(h,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":ed(h,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":ed(h,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":ed(h,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":ed(h,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":SM(h,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=lde.get(y)||y,SM(h,y,S))}}function oO(h,g,y,S,A,k){switch(y){case"style":y4(h,S,k);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(n(61));if(y=S.__html,y!=null){if(A.children!=null)throw Error(n(60));h.innerHTML=y}}break;case"children":typeof S=="string"?Wy(h,S):(typeof S=="number"||typeof S=="bigint")&&Wy(h,""+S);break;case"onScroll":S!=null&&zt("scroll",h);break;case"onScrollEnd":S!=null&&zt("scrollend",h);break;case"onClick":S!=null&&(h.onclick=td);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!l4.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(A=y.endsWith("Capture"),g=y.slice(2,A?y.length-7:void 0),k=h[kr]||null,k=k!=null?k[y]:null,typeof k=="function"&&h.removeEventListener(g,k,A),typeof S=="function")){typeof k!="function"&&k!==null&&(y in h?h[y]=null:h.hasAttribute(y)&&h.removeAttribute(y)),h.addEventListener(g,S,A);break e}y in h?h[y]=S:S===!0?h.setAttribute(y,""):SM(h,y,S)}}}function io(h,g,y){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",h),zt("load",h);var S=!1,A=!1,k;for(k in y)if(y.hasOwnProperty(k)){var z=y[k];if(z!=null)switch(k){case"src":S=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,g));default:Ri(h,g,k,z,y,null)}}A&&Ri(h,g,"srcSet",y.srcSet,y,null),S&&Ri(h,g,"src",y.src,y,null);return;case"input":zt("invalid",h);var Z=k=z=A=null,ne=null,he=null;for(S in y)if(y.hasOwnProperty(S)){var De=y[S];if(De!=null)switch(S){case"name":A=De;break;case"type":z=De;break;case"checked":ne=De;break;case"defaultChecked":he=De;break;case"value":k=De;break;case"defaultValue":Z=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(n(137,g));break;default:Ri(h,g,S,De,y,null)}}p4(h,k,Z,ne,he,z,A,!1);return;case"select":zt("invalid",h),S=z=k=null;for(A in y)if(y.hasOwnProperty(A)&&(Z=y[A],Z!=null))switch(A){case"value":k=Z;break;case"defaultValue":z=Z;break;case"multiple":S=Z;default:Ri(h,g,A,Z,y,null)}g=k,y=z,h.multiple=!!S,g!=null?Hy(h,!!S,g,!1):y!=null&&Hy(h,!!S,y,!0);return;case"textarea":zt("invalid",h),k=A=S=null;for(z in y)if(y.hasOwnProperty(z)&&(Z=y[z],Z!=null))switch(z){case"value":S=Z;break;case"defaultValue":A=Z;break;case"children":k=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(91));break;default:Ri(h,g,z,Z,y,null)}f4(h,S,A,k);return;case"option":for(ne in y)if(y.hasOwnProperty(ne)&&(S=y[ne],S!=null))switch(ne){case"selected":h.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:Ri(h,g,ne,S,y,null)}return;case"dialog":zt("beforetoggle",h),zt("toggle",h),zt("cancel",h),zt("close",h);break;case"iframe":case"object":zt("load",h);break;case"video":case"audio":for(S=0;S<sx.length;S++)zt(sx[S],h);break;case"image":zt("error",h),zt("load",h);break;case"details":zt("toggle",h);break;case"embed":case"source":case"link":zt("error",h),zt("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in y)if(y.hasOwnProperty(he)&&(S=y[he],S!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,g));default:Ri(h,g,he,S,y,null)}return;default:if(bP(g)){for(De in y)y.hasOwnProperty(De)&&(S=y[De],S!==void 0&&oO(h,g,De,S,y,void 0));return}}for(Z in y)y.hasOwnProperty(Z)&&(S=y[Z],S!=null&&Ri(h,g,Z,S,y,null))}function Ohe(h,g,y,S){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,k=null,z=null,Z=null,ne=null,he=null,De=null;for(Ce in y){var Te=y[Ce];if(y.hasOwnProperty(Ce)&&Te!=null)switch(Ce){case"checked":break;case"value":break;case"defaultValue":ne=Te;default:S.hasOwnProperty(Ce)||Ri(h,g,Ce,null,S,Te)}}for(var ye in S){var Ce=S[ye];if(Te=y[ye],S.hasOwnProperty(ye)&&(Ce!=null||Te!=null))switch(ye){case"type":k=Ce;break;case"name":A=Ce;break;case"checked":he=Ce;break;case"defaultChecked":De=Ce;break;case"value":z=Ce;break;case"defaultValue":Z=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(n(137,g));break;default:Ce!==Te&&Ri(h,g,ye,Ce,S,Te)}}yP(h,z,Z,ne,he,De,k,A);return;case"select":Ce=z=Z=ye=null;for(k in y)if(ne=y[k],y.hasOwnProperty(k)&&ne!=null)switch(k){case"value":break;case"multiple":Ce=ne;default:S.hasOwnProperty(k)||Ri(h,g,k,null,S,ne)}for(A in S)if(k=S[A],ne=y[A],S.hasOwnProperty(A)&&(k!=null||ne!=null))switch(A){case"value":ye=k;break;case"defaultValue":Z=k;break;case"multiple":z=k;default:k!==ne&&Ri(h,g,A,k,S,ne)}g=Z,y=z,S=Ce,ye!=null?Hy(h,!!y,ye,!1):!!S!=!!y&&(g!=null?Hy(h,!!y,g,!0):Hy(h,!!y,y?[]:"",!1));return;case"textarea":Ce=ye=null;for(Z in y)if(A=y[Z],y.hasOwnProperty(Z)&&A!=null&&!S.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:Ri(h,g,Z,null,S,A)}for(z in S)if(A=S[z],k=y[z],S.hasOwnProperty(z)&&(A!=null||k!=null))switch(z){case"value":ye=A;break;case"defaultValue":Ce=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:A!==k&&Ri(h,g,z,A,S,k)}g4(h,ye,Ce);return;case"option":for(var et in y)if(ye=y[et],y.hasOwnProperty(et)&&ye!=null&&!S.hasOwnProperty(et))switch(et){case"selected":h.selected=!1;break;default:Ri(h,g,et,null,S,ye)}for(ne in S)if(ye=S[ne],Ce=y[ne],S.hasOwnProperty(ne)&&ye!==Ce&&(ye!=null||Ce!=null))switch(ne){case"selected":h.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:Ri(h,g,ne,ye,S,Ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in y)ye=y[mt],y.hasOwnProperty(mt)&&ye!=null&&!S.hasOwnProperty(mt)&&Ri(h,g,mt,null,S,ye);for(he in S)if(ye=S[he],Ce=y[he],S.hasOwnProperty(he)&&ye!==Ce&&(ye!=null||Ce!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(n(137,g));break;default:Ri(h,g,he,ye,S,Ce)}return;default:if(bP(g)){for(var Ei in y)ye=y[Ei],y.hasOwnProperty(Ei)&&ye!==void 0&&!S.hasOwnProperty(Ei)&&oO(h,g,Ei,void 0,S,ye);for(De in S)ye=S[De],Ce=y[De],!S.hasOwnProperty(De)||ye===Ce||ye===void 0&&Ce===void 0||oO(h,g,De,ye,S,Ce);return}}for(var ce in y)ye=y[ce],y.hasOwnProperty(ce)&&ye!=null&&!S.hasOwnProperty(ce)&&Ri(h,g,ce,null,S,ye);for(Te in S)ye=S[Te],Ce=y[Te],!S.hasOwnProperty(Te)||ye===Ce||ye==null&&Ce==null||Ri(h,g,Te,ye,S,Ce)}function v$(h){switch(h){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fhe(){if(typeof performance.getEntriesByType=="function"){for(var h=0,g=0,y=performance.getEntriesByType("resource"),S=0;S<y.length;S++){var A=y[S],k=A.transferSize,z=A.initiatorType,Z=A.duration;if(k&&Z&&v$(z)){for(z=0,Z=A.responseEnd,S+=1;S<y.length;S++){var ne=y[S],he=ne.startTime;if(he>Z)break;var De=ne.transferSize,Te=ne.initiatorType;De&&v$(Te)&&(ne=ne.responseEnd,z+=De*(ne<Z?1:(Z-he)/(ne-he)))}if(--S,g+=8*(k+z)/(A.duration/1e3),h++,10<h)break}}if(0<h)return g/h/1e6}return navigator.connection&&(h=navigator.connection.downlink,typeof h=="number")?h:5}var rO=null,aO=null;function vA(h){return h.nodeType===9?h:h.ownerDocument}function b$(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S$(h,g){if(h===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&g==="foreignObject"?0:h}function lO(h,g){return h==="textarea"||h==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var cO=null;function Bhe(){var h=window.event;return h&&h.type==="popstate"?h===cO?!1:(cO=h,!0):(cO=null,!1)}var C$=typeof setTimeout=="function"?setTimeout:void 0,_he=typeof clearTimeout=="function"?clearTimeout:void 0,x$=typeof Promise=="function"?Promise:void 0,zhe=typeof queueMicrotask=="function"?queueMicrotask:typeof x$<"u"?function(h){return x$.resolve(null).then(h).catch(Ghe)}:C$;function Ghe(h){setTimeout(function(){throw h})}function op(h){return h==="head"}function w$(h,g){var y=g,S=0;do{var A=y.nextSibling;if(h.removeChild(y),A&&A.nodeType===8)if(y=A.data,y==="/$"||y==="/&"){if(S===0){h.removeChild(A),Sv(g);return}S--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")S++;else if(y==="html")rx(h.ownerDocument.documentElement);else if(y==="head"){y=h.ownerDocument.head,rx(y);for(var k=y.firstChild;k;){var z=k.nextSibling,Z=k.nodeName;k[DC]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&k.rel.toLowerCase()==="stylesheet"||y.removeChild(k),k=z}}else y==="body"&&rx(h.ownerDocument.body);y=A}while(y);Sv(g)}function D$(h,g){var y=h;h=0;do{var S=y.nextSibling;if(y.nodeType===1?g?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(g?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),S&&S.nodeType===8)if(y=S.data,y==="/$"){if(h===0)break;h--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||h++;y=S}while(y)}function uO(h){var g=h.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var y=g;switch(g=g.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":uO(y),fP(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}h.removeChild(y)}}function Vhe(h,g,y,S){for(;h.nodeType===1;){var A=y;if(h.nodeName.toLowerCase()!==g.toLowerCase()){if(!S&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(S){if(!h[DC])switch(g){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(k=h.getAttribute("rel"),k==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(k!==A.rel||h.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||h.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||h.getAttribute("title")!==(A.title==null?null:A.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(k=h.getAttribute("src"),(k!==(A.src==null?null:A.src)||h.getAttribute("type")!==(A.type==null?null:A.type)||h.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&k&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(g==="input"&&h.type==="hidden"){var k=A.name==null?null:""+A.name;if(A.type==="hidden"&&h.getAttribute("name")===k)return h}else return h;if(h=qa(h.nextSibling),h===null)break}return null}function Hhe(h,g,y){if(g==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!y||(h=qa(h.nextSibling),h===null))return null;return h}function M$(h,g){for(;h.nodeType!==8;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!g||(h=qa(h.nextSibling),h===null))return null;return h}function dO(h){return h.data==="$?"||h.data==="$~"}function hO(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState!=="loading"}function Whe(h,g){var y=h.ownerDocument;if(h.data==="$~")h._reactRetry=g;else if(h.data!=="$?"||y.readyState!=="loading")g();else{var S=function(){g(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),h._reactRetry=S}}function qa(h){for(;h!=null;h=h.nextSibling){var g=h.nodeType;if(g===1||g===3)break;if(g===8){if(g=h.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return h}var pO=null;function A$(h){h=h.nextSibling;for(var g=0;h;){if(h.nodeType===8){var y=h.data;if(y==="/$"||y==="/&"){if(g===0)return qa(h.nextSibling);g--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||g++}h=h.nextSibling}return null}function k$(h){h=h.previousSibling;for(var g=0;h;){if(h.nodeType===8){var y=h.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(g===0)return h;g--}else y!=="/$"&&y!=="/&"||g++}h=h.previousSibling}return null}function T$(h,g,y){switch(g=vA(y),h){case"html":if(h=g.documentElement,!h)throw Error(n(452));return h;case"head":if(h=g.head,!h)throw Error(n(453));return h;case"body":if(h=g.body,!h)throw Error(n(454));return h;default:throw Error(n(451))}}function rx(h){for(var g=h.attributes;g.length;)h.removeAttributeNode(g[0]);fP(h)}var Qa=new Map,I$=new Set;function bA(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var yd=$.d;$.d={f:jhe,r:Uhe,D:$he,C:Khe,L:Yhe,m:Xhe,X:qhe,S:Zhe,M:Qhe};function jhe(){var h=yd.f(),g=uA();return h||g}function Uhe(h){var g=zy(h);g!==null&&g.tag===5&&g.type==="form"?$U(g):yd.r(h)}var yv=typeof document>"u"?null:document;function R$(h,g,y){var S=yv;if(S&&typeof g=="string"&&g){var A=ja(g);A='link[rel="'+h+'"][href="'+A+'"]',typeof y=="string"&&(A+='[crossorigin="'+y+'"]'),I$.has(A)||(I$.add(A),h={rel:h,crossOrigin:y,href:g},S.querySelector(A)===null&&(g=S.createElement("link"),io(g,"link",h),Bs(g),S.head.appendChild(g)))}}function $he(h){yd.D(h),R$("dns-prefetch",h,null)}function Khe(h,g){yd.C(h,g),R$("preconnect",h,g)}function Yhe(h,g,y){yd.L(h,g,y);var S=yv;if(S&&h&&g){var A='link[rel="preload"][as="'+ja(g)+'"]';g==="image"&&y&&y.imageSrcSet?(A+='[imagesrcset="'+ja(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(A+='[imagesizes="'+ja(y.imageSizes)+'"]')):A+='[href="'+ja(h)+'"]';var k=A;switch(g){case"style":k=vv(h);break;case"script":k=bv(h)}Qa.has(k)||(h=d({rel:"preload",href:g==="image"&&y&&y.imageSrcSet?void 0:h,as:g},y),Qa.set(k,h),S.querySelector(A)!==null||g==="style"&&S.querySelector(ax(k))||g==="script"&&S.querySelector(lx(k))||(g=S.createElement("link"),io(g,"link",h),Bs(g),S.head.appendChild(g)))}}function Xhe(h,g){yd.m(h,g);var y=yv;if(y&&h){var S=g&&typeof g.as=="string"?g.as:"script",A='link[rel="modulepreload"][as="'+ja(S)+'"][href="'+ja(h)+'"]',k=A;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=bv(h)}if(!Qa.has(k)&&(h=d({rel:"modulepreload",href:h},g),Qa.set(k,h),y.querySelector(A)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(lx(k)))return}S=y.createElement("link"),io(S,"link",h),Bs(S),y.head.appendChild(S)}}}function Zhe(h,g,y){yd.S(h,g,y);var S=yv;if(S&&h){var A=Gy(S).hoistableStyles,k=vv(h);g=g||"default";var z=A.get(k);if(!z){var Z={loading:0,preload:null};if(z=S.querySelector(ax(k)))Z.loading=5;else{h=d({rel:"stylesheet",href:h,"data-precedence":g},y),(y=Qa.get(k))&&gO(h,y);var ne=z=S.createElement("link");Bs(ne),io(ne,"link",h),ne._p=new Promise(function(he,De){ne.onload=he,ne.onerror=De}),ne.addEventListener("load",function(){Z.loading|=1}),ne.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,SA(z,g,S)}z={type:"stylesheet",instance:z,count:1,state:Z},A.set(k,z)}}}function qhe(h,g){yd.X(h,g);var y=yv;if(y&&h){var S=Gy(y).hoistableScripts,A=bv(h),k=S.get(A);k||(k=y.querySelector(lx(A)),k||(h=d({src:h,async:!0},g),(g=Qa.get(A))&&fO(h,g),k=y.createElement("script"),Bs(k),io(k,"link",h),y.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},S.set(A,k))}}function Qhe(h,g){yd.M(h,g);var y=yv;if(y&&h){var S=Gy(y).hoistableScripts,A=bv(h),k=S.get(A);k||(k=y.querySelector(lx(A)),k||(h=d({src:h,async:!0,type:"module"},g),(g=Qa.get(A))&&fO(h,g),k=y.createElement("script"),Bs(k),io(k,"link",h),y.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},S.set(A,k))}}function E$(h,g,y,S){var A=(A=ae.current)?bA(A):null;if(!A)throw Error(n(446));switch(h){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(g=vv(y.href),y=Gy(A).hoistableStyles,S=y.get(g),S||(S={type:"style",instance:null,count:0,state:null},y.set(g,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){h=vv(y.href);var k=Gy(A).hoistableStyles,z=k.get(h);if(z||(A=A.ownerDocument||A,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(h,z),(k=A.querySelector(ax(h)))&&!k._p&&(z.instance=k,z.state.loading=5),Qa.has(h)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Qa.set(h,y),k||Jhe(A,h,y,z.state))),g&&S===null)throw Error(n(528,""));return z}if(g&&S!==null)throw Error(n(529,""));return null;case"script":return g=y.async,y=y.src,typeof y=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=bv(y),y=Gy(A).hoistableScripts,S=y.get(g),S||(S={type:"script",instance:null,count:0,state:null},y.set(g,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,h))}}function vv(h){return'href="'+ja(h)+'"'}function ax(h){return'link[rel="stylesheet"]['+h+"]"}function L$(h){return d({},h,{"data-precedence":h.precedence,precedence:null})}function Jhe(h,g,y,S){h.querySelector('link[rel="preload"][as="style"]['+g+"]")?S.loading=1:(g=h.createElement("link"),S.preload=g,g.addEventListener("load",function(){return S.loading|=1}),g.addEventListener("error",function(){return S.loading|=2}),io(g,"link",y),Bs(g),h.head.appendChild(g))}function bv(h){return'[src="'+ja(h)+'"]'}function lx(h){return"script[async]"+h}function P$(h,g,y){if(g.count++,g.instance===null)switch(g.type){case"style":var S=h.querySelector('style[data-href~="'+ja(y.href)+'"]');if(S)return g.instance=S,Bs(S),S;var A=d({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(h.ownerDocument||h).createElement("style"),Bs(S),io(S,"style",A),SA(S,y.precedence,h),g.instance=S;case"stylesheet":A=vv(y.href);var k=h.querySelector(ax(A));if(k)return g.state.loading|=4,g.instance=k,Bs(k),k;S=L$(y),(A=Qa.get(A))&&gO(S,A),k=(h.ownerDocument||h).createElement("link"),Bs(k);var z=k;return z._p=new Promise(function(Z,ne){z.onload=Z,z.onerror=ne}),io(k,"link",S),g.state.loading|=4,SA(k,y.precedence,h),g.instance=k;case"script":return k=bv(y.src),(A=h.querySelector(lx(k)))?(g.instance=A,Bs(A),A):(S=y,(A=Qa.get(k))&&(S=d({},y),fO(S,A)),h=h.ownerDocument||h,A=h.createElement("script"),Bs(A),io(A,"link",S),h.head.appendChild(A),g.instance=A);case"void":return null;default:throw Error(n(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(S=g.instance,g.state.loading|=4,SA(S,y.precedence,h));return g.instance}function SA(h,g,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=S.length?S[S.length-1]:null,k=A,z=0;z<S.length;z++){var Z=S[z];if(Z.dataset.precedence===g)k=Z;else if(k!==A)break}k?k.parentNode.insertBefore(h,k.nextSibling):(g=y.nodeType===9?y.head:y,g.insertBefore(h,g.firstChild))}function gO(h,g){h.crossOrigin==null&&(h.crossOrigin=g.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=g.referrerPolicy),h.title==null&&(h.title=g.title)}function fO(h,g){h.crossOrigin==null&&(h.crossOrigin=g.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=g.referrerPolicy),h.integrity==null&&(h.integrity=g.integrity)}var CA=null;function N$(h,g,y){if(CA===null){var S=new Map,A=CA=new Map;A.set(y,S)}else A=CA,S=A.get(y),S||(S=new Map,A.set(y,S));if(S.has(h))return S;for(S.set(h,null),y=y.getElementsByTagName(h),A=0;A<y.length;A++){var k=y[A];if(!(k[DC]||k[Qs]||h==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var z=k.getAttribute(g)||"";z=h+z;var Z=S.get(z);Z?Z.push(k):S.set(z,[k])}}return S}function O$(h,g,y){h=h.ownerDocument||h,h.head.insertBefore(y,g==="title"?h.querySelector("head > title"):null)}function epe(h,g,y){if(y===1||g.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;switch(g.rel){case"stylesheet":return h=g.disabled,typeof g.precedence=="string"&&h==null;default:return!0}case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function F$(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}function tpe(h,g,y,S){if(y.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var A=vv(S.href),k=g.querySelector(ax(A));if(k){g=k._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(h.count++,h=xA.bind(h),g.then(h,h)),y.state.loading|=4,y.instance=k,Bs(k);return}k=g.ownerDocument||g,S=L$(S),(A=Qa.get(A))&&gO(S,A),k=k.createElement("link"),Bs(k);var z=k;z._p=new Promise(function(Z,ne){z.onload=Z,z.onerror=ne}),io(k,"link",S),y.instance=k}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(y,g),(g=y.state.preload)&&(y.state.loading&3)===0&&(h.count++,y=xA.bind(h),g.addEventListener("load",y),g.addEventListener("error",y))}}var mO=0;function ipe(h,g){return h.stylesheets&&h.count===0&&DA(h,h.stylesheets),0<h.count||0<h.imgCount?function(y){var S=setTimeout(function(){if(h.stylesheets&&DA(h,h.stylesheets),h.unsuspend){var k=h.unsuspend;h.unsuspend=null,k()}},6e4+g);0<h.imgBytes&&mO===0&&(mO=62500*Fhe());var A=setTimeout(function(){if(h.waitingForImages=!1,h.count===0&&(h.stylesheets&&DA(h,h.stylesheets),h.unsuspend)){var k=h.unsuspend;h.unsuspend=null,k()}},(h.imgBytes>mO?50:800)+g);return h.unsuspend=y,function(){h.unsuspend=null,clearTimeout(S),clearTimeout(A)}}:null}function xA(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)DA(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var wA=null;function DA(h,g){h.stylesheets=null,h.unsuspend!==null&&(h.count++,wA=new Map,g.forEach(npe,h),wA=null,xA.call(h))}function npe(h,g){if(!(g.state.loading&4)){var y=wA.get(h);if(y)var S=y.get(null);else{y=new Map,wA.set(h,y);for(var A=h.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<A.length;k++){var z=A[k];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(y.set(z.dataset.precedence,z),S=z)}S&&y.set(null,S)}A=g.instance,z=A.getAttribute("data-precedence"),k=y.get(z)||S,k===S&&y.set(null,A),y.set(z,A),this.count++,S=xA.bind(this),A.addEventListener("load",S),A.addEventListener("error",S),k?k.parentNode.insertBefore(A,k.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(A,h.firstChild)),g.state.loading|=4}}var cx={$$typeof:w,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function spe(h,g,y,S,A,k,z,Z,ne){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dP(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dP(0),this.hiddenUpdates=dP(null),this.identifierPrefix=S,this.onUncaughtError=A,this.onCaughtError=k,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function B$(h,g,y,S,A,k,z,Z,ne,he,De,Te){return h=new spe(h,g,y,z,ne,he,De,Te,Z),g=1,k===!0&&(g|=24),k=oa(3,null,null,g),h.current=k,k.stateNode=h,g=XP(),g.refCount++,h.pooledCache=g,g.refCount++,k.memoizedState={element:S,isDehydrated:y,cache:g},JP(k),h}function _$(h){return h?(h=Zy,h):Zy}function z$(h,g,y,S,A,k){A=_$(A),S.context===null?S.context=A:S.pendingContext=A,S=Yh(g),S.payload={element:y},k=k===void 0?null:k,k!==null&&(S.callback=k),y=Xh(h,S,g),y!==null&&(Pr(y,h,g),VC(y,h,g))}function G$(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var y=h.retryLane;h.retryLane=y!==0&&y<g?y:g}}function yO(h,g){G$(h,g),(h=h.alternate)&&G$(h,g)}function V$(h){if(h.tag===13||h.tag===31){var g=tf(h,67108864);g!==null&&Pr(g,h,67108864),yO(h,67108864)}}function H$(h){if(h.tag===13||h.tag===31){var g=ua();g=hP(g);var y=tf(h,g);y!==null&&Pr(y,h,g),yO(h,g)}}var MA=!0;function ope(h,g,y,S){var A=G.T;G.T=null;var k=$.p;try{$.p=2,vO(h,g,y,S)}finally{$.p=k,G.T=A}}function rpe(h,g,y,S){var A=G.T;G.T=null;var k=$.p;try{$.p=8,vO(h,g,y,S)}finally{$.p=k,G.T=A}}function vO(h,g,y,S){if(MA){var A=bO(S);if(A===null)sO(h,g,S,AA,y),j$(h,S);else if(lpe(A,h,g,y,S))S.stopPropagation();else if(j$(h,S),g&4&&-1<ape.indexOf(h)){for(;A!==null;){var k=zy(A);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var z=Zg(k.pendingLanes);if(z!==0){var Z=k;for(Z.pendingLanes|=2,Z.entangledLanes|=2;z;){var ne=1<<31-na(z);Z.entanglements[1]|=ne,z&=~ne}Wc(k),(pi&6)===0&&(lA=gt()+500,nx(0))}}break;case 31:case 13:Z=tf(k,2),Z!==null&&Pr(Z,k,2),uA(),yO(k,2)}if(k=bO(S),k===null&&sO(h,g,S,AA,y),k===A)break;A=k}A!==null&&S.stopPropagation()}else sO(h,g,S,null,y)}}function bO(h){return h=CP(h),SO(h)}var AA=null;function SO(h){if(AA=null,h=_y(h),h!==null){var g=o(h);if(g===null)h=null;else{var y=g.tag;if(y===13){if(h=r(g),h!==null)return h;h=null}else if(y===31){if(h=a(g),h!==null)return h;h=null}else if(y===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;h=null}else g!==h&&(h=null)}}return AA=h,null}function W$(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lt()){case Gi:return 2;case Ti:return 8;case Ht:case Hi:return 32;case zc:return 268435456;default:return 32}default:return 32}}var CO=!1,rp=null,ap=null,lp=null,ux=new Map,dx=new Map,cp=[],ape="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function j$(h,g){switch(h){case"focusin":case"focusout":rp=null;break;case"dragenter":case"dragleave":ap=null;break;case"mouseover":case"mouseout":lp=null;break;case"pointerover":case"pointerout":ux.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":dx.delete(g.pointerId)}}function hx(h,g,y,S,A,k){return h===null||h.nativeEvent!==k?(h={blockedOn:g,domEventName:y,eventSystemFlags:S,nativeEvent:k,targetContainers:[A]},g!==null&&(g=zy(g),g!==null&&V$(g)),h):(h.eventSystemFlags|=S,g=h.targetContainers,A!==null&&g.indexOf(A)===-1&&g.push(A),h)}function lpe(h,g,y,S,A){switch(g){case"focusin":return rp=hx(rp,h,g,y,S,A),!0;case"dragenter":return ap=hx(ap,h,g,y,S,A),!0;case"mouseover":return lp=hx(lp,h,g,y,S,A),!0;case"pointerover":var k=A.pointerId;return ux.set(k,hx(ux.get(k)||null,h,g,y,S,A)),!0;case"gotpointercapture":return k=A.pointerId,dx.set(k,hx(dx.get(k)||null,h,g,y,S,A)),!0}return!1}function U$(h){var g=_y(h.target);if(g!==null){var y=o(g);if(y!==null){if(g=y.tag,g===13){if(g=r(y),g!==null){h.blockedOn=g,o4(h.priority,function(){H$(y)});return}}else if(g===31){if(g=a(y),g!==null){h.blockedOn=g,o4(h.priority,function(){H$(y)});return}}else if(g===3&&y.stateNode.current.memoizedState.isDehydrated){h.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}h.blockedOn=null}function kA(h){if(h.blockedOn!==null)return!1;for(var g=h.targetContainers;0<g.length;){var y=bO(h.nativeEvent);if(y===null){y=h.nativeEvent;var S=new y.constructor(y.type,y);SP=S,y.target.dispatchEvent(S),SP=null}else return g=zy(y),g!==null&&V$(g),h.blockedOn=y,!1;g.shift()}return!0}function $$(h,g,y){kA(h)&&y.delete(g)}function cpe(){CO=!1,rp!==null&&kA(rp)&&(rp=null),ap!==null&&kA(ap)&&(ap=null),lp!==null&&kA(lp)&&(lp=null),ux.forEach($$),dx.forEach($$)}function TA(h,g){h.blockedOn===g&&(h.blockedOn=null,CO||(CO=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,cpe)))}var IA=null;function K$(h){IA!==h&&(IA=h,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){IA===h&&(IA=null);for(var g=0;g<h.length;g+=3){var y=h[g],S=h[g+1],A=h[g+2];if(typeof S!="function"){if(SO(S||y)===null)continue;break}var k=zy(y);k!==null&&(h.splice(g,3),g-=3,bN(k,{pending:!0,data:A,method:y.method,action:S},S,A))}}))}function Sv(h){function g(ne){return TA(ne,h)}rp!==null&&TA(rp,h),ap!==null&&TA(ap,h),lp!==null&&TA(lp,h),ux.forEach(g),dx.forEach(g);for(var y=0;y<cp.length;y++){var S=cp[y];S.blockedOn===h&&(S.blockedOn=null)}for(;0<cp.length&&(y=cp[0],y.blockedOn===null);)U$(y),y.blockedOn===null&&cp.shift();if(y=(h.ownerDocument||h).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var A=y[S],k=y[S+1],z=A[kr]||null;if(typeof k=="function")z||K$(y);else if(z){var Z=null;if(k&&k.hasAttribute("formAction")){if(A=k,z=k[kr]||null)Z=z.formAction;else if(SO(A)!==null)continue}else Z=z.action;typeof Z=="function"?y[S+1]=Z:(y.splice(S,3),S-=3),K$(y)}}}function Y$(){function h(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(z){return A=z})},focusReset:"manual",scroll:"manual"})}function g(){A!==null&&(A(),A=null),S||setTimeout(y,20)}function y(){if(!S&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,A=null;return navigation.addEventListener("navigate",h),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(y,100),function(){S=!0,navigation.removeEventListener("navigate",h),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),A!==null&&(A(),A=null)}}}function xO(h){this._internalRoot=h}RA.prototype.render=xO.prototype.render=function(h){var g=this._internalRoot;if(g===null)throw Error(n(409));var y=g.current,S=ua();z$(y,S,h,g,null,null)},RA.prototype.unmount=xO.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var g=h.containerInfo;z$(h.current,2,null,h,null,null),uA(),g[By]=null}};function RA(h){this._internalRoot=h}RA.prototype.unstable_scheduleHydration=function(h){if(h){var g=s4();h={blockedOn:null,target:h,priority:g};for(var y=0;y<cp.length&&g!==0&&g<cp[y].priority;y++);cp.splice(y,0,h),y===0&&U$(h)}};var X$=t.version;if(X$!=="19.2.0")throw Error(n(527,X$,"19.2.0"));$.findDOMNode=function(h){var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(n(188)):(h=Object.keys(h).join(","),Error(n(268,h)));return h=c(g),h=h!==null?u(h):null,h=h===null?null:h.stateNode,h};var upe={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var EA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!EA.isDisabled&&EA.supportsFiber)try{CC=EA.inject(upe),ia=EA}catch{}}return gx.createRoot=function(h,g){if(!s(h))throw Error(n(299));var y=!1,S="",A=i3,k=n3,z=s3;return g!=null&&(g.unstable_strictMode===!0&&(y=!0),g.identifierPrefix!==void 0&&(S=g.identifierPrefix),g.onUncaughtError!==void 0&&(A=g.onUncaughtError),g.onCaughtError!==void 0&&(k=g.onCaughtError),g.onRecoverableError!==void 0&&(z=g.onRecoverableError)),g=B$(h,1,!1,null,null,y,S,null,A,k,z,Y$),h[By]=g.current,nO(h),new xO(g)},gx.hydrateRoot=function(h,g,y){if(!s(h))throw Error(n(299));var S=!1,A="",k=i3,z=n3,Z=s3,ne=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(A=y.identifierPrefix),y.onUncaughtError!==void 0&&(k=y.onUncaughtError),y.onCaughtError!==void 0&&(z=y.onCaughtError),y.onRecoverableError!==void 0&&(Z=y.onRecoverableError),y.formState!==void 0&&(ne=y.formState)),g=B$(h,1,!0,g,y??null,S,A,ne,k,z,Z,Y$),g.context=_$(null),y=g.current,S=ua(),S=hP(S),A=Yh(S),A.callback=null,Xh(y,A,S),y=S,g.current.lanes=y,wC(g,y),Wc(g),h[By]=g.current,nO(h),new RA(g)},gx.version="19.2.0",gx}var o5;function Spe(){if(o5)return MO.exports;o5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),MO.exports=bpe(),MO.exports}var Cpe=Spe();/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var r5="popstate";function xpe(e={}){function t(n,s){let{pathname:o,search:r,hash:a}=n.location;return bB("",{pathname:o,search:r,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function i(n,s){return typeof s=="string"?s:Ow(s)}return Dpe(t,i,null,e)}function Qi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function wpe(){return Math.random().toString(36).substring(2,10)}function a5(e,t){return{usr:e.state,key:e.key,idx:t}}function bB(e,t,i=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?vS(t):t,state:i,key:t&&t.key||n||wpe()}}function Ow({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function vS(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Dpe(e,t,i,n={}){let{window:s=document.defaultView,v5Compat:o=!1}=n,r=s.history,a="POP",l=null,c=u();c==null&&(c=0,r.replaceState({...r.state,idx:c},""));function u(){return(r.state||{idx:null}).idx}function d(){a="POP";let b=u(),C=b==null?null:b-c;c=b,l&&l({action:a,location:v.location,delta:C})}function p(b,C){a="PUSH";let x=bB(v.location,b,C);c=u()+1;let w=a5(x,c),M=v.createHref(x);try{r.pushState(w,"",M)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(M)}o&&l&&l({action:a,location:v.location,delta:1})}function f(b,C){a="REPLACE";let x=bB(v.location,b,C);c=u();let w=a5(x,c),M=v.createHref(x);r.replaceState(w,"",M),o&&l&&l({action:a,location:v.location,delta:0})}function m(b){return Mpe(b)}let v={get action(){return a},get location(){return e(s,r)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(r5,d),l=b,()=>{s.removeEventListener(r5,d),l=null}},createHref(b){return t(s,b)},createURL:m,encodeLocation(b){let C=m(b);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:f,go(b){return r.go(b)}};return v}function Mpe(e,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Qi(i,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Ow(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=i+n),new URL(n,i)}function T7(e,t,i="/"){return Ape(e,t,i,!1)}function Ape(e,t,i,n){let s=typeof t=="string"?vS(t):t,o=th(s.pathname||"/",i);if(o==null)return null;let r=I7(e);kpe(r);let a=null;for(let l=0;a==null&&l<r.length;++l){let c=_pe(o);a=Fpe(r[l],c,n)}return a}function I7(e,t=[],i=[],n="",s=!1){let o=(r,a,l=s,c)=>{let u={relativePath:c===void 0?r.path||"":c,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&l)return;Qi(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let d=Vd([n,u.relativePath]),p=i.concat(u);r.children&&r.children.length>0&&(Qi(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),I7(r.children,t,p,d,l)),!(r.path==null&&!r.index)&&t.push({path:d,score:Npe(d,r.index),routesMeta:p})};return e.forEach((r,a)=>{if(r.path===""||!r.path?.includes("?"))o(r,a);else for(let l of R7(r.path))o(r,a,!0,l)}),t}function R7(e){let t=e.split("/");if(t.length===0)return[];let[i,...n]=t,s=i.endsWith("?"),o=i.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let r=R7(n.join("/")),a=[];return a.push(...r.map(l=>l===""?o:[o,l].join("/"))),s&&a.push(...r),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function kpe(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:Ope(t.routesMeta.map(n=>n.childrenIndex),i.routesMeta.map(n=>n.childrenIndex)))}var Tpe=/^:[\w-]+$/,Ipe=3,Rpe=2,Epe=1,Lpe=10,Ppe=-2,l5=e=>e==="*";function Npe(e,t){let i=e.split("/"),n=i.length;return i.some(l5)&&(n+=Ppe),t&&(n+=Rpe),i.filter(s=>!l5(s)).reduce((s,o)=>s+(Tpe.test(o)?Ipe:o===""?Epe:Lpe),n)}function Ope(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Fpe(e,t,i=!1){let{routesMeta:n}=e,s={},o="/",r=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,u=o==="/"?t:t.slice(o.length)||"/",d=yI({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!d&&c&&i&&!n[n.length-1].route.index&&(d=yI({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),r.push({params:s,pathname:Vd([o,d.pathname]),pathnameBase:Hpe(Vd([o,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(o=Vd([o,d.pathnameBase]))}return r}function yI(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,n]=Bpe(e.path,e.caseSensitive,e.end),s=t.match(i);if(!s)return null;let o=s[0],r=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:d},p)=>{if(u==="*"){let m=a[p]||"";r=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const f=a[p];return d&&!f?c[u]=void 0:c[u]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:r,pattern:e}}function Bpe(e,t=!1,i=!0){hc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function _pe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hc(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function th(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,n=e.charAt(i);return n&&n!=="/"?null:e.slice(i)||"/"}function zpe(e,t="/"){let{pathname:i,search:n="",hash:s=""}=typeof e=="string"?vS(e):e;return{pathname:i?i.startsWith("/")?i:Gpe(i,t):t,search:Wpe(n),hash:jpe(s)}}function Gpe(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?i.length>1&&i.pop():s!=="."&&i.push(s)}),i.length>1?i.join("/"):"/"}function IO(e,t,i,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Vpe(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function _z(e){let t=Vpe(e);return t.map((i,n)=>n===t.length-1?i.pathname:i.pathnameBase)}function zz(e,t,i,n=!1){let s;typeof e=="string"?s=vS(e):(s={...e},Qi(!s.pathname||!s.pathname.includes("?"),IO("?","pathname","search",s)),Qi(!s.pathname||!s.pathname.includes("#"),IO("#","pathname","hash",s)),Qi(!s.search||!s.search.includes("#"),IO("#","search","hash",s)));let o=e===""||s.pathname==="",r=o?"/":s.pathname,a;if(r==null)a=i;else{let d=t.length-1;if(!n&&r.startsWith("..")){let p=r.split("/");for(;p[0]==="..";)p.shift(),d-=1;s.pathname=p.join("/")}a=d>=0?t[d]:"/"}let l=zpe(s,a),c=r&&r!=="/"&&r.endsWith("/"),u=(o||r===".")&&i.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Vd=e=>e.join("/").replace(/\/\/+/g,"/"),Hpe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Wpe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jpe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Upe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var E7=["POST","PUT","PATCH","DELETE"];new Set(E7);var $pe=["GET",...E7];new Set($pe);var bS=P.createContext(null);bS.displayName="DataRouter";var jR=P.createContext(null);jR.displayName="DataRouterState";P.createContext(!1);var L7=P.createContext({isTransitioning:!1});L7.displayName="ViewTransition";var Kpe=P.createContext(new Map);Kpe.displayName="Fetchers";var Ype=P.createContext(null);Ype.displayName="Await";var xc=P.createContext(null);xc.displayName="Navigation";var F0=P.createContext(null);F0.displayName="Location";var zu=P.createContext({outlet:null,matches:[],isDataRoute:!1});zu.displayName="Route";var Gz=P.createContext(null);Gz.displayName="RouteError";function Xpe(e,{relative:t}={}){Qi(SS(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:n}=P.useContext(xc),{hash:s,pathname:o,search:r}=B0(e,{relative:t}),a=o;return i!=="/"&&(a=o==="/"?i:Vd([i,o])),n.createHref({pathname:a,search:r,hash:s})}function SS(){return P.useContext(F0)!=null}function fg(){return Qi(SS(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(F0).location}var P7="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function N7(e){P.useContext(xc).static||P.useLayoutEffect(e)}function UR(){let{isDataRoute:e}=P.useContext(zu);return e?lge():Zpe()}function Zpe(){Qi(SS(),"useNavigate() may be used only in the context of a <Router> component.");let e=P.useContext(bS),{basename:t,navigator:i}=P.useContext(xc),{matches:n}=P.useContext(zu),{pathname:s}=fg(),o=JSON.stringify(_z(n)),r=P.useRef(!1);return N7(()=>{r.current=!0}),P.useCallback((l,c={})=>{if(hc(r.current,P7),!r.current)return;if(typeof l=="number"){i.go(l);return}let u=zz(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Vd([t,u.pathname])),(c.replace?i.replace:i.push)(u,c.state,c)},[t,i,o,s,e])}P.createContext(null);function B0(e,{relative:t}={}){let{matches:i}=P.useContext(zu),{pathname:n}=fg(),s=JSON.stringify(_z(i));return P.useMemo(()=>zz(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function qpe(e,t){return O7(e,t)}function O7(e,t,i,n,s){Qi(SS(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=P.useContext(xc),{matches:r}=P.useContext(zu),a=r[r.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let x=d&&d.path||"";F7(c,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let p=fg(),f;if(t){let x=typeof t=="string"?vS(t):t;Qi(u==="/"||x.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${x.pathname}" was given in the \`location\` prop.`),f=x}else f=p;let m=f.pathname||"/",v=m;if(u!=="/"){let x=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=T7(e,{pathname:v});hc(d||b!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),hc(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=ige(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Vd([u,o.encodeLocation?o.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:Vd([u,o.encodeLocation?o.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),r,i,n,s);return t&&C?P.createElement(F0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},C):C}function Qpe(){let e=age(),t=Upe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},r=null;return console.error("Error handled by React Router default ErrorBoundary:",e),r=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),i?P.createElement("pre",{style:s},i):null,r)}var Jpe=P.createElement(Qpe,null),ege=class extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?P.createElement(zu.Provider,{value:this.props.routeContext},P.createElement(Gz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tge({routeContext:e,match:t,children:i}){let n=P.useContext(bS);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(zu.Provider,{value:e},i)}function ige(e,t=[],i=null,n=null,s=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let o=e,r=i?.errors;if(r!=null){let c=o.findIndex(u=>u.route.id&&r?.[u.route.id]!==void 0);Qi(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),o=o.slice(0,Math.min(o.length,c+1))}let a=!1,l=-1;if(i)for(let c=0;c<o.length;c++){let u=o[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:p}=i,f=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!p||p[u.route.id]===void 0);if(u.route.lazy||f){a=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,u,d)=>{let p,f=!1,m=null,v=null;i&&(p=r&&u.route.id?r[u.route.id]:void 0,m=u.route.errorElement||Jpe,a&&(l<0&&d===0?(F7("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,v=null):l===d&&(f=!0,v=u.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,d+1)),C=()=>{let x;return p?x=m:f?x=v:u.route.Component?x=P.createElement(u.route.Component,null):u.route.element?x=u.route.element:x=c,P.createElement(tge,{match:u,routeContext:{outlet:c,matches:b,isDataRoute:i!=null},children:x})};return i&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?P.createElement(ege,{location:i.location,revalidation:i.revalidation,component:m,error:p,children:C(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:n}):C()},null)}function Vz(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nge(e){let t=P.useContext(bS);return Qi(t,Vz(e)),t}function sge(e){let t=P.useContext(jR);return Qi(t,Vz(e)),t}function oge(e){let t=P.useContext(zu);return Qi(t,Vz(e)),t}function Hz(e){let t=oge(e),i=t.matches[t.matches.length-1];return Qi(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function rge(){return Hz("useRouteId")}function age(){let e=P.useContext(Gz),t=sge("useRouteError"),i=Hz("useRouteError");return e!==void 0?e:t.errors?.[i]}function lge(){let{router:e}=nge("useNavigate"),t=Hz("useNavigate"),i=P.useRef(!1);return N7(()=>{i.current=!0}),P.useCallback(async(s,o={})=>{hc(i.current,P7),i.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...o}))},[e,t])}var c5={};function F7(e,t,i){!t&&!c5[e]&&(c5[e]=!0,hc(!1,i))}P.memo(cge);function cge({routes:e,future:t,state:i,unstable_onError:n}){return O7(e,void 0,i,n,t)}function sb({to:e,replace:t,state:i,relative:n}){Qi(SS(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(xc);hc(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=P.useContext(zu),{pathname:r}=fg(),a=UR(),l=zz(e,_z(o),r,n==="path"),c=JSON.stringify(l);return P.useEffect(()=>{a(JSON.parse(c),{replace:t,state:i,relative:n})},[a,c,n,t,i]),null}function lo(e){Qi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uge({basename:e="/",children:t=null,location:i,navigationType:n="POP",navigator:s,static:o=!1}){Qi(!SS(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let r=e.replace(/^\/*/,"/"),a=P.useMemo(()=>({basename:r,navigator:s,static:o,future:{}}),[r,s,o]);typeof i=="string"&&(i=vS(i));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:p="default"}=i,f=P.useMemo(()=>{let m=th(l,r);return m==null?null:{location:{pathname:m,search:c,hash:u,state:d,key:p},navigationType:n}},[r,l,c,u,d,p,n]);return hc(f!=null,`<Router basename="${r}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:P.createElement(xc.Provider,{value:a},P.createElement(F0.Provider,{children:t,value:f}))}function LA({children:e,location:t}){return qpe(SB(e),t)}function SB(e,t=[]){let i=[];return P.Children.forEach(e,(n,s)=>{if(!P.isValidElement(n))return;let o=[...t,s];if(n.type===P.Fragment){i.push.apply(i,SB(n.props.children,o));return}Qi(n.type===lo,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qi(!n.props.index||!n.props.children,"An index route cannot have child routes.");let r={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(r.children=SB(n.props.children,o)),i.push(r)}),i}var fT="get",mT="application/x-www-form-urlencoded";function $R(e){return e!=null&&typeof e.tagName=="string"}function dge(e){return $R(e)&&e.tagName.toLowerCase()==="button"}function hge(e){return $R(e)&&e.tagName.toLowerCase()==="form"}function pge(e){return $R(e)&&e.tagName.toLowerCase()==="input"}function gge(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function fge(e,t){return e.button===0&&(!t||t==="_self")&&!gge(e)}var PA=null;function mge(){if(PA===null)try{new FormData(document.createElement("form"),0),PA=!1}catch{PA=!0}return PA}var yge=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function RO(e){return e!=null&&!yge.has(e)?(hc(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mT}"`),null):e}function vge(e,t){let i,n,s,o,r;if(hge(e)){let a=e.getAttribute("action");n=a?th(a,t):null,i=e.getAttribute("method")||fT,s=RO(e.getAttribute("enctype"))||mT,o=new FormData(e)}else if(dge(e)||pge(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(n=l?th(l,t):null,i=e.getAttribute("formmethod")||a.getAttribute("method")||fT,s=RO(e.getAttribute("formenctype"))||RO(a.getAttribute("enctype"))||mT,o=new FormData(a,e),!mge()){let{name:c,type:u,value:d}=e;if(u==="image"){let p=c?`${c}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else c&&o.append(c,d)}}else{if($R(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=fT,n=null,s=mT,r=e}return o&&s==="text/plain"&&(r=o,o=void 0),{action:n,method:i.toLowerCase(),encType:s,formData:o,body:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wz(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function bge(e,t,i){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${i}`:t&&th(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${i}`,n}async function Sge(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Cge(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function xge(e,t,i){let n=await Promise.all(e.map(async s=>{let o=t.routes[s.route.id];if(o){let r=await Sge(o,i);return r.links?r.links():[]}return[]}));return Age(n.flat(1).filter(Cge).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function u5(e,t,i,n,s,o){let r=(l,c)=>i[c]?l.route.id!==i[c].route.id:!0,a=(l,c)=>i[c].pathname!==l.pathname||i[c].route.path?.endsWith("*")&&i[c].params["*"]!==l.params["*"];return o==="assets"?t.filter((l,c)=>r(l,c)||a(l,c)):o==="data"?t.filter((l,c)=>{let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(r(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function wge(e,t,{includeHydrateFallback:i}={}){return Dge(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),i&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function Dge(e){return[...new Set(e)]}function Mge(e){let t={},i=Object.keys(e).sort();for(let n of i)t[n]=e[n];return t}function Age(e,t){let i=new Set;return new Set(t),e.reduce((n,s)=>{let o=JSON.stringify(Mge(s));return i.has(o)||(i.add(o),n.push({key:o,link:s})),n},[])}function B7(){let e=P.useContext(bS);return Wz(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function kge(){let e=P.useContext(jR);return Wz(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var jz=P.createContext(void 0);jz.displayName="FrameworkContext";function _7(){let e=P.useContext(jz);return Wz(e,"You must render this element inside a <HydratedRouter> element"),e}function Tge(e,t){let i=P.useContext(jz),[n,s]=P.useState(!1),[o,r]=P.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=t,p=P.useRef(null);P.useEffect(()=>{if(e==="render"&&r(!0),e==="viewport"){let v=C=>{C.forEach(x=>{r(x.isIntersecting)})},b=new IntersectionObserver(v,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[e]),P.useEffect(()=>{if(n){let v=setTimeout(()=>{r(!0)},100);return()=>{clearTimeout(v)}}},[n]);let f=()=>{s(!0)},m=()=>{s(!1),r(!1)};return i?e!=="intent"?[o,p,{}]:[o,p,{onFocus:fx(a,f),onBlur:fx(l,m),onMouseEnter:fx(c,f),onMouseLeave:fx(u,m),onTouchStart:fx(d,f)}]:[!1,p,{}]}function fx(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function Ige({page:e,...t}){let{router:i}=B7(),n=P.useMemo(()=>T7(i.routes,e,i.basename),[i.routes,e,i.basename]);return n?P.createElement(Ege,{page:e,matches:n,...t}):null}function Rge(e){let{manifest:t,routeModules:i}=_7(),[n,s]=P.useState([]);return P.useEffect(()=>{let o=!1;return xge(e,t,i).then(r=>{o||s(r)}),()=>{o=!0}},[e,t,i]),n}function Ege({page:e,matches:t,...i}){let n=fg(),{manifest:s,routeModules:o}=_7(),{basename:r}=B7(),{loaderData:a,matches:l}=kge(),c=P.useMemo(()=>u5(e,t,l,s,n,"data"),[e,t,l,s,n]),u=P.useMemo(()=>u5(e,t,l,s,n,"assets"),[e,t,l,s,n]),d=P.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let m=new Set,v=!1;if(t.forEach(C=>{let x=s.routes[C.route.id];!x||!x.hasLoader||(!c.some(w=>w.route.id===C.route.id)&&C.route.id in a&&o[C.route.id]?.shouldRevalidate||x.hasClientLoader?v=!0:m.add(C.route.id))}),m.size===0)return[];let b=bge(e,r,"data");return v&&m.size>0&&b.searchParams.set("_routes",t.filter(C=>m.has(C.route.id)).map(C=>C.route.id).join(",")),[b.pathname+b.search]},[r,a,n,s,c,t,e,o]),p=P.useMemo(()=>wge(u,s),[u,s]),f=Rge(u);return P.createElement(P.Fragment,null,d.map(m=>P.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...i})),p.map(m=>P.createElement("link",{key:m,rel:"modulepreload",href:m,...i})),f.map(({key:m,link:v})=>P.createElement("link",{key:m,nonce:i.nonce,...v})))}function Lge(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var z7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{z7&&(window.__reactRouterVersion="7.9.4")}catch{}function Pge({basename:e,children:t,window:i}){let n=P.useRef();n.current==null&&(n.current=xpe({window:i,v5Compat:!0}));let s=n.current,[o,r]=P.useState({action:s.action,location:s.location}),a=P.useCallback(l=>{P.startTransition(()=>r(l))},[r]);return P.useLayoutEffect(()=>s.listen(a),[s,a]),P.createElement(uge,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}var G7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V7=P.forwardRef(function({onClick:t,discover:i="render",prefetch:n="none",relative:s,reloadDocument:o,replace:r,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...p},f){let{basename:m}=P.useContext(xc),v=typeof c=="string"&&G7.test(c),b,C=!1;if(typeof c=="string"&&v&&(b=c,z7))try{let O=new URL(window.location.href),_=c.startsWith("//")?new URL(O.protocol+c):new URL(c),B=th(_.pathname,m);_.origin===O.origin&&B!=null?c=B+_.search+_.hash:C=!0}catch{hc(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=Xpe(c,{relative:s}),[w,M,T]=Tge(n,p),L=Fge(c,{replace:r,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function I(O){t&&t(O),O.defaultPrevented||L(O)}let R=P.createElement("a",{...p,...T,href:b||x,onClick:C||o?t:I,ref:Lge(f,M),target:l,"data-discover":!v&&i==="render"?"true":void 0});return w&&!v?P.createElement(P.Fragment,null,R,P.createElement(Ige,{page:x})):R});V7.displayName="Link";var H7=P.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:n="",end:s=!1,style:o,to:r,viewTransition:a,children:l,...c},u){let d=B0(r,{relative:c.relative}),p=fg(),f=P.useContext(jR),{navigator:m,basename:v}=P.useContext(xc),b=f!=null&&Vge(d)&&a===!0,C=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,x=p.pathname,w=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;i||(x=x.toLowerCase(),w=w?w.toLowerCase():null,C=C.toLowerCase()),w&&v&&(w=th(w,v)||w);const M=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let T=x===C||!s&&x.startsWith(C)&&x.charAt(M)==="/",L=w!=null&&(w===C||!s&&w.startsWith(C)&&w.charAt(C.length)==="/"),I={isActive:T,isPending:L,isTransitioning:b},R=T?t:void 0,O;typeof n=="function"?O=n(I):O=[n,T?"active":null,L?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let _=typeof o=="function"?o(I):o;return P.createElement(V7,{...c,"aria-current":R,className:O,ref:u,style:_,to:r,viewTransition:a},typeof l=="function"?l(I):l)});H7.displayName="NavLink";var Nge=P.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:n,replace:s,state:o,method:r=fT,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...p},f)=>{let m=zge(),v=Gge(a,{relative:c}),b=r.toLowerCase()==="get"?"get":"post",C=typeof a=="string"&&G7.test(a),x=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let M=w.nativeEvent.submitter,T=M?.getAttribute("formmethod")||r;m(M||w.currentTarget,{fetcherKey:t,method:T,navigate:i,replace:s,state:o,relative:c,preventScrollReset:u,viewTransition:d})};return P.createElement("form",{ref:f,method:b,action:v,onSubmit:n?l:x,...p,"data-discover":!C&&e==="render"?"true":void 0})});Nge.displayName="Form";function Oge(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W7(e){let t=P.useContext(bS);return Qi(t,Oge(e)),t}function Fge(e,{target:t,replace:i,state:n,preventScrollReset:s,relative:o,viewTransition:r}={}){let a=UR(),l=fg(),c=B0(e,{relative:o});return P.useCallback(u=>{if(fge(u,t)){u.preventDefault();let d=i!==void 0?i:Ow(l)===Ow(c);a(e,{replace:d,state:n,preventScrollReset:s,relative:o,viewTransition:r})}},[l,a,c,i,n,t,e,s,o,r])}var Bge=0,_ge=()=>`__${String(++Bge)}__`;function zge(){let{router:e}=W7("useSubmit"),{basename:t}=P.useContext(xc),i=rge();return P.useCallback(async(n,s={})=>{let{action:o,method:r,encType:a,formData:l,body:c}=vge(n,t);if(s.navigate===!1){let u=s.fetcherKey||_ge();await e.fetch(u,i,s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||r,formEncType:s.encType||a,flushSync:s.flushSync})}else await e.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||r,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:i,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,i])}function Gge(e,{relative:t}={}){let{basename:i}=P.useContext(xc),n=P.useContext(zu);Qi(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...B0(e||".",{relative:t})},r=fg();if(e==null){o.search=r.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();o.search=u?`?${u}`:""}}return(!e||e===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(o.pathname=o.pathname==="/"?i:Vd([i,o.pathname])),Ow(o)}function Vge(e,{relative:t}={}){let i=P.useContext(L7);Qi(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=W7("useViewTransitionState"),s=B0(e,{relative:t});if(!i.isTransitioning)return!1;let o=th(i.currentLocation.pathname,n)||i.currentLocation.pathname,r=th(i.nextLocation.pathname,n)||i.nextLocation.pathname;return yI(s.pathname,r)!=null||yI(s.pathname,o)!=null}var KR=k7();const j7=M7(KR),U7="/assets/intango-logo-Bwk5HiGO.png";function $7(e){var t,i,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(i=$7(e[t]))&&(n&&(n+=" "),n+=i)}else for(i in e)e[i]&&(n&&(n+=" "),n+=i);return n}function Ui(){for(var e,t,i=0,n="",s=arguments.length;i<s;i++)(e=arguments[i])&&(t=$7(e))&&(n&&(n+=" "),n+=t);return n}const d5=({type:e,name:t,setEmail:i,setPassword:n,isEmptyEmail:s,isEmptyPassword:o})=>X.jsx("input",{onChange:r=>{i?i(r.target.value):n(r.target.value)},type:e,placeholder:t,className:Ui("w-full p-3 my-2 outline-none bg-gray-50 border rounded focus:border-[#6c62ff] transition-all duration-100",s&&"border-red-500",o&&"border-red-500")}),h5=e=>{let t;const i=new Set,n=(c,u)=>{const d=typeof c=="function"?c(t):c;if(!Object.is(d,t)){const p=t;t=u??(typeof d!="object"||d===null)?d:Object.assign({},t,d),i.forEach(f=>f(t,p))}},s=()=>t,a={setState:n,getState:s,getInitialState:()=>l,subscribe:c=>(i.add(c),()=>i.delete(c))},l=t=e(n,s,a);return a},Hge=(e=>e?h5(e):h5),Wge=e=>e;function jge(e,t=Wge){const i=se.useSyncExternalStore(e.subscribe,se.useCallback(()=>t(e.getState()),[e,t]),se.useCallback(()=>t(e.getInitialState()),[e,t]));return se.useDebugValue(i),i}const p5=e=>{const t=Hge(e),i=n=>jge(t,n);return Object.assign(i,t),i},YR=(e=>e?p5(e):p5);function K7(e,t){return function(){return e.apply(t,arguments)}}const{toString:Uge}=Object.prototype,{getPrototypeOf:Uz}=Object,{iterator:XR,toStringTag:Y7}=Symbol,ZR=(e=>t=>{const i=Uge.call(t);return e[i]||(e[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),wc=e=>(e=e.toLowerCase(),t=>ZR(t)===e),qR=e=>t=>typeof t===e,{isArray:CS}=Array,_b=qR("undefined");function _0(e){return e!==null&&!_b(e)&&e.constructor!==null&&!_b(e.constructor)&&Kr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const X7=wc("ArrayBuffer");function $ge(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&X7(e.buffer),t}const Kge=qR("string"),Kr=qR("function"),Z7=qR("number"),z0=e=>e!==null&&typeof e=="object",Yge=e=>e===!0||e===!1,yT=e=>{if(ZR(e)!=="object")return!1;const t=Uz(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Y7 in e)&&!(XR in e)},Xge=e=>{if(!z0(e)||_0(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Zge=wc("Date"),qge=wc("File"),Qge=wc("Blob"),Jge=wc("FileList"),efe=e=>z0(e)&&Kr(e.pipe),tfe=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Kr(e.append)&&((t=ZR(e))==="formdata"||t==="object"&&Kr(e.toString)&&e.toString()==="[object FormData]"))},ife=wc("URLSearchParams"),[nfe,sfe,ofe,rfe]=["ReadableStream","Request","Response","Headers"].map(wc),afe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function G0(e,t,{allOwnKeys:i=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),CS(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(_0(e))return;const o=i?Object.getOwnPropertyNames(e):Object.keys(e),r=o.length;let a;for(n=0;n<r;n++)a=o[n],t.call(null,e[a],a,e)}}function q7(e,t){if(_0(e))return null;t=t.toLowerCase();const i=Object.keys(e);let n=i.length,s;for(;n-- >0;)if(s=i[n],t===s.toLowerCase())return s;return null}const Kf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Q7=e=>!_b(e)&&e!==Kf;function CB(){const{caseless:e,skipUndefined:t}=Q7(this)&&this||{},i={},n=(s,o)=>{const r=e&&q7(i,o)||o;yT(i[r])&&yT(s)?i[r]=CB(i[r],s):yT(s)?i[r]=CB({},s):CS(s)?i[r]=s.slice():(!t||!_b(s))&&(i[r]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&G0(arguments[s],n);return i}const lfe=(e,t,i,{allOwnKeys:n}={})=>(G0(t,(s,o)=>{i&&Kr(s)?e[o]=K7(s,i):e[o]=s},{allOwnKeys:n}),e),cfe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ufe=(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},dfe=(e,t,i,n)=>{let s,o,r;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)r=s[o],(!n||n(r,e,t))&&!a[r]&&(t[r]=e[r],a[r]=!0);e=i!==!1&&Uz(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},hfe=(e,t,i)=>{e=String(e),(i===void 0||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return n!==-1&&n===i},pfe=e=>{if(!e)return null;if(CS(e))return e;let t=e.length;if(!Z7(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},gfe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Uz(Uint8Array)),ffe=(e,t)=>{const n=(e&&e[XR]).call(e);let s;for(;(s=n.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},mfe=(e,t)=>{let i;const n=[];for(;(i=e.exec(t))!==null;)n.push(i);return n},yfe=wc("HTMLFormElement"),vfe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,n,s){return n.toUpperCase()+s}),g5=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),bfe=wc("RegExp"),J7=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};G0(i,(s,o)=>{let r;(r=t(s,o,e))!==!1&&(n[o]=r||s)}),Object.defineProperties(e,n)},Sfe=e=>{J7(e,(t,i)=>{if(Kr(e)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const n=e[i];if(Kr(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Cfe=(e,t)=>{const i={},n=s=>{s.forEach(o=>{i[o]=!0})};return CS(e)?n(e):n(String(e).split(t)),i},xfe=()=>{},wfe=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Dfe(e){return!!(e&&Kr(e.append)&&e[Y7]==="FormData"&&e[XR])}const Mfe=e=>{const t=new Array(10),i=(n,s)=>{if(z0(n)){if(t.indexOf(n)>=0)return;if(_0(n))return n;if(!("toJSON"in n)){t[s]=n;const o=CS(n)?[]:{};return G0(n,(r,a)=>{const l=i(r,s+1);!_b(l)&&(o[a]=l)}),t[s]=void 0,o}}return n};return i(e,0)},Afe=wc("AsyncFunction"),kfe=e=>e&&(z0(e)||Kr(e))&&Kr(e.then)&&Kr(e.catch),eQ=((e,t)=>e?setImmediate:t?((i,n)=>(Kf.addEventListener("message",({source:s,data:o})=>{s===Kf&&o===i&&n.length&&n.shift()()},!1),s=>{n.push(s),Kf.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",Kr(Kf.postMessage)),Tfe=typeof queueMicrotask<"u"?queueMicrotask.bind(Kf):typeof process<"u"&&process.nextTick||eQ,Ife=e=>e!=null&&Kr(e[XR]),Se={isArray:CS,isArrayBuffer:X7,isBuffer:_0,isFormData:tfe,isArrayBufferView:$ge,isString:Kge,isNumber:Z7,isBoolean:Yge,isObject:z0,isPlainObject:yT,isEmptyObject:Xge,isReadableStream:nfe,isRequest:sfe,isResponse:ofe,isHeaders:rfe,isUndefined:_b,isDate:Zge,isFile:qge,isBlob:Qge,isRegExp:bfe,isFunction:Kr,isStream:efe,isURLSearchParams:ife,isTypedArray:gfe,isFileList:Jge,forEach:G0,merge:CB,extend:lfe,trim:afe,stripBOM:cfe,inherits:ufe,toFlatObject:dfe,kindOf:ZR,kindOfTest:wc,endsWith:hfe,toArray:pfe,forEachEntry:ffe,matchAll:mfe,isHTMLForm:yfe,hasOwnProperty:g5,hasOwnProp:g5,reduceDescriptors:J7,freezeMethods:Sfe,toObjectSet:Cfe,toCamelCase:vfe,noop:xfe,toFiniteNumber:wfe,findKey:q7,global:Kf,isContextDefined:Q7,isSpecCompliantForm:Dfe,toJSONObject:Mfe,isAsyncFn:Afe,isThenable:kfe,setImmediate:eQ,asap:Tfe,isIterable:Ife};function Rt(e,t,i,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Se.inherits(Rt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Se.toJSONObject(this.config),code:this.code,status:this.status}}});const tQ=Rt.prototype,iQ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{iQ[e]={value:e}});Object.defineProperties(Rt,iQ);Object.defineProperty(tQ,"isAxiosError",{value:!0});Rt.from=(e,t,i,n,s,o)=>{const r=Object.create(tQ);Se.toFlatObject(e,r,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const a=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return Rt.call(r,a,l,i,n,s),e&&r.cause==null&&Object.defineProperty(r,"cause",{value:e,configurable:!0}),r.name=e&&e.name||"Error",o&&Object.assign(r,o),r};const Rfe=null;function xB(e){return Se.isPlainObject(e)||Se.isArray(e)}function nQ(e){return Se.endsWith(e,"[]")?e.slice(0,-2):e}function f5(e,t,i){return e?e.concat(t).map(function(s,o){return s=nQ(s),!i&&o?"["+s+"]":s}).join(i?".":""):t}function Efe(e){return Se.isArray(e)&&!e.some(xB)}const Lfe=Se.toFlatObject(Se,{},null,function(t){return/^is[A-Z]/.test(t)});function QR(e,t,i){if(!Se.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,i=Se.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,b){return!Se.isUndefined(b[v])});const n=i.metaTokens,s=i.visitor||u,o=i.dots,r=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&Se.isSpecCompliantForm(t);if(!Se.isFunction(s))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(Se.isDate(m))return m.toISOString();if(Se.isBoolean(m))return m.toString();if(!l&&Se.isBlob(m))throw new Rt("Blob is not supported. Use a Buffer instead.");return Se.isArrayBuffer(m)||Se.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,v,b){let C=m;if(m&&!b&&typeof m=="object"){if(Se.endsWith(v,"{}"))v=n?v:v.slice(0,-2),m=JSON.stringify(m);else if(Se.isArray(m)&&Efe(m)||(Se.isFileList(m)||Se.endsWith(v,"[]"))&&(C=Se.toArray(m)))return v=nQ(v),C.forEach(function(w,M){!(Se.isUndefined(w)||w===null)&&t.append(r===!0?f5([v],M,o):r===null?v:v+"[]",c(w))}),!1}return xB(m)?!0:(t.append(f5(b,v,o),c(m)),!1)}const d=[],p=Object.assign(Lfe,{defaultVisitor:u,convertValue:c,isVisitable:xB});function f(m,v){if(!Se.isUndefined(m)){if(d.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(m),Se.forEach(m,function(C,x){(!(Se.isUndefined(C)||C===null)&&s.call(t,C,Se.isString(x)?x.trim():x,v,p))===!0&&f(C,v?v.concat(x):[x])}),d.pop()}}if(!Se.isObject(e))throw new TypeError("data must be an object");return f(e),t}function m5(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function $z(e,t){this._pairs=[],e&&QR(e,this,t)}const sQ=$z.prototype;sQ.append=function(t,i){this._pairs.push([t,i])};sQ.toString=function(t){const i=t?function(n){return t.call(this,n,m5)}:m5;return this._pairs.map(function(s){return i(s[0])+"="+i(s[1])},"").join("&")};function Pfe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function oQ(e,t,i){if(!t)return e;const n=i&&i.encode||Pfe;Se.isFunction(i)&&(i={serialize:i});const s=i&&i.serialize;let o;if(s?o=s(t,i):o=Se.isURLSearchParams(t)?t.toString():new $z(t,i).toString(n),o){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class y5{constructor(){this.handlers=[]}use(t,i,n){return this.handlers.push({fulfilled:t,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Se.forEach(this.handlers,function(n){n!==null&&t(n)})}}const rQ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Nfe=typeof URLSearchParams<"u"?URLSearchParams:$z,Ofe=typeof FormData<"u"?FormData:null,Ffe=typeof Blob<"u"?Blob:null,Bfe={isBrowser:!0,classes:{URLSearchParams:Nfe,FormData:Ofe,Blob:Ffe},protocols:["http","https","file","blob","url","data"]},Kz=typeof window<"u"&&typeof document<"u",wB=typeof navigator=="object"&&navigator||void 0,_fe=Kz&&(!wB||["ReactNative","NativeScript","NS"].indexOf(wB.product)<0),zfe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Gfe=Kz&&window.location.href||"http://localhost",Vfe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Kz,hasStandardBrowserEnv:_fe,hasStandardBrowserWebWorkerEnv:zfe,navigator:wB,origin:Gfe},Symbol.toStringTag,{value:"Module"})),$o={...Vfe,...Bfe};function Hfe(e,t){return QR(e,new $o.classes.URLSearchParams,{visitor:function(i,n,s,o){return $o.isNode&&Se.isBuffer(i)?(this.append(n,i.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function Wfe(e){return Se.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function jfe(e){const t={},i=Object.keys(e);let n;const s=i.length;let o;for(n=0;n<s;n++)o=i[n],t[o]=e[o];return t}function aQ(e){function t(i,n,s,o){let r=i[o++];if(r==="__proto__")return!0;const a=Number.isFinite(+r),l=o>=i.length;return r=!r&&Se.isArray(s)?s.length:r,l?(Se.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!a):((!s[r]||!Se.isObject(s[r]))&&(s[r]=[]),t(i,n,s[r],o)&&Se.isArray(s[r])&&(s[r]=jfe(s[r])),!a)}if(Se.isFormData(e)&&Se.isFunction(e.entries)){const i={};return Se.forEachEntry(e,(n,s)=>{t(Wfe(n),s,i,0)}),i}return null}function Ufe(e,t,i){if(Se.isString(e))try{return(t||JSON.parse)(e),Se.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(e)}const V0={transitional:rQ,adapter:["xhr","http","fetch"],transformRequest:[function(t,i){const n=i.getContentType()||"",s=n.indexOf("application/json")>-1,o=Se.isObject(t);if(o&&Se.isHTMLForm(t)&&(t=new FormData(t)),Se.isFormData(t))return s?JSON.stringify(aQ(t)):t;if(Se.isArrayBuffer(t)||Se.isBuffer(t)||Se.isStream(t)||Se.isFile(t)||Se.isBlob(t)||Se.isReadableStream(t))return t;if(Se.isArrayBufferView(t))return t.buffer;if(Se.isURLSearchParams(t))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Hfe(t,this.formSerializer).toString();if((a=Se.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return QR(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||s?(i.setContentType("application/json",!1),Ufe(t)):t}],transformResponse:[function(t){const i=this.transitional||V0.transitional,n=i&&i.forcedJSONParsing,s=this.responseType==="json";if(Se.isResponse(t)||Se.isReadableStream(t))return t;if(t&&Se.isString(t)&&(n&&!this.responseType||s)){const r=!(i&&i.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(a){if(r)throw a.name==="SyntaxError"?Rt.from(a,Rt.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$o.classes.FormData,Blob:$o.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Se.forEach(["delete","get","head","post","put","patch"],e=>{V0.headers[e]={}});const $fe=Se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Kfe=e=>{const t={};let i,n,s;return e&&e.split(`
`).forEach(function(r){s=r.indexOf(":"),i=r.substring(0,s).trim().toLowerCase(),n=r.substring(s+1).trim(),!(!i||t[i]&&$fe[i])&&(i==="set-cookie"?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+", "+n:n)}),t},v5=Symbol("internals");function mx(e){return e&&String(e).trim().toLowerCase()}function vT(e){return e===!1||e==null?e:Se.isArray(e)?e.map(vT):String(e)}function Yfe(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}const Xfe=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function EO(e,t,i,n,s){if(Se.isFunction(n))return n.call(this,t,i);if(s&&(t=i),!!Se.isString(t)){if(Se.isString(n))return t.indexOf(n)!==-1;if(Se.isRegExp(n))return n.test(t)}}function Zfe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,i,n)=>i.toUpperCase()+n)}function qfe(e,t){const i=Se.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+i,{value:function(s,o,r){return this[n].call(this,t,s,o,r)},configurable:!0})})}let Yr=class{constructor(t){t&&this.set(t)}set(t,i,n){const s=this;function o(a,l,c){const u=mx(l);if(!u)throw new Error("header name must be a non-empty string");const d=Se.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||l]=vT(a))}const r=(a,l)=>Se.forEach(a,(c,u)=>o(c,u,l));if(Se.isPlainObject(t)||t instanceof this.constructor)r(t,i);else if(Se.isString(t)&&(t=t.trim())&&!Xfe(t))r(Kfe(t),i);else if(Se.isObject(t)&&Se.isIterable(t)){let a={},l,c;for(const u of t){if(!Se.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?Se.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}r(a,i)}else t!=null&&o(i,t,n);return this}get(t,i){if(t=mx(t),t){const n=Se.findKey(this,t);if(n){const s=this[n];if(!i)return s;if(i===!0)return Yfe(s);if(Se.isFunction(i))return i.call(this,s,n);if(Se.isRegExp(i))return i.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,i){if(t=mx(t),t){const n=Se.findKey(this,t);return!!(n&&this[n]!==void 0&&(!i||EO(this,this[n],n,i)))}return!1}delete(t,i){const n=this;let s=!1;function o(r){if(r=mx(r),r){const a=Se.findKey(n,r);a&&(!i||EO(n,n[a],a,i))&&(delete n[a],s=!0)}}return Se.isArray(t)?t.forEach(o):o(t),s}clear(t){const i=Object.keys(this);let n=i.length,s=!1;for(;n--;){const o=i[n];(!t||EO(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const i=this,n={};return Se.forEach(this,(s,o)=>{const r=Se.findKey(n,o);if(r){i[r]=vT(s),delete i[o];return}const a=t?Zfe(o):String(o).trim();a!==o&&delete i[o],i[a]=vT(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const i=Object.create(null);return Se.forEach(this,(n,s)=>{n!=null&&n!==!1&&(i[s]=t&&Se.isArray(n)?n.join(", "):n)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,i])=>t+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...i){const n=new this(t);return i.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[v5]=this[v5]={accessors:{}}).accessors,s=this.prototype;function o(r){const a=mx(r);n[a]||(qfe(s,r),n[a]=!0)}return Se.isArray(t)?t.forEach(o):o(t),this}};Yr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Se.reduceDescriptors(Yr.prototype,({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[i]=n}}});Se.freezeMethods(Yr);function LO(e,t){const i=this||V0,n=t||i,s=Yr.from(n.headers);let o=n.data;return Se.forEach(e,function(a){o=a.call(i,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function lQ(e){return!!(e&&e.__CANCEL__)}function xS(e,t,i){Rt.call(this,e??"canceled",Rt.ERR_CANCELED,t,i),this.name="CanceledError"}Se.inherits(xS,Rt,{__CANCEL__:!0});function cQ(e,t,i){const n=i.config.validateStatus;!i.status||!n||n(i.status)?e(i):t(new Rt("Request failed with status code "+i.status,[Rt.ERR_BAD_REQUEST,Rt.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function Qfe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Jfe(e,t){e=e||10;const i=new Array(e),n=new Array(e);let s=0,o=0,r;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=n[o];r||(r=c),i[s]=l,n[s]=c;let d=o,p=0;for(;d!==s;)p+=i[d++],d=d%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-r<t)return;const f=u&&c-u;return f?Math.round(p*1e3/f):void 0}}function eme(e,t){let i=0,n=1e3/t,s,o;const r=(c,u=Date.now())=>{i=u,s=null,o&&(clearTimeout(o),o=null),e(...c)};return[(...c)=>{const u=Date.now(),d=u-i;d>=n?r(c,u):(s=c,o||(o=setTimeout(()=>{o=null,r(s)},n-d)))},()=>s&&r(s)]}const vI=(e,t,i=3)=>{let n=0;const s=Jfe(50,250);return eme(o=>{const r=o.loaded,a=o.lengthComputable?o.total:void 0,l=r-n,c=s(l),u=r<=a;n=r;const d={loaded:r,total:a,progress:a?r/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-r)/c:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(d)},i)},b5=(e,t)=>{const i=e!=null;return[n=>t[0]({lengthComputable:i,total:e,loaded:n}),t[1]]},S5=e=>(...t)=>Se.asap(()=>e(...t)),tme=$o.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,$o.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL($o.origin),$o.navigator&&/(msie|trident)/i.test($o.navigator.userAgent)):()=>!0,ime=$o.hasStandardBrowserEnv?{write(e,t,i,n,s,o){const r=[e+"="+encodeURIComponent(t)];Se.isNumber(i)&&r.push("expires="+new Date(i).toGMTString()),Se.isString(n)&&r.push("path="+n),Se.isString(s)&&r.push("domain="+s),o===!0&&r.push("secure"),document.cookie=r.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function nme(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function sme(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function uQ(e,t,i){let n=!nme(t);return e&&(n||i==!1)?sme(e,t):t}const C5=e=>e instanceof Yr?{...e}:e;function Am(e,t){t=t||{};const i={};function n(c,u,d,p){return Se.isPlainObject(c)&&Se.isPlainObject(u)?Se.merge.call({caseless:p},c,u):Se.isPlainObject(u)?Se.merge({},u):Se.isArray(u)?u.slice():u}function s(c,u,d,p){if(Se.isUndefined(u)){if(!Se.isUndefined(c))return n(void 0,c,d,p)}else return n(c,u,d,p)}function o(c,u){if(!Se.isUndefined(u))return n(void 0,u)}function r(c,u){if(Se.isUndefined(u)){if(!Se.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,d){if(d in t)return n(c,u);if(d in e)return n(void 0,c)}const l={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(c,u,d)=>s(C5(c),C5(u),d,!0)};return Se.forEach(Object.keys({...e,...t}),function(u){const d=l[u]||s,p=d(e[u],t[u],u);Se.isUndefined(p)&&d!==a||(i[u]=p)}),i}const dQ=e=>{const t=Am({},e);let{data:i,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:r,auth:a}=t;if(t.headers=r=Yr.from(r),t.url=oQ(uQ(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&r.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),Se.isFormData(i)){if($o.hasStandardBrowserEnv||$o.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if(Se.isFunction(i.getHeaders)){const l=i.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&r.set(u,d)})}}if($o.hasStandardBrowserEnv&&(n&&Se.isFunction(n)&&(n=n(t)),n||n!==!1&&tme(t.url))){const l=s&&o&&ime.read(o);l&&r.set(s,l)}return t},ome=typeof XMLHttpRequest<"u",rme=ome&&function(e){return new Promise(function(i,n){const s=dQ(e);let o=s.data;const r=Yr.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,d,p,f,m;function v(){f&&f(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function C(){if(!b)return;const w=Yr.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),T={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:w,config:e,request:b};cQ(function(I){i(I),v()},function(I){n(I),v()},T),b=null}"onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(C)},b.onabort=function(){b&&(n(new Rt("Request aborted",Rt.ECONNABORTED,e,b)),b=null)},b.onerror=function(M){const T=M&&M.message?M.message:"Network Error",L=new Rt(T,Rt.ERR_NETWORK,e,b);L.event=M||null,n(L),b=null},b.ontimeout=function(){let M=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||rQ;s.timeoutErrorMessage&&(M=s.timeoutErrorMessage),n(new Rt(M,T.clarifyTimeoutError?Rt.ETIMEDOUT:Rt.ECONNABORTED,e,b)),b=null},o===void 0&&r.setContentType(null),"setRequestHeader"in b&&Se.forEach(r.toJSON(),function(M,T){b.setRequestHeader(T,M)}),Se.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),a&&a!=="json"&&(b.responseType=s.responseType),c&&([p,m]=vI(c,!0),b.addEventListener("progress",p)),l&&b.upload&&([d,f]=vI(l),b.upload.addEventListener("progress",d),b.upload.addEventListener("loadend",f)),(s.cancelToken||s.signal)&&(u=w=>{b&&(n(!w||w.type?new xS(null,e,b):w),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const x=Qfe(s.url);if(x&&$o.protocols.indexOf(x)===-1){n(new Rt("Unsupported protocol "+x+":",Rt.ERR_BAD_REQUEST,e));return}b.send(o||null)})},ame=(e,t)=>{const{length:i}=e=e?e.filter(Boolean):[];if(t||i){let n=new AbortController,s;const o=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;n.abort(u instanceof Rt?u:new xS(u instanceof Error?u.message:u))}};let r=t&&setTimeout(()=>{r=null,o(new Rt(`timeout ${t} of ms exceeded`,Rt.ETIMEDOUT))},t);const a=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),e=null)};e.forEach(c=>c.addEventListener("abort",o));const{signal:l}=n;return l.unsubscribe=()=>Se.asap(a),l}},lme=function*(e,t){let i=e.byteLength;if(i<t){yield e;return}let n=0,s;for(;n<i;)s=n+t,yield e.slice(n,s),n=s},cme=async function*(e,t){for await(const i of ume(e))yield*lme(i,t)},ume=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:i,value:n}=await t.read();if(i)break;yield n}}finally{await t.cancel()}},x5=(e,t,i,n)=>{const s=cme(e,t);let o=0,r,a=l=>{r||(r=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){a(),l.close();return}let d=u.byteLength;if(i){let p=o+=d;i(p)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},w5=64*1024,{isFunction:NA}=Se,dme=(({Request:e,Response:t})=>({Request:e,Response:t}))(Se.global),{ReadableStream:D5,TextEncoder:M5}=Se.global,A5=(e,...t)=>{try{return!!e(...t)}catch{return!1}},hme=e=>{e=Se.merge.call({skipUndefined:!0},dme,e);const{fetch:t,Request:i,Response:n}=e,s=t?NA(t):typeof fetch=="function",o=NA(i),r=NA(n);if(!s)return!1;const a=s&&NA(D5),l=s&&(typeof M5=="function"?(m=>v=>m.encode(v))(new M5):async m=>new Uint8Array(await new i(m).arrayBuffer())),c=o&&a&&A5(()=>{let m=!1;const v=new i($o.origin,{body:new D5,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!v}),u=r&&a&&A5(()=>Se.isReadableStream(new n("").body)),d={stream:u&&(m=>m.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!d[m]&&(d[m]=(v,b)=>{let C=v&&v[m];if(C)return C.call(v);throw new Rt(`Response type '${m}' is not supported`,Rt.ERR_NOT_SUPPORT,b)})});const p=async m=>{if(m==null)return 0;if(Se.isBlob(m))return m.size;if(Se.isSpecCompliantForm(m))return(await new i($o.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(Se.isArrayBufferView(m)||Se.isArrayBuffer(m))return m.byteLength;if(Se.isURLSearchParams(m)&&(m=m+""),Se.isString(m))return(await l(m)).byteLength},f=async(m,v)=>{const b=Se.toFiniteNumber(m.getContentLength());return b??p(v)};return async m=>{let{url:v,method:b,data:C,signal:x,cancelToken:w,timeout:M,onDownloadProgress:T,onUploadProgress:L,responseType:I,headers:R,withCredentials:O="same-origin",fetchOptions:_}=dQ(m),B=t||fetch;I=I?(I+"").toLowerCase():"text";let V=ame([x,w&&w.toAbortSignal()],M),j=null;const K=V&&V.unsubscribe&&(()=>{V.unsubscribe()});let Y;try{if(L&&c&&b!=="get"&&b!=="head"&&(Y=await f(R,C))!==0){let H=new i(v,{method:"POST",body:C,duplex:"half"}),U;if(Se.isFormData(C)&&(U=H.headers.get("content-type"))&&R.setContentType(U),H.body){const[ee,ie]=b5(Y,vI(S5(L)));C=x5(H.body,w5,ee,ie)}}Se.isString(O)||(O=O?"include":"omit");const G=o&&"credentials"in i.prototype,$={..._,signal:V,method:b.toUpperCase(),headers:R.normalize().toJSON(),body:C,duplex:"half",credentials:G?O:void 0};j=o&&new i(v,$);let W=await(o?B(j,_):B(v,$));const Q=u&&(I==="stream"||I==="response");if(u&&(T||Q&&K)){const H={};["status","statusText","headers"].forEach(oe=>{H[oe]=W[oe]});const U=Se.toFiniteNumber(W.headers.get("content-length")),[ee,ie]=T&&b5(U,vI(S5(T),!0))||[];W=new n(x5(W.body,w5,ee,()=>{ie&&ie(),K&&K()}),H)}I=I||"text";let q=await d[Se.findKey(d,I)||"text"](W,m);return!Q&&K&&K(),await new Promise((H,U)=>{cQ(H,U,{data:q,headers:Yr.from(W.headers),status:W.status,statusText:W.statusText,config:m,request:j})})}catch(G){throw K&&K(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new Rt("Network Error",Rt.ERR_NETWORK,m,j),{cause:G.cause||G}):Rt.from(G,G&&G.code,m,j)}}},pme=new Map,hQ=e=>{let t=e?e.env:{};const{fetch:i,Request:n,Response:s}=t,o=[n,s,i];let r=o.length,a=r,l,c,u=pme;for(;a--;)l=o[a],c=u.get(l),c===void 0&&u.set(l,c=a?new Map:hme(t)),u=c;return c};hQ();const DB={http:Rfe,xhr:rme,fetch:{get:hQ}};Se.forEach(DB,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const k5=e=>`- ${e}`,gme=e=>Se.isFunction(e)||e===null||e===!1,pQ={getAdapter:(e,t)=>{e=Se.isArray(e)?e:[e];const{length:i}=e;let n,s;const o={};for(let r=0;r<i;r++){n=e[r];let a;if(s=n,!gme(n)&&(s=DB[(a=String(n)).toLowerCase()],s===void 0))throw new Rt(`Unknown adapter '${a}'`);if(s&&(Se.isFunction(s)||(s=s.get(t))))break;o[a||"#"+r]=s}if(!s){const r=Object.entries(o).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=i?r.length>1?`since :
`+r.map(k5).join(`
`):" "+k5(r[0]):"as no adapter specified";throw new Rt("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:DB};function PO(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new xS(null,e)}function T5(e){return PO(e),e.headers=Yr.from(e.headers),e.data=LO.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),pQ.getAdapter(e.adapter||V0.adapter,e)(e).then(function(n){return PO(e),n.data=LO.call(e,e.transformResponse,n),n.headers=Yr.from(n.headers),n},function(n){return lQ(n)||(PO(e),n&&n.response&&(n.response.data=LO.call(e,e.transformResponse,n.response),n.response.headers=Yr.from(n.response.headers))),Promise.reject(n)})}const gQ="1.12.2",JR={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{JR[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const I5={};JR.transitional=function(t,i,n){function s(o,r){return"[Axios v"+gQ+"] Transitional option '"+o+"'"+r+(n?". "+n:"")}return(o,r,a)=>{if(t===!1)throw new Rt(s(r," has been removed"+(i?" in "+i:"")),Rt.ERR_DEPRECATED);return i&&!I5[r]&&(I5[r]=!0,console.warn(s(r," has been deprecated since v"+i+" and will be removed in the near future"))),t?t(o,r,a):!0}};JR.spelling=function(t){return(i,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function fme(e,t,i){if(typeof e!="object")throw new Rt("options must be an object",Rt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const o=n[s],r=t[o];if(r){const a=e[o],l=a===void 0||r(a,o,e);if(l!==!0)throw new Rt("option "+o+" must be "+l,Rt.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Rt("Unknown option "+o,Rt.ERR_BAD_OPTION)}}const bT={assertOptions:fme,validators:JR},jc=bT.validators;let cm=class{constructor(t){this.defaults=t||{},this.interceptors={request:new y5,response:new y5}}async request(t,i){try{return await this._request(t,i)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(t,i){typeof t=="string"?(i=i||{},i.url=t):i=t||{},i=Am(this.defaults,i);const{transitional:n,paramsSerializer:s,headers:o}=i;n!==void 0&&bT.assertOptions(n,{silentJSONParsing:jc.transitional(jc.boolean),forcedJSONParsing:jc.transitional(jc.boolean),clarifyTimeoutError:jc.transitional(jc.boolean)},!1),s!=null&&(Se.isFunction(s)?i.paramsSerializer={serialize:s}:bT.assertOptions(s,{encode:jc.function,serialize:jc.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),bT.assertOptions(i,{baseUrl:jc.spelling("baseURL"),withXsrfToken:jc.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let r=o&&Se.merge(o.common,o[i.method]);o&&Se.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),i.headers=Yr.concat(r,o);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(i)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,d=0,p;if(!l){const m=[T5.bind(this),void 0];for(m.unshift(...a),m.push(...c),p=m.length,u=Promise.resolve(i);d<p;)u=u.then(m[d++],m[d++]);return u}p=a.length;let f=i;for(;d<p;){const m=a[d++],v=a[d++];try{f=m(f)}catch(b){v.call(this,b);break}}try{u=T5.call(this,f)}catch(m){return Promise.reject(m)}for(d=0,p=c.length;d<p;)u=u.then(c[d++],c[d++]);return u}getUri(t){t=Am(this.defaults,t);const i=uQ(t.baseURL,t.url,t.allowAbsoluteUrls);return oQ(i,t.params,t.paramsSerializer)}};Se.forEach(["delete","get","head","options"],function(t){cm.prototype[t]=function(i,n){return this.request(Am(n||{},{method:t,url:i,data:(n||{}).data}))}});Se.forEach(["post","put","patch"],function(t){function i(n){return function(o,r,a){return this.request(Am(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:r}))}}cm.prototype[t]=i(),cm.prototype[t+"Form"]=i(!0)});let mme=class fQ{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(o){i=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const r=new Promise(a=>{n.subscribe(a),o=a}).then(s);return r.cancel=function(){n.unsubscribe(o)},r},t(function(o,r,a){n.reason||(n.reason=new xS(o,r,a),i(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const i=this._listeners.indexOf(t);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const t=new AbortController,i=n=>{t.abort(n)};return this.subscribe(i),t.signal.unsubscribe=()=>this.unsubscribe(i),t.signal}static source(){let t;return{token:new fQ(function(s){t=s}),cancel:t}}};function yme(e){return function(i){return e.apply(null,i)}}function vme(e){return Se.isObject(e)&&e.isAxiosError===!0}const MB={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(MB).forEach(([e,t])=>{MB[t]=e});function mQ(e){const t=new cm(e),i=K7(cm.prototype.request,t);return Se.extend(i,cm.prototype,t,{allOwnKeys:!0}),Se.extend(i,t,null,{allOwnKeys:!0}),i.create=function(s){return mQ(Am(e,s))},i}const wt=mQ(V0);wt.Axios=cm;wt.CanceledError=xS;wt.CancelToken=mme;wt.isCancel=lQ;wt.VERSION=gQ;wt.toFormData=QR;wt.AxiosError=Rt;wt.Cancel=wt.CanceledError;wt.all=function(t){return Promise.all(t)};wt.spread=yme;wt.isAxiosError=vme;wt.mergeConfig=Am;wt.AxiosHeaders=Yr;wt.formToJSON=e=>aQ(Se.isHTMLForm(e)?new FormData(e):e);wt.getAdapter=pQ.getAdapter;wt.HttpStatusCode=MB;wt.default=wt;const{Axios:pat,AxiosError:gat,CanceledError:fat,isCancel:mat,CancelToken:yat,VERSION:vat,all:bat,Cancel:Sat,isAxiosError:Cat,spread:xat,toFormData:wat,AxiosHeaders:Dat,HttpStatusCode:Mat,formToJSON:Aat,getAdapter:kat,mergeConfig:Tat}=wt,bme="http://localhost:4000/api/admin",R5="http://localhost:4000/api/auth";wt.defaults.withCredentials=!0;const jr=YR((e,t)=>({isLoading:!1,error:null,isAuthorized:!1,isCheckingAuth:!1,token:localStorage.getItem("token")||null,user:null,adminLogin:async(i,n)=>{e({isLoading:!0,error:!1});try{const{data:s}=await wt.post(bme+"/login",{email:i,password:n});return localStorage.setItem("token",s.token),e({user:s.user,isAuthorized:!0}),s}catch(s){console.log("error to login",s.response.data),e({error:s.response.data})}finally{e({isLoading:!1})}},login:async(i,n)=>{e({isLoading:!0,error:!1});try{const{data:s}=await wt.post(R5+"/login",{email:i,password:n});return localStorage.setItem("token",s.token),console.log(s),e({user:s.user,isAuthorized:!0}),s}catch(s){console.log("error to login",s.response.data),e({error:s.response.data})}finally{e({isLoading:!1})}},checkAuth:async()=>{e({isCheckingAuth:!0});try{const i=t().token,{data:n}=await wt.post(R5+"/checkAuth",{token:i});console.log(n),console.log(n.user.role),e({user:n.user.userInfo||n.user,isAuthorized:!0})}catch(i){console.log("error to check auth",i.response.data)}finally{e({isCheckingAuth:!1})}}}));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sme=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cme=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,n)=>n?n.toUpperCase():i.toLowerCase()),E5=e=>{const t=Cme(e);return t.charAt(0).toUpperCase()+t.slice(1)},yQ=(...e)=>e.filter((t,i,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===i).join(" ").trim(),xme=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wme={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dme=P.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:r,...a},l)=>P.createElement("svg",{ref:l,...wme,width:t,height:t,stroke:e,strokeWidth:n?Number(i)*24/Number(t):i,className:yQ("lucide",s),...!o&&!xme(a)&&{"aria-hidden":"true"},...a},[...r.map(([c,u])=>P.createElement(c,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=(e,t)=>{const i=P.forwardRef(({className:n,...s},o)=>P.createElement(Dme,{ref:o,iconNode:t,className:yQ(`lucide-${Sme(E5(e))}`,`lucide-${e}`,n),...s}));return i.displayName=E5(e),i};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mme=[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]],vQ=La("captions",Mme);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ame=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Yz=La("graduation-cap",Ame);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kme=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],NO=La("layout-dashboard",kme);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tme=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M16 12H3",key:"1a2rj7"}],["path",{d:"M11 19H3",key:"zflm78"}],["path",{d:"m15 18 2 2 4-4",key:"1szwhi"}]],OO=La("list-check",Tme);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ime=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Do=La("loader",Ime);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rme=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Eme=La("log-out",Rme);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lme=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],Pme=La("panel-left",Lme);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nme=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ome=La("plus",Nme);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fme=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],dw=La("school",Fme);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bme=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],eE=La("search",Bme);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _me=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Xz=La("square-pen",_me);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zme=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Zz=La("trash",zme);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gme=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],bQ=La("users",Gme);let Vme={data:""},Hme=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||Vme},Wme=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,jme=/\/\*[^]*?\*\/|  +/g,L5=/\n+/g,Bp=(e,t)=>{let i="",n="",s="";for(let o in e){let r=e[o];o[0]=="@"?o[1]=="i"?i=o+" "+r+";":n+=o[1]=="f"?Bp(r,o):o+"{"+Bp(r,o[1]=="k"?"":t)+"}":typeof r=="object"?n+=Bp(r,t?t.replace(/([^,])+/g,a=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):o):r!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Bp.p?Bp.p(o,r):o+":"+r+";")}return i+(t&&s?t+"{"+s+"}":s)+n},vd={},SQ=e=>{if(typeof e=="object"){let t="";for(let i in e)t+=i+SQ(e[i]);return t}return e},Ume=(e,t,i,n,s)=>{let o=SQ(e),r=vd[o]||(vd[o]=(l=>{let c=0,u=11;for(;c<l.length;)u=101*u+l.charCodeAt(c++)>>>0;return"go"+u})(o));if(!vd[r]){let l=o!==e?e:(c=>{let u,d,p=[{}];for(;u=Wme.exec(c.replace(jme,""));)u[4]?p.shift():u[3]?(d=u[3].replace(L5," ").trim(),p.unshift(p[0][d]=p[0][d]||{})):p[0][u[1]]=u[2].replace(L5," ").trim();return p[0]})(e);vd[r]=Bp(s?{["@keyframes "+r]:l}:l,i?"":"."+r)}let a=i&&vd.g?vd.g:null;return i&&(vd.g=vd[r]),((l,c,u,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=u?l+c.data:c.data+l)})(vd[r],t,n,a),r},$me=(e,t,i)=>e.reduce((n,s,o)=>{let r=t[o];if(r&&r.call){let a=r(i),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;r=l?"."+l:a&&typeof a=="object"?a.props?"":Bp(a,""):a===!1?"":a}return n+s+(r??"")},"");function tE(e){let t=this||{},i=e.call?e(t.p):e;return Ume(i.unshift?i.raw?$me(i,[].slice.call(arguments,1),t.p):i.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):i,Hme(t.target),t.g,t.o,t.k)}let CQ,AB,kB;tE.bind({g:1});let ih=tE.bind({k:1});function Kme(e,t,i,n){Bp.p=t,CQ=e,AB=i,kB=n}function mg(e,t){let i=this||{};return function(){let n=arguments;function s(o,r){let a=Object.assign({},o),l=a.className||s.className;i.p=Object.assign({theme:AB&&AB()},a),i.o=/ *go\d+/.test(l),a.className=tE.apply(i,n)+(l?" "+l:"");let c=e;return e[0]&&(c=a.as||e,delete a.as),kB&&c[0]&&kB(a),CQ(c,a)}return s}}var Yme=e=>typeof e=="function",bI=(e,t)=>Yme(e)?e(t):e,Xme=(()=>{let e=0;return()=>(++e).toString()})(),xQ=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Zme=20,qz="default",wQ=(e,t)=>{let{toastLimit:i}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,i)};case 1:return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case 2:let{toast:n}=t;return wQ(e,{type:e.toasts.find(r=>r.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(r=>r.id===s||s===void 0?{...r,dismissed:!0,visible:!1}:r)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(r=>({...r,pauseDuration:r.pauseDuration+o}))}}},ST=[],DQ={toasts:[],pausedAt:void 0,settings:{toastLimit:Zme}},fu={},MQ=(e,t=qz)=>{fu[t]=wQ(fu[t]||DQ,e),ST.forEach(([i,n])=>{i===t&&n(fu[t])})},AQ=e=>Object.keys(fu).forEach(t=>MQ(e,t)),qme=e=>Object.keys(fu).find(t=>fu[t].toasts.some(i=>i.id===e)),iE=(e=qz)=>t=>{MQ(t,e)},Qme={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Jme=(e={},t=qz)=>{let[i,n]=P.useState(fu[t]||DQ),s=P.useRef(fu[t]);P.useEffect(()=>(s.current!==fu[t]&&n(fu[t]),ST.push([t,n]),()=>{let r=ST.findIndex(([a])=>a===t);r>-1&&ST.splice(r,1)}),[t]);let o=i.toasts.map(r=>{var a,l,c;return{...e,...e[r.type],...r,removeDelay:r.removeDelay||((a=e[r.type])==null?void 0:a.removeDelay)||e?.removeDelay,duration:r.duration||((l=e[r.type])==null?void 0:l.duration)||e?.duration||Qme[r.type],style:{...e.style,...(c=e[r.type])==null?void 0:c.style,...r.style}}});return{...i,toasts:o}},eye=(e,t="blank",i)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...i,id:i?.id||Xme()}),H0=e=>(t,i)=>{let n=eye(t,e,i);return iE(n.toasterId||qme(n.id))({type:2,toast:n}),n.id},bt=(e,t)=>H0("blank")(e,t);bt.error=H0("error");bt.success=H0("success");bt.loading=H0("loading");bt.custom=H0("custom");bt.dismiss=(e,t)=>{let i={type:3,toastId:e};t?iE(t)(i):AQ(i)};bt.dismissAll=e=>bt.dismiss(void 0,e);bt.remove=(e,t)=>{let i={type:4,toastId:e};t?iE(t)(i):AQ(i)};bt.removeAll=e=>bt.remove(void 0,e);bt.promise=(e,t,i)=>{let n=bt.loading(t.loading,{...i,...i?.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let o=t.success?bI(t.success,s):void 0;return o?bt.success(o,{id:n,...i,...i?.success}):bt.dismiss(n),s}).catch(s=>{let o=t.error?bI(t.error,s):void 0;o?bt.error(o,{id:n,...i,...i?.error}):bt.dismiss(n)}),e};var tye=1e3,iye=(e,t="default")=>{let{toasts:i,pausedAt:n}=Jme(e,t),s=P.useRef(new Map).current,o=P.useCallback((d,p=tye)=>{if(s.has(d))return;let f=setTimeout(()=>{s.delete(d),r({type:4,toastId:d})},p);s.set(d,f)},[]);P.useEffect(()=>{if(n)return;let d=Date.now(),p=i.map(f=>{if(f.duration===1/0)return;let m=(f.duration||0)+f.pauseDuration-(d-f.createdAt);if(m<0){f.visible&&bt.dismiss(f.id);return}return setTimeout(()=>bt.dismiss(f.id,t),m)});return()=>{p.forEach(f=>f&&clearTimeout(f))}},[i,n,t]);let r=P.useCallback(iE(t),[t]),a=P.useCallback(()=>{r({type:5,time:Date.now()})},[r]),l=P.useCallback((d,p)=>{r({type:1,toast:{id:d,height:p}})},[r]),c=P.useCallback(()=>{n&&r({type:6,time:Date.now()})},[n,r]),u=P.useCallback((d,p)=>{let{reverseOrder:f=!1,gutter:m=8,defaultPosition:v}=p||{},b=i.filter(w=>(w.position||v)===(d.position||v)&&w.height),C=b.findIndex(w=>w.id===d.id),x=b.filter((w,M)=>M<C&&w.visible).length;return b.filter(w=>w.visible).slice(...f?[x+1]:[0,x]).reduce((w,M)=>w+(M.height||0)+m,0)},[i]);return P.useEffect(()=>{i.forEach(d=>{if(d.dismissed)o(d.id,d.removeDelay);else{let p=s.get(d.id);p&&(clearTimeout(p),s.delete(d.id))}})},[i,o]),{toasts:i,handlers:{updateHeight:l,startPause:a,endPause:c,calculateOffset:u}}},nye=ih`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,sye=ih`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,oye=ih`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,rye=mg("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${nye} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${sye} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${oye} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,aye=ih`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,lye=mg("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${aye} 1s linear infinite;
`,cye=ih`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,uye=ih`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,dye=mg("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${cye} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${uye} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,hye=mg("div")`
  position: absolute;
`,pye=mg("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,gye=ih`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fye=mg("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${gye} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,mye=({toast:e})=>{let{icon:t,type:i,iconTheme:n}=e;return t!==void 0?typeof t=="string"?P.createElement(fye,null,t):t:i==="blank"?null:P.createElement(pye,null,P.createElement(lye,{...n}),i!=="loading"&&P.createElement(hye,null,i==="error"?P.createElement(rye,{...n}):P.createElement(dye,{...n})))},yye=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,vye=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,bye="0%{opacity:0;} 100%{opacity:1;}",Sye="0%{opacity:1;} 100%{opacity:0;}",Cye=mg("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,xye=mg("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,wye=(e,t)=>{let i=e.includes("top")?1:-1,[n,s]=xQ()?[bye,Sye]:[yye(i),vye(i)];return{animation:t?`${ih(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ih(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Dye=P.memo(({toast:e,position:t,style:i,children:n})=>{let s=e.height?wye(e.position||t||"top-center",e.visible):{opacity:0},o=P.createElement(mye,{toast:e}),r=P.createElement(xye,{...e.ariaProps},bI(e.message,e));return P.createElement(Cye,{className:e.className,style:{...s,...i,...e.style}},typeof n=="function"?n({icon:o,message:r}):P.createElement(P.Fragment,null,o,r))});Kme(P.createElement);var Mye=({id:e,className:t,style:i,onHeightUpdate:n,children:s})=>{let o=P.useCallback(r=>{if(r){let a=()=>{let l=r.getBoundingClientRect().height;n(e,l)};a(),new MutationObserver(a).observe(r,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return P.createElement("div",{ref:o,className:t,style:i},s)},Aye=(e,t)=>{let i=e.includes("top"),n=i?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:xQ()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(i?1:-1)}px)`,...n,...s}},kye=tE`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,OA=16,Tye=({reverseOrder:e,position:t="top-center",toastOptions:i,gutter:n,children:s,toasterId:o,containerStyle:r,containerClassName:a})=>{let{toasts:l,handlers:c}=iye(i,o);return P.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:OA,left:OA,right:OA,bottom:OA,pointerEvents:"none",...r},className:a,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||t,p=c.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),f=Aye(d,p);return P.createElement(Mye,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?kye:"",style:f},u.type==="custom"?bI(u.message,u):s?s(u):P.createElement(Dye,{toast:u,position:d}))}))},un=bt;const Iye=()=>{const[e,t]=P.useState(""),[i,n]=P.useState(!1),[s,o]=P.useState(!1),[r,a]=P.useState(""),[l,c]=P.useState(""),{adminLogin:u,isLoading:d,error:p,login:f,user:m}=jr(),v=UR(),b=async C=>{if(C.preventDefault(),r===""||l===""){r===""&&n(!0),l===""&&o(!0);return}try{if(e==="Admin")await u(r,l)&&(bt.success("Logged in successfully"),v("/"));else{const x=await f(r,l);x&&(bt.success("Logged in successfully"),x.user.role==="teacher"?v("/teacher"):x.user.role==="student"&&v("/student"))}}catch(x){console.log("error to login",x)}};return P.useEffect(()=>{n(!1)},[r]),P.useEffect(()=>{o(!1)},[l]),X.jsx("div",{className:"bg-[#f3f2f8] min-h-screen w-full",children:X.jsxs("div",{className:"flex justify-center items-center h-screen flex-col px-5",children:[X.jsxs("div",{className:"flex flex-col justify-center items-center",children:[X.jsx("img",{className:"w-[100px]",src:U7,alt:"image logo"}),X.jsx("h2",{className:"font-semibold text-2xl py-4",children:"Sign In into your account"})]}),X.jsx("div",{className:"bg-white shadow-xl w-[400px]  flex flex-col items-center rounded",children:X.jsxs("form",{onSubmit:b,className:"w-full p-5 flex flex-col",children:[X.jsx("label",{className:"text-lg",htmlFor:"email",children:"Email"}),X.jsx(d5,{type:"email",name:"Enter  your email",setEmail:a,isEmptyEmail:i,setIsEmptyEmail:n,id:"email"}),X.jsx("label",{className:"text-lg",htmlFor:"password",children:"Password"}),X.jsx(d5,{type:"password",name:"Enter  your password",setPassword:c,isEmptyPassword:s,setIsEmptyPassword:o,id:"password"}),p&&X.jsx("div",{className:"w-full bg-red-100 border-2 border-red-200 p-4 rounded",children:X.jsx("p",{className:"text-red-500",children:p.message})}),X.jsx("button",{disabled:d,type:"submit",className:Ui("mt-6 w-full p-3 rounded font-semibold text-white bg-[#6c62ff] cursor-pointer flex justify-center",d&&"opacity-65 hover:cursor-not-allowed"),children:d?X.jsx(Do,{className:"animate-spin text-center"}):"Login"}),X.jsxs("p",{className:"mt-5",children:["Sign In as?"," ",X.jsx("span",{onClick:()=>t(C=>C==="Admin"?"":"Admin"),className:Ui("text-[#6c62ff] cursor-pointer",e==="Admin"&&"underline"),children:"Admin"})," "]})]})})]})})},Yf=({name:e,count:t,icon:i,color:n})=>X.jsxs("div",{className:"fade-up rounded-sm flex flex-1 flex-col  p-6 bg-white hover:shadow transition-all border duration-300",children:[X.jsxs("div",{className:"flex gap-3 items-center mb-4",children:[X.jsx("div",{children:i}),X.jsx("h3",{className:"text-2xl",children:e})]}),X.jsx("p",{className:"text-xl font-semibold text-gray-700",children:t})]}),kQ=6048e5,Rye=864e5,nE=6e4,sE=36e5,Eye=1e3,P5=Symbol.for("constructDateFrom");function Ai(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&P5 in e?e[P5](t):e instanceof Date?new e.constructor(t):new Date(t)}function rt(e,t){return Ai(t||e,e)}function uc(e,t,i){const n=rt(e,i?.in);return isNaN(t)?Ai(i?.in||e,NaN):(t&&n.setDate(n.getDate()+t),n)}function pc(e,t,i){const n=rt(e,i?.in);if(isNaN(t))return Ai(e,NaN);if(!t)return n;const s=n.getDate(),o=Ai(e,n.getTime());o.setMonth(n.getMonth()+t+1,0);const r=o.getDate();return s>=r?o:(n.setFullYear(o.getFullYear(),o.getMonth(),s),n)}function TQ(e,t,i){return Ai(e,+rt(e)+t)}function Lye(e,t,i){return TQ(e,t*sE)}let Pye={};function Ym(){return Pye}function nh(e,t){const i=Ym(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,s=rt(e,t?.in),o=s.getDay(),r=(o<n?7:0)+o-n;return s.setDate(s.getDate()-r),s.setHours(0,0,0,0),s}function zb(e,t){return nh(e,{...t,weekStartsOn:1})}function IQ(e,t){const i=rt(e,t?.in),n=i.getFullYear(),s=Ai(i,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const o=zb(s),r=Ai(i,0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);const a=zb(r);return i.getTime()>=o.getTime()?n+1:i.getTime()>=a.getTime()?n:n-1}function SI(e){const t=rt(e),i=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return i.setUTCFullYear(t.getFullYear()),+e-+i}function hh(e,...t){const i=Ai.bind(null,t.find(n=>typeof n=="object"));return t.map(i)}function km(e,t){const i=rt(e,t?.in);return i.setHours(0,0,0,0),i}function Gb(e,t,i){const[n,s]=hh(i?.in,e,t),o=km(n),r=km(s),a=+o-SI(o),l=+r-SI(r);return Math.round((a-l)/Rye)}function Nye(e,t){const i=IQ(e,t),n=Ai(e,0);return n.setFullYear(i,0,4),n.setHours(0,0,0,0),zb(n)}function TB(e,t,i){const n=rt(e,i?.in);return n.setTime(n.getTime()+t*nE),n}function Qz(e,t,i){return pc(e,t*3,i)}function Oye(e,t,i){return TQ(e,t*1e3)}function CI(e,t,i){return uc(e,t*7,i)}function Hd(e,t,i){return pc(e,t*12,i)}function N5(e,t){let i,n=t?.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=Ai.bind(null,s));const o=rt(s,n);(!i||i<o||isNaN(+o))&&(i=o)}),Ai(n,i||NaN)}function O5(e,t){let i,n=t?.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=Ai.bind(null,s));const o=rt(s,n);(!i||i>o||isNaN(+o))&&(i=o)}),Ai(n,i||NaN)}function Fye(e,t,i){const[n,s]=hh(i?.in,e,t);return+km(n)==+km(s)}function Wd(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function xI(e){return!(!Wd(e)&&typeof e!="number"||isNaN(+rt(e)))}function wI(e,t,i){const[n,s]=hh(i?.in,e,t),o=n.getFullYear()-s.getFullYear(),r=n.getMonth()-s.getMonth();return o*12+r}function um(e,t){const i=rt(e,t?.in);return Math.trunc(i.getMonth()/3)+1}function DI(e,t,i){const[n,s]=hh(i?.in,e,t),o=n.getFullYear()-s.getFullYear(),r=um(n)-um(s);return o*4+r}function MI(e,t,i){const[n,s]=hh(i?.in,e,t);return n.getFullYear()-s.getFullYear()}function Bye(e,t,i){const[n,s]=hh(i?.in,e,t),o=F5(n,s),r=Math.abs(Gb(n,s));n.setDate(n.getDate()-o*r);const a=+(F5(n,s)===-o),l=o*(r-a);return l===0?0:l}function F5(e,t){const i=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return i<0?-1:i>0?1:i}function RQ(e,t){const i=rt(e,t?.in);return i.setHours(23,59,59,999),i}function EQ(e,t){const i=rt(e,t?.in),n=i.getMonth();return i.setFullYear(i.getFullYear(),n+1,0),i.setHours(23,59,59,999),i}function IB(e,t){const i=rt(e,t?.in),n=i.getMonth(),s=n-n%3;return i.setMonth(s,1),i.setHours(0,0,0,0),i}function LQ(e,t){const i=rt(e,t?.in);return i.setDate(1),i.setHours(0,0,0,0),i}function PQ(e,t){const i=rt(e,t?.in),n=i.getFullYear();return i.setFullYear(n+1,0,0),i.setHours(23,59,59,999),i}function oE(e,t){const i=rt(e,t?.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}function _ye(e,t){const i=Ym(),n=i.weekStartsOn??i.locale?.options?.weekStartsOn??0,s=rt(e,t?.in),o=s.getDay(),r=(o<n?-7:0)+6-(o-n);return s.setDate(s.getDate()+r),s.setHours(23,59,59,999),s}const zye={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Gye=(e,t,i)=>{let n;const s=zye[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),i?.addSuffix?i.comparison&&i.comparison>0?"in "+n:n+" ago":n};function FO(e){return(t={})=>{const i=t.width?String(t.width):e.defaultWidth;return e.formats[i]||e.formats[e.defaultWidth]}}const Vye={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Hye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Wye={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jye={date:FO({formats:Vye,defaultWidth:"full"}),time:FO({formats:Hye,defaultWidth:"full"}),dateTime:FO({formats:Wye,defaultWidth:"full"})},Uye={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$ye=(e,t,i,n)=>Uye[e];function yx(e){return(t,i)=>{const n=i?.context?String(i.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const r=e.defaultFormattingWidth||e.defaultWidth,a=i?.width?String(i.width):r;s=e.formattingValues[a]||e.formattingValues[r]}else{const r=e.defaultWidth,a=i?.width?String(i.width):e.defaultWidth;s=e.values[a]||e.values[r]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const Kye={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yye={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Xye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Zye={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qye={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Jye=(e,t)=>{const i=Number(e),n=i%100;if(n>20||n<10)switch(n%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},eve={ordinalNumber:Jye,era:yx({values:Kye,defaultWidth:"wide"}),quarter:yx({values:Yye,defaultWidth:"wide",argumentCallback:e=>e-1}),month:yx({values:Xye,defaultWidth:"wide"}),day:yx({values:Zye,defaultWidth:"wide"}),dayPeriod:yx({values:qye,defaultWidth:"wide",formattingValues:Qye,defaultFormattingWidth:"wide"})};function vx(e){return(t,i={})=>{const n=i.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const r=o[0],a=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?ive(a,d=>d.test(r)):tve(a,d=>d.test(r));let c;c=e.valueCallback?e.valueCallback(l):l,c=i.valueCallback?i.valueCallback(c):c;const u=t.slice(r.length);return{value:c,rest:u}}}function tve(e,t){for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t(e[i]))return i}function ive(e,t){for(let i=0;i<e.length;i++)if(t(e[i]))return i}function nve(e){return(t,i={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],o=t.match(e.parsePattern);if(!o)return null;let r=e.valueCallback?e.valueCallback(o[0]):o[0];r=i.valueCallback?i.valueCallback(r):r;const a=t.slice(s.length);return{value:r,rest:a}}}const sve=/^(\d+)(th|st|nd|rd)?/i,ove=/\d+/i,rve={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ave={any:[/^b/i,/^(a|c)/i]},lve={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},cve={any:[/1/i,/2/i,/3/i,/4/i]},uve={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},dve={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},hve={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pve={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gve={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fve={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mve={ordinalNumber:nve({matchPattern:sve,parsePattern:ove,valueCallback:e=>parseInt(e,10)}),era:vx({matchPatterns:rve,defaultMatchWidth:"wide",parsePatterns:ave,defaultParseWidth:"any"}),quarter:vx({matchPatterns:lve,defaultMatchWidth:"wide",parsePatterns:cve,defaultParseWidth:"any",valueCallback:e=>e+1}),month:vx({matchPatterns:uve,defaultMatchWidth:"wide",parsePatterns:dve,defaultParseWidth:"any"}),day:vx({matchPatterns:hve,defaultMatchWidth:"wide",parsePatterns:pve,defaultParseWidth:"any"}),dayPeriod:vx({matchPatterns:gve,defaultMatchWidth:"any",parsePatterns:fve,defaultParseWidth:"any"})},NQ={code:"en-US",formatDistance:Gye,formatLong:jye,formatRelative:$ye,localize:eve,match:mve,options:{weekStartsOn:0,firstWeekContainsDate:1}};function yve(e,t){const i=rt(e,t?.in);return Gb(i,oE(i))+1}function Jz(e,t){const i=rt(e,t?.in),n=+zb(i)-+Nye(i);return Math.round(n/kQ)+1}function eG(e,t){const i=rt(e,t?.in),n=i.getFullYear(),s=Ym(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,r=Ai(t?.in||e,0);r.setFullYear(n+1,0,o),r.setHours(0,0,0,0);const a=nh(r,t),l=Ai(t?.in||e,0);l.setFullYear(n,0,o),l.setHours(0,0,0,0);const c=nh(l,t);return+i>=+a?n+1:+i>=+c?n:n-1}function vve(e,t){const i=Ym(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=eG(e,t),o=Ai(t?.in||e,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),nh(o,t)}function OQ(e,t){const i=rt(e,t?.in),n=+nh(i,t)-+vve(i,t);return Math.round(n/kQ)+1}function wi(e,t){const i=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return i+n}const dp={y(e,t){const i=e.getFullYear(),n=i>0?i:1-i;return wi(t==="yy"?n%100:n,t.length)},M(e,t){const i=e.getMonth();return t==="M"?String(i+1):wi(i+1,2)},d(e,t){return wi(e.getDate(),t.length)},a(e,t){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h(e,t){return wi(e.getHours()%12||12,t.length)},H(e,t){return wi(e.getHours(),t.length)},m(e,t){return wi(e.getMinutes(),t.length)},s(e,t){return wi(e.getSeconds(),t.length)},S(e,t){const i=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,i-3));return wi(s,t.length)}},Cv={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},B5={G:function(e,t,i){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})}},y:function(e,t,i){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return i.ordinalNumber(s,{unit:"year"})}return dp.y(e,t)},Y:function(e,t,i,n){const s=eG(e,n),o=s>0?s:1-s;if(t==="YY"){const r=o%100;return wi(r,2)}return t==="Yo"?i.ordinalNumber(o,{unit:"year"}):wi(o,t.length)},R:function(e,t){const i=IQ(e);return wi(i,t.length)},u:function(e,t){const i=e.getFullYear();return wi(i,t.length)},Q:function(e,t,i){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return wi(n,2);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,i){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return wi(n,2);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,i){const n=e.getMonth();switch(t){case"M":case"MM":return dp.M(e,t);case"Mo":return i.ordinalNumber(n+1,{unit:"month"});case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,i){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return wi(n+1,2);case"Lo":return i.ordinalNumber(n+1,{unit:"month"});case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,i,n){const s=OQ(e,n);return t==="wo"?i.ordinalNumber(s,{unit:"week"}):wi(s,t.length)},I:function(e,t,i){const n=Jz(e);return t==="Io"?i.ordinalNumber(n,{unit:"week"}):wi(n,t.length)},d:function(e,t,i){return t==="do"?i.ordinalNumber(e.getDate(),{unit:"date"}):dp.d(e,t)},D:function(e,t,i){const n=yve(e);return t==="Do"?i.ordinalNumber(n,{unit:"dayOfYear"}):wi(n,t.length)},E:function(e,t,i){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,i,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return wi(o,2);case"eo":return i.ordinalNumber(o,{unit:"day"});case"eee":return i.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(s,{width:"short",context:"formatting"});case"eeee":default:return i.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,i,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return wi(o,t.length);case"co":return i.ordinalNumber(o,{unit:"day"});case"ccc":return i.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(s,{width:"narrow",context:"standalone"});case"cccccc":return i.day(s,{width:"short",context:"standalone"});case"cccc":default:return i.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,i){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return wi(s,t.length);case"io":return i.ordinalNumber(s,{unit:"day"});case"iii":return i.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(n,{width:"short",context:"formatting"});case"iiii":default:return i.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,i){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,i){const n=e.getHours();let s;switch(n===12?s=Cv.noon:n===0?s=Cv.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,i){const n=e.getHours();let s;switch(n>=17?s=Cv.evening:n>=12?s=Cv.afternoon:n>=4?s=Cv.morning:s=Cv.night,t){case"B":case"BB":case"BBB":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,i){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),i.ordinalNumber(n,{unit:"hour"})}return dp.h(e,t)},H:function(e,t,i){return t==="Ho"?i.ordinalNumber(e.getHours(),{unit:"hour"}):dp.H(e,t)},K:function(e,t,i){const n=e.getHours()%12;return t==="Ko"?i.ordinalNumber(n,{unit:"hour"}):wi(n,t.length)},k:function(e,t,i){let n=e.getHours();return n===0&&(n=24),t==="ko"?i.ordinalNumber(n,{unit:"hour"}):wi(n,t.length)},m:function(e,t,i){return t==="mo"?i.ordinalNumber(e.getMinutes(),{unit:"minute"}):dp.m(e,t)},s:function(e,t,i){return t==="so"?i.ordinalNumber(e.getSeconds(),{unit:"second"}):dp.s(e,t)},S:function(e,t){return dp.S(e,t)},X:function(e,t,i){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return z5(n);case"XXXX":case"XX":return Bf(n);case"XXXXX":case"XXX":default:return Bf(n,":")}},x:function(e,t,i){const n=e.getTimezoneOffset();switch(t){case"x":return z5(n);case"xxxx":case"xx":return Bf(n);case"xxxxx":case"xxx":default:return Bf(n,":")}},O:function(e,t,i){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_5(n,":");case"OOOO":default:return"GMT"+Bf(n,":")}},z:function(e,t,i){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_5(n,":");case"zzzz":default:return"GMT"+Bf(n,":")}},t:function(e,t,i){const n=Math.trunc(+e/1e3);return wi(n,t.length)},T:function(e,t,i){return wi(+e,t.length)}};function _5(e,t=""){const i=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),o=n%60;return o===0?i+String(s):i+String(s)+t+wi(o,2)}function z5(e,t){return e%60===0?(e>0?"-":"+")+wi(Math.abs(e)/60,2):Bf(e,t)}function Bf(e,t=""){const i=e>0?"-":"+",n=Math.abs(e),s=wi(Math.trunc(n/60),2),o=wi(n%60,2);return i+s+t+o}const G5=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},FQ=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},bve=(e,t)=>{const i=e.match(/(P+)(p+)?/)||[],n=i[1],s=i[2];if(!s)return G5(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",G5(n,t)).replace("{{time}}",FQ(s,t))},RB={p:FQ,P:bve},Sve=/^D+$/,Cve=/^Y+$/,xve=["D","DD","YY","YYYY"];function wve(e){return Sve.test(e)}function Dve(e){return Cve.test(e)}function Mve(e,t,i){const n=Ave(e,t,i);if(console.warn(n),xve.includes(e))throw new RangeError(n)}function Ave(e,t,i){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${i}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const kve=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Tve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ive=/^'([^]*?)'?$/,Rve=/''/g,Eve=/[a-zA-Z]/;function V5(e,t,i){const n=Ym(),s=i?.locale??n.locale??NQ,o=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,r=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=rt(e,i?.in);if(!xI(a))throw new RangeError("Invalid time value");let l=t.match(Tve).map(u=>{const d=u[0];if(d==="p"||d==="P"){const p=RB[d];return p(u,s.formatLong)}return u}).join("").match(kve).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const d=u[0];if(d==="'")return{isToken:!1,value:Lve(u)};if(B5[d])return{isToken:!0,value:u};if(d.match(Eve))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:o,weekStartsOn:r,locale:s};return l.map(u=>{if(!u.isToken)return u.value;const d=u.value;(!i?.useAdditionalWeekYearTokens&&Dve(d)||!i?.useAdditionalDayOfYearTokens&&wve(d))&&Mve(d,t,String(e));const p=B5[d[0]];return p(a,d,s.localize,c)}).join("")}function Lve(e){const t=e.match(Ive);return t?t[1].replace(Rve,"'"):e}function H5(e,t){return rt(e,t?.in).getDate()}function Pve(e,t){return rt(e,t?.in).getDay()}function Nve(e,t){const i=rt(e,t?.in),n=i.getFullYear(),s=i.getMonth(),o=Ai(i,0);return o.setFullYear(n,s+1,0),o.setHours(0,0,0,0),o.getDate()}function Ove(){return Object.assign({},Ym())}function jd(e,t){return rt(e,t?.in).getHours()}function Fve(e,t){const i=rt(e,t?.in).getDay();return i===0?7:i}function Ud(e,t){return rt(e,t?.in).getMinutes()}function Ko(e,t){return rt(e,t?.in).getMonth()}function $p(e){return rt(e).getSeconds()}function EB(e){return+rt(e)}function Nt(e,t){return rt(e,t?.in).getFullYear()}function ng(e,t){return+rt(e)>+rt(t)}function mu(e,t){return+rt(e)<+rt(t)}function Bve(e,t){return+rt(e)==+rt(t)}function _ve(e,t){const i=zve(t)?new t(0):Ai(t,0);return i.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),i.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),i}function zve(e){return typeof e=="function"&&e.prototype?.constructor===e}const Gve=10;class BQ{subPriority=0;validate(t,i){return!0}}class Vve extends BQ{constructor(t,i,n,s,o){super(),this.value=t,this.validateValue=i,this.setValue=n,this.priority=s,o&&(this.subPriority=o)}validate(t,i){return this.validateValue(t,this.value,i)}set(t,i,n){return this.setValue(t,i,this.value,n)}}class Hve extends BQ{priority=Gve;subPriority=-1;constructor(t,i){super(),this.context=t||(n=>Ai(i,n))}set(t,i){return i.timestampIsSet?t:Ai(t,_ve(t,this.context))}}class yi{run(t,i,n,s){const o=this.parse(t,i,n,s);return o?{setter:new Vve(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(t,i,n){return!0}}class Wve extends yi{priority=140;parse(t,i,n){switch(i){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}}set(t,i,n){return i.era=n,t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}const Zn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},cu={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function qn(e,t){return e&&{value:t(e.value),rest:e.rest}}function gn(e,t){const i=t.match(e);return i?{value:parseInt(i[0],10),rest:t.slice(i[0].length)}:null}function uu(e,t){const i=t.match(e);if(!i)return null;if(i[0]==="Z")return{value:0,rest:t.slice(1)};const n=i[1]==="+"?1:-1,s=i[2]?parseInt(i[2],10):0,o=i[3]?parseInt(i[3],10):0,r=i[5]?parseInt(i[5],10):0;return{value:n*(s*sE+o*nE+r*Eye),rest:t.slice(i[0].length)}}function _Q(e){return gn(Zn.anyDigitsSigned,e)}function On(e,t){switch(e){case 1:return gn(Zn.singleDigit,t);case 2:return gn(Zn.twoDigits,t);case 3:return gn(Zn.threeDigits,t);case 4:return gn(Zn.fourDigits,t);default:return gn(new RegExp("^\\d{1,"+e+"}"),t)}}function AI(e,t){switch(e){case 1:return gn(Zn.singleDigitSigned,t);case 2:return gn(Zn.twoDigitsSigned,t);case 3:return gn(Zn.threeDigitsSigned,t);case 4:return gn(Zn.fourDigitsSigned,t);default:return gn(new RegExp("^-?\\d{1,"+e+"}"),t)}}function tG(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function zQ(e,t){const i=t>0,n=i?t:1-t;let s;if(n<=50)s=e||100;else{const o=n+50,r=Math.trunc(o/100)*100,a=e>=o%100;s=e+r-(a?100:0)}return i?s:1-s}function GQ(e){return e%400===0||e%4===0&&e%100!==0}class jve extends yi{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,i,n){const s=o=>({year:o,isTwoDigitYear:i==="yy"});switch(i){case"y":return qn(On(4,t),s);case"yo":return qn(n.ordinalNumber(t,{unit:"year"}),s);default:return qn(On(i.length,t),s)}}validate(t,i){return i.isTwoDigitYear||i.year>0}set(t,i,n){const s=t.getFullYear();if(n.isTwoDigitYear){const r=zQ(n.year,s);return t.setFullYear(r,0,1),t.setHours(0,0,0,0),t}const o=!("era"in i)||i.era===1?n.year:1-n.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}class Uve extends yi{priority=130;parse(t,i,n){const s=o=>({year:o,isTwoDigitYear:i==="YY"});switch(i){case"Y":return qn(On(4,t),s);case"Yo":return qn(n.ordinalNumber(t,{unit:"year"}),s);default:return qn(On(i.length,t),s)}}validate(t,i){return i.isTwoDigitYear||i.year>0}set(t,i,n,s){const o=eG(t,s);if(n.isTwoDigitYear){const a=zQ(n.year,o);return t.setFullYear(a,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),nh(t,s)}const r=!("era"in i)||i.era===1?n.year:1-n.year;return t.setFullYear(r,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),nh(t,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class $ve extends yi{priority=130;parse(t,i){return AI(i==="R"?4:i.length,t)}set(t,i,n){const s=Ai(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),zb(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Kve extends yi{priority=130;parse(t,i){return AI(i==="u"?4:i.length,t)}set(t,i,n){return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Yve extends yi{priority=120;parse(t,i,n){switch(i){case"Q":case"QQ":return On(i.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=1&&i<=4}set(t,i,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Xve extends yi{priority=120;parse(t,i,n){switch(i){case"q":case"qq":return On(i.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=1&&i<=4}set(t,i,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class Zve extends yi{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,i,n){const s=o=>o-1;switch(i){case"M":return qn(gn(Zn.month,t),s);case"MM":return qn(On(2,t),s);case"Mo":return qn(n.ordinalNumber(t,{unit:"month"}),s);case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=11}set(t,i,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}class qve extends yi{priority=110;parse(t,i,n){const s=o=>o-1;switch(i){case"L":return qn(gn(Zn.month,t),s);case"LL":return qn(On(2,t),s);case"Lo":return qn(n.ordinalNumber(t,{unit:"month"}),s);case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=0&&i<=11}set(t,i,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Qve(e,t,i){const n=rt(e,i?.in),s=OQ(n,i)-t;return n.setDate(n.getDate()-s*7),rt(n,i?.in)}class Jve extends yi{priority=100;parse(t,i,n){switch(i){case"w":return gn(Zn.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return On(i.length,t)}}validate(t,i){return i>=1&&i<=53}set(t,i,n,s){return nh(Qve(t,n,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function ebe(e,t,i){const n=rt(e,i?.in),s=Jz(n,i)-t;return n.setDate(n.getDate()-s*7),n}class tbe extends yi{priority=100;parse(t,i,n){switch(i){case"I":return gn(Zn.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return On(i.length,t)}}validate(t,i){return i>=1&&i<=53}set(t,i,n){return zb(ebe(t,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const ibe=[31,28,31,30,31,30,31,31,30,31,30,31],nbe=[31,29,31,30,31,30,31,31,30,31,30,31];class sbe extends yi{priority=90;subPriority=1;parse(t,i,n){switch(i){case"d":return gn(Zn.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return On(i.length,t)}}validate(t,i){const n=t.getFullYear(),s=GQ(n),o=t.getMonth();return s?i>=1&&i<=nbe[o]:i>=1&&i<=ibe[o]}set(t,i,n){return t.setDate(n),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class obe extends yi{priority=90;subpriority=1;parse(t,i,n){switch(i){case"D":case"DD":return gn(Zn.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return On(i.length,t)}}validate(t,i){const n=t.getFullYear();return GQ(n)?i>=1&&i<=366:i>=1&&i<=365}set(t,i,n){return t.setMonth(0,n),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function iG(e,t,i){const n=Ym(),s=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=rt(e,i?.in),r=o.getDay(),l=(t%7+7)%7,c=7-s,u=t<0||t>6?t-(r+c)%7:(l+c)%7-(r+c)%7;return uc(o,u,i)}class rbe extends yi{priority=90;parse(t,i,n){switch(i){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=6}set(t,i,n,s){return t=iG(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]}class abe extends yi{priority=90;parse(t,i,n,s){const o=r=>{const a=Math.floor((r-1)/7)*7;return(r+s.weekStartsOn+6)%7+a};switch(i){case"e":case"ee":return qn(On(i.length,t),o);case"eo":return qn(n.ordinalNumber(t,{unit:"day"}),o);case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,i){return i>=0&&i<=6}set(t,i,n,s){return t=iG(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class lbe extends yi{priority=90;parse(t,i,n,s){const o=r=>{const a=Math.floor((r-1)/7)*7;return(r+s.weekStartsOn+6)%7+a};switch(i){case"c":case"cc":return qn(On(i.length,t),o);case"co":return qn(n.ordinalNumber(t,{unit:"day"}),o);case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}}validate(t,i){return i>=0&&i<=6}set(t,i,n,s){return t=iG(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function cbe(e,t,i){const n=rt(e,i?.in),s=Fve(n,i),o=t-s;return uc(n,o,i)}class ube extends yi{priority=90;parse(t,i,n){const s=o=>o===0?7:o;switch(i){case"i":case"ii":return On(i.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return qn(n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return qn(n.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return qn(n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return qn(n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,i){return i>=1&&i<=7}set(t,i,n){return t=cbe(t,n),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class dbe extends yi{priority=80;parse(t,i,n){switch(i){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,n){return t.setHours(tG(n),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}class hbe extends yi{priority=80;parse(t,i,n){switch(i){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,n){return t.setHours(tG(n),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}class pbe extends yi{priority=80;parse(t,i,n){switch(i){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,i,n){return t.setHours(tG(n),0,0,0),t}incompatibleTokens=["a","b","t","T"]}class gbe extends yi{priority=70;parse(t,i,n){switch(i){case"h":return gn(Zn.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return On(i.length,t)}}validate(t,i){return i>=1&&i<=12}set(t,i,n){const s=t.getHours()>=12;return s&&n<12?t.setHours(n+12,0,0,0):!s&&n===12?t.setHours(0,0,0,0):t.setHours(n,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}class fbe extends yi{priority=70;parse(t,i,n){switch(i){case"H":return gn(Zn.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return On(i.length,t)}}validate(t,i){return i>=0&&i<=23}set(t,i,n){return t.setHours(n,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}class mbe extends yi{priority=70;parse(t,i,n){switch(i){case"K":return gn(Zn.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return On(i.length,t)}}validate(t,i){return i>=0&&i<=11}set(t,i,n){return t.getHours()>=12&&n<12?t.setHours(n+12,0,0,0):t.setHours(n,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}class ybe extends yi{priority=70;parse(t,i,n){switch(i){case"k":return gn(Zn.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return On(i.length,t)}}validate(t,i){return i>=1&&i<=24}set(t,i,n){const s=n<=24?n%24:n;return t.setHours(s,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}class vbe extends yi{priority=60;parse(t,i,n){switch(i){case"m":return gn(Zn.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return On(i.length,t)}}validate(t,i){return i>=0&&i<=59}set(t,i,n){return t.setMinutes(n,0,0),t}incompatibleTokens=["t","T"]}class bbe extends yi{priority=50;parse(t,i,n){switch(i){case"s":return gn(Zn.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return On(i.length,t)}}validate(t,i){return i>=0&&i<=59}set(t,i,n){return t.setSeconds(n,0),t}incompatibleTokens=["t","T"]}class Sbe extends yi{priority=30;parse(t,i){const n=s=>Math.trunc(s*Math.pow(10,-i.length+3));return qn(On(i.length,t),n)}set(t,i,n){return t.setMilliseconds(n),t}incompatibleTokens=["t","T"]}class Cbe extends yi{priority=10;parse(t,i){switch(i){case"X":return uu(cu.basicOptionalMinutes,t);case"XX":return uu(cu.basic,t);case"XXXX":return uu(cu.basicOptionalSeconds,t);case"XXXXX":return uu(cu.extendedOptionalSeconds,t);case"XXX":default:return uu(cu.extended,t)}}set(t,i,n){return i.timestampIsSet?t:Ai(t,t.getTime()-SI(t)-n)}incompatibleTokens=["t","T","x"]}class xbe extends yi{priority=10;parse(t,i){switch(i){case"x":return uu(cu.basicOptionalMinutes,t);case"xx":return uu(cu.basic,t);case"xxxx":return uu(cu.basicOptionalSeconds,t);case"xxxxx":return uu(cu.extendedOptionalSeconds,t);case"xxx":default:return uu(cu.extended,t)}}set(t,i,n){return i.timestampIsSet?t:Ai(t,t.getTime()-SI(t)-n)}incompatibleTokens=["t","T","X"]}class wbe extends yi{priority=40;parse(t){return _Q(t)}set(t,i,n){return[Ai(t,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Dbe extends yi{priority=20;parse(t){return _Q(t)}set(t,i,n){return[Ai(t,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const Mbe={G:new Wve,y:new jve,Y:new Uve,R:new $ve,u:new Kve,Q:new Yve,q:new Xve,M:new Zve,L:new qve,w:new Jve,I:new tbe,d:new sbe,D:new obe,E:new rbe,e:new abe,c:new lbe,i:new ube,a:new dbe,b:new hbe,B:new pbe,h:new gbe,H:new fbe,K:new mbe,k:new ybe,m:new vbe,s:new bbe,S:new Sbe,X:new Cbe,x:new xbe,t:new wbe,T:new Dbe},Abe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kbe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Tbe=/^'([^]*?)'?$/,Ibe=/''/g,Rbe=/\S/,Ebe=/[a-zA-Z]/;function Lbe(e,t,i,n){const s=()=>Ai(n?.in||i,NaN),o=Ove(),r=n?.locale??o.locale??NQ,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;if(!t)return e?s():rt(i,n?.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:r},u=[new Hve(n?.in,i)],d=t.match(kbe).map(b=>{const C=b[0];if(C in RB){const x=RB[C];return x(b,r.formatLong)}return b}).join("").match(Abe),p=[];for(let b of d){const C=b[0],x=Mbe[C];if(x){const{incompatibleTokens:w}=x;if(Array.isArray(w)){const T=p.find(L=>w.includes(L.token)||L.token===C);if(T)throw new RangeError(`The format string mustn't contain \`${T.fullToken}\` and \`${b}\` at the same time`)}else if(x.incompatibleTokens==="*"&&p.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);p.push({token:C,fullToken:b});const M=x.run(e,b,r.match,c);if(!M)return s();u.push(M.setter),e=M.rest}else{if(C.match(Ebe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");if(b==="''"?b="'":C==="'"&&(b=Pbe(b)),e.indexOf(b)===0)e=e.slice(b.length);else return s()}}if(e.length>0&&Rbe.test(e))return s();const f=u.map(b=>b.priority).sort((b,C)=>C-b).filter((b,C,x)=>x.indexOf(b)===C).map(b=>u.filter(C=>C.priority===b).sort((C,x)=>x.subPriority-C.subPriority)).map(b=>b[0]);let m=rt(i,n?.in);if(isNaN(+m))return s();const v={};for(const b of f){if(!b.validate(m,c))return s();const C=b.set(m,v,c);Array.isArray(C)?(m=C[0],Object.assign(v,C[1])):m=C}return m}function Pbe(e){return e.match(Tbe)[1].replace(Ibe,"'")}function Nbe(e,t,i){const[n,s]=hh(i?.in,e,t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function Obe(e,t,i){const[n,s]=hh(i?.in,e,t);return+IB(n)==+IB(s)}function Fbe(e,t,i){const[n,s]=hh(i?.in,e,t);return n.getFullYear()===s.getFullYear()}function Fw(e,t,i){const n=+rt(e,i?.in),[s,o]=[+rt(t.start,i?.in),+rt(t.end,i?.in)].sort((r,a)=>r-a);return n>=s&&n<=o}function Bbe(e,t,i){return uc(e,-1,i)}function _be(e,t){const i=()=>Ai(t?.in,NaN),s=Hbe(e);let o;if(s.date){const c=Wbe(s.date,2);o=jbe(c.restDateString,c.year)}if(!o||isNaN(+o))return i();const r=+o;let a=0,l;if(s.time&&(a=Ube(s.time),isNaN(a)))return i();if(s.timezone){if(l=$be(s.timezone),isNaN(l))return i()}else{const c=new Date(r+a),u=rt(0,t?.in);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return rt(r+a+l,t?.in)}const FA={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},zbe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Gbe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Vbe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Hbe(e){const t={},i=e.split(FA.dateTimeDelimiter);let n;if(i.length>2)return t;if(/:/.test(i[0])?n=i[0]:(t.date=i[0],n=i[1],FA.timeZoneDelimiter.test(t.date)&&(t.date=e.split(FA.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=FA.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function Wbe(e,t){const i=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(i);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?s:o*100,restDateString:e.slice((n[1]||n[2]).length)}}function jbe(e,t){if(t===null)return new Date(NaN);const i=e.match(zbe);if(!i)return new Date(NaN);const n=!!i[4],s=bx(i[1]),o=bx(i[2])-1,r=bx(i[3]),a=bx(i[4]),l=bx(i[5])-1;if(n)return qbe(t,a,l)?Kbe(t,a,l):new Date(NaN);{const c=new Date(0);return!Xbe(t,o,r)||!Zbe(t,s)?new Date(NaN):(c.setUTCFullYear(t,o,Math.max(s,r)),c)}}function bx(e){return e?parseInt(e):1}function Ube(e){const t=e.match(Gbe);if(!t)return NaN;const i=BO(t[1]),n=BO(t[2]),s=BO(t[3]);return Qbe(i,n,s)?i*sE+n*nE+s*1e3:NaN}function BO(e){return e&&parseFloat(e.replace(",","."))||0}function $be(e){if(e==="Z")return 0;const t=e.match(Vbe);if(!t)return 0;const i=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return Jbe(n,s)?i*(n*sE+s*nE):NaN}function Kbe(e,t,i){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,o=(t-1)*7+i+1-s;return n.setUTCDate(n.getUTCDate()+o),n}const Ybe=[31,null,31,30,31,30,31,31,30,31,30,31];function VQ(e){return e%400===0||e%4===0&&e%100!==0}function Xbe(e,t,i){return t>=0&&t<=11&&i>=1&&i<=(Ybe[t]||(VQ(e)?29:28))}function Zbe(e,t){return t>=1&&t<=(VQ(e)?366:365)}function qbe(e,t,i){return t>=1&&t<=53&&i>=0&&i<=6}function Qbe(e,t,i){return e===24?t===0&&i===0:i>=0&&i<60&&t>=0&&t<60&&e>=0&&e<25}function Jbe(e,t){return t>=0&&t<=59}function ma(e,t,i){const n=rt(e,i?.in),s=n.getFullYear(),o=n.getDate(),r=Ai(e,0);r.setFullYear(s,t,15),r.setHours(0,0,0,0);const a=Nve(r);return n.setMonth(t,Math.min(o,a)),n}function CT(e,t,i){const n=rt(e,i?.in);return n.setHours(t),n}function xT(e,t,i){const n=rt(e,i?.in);return n.setMinutes(t),n}function Uv(e,t,i){const n=rt(e,i?.in),s=Math.trunc(n.getMonth()/3)+1,o=t-s;return ma(n,n.getMonth()+o*3)}function wT(e,t,i){const n=rt(e,i?.in);return n.setSeconds(t),n}function iu(e,t,i){const n=rt(e,i?.in);return isNaN(+n)?Ai(e,NaN):(n.setFullYear(t),n)}function dm(e,t,i){return pc(e,-t,i)}function HQ(e,t,i){return Qz(e,-1,i)}function W5(e,t,i){return CI(e,-1,i)}function Vb(e,t,i){return Hd(e,-t,i)}function rE(){return typeof window<"u"}function wS(e){return WQ(e)?(e.nodeName||"").toLowerCase():"#document"}function wa(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Gu(e){var t;return(t=(WQ(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function WQ(e){return rE()?e instanceof Node||e instanceof wa(e).Node:!1}function fr(e){return rE()?e instanceof Element||e instanceof wa(e).Element:!1}function Ru(e){return rE()?e instanceof HTMLElement||e instanceof wa(e).HTMLElement:!1}function j5(e){return!rE()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof wa(e).ShadowRoot}const eSe=new Set(["inline","contents"]);function W0(e){const{overflow:t,overflowX:i,overflowY:n,display:s}=Pl(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+i)&&!eSe.has(s)}const tSe=new Set(["table","td","th"]);function iSe(e){return tSe.has(wS(e))}const nSe=[":popover-open",":modal"];function aE(e){return nSe.some(t=>{try{return e.matches(t)}catch{return!1}})}const sSe=["transform","translate","scale","rotate","perspective"],oSe=["transform","translate","scale","rotate","perspective","filter"],rSe=["paint","layout","strict","content"];function nG(e){const t=sG(),i=fr(e)?Pl(e):e;return sSe.some(n=>i[n]?i[n]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!t&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!t&&(i.filter?i.filter!=="none":!1)||oSe.some(n=>(i.willChange||"").includes(n))||rSe.some(n=>(i.contain||"").includes(n))}function aSe(e){let t=sg(e);for(;Ru(t)&&!Hb(t);){if(nG(t))return t;if(aE(t))return null;t=sg(t)}return null}function sG(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lSe=new Set(["html","body","#document"]);function Hb(e){return lSe.has(wS(e))}function Pl(e){return wa(e).getComputedStyle(e)}function lE(e){return fr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function sg(e){if(wS(e)==="html")return e;const t=e.assignedSlot||e.parentNode||j5(e)&&e.host||Gu(e);return j5(t)?t.host:t}function jQ(e){const t=sg(e);return Hb(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ru(t)&&W0(t)?t:jQ(t)}function Bw(e,t,i){var n;t===void 0&&(t=[]),i===void 0&&(i=!0);const s=jQ(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),r=wa(s);if(o){const a=LB(r);return t.concat(r,r.visualViewport||[],W0(s)?s:[],a&&i?Bw(a):[])}return t.concat(s,Bw(s,[],i))}function LB(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const Wb=Math.min,hm=Math.max,kI=Math.round,BA=Math.floor,Cu=e=>({x:e,y:e}),cSe={left:"right",right:"left",bottom:"top",top:"bottom"},uSe={start:"end",end:"start"};function dSe(e,t,i){return hm(e,Wb(t,i))}function cE(e,t){return typeof e=="function"?e(t):e}function jb(e){return e.split("-")[0]}function j0(e){return e.split("-")[1]}function hSe(e){return e==="x"?"y":"x"}function oG(e){return e==="y"?"height":"width"}const pSe=new Set(["top","bottom"]);function Xf(e){return pSe.has(jb(e))?"y":"x"}function rG(e){return hSe(Xf(e))}function gSe(e,t,i){i===void 0&&(i=!1);const n=j0(e),s=rG(e),o=oG(s);let r=s==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(r=TI(r)),[r,TI(r)]}function fSe(e){const t=TI(e);return[PB(e),t,PB(t)]}function PB(e){return e.replace(/start|end/g,t=>uSe[t])}const U5=["left","right"],$5=["right","left"],mSe=["top","bottom"],ySe=["bottom","top"];function vSe(e,t,i){switch(e){case"top":case"bottom":return i?t?$5:U5:t?U5:$5;case"left":case"right":return t?mSe:ySe;default:return[]}}function bSe(e,t,i,n){const s=j0(e);let o=vSe(jb(e),i==="start",n);return s&&(o=o.map(r=>r+"-"+s),t&&(o=o.concat(o.map(PB)))),o}function TI(e){return e.replace(/left|right|bottom|top/g,t=>cSe[t])}function SSe(e){return{top:0,right:0,bottom:0,left:0,...e}}function UQ(e){return typeof e!="number"?SSe(e):{top:e,right:e,bottom:e,left:e}}function II(e){const{x:t,y:i,width:n,height:s}=e;return{width:n,height:s,top:i,left:t,right:t+n,bottom:i+s,x:t,y:i}}var CSe=typeof document<"u",xSe=function(){},RI=CSe?P.useLayoutEffect:xSe;const wSe={...A7},DSe=wSe.useInsertionEffect,MSe=DSe||(e=>e());function ASe(e){const t=P.useRef(()=>{});return MSe(()=>{t.current=e}),P.useCallback(function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}function K5(e,t,i){let{reference:n,floating:s}=e;const o=Xf(t),r=rG(t),a=oG(r),l=jb(t),c=o==="y",u=n.x+n.width/2-s.width/2,d=n.y+n.height/2-s.height/2,p=n[a]/2-s[a]/2;let f;switch(l){case"top":f={x:u,y:n.y-s.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-s.width,y:d};break;default:f={x:n.x,y:n.y}}switch(j0(t)){case"start":f[r]-=p*(i&&c?-1:1);break;case"end":f[r]+=p*(i&&c?-1:1);break}return f}const kSe=async(e,t,i)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:r}=i,a=o.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(t));let c=await r.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:d}=K5(c,n,l),p=n,f={},m=0;for(let v=0;v<a.length;v++){const{name:b,fn:C}=a[v],{x,y:w,data:M,reset:T}=await C({x:u,y:d,initialPlacement:n,placement:p,strategy:s,middlewareData:f,rects:c,platform:r,elements:{reference:e,floating:t}});u=x??u,d=w??d,f={...f,[b]:{...f[b],...M}},T&&m<=50&&(m++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(c=T.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:s}):T.rects),{x:u,y:d}=K5(c,p,l)),v=-1)}return{x:u,y:d,placement:p,strategy:s,middlewareData:f}};async function TSe(e,t){var i;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:r,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:f=0}=cE(t,e),m=UQ(f),b=a[p?d==="floating"?"reference":"floating":d],C=II(await o.getClippingRect({element:(i=await(o.isElement==null?void 0:o.isElement(b)))==null||i?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:n,y:s,width:r.floating.width,height:r.floating.height}:r.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),M=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},T=II(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:w,strategy:l}):x);return{top:(C.top-T.top+m.top)/M.y,bottom:(T.bottom-C.bottom+m.bottom)/M.y,left:(C.left-T.left+m.left)/M.x,right:(T.right-C.right+m.right)/M.x}}const ISe=e=>({name:"arrow",options:e,async fn(t){const{x:i,y:n,placement:s,rects:o,platform:r,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=cE(e,t)||{};if(c==null)return{};const d=UQ(u),p={x:i,y:n},f=rG(s),m=oG(f),v=await r.getDimensions(c),b=f==="y",C=b?"top":"left",x=b?"bottom":"right",w=b?"clientHeight":"clientWidth",M=o.reference[m]+o.reference[f]-p[f]-o.floating[m],T=p[f]-o.reference[f],L=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c));let I=L?L[w]:0;(!I||!await(r.isElement==null?void 0:r.isElement(L)))&&(I=a.floating[w]||o.floating[m]);const R=M/2-T/2,O=I/2-v[m]/2-1,_=Wb(d[C],O),B=Wb(d[x],O),V=_,j=I-v[m]-B,K=I/2-v[m]/2+R,Y=dSe(V,K,j),G=!l.arrow&&j0(s)!=null&&K!==Y&&o.reference[m]/2-(K<V?_:B)-v[m]/2<0,$=G?K<V?K-V:K-j:0;return{[f]:p[f]+$,data:{[f]:Y,centerOffset:K-Y-$,...G&&{alignmentOffset:$}},reset:G}}}),RSe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i,n;const{placement:s,middlewareData:o,rects:r,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...b}=cE(e,t);if((i=o.arrow)!=null&&i.alignmentOffset)return{};const C=jb(s),x=Xf(a),w=jb(a)===a,M=await(l.isRTL==null?void 0:l.isRTL(c.floating)),T=p||(w||!v?[TI(a)]:fSe(a)),L=m!=="none";!p&&L&&T.push(...bSe(a,v,m,M));const I=[a,...T],R=await TSe(t,b),O=[];let _=((n=o.flip)==null?void 0:n.overflows)||[];if(u&&O.push(R[C]),d){const K=gSe(s,r,M);O.push(R[K[0]],R[K[1]])}if(_=[..._,{placement:s,overflows:O}],!O.every(K=>K<=0)){var B,V;const K=(((B=o.flip)==null?void 0:B.index)||0)+1,Y=I[K];if(Y&&(!(d==="alignment"?x!==Xf(Y):!1)||_.every(W=>Xf(W.placement)===x?W.overflows[0]>0:!0)))return{data:{index:K,overflows:_},reset:{placement:Y}};let G=(V=_.filter($=>$.overflows[0]<=0).sort(($,W)=>$.overflows[1]-W.overflows[1])[0])==null?void 0:V.placement;if(!G)switch(f){case"bestFit":{var j;const $=(j=_.filter(W=>{if(L){const Q=Xf(W.placement);return Q===x||Q==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(Q=>Q>0).reduce((Q,q)=>Q+q,0)]).sort((W,Q)=>W[1]-Q[1])[0])==null?void 0:j[0];$&&(G=$);break}case"initialPlacement":G=a;break}if(s!==G)return{reset:{placement:G}}}return{}}}},ESe=new Set(["left","top"]);async function LSe(e,t){const{placement:i,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),r=jb(i),a=j0(i),l=Xf(i)==="y",c=ESe.has(r)?-1:1,u=o&&l?-1:1,d=cE(t,e);let{mainAxis:p,crossAxis:f,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(f=a==="end"?m*-1:m),l?{x:f*u,y:p*c}:{x:p*c,y:f*u}}const PSe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,n;const{x:s,y:o,placement:r,middlewareData:a}=t,l=await LSe(t,e);return r===((i=a.offset)==null?void 0:i.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:r}}}}};function $Q(e){const t=Pl(e);let i=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Ru(e),o=s?e.offsetWidth:i,r=s?e.offsetHeight:n,a=kI(i)!==o||kI(n)!==r;return a&&(i=o,n=r),{width:i,height:n,$:a}}function aG(e){return fr(e)?e:e.contextElement}function pb(e){const t=aG(e);if(!Ru(t))return Cu(1);const i=t.getBoundingClientRect(),{width:n,height:s,$:o}=$Q(t);let r=(o?kI(i.width):i.width)/n,a=(o?kI(i.height):i.height)/s;return(!r||!Number.isFinite(r))&&(r=1),(!a||!Number.isFinite(a))&&(a=1),{x:r,y:a}}const NSe=Cu(0);function KQ(e){const t=wa(e);return!sG()||!t.visualViewport?NSe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function OSe(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==wa(e)?!1:t}function Tm(e,t,i,n){t===void 0&&(t=!1),i===void 0&&(i=!1);const s=e.getBoundingClientRect(),o=aG(e);let r=Cu(1);t&&(n?fr(n)&&(r=pb(n)):r=pb(e));const a=OSe(o,i,n)?KQ(o):Cu(0);let l=(s.left+a.x)/r.x,c=(s.top+a.y)/r.y,u=s.width/r.x,d=s.height/r.y;if(o){const p=wa(o),f=n&&fr(n)?wa(n):n;let m=p,v=LB(m);for(;v&&n&&f!==m;){const b=pb(v),C=v.getBoundingClientRect(),x=Pl(v),w=C.left+(v.clientLeft+parseFloat(x.paddingLeft))*b.x,M=C.top+(v.clientTop+parseFloat(x.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,d*=b.y,l+=w,c+=M,m=wa(v),v=LB(m)}}return II({width:u,height:d,x:l,y:c})}function uE(e,t){const i=lE(e).scrollLeft;return t?t.left+i:Tm(Gu(e)).left+i}function YQ(e,t){const i=e.getBoundingClientRect(),n=i.left+t.scrollLeft-uE(e,i),s=i.top+t.scrollTop;return{x:n,y:s}}function FSe(e){let{elements:t,rect:i,offsetParent:n,strategy:s}=e;const o=s==="fixed",r=Gu(n),a=t?aE(t.floating):!1;if(n===r||a&&o)return i;let l={scrollLeft:0,scrollTop:0},c=Cu(1);const u=Cu(0),d=Ru(n);if((d||!d&&!o)&&((wS(n)!=="body"||W0(r))&&(l=lE(n)),Ru(n))){const f=Tm(n);c=pb(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const p=r&&!d&&!o?YQ(r,l):Cu(0);return{width:i.width*c.x,height:i.height*c.y,x:i.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:i.y*c.y-l.scrollTop*c.y+u.y+p.y}}function BSe(e){return Array.from(e.getClientRects())}function _Se(e){const t=Gu(e),i=lE(e),n=e.ownerDocument.body,s=hm(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=hm(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let r=-i.scrollLeft+uE(e);const a=-i.scrollTop;return Pl(n).direction==="rtl"&&(r+=hm(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:r,y:a}}const Y5=25;function zSe(e,t){const i=wa(e),n=Gu(e),s=i.visualViewport;let o=n.clientWidth,r=n.clientHeight,a=0,l=0;if(s){o=s.width,r=s.height;const u=sG();(!u||u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}const c=uE(n);if(c<=0){const u=n.ownerDocument,d=u.body,p=getComputedStyle(d),f=u.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,m=Math.abs(n.clientWidth-d.clientWidth-f);m<=Y5&&(o-=m)}else c<=Y5&&(o+=c);return{width:o,height:r,x:a,y:l}}const GSe=new Set(["absolute","fixed"]);function VSe(e,t){const i=Tm(e,!0,t==="fixed"),n=i.top+e.clientTop,s=i.left+e.clientLeft,o=Ru(e)?pb(e):Cu(1),r=e.clientWidth*o.x,a=e.clientHeight*o.y,l=s*o.x,c=n*o.y;return{width:r,height:a,x:l,y:c}}function X5(e,t,i){let n;if(t==="viewport")n=zSe(e,i);else if(t==="document")n=_Se(Gu(e));else if(fr(t))n=VSe(t,i);else{const s=KQ(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return II(n)}function XQ(e,t){const i=sg(e);return i===t||!fr(i)||Hb(i)?!1:Pl(i).position==="fixed"||XQ(i,t)}function HSe(e,t){const i=t.get(e);if(i)return i;let n=Bw(e,[],!1).filter(a=>fr(a)&&wS(a)!=="body"),s=null;const o=Pl(e).position==="fixed";let r=o?sg(e):e;for(;fr(r)&&!Hb(r);){const a=Pl(r),l=nG(r);!l&&a.position==="fixed"&&(s=null),(o?!l&&!s:!l&&a.position==="static"&&!!s&&GSe.has(s.position)||W0(r)&&!l&&XQ(e,r))?n=n.filter(u=>u!==r):s=a,r=sg(r)}return t.set(e,n),n}function WSe(e){let{element:t,boundary:i,rootBoundary:n,strategy:s}=e;const r=[...i==="clippingAncestors"?aE(t)?[]:HSe(t,this._c):[].concat(i),n],a=r[0],l=r.reduce((c,u)=>{const d=X5(t,u,s);return c.top=hm(d.top,c.top),c.right=Wb(d.right,c.right),c.bottom=Wb(d.bottom,c.bottom),c.left=hm(d.left,c.left),c},X5(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function jSe(e){const{width:t,height:i}=$Q(e);return{width:t,height:i}}function USe(e,t,i){const n=Ru(t),s=Gu(t),o=i==="fixed",r=Tm(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const l=Cu(0);function c(){l.x=uE(s)}if(n||!n&&!o)if((wS(t)!=="body"||W0(s))&&(a=lE(t)),n){const f=Tm(t,!0,o,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else s&&c();o&&!n&&s&&c();const u=s&&!n&&!o?YQ(s,a):Cu(0),d=r.left+a.scrollLeft-l.x-u.x,p=r.top+a.scrollTop-l.y-u.y;return{x:d,y:p,width:r.width,height:r.height}}function _O(e){return Pl(e).position==="static"}function Z5(e,t){if(!Ru(e)||Pl(e).position==="fixed")return null;if(t)return t(e);let i=e.offsetParent;return Gu(e)===i&&(i=i.ownerDocument.body),i}function ZQ(e,t){const i=wa(e);if(aE(e))return i;if(!Ru(e)){let s=sg(e);for(;s&&!Hb(s);){if(fr(s)&&!_O(s))return s;s=sg(s)}return i}let n=Z5(e,t);for(;n&&iSe(n)&&_O(n);)n=Z5(n,t);return n&&Hb(n)&&_O(n)&&!nG(n)?i:n||aSe(e)||i}const $Se=async function(e){const t=this.getOffsetParent||ZQ,i=this.getDimensions,n=await i(e.floating);return{reference:USe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function KSe(e){return Pl(e).direction==="rtl"}const YSe={convertOffsetParentRelativeRectToViewportRelativeRect:FSe,getDocumentElement:Gu,getClippingRect:WSe,getOffsetParent:ZQ,getElementRects:$Se,getClientRects:BSe,getDimensions:jSe,getScale:pb,isElement:fr,isRTL:KSe};function qQ(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function XSe(e,t){let i=null,n;const s=Gu(e);function o(){var a;clearTimeout(n),(a=i)==null||a.disconnect(),i=null}function r(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const c=e.getBoundingClientRect(),{left:u,top:d,width:p,height:f}=c;if(a||t(),!p||!f)return;const m=BA(d),v=BA(s.clientWidth-(u+p)),b=BA(s.clientHeight-(d+f)),C=BA(u),w={rootMargin:-m+"px "+-v+"px "+-b+"px "+-C+"px",threshold:hm(0,Wb(1,l))||1};let M=!0;function T(L){const I=L[0].intersectionRatio;if(I!==l){if(!M)return r();I?r(!1,I):n=setTimeout(()=>{r(!1,1e-7)},1e3)}I===1&&!qQ(c,e.getBoundingClientRect())&&r(),M=!1}try{i=new IntersectionObserver(T,{...w,root:s.ownerDocument})}catch{i=new IntersectionObserver(T,w)}i.observe(e)}return r(!0),o}function ZSe(e,t,i,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=aG(e),u=s||o?[...c?Bw(c):[],...Bw(t)]:[];u.forEach(C=>{s&&C.addEventListener("scroll",i,{passive:!0}),o&&C.addEventListener("resize",i)});const d=c&&a?XSe(c,i):null;let p=-1,f=null;r&&(f=new ResizeObserver(C=>{let[x]=C;x&&x.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(t)})),i()}),c&&!l&&f.observe(c),f.observe(t));let m,v=l?Tm(e):null;l&&b();function b(){const C=Tm(e);v&&!qQ(v,C)&&i(),v=C,m=requestAnimationFrame(b)}return i(),()=>{var C;u.forEach(x=>{s&&x.removeEventListener("scroll",i),o&&x.removeEventListener("resize",i)}),d?.(),(C=f)==null||C.disconnect(),f=null,l&&cancelAnimationFrame(m)}}const qSe=PSe,QSe=RSe,q5=ISe,JSe=(e,t,i)=>{const n=new Map,s={platform:YSe,...i},o={...s.platform,_c:n};return kSe(e,t,{...s,platform:o})};var eCe=typeof document<"u",tCe=function(){},DT=eCe?P.useLayoutEffect:tCe;function EI(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let i,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==t.length)return!1;for(n=i;n--!==0;)if(!EI(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),i=s.length,i!==Object.keys(t).length)return!1;for(n=i;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=i;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!EI(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function QQ(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Q5(e,t){const i=QQ(e);return Math.round(t*i)/i}function zO(e){const t=P.useRef(e);return DT(()=>{t.current=e}),t}function iCe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:i="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:r}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=P.useState({x:0,y:0,strategy:i,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=P.useState(n);EI(p,n)||f(n);const[m,v]=P.useState(null),[b,C]=P.useState(null),x=P.useCallback(W=>{W!==L.current&&(L.current=W,v(W))},[]),w=P.useCallback(W=>{W!==I.current&&(I.current=W,C(W))},[]),M=o||m,T=r||b,L=P.useRef(null),I=P.useRef(null),R=P.useRef(u),O=l!=null,_=zO(l),B=zO(s),V=zO(c),j=P.useCallback(()=>{if(!L.current||!I.current)return;const W={placement:t,strategy:i,middleware:p};B.current&&(W.platform=B.current),JSe(L.current,I.current,W).then(Q=>{const q={...Q,isPositioned:V.current!==!1};K.current&&!EI(R.current,q)&&(R.current=q,KR.flushSync(()=>{d(q)}))})},[p,t,i,B,V]);DT(()=>{c===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,d(W=>({...W,isPositioned:!1})))},[c]);const K=P.useRef(!1);DT(()=>(K.current=!0,()=>{K.current=!1}),[]),DT(()=>{if(M&&(L.current=M),T&&(I.current=T),M&&T){if(_.current)return _.current(M,T,j);j()}},[M,T,j,_,O]);const Y=P.useMemo(()=>({reference:L,floating:I,setReference:x,setFloating:w}),[x,w]),G=P.useMemo(()=>({reference:M,floating:T}),[M,T]),$=P.useMemo(()=>{const W={position:i,left:0,top:0};if(!G.floating)return W;const Q=Q5(G.floating,u.x),q=Q5(G.floating,u.y);return a?{...W,transform:"translate("+Q+"px, "+q+"px)",...QQ(G.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:Q,top:q}},[i,a,G.floating,u.x,u.y]);return P.useMemo(()=>({...u,update:j,refs:Y,elements:G,floatingStyles:$}),[u,j,Y,G,$])}const nCe=e=>{function t(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){const{element:n,padding:s}=typeof e=="function"?e(i):e;return n&&t(n)?n.current!=null?q5({element:n.current,padding:s}).fn(i):{}:n?q5({element:n,padding:s}).fn(i):{}}}},sCe=(e,t)=>({...qSe(e),options:[e,t]}),oCe=(e,t)=>({...QSe(e),options:[e,t]}),rCe=(e,t)=>({...nCe(e),options:[e,t]}),aCe={...A7};let J5=!1,lCe=0;const eK=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+lCe++;function cCe(){const[e,t]=P.useState(()=>J5?eK():void 0);return RI(()=>{e==null&&t(eK())},[]),P.useEffect(()=>{J5=!0},[]),e}const uCe=aCe.useId,JQ=uCe||cCe,dCe=P.forwardRef(function(t,i){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:o,shift:r}},width:a=14,height:l=7,tipRadius:c=0,strokeWidth:u=0,staticOffset:d,stroke:p,d:f,style:{transform:m,...v}={},...b}=t,C=JQ(),[x,w]=P.useState(!1);if(RI(()=>{if(!s)return;Pl(s).direction==="rtl"&&w(!0)},[s]),!s)return null;const[M,T]=n.split("-"),L=M==="top"||M==="bottom";let I=d;(L&&r!=null&&r.x||!L&&r!=null&&r.y)&&(I=null);const R=u*2,O=R/2,_=a/2*(c/-8+1),B=l/2*c/4,V=!!f,j=I&&T==="end"?"bottom":"top";let K=I&&T==="end"?"right":"left";I&&x&&(K=T==="end"?"left":"right");const Y=o?.x!=null?I||o.x:"",G=o?.y!=null?I||o.y:"",$=f||"M0,0"+(" H"+a)+(" L"+(a-_)+","+(l-B))+(" Q"+a/2+","+l+" "+_+","+(l-B))+" Z",W={top:V?"rotate(180deg)":"",left:V?"rotate(90deg)":"rotate(-90deg)",bottom:V?"":"rotate(180deg)",right:V?"rotate(-90deg)":"rotate(90deg)"}[M];return X.jsxs("svg",{...b,"aria-hidden":!0,ref:i,width:V?a:a+R,height:a,viewBox:"0 0 "+a+" "+(l>a?l:a),style:{position:"absolute",pointerEvents:"none",[K]:Y,[j]:G,[M]:L||V?"100%":"calc(100% - "+R/2+"px)",transform:[W,m].filter(Q=>!!Q).join(" "),...v},children:[R>0&&X.jsx("path",{clipPath:"url(#"+C+")",fill:"none",stroke:p,strokeWidth:R+(f?0:1),d:$}),X.jsx("path",{stroke:R&&!f?b.fill:"none",d:$}),X.jsx("clipPath",{id:C,children:X.jsx("rect",{x:-O,y:O*(V?-1:1),width:a+R,height:a})})]})});function hCe(){const e=new Map;return{emit(t,i){var n;(n=e.get(t))==null||n.forEach(s=>s(i))},on(t,i){e.has(t)||e.set(t,new Set),e.get(t).add(i)},off(t,i){var n;(n=e.get(t))==null||n.delete(i)}}}const pCe=P.createContext(null),gCe=P.createContext(null),fCe=()=>{var e;return((e=P.useContext(pCe))==null?void 0:e.id)||null},mCe=()=>P.useContext(gCe);function yCe(e){const{open:t=!1,onOpenChange:i,elements:n}=e,s=JQ(),o=P.useRef({}),[r]=P.useState(()=>hCe()),a=fCe()!=null,[l,c]=P.useState(n.reference),u=ASe((f,m,v)=>{o.current.openEvent=f?m:void 0,r.emit("openchange",{open:f,event:m,reason:v,nested:a}),i?.(f,m,v)}),d=P.useMemo(()=>({setPositionReference:c}),[]),p=P.useMemo(()=>({reference:l||n.reference||null,floating:n.floating||null,domReference:n.reference}),[l,n.reference,n.floating]);return P.useMemo(()=>({dataRef:o,open:t,onOpenChange:u,elements:p,events:r,floatingId:s,refs:d}),[t,u,p,r,s,d])}function vCe(e){e===void 0&&(e={});const{nodeId:t}=e,i=yCe({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||i,s=n.elements,[o,r]=P.useState(null),[a,l]=P.useState(null),u=s?.domReference||o,d=P.useRef(null),p=mCe();RI(()=>{u&&(d.current=u)},[u]);const f=iCe({...e,elements:{...s,...a&&{reference:a}}}),m=P.useCallback(w=>{const M=fr(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),getClientRects:()=>w.getClientRects(),contextElement:w}:w;l(M),f.refs.setReference(M)},[f.refs]),v=P.useCallback(w=>{(fr(w)||w===null)&&(d.current=w,r(w)),(fr(f.refs.reference.current)||f.refs.reference.current===null||w!==null&&!fr(w))&&f.refs.setReference(w)},[f.refs]),b=P.useMemo(()=>({...f.refs,setReference:v,setPositionReference:m,domReference:d}),[f.refs,v,m]),C=P.useMemo(()=>({...f.elements,domReference:u}),[f.elements,u]),x=P.useMemo(()=>({...f,...n,refs:b,elements:C,nodeId:t}),[f,b,C,t,n]);return RI(()=>{n.dataRef.current.floatingContext=x;const w=p?.nodesRef.current.find(M=>M.id===t);w&&(w.context=x)}),P.useMemo(()=>({...f,context:x,refs:b,elements:C}),[f,b,C,x])}/*!
  react-datepicker v8.8.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var NB=function(t,i){return NB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},NB(t,i)};function ko(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");NB(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}var $t=function(){return $t=Object.assign||function(i){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},$t.apply(this,arguments)};function yu(e,t,i){if(i||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var bCe=function(e){var t=e.showTimeSelectOnly,i=t===void 0?!1:t,n=e.showTime,s=n===void 0?!1:n,o=e.className,r=e.children,a=i?"Choose Time":"Choose Date".concat(s?" and Time":"");return se.createElement("div",{className:o,role:"dialog","aria-label":a,"aria-modal":"true"},r)},SCe=function(e,t){var i=P.useRef(null),n=P.useRef(e);n.current=e;var s=P.useCallback(function(o){var r,a=o.composed&&o.composedPath&&o.composedPath().find(function(l){return l instanceof Node})||o.target;i.current&&!i.current.contains(a)&&(t&&a instanceof HTMLElement&&a.classList.contains(t)||(r=n.current)===null||r===void 0||r.call(n,o))},[t]);return P.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),i},dE=function(e){var t=e.children,i=e.onClickOutside,n=e.className,s=e.containerRef,o=e.style,r=e.ignoreClass,a=SCe(i,r);return se.createElement("div",{className:n,style:o,ref:function(l){a.current=l,s&&(s.current=l)}},t)},qe;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(qe||(qe={}));function eJ(){var e=typeof window<"u"?window:globalThis;return e}var U0=12;function vi(e){if(e==null)return new Date;var t=typeof e=="string"?_be(e):rt(e);return hE(t)?t:new Date}function GO(e,t,i,n,s){s===void 0&&(s=vi());for(var o=Ub(i)||Ub(lG()),r=Array.isArray(t)?t:[t],a=0,l=r;a<l.length;a++){var c=l[a],u=Lbe(e,c,s,{locale:o});if(hE(u)&&(!n||e===$i(u,c,i)))return u}return null}function hE(e,t){return xI(e)&&!mu(e,new Date("1/1/1800"))}function $i(e,t,i){if(i==="en")return V5(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=i?Ub(i):void 0;return i&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(i,'"].')),n=n||Ub(lG()),V5(e,t,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function ga(e,t){var i=t.dateFormat,n=t.locale,s=Array.isArray(i)&&i.length>0?i[0]:i;return e&&$i(e,s,n)||""}var tJ=" - ";function CCe(e,t,i){if(!e&&!t)return"";var n=e?ga(e,i):"",s=t?ga(t,i):"",o=i.rangeSeparator||tJ;return"".concat(n).concat(o).concat(s)}function xCe(e,t){if(!e?.length)return"";var i=e[0]?ga(e[0],t):"";if(e.length===1)return i;if(e.length===2&&e[1]){var n=ga(e[1],t);return"".concat(i,", ").concat(n)}var s=e.length-1;return"".concat(i," (+").concat(s,")")}function VO(e,t){var i=t.hour,n=i===void 0?0:i,s=t.minute,o=s===void 0?0:s,r=t.second,a=r===void 0?0:r;return CT(xT(wT(e,a),o),n)}function wCe(e){return Jz(e)}function DCe(e,t){return $i(e,"ddd",t)}function MT(e){return km(e)}function Kp(e,t,i){var n=Ub(t||lG());return nh(e,{locale:n,weekStartsOn:i})}function $d(e){return LQ(e)}function Kx(e){return oE(e)}function tK(e){return IB(e)}function iK(){return km(vi())}function nK(e){return RQ(e)}function MCe(e){return _ye(e)}function ACe(e){return EQ(e)}function ou(e,t){return e&&t?Fbe(e,t):!e&&!t}function ur(e,t){return e&&t?Nbe(e,t):!e&&!t}function LI(e,t){return e&&t?Obe(e,t):!e&&!t}function Ut(e,t){return e&&t?Fye(e,t):!e&&!t}function Zf(e,t){return e&&t?Bve(e,t):!e&&!t}function _f(e,t,i){var n,s=km(t),o=RQ(i);try{n=Fw(e,{start:s,end:o})}catch{n=!1}return n}function lG(){var e=eJ();return e.__localeId__}function Ub(e){if(typeof e=="string"){var t=eJ();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function kCe(e,t,i){return t($i(e,"EEEE",i))}function TCe(e,t){return $i(e,"EEEEEE",t)}function ICe(e,t){return $i(e,"EEE",t)}function cG(e,t){return $i(ma(vi(),e),"LLLL",t)}function iJ(e,t){return $i(ma(vi(),e),"LLL",t)}function RCe(e,t){return $i(Uv(vi(),e),"QQQ",t)}function yl(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.maxDate,o=i.excludeDates,r=i.excludeDateIntervals,a=i.includeDates,l=i.includeDateIntervals,c=i.filterDate,u=i.disabled;return u?!0:$0(e,{minDate:n,maxDate:s})||o&&o.some(function(d){return d instanceof Date?Ut(e,d):Ut(e,d.date)})||r&&r.some(function(d){var p=d.start,f=d.end;return Fw(e,{start:p,end:f})})||a&&!a.some(function(d){return Ut(e,d)})||l&&!l.some(function(d){var p=d.start,f=d.end;return Fw(e,{start:p,end:f})})||c&&!c(vi(e))||!1}function uG(e,t){var i=t===void 0?{}:t,n=i.excludeDates,s=i.excludeDateIntervals;return s&&s.length>0?s.some(function(o){var r=o.start,a=o.end;return Fw(e,{start:r,end:a})}):n&&n.some(function(o){var r;return o instanceof Date?Ut(e,o):Ut(e,(r=o.date)!==null&&r!==void 0?r:new Date)})||!1}function nJ(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.maxDate,o=i.excludeDates,r=i.includeDates,a=i.filterDate;return $0(e,{minDate:n?LQ(n):void 0,maxDate:s?EQ(s):void 0})||o?.some(function(l){return ur(e,l instanceof Date?l:l.date)})||r&&!r.some(function(l){return ur(e,l)})||a&&!a(vi(e))||!1}function _A(e,t,i,n){var s=Nt(e),o=Ko(e),r=Nt(t),a=Ko(t),l=Nt(n);return s===r&&s===l?o<=i&&i<=a:s<r?l===s&&o<=i||l===r&&a>=i||l<r&&l>s:!1}function ECe(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.maxDate,o=i.excludeDates,r=i.includeDates;return $0(e,{minDate:n,maxDate:s})||o&&o.some(function(a){return ur(a instanceof Date?a:a.date,e)})||r&&!r.some(function(a){return ur(a,e)})||!1}function zA(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.maxDate,o=i.excludeDates,r=i.includeDates,a=i.filterDate,l=i.disabled;return l?!0:$0(e,{minDate:n,maxDate:s})||o?.some(function(c){return LI(e,c instanceof Date?c:c.date)})||r&&!r.some(function(c){return LI(e,c)})||a&&!a(vi(e))||!1}function GA(e,t,i){if(!t||!i||!xI(t)||!xI(i))return!1;var n=Nt(t),s=Nt(i);return n<=e&&s>=e}function AT(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.maxDate,o=i.excludeDates,r=i.includeDates,a=i.filterDate,l=i.disabled;if(l)return!0;var c=new Date(e,0,1);return $0(c,{minDate:n?oE(n):void 0,maxDate:s?PQ(s):void 0})||o?.some(function(u){return ou(c,u instanceof Date?u:u.date)})||r&&!r.some(function(u){return ou(c,u)})||a&&!a(vi(c))||!1}function VA(e,t,i,n){var s=Nt(e),o=um(e),r=Nt(t),a=um(t),l=Nt(n);return s===r&&s===l?o<=i&&i<=a:s<r?l===s&&o<=i||l===r&&a>=i||l<r&&l>s:!1}function $0(e,t){var i,n=t===void 0?{}:t,s=n.minDate,o=n.maxDate;return(i=s&&Gb(e,s)<0||o&&Gb(e,o)>0)!==null&&i!==void 0?i:!1}function sK(e,t){return t.some(function(i){return jd(i)===jd(e)&&Ud(i)===Ud(e)&&$p(i)===$p(e)})}function oK(e,t){var i=t===void 0?{}:t,n=i.excludeTimes,s=i.includeTimes,o=i.filterTime;return n&&sK(e,n)||s&&!sK(e,s)||o&&!o(e)||!1}function rK(e,t){var i=t.minTime,n=t.maxTime;if(!i||!n)throw new Error("Both minTime and maxTime props required");var s=vi();s=CT(s,jd(e)),s=xT(s,Ud(e)),s=wT(s,$p(e));var o=vi();o=CT(o,jd(i)),o=xT(o,Ud(i)),o=wT(o,$p(i));var r=vi();r=CT(r,jd(n)),r=xT(r,Ud(n)),r=wT(r,$p(n));var a;try{a=!Fw(s,{start:o,end:r})}catch{a=!1}return a}function aK(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.includeDates,o=dm(e,1);return n&&wI(n,o)>0||s&&s.every(function(r){return wI(r,o)>0})||!1}function lK(e,t){var i=t===void 0?{}:t,n=i.maxDate,s=i.includeDates,o=pc(e,1);return n&&wI(o,n)>0||s&&s.every(function(r){return wI(o,r)>0})||!1}function LCe(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.includeDates,o=oE(e),r=HQ(o);return n&&DI(n,r)>0||s&&s.every(function(a){return DI(a,r)>0})||!1}function PCe(e,t){var i=t===void 0?{}:t,n=i.maxDate,s=i.includeDates,o=PQ(e),r=Qz(o,1);return n&&DI(r,n)>0||s&&s.every(function(a){return DI(r,a)>0})||!1}function cK(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.includeDates,o=Vb(e,1);return n&&MI(n,o)>0||s&&s.every(function(r){return MI(r,o)>0})||!1}function NCe(e,t){var i=t===void 0?{}:t,n=i.minDate,s=i.yearItemNumber,o=s===void 0?U0:s,r=Kx(Vb(e,o)),a=_d(r,o).endPeriod,l=n&&Nt(n);return l&&l>a||!1}function uK(e,t){var i=t===void 0?{}:t,n=i.maxDate,s=i.includeDates,o=Hd(e,1);return n&&MI(o,n)>0||s&&s.every(function(r){return MI(o,r)>0})||!1}function OCe(e,t){var i=t===void 0?{}:t,n=i.maxDate,s=i.yearItemNumber,o=s===void 0?U0:s,r=Hd(e,o),a=_d(r,o).startPeriod,l=n&&Nt(n);return l&&l<a||!1}function sJ(e){var t=e.minDate,i=e.includeDates;if(i&&t){var n=i.filter(function(s){return Gb(s,t)>=0});return O5(n)}else return i?O5(i):t}function oJ(e){var t=e.maxDate,i=e.includeDates;if(i&&t){var n=i.filter(function(s){return Gb(s,t)<=0});return N5(n)}else return i?N5(i):t}function dK(e,t){var i;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var n=new Map,s=0,o=e.length;s<o;s++){var r=e[s];if(Wd(r)){var a=$i(r,"MM.dd.yyyy"),l=n.get(a)||[];l.includes(t)||(l.push(t),n.set(a,l))}else if(typeof r=="object"){var c=Object.keys(r),u=(i=c[0])!==null&&i!==void 0?i:"",d=r[u];if(typeof u=="string"&&Array.isArray(d))for(var p=0,f=d.length;p<f;p++){var m=d[p];if(m){var a=$i(m,"MM.dd.yyyy"),l=n.get(a)||[];l.includes(u)||(l.push(u),n.set(a,l))}}}}return n}function FCe(e,t){return e.length!==t.length?!1:e.every(function(i,n){return i===t[n]})}function BCe(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var i=new Map;return e.forEach(function(n){var s=n.date,o=n.holidayName;if(Wd(s)){var r=$i(s,"MM.dd.yyyy"),a=i.get(r)||{className:"",holidayNames:[]};if(!("className"in a&&a.className===t&&FCe(a.holidayNames,[o]))){a.className=t;var l=a.holidayNames;a.holidayNames=l?yu(yu([],l,!0),[o],!1):[o],i.set(r,a)}}}),i}function _Ce(e,t,i,n,s){for(var o=s.length,r=[],a=0;a<o;a++){var l=e,c=s[a];c&&(l=Lye(l,jd(c)),l=TB(l,Ud(c)),l=Oye(l,$p(c)));var u=TB(e,(i+1)*n);ng(l,t)&&mu(l,u)&&c!=null&&r.push(c)}return r}function hK(e){return e<10?"0".concat(e):"".concat(e)}function _d(e,t){t===void 0&&(t=U0);var i=Math.ceil(Nt(e)/t)*t,n=i-(t-1);return{startPeriod:n,endPeriod:i}}function zCe(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+i-+t)/36e5)}function pK(e){var t=e.getSeconds(),i=e.getMilliseconds();return rt(e.getTime()-t*1e3-i)}function GCe(e,t){return pK(e).getTime()===pK(t).getTime()}function gK(e){if(!Wd(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function HO(e,t){if(!Wd(e)||!Wd(t))throw new Error("Invalid date received");var i=gK(e),n=gK(t);return mu(i,n)}function rJ(e){return e.key===qe.Space}var VCe=(function(e){ko(t,e);function t(i){var n=e.call(this,i)||this;return n.inputRef=se.createRef(),n.onTimeChange=function(s){var o,r;n.setState({time:s});var a=n.props.date,l=a instanceof Date&&!isNaN(+a),c=l?a:new Date;if(s?.includes(":")){var u=s.split(":"),d=u[0],p=u[1];c.setHours(Number(d)),c.setMinutes(Number(p))}(r=(o=n.props).onChange)===null||r===void 0||r.call(o,c)},n.renderTimeInput=function(){var s=n.state.time,o=n.props,r=o.date,a=o.timeString,l=o.customTimeInput;return l?P.cloneElement(l,{date:r,value:s,onChange:n.onTimeChange}):se.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var c;(c=n.inputRef.current)===null||c===void 0||c.focus()},required:!0,value:s,onChange:function(c){n.onTimeChange(c.target.value||a)}})},n.state={time:n.props.timeString},n}return t.getDerivedStateFromProps=function(i,n){return i.timeString!==n.time?{time:i.timeString}:null},t.prototype.render=function(){return se.createElement("div",{className:"react-datepicker__input-time-container"},se.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),se.createElement("div",{className:"react-datepicker-time__input-container"},se.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t})(P.Component),HCe=(function(e){ko(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.dayEl=P.createRef(),i.handleClick=function(n){!i.isDisabled()&&i.props.onClick&&i.props.onClick(n)},i.handleMouseEnter=function(n){!i.isDisabled()&&i.props.onMouseEnter&&i.props.onMouseEnter(n)},i.handleOnKeyDown=function(n){var s,o,r=n.key;r===qe.Space&&(n.preventDefault(),n.key=qe.Enter),(o=(s=i.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},i.isSameDay=function(n){return Ut(i.props.day,n)},i.isKeyboardSelected=function(){var n;if(i.props.disabledKeyboardNavigation)return!1;var s=i.props.selectsMultiple?(n=i.props.selectedDates)===null||n===void 0?void 0:n.some(function(r){return i.isSameDayOrWeek(r)}):i.isSameDayOrWeek(i.props.selected),o=i.props.preSelection&&i.isDisabled(i.props.preSelection);return!s&&i.isSameDayOrWeek(i.props.preSelection)&&!o},i.isDisabled=function(n){return n===void 0&&(n=i.props.day),yl(n,{minDate:i.props.minDate,maxDate:i.props.maxDate,excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals,includeDateIntervals:i.props.includeDateIntervals,includeDates:i.props.includeDates,filterDate:i.props.filterDate,disabled:i.props.disabled})},i.isExcluded=function(){return uG(i.props.day,{excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals})},i.isStartOfWeek=function(){return Ut(i.props.day,Kp(i.props.day,i.props.locale,i.props.calendarStartDay))},i.isSameWeek=function(n){return i.props.showWeekPicker&&Ut(n,Kp(i.props.day,i.props.locale,i.props.calendarStartDay))},i.isSameDayOrWeek=function(n){return i.isSameDay(n)||i.isSameWeek(n)},i.getHighLightedClass=function(){var n=i.props,s=n.day,o=n.highlightDates;if(!o)return!1;var r=$i(s,"MM.dd.yyyy");return o.get(r)},i.getHolidaysClass=function(){var n,s=i.props,o=s.day,r=s.holidays;if(!r)return[void 0];var a=$i(o,"MM.dd.yyyy");return r.has(a)?[(n=r.get(a))===null||n===void 0?void 0:n.className]:[void 0]},i.isInRange=function(){var n=i.props,s=n.day,o=n.startDate,r=n.endDate;return!o||!r?!1:_f(s,o,r)},i.isInSelectingRange=function(){var n,s=i.props,o=s.day,r=s.selectsStart,a=s.selectsEnd,l=s.selectsRange,c=s.selectsDisabledDaysInRange,u=s.startDate,d=s.swapRange,p=s.endDate,f=(n=i.props.selectingDate)!==null&&n!==void 0?n:i.props.preSelection;if(!(r||a||l)||!f||!c&&i.isDisabled())return!1;if(r&&p&&(mu(f,p)||Zf(f,p)))return _f(o,f,p);if(a&&u&&(ng(f,u)||Zf(f,u)))return _f(o,u,f);if(l&&u&&!p){if(Zf(f,u)||ng(f,u))return _f(o,u,f);if(d&&mu(f,u))return _f(o,f,u)}return!1},i.isSelectingRangeStart=function(){var n;if(!i.isInSelectingRange())return!1;var s=i.props,o=s.day,r=s.startDate,a=s.selectsStart,l=s.swapRange,c=s.selectsRange,u=(n=i.props.selectingDate)!==null&&n!==void 0?n:i.props.preSelection;return a?Ut(o,u):c&&l&&r&&u?Ut(o,mu(u,r)?u:r):Ut(o,r)},i.isSelectingRangeEnd=function(){var n;if(!i.isInSelectingRange())return!1;var s=i.props,o=s.day,r=s.endDate,a=s.selectsEnd,l=s.selectsRange,c=s.swapRange,u=s.startDate,d=(n=i.props.selectingDate)!==null&&n!==void 0?n:i.props.preSelection;return a?Ut(o,d):l&&c&&u&&d?Ut(o,mu(d,u)?u:d):l?Ut(o,d):Ut(o,r)},i.isRangeStart=function(){var n=i.props,s=n.day,o=n.startDate,r=n.endDate;return!o||!r?!1:Ut(o,s)},i.isRangeEnd=function(){var n=i.props,s=n.day,o=n.startDate,r=n.endDate;return!o||!r?!1:Ut(r,s)},i.isWeekend=function(){var n=Pve(i.props.day);return n===0||n===6},i.isAfterMonth=function(){return i.props.month!==void 0&&(i.props.month+1)%12===Ko(i.props.day)},i.isBeforeMonth=function(){return i.props.month!==void 0&&(Ko(i.props.day)+1)%12===i.props.month},i.isCurrentDay=function(){return i.isSameDay(vi())},i.isSelected=function(){var n;return i.props.selectsMultiple?(n=i.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return i.isSameDayOrWeek(s)}):i.isSameDayOrWeek(i.props.selected)},i.getClassNames=function(n){var s=i.props.dayClassName?i.props.dayClassName(n):void 0;return Ui("react-datepicker__day",s,"react-datepicker__day--"+DCe(i.props.day),{"react-datepicker__day--disabled":i.isDisabled(),"react-datepicker__day--excluded":i.isExcluded(),"react-datepicker__day--selected":i.isSelected(),"react-datepicker__day--keyboard-selected":i.isKeyboardSelected(),"react-datepicker__day--range-start":i.isRangeStart(),"react-datepicker__day--range-end":i.isRangeEnd(),"react-datepicker__day--in-range":i.isInRange(),"react-datepicker__day--in-selecting-range":i.isInSelectingRange(),"react-datepicker__day--selecting-range-start":i.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":i.isSelectingRangeEnd(),"react-datepicker__day--today":i.isCurrentDay(),"react-datepicker__day--weekend":i.isWeekend(),"react-datepicker__day--outside-month":i.isAfterMonth()||i.isBeforeMonth()},i.getHighLightedClass(),i.getHolidaysClass())},i.getAriaLabel=function(){var n=i.props,s=n.day,o=n.ariaLabelPrefixWhenEnabled,r=o===void 0?"Choose":o,a=n.ariaLabelPrefixWhenDisabled,l=a===void 0?"Not available":a,c=i.isDisabled()||i.isExcluded()?l:r;return"".concat(c," ").concat($i(s,"PPPP",i.props.locale))},i.getTitle=function(){var n=i.props,s=n.day,o=n.holidays,r=o===void 0?new Map:o,a=n.excludeDates,l=$i(s,"MM.dd.yyyy"),c=[];return r.has(l)&&c.push.apply(c,r.get(l).holidayNames),i.isExcluded()&&c.push(a?.filter(function(u){return u instanceof Date?Ut(u,s):Ut(u?.date,s)}).map(function(u){if(!(u instanceof Date))return u?.message})),c.join(", ")},i.getTabIndex=function(){var n=i.props.selected,s=i.props.preSelection,o=!(i.props.showWeekPicker&&(i.props.showWeekNumber||!i.isStartOfWeek()))&&(i.isKeyboardSelected()||i.isSameDay(n)&&Ut(s,n))?0:-1;return o},i.handleFocusDay=function(){var n;i.shouldFocusDay()&&((n=i.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},i.renderDayContents=function(){return i.props.monthShowsDuplicateDaysEnd&&i.isAfterMonth()||i.props.monthShowsDuplicateDaysStart&&i.isBeforeMonth()?null:i.props.renderDayContents?i.props.renderDayContents(H5(i.props.day),i.props.day):H5(i.props.day)},i.render=function(){return se.createElement("div",{ref:i.dayEl,className:i.getClassNames(i.props.day),onKeyDown:i.handleOnKeyDown,onClick:i.handleClick,onMouseEnter:i.props.usePointerEvent?void 0:i.handleMouseEnter,onPointerEnter:i.props.usePointerEvent?i.handleMouseEnter:void 0,tabIndex:i.getTabIndex(),"aria-label":i.getAriaLabel(),role:"gridcell",title:i.getTitle(),"aria-disabled":i.isDisabled(),"aria-current":i.isCurrentDay()?"date":void 0,"aria-selected":i.isSelected()||i.isInRange()},i.renderDayContents(),i.getTitle()!==""&&se.createElement("span",{className:"overlay"},i.getTitle()))},i}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var i=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(i=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(i=!1),this.isDayActiveElement()&&(i=!0),this.isDuplicateDay()&&(i=!1)),i},t.prototype.isDayActiveElement=function(){var i,n,s;return((n=(i=this.props.containerRef)===null||i===void 0?void 0:i.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t})(P.Component),WCe=(function(e){ko(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.weekNumberEl=P.createRef(),i.handleClick=function(n){i.props.onClick&&i.props.onClick(n)},i.handleOnKeyDown=function(n){var s,o,r=n.key;r===qe.Space&&(n.preventDefault(),n.key=qe.Enter),(o=(s=i.props).handleOnKeyDown)===null||o===void 0||o.call(s,n)},i.isKeyboardSelected=function(){return!i.props.disabledKeyboardNavigation&&!Ut(i.props.date,i.props.selected)&&Ut(i.props.date,i.props.preSelection)},i.getTabIndex=function(){return i.props.showWeekPicker&&i.props.showWeekNumber&&(i.isKeyboardSelected()||Ut(i.props.date,i.props.selected)&&Ut(i.props.preSelection,i.props.selected))?0:-1},i.handleFocusWeekNumber=function(n){var s=!1;i.getTabIndex()===0&&!n?.isInputFocused&&Ut(i.props.date,i.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),i.props.inline&&!i.props.shouldFocusDayInline&&(s=!1),i.props.containerRef&&i.props.containerRef.current&&i.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&i.weekNumberEl.current&&i.weekNumberEl.current.focus({preventScroll:!0})},i}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(i){this.handleFocusWeekNumber(i)},t.prototype.render=function(){var i=this.props,n=i.weekNumber,s=i.isWeekDisabled,o=i.ariaLabelPrefix,r=o===void 0?t.defaultProps.ariaLabelPrefix:o,a=i.onClick,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!a&&!s,"react-datepicker__week-number--selected":!!a&&Ut(this.props.date,this.props.selected)};return se.createElement("div",{ref:this.weekNumberEl,className:Ui(l),"aria-label":"".concat(r," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex(),role:"gridcell"},n)},t})(P.Component),jCe=(function(e){ko(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.isDisabled=function(n){return yl(n,{minDate:i.props.minDate,maxDate:i.props.maxDate,excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals,includeDateIntervals:i.props.includeDateIntervals,includeDates:i.props.includeDates,filterDate:i.props.filterDate})},i.handleDayClick=function(n,s){i.props.onDayClick&&i.props.onDayClick(n,s)},i.handleDayMouseEnter=function(n){i.props.onDayMouseEnter&&i.props.onDayMouseEnter(n)},i.handleWeekClick=function(n,s,o){for(var r,a,l,c=new Date(n),u=0;u<7;u++){var d=new Date(n);d.setDate(d.getDate()+u);var p=!i.isDisabled(d);if(p){c=d;break}}typeof i.props.onWeekSelect=="function"&&i.props.onWeekSelect(c,s,o),i.props.showWeekPicker&&i.handleDayClick(c,o),((r=i.props.shouldCloseOnSelect)!==null&&r!==void 0?r:t.defaultProps.shouldCloseOnSelect)&&((l=(a=i.props).setOpen)===null||l===void 0||l.call(a,!1))},i.formatWeekNumber=function(n){return i.props.formatWeekNumber?i.props.formatWeekNumber(n):wCe(n)},i.isWeekDisabled=function(){for(var n=i.startOfWeek(),s=uc(n,6),o=new Date(n);o<=s;){if(!i.isDisabled(o))return!1;o=uc(o,1)}return!0},i.renderDays=function(){var n=i.startOfWeek(),s=[],o=i.formatWeekNumber(n);if(i.props.showWeekNumber){var r=i.props.onWeekSelect||i.props.showWeekPicker?i.handleWeekClick.bind(i,n,o):void 0;s.push(se.createElement(WCe,$t({key:"W"},t.defaultProps,i.props,{weekNumber:o,isWeekDisabled:i.isWeekDisabled(),date:n,onClick:r})))}return s.concat([0,1,2,3,4,5,6].map(function(a){var l=uc(n,a);return se.createElement(HCe,$t({},t.defaultProps,i.props,{ariaLabelPrefixWhenEnabled:i.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:i.props.disabledDayAriaLabelPrefix,key:l.valueOf(),day:l,onClick:i.handleDayClick.bind(i,l),onMouseEnter:i.handleDayMouseEnter.bind(i,l)}))}))},i.startOfWeek=function(){return Kp(i.props.day,i.props.locale,i.props.calendarStartDay)},i.isKeyboardSelected=function(){return!i.props.disabledKeyboardNavigation&&!Ut(i.startOfWeek(),i.props.selected)&&Ut(i.startOfWeek(),i.props.preSelection)},i}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var i={"react-datepicker__week":!0,"react-datepicker__week--selected":Ut(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()},n=this.props.weekClassName?this.props.weekClassName(this.startOfWeek()):void 0;return se.createElement("div",{className:Ui(i,n),role:"row"},this.renderDays())},t})(P.Component),Sx,UCe=6,gb={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},WO=(Sx={},Sx[gb.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Sx[gb.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Sx[gb.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Sx),HA=1;function fK(e,t){return e?gb.FOUR_COLUMNS:t?gb.TWO_COLUMNS:gb.THREE_COLUMNS}var $Ce=(function(e){ko(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.MONTH_REFS=yu([],Array(12),!0).map(function(){return P.createRef()}),i.QUARTER_REFS=yu([],Array(4),!0).map(function(){return P.createRef()}),i.isDisabled=function(n){return yl(n,{minDate:i.props.minDate,maxDate:i.props.maxDate,excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals,includeDateIntervals:i.props.includeDateIntervals,includeDates:i.props.includeDates,filterDate:i.props.filterDate,disabled:i.props.disabled})},i.isExcluded=function(n){return uG(n,{excludeDates:i.props.excludeDates,excludeDateIntervals:i.props.excludeDateIntervals})},i.handleDayClick=function(n,s){var o,r;(r=(o=i.props).onDayClick)===null||r===void 0||r.call(o,n,s,i.props.orderInDisplay)},i.handleDayMouseEnter=function(n){var s,o;(o=(s=i.props).onDayMouseEnter)===null||o===void 0||o.call(s,n)},i.handleMouseLeave=function(){var n,s;(s=(n=i.props).onMouseLeave)===null||s===void 0||s.call(n)},i.isRangeStartMonth=function(n){var s=i.props,o=s.day,r=s.startDate,a=s.endDate;return!r||!a?!1:ur(ma(o,n),r)},i.isRangeStartQuarter=function(n){var s=i.props,o=s.day,r=s.startDate,a=s.endDate;return!r||!a?!1:LI(Uv(o,n),r)},i.isRangeEndMonth=function(n){var s=i.props,o=s.day,r=s.startDate,a=s.endDate;return!r||!a?!1:ur(ma(o,n),a)},i.isRangeEndQuarter=function(n){var s=i.props,o=s.day,r=s.startDate,a=s.endDate;return!r||!a?!1:LI(Uv(o,n),a)},i.isInSelectingRangeMonth=function(n){var s,o=i.props,r=o.day,a=o.selectsStart,l=o.selectsEnd,c=o.selectsRange,u=o.startDate,d=o.endDate,p=(s=i.props.selectingDate)!==null&&s!==void 0?s:i.props.preSelection;return!(a||l||c)||!p?!1:a&&d?_A(p,d,n,r):l&&u||c&&u&&!d?_A(u,p,n,r):!1},i.isSelectingMonthRangeStart=function(n){var s;if(!i.isInSelectingRangeMonth(n))return!1;var o=i.props,r=o.day,a=o.startDate,l=o.selectsStart,c=ma(r,n),u=(s=i.props.selectingDate)!==null&&s!==void 0?s:i.props.preSelection;return l?ur(c,u):ur(c,a)},i.isSelectingMonthRangeEnd=function(n){var s;if(!i.isInSelectingRangeMonth(n))return!1;var o=i.props,r=o.day,a=o.endDate,l=o.selectsEnd,c=o.selectsRange,u=ma(r,n),d=(s=i.props.selectingDate)!==null&&s!==void 0?s:i.props.preSelection;return l||c?ur(u,d):ur(u,a)},i.isInSelectingRangeQuarter=function(n){var s,o=i.props,r=o.day,a=o.selectsStart,l=o.selectsEnd,c=o.selectsRange,u=o.startDate,d=o.endDate,p=(s=i.props.selectingDate)!==null&&s!==void 0?s:i.props.preSelection;return!(a||l||c)||!p?!1:a&&d?VA(p,d,n,r):l&&u||c&&u&&!d?VA(u,p,n,r):!1},i.isWeekInMonth=function(n){var s=i.props.day,o=uc(n,6);return ur(n,s)||ur(o,s)},i.isCurrentMonth=function(n,s){return Nt(n)===Nt(vi())&&s===Ko(vi())},i.isCurrentQuarter=function(n,s){return Nt(n)===Nt(vi())&&s===um(vi())},i.isSelectedMonth=function(n,s,o){return Ko(o)===s&&Nt(n)===Nt(o)},i.isSelectMonthInList=function(n,s,o){return o.some(function(r){return i.isSelectedMonth(n,s,r)})},i.isSelectedQuarter=function(n,s,o){return um(n)===s&&Nt(n)===Nt(o)},i.isMonthSelected=function(){var n=i.props,s=n.day,o=n.selected,r=n.selectedDates,a=n.selectsMultiple,l=Ko(s);return a?r?.some(function(c){return i.isSelectedMonth(s,l,c)}):!!o&&i.isSelectedMonth(s,l,o)},i.renderWeeks=function(){for(var n=[],s=i.props.fixedHeight,o=0,r=!1,a=Kp($d(i.props.day),i.props.locale,i.props.calendarStartDay),l=function(m){return i.props.showWeekPicker?Kp(m,i.props.locale,i.props.calendarStartDay):i.props.preSelection},c=function(m){return i.props.showWeekPicker?Kp(m,i.props.locale,i.props.calendarStartDay):i.props.selected},u=i.props.selected?c(i.props.selected):void 0,d=i.props.preSelection?l(i.props.preSelection):void 0;n.push(se.createElement(jCe,$t({},i.props,{ariaLabelPrefix:i.props.weekAriaLabelPrefix,key:o,day:a,month:Ko(i.props.day),onDayClick:i.handleDayClick,onDayMouseEnter:i.handleDayMouseEnter,selected:u,preSelection:d,showWeekNumber:i.props.showWeekNumbers}))),!r;){o++,a=CI(a,1);var p=s&&o>=UCe,f=!s&&!i.isWeekInMonth(a);if(p||f)if(i.props.peekNextMonth)r=!0;else break}return n},i.onMonthClick=function(n,s){var o=i.isMonthDisabledForLabelDate(s),r=o.isDisabled,a=o.labelDate;r||i.handleDayClick($d(a),n)},i.onMonthMouseEnter=function(n){var s=i.isMonthDisabledForLabelDate(n),o=s.isDisabled,r=s.labelDate;o||i.handleDayMouseEnter($d(r))},i.handleMonthNavigation=function(n,s){var o,r,a,l;(r=(o=i.props).setPreSelection)===null||r===void 0||r.call(o,s),(l=(a=i.MONTH_REFS[n])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus()},i.handleKeyboardNavigation=function(n,s,o){var r,a=i.props,l=a.selected,c=a.preSelection,u=a.setPreSelection,d=a.minDate,p=a.maxDate,f=a.showFourColumnMonthYearPicker,m=a.showTwoColumnMonthYearPicker;if(c){var v=fK(f,m),b=i.getVerticalOffset(v),C=(r=WO[v])===null||r===void 0?void 0:r.grid,x=function(I,R,O){var _,B,V=R,j=O;switch(I){case qe.ArrowRight:V=pc(R,HA),j=O===11?0:O+HA;break;case qe.ArrowLeft:V=dm(R,HA),j=O===0?11:O-HA;break;case qe.ArrowUp:V=dm(R,b),j=!((_=C?.[0])===null||_===void 0)&&_.includes(O)?O+12-b:O-b;break;case qe.ArrowDown:V=pc(R,b),j=!((B=C?.[C.length-1])===null||B===void 0)&&B.includes(O)?O-12+b:O+b;break}return{newCalculatedDate:V,newCalculatedMonth:j}},w=function(I,R,O){for(var _=40,B=I,V=!1,j=0,K=x(B,R,O),Y=K.newCalculatedDate,G=K.newCalculatedMonth;!V;){if(j>=_){Y=R,G=O;break}if(d&&Y<d){B=qe.ArrowRight;var $=x(B,Y,G);Y=$.newCalculatedDate,G=$.newCalculatedMonth}if(p&&Y>p){B=qe.ArrowLeft;var $=x(B,Y,G);Y=$.newCalculatedDate,G=$.newCalculatedMonth}if(ECe(Y,i.props)){var $=x(B,Y,G);Y=$.newCalculatedDate,G=$.newCalculatedMonth}else V=!0;j++}return{newCalculatedDate:Y,newCalculatedMonth:G}};if(s===qe.Enter){i.isMonthDisabled(o)||(i.onMonthClick(n,o),u?.(l));return}var M=w(s,c,o),T=M.newCalculatedDate,L=M.newCalculatedMonth;switch(s){case qe.ArrowRight:case qe.ArrowLeft:case qe.ArrowUp:case qe.ArrowDown:i.handleMonthNavigation(L,T);break}}},i.getVerticalOffset=function(n){var s,o;return(o=(s=WO[n])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&o!==void 0?o:0},i.onMonthKeyDown=function(n,s){var o=i.props,r=o.disabledKeyboardNavigation,a=o.handleOnMonthKeyDown,l=n.key;l!==qe.Tab&&n.preventDefault(),r||i.handleKeyboardNavigation(n,l,s),a&&a(n)},i.onQuarterClick=function(n,s){var o=Uv(i.props.day,s);zA(o,i.props)||i.handleDayClick(tK(o),n)},i.onQuarterMouseEnter=function(n){var s=Uv(i.props.day,n);zA(s,i.props)||i.handleDayMouseEnter(tK(s))},i.handleQuarterNavigation=function(n,s){var o,r,a,l;i.isDisabled(s)||i.isExcluded(s)||((r=(o=i.props).setPreSelection)===null||r===void 0||r.call(o,s),(l=(a=i.QUARTER_REFS[n-1])===null||a===void 0?void 0:a.current)===null||l===void 0||l.focus())},i.onQuarterKeyDown=function(n,s){var o,r,a=n.key;if(!i.props.disabledKeyboardNavigation)switch(a){case qe.Enter:i.onQuarterClick(n,s),(r=(o=i.props).setPreSelection)===null||r===void 0||r.call(o,i.props.selected);break;case qe.ArrowRight:if(!i.props.preSelection)break;i.handleQuarterNavigation(s===4?1:s+1,Qz(i.props.preSelection,1));break;case qe.ArrowLeft:if(!i.props.preSelection)break;i.handleQuarterNavigation(s===1?4:s-1,HQ(i.props.preSelection));break}},i.isMonthDisabledForLabelDate=function(n){var s,o=i.props,r=o.day,a=o.disabled,l=o.minDate,c=o.maxDate,u=o.excludeDates,d=o.includeDates,p=ma(r,n);return a?{isDisabled:!0,labelDate:ma(r,n)}:{isDisabled:(s=(l||c||u||d)&&nJ(p,i.props))!==null&&s!==void 0?s:!1,labelDate:p}},i.isMonthDisabled=function(n){var s=i.isMonthDisabledForLabelDate(n).isDisabled;return s},i.getMonthClassNames=function(n){var s=i.props,o=s.day,r=s.startDate,a=s.endDate,l=s.preSelection,c=s.monthClassName,u=c?c(ma(o,n)):void 0,d=i.getSelection();return Ui("react-datepicker__month-text","react-datepicker__month-".concat(n),u,{"react-datepicker__month-text--disabled":i.isMonthDisabled(n),"react-datepicker__month-text--selected":d?i.isSelectMonthInList(o,n,d):void 0,"react-datepicker__month-text--keyboard-selected":!i.props.disabledKeyboardNavigation&&l&&i.isSelectedMonth(o,n,l)&&!i.isMonthSelected()&&!i.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":i.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":r&&a?_A(r,a,n,o):void 0,"react-datepicker__month-text--range-start":i.isRangeStartMonth(n),"react-datepicker__month-text--range-end":i.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":i.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":i.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":i.isCurrentMonth(o,n)})},i.getTabIndex=function(n){if(i.props.preSelection==null)return"-1";var s=Ko(i.props.preSelection),o=i.isMonthDisabledForLabelDate(s).isDisabled,r=n===s&&!(o||i.props.disabledKeyboardNavigation)?"0":"-1";return r},i.getQuarterTabIndex=function(n){if(i.props.preSelection==null)return"-1";var s=um(i.props.preSelection),o=zA(i.props.day,i.props),r=n===s&&!(o||i.props.disabledKeyboardNavigation)?"0":"-1";return r},i.getAriaLabel=function(n){var s=i.props,o=s.chooseDayAriaLabelPrefix,r=o===void 0?"Choose":o,a=s.disabledDayAriaLabelPrefix,l=a===void 0?"Not available":a,c=s.day,u=s.locale,d=ma(c,n),p=i.isDisabled(d)||i.isExcluded(d)?l:r;return"".concat(p," ").concat($i(d,"MMMM yyyy",u))},i.getQuarterClassNames=function(n){var s=i.props,o=s.day,r=s.startDate,a=s.endDate,l=s.selected,c=s.minDate,u=s.maxDate,d=s.excludeDates,p=s.includeDates,f=s.filterDate,m=s.preSelection,v=s.disabledKeyboardNavigation,b=s.disabled,C=(c||u||d||p||f||b)&&zA(Uv(o,n),i.props);return Ui("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":C,"react-datepicker__quarter-text--selected":l?i.isSelectedQuarter(o,n,l):void 0,"react-datepicker__quarter-text--keyboard-selected":!v&&m&&i.isSelectedQuarter(o,n,m)&&!C,"react-datepicker__quarter-text--in-selecting-range":i.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":r&&a?VA(r,a,n,o):void 0,"react-datepicker__quarter-text--range-start":i.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":i.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":i.isCurrentQuarter(o,n)})},i.getMonthContent=function(n){var s=i.props,o=s.showFullMonthYearPicker,r=s.renderMonthContent,a=s.locale,l=s.day,c=iJ(n,a),u=cG(n,a);return r?r(n,c,u,l):o?u:c},i.getQuarterContent=function(n){var s,o=i.props,r=o.renderQuarterContent,a=o.locale,l=RCe(n,a);return(s=r?.(n,l))!==null&&s!==void 0?s:l},i.renderMonths=function(){var n,s=i.props,o=s.showTwoColumnMonthYearPicker,r=s.showFourColumnMonthYearPicker,a=s.day,l=s.selected,c=(n=WO[fK(r,o)])===null||n===void 0?void 0:n.grid;return c?.map(function(u,d){return se.createElement("div",{className:"react-datepicker__month-wrapper",key:d},u.map(function(p,f){return se.createElement("div",{ref:i.MONTH_REFS[p],key:f,onClick:function(m){i.onMonthClick(m,p)},onKeyDown:function(m){rJ(m)&&(m.preventDefault(),m.key=qe.Enter),i.onMonthKeyDown(m,p)},onMouseEnter:i.props.usePointerEvent?void 0:function(){return i.onMonthMouseEnter(p)},onPointerEnter:i.props.usePointerEvent?function(){return i.onMonthMouseEnter(p)}:void 0,tabIndex:Number(i.getTabIndex(p)),className:i.getMonthClassNames(p),"aria-disabled":i.isMonthDisabled(p),role:"option","aria-label":i.getAriaLabel(p),"aria-current":i.isCurrentMonth(a,p)?"date":void 0,"aria-selected":l?i.isSelectedMonth(a,p,l):void 0},i.getMonthContent(p))}))})},i.renderQuarters=function(){var n=i.props,s=n.day,o=n.selected,r=[1,2,3,4];return se.createElement("div",{className:"react-datepicker__quarter-wrapper"},r.map(function(a,l){return se.createElement("div",{key:l,ref:i.QUARTER_REFS[l],role:"option",onClick:function(c){i.onQuarterClick(c,a)},onKeyDown:function(c){i.onQuarterKeyDown(c,a)},onMouseEnter:i.props.usePointerEvent?void 0:function(){return i.onQuarterMouseEnter(a)},onPointerEnter:i.props.usePointerEvent?function(){return i.onQuarterMouseEnter(a)}:void 0,className:i.getQuarterClassNames(a),"aria-selected":o?i.isSelectedQuarter(s,a,o):void 0,tabIndex:Number(i.getQuarterTabIndex(a)),"aria-current":i.isCurrentQuarter(s,a)?"date":void 0},i.getQuarterContent(a))}))},i.getClassNames=function(){var n=i.props,s=n.selectingDate,o=n.selectsStart,r=n.selectsEnd,a=n.showMonthYearPicker,l=n.showQuarterYearPicker,c=n.showWeekPicker;return Ui("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(o||r)},{"react-datepicker__monthPicker":a},{"react-datepicker__quarterPicker":l},{"react-datepicker__weekPicker":c})},i}return t.prototype.getSelection=function(){var i=this.props,n=i.selected,s=i.selectedDates,o=i.selectsMultiple;if(o)return s;if(n)return[n]},t.prototype.render=function(){var i=this.props,n=i.showMonthYearPicker,s=i.showQuarterYearPicker,o=i.day,r=i.ariaLabelPrefix,a=r===void 0?"Month ":r,l=a?a.trim()+" ":"",c=n||s;return c?se.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(l).concat($i(o,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():this.renderQuarters()):se.createElement("div",{role:"table"},this.props.dayNamesHeader&&se.createElement("div",{role:"rowgroup"},this.props.dayNamesHeader),se.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(l).concat($i(o,"MMMM, yyyy",this.props.locale)),role:"rowgroup"},this.renderWeeks()))},t})(P.Component),KCe=(function(e){ko(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.monthOptionButtonsRef={},i.isSelectedMonth=function(n){return i.props.month===n},i.handleOptionKeyDown=function(n,s){var o;switch(s.key){case"Enter":s.preventDefault(),i.onChange(n);break;case"Escape":s.preventDefault(),i.props.onCancel();break;case"ArrowUp":case"ArrowDown":{s.preventDefault();var r=(n+(s.key==="ArrowUp"?-1:1)+i.props.monthNames.length)%i.props.monthNames.length;(o=i.monthOptionButtonsRef[r])===null||o===void 0||o.focus();break}}},i.renderOptions=function(){return i.monthOptionButtonsRef={},i.props.monthNames.map(function(n,s){return se.createElement("div",{ref:function(o){i.monthOptionButtonsRef[s]=o,i.isSelectedMonth(s)&&o?.focus()},role:"button",tabIndex:0,className:i.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:i.onChange.bind(i,s),onKeyDown:i.handleOptionKeyDown.bind(i,s),"aria-selected":i.isSelectedMonth(s)?"true":void 0},i.isSelectedMonth(s)?se.createElement("span",{className:"react-datepicker__month-option--selected"},""):"",n)})},i.onChange=function(n){return i.props.onChange(n)},i.handleClickOutside=function(){return i.props.onCancel()},i}return t.prototype.render=function(){return se.createElement(dE,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t})(P.Component),YCe=(function(e){ko(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={dropdownVisible:!1},i.renderSelectOptions=function(n){return n.map(function(s,o){return se.createElement("option",{key:s,value:o},s)})},i.renderSelectMode=function(n){return se.createElement("select",{value:i.props.month,className:"react-datepicker__month-select",onChange:function(s){return i.onChange(parseInt(s.target.value))}},i.renderSelectOptions(n))},i.renderReadView=function(n,s){return se.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:i.toggleDropdown},se.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),se.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[i.props.month]))},i.renderDropdown=function(n){return se.createElement(KCe,$t({key:"dropdown"},i.props,{monthNames:n,onChange:i.onChange,onCancel:i.toggleDropdown}))},i.renderScrollMode=function(n){var s=i.state.dropdownVisible,o=[i.renderReadView(!s,n)];return s&&o.unshift(i.renderDropdown(n)),o},i.onChange=function(n){i.toggleDropdown(),n!==i.props.month&&i.props.onChange(n)},i.toggleDropdown=function(){return i.setState({dropdownVisible:!i.state.dropdownVisible})},i}return t.prototype.render=function(){var i=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return iJ(o,i.props.locale)}:function(o){return cG(o,i.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(n);break;case"select":s=this.renderSelectMode(n);break}return se.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t})(P.Component);function XCe(e,t){for(var i=[],n=$d(e),s=$d(t);!ng(n,s);)i.push(vi(n)),n=pc(n,1);return i}var ZCe=(function(e){ko(t,e);function t(i){var n=e.call(this,i)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(s){var o=EB(s),r=ou(n.props.date,s)&&ur(n.props.date,s);return se.createElement("div",{className:r?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:n.onChange.bind(n,o),"aria-selected":r?"true":void 0},r?se.createElement("span",{className:"react-datepicker__month-year-option--selected"},""):"",$i(s,n.props.dateFormat,n.props.locale))})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:XCe(n.props.minDate,n.props.maxDate)},n}return t.prototype.render=function(){var i=Ui({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return se.createElement(dE,{className:i,onClickOutside:this.handleClickOutside},this.renderOptions())},t})(P.Component),qCe=(function(e){ko(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={dropdownVisible:!1},i.renderSelectOptions=function(){for(var n=$d(i.props.minDate),s=$d(i.props.maxDate),o=[];!ng(n,s);){var r=EB(n);o.push(se.createElement("option",{key:r,value:r},$i(n,i.props.dateFormat,i.props.locale))),n=pc(n,1)}return o},i.onSelectChange=function(n){i.onChange(parseInt(n.target.value))},i.renderSelectMode=function(){return se.createElement("select",{value:EB($d(i.props.date)),className:"react-datepicker__month-year-select",onChange:i.onSelectChange},i.renderSelectOptions())},i.renderReadView=function(n){var s=$i(i.props.date,i.props.dateFormat,i.props.locale);return se.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:i.toggleDropdown},se.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),se.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},i.renderDropdown=function(){return se.createElement(ZCe,$t({key:"dropdown"},i.props,{onChange:i.onChange,onCancel:i.toggleDropdown}))},i.renderScrollMode=function(){var n=i.state.dropdownVisible,s=[i.renderReadView(!n)];return n&&s.unshift(i.renderDropdown()),s},i.onChange=function(n){i.toggleDropdown();var s=vi(n);ou(i.props.date,s)&&ur(i.props.date,s)||i.props.onChange(s)},i.toggleDropdown=function(){return i.setState({dropdownVisible:!i.state.dropdownVisible})},i}return t.prototype.render=function(){var i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode();break;case"select":i=this.renderSelectMode();break}return se.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},i)},t})(P.Component),QCe=(function(e){ko(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={height:null},i.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,s,o;i.list&&(i.list.scrollTop=(o=i.centerLi&&t.calcCenterPosition(i.props.monthRef?i.props.monthRef.clientHeight-((s=(n=i.header)===null||n===void 0?void 0:n.clientHeight)!==null&&s!==void 0?s:0):i.list.clientHeight,i.centerLi))!==null&&o!==void 0?o:0)})},i.handleClick=function(n){var s,o;(i.props.minTime||i.props.maxTime)&&rK(n,i.props)||(i.props.excludeTimes||i.props.includeTimes||i.props.filterTime)&&oK(n,i.props)||(o=(s=i.props).onChange)===null||o===void 0||o.call(s,n)},i.isSelectedTime=function(n){return i.props.selected&&GCe(i.props.selected,n)},i.isDisabledTime=function(n){return(i.props.minTime||i.props.maxTime)&&rK(n,i.props)||(i.props.excludeTimes||i.props.includeTimes||i.props.filterTime)&&oK(n,i.props)},i.liClasses=function(n){var s,o=["react-datepicker__time-list-item",i.props.timeClassName?i.props.timeClassName(n):void 0];return i.isSelectedTime(n)&&o.push("react-datepicker__time-list-item--selected"),i.isDisabledTime(n)&&o.push("react-datepicker__time-list-item--disabled"),i.props.injectTimes&&(jd(n)*3600+Ud(n)*60+$p(n))%(((s=i.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&o.push("react-datepicker__time-list-item--injected"),o.join(" ")},i.handleOnKeyDown=function(n,s){var o,r;n.key===qe.Space&&(n.preventDefault(),n.key=qe.Enter),(n.key===qe.ArrowUp||n.key===qe.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===qe.ArrowDown||n.key===qe.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===qe.Enter&&i.handleClick(s),(r=(o=i.props).handleOnKeyDown)===null||r===void 0||r.call(o,n)},i.renderTimes=function(){for(var n,s=[],o=typeof i.props.format=="string"?i.props.format:"p",r=(n=i.props.intervals)!==null&&n!==void 0?n:t.defaultProps.intervals,a=i.props.selected||i.props.openToDate||vi(),l=MT(a),c=i.props.injectTimes&&i.props.injectTimes.sort(function(b,C){return b.getTime()-C.getTime()}),u=60*zCe(a),d=u/r,p=0;p<d;p++){var f=TB(l,p*r);if(s.push(f),c){var m=_Ce(l,f,p,r,c);s=s.concat(m)}}var v=s.reduce(function(b,C){return C.getTime()<=a.getTime()?C:b},s[0]);return s.map(function(b){return se.createElement("li",{key:b.valueOf(),onClick:i.handleClick.bind(i,b),className:i.liClasses(b),ref:function(C){b===v&&(i.centerLi=C)},onKeyDown:function(C){i.handleOnKeyDown(C,b)},tabIndex:b===v?0:-1,role:"option","aria-selected":i.isSelectedTime(b)?"true":void 0,"aria-disabled":i.isDisabledTime(b)?"true":void 0},$i(b,o,i.props.locale))})},i.renderTimeCaption=function(){return i.props.showTimeCaption===!1?se.createElement(se.Fragment,null):se.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(i.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){i.header=n}},se.createElement("div",{className:"react-datepicker-time__header"},i.props.timeCaption))},i}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var i;(i=this.resizeObserver)===null||i===void 0||i.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var i=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){i.updateContainerHeight()}),this.resizeObserver.observe(n))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var i=this,n,s=this.state.height;return se.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),se.createElement("div",{className:"react-datepicker__time"},se.createElement("div",{className:"react-datepicker__time-box"},se.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){i.list=o},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(i,n){return n.offsetTop-(i/2-n.clientHeight/2)},t})(P.Component),mK=3,JCe=(function(e){ko(t,e);function t(i){var n=e.call(this,i)||this;return n.YEAR_REFS=yu([],Array(n.props.yearItemNumber),!0).map(function(){return P.createRef()}),n.isDisabled=function(s){return yl(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return uG(s,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var s;return(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection},n.updateFocusOnPaginate=function(s){var o=function(){var r,a;(a=(r=n.YEAR_REFS[s])===null||r===void 0?void 0:r.current)===null||a===void 0||a.focus()};window.requestAnimationFrame(o)},n.handleYearClick=function(s,o){n.props.onDayClick&&n.props.onDayClick(s,o)},n.handleYearNavigation=function(s,o){var r,a,l,c,u=n.props,d=u.date,p=u.yearItemNumber;if(!(d===void 0||p===void 0)){var f=_d(d,p).startPeriod;n.isDisabled(o)||n.isExcluded(o)||((a=(r=n.props).setPreSelection)===null||a===void 0||a.call(r,o),s-f<0?n.updateFocusOnPaginate(p-(f-s)):s-f>=p?n.updateFocusOnPaginate(Math.abs(p-(s-f))):(c=(l=n.YEAR_REFS[s-f])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())}},n.isSameDay=function(s,o){return Ut(s,o)},n.isCurrentYear=function(s){return s===Nt(vi())},n.isRangeStart=function(s){return n.props.startDate&&n.props.endDate&&ou(iu(vi(),s),n.props.startDate)},n.isRangeEnd=function(s){return n.props.startDate&&n.props.endDate&&ou(iu(vi(),s),n.props.endDate)},n.isInRange=function(s){return GA(s,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(s){var o=n.props,r=o.selectsStart,a=o.selectsEnd,l=o.selectsRange,c=o.startDate,u=o.endDate;return!(r||a||l)||!n.selectingDate()?!1:r&&u?GA(s,n.selectingDate(),u):a&&c||l&&c&&!u?GA(s,c,n.selectingDate()):!1},n.isSelectingRangeStart=function(s){var o;if(!n.isInSelectingRange(s))return!1;var r=n.props,a=r.startDate,l=r.selectsStart,c=iu(vi(),s);return l?ou(c,(o=n.selectingDate())!==null&&o!==void 0?o:null):ou(c,a??null)},n.isSelectingRangeEnd=function(s){var o;if(!n.isInSelectingRange(s))return!1;var r=n.props,a=r.endDate,l=r.selectsEnd,c=r.selectsRange,u=iu(vi(),s);return l||c?ou(u,(o=n.selectingDate())!==null&&o!==void 0?o:null):ou(u,a??null)},n.isKeyboardSelected=function(s){if(!(n.props.disabledKeyboardNavigation||n.props.date===void 0||n.props.preSelection==null)){var o=n.props,r=o.minDate,a=o.maxDate,l=o.excludeDates,c=o.includeDates,u=o.filterDate,d=o.selected,p=Kx(iu(n.props.date,s)),f=(r||a||l||c||u)&&AT(s,n.props),m=!!d&&Ut(p,Kx(d)),v=Ut(p,Kx(n.props.preSelection));return!n.props.inline&&!m&&v&&!f}},n.isSelectedYear=function(s){var o=n.props,r=o.selectsMultiple,a=o.selected,l=o.selectedDates;return r?l?.some(function(c){return s===Nt(c)}):!!a&&s===Nt(a)},n.onYearClick=function(s,o){var r=n.props.date;r!==void 0&&n.handleYearClick(Kx(iu(r,o)),s)},n.onYearKeyDown=function(s,o){var r,a,l=s.key,c=n.props,u=c.date,d=c.yearItemNumber,p=c.handleOnKeyDown;if(l!==qe.Tab&&s.preventDefault(),!n.props.disabledKeyboardNavigation)switch(l){case qe.Enter:if(n.props.selected==null)break;n.onYearClick(s,o),(a=(r=n.props).setPreSelection)===null||a===void 0||a.call(r,n.props.selected);break;case qe.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(o+1,Hd(n.props.preSelection,1));break;case qe.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(o-1,Vb(n.props.preSelection,1));break;case qe.ArrowUp:{if(u===void 0||d===void 0||n.props.preSelection==null)break;var f=_d(u,d).startPeriod,m=mK,v=o-m;if(v<f){var b=d%m;o>=f&&o<f+b?m=b:m+=b,v=o-m}n.handleYearNavigation(v,Vb(n.props.preSelection,m));break}case qe.ArrowDown:{if(u===void 0||d===void 0||n.props.preSelection==null)break;var C=_d(u,d).endPeriod,m=mK,v=o+m;if(v>C){var b=d%m;o<=C&&o>C-b?m=b:m+=b,v=o+m}n.handleYearNavigation(v,Hd(n.props.preSelection,m));break}}p&&p(s)},n.getYearClassNames=function(s){var o=n.props,r=o.date,a=o.disabled,l=o.minDate,c=o.maxDate,u=o.excludeDates,d=o.includeDates,p=o.filterDate,f=o.yearClassName;return Ui("react-datepicker__year-text","react-datepicker__year-".concat(s),r?f?.(iu(r,s)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(s),"react-datepicker__year-text--disabled":(l||c||u||d||p||a)&&AT(s,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(s),"react-datepicker__year-text--range-start":n.isRangeStart(s),"react-datepicker__year-text--range-end":n.isRangeEnd(s),"react-datepicker__year-text--in-range":n.isInRange(s),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(s),"react-datepicker__year-text--today":n.isCurrentYear(s)})},n.getYearTabIndex=function(s){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var o=Nt(n.props.preSelection),r=AT(s,n.props);return s===o&&!r?"0":"-1"},n.getYearContent=function(s){return n.props.renderYearContent?n.props.renderYearContent(s):s},n}return t.prototype.render=function(){var i=this,n=[],s=this.props,o=s.date,r=s.yearItemNumber,a=s.onYearMouseEnter,l=s.onYearMouseLeave;if(o===void 0)return null;for(var c=_d(o,r),u=c.startPeriod,d=c.endPeriod,p=function(v){n.push(se.createElement("div",{ref:f.YEAR_REFS[v-u],onClick:function(b){i.onYearClick(b,v)},onKeyDown:function(b){rJ(b)&&(b.preventDefault(),b.key=qe.Enter),i.onYearKeyDown(b,v)},tabIndex:Number(f.getYearTabIndex(v)),className:f.getYearClassNames(v),onMouseEnter:f.props.usePointerEvent?void 0:function(b){return a(b,v)},onPointerEnter:f.props.usePointerEvent?function(b){return a(b,v)}:void 0,onMouseLeave:f.props.usePointerEvent?void 0:function(b){return l(b,v)},onPointerLeave:f.props.usePointerEvent?function(b){return l(b,v)}:void 0,key:v,"aria-current":f.isCurrentYear(v)?"date":void 0},f.getYearContent(v)))},f=this,m=u;m<=d;m++)p(m);return se.createElement("div",{className:"react-datepicker__year"},se.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},t})(P.Component);function exe(e,t,i,n){for(var s=[],o=0;o<2*t+1;o++){var r=e+t-o,a=!0;i&&(a=Nt(i)<=r),n&&a&&(a=Nt(n)>=r),a&&s.push(r)}return s}var txe=(function(e){ko(t,e);function t(i){var n=e.call(this,i)||this;n.yearOptionButtonsRef={},n.handleOptionKeyDown=function(a,l){var c;switch(l.key){case"Enter":l.preventDefault(),n.onChange(a);break;case"Escape":l.preventDefault(),n.props.onCancel();break;case"ArrowUp":case"ArrowDown":{l.preventDefault();var u=a+(l.key==="ArrowUp"?1:-1);n.yearOptionButtonsRef[u]&&((c=n.yearOptionButtonsRef[u])===null||c===void 0||c.focus());break}}},n.renderOptions=function(){n.yearOptionButtonsRef={};var a=n.props.year,l=n.state.yearsList.map(function(d){return se.createElement("div",{ref:function(p){n.yearOptionButtonsRef[d]=p,d===a&&p?.focus()},role:"button",tabIndex:0,className:a===d?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:d,onClick:n.onChange.bind(n,d),onKeyDown:n.handleOptionKeyDown.bind(n,d),"aria-selected":a===d?"true":void 0},a===d?se.createElement("span",{className:"react-datepicker__year-option--selected"},""):"",d)}),c=n.props.minDate?Nt(n.props.minDate):null,u=n.props.maxDate?Nt(n.props.maxDate):null;return(!u||!n.state.yearsList.find(function(d){return d===u}))&&l.unshift(se.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},se.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!c||!n.state.yearsList.find(function(d){return d===c}))&&l.push(se.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},se.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),l},n.onChange=function(a){n.props.onChange(a)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(a){var l=n.state.yearsList.map(function(c){return c+a});n.setState({yearsList:l})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var s=i.yearDropdownItemNumber,o=i.scrollableYearDropdown,r=s||(o?10:5);return n.state={yearsList:exe(n.props.year,r,n.props.minDate,n.props.maxDate)},n.dropdownRef=P.createRef(),n}return t.prototype.componentDidMount=function(){var i=this.dropdownRef.current;if(i){var n=i.children?Array.from(i.children):null,s=n?n.find(function(o){return o.ariaSelected}):null;i.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-i.clientHeight)/2:(i.scrollHeight-i.clientHeight)/2}},t.prototype.render=function(){var i=Ui({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return se.createElement(dE,{className:i,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t})(P.Component),ixe=(function(e){ko(t,e);function t(){var i=e!==null&&e.apply(this,arguments)||this;return i.state={dropdownVisible:!1},i.renderSelectOptions=function(){for(var n=i.props.minDate?Nt(i.props.minDate):1900,s=i.props.maxDate?Nt(i.props.maxDate):2100,o=[],r=n;r<=s;r++)o.push(se.createElement("option",{key:r,value:r},r));return o},i.onSelectChange=function(n){i.onChange(parseInt(n.target.value))},i.renderSelectMode=function(){return se.createElement("select",{value:i.props.year,className:"react-datepicker__year-select",onChange:i.onSelectChange},i.renderSelectOptions())},i.renderReadView=function(n){return se.createElement("button",{key:"read",type:"button",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:i.toggleDropdown},se.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),se.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},i.props.year))},i.renderDropdown=function(){return se.createElement(txe,$t({key:"dropdown"},i.props,{onChange:i.onChange,onCancel:i.toggleDropdown}))},i.renderScrollMode=function(){var n=i.state.dropdownVisible,s=[i.renderReadView(!n)];return n&&s.unshift(i.renderDropdown()),s},i.onChange=function(n){i.toggleDropdown(),n!==i.props.year&&i.props.onChange(n)},i.toggleDropdown=function(n){i.setState({dropdownVisible:!i.state.dropdownVisible},function(){i.props.adjustDateOnChange&&i.handleYearChange(i.props.date,n)})},i.handleYearChange=function(n,s){var o;(o=i.onSelect)===null||o===void 0||o.call(i,n,s),i.setOpen()},i.onSelect=function(n,s){var o,r;(r=(o=i.props).onSelect)===null||r===void 0||r.call(o,n,s)},i.setOpen=function(){var n,s;(s=(n=i.props).setOpen)===null||s===void 0||s.call(n,!0)},i}return t.prototype.render=function(){var i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode();break;case"select":i=this.renderSelectMode();break}return se.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},i)},t})(P.Component),nxe=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],aJ="react-datepicker-ignore-onclickoutside",sxe=function(e){var t=(e.className||"").split(/\s+/);return nxe.some(function(i){return t.indexOf(i)>=0})},oxe=(function(e){ko(t,e);function t(i){var n=e.call(this,i)||this;return n.monthContainer=void 0,n.handleClickOutside=function(s){n.props.onClickOutside(s)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(s){var o,r;sxe(s.target)&&((r=(o=n.props).onDropdownFocus)===null||r===void 0||r.call(o,s))},n.getDateInView=function(){var s=n.props,o=s.preSelection,r=s.selected,a=s.openToDate,l=sJ(n.props),c=oJ(n.props),u=vi(),d=a||r||o;return d||(l&&mu(u,l)?l:c&&ng(u,c)?c:u)},n.increaseMonth=function(){n.setState(function(s){var o=s.date;return{date:pc(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(s){var o=s.date;return{date:dm(o,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(s,o,r){n.props.onSelect(s,o,r),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleDayMouseEnter=function(s){n.setState({selectingDate:s}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(s,o){n.setState({selectingDate:iu(vi(),o)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(s,o)},n.handleYearMouseLeave=function(s,o){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(s,o)},n.handleYearChange=function(s){var o,r,a,l;(r=(o=n.props).onYearChange)===null||r===void 0||r.call(o,s),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(s),(l=(a=n.props).setOpen)===null||l===void 0||l.call(a,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.getEnabledPreSelectionDateForMonth=function(s){if(!yl(s,n.props))return s;for(var o=$d(s),r=ACe(s),a=Bye(r,o),l=null,c=0;c<=a;c++){var u=uc(o,c);if(!yl(u,n.props)){l=u;break}}return l},n.handleMonthChange=function(s){var o,r,a,l=(o=n.getEnabledPreSelectionDateForMonth(s))!==null&&o!==void 0?o:s;n.handleCustomMonthChange(l),n.props.adjustDateOnChange&&(n.props.onSelect(l),(a=(r=n.props).setOpen)===null||a===void 0||a.call(r,!0)),n.props.setPreSelection&&n.props.setPreSelection(l)},n.handleCustomMonthChange=function(s){var o,r;(r=(o=n.props).onMonthChange)===null||r===void 0||r.call(o,s),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(s){n.handleYearChange(s),n.handleMonthChange(s)},n.changeYear=function(s){n.setState(function(o){var r=o.date;return{date:iu(r,Number(s))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(s){n.setState(function(o){var r=o.date;return{date:ma(r,Number(s))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(s){n.setState(function(o){var r=o.date;return{date:iu(ma(r,Ko(s)),Nt(s))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(s){s===void 0&&(s=n.state.date);var o=n.props.disabled,r=Kp(s,n.props.locale,n.props.calendarStartDay),a=[];return n.props.showWeekNumbers&&a.push(se.createElement("div",{key:"W",className:"react-datepicker__day-name ".concat(o?"react-datepicker__day-name--disabled":""),role:"columnheader"},se.createElement("span",{className:"react-datepicker__sr-only"},"Week number"),se.createElement("span",{"aria-hidden":"true"},n.props.weekLabel||"#"))),a.concat([0,1,2,3,4,5,6].map(function(l){var c=uc(r,l),u=n.formatWeekday(c,n.props.locale),d=n.props.weekDayClassName?n.props.weekDayClassName(c):void 0;return se.createElement("div",{key:l,role:"columnheader",className:Ui("react-datepicker__day-name",d,o?"react-datepicker__day-name--disabled":"")},se.createElement("span",{className:"react-datepicker__sr-only"},$i(c,"EEEE",n.props.locale)),se.createElement("span",{"aria-hidden":"true"},u))}))},n.formatWeekday=function(s,o){return n.props.formatWeekDay?kCe(s,n.props.formatWeekDay,o):n.props.useWeekdaysShort?ICe(s,o):TCe(s,o)},n.decreaseYear=function(){n.setState(function(s){var o,r=s.date;return{date:Vb(r,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var s,o,r;if(!n.props.renderCustomHeader){var a=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,l=n.props.showPreviousMonths?a-1:0,c=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:l,u=dm(n.state.date,c),d;switch(!0){case n.props.disabled:d=!0;break;case n.props.showMonthYearPicker:d=cK(n.state.date,n.props);break;case n.props.showYearPicker:d=NCe(n.state.date,n.props);break;case n.props.showQuarterYearPicker:d=LCe(n.state.date,n.props);break;default:d=aK(u,n.props);break}if(!(!((r=n.props.forceShowMonthNavigation)!==null&&r!==void 0?r:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&d||n.props.showTimeSelectOnly)){var p=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],f=["react-datepicker__navigation","react-datepicker__navigation--previous"],m=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(m=n.decreaseYear),d&&n.props.showDisabledMonthNavigation&&(f.push("react-datepicker__navigation--previous--disabled"),m=void 0);var v=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,b=n.props,C=b.previousMonthButtonLabel,x=C===void 0?t.defaultProps.previousMonthButtonLabel:C,w=b.previousYearButtonLabel,M=w===void 0?t.defaultProps.previousYearButtonLabel:w,T=n.props,L=T.previousMonthAriaLabel,I=L===void 0?typeof x=="string"?x:"Previous Month":L,R=T.previousYearAriaLabel,O=R===void 0?typeof M=="string"?M:"Previous Year":R;return se.createElement("button",{type:"button",className:f.join(" "),onClick:m,onKeyDown:n.props.handleOnKeyDown,"aria-label":v?O:I},se.createElement("span",{className:p.join(" ")},v?M:x))}}},n.increaseYear=function(){n.setState(function(s){var o,r=s.date;return{date:Hd(r,n.props.showYearPicker?(o=n.props.yearItemNumber)!==null&&o!==void 0?o:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var s;if(!n.props.renderCustomHeader){var o;switch(!0){case n.props.disabled:o=!0;break;case n.props.showMonthYearPicker:o=uK(n.state.date,n.props);break;case n.props.showYearPicker:o=OCe(n.state.date,n.props);break;case n.props.showQuarterYearPicker:o=PCe(n.state.date,n.props);break;default:o=lK(n.state.date,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&o||n.props.showTimeSelectOnly)){var r=["react-datepicker__navigation","react-datepicker__navigation--next"],a=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&r.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&r.push("react-datepicker__navigation--next--with-today-button");var l=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(l=n.increaseYear),o&&n.props.showDisabledMonthNavigation&&(r.push("react-datepicker__navigation--next--disabled"),l=void 0);var c=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,u=n.props,d=u.nextMonthButtonLabel,p=d===void 0?t.defaultProps.nextMonthButtonLabel:d,f=u.nextYearButtonLabel,m=f===void 0?t.defaultProps.nextYearButtonLabel:f,v=n.props,b=v.nextMonthAriaLabel,C=b===void 0?typeof p=="string"?p:"Next Month":b,x=v.nextYearAriaLabel,w=x===void 0?typeof m=="string"?m:"Next Year":x;return se.createElement("button",{type:"button",className:r.join(" "),onClick:l,onKeyDown:n.props.handleOnKeyDown,"aria-label":c?w:C},se.createElement("span",{className:a.join(" ")},c?m:p))}}},n.renderCurrentMonth=function(s){s===void 0&&(s=n.state.date);var o=["react-datepicker__current-month"];return n.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),se.createElement("h2",{className:o.join(" ")},$i(s,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showYearDropdown||s))return se.createElement(ixe,$t({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Nt(n.state.date)}))},n.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthDropdown||s))return se.createElement(YCe,$t({},t.defaultProps,n.props,{month:Ko(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthYearDropdown||s))return se.createElement(qCe,$t({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(s){n.props.onSelect(iK(),s),n.props.setPreSelection&&n.props.setPreSelection(iK())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return se.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDayNamesHeader=function(s){return se.createElement("div",{className:"react-datepicker__day-names",role:"row"},n.header(s))},n.renderDefaultHeader=function(s){var o=s.monthDate,r=s.i;return se.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(o),se.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(r!==0),n.renderMonthYearDropdown(r!==0),n.renderYearDropdown(r!==0)))},n.renderCustomHeader=function(s){var o,r,a=s.monthDate,l=s.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var c=n.props,u=c.showYearPicker,d=c.yearItemNumber,p;if(u){var f=_d(a,d),m=f.startPeriod,v=f.endPeriod;p={startYear:m,endYear:v}}var b=aK(n.state.date,n.props),C=lK(n.state.date,n.props),x=cK(n.state.date,n.props),w=uK(n.state.date,n.props);return se.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(r=(o=n.props).renderCustomHeader)===null||r===void 0?void 0:r.call(o,$t($t($t({},n.state),u&&{visibleYearsRange:p}),{customHeaderCount:l,monthDate:a,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:b,nextMonthButtonDisabled:C,prevYearButtonDisabled:x,nextYearButtonDisabled:w})))},n.renderYearHeader=function(s){var o=s.monthDate,r=n.props,a=r.showYearPicker,l=r.yearItemNumber,c=l===void 0?t.defaultProps.yearItemNumber:l,u=_d(o,c),d=u.startPeriod,p=u.endPeriod;return se.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},a?"".concat(d," - ").concat(p):Nt(o))},n.renderHeader=function(s){var o=s.monthDate,r=s.i,a=r===void 0?0:r,l={monthDate:o,i:a};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(l);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(l);default:return n.renderDefaultHeader(l)}},n.renderMonths=function(){var s,o;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var r=[],a=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,l=n.props.showPreviousMonths?a-1:0,c=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Hd(n.state.date,l):dm(n.state.date,l),u=(o=n.props.monthSelectedIn)!==null&&o!==void 0?o:l,d=0;d<a;++d){var p=d-u+l,f=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Hd(c,p):pc(c,p),m="month-".concat(d),v=d<a-1,b=d>0;r.push(se.createElement("div",{key:m,ref:function(C){n.monthContainer=C??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:f,i:d}),se.createElement($Ce,$t({},t.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:f,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:d,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:v,monthShowsDuplicateDaysStart:b,dayNamesHeader:n.renderDayNamesHeader(f)}))))}return r}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return se.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),se.createElement(JCe,$t({},t.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return se.createElement(QCe,$t({},t.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var s=n.props.selected?new Date(n.props.selected):void 0,o=s&&hE(s)&&!!n.props.selected,r=o?"".concat(hK(s.getHours()),":").concat(hK(s.getMinutes())):"";if(n.props.showTimeInput)return se.createElement(VCe,$t({},t.defaultProps,n.props,{date:s,timeString:r,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var s,o=_d(n.state.date,(s=n.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),r=o.startPeriod,a=o.endPeriod,l;return n.props.showYearPicker?l="".concat(r," - ").concat(a):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?l=Nt(n.state.date):l="".concat(cG(Ko(n.state.date),n.props.locale)," ").concat(Nt(n.state.date)),se.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&l)},n.renderChildren=function(){if(n.props.children)return se.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=P.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,outsideClickIgnoreClass:aJ,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:U0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var i=this;this.props.showTimeSelect&&(this.assignMonthContainer=(function(){i.setState({monthContainer:i.monthContainer})})())},t.prototype.componentDidUpdate=function(i){var n=this;if(this.props.preSelection&&(!Ut(this.props.preSelection,i.preSelection)||this.props.monthSelectedIn!==i.monthSelectedIn)){var s=!ur(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!Ut(this.props.openToDate,i.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var i=this.props.container||bCe;return se.createElement(dE,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},se.createElement("div",{style:{display:"contents"},ref:this.containerRef},se.createElement(i,{className:Ui("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t})(P.Component),rxe=function(e){var t=e.icon,i=e.className,n=i===void 0?"":i,s=e.onClick,o="react-datepicker__calendar-icon";if(typeof t=="string")return se.createElement("i",{className:"".concat(o," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:s});if(se.isValidElement(t)){var r=t;return se.cloneElement(r,{className:"".concat(r.props.className||""," ").concat(o," ").concat(n),onClick:function(a){typeof r.props.onClick=="function"&&r.props.onClick(a),typeof s=="function"&&s(a)}})}return se.createElement("svg",{className:"".concat(o," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},se.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},lJ=(function(e){ko(t,e);function t(i){var n=e.call(this,i)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return j7.createPortal(this.props.children,this.el)},t})(P.Component),axe="[tabindex], a, button, input, select, textarea",lxe=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},cJ=(function(e){ko(t,e);function t(i){var n=e.call(this,i)||this;return n.getTabChildren=function(){var s;return Array.prototype.slice.call((s=n.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(axe),1,-1).filter(lxe)},n.handleFocusStart=function(){var s=n.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},n.handleFocusEnd=function(){var s=n.getTabChildren();s&&s.length>1&&s[0].focus()},n.tabLoopRef=P.createRef(),n}return t.prototype.render=function(){var i;return((i=this.props.enableTabLoop)!==null&&i!==void 0?i:t.defaultProps.enableTabLoop)?se.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},se.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,se.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t})(P.Component);function cxe(e){function t(i){var n,s=typeof i.hidePopper=="boolean"?i.hidePopper:!0,o=P.useRef(null),r=vCe($t({open:!s,whileElementsMounted:ZSe,placement:i.popperPlacement,middleware:yu([oCe({padding:15}),sCe(10),rCe({element:o})],(n=i.popperModifiers)!==null&&n!==void 0?n:[],!0)},i.popperProps)),a=$t($t({},i),{hidePopper:s,popperProps:$t($t({},r),{arrowRef:o})});return se.createElement(e,$t({},a))}return t.displayName="withFloating(".concat(e.displayName||e.name||"Component",")"),t}var uxe=function(e){var t=e.className,i=e.wrapperClassName,n=e.hidePopper,s=n===void 0?!0:n,o=e.popperComponent,r=e.targetComponent,a=e.enableTabLoop,l=e.popperOnKeyDown,c=e.portalId,u=e.portalHost,d=e.popperProps,p=e.showArrow,f=void 0;if(!s){var m=Ui("react-datepicker-popper",t);f=se.createElement(cJ,{enableTabLoop:a},se.createElement("div",{ref:d.refs.setFloating,style:d.floatingStyles,className:m,"data-placement":d.placement,onKeyDown:l},o,p&&se.createElement(dCe,{ref:d.arrowRef,context:d.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}e.popperContainer&&(f=P.createElement(e.popperContainer,{},f)),c&&!s&&(f=se.createElement(lJ,{portalId:c,portalHost:u},f));var v=Ui("react-datepicker-wrapper",i);return se.createElement(se.Fragment,null,se.createElement("div",{ref:d.refs.setReference,className:v},r),f)},dxe=cxe(uxe);function hxe(e,t){return e&&t?Ko(e)!==Ko(t)||Nt(e)!==Nt(t):e!==t}var jO="Date input not valid.",uJ=(function(e){ko(t,e);function t(i){var n=e.call(this,i)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:vi()},n.modifyHolidays=function(){var s;return(s=n.props.holidays)===null||s===void 0?void 0:s.reduce(function(o,r){var a=new Date(r.date);return hE(a)?yu(yu([],o,!0),[$t($t({},r),{date:a})],!1):o},[])},n.calcInitialState=function(){var s,o=n.getPreSelection(),r=sJ(n.props),a=oJ(n.props),l=r&&mu(o,MT(r))?r:a&&ng(o,nK(a))?a:o;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&s!==void 0?s:l,highlightDates:dK(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.getInputValue=function(){var s,o=n.props,r=o.locale,a=o.startDate,l=o.endDate,c=o.rangeSeparator,u=o.selected,d=o.selectedDates,p=o.selectsMultiple,f=o.selectsRange,m=o.value,v=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,b=n.state.inputValue;return typeof m=="string"?m:typeof b=="string"?b:f?CCe(a,l,{dateFormat:v,locale:r,rangeSeparator:c}):p?xCe(d??[],{dateFormat:v,locale:r}):ga(u,{dateFormat:v,locale:r})},n.resetHiddenStatus=function(){n.setState($t($t({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState($t($t({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.focus)===null||o===void 0||o.call(s,{preventScroll:!0})},n.setBlur=function(){var s,o;(o=(s=n.input)===null||s===void 0?void 0:s.blur)===null||o===void 0||o.call(s),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(s,o){o===void 0&&(o=!1),n.setState({open:s,preSelection:s&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:UO},function(){s||n.setState(function(r){return{focused:o?r.focused:!1}},function(){!o&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Wd(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(s){var o,r,a=n.state.wasHidden,l=a?n.state.open:!0;a&&n.resetHiddenStatus(),n.state.preventFocus||((r=(o=n.props).onFocus)===null||r===void 0||r.call(o,s),l&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.resetInputValue=function(){n.setState($t($t({},n.state),{inputValue:null}))},n.handleBlur=function(s){var o,r;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((r=(o=n.props).onBlur)===null||r===void 0||r.call(o,s)),n.resetInputValue(),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(s){var o,r;n.props.inline||n.setOpen(!1),(r=(o=n.props).onClickOutside)===null||r===void 0||r.call(o,s),n.props.withPortal&&s.preventDefault()},n.handleChange=function(){for(var s,o,r,a,l,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];var d=c[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,c),!d||typeof d.isDefaultPrevented!="function"||d.isDefaultPrevented()))){n.setState({inputValue:d?.target instanceof HTMLInputElement?d.target.value:null,lastPreSelectChange:pxe});var p=n.props,f=p.selectsRange,m=p.startDate,v=p.endDate,b=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,C=(o=n.props.strictParsing)!==null&&o!==void 0?o:t.defaultProps.strictParsing,x=d?.target instanceof HTMLInputElement?d.target.value:"";if(f){var w=n.props.rangeSeparator,M=w.trim(),T=x.split(b.includes(M)?w:M,2).map(function(j){return j.trim()}),L=T[0],I=T[1],R=GO(L??"",b,n.props.locale,C),O=R?GO(I??"",b,n.props.locale,C):null,_=m?.getTime()!==R?.getTime(),B=v?.getTime()!==O?.getTime();if(!_&&!B||R&&yl(R,n.props)||O&&yl(O,n.props))return;(a=(r=n.props).onChange)===null||a===void 0||a.call(r,[R,O],d)}else{var V=GO(x,b,n.props.locale,C,(l=n.props.selected)!==null&&l!==void 0?l:void 0);(V||!x)&&n.setSelected(V,d,!0)}}},n.handleSelect=function(s,o,r){var a;if(!n.props.readOnly){var l=n.props,c=l.selectsRange,u=l.startDate,d=l.endDate,p=l.locale,f=l.swapRange,m=(a=n.props.dateFormat)!==null&&a!==void 0?a:t.defaultProps.dateFormat,v=!c||u&&!d&&(f||!HO(s,u));if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&v&&n.sendFocusBackToInput(),n.props.onChangeRaw){var b=ga(s,{dateFormat:m,locale:p});n.props.onChangeRaw(o,{date:s,formattedDate:b})}n.setSelected(s,o,!1,r),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect?n.setPreSelection(s):v&&n.setOpen(!1)}},n.setSelected=function(s,o,r,a){var l,c,u=s;if(n.props.showYearPicker){if(u!==null&&AT(Nt(u),n.props))return}else if(n.props.showMonthYearPicker){if(u!==null&&nJ(u,n.props))return}else if(u!==null&&yl(u,n.props))return;var d=n.props,p=d.onChange,f=d.selectsRange,m=d.startDate,v=d.endDate,b=d.selectsMultiple,C=d.selectedDates,x=d.minTime,w=d.swapRange;if(!Zf(n.props.selected,u)||n.props.allowSameDay||f||b)if(u!==null&&(n.props.selected&&(!r||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(u=VO(u,{hour:jd(n.props.selected),minute:Ud(n.props.selected),second:$p(n.props.selected)})),!r&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&x&&(u=VO(u,{hour:x.getHours(),minute:x.getMinutes(),second:x.getSeconds()})),n.props.inline||n.setState({preSelection:u}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:a})),f){var M=!m&&!v,T=m&&!v,L=!m&&!!v,I=m&&v;M?p?.([u,null],o):T?u===null?p?.([null,null],o):HO(u,m)?p?.(w?[u,m]:[u,null],o):p?.([m,u],o):L&&(u&&HO(u,v)?p?.([u,v],o):p?.([u,null],o)),I&&p?.([u,null],o)}else if(b){if(u!==null)if(!C?.length)p?.([u],o);else{var R=C.some(function(_){return Ut(_,u)});if(R){var O=C.filter(function(_){return!Ut(_,u)});p?.(O,o)}else p?.(yu(yu([],C,!0),[u],!1),o)}}else p?.(u,o);r||((c=(l=n.props).onSelect)===null||c===void 0||c.call(l,u,o),n.setState({inputValue:null}))},n.setPreSelection=function(s){if(!n.props.readOnly){var o=Wd(n.props.minDate),r=Wd(n.props.maxDate),a=!0;if(s){var l=MT(s);if(o&&r)a=_f(s,n.props.minDate,n.props.maxDate);else if(o){var c=MT(n.props.minDate);a=ng(s,c)||Zf(l,c)}else if(r){var u=nK(n.props.maxDate);a=mu(s,u)||Zf(l,u)}}a&&n.setState({preSelection:s})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(s){var o,r;if(!(n.props.selectsRange||n.props.selectsMultiple)){var a=n.props.selected?n.props.selected:n.getPreSelection(),l=n.props.selected?s:VO(a,{hour:jd(s),minute:Ud(s)});n.setState({preSelection:l}),(r=(o=n.props).onChange)===null||r===void 0||r.call(o,l),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var s,o;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(o=(s=n.props).onInputClick)===null||o===void 0||o.call(s)},n.onInputKeyDown=function(s){var o,r,a,l,c,u;(r=(o=n.props).onKeyDown)===null||r===void 0||r.call(o,s);var d=s.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(d===qe.ArrowDown||d===qe.ArrowUp||d===qe.Enter)&&((a=n.onInputClick)===null||a===void 0||a.call(n));return}if(n.state.open){if(d===qe.ArrowDown||d===qe.ArrowUp){s.preventDefault();var p=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',f=((l=n.calendar)===null||l===void 0?void 0:l.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(p);f instanceof HTMLElement&&f.focus({preventScroll:!0});return}var m=vi(n.state.preSelection);d===qe.Enter?(s.preventDefault(),s.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===UO?(n.handleSelect(m,s),!n.props.shouldCloseOnSelect&&n.setPreSelection(m)):n.setOpen(!1)):d===qe.Escape?(s.preventDefault(),s.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):d===qe.Tab&&n.setOpen(!1),n.inputOk()||(u=(c=n.props).onInputError)===null||u===void 0||u.call(c,{code:1,msg:jO})}},n.onPortalKeyDown=function(s){var o=s.key;o===qe.Escape&&(s.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(s){var o,r,a,l,c,u,d=n.props,p=d.minDate,f=d.maxDate,m=d.disabledKeyboardNavigation,v=d.showWeekPicker,b=d.shouldCloseOnSelect,C=d.locale,x=d.calendarStartDay,w=d.adjustDateOnChange,M=d.inline;if((r=(o=n.props).onKeyDown)===null||r===void 0||r.call(o,s),!m){var T=s.key,L=s.shiftKey,I=vi(n.state.preSelection),R=function(Y,G){var $=G;switch(Y){case qe.ArrowRight:$=v?CI(G,1):uc(G,1);break;case qe.ArrowLeft:$=v?W5(G):Bbe(G);break;case qe.ArrowUp:$=W5(G);break;case qe.ArrowDown:$=CI(G,1);break;case qe.PageUp:$=L?Vb(G,1):dm(G,1);break;case qe.PageDown:$=L?Hd(G,1):pc(G,1);break;case qe.Home:$=Kp(G,C,x);break;case qe.End:$=MCe(G);break}return $},O=function(Y,G){for(var $=40,W=Y,Q=!1,q=0,H=R(Y,G);!Q;){if(q>=$){H=G;break}p&&H<p&&(W=qe.ArrowRight,H=yl(p,n.props)?R(W,H):p),f&&H>f&&(W=qe.ArrowLeft,H=yl(f,n.props)?R(W,H):f),yl(H,n.props)?((W===qe.PageUp||W===qe.Home)&&(W=qe.ArrowRight),(W===qe.PageDown||W===qe.End)&&(W=qe.ArrowLeft),H=R(W,H)):Q=!0,q++}return H};if(T===qe.Enter){s.preventDefault(),n.handleSelect(I,s),!b&&n.setPreSelection(I);return}else if(T===qe.Escape){s.preventDefault(),n.setOpen(!1),n.inputOk()||(l=(a=n.props).onInputError)===null||l===void 0||l.call(a,{code:1,msg:jO});return}var _=null;switch(T){case qe.ArrowLeft:case qe.ArrowRight:case qe.ArrowUp:case qe.ArrowDown:case qe.PageUp:case qe.PageDown:case qe.Home:case qe.End:_=O(T,I);break}if(!_){(u=(c=n.props).onInputError)===null||u===void 0||u.call(c,{code:1,msg:jO});return}if(s.preventDefault(),n.setState({lastPreSelectChange:UO}),w&&n.setSelected(_),n.setPreSelection(_),M){var B=Ko(I),V=Ko(_),j=Nt(I),K=Nt(_);B!==V||j!==K?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(s){var o=s.key;o===qe.Escape&&(s.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),n.sendFocusBackToInput();var o=n.props,r=o.selectsRange,a=o.onChange;a?.(r?[null,null]:null,s),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(s){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(s)&&n.setOpen(!1)},n.renderCalendar=function(){var s,o;return!n.props.inline&&!n.isCalendarOpen()?null:se.createElement(oxe,$t({showMonthYearDropdown:void 0,ref:function(r){n.calendar=r}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(s=n.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:BCe(n.modifyHolidays()),outsideClickIgnoreClass:n.props.outsideClickIgnoreClass,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(o=n.props.dropdownMode)!==null&&o!==void 0?o:t.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var s,o=n.props.locale,r=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,a=n.props.showTimeInput||n.props.showTimeSelect,l=a?"PPPPp":"PPPP",c;return n.props.selectsRange?c="Selected start date: ".concat(ga(n.props.startDate,{dateFormat:l,locale:o}),". ").concat(n.props.endDate?"End date: "+ga(n.props.endDate,{dateFormat:l,locale:o}):""):n.props.showTimeSelectOnly?c="Selected time: ".concat(ga(n.props.selected,{dateFormat:r,locale:o})):n.props.showYearPicker?c="Selected year: ".concat(ga(n.props.selected,{dateFormat:"yyyy",locale:o})):n.props.showMonthYearPicker?c="Selected month: ".concat(ga(n.props.selected,{dateFormat:"MMMM yyyy",locale:o})):n.props.showQuarterYearPicker?c="Selected quarter: ".concat(ga(n.props.selected,{dateFormat:"yyyy, QQQ",locale:o})):c="Selected date: ".concat(ga(n.props.selected,{dateFormat:l,locale:o})),se.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},c)},n.renderDateInput=function(){var s,o,r=Ui(n.props.className,(s={},s[n.props.outsideClickIgnoreClass||t.defaultProps.outsideClickIgnoreClass]=n.state.open,s)),a=n.props.customInput||se.createElement("input",{type:"text"}),l=n.props.customInputRef||"ref";return P.cloneElement(a,(o={},o[l]=function(c){n.input=c},o.value=n.getInputValue(),o.onBlur=n.handleBlur,o.onChange=n.handleChange,o.onClick=n.onInputClick,o.onFocus=n.handleFocus,o.onKeyDown=n.onInputKeyDown,o.id=n.props.id,o.name=n.props.name,o.form=n.props.form,o.autoFocus=n.props.autoFocus,o.placeholder=n.props.placeholderText,o.disabled=n.props.disabled,o.autoComplete=n.props.autoComplete,o.className=Ui(a.props.className,r),o.title=n.props.title,o.readOnly=n.props.readOnly,o.required=n.props.required,o.tabIndex=n.props.tabIndex,o["aria-describedby"]=n.props.ariaDescribedBy,o["aria-invalid"]=n.props.ariaInvalid,o["aria-labelledby"]=n.props.ariaLabelledBy,o["aria-required"]=n.props.ariaRequired,o))},n.renderClearButton=function(){var s=n.props,o=s.isClearable,r=s.disabled,a=s.selected,l=s.startDate,c=s.endDate,u=s.clearButtonTitle,d=s.clearButtonClassName,p=d===void 0?"":d,f=s.ariaLabelClose,m=f===void 0?"Close":f,v=s.selectedDates,b=s.readOnly;return o&&!b&&(a!=null||l!=null||c!=null||v?.length)?se.createElement("button",{type:"button",className:Ui("react-datepicker__close-icon",p,{"react-datepicker__close-icon--disabled":r}),disabled:r,"aria-label":m,onClick:n.onClearClick,title:u,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,outsideClickIgnoreClass:aJ,readOnly:!1,rangeSeparator:tJ,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:U0,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(i,n){var s,o,r,a;i.inline&&hxe(i.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&i.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),i.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:dK(this.props.highlightDates)}),!n.focused&&!Zf(i.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((o=(s=this.props).onCalendarOpen)===null||o===void 0||o.call(s)),n.open===!0&&this.state.open===!1&&((a=(r=this.props).onCalendarClose)===null||a===void 0||a.call(r)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var i=this.props,n=i.showIcon,s=i.icon,o=i.calendarIconClassname,r=i.calendarIconClassName,a=i.toggleCalendarOnIconClick,l=this.state.open;return o&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),se.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&se.createElement(rxe,$t({icon:s,className:Ui(r,!r&&o,l&&"react-datepicker-ignore-onclickoutside")},a?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var i=this.renderCalendar();if(this.props.inline)return i;if(this.props.withPortal){var n=this.state.open?se.createElement(cJ,{enableTabLoop:this.props.enableTabLoop},se.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},i)):null;return this.state.open&&this.props.portalId&&(n=se.createElement(lJ,$t({portalId:this.props.portalId},this.props),n)),se.createElement("div",null,this.renderInputContainer(),n)}return se.createElement(dxe,$t({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:i,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t})(P.Component),pxe="input",UO="navigate";const Fo="http://localhost:4000/api/admin",K0=YR(e=>({isLoading:!1,isLoadingAttendance:!1,addClass:async({name:t,subjectIds:i})=>{e({isLoading:!0});try{const{data:n}=await wt.post(Fo+"/add-class",{name:t,subjectIds:i});return n}catch(n){return console.error("Error to add a class: ",n),{success:!1,message:n.response?.data?.message||"Failed to add class"}}finally{e({isLoading:!1})}},getClasses:async()=>{e({isLoading:!0});try{const{data:t}=await wt.get(Fo+"/classes");return t}catch(t){return console.error("Error to get all classes: ",t),{success:!1,message:t.response?.data?.message||"Failed to get classes"}}finally{e({isLoading:!1})}},addStudent:async({email:t,password:i,firstName:n,secondName:s,classId:o})=>{e({isLoading:!0});try{const{data:r}=await wt.post(Fo+"/add-student",{email:t,password:i,firstName:n,secondName:s,classId:o});return r}catch(r){return console.error("Error to add a student: ",r),{success:!1,message:r.response?.data?.message||"Failed to add student"}}finally{e({isLoading:!1})}},addTeacher:async({email:t,firstName:i,secondName:n,password:s,classes:o,subjectIds:r})=>{e({isLoading:!0});try{const{data:a}=await wt.post(Fo+"/add-teacher",{email:t,password:s,firstName:i,secondName:n,classes:o,subjectIds:r});return a}catch(a){return console.error("Error to add a teacher: ",a),{success:!1,message:a.response?.data?.message||"Failed to add teacher"}}finally{e({isLoading:!1})}},getAllClasses:async()=>{e({isLoading:!0});try{const{data:t}=await wt.get(Fo+"/classesById");return t}catch(t){return console.error("Error toget all class: ",t),{success:!1,message:t.response?.data?.message||"Failed to get classes"}}finally{e({isLoading:!1})}},getAllTeachers:async()=>{e({isLoading:!0});try{const{data:t}=await wt.get(Fo+"/teachers");return t}catch(t){return console.error("Error to get all teachers: ",t),{success:!1,message:t.response?.data?.message||"Failed to get teachers"}}finally{e({isLoading:!1})}},getStudentsByClass:async t=>{e({isLoading:!0});try{const{data:i}=await wt.post(Fo+"/getStudentsByClass",{id:t});return i}catch(i){return console.error("Error to get all class: ",i),{success:!1,message:i.response?.data?.message||"Failed to get classes"}}finally{e({isLoading:!1})}},updateStudent:async t=>{e({isLoading:!0});try{const{data:i}=await wt.post(Fo+"/updateStudent",t);return i}catch(i){return console.error("Error updating student",i),{success:!1,message:i.response?.data?.message||"Failed to update student"}}finally{e({isLoading:!1})}},deleteStudent:async t=>{e({isLoading:!0});try{const{data:i}=await wt.delete(Fo+"/student/"+t);return i}catch(i){return console.error("Error deleting student",i),{success:!1,message:i.response?.data?.message||"Failed to delete student"}}finally{e({isLoading:!1})}},getClassesAndSubjects:async()=>{e({isLoading:!0});try{const{data:t}=await wt.get(Fo+"/getClassesAndSubjects");return console.log(t),t}catch(t){return console.error("Error to get all classes and subjects: ",t),{success:!1,message:t.response?.data?.message||"Failed to get classes and subjects"}}finally{e({isLoading:!1})}},deleteTeacher:async t=>{e({isLoading:!0});try{const{data:i}=await wt.delete(Fo+"/teacher",{data:{email:t}});return i}catch(i){return console.error("Error deleting teacher",i),{success:!1,message:i.response?.data?.message||"Failed to delete teacher"}}finally{e({isLoading:!1})}},updateTeacher:async t=>{e({isLoading:!0});try{const{data:i}=await wt.post(Fo+"/updateTeacher",t);return i}catch(i){return console.error("Error updating teacher",i),{success:!1,message:i.response?.data?.message||"Failed to update teacher"}}finally{e({isLoading:!1})}},deleteClass:async t=>{e({isLoading:!0});try{const{data:i}=await wt.delete(Fo+"/class/"+t);return i}catch(i){return console.error("Error deleting class",i),{success:!1,message:i.response?.data?.message||"Failed to delete class"}}finally{e({isLoading:!1})}},updateClass:async t=>{e({isLoading:!0});try{const{data:i}=await wt.post(Fo+"/updateClass",t);return i}catch(i){return console.error("Error updating class",i),{success:!1,message:i.response?.data?.message||"Failed to update class"}}finally{e({isLoading:!1})}},getMonthlyAttendance:async t=>{e({isLoadingAttendance:!0});try{const{data:i}=await wt.post(Fo+"/getMonthlyAttendance",{year:t});return i}catch(i){return console.error("Error getting monthly attendance",i),{success:!1,message:i.response?.data?.message||"Failed to get monthly attendance"}}finally{e({isLoadingAttendance:!1})}},getCounts:async()=>{e({isLoading:!0});try{const{data:t}=await wt.get(Fo+"/counts");return t}catch(t){return console.error("Error getting count",t),{success:!1,message:t.response?.data?.message||"Failed to get count"}}finally{e({isLoading:!1})}}}));var gxe=Object.defineProperty,dJ=(e,t)=>{for(var i in t)gxe(e,i,{get:t[i],enumerable:!0})},fe={};dJ(fe,{error:()=>hJ,errorOnce:()=>yxe,log:()=>fxe,logGroup:()=>bxe,reset:()=>vxe,table:()=>mxe,warn:()=>dG,warnOnce:()=>_w});var OB=new Set;function fxe(...e){console.log(...e)}function dG(e,...t){console.warn(`AG Charts - ${e}`,...t)}function hJ(e,...t){typeof e=="object"?console.error("AG Charts error",e,...t):console.error(`AG Charts - ${e}`,...t)}function mxe(...e){console.table(...e)}function pJ(e,t,i){let n;e instanceof Error?n=e.message:typeof e=="string"?n=e:typeof e=="object"?n=JSON.stringify(e):n=String(e);const s=`${t}: ${n}`;OB.has(s)||(i(e),OB.add(s))}function _w(e,...t){pJ(e,"Logger.warn",i=>dG(i,...t))}function yxe(e,...t){pJ(e,"Logger.error",i=>hJ(i,...t))}function vxe(){OB.clear()}function bxe(e,t){console.groupCollapsed(e);try{return t()}finally{console.groupEnd()}}var cr={};dJ(cr,{detectChartDefinition:()=>Dxe,getAxisModule:()=>Mxe,getPresetModule:()=>Axe,getSeriesModule:()=>kxe,hasModule:()=>xxe,listModulesByType:()=>wxe,register:()=>gJ,registerMany:()=>Sxe,reset:()=>Cxe});var kT=(e=>(e.Axis="axis",e.Chart="chart",e.Preset="preset",e.Plugin="plugin",e.Series="series",e))(kT||{}),xu=new Map;function gJ(e,t){const{def:i,version:n}=xu.get(e.name)??{};if(!i){xu.set(e.name,{def:e,version:t});return}if(!i.enterprise&&e.enterprise&&t===n){xu.set(e.name,{def:e,version:t});return}if(n===t){dG([`AG Charts - Module '${e.name}' already registered,',
                'ignoring (version: ${n}).`,"Check your code for duplicate loading of charts NPM modules."].join(" "));return}throw new Error([`AG Charts - Module '${e.name}' already registered with different version:`,`${n} vs ${t}`,"","Check your package.json for conflicting dependencies - depending on your package manager","one of these commands may help:","- npm ls ag-charts-community","- yarn why ag-charts-community"].join(`
`))}function Sxe(e,t){for(const i of e)gJ(i,t)}function Cxe(){xu.clear()}function xxe(e){return xu.has(e)}function*wxe(e){for(const t of xu.values())Y0(e,t.def)&&(yield t.def)}function Dxe(e){for(const t of xu.values())if(Y0("chart",t.def)&&t.def.detect(e))return t.def;throw new Error("AG Charts - Unknown chart type; Check options are correctly structured and series types are specified")}function Mxe(e){const t=xu.get(e);if(Y0("axis",t?.def))return t?.def}function Axe(e){const t=xu.get(e);if(Y0("preset",t?.def))return t?.def}function kxe(e){const t=xu.get(e);if(Y0("series",t?.def))return t?.def}function Y0(e,t){return t?.type===e}var Dc=class{constructor(){this.events=new Map}on(e,t){return this.events.has(e)||this.events.set(e,new Set),this.events.get(e)?.add(t),()=>this.off(e,t)}off(e,t){const i=this.events.get(e);i&&(i.delete(t),i.size===0&&this.events.delete(e))}emit(e,t){const i=this.events.get(e);if(i)for(const n of i)n(t)}clear(e){e?this.events.delete(e):this.events.clear()}},hG=class{constructor(e){if(this.maxCacheSize=e,this.store=new Map,e<=0)throw new Error("LRUCache size must be greater than 0")}get(e){if(!this.store.has(e))return;const t=this.store.get(e);return this.store.delete(e),this.store.set(e,t),t}has(e){return this.store.has(e)}set(e,t){return this.store.set(e,t),this.store.size>this.maxCacheSize&&this.store.delete(this.store.keys().next().value),t}clear(){this.store.clear()}};function Je(e,t,i){return Math.min(i,Math.max(e,t))}function Txe(e,t,i=1e-10){return e>=t[0]-i&&e<=t[1]+i}function Jt(e,t,i=1e-10){return e===t||Math.abs(e-t)<i}function pG(e){return Math.sign(e)===-1||Object.is(e,-0)}function Ixe(e){return e%1===0}function FB(e,t=2){const i=10**t;return Math.round(e*i)/i}function Rxe(e,t){return Math.floor(e%t+(e<0?Math.abs(t):0))}function X0(e){if(Math.floor(e)===e)return 0;let t=String(e),i=0;if(e<1e-6||e>=1e21){let s;[t,s]=t.split("e"),s!=null&&(i=Number(s))}const n=t.split(".")[1]?.length??0;return Math.max(n-i,0)}var sh={};typeof globalThis.window<"u"&&(sh.window=globalThis.window);typeof document<"u"?sh.document=document:typeof globalThis.global<"u"&&(sh.document=globalThis.document);function Eu(e){return e?sh.document?.[e]:sh.document}function Qt(e){return e?sh.window?.[e]:sh.window}function Exe(e){sh.document=e}function Lxe(e){sh.window=e}function nt(e,t,i){const n=Eu().createElement(e);if(typeof t=="object"&&(i=t,t=void 0),t)for(const s of t.split(" "))n.classList.add(s);return i&&Object.assign(n.style,i),n}function Pn(e){return Eu().createElementNS("http://www.w3.org/2000/svg",e)}function Pxe(e,t){const i=Eu("body"),n=nt("a",{display:"none"});n.href=e,n.download=t,i.appendChild(n),n.click(),setTimeout(()=>n.remove())}function gi(e,t,i,n){return e.addEventListener(t,i,n),()=>e.removeEventListener(t,i,n)}var Cx;function Nxe(e){if(Cx==null){const i=Qt("Option");Cx=new i().style}Cx.color=e;const t=Cx.color||null;return Cx.color="",t}function In(e){return e!=null}function ft(e){return Array.isArray(e)}function Oxe(e){return typeof e=="boolean"}function gc(e){return e instanceof Date}function fb(e){return gc(e)&&!Number.isNaN(Number(e))}function Fxe(e){return e instanceof RegExp}function ph(e){return typeof e=="function"}function St(e){return typeof e=="object"&&e!==null&&!ft(e)}function PI(e){return ft(e)||bi(e)}function bi(e){return typeof e=="object"&&e!==null&&e.constructor?.name==="Object"}function TT(e){if(typeof e!="object"||e===null)return!1;for(const t in e)return!1;return!0}function Nn(e){return typeof e=="string"}function En(e){return typeof e=="number"}function Kt(e){return Number.isFinite(e)}function Bxe(e){return typeof globalThis.window<"u"&&e instanceof HTMLElement}function IT(e){return typeof e=="symbol"}function _xe(e){return Nn(e)&&(e==="none"||Nxe(e)!=null)}function zxe(e,t){return e in t}var fJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,mJ=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/;function Gxe(e){if(!Nn(e))return!1;const t=mJ.exec(e);return fJ.test(t?t[2]:e)}function gG(e){let t,i;const n=mJ.exec(e);n&&([,t,e,i]=n);const s=fJ.exec(e);if(!s){fe.warnOnce(`The number formatter is invalid: ${e}`);return}const[,o,r,a,l,c,u,d,p,f,m]=s;return{fill:o,align:r,sign:a,symbol:l,zero:c,width:Number.parseInt(u),comma:d,precision:Number.parseInt(p),trim:!!f,type:m,prefix:t,suffix:i}}function yJ(e){const t=typeof e=="string"?gG(e):e;if(t==null)return;const{fill:i,align:n,sign:s="-",symbol:o,zero:r,width:a,comma:l,type:c,prefix:u="",suffix:d="",precision:p}=t;let{trim:f}=t;const m=p==null||Number.isNaN(p);let v;if(!c)v=fl.g,f=!0;else if(c in fl&&c in ob)v=m?ob[c]:fl[c];else if(c in fl)v=fl[c];else if(c in ob)v=ob[c];else throw new Error(`The number formatter type is invalid: ${c}`);const b=c?6:12;let C;return m||(C=p),(x,w)=>{let M=v(x,C??w??b);return f&&(M=Wxe(M)),l&&(M=jxe(M,l)),M=$xe(x,M,s),o&&o!=="#"&&(M=`${o}${M}`),o==="#"&&c==="x"&&(M=`0x${M}`),c==="s"&&(M=`${M}${Uxe(x)}`),(c==="%"||c==="p")&&(M=`${M}%`),a!=null&&!Number.isNaN(a)&&(M=Kxe(M,a,i??r,n)),M=`${u}${M}${d}`,M}}var ob={b:e=>WA(e).toString(2),c:e=>String.fromCodePoint(e),d:e=>Math.round(Math.abs(e)).toFixed(0),o:e=>WA(e).toString(8),x:e=>WA(e).toString(16),X:e=>ob.x(e).toUpperCase(),n:e=>ob.d(e),"%":e=>`${WA(e*100).toFixed(0)}`},fl={e:(e,t)=>Math.abs(e).toExponential(t),E:(e,t)=>fl.e(e,t).toUpperCase(),f:(e,t)=>Math.abs(e).toFixed(t),F:(e,t)=>fl.f(e,t).toUpperCase(),g:(e,t)=>{if(e===0)return"0";const i=Math.abs(e),n=Math.floor(Math.log10(i));return n>=-4&&n<t?i.toFixed(t-1-n):i.toExponential(t-1)},G:(e,t)=>fl.g(e,t).toUpperCase(),n:(e,t)=>fl.g(e,t),p:(e,t)=>fl.r(e*100,t),r:(e,t)=>{if(e===0)return"0";const i=Math.abs(e),s=Math.floor(Math.log10(i))-(t-1);if(s<=0)return i.toFixed(-s);const o=10**s;return(Math.round(i/o)*o).toFixed()},s:(e,t)=>{const i=SJ(e);return fl.r(e/10**i,t)},"%":(e,t)=>fl.f(e*100,t)},vJ=-24,bJ=24,Vxe={[vJ]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[bJ]:"Y"},Hxe="";function WA(e){return Math.floor(Math.abs(e))}function Wxe(e){if(!e.endsWith("0")||!e.includes("."))return e;let t=e.length-1;for(;t>0;)if(e[t]=="0")t-=1;else if(e[t]=="."){t-=1;break}else break;return e.substring(0,t+1)}function jxe(e,t){let i=e.indexOf(".");i<0&&(i=e.length);const n=e.substring(0,i).split(""),s=e.substring(i);for(let o=n.length-3;o>0;o-=3)n.splice(o,0,t);return`${n.join("")}${s}`}function Uxe(e){return Vxe[SJ(e)]}function SJ(e){return Je(vJ,e?Math.floor(Math.log10(Math.abs(e))/3)*3:0,bJ)}function $xe(e,t,i=""){if(i==="(")return e>=0?t:`(${t})`;const n=i==="+"?"+":"";return`${e>=0?n:Hxe}${t}`}function Kxe(e,t,i=" ",n=">"){let s=e;if(n===">"||!n)s=s.padStart(t,i);else if(n==="<")s=s.padEnd(t,i);else if(n==="^"){const o=Math.max(0,t-s.length),r=Math.ceil(o/2),a=Math.floor(o/2);s=s.padStart(r+s.length,i),s=s.padEnd(a+s.length,i)}return s}var jA={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function fG(e,t=new Date(e.getFullYear(),0,1)){const i=e.getTimezoneOffset()-t.getTimezoneOffset(),n=e.getTime()-t.getTime()+i*6e4,s=36e5*24;return Math.floor(n/s)}function yK(e,t){const n=new Date(e.getFullYear(),0,1).getDay(),s=(t-n+7)%7,o=new Date(e.getFullYear(),0,s+1);return o<=e?Math.floor(fG(e,o)/7)+1:0}var Yxe=0,CJ=1,vK=4;function xJ(e,t=e.getFullYear()){const n=new Date(t,0,1).getDay(),s=(vK-n+7)%7,o=new Date(t,0,s-(vK-CJ)+1);return o<=e?Math.floor(fG(e,o)/7)+1:xJ(e,t-1)}function Xxe(e){const t=e.getTimezoneOffset(),i=Math.abs(t);return`${t>0?"-":"+"}${po(Math.floor(i/60),2,"0")}${po(Math.floor(i%60),2,"0")}`}var Zxe={a:e=>jA.shortDays[e.getDay()],A:e=>jA.days[e.getDay()],b:e=>jA.shortMonths[e.getMonth()],B:e=>jA.months[e.getMonth()],c:"%x, %X",d:(e,t)=>po(e.getDate(),2,t??"0"),e:"%_d",f:(e,t)=>po(e.getMilliseconds()*1e3,6,t??"0"),H:(e,t)=>po(e.getHours(),2,t??"0"),I:(e,t)=>{const i=e.getHours()%12;return i===0?"12":po(i,2,t??"0")},j:(e,t)=>po(fG(e)+1,3,t??"0"),m:(e,t)=>po(e.getMonth()+1,2,t??"0"),M:(e,t)=>po(e.getMinutes(),2,t??"0"),L:(e,t)=>po(e.getMilliseconds(),3,t??"0"),p:e=>e.getHours()<12?"AM":"PM",Q:e=>String(e.getTime()),s:e=>String(Math.floor(e.getTime()/1e3)),S:(e,t)=>po(e.getSeconds(),2,t??"0"),u:e=>{let t=e.getDay();return t<1&&(t+=7),String(t%7)},U:(e,t)=>po(yK(e,Yxe),2,t??"0"),V:(e,t)=>po(xJ(e),2,t??"0"),w:(e,t)=>po(e.getDay(),2,t??"0"),W:(e,t)=>po(yK(e,CJ),2,t??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(e,t)=>po(e.getFullYear()%100,2,t??"0"),Y:(e,t)=>po(e.getFullYear(),4,t??"0"),Z:e=>Xxe(e),"%":()=>"%"},qxe={_:" ",0:"0","-":""};function po(e,t,i){const n=String(Math.floor(e));return n.length>=t?n:`${i.repeat(t-n.length)}${n}`}function zw(e){const t=[];for(;e.length>0;){let i=e.indexOf("%");if(i!==0){const a=i>0?e.substring(0,i):e;t.push(a)}if(i<0)break;const n=e[i+1],s=qxe[n];s!=null&&i++;const o=e[i+1],r=Zxe[o];if(typeof r=="function")t.push([r,s]);else if(typeof r=="string"){const a=zw(r);t.push([a,s])}else t.push(`${s??""}${o}`);e=e.substring(i+2)}return i=>{const n=typeof i=="number"?new Date(i):i;return t.map(s=>typeof s=="string"?s:s[0](n,s[1])).join("")}}function BB(e,t=0,i){const{leading:n=!1,trailing:s=!0,maxWait:o=1/0}=i??{};let r,a;if(o<t)throw new Error("Value of maxWait cannot be lower than waitMs.");function l(...c){if(n&&!a){a=Date.now(),r=setTimeout(()=>a=null,t),e(...c);return}let u=t;if(o!==1/0&&a){const d=Date.now()-a;t>o-d&&(u=o-d)}clearTimeout(r),a??(a=Date.now()),r=setTimeout(()=>{a=null,s&&e(...c)},u)}return Object.assign(l,{cancel(){clearTimeout(r),a=null}})}function bK(e,t,i){const{leading:n=!0,trailing:s=!0}=i??{};let o,r,a=!1;function l(){s&&r?(o=setTimeout(l,t),e(...r)):a=!1,r=null}function c(...u){a?r=u:(a=!0,o=setTimeout(l,t),n?e(...u):r=u)}return Object.assign(c,{cancel(){clearTimeout(o),a=!1,r=null}})}function wJ(e,t,i=""){try{return e(...t)}catch(n){const s=i?` \`${i}\``:"";_w(`Uncaught exception in user callback${s}`,n)}}function Gw(e,t="and",i=String,n=1/0){if(e.length===0)return"";if(e.length===1)return i(e[0]);e=e.map(i);const s=e.pop();if(e.length>=n){const o=e.length-(n-1);return`${e.slice(0,n-1).join(", ")}, and ${o} more ${t} ${s}`}return`${e.join(", ")} ${t} ${s}`}function mG(e,t=1/0){if(typeof e=="number"){if(Number.isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity"}const i=JSON.stringify(e)??typeof e;return i.length>t?`${i.slice(0,t)}... (+${i.length-t} characters)`:i}function Qxe(e){let t=1;for(let i=0;i<e.length;i++)e.codePointAt(i)===10&&t++;return t}function Jxe(e,t){if(e===t)return 0;const[i,n]=e.length<t.length?[e,t]:[t,e],s=i.length,o=n.length;let r=new Array(s+1).fill(0).map((l,c)=>c),a=new Array(s+1);for(let l=1;l<=o;l++){a[0]=l;for(let c=1;c<=s;c++){const u=n[l-1]===i[c-1]?0:1;a[c]=Math.min(r[c]+1,a[c-1]+1,r[c-1]+u)}[r,a]=[a,r]}return r[s]}function ewe(e){return e.replaceAll(twe,(t,i)=>(i>0?"-":"")+t.toLowerCase())}var twe=/[A-Z]+(?![a-z])|[A-Z]/g;function Gt(e,t=""){return e==null?t:ft(e)?e.map(i=>i.text).join(""):Nn(e)?e:String(e)}var Ia=Symbol("description"),DJ=Symbol("required"),NI=Symbol("marked"),pE=Symbol("undocumented"),OI=Symbol("union"),iwe=[["placement","position"],["padding","spacing","gap"],["color","fill","stroke"],["whisker","wick"],["nodeClick","seriesNodeClick"],["nodeDoubleClick","seriesNodeDoubleClick"],["src","url"]].reduce((e,t)=>{for(const i of t)e.set(i.toLowerCase(),new Set(t.filter(n=>n!==i)));return e},new Map),yG=(e=>(e.Invalid="invalid",e.Required="required",e.Unknown="unknown",e))(yG||{});function Vw(e,t){return Kt(t)?`${e}[${t}]`:e?`${e}.${t}`:t}var Yp=class{constructor(e,t,i,n,s){this.type=e,this.description=t,this.value=i,this.path=n,this.key=s}setUnionType(e,t){if(this.path.startsWith(t)){const i=this.path.slice(t.length);this.altPath=`${t}[type=${e}]${i}`}}getPrefix(){const{altPath:e=this.path,key:t}=this;return!e&&!t?"Value":`Option \`${t?Vw(e,t):e}\``}toString(){const{description:e="unknown",type:t,value:i}=this;return t==="required"&&i==null?`${this.getPrefix()} is required and has not been provided; expecting ${e}, ignoring.`:`${this.getPrefix()} cannot be set to \`${mG(i,50)}\`; expecting ${e}, ignoring.`}},vG=class extends Yp{constructor(e,t,i,n){super("unknown",void 0,t,i,n),this.suggestions=e,this.key=n}getPrefix(){return`Unknown option \`${Vw(this.altPath??this.path,this.key)}\``}getPostfix(){const e=Gw(nwe(this.key,this.suggestions),"or",t=>`\`${t}\``);return e?`; Did you mean ${e}? Ignoring.`:", ignoring."}toString(){return`${this.getPrefix()}${this.getPostfix()}`}};function yo(e,t,i=""){if(!St(e))return{cleared:null,invalid:[new Yp("required","an object",e,i)]};const n={},s=[],o=new Set(Object.keys(e)),r=[];if(OI in t){const a=Object.keys(t),l=t[OI];if(e.type!=null&&a.includes(e.type)||e.type==null&&l!=null){const{type:c=l,...u}=e,d=yo(u,t[c],i);Object.assign(n,{type:c},d.cleared);for(const p of d.invalid)p.setUnionType(c,i);s.push(...d.invalid)}else{const c=Gw(a,"or",u=>`'${u}'`);s.push(new Yp("required",`a keyword such as ${c}`,e.type,i,"type"))}return{cleared:n,invalid:s}}for(const a of Object.keys(t)){const l=t[a],c=l[DJ],u=e[a];if(o.delete(a),u===void 0&&(l[pE]||r.push(a),!c))continue;const d=Vw(i,a);if(ph(l)){const f=l(u,{options:e,path:d});if(typeof f=="object"){if(s.push(...f.invalid),f.valid){n[a]=f.cleared;continue}else if(mb(f.invalid,d))continue}else if(f){n[a]=u;continue}s.push(new Yp(c?"required":"invalid",l[Ia],u,i,a))}else{const p=yo(u,l,d);p.cleared!=null&&(n[a]=p.cleared),s.push(...p.invalid)}}for(const a of o){const l=e[a];l!==void 0&&s.push(new vG(r,l,i,a))}return{cleared:n,invalid:s}}function nwe(e,t,i=2){const n=[],s=e.toLowerCase(),o=iwe.get(s);for(const r of t){const a=r.toLowerCase();(o?.has(r)||a.includes(s)||Jxe(s,a)<=i)&&n.push(r)}return n}function Yt(e,t){if(ph(e)){let i=function(n,s){return e(n,s)};return i[Ia]=t,i}else return{...e,[Ia]:t}}function ue(e){return Object.assign(ph(e)?(t,i)=>e(t,i):Ki(e),{[DJ]:!0,[Ia]:e[Ia]})}function Xe(e){return Object.assign(ph(e)?(t,i)=>e(t,i):Ki(e),{[pE]:!0,[Ia]:e[Ia]})}var Ki=(e,t="an object",i=!1)=>Yt((n,s)=>{const o=yo(n,e,s.path),r=!mb(o.invalid,s.path);return{valid:r,cleared:r||!i?o.cleared:null,invalid:o.invalid}},t),Xm=(e,t,i)=>({...e,[Ia]:t,[OI]:i}),si=(...e)=>Yt((t,i)=>{const n=[];for(const s of e){const o=s(t,i);if(typeof o=="object"){if(n.push(...o.invalid),!o.valid)return{valid:!1,cleared:t,invalid:n};t=o.cleared}else if(!o)return!1}return{valid:!0,cleared:t,invalid:n}},e.filter(t=>!t[pE]).map(t=>t[Ia]).filter(Boolean).join(" and ")),lt=(...e)=>Yt((t,i)=>{for(const n of e){const s=n(t,i);if(typeof s=="object"?s.valid:s)return s}return!1},e.filter(t=>!t[pE]).map(t=>t[Ia]).filter(Boolean).join(" or ")),$b=e=>Kt(e)||fb(e),swe=e=>gc(e)||(Kt(e)||Nn(e))&&fb(new Date(e)),Mc=Yt(ft,"an array"),te=Yt(Oxe,"a boolean"),cn=Yt(ph,"a function"),Fe=Yt(_xe,"a color string"),Lu=Yt(swe,"a date"),at=Yt(In,"a defined value"),ve=Yt(Kt,"a number"),gE=Yt(St,"an object"),J=Yt(Nn,"a string"),MJ=Yt(e=>typeof HTMLElement>"u"||e instanceof HTMLElement,"an html element"),yg=(e,t=1/0)=>{let i;return t===1/0?i=`an array of at least ${e} items`:e===t?i=`an array of exactly ${e} items`:e===0?i=`an array of no more than ${t} items`:i=`an array of at least ${e} and no more than ${t} items`,Yt(n=>ft(n)&&n.length>=e&&n.length<=t,i)},AJ=(e,t=1/0)=>{let i;return t===1/0?i=`a string of at least ${e} characters`:e===t?i=`an string of exactly ${e} characters`:i=`an string of at least ${e} and no more than ${t} characters`,Yt(n=>Nn(n)&&n.length>=e&&n.length<=t,i)},kJ=(e,t=!0)=>Yt(i=>Kt(i)&&(i>e||t&&i===e),`a number greater than ${t?"or equal to ":""}${e}`),TJ=(e,t)=>Yt(i=>Kt(i)&&i>=e&&i<=t,`a number between ${e} and ${t} inclusive`),re=kJ(0),Hw=kJ(0,!1),Ke=TJ(0,1),Il=e=>Yt((t,{options:i})=>!$b(t)||!$b(i[e])||t<i[e],`the value to be less than \`${e}\``),owe=e=>Yt((t,{options:i})=>!$b(t)||!$b(i[e])||t<=i[e],`the value to be less than or equal to \`${e}\``),Rl=e=>Yt((t,{options:i})=>!$b(t)||!$b(i[e])||t>i[e],`the value to be greater than \`${e}\``);function Me(...e){St(e[0])&&(e=Object.values(e[0]));const t=Gw(e,"or",i=>`'${i}'`);return Yt(i=>e.includes(i),`a keyword such as ${t}`)}var ht=e=>Yt(t=>e===t,`the value ${JSON.stringify(e)}`),it=(e,t,i=!0)=>Yt((n,s)=>{if(!ft(n))return!1;let o=i;const r=[],a=[],l=c=>o=i?o&&c:o||c;if(n.length===0)return{valid:!0,cleared:r,invalid:a};for(let c=0;c<n.length;c++){const u=n[c],d=e(u,{options:u,path:`${s.path}[${c}]`});typeof d=="object"?(o=l(d.valid),a.push(...d.invalid),d.cleared!=null&&r.push(d.cleared)):(o=l(d),d&&r.push(u))}return{valid:o,cleared:o||!i?r:null,invalid:a}},t??`${e[Ia]} array`),Sn=(e,t="an object array")=>Yt((i,n)=>{if(!ft(i))return!1;const s=[],o=[];for(let r=0;r<i.length;r++){const a=`${n.path}[${r}]`,l=yo(i[r],e,a);mb(l.invalid,a)||s.push(l.cleared),o.push(...l.invalid)}return{valid:!0,cleared:s,invalid:o}},t),Qo=(e,t)=>Yt((i,n)=>ph(i)?NI in i?!0:{valid:!0,cleared:Object.assign((...o)=>{const r=wJ(i,o);if(r==null)return;const a=e(r,{options:r,path:""});if(typeof a=="object"){for(const l of a.invalid)IJ(n,e[Ia])(l);if(a.valid)return a.cleared}else{if(a)return r;_w(`Callback \`${n.path}\` returned an invalid value \`${mG(r,50)}\`; expecting ${e[Ia]}, ignoring.`)}},{[NI]:!0}),invalid:[]}:!1,"a function"),ri=(e,t="an object")=>Yt((i,n)=>ph(i)?NI in i?!0:{valid:!0,cleared:Object.assign((...o)=>{const r=wJ(i,o,n.path);if(r==null)return;const a=yo(r,e);for(const l of a.invalid)IJ(n,t)(l);return a.cleared},{[NI]:!0}),invalid:[]}:!1,"a function");function mb(e,t){return e.some(i=>i.type==="required"&&i.path===t)}function IJ(e,t){return i=>{if(i instanceof vG)return _w(`Callback \`${e.path}\` returned an unknown property \`${Vw(i.path,i.key)}\`${i.getPostfix()}`);const n=mG(i.value,50);_w(i.key?`Callback \`${e.path}\` returned an invalid property \`${Vw(i.path,i.key)}\`: \`${n}\`; expecting ${i.description}, ignoring.`:`Callback \`${e.path}\` returned an invalid value \`${n}\`; expecting ${t??i.description}, ignoring.`)}}var FI=e=>{if(!St(e))return!1;const t=Object.keys(e);return t.length===1&&t[0].startsWith("$")},rwe=Ki({color:Fe,stop:Ke},""),RJ=Yt(e=>{let t=-1/0;for(const i of e)if(i?.stop!=null){if(i.stop<t)return!1;t=i.stop}return!0},"color stops to be defined in ascending order"),bG=si(yg(2),it(rwe),RJ),SG=Me("axis","item","series"),$O=Ki({type:ue(ht("gradient")),colorStops:ue(bG),rotation:ve,gradient:Xe(Me("linear","radial","conic")),bounds:Xe(SG),reverse:Xe(te),colorSpace:Xe(Me("rgb","oklch"))},"a gradient object with color stops"),Ie={stroke:Fe,strokeWidth:re,strokeOpacity:Ke},CG=Ki({type:ue(ht("gradient")),gradient:ue(Me("linear","radial","conic")),bounds:ue(SG),colorStops:ue(lt(bG,si(yg(2),it(Fe)))),rotation:ue(ve),reverse:ue(te),colorSpace:ue(Me("rgb","oklch"))}),xG=Ki({type:ue(ht("pattern")),pattern:ue(Me("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses")),path:AJ(2),width:ue(re),height:ue(re),fill:ue(Fe),fillOpacity:ue(Ke),backgroundFill:ue(Fe),backgroundFillOpacity:ue(Ke),padding:ue(re),rotation:ue(ve),scale:ue(re),stroke:ue(Fe),strokeWidth:ue(re),strokeOpacity:ue(Ke)}),wG=Ki({type:ue(ht("image")),url:J,width:re,height:re,rotation:ue(ve),backgroundFill:ue(Fe),backgroundFillOpacity:Ke,fit:ue(Me("stretch","contain","cover")),repeat:ue(Me("repeat","repeat-x","repeat-y","no-repeat"))}),awe=Xm({gradient:{colorStops:bG,rotation:ve,gradient:Xe(Me("linear","radial","conic")),bounds:Xe(SG),reverse:Xe(te),colorSpace:Xe(Me("rgb","oklch"))},pattern:{pattern:Me("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses"),path:AJ(2),width:re,height:re,rotation:ve,scale:re,fill:Fe,fillOpacity:Ke,backgroundFill:Fe,backgroundFillOpacity:Ke,...Ie,padding:Xe(re)},image:{url:ue(J),backgroundFill:Fe,backgroundFillOpacity:Ke,width:re,height:re,fit:Me("stretch","contain","cover","none"),repeat:Me("repeat","repeat-x","repeat-y","no-repeat"),rotation:ve}},"a color object"),Nl=lt(Fe,Ki(awe,"a color object")),ze={fill:Nl,fillOpacity:Ke};ze.fillGradientDefaults=Xe(CG);ze.fillPatternDefaults=Xe(xG);ze.fillImageDefaults=Xe(wG);var je={lineDash:it(re),lineDashOffset:ve},Pu={...ze,...Ie,...je,opacity:Ke,cornerRadius:re},Im={...Ie,...je,opacity:Ke},Yi={...ze,...Ie,...je,opacity:Ke};function EJ(e){return{enabled:te,range:Me("tooltip","node"),highlightedItem:e,unhighlightedItem:e}}function Fn(e,t){return{enabled:te,range:Me("tooltip","node"),highlightedItem:e,unhighlightedItem:e,highlightedSeries:t,unhighlightedSeries:t,bringToFront:te}}var lwe={start:at,stop:at,...Ie,...ze,...je},cwe={start:at,stop:at,...Ie,...je},vg=Ki({enabled:te,key:ue(Me("x","y")),segments:Sn(lwe,"path segments array")},"a segmentation object",!0),uwe=Ki({enabled:te,key:ue(Me("x","y")),segments:Sn(cwe,"path segments array")},"a segmentation object",!0),SK=Ki({googleFont:J},"google font"),_B=lt(J,FI,SK,it(lt(J,SK))),fi={color:Fe,fontFamily:_B,fontSize:re,fontStyle:Me("normal","italic","oblique"),fontWeight:lt(re,Me("normal","bold","bolder","lighter"))},dwe=Ki({top:ve,right:ve,bottom:ve,left:ve},"padding object"),RT=lt(ve,dwe),ET={enabled:te,stroke:Fe,strokeWidth:re,strokeOpacity:Ke},ac={border:{...ET},cornerRadius:ve,padding:RT,...ze};function hwe(e,t,i=1/0){const n=t,s=i,o=e%180*(Math.PI/180),r=Math.abs(Math.sin(o)),a=Math.abs(Math.cos(o));if(r===0)return{width:n,height:s};if(a===0)return{width:s,height:n};if(!Number.isFinite(s)){const c=a/r,u=n/(a+c*r);return{width:u,height:c*u}}const l=a*a-r*r;if(l===0){const c=Math.min(n,s)/Math.SQRT2;return{width:c,height:c}}return{width:Math.abs((n*a-s*r)/l),height:Math.abs((s*a-n*r)/l)}}function LJ(e,t,i,n=0,s=0){const o=Math.cos(i),r=Math.sin(i),a=e-n,l=t-s;return{x:n+a*o-l*r,y:s+a*r+l*o}}function BI(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function zB(e){return Array.from(new Set(e))}function DG(e,t){return e.reduce((i,n)=>{const s=t(n);return i[s]??(i[s]=[]),i[s].push(n),i},{})}function El(e,t){if(e==null||t==null||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(Array.isArray(e[i])&&Array.isArray(t[i])){if(!El(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1;return!0}function du(e,t,i=0){if(e.length===0)return[];const n=[];for(let s=0;s<t;s++)n.push(e.at((s+i)%e.length));return n}function pwe(e,t){const i=new Map;for(const[n,s]of t.entries())i.set(s,n);return e.sort((n,s)=>{const o=i.get(n)??1/0,r=i.get(s)??1/0;return o-r})}function gwe(e,t){let i=0;for(;i<e.length&&t(e[i]);)i+=1;const n=i;n!==0&&e.splice(0,n)}function fwe(e,t){let i=e.length-1;for(;i>=0&&t(e[i]);)i-=1;const n=e.length-1-i;n!==0&&e.splice(e.length-n,n)}function mwe(e,t,i){const n=[e],s=Math.round((t-e)/(i-1));if(s>0)for(let o=e+s;o<t&&!(n.push(o)>=i-1);o+=s);return n.push(t),n}var GB=class{constructor(){this.queue=[]}await(e=50){return new Promise(t=>{const i=()=>{clearTimeout(s),t(!0)},s=setTimeout(()=>{const o=this.queue.indexOf(i);o<0||(this.queue.splice(o,1),t(!1))},e);this.queue.push(i)})}notify(){for(const e of this.queue.splice(0))e()}};function CK(e=0){return new Promise(t=>{setTimeout(t,e)})}function*qf(...e){for(const t of e)t!=null&&(t[Symbol.iterator]?yield*t:yield t)}function ywe(e){return e!=null&&typeof e=="object"&&Symbol.iterator in e?e:[e]}function Uc(e){for(const t of e)return t;throw new Error("AG Charts - no first() value found")}function*Ji(e){const t=[void 0,void 0];for(const i of Object.keys(e))t[0]=i,t[1]=e[i],yield t}function hp(e){return e==="true"}function vwe(e){return Number(e)}function da(e){return e}var bwe={role:da,"aria-checked":hp,"aria-controls":da,"aria-describedby":da,"aria-disabled":hp,"aria-expanded":hp,"aria-haspopup":da,"aria-hidden":hp,"aria-label":da,"aria-labelledby":da,"aria-live":da,"aria-orientation":da,"aria-selected":hp,"data-focus-override":hp,"data-focus-visible-override":hp,"data-preventdefault":hp,class:da,for:da,id:da,tabindex:vwe,title:da,placeholder:da};function Pt(e,t,i){i==null||i===""||i===""?e?.removeAttribute(t):e?.setAttribute(t,i.toString())}function wu(e,t){if(t!=null)for(const[i,n]of Ji(t))i!=="class"&&Pt(e,i,n)}function yb(e,t,i){if(!(e instanceof HTMLElement))return;const n=e.getAttribute(t);return n===null?i:bwe[t]?.(n)??void 0}function vu(e,t,i){e!=null&&(i==null?e.style.removeProperty(t):e.style.setProperty(t,i.toString()))}function Swe(e,t){for(const[i,n]of Ji(t))vu(e,i,n)}function PJ(e,t,i,n,s){return t<e.x+e.width&&t+n>e.x&&i<e.y+e.height&&i+s>e.y}function MG(e,t,i,n=0,s=0){return t>=e.x&&t+n<=e.x+e.width&&i>=e.y&&i+s<=e.y+e.height}function Cwe(e){return e==null||e.height===0||e.width===0||Number.isNaN(e.height)||Number.isNaN(e.width)}function xwe(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Qf(e,t,i){if(e>t)return;let n;for(;t>=e;){const s=Math.floor((t+e)/2);i(s)?(n=s,e=s+1):t=s-1}return n}function Ww(e,t,i){if(e>t)return;let n;for(;t>=e;){const s=Math.floor((t+e)/2);i(s)?(n=s,t=s-1):e=s+1}return n}function NJ(e,t,i){if(e>t)return;let n;for(;t>=e;){const s=Math.floor((t+e)/2),o=i(s);o==null?t=s-1:(n=o,e=s+1)}return n}function wwe(e=0,t=0){return new OffscreenCanvas(e,t).getContext("2d")}var Dwe=class{constructor(e){this.getter=e}get(){let e=this.result?.deref();return e||(e=this.getter(),this.result=new WeakRef(e),e)}clear(){this.result=void 0}},_i=class{constructor(){this.callbacks=new Set}flush(){for(const e of this.callbacks)e();this.callbacks.clear()}merge(e){for(const t of e.callbacks)this.callbacks.add(t)}register(...e){for(const t of e)t&&this.callbacks.add(t)}};function Mwe(e,t){const i=Math.max(e.length,t.length),n=new Set,s=new Set;for(let o=0;o<i;o++){const r=e[o],a=t[o];r!==a&&(s.has(a)?s.delete(a):a&&n.add(a),n.has(r)?n.delete(r):r&&s.add(r))}return{changed:n.size>0||s.size>0,added:n,removed:s}}function OJ(e){return Array.isArray(e)&&e.length>=2&&e.every(Kt)}function LT(e){return Array.isArray(e)&&e.length>=2&&e.every(OJ)}function Awe(e){const t=e[0],i=e.at(-1);return i===void 0?!1:Jt(t[0],i[0],.001)&&Jt(t[1],i[1],.001)}function xK(e){return Array.isArray(e)&&e.every(LT)&&e.every(Awe)}function FJ(e){if(e===null)return!0;if(!St(e)||e.type==null)return!1;const{type:t,coordinates:i}=e;switch(t){case"GeometryCollection":return Array.isArray(e.geometries)&&e.geometries.every(FJ);case"MultiPolygon":return Array.isArray(i)&&i.every(xK);case"Polygon":return xK(i);case"MultiLineString":return Array.isArray(i)&&i.every(LT);case"LineString":return LT(i);case"MultiPoint":return LT(i);case"Point":return OJ(i);default:return!1}}function kwe(e){return St(e)&&e.type==="Feature"&&FJ(e.geometry)}function Twe(e){return St(e)&&e.type==="FeatureCollection"&&Array.isArray(e.features)&&e.features.every(kwe)}var DS=Yt(Twe,"a GeoJSON object"),Iwe=class{constructor(e,t,i){this._vertexCount=0,this._edgeCount=0,this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[],this.cachedNeighboursEdge=e,this.processedEdge=t,this.singleValueEdges=i}clear(){this._vertexCount=0,this._edgeCount=0,this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[],this.singleValueEdges?.clear()}getVertexCount(){return this._vertexCount}getEdgeCount(){return this._edgeCount}addVertex(e){const t=new Rwe(e);return this._vertexCount++,t}addEdge(e,t,i){i===this.cachedNeighboursEdge?e.updateCachedNeighbours().set(t.value,t):i===this.processedEdge&&(this.pendingProcessingEdgesFrom.push(e),this.pendingProcessingEdgesTo.push(t));const{edges:n}=e,s=n.get(i);s?s.includes(t)||(this.singleValueEdges?.has(i)?n.set(i,[t]):(s.push(t),this._edgeCount++)):(n.set(i,[t]),this._edgeCount++)}removeVertex(e){this._vertexCount--;const t=e.edges;if(t){for(const[,i]of t)this._vertexCount-=i.length;e.clear()}}removeEdge(e,t,i){const n=e.edges.get(i);if(!n)return;const s=n.indexOf(t);s!==-1&&(n.splice(s,1),n.length===0&&e.edges.delete(i),this._edgeCount--,i===this.cachedNeighboursEdge&&e.readCachedNeighbours()?.delete(t.value))}removeEdges(e,t){e.edges.delete(t)}getVertexValue(e){return e.value}*neighbours(e){for(const[,t]of e.edges)for(const i of t)yield i}*neighboursAndEdges(e){for(const[t,i]of e.edges)for(const n of i)yield[n,t]}neighboursWithEdgeValue(e,t){return e.edges.get(t)}findNeighbour(e,t){return e.edges.get(t)?.[0]}findNeighbourValue(e,t){const i=this.findNeighbour(e,t);if(i)return this.getVertexValue(i)}findNeighbourWithValue(e,t,i){const n=i==null?this.neighbours(e):this.neighboursWithEdgeValue(e,i);if(n){for(const s of n)if(this.getVertexValue(s)===t)return s}}findVertexAlongEdge(e,t,i){if(i===this.cachedNeighboursEdge){let s;for(const o of t)if(s=(s??e).readCachedNeighbours()?.get(o),!s)return;return s}if(t.length===0)return;let n=e;for(const s of t){const o=n?this.neighboursWithEdgeValue(n,i):void 0;if(!o)return;n=o.find(r=>r.value===s)}return n}adjacent(e,t){for(const[,i]of e.edges)if(i.includes(t))return!0;return!1}},Rwe=class{constructor(e){this.value=e,this.edges=new Map}readCachedNeighbours(){return this._cachedNeighbours}updateCachedNeighbours(){return this._cachedNeighbours??(this._cachedNeighbours=new Map),this._cachedNeighbours}clear(){this.edges.clear(),this._cachedNeighbours?.clear()}},wK=new Map,Ewe=1;function To(e){const t=e.constructor,i=Object.hasOwn(t,"className")?t.className:t.name;if(!i)throw new Error(`The ${t} is missing the 'className' property.`);const n=(wK.get(i)??0)+1;return wK.set(i,n),`${i}-${n}`}function pm(){return`ag-charts-${Ewe++}`}function PT(){return crypto.randomUUID?.()??Lwe()}function Lwe(){const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let t="";for(let i=0;i<e.length;i++)(i===4||i===6||i===8||i===10)&&(t+="-"),t+=e[i].toString(16).padStart(2,"0");return t}function BJ(e,t,i){let n=e,s=n;for(const o of t)if(n==null||i(n.value,o)>0)n={value:o,next:n},s=n;else{for(s=s;s.next!=null&&i(s.next.value,o)<=0;)s=s.next;s.next={value:o,next:s.next}}return n}var fE="",Kb=/\r?\n/g,_I="";function _J({fontSize:e,fontStyle:t,fontWeight:i,fontFamily:n}){let s="";return t&&t!=="normal"&&(s+=`${t} `),i&&i!=="normal"&&i!==400&&(s+=`${i} `),s+=`${e}px`,s+=` ${n}`,s}function fc(e,t=1.15){return Math.round(e*t)}var Pwe=/[\s.,;:-]{1,5}$/;function DK(e){return e.replace(Pwe,"")+fE}function Nwe(e){return _I+e+_I}function Owe(e){return e.replaceAll(_I,"")}function Z0(e){return e.endsWith(fE)}function zJ(e){return e?.text.endsWith(fE)??!1}var GJ=class{constructor(e,t){this.ctx=e,this.measureTextCached=t,this.baselineMap=new Map,this.charMap=new Map,this.lineHeightCache=null}baselineDistance(e){if(e==="alphabetic")return 0;if(this.baselineMap.has(e))return this.baselineMap.get(e);this.ctx.textBaseline=e;const{alphabeticBaseline:t}=this.ctx.measureText("");return this.baselineMap.set(e,t),this.ctx.textBaseline="alphabetic",t}lineHeight(){return this.lineHeightCache??(this.lineHeightCache=this.measureText("").height),this.lineHeightCache}measureText(e){const t=this.measureTextCached?.(e)??this.ctx.measureText(e),{width:i,fontBoundingBoxAscent:n=t.emHeightAscent,fontBoundingBoxDescent:s=t.emHeightDescent}=t,o=n+s;return{width:i,height:o,ascent:n,descent:s}}measureLines(e){const t=typeof e=="string"?e.split(Kb):e;let i=0,n=0;const s=t.map(o=>{const r=this.measureText(o);return i<r.width&&(i=r.width),n+=r.height,{text:o,...r}});return{width:i,height:n,lineMetrics:s}}textWidth(e,t){if(t){let i=0;for(let n=0;n<e.length;n++)i+=this.textWidth(e.charAt(n));return i}return e.length>1?this.ctx.measureText(e).width:this.charMap.get(e)??this.charWidth(e)}charWidth(e){const{width:t}=this.ctx.measureText(e);return this.charMap.set(e,t),t}},VB=new hG(50);function ei(e){typeof e=="object"&&(e=_J(e));let t=VB.get(e);if(t)return t;const i=new hG(1e4),n=wwe();return n.font=e,t=new GJ(n,s=>{let o=i.get(s);return o||(o=n.measureText(s),i.set(s,o),o)}),VB.set(e,t),t}ei.clear=()=>VB.clear();function Da(e,t){let i={segments:[],width:0,height:0,ascent:0,descent:0};const n=[i];for(const r of e){const{text:a,fontSize:l=t.fontSize,fontStyle:c=t.fontStyle,fontWeight:u=t.fontWeight,fontFamily:d=t.fontFamily,...p}=r,f={fontSize:l,fontStyle:c,fontWeight:u,fontFamily:d},m=ei(f),v=a.split(Kb);for(let b=0;b<v.length;b++){const C=v[b],x=m.measureText(C);b>0&&(i={segments:[],width:0,height:0,ascent:0,descent:0},n.push(i)),C&&(i.width+=x.width,i.ascent=Math.max(i.ascent,x.ascent),i.descent=Math.max(i.descent,x.descent),i.height=Math.max(i.height,i.ascent+i.descent),i.segments.push({...f,...p,text:C,textMetrics:x}))}}let s=0,o=0;for(const r of n)s=Math.max(s,r.width),o+=r.height;return{width:s,height:o,lineMetrics:n}}function MK(e,t){return t.overflow==="hide"&&e.some(Z0)}function mE(e,t){return ft(e)?VJ(e,t):yE(e,t).join(`
`)}function Xp(e,t){return yE(e,t).join(`
`)}function yE(e,t){return NT(e,t)}function vb(e,t,i,n){const s=t.textWidth(fE);let o=0,r=0;for(;r<e.length;r++){const a=t.textWidth(e.charAt(r));if(o+a>i)break;o+=a}if(e.length===r&&(!n||o+s<=i))return n?DK(e):e;for(e=e.slice(0,r).trimEnd();e.length&&t.textWidth(e)+s>i;)e=e.slice(0,-1).trimEnd();return DK(e)}function NT(e,t,i=0){const n=e.split(Kb),s=ei(t.font),o=[];if(t.textWrap==="never"){for(const c of n){const u=vb(c.trimEnd(),s,Math.max(0,t.maxWidth-i));if(!u)break;o.push(u),i=0}return MK(o,t)?[]:o}const r=t.textWrap==="hyphenate",a=t.textWrap==null||t.textWrap==="on-space";for(const c of n){let u=c.trimEnd();if(u===""){o.push(u);continue}let d=0,p=0,f=0;for(o.length||(p=i);d<u.length;){const m=u.charAt(d);if(m===" "&&(f=d),p+=s.textWidth(m),p>t.maxWidth){if(d===0){u="";break}let v=s.textWidth(u.slice(0,d+1));if(o.length||(v+=i),v<=t.maxWidth){p=v,d++;continue}if(f){const x=Fwe(u,f+1),w=s.textWidth(x);if(w<=t.maxWidth){o.push(u.slice(0,f).trimEnd()),u=u.slice(f).trimStart(),d=0,p=0,f=0;continue}else a&&w>t.maxWidth&&o.push(u.slice(0,f).trimEnd(),vb(u.slice(f).trimStart(),s,t.maxWidth,!0))}else if(a){const x=vb(u,s,t.maxWidth,!0);x&&o.push(x)}if(a){u="";break}const b=r?"-":"";let C=u.slice(0,d).trim();for(;C.length&&s.textWidth(C+b)>t.maxWidth;)C=C.slice(0,-1).trimEnd();if(C&&C!==_I)o.push(C+b);else{u="";break}u=u.slice(C.length).trimStart(),d=-1,p=0,f=0}d++}u&&o.push(u)}_we(o,s,t);const l=Bwe(o,s,t);return MK(l,t)?[]:l}function Fwe(e,t){const i=e.indexOf(" ",t);return i===-1?e.slice(t):e.slice(t,i)}function Bwe(e,t,i){if(!Kt(i.maxHeight))return e;const{height:n,lineMetrics:s}=t.measureLines(e);if(n<=i.maxHeight)return e;for(let o=0,r=0;o<s.length;o++)if(r+=s[o].height,r>i.maxHeight){if(i.overflow==="hide"||o===0)return[];const a=e.slice(0,o),l=a.pop();return a.concat(Z0(l)?l:vb(l,t,i.maxWidth,!0))}return e}function _we(e,t,i){if(i.avoidOrphans===!1||e.length<2)return;const{length:n}=e,s=e[n-1],o=e[n-2];if(o.length<s.length)return;const r=o.lastIndexOf(" ");if(r===-1||r===o.indexOf(" ")||s.includes(" "))return;const a=o.slice(r+1);t.textWidth(s+a)<=i.maxWidth&&(e[n-2]=o.slice(0,r),e[n-1]=a+" "+s)}function VJ(e,t){const{maxHeight:i=1/0}=t,n=[];let s=0,o=0;function r(){const a=n.pop();if(!a)return;const l=ei(a),c=vb(a.text,l,t.maxWidth,!0),u=l.measureText(c);n.push({...a,text:c,textMetrics:u})}for(const{width:a,height:l,segments:c}of Da(e,t.font).lineMetrics){if(o+l>i){n.length&&r();break}if(s+a<=t.maxWidth){s+=a,o+=l,n.push(...c);continue}for(const u of c){if(s+u.textMetrics.width<=t.maxWidth){s+=u.textMetrics.width,n.push(u);continue}const d=ei(u),p=Nwe(u.text),f={...t,font:u,maxHeight:i-o};let m=NT(p,{...f,overflow:"hide"},s);if(m.length===0)if(t.textWrap==="never")m=NT(p,f,s);else{m=NT(p,f);const C=n.at(-1);C&&(C.text+=`
`,s=0)}if(m.length===0){r();break}const v=m.findIndex(Z0);v!==-1&&(m=m.slice(0,v+1));const b=m.at(-1);for(const C of m){const x=Owe(C),w=d.measureText(x),M={...u,text:x,textMetrics:w};C===b?s+=w.width:(M.text+=`
`,s=0),o+=w.height,n.push(M)}if(v!==-1)break}}return n}var HJ=Object.defineProperty,zwe=Object.getOwnPropertyDescriptor,Vu=(e,t)=>{for(var i in t)HJ(e,i,{get:t[i],enumerable:!0})},E=(e,t,i,n)=>{for(var s=n>1?void 0:n?zwe(t,i):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(s=(n?r(t,i,s):r(s))||s);return n&&s&&HJ(t,i,s),s},vE=class{constructor(){this.cleanup=new _i}destroy(){this.cleanup.flush()}},Gwe=class{constructor(){this.modules=[],this.dependencies=new Map,this.modulesByOptionKey=new Map}register(...t){for(const i of t){this.registerDependencies(i);const n=this.modules.find(s=>i.type===s.type&&("optionsKey"in i&&"optionsKey"in s?i.optionsKey===s.optionsKey:!0)&&i.identifier===s.identifier);if(n){if(i.packageType==="enterprise"&&n.packageType==="community"){const s=this.modules.indexOf(n);this.modules.splice(s,1,i),"optionsKey"in i&&this.modulesByOptionKey.set(i.optionsKey,i)}}else this.modules.push(i),"optionsKey"in i&&this.modulesByOptionKey.set(i.optionsKey,i)}}hasEnterpriseModules(){return this.modules.some(t=>t.packageType==="enterprise")}*byType(...t){const i=new Set,n=this.modules.filter(r=>t.includes(r.type)),s=r=>{const a=this.dependencies.get(r);return a?.flatMap(s).concat(a)??[]},o=[];for(const r of n){const a="optionsKey"in r?r.optionsKey:r.contextKey;if(!i.has(a)){for(const l of s(a)){if(i.has(l))continue;const c=this.modulesByOptionKey.get(l);if(!c){o.push(l);continue}t.includes(c.type)&&(yield c,i.add(l))}yield r,i.add(a)}}if(o.length>0)throw new Error(`Could not resolve module dependencies: ${o}`)}registerDependencies(t){if(t.dependencies==null||t.dependencies.length===0)return;const i="optionsKey"in t?t.optionsKey:t.contextKey;this.dependencies.set(i,t.dependencies)}},Du=new Gwe,bE=Symbol("interpolate"),zI=e=>e[bE]!=null;function SE(e,t,i,n=1/0){const s={nearest:void 0,distanceSquared:n};for(const o of i){const r=o.distanceSquared(e,t);if(r===0)return{nearest:o,distanceSquared:0};r<s.distanceSquared&&(s.nearest=o,s.distanceSquared=r)}return s}function Vwe(e,t,i,n=1/0){const{x:s=e,y:o=t}=i.transformPoint?.(e,t)??{},r={nearest:void 0,distanceSquared:n};for(const a of i.children){const{nearest:l,distanceSquared:c}=a.nearestSquared(s,o,r.distanceSquared);if(c===0)return{nearest:l,distanceSquared:c};c<r.distanceSquared&&(r.nearest=l,r.distanceSquared=c)}return r}var jw=class $v{constructor(t,i,n,s){this.x=t,this.y=i,this.width=n,this.height=s}static fromObject({x:t,y:i,width:n,height:s}){return new $v(t,i,n,s)}static merge(t){let i=1/0,n=1/0,s=-1/0,o=-1/0;for(const r of t)r.x<i&&(i=r.x),r.y<n&&(n=r.y),Bo(r.x,r.width)>s&&(s=Bo(r.x,r.width)),Bo(r.y,r.height)>o&&(o=Bo(r.y,r.height));return new $v(i,n,s-i,o-n)}static nearestBox(t,i,n){return SE(t,i,n)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:Bo(this.x,this.width),bottom:Bo(this.y,this.height),toJSON(){return{}}}}clone(){const{x:t,y:i,width:n,height:s}=this;return new $v(t,i,n,s)}equals(t){return xwe(this,t)}containsPoint(t,i){return MG(this,t,i)}intersection(t){const i=Math.max(this.x,t.x),n=Math.max(this.y,t.y),s=Math.min(Bo(this.x,this.width),Bo(t.x,t.width)),o=Math.min(Bo(this.y,this.height),Bo(t.y,t.height));if(!(i>s||n>o))return new $v(i,n,s-i,o-n)}collidesBBox(t){return this.x<Bo(t.x,t.width)&&Bo(this.x,this.width)>t.x&&this.y<Bo(t.y,t.height)&&Bo(this.y,this.height)>t.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(t,i){if(this.containsPoint(t,i))return 0;const n=t-Je(this.x,t,Bo(this.x,this.width)),s=i-Je(this.y,i,Bo(this.y,this.height));return n*n+s*s}shrink(t,i){if(typeof t=="number")this.applyMargin(t,i);else for(const n of Object.keys(t)){const s=t[n];typeof s=="number"&&this.applyMargin(s,n)}return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(t,i){if(typeof t=="number")this.applyMargin(-t,i);else for(const n of Object.keys(t)){const s=t[n];typeof s=="number"&&this.applyMargin(-s,n)}return this}applyMargin(t,i){switch(i){case"top":this.y+=t;case"bottom":this.height-=t;break;case"left":this.x+=t;case"right":this.width-=t;break;case"vertical":this.y+=t,this.height-=t*2;break;case"horizontal":this.x+=t,this.width-=t*2;break;case void 0:this.x+=t,this.y+=t,this.width-=t*2,this.height-=t*2;break}}translate(t,i){return this.x+=t,this.y+=i,this}[bE](t,i){return new $v(this.x*(1-i)+t.x*i,this.y*(1-i)+t.y*i,this.width*(1-i)+t.width*i,this.height*(1-i)+t.height*i)}};jw.zero=Object.freeze(new jw(0,0,0,0));jw.NaN=Object.freeze(new jw(Number.NaN,Number.NaN,Number.NaN,Number.NaN));var He=jw;function Bo(e,t){return e===-1/0&&t===1/0?1/0:e+t}var Hwe=2e3,AK=Date.now(),Wwe=()=>{const e=Date.now()-AK;if(e>Hwe){const t=(Math.floor(e/100)/10).toFixed(1);fe.log(`**** ${t}s since last log message ****`)}AK=Date.now()},Ct={create(...e){return Object.assign((...i)=>{Ct.check(...e)&&(typeof i[0]=="function"&&(i=BI(i[0]())),Wwe(),fe.log(...i))},{check:()=>Ct.check(...e),group:(i,n)=>Ct.check(...e)?fe.logGroup(i,n):n()})},check(...e){return e.length===0&&e.push(!0),BI(Qt("agChartsDebug")).some(i=>e.includes(i))},inDevelopmentMode(e){if(Ct.check("dev"))return e()}};function WJ({context:e,pixelRatio:t,width:i,height:n}){e.save();try{e.resetTransform(),e.clearRect(0,0,Math.ceil(i*t),Math.ceil(n*t))}finally{e.restore()}}function jJ(e){if(Ct.check("canvas")){const t=e.save.bind(e),i=e.restore.bind(e);let n=0;Object.assign(e,{save(){t(),n++},restore(){if(n===0)throw new Error("AG Charts - Unable to restore() past depth 0");i(),n--},verifyDepthZero(){if(n!==0)throw new Error(`AG Charts - Save/restore depth is non-zero: ${n}`)}})}}function kK(e,t,i){return[Math.floor(e*i),Math.floor(t*i)]}var AG=class{constructor(e){const{width:t,height:i,pixelRatio:n,willReadFrequently:s=!1}=e;this.width=t,this.height=i,this.pixelRatio=n;const[o,r]=kK(t,i,n);this.canvas=new OffscreenCanvas(o,r),this.context=this.canvas.getContext("2d",{willReadFrequently:s}),this.context.setTransform(n,0,0,n,0,0),jJ(this.context)}drawImage(e,t=0,i=0){return e.drawImage(this.canvas,t,i)}transferToImageBitmap(){return this.canvas.transferToImageBitmap()}resize(e,t,i){if(!(e>0&&t>0))return;const{canvas:n,context:s}=this;if(e!==this.width||t!==this.height||i!==this.pixelRatio){const[o,r]=kK(e,t,i);n.width=o,n.height=r}s.setTransform(i,0,0,i,0,0),this.width=e,this.height=t,this.pixelRatio=i}clear(){WJ(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}},HB=Symbol("BREAK"),hw="__decorator_config",UA="__decorator_accessors";function F(e,t){kG(e,t).optional=!0}function kG(e,t){if(Object.getOwnPropertyDescriptor(e,hw)==null&&Object.defineProperty(e,hw,{value:{}}),Object.getOwnPropertyDescriptor(e,UA)==null){const u=Object.getPrototypeOf(e)?.[UA]?.slice()??[];Object.defineProperty(e,UA,{value:u})}const i=e[hw],n=t.toString();if(i[n]!=null)return i[n];i[n]={setters:[],getters:[],observers:[]};const s=Object.getOwnPropertyDescriptor(e,t);let o=s?.get,r=s?.set;if(o==null||r==null){const c=e[UA];let u=c.indexOf(t);u===-1&&(u=c.push(t)-1),o??(o=function(){let d=this.__accessors;return d==null&&(d=c.slice().fill(void 0),Object.defineProperty(this,"__accessors",{value:d})),d[u]}),r??(r=function(d){let p=this.__accessors;p==null&&(p=c.slice().fill(void 0),Object.defineProperty(this,"__accessors",{value:p})),p[u]=d})}return Object.defineProperty(e,t,{set:function(c){const{setters:u,observers:d}=i[n];let p;u.some(f=>f.length>2)&&(p=o.call(this));for(const f of u)if(c=f(this,t,c,p),c===HB)return;r.call(this,c);for(const f of d)f(this,c,p)},get:function(){let c=o.call(this);for(const u of i[n].getters)if(c=u(this,t,c),c===HB)return;return c},enumerable:!0,configurable:!1}),i[n]}function Rm(e,t,i){return(n,s)=>{const o=kG(n,s);o.setters.push(e),t&&o.getters.unshift(t),i&&Object.assign(o,i)}}function UJ(e){return(t,i)=>{kG(t,i).observers.push(e)}}function CE(e){return e!==void 0&&hw in e}function Zp(e){const t=new Set;for(;CE(e);)t.add(e?.[hw]),e=Object.getPrototypeOf(e);return Array.from(t).flatMap(i=>Object.keys(i))}function $J(e){return Zp(e).reduce((t,i)=>(t[String(i)]=e[i]??null,t),{})}function yr(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every((i,n)=>yr(i,t[n])):bi(e)?bi(t)?TG(e,t,yr):!1:e===t}function TG(e,t,i){if(Object.is(e,t))return!0;for(const n of Object.keys(t))if(!(n in e))return!1;for(const n of Object.keys(e))if(!(n in t)||!i(e[n],t[n]))return!1;return!0}function oi(...e){const t={};for(const i of e){if(!St(i))continue;const n=CE(i)?Zp(i):Object.keys(i);for(const s of n)bi(t[s])&&bi(i[s])?t[s]=oi(t[s],i[s]):t[s]??(t[s]=i[s])}return t}function Uw(...e){const t={};for(const i of e){if(!St(i))continue;const n=CE(i)?Zp(i):Object.keys(i);for(const s of n)bi(t[s])&&bi(i[s])?t[s]=Uw(t[s],i[s]):s in t||(t[s]??(t[s]=i[s]))}return t}function KJ(e,...t){return t&&ft(e)?e.map(i=>oi(i,...t)):e}function YJ(e,t){const i={};for(const[n,s]of Ji(e))i[n]=t(s,n,e);return i}function _e(e,t){const i={...e};for(const n of t)delete i[n];return i}function OT(e,t){if(e==null)return;const i={};for(const n of t)Object.hasOwn(e,n)&&(i[n]=e[n]);return i}function IG(e,t){return(ft(t)?t:t.split(".")).reduce((n,s)=>n[s],e)}var RG=new Set(["__proto__","constructor","prototype"]);function EG(e,t,i){const n=ft(t)?t.slice():t.split("."),s=n.pop();if(n.some(r=>RG.has(r)))return;const o=n.reduce((r,a)=>r[a],e);return o[s]=i,o[s]}function WB(e,t,i){if(i===void 0)return t;for(const n of e){const s=i[n];s!==void 0&&(t[n]=s)}return t}function zd(e){if(e==null||typeof e!="object"||!bi(e))return e;Object.freeze(e);for(const t of Object.getOwnPropertyNames(e)){const i=e[t];i!==null&&(typeof i=="object"||typeof i=="function")&&!Object.isFrozen(i)&&zd(i)}return e}function XJ(e,t){return bi(e)&&t in e}function jwe(e,t){return XJ(e,t)&&typeof e[t]=="string"}var ZJ=(e,t)=>e===t;function Le(e){return function(t,i){const n=`__${i}`;t[i]||Uwe(t,i,n,e)}}function xE(e){return Le(e)}function Pa(e){return Le(e)}function LG(e){const t=e??{};return t.equals=El,Le(e)}function Uwe(e,t,i,n){const{changeCb:s,convertor:o,checkDirtyOnAssignment:r=!1}=n??{},a={changeCb:s,checkDirtyOnAssignment:r,convertor:o},l=Ywe(i,Kwe($we(Xwe(i,a),a),a),a);Object.defineProperty(e,t,{set:l,get:function(){return this[i]},enumerable:!0,configurable:!0})}function $we(e,t){const{convertor:i}=t;return i?function(n){e.call(this,i(n))}:e}var qJ=Symbol("no-change");function Kwe(e,t){const{changeCb:i}=t;return i?function(n){const s=e.call(this,n);return s!==qJ&&i.call(this,this),s}:e}function Ywe(e,t,i){const{checkDirtyOnAssignment:n}=i;return n?function(s){const o=t.call(this,s);return s?._dirty===!0&&this.markDirty(e),o}:t}function Xwe(e,t){const{equals:i=ZJ}=t;return function(n){const s=this[e];return i(n,s)?qJ:(this[e]=n,this.onChangeDetection(e),n)}}var KO=(e,t)=>Math.sign(e-t);function QJ(e,t){if(typeof e=="number"&&typeof t=="number")return KO(e,t);const i=typeof e=="number"?[e]:e,n=typeof t=="number"?[t]:t,s=Math.min(i.length,n.length);for(let o=0;o<s;o+=1){const r=KO(i[o],n[o]);if(r!==0)return r}return KO(i.length,n.length)}var JJ=(e=>(e[e.All=0]="All",e[e.None=1]="None",e))(JJ||{}),Zwe=5,q0=class jB{constructor(t){this.serialNumber=jB._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=To(this),this.name=void 0,this.transitionOut=void 0,this.pointerEvents=0,this._datum=void 0,this._previousDatum=void 0,this.scene=void 0,this._debugDirtyProperties=void 0,this.parentNode=void 0,this.cachedBBox=void 0,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.batchLevel=0,this.batchDirty=!1,this.name=t?.name,this.tag=t?.tag??Number.NaN,this.zIndex=t?.zIndex??0,this.scene=t?.scene,(t?.debugDirty??jB._debugEnabled)&&(this._debugDirtyProperties=new Map([["__first__",[]]]))}static toSVG(t,i,n){const s=t?.toSVG();if(s==null||!s.elements.length&&!s.defs?.length)return;const o=Pn("svg");if(o.setAttribute("width",String(i)),o.setAttribute("height",String(n)),o.setAttribute("viewBox",`0 0 ${i} ${n}`),o.setAttribute("overflow","visible"),s.defs?.length){const r=Pn("defs");r.append(...s.defs),o.append(r)}return o.append(...s.elements),o.outerHTML}static*extractBBoxes(t,i){for(const n of t)if(!i||n.visible&&!n.transitionOut){const s=n.getBBox();s&&(yield s)}}get datum(){return this._datum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum,this._datum=t)}get previousDatum(){return this._previousDatum}get layerManager(){return this.scene?.layersManager}get imageLoader(){return this.scene?.imageLoader}closestDatum(){for(const{datum:t}of this.traverseUp(!0))if(t!=null)return t}preRender(t,i=1){if(this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=i,this.childNodeCounts.thisComplexity=i,this.batchLevel>0||this.batchDirty)throw new Error("AG Charts - illegal rendering state; batched update in progress");return this.childNodeCounts}isolatedRender(t){t.ctx.save();try{this.render(t)}catch(i){const n=i.errorCount??1;if(n>=Zwe)throw i.errorCount=n,i;fe.warnOnce("Error during rendering",i,i.stack)}finally{t.ctx.restore()}}render(t){const{stats:i}=t;if(this.debugDirtyProperties(),t.debugNodeSearch){const n=this.name??this.id;t.debugNodeSearch.some(s=>typeof s=="string"?s===n:s.test(n))&&(t.debugNodes[this.name??this.id]=this)}i&&(i.nodesRendered++,i.opsPerformed+=this.childNodeCounts.thisComplexity)}setScene(t){this.scene=t}*traverseUp(t){t&&(yield this);let i=this.parentNode;for(;i;)yield i,i=i.parentNode}isRoot(){return!this.parentNode}removeChild(t){throw new Error(`AG Charts - internal error, unknown child node ${t.name??t.id} in $${this.name??this.id}`)}remove(){this.parentNode?.removeChild(this)}destroy(){this.parentNode&&this.remove()}batchedUpdate(t){this.batchLevel++,t(),this.batchLevel--,this.batchLevel===0&&this.batchDirty&&(this.markDirty(),this.batchDirty=!1)}setProperties(t){return this.batchLevel++,Object.assign(this,t),this.batchLevel--,this.batchLevel===0&&this.batchDirty&&(this.markDirty(),this.batchDirty=!1),this}containsPoint(t,i){return!1}pickNode(t,i){if(this.containsPoint(t,i))return this}pickNodes(t,i,n=[]){return this.containsPoint(t,i)&&n.push(this),n}getBBox(){return this.cachedBBox??(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}onChangeDetection(t){this.markDirty(t)}markDirtyChildrenOrder(){this.cachedBBox=void 0}markDirty(t){if(this.batchLevel>0){this.batchDirty=!0;return}t!=null&&this._debugDirtyProperties&&this.markDebugProperties(t),this.cachedBBox=void 0,this.parentNode?.markDirty()}markDebugProperties(t){const i=this._debugDirtyProperties?.get(t)??[],n=new Error("Stack trace for property change tracking").stack?.split(`
`).filter(s=>s!=="Error"&&!s.includes(".markDebugProperties")&&!s.includes(".markDirty")&&!s.includes("Object.assign ")&&!s.includes(`${this.constructor.name}.`))??"unknown";i.push(n[0].replace(" at ","").trim()),this._debugDirtyProperties?.set(t,i)}debugDirtyProperties(){if(this._debugDirtyProperties!=null){if(!this._debugDirtyProperties.has("__first__")){for(const[t,i]of this._debugDirtyProperties.entries())if(i.length>1){console.groupCollapsed(`Property changed multiple times before render: ${this.constructor.name}.${t} (${i.length}x)`);for(const n of i)console.log(n);console.groupEnd()}}this._debugDirtyProperties.clear()}}onZIndexChange(){this.parentNode?.markDirtyChildrenOrder()}toSVG(){}};q0._nextSerialNumber=0;q0._debugEnabled=!1;E([Le()],q0.prototype,"visible",2);E([Pa({changeCb:e=>e.onZIndexChange()})],q0.prototype,"zIndex",2);var oh=q0,Ml=Math.PI*2,xx=Math.PI/2;function Is(e){return e%=Ml,e+=Ml,e%=Ml,e}function qwe(e){return e%=Ml,e+=Ml,e!==Ml&&(e%=Ml),e}function GI(e){return e%=Ml,e<-Math.PI?e+=Ml:e>=Math.PI&&(e-=Ml),e}function Jf(e,t,i){const n=Is(e),s=Is(t),o=Is(i);return s<o?s<=n&&n<=o:s>o?s<=n||n<=o:t!==i}function bo(e){return e/180*Math.PI}function Qwe(e){return e/Math.PI*180}function wE(e,t){return e=Is(e),t=Is(t),t-e+(e>t?Ml:0)}function eee(e){const t=Is(e);return t<=xx?t/xx:t<=Math.PI?(Math.PI-t)/xx:t<=1.5*Math.PI?(t-Math.PI)/xx:(Ml-t)/xx}function UB(e,t,i){const n=eee(i);return e*n+t*Math.abs(1-n)}function rh(e){return e?Is(bo(e)):0}var ff=(e,t,i)=>e*(1-i)+t*i,YO=e=>{const t=e<0?-1:1,i=Math.abs(e);return i<=.04045?e/12.92:t*((i+.055)/1.055)**2.4},XO=e=>{const t=e<0?-1:1,i=Math.abs(e);return i>.0031308?t*(1.055*i**(1/2.4)-.055):12.92*e},tee=class ni{constructor(t,i,n,s=1){this.r=Je(0,t||0,1),this.g=Je(0,i||0,1),this.b=Je(0,n||0,1),this.a=Je(0,s||0,1)}static validColorString(t){return t.includes("#")?!!ni.parseHex(t):t.includes("rgb")?!!ni.stringToRgba(t):ni.nameToHex.has(t.toLowerCase())}static fromString(t){if(t.includes("#"))return ni.fromHexString(t);const i=ni.nameToHex.get(t.toLowerCase());if(i)return ni.fromHexString(i);if(t.includes("rgb"))return ni.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static parseHex(t){t=t.replaceAll(" ","").slice(1);let i;switch(t.length){case 6:case 8:i=[];for(let n=0;n<t.length;n+=2)i.push(Number.parseInt(`${t[n]}${t[n+1]}`,16));break;case 3:case 4:i=t.split("").map(n=>Number.parseInt(n,16)).map(n=>n+n*16);break}if(i?.length>=3&&i.every(n=>n>=0))return i.length===3&&i.push(255),i}static fromHexString(t){const i=ni.parseHex(t);if(i){const[n,s,o,r]=i;return new ni(n/255,s/255,o/255,r/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let i=-1,n=-1;for(let a=0;a<t.length;a++){const l=t[a];if(i===-1&&l==="(")i=a;else if(l===")"){n=a;break}}if(i===-1||n===-1)return;const o=t.substring(i+1,n).split(","),r=[];for(let a=0;a<o.length;a++){const l=o[a];let c=Number.parseFloat(l);if(!Number.isFinite(c))return;l.includes("%")?(c=Je(0,c,100),c/=100):a===3?c=Je(0,c,1):(c=Je(0,c,255),c/=255),r.push(c)}return r}static fromRgbaString(t){const i=ni.stringToRgba(t);if(i){if(i.length===3)return new ni(i[0],i[1],i[2]);if(i.length===4)return new ni(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(t.length===4)return new ni(t[0],t[1],t[2],t[3]);if(t.length===3)return new ni(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,i,n,s=1){const o=ni.HSBtoRGB(t,i,n);return new ni(o[0],o[1],o[2],s)}static fromHSL(t,i,n,s=1){const o=ni.HSLtoRGB(t,i,n);return new ni(o[0],o[1],o[2],s)}static fromOKLCH(t,i,n,s=1){const o=ni.OKLCHtoRGB(t,i,n);return new ni(o[0],o[1],o[2],s)}static padHex(t){return t.length===1?"0"+t:t}toHexString(){let t="#"+ni.padHex(Math.round(this.r*255).toString(16))+ni.padHex(Math.round(this.g*255).toString(16))+ni.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(t+=ni.padHex(Math.round(this.a*255).toString(16))),t}toRgbaString(t=3){const i=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],n=Math.pow(10,t);return this.a!==1?(i.push(Math.round(this.a*n)/n),`rgba(${i.join(", ")})`):`rgb(${i.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return ni.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(t,i,n){const s=YO(t),o=YO(i),r=YO(n),a=Math.cbrt(.4122214708*s+.5363325363*o+.0514459929*r),l=Math.cbrt(.2119034982*s+.6806995451*o+.1073969566*r),c=Math.cbrt(.0883024619*s+.2817188376*o+.6299787005*r),u=.2104542553*a+.793617785*l-.0040720468*c,d=1.9779984951*a-2.428592205*l+.4505937099*c,p=.0259040371*a+.7827717662*l-.808675766*c,f=Math.atan2(p,d)*180/Math.PI,m=u,v=Math.hypot(d,p),b=f>=0?f:f+360;return[m,v,b]}static OKLCHtoRGB(t,i,n){const s=t,o=i*Math.cos(n*Math.PI/180),r=i*Math.sin(n*Math.PI/180),a=(s+.3963377774*o+.2158037573*r)**3,l=(s-.1055613458*o-.0638541728*r)**3,c=(s-.0894841775*o-1.291485548*r)**3,u=4.0767416621*a-3.3077115913*l+.2309699292*c,d=-1.2684380046*a+2.6097574011*l-.3413193965*c,p=-.0041960863*a-.7034186147*l+1.707614701*c,f=XO(u),m=XO(d),v=XO(p);return[f,m,v]}static RGBtoHSL(t,i,n){const s=Math.min(t,i,n),o=Math.max(t,i,n),r=(o+s)/2;let a,l;if(o===s)a=0,l=0;else{const c=o-s;l=r>.5?c/(2-o-s):c/(o+s),o===t?a=(i-n)/c+(i<n?6:0):o===i?a=(n-t)/c+2:a=(t-i)/c+4,a*=360/6}return[a,l,r]}static HSLtoRGB(t,i,n){if(t=(t%360+360)%360,i===0)return[n,n,n];const s=n<.5?n*(1+i):n+i-n*i,o=2*n-s;function r(u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?o+(s-o)*6*u:u<1/2?s:u<2/3?o+(s-o)*(2/3-u)*6:o}const a=r(t/360+1/3),l=r(t/360),c=r(t/360-1/3);return[a,l,c]}static RGBtoHSB(t,i,n){const s=Math.min(t,i,n),o=Math.max(t,i,n),r=o===0?0:(o-s)/o;let a=0;if(s!==o){const l=o-s,c=(o-t)/l,u=(o-i)/l,d=(o-n)/l;t===o?a=d-u:i===o?a=2+c-d:a=4+u-c,a/=6,a<0&&(a=a+1)}return[a*360,r,o]}static HSBtoRGB(t,i,n){t=(t%360+360)%360/360;let s=0,o=0,r=0;if(i===0)s=o=r=n;else{const a=(t-Math.floor(t))*6,l=a-Math.floor(a),c=n*(1-i),u=n*(1-i*l),d=n*(1-i*(1-l));switch(Math.trunc(a)){case 0:s=n,o=d,r=c;break;case 1:s=u,o=n,r=c;break;case 2:s=c,o=n,r=d;break;case 3:s=c,o=u,r=n;break;case 4:s=d,o=c,r=n;break;case 5:s=n,o=c,r=u;break}}return[s,o,r]}static mix(t,i,n){return new ni(ff(t.r,i.r,n),ff(t.g,i.g,n),ff(t.b,i.b,n),ff(t.a,i.a,n))}static lighten(t,i){const n=ni.RGBtoOKLCH(t.r,t.g,t.b);return ni.fromOKLCH(Je(0,n[0]+i,1),n[1],n[2])}static darken(t,i){const n=ni.RGBtoOKLCH(t.r,t.g,t.b);return ni.fromOKLCH(Je(0,n[0]-i,1),n[1],n[2])}static interpolate(t,i){const n=1/(t.length-1),s=t.map(o=>ni.RGBtoOKLCH(o.r,o.g,o.b));return Array.from({length:i},(o,r)=>{const a=r/(i-1),l=t.length<=2?0:Math.min(Math.floor(a*(t.length-1)),t.length-2),c=(a-l*n)/n,u=s[l],d=s[l+1];return ni.fromOKLCH(ff(u[0],d[0],c),ff(u[1],d[1],c),ff(u[2],d[2],c))})}};tee.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]);var Di=tee,iee=(e=>(e[e.Leading=0]="Leading",e[e.Trailing=1]="Trailing",e[e.Interpolate=2]="Interpolate",e))(iee||{}),DE=class{ticks(e,t,i){}niceDomain(e,t=this.domain){return t}get bandwidth(){}get step(){}get inset(){}},Q0=(e,t)=>{const i=Symbol(String(t));e[i]=void 0,Object.defineProperty(e,t,{get(){return this[i]},set(n){this[i]!==n&&(this[i]=n,this.invalid=!0)},enumerable:!0,configurable:!1})},TK=e=>{const t=Di.fromString(e),[i,n,s]=Di.RGBtoOKLCH(t.r,t.g,t.b);return{l:i,c:n,h:s,a:t.a}},ZO=1e-6,IK=e=>e.c<ZO||e.l<ZO||e.l>1-ZO,Jwe=(e,t,i)=>{i=Je(0,i,1);let n;if(IK(e))n=t.h;else if(IK(t))n=e.h;else{const a=e.h;let l=t.h;const c=t.h-e.h;c>180?l-=360:c<-180&&(l+=360),n=a*(1-i)+l*i}const s=e.c*(1-i)+t.c*i,o=e.l*(1-i)+t.l*i,r=e.a*(1-i)+t.a*i;return Di.fromOKLCH(o,s,n,r)},MS=class extends DE{constructor(){super(...arguments),this.type="color",this.defaultTickCount=0,this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(TK)}update(){const{domain:t,range:i}=this;t.length<2&&(fe.warnOnce("`colorDomain` should have at least 2 values."),t.length===0?t.push(0,1):t.length===1&&t.push(t[0]+1));for(let n=1;n<t.length;n++){const s=t[n-1],o=t[n];if(s>o){fe.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((r,a)=>r-a);break}}if(i.length<t.length)for(let n=i.length;n<t.length;n++)i.push(i.length>0?i[0]:"black");this.parsedRange=this.range.map(TK)}normalizeDomains(...t){return{domain:t.flat(),animatable:!0}}toDomain(){}convert(t){this.refresh();const{domain:i,range:n,parsedRange:s}=this,o=i[0],r=i.at(-1),a=n[0],l=n.at(-1);if(t<=o)return a;if(t>=r)return l;let c,u;if(i.length===2){const f=(t-o)/(r-o),m=1/(n.length-1);c=n.length<=2?0:Math.min(Math.floor(f*(n.length-1)),n.length-2),u=(f-c*m)/m}else{for(c=0;c<i.length-2&&!(t<i[c+1]);c++);const f=i[c],m=i[c+1];u=(t-f)/(m-f)}const d=s[c],p=s[c+1];return Jwe(d,p,u).toRgbaString()}invert(){}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&fe.warnOnce("Expected update to not invalidate scale"))}};E([Q0],MS.prototype,"domain",2);E([Q0],MS.prototype,"range",2);var ME=class{constructor(e,t=[],i){this.colorSpace=e,this.stops=t,this.bbox=i,this._cache=void 0}createGradient(e,t,i){const n=this.bbox??t;if(!n.isFinite())return;if(this._cache!=null&&this._cache.ctx===e&&this._cache.bbox.equals(n))return this._cache.gradient;const{stops:s,colorSpace:o}=this;if(s.length===0)return;if(s.length===1)return s[0].color;let r=this.createCanvasGradient(e,n,i);if(r==null)return;const a=o==="oklch",l=.05;let c=s[0];r.addColorStop(c.stop,c.color);for(let u=1;u<s.length;u+=1){const d=s[u];if(a){const p=new MS;p.domain=[c.stop,d.stop],p.range=[c.color,d.color];for(let f=c.stop+l;f<d.stop;f+=l)r.addColorStop(f,p.convert(f)??"transparent")}r.addColorStop(d.stop,d.color),c=d}return"createPattern"in r&&(r=r.createPattern()),this._cache={ctx:e,bbox:n,gradient:r},r}toSvg(e){const t=this.bbox??e,i=this.createSvgGradient(t);for(const{stop:n,color:s}of this.stops){const o=Pn("stop");o.setAttribute("offset",`${n}`),o.setAttribute("stop-color",`${s}`),i.appendChild(o)}return i}},nee=class extends ME{constructor(e,t,i=0,n){super(e,t,n),this.angle=i}createCanvasGradient(e,t,i){const{angle:s}=this,o=rh(s+-90),r=i?.centerX??t.x+t.width*.5,a=i?.centerY??t.y+t.height*.5;return e.createConicGradient(o,r,a)}createSvgGradient(e){return Pn("linearGradient")}},see=class extends ME{constructor(e,t,i=0,n){super(e,t,n),this.angle=i}getGradientPoints(e){const{angle:i}=this,n=rh(i+90),s=Math.cos(n),o=Math.sin(n),r=e.width,a=e.height,l=e.x+r*.5,c=e.y+a*.5,u=Math.hypot(a,r)/2,d=Math.atan2(a,r);let p;n<Math.PI/2?p=n:n<Math.PI?p=Math.PI-n:n<1.5*Math.PI?p=n-Math.PI:p=2*Math.PI-n;const f=u*Math.abs(Math.cos(p-d));return{x0:l+s*f,y0:c+o*f,x1:l-s*f,y1:c-o*f}}createCanvasGradient(e,t){const{x0:i,y0:n,x1:s,y1:o}=this.getGradientPoints(t);if(!(Number.isNaN(i)||Number.isNaN(n)||Number.isNaN(s)||Number.isNaN(o)))return e.createLinearGradient(i,n,s,o)}createSvgGradient(e){const{x0:t,y0:i,x1:n,y1:s}=this.getGradientPoints(e),o=Pn("linearGradient");return o.setAttribute("x1",String(t)),o.setAttribute("y1",String(i)),o.setAttribute("x2",String(n)),o.setAttribute("y2",String(s)),o.setAttribute("gradientUnits","userSpaceOnUse"),o}},e0e=class extends ME{constructor(e,t,i){super(e,t,i)}createCanvasGradient(e,t,i){const n=i?.centerX??t.x+t.width*.5,s=i?.centerY??t.y+t.height*.5,o=i?.innerRadius??0,r=i?.outerRadius??Math.hypot(t.width*.5,t.height*.5)/Math.SQRT2;return e.createRadialGradient(n,s,o,n,s,r)}createSvgGradient(e){const t=e.x+e.width*.5,i=e.y+e.height*.5,n=Pn("radialGradient");return n.setAttribute("cx",String(t)),n.setAttribute("cy",String(i)),n.setAttribute("r",String(Math.hypot(e.width*.5,e.height*.5)/Math.SQRT2)),n.setAttribute("gradientUnits","userSpaceOnUse"),n}},pt=class{handleUnknownProperties(t,i){}set(t){const{className:i=this.constructor.name}=this.constructor;if(t==null)return this.clear(),this;if(typeof t!="object")return fe.warn(`unable to set ${i} - expecting a properties object`),this;const n=new Set(Object.keys(t));for(const s of Zp(this))if(n.has(s)){const o=t[s],r=this;if(gm(r[s]))if(r[s]instanceof AS){const a=r[s].reset(o);a==null?fe.warn(`unable to set [${String(s)}] - expecting a properties array`):r[s]=a}else r[s].set(o);else bi(o)?r[s]=Uw(o,r[s]??{}):r[s]=o;n.delete(s)}this.handleUnknownProperties(n,t);for(const s of n)fe.warn(`unable to set [${String(s)}] in ${i} - property is unknown`);return this}clear(){for(const t of Zp(this)){const i=this[t];gm(i)?i.clear():this[t]=void 0}return this}toJson(){return Zp(this).reduce((t,i)=>{const n=this[i];return t[String(i)]=gm(n)?n.toJson():n,t},{})}},AS=class oee extends Array{constructor(t,...i){super(i.length);const s=(o=>!!o?.prototype?.constructor?.name)(t)?o=>new t().set(o):t;Object.defineProperty(this,"itemFactory",{value:s,enumerable:!1,configurable:!1}),this.set(i)}set(t){if(ft(t)){this.length=t.length;for(let i=0;i<t.length;i++)this[i]=this.itemFactory(t[i])}return this}reset(t){if(Array.isArray(t))return new oee(this.itemFactory,...t)}toJson(){return this.map(t=>t?.toJson?.()??t)}};function gm(e){return e instanceof pt||e instanceof AS}var PG=class extends pt{constructor(){super(...arguments),this.color="black"}};E([F],PG.prototype,"stop",2);E([F],PG.prototype,"color",2);function t0e(e){let t;for(const i of e)if(i?.stop!=null){if(t!=null&&i.stop<t)return!1;t=i.stop}return!0}function ree(e){return e.flatMap((t,i)=>{const{stop:n}=t,s=e.at(i+1)?.color;return s==null?[t]:[t,{stop:n,color:s}]})}function i0e(e,t){const i=t==="discrete"?1:0,n=e.map((s,o,{length:r})=>({stop:(o+i)/(r-1+i),color:s}));return t==="discrete"?ree(n):n}function aee(e,t,i,n="continuous"){const s=e.map(m=>typeof m=="string"?{color:m}:m);if(s.length===0)return i0e(t,n);if(!t0e(s))return fe.warnOnce("[fills] must have the stops defined in ascending order"),[];const o=Math.min(...i),r=Math.max(...i),a=n==="discrete",l=new Float64Array(s.length);let c=0,u=-1;for(let m=0;m<s.length;m+=1){const v=s[m];if(m>=u){u=s.length-1;for(let C=m+1;C<s.length;C+=1)if(s[C]?.stop!=null){u=C;break}}let b=v?.stop;if(b==null){const C=s[c]?.stop,x=s[u]?.stop,w=C??o,M=x??r,T=a&&C==null?1:0;b=w+(M-w)*(m-c+T)/(u-c+T)}else c=m;l[m]=Math.max(0,Math.min(1,(b-o)/(r-o)))}let d=s.find(m=>m.color!=null)?.color,p;const f=s.map((m,v)=>{let b=m?.color;const C=l[v];return b!=null?d=b:d==null?(p==null&&(p=new MS,p.domain=[0,1],p.range=t),b=p.convert(C)):b=d,{stop:C,color:b}});return n==="discrete"?ree(f):f}var n0e=class{constructor(e,t){this.imageLoader=e,this._cache=void 0,this.url=t.url,this.backgroundFill=t.backgroundFill??"black",this.backgroundFillOpacity=t.backgroundFillOpacity??1,this.repeat=t.repeat??"no-repeat",this.width=t.width,this.height=t.height,this.fit=t.fit??"stretch",this.rotation=t.rotation??0}createCanvasImage(e,t,i,n){if(!t)return null;const[s,o]=this.getSize(t.width,t.height,i,n);return s<1||o<1?(fe.warnOnce("Image fill is too small to render, ignoring."),null):e.createPattern(t,this.repeat)}getSize(e,t,i,n){const{fit:s}=this;let o=e,r=t,a=1;const l=i/n,c=e/t;return s==="stretch"||e===0||t===0?(o=i,r=n):s==="contain"?a=c>l?i/e:n/t:s==="cover"&&(a=c>l?n/t:i/e),[Math.max(1,o*a),Math.max(1,r*a)]}setImageTransform(e,t){if(typeof e=="string")return;const{url:i,rotation:n,width:s,height:o}=this,r=this.imageLoader?.loadImage(i);if(!r)return;const a=rh(n),l=Math.cos(a),c=Math.sin(a),[u,d]=this.getSize(r.width,r.height,s??t.width,o??t.height),p=u/r.width,f=d/r.height,m=t.x+t.width/2,v=t.y+t.height/2,b=l*u-c*d,C=c*u+l*d,x=b/2,w=C/2;e?.setTransform(new DOMMatrix([l*p,c*f,-c*p,l*f,m-x,v-w]))}createPattern(e,t,i,n){const s=this.width??t,o=this.height??i,r=this._cache;if(r!=null&&r.ctx===e&&r.width===s&&r.height===o)return r.pattern;const a=this.imageLoader?.loadImage(this.url,n),l=this.createCanvasImage(e,a,s,o);if(l!=null)return this._cache={ctx:e,pattern:l,width:s,height:o},l}toSvg(e,t){const{url:i,rotation:n,backgroundFill:s,backgroundFillOpacity:o}=this,{x:r,y:a,width:l,height:c}=e,u=Pn("pattern");u.setAttribute("viewBox",`0 0 ${l} ${c}`),u.setAttribute("x",String(r)),u.setAttribute("y",String(a)),u.setAttribute("width",String(l)),u.setAttribute("height",String(c)),u.setAttribute("patternUnits","userSpaceOnUse");const d=Pn("rect");d.setAttribute("x","0"),d.setAttribute("y","0"),d.setAttribute("width",String(l)),d.setAttribute("height",String(c)),d.setAttribute("fill",s),d.setAttribute("fill-opacity",String(o)),u.appendChild(d);const p=Pn("image");return p.setAttribute("href",i),p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("width",String(l)),p.setAttribute("height",String(c)),p.setAttribute("preserveAspectRatio","none"),p.setAttribute("transform",`scale(${1/t}) rotate(${n}, ${l/2}, ${c/2})`),u.appendChild(p),u}};function RK(e,t,i,n){const s=e-i,o=t-n;return s*s+o*o}function VI(e,t,i,n,s,o,r){if(i===s&&n===o)return Math.min(r,RK(e,t,i,n));const a=s-i,l=o-n,c=Math.max(0,Math.min(1,((e-i)*a+(t-n)*l)/(a*a+l*l))),u=i+c*a,d=n+c*l;return Math.min(r,RK(e,t,u,d))}var s0e=/^[\t\n\f\r ]*([achlmqstvz])[\t\n\f\r ]*/i,Fi=/^[+-]?((\d*\.\d+)|(\d+\.)|(\d+))(e[+-]?\d+)?/i,o0e=/[\t\n\f\r ]*,?[\t\n\f\r ]*/,EK=/^[01]/,r0e={z:[],h:[Fi],v:[Fi],m:[Fi,Fi],l:[Fi,Fi],t:[Fi,Fi],s:[Fi,Fi,Fi,Fi],q:[Fi,Fi,Fi,Fi],c:[Fi,Fi,Fi,Fi,Fi,Fi],a:[Fi,Fi,Fi,EK,EK,Fi,Fi]};function a0e(e){if(!e)return;const t=[];let i=0,n;for(;i<e.length;){const s=s0e.exec(e.slice(i));let o;if(s==null){if(!n){fe.warnOnce(`Invalid SVG path, error at index ${i}: Missing command.`);return}o=n}else o=s[1],i+=s[0].length;const r=l0e(o,e,i);if(!r)return;i=r[0],n=o,t.push(r[1])}return t}function l0e(e,t,i){const n=r0e[e.toLocaleLowerCase()],s={command:e,params:[]};for(const o of n){const r=t.slice(i),a=o.exec(r);if(a!=null){s.params.push(Number.parseFloat(a[0])),i+=a[0].length;const l=o0e.exec(r.slice(a[0].length));l!=null&&(i+=l[0].length)}else{if(s.params.length===1)return[i,s];fe.warnOnce(`Invalid SVG path, error at index ${i}: No path segment parameters for command [${e}]`);return}}return[i,s]}function c0e(e,t){const i=-t/e;return e!==0&&i>=0&&i<=1?[i]:[]}function u0e(e,t,i,n=1e-6){if(Math.abs(e)<n)return c0e(t,i);const s=t*t-4*e*i,o=[];if(Math.abs(s)<n){const r=-t/(2*e);r>=0&&r<=1&&o.push(r)}else if(s>0){const r=Math.sqrt(s),a=(-t-r)/(2*e),l=(-t+r)/(2*e);a>=0&&a<=1&&o.push(a),l>=0&&l<=1&&o.push(l)}return o}function d0e(e,t,i,n,s=1e-6){if(Math.abs(e)<s)return u0e(t,i,n,s);const o=t/e,r=i/e,a=n/e,l=(3*r-o*o)/9,c=(9*o*r-27*a-2*o*o*o)/54,u=l*l*l+c*c,d=1/3,p=[];if(u>=0){const f=Math.sqrt(u),m=Math.sign(c+f)*Math.pow(Math.abs(c+f),d),v=Math.sign(c-f)*Math.pow(Math.abs(c-f),d),b=Math.abs(Math.sqrt(3)*(m-v)/2),C=-d*o+(m+v);if(C>=0&&C<=1&&p.push(C),Math.abs(b)<s){const x=-d*o-(m+v)/2;x>=0&&x<=1&&p.push(x)}}else{const f=Math.acos(c/Math.sqrt(-l*l*l)),m=d*o,v=2*Math.sqrt(-l),b=v*Math.cos(d*f)-m,C=v*Math.cos(d*(f+2*Math.PI))-m,x=v*Math.cos(d*(f+4*Math.PI))-m;b>=0&&b<=1&&p.push(b),C>=0&&C<=1&&p.push(C),x>=0&&x<=1&&p.push(x)}return p}function pw(e,t,i,n,s,o,r,a){const l=(i-e)*(a-o)-(n-t)*(r-s);if(l===0)return 0;const c=((r-s)*(t-o)-(e-s)*(a-o))/l,u=((i-e)*(t-o)-(n-t)*(e-s))/l;return c>=0&&c<=1&&u>=0&&u<=1?1:0}function h0e(e,t,i,n,s,o,r,a,l,c,u,d){let p=0;const f=c-d,m=u-l,v=l*(d-c)-c*(u-l),b=LK(e,i,s,r),C=LK(t,n,o,a),x=f*b[0]+m*C[0],w=f*b[1]+m*C[1],M=f*b[2]+m*C[2],T=f*b[3]+m*C[3]+v,L=d0e(x,w,M,T);for(const I of L){const R=I*I,O=I*R,_=b[0]*O+b[1]*R+b[2]*I+b[3],B=C[0]*O+C[1]*R+C[2]*I+C[3];let V;l===u?V=(B-c)/(d-c):V=(_-l)/(u-l),V>=0&&V<=1&&p++}return p}function LK(e,t,i,n){return[-e+3*t-3*i+n,3*e-6*t+3*i,-3*e+3*t,e]}function Yb(e,t,i,n,s){return(1-s)**3*e+3*(1-s)**2*s*t+3*(1-s)*s**2*i+s**3*n}function HI(e,t,i,n,s){if(s<=Math.min(e,n))return e<n?0:1;if(s>=Math.max(e,n))return e<n?1:0;let o=0,r=1,a=Number.NaN;for(let l=0;l<12;l+=1)a=(o+r)/2,Yb(e,t,i,n,a)<s?o=a:r=a;return a}function $w(e,t,i,n,s,o,r,a,l){const c=(1-l)*e+l*i,u=(1-l)*t+l*n,d=(1-l)*i+l*s,p=(1-l)*n+l*o,f=(1-l)*s+l*r,m=(1-l)*o+l*a,v=(1-l)*c+l*d,b=(1-l)*u+l*p,C=(1-l)*d+l*f,x=(1-l)*p+l*m,w=(1-l)*v+l*C,M=(1-l)*b+l*x;return[[{x:e,y:t},{x:c,y:u},{x:v,y:b},{x:w,y:M}],[{x:w,y:M},{x:C,y:x},{x:f,y:m},{x:r,y:a}]]}function PK(e,t,i,n){const s=-e+3*t-3*i+n,o=2*(e-2*t+i),r=-e+t;if(s===0){if(o!==0){const l=-r/o;if(l>0&&l<1)return[l]}return[]}const a=o*o-4*s*r;if(a>=0){const l=Math.sqrt(a),c=(-o+l)/(2*s),u=(-o-l)/(2*s);return[c,u].filter(d=>d>0&&d<1)}return[]}function lee(e,t,i,n,s,o,r,a){const l=PK(e,i,s,r),c=PK(t,n,o,a);return[...l,...c]}function qO(e,t,i){const n=Yb(e[0].x,e[1].x,e[2].x,e[3].x,.5),s=Yb(e[0].y,e[1].y,e[2].y,e[3].y,.5),o=Math.hypot(n-t,s-i),r=Math.min(Math.hypot(e[0].x-t,e[0].y-i),Math.hypot(e[1].x-t,e[1].y-i),Math.hypot(e[2].x-t,e[2].y-i),Math.hypot(e[3].x-t,e[3].y-i));return{points:e,distance:o,minDistance:r}}function cee(e,t,i,n,s,o,r,a,l,c,u=1){let p={value:qO([{x:e,y:t},{x:i,y:n},{x:s,y:o},{x:r,y:a}],l,c),next:null},f;for(;p!=null;){const{points:m,distance:v,minDistance:b}=p.value;if(p=p.next,(f==null||v<f.distance)&&(f={distance:v,minDistance:b}),f!=null&&f.distance-b<=u)continue;const[C,x]=$w(m[0].x,m[0].y,m[1].x,m[1].y,m[2].x,m[2].y,m[3].x,m[3].y,.5),w=[qO(C,l,c),qO(x,l,c)].sort(NK);p=BJ(p,w,NK)}return f?.distance??1/0}var NK=(e,t)=>t.minDistance-e.minDistance,Xb=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.cx=Number.NaN,this.cy=Number.NaN,this.sx=Number.NaN,this.sy=Number.NaN,this.openedPath=!1,this.closedPath=!1}isEmpty(){return this.commands.length===0}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(t,i){this.openedPath=!0,this.sx=t,this.sy=i,this.cx=t,this.cy=i,this.path2d.moveTo(t,i),this.commands.push(0),this.params.push(t,i)}lineTo(t,i){this.openedPath?(this.cx=t,this.cy=i,this.path2d.lineTo(t,i),this.commands.push(1),this.params.push(t,i)):this.moveTo(t,i)}cubicCurveTo(t,i,n,s,o,r){this.openedPath||this.moveTo(t,i),this.path2d.bezierCurveTo(t,i,n,s,o,r),this.commands.push(2),this.params.push(t,i,n,s,o,r)}closePath(){this.openedPath&&(this.cx=this.sx,this.cy=this.sy,this.sx=Number.NaN,this.sy=Number.NaN,this.path2d.closePath(),this.commands.push(3),this.openedPath=!1,this.closedPath=!0)}rect(t,i,n,s){this.moveTo(t,i),this.lineTo(t+n,i),this.lineTo(t+n,i+s),this.lineTo(t,i+s),this.closePath()}roundRect(t,i,n,s,o){o=Math.min(o,n/2,s/2),this.moveTo(t,i+o),this.arc(t+o,i+o,o,Math.PI,1.5*Math.PI),this.lineTo(t+o,i),this.lineTo(t+n-o,i),this.arc(t+n-o,i+o,o,1.5*Math.PI,2*Math.PI),this.lineTo(t+n,i+o),this.lineTo(t+n,i+s-o),this.arc(t+n-o,i+s-o,o,0,Math.PI/2),this.lineTo(t+n-o,i+s),this.lineTo(t+o,i+s),this.arc(t+ +o,i+s-o,o,Math.PI/2,Math.PI),this.lineTo(t,i+s-o),this.closePath()}ellipse(t,i,n,s,o,r,a,l=!1){const c=n,u=s/n,d=Math.cos(o),p=Math.sin(o),f=-u*p,m=u*d,v=c*Math.cos(r),b=c*Math.sin(r),C=t+d*v+f*b,x=i+p*v+m*b,w=(C-this.cx)**2+(x-this.cy)**2;this.openedPath?w>1e-6&&this.lineTo(C,x):this.moveTo(C,x);let M=l?-Is(r-a):Is(a-r);Math.abs(Math.abs(a-r)-2*Math.PI)<1e-6&&M<2*Math.PI&&(M+=2*Math.PI*(l?-1:1));const T=Math.max(Math.ceil(Math.abs(M)/(Math.PI/2)),1),L=M/T,I=4/3*Math.tan(L/4);for(let R=0;R<T;R+=1){const O=r+L*(R+0),_=r+L*(R+1),B=c*Math.sin(O),V=c*Math.cos(O),j=c*Math.sin(_),K=c*Math.cos(_),Y=V-I*B,G=B+I*V,$=K+I*j,W=j-I*K,Q=K,q=j;this.cubicCurveTo(t+d*Y+f*G,i+p*Y+m*G,t+d*$+f*W,i+p*$+m*W,t+d*Q+f*q,i+p*Q+m*q)}}arc(t,i,n,s,o,r){this.ellipse(t,i,n,n,0,s,o,r)}appendSvg(t){const i=a0e(t);if(i==null)return!1;let n=0,s=0,o,r,a=0,l=0;for(const{command:c,params:u}of i){o??(o=u[0]),r??(r=u[1]);const d=c===c.toLowerCase(),p=d?o:0,f=d?r:0;switch(c.toLowerCase()){case"m":this.moveTo(p+u[0],f+u[1]),o=p+u[0],r=f+u[1],n=o,s=r;break;case"c":this.cubicCurveTo(p+u[0],f+u[1],p+u[2],f+u[3],p+u[4],f+u[5]),a=p+u[2],l=f+u[3],o=p+u[4],r=f+u[5];break;case"s":this.cubicCurveTo(o+o-a,r+r-l,p+u[0],f+u[1],p+u[2],f+u[3]),a=p+u[0],l=f+u[1],o=p+u[2],r=f+u[3];break;case"q":this.cubicCurveTo((p+2*u[0])/3,(f+2*u[1])/3,(2*u[0]+u[2])/3,(2*u[1]+u[3])/3,u[2],u[3]),a=u[0],l=u[1],o=u[2],r=u[3];break;case"t":this.cubicCurveTo((o+2*(o+o-a))/3,(r+2*(r+r-l))/3,(2*(o+o-a)+u[0])/3,(2*(r+r-l)+u[1])/3,u[0],u[1]),a=o+o-a,l=r+r-l,o=u[0],r=u[1];break;case"a":this.svgEllipse(o,r,u[0],u[1],u[2]*Math.PI/180,u[3],u[4],p+u[5],f+u[6]),o=p+u[5],r=f+u[6];break;case"h":this.lineTo(p+u[0],r),o=p+u[0];break;case"l":this.lineTo(p+u[0],f+u[1]),o=p+u[0],r=f+u[1];break;case"v":this.lineTo(o,f+u[0]),r=f+u[0];break;case"z":this.closePath(),o=n,r=s;break;default:throw new Error(`Could not translate command '${c}' with '${u.join(" ")}'`)}}return!0}svgEllipse(t,i,n,s,o,r,a,l,c){n=Math.abs(n),s=Math.abs(s);const u=(t-l)/2,d=(i-c)/2,p=Math.sin(o),f=Math.cos(o),m=f*u+p*d,v=-p*u+f*d,b=m/n,C=v/s;let x=b*b+C*C,w=(t+l)/2,M=(i+c)/2,T=0,L=0;x>=1?(x=Math.sqrt(x),n*=x,s*=x):(x=Math.sqrt(1/x-1),r===a&&(x=-x),T=x*n*C,L=-x*s*b,w+=f*T-p*L,M+=p*T+f*L);const I=Math.atan2((v-L)/s,(m-T)/n),R=Math.atan2((-v-L)/s,(-m-T)/n)-I,O=I+R,_=!!(1-a);this.ellipse(w,M,n,s,o,I,O,_)}clear(t){t&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(t,i){const n=this.commands,s=this.params,o=n.length,r=-1e4,a=-1e4;let l=Number.NaN,c=Number.NaN,u=0,d=0,p=0;for(let f=0,m=0;f<o;f++)switch(n[f]){case 0:p+=pw(l,c,u,d,r,a,t,i),u=s[m++],l=u,d=s[m++],c=d;break;case 1:p+=pw(u,d,s[m++],s[m++],r,a,t,i),u=s[m-2],d=s[m-1];break;case 2:p+=h0e(u,d,s[m++],s[m++],s[m++],s[m++],s[m++],s[m++],r,a,t,i),u=s[m-2],d=s[m-1];break;case 3:p+=pw(l,c,u,d,r,a,t,i);break}return p%2===1}distanceSquared(t,i){let n=1/0;const s=this.commands,o=this.params,r=s.length;let a=Number.NaN,l=Number.NaN,c=0,u=0;for(let d=0,p=0;d<r;d++)switch(s[d]){case 0:c=a=o[p++],u=l=o[p++];break;case 1:{const f=c,m=u;c=o[p++],u=o[p++],n=VI(t,i,f,m,c,u,n);break}case 2:{const f=c,m=u,v=o[p++],b=o[p++],C=o[p++],x=o[p++];c=o[p++],u=o[p++],n=cee(f,m,v,b,C,x,c,u,t,i)**2;break}case 3:n=VI(t,i,c,u,a,l,n);break}return n}toSVG(t=(i,n)=>({x:i,y:n})){const i=[],{commands:n,params:s}=this,o=(a,l)=>{i.push(a);for(let c=0;c<l;c+=2){const{x:u,y:d}=t(s[r++],s[r++]);i.push(u,d)}};let r=0;for(const a of n)switch(a){case 0:o("M",2);break;case 1:o("L",2);break;case 2:o("C",6);break;case 3:o("Z",0);break}return i.join(" ")}computeBBox(){const{commands:t,params:i}=this;let[n,s,o,r]=[1/0,1/0,-1/0,-1/0],[a,l]=[Number.NaN,Number.NaN],[c,u]=[Number.NaN,Number.NaN];const d=(f,m)=>{n=Math.min(m,n),s=Math.min(f,s),o=Math.max(f,o),r=Math.max(m,r),a=f,l=m};let p=0;for(const f of t)switch(f){case 0:d(i[p++],i[p++]),c=a,u=l;break;case 1:d(i[p++],i[p++]);break;case 2:{const m=a,v=l,b=i[p++],C=i[p++],x=i[p++],w=i[p++],M=i[p++],T=i[p++],L=lee(m,v,b,C,x,w,M,T);for(const I of L){const R=Yb(m,b,x,M,I),O=Yb(v,C,w,T,I);d(R,O)}d(M,T);break}case 3:d(c,u),c=Number.NaN,u=Number.NaN;break}return new He(s,n,o-s,r-n)}};function Ts(e,t,i){const n=Math.round(t*e)/e;return i==null?n:i===0?0:i<1?Math.ceil(i*e)/e:Math.round((i+t)*e)/e-n}function OK(e,t){return Math.floor(t*e)/e}function QO(e,t,i){const{width:n,height:s,padding:o,strokeWidth:r}=t,a=n/2,l=s/2,c=Math.max(1,n-o-r/2),u=Math.max(1,s-o-r/2);let d=!1;for(const[p,f]of i){const m=a+(p-.5)*c,v=l+(f-.5)*u;d?e.lineTo(m,v):e.moveTo(m,v),d=!0}e.closePath()}var FK={circles(e,{width:t,strokeWidth:i,padding:n}){const s=t/2,o=Math.max(1,s-n-i/2);e.arc(s,s,o,0,Math.PI*2)},squares(e,{width:t,height:i,pixelRatio:n,padding:s,strokeWidth:o}){const r=s+o/2;e.moveTo(Ts(n,r),Ts(n,r)),e.lineTo(Ts(n,t-r),Ts(n,r)),e.lineTo(Ts(n,t-r),Ts(n,i-r)),e.lineTo(Ts(n,r),Ts(n,i-r)),e.closePath()},triangles(e,t){QO(e,t,[[.5,0],[1,1],[0,1]])},diamonds(e,t){QO(e,t,[[.5,0],[1,.5],[.5,1],[0,.5]])},stars(e,{width:t,height:i,padding:n}){const o=Math.max(1,(t-n)/2),r=o/2,a=Math.PI/2;for(let l=0;l<10;l++){const c=l%2===0?o:r,u=l*Math.PI/5-a,d=t/2+Math.cos(u)*c,p=i/2+Math.sin(u)*c;e.lineTo(d,p)}e.closePath()},hearts(e,{width:t,height:i,padding:n}){const s=Math.max(1,t/4-n/2),o=t/2,r=i/2+s/2;e.arc(o-s,r-s,s,bo(130),bo(330)),e.arc(o+s,r-s,s,bo(220),bo(50)),e.lineTo(o,r+s),e.closePath()},crosses(e,t){QO(e,t,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},"vertical-lines"(e,{width:t,height:i,pixelRatio:n,strokeWidth:s}){const o=Ts(n,t/2)-s%2/2;e.moveTo(o,0),e.lineTo(o,i)},"horizontal-lines"(e,{width:t,height:i,pixelRatio:n,strokeWidth:s}){const o=Ts(n,i/2)-s%2/2;e.moveTo(0,o),e.lineTo(t,o)},"forward-slanted-lines"(e,{width:t,height:i,strokeWidth:n}){const s=Math.atan2(i,t),o=n*Math.cos(s),r=n*Math.sin(s);e.moveTo(-o,r),e.lineTo(o,-r),e.moveTo(-o,i+r),e.lineTo(t+o,-r),e.moveTo(t-o,i+r),e.lineTo(t+o,i-r)},"backward-slanted-lines"(e,{width:t,height:i,strokeWidth:n}){const s=Math.atan2(i,t),o=n*Math.cos(s),r=n*Math.sin(s);e.moveTo(t-o,-r),e.lineTo(t+o,r),e.moveTo(-o,-r),e.lineTo(t+o,i+r),e.moveTo(-o,i-r),e.lineTo(o,i+r)}},p0e=class{constructor(e){this._cache=void 0,this.width=Math.max(e?.width??10,1),this.height=Math.max(e?.height??10,1),this.fill=e.fill??"none",this.fillOpacity=e.fillOpacity??1,this.backgroundFill=e.backgroundFill??"none",this.backgroundFillOpacity=e.backgroundFillOpacity??1,this.stroke=e.stroke??"black",this.strokeOpacity=e.strokeOpacity??1,this.strokeWidth=e.strokeWidth??1,this.padding=e.padding??1,this.pattern=e.pattern??"forward-slanted-lines",this.rotation=e.rotation??0,this.scale=e.scale??1,this.path=e.path}getPath(e){const{pattern:t,width:i,height:n,padding:s,strokeWidth:o,path:r}=this,a=new Xb;let l=FK[t]!=null;return r&&l&&(l=!a.appendSvg(r)),l&&FK[t](a,{width:i,height:n,pixelRatio:e,strokeWidth:o,padding:s}),a}renderStroke(e,t){const{stroke:i,strokeWidth:n,strokeOpacity:s}=this;n&&(t.strokeStyle=i,t.lineWidth=n,t.globalAlpha=s,t.stroke(e))}renderFill(e,t){const{fill:i,fillOpacity:n}=this;i!=="none"&&(t.fillStyle=i,t.globalAlpha=n,t.fill(e))}createCanvasPattern(e,t){const{width:i,height:n,scale:s,backgroundFill:o,backgroundFillOpacity:r}=this;if(i*s<1||n*s<1)return fe.warnOnce("Pattern fill is too small to render, ignoring."),null;const a=new AG({width:i,height:n,pixelRatio:t*s}),l=a.context;o!=="none"&&(l.fillStyle=o,l.globalAlpha=r,l.fillRect(0,0,i,n));const c=this.getPath(t).getPath2D();this.renderFill(c,l),this.renderStroke(c,l);const u=e.createPattern(a.canvas,"repeat");return this.setPatternTransform(u,t),a.destroy(),u}setPatternTransform(e,t,i=0,n=0){if(e==null)return;const s=rh(this.rotation),o=1/t,r=Math.cos(s)*o,a=Math.sin(s)*o;e.setTransform(new DOMMatrix([r,a,-a,r,i,n]))}createPattern(e,t){if(this._cache!=null&&this._cache.ctx===e&&this._cache.pixelRatio===t)return this._cache.pattern;const i=this.createCanvasPattern(e,t);if(i!=null)return this._cache={ctx:e,pattern:i,pixelRatio:t},i}toSvg(){const{width:e,height:t,fill:i,fillOpacity:n,backgroundFill:s,backgroundFillOpacity:o,stroke:r,strokeWidth:a,strokeOpacity:l,rotation:c,scale:u}=this,d=Pn("pattern");d.setAttribute("viewBox",`0 0 ${e} ${t}`),d.setAttribute("width",String(e)),d.setAttribute("height",String(t)),d.setAttribute("patternUnits","userSpaceOnUse");const p=Pn("rect");p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("width",String(e)),p.setAttribute("height",String(t)),p.setAttribute("fill",s),p.setAttribute("fill-opacity",String(o)),d.appendChild(p);const f=Pn("path");return f.setAttribute("fill",i),f.setAttribute("fill-opacity",String(n)),f.setAttribute("stroke-opacity",String(l)),f.setAttribute("stroke",r),f.setAttribute("stroke-width",String(a)),f.setAttribute("transform",`rotate(${c}) scale(${u})`),f.setAttribute("d",this.getPath(1).toSVG()),d.appendChild(f),d}};function Ol(e){return St(e)&&e.type=="gradient"}function g0e(e){return ft(e)&&e.every(t=>typeof t=="string")}function ah(e){return e!==null&&St(e)&&e.type=="pattern"}function Em(e){return e!==null&&St(e)&&e.type=="image"}function f0e(e){return Ol(e)||ah(e)}function BK(e,t){const{fontStyle:i,fontWeight:n,fontSize:s,fontFamily:o}=t;i&&e.setAttribute("font-style",i),n&&e.setAttribute("font-weight",String(n)),s!=null&&e.setAttribute("font-size",String(s)),o&&e.setAttribute("font-family",o)}function m0e(e,t){const{stroke:i,strokeWidth:n,strokeOpacity:s}=t;i&&e.setAttribute("stroke",i),n!=null&&e.setAttribute("stroke-width",String(n)),s!=null&&e.setAttribute("stroke-opacity",String(s))}function y0e(e,t){const{lineDash:i,lineDashOffset:n}=t;if(i?.some(s=>s!==0)){const s=i.length%2===1?[...i,...i]:i;e.setAttribute("stroke-dasharray",s.join(" ")),n!=null&&e.setAttribute("stroke-dashoffset",String(n))}}var Bn=class extends oh{constructor(){super(...arguments),this.drawingMode="overlay",this.fillOpacity=1,this.strokeOpacity=1,this.fill="black",this.strokeWidth=0,this.lineDashOffset=0,this.opacity=1}getGradient(e){if(Ol(e))return this.createGradient(e)}createGradient(e){const{colorSpace:t="rgb",gradient:i="linear",colorStops:n,rotation:s=0,reverse:o=!1}=e;if(n==null)return;let r=aee(n,["black"],[0,1]);switch(o&&(r=r.map(a=>({color:a.color,stop:1-a.stop})).reverse()),i){case"linear":return new see(t,r,s);case"radial":return new e0e(t,r);case"conic":return new nee(t,r,s)}}getPattern(e){if(ah(e))return this.createPattern(e)}createPattern(e){return new p0e(e)}getImage(e){if(Em(e))return this.createImage(e)}createImage(e){return new n0e(this.imageLoader,e)}onFillChange(){typeof this.fill=="object"&&yr(this._cachedFill??{},this.fill)||(this.fillGradient=this.getGradient(this.fill),this.fillPattern=this.getPattern(this.fill),this.fillImage=this.getImage(this.fill),this._cachedFill=this.fill)}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(e,t){return Ts(this.layerManager?.canvas?.pixelRatio??1,e,t)}markDirty(e){super.markDirty(e),this.cachedDefaultGradientFillBBox=void 0}fillStroke(e,t){this.drawingMode==="cutout"&&(e.globalCompositeOperation="destination-out",this.executeFill(e,t),this.executeStroke(e,t),e.globalCompositeOperation="source-over"),this.renderFill(e,t),this.renderStroke(e,t)}renderFill(e,t){const{fill:i,fillOpacity:n,fillImage:s}=this;if(i!=null&&i!=="none"&&n>0){const{globalAlpha:o}=e;s&&(e.globalAlpha=s.backgroundFillOpacity,e.fillStyle=s.backgroundFill,this.executeFill(e,t),e.globalAlpha=o),this.applyFillAndAlpha(e),this.applyShadow(e),this.executeFill(e,t),e.globalAlpha=o,e.shadowColor="rgba(0, 0, 0, 0)"}}executeFill(e,t){t?e.fill(t):e.fill()}applyFillAndAlpha(e){const{fill:t,fillGradient:i,fillPattern:n,fillImage:s,fillOpacity:o=1,opacity:r=1}=this;if(e.globalAlpha*=r*o,i){const{fillBBox:a=this.getDefaultGradientFillBBox()??this.getBBox(),fillParams:l}=this;e.fillStyle=i.createGradient(e,a,l)??"black"}else if(n){const{x:a,y:l}=this.getBBox(),c=this.layerManager?.canvas?.pixelRatio??1,u=n.createPattern(e,c);n.setPatternTransform(u,c,a,l),u?e.fillStyle=u:(e.fillStyle=n.fill,e.globalAlpha*=n.fillOpacity)}else if(s){const a=this.getBBox(),l=s.createPattern(e,a.width,a.height,this);s.setImageTransform(l,a),e.fillStyle=l??"transparent"}else e.fillStyle=typeof t=="string"?t:"black"}applyStrokeAndAlpha(e){const{stroke:t,strokeOpacity:i=1,strokeGradient:n,opacity:s=1}=this;e.strokeStyle=n?.createGradient(e,this.getBBox())??(typeof t=="string"?t:void 0)??"black",e.globalAlpha*=s*i}applyShadow(e){const t=this.layerManager?.canvas.pixelRatio??1,i=this.fillShadow;i?.enabled&&(e.shadowColor=i.color,e.shadowOffsetX=i.xOffset*t,e.shadowOffsetY=i.yOffset*t,e.shadowBlur=i.blur*t)}renderStroke(e,t){const{stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,lineCap:a,lineJoin:l,miterLimit:c}=this;if(i!=null&&i!=="none"&&n>0&&s>0){const{globalAlpha:u}=e;this.applyStrokeAndAlpha(e),e.lineWidth=n,o&&e.setLineDash(o),r&&(e.lineDashOffset=r),a&&(e.lineCap=a),l&&(e.lineJoin=l),c!=null&&(e.miterLimit=c),this.executeStroke(e,t),e.globalAlpha=u}}executeStroke(e,t){t?e.stroke(t):e.stroke()}getDefaultGradientFillBBox(){return this.cachedDefaultGradientFillBBox??(this.cachedDefaultGradientFillBBox=Object.freeze(this.computeDefaultGradientFillBBox())),this.cachedDefaultGradientFillBBox}computeDefaultGradientFillBBox(){}containsPoint(e,t){return this.isPointInPath(e,t)}applySvgFillAttributes(e,t){const{fill:i,fillOpacity:n}=this;if(typeof i=="string")e.setAttribute("fill",i);else if(Ol(i)&&this.fillGradient){t??(t=[]);const s=this.fillGradient.toSvg(this.fillBBox??this.getBBox()),o=PT();s.setAttribute("id",o),t.push(s),e.setAttribute("fill",`url(#${o})`)}else if(ah(i)&&this.fillPattern){t??(t=[]);const s=this.fillPattern.toSvg(),o=PT();s.setAttribute("id",o),t.push(s),e.setAttribute("fill",`url(#${o})`)}else if(Em(i)&&this.fillImage){t??(t=[]);const s=this.layerManager?.canvas?.pixelRatio??1,o=this.fillImage.toSvg(this.getBBox(),s),r=PT();o.setAttribute("id",r),t.push(o),e.setAttribute("fill",`url(#${r})`)}else e.setAttribute("fill","none");return e.setAttribute("fill-opacity",String(n)),t}applySvgStrokeAttributes(e){const{stroke:t,strokeOpacity:i,strokeWidth:n,lineDash:s,lineDashOffset:o}=this;m0e(e,{stroke:Nn(t)?t:void 0,strokeOpacity:i,strokeWidth:n}),y0e(e,{lineDash:s,lineDashOffset:o})}};E([Le()],Bn.prototype,"drawingMode",2);E([Le()],Bn.prototype,"fillOpacity",2);E([Le()],Bn.prototype,"strokeOpacity",2);E([Pa({changeCb:e=>e.onFillChange()})],Bn.prototype,"fill",2);E([Pa({changeCb:e=>e.onStrokeChange()})],Bn.prototype,"stroke",2);E([Le()],Bn.prototype,"strokeWidth",2);E([LG()],Bn.prototype,"lineDash",2);E([Le()],Bn.prototype,"lineDashOffset",2);E([Le()],Bn.prototype,"lineCap",2);E([Le()],Bn.prototype,"lineJoin",2);E([Le()],Bn.prototype,"miterLimit",2);E([Le({convertor:e=>Je(0,e??1,1)})],Bn.prototype,"opacity",2);E([Pa({checkDirtyOnAssignment:!0})],Bn.prototype,"fillShadow",2);E([Pa({changeCb:e=>e.onFillChange()})],Bn.prototype,"fillBBox",2);E([Pa({changeCb:e=>e.onFillChange()})],Bn.prototype,"fillParams",2);var uee=[1,0,0,1,0,0],Lm=class FT{get e(){return[...this.elements]}constructor(t=uee){this.elements=[...t]}setElements(t){const i=this.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this}get identity(){const t=this.elements;return Jt(t[0],1)&&Jt(t[1],0)&&Jt(t[2],0)&&Jt(t[3],1)&&Jt(t[4],0)&&Jt(t[5],0)}AxB(t,i,n){const s=t[0]*i[0]+t[2]*i[1],o=t[1]*i[0]+t[3]*i[1],r=t[0]*i[2]+t[2]*i[3],a=t[1]*i[2]+t[3]*i[3],l=t[0]*i[4]+t[2]*i[5]+t[4],c=t[1]*i[4]+t[3]*i[5]+t[5];n=n??t,n[0]=s,n[1]=o,n[2]=r,n[3]=a,n[4]=l,n[5]=c}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const i=[Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN];return t instanceof FT?this.AxB(this.elements,t.elements,i):this.AxB(this.elements,[t.a,t.b,t.c,t.d,t.e,t.f],i),new FT(i)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let i=t[0],n=t[1],s=t[2],o=t[3];const r=t[4],a=t[5],l=1/(i*o-n*s);return i*=l,n*=l,s*=l,o*=l,new FT([o,-n,-s,i,s*a-o*r,n*r-i*a])}invertSelf(){const t=this.elements;let i=t[0],n=t[1],s=t[2],o=t[3];const r=t[4],a=t[5],l=1/(i*o-n*s);return i*=l,n*=l,s*=l,o*=l,t[0]=o,t[1]=-n,t[2]=-s,t[3]=i,t[4]=s*a-o*r,t[5]=n*r-i*a,this}transformPoint(t,i){const n=this.elements;return{x:t*n[0]+i*n[2]+n[4],y:t*n[1]+i*n[3]+n[5]}}transformBBox(t,i){const n=this.elements,s=n[0],o=n[1],r=n[2],a=n[3],l=t.width*.5,c=t.height*.5,u=t.x+l,d=t.y+c,p=Math.abs(l*s)+Math.abs(c*r),f=Math.abs(l*o)+Math.abs(c*a);return i??(i=new He(0,0,0,0)),i.x=u*s+d*r+n[4]-p,i.y=u*o+d*a+n[5]-f,i.width=p+p,i.height=f+f,i}toContext(t){if(this.identity)return;const i=this.elements;t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}static updateTransformMatrix(t,i,n,s,o,r,a){const l=i,c=n;let u,d;l===1&&c===1?(u=0,d=0):(u=a?.scalingCenterX??0,d=a?.scalingCenterY??0);const p=s,f=Math.cos(p),m=Math.sin(p);let v,b;p===0?(v=0,b=0):(v=a?.rotationCenterX??0,b=a?.rotationCenterY??0);const C=o,x=r,w=u*(1-l)-v,M=d*(1-c)-b;return t.setElements([f*l,m*l,-m*c,f*c,f*w-m*M+v+C,m*w+f*M+b+x]),t}};function pp(e){return hee(e.constructor)}var dee=Symbol("isMatrixTransform");function hee(e){return e[dee]===!0}function NG(e){var t,i;const n=e;if(hee(e))return e;const s=Symbol("matrix_combined_transform");class o extends n{constructor(){super(...arguments),this[i]=new Lm,this._dirtyTransform=!0}onChangeDetection(a){super.onChangeDetection(a),this._dirtyTransform=!0,!(this.batchLevel>0)&&this.markDirty("transform")}updateMatrix(a){}computeTransformMatrix(){this._dirtyTransform&&(this[s].setElements(uee),this.updateMatrix(this[s]),this._dirtyTransform=!1)}toParent(a){return this.computeTransformMatrix(),this[s].identity?a.clone():this[s].transformBBox(a)}toParentPoint(a,l){return this.computeTransformMatrix(),this[s].identity?{x:a,y:l}:this[s].transformPoint(a,l)}fromParent(a){return this.computeTransformMatrix(),this[s].identity?a.clone():this[s].inverse().transformBBox(a)}fromParentPoint(a,l){return this.computeTransformMatrix(),this[s].identity?{x:a,y:l}:this[s].inverse().transformPoint(a,l)}computeBBox(){const a=super.computeBBox();return a&&this.toParent(a)}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(a,l){return{x:a,y:l}=this.fromParentPoint(a,l),super.pickNode(a,l)}pickNodes(a,l,c){return{x:a,y:l}=this.fromParentPoint(a,l),super.pickNodes(a,l,c)}render(a){this.computeTransformMatrix();const{ctx:l}=a,c=this[s];let u=!1;try{c.identity||(l.save(),u=!0,c.toContext(l)),super.render(a)}finally{u&&l.restore()}}toSVG(){this.computeTransformMatrix();const a=super.toSVG(),l=this[s];if(l.identity||a==null)return a;const c=Pn("g");c.append(...a.elements);const[u,d,p,f,m,v]=l.e;return c.setAttribute("transform",`matrix(${u} ${d} ${p} ${f} ${m} ${v})`),{elements:[c],defs:a.defs}}}return t=dee,i=s,o[t]=!0,o}function kS(e){var t;const i=e,n=Symbol("matrix_rotation");class s extends NG(i){constructor(){super(...arguments),this[t]=new Lm,this.rotationCenterX=0,this.rotationCenterY=0,this.rotation=0}updateMatrix(r){super.updateMatrix(r);const{rotation:a,rotationCenterX:l,rotationCenterY:c}=this;a!==0&&(Lm.updateTransformMatrix(this[n],1,1,a,0,0,{rotationCenterX:l,rotationCenterY:c}),r.multiplySelf(this[n]))}}return t=n,E([Le()],s.prototype,"rotationCenterX",2),E([Le()],s.prototype,"rotationCenterY",2),E([Le()],s.prototype,"rotation",2),s}function v0e(e){return"scalingX"in e&&"scalingY"in e&&"scalingCenterX"in e&&"scalingCenterY"in e}function AE(e){var t;const i=e,n=Symbol("matrix_scale");class s extends NG(i){constructor(){super(...arguments),this[t]=new Lm,this.scalingX=1,this.scalingY=1,this.scalingCenterX=0,this.scalingCenterY=0}updateMatrix(r){super.updateMatrix(r);const{scalingX:a,scalingY:l,scalingCenterX:c,scalingCenterY:u}=this;a===1&&l===1||(Lm.updateTransformMatrix(this[n],a,l,0,0,0,{scalingCenterX:c,scalingCenterY:u}),r.multiplySelf(this[n]))}}return t=n,E([Le()],s.prototype,"scalingX",2),E([Le()],s.prototype,"scalingY",2),E([Le()],s.prototype,"scalingCenterX",2),E([Le()],s.prototype,"scalingCenterY",2),s}function TS(e){var t;const i=e,n=Symbol("matrix_translation");class s extends NG(i){constructor(){super(...arguments),this[t]=new Lm,this.translationX=0,this.translationY=0}updateMatrix(r){super.updateMatrix(r);const{translationX:a,translationY:l}=this;a===0&&l===0||(Lm.updateTransformMatrix(this[n],1,1,0,a,l),r.multiplySelf(this[n]))}}return t=n,E([Le()],s.prototype,"translationX",2),E([Le()],s.prototype,"translationY",2),s}var vn=class{static fromCanvas(t,i){const n=[];for(const s of t.traverseUp())pp(s)&&n.unshift(s);for(const s of n)i=s.fromParent(i);return pp(t)&&(i=t.fromParent(i)),i}static toCanvas(t,i){i==null?i=t.getBBox():pp(t)&&(i=t.toParent(i));for(const n of t.traverseUp())pp(n)&&(i=n.toParent(i));return i}static fromCanvasPoint(t,i,n){const s=[];for(const o of t.traverseUp())pp(o)&&s.unshift(o);for(const o of s)({x:i,y:n}=o.fromParentPoint(i,n));return pp(t)&&({x:i,y:n}=t.fromParentPoint(i,n)),{x:i,y:n}}static toCanvasPoint(t,i,n){pp(t)&&({x:i,y:n}=t.toParentPoint(i,n));for(const s of t.traverseUp())pp(s)&&({x:i,y:n}=s.toParentPoint(i,n));return{x:i,y:n}}},wx,OG=class Yx extends oh{constructor(t){super(t),this.childNodes=new Set,this.dirty=!1,this.dirtyZIndex=!1,this.clipRect=void 0,this.opacity=1,this.layer=void 0,this.image=void 0,this._lastWidth=Number.NaN,this._lastHeight=Number.NaN,this._lastDevicePixelRatio=Number.NaN,this.isContainerNode=!0,this.renderToOffscreenCanvas=t?.renderToOffscreenCanvas===!0,this.optimizeForInfrequentRedraws=t?.optimizeForInfrequentRedraws===!0}static is(t){return t instanceof Yx}static computeChildrenBBox(t,i=!0){return He.merge(oh.extractBBoxes(t,i))}static compareChildren(t,i){return QJ(t.zIndex,i.zIndex)||t.serialNumber-i.serialNumber}containsPoint(t,i){return!0}computeBBox(){return Yx.computeChildrenBBox(this.children())}computeSafeClippingBBox(t){const i=this.computeBBox();if(i?.isFinite()!==!0)return;let n=0;const s=4;for(const p of this.descendants())p instanceof Bn&&(n=Math.max(n,p.strokeWidth));const o=Math.max(1,n/2*s),{x:r,y:a}=vn.toCanvasPoint(this,0,0),l=OK(t,r+i.x-o)-r,c=OK(t,a+i.y-o)-a,u=Math.ceil(i.x+i.width-l+o),d=Math.ceil(i.y+i.height-c+o);return new He(l,c,u,d)}prepareSharedCanvas(t,i,n){return wx==null||wx.pixelRatio!==n?wx=new AG({width:t,height:i,pixelRatio:n}):wx.resize(t,i,n),wx}setScene(t){super.setScene(t),this.layer&&(this.scene?.layersManager.removeLayer(this.layer),this.layer=void 0);for(const i of this.children())i.setScene(t)}markDirty(t){this.dirty=!0,super.markDirty(t)}markDirtyChildrenOrder(){super.markDirtyChildrenOrder(),this.dirtyZIndex=!0,this.markDirty()}append(t){for(const i of ywe(t))i.remove(),this.childNodes.add(i),i.parentNode=this,i.setScene(this.scene);this.markDirtyChildrenOrder(),this.markDirty()}appendChild(t){return this.append(t),t}removeChild(t){if(!this.childNodes?.delete(t))throw new Error(`AG Charts - internal error, unknown child node ${t.name??t.id} in $${this.name??this.id}`);t.parentNode=void 0,t.setScene(),this.markDirtyChildrenOrder(),this.markDirty()}clear(){for(const t of this.children())delete t.parentNode,t.setScene();this.childNodes?.clear(),this.markDirty()}pickNode(t,i){if(!(!this.visible||this.pointerEvents===1||!this.containsPoint(t,i))){if(this.childNodes!=null&&this.childNodes.size!==0){const n=[...this.children()];for(let s=n.length-1;s>=0;s--){const r=n[s].pickNode(t,i);if(r!=null)return r}}else if(!this.isContainerNode)return this}}pickNodes(t,i,n=[]){if(!this.visible||this.pointerEvents===1||!this.containsPoint(t,i))return n;this.isContainerNode||n.push(this);for(const s of this.children())s.pickNodes(t,i,n);return n}isDirty(t){const{width:i,height:n,devicePixelRatio:s}=t,{dirty:o,layer:r}=this,a=r!=null&&(this._lastWidth!==i||this._lastHeight!==n),l=this._lastDevicePixelRatio!==s;return this._lastWidth=i,this._lastHeight=n,this._lastDevicePixelRatio=s,o||a||l}preRender(t){let i;if(this.dirty){i=super.preRender(t,0);for(const n of this.children()){const s=n.preRender(t);i.groups+=s.groups,i.nonGroups+=s.nonGroups,i.complexity+=s.complexity}i.groups+=1,i.nonGroups-=1}else i=this.childNodeCounts;return this.renderToOffscreenCanvas&&!this.optimizeForInfrequentRedraws&&i.nonGroups>0&&this.getVisibility()?this.layer??(this.layer=this.layerManager?.addLayer({name:this.name})):this.layer!=null&&(this.layerManager?.removeLayer(this.layer),this.layer=void 0),i}render(t){const{layer:i,renderToOffscreenCanvas:n}=this,s={...t},o=this.isDirty(t);if(this.dirty=!1,!n){this.renderInContext(s),super.render(s);return}const{ctx:r,stats:a,devicePixelRatio:l}=t;let{image:c}=this;if(o){c?.bitmap.close(),c=void 0;const d=i?void 0:this.computeSafeClippingBBox(l),p=(f,...m)=>{const v=f.context;s.ctx=v,f.clear(),v.save();try{v.setTransform(...m),v.globalAlpha=1,this.renderInContext(s)}finally{v.restore(),v.verifyDepthZero?.()}};if(i)p(i,r.getTransform());else if(d){const{x:f,y:m,width:v,height:b}=d,C=this.prepareSharedCanvas(v,b,l);p(C,l,0,0,l,-f*l,-m*l),c={bitmap:C.transferToImageBitmap(),x:f,y:m,width:v,height:b}}this.image=c,a&&a.layersRendered++}else a&&a.layersSkipped++;const{globalAlpha:u}=r;if(r.globalAlpha=u*this.opacity,i){r.save();try{r.resetTransform(),i.drawImage(r)}finally{r.restore()}}else if(c){const{bitmap:d,x:p,y:f,width:m,height:v}=c;r.drawImage(d,0,0,m*l,v*l,p,f,m,v)}r.globalAlpha=u,super.render(s)}applyClip(t,i){const{x:n,y:s,width:o,height:r}=i;t.beginPath(),t.rect(n,s,o,r),t.clip()}renderInContext(t){const{ctx:i,stats:n}=t;this.dirtyZIndex&&(this.sortChildren(Yx.compareChildren),this.dirtyZIndex=!1),i.save();try{i.globalAlpha*=this.opacity,this.clipRect!=null&&(this.applyClip(i,this.clipRect),t.clipBBox=vn.toCanvas(this,this.clipRect));for(const s of this.children()){if(!s.visible){n&&(n.nodesSkipped+=s.childNodeCounts.nonGroups+s.childNodeCounts.groups,n.opsSkipped+=s.childNodeCounts.complexity);continue}s.isolatedRender(t)}}finally{i.restore()}}sortChildren(t){if(!this.childNodes)return;const i=[...this.childNodes].sort(t);this.childNodes.clear();for(const n of i)this.childNodes.add(n)}*children(){yield*this.childNodes}*excludeChildren(t){for(const i of this.children())(t.instance&&!(i instanceof t.instance)||t.name&&i.name!==t.name)&&(yield i)}*descendants(){for(const t of this.children())yield t,t instanceof Yx&&(yield*t.descendants())}setClipRect(t){this.clipRect=t?vn.fromCanvas(this,t):void 0}setClipRectCanvasSpace(t){this.clipRect=t}getVisibility(){for(const t of this.traverseUp(!0))if(!t.visible)return!1;return!0}toSVG(){if(!this.visible)return;const t=[],i=[];for(const n of this.children()){const s=n.toSVG();s!=null&&(i.push(...s.elements),s.defs!=null&&t.push(...s.defs))}return{elements:i,defs:t}}};OG.className="Group";E([Le({convertor:e=>Je(0,e,1)})],OG.prototype,"opacity",2);var Mt=OG,b0e=class extends AE(Mt){},S0e=class extends kS(Mt){},So=class extends TS(Mt){},Kv=class extends kS(TS(Mt)){};function C0e(e,t){return"context"in e}function _K(e,t){return e!=null&&C0e(e)&&t!=null&&typeof t=="object"&&t.context===void 0?(t.context=e.context,!0):!1}function mc(e,t,i){if(Array.isArray(e)){for(const n of e)if(_K(n,i))break}else _K(e,i);return t(i)}var pee=class{constructor(){this.cache=new WeakMap}call(e,t,i){let n,s=this.cache.get(t);try{n=JSON.stringify(i)}catch{return this.invoke(e,t,s,void 0,i)}return s==null&&(s=new Map,this.cache.set(t,s)),s.has(n)?s.get(n):this.invoke(e,t,s,n,i)}invoke(e,t,i,n,s){try{const o=mc(e,t,s);return i&&n!=null&&i.set(n,o),o}catch(o){fe.warnOnce("User callback errored, ignoring",o);return}}invalidateCache(){this.cache=new WeakMap}};function WI(e,t){if(!e)return;const{x:i,y:n,width:s,height:o}=w0e(t);$A(e.style,"width",s),$A(e.style,"height",o),$A(e.style,"left",i),$A(e.style,"top",n)}function gee(e){const t=Number.parseFloat(e.style.width)||e.offsetWidth,i=Number.parseFloat(e.style.height)||e.offsetHeight,n=Number.parseFloat(e.style.left)||e.offsetLeft,s=Number.parseFloat(e.style.top)||e.offsetTop;return{x:n,y:s,width:t,height:i}}function x0e(e){if(e.focus({preventScroll:!0}),e.lastChild?.textContent==null)return;const t=Eu().createRange();t.setStart(e.lastChild,e.lastChild.textContent.length),t.setEnd(e.lastChild,e.lastChild.textContent.length);const i=Qt().getSelection();i?.removeAllRanges(),i?.addRange(t)}function fee(){const e=Qt("navigator");if("scheduling"in e){const t=e.scheduling;if("isInputPending"in t)return t.isInputPending({includeContinuous:!0})}return!1}function kE(e){return`ag-charts-icon ag-charts-icon-${e}`}function w0e(e){let{x:t,y:i,width:n,height:s}=e;return(n==null||n>0)&&(s==null||s>0)?e:(t!=null&&n!=null&&n<0&&(n=-n,t=t-n),i!=null&&s!=null&&s<0&&(s=-s,i=i-s),{x:t,y:i,width:n,height:s})}function $A(e,t,i){i==null?e.removeProperty(t):e.setProperty(t,`${i}px`)}var $B="class-instance";function Nu(e,t,i){if(ft(t)){if(!ft(e)||e.length!==t.length||t.some((n,s)=>Nu(e[s],n,i)!=null))return t}else if(bi(t)){if(!bi(e))return t;const n={},s=new Set([...Object.keys(e),...Object.keys(t)]);for(const o of s)if(e[o]!==t[o])if(i?.has(o))n[o]=t[o];else if(typeof e[o]==typeof t[o]){const r=Nu(e[o],t[o],i);r!==null&&(n[o]=r)}else n[o]=t[o];return Object.keys(n).length?n:null}else if(e!==t)return t;return null}function mee(e,t){for(const i of Object.keys(e))if(e[i]!==t?.[i])return!1;return!0}function fn(e,t){return ft(e)?D0e(e,t):bi(e)?M0e(e,t):e instanceof Map?new Map(fn(Array.from(e))):FG(e)}function D0e(e,t){const i=[],n=t?.seen;for(const s of e){if(typeof s=="object"&&n?.includes(s)){fe.warn("cycle detected in array",s);continue}n?.push(s),i.push(fn(s,t)),n?.pop()}return i}function M0e(e,t){const i={};for(const n of Object.keys(e))t?.assign?.has(n)?i[n]=e[n]:t?.shallow?.has(n)?i[n]=FG(e[n]):i[n]=fn(e[n],t);return i}function FG(e){return ft(e)?e.slice(0):bi(e)?{...e}:gc(e)?new Date(e):Fxe(e)?new RegExp(e.source,e.flags):e}function qp(e,t,i,n,s,o){if(ft(e)){o=t(e,n,s,o);let r=0;for(const a of e)o=qp(a,t,i,n?.[r],s,o),r++}else if(bi(e)){o=t(e,n,s,o);for(const r of Object.keys(e)){if(i?.has(r))continue;const a=e[r];o=qp(a,t,i,n?.[r],s,o)}}return o}function gw(e,t,i={}){const{path:n,matcherPath:s=n?.replace(/(\[[0-9+]+])/i,"[]"),skip:o=[]}=i;if(e==null)throw new Error(`AG Charts - target is uninitialised: ${n??"<root>"}`);if(t==null)return e;if(gm(e))return e.set(t);const r=e,a=JO(e);for(const l of Object.keys(t)){if(RG.has(l))continue;const c=`${s?s+".":""}${l}`;if(o.includes(c))continue;const u=t[l],d=`${n?n+".":""}${l}`,p=r.constructor,f=r[l];try{const m=JO(f),v=JO(u);if(a===$B&&!(l in e||l==="context")){if(u===void 0)continue;fe.warn(`unable to set [${d}] in ${p?.name} - property is unknown`);continue}if(m!=null&&v!=null&&v!==m&&(m!==$B||v!=="object")){fe.warn(`unable to set [${d}] in ${p?.name} - can't apply type of [${v}], allowed types are: [${m}]`);continue}if(gm(f))u===void 0?f.clear():f.set(u);else if(v==="object"&&l!=="context"){if(!(l in r)){fe.warn(`unable to set [${d}] in ${p?.name} - property is unknown`);continue}f==null?r[l]=u:gw(f,u,{...i,path:d,matcherPath:c})}else r[l]=u}catch(m){fe.warn(`unable to set [${d}] in [${p?.name}]; nested error is: ${m.message}`)}}return e}function JO(e){return e==null?null:Bxe(e)||gc(e)?"primitive":ft(e)?"array":St(e)?bi(e)?"object":$B:ph(e)?"function":"primitive"}var A0e=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(e){return new Promise(t=>{this.acquireQueue.push([e,t]),this.available&&this.dispatchNext().catch(i=>fe.errorOnce(i))})}async acquireImmediately(e){return this.available?(await this.acquire(e),!0):!1}async waitForClearAcquireQueue(){return this.acquire(()=>Promise.resolve(void 0))}async dispatchNext(){this.available=!1;let[e,t]=this.acquireQueue.shift()??[];for(;e;){try{await e(),t?.()}catch(i){fe.error("mutex callback error",i),t?.()}[e,t]=this.acquireQueue.shift()??[]}this.available=!0}},yee=class{constructor(){this.eventListeners=new Map}addEventListener(e,t){if(typeof t!="function")throw new TypeError("AG Charts - listener must be a Function");const i=this.eventListeners.get(e);i?i.add(t):this.eventListeners.set(e,new Set([t]))}removeEventListener(e,t){const i=this.eventListeners.get(e);i!=null&&(i.delete(t),i.size===0&&this.eventListeners.delete(e))}hasEventListener(e){return this.eventListeners.has(e)}clearEventListeners(){this.eventListeners.clear()}fireEvent(e){const t=this.eventListeners.get(e.type);if(t)for(const i of t)i(e)}},Zm=class extends pt{constructor(t=0,i=t,n=t,s=i){super(),this.top=t,this.right=i,this.bottom=n,this.left=s}};E([F],Zm.prototype,"top",2);E([F],Zm.prototype,"right",2);E([F],Zm.prototype,"bottom",2);E([F],Zm.prototype,"left",2);function tr(e,t){const i=ft(e)?e:e.split(".");if(i.length===1){const[n]=i;return Rm((s,o,r)=>s[n]=r,s=>s[n],t)}return Rm((n,s,o)=>EG(n,i,o),n=>IG(n,i),t)}function k0e(e){return Rm((t,i,n)=>t[e]=n)}function _n(e,t){return Rm((i,n,s)=>i[e][t??n]=s)}function Io(e){const{newValue:t,oldValue:i,changeValue:n}=e;return Rm((s,o,r,a)=>(r!==a&&(a!==void 0&&i?.call(s,a),r!==void 0&&t?.call(s,r),n?.call(s,r,a)),r))}function bg(e){return UJ(e)}function T0e(e){return vee((t,i)=>Qt().requestAnimationFrame(t),e)}function I0e(e){return vee((t,i=0)=>{i===0?queueMicrotask(t):setTimeout(t,i)},e)}function vee(e,t){let i=0,n=!1,s,o;const r=()=>n,a=()=>{n=!1,o?.(),o=void 0,s=void 0,i>0&&e(l)},l=()=>{const c=i;i=0,n=!0;const u=t({count:c});if(!u){a();return}u.then(a,a)};return{schedule(c){i===0&&!r()&&e(l,c),i++},async await(){if(r())for(s??(s=new Promise(c=>{o=c}));r();)await s}}}var BG=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel","touchstart","touchmove","touchend","touchcancel"];function xv(e,t,i){const{offsetX:n,offsetY:s,clientX:o,clientY:r}=t,{currentX:a,currentY:l}=Kd.calcCurrentXY(i,t);return{type:e,device:"mouse",offsetX:n,offsetY:s,clientX:o,clientY:r,currentX:a,currentY:l,sourceEvent:t}}function KA(e,t,i){return{type:e,sourceEvent:t}}var R0e={blur:e=>({type:"blur",sourceEvent:e}),change:e=>({type:"change",sourceEvent:e}),contextmenu:(e,t)=>xv("contextmenu",e,t),focus:e=>({type:"focus",sourceEvent:e}),keydown:e=>({type:"keydown",sourceEvent:e}),keyup:e=>({type:"keyup",sourceEvent:e}),click:(e,t)=>xv("click",e,t),dblclick:(e,t)=>xv("dblclick",e,t),mouseenter:(e,t)=>xv("mouseenter",e,t),mousemove:(e,t)=>xv("mousemove",e,t),mouseleave:(e,t)=>xv("mouseleave",e,t),wheel:e=>{const{offsetX:t,offsetY:i,clientX:n,clientY:s}=e,o=e.deltaMode===0?.01:1,r=e.deltaX*o,a=e.deltaY*o;return{type:"wheel",offsetX:t,offsetY:i,clientX:n,clientY:s,deltaX:r,deltaY:a,sourceEvent:e}},touchstart:(e,t)=>KA("touchstart",e),touchmove:(e,t)=>KA("touchmove",e),touchend:(e,t)=>KA("touchend",e),touchcancel:(e,t)=>KA("touchcancel",e)},Kd=class{static alloc(e,t,i){return R0e[e](t,i)}static isHTMLEvent(e){return BG.includes(e)}static calcCurrentXY(e,t){const i=e.getBoundingClientRect();return{currentX:t.clientX-i.x,currentY:t.clientY-i.y}}},E0e=class{constructor(){this.widgetListeners={},this.sourceListeners={}}initSourceHandler(e,t){this.sourceListeners??(this.sourceListeners={}),this.sourceListeners[e]=t}lazyGetWidgetListeners(e,t){var i;if(!(e in(this.sourceListeners??{}))){const n=o=>{const r=Kd.alloc(e,o,t.getElement());this.dispatch(e,t,r)},s={};e.startsWith("touch")&&(s.passive=!1),this.initSourceHandler(e,n),t.getElement().addEventListener(e,n,s)}return this.widgetListeners??(this.widgetListeners={}),(i=this.widgetListeners)[e]??(i[e]=[]),this.widgetListeners[e]}add(e,t,i){this.lazyGetWidgetListeners(e,t).push(i)}remove(e,t,i){const n=this.lazyGetWidgetListeners(e,t),s=n.indexOf(i);s>-1&&n.splice(s,1)}destroy(e){if(this.widgetListeners=void 0,this.sourceListeners){for(const[t,i]of Ji(this.sourceListeners))e.getElement().removeEventListener(t,i);this.sourceListeners=void 0}}dispatch(e,t,i){for(const n of this.widgetListeners?.[e]??[])n(i,t)}},L0e=class{constructor(e,t,i,n){this.glob=e,this.self=t,this.window=Qt(),this.cleanup=new _i,this.mousegeneral=l=>{l.stopPropagation(),l.stopImmediatePropagation()},this.mousemove=l=>{l.stopPropagation(),l.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mousemove(l)},this.mouseup=l=>{l.button===0&&(l.stopPropagation(),l.stopImmediatePropagation(),this.glob.globalMouseDragCallbacks?.mouseup(l),this.destroy())};const{window:s,mousegeneral:o,mousemove:r,mouseup:a}=this;this.cleanup.register(gi(s,"mousedown",o,{capture:!0}),gi(s,"mouseenter",o,{capture:!0}),gi(s,"mouseleave",o,{capture:!0}),gi(s,"mouseout",o,{capture:!0}),gi(s,"mouseover",o,{capture:!0}),gi(s,"mousemove",r,{capture:!0}),gi(s,"mouseup",a,{capture:!0})),t.mouseDragger=this,e.globalMouseDragCallbacks=i,e.globalMouseDragCallbacks.mousedown(n),n.stopPropagation(),n.stopImmediatePropagation()}destroy(){this.cleanup.flush(),this.glob.globalMouseDragCallbacks=void 0,this.self.mouseDragger=void 0}};function P0e(e,t,i,n){if(e.globalMouseDragCallbacks==null)return new L0e(e,t,i,n)}var N0e=500,O0e=100;function F0e(e,t){const i=e.clientX-t.clientX,n=e.clientY-t.clientY;return i*i+n*n}var KB=!1,B0e=class{constructor(e,t,i,n,s){this.glob=e,this.self=t,this.initialTouch=n,this.target=s,this.cleanup=new _i,this.longTapInterrupted=!1,this.longtap=()=>{const{target:a,initialTouch:l}=this;if(!this.longTapInterrupted){const c=new _i;a.dispatchEvent(new TouchEvent("touchcancel",{touches:[l],bubbles:!0})),KB=!0;const u=v=>v.preventDefault(),d=v=>{KB=!1,v.preventDefault(),c.flush()};c.register(gi(a,"touchmove",u,{passive:!1}),gi(a,"touchend",d,{passive:!1}),gi(a,"touchcancel",d,{passive:!1}));const{clientX:p,clientY:f}=l,m=new PointerEvent("contextmenu",{bubbles:!0,cancelable:!0,view:Qt(),clientX:p,clientY:f,pointerType:"touch"});a.dispatchEvent(m)}},this.touchmove=a=>{const{glob:l,self:c,initialTouch:u}=this,d=this.findInitialFinger(a.targetTouches);d!=null&&(this.longTapInterrupted=this.longTapInterrupted||F0e(u,d)>O0e,c.dragTouchEnabled&&l.globalTouchDragCallbacks?.touchmove(a,d))},this.touchend=a=>{this.longTapInterrupted=!0;const l=this.findInitialFinger(a.changedTouches,a.touches);l!=null&&this.glob.globalTouchDragCallbacks?.touchend(a,l),this.destroy()},this.longtapTimer=setTimeout(this.longtap,N0e);const{touchmove:o,touchend:r}=this;this.cleanup.register(gi(s,"touchmove",o,{passive:!1}),gi(s,"touchstart",r,{passive:!1}),gi(s,"touchend",r,{passive:!1}),gi(s,"touchcancel",r,{passive:!1})),t.touchDragger=this,e.globalTouchDragCallbacks=i}destroy(){clearTimeout(this.longtapTimer),this.cleanup.flush(),this.glob.globalTouchDragCallbacks=void 0,this.self.touchDragger=void 0}findInitialFinger(...e){const t=e.flatMap(i=>Array.from(i));return Array.from(t).find(i=>i.identifier===this.initialTouch.identifier)}};function _0e(e,t,i,n,s){if(!(e.globalTouchDragCallbacks!=null||KB))return new B0e(e,t,i,n,s)}function eF(e,t,i,n){const{currentX:s,currentY:o}=Kd.calcCurrentXY(e.getElement(),n),r=n.pageX-i.pageX,a=n.pageY-i.pageY;return{type:t,device:"mouse",offsetX:i.offsetX+r,offsetY:i.offsetY+a,clientX:n.clientX,clientY:n.clientY,currentX:s,currentY:o,originDeltaX:r,originDeltaY:a,sourceEvent:n}}function z0e(e,{pageX:t,pageY:i}){const{x:n,y:s}=e.getElement().getBoundingClientRect();return{offsetX:t-n,offsetY:i-s}}function tF(e,t,i,n,s){const{currentX:o,currentY:r}=Kd.calcCurrentXY(e.getElement(),s),a=s.pageX-i.pageX,l=s.pageY-i.pageY;return{type:t,device:"touch",offsetX:i.offsetX+a,offsetY:i.offsetY+l,clientX:s.clientX,clientY:s.clientY,currentX:o,currentY:r,originDeltaX:a,originDeltaY:l,sourceEvent:n}}var zK={},GK=class{constructor(e){this.dispatchCallback=e,this.dragTouchEnabled=!0}destroy(){this.dragTriggerRemover?.(),this.dragTriggerRemover=void 0,this.listeners?.clear(),this.mouseDragger?.destroy(),this.touchDragger?.destroy()}getListenerSet(e){this.listeners??(this.listeners=new Map);let t=this.listeners.get(e);return t===void 0&&(t=new Set,this.listeners.set(e,t)),t}add(e,t,i){switch(this.getListenerSet(e).add(i),e){case"drag-start":case"drag-move":case"drag-end":{this.registerDragTrigger(t);break}}}remove(e,t,i){this.getListenerSet(e).delete(i)}registerDragTrigger(e){if(this.dragTriggerRemover==null){const t=e.getElement(),i=new _i;i.register(gi(t,"mousedown",n=>this.triggerMouseDrag(e,n)),gi(t,"touchstart",n=>this.triggerTouchDrag(e,n),{passive:!1})),this.dragTriggerRemover=()=>i.flush()}}triggerMouseDrag(e,t){t.button===0&&this.startMouseDrag(e,t)}startMouseDrag(e,t){const i={pageX:Number.NaN,pageY:Number.NaN,offsetX:Number.NaN,offsetY:Number.NaN};WB(["pageX","pageY","offsetX","offsetY"],i,t);const n={mousedown:s=>{const o=eF(e,"drag-start",i,s);this.dispatch("drag-start",e,o)},mousemove:s=>{const o=eF(e,"drag-move",i,s);this.dispatch("drag-move",e,o)},mouseup:s=>{const o=eF(e,"drag-end",i,s);this.dispatch("drag-end",e,o),this.endDrag(e,o)}};this.mouseDragger=P0e(zK,this,n,t)}endDrag(e,{sourceEvent:t,clientX:i,clientY:n}){const s=e.getElement(),o=s.getBoundingClientRect();MG(o,i,n)||(s.dispatchEvent(new MouseEvent("mouseleave",t)),t.target?.dispatchEvent(new MouseEvent("mouseenter",t)))}triggerTouchDrag(e,t){const i=t.targetTouches[0];t.targetTouches.length===1&&i!=null&&this.startOneFingerTouch(e,t,i)}startOneFingerTouch(e,t,i){const n={pageX:Number.NaN,pageY:Number.NaN,...z0e(e,i)};WB(["pageX","pageY"],n,i);const s={touchmove:(a,l)=>{const c=tF(e,"drag-move",n,a,l);this.dispatch("drag-move",e,c)},touchend:(a,l)=>{const c=tF(e,"drag-end",n,a,l);this.dispatch("drag-end",e,c)}},o=e.getElement();this.touchDragger=_0e(zK,this,s,i,o);const r=tF(e,"drag-start",n,t,i);this.dispatch("drag-start",e,r)}dispatch(e,t,i){for(const n of this.getListenerSet(e))n(i,t);this.dispatchCallback(e,i)}},G0e=class{constructor(e){this.elem=e}setBounds(e){WI(this.elemContainer??this.elem,e)}getBounds(){return gee(this.elemContainer??this.elem)}static setElementContainer(e,t){const i=e.getBounds();WI(t,i),Swe(e.elem,{width:"100%",height:"100%"}),e.elem.remove(),e.elemContainer=t,e.elemContainer.replaceChildren(e.elem)}},Hu=class extends G0e{constructor(){super(...arguments),this.index=Number.NaN,this.children=[]}set id(e){Pt(this.elem,"id",e)}get id(){return yb(this.elem,"id")}getElement(){return this.elem}getBoundingClientRect(){return this.elem.getBoundingClientRect()}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){this.destroyListener?.(),this.destroyListener=void 0,this.remove();for(const e of this.children)e.parent=void 0,e.destroy();this.children.length=0,this.destructor(),this.remove(),this.internalListener?.destroy(),this.htmlListener?.destroy(this)}remove(){this.elem.remove(),this.elemContainer?.remove()}setHidden(e){vu(this.elem,"display",e?"none":void 0)}isHidden(){return Qt()?.getComputedStyle?.(this.elem).display==="none"}setCursor(e){vu(this.elem,"cursor",e)}setTextContent(e){this.elem.textContent=e??null}setAriaDescribedBy(e){Pt(this.elem,"aria-describedby",e)}setAriaHidden(e){Pt(this.elem,"aria-hidden",e)}setAriaLabel(e){Pt(this.elem,"aria-label",e)}setAriaExpanded(e){Pt(this.elem,"aria-expanded",e)}setAriaControls(e){Pt(this.elem,"aria-controls",e)}setAriaHasPopup(e){Pt(this.elem,"aria-haspopup",e)}setInnerHTML(e){this.elem.innerHTML=e}setPointerEvents(e){vu(this.elem,"pointer-events",e)}setCSSVariable(e,t){this.elem.style.setProperty(e,t)}isDisabled(){return yb(this.elem,"aria-disabled",!1)}hasPopup(){const e=yb(this.elem,"aria-haspopup");return e!==void 0&&e!=="false"}parseFloat(e){return e===""?0:Number.parseFloat(e)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}cssWidth(){return this.parseFloat(this.elem.style.width)}cssHeight(){return this.parseFloat(this.elem.style.height)}focus(e){this.elem.focus(e)}setFocusOverride(e){Pt(this.elem,"data-focus-override",e)}setPreventsDefault(e){Pt(this.elem,"data-preventdefault",e)}setTabIndex(e){Pt(this.elem,"tabindex",e)}addChild(e){this.addChildToDOM(e,this.getBefore(e)),this.children.push(e),e.index=this.children.length-1,e.parent=this,this.onChildAdded(e)}removeChild(e){const t=this.children.indexOf(e);this.children.splice(t,1),this.removeChildFromDOM(e),this.onChildRemoved(e)}moveChild(e,t){e.domIndex!==t&&(e.domIndex=t,this.removeChildFromDOM(e),this.addChildToDOM(e,this.getBefore(e)))}addClass(...e){this.elem.classList.add(...e)}removeClass(...e){this.elem.classList.remove(...e)}toggleClass(e,t){this.elem.classList.toggle(e,t)}appendOrInsert(e,t){t?t.getElement().insertAdjacentElement("beforebegin",e):this.elem.appendChild(e)}addChildToDOM(e,t){this.appendOrInsert(e.getElement(),t)}removeChildFromDOM(e){e.getElement().remove()}onChildAdded(e){}onChildRemoved(e){}getBefore({domIndex:e}){if(e!==void 0)return this.children.filter(t=>t.domIndex!==void 0&&t.domIndex>e).reduce((t,i)=>!t||i.domIndex<t.domIndex?i:t,void 0)}addListener(e,t){return Kd.isHTMLEvent(e)?(this.htmlListener??(this.htmlListener=new E0e),this.htmlListener.add(e,this,t)):(this.internalListener??(this.internalListener=new GK(this.onDispatch.bind(this))),this.internalListener.add(e,this,t)),()=>this.removeListener(e,t)}removeListener(e,t){Kd.isHTMLEvent(e)?this.htmlListener?.remove(e,this,t):this.htmlListener!=null&&this.internalListener?.remove(e,this,t)}setDragTouchEnabled(e){this.internalListener??(this.internalListener=new GK(this.onDispatch.bind(this))),this.internalListener.dragTouchEnabled=e}onDispatch(e,t){if(!t.sourceEvent?.bubbles)return;let{parent:i}=this;for(;i!=null;){const{internalListener:n}=i;if(n!=null){const s={...t,...Kd.calcCurrentXY(i.getElement(),t)};n.dispatch(e,i,s)}i=i.parent}}static addWindowEvent(e,t){const i=n=>{n.persisted||t()};return gi(Qt(),"pagehide",i)}},V0e=class{constructor(){this.stats=new Map,this.lastLogTime=Date.now(),this.LOG_INTERVAL_MS=1e4,this.startPeriodicLogging()}startPeriodicLogging(){Ct.check("scene:stats","scene:stats:verbose")&&(this.stopPeriodicLogging(),this.intervalId=setInterval(()=>{this.logAccumulatedStats()},this.LOG_INTERVAL_MS))}stopPeriodicLogging(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)}recordTiming(e,t){const i=this.stats.get(e);i?(i.min=Math.min(i.min,t),i.max=Math.max(i.max,t),i.sum+=t,i.count+=1):this.stats.set(e,{min:t,max:t,sum:t,count:1})}recordTimings(e){for(const[t,i]of Object.entries(e))t!=="start"&&typeof i=="number"&&this.recordTiming(t,i)}logAccumulatedStats(){if(this.stats.size===0)return;const e=(Date.now()-this.lastLogTime)/1e3,t=Array.from(this.stats.keys()).sort((o,r)=>o===""?-1:r===""?1:o.localeCompare(r)),i=[];for(const o of t){const r=this.stats.get(o),a=r.sum/r.count;i.push(`${o}[${r.min.toFixed(1)}/${a.toFixed(1)}/${r.max.toFixed(1)}]ms`)}const s=this.stats.get("")?.count??0;fe.log(` Stats (${e.toFixed(0)}s, ${s} renders): ${i.join(" ")}`),this.stats.clear(),this.lastLogTime=Date.now()}destroy(){this.stopPeriodicLogging(),this.stats.clear()}},bb,em=0;function H0e(){return bb??(bb=new V0e),bb}function W0e(){em++;let e=!1;return()=>{e||em===0||(e=!0,em--,em===0&&See())}}function j0e(e){for(const t of["B","KB","MB","GB"]){if(e<1536)return`${e.toFixed(1)}${t}`;e/=1024}return`${e.toFixed(1)}TB}`}function U0e(){if(!("memory"in performance))return;const{totalJSHeapSize:e,usedJSHeapSize:t,jsHeapSizeLimit:i}=performance.memory,n=[];for(const s of[t,e,i])typeof s=="number"&&n.push(j0e(s));return`Heap ${n.join(" / ")}`}function VK(e,t,i,n,s={},o=He.zero){if(!Ct.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:r=0,layersSkipped:a=0,nodesRendered:l=0,nodesSkipped:c=0,opsPerformed:u=0,opsSkipped:d=0}=n??{},p=performance.now(),{start:f,...m}=t,v=p-f,b=H0e();b.recordTimings(m),b.recordTiming("",v);const C=Object.entries(m).map(([B,V])=>HK(B,V)).filter(B=>B!=null).join(" + "),x=Object.entries(s).map(([B,V])=>`${B}: ${JSON.stringify(V)}`).join(" ; "),w=Ct.check("scene:stats:verbose"),M=w?U0e():null,T=[`${HK("",f,p)} (${C})`,`${x}`,`Layers: ${w?iF(r,a):e.size}`,w?`Nodes: ${iF(l,c)}`:null,w?`Ops: ${iF(u,d)}`:null,M].filter(Nn),L=new GJ(i),I=new Map(T.map(B=>[B,L.measureText(B)])),R=Math.max(...Array.from(I.values(),B=>B.width)),O=q0e(I.values(),B=>B.height),_=2+o.x;i.save();try{i.fillStyle="white",i.fillRect(_,0,R,O),i.fillStyle="black";let B=0;for(const[V,j]of I.entries())B+=j.height,i.fillText(V,_,B)}catch(B){fe.warnOnce("Error during debug stats rendering",B)}finally{i.restore()}}function $0e(e){const t=BI(Qt("agChartsSceneDebug")),i=[];for(const n of t)n==="layout"?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(n);e.debugNodeSearch=i}function K0e(e,t){e.save();try{for(const[i,n]of Object.entries(t)){const s=vn.toCanvas(n);if(!s){fe.log(`Scene.render() - no bbox for debugged node [${i}].`);continue}e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(s.x,s.y,s.width,s.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(i,s.x,s.y,s.width),e.fillText(i,s.x,s.y,s.width)}}catch(i){fe.warnOnce("Error during debug rendering",i)}finally{e.restore()}}var Y0e=new Set,X0e=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function Z0e(e){const{...t}=e;for(const i of Object.keys(t))X0e.has(i)||typeof t[i]!="number"&&typeof t[i]!="string"&&typeof t[i]!="boolean"&&(Y0e.add(i),delete t[i]);return t}function BT(e,t){if(!Ct.check(!0,"scene"))return{};let i=0;return{node:t==="json"?Z0e(e):e,name:e.name??e.id,dirty:e instanceof Mt?e.dirty:void 0,...Array.from(e instanceof Mt?e.children():[],n=>BT(n,t)).reduce((n,s)=>{let{name:o}=s;const{node:{visible:r,opacity:a,zIndex:l,translationX:c,translationY:u,rotation:d,scalingX:p,scalingY:f},node:m}=s;(!r||a<=0)&&(o=`(${o})`),Mt.is(m)&&m.renderToOffscreenCanvas&&(o=`*${o}*`);const v=Array.isArray(l)?`(${l.join(", ")})`:l,b=[`${(i++).toString().padStart(3,"0")}|`,`${o??"<unknown>"}`,`z: ${v}`,c&&`x: ${c}`,u&&`y: ${u}`,d&&`r: ${d}`,p!=null&&p!==1&&`sx: ${p}`,f!=null&&f!==1&&`sy: ${f}`].filter(w=>!!w).join(" ");let C=b,x=1;for(;n[C]!=null&&x<100;)C=`${b} (${x++})`;return n[C]=s,n},{})}}function bee(e){const t=e instanceof Mt?e.dirty:void 0;if(!t)return{dirtyTree:{},paths:[]};const i=Array.from(e instanceof Mt?e.children():[],o=>bee(o)).filter(o=>o.paths.length>0),n=Mt.is(e)?e.name??e.id:e.id,s=i.length?i.flatMap(o=>o.paths).map(o=>`${n}.${o}`):[n];return{dirtyTree:{name:n,node:e,dirty:t,...i.map(o=>o.dirtyTree).filter(o=>o.dirty!=null).reduce((o,r)=>(o[r.name??"<unknown>"]=r,o),{})},paths:s}}function iF(e,t){const i=e+t;return`${e} / ${i} (${Math.round(100*e/i)}%)`}function HK(e,t,i){const n=i==null?t:i-t;return`${e}: ${Math.round(n*100)/100}ms`}function q0e(e,t){let i=0;for(const n of e)i+=t(n);return i}function See(e=!1){if(!bb){e&&(em=0);return}!e&&em>0||(bb.destroy(),bb=void 0,e&&(em=0))}var Xx=(e,{x0:t,y0:i,x1:n,y1:s,cx:o,cy:r},a,l)=>{if(l&&e.moveTo(t,i),t!==n||i!==s){const c=Math.atan2(i-r,t-o),u=Math.atan2(s-r,n-o);e.arc(o,r,a,c,u)}else e.lineTo(t,i)},Ls=class extends Bn{constructor(){super(...arguments),this.path=new Xb,this._clipX=Number.NaN,this._clipY=Number.NaN,this.clip=!1,this._dirtyPath=!0,this.lastPixelRatio=Number.NaN}set clipX(t){this._clipX=t,this.dirtyPath=!0}set clipY(t){this._clipY=t,this.dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty("path"))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(this.fillShadow?.isDirty()??!1)||(this._clipPath?.isDirty()??!1))}resetPathDirty(){this.path.clear(!0),this._dirtyPath=!1}isPathDirty(){return this.path.isDirty()}onChangeDetection(t){this._dirtyPath||(this._dirtyPath=!0,super.onChangeDetection(t))}computeBBox(){return this.updatePathIfDirty(),this.path.computeBBox()}isPointInPath(t,i){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(t,i)}distanceSquared(t,i){return this.distanceSquaredTransformedPoint(t,i)}svgPathData(t){return this.updatePathIfDirty(),this.path.toSVG(t)}distanceSquaredTransformedPoint(t,i){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(t,i)?0:this.path.distanceSquared(t,i)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(t){return t.devicePixelRatio!==this.lastPixelRatio&&(this.dirtyPath=!0),this.lastPixelRatio=t.devicePixelRatio,this.updatePathIfDirty(),super.preRender(t,this.path.commands.length)}render(t){const{ctx:i}=t;if(this.clip&&!Number.isNaN(this._clipX)&&!Number.isNaN(this._clipY)){i.save();try{const n=this.strokeWidth/2;this._clipPath??(this._clipPath=new Xb),this._clipPath.clear(),this._clipPath.rect(-n,-n,this._clipX+n,this._clipY+n+n),i.clip(this._clipPath?.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(i)}finally{i.restore()}}else this._clipPath=void 0,this.drawPath(i);this.fillShadow?.markClean(),super.render(t)}drawPath(t){this.fillStroke(t,this.path.getPath2D())}toSVG(){if(!this.visible)return;const t=Pn("path");t.setAttribute("d",this.svgPathData());const i=this.applySvgFillAttributes(t,[]);return this.applySvgStrokeAttributes(t),{elements:[t],defs:i}}};Ls.className="Path";E([Le()],Ls.prototype,"clip",2);E([Le()],Ls.prototype,"clipX",1);E([Le()],Ls.prototype,"clipY",1);var YA=(e,t,i,n,s)=>{let o=!1,r=!1,a=n-Math.sqrt(Math.max(s**2-i**2,0)),l=0,c=0,u=i-Math.sqrt(Math.max(s**2-n**2,0));return a>e?(o=!0,a=e,l=i-Math.sqrt(Math.max(s**2-(n-e)**2))):Jt(a,0)&&(a=0),u>t?(r=!0,c=n-Math.sqrt(Math.max(s**2-(i-t)**2)),u=t):Jt(u,0)&&(u=0),{leading0:a,leading1:l,trailing0:c,trailing1:u,leadingClipped:o,trailingClipped:r}},_T=(e,t,i,n,s,o,r)=>{let{topLeft:a,topRight:l,bottomRight:c,bottomLeft:u}=o;const d=Math.max(a+u,l+c),p=Math.max(a+l,u+c);if(d<=0&&p<=0){if(r==null)e.rect(t,i,n,s);else{const I=Math.max(t,r.x),R=Math.min(t+n,r.x+r.width),O=Math.max(i,r.y),_=Math.min(i+s,r.y+r.height);e.rect(I,O,R-I,_-O)}return}else if(r==null&&a===l&&a===c&&a===u){e.roundRect(t,i,n,s,a);return}if(n<0&&(t+=n,n=Math.abs(n)),s<0&&(i+=s,s=Math.abs(s)),n<=0||s<=0)return;if(r==null)r=new He(t,i,n,s);else{const I=Math.max(t,r.x),R=Math.min(t+n,r.x+r.width),O=Math.max(i,r.y),_=Math.min(i+s,r.y+r.height);r=new He(I,O,R-I,_-O)}const f=Math.max(d/s,p/n,1);f>1&&(a/=f,l/=f,c/=f,u/=f);let m=!0,v=!0,b=!0,C=!0,x,w,M,T;if(m){const I=YA(r.height,r.width,Math.max(t+a-r.x,0),Math.max(i+a-r.y,0),a);I.leadingClipped&&(C=!1),I.trailingClipped&&(v=!1);const R=Math.max(r.x+I.leading1,r.x),O=Math.max(r.y+I.leading0,r.y),_=Math.max(r.x+I.trailing1,r.x),B=Math.max(r.y+I.trailing0,r.y),V=t+a,j=i+a;x={x0:R,y0:O,x1:_,y1:B,cx:V,cy:j}}if(v){const I=YA(r.width,r.height,Math.max(i+l-r.y,0),Math.max(r.x+r.width-(t+n-l),0),l);I.leadingClipped&&(m=!1),I.trailingClipped&&(b=!1);const R=Math.min(r.x+r.width-I.leading0,r.x+r.width),O=Math.max(r.y+I.leading1,r.y),_=Math.min(r.x+r.width-I.trailing0,r.x+r.width),B=Math.max(r.y+I.trailing1,r.y),V=t+n-l,j=i+l;w={x0:R,y0:O,x1:_,y1:B,cx:V,cy:j}}if(b){const I=YA(r.height,r.width,Math.max(r.x+r.width-(t+n-c),0),Math.max(r.y+r.height-(i+s-c),0),c);I.leadingClipped&&(v=!1),I.trailingClipped&&(C=!1);const R=Math.min(r.x+r.width-I.leading1,r.x+r.width),O=Math.min(r.y+r.height-I.leading0,r.y+r.height),_=Math.min(r.x+r.width-I.trailing1,r.x+r.width),B=Math.min(r.y+r.height-I.trailing0,r.y+r.height),V=t+n-c,j=i+s-c;M={x0:R,y0:O,x1:_,y1:B,cx:V,cy:j}}if(C){const I=YA(r.width,r.height,Math.max(r.y+r.height-(i+s-u),0),Math.max(t+u-r.x,0),u);I.leadingClipped&&(b=!1),I.trailingClipped&&(m=!1);const R=Math.max(r.x+I.leading0,r.x),O=Math.min(r.y+r.height-I.leading1,r.y+r.height),_=Math.max(r.x+I.trailing0,r.x),B=Math.min(r.y+r.height-I.trailing1,r.y+r.height),V=t+u,j=i+s-u;T={x0:R,y0:O,x1:_,y1:B,cx:V,cy:j}}let L=!1;m&&x!=null&&(Xx(e,x,a,!L),L||(L=!0)),v&&w!=null&&(Xx(e,w,l,!L),L||(L=!0)),b&&M!=null&&(Xx(e,M,c,!L),L||(L=!0)),C&&T!=null&&Xx(e,T,u,!L),e.closePath()},bs=class extends Ls{constructor(){super(...arguments),this.borderPath=new Xb,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=this.strokeWidth,this.effectiveStrokeWidth=this.strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(t){this.topLeftCornerRadius=t,this.topRightCornerRadius=t,this.bottomRightCornerRadius=t,this.bottomLeftCornerRadius=t}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){const{path:t,borderPath:i,crisp:n,topLeftCornerRadius:s,topRightCornerRadius:o,bottomRightCornerRadius:r,bottomLeftCornerRadius:a}=this;let{x:l,y:c,width:u,height:d,strokeWidth:p,clipBBox:f}=this;const v=1/(this.layerManager?.canvas.pixelRatio??1);let b=1;if(t.clear(!0),i.clear(!0),u===0||d===0){this.effectiveStrokeWidth=0,this.lastUpdatePathStrokeWidth=0,this.microPixelEffectOpacity=0;return}if(n&&(u<=v&&(b*=u/v),d<=v&&(b*=d/v),u=this.align(l,u),d=this.align(c,d),l=this.align(l),c=this.align(c),f=f==null?void 0:new He(this.align(f.x),this.align(f.y),this.align(f.x,f.width),this.align(f.y,f.height))),p)if(u<v){const C=l+v/2;i.moveTo(C,c),i.lineTo(C,c+d),p=v,this.borderClipPath=void 0}else if(d<v){const C=c+v/2;i.moveTo(l,C),i.lineTo(l+u,C),p=v,this.borderClipPath=void 0}else if(p<u&&p<d){const C=p/2;l+=C,c+=C,u-=p,d-=p;const x=f?.clone().shrink(C),w={topLeft:s>0?s-p:0,topRight:o>0?o-p:0,bottomRight:r>0?r-p:0,bottomLeft:a>0?a-p:0};this.borderClipPath=void 0,u>0&&d>0&&(x==null||x?.width>0&&x?.height>0)&&(_T(t,l,c,u,d,w,x),_T(i,l,c,u,d,w,x))}else this.borderClipPath=this.borderClipPath??new Xb,this.borderClipPath.clear(!0),this.borderClipPath.rect(l,c,u,d),i.rect(l,c,u,d);else{const C={topLeft:s,topRight:o,bottomRight:r,bottomLeft:a};this.borderClipPath=void 0,_T(t,l,c,u,d,C,f)}if([s,o,r,a].every(C=>C===0)){const C=this.getBBox();this.hittester=C.containsPoint.bind(C),this.distanceSquared=(x,w)=>this.getBBox().distanceSquared(x,w)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=p,this.lastUpdatePathStrokeWidth=p,this.microPixelEffectOpacity=b}computeBBox(){const{x:t,y:i,width:n,height:s,clipBBox:o}=this;return o?.clone()??new He(t,i,n,s)}isPointInPath(t,i){return this.hittester(t,i)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(t,i){return this.distanceCalculator(t,i)}applyFillAndAlpha(t){super.applyFillAndAlpha(t),t.globalAlpha*=this.microPixelEffectOpacity}applyStrokeAndAlpha(t){super.applyStrokeAndAlpha(t),t.globalAlpha*=this.microPixelEffectOpacity}renderStroke(t){const{stroke:i,effectiveStrokeWidth:n}=this;if(i&&n){const{globalAlpha:s}=t,{lineDash:o,lineDashOffset:r,lineCap:a,lineJoin:l,borderPath:c,borderClipPath:u}=this;u&&t.clip(u.getPath2D()),this.applyStrokeAndAlpha(t),t.lineWidth=n,o&&t.setLineDash(o),r&&(t.lineDashOffset=r),a&&(t.lineCap=a),l&&(t.lineJoin=l),t.stroke(c.getPath2D()),t.globalAlpha=s}}};bs.className="Rect";E([Le()],bs.prototype,"x",2);E([Le()],bs.prototype,"y",2);E([Le()],bs.prototype,"width",2);E([Le()],bs.prototype,"height",2);E([Le()],bs.prototype,"topLeftCornerRadius",2);E([Le()],bs.prototype,"topRightCornerRadius",2);E([Le()],bs.prototype,"bottomRightCornerRadius",2);E([Le()],bs.prototype,"bottomLeftCornerRadius",2);E([Pa({})],bs.prototype,"clipBBox",2);E([Le()],bs.prototype,"crisp",2);var Jr=class rl extends Bn{constructor(t){super(t),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontCache=void 0,this.fontSize=rl.defaultFontSize,this.fontFamily="sans-serif",this.textAlign="start",this.textBaseline="alphabetic",this.boxPadding=0,this.trimText=t?.trimText??!0}onTextChange(){if(this.richText?.clear(),this.textMap?.clear(),ft(this.text))this.lines=[],this.richText??(this.richText=new Mt),this.richText.setScene(this.scene),this.richText.append(this.text.flatMap(t=>Nn(t.text)?t.text.split(Kb):String(t.text)).filter(Boolean).map(()=>new rl({trimText:!1})));else{const t=this.text?.split(`
`)??[];this.lines=this.trimText?t.map(i=>i.trim()):t}}get font(){return this.fontCache??(this.fontCache=_J(this)),this.fontCache}static measureBBox(t,i,n,s){if(ft(t)){const{font:o,lineHeight:r,textAlign:a,textBaseline:l}=s,{width:c,height:u,lineMetrics:d}=Da(t,o),p=r?r*d.length:u,f=rl.calcTopOffset(p,d[0],l),m=rl.calcLeftOffset(c,a);return new He(i-m,n-f,c,p)}else return rl.computeBBox(t?.split(Kb),i,n,s)}static computeBBox(t,i,n,s){const{font:o,lineHeight:r,textAlign:a,textBaseline:l}=s,{width:c,height:u,lineMetrics:d}=ei(o).measureLines(t),p=r?r*d.length:u,f=rl.calcTopOffset(p,d[0],l),m=rl.calcLeftOffset(c,a);return new He(i-m,n-f,c,p)}static calcTopOffset(t,i,n){switch(n){case"alphabetic":return i?.ascent??0;case"middle":return t/2;case"bottom":return t;default:return 0}}static calcLeftOffset(t,i){let n=0;switch(i){case"center":n=.5;break;case"right":case"end":n=1}return t*n}computeBBox(){if(this.generateTextMap(),this.textMap?.size){const a=He.merge(this.textMap.values());return a.x=this.x-rl.calcLeftOffset(a.width,this.textAlign),a.y=this.y,a}const{x:t,y:i,lines:n,textBaseline:s,textAlign:o}=this,r=rl.computeBBox(n,t,i,{font:this,textBaseline:s,textAlign:o});return this.boxing!=null&&r.grow(this.boxPadding),r}getTextMeasureBBox(){return this.computeBBox()}getPlainText(){return Gt(this.text)}isPointInPath(t,i){return this.getBBox()?.containsPoint(t,i)??!1}setScene(t){this.richText?.setScene(t),super.setScene(t)}generateTextMap(){if(!ft(this.text)||this.textMap?.size)return;this.textMap??(this.textMap=new Map);let t=0;const i=this.richText.children();for(const{width:n,height:s,ascent:o,segments:r}of Da(this.text,this).lineMetrics){let a=0;for(const{color:l,textMetrics:c,...u}of r){const d=i.next().value;d.x=this.x-n/2+a,d.y=o+t,d.setProperties({...u,fill:l??this.fill});const p=d.getBBox();this.textMap.set(d,p),a+=c.width}t+=s}}render(t){const{ctx:i,stats:n}=t;if(!this.text||!this.layerManager)return n&&(n.nodesSkipped+=1),super.render(t);if(ft(this.text)&&this.richText){this.generateTextMap();const s=this.richText.getBBox(),{width:o,height:r,lineMetrics:a}=Da(this.text,this);let l=0;switch(this.textAlign){case"left":case"start":l=o/2;break;case"right":case"end":l=o/-2}let c=this.y;switch(this.textBaseline){case"alphabetic":c-=a[0]?.ascent??0;break;case"middle":c-=a.length===1?a[0].ascent+a[0].segments.reduce((u,d)=>Math.min(u,ei(d).baselineDistance("middle")),0):r/2;break;case"bottom":c-=r;break}this.renderBoxing(t,s.clone().translate(l,c)),i.save(),i.translate(l,c),this.richText.opacity=this.opacity,this.richText.render(t),i.restore()}else this.renderText(t);if(rl.debug.check()&&!this.textMap?.size){const s=this.getBBox();i.strokeStyle="red",i.lineWidth=1,i.strokeRect(s.x,s.y,s.width,s.height)}super.render(t)}markDirty(t){return this.textMap?.clear(),super.markDirty(t)}renderText(t){const{fill:i,stroke:n,strokeWidth:s,font:o,textAlign:r}=this;if(!i&&!(n&&s)||!this.layerManager)return super.render(t);const{ctx:a}=t;a.font!==o&&(a.font=o),a.textAlign=r,this.renderBoxing(t),this.fillStroke(a)}renderBoxing(t,i){if(!this.boxing)return;const n=i??rl.computeBBox(this.lines,this.x,this.y,this);if(n.width===0||n.height===0)return;const{x:s,y:o,width:r,height:a}=n.grow(this.boxPadding);this.boxing.opacity=this.opacity,this.boxing.x=s,this.boxing.y=o,this.boxing.width=r,this.boxing.height=a,this.boxing.preRender(t),this.boxing.render(t)}executeFill(t){this.renderLines((i,n,s)=>t.fillText(i,n,s))}executeStroke(t){this.renderLines((i,n,s)=>t.strokeText(i,n,s))}renderLines(t){const{x:i,y:n,lines:s}=this;if(!Number.isFinite(i)||!Number.isFinite(n))return;const o=ei(this),{lineMetrics:r}=o.measureLines(s),{textBaseline:a,lineHeight:l=o.lineHeight()}=this;let c=0;a==="top"?c=r[0].ascent:(a==="middle"||a==="bottom")&&(c=l*(1-s.length),a==="middle"?(c/=2,c-=o.baselineDistance(a)):c-=r[0].descent);for(const u of r)t(u.text,i,n+c),c+=l}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}setBoxing(t){const i=t.border?.enabled?t.border?.stroke:void 0;t.fill!=null||i!=null?(this.boxing??(this.boxing=new bs({scene:this.scene})),this.boxing.fill=t.fill,this.boxing.fillOpacity=t.fillOpacity??1,this.boxing.cornerRadius=t.cornerRadius??0,this.boxing.stroke=i,this.boxing.strokeWidth=t.border?.strokeWidth??0,this.boxing.strokeOpacity=t.border?.strokeOpacity??1,this.boxPadding=t.padding??0):this.boxing&&(this.boxing.destroy(),this.boxing=void 0)}getBoxingProperties(){const{fill:t,fillOpacity:i,cornerRadius:n,stroke:s,strokeWidth:o,strokeOpacity:r}=this.boxing??{};return{border:{enabled:s!=null,stroke:s,strokeWidth:o,strokeOpacity:r},cornerRadius:n,fill:t,fillOpacity:i,padding:this.boxPadding}}toSVG(){if(!this.visible||!this.text)return;const t=Pn("text");if(Nn(this.text))this.applySvgFillAttributes(t),BK(t,this),t.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),t.setAttribute("alignment-baseline",this.textBaseline),t.setAttribute("x",String(this.x)),t.setAttribute("y",String(this.y)),t.textContent=this.text;else for(const i of this.text){const n=Pn("tspan");BK(n,{fontSize:i.fontSize??this.fontSize,fontFamily:i.fontFamily??this.fontFamily,fontWeight:i.fontWeight??this.fontWeight,fontStyle:i.fontStyle??this.fontStyle}),this.applySvgFillAttributes(n),n.textContent=i.text,t.append(n)}return{elements:[t]}}};Jr.className="Text";Jr.debug=Ct.create(!0,"scene:text");Jr.defaultFontSize=10;E([Le()],Jr.prototype,"x",2);E([Le()],Jr.prototype,"y",2);E([xE({changeCb:e=>e.onTextChange()})],Jr.prototype,"text",2);E([Le({changeCb:e=>{e.fontCache=void 0}})],Jr.prototype,"fontStyle",2);E([Le({changeCb:e=>{e.fontCache=void 0}})],Jr.prototype,"fontWeight",2);E([Le({changeCb:e=>{e.fontCache=void 0}})],Jr.prototype,"fontSize",2);E([Le({changeCb:e=>{e.fontCache=void 0}})],Jr.prototype,"fontFamily",2);E([Le()],Jr.prototype,"textAlign",2);E([Le()],Jr.prototype,"textBaseline",2);E([Le()],Jr.prototype,"lineHeight",2);var ba=Jr,Cee=class extends kS(ba){},Zb=class extends kS(TS(ba)){},xee={};Vu(xee,{BASE_FONT_SIZE:()=>Td,CARTESIAN_AXIS_TYPE:()=>Dee,CARTESIAN_POSITION:()=>wee,FONT_SIZE:()=>_G,FONT_SIZE_RATIO:()=>rc,POLAR_AXIS_SHAPE:()=>Aee,POLAR_AXIS_TYPE:()=>Mee});var _G=(e=>(e[e.SMALLEST=8]="SMALLEST",e[e.SMALLER=10]="SMALLER",e[e.SMALL=12]="SMALL",e[e.MEDIUM=13]="MEDIUM",e[e.LARGE=14]="LARGE",e[e.LARGEST=17]="LARGEST",e))(_G||{}),Td=12,rc={SMALLEST:8/Td,SMALLER:10/Td,SMALL:12/Td,MEDIUM:13/Td,LARGE:14/Td,LARGEST:17/Td},wee=(e=>(e.TOP="top",e.TOP_RIGHT="top-right",e.TOP_LEFT="top-left",e.RIGHT="right",e.RIGHT_TOP="right-top",e.RIGHT_BOTTOM="right-bottom",e.BOTTOM="bottom",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e.LEFT="left",e.LEFT_TOP="left-top",e.LEFT_BOTTOM="left-bottom",e))(wee||{}),Dee=(e=>(e.CATEGORY="category",e.GROUPED_CATEGORY="grouped-category",e.ORDINAL_TIME="ordinal-time",e.UNIT_TIME="unit-time",e.TIME="time",e.NUMBER="number",e.LOG="log",e))(Dee||{}),Mee=(e=>(e.ANGLE_CATEGORY="angle-category",e.ANGLE_NUMBER="angle-number",e.RADIUS_CATEGORY="radius-category",e.RADIUS_NUMBER="radius-number",e))(Mee||{}),Aee=(e=>(e.CIRCLE="circle",e.POLYGON="polygon",e))(Aee||{}),en=class extends pt{constructor(){super(...arguments),this.id=To(this),this.node=new Cee({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(t,i){return t.eventsHub.on("layout:complete",()=>this.updateA11yText(t,i))}computeTextWrap(t,i){const{text:n,padding:s,wrapping:o}=this,r=Math.min(this.maxWidth??1/0,t)-s*2,a=this.maxHeight??i-s*2,l={maxWidth:r,maxHeight:a,font:this,textWrap:o};if(!Number.isFinite(r)&&!Number.isFinite(a)){this.node.text=n;return}let c;ft(n)?(c=VJ(n,l),this.truncated=c.some(zJ)):(c=Xp(n??"",l),this.truncated=Z0(c)),this.node.text=c}updateA11yText(t,i){const{proxyInteractionService:n}=t;if(this.enabled&&this.text){const s=vn.toCanvas(this.node);if(s){const{id:o}=this;this.proxyText??(this.proxyText=n.createProxyElement({type:"text",domManagerId:o,where:i})),this.proxyText.textContent=Gt(this.text),this.proxyText.setBounds(s),this.proxyText.addListener("mousemove",r=>this.handleMouseMove(t,r)),this.proxyText.addListener("mouseleave",r=>this.handleMouseLeave(t,r))}}else this.proxyText?.destroy(),this.proxyText=void 0}handleMouseMove(t,i){if(i!=null&&this.enabled&&this.truncated){const{x:n,y:s}=vn.toCanvas(this.node),o=i.sourceEvent.offsetX+n,r=i.sourceEvent.offsetY+s;t.tooltipManager.updateTooltip(this.id,{canvasX:o,canvasY:r,showArrow:!1},[{type:"structured",title:Gt(this.text)}])}}handleMouseLeave(t,i){t.tooltipManager.removeTooltip(this.id)}};en.SMALL_PADDING=10;E([F,_n("node","visible")],en.prototype,"enabled",2);E([F,_n("node")],en.prototype,"text",2);E([F,_n("node")],en.prototype,"textAlign",2);E([F,_n("node")],en.prototype,"fontStyle",2);E([F,_n("node")],en.prototype,"fontWeight",2);E([F,_n("node")],en.prototype,"fontSize",2);E([F,_n("node")],en.prototype,"fontFamily",2);E([F,_n("node","fill")],en.prototype,"color",2);E([F],en.prototype,"spacing",2);E([F],en.prototype,"maxWidth",2);E([F],en.prototype,"maxHeight",2);E([F],en.prototype,"wrapping",2);E([F],en.prototype,"padding",2);E([F],en.prototype,"layoutStyle",2);var TE=(e=>(e.X="x",e.Y="y",e.Angle="angle",e.Radius="radius",e))(TE||{});function Q0e(e){switch(e){case"x":case"y":case"angle":case"radius":return!0;default:return!1}}var IE=class{constructor(){this.title=new en,this.subtitle=new en,this.footnote=new en}positionCaptions(e){const{title:t,subtitle:i,footnote:n}=this,s=e.layoutBox.height/10;t.enabled&&(this.positionCaption("top",t,e.layoutBox,s),this.shrinkLayoutByCaption("top",t,e.layoutBox)),i.enabled&&(this.positionCaption("top",i,e.layoutBox,s),this.shrinkLayoutByCaption("top",i,e.layoutBox)),n.enabled&&(this.positionCaption("bottom",n,e.layoutBox,s),this.shrinkLayoutByCaption("bottom",n,e.layoutBox))}positionAbsoluteCaptions(e){const{title:t,subtitle:i,footnote:n}=this,{rect:s}=e.series;for(const o of[t,i,n])if(o.layoutStyle==="overlay"){if(o.textAlign==="left")o.node.x=s.x+o.padding;else if(o.textAlign==="right"){const r=o.node.getBBox();o.node.x=s.x+s.width-r.width-o.padding}}}computeX(e,t){return e==="left"?t.x:e==="right"?t.x+t.width:t.x+t.width/2}positionCaption(e,t,i,n){if(!t.text)return;const{lineMetrics:s}=ft(t.text)?Da(t.text,t):ei(t).measureLines(t.text),o=Math.max(s[0].height,n);t.node.x=this.computeX(t.textAlign,i)+t.padding,t.node.y=i.y+(e==="top"?0:i.height)+t.padding,t.node.textBaseline=e,t.computeTextWrap(i.width,o)}shrinkLayoutByCaption(e,t,i){if(t.layoutStyle==="block"){const n=t.node.getBBox().clone(),{spacing:s=0}=t;e==="bottom"&&ft(t.text)&&(n.y-=n.height),i.shrink(Math.ceil(e==="top"?n.y-i.y+n.height+s:i.y+i.height-n.y+s),e)}}};E([F],IE.prototype,"title",2);E([F],IE.prototype,"subtitle",2);E([F],IE.prototype,"footnote",2);var J0e=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],eDe=class{constructor(e){this.chartService=e,this.mementoOriginatorKey="chartType"}createMemento(){let e=this.chartService.publicApi?.getOptions()?.chartType;return e??(e="candlestick"),e}guardMemento(e){return e==null||J0e.includes(e)}restoreMemento(e,t,i){if(i==null)return;const n={chartType:i};this.chartService.publicApi?.updateDelta(n).catch(s=>fe.error("error restoring state",s))}},qb="12.3.1",WK=Symbol("previous-memento-not-found"),tDe=class{constructor(e){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=Ct.create(!0,"history"),this.cleanup=new _i,this.cleanup.register(e.on("series:undo",this.undo.bind(this)),e.on("series:redo",this.redo.bind(this)))}destroy(){this.cleanup.flush()}addMementoOriginator(e){this.originators.set(e.mementoOriginatorKey,e),this.clearState.set(e.mementoOriginatorKey,e.createMemento()),this.debugEvent("History add originator:",e.mementoOriginatorKey)}clear(){this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1;for(const[e,t]of this.originators.entries())this.clearState.set(e,t.createMemento())}record(e,...t){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));const i=new Map;for(const n of t){if(!this.originators.has(n.mementoOriginatorKey))throw new Error(`Originator [${n.mementoOriginatorKey}] has not been added to the HistoryManager.`);i.set(n.mementoOriginatorKey,n.createMemento())}this.history.push({label:e,mementos:i}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${e}]`)}undo(){const e=this.history[this.historyIndex];if(e){for(const t of e.mementos.keys()){const i=this.findPreviousMemento(t);if(i===WK)throw new Error(`Could not find previous memento for [${t}].`);this.restoreMemento(t,i)}this.historyIndex-=1,this.debugEvent(`History undo: [${e.label}]`)}}redo(){const e=this.history[this.historyIndex+1];if(e){for(const[t,i]of e.mementos.entries())this.restoreMemento(t,i);this.historyIndex+=1,this.debugEvent(`History redo: [${e.label}]`)}}findPreviousMemento(e){for(let t=this.historyIndex-1;t>=0;t--)if(this.history[t].mementos.has(e))return this.history[t].mementos.get(e);return this.clearState.has(e)?this.clearState.get(e):WK}restoreMemento(e,t){this.originators.get(e)?.restoreMemento(qb,qb,t)}debugEvent(...e){this.debug(...e,this.history.map((t,i)=>i===this.historyIndex?`** ${t.label} **`:t.label))}},kee=class YB{constructor(t){this.version=t.split("-")[0]}save(...t){const i={version:this.version};for(const n of Object.values(t))i[n.mementoOriginatorKey]=this.encode(n,n.createMemento());return i}restore(t,...i){if(typeof t!="object"){fe.warnOnce(`Could not restore data of type [${typeof t}], expecting an object, ignoring.`);return}if(t==null){fe.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");return}if(!("version"in t)||typeof t.version!="string"){fe.warnOnce("Could not restore data, missing [version] string in object, ignoring.");return}for(const n of i){const s=this.decode(n,t[n.mementoOriginatorKey]),o=[];if(!n.guardMemento(s,o)){const r=o.length>0?`

${o.join(`

`)}

`:"";fe.warnOnce(`Could not restore [${n.mementoOriginatorKey}] data, value was invalid, ignoring.${r}`,s);return}n.restoreMemento(this.version,t.version,s)}}encode(t,i){try{return JSON.parse(JSON.stringify(i,YB.encodeTypes))}catch(n){throw new Error(`Failed to encode [${t.mementoOriginatorKey}] value [${n}].`,{cause:n})}}decode(t,i){if(i==null)return i;try{return JSON.parse(JSON.stringify(i),YB.decodeTypes)}catch(n){throw new Error(`Failed to decode [${t.mementoOriginatorKey}] value [${n}].`,{cause:n})}}static encodeTypes(t,i){return gc(this[t])?{__type:"date",value:this[t].toISOString()}:i}static decodeTypes(t,i){return St(this[t])&&"__type"in this[t]&&this[t].__type==="date"?new Date(this[t].value):i}},iDe=class{constructor(){this.caretaker=new kee(qb),this.state=new Map}setState(e,t){yr(this.state.get(e.mementoOriginatorKey),t)||this.setStateAndRestore(e,t)}setStateAndRestore(e,t){this.state.set(e.mementoOriginatorKey,t),this.restoreState(e)}restoreState(e){const{caretaker:t,state:i}=this;if(!i.has(e.mementoOriginatorKey))return;const n=i.get(e.mementoOriginatorKey);t.restore({version:t.version,[e.mementoOriginatorKey]:n},e)}},nDe=`.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{--align-items: center;--justify-content: center;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ag-charts-wrapper--safe-horizontal{--justify-content: flex-start}.ag-charts-wrapper--safe-vertical{--align-items: flex-start}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--align-items);justify-content:var(--justify-content)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none;-webkit-user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{pointer-events:none}.ag-charts-canvas canvas{display:block}.ag-charts-series-area{outline:none;pointer-events:auto;position:absolute}.ag-charts-swapchain{top:0;left:0;outline:none;opacity:0;pointer-events:none;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none;-webkit-user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-accent-color: #2196f3;--ag-charts-background-color: #fff;--ag-charts-border-color: #dddddd;--ag-charts-border-radius: 4px;--ag-charts-chart-background-color: #fff;--ag-charts-chart-padding: 20px;--ag-charts-focus-shadow: 0 0 0 3px #2196f3;--ag-charts-foreground-color: #181d1f;--ag-charts-font-family: Verdana, sans-serif;--ag-charts-font-size: 12px;--ag-charts-font-weight: 400;--ag-charts-popup-shadow: 0 0 16px rgba(0, 0, 0, .15);--ag-charts-subtle-text-color: #8c8c8c;--ag-charts-text-color: #181d1f;--ag-charts-chrome-background-color: #fafafa;--ag-charts-chrome-font-family: Verdana, sans-serif;--ag-charts-chrome-font-size: 12px;--ag-charts-chrome-font-weight: 400;--ag-charts-chrome-subtle-text-color: #8c8c8c;--ag-charts-chrome-text-color: #181d1f;--ag-charts-button-background-color: #fff;--ag-charts-button-border: 1px solid #dddddd;--ag-charts-button-font-weight: normal;--ag-charts-button-text-color: inherit;--ag-charts-input-background-color: #fff;--ag-charts-input-border: 1px solid #dddddd;--ag-charts-input-text-color: #181d1f;--ag-charts-menu-background-color: #fafafa;--ag-charts-menu-border: 1px solid #dddddd;--ag-charts-menu-text-color: #181d1f;--ag-charts-panel-background-color: #fafafa;--ag-charts-panel-text-color: #181d1f;--ag-charts-tooltip-background-color: #fafafa;--ag-charts-tooltip-border: 1px solid #dddddd;--ag-charts-tooltip-text-color: #181d1f;--ag-charts-tooltip-subtle-text-color: #8c8c8c;--ag-charts-crosshair-label-background-color: #fafafa;--ag-charts-crosshair-label-text-color: #181d1f;--ag-charts-spacing: 4px;--ag-charts-icon-size: 16px;--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 12%);--ag-charts-input-border-radius: var(--ag-charts-border-radius);--ag-charts-input-focus-border-color: var(--ag-charts-accent-color);--ag-charts-input-focus-text-color: var(--ag-charts-accent-color);--ag-charts-input-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-input-disabled-border-color: var(--ag-charts-border-color);--ag-charts-input-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-input-text-color) 50% );--ag-charts-input-placeholder-text-color: color-mix( in srgb, var(--ag-charts-input-background-color), var(--ag-charts-input-text-color) 60% );--ag-charts-button-border-radius: var(--ag-charts-border-radius);--ag-charts-button-focus-background-color: color-mix( in srgb, var(--ag-charts-button-background-color), var(--ag-charts-accent-color) 12% );--ag-charts-button-focus-border-color: var(--ag-charts-accent-color);--ag-charts-button-focus-text-color: var(--ag-charts-accent-color);--ag-charts-button-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-button-disabled-border-color: var(--ag-charts-border-color);--ag-charts-button-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-chrome-text-color) 50% );--ag-charts-checkbox-background-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 35% );--ag-charts-checkbox-checked-background-color: var(--ag-charts-accent-color);--ag-charts-tooltip-border-radius: var(--ag-charts-border-radius);--ag-charts-menu-border-radius: var(--ag-charts-border-radius);--ag-charts-chrome-font-size-small: var(--ag-charts-chrome-font-size);--ag-charts-chrome-font-size-medium: calc(var(--ag-charts-chrome-font-size) * (13 / 12));--ag-charts-chrome-font-size-large: calc(var(--ag-charts-chrome-font-size) * (14 / 12));--ag-charts-border: 1px solid var(--ag-charts-border-color);--ag-charts-focus-border: 1px solid var(--ag-charts-accent-color);--ag-charts-focus-border-shadow: 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%);--ag-charts-layer-menu: 6;--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1}.ag-charts-theme-default-dark{--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 22%)}.ag-chart-canvas-wrapper .ag-charts-theme-default{--ag-charts-border-radius: var(--ag-border-radius, 4px);--ag-charts-border: var(--ag-borders-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-focus-shadow: var(--ag-focus-shadow, 0 0 0 3px var(--ag-charts-accent-color));--ag-charts-focus-border-shadow: var( --ag-focus-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%) )}.ag-charts-icon{display:block;width:20px;height:20px;speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-trend-based-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJtNC45OTYgMTIuNjc0IDMuMjkxLTUuNzQzLjg2OC40OTctMy4yOTEgNS43NDN6Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4zNTEiIGN5PSIxNC41IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTggNmgtN1Y1aDd6bTAgNC41aC03di0xaDd6bTAgNC41SDZ2LTFoMTJ6Ii8+PC9zdmc+)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-chevron-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03LjQ3IDUuNDdhLjc1Ljc1IDAgMCAxIDEuMDYgMGw0IDRhLjc1Ljc1IDAgMCAxIDAgMS4wNmwtNCA0YS43NS43NSAwIDAgMS0xLjA2LTEuMDZMMTAuOTQgMTAgNy40NyA2LjUzYS43NS43NSAwIDAgMSAwLTEuMDYiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;--input-padding: calc(var(--ag-charts-spacing) * 2);--input-padding-large: calc(var(--ag-charts-spacing) * 2.5);color:var(--ag-charts-input-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);transition-duration:.25s;transition-property:none;transition-timing-function:ease-out}.ag-charts-input:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-button-background-color);border:var(--ag-charts-button-border);border-radius:var(--ag-charts-button-border-radius);color:var(--ag-charts-button-text-color);cursor:pointer;padding:var(--input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-focus-color)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{--checkbox-transition-duration: .1s;appearance:none;background:var(--ag-charts-checkbox-background-color);border-radius:calc(var(--ag-charts-border-radius) * 9);cursor:pointer;height:18px;margin:0;transition-duration:var(--checkbox-transition-duration);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:calc(var(--ag-charts-border-radius) * 7);content:" ";height:14px;margin:2px;transition-duration:var(--checkbox-transition-duration);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-checkbox-checked-background-color)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:var(--ag-charts-input-border);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--textarea-line-height: 1.38;background:var(--ag-charts-input-background-color);border:var(--ag-charts-input-border);border-radius:var(--ag-charts-input-border-radius);line-height:var(--textarea-line-height);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);padding:var(--input-padding-large) var(--input-padding)}.ag-charts-textarea::placeholder{color:var(--ag-charts-input-placeholder-text-color)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-legend-toolbar{pointer-events:auto}.ag-charts-proxy-legend-toolbar>div[role=listitem]{pointer-events:none}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;-webkit-user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:solid 1px var(--ag-charts-chrome-background-color);box-shadow:var(--ag-charts-focus-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;overflow:visible}.ag-charts-focus-svg-outer-path{stroke:var(--ag-charts-chrome-background-color);stroke-width:4px}.ag-charts-focus-svg-inner-path{stroke:var(--ag-charts-accent-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{--tooltip-arrow-size: 8px;--tooltip-row-spacing: 8px;--tooltip-column-spacing: 16px;position:fixed;inset:unset;margin:0;padding:0;overflow:visible;top:var(--top, 0px);left:var(--left, 0px);width:max-content;max-width:100%;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);color:var(--ag-charts-tooltip-text-color);background:var(--ag-charts-tooltip-background-color);border:var(--ag-charts-tooltip-border);border-radius:var(--ag-charts-tooltip-border-radius);box-shadow:var(--ag-charts-popup-shadow)}.ag-charts-tooltip--compact .ag-charts-tooltip-content{--tooltip-row-spacing: 2px;--tooltip-column-spacing: 8px;padding:3px 6px}.ag-charts-tooltip--arrow-top:before,.ag-charts-tooltip--arrow-right:before,.ag-charts-tooltip--arrow-bottom:before,.ag-charts-tooltip--arrow-left:before{content:"";position:absolute;display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;border-bottom-color:transparent;border-right-color:transparent;background:inherit;clip-path:polygon(0 0,100% 0,100% 1px,1px 100%,0 100%)}.ag-charts-tooltip--arrow-top:before{bottom:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * .5)) rotate(45deg)}.ag-charts-tooltip--arrow-bottom:before{top:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(225deg)}.ag-charts-tooltip--arrow-left:before{right:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * .5)) rotate(315deg)}.ag-charts-tooltip--arrow-right:before{left:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * -.5)) rotate(135deg)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none;-webkit-user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:8px 12px;gap:var(--tooltip-row-spacing)}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;place-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:var(--tooltip-column-spacing);align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-tooltip-footer{grid-column:1 / -1;color:var(--ag-charts-tooltip-subtle-text-color);text-align:center}.ag-charts-popover{position:absolute;border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);background:var(--ag-charts-panel-background-color);color:var(--ag-charts-chrome-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);box-shadow:var(--ag-charts-popup-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-menu-text-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-focus-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--ag-charts-layer-menu)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-accent-color);background:var(--ag-charts-focus-color);color:var(--ag-charts-accent-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{--toolbar-gap: calc(var(--ag-charts-spacing) * 2);--toolbar-size: 34px;--toolbar-button-padding: 6px;align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-button-border);color:var(--ag-charts-button-text-color);cursor:pointer;display:flex;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-medium);font-weight:var(--ag-charts-chrome-font-weight);justify-content:center;min-height:var(--toolbar-size);min-width:var(--toolbar-size);padding:var(--toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-focus-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-focus-color);border-color:var(--ag-charts-accent-color);color:var(--ag-charts-accent-color);z-index:2}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-button-disabled-background-color);color:var(--ag-charts-button-disabled-text-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{margin:0 0 0 -1px}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-border-radius);border-bottom-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}
`,zG=class{constructor(){this.cleanup=new _i,this.destroyed=!1}destroy(){this.cleanup.flush(),this.destroyed=!0}},sDe=class zT{constructor(t,i,n){this.element=t,this.topTabGuard=i,this.bottomTabGuard=n,this.cleanup=new _i,this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,!1),this.initTabGuard(this.bottomTabGuard,!0),this.element.addEventListener("focus",()=>this.onFocus(),{capture:!0}),this.element.addEventListener("blur",s=>this.onBlur(s),{capture:!0})}set tabIndex(t){this.guardTabIndex=t,this.guardTabIndex===0?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){this.cleanup.flush()}initTabGuard(t,i){this.cleanup.register(gi(t,"focus",()=>this.onTab(t,i)))}setGuardIndices(t){const i=t;Pt(this.topTabGuard,"tabindex",i),Pt(this.bottomTabGuard,"tabindex",i)}onFocus(){this.hasFocus=!0,this.guardTabIndex!==0&&this.setGuardIndices(0)}onBlur({relatedTarget:t}){const{topTabGuard:i,bottomTabGuard:n}=this;this.hasFocus=!1,this.guardTabIndex!==0&&t!==i&&t!==n&&this.setGuardIndices(this.guardTabIndex)}onTab(t,i){if(this.guardTabIndex!==0){let n;t.tabIndex===0?(n=this.findExitTarget(!i),this.setGuardIndices(this.guardTabIndex)):n=this.findEnterTarget(i),n?.focus()}}static queryFocusable(t,i){const n=Qt();return Array.from(t.querySelectorAll(i)).filter(s=>{if(s instanceof HTMLElement){const o=n.getComputedStyle(s);return o.display!=="none"&&o.visibility!=="none"}return!1})}findEnterTarget(t){const i=zT.queryFocusable(this.element,'[tabindex="0"]'),n=t?i.length-1:0;return i[n]}findExitTarget(t){const i=zT.queryFocusable(Eu(),"[tabindex]").filter(o=>o.tabIndex>0).sort((o,r)=>o.tabIndex-r.tabIndex),{before:n,after:s}=zT.findBeforeAndAfter(i,this.guardTabIndex);return t?n:s}static findBeforeAndAfter(t,i){let n=0,s=t.length-1,o,r;for(;n<=s;){const a=Math.floor((n+s)/2),l=t[a].tabIndex;if(l===i){o=t[a-1]||void 0,r=t[a+1]||void 0;break}else l<i?(o=t[a],n=a+1):(r=t[a],s=a-1)}return{before:o,after:r}}};function GG(e,t,i=["Escape"]){return gi(e,"keydown",n=>{RE(n,...i)&&t(n)})}function Tee(e,t){const i=gi(Qt(),"mousedown",n=>{[0,2].includes(n.button)&&!Ree(e,n)&&(t(),i())});return i}function Iee(e,t){const i=gi(Qt(),"touchstart",n=>{Array.from(n.targetTouches).some(o=>!Ree(e,o))&&(t(),i())});return i}function Ree(e,t){return t.target instanceof Element&&t.target.shadowRoot!=null?!0:t.target instanceof Node&&e.contains(t.target)}function Eee(e,t,i){const n=s=>{for(const o of t)Pt(o,"data-focus-visible-override",s)};return n(i),gi(e,"keydown",()=>n(!0),{once:!0})}function J0(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)}function RE(e,...t){return J0(e)&&t.includes(e.key)}function jK(e,t,i){return gi(e,"keydown",n=>{RE(n,i)&&t.focus()})}var fw={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function oDe(e){const{orientation:t,buttons:i,wrapAround:n=!1,onEscape:s,onFocus:o,onBlur:r}=e,{nextKey:a,prevKey:l}=fw[t],c=f=>{if(f.target&&"tabIndex"in f.target){for(const m of i)m.tabIndex=-1;f.target.tabIndex=0}},[u,d]=n?[i.length,i.length]:[0,1/0],p=new _i;for(let f=0;f<i.length;f++){const m=i[(u+f-1)%d],v=i[f],b=i[(u+f+1)%d];p.register(gi(v,"focus",c),o&&gi(v,"focus",o),r&&gi(v,"blur",r),s&&GG(v,s),m&&jK(v,m,l),b&&jK(v,b,a),gi(v,"keydown",C=>{RE(C,a,l)&&C.preventDefault()})),v.tabIndex=f===0?0:-1}return p}function rDe(e,t){return i=>{if(e.ariaDisabled==="true")return i.preventDefault();t(i)}}function VG(e){return"button"in e?e.button===0:J0(e)&&(e.code==="Space"||e.key==="Enter")}function HG(e){if(e?.target instanceof HTMLElement&&"tabindex"in e.target.attributes)return e.target}function Lee(e){return gi(e,"keydown",t=>{if(t.defaultPrevented)return;yb(t.target,"data-preventdefault",!0)&&RE(t,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&t.preventDefault()})}var aDe=class{constructor(e){this.callback=e,this.devicePixelRatio=Qt("devicePixelRatio")??1,this.devicePixelRatioMediaQuery=void 0,this.devicePixelRatioListener=t=>{t.matches||(this.devicePixelRatio=Qt("devicePixelRatio")??1,this.unregisterDevicePixelRatioListener(),this.registerDevicePixelRatioListener(),this.callback(this.pixelRatio))}}get pixelRatio(){return this.devicePixelRatio}observe(){this.registerDevicePixelRatioListener()}disconnect(){this.unregisterDevicePixelRatioListener()}unregisterDevicePixelRatioListener(){this.devicePixelRatioMediaQuery?.removeEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=void 0}registerDevicePixelRatioListener(){const e=Qt("matchMedia")?.(`(resolution: ${this.pixelRatio}dppx)`);e?.addEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=e}},Pee=class{constructor(){this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0;for(const[t,i]of this.queuedObserveRequests)this.observe(t,i);this.queuedObserveRequests=[],this.observeWindow()},typeof ResizeObserver<"u"&&(this.resizeObserver=new ResizeObserver(t=>{for(const{target:i,contentRect:{width:n,height:s}}of t){const o=this.elements.get(i);this.checkSize(o,i,n,s)}}));let e;this.pixelRatioObserver=new aDe(()=>{clearTimeout(e),e=setTimeout(()=>this.checkPixelRatio(),0)}),this.documentReady=Eu("readyState")==="complete",this.documentReady?this.observeWindow():Qt()?.addEventListener("load",this.onLoad)}destroy(){Qt()?.removeEventListener("load",this.onLoad),this.resizeObserver?.disconnect(),this.resizeObserver=void 0,this.pixelRatioObserver?.disconnect(),this.pixelRatioObserver=void 0}observeWindow(){this.pixelRatioObserver?.observe()}checkPixelRatio(){const e=this.pixelRatioObserver?.pixelRatio??1;for(const[t,i]of this.elements)if(i.size!=null&&i.size.pixelRatio!==e){const{width:n,height:s}=i.size;i.size={width:n,height:s,pixelRatio:e},i.cb(i.size,t)}}checkSize(e,t,i,n){if(e&&(i!==e.size?.width||n!==e.size?.height)){const s=this.pixelRatioObserver?.pixelRatio??1;e.size={width:i,height:n,pixelRatio:s},e.cb(e.size,t)}}observe(e,t){if(!this.documentReady){this.queuedObserveRequests.push([e,t]);return}this.elements.has(e)?this.removeFromQueue(e):this.resizeObserver?.observe(e);const i={cb:t};this.elements.set(e,i)}unobserve(e){this.resizeObserver?.unobserve(e),this.elements.delete(e),this.removeFromQueue(e),this.elements.size||this.destroy()}removeFromQueue(e){this.queuedObserveRequests=this.queuedObserveRequests.filter(([t])=>t!==e)}},Qb=class extends Map{constructor(e,t){super(),this.defaultValue=e,this.defaultState=t}set(e,t){return this.delete(e),t!==void 0&&super.set(e,t),delete this.cachedState,delete this.cachedValue,this}delete(e){return delete this.cachedState,delete this.cachedValue,super.delete(e)}stateId(){return this.cachedState??(this.cachedState=Array.from(this.keys()).pop()??this.defaultState),this.cachedState}stateValue(){return this.cachedValue??(this.cachedValue=Array.from(this.values()).pop()??this.defaultValue),this.cachedValue}},lDe='<div class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay ag-charts-tooltip-container"></div></div></div></div>',cDe=["styles","canvas","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area","tooltip-container"],uDe=new Set(["styles","canvas-container","canvas","tooltip-container"]),UK={safeHorizontal:"ag-charts-wrapper--safe-horizontal",safeVertical:"ag-charts-wrapper--safe-vertical"},dDe=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}],["tooltip-container",{childElementType:"div"}]]);function hDe(e,t){if(typeof IntersectionObserver>"u")return;const i=new IntersectionObserver(n=>{for(const s of n)s.target===e&&t(s.intersectionRatio)},{root:e});return i.observe(e),i}var Nee={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON(){return Nee}};function $K(e,t){const i=nt("div");return i.className="ag-charts-tab-guard",e.insertAdjacentElement(t,i),i}var WG=class zf extends zG{constructor(t,i,n,s,o="normal"){super(),this.eventsHub=t,this.chart=i,this.styleContainer=s,this.mode=o,this.anchorName=`--${To(this)}`,this.styles=new Map,this.pendingContainer=void 0,this.container=void 0,this.documentRoot=void 0,this.initiallyConnected=void 0,this.containerSize=void 0,this.sizeMonitor=new Pee,this.cursorState=new Qb("default"),this.minWidth=0,this.minHeight=0,this.element=this.initDOM(),this.rootElements=this.initRootElements(),this.rootElements.canvas.element.style.setProperty("anchor-name",this.anchorName);let r=!1;if(this.observer=hDe(this.element,a=>{a===0&&!r&&this.eventsHub.emit("dom:hidden",null),r=a===0}),this.setSizeOptions(),this.updateContainerSize(),this.addStyles("ag-charts-community",nDe),this.setContainer(n),this.cleanup.register(Lee(this.element)),this.mode==="normal"){const a=this.rootElements["canvas-center"].element;if(a==null)throw new Error("Error initializing tab guards");const l=$K(a,"beforebegin"),c=$K(a,"afterend");this.tabGuards=new sDe(a,l,c)}}initDOM(){if(this.mode==="normal"){const n=nt("div");return n.innerHTML=lDe,n.firstChild}const t=nt("div");t.role="presentation",t.dataset.agCharts="",t.classList.add("ag-charts-wrapper");const i=nt("div");return t.appendChild(i),i.role="presentation",i.classList.add("ag-charts-series-area"),t}initRootElements(){const{mode:t,element:i}=this,n={};for(const s of cDe){const o=`ag-charts-${s}`;let r;if(t==="normal"?r=i.classList.contains(o)?i:i.getElementsByClassName(o)[0]:uDe.has(s)?r=i:r=i.getElementsByClassName(o)[0]??nt("div"),r==null)throw new Error(`AG Charts - unable to find DOM element ${o}`);n[s]={element:r,children:new Map,listeners:[]}}return n}destroy(){super.destroy(),this.observer?.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),this.pendingContainer=void 0;for(const t of Object.values(this.rootElements)){for(const i of t.children.values())i.remove();t.element.remove()}this.element.remove()}postRenderUpdate(){this.mode!=="minimal"&&(this.pendingContainer==null||this.pendingContainer===this.container||(zf.batchedUpdateContainer.length===0&&Qt().setTimeout(this.applyBatchedUpdateContainer.bind(this),0),zf.batchedUpdateContainer.push(this)))}applyBatchedUpdateContainer(){for(const t of zf.batchedUpdateContainer)t.destroyed||t.updateContainer();zf.batchedUpdateContainer.splice(0)}setSizeOptions(t=300,i=300,n,s){const{style:o}=this.element;o.width=`${n??t}px`,o.height=`${s??i}px`,this.minWidth=n??t,this.minHeight=s??i,this.updateContainerClassName()}updateContainerSize(){const{style:t}=this.rootElements["canvas-center"].element;t.visibility=this.containerSize==null?"hidden":"",this.containerSize?(t.width=`${this.containerSize.width??0}px`,t.height=`${this.containerSize.height??0}px`):(t.width="",t.height=""),this.updateContainerClassName()}setTabGuardIndex(t){this.tabGuards&&(this.tabGuards.tabIndex=t)}setContainer(t){t!==this.container&&(this.pendingContainer=t,(this.mode==="minimal"||this.container==null)&&this.updateContainer())}updateContainer(){const{pendingContainer:t}=this;if(!(t==null||t===this.container)){if(this.container&&(this.element.remove(),this.sizeMonitor.unobserve(this.container)),this.documentRoot!=null)for(const i of this.rootElements.styles.children.keys())this.removeChild("styles",i);this.container=t,this.pendingContainer=void 0,this.documentRoot=this.getShadowDocumentRoot(t),this.initiallyConnected=t.isConnected;for(const[i,n]of this.styles)this.addStyles(i,n);t.appendChild(this.element),this.sizeMonitor.observe(t,i=>{this.containerSize=i,this.updateContainerSize(),this.eventsHub.emit("dom:resize",null)}),this.eventsHub.emit("dom:container-change",null)}}setThemeClass(t){const i="ag-charts-theme-";for(const n of Array.from(this.element.classList))n.startsWith(i)&&n!==t&&this.element.classList.remove(n);this.element.classList.add(t)}setThemeParameters(t){for(const[i,n]of Ji(t)){let s=`${n}`;i.endsWith("Size")||i.endsWith("Radius")?s=`${n}px`:i.endsWith("Border")&&typeof n=="boolean"&&(s=n?"var(--ag-charts-border)":"none"),this.element.style.setProperty(`--ag-charts-${ewe(i)}`,s)}}updateCanvasLabel(t){Pt(this.rootElements["canvas-proxy"].element,"aria-label",t)}getEventElement(t,i){return["focus","blur","keydown","keyup"].includes(i)?this.rootElements["series-area"].element:t}addEventListener(t,i,n){const s=this.getEventElement(this.element,t);return gi(s,t,i,n)}removeEventListener(t,i,n){this.getEventElement(this.element,t).removeEventListener(t,i,n)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){const t=Qt(),i=new He(0,0,t.innerWidth,t.innerHeight),n=this.getRawOverlayClientRect();return i.intersection(n)?.toDOMRect()??Nee}getRawOverlayClientRect(){let t=this.element;const i=this.element.getRootNode()?.fullscreenElement;for(;t!=null;){let o;if(i!=null&&t===i)o=!0;else{const a=t.computedStyleMap?.()?.get("overflow-y")?.toString();o=a==="auto"||a==="scroll"}if(o)return He.fromObject(t.getBoundingClientRect());t=t.parentElement}if(this.documentRoot!=null)return He.fromObject(this.documentRoot.getBoundingClientRect());const{innerWidth:n,innerHeight:s}=Qt();return new He(0,0,n,s)}getShadowDocumentRoot(t=this.container){const i=t?.ownerDocument?.body??Eu("body");for(;t!=null;){if(t===i)return;if(t.parentNode instanceof DocumentFragment)return t;t=t.parentNode}}getParent(t){return this.rootElements[t].element}getChildBoundingClientRect(t){const{children:i}=this.rootElements[t],n=[];for(const s of i.values())n.push(He.fromObject(s.getBoundingClientRect()));return He.merge(n)}isManagedChildDOMElement(t,i,n){const{children:s}=this.rootElements[i],o=s?.get(n);return o!=null&&t.contains(o)}contains(t,i){return i==null?this.element.contains(t):this.rootElements[i].element.contains(t)}addStyles(t,i){const n="data-ag-charts";if(this.styles.set(t,i),this.container==null)return;const s=a=>a.getAttribute(n)===t,o=a=>{const l=new Set(["TITLE","META"]);let c=!0,u;for(const p of a.children){if(c&&l.has(p.tagName)){u=p;continue}if(c=!1,s(p))return;p.hasAttribute(n)&&(u=p)}const d=nt("style");return this.chart.styleNonce!=null&&(d.nonce=this.chart.styleNonce),u==null?a.prepend(d):a.insertBefore(d,u.nextSibling),d};let r;this.styleContainer?r=o(this.styleContainer):this.initiallyConnected===!1?r=this.addChild("styles",t):this.documentRoot==null&&!zf.headStyles.has(t)?(r=o(Eu("head")),zf.headStyles.add(t)):this.documentRoot!=null&&(r=this.addChild("styles",t)),!(r==null||s(r))&&(r.setAttribute(n,t),r.innerHTML=i)}removeStyles(t){this.removeChild("styles",t)}updateCursor(t,i){this.cursorState.set(t,i),this.element.style.cursor=this.cursorState.stateValue()}getCursor(){return this.element.style.cursor}addChild(t,i,n,s){const{element:o,children:r,listeners:a}=this.rootElements[t];if(!r)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(r.has(i))return r.get(i);const{childElementType:l="div"}=dDe.get(t)??{};if(n&&n.tagName.toLowerCase()!==l.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");const c=n??nt(l);for(const[u,d,p]of a)c.addEventListener(u,d,p);if(r.set(i,c),l==="style"&&this.chart.styleNonce!=null&&(c.nonce=this.chart.styleNonce),s){const u=o.querySelector(s.query);if(u==null)throw new Error(`AG Charts - addChild query failed ${s.query}`);u.insertAdjacentElement(s.where,c)}else o?.appendChild(c);return c}removeChild(t,i){const{children:n}=this.rootElements[t];n&&(n.get(i)?.remove(),n.delete(i))}incrementDataCounter(t){const{dataset:i}=this.element;i[t]??(i[t]="0"),i[t]=String(Number(i[t])+1)}setDataBoolean(t,i){this.element.dataset[t]=String(i)}setDataNumber(t,i){this.element.dataset[t]=String(i)}updateContainerClassName(){const{element:t,containerSize:i,minWidth:n,minHeight:s}=this;t.classList.toggle(UK.safeHorizontal,n>=(i?.width??1/0)),t.classList.toggle(UK.safeVertical,s>=(i?.height??1/0))}};WG.batchedUpdateContainer=[];WG.headStyles=new Set;var Oee=WG,pDe=class extends Hu{constructor(){super(nt("div")),this.textElement=Pn("text"),this.textElement.role="presentation",this.svgElement=Pn("svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(e){this.textElement.textContent=e;const i=this.textElement.getBBox?.();i&&this.svgElement.setAttribute("viewBox",`${i.x} ${i.y} ${i.width} ${i.height}`)}get textContent(){return this.textElement.textContent}destructor(){}},gDe=class{constructor(e,t){this.getDispatcher=t,this.onExpanded=()=>{this.controller.setAriaExpanded(!0);const i=this.getDispatcher();if(i&&this.controls){const n={type:"expand-controlled-widget",controlled:this.controls};i.dispatch("expand-controlled-widget",this.controller,n)}},this.onCollapsed=i=>{this.controller.setAriaExpanded(!1),i.mode==="0"&&this.controller.focus()},e.setAriaExpanded(!1),this.controller=e}destroy(){this.controls?.collapse({mode:"2"}),this.setControlled(void 0)}setControlled(e){this.controls&&(this.controls.removeListener("expand-widget",this.onExpanded),this.controls.removeListener("collapse-widget",this.onCollapsed)),this.controls=e,this.controls&&(this.controller.setAriaControls(this.controls.id),this.controls.addListener("expand-widget",this.onExpanded),this.controls.addListener("collapse-widget",this.onCollapsed))}getControlled(){return this.controls}expandControlled(e){this.controller.isDisabled()||this.controls?.expand({controller:this.controller,sourceEvent:void 0,overrideFocusVisible:e?.overrideFocusVisible})}},jG=class extends Hu{constructor(e,t){super(e),Pt(this.elem,"role",t),this.setEnabled(!0),this.addListener("keydown",({sourceEvent:i})=>{VG(i)&&(i.preventDefault(),this.htmlListener?.dispatch("click",this,{type:"click",device:"keyboard",sourceEvent:i}))})}lazyControllerImpl(){return this.controllerImpl??(this.controllerImpl=new gDe(this,()=>this.internalListener)),this.controllerImpl}destructor(){this.controllerImpl?.destroy()}setEnabled(e){Pt(this.elem,"aria-disabled",!e)}setControlled(e){return this.lazyControllerImpl().setControlled(e)}getControlled(){return this.lazyControllerImpl().getControlled()}expandControlled(e){return this.lazyControllerImpl().expandControlled(e)}addListener(e,t){return super.addListener(e,(i,n)=>{(e==="click"||e==="dblclick")&&this.isDisabled()||t(i,n)})}},eD=class extends jG{constructor(){super(nt("button"))}},fDe=class extends Hu{constructor(){super(nt("div")),Pt(this.elem,"role","group")}destructor(){}},UG=class extends Hu{constructor(e,t){super(nt("div")),this.focusedChildIndex=0,this.onChildFocus=(i,n)=>{const s=this.children[this.focusedChildIndex];this.focusedChildIndex=n.index,s?.setTabIndex(-1),n.setTabIndex(0)},this.onChildKeyDown=(i,n)=>{const s=this.orientation,[o,r]=s==="both"?[fw.horizontal,fw.vertical]:[fw[s],void 0];let a=-1;if(J0(i.sourceEvent)){const l=i.sourceEvent.key;l===o.nextKey||l===r?.nextKey?a=n.index+1:(l===o.prevKey||l===r?.prevKey)&&(a=n.index-1)}this.children[a]?.focus()},Pt(this.elem,"role",t),this.orientation=e}get orientation(){return yb(this.elem,"aria-orientation")??"both"}set orientation(e){Pt(this.elem,"aria-orientation",e==="both"?void 0:e)}focus(){this.children[this.focusedChildIndex]?.focus()}clear(){this.focusedChildIndex=0;for(const e of this.children)this.removeChildListeners(e),e.parent=void 0;this.elem.textContent="",this.children.length=0}addChildListeners(e){e.addListener("focus",this.onChildFocus),e.addListener("keydown",this.onChildKeyDown)}removeChildListeners(e){e.removeListener("focus",this.onChildFocus),e.removeListener("keydown",this.onChildKeyDown)}onChildAdded(e){this.addChildListeners(e),e.setTabIndex(this.children.length===1?0:-1)}onChildRemoved(e){this.removeChildListeners(e);const{focusedChildIndex:t,children:i}=this,n=t===e.index;for(let s=0;s<i.length;s++){const o=i[s];o.index===t&&(this.focusedChildIndex=s),o.index=s}if(n){const s=i[t]??i[t-1];s?(this.focusedChildIndex=s.index,s.setTabIndex(0)):this.focusedChildIndex=0}}},mDe=class extends UG{constructor(){super("both","list"),this.setHidden(!0)}destructor(){for(const e of this.children)e.getElement().parentElement.remove()}addChildToDOM(e,t){const i=nt("div");Pt(i,"role","listitem"),vu(i,"position","absolute"),Hu.setElementContainer(e,i),this.appendOrInsert(i,t),this.setHidden(!1)}removeChildFromDOM(e){e.getElement().parentElement.remove(),this.setHidden(this.children.length===0)}setHidden(e){this.children.length===0&&(e=!0),super.setHidden(e)}},Jb=class extends Hu{constructor(t){super(t)}destructor(){}},yDe=new Intl.NumberFormat("en-US",{style:"percent"});function eS(e,t=2){return typeof e=="number"?Bee(e,t):typeof e=="string"?e:String(e??"")}function Fee(e){return yDe.format(e)}var KK=new Map().set(2,new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}));function Bee(e,t){let i=KK.get(t);return i||(i=new Intl.NumberFormat("en-US",{maximumFractionDigits:t,useGrouping:!1}),KK.set(t,i)),i.format(e)}var $G=class Zx extends Hu{constructor(){super(nt("input")),this._step=Zx.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(t){this._step=t,this.getElement().step=t.attributeValue}get keyboardStep(){return this._keyboardStep?.step??this._step}set keyboardStep(t){if(t!==this._keyboardStep?.step&&(this._keyboardStep!==void 0&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),t!==void 0)){const i=()=>this.getElement().step=t.attributeValue,n=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:t,onKeyDown:i,onKeyUp:n,onBlur:n},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){return yb(this.elem,"aria-orientation")??"both"}set orientation(t){Pt(this.elem,"aria-orientation",t==="both"?void 0:t),Zx.registerDefaultPreventers(this,t)}destructor(){}clampValueRatio(t,i){const n=this.getValueRatio(),s=Je(t,n,i);return s!==n&&this.setValueRatio(s),s}setValueRatio(t,i){const{divider:n}=this.step,s=Math.round(t*1e4)/n,{ariaValueText:o=Fee(s/n)}=i??{},r=this.getElement();r.value=`${s}`,r.ariaValueText=o}getValueRatio(){return this.getElement().valueAsNumber/this.step.divider}static registerDefaultPreventers(t,i){i==="both"?t.removeListener("keydown",Zx.onKeyDown):t.addListener("keydown",Zx.onKeyDown)}static onKeyDown(t,i){let n=[];const{orientation:s}=i;s==="horizontal"?n=["ArrowUp","ArrowDown"]:s==="vertical"&&(n=["ArrowLeft","ArrowRight"]),n.includes(t.sourceEvent.code)&&t.sourceEvent.preventDefault()}};$G.STEP_ONE={attributeValue:"1",divider:1};$G.STEP_HUNDRETH={attributeValue:"0.01",divider:100};var KG=$G,vDe=class extends eD{constructor(){super(),Pt(this.elem,"role","switch"),this.setChecked(!1)}setChecked(e){Pt(this.elem,"aria-checked",e)}},EE=class extends UG{constructor(e="horizontal"){super(e,"toolbar")}destructor(){}};function wv(e,t){return t.params?.type===e}function bDe(e){if(e==="button")return new eD;if(e==="slider")return new KG;if(e==="toolbar")return new EE;if(e==="group")return new fDe;if(e==="list")return new mDe;if(e==="region")return new Jb(nt("div"));if(e==="text")return new pDe;if(e==="listswitch")return new vDe;throw new Error("AG Charts - error allocating meta")}function YK(e){const t={params:e,result:void 0};return t.result=bDe(t.params.type),t}var _ee=class{constructor(e,t,i){this.eventsHub=e,this.localeManager=t,this.domManager=i,this.cleanup=new _i}destroy(){this.cleanup.flush()}addLocalisation(e){e(),this.cleanup.register(this.eventsHub.on("locale:change",e))}createProxyContainer(e){const t=YK(e),{params:i,result:n}=t,s=n.getElement();return this.domManager.addChild("canvas-proxy",i.domManagerId,s),s.classList.add(...i.classList,"ag-charts-proxy-container"),s.role=i.type,wv("toolbar",t)&&(t.result.orientation=t.params.orientation),this.addLocalisation(()=>{s.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),n}createProxyElement(e){const t=YK(e);if(wv("button",t)){const{params:i,result:n}=t,s=n.getElement();if(this.initInteract(i,n),typeof i.textContent=="string")s.textContent=i.textContent;else{const{textContent:o}=i;this.addLocalisation(()=>{s.textContent=this.localeManager.t(o.id,o.params)})}this.setParent(t.params,t.result)}if(wv("slider",t)){const{params:i,result:n}=t,s=n.getElement();this.initInteract(i,n),s.type="range",s.role="presentation",s.style.margin="0px",this.addLocalisation(()=>{s.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),this.setParent(t.params,t.result)}if(wv("text",t)){const{params:i,result:n}=t;this.initElement(i,n),this.setParent(t.params,t.result)}if(wv("listswitch",t)){const{params:i,result:n}=t;this.initInteract(i,n),n.setTextContent(i.textContent),n.setChecked(i.ariaChecked),n.setAriaDescribedBy(i.ariaDescribedBy),this.setParent(t.params,t.result)}if(wv("region",t)){const{params:i,result:n}=t,s=n.getElement();this.initInteract(i,n),s.role="region",this.setParent(t.params,t.result)}return t.result}initElement(e,t){const i=t.getElement();return vu(i,"cursor",e.cursor),i.classList.toggle("ag-charts-proxy-elem",!0),i}initInteract(e,t){const{tabIndex:i,domIndex:n}=e,s=this.initElement(e,t);i!==void 0&&(s.tabIndex=i),n!==void 0&&(t.domIndex=n)}setParent(e,t){if("parent"in e)e.parent?.addChild(t);else{const i={where:e.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",e.domManagerId,t.getElement(),i),t.destroyListener=()=>{this.domManager.removeChild("canvas-proxy",e.domManagerId)}}}},SDe={ariaInitSeriesArea:"interactive chart",ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceStandaloneChart:"chart, ${caption}",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationsToolbar:"Annotations",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColor:"Color",ariaLabelColorPicker:"Color picker",ariaLabelColorPickerAlpha:"Transparency",ariaLabelColorPickerHue:"Hue",ariaLabelColorPickerMultiColor:"Multi Color",ariaLabelColorPickerPalette:"Palette",ariaLabelFinancialCharts:"Financial Charts",ariaLabelGaugeTarget:"Target",ariaLabelGaugeValue:"Value",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaRoleDescription2DSlider:"2D slider",ariaValueColorPalette:"s ${s}[percent0to2dp], v ${v}[percent0to2dp]",ariaValueColorPaletteFirstV:"v ${v}[percent0to2dp], s ${s}[percent0to2dp]",ariaValuePanRange:"${min}[percent0to2dp] to ${max}[percent0to2dp]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsFibonacciRetracementTrendBased:"Fib Trend Based",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",contextMenuResetZoom:"Reset zoom",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}",tooltipPaginationStatus:"${index}[number] of ${count}[number]"},CDe=/\$\{(\w+)}(?:\[(\w+)])?/gi,nF={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),percent0to2dp:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},xDe=({defaultValue:e,variables:t})=>e?.replaceAll(CDe,(i,n,s)=>{const o=t[n],r=s==null?null:nF[s];return s!=null&&r==null&&fe.warnOnce(`Format style [${s}] is not supported`),r!=null?r.format(o):typeof o=="number"?nF.number.format(o):o instanceof Date?nF.datetime.format(o):String(o)}),wDe=class{constructor(e){this.eventsHub=e,this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(e){this.localeText!==e&&(this.localeText=e,this.eventsHub.emit("locale:change",null))}setLocaleTextFormatter(e){this.getLocaleText=e,this.getLocaleText!==e&&(this.getLocaleText=e,this.eventsHub.emit("locale:change",null))}t(e,t={}){const{localeText:i=SDe,getLocaleText:n}=this,s=i[e];return n?.({key:e,defaultValue:s,variables:t})??xDe({defaultValue:s,variables:t})??e}},YG=class{constructor(e){this.enabled=!0,this.width=600,this.height=300;const{width:t,height:i,canvasElement:n,willReadFrequently:s=!1}=e;this.pixelRatio=e.pixelRatio??Qt("devicePixelRatio")??1,this.element=n??nt("canvas"),this.element.style.display="block",this.element.style.width=(t??this.width)+"px",this.element.style.height=(i??this.height)+"px",this.element.width=Math.round((t??this.width)*this.pixelRatio),this.element.height=Math.round((i??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:s}),this.onEnabledChange(),this.resize(t??0,i??0,this.pixelRatio),jJ(this.context)}drawImage(e,t=0,i=0){return e.drawImage(this.context.canvas,t,i)}toDataURL(e){return this.element.toDataURL(e)}resize(e,t,i){if(!(e>0&&t>0))return;const{element:n,context:s}=this;n.width=Math.round(e*i),n.height=Math.round(t*i),s.setTransform(i,0,0,i,0,0),n.style.width=e+"px",n.style.height=t+"px",this.width=e,this.height=t,this.pixelRatio=i}clear(){WJ(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}reset(){this.context.reset(),this.context.verifyDepthZero?.()}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}};E([bg(e=>e.onEnabledChange())],YG.prototype,"enabled",2);var DDe=class extends Dc{constructor(){super(...arguments),this.cache=new Map,this.imageLoadingCount=0}loadImage(e,t){const i=this.cache.get(e);if(i?.image)return i.image;if(i!=null&&t){i.nodes.add(t);return}if(!t)return;const n={image:void 0,nodes:new Set([t])},s=new Image;return this.imageLoadingCount++,s.onload=()=>{n.image=s;for(const o of n.nodes)o.markDirty();n.nodes.clear(),this.imageLoadingCount--,this.emit("image-loaded",{uri:e})},s.onerror=()=>{this.imageLoadingCount--,n.nodes.clear(),this.emit("image-error",{uri:e})},s.src=e,this.cache.set(e,n),n.image}waitingToLoad(){return this.imageLoadingCount>0}destroy(){for(const e of this.cache.values())e.nodes.clear();this.cache.clear()}},MDe=class{constructor(e){this.canvas=e,this.debug=Ct.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(e,t,i){this.canvas.resize(e,t,i);for(const{canvas:n}of this.layersMap.values())n.resize(e,t,i)}addLayer(e){const{width:t,height:i,pixelRatio:n}=this.canvas,{name:s}=e,o=new AG({width:t,height:i,pixelRatio:n});return this.layersMap.set(o,{id:this.nextLayerId++,name:s,canvas:o}),this.debug("Scene.addLayer() - layers",this.layersMap),o}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(const e of this.layersMap.values())e.canvas.destroy();this.layersMap.clear()}},LE=class extends Dc{constructor(e){super(),this.debug=Ct.create(!0,"scene"),this.id=To(this),this.imageLoader=new DDe,this.root=null,this.pendingSize=null,this.isDirty=!1,this.cleanup=new _i,this.updateDebugFlags(),this.canvas=new YG(e),this.layersManager=new MDe(this.canvas),this.cleanup.register(this.imageLoader.on("image-loaded",()=>{this.emit("scene-changed",{})}),this.imageLoader.on("image-error",({uri:t})=>{fe.warnOnce(`Unable to load image ${t}`)}))}waitingForUpdate(){return this.imageLoader?.waitingToLoad()??!1}get width(){return this.pendingSize?.[0]??this.canvas.width}get height(){return this.pendingSize?.[1]??this.canvas.height}get pixelRatio(){return this.pendingSize?.[2]??this.canvas.pixelRatio}setContainer(e){const{element:t}=this.canvas;return t.remove(),e.appendChild(t),this}setRoot(e){return this.root===e?this:(this.isDirty=!0,this.root?.setScene(),this.root=e,e&&(e.visible=!0,e.setScene(this)),this)}updateDebugFlags(){Ct.inDevelopmentMode(()=>oh._debugEnabled=!0)}clearCanvas(){this.canvas.clear()}attachNode(e){return this.appendChild(e),()=>e.remove()}appendChild(e){return this.root?.appendChild(e),this}removeChild(e){return e.remove(),this}download(e,t){Pxe(this.canvas.toDataURL(t),e?.trim()??"image")}getDataURL(e){return this.canvas.toDataURL(e)}resize(e,t,i){return e=Math.round(e),t=Math.round(t),i??(i=this.pixelRatio),e>0&&t>0&&(e!==this.width||t!==this.height||i!==this.pixelRatio)?(this.pendingSize=[e,t,i],this.isDirty=!0,!0):!1}render(e){const{debugSplitTimes:t={start:performance.now()},extraDebugStats:i,seriesRect:n}=e??{},{canvas:s,canvas:{context:o}={},root:r,pendingSize:a,width:l,height:c,pixelRatio:u}=this;if(!o)return;const d=Ct.check("scene:stats","scene:stats:verbose");d&&this.ensureDebugStatsRegistration();const p=performance.now();let f=!1;if(a&&(f=!0,this.layersManager.resize(...a),this.pendingSize=null),r&&!r.visible){this.isDirty=!1;return}let m;if(r instanceof Mt&&(m=r.dirty),r!=null&&m===!1&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{tree:BT(r,"console")}),d&&VK(this.layersManager,t,o,void 0,i,n);return}const v={ctx:o,width:l,height:c,devicePixelRatio:u,debugNodes:{}};Ct.check("scene:stats:verbose")&&(v.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0}),$0e(v);let b=!1;if((m!==!1||f)&&(b=!0,s.clear()),r&&Ct.check("scene:dirtyTree")){const{dirtyTree:C,paths:x}=bee(r);Ct.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:C,paths:x})}if(r&&b){if(r.visible&&r.preRender(v),this.debug.check()){const C=BT(r,"console");this.debug("Scene.render() - before",{canvasCleared:b,tree:C})}if(r.visible)try{o.save(),r.render(v),o.restore()}catch(C){throw this.canvas.reset(),C}}t[""]=performance.now()-p,o.verifyDepthZero?.(),this.isDirty=!1,d&&VK(this.layersManager,t,o,v.stats,i,n),K0e(o,v.debugNodes),r&&this.debug.check()&&this.debug("Scene.render() - after",{tree:BT(r,"console"),canvasCleared:b})}ensureDebugStatsRegistration(){if(this.releaseDebugStats)return;const e=W0e(),t=()=>{e(),this.releaseDebugStats=void 0};this.releaseDebugStats=t,this.cleanup.register(t)}toSVG(){const{root:e,width:t,height:i}=this;if(e!=null)return oh.toSVG(e,t,i)}strip(){const{context:e,pixelRatio:t}=this.canvas;e.setTransform(t,0,0,t,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1,this.clear()}destroy(){this.strip(),this.canvas.destroy(),this.imageLoader.destroy(),this.cleanup.flush(),See(),Object.assign(this,{canvas:void 0})}};LE.className="Scene";var ADe=class{constructor(e,t,i){this.eventsHub=e,this.annotationRoot=t,this.fireChartEvent=i,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(e){return e==null||ft(e)}restoreMemento(e,t,i){this.annotations=this.cleanData(i??[]).map(n=>{const s=this.getAnnotationTypeStyles(n.type);return oi(n,s)}),this.eventsHub.emit("annotations:restore",{annotations:this.annotations})}updateData(e){this.annotations=this.cleanData(e??[])}fireChangedEvent(){this.fireChartEvent({type:"annotations",annotations:fn([...this.annotations])})}attachNode(e){return this.annotationRoot.append(e),()=>(e.remove(),this)}setAnnotationStyles(e){this.styles=e}getAnnotationTypeStyles(e){return this.styles?.[e]}cleanData(e){for(const t of e)"textAlign"in t&&delete t.textAlign;return e}},zee=(e=>(e[e.CHART_BACKGROUND=0]="CHART_BACKGROUND",e[e.AXIS_BAND_HIGHLIGHT=1]="AXIS_BAND_HIGHLIGHT",e[e.AXIS_GRID=2]="AXIS_GRID",e[e.AXIS=3]="AXIS",e[e.SERIES_AREA_CONTAINER=4]="SERIES_AREA_CONTAINER",e[e.ZOOM_SELECTION=5]="ZOOM_SELECTION",e[e.SERIES_CROSSLINE_RANGE=6]="SERIES_CROSSLINE_RANGE",e[e.SERIES_LAYER=7]="SERIES_LAYER",e[e.AXIS_FOREGROUND=8]="AXIS_FOREGROUND",e[e.SERIES_CROSSHAIR=9]="SERIES_CROSSHAIR",e[e.SERIES_CROSSLINE_LINE=10]="SERIES_CROSSLINE_LINE",e[e.SERIES_ANNOTATION=11]="SERIES_ANNOTATION",e[e.CHART_ANNOTATION=12]="CHART_ANNOTATION",e[e.CHART_ANNOTATION_FOCUSED=13]="CHART_ANNOTATION_FOCUSED",e[e.STATUS_BAR=14]="STATUS_BAR",e[e.SERIES_LABEL=15]="SERIES_LABEL",e[e.LEGEND=16]="LEGEND",e[e.NAVIGATOR=17]="NAVIGATOR",e[e.FOREGROUND=18]="FOREGROUND",e))(zee||{}),kDe=class{constructor(e,t){this.eventsHub=e,this.sceneRoot=t,this.axes=new Map,this.axisGridGroup=new Mt({name:"Axes-Grids",zIndex:2}),this.axisGroup=new Mt({name:"Axes",zIndex:3}),this.axisLabelGroup=new Mt({name:"Axes-Labels",zIndex:15}),this.axisCrosslineRangeGroup=new Mt({name:"Axes-Crosslines-Range",zIndex:6}),this.axisCrosslineLineGroup=new Mt({name:"Axes-Crosslines-Line",zIndex:10}),this.axisCrosslineLabelGroup=new Mt({name:"Axes-Crosslines-Label",zIndex:15}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(e,t){const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const n of e)t.includes(n)||(n.detachAxis(i),n.destroy());for(const n of t)e?.includes(n)||n.attachAxis(i);this.axes.clear();for(const n of t){const s=n.createAxisContext();this.axes.has(s.direction)?this.axes.get(s.direction)?.push(s):this.axes.set(s.direction,[s])}this.eventsHub.emit("axis:change",null)}getAxisContext(e){return this.axes.get(e)??[]}destroy(){this.axes.clear(),this.axisGroup.remove(),this.axisGridGroup.remove()}},mw=(e=>(e[e.FULL=0]="FULL",e[e.UPDATE_DATA=1]="UPDATE_DATA",e[e.PROCESS_DATA=2]="PROCESS_DATA",e[e.PROCESS_DOMAIN=3]="PROCESS_DOMAIN",e[e.PERFORM_LAYOUT=4]="PERFORM_LAYOUT",e[e.SERIES_UPDATE=5]="SERIES_UPDATE",e[e.PRE_SCENE_RENDER=6]="PRE_SCENE_RENDER",e[e.SCENE_RENDER=7]="SCENE_RENDER",e[e.NONE=8]="NONE",e))(mw||{}),PE=class{constructor(e,t,i){this.eventsHub=e,this.caller=t,this.animationManager=i,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.pendingData=void 0,this.debug=Ct.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(e){typeof e=="function"&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=e,this.isLoadingInitialData=!0,this.animationManager.skip(),this.eventsHub.emit("data:source-change",null))}clearCallback(){this.dataSourceCallback=void 0}load(e){const{pendingData:t}=this;if(t!=null&&t.params.windowStart?.valueOf()===e.windowStart?.valueOf()&&t.params.windowEnd?.valueOf()===e.windowEnd?.valueOf()){const i=this.requestCounter++;this.isLoadingInitialData=!1,this.dispatch(i,t.data);return}this.isLoadingData=!0,this.throttledFetch(e)}isLazy(){return this.dataSourceCallback!=null}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}async getData(){const{latestRequest:e}=this;if(!e)return;const{params:t,fetchRequest:i}=e,n=await i;return{params:t,data:n}}restoreData(e){this.pendingData=e}createThrottledFetch(e){return bK(t=>this.fetch(t).catch(i=>fe.error("callback failed",i)),e,{leading:!1,trailing:!0})}createThrottledDispatch(e){return bK((t,i)=>this.dispatch(t,i),e,{leading:!0,trailing:!0})}dispatch(e,t){this.debug(`DataService - dispatching 'data-load' | ${e}`),this.eventsHub.emit("data:load",{data:t})}async fetch(e){"context"in this.caller&&(e.context=this.caller.context);const t=Promise.resolve().then(async()=>{if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const i=performance.now(),n=this.requestCounter++;this.debug(`DataService - requesting | ${n}`);let s;try{s=await this.dataSourceCallback(e),this.debug(`DataService - response | ${performance.now()-i}ms | ${n}`)}catch(r){this.debug(`DataService - request failed | ${n}`),fe.errorOnce(`DataService - request failed | [${r}]`)}this.isLoadingInitialData=!1;const o=this.freshRequests.indexOf(t);return o===-1||this.dispatchOnlyLatest&&o!==this.freshRequests.length-1?(this.debug(`DataService - discarding stale request | ${n}`),s):(this.freshRequests=this.freshRequests.slice(o+1),this.freshRequests.length===0&&(this.isLoadingData=!1),Array.isArray(s)?this.throttledDispatch(n,s):this.eventsHub.emit("data:error",null),s)});this.latestRequest={params:e,fetchRequest:t},this.freshRequests.push(t),await t}};E([Io({newValue(e){this.throttledDispatch=this.createThrottledDispatch(e)}})],PE.prototype,"dispatchThrottle",2);E([Io({newValue(e){this.throttledFetch=this.createThrottledFetch(e)}})],PE.prototype,"requestThrottle",2);var TDe=class{constructor(e,t){this.domManager=e,this.updateService=t,this.observers=[]}updateFonts(e){if(!(!e||e.size===0)){this.loadFonts(e);for(const t of e)this.observeFontStatus(t)}}destroy(){for(const e of this.observers)e.disconnect();this.observers=[]}loadFonts(e){const t=Array.from(e).map(o=>encodeURIComponent(o)),i=":wght@100;200;300;400;500;600;700;800;900",n=`${i}&family=`,s=`@import url('https://fonts.googleapis.com/css2?family=${t.join(n)}${i}&display=swap');
`;this.domManager.addStyles(`google-font-${t.join("-")}`,s)}observeFontStatus(e){const t=globalThis.document.createElement("div");t.style.setProperty("position","absolute"),t.style.setProperty("top","0"),t.style.setProperty("margin","0"),t.style.setProperty("padding","0"),t.style.setProperty("overflow","hidden"),t.style.setProperty("visibility","hidden"),t.style.setProperty("width","auto"),t.style.setProperty("max-width","none"),t.style.setProperty("font-synthesis","none"),t.style.setProperty("font-family",e),t.style.setProperty("font-size","16px"),t.style.setProperty("white-space","nowrap"),t.textContent="UVWxyz",this.domManager.addChild("canvas-container",`font-check-${encodeURIComponent(e)}`,t);const i=new ResizeObserver(n=>{const s=n?.at(0)?.contentBoxSize.at(0)?.inlineSize;s!=null&&s>0&&(ei.clear(),this.updateService.update(4))});i.observe(t),this.observers.push(i)}},XB=["bar","line","scatter"],Gee=class{constructor(){this.registeredListeners=new Map}addListener(e,t){const i={symbol:Symbol(e),handler:t};return this.registeredListeners.has(e)?this.registeredListeners.get(e).push(i):this.registeredListeners.set(e,[i]),()=>this.removeListener(i.symbol)}removeListener(e){for(const[t,i]of this.registeredListeners.entries()){const n=i.findIndex(s=>s.symbol===e);if(n>=0){i.splice(n,1),i.length===0&&this.registeredListeners.delete(t);break}}}dispatch(e,...t){for(const i of this.getListenersByType(e))try{i.handler(...t)}catch(n){fe.errorOnce(n)}}getListenersByType(e){return this.registeredListeners.get(e)??[]}destroy(){this.registeredListeners.clear()}},Dx=new WeakMap;function NE(e,t){const i=JSON.stringify(e,null,0);return Dx.has(t)||Dx.set(t,new Map),Dx.get(t)?.has(i)||Dx.get(t)?.set(i,t(e)),Dx.get(t)?.get(i)}var sF=class{constructor(){this.weak=new WeakMap,this.strong=new Map,this.set=!1,this.value=void 0}};function tD(e,t){let i=new sF;const n=(...s)=>{let o=i;for(const r of s){const a=typeof r=="object"||typeof r=="symbol"?o.weak:o.strong;let l=a.get(r);l==null&&(l=new sF,a.set(r,l)),o=l}if(o.set)return t?.("hit",e,s),o.value;{const r=e(...s);return o.set=!0,o.value=r,t?.("miss",e,s),r}};return n.reset=()=>{i=new sF},n}function fo(e,t){const i=new Map,n=(...r)=>r.map(a=>typeof a=="object"||typeof a=="symbol"?a:(i.has(a)||i.set(a,{v:a}),i.get(a))),s={},o=new WeakMap;return(...r)=>{const a=r.length===0?[s]:n(...r);let l=o;for(const d of a.slice(0,-1))l.has(d)||l.set(d,new WeakMap),l=l.get(d);const c=a.at(-1);let u=l.get(c);return u?t?.("hit",e,r):(u=e(...r),l.set(c,u),t?.("miss",e,r)),u}}var tu={millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e",month:"%b",year:"%Y"},IDe={millisecond:"%Y %b %e %H:%M:%S.%L",second:"%Y %b %e %H:%M:%S",minute:"%Y %b %e %H:%M",hour:"%Y %b %e %H:%M",day:"%Y %b %e",month:"%Y %b",year:"%Y"},_o={year:0,month:1,day:2,hour:3,minute:4,second:5,millisecond:6},RDe=/%[-_0]?L/,EDe=/%[-_0]?S/,LDe=/%[-_0]?M/,PDe=/%[-_0]?[HI]/,NDe=/^%[-_0]?[de]$/,ODe=/^%[-_0]?[Bbm]$/,FDe=/^%[-_0]?[Yy]$/;function BDe(e,t,i){if(typeof e=="string")return e;e??(e=tu);const{millisecond:n=tu.millisecond,second:s=tu.second,minute:o=tu.minute,hour:r=tu.hour,day:a=tu.day,month:l=tu.month,year:c=tu.year}=e,u=_o[t],d=IDe[t],p=i?_o[i]:-1;if(p<_o.year&&u>=_o.year&&!FDe.test(c)||p<_o.month&&u>=_o.month&&!ODe.test(l)||p<_o.day&&u>=_o.day&&!NDe.test(a))return d;let f;switch(t){case"year":return c;case"month":return p<_o.year?`${l} ${c}`:l;case"day":return p<_o.year?`${l} ${a} ${c}`:`${l} ${a}`;case"hour":f=r;break;case"minute":f=o;break;case"second":f=s;break;case"millisecond":f=n;break;default:return d}if(u>=_o.hour&&!PDe.test(f)||u>=_o.minute&&!LDe.test(f)||u>=_o.second&&!EDe.test(f)||u>=_o.millisecond&&!RDe.test(f))return d;let m;return p<_o.year?m=`${l} ${a} ${c}`:p<_o.month&&(m=`${l} ${a}`),m?`${f} ${m}`:f}var tS=class GT extends Gee{constructor(){super(...arguments),this.formats=new Map,this.dateFormatter=tD((t,i,n,s,o)=>{const r=GT.mergeSpecifiers(t,i)??tu;return GT.getFormatter("date",r,n,s,{truncateDate:o})}),this.formatter=void 0}static mergeSpecifiers(...t){let i;for(const n of t)bi(n)&&bi(i)?i={...i,...n}:i=n;return i}static getFormatter(t,i,n,s="long",{truncateDate:o}={}){if(bi(i)){if(t!=="date"){fe.warn("Date formatter configuration is not supported for non-date types.");return}n??(n="millisecond");const r=s==="component"?i?.[n]??tu[n]:BDe(i,n,o);return zw(r)}switch(t){case"number":{const r=gG(i);return r==null?void 0:yJ(r)}case"date":return zw(i);case"category":return r=>i.replace("%s",String(r))}}setFormatter(t){this.formatter!==t&&(this.formatter=t,this.formats.clear(),this.dateFormatter.reset(),this.dispatch("format-changed"))}format(t,i,{specifier:n,truncateDate:s}={}){if(i.value==null)return;const{formatter:o}=this;if(o==null)return;if(typeof o=="function"){const c=t(o,i);return c==null?void 0:String(c)}const r=o[i.property];if(r==null)return;if(typeof r=="function"){const c=t(r,i);return c==null||ft(c)?c:String(c)}else if(i.type==="date"){const{unit:c,style:u}=i;return this.dateFormatter(r,n,c,u,s)?.(i.value)}const a=n??r;if(typeof a!="string")return;let l=this.formats.get(a);return l==null&&(l=GT.getFormatter(i.type,a),this.formats.set(a,l)),l?.(i.value,i.type==="number"?i.fractionDigits:void 0)}defaultFormat(t,{specifier:i,truncateDate:n}={}){const{formatter:s}=this,o=typeof s=="function"?void 0:s?.[t.property];switch(t.type){case"date":{const{unit:r,style:a}=t,l=o!=null&&typeof o!="function"?o:void 0;return this.dateFormatter(l,i,r,a,n)?.(t.value)??String(t.value)}case"number":return eS(t.value,t.fractionDigits);case"category":return Array.isArray(t.value)?t.value.join(" - "):typeof t.value=="string"?t.value:typeof t.value=="number"?eS(t.value):String(t.value)}}};function _De(e,t){return i=>Number(e)*(1-i)+Number(t)*i}function Vee(e,t){if(typeof e=="string")try{e=Di.fromString(e)}catch{e=Di.fromArray([0,0,0])}if(typeof t=="string")try{t=Di.fromString(t)}catch{t=Di.fromArray([0,0,0])}return i=>Di.mix(e,t,i).toRgbaString()}var ZB={};Vu(ZB,{easeIn:()=>zDe,easeInOut:()=>GDe,easeInOutQuad:()=>WDe,easeInQuad:()=>VDe,easeOut:()=>Kw,easeOutQuad:()=>HDe,inverseEaseOut:()=>Wee,linear:()=>Hee});var Hee=e=>e,zDe=e=>1-Math.cos(e*Math.PI/2),Kw=e=>Math.sin(e*Math.PI/2),GDe=e=>-(Math.cos(e*Math.PI)-1)/2,VDe=e=>e*e,HDe=e=>1-(1-e)**2,WDe=e=>e<.5?2*e*e:1-(-2*e+2)**2/2,Wee=e=>2*Math.asin(e)/Math.PI,jI=.2,Yv=["initial","remove","update","add","trailing","end","none"],Yw={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:jI,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1+jI,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},jee=(e=>(e.Loop="loop",e.Reverse="reverse",e))(jee||{});function jDe(e){return e.every(t=>t instanceof oh)}function OE(e){return jDe(e)?{nodes:e,selections:[]}:{nodes:[],selections:e}}function qB(e,t){return e===t?!0:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((i,n)=>qB(i,t[n])):zI(e)&&zI(t)?e.equals(t):bi(e)&&bi(t)?TG(e,t,qB):!1}var Uee=class{constructor(t){this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=t.autoplay??!0,this.ease=t.ease??Hee,this.phase=t.phase;const i=t.duration??Yw[this.phase].animationDuration;this.duration=i*t.defaultDuration,this.delay=(t.delay??0)*t.defaultDuration,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),this.from=t.from,t.skip===!0&&(this.onUpdate?.(t.to,!1,this),this.onStop?.(this),this.onComplete?.(this),this.isComplete=!0),t.collapsable!==!1&&(this.duration=this.checkCollapse(t,this.duration))}checkCollapse(t,i){return qB(t.from,t.to)?0:i}play(t=!1){this.isPlaying||this.isComplete||(this.isPlaying=!0,this.onPlay?.(this),this.autoplay&&(this.autoplay=!1,t&&this.onUpdate?.(this.from,!0,this)))}stop(){this.isPlaying=!1,this.isComplete||(this.isComplete=!0,this.onStop?.(this))}update(t){if(this.isComplete)return t;!this.isPlaying&&this.autoplay&&this.play(!0);const i=this.elapsed;if(this.elapsed+=t,this.delay>this.elapsed)return 0;const n=this.interpolate(this.isReverse?1-this.delta:this.delta);this.onUpdate?.(n,!1,this);const s=this.delay+this.duration;return this.elapsed>=s?(this.stop(),this.isComplete=!0,this.onComplete?.(this),t-(s-i)):0}get delta(){return this.ease(Je(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,i){if(typeof i!="object"||zI(i))return this.interpolateValue(t,i);if(Array.isArray(i)){const s=[];for(let o=0;o<i.length;o++){const r=this.createInterpolator(t[o],i[o]);r!=null&&s.push(r)}return o=>{const r=[];for(const a of s)r.push(a(o));return r}}const n=[];for(const s of Object.keys(i)){const o=this.createInterpolator(t[s],i[s]);o!=null&&n.push([s,o])}return s=>{const o={};for(const[r,a]of n)o[r]=a(s);return o}}interpolateValue(t,i){if(!(t==null||i==null)){if(zI(t))return n=>t[bE](i,n);try{switch(typeof t){case"number":return _De(t,i);case"string":return Vee(t,i);case"boolean":if(t===i)return()=>t;break;case"object":return()=>t;default:throw new Error(`Unable to interpolate values: ${t}, ${i}`)}}catch{}throw new Error(`Unable to interpolate values: ${t}, ${i}`)}}},XK=class{constructor(e){this.maxAnimationTime=e,this.debug=Ct.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(Yv.map(t=>[t,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(Yv[this.currentPhase])??[]}checkOverlappingId(e){e!=null&&this.controllers.has(e)&&(this.controllers.get(e).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${e}`),this.skip())}addAnimation(e){if(e.isComplete)return;if(Yv.indexOf(e.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",e.id),e.stop();return}this.controllers.set(e.id,e),this.phases.get(e.phase)?.push(e)}removeAnimation(e){this.controllers.delete(e.id);const t=this.phases.get(e.phase),i=t?.indexOf(e);i!=null&&i>=0&&t?.splice(i,1)}progress(e){if(!this.isReady)return;let t=e===0?.01:e;const i=()=>{const c=Yv[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:c,phaseMeta:Yw[c]}};let{phase:n,phaseControllers:s,phaseMeta:o}=i();const r=()=>Yv[this.currentPhase]==null,a=()=>{for({phase:n,phaseControllers:s,phaseMeta:o}=i();!r()&&s.length===0;)this.currentPhase++,{phase:n,phaseControllers:s,phaseMeta:o}=i(),this.debug(`AnimationBatch - phase changing to ${n}`,{unusedTime:t},s)},l=this.controllers.size;this.debug(`AnimationBatch - ${e}ms; phase ${n} with ${s?.length} of ${l}`);do{const c=t,u=o.skipIfNoEarlierAnimations&&this.animationTimeConsumed===0;let d=0;for(const p of s)u?p.stop():t=Math.min(p.update(c),t),p.isComplete&&(d++,this.removeAnimation(p));this.animationTimeConsumed+=c-t,this.debug(`AnimationBatch - updated ${s.length} controllers; ${d} completed`,s),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),a()}while(t>0&&!r());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let e=!0;for(const[,t]of this.controllers)if(t.duration>0&&Yw[t.phase].skipIfNoEarlierAnimations!==!0){e=!1;break}if(!e)for(const[,t]of this.controllers)t.autoplay&&t.play(!0)}skip(e=!0){if(this.skipAnimations===!1&&e===!0){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=e}play(){for(const e of this.controllers.values())e.play()}stop(){for(const e of this.controllers.values())try{e.stop(),this.removeAnimation(e)}catch(t){fe.error("Error during animation stop",t)}this.dispatchStopped()}stopByAnimationId(e){if(e!=null&&this.controllers.has(e)){const t=this.controllers.get(e);t&&(t.stop(),this.removeAnimation(t))}}stopByAnimationGroupId(e){for(const t of this.controllers.values())t.groupId===e&&this.stopByAnimationId(t.id)}dispatchStopped(){for(const e of this.stoppedCbs)e();this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}getRemainingTime(e){if(!this.isActive())return 0;let t=0;for(const[i,n]of this.phases)n.length!==0&&(e!=null&&e!==i||(t+=Math.max(...n.map(s=>s.isComplete?0:s.delay+s.duration-(s.elapsed??0)))));return t}destroy(){this.stop(),this.controllers.clear()}},$ee=(e=>(e[e.Default=32]="Default",e[e.ZoomDrag=16]="ZoomDrag",e[e.Annotations=8]="Annotations",e[e.ContextMenu=4]="ContextMenu",e[e.Animation=2]="Animation",e[e.AnnotationsSelected=1]="AnnotationsSelected",e[e.Clickable=41]="Clickable",e[e.Focusable=34]="Focusable",e[e.Keyable=43]="Keyable",e[e.ContextMenuable=36]="ContextMenuable",e[e.AnnotationsMoveable=9]="AnnotationsMoveable",e[e.AnnotationsDraggable=57]="AnnotationsDraggable",e[e.ZoomDraggable=50]="ZoomDraggable",e[e.ZoomClickable=34]="ZoomClickable",e[e.ZoomWheelable=59]="ZoomWheelable",e[e.All=63]="All",e))($ee||{}),Kee=class{constructor(){this.stateQueue=34}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}isState(e){return!!(this.stateQueue&-this.stateQueue&e)}};function ZK(e){return e==null?!0:!Number.isNaN(e)&&e>=0&&e<=2}var Yee=class{constructor(e,t){this.interactionManager=e,this.chartUpdateMutex=t,this.defaultDuration=1e3,this.maxAnimatableItems=1/0,this.batch=new XK(this.defaultDuration*1.5),this.debug=Ct.create(!0,"animation"),this.events=new Dc,this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0,this.cumulativeAnimationTime=0}addListener(e,t){return this.events.on(e,t)}animate(e){const t=this.batch;try{t.checkOverlappingId(e.id)}catch(a){this.failsafeOnError(a);return}let{id:i}=e;i==null&&(i=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);const n=this.isSkipped()||e.phase==="none";n&&this.debug("AnimationManager - skipping animation");const{delay:s,duration:o}=e;if(!ZK(s))throw new Error(`Animation delay of ${s} is unsupported (${i})`);if(!ZK(o))throw new Error(`Animation duration of ${o} is unsupported (${i})`);const r=new Uee({...e,id:i,skip:n,autoplay:this.isPlaying?e.autoplay:!1,phase:e.phase,defaultDuration:this.defaultDuration});if(!this.forceTimeJump(r,this.defaultDuration))return this.batch.addAnimation(r),r}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(e){try{this.batch.stopByAnimationId(e)}catch(t){this.failsafeOnError(t)}}stopByAnimationGroupId(e){try{this.batch.stopByAnimationGroupId(e)}catch(t){this.failsafeOnError(t)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(e=!0){this.skipAnimations=e}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}getRemainingTime(e){return this.batch.getRemainingTime(e)}getCumulativeAnimationTime(){return this.cumulativeAnimationTime}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error("Stack trace for animation skip tracking").stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(e){this.requestId=Qt().requestAnimationFrame(t=>{e(t).catch(i=>fe.error(i))})}forceTimeJump(e,t){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||this.requestId!==null)return;let e;const t=async i=>{await this.debug.group("AnimationManager.onAnimationFrame()",async()=>{const n=()=>{const s=i-(e??i);e=i,this.debug("AnimationManager",{controllersCount:this.batch.size,deltaTime:s}),this.interactionManager.pushState(2);try{this.batch.progress(s),this.cumulativeAnimationTime+=s}catch(o){this.failsafeOnError(o)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:s})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(n):await this.chartUpdateMutex.acquire(n),this.batch.isActive()?this.scheduleAnimationFrame(t):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))})};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(t)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}),this.requestId=null,this.startBatch())}failsafeOnError(e,t=!0){fe.error("Error during animation, skipping animations",e),t&&this.cancelAnimation()}startBatch(e){this.debug(`AnimationManager - startBatch() with skipAnimations=${e}.`),this.reset(),this.batch.destroy(),this.batch=new XK(this.defaultDuration*1.5),e===!0&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(e){this.batch.stoppedCbs.add(e)}destroy(){this.stop(),this.events.clear()}},UDe=class{constructor(){this.download={type:"action",showOn:"always",label:"contextMenuDownload",enabled:!0,action:void 0,items:void 0},this["zoom-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuZoomToCursor",enabled:!0,action:void 0,items:void 0},this["pan-to-cursor"]={type:"action",showOn:"series-area",label:"contextMenuPanToCursor",enabled:!0,action:void 0,items:void 0},this["reset-zoom"]={type:"action",showOn:"series-area",label:"contextMenuResetZoom",enabled:!0,action:void 0,items:void 0},this["toggle-series-visibility"]={type:"action",showOn:"legend-item",label:"contextMenuToggleSeriesVisibility",enabled:!0,action:void 0,items:void 0},this["toggle-other-series"]={type:"action",showOn:"legend-item",label:"contextMenuToggleOtherSeries",enabled:!0,action:void 0,items:void 0},this.separator={type:"separator",showOn:"always",label:"separator",enabled:!0,action:void 0,items:void 0}}},$De=class{constructor(){this.defaults=["download","zoom-to-cursor","pan-to-cursor","reset-zoom","toggle-series-visibility","toggle-other-series"]}},Xee=class{constructor(){this.items=new UDe,this.lists=new $De}},Zee=class{constructor(t){this.eventsHub=t,this.builtins=new Xee,this.hiddenActions=new Set,this.toggle("zoom-to-cursor","hide"),this.toggle("pan-to-cursor","hide"),this.toggle("reset-zoom","hide")}static check(t,i){return i.showOn==t}static checkCallback(t,i,n){return t===i}dispatchContext(t,i,n,s){const{widgetEvent:o}=i;if(o.sourceEvent.defaultPrevented)return;const r=s?.x??i.canvasX,a=s?.y??i.canvasY,l={showOn:t,x:r,y:a,context:n,widgetEvent:o};this.eventsHub.emit("context-menu:setup",l),this.eventsHub.emit("context-menu:complete",l)}isVisible(t){return!this.hiddenActions.has(t)}toggle(t,i){switch(i??(i=this.isVisible(t)?"hide":"show"),i){case"show":this.hiddenActions.delete(t);break;case"hide":this.hiddenActions.add(t);break}}},qee=class{constructor(e){this.eventsHub=e,this.highlightStates=new Qb}updateHighlight(e,t){const i=this.getActiveHighlight();this.highlightStates.set(e,t);const n=this.getActiveHighlight();this.isEqual(n,i)||this.eventsHub.emit("highlight:change",{callerId:e,currentHighlight:n,previousHighlight:i})}getActiveHighlight(){return this.highlightStates.stateValue()}isEqual(e,t){return e===t||e!=null&&t!=null&&e?.series===t?.series&&e?.itemId===t?.itemId&&e?.datum===t?.datum}},Qee=(e=>(e[e.None=0]="None",e[e.Item=1]="Item",e[e.Series=2]="Series",e[e.OtherSeries=3]="OtherSeries",e[e.OtherItem=4]="OtherItem",e))(Qee||{}),FE=[0,1,2,3,4];function IS(e){const t=i=>i;switch(e){case 1:return"highlighted-item";case 4:return"unhighlighted-item";case 2:return"highlighted-series";case 3:return"unhighlighted-series";case 0:return"none";default:return t(e)}}var gh=class extends pt{};E([F],gh.prototype,"fill",2);E([F],gh.prototype,"fillOpacity",2);E([F],gh.prototype,"stroke",2);E([F],gh.prototype,"strokeWidth",2);E([F],gh.prototype,"strokeOpacity",2);E([F],gh.prototype,"lineDash",2);E([F],gh.prototype,"lineDashOffset",2);var fh=class extends pt{constructor(){super(...arguments),this.enabled=!0,this.range="tooltip",this.bringToFront=!1,this.highlightedItem={},this.unhighlightedItem={},this.highlightedSeries={},this.unhighlightedSeries={}}getItemHighlightStyle(e){switch(e){case 1:return this.highlightedItem;case 4:return this.unhighlightedItem;case 2:return this.highlightedSeries;case 3:return this.unhighlightedSeries}}getSeriesHighlightStyle(e){switch(e){case 1:case 4:case 2:return this.highlightedSeries;case 3:return this.unhighlightedSeries}}getStyle(e){return oi(this.getItemHighlightStyle(e),this.getSeriesHighlightStyle(e))}};E([F],fh.prototype,"enabled",2);E([F],fh.prototype,"range",2);E([F],fh.prototype,"bringToFront",2);E([F],fh.prototype,"highlightedItem",2);E([F],fh.prototype,"unhighlightedItem",2);E([F],fh.prototype,"highlightedSeries",2);E([F],fh.prototype,"unhighlightedSeries",2);var BE=class extends pt{};E([F],BE.prototype,"strokeWidth",2);E([F],BE.prototype,"dimOpacity",2);E([F],BE.prototype,"enabled",2);var Jee=class extends pt{constructor(){super(...arguments),this.color="black"}};E([F],Jee.prototype,"color",2);var Ac=class extends pt{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};E([F],Ac.prototype,"start",2);E([F],Ac.prototype,"stop",2);E([F],Ac.prototype,"fill",2);E([F],Ac.prototype,"fillOpacity",2);E([F],Ac.prototype,"stroke",2);E([F],Ac.prototype,"strokeWidth",2);E([F],Ac.prototype,"strokeOpacity",2);E([F],Ac.prototype,"lineDash",2);E([F],Ac.prototype,"lineDashOffset",2);var iD=class{constructor(){this.key="x",this.segments=new AS(Ac)}};E([F],iD.prototype,"enabled",2);E([F],iD.prototype,"key",2);E([F],iD.prototype,"segments",2);var Sg=class extends pt{constructor(){super(...arguments),this.type="gradient",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.reverse=!1,this.colorSpace="rgb"}};E([F],Sg.prototype,"type",2);E([F],Sg.prototype,"colorStops",2);E([F],Sg.prototype,"bounds",2);E([F],Sg.prototype,"gradient",2);E([F],Sg.prototype,"rotation",2);E([F],Sg.prototype,"reverse",2);E([F],Sg.prototype,"colorSpace",2);var Ss=class extends pt{constructor(){super(...arguments),this.type="pattern",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.scale=1,this.reverse=!1,this.pattern="forward-slanted-lines",this.width=26,this.height=26,this.padding=6,this.fill="black",this.fillOpacity=1,this.backgroundFill="white",this.backgroundFillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0}};E([F],Ss.prototype,"type",2);E([F],Ss.prototype,"colorStops",2);E([F],Ss.prototype,"bounds",2);E([F],Ss.prototype,"gradient",2);E([F],Ss.prototype,"rotation",2);E([F],Ss.prototype,"scale",2);E([F],Ss.prototype,"reverse",2);E([F],Ss.prototype,"path",2);E([F],Ss.prototype,"pattern",2);E([F],Ss.prototype,"width",2);E([F],Ss.prototype,"height",2);E([F],Ss.prototype,"padding",2);E([F],Ss.prototype,"fill",2);E([F],Ss.prototype,"fillOpacity",2);E([F],Ss.prototype,"backgroundFill",2);E([F],Ss.prototype,"backgroundFillOpacity",2);E([F],Ss.prototype,"stroke",2);E([F],Ss.prototype,"strokeOpacity",2);E([F],Ss.prototype,"strokeWidth",2);var mh=class extends pt{constructor(){super(...arguments),this.type="image",this.url="",this.rotation=0,this.scale=1,this.backgroundFill="black",this.backgroundFillOpacity=1,this.repeat="no-repeat",this.fit="contain"}};E([F],mh.prototype,"type",2);E([F],mh.prototype,"url",2);E([F],mh.prototype,"rotation",2);E([F],mh.prototype,"scale",2);E([F],mh.prototype,"backgroundFill",2);E([F],mh.prototype,"backgroundFillOpacity",2);E([F],mh.prototype,"repeat",2);E([F],mh.prototype,"fit",2);var nD=class extends pt{constructor(t=!0){super(),this.deprecated=t,this.item=new gh,this.series=new BE,this.text=new Jee}set(t){return this.deprecated&&fe.warnOnce("highlightStyle is deprecated, use highlight instead."),super.set(t)}};E([F],nD.prototype,"item",2);E([F],nD.prototype,"series",2);E([F],nD.prototype,"text",2);var Gl=class extends pt{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new fh,this.highlightStyle=new nD}handleUnknownProperties(t,i){"context"in i&&(this.context=i.context,t.delete("context"))}};E([F],Gl.prototype,"id",2);E([F],Gl.prototype,"visible",2);E([F],Gl.prototype,"focusPriority",2);E([F],Gl.prototype,"showInLegend",2);E([F],Gl.prototype,"cursor",2);E([F],Gl.prototype,"nodeClickRange",2);E([F],Gl.prototype,"highlight",2);E([F],Gl.prototype,"highlightStyle",2);function qK(e,t){if(e==null||t.length===0)return[!1,!1];const i=e.valueOf(),n=t[0],s=t.at(-1);if(typeof n=="string")return[i===n,i===s];let o=n.valueOf(),r=s.valueOf();return o>r&&([o,r]=[r,o]),[i===o,i===r]}function _E(e,t,i,n,s,o){const[r,a]=qK(t,o),[l,c]=qK(e,s);return{xKey:i,yKey:n,xValue:e,yValue:t,first:l,last:c,min:r,max:a}}function Xw(e,t,[i,n],s){let o=Ww(0,t-1,a=>{const l=e===1?a:t-a,c=s(l)?.[1]??Number.NaN;return!Number.isFinite(c)||c>=i})??0,r=Qf(0,t-1,a=>{const l=e===1?a:t-a,c=s(l)?.[0]??Number.NaN;return!Number.isFinite(c)||c<=n})??t-1;return e===-1&&([o,r]=[t-r,t-o]),o=Math.max(o,0),r=Math.min(r+1,t),[o,r]}function XG(e,t,i){if(i){const{x:s,y:o,width:r,height:a}=i;return{canvasX:s+r/2,canvasY:o+a/2}}const n=t.yBar?.upperPoint??t.midPoint??e.datumMidPoint?.(t);if(n){const{x:s,y:o}=vn.toCanvasPoint(e.contentGroup,n.x,n.y);return{canvasX:Math.round(s),canvasY:Math.round(o)}}}function ete(e,t,i,n,s){let o=-1,r=0,a=0,l=!1;for(;r<n&&o<=t-e;){o+=1;const c=i+a;if(l||(a*=-1),a>=0&&(a+=1),l&&a<0&&(a-=1),c<e||c>t){l=!0;continue}s(c)&&(r+=1)}return r}function ZG(e){const t={};for(const i of FE)t[i]=e(void 0,!1,i);return t}function KDe(e,...t){const i={};for(const n of t??["default"])for(const s of FE){const o=i[n]??(i[n]={});o[s]=e(void 0,!1,s,n)}return i}var UI=class{constructor(t,i,n,s){this.domManager=n,this.tooltip=s,this.stateTracker=new Qb,this.suppressState=new Qb(!1),this.appliedState=null,this.cleanup=new _i,this.cleanup.register(s.setup(i,n),t.on("dom:hidden",()=>this.tooltip.hide()))}destroy(){this.cleanup.flush()}updateTooltip(t,i,n,s){n??(n=this.stateTracker.get(t)?.content),this.stateTracker.set(t,{meta:i,content:n,pagination:s}),this.applyStates()}removeTooltip(t){this.stateTracker.delete(t),this.applyStates()}suppressTooltip(t){this.suppressState.set(t,!0)}unsuppressTooltip(t){this.suppressState.delete(t)}applyStates(){const t=this.stateTracker.stateId(),i=t?this.stateTracker.get(t):void 0;if(this.suppressState.stateValue()||i?.meta==null||i?.content==null){this.appliedState=null,this.tooltip.hide();return}const n=this.domManager.getBoundingClientRect(),s=this.tooltip.bounds==="extended"?this.domManager.getOverlayClientRect():n;if(yr(this.appliedState?.content,i?.content)&&yr(this.appliedState?.pagination,i?.pagination)){const o=this.tooltip.isVisible();this.tooltip.show(s,n,i?.meta,null,void 0,o)}else this.tooltip.show(s,n,i?.meta,i?.content,i?.pagination);this.appliedState=i}static makeTooltipMeta(t,i,n,s){const{canvasX:o,canvasY:r}=t,a=i.properties.tooltip,{placement:l,anchorTo:c,xOffset:u,yOffset:d}=a.position,p=XG(i,n,s);return{canvasX:o,canvasY:r,nodeCanvasX:p?.canvasX??o,nodeCanvasY:p?.canvasY??r,enableInteraction:a.interaction?.enabled??!1,showArrow:a.showArrow,position:{placement:l,anchorTo:c,xOffset:u,yOffset:d}}}},QK=3,YDe=505,JK=30;function oF(e,t){const{device:i,offsetX:n,offsetY:s,clientX:o,clientY:r,currentX:a,currentY:l,sourceEvent:c}=t;return{type:e,device:i,offsetX:n,offsetY:s,clientX:o,clientY:r,currentX:a,currentY:l,sourceEvent:c}}function eY(e,t){const i=e*e+t*t,n=QK*QK;return i>=n}function XDe(e,t){const i=e.clientX-t.clientX,n=e.clientY-t.clientY,s=i*i+n*n,o=JK*JK;return s<o}var tte=class{constructor(e){this.cleanup=new _i,this.events=new Dc,this.isDragging=!1,this.touch={distanceTravelledX:0,distanceTravelledY:0,clientX:0,clientY:0},this.cleanup.register(e.addListener("touchstart",this.onTouchStart.bind(this)),e.addListener("touchmove",this.onTouchMove.bind(this)),e.addListener("touchend",this.onTouchEnd.bind(this)),e.addListener("mousemove",this.onMouseMove.bind(this)),e.addListener("dblclick",this.onDblClick.bind(this)),e.addListener("drag-start",this.onDragStart.bind(this)),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",this.onDragEnd.bind(this)))}destroy(){this.cleanup.flush()}onTouchStart(e){const{clientX:t,clientY:i}=e.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX=0,this.touch.distanceTravelledY=0,this.touch.clientX=t,this.touch.clientY=i}onTouchMove(e){const{clientX:t,clientY:i}=e.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX+=Math.abs(this.touch.clientX-t),this.touch.distanceTravelledY+=Math.abs(this.touch.clientY-i),this.touch.clientX=t,this.touch.clientY=i}onTouchEnd(e){e.sourceEvent.preventDefault()}onMouseMove(e){this.events.emit("mousemove",e)}onDblClick(e){this.events.emit("dblclick",e)}onDragStart(e){this.dragStartEvent=e}onDragMove(e){this.dragStartEvent!=null&&eY(e.originDeltaX,e.originDeltaY)&&(this.events.emit("drag-start",this.dragStartEvent),this.events.emit("drag-move",{...this.dragStartEvent,type:"drag-move"}),this.dragStartEvent=void 0,this.isDragging=!0),this.isDragging&&this.events.emit("drag-move",e)}onDragEnd(e){if(this.isDragging){this.events.emit("drag-end",e),this.isDragging=!1;return}if(e.device==="mouse"){const t=oF("click",e);this.events.emit("click",t)}else if(e.sourceEvent.type==="touchend"){if(eY(this.touch.distanceTravelledX,this.touch.distanceTravelledY))return;const t=oF("click",e);this.events.emit("click",t);const i=Date.now();if(this.lastClick!==void 0&&i-this.lastClick.time<=YDe&&XDe(this.lastClick,e)){const n=oF("dblclick",e);this.events.emit("dblclick",n),this.lastClick=void 0}else this.lastClick={time:i,clientX:e.clientX,clientY:e.clientY}}}},rF=class extends Jb{constructor(e){super(e)}addChildToDOM(){}removeChildFromDOM(){}},ZDe=class{constructor(e,t){this.seriesWidget=new rF(e.getParent("series-area")),this.chartWidget=new rF(e.getParent("canvas-proxy")),this.containerWidget=new rF(e.getParent("canvas-container")),this.containerWidget.addChild(this.chartWidget),this.chartWidget.addChild(this.seriesWidget),t.withDragInterpretation&&(this.seriesDragInterpreter=new tte(this.seriesWidget))}destroy(){this.seriesDragInterpreter?.destroy(),this.seriesWidget.destroy(),this.chartWidget.destroy(),this.containerWidget.destroy()}};function iS(e,t){const[i,n]=Es(t);return Je(i,e,n)}function Es(e){if(e.length===0)return[];const t=[1/0,-1/0];for(const i of e)i<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i);return t}function Pm(e){const[t,i]=Es(e);return i-t}function ite(e){return e=Math.trunc(e),e<=0?1:e===1?2:1<<32-Math.clz32(e-1)}function QB(e){return e=Math.trunc(e),e<=0?0:e===1?1:1<<31-Math.clz32(e)}var nte=class JB extends DE{constructor(t=[],i=[]){super(),this.domain=t,this.range=i,this.defaultTickCount=JB.defaultTickCount,this.defaultClamp=!1}static is(t){return t instanceof JB}normalizeDomains(...t){return qG(...t)}calcBandwidth(t=1,i=1){const{domain:n}=this,s=this.getPixelRange();if(n.length===0)return s;let r=Math.abs(n[1].valueOf()-n[0].valueOf())/t+1;if(i!==0){const a=Math.floor(s);r=Math.min(r,a)}return s/Math.max(1,r)}convert(t,i){const{domain:n}=this;if(!n||n.length<2||t==null)return Number.NaN;const{range:s}=this,o=i?.clamp??this.defaultClamp;let r=n[0].valueOf(),a=n[1].valueOf(),l=t.valueOf();if(this.transform&&(r=this.transform(r),a=this.transform(a),l=this.transform(l)),o){const[u,d]=Es([r,a]);if(l<u)return s[0];if(l>d)return s[1]}if(r===a)return(s[0]+s[1])/2;if(l===r)return s[0];if(l===a)return s[1];const c=s[0];return c+(l-r)/(a-r)*(s[1]-c)}invert(t,i){const{domain:n}=this;if(n.length<2)return;let s=n[0].valueOf(),o=n[1].valueOf();this.transform&&(s=this.transform(s),o=this.transform(o));const{range:r}=this,[a,l]=r;let c;return a===l?c=this.toDomain((s+o)/2):c=this.toDomain(s+(t-a)/(l-a)*(o-s)),this.transformInvert?this.transformInvert(c):c}getPixelRange(){const[t,i]=this.range;return Math.abs(i-t)}};nte.defaultTickCount=5;var mi=nte;function qG(...e){let t,i=1/0,n,s=-1/0;for(const o of e)for(const r of o){const a=r.valueOf();a<i&&(i=a,t=r),a>s&&(s=a,n=r)}return t!=null&&n!=null?{domain:[t,n],animatable:!0}:{domain:[],animatable:!1}}var QG=class ste extends DE{constructor(){super(...arguments),this.invalid=!0,this.range=[0,1],this.round=!1,this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(t){return t instanceof ste}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=Je(0,t,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this.invalid=!0,this._paddingInner=Je(0,t,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this.invalid=!0,this._paddingOuter=Je(0,t,1)}get paddingOuter(){return this._paddingOuter}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&fe.warnOnce("Expected update to not invalidate scale"))}convert(t,i){this.refresh();const n=this.findIndex(t,i?.alignment);return n==null||n<0||n>=this.bands.length?Number.NaN:this.ordinalRange(n)}invertNearestIndex(t){this.refresh();const i=this.bands.length;if(i===0)return-1;let n=0,s=i-1,o=1/0,r=0;for(;n<=s;){const a=Math.trunc((s+n)/2),l=this.ordinalRange(a),c=Math.abs(l-t);if(c===0)return a;c<o&&(o=c,r=a),l<t?n=a+1:s=a-1}return r}update(){const[t,i]=this.range;let{_paddingInner:n}=this;const{_paddingOuter:s,bands:o}=this,r=o.length;if(r===0)return;const a=i-t;let l;r===1?(n=0,l=a*(1-s*2)):l=a/Math.max(1,r-n+s*2);const c=this.round&&Math.floor(l)>0,u=c?Math.floor(l):l;let d=t+(a-u*(r-n))/2,p=u*(1-n);c&&(d=Math.round(d),p=Math.round(p)),this._step=u,this._inset=d,this._bandwidth=p,this._rawBandwidth=l*(1-n)}ordinalRange(t){const{_inset:i,_step:n,range:s}=this,o=Math.min(s[0],s[1]),r=Math.max(s[0],s[1]);return Je(o,i+n*t,r)}};E([Q0],QG.prototype,"range",2);E([Q0],QG.prototype,"round",2);var yh=QG,kc=class ote extends yh{static is(t){return t instanceof ote}toDomain(t){return new Date(t)}get reversed(){const{domain:t}=this;return t.length>0&&t[0].valueOf()>t.at(-1).valueOf()}convert(t,i){this.refresh(),t instanceof Date||(t=new Date(t));const{domain:n,bands:s,reversed:o}=this;if(n.length<=0)return Number.NaN;const r=this.ordinalRange(0),a=this.ordinalRange(s.length-1);if(s.length===0)return r;if(i?.clamp===!0){const{range:x}=this;if(t<s[0])return x[0];if(t>s.at(-1))return x[1]}if((i?.alignment??0)!==2){const x=super.convert(t,i);return o?a-(x-r):x}const c=t.valueOf();let u=this.findIndex(t)??0,d;o?(u=Math.min(Math.max(u,1),s.length-1),d=-1):(u=Math.min(Math.max(u,0),s.length-2),d=1);const p=s[u].valueOf(),f=s[u+d].valueOf(),m=this.ordinalRange(u),v=this.ordinalRange(u+d),C=(c-p)/(f-p)*(v-m)+m;return o?a-(C-r):C}invert(t,i=!1){this.refresh();const{domain:n,bands:s}=this;if(n.length<=0)return;const o=n[0].valueOf()>n.at(-1).valueOf();let r;return i?r=this.invertNearestIndex(t-this.bandwidth/2):r=Ww(0,s.length-1,l=>this.ordinalRange(l)>=t)??s.length-1,s[o?s.length-1-r:r]}findIndex(t,i=0){const{bands:n}=this,s=t.valueOf();return i===1?Ww(0,n.length-1,o=>n[o].valueOf()>=s):Qf(0,n.length-1,o=>n[o].valueOf()<=s)}},Zw={bottomCenter:tMe,center:eMe,clone:oMe,collides:rMe,end:QDe,from:aMe,height:nMe,round:sMe,start:qDe,topCenter:JDe,origin:lMe,width:iMe};function qDe(e){return{x:e.x1,y:e.y1}}function QDe(e){return{x:e.x2,y:e.y2}}function JDe(e){return{x:(e.x1+e.x2)/2,y:Math.min(e.y1,e.y2)}}function eMe(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}}function tMe(e){return{x:(e.x1+e.x2)/2,y:Math.max(e.y1,e.y2)}}function iMe(e){return Math.abs(e.x2-e.x1)}function nMe(e){return Math.abs(e.y2-e.y1)}function sMe(e){return{x1:Math.round(e.x1),y1:Math.round(e.y1),x2:Math.round(e.x2),y2:Math.round(e.y2)}}function oMe(e){return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}}function rMe(e,t){const i=e_(e),n=e_(t);return i.x1<=n.x2&&i.x2>=n.x1&&i.y1<=n.y2&&i.y2>=n.y1}function e_(e){return{x1:Math.min(e.x1,e.x2),x2:Math.max(e.x1,e.x2),y1:Math.min(e.y1,e.y2),y2:Math.max(e.y1,e.y2)}}function aMe(e,t,i,n){if(typeof e=="number")return{x1:e,y1:t,x2:i,y2:n};if("width"in e)return e_({x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height});throw new Error(`Values can not be converted into a vector4: [${JSON.stringify(e)}] [${t}] [${i}] [${n}]`)}function lMe(){return{x1:0,y1:0,x2:0,y2:0}}function XA(e,t,i,n,s){return t+(n-t)*((s-e)/(i-e))}function tY(e,t,i,n,s){return e+(s-t)*((i-e)/(n-t))}function iY(e,t,i){return[tY(e,i.min,t,i.max,0),tY(e,i.min,t,i.max,1)]}function cMe(e,t,i){const[n,s]=iY(e.x1,e.x2,t),[o,r]=iY(e.y1,e.y2,i);return{x1:n,x2:s,y1:o,y2:r}}function nY(e,t,i,n,s,o){if(i<=s&&o<=n)return i;const r=s-i,a=o-n,l=Math.abs(r)<Math.abs(a)?r:a;return Je(e,i+l,t)}function uMe(e,t,i){const{x:n={min:0,max:1},y:s={min:0,max:1}}=t,o=Zw.from(i),r=Zw.from(e),a=cMe(r,n,s),l=nY(a.x1,a.x2,r.x1,r.x2,o.x1,o.x2),c=nY(a.y1,a.y2,r.y1,r.y2,o.y1,o.y2),u={x:{min:XA(r.x1,n.min,r.x2,n.max,l),max:XA(r.x1,n.min,r.x2,n.max,l+e.width)},y:{min:XA(r.y1,s.min,r.y2,s.max,c),max:XA(r.y1,s.min,r.y2,s.max,c+e.height)}},d=u.x.max-u.x.min,p=u.y.max-u.y.min;return u.x.min=Je(0,u.x.min,1-d),u.x.max=u.x.min+d,u.y.min=Je(0,u.y.min,1-p),u.y.max=u.y.min+p,u}function rte(e,t){const i=e?.valueOf(),n=t?.valueOf();return typeof i!="number"||typeof n!="number"?[void 0,void 0]:i<n?[0,1]:[1,0]}var dMe=class{constructor(){this.enabled=!1,this.padding=0,this.manuallyAdjusted=!1}},sY=e=>Yt((t,{options:i})=>!mi.is(e?.scale)&&!kc.is(e?.scale)||t==null||i.end==null?!0:t<i.end,"to be less than end"),ate=class extends zG{constructor(e,t){super(),this.eventsHub=e,this.fireChartEvent=t,this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new Qb(void 0,"initial"),this.axes=[],this.didLayoutAxes=!1,this.autoScaleYAxis=new dMe,this.lastRestoredState=void 0,this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0,this.boundFireOnceChartEvent=this.fireOnceChartEvent.bind(this),this.cleanup.register(e.on("layout:complete",()=>{this.didLayoutAxes=!0;const{pendingMemento:i}=this;i&&this.restoreMemento(i.version,i.mementoVersion,i.memento),this.autoScaleYZoom("zoom-manager")}))}createMemento(){return this.getMementoRanges()}guardMemento(e,t){if(e==null)return!0;if(!St(e))return!1;const i=this.getPrimaryAxis("x"),n=this.getPrimaryAxis("y"),s={rangeX:{start:sY(i),end:at},rangeY:{start:sY(n),end:at},ratioX:{start:at,end:at},ratioY:{start:at,end:at},autoScaledAxes:at},{invalid:o}=yo(e,s);return o.length>0?(t.push(...o.map(String)),!1):!0}restoreMemento(e,t,i){const{independentAxes:n}=this;if(!this.axes||!this.didLayoutAxes){this.pendingMemento={version:e,mementoVersion:t,memento:i};return}this.pendingMemento=void 0;const s=this.getDefinedZoom();if(i?.rangeX?s.x=this.rangeToRatio(i.rangeX,"x")??{min:0,max:1}:i?.ratioX?s.x={min:i.ratioX.start??0,max:i.ratioX.end??1}:s.x={min:0,max:1},!this.navigatorModule||this.zoomModule){let a=i?.autoScaledAxes?.includes("y");if(i?.rangeY)a??(a=!1),s.y=this.rangeToRatio(i.rangeY,"y")??{min:0,max:1};else if(i?.ratioY)a??(a=!1),s.y={min:i.ratioY.start??0,max:i.ratioY.end??1};else{a??(a=!0);const l=a?this.getAutoScaleYZoom(s.x):void 0;s.y=l??{min:0,max:1}}s.autoScaleYAxis=a}if(this.lastRestoredState=s,n!==!0){this.updateZoom("zoom-manager",s);return}const o=this.getPrimaryAxis("x"),r=this.getPrimaryAxis("y");for(const a of[o,r])a&&this.updateAxisZoom("zoom-manager",a.id,s[a.direction])}updateAxes(e){const{axes:t,axisZoomManagers:i}=this,n=new Map(i);i.clear(),t.length=0;for(const s of e)typeof s=="string"?i.set(s,n.get(s)??new oY(s)):(t.push(s),i.set(s.id,n.get(s.id)??new oY(s)));this.state.size>0&&t.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}setIndependentAxes(e=!0){this.independentAxes=e}setAutoScaleYAxis(e,t){this.autoScaleYAxis.enabled=e,this.autoScaleYAxis.padding=t,e&&this.autoScaleYZoom("toggle-auto-scale")}setNavigatorEnabled(e=!0){this.navigatorModule=e}setZoomModuleEnabled(e=!0){this.zoomModule=e}isNavigatorEnabled(){return this.navigatorModule}isZoomEnabled(){return this.zoomModule}updateZoom(e,t){if(t?.x&&(t.x.min<0||t.x.max>1)&&(fe.warnOnce(`Attempted to update x-axis zoom to an invalid ratio of [{ min: ${t.x.min}, max: ${t.x.max} }], expecting a ratio of 0 to 1, ignoring.`),t.x=void 0),t?.y&&(t.y.min<0||t.y.max>1)&&(fe.warnOnce(`Attempted to update y-axis zoom to an invalid ratio of [{ min: ${t.y.min}, max: ${t.y.max} }], expecting a ratio of 0 to 1, ignoring.`),t.y=void 0),this.axisZoomManagers.size===0){const n=this.state.stateId();(n==="initial"||n===e)&&this.state.set(e,t);return}this.state.set(e,t);const i=t?.autoScaleYAxis;i!=null&&(this.autoScaleYAxis.manuallyAdjusted=!i);for(const n of this.axisZoomManagers.values())n.updateZoom(e,t?.[n.direction]);this.applyChanges(e)}updateAxisZoom(e,t,i){this.axisZoomManagers.get(t)?.updateZoom(e,i),this.applyChanges(e)}resetZoom(e){this.autoScaleYAxis.manuallyAdjusted=!1;const t=this.getRestoredZoom();this.updateZoom(e,{x:{min:t?.x?.min??0,max:t?.x?.max??1},y:{min:t?.y?.min??0,max:t?.y?.max??1},autoScaleYAxis:t?.autoScaleYAxis??!0})}resetAxisZoom(e,t){const n=this.axisZoomManagers.get(t)?.direction;if(n==null)return;const s=this.getRestoredZoom();if(n==="y"){const o=s?.autoScaleYAxis??!0;this.autoScaleYAxis.manuallyAdjusted=!o}for(const o of this.axes)o.direction===n&&this.updateAxisZoom(e,o.id,s?.[n]??{min:0,max:1})}setAxisManuallyAdjusted(e,t){this.axisZoomManagers.get(t)?.direction==="y"&&(this.autoScaleYAxis.manuallyAdjusted=!0)}updatePrimaryAxisZoom(e,t,i){const n=this.getPrimaryAxis(t);n&&this.updateAxisZoom(e,n.id,i)}panToBBox(e,t,i){if(!this.isZoomEnabled()&&!this.isNavigatorEnabled())return!1;const n=this.getZoom();if(n===void 0||!n.x&&!n.y)return!1;if(!(t.width>0&&t.height>0&&Math.abs(i.width)<=Math.abs(t.width)&&Math.abs(i.height)<=Math.abs(t.height)))return fe.warnOnce("cannot pan to target BBox - chart too small?"),!1;const o=uMe(t,n,i);return this.independentAxes?(this.updatePrimaryAxisZoom(e,"x",o.x),this.updatePrimaryAxisZoom(e,"y",o.y)):this.updateZoom(e,o),!0}fireZoomPanStartEvent(e){this.eventsHub.emit("zoom:pan-start",{callerId:e})}extendToEnd(e,t,i){return this.extendWith(e,t,n=>Number(n)-i)}extendWith(e,t,i){const n=this.getPrimaryAxis(t);if(!n)return;const s=this.getDomainExtents(n);if(!s)return;const[,o]=s,r=i(o),a=this.rangeToRatio({start:r},t);a&&this.updateZoom(e,{[t]:a})}updateWith(e,t,i){const n=this.getPrimaryAxis(t);if(!n)return;const s=this.getDomainExtents(n);if(!s)return;let[o,r]=s;[o,r]=i(o,r);const a=this.rangeToRatio({start:o,end:r},t);a&&this.updateZoom(e,{[t]:a})}getZoom(){let e,t;for(const i of this.axisZoomManagers.values())i.direction==="x"?e??(e=i.getZoom()):i.direction==="y"&&(t??(t=i.getZoom()));if(e||t)return{x:e,y:t}}getAxisZoom(e){return this.axisZoomManagers.get(e)?.getZoom()??{min:0,max:1}}getAxisZooms(){const e={};for(const[t,i]of this.axisZoomManagers.entries())e[t]={direction:i.direction,zoom:i.getZoom()};return e}getRestoredZoom(){return this.lastRestoredState}getPrimaryAxisId(e){return this.getPrimaryAxis(e)?.id}getBoundSeries(){const e=this.getPrimaryAxis("x"),t=this.getPrimaryAxis("y");let i;if(this.independentAxes){const n=new Set(e?.boundSeries??[]),s=new Set(t?.boundSeries??[]);i=new Set;for(const o of n)s.has(o)&&i.add(o)}else i=new Set([...e?.boundSeries??[],...t?.boundSeries??[]]);return i}constrainZoomToItemCount(e,t){const{autoScaleYAxis:i}=this,n=i.enabled&&!i.manuallyAdjusted;let s=[e.x.min,e.x.max],o=n?void 0:[e.y.min,e.y.max];for(const l of this.getBoundSeries()){const c=l.getZoomRangeFittingItems(s,o,t);if(c==null)return;s=c.x,o=c.y}const r={min:s[0],max:s[1]};let a;if(a??(a=this.getAutoScaleYZoom(r)),o&&(a={min:o[0],max:o[1]}),a!=null)return{x:r,y:a}}isVisibleItemsCountAtLeast(e,t,i){const{autoScaleYAxis:n}=this,s=this.getBoundSeries(),o=[e.x.min,e.x.max],r=!i&&n.enabled&&!n.manuallyAdjusted?void 0:[e.y.min,e.y.max];let a=0;for(const l of s){const c=t-(a??0),u=l.getVisibleItems(o,r,c);if(a+=u,a>=t)return!0}return s.size===0}getMementoRanges(){const e=this.getDefinedZoom();let t;return this.autoScaleYAxis.enabled&&(t=this.autoScaleYAxis.manuallyAdjusted?[]:["y"]),{rangeX:this.getRangeDirection(e.x,"x"),rangeY:this.getRangeDirection(e.y,"y"),ratioX:{start:e.x.min,end:e.x.max},ratioY:{start:e.y.min,end:e.y.max},autoScaledAxes:t}}getAutoScaleYZoom(e){if(!this.isZoomEnabled())return;const{independentAxes:t,autoScaleYAxis:i}=this;if(!i.enabled||i.manuallyAdjusted)return;const{padding:n}=i;let s;return t?s=this.primaryAxisZoom("y",e,{padding:n}):s=this.combinedAxisZoom("y",e,{padding:n}),e.min===0&&e.max===1?s==null?void 0:{min:0,max:1}:s}autoScaleYZoom(e,t=!0){const{independentAxes:i}=this,n=this.getZoom();if(n?.x==null)return;const s=this.getAutoScaleYZoom(n.x);if(!(s==null||yr(n.y,s))){if(i){const o=this.getPrimaryAxis("y");(o==null?void 0:this.axisZoomManagers.get(o.id))?.updateZoom("zoom-manager",s)}else for(const o of this.axisZoomManagers.values())o.direction==="y"&&o.updateZoom("zoom-manager",s);t&&this.applyChanges(e)}}applyChanges(e){if(this.autoScaleYZoom(e,!1),!Array.from(this.axisZoomManagers.values(),n=>n.applyChanges()).includes(!0))return;const i={};for(const[n,s]of this.axisZoomManagers.entries())i[n]=s.getZoom();this.eventsHub.emit("zoom:change",{...this.getZoom(),axes:i,callerId:e}),this.eventsHub.on("layout:complete",this.boundFireOnceChartEvent)}fireOnceChartEvent(){this.fireChartEvent({type:"zoom",...this.getMementoRanges()}),this.eventsHub.off("layout:complete",this.boundFireOnceChartEvent)}getRangeDirection(e,t){const i=this.getPrimaryAxis(t);if(!i||!mi.is(i.scale)&&!kc.is(i.scale))return;const n=this.getDomainPixelExtents(i);if(!n)return;const[s,o]=n;let r,a;return s<=o?(r=i.scale.invert(0),a=i.scale.invert(s+(o-s)*e.max)):(r=i.scale.invert(s-(s-o)*e.min),a=i.scale.invert(0)),{start:r,end:a}}rangeToRatio(e,t){const i=this.getPrimaryAxis(t);if(!i)return;const n=this.getDomainPixelExtents(i);if(!n)return;const[s,o]=n,{scale:r}=i,{start:a,end:l}=e,[c=0,u=1]=rte(a,l);let d=a==null?s:r.convert(a,{alignment:c}),p=l==null?o:r.convert(l,{alignment:u})+(r.bandwidth??0);if(!Kt(d)||!Kt(p))return;const[f,m]=[Math.min(s,o),Math.max(s,o)];if(d<f||d>m){fe.warnOnce(`Invalid range start [${a}], expecting a value between [${r.invert(s)}] and [${r.invert(o)}], ignoring.`);return}if(p<f||p>m){fe.warnOnce(`Invalid range end [${l}], expecting a value between [${r.invert(s)}] and [${r.invert(o)}], ignoring.`);return}d=Math.min(m,Math.max(f,d)),p=Math.min(m,Math.max(f,p));const v=o-s;if(v===0)return;const b=Math.abs((d-s)/v),C=Math.abs((p-s)/v);if(!(b>=C))return{min:b,max:C}}getPrimaryAxis(e){return this.axes?.find(t=>t.direction===e)}getDomainExtents(e){const{domain:t}=e.scale,i=t.at(0),n=t.at(-1);if(!(i==null||n==null))return[i,n]}getDomainPixelExtents(e){const[t,i]=e.scale.range;if(!(!Kt(t)||!Kt(i)))return[t,i]}getDefinedZoom(){const e=this.getZoom();return{x:{min:e?.x?.min??0,max:e?.x?.max??1},y:{min:e?.y?.min??0,max:e?.y?.max??1}}}zoomBounds(e,t,i,n){const s=e.scale,o=s.range;s.range=[0,1];const r=t.scale,a=r.range;r.range=[0,1];let l=1,c=!1,u=0,d=!1;for(const m of t.boundSeries){if(!m.visible)continue;const{connectsToYAxis:v}=m,b=m.getRange("y",[i.min,i.max]);for(const C of b){const x=r.convert(C);Number.isFinite(x)&&(x<l&&(l=x,c=!v||C<0),x>u&&(u=x,d=!v||C>0))}}if(Kt(t.min)&&(l=0),Kt(t.max)&&(u=1),s.range=o,r.range=a,l>=u)return;const p=(c?n:0)+(d?n:0),f=Math.min((u-l)*(1+p),1);if(!(f<=0)){if(c&&d){const m=(u+l)/2;l=m-f/2,u=m+f/2}else!c&&d?u=l+f:c&&!d&&(l=u-f);return l<0?(u+=-l,l=0):u>1&&(l-=u-1,u=1),{min:l,max:u}}}primaryAxisZoom(e,t,{padding:i=0}={}){const n=e==="x"?"y":"x",s=this.getPrimaryAxis(n),o=this.getPrimaryAxis(e);if(!(s==null||o==null))return this.zoomBounds(s,o,t,i)}combinedAxisZoom(e,t,{padding:i=0}={}){const n=e==="x"?"y":"x",s=new Map;for(const l of this.axes)if(l.direction===n)for(const c of l.boundSeries)s.set(c,l);let o=1,r=0;for(const l of this.axes)if(l.direction===e)for(const c of l.boundSeries){const u=s.get(c);if(u==null)continue;const d=this.zoomBounds(u,l,t,i);if(d==null)return;o=Math.min(o,d.min),r=Math.max(r,d.max)}const a=1e-6;if(o<a&&(o=0),r>1-a&&(r=1),!(o>r))return{min:o,max:r}}},oY=class{constructor(e){let t,i;typeof e=="string"?(this.direction=e,t=0,i=1):(this.direction=e.direction,[t=0,i=1]=e.visibleRange),this.state=new Qb({min:t,max:i}),this.currentZoom=this.state.stateValue()}updateZoom(e,t){this.state.set(e,t)}getZoom(){return fn(this.state.stateValue())}hasChanges(){const e=this.currentZoom,t=this.state.stateValue();return e.min!==t.min||e.max!==t.max}applyChanges(){const e=this.hasChanges();return this.currentZoom=this.state.stateValue(),e}},JG=(e=>(e[e.Caption=0]="Caption",e[e.Legend=1]="Legend",e[e.ToolbarLeft=2]="ToolbarLeft",e[e.ToolbarBottom=3]="ToolbarBottom",e[e.Navigator=4]="Navigator",e[e.Overlay=5]="Overlay",e))(JG||{}),lte=class{constructor(e){this.eventsHub=e,this.elements=new Map}registerElement(e,t){return this.elements.has(e)?this.elements.get(e).add(t):this.elements.set(e,new Set([t])),()=>this.elements.get(e)?.delete(t)}createContext(e,t){const i=new hMe(e,t);for(const n of Object.values(JG)){if(typeof n!="number")continue;const s=this.elements.get(n);if(s)for(const o of s)o(i)}return i}emitLayoutComplete(e,t){const{width:i,height:n}=e;this.eventsHub.emit("layout:complete",{axes:t.axes??[],chart:{width:i,height:n},clipSeries:t.clipSeries??!1,series:t.series})}},hMe=class{constructor(e,t){this.width=e,this.height=t,this.layoutBox=new He(0,0,e,t)}};function pMe({point:e,anchor:t},i,n,s,o){if(e.size===0)return!1;let r=e.x,a=e.y;t!=null&&(r-=(t.x-.5)*e.size,a-=(t.y-.5)*e.size);let l=r;r<i?l=i:r>i+s&&(l=i+s);let c=a;a<n?c=n:a>n+o&&(c=n+o);const u=r-l,d=a-c;return Math.hypot(u,d)<=e.size/2}function gMe(e){return e!=null&&typeof e.point=="object"&&typeof e.label=="object"}var fMe={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}};function mMe(e,t,i=5){const n=new Map,s=[],o=new Map(Array.from(e.entries(),([a,l])=>[a,l.toSorted((c,u)=>u.point.size-c.point.size)])),r=[...o.values()].flat();for(const[a,l]of o.entries()){const c=[];if(l[0]?.label){for(let u=0,d=l.length;u<d;u++){const p=l[u],{point:f,label:m,anchor:v}=p,{text:b,width:C,height:x}=m,w=f.size/2;let M=0,T=0;if(w>0&&p.placement!=null){const R=fMe[p.placement];M=(C/2+w+i)*R.x,T=(x/2+w+i)*R.y}let L=f.x-C/2+M,I=f.y-x/2+T;if(v&&(L-=(v.x-.5)*f.size,I-=(v.y-.5)*f.size),MG(t,L,I,C,x)&&!r.some(R=>pMe(R,L,I,C,x))&&!s.some(R=>PJ(R,L,I,C,x))){const R={index:u,text:b,x:L,y:I,width:C,height:x,datum:p};c.push(R),s.push(R)}}n.set(a,c)}}return n}var yMe=class{constructor(){this.labelData=new Map}updateLabels(e,t,i=He.zero){const n={x:-t.left,y:-t.top,width:i.width+t.left+t.right,height:i.height+t.top+t.bottom},s=new Set(e.map(r=>r.id));for(const r of this.labelData.keys())s.has(r)||this.labelData.delete(r);for(const r of e){const a=r.getLabelData();a.every(gMe)&&this.labelData.set(r.id,a)}const o=mMe(this.labelData,n,5);for(const r of e)r.updatePlacedLabelData?.(o.get(r.id)??[])}},vMe=class{constructor(e){this.eventsHub=e,this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter(({hideInLegend:e,isFixed:t})=>!e&&!t).map(({enabled:e,seriesId:t,itemId:i,legendItemName:n})=>({visible:e,seriesId:t,itemId:i,legendItemName:n}))}guardMemento(e){return e==null||ft(e)}restoreMemento(e,t,i){if(i)for(const n of i){const{seriesId:s,data:o}=this.getRestoredData(n)??{};!s||!o||this.updateData(s,o)}this.update()}getRestoredData(e){const{seriesId:t,itemId:i,legendItemName:n,visible:s}=e;if(t){const r=(this.legendDataMap.get(t)??[]).map(a=>{const l=a.seriesId===t&&(!i||a.itemId===i);return l&&a.isFixed&&this.warnFixed(a.seriesId,a.itemId),!a.isFixed&&l?{...a,enabled:s}:a});return{seriesId:t,data:r}}if(!(i==null&&n==null))for(const o of this.getData()){if(i!=null&&o.itemId!==i||n!=null&&o.legendItemName!==n)continue;if(o.isFixed){this.warnFixed(o.seriesId,i);return}const r=(this.legendDataMap.get(o.seriesId)??[]).map(a=>a.itemId===i||a.legendItemName===n?{...a,enabled:s}:a);return{seriesId:o.seriesId,data:r}}}warnFixed(e,t){fe.warnOnce(`The legend item with seriesId [${e}] and itemId [${t}] is not configurable, this series item cannot be toggled through the legend.`)}update(e){this.eventsHub.emit("legend:change",{legendData:e??this.getData()})}updateData(e,t=[]){this.eventsHub.emit("legend:change-partial",{seriesId:e,legendData:t}),this.legendDataMap.set(e,t)}clearData(){this.legendDataMap.clear()}toggleItem(e,t,i,n){if(n){for(const a of this.getData()){const l=(this.legendDataMap.get(a.seriesId)??[]).map(c=>c.legendItemName===n?{...c,enabled:e}:c);this.updateData(a.seriesId,l)}return}const s=this.getData(t),o=s.length===1,r=s.map(a=>i==null&&o||a.itemId===i?{...a,enabled:e}:a);this.updateData(t,r)}getData(e){return e?this.legendDataMap.get(e)??[]:[...this.legendDataMap].reduce((t,[i,n])=>t.concat(n),[])}getDatum({seriesId:e,itemId:t}={}){return this.getData(e).find(i=>i.itemId===t)}getSeriesEnabled(e){const t=this.getData(e);if(t.length>0)return t.some(i=>i.enabled)}getItemEnabled({seriesId:e,itemId:t}={}){return this.getDatum({seriesId:e,itemId:t})?.enabled??!0}},bMe=class{updateCallback(e){this.resolvePartialCallback=e}resolvePartial(e,t,i){return this.resolvePartialCallback?.(e,t,i)}},SMe=class{constructor(){this.groups=new Map}registerSeries({internalId:e,seriesGrouping:t,visible:i,type:n}){if(!t)return;let s=this.groups.get(n);s==null&&(s=new Map,this.groups.set(n,s)),s.set(e,{grouping:t,visible:i})}updateSeries({internalId:e,seriesGrouping:t,visible:i,type:n}){if(!t)return;const s=this.groups.get(n)?.get(e);s&&(s.grouping=t,s.visible=i)}deregisterSeries({internalId:e,type:t}){const i=this.groups.get(t);i!=null&&(i.delete(e),i.size===0&&this.groups.delete(t))}getVisiblePeerGroupIndex({type:e,seriesGrouping:t,visible:i}){if(!t)return{visibleGroupCount:i?1:0,visibleSameStackCount:i?1:0,index:0};const n=new Set,s=new Set,o=this.groups.get(e);for(const a of o?.values()??[])a.visible&&(n.add(a.grouping.groupIndex),a.grouping.groupIndex===t.groupIndex&&s.add(a.grouping.stackIndex));const r=Array.from(n);return r.sort((a,l)=>a-l),{visibleGroupCount:r.length,visibleSameStackCount:s.size,index:r.indexOf(t.groupIndex)}}},cte=class{constructor(e){this.updateCallback=e,this.events=new Dc}addListener(e,t){return this.events.on(e,t)}destroy(){this.events.clear()}update(e=0,t){this.updateCallback(e,t)}dispatchUpdateComplete(e){this.events.emit("update-complete",{type:"update-complete",apiUpdate:e})}dispatchPreDomUpdate(){this.events.emit("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(){this.events.emit("pre-scene-render",{type:"pre-scene-render"})}dispatchProcessData({series:e}){this.events.emit("process-data",{type:"process-data",series:e})}},CMe=class{constructor(e,t){this.eventsHub=new Dc,this.callbackCache=new pee,this.highlightManager=new qee(this.eventsHub),this.formatManager=new tS,this.layoutManager=new lte(this.eventsHub),this.localeManager=new wDe(this.eventsHub),this.seriesStateManager=new SMe,this.stateManager=new iDe,this.seriesLabelLayoutManager=new yMe,this.cleanup=new _i,this.contextModules=[];const{scene:i,root:n,syncManager:s,container:o,fireEvent:r,updateCallback:a,updateMutex:l,styleContainer:c,chartType:u,domMode:d,withDragInterpretation:p}=t;this.chartService=e,this.syncManager=s,this.domManager=new Oee(this.eventsHub,this.chartService,o,c,d),this.widgets=new ZDe(this.domManager,{withDragInterpretation:p});const f=this.domManager.addChild("canvas","scene-canvas",i?.canvas.element);this.scene=i??new LE({canvasElement:f}),this.scene.setRoot(n),this.cleanup.register(this.scene.on("scene-changed",()=>{this.updateService.update(7)})),this.axisManager=new kDe(this.eventsHub,n),this.legendManager=new vMe(this.eventsHub),this.annotationManager=new ADe(this.eventsHub,e.annotationRoot,r),this.chartTypeOriginator=new eDe(e),this.interactionManager=new Kee,this.contextMenuRegistry=new Zee(this.eventsHub),this.optionsGraphService=new bMe,this.updateService=new cte(a),this.proxyInteractionService=new _ee(this.eventsHub,this.localeManager,this.domManager),this.fontManager=new TDe(this.domManager,this.updateService),this.historyManager=new tDe(this.eventsHub),this.animationManager=new Yee(this.interactionManager,l),this.dataService=new PE(this.eventsHub,e,this.animationManager),this.tooltipManager=new UI(this.eventsHub,this.localeManager,this.domManager,e.tooltip),this.zoomManager=new ate(this.eventsHub,r);for(const m of Du.byType("context")){if(!m.chartTypes.includes(u))continue;const v=m.moduleFactory(this);this.contextModules.push(v),this[m.contextKey]=v}}destroy(){this.animationManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.domManager.destroy(),this.fontManager.destroy(),this.proxyInteractionService.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.widgets.destroy();for(const e of this.contextModules)e.destroy();this.cleanup.flush()}},eV=class extends pt{constructor(){super(...arguments),this.range="tooltip",this.drawingMode="overlay"}};E([F],eV.prototype,"range",2);E([F],eV.prototype,"drawingMode",2);function xMe(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function wMe(e,t){if(e==null||t==null)return e===t;if(e.size!==t.size)return!1;for(const[i,n]of e){const s=t.get(i);if(s==null||!xMe(n,s))return!1}return!0}function DMe(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1){const{type:n,idsMap:s,scopes:o,data:r,...a}=e[i],{type:l,idsMap:c,scopes:u,data:d,...p}=t[i];if(n!==l||o&&u&&!El(o,u)||r&&d&&r!==d||!yr(a,p)||!wMe(s,c))return!1}return!0}function MMe(e,t){const{props:i,...n}=e,{props:s,...o}=t;return yr(n,o)&&DMe(i,s)}function AMe(e,t,i,n){return t!==e.dataSet?!1:El(i,e.ids)&&MMe(n,e.opts)}function kMe(e){return e.removedIndices.size===0&&e.totalPrependCount===0&&e.totalAppendCount>0}function TMe(e){return e.removedIndices.size===0&&e.totalAppendCount===0&&e.totalPrependCount>0}function IMe(e){return e.removedIndices.size===0}var ute=class{constructor(e,t){this.indexMap=e,this.prependValues=t.prependValues,this.appendValues=t.appendValues}getRemovedIndices(){return Array.from(this.indexMap.removedIndices).sort((e,t)=>e-t)}forEachPreservedIndex(e){const{originalLength:t,removedIndices:i,totalPrependCount:n}=this.indexMap;let s=0;const o=Array.from(i).sort((a,l)=>a-l);let r=0;for(let a=0;a<t;a++){for(;r<o.length&&o[r]<a;)s++,r++;if(!i.has(a)){const l=a+n-s;e(a,l)}}}getPrependedValues(){return this.prependValues}getAppendedValues(){return this.appendValues}applyToArray(e,t,i){const{spliceOps:n,finalLength:s,originalLength:o}=this.indexMap;if(!(o===s&&n.length===0)){for(const r of n){const a=r.insertCount>0?Array.from({length:r.insertCount},(c,u)=>t(r.index+u)):[],l=e.splice(r.index,r.deleteCount,...a);i&&l.length>0&&i(l,r)}e.length!==s&&(e.length=s)}}},aF=class dte{constructor(){this.domain=new Set}static is(t){return t instanceof dte}extend(t){this.domain.add(t)}getDomain(){return Array.from(this.domain)}},al=class hte{constructor(){this.domain=[1/0,-1/0]}static is(t){return t instanceof hte}static extendDomain(t,i=[1/0,-1/0]){for(const n of t)typeof n=="number"&&(i[0]>n&&(i[0]=n),i[1]<n&&(i[1]=n));return i}extend(t){typeof t!="number"&&!(t instanceof Date)||(this.domain[0]>t&&(this.domain[0]=t),this.domain[1]<t&&(this.domain[1]=t))}getDomain(){return[...this.domain]}},RMe=1e3,EMe=10,mf=class{constructor(e,t={},i=!1){this.bands=[],this.dataSize=0,this.fullDomainCache=null,this.needsReinitialization=!1,this.domainFactory=e,this.isDiscrete=i,this.config={minDataSizeForBanding:t.minDataSizeForBanding??RMe,targetBandCount:t.targetBandCount??EMe,maxBandSize:t.maxBandSize??1/0,enableBanding:t.enableBanding??!0}}initializeBands(e){if(this.dataSize=e,this.fullDomainCache=null,this.needsReinitialization=!1,!this.config.enableBanding||e<this.config.minDataSizeForBanding){this.bands=[{startIndex:0,endIndex:e,subDomain:this.domainFactory(),isDirty:!0}];return}const t=this.getTargetBandCount(this.dataSize),i=Math.ceil(e/t);this.bands=[];for(let n=0;n<t;n++){const s=n*i,o=Math.min((n+1)*i,e);this.bands.push({startIndex:s,endIndex:o,subDomain:this.domainFactory(),isDirty:!0})}}findAffectedBands(e,t){const i=[];for(let n=0;n<this.bands.length;n++){const s=this.bands[n];e<s.endIndex&&t>s.startIndex&&i.push(n)}return i}markBandsDirty(e,t){const i=this.findAffectedBands(e,t);for(const n of i)this.bands[n].isDirty=!0;this.fullDomainCache=null}handleInsertion(e,t){this.dataSize+=t,this.fullDomainCache=null;for(let i=0;i<this.bands.length;i++){const n=this.bands[i],s=i===this.bands.length-1;e<=n.startIndex?(n.startIndex+=t,n.endIndex+=t):(e<n.endIndex||e===n.endIndex&&s)&&(n.endIndex+=t,n.isDirty=!0)}this.considerRebalancing()}handleRemoval(e,t){this.dataSize-=t,this.fullDomainCache=null;for(const n of this.bands)if(e+t<=n.startIndex)n.startIndex=Math.max(0,n.startIndex-t),n.endIndex=Math.max(n.startIndex,n.endIndex-t);else if(e<n.endIndex){if(e<=n.startIndex){const s=Math.min(t,n.endIndex-n.startIndex);n.startIndex=e,n.endIndex=Math.max(n.startIndex,n.endIndex-s)}else n.endIndex=Math.max(n.startIndex,n.endIndex-t);n.isDirty=!0}this.bands=this.bands.filter(n=>n.endIndex>n.startIndex);let i=!1;if(this.bands.length>1){this.bands[0].startIndex!==0&&(i=!0);for(let n=1;n<this.bands.length;n++)if(this.bands[n].startIndex!==this.bands[n-1].endIndex){this.needsReinitialization=!0;break}}if(i&&!this.needsReinitialization){const n=this.bands[0].startIndex;for(const s of this.bands)s.startIndex-=n,s.endIndex-=n}this.considerRebalancing()}markAllBandsDirty(){for(const e of this.bands)e.isDirty=!0;this.fullDomainCache=null}considerRebalancing(){if(!this.needsReinitialization)return;if(this.dataSize<this.config.minDataSizeForBanding){this.bands.length>1&&this.initializeBands(this.dataSize);return}if(this.config.maxBandSize<1/0&&Math.max(...this.bands.map(i=>i.endIndex-i.startIndex))>this.config.maxBandSize){this.initializeBands(this.dataSize);return}const e=this.getTargetBandCount(this.dataSize);Math.abs(this.bands.length-e)>e*.5&&this.initializeBands(this.dataSize)}getTargetBandCount(e){return Math.max(this.config.targetBandCount,Math.ceil(e/1e3))}extendBandsFromData(e,t){const i=e.length;for(const n of this.bands){if(!n.isDirty)continue;n.subDomain=this.domainFactory();const{startIndex:s,endIndex:o}=n;for(let r=s;r<o&&r<i;r++)t?.[r]||n.subDomain.extend(e[r]);n.isDirty=!1}this.fullDomainCache=null}getDirtyBands(){return this.bands.filter(e=>e.isDirty)}extend(e){this.markAllBandsDirty(),this.fullDomainCache=null}getDomain(){if(this.fullDomainCache!==null)return this.fullDomainCache;if(this.bands.length===0)return this.fullDomainCache=[],[];if(this.bands.length===1)return this.fullDomainCache=this.bands[0].subDomain.getDomain(),this.fullDomainCache;if(this.isDiscrete){const e=new Set;for(const t of this.bands){const i=t.subDomain.getDomain();for(const n of i)e.add(n)}this.fullDomainCache=Array.from(e)}else{let e,t;for(const i of this.bands){const n=i.subDomain.getDomain();if(n.length===2){const[s,o]=n;(e===void 0||s!=null&&e!=null&&s<e)&&(e=s),(t===void 0||o!=null&&t!=null&&o>t)&&(t=o)}}e!==void 0&&t!==void 0?this.fullDomainCache=[e,t]:this.fullDomainCache=[]}return this.fullDomainCache}getStats(){const e=this.bands.filter(i=>i.isDirty).length,t=this.bands.reduce((i,n)=>i+(n.endIndex-n.startIndex),0);return{bandCount:this.bands.length,dirtyBandCount:e,averageBandSize:this.bands.length>0?t/this.bands.length:0,dataSize:this.dataSize,needsReinitialization:this.needsReinitialization}}},Dv=0,Mv=1,$c=2,LMe=class{constructor(e){const t=e.reduce((o,r)=>Math.max(o,r.length),0);let n=1<<32-Math.clz32(t);t===n/2&&(n=n>>>1),this.maxLevelSize=n;const s=new Float64Array((n*2-1)*2).fill(Number.NaN);for(const o of e)for(let r=0;r<o.length;r+=1){const a=Number(o[r]),l=n+r-1,c=Math.trunc(l*$c)+Dv,u=Math.trunc(l*$c)+Mv,d=s[c],p=s[u];(!Number.isFinite(d)||a<d)&&(s[c]=a),(!Number.isFinite(p)||a>p)&&(s[u]=a)}for(let o=Math.trunc(n/2);o>=1;o=Math.trunc(o/2)){const r=Math.trunc(o-1),a=Math.trunc(r+o);for(let l=0;l<o;l+=1){const c=r+l,u=a+l*2,d=u+1,p=s[Math.trunc(u*$c)+Dv],f=s[Math.trunc(d*$c)+Dv];s[Math.trunc(c*$c)+Dv]=!Number.isFinite(f)||p<f?p:f;const m=s[Math.trunc(u*$c)+Mv],v=s[Math.trunc(d*$c)+Mv];s[Math.trunc(c*$c)+Mv]=!Number.isFinite(v)||m>v?m:v}}this.buffer=s}computeRangeInto(e,t,i,n,s,o,r){const a=s+o-1;if(a<t||s>=i)return r;if(s>=t&&a<i){const l=e[Math.trunc(n*$c)+Dv],c=e[Math.trunc(n*$c)+Mv];Number.isFinite(l)&&(r[0]=Math.min(r[0],l)),Number.isFinite(c)&&(r[1]=Math.max(r[1],c))}else o>1&&(n=Math.trunc(n*2),o=Math.trunc(o/2),this.computeRangeInto(e,t,i,Math.trunc(n+1),s,o,r),this.computeRangeInto(e,t,i,Math.trunc(n+2),s+o,o,r));return r}rangeBetween(e,t){if(e>t)return[Number.NaN,Number.NaN];const{maxLevelSize:i,buffer:n}=this,s=[1/0,-1/0];return this.computeRangeInto(n,e,t,0,0,i,s),s}get range(){const{buffer:e}=this;return[e[Dv],e[Mv]]}};function PMe(e,t){const i=e.length;if(e.length<=1)return 1;let n=0,s=e[0];for(let o=1;o<i;o++){const r=e[o];if(r==null)continue;if(typeof(t?r.valueOf():r)!="number")return;const l=Math.sign(r-s);if(l!==0){if(n!==0&&n!==l)return;n=l}s=r}return n===0?1:n}var lF=Symbol("key-sort-orders"),cF=Symbol("column-sort-orders"),uF=Symbol("domain-ranges"),Mx=Symbol("domain-bands"),rY=Object.freeze([0]);function dF(e){return e.map(t=>St(t)?JSON.stringify(t):t).join("-")}function Xr(e){const t=e?.map(Number);return t?.every(Number.isFinite)?t:[]}function pte(e,t){return t?.get(e.id)??0}function aY(e){return"scopes"in e&&Array.isArray(e.scopes)}function Ax(e,t){const i=[];for(let n=0;n<e;n+=1)i[n]=t;return i}function $I(e,t){const i=[];for(const n of e){const s=n?.[t];if(s==null)return;i.push(s)}return i}function gte(e){const t=[];let i=0,n;const s=new RegExp(`((?:(?:^|\\.)\\s*\\w+|\\[\\s*(?:'(?:[^']|(?<!\\\\)\\\\')*'|"(?:[^"]|(?<!\\\\)\\\\")*"|-?\\d+)\\s*\\])\\s*)`,"g");for(;n=s.exec(e);){if(n.index!==i)return;i=n.index+n[0].length;const o=n[1].trim();if(o.startsWith("."))t.push(o.slice(1).trim());else if(o.startsWith("[")){const r=o.slice(1,-1).trim();r.startsWith("'")?t.push(r.slice(1,-1).replaceAll(new RegExp("(?<!\\\\)\\\\'","g"),"'")):r.startsWith('"')?t.push(r.slice(1,-1).replaceAll(new RegExp('(?<!\\\\)\\\\"',"g"),'"')):t.push(r)}else t.push(o)}if(i===e.length)return t}function NMe(e){return t=>{let i=t;for(const n of e)i=i[n];return i}}var t_=class{constructor(e,t="standalone",i=!1){this.opts=e,this.mode=t,this.suppressFieldDotNotation=i,this.debug=Ct.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[],this.markScopeDatumInvalid=function(a,l,c,u){for(const d of a)u.has(d)||u.set(d,Ax(l.length,!1)),u.get(d)[c]=!0};let n=!0;for(const a of e.props){if(a.type==="key"&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");a.type==="value"&&n&&(n=!1)}const s=({matchGroupIds:a=[]})=>{for(const l of a)if(this.values.every(c=>c.groupId!==l))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${l}).`)},o=new Set,r=new Set;for(const a of e.props){const l=a.type==="key"?o:r;if(aY(a)&&a.scopes)for(const c of a.scopes)l.add(c);switch(a.type){case"key":this.keys.push({...a,index:this.keys.length,missing:new Map});break;case"value":if(a.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(a)}`);this.values.push({...a,index:this.values.length,missing:new Map});break;case"aggregate":s(a),this.aggregates.push({...a,index:this.aggregates.length});break;case"group-value-processor":s(a),this.groupProcessors.push({...a,index:this.groupProcessors.length});break;case"property-value-processor":this.propertyProcessors.push({...a,index:this.propertyProcessors.length});break;case"reducer":this.reducers.push({...a,index:this.reducers.length});break;case"processor":this.processors.push({...a,index:this.processors.length});break}}if(this.opts.groupByKeys||this.opts.groupByFn!=null){const a=new Set(r.values());for(const l of o)a.delete(l);if(a.size>0)throw new Error(`AG Charts - scopes missing key for grouping, illegal configuration: ${[...a.values()]}`)}}resolveProcessedDataDefById(e,t){const i=this.scopeCache.get(e.id)?.get(t);if(!i)throw new Error(`AG Charts - didn't find property definition for [${t}, ${e.id}]`);return{index:i.index,def:i}}resolveProcessedDataIndexById(e,t){return this.resolveProcessedDataDefById(e,t).index}resolveKeysById(e,t,i){const n=this.resolveProcessedDataIndexById(e,t),s=i.keys[n];if(s==null)throw new Error(`AG Charts - didn't find keys for [${t}, ${e.id}]`);return s.get(e.id)}hasColumnById(e,t){return this.scopeCache.get(e.id)?.get(t)!=null}resolveColumnById(e,t,i){const n=this.resolveProcessedDataIndexById(e,t),s=i.columns?.[n];if(s==null)throw new Error(`AG Charts - didn't find column for [${t}, ${e.id}]`);return s}resolveColumnNeedsValueOf(e,t,i){const n=this.resolveProcessedDataIndexById(e,t);return i.columnNeedValueOf?.[n]??!0}resolveAbsoluteIndex(e,t){return e+t}*forEachDatum(e,t,i,n){const s=t.columnScopes.findIndex(o=>o.has(e.id));for(const o of i.datumIndices[s]??[]){const r=this.resolveAbsoluteIndex(n,o);yield t.columns[s][r]}}getUniqueDataSets(e){return new Set(e.dataSources.values())}*forEachGroupDatum(e,t){const i=t.columnScopes.findIndex(o=>o.has(e.id)),n={groupIndex:0,columnIndex:i},s=[];for(const o of t.groups){n.group=o;for(const r of o.datumIndices[i]??s)n.datumIndex=this.resolveAbsoluteIndex(n.groupIndex,r),yield n;n.groupIndex++}}getDomain(e,t,i,n){return this.getDomainsByType(i??"value",n)?.[this.resolveProcessedDataIndexById(e,t)]??[]}getDomainBetweenRange(e,t,[i,n],s){const o=t.map(c=>this.resolveProcessedDataIndexById(e,c)),r=o.join(":"),a=s[uF];let l=a.get(r);if(l==null){const c=o.map(u=>s.columns[u]);l=new LMe(c),a.set(r,l)}return l.rangeBetween(i,n)}getSortOrder(e,t,i,n){let s=i.get(t);return s==null&&(s={sortOrder:PMe(e,n)},i.set(t,s)),s.sortOrder}getKeySortOrder(e,t,i){const n=this.resolveProcessedDataIndexById(e,t),s=i.keys[n]?.get(e.id);return s?this.getSortOrder(s,n,i[lF],!0):void 0}getColumnSortOrder(e,t,i){const n=this.resolveProcessedDataIndexById(e,t),s=i.columnNeedValueOf?.[n]??!0;return this.getSortOrder(i.columns[n],n,i[cF],s)}getDomainsByType(e,t){switch(e){case"key":return t.domain.keys;case"value":return t.domain.values;case"aggregate":return t.domain.aggValues;case"group-value-processor":return t.domain.groups;default:return null}}processData(e){const{opts:{groupByKeys:t,groupByFn:i},aggregates:n,groupProcessors:s,reducers:o,processors:r,propertyProcessors:a}=this,l=performance.now();if(t&&this.keys.length===0)return;let c=this.extractData(e);t?c=this.groupData(c):i&&(c=this.groupData(c,i(c))),s.length>0&&c.type==="grouped"&&this.postProcessGroups(c),n.length>0&&c.type==="ungrouped"?this.aggregateUngroupedData(c):n.length>0&&c.type==="grouped"&&this.aggregateGroupedData(c),a.length>0&&this.postProcessProperties(c),o.length>0&&this.reduceData(c),r.length>0&&this.postProcessData(c),this.warnDataMissingProperties(e);const u=performance.now();return c.time=u-l,this.collectOptimizationMetadata(c,"full-process"),this.debug.check()&&OMe(c),this.processScopeCache(),c}isReprocessingSupported(e){if(e.type==="grouped"){if(!e.groupsUnique||this.getUniqueDataSets(e).size!==1)return!1;const i=Uc(e.scopes);if(e.invalidKeys?.get(i)?.some(s=>s))return!1}return this.aggregates.length>0||this.reducers.length>0||this.processors.length>0||this.propertyProcessors.length>0?!1:this.groupProcessors.every(t=>t.supportsReprocessing??!1)}reprocessData(e,t){if(!this.isReprocessingSupported(e)){this.debug.check()&&this.debug("Falling back to full reprocessing - incremental not supported for current configuration");const l=this.getUniqueDataSets(e);for(const c of l)c.commitPendingTransactions();return this.processData(e.dataSources)}const i=performance.now(),n=this.collectScopeChanges(e,t);if(n.size===0)return e;this.commitPendingTransactions(e);const{processValue:s}=this.initDataDomainProcessor("skip"),o=this.processAllInsertions(e,n,s);this.updateBandsForChanges(e,n);const r=this.transformKeysArrays(e,n,o);this.transformColumnsArrays(e,n,o),this.transformInvalidityArrays(e,n,o),e.type==="grouped"&&(this.transformGroupsArray(e,n,o),this.groupProcessors.length>0&&this.reprocessGroupProcessors(e,n)),this.recomputeDomains(e),e.reduced?.diff!=null&&n.size>0&&this.generateDiffMetadata(e,n,r),this.updateProcessedDataMetadata(e);const a=performance.now();return e.time=a-i,this.collectOptimizationMetadata(e,"reprocess"),e}applyOperationToBandedDomains(e,t){for(const i of e.values())i instanceof mf&&t(i)}updateBandsForChanges(e,t){const i=e[Mx];if(i.size===0)return;const n=new Set;for(const[,s]of t){if(n.has(s))continue;n.add(s);const{indexMap:o}=s,{spliceOps:r}=o;for(const a of r)a.insertCount>0&&this.applyOperationToBandedDomains(i,l=>l.handleInsertion(a.index,a.insertCount)),a.deleteCount>0&&this.applyOperationToBandedDomains(i,l=>l.handleRemoval(a.index,a.deleteCount))}}collectScopeChanges(e,t){const i=new Map;for(const[n,s]of e.dataSources){const o=t?.get(s)??s.getChangeDescription();o&&i.set(n,o)}return i}commitPendingTransactions(e){const t=this.getUniqueDataSets(e);for(const i of t)i.commitPendingTransactions()}processAllInsertions(e,t,i){const n=new Map;for(const[s,o]of t){const r=e.dataSources.get(s);if(!r)continue;const a=this.processInsertionsOnce(s,o,r,i);n.set(s,a)}return n}transformArraysWithCache(e,t,i,n,s,o){for(const[r,a]of e.entries())for(const l of s(a)){const c=t.get(l);if(!c)continue;const u=n(r,l);if(!u)continue;const d=i.get(l);c.applyToArray(u,p=>{const f=d?.get(p);return o(f,a,r)})}}transformKeysArrays(e,t,i){const n=new Map,s=a=>{let l=n.get(a);return l||(l={tuples:[]},n.set(a,l)),l},o=new WeakSet;for(const[a,l]of this.keys.entries())for(const c of l.scopes??[]){const u=t.get(c);if(!u)continue;const d=e.keys[a]?.get(c);if(!d)continue;if(o.has(d)){const v=Array.from(e.keys[a].entries()).find(([b,C])=>C===d)?.[0];v&&v!==c&&n.has(v)&&n.set(c,n.get(v));continue}o.add(d);const p=i.get(c),f=s(c);let m=0;u.applyToArray(d,v=>{const b=p?.get(v);if(b){const C=b.keys.get(a);return C?.valid?C.value:l.invalidValue}return l.invalidValue},v=>{for(const b of v)f.tuples[m]||(f.tuples[m]=new Array(this.keys.length)),f.tuples[m][a]=b,m+=1})}const r=new Map;for(const[a,{tuples:l}]of n){if(l.length===0)continue;const c=new Set;for(const u of l){const d=[];for(const[p,f]of u.entries())this.keys[p].scopes?.includes(a)&&d.push(f);d.length>0&&c.add(dF(d))}r.set(a,c)}return r}transformColumnsArrays(e,t,i){this.transformArraysWithCache(this.values,t,i,n=>e.columns[n],n=>[Uc(n.scopes)],(n,s,o)=>{if(n){const r=n.values.get(o);return r?.valid?r.value:s.invalidValue}return s.invalidValue})}transformInvalidityMap(e,t,i,n){const s=new Set;for(const[o,r]of t){const a=e.get(o);if(!a||s.has(a))continue;s.add(a);const l=i.get(o);r.applyToArray(a,c=>{const u=l?.get(c);return n(u)})}}transformInvalidityArrays(e,t,i){e.invalidKeys&&this.transformInvalidityMap(e.invalidKeys,t,i,n=>n?.hasInvalidKey??!1),e.invalidData&&this.transformInvalidityMap(e.invalidData,t,i,n=>n?n.hasInvalidKey||n.hasInvalidValue:!1)}transformGroupsArray(e,t,i){const n=Uc(e.scopes),s=t.get(n);if(!s)return;const o=i.get(n);for(const[,r]of o??[])if(r.hasInvalidKey)throw new Error("AG Charts - reprocessing grouped data with invalid keys not supported. This typically indicates a data quality issue that requires full reprocessing.");s.applyToArray(e.groups,r=>this.createDataGroupForInsertion(r,e,n,o))}createDataGroupForInsertion(e,t,i,n){const s=[];for(const d of t.keys){const p=d.get(i);p&&s.push(p[e])}const o=t.groups[0],r=()=>Object.freeze(Ax(t.columnScopes.length,rY)),a=o?.datumIndices??r(),c=n?.get(e)?.hasInvalidValue??!1;let u;return c?(u=new Set(t.scopes),u.delete(i)):u=t.scopes,{keys:s,datumIndices:a,aggregation:[],validScopes:u}}setupDomainForDefinition(e,t,i){if(e.valueType==="category")return new aF;let n=t.get(e);return!n&&i?.enableBanding!==!1&&(n=new mf(()=>new al,i,!1),t.set(e,n)),n??new al}extendDomainFromData(e,t,i){if(e instanceof mf)e.extendBandsFromData(t,i);else for(let n=0;n<t.length;n++)i?.[n]!==!0&&e.extend(t[n])}initializeBandedDomain(e,t,i){if(!(e instanceof mf))return;const n=e.getStats(),s=n.bandCount===0||n.dataSize!==t||n.needsReinitialization;this.debug.check()&&s&&i&&this.debug(`Reinitializing bands for ${i}: bandCount=${n.bandCount}, dataSize=${n.dataSize}, dataLength=${t}, needsReinitialization=${n.needsReinitialization}`),s&&e.initializeBands(t)}recomputeDomains(e){const t=this.debug.check()?performance.now():0,i=e[Mx],n=this.opts.domainBandingConfig;let s;const o=new Map,r=new Map;for(const l of this.keys)o.set(l,this.setupDomainForDefinition(l,i,n));for(const l of this.values)r.set(l,this.setupDomainForDefinition(l,i,n));for(const[l,c]of this.keys.entries()){const u=e.keys[l],d=o.get(c),p=Math.max(...Array.from(u.values()).map(f=>f.length));this.initializeBandedDomain(d,p,String(c.property))}for(const[l,c]of this.values.entries()){const u=e.columns[l],d=r.get(c);this.initializeBandedDomain(d,u.length,String(c.property))}const a=new Map;if(i.size>0){s={totalBands:0,dirtyBands:0,totalData:0};for(const l of i.values())if(l instanceof mf){const c=l.getStats();a.set(l,c),s.totalBands+=c.bandCount,s.dirtyBands+=c.dirtyBandCount,s.totalData=Math.max(s.totalData,c.dataSize)}}for(const[l,c]of this.keys.entries()){const u=e.keys[l],d=o.get(c);for(const p of c.scopes??[]){const f=u.get(p);if(!f)continue;const m=e.invalidKeys?.get(p);this.extendDomainFromData(d,f,m)}}for(const[l,c]of this.values.entries()){const u=e.columns[l],d=r.get(c),p=Uc(c.scopes),f=e.invalidData?.get(p);this.extendDomainFromData(d,u,f)}if(e.domain.keys=this.keys.map(l=>{const c=o.get(l),u=c.getDomain();return al.is(c)&&u[0]>u[1]?[]:u}),e.domain.values=this.values.map(l=>{const c=r.get(l),u=c.getDomain();return al.is(c)&&u[0]>u[1]?[]:u}),e.type==="grouped"&&(e.domain.groups=e.groups.map(l=>l.keys)),this.collectDomainBandingMetadata(e,o,r,i,a),this.debug.check()&&t>0){const c=performance.now()-t;if(s&&s.totalBands>0){const u=s.dirtyBands/s.totalBands,d=Math.round(u*s.totalData);this.debug(`recomputeDomains with banding: ${c.toFixed(2)}ms, bands: ${s.dirtyBands}/${s.totalBands} dirty, data scanned: ~${d}/${s.totalData} (${(u*100).toFixed(1)}%)`)}else this.debug(`recomputeDomains: ${c.toFixed(2)}ms (no banding)`)}}generateDiffMetadata(e,t,i){const n=(s,o)=>{const r=[];for(const a of e.keys){const l=a.get(s);if(!l)return;r.push(l[o])}return r.length>0?dF(r):void 0};for(const[s,o]of t){const r={changed:!0,added:new Set,removed:i.get(s)??new Set,updated:new Set,moved:new Set};for(const c of o.indexMap.spliceOps)if(c.insertCount>0)for(let u=0;u<c.insertCount;u++){const d=c.index+u,p=n(s,d);p&&r.added.add(p)}const{originalLength:a,totalPrependCount:l}=o.indexMap;if(!kMe(o.indexMap))if(TMe(o.indexMap)&&a>0)for(let c=l;c<l+a;c++){const u=n(s,c);u&&r.moved.add(u)}else if(IMe(o.indexMap)&&l>0)for(let c=0;c<a;c++){const u=c+l,d=n(s,u);d&&r.moved.add(d)}else o.forEachPreservedIndex((c,u)=>{if(c!==u){const d=n(s,u);d&&r.moved.add(d)}});e.reduced.diff[s]=r}}updateProcessedDataMetadata(e){let t=0;for(const n of e.dataSources.values())t=Math.max(t,n.data.length);e.input.count=t;let i=0;for(const[n,s]of e.invalidData??new Map){const o=e.invalidKeys?.get(n);for(let r=0;r<s.length;r++)s[r]&&!o?.[r]&&(i+=1)}if(e.partialValidDataCount=i,e.invalidKeyCount)for(const[n,s]of e.invalidKeys??new Map){const o=s.filter(Boolean).length;e.invalidKeyCount.set(n,o)}e[uF].clear(),e[lF].clear(),e[cF].clear()}processInsertionsOnce(e,t,i,n){const s=new Map,{finalLength:o}=t.indexMap;for(const r of t.indexMap.spliceOps)if(!(r.insertCount<=0))for(let a=0;a<r.insertCount;a++){const l=r.index+a;if(l<0||l>=o)continue;const c=i.data[l],u=new Map,d=new Map;let p=!1,f=!1;if(c==null||typeof c!="object")p=!0,f=!0;else{for(const[m,v]of this.keys.entries()){if(!v.scopes?.includes(e))continue;const b=n(v,c,l,e);u.set(m,{value:b.value,valid:b.valid}),b.valid||(p=!0)}for(const[m,v]of this.values.entries()){if(!v.scopes?.includes(e))continue;const b=n(v,c,l,v.scopes);d.set(m,{value:b.value,valid:b.valid}),b.valid||(f=!0)}}s.set(l,{keys:u,values:d,hasInvalidKey:p,hasInvalidValue:f})}return s}warnDataMissingProperties(e){if(e.size!==0)for(const t of qf(this.keys,this.values))for(const[i,n]of t.missing){if(n<(e.get(i)?.data.length??1/0))continue;const s=i==null?"":` for ${i}`;fe.warnOnce(`the key '${t.property}' was not found in any data element${s}.`)}}processScopeCache(){this.scopeCache.clear();for(const e of qf(this.keys,this.values,this.aggregates))if(e.idsMap)for(const[t,i]of e.idsMap)for(const n of i)if(!this.scopeCache.has(t))this.scopeCache.set(t,new Map([[n,e]]));else{if(this.scopeCache.get(t)?.has(n))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(t).set(n,e)}}valueGroupIdxLookup({matchGroupIds:e}){const t=[];for(const[i,n]of this.values.entries())(!e||n.groupId&&e.includes(n.groupId))&&t.push(i);return t}valueIdxLookup(e,t){const i=e==null||e.length===0,n=typeof t=="string"?t:t.id,s=r=>{if(r.idsMap){for(const[a,l]of r.idsMap)if(e?.includes(a)&&l.has(n))return!0}return!1},o=this.values.reduce((r,a,l)=>((a.scopes==null||i&&!a.scopes.length||a.scopes.some(u=>e?.includes(u)))&&(a.property===n||a.id===n||s(a))&&r.push(l),r),[]);if(o.length===0)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(t)} in scope(s) ${JSON.stringify(e)}`);return o}extractData(e){const{dataDomain:t,processValue:i,allScopesHaveSameDefs:n}=this.initDataDomainProcessor("extend"),{keys:s,values:o}=this,{invalidData:r,invalidKeys:a,invalidKeyCount:l,allKeyMappings:c}=this.extractKeys(s,e,i),{columns:u,columnScopes:d,columnNeedValueOf:p,partialValidDataCount:f,maxDataLength:m}=this.extractValues(r,o,e,a,i),v=b=>{const C=t.get(b),x=C.getDomain();return al.is(C)&&x[0]>x[1]?[]:x};return{type:"ungrouped",input:{count:m},scopes:new Set(e.keys()),dataSources:e,aggregation:void 0,keys:[...c.values()],columns:u,columnScopes:d,columnNeedValueOf:p,invalidKeys:a,invalidKeyCount:l,invalidData:r,domain:{keys:s.map(v),values:o.map(v)},defs:{allScopesHaveSameDefs:n,keys:s,values:o},partialValidDataCount:f,time:0,[uF]:new Map,[lF]:new Map,[cF]:new Map,[Mx]:new Map}}extractKeys(e,t,i){const n=new Map,s=new Map,o=new Map,r=new Map;let a,l;const c=(u,d)=>{const p=l.get(u);a.set(d,a.get(p)),n.has(p)&&(n.set(d,n.get(p)),s.set(d,s.get(p)))};for(const u of e){const{invalidValue:d,scopes:p}=u;a=new Map,l=new Map,r.set(u,a);for(const f of p??[]){const m=t.get(f)?.data??[];if(l.has(m)){c(m,f);continue}const v=[];a.set(f,v),l.set(m,f);let b,C,x=0;for(let w=0;w<m.length;w++){if(m[w]==null||typeof m[w]!="object")continue;const M=i(u,m[w],w,f);if(M.valid){v.push(M.value);continue}v.push(d),b??(b=Ax(m.length,!1)),C??(C=Ax(m.length,!1)),x+=1,b[w]=!0,C[w]=!0}b&&C&&(n.set(f,b),s.set(f,C),o.set(f,x))}}return{invalidData:s,invalidKeys:n,invalidKeyCount:o,allKeyMappings:r}}extractValues(e,t,i,n,s){let o=0;const r=[],a=[],l=[];let c=0;for(const u of t){const{invalidValue:d}=u;if(new Set(u.scopes.map(w=>i.get(w))).size>1)throw new Error(`AG Charts - more than one data source for: ${JSON.stringify(u)}`);const f=new Set(u.scopes),m=Uc(u.scopes),v=i.get(m)?.data??[],b=new Array,C=n.get(m);let x=!1;for(let w=0;w<v.length;w++){if(v[w]==null||typeof v[w]!="object")continue;const M=v[w],T=C==null?!1:C[w],L=s(u,M,w,u.scopes);let I=L.value;(T||!L.valid)&&this.markScopeDatumInvalid(u.scopes,v,w,e),T?I=d:L.valid||(o+=1,I=d),!x&&I!=null&&typeof I=="object"&&(x=!0),b[w]=I}r.push(b),a.push(f),l.push(x),c=Math.max(c,b.length)}return{columns:r,columnScopes:a,columnNeedValueOf:l,partialValidDataCount:o,maxDataLength:c}}groupData(e,t){var i;const{keys:n,columns:s,columnScopes:o,invalidKeys:r,invalidData:a}=e,l=e.scopes,c=[],u=[],d=l.size!==1||t!=null?new Map:void 0;let p=!0,f=0;const m=l.size,v=this.groupBatches(l,s,o,n,a,r),b=v.length;if(this.debug.check()&&!e.optimizations&&(e.optimizations={}),this.debug.check()){const w=m>0?1-b/m:0;e.optimizations.batchMerging={originalBatchCount:m,mergedBatchCount:b,mergeRatio:w}}const C=v.length===1,x=Object.freeze(Ax(v[0][1].length,rY));for(const[w,M,T,L,I,R]of v){const O=s[Uc(M)];for(let _=0;_<O.length;_++){if(R?.[_]===!0)continue;const B=T.map(W=>W[_]);if(B==null||B.length===0)throw new Error("AG Charts - no keys found for scope(s): "+w.join(", "));const V=t?.(B)??B,j=d==null?void 0:dF(V);let K=d?.get(j),Y,G,$=!1;if(K==null?(Y={keys:V,datumIndices:[],aggregation:[],validScopes:l},G=f++,K=[G,Y],$=!0,d?.set(j,K),c.push(Y.keys),u.push(Y)):([G,Y]=K,p=!1),I?.[_]===!0){Y.validScopes===l&&(Y.validScopes=new Set(l.values()));for(const W of L)Y.validScopes.delete(W)}if($&&_===G&&C)Y.datumIndices=x;else{!$&&Y.datumIndices===x&&(Y.datumIndices=x.map(W=>[...W]));for(const W of M)(i=Y.datumIndices)[W]??(i[W]=[]),Y.datumIndices[W].push(_-G)}}}return{...e,type:"grouped",domain:{...e.domain,groups:c},groups:u,groupsUnique:p,optimizations:e.optimizations,[Mx]:e[Mx]}}groupBatches(e,t,i,n,s,o){const r=[],a=new Set;for(const l of e){const c=t.map((m,v)=>v).filter(m=>!a.has(m)&&i[m].has(l));if(c.length===0)continue;for(const m of c)a.add(m);const u=new Set;for(const m of c)for(const v of i[m])u.add(v);const d=n.map(m=>m.get(l)).filter(m=>m!=null),p=s?.get(l),f=o?.get(l);r.push([l,c,d,u,p,f])}return this.mergeCompatibleBatches(r)}areBatchesCompatible(e,t){const[,,i,,n,s]=e,[,,o,,r,a]=t;return i.every((l,c)=>l===o[c])&&s===a&&n===r}mergeCompatibleBatches(e){const t=[],i=new Set;for(let n=0;n<e.length;n++){if(i.has(n))continue;const[s,o,r,a,l,c]=e[n],u=[[s],[...o],r,new Set(a),l,c];this.findAndMergeCompatibleBatches(e,n,u,i),t.push(u),i.add(n)}return t}findAndMergeCompatibleBatches(e,t,i,n){const s=e[t];for(let o=t+1;o<e.length;o++){if(n.has(o))continue;const r=e[o],[a,l,,c]=r;if(this.areBatchesCompatible(s,r)){i[0].push(a),i[1].push(...l);for(const u of c)i[3].add(u);n.add(o)}}}aggregateUngroupedData(e){const t=this.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=t;const{columns:i,dataSources:n}=e,s=Uc(n.keys()),o=e.keys.map(a=>a.get(s)),r=n.get(s)?.data??[];e.aggregation=r?.map((a,l)=>{const c=[];for(const[u,d]of this.aggregates.entries()){const p=this.valueGroupIdxLookup(d);let f=d.groupAggregateFunction?.()??[1/0,-1/0];const m=p.map(x=>i[x][l]),v=$I(o,l),b=v==null?void 0:d.aggregateFunction(m,v);b&&(f=d.groupAggregateFunction?.(b,f)??al.extendDomain(b,f));const C=d.finalFunction?.(f)??f;c[u]=C,al.extendDomain(C,t[u])}return c})}aggregateGroupedData(e){const t=this.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=t;const{columns:i}=e;for(const[n,s]of this.aggregates.entries()){const o=this.valueGroupIdxLookup(s);for(let r=0;r<e.groups.length;r++){const a=e.groups[r];a.aggregation??(a.aggregation=[]);const l=a.keys;let c=s.groupAggregateFunction?.()??[1/0,-1/0];const u=Math.max(...o.map(p=>a.datumIndices[p]?.length??0));for(let p=0;p<u;p++){const f=o.map(v=>{const b=a.datumIndices[v]?.[p];if(b==null)return;const C=this.resolveAbsoluteIndex(r,b);return i[v][C]}),m=s.aggregateFunction(f,l);m&&(c=s.groupAggregateFunction?.(m,c)??al.extendDomain(m,c))}const d=s.finalFunction?.(c)??c;a.aggregation[n]=d,al.extendDomain(d,t[n])}}}postProcessGroups(e){const{groupProcessors:t}=this,{columnScopes:i,columns:n,invalidData:s}=e;for(const o of t){const r=this.valueGroupIdxLookup(o),a=o.adjust()();for(let l=0;l<e.groups.length;l++){const c=e.groups[l];a(n,r,c,l)}for(const l of r){const u=this.values[l].valueType==="category",d=n[l],p=Uc(i[l]),f=s?.get(p),m=u?new aF:new al;for(let v=0;v<d.length;v+=1)f?.[v]!==!0&&m.extend(d[v]);e.domain.values[l]=m.getDomain()}}}reprocessGroupProcessors(e,t){const{groupProcessors:i}=this,{columns:n}=e;for(const o of i)if(!o.supportsReprocessing)throw new Error("AG Charts - attempted to reprocess group processor that does not support reprocessing. This is an internal error that should not occur.");const s=new Set;for(const[,o]of t)s.has(o)||s.add(o);for(const o of i){const r=this.valueGroupIdxLookup(o),a=o.adjust()();for(const l of s){const{indexMap:c}=l;for(const u of c.spliceOps)if(u.insertCount>0)for(let d=0;d<u.insertCount;d++){const p=u.index+d,f=e.groups[p];a(n,r,f,p)}}}}postProcessProperties(e){for(const{adjust:t,property:i,scopes:n}of this.propertyProcessors)for(const s of this.valueIdxLookup(n,i))t()(e,s)}reduceData(e){e.reduced??(e.reduced={});const{dataSources:t,keys:i}=e;for(const n of this.reducers){const s=n.reducer();let o=n.initialValue;if(e.type==="grouped")for(const r of e.groups)o=s(o,r.keys);else{const r=aY(n)?n.scopes[0]:Uc(t.keys()),a=i.map(u=>u.get(r)).filter(u=>u!=null),l=a.map(()=>{}),c=t.get(r)?.data??[];for(let u=0;u<c.length;u+=1){for(let d=0;d<l.length;d++)l[d]=a[d]?.[u];o=s(o,l)}}e.reduced[n.property]=o}}postProcessData(e){e.reduced??(e.reduced={});for(const t of this.processors)e.reduced[t.property]=t.calculate(e,e.reduced[t.property])}initDataDomainProcessor(e){const{keys:t,values:i}=this,n=new Set;for(const d of i)if(d.scopes)for(const p of d.scopes)n.add(p);const s=new Map,o=new Map;let r=!0;const a=()=>{for(const d of qf(t,i))d.valueType==="category"?s.set(d,new aF):(s.set(d,new al),r&&(r=(d.scopes?.length??0)===n.size))};a();const l=this.buildAccessors(qf(t,i)),c={value:void 0,missing:!1,valid:!1};return{dataDomain:s,processValue:(d,p,f,m)=>{let v,b;if(l.has(d.property)){try{b=l.get(d.property)(p)}catch{}v=b!=null}else v=d.property in p,b=v?p[d.property]:d.missingValue;d.forceValue!=null&&(b=v&&pG(b)?-1*d.forceValue:d.forceValue,v=!0),c.missing=!v;const C="missingValue"in d;if(!v&&!C)if(typeof m=="string"){const w=d.missing.get(m)??0;d.missing.set(m,w+1)}else for(const w of m){const M=d.missing.get(w)??0;d.missing.set(w,M+1)}s.has(d)||a();const x=d.type==="key"&&b==null;if(v&&d.validation?.(b,p,f)===!1||x)if(c.valid=!1,"invalidValue"in d)b=d.invalidValue;else return this.mode!=="integrated"&&fe.warnOnce(`invalid value of type [${typeof b}] for [${d.scopes} / ${d.id}] ignored:`,`[${b}]`),c.value=void 0,c;else c.valid=!0;if(d.processor){let w=o.get(d);w==null&&(w=d.processor(),o.set(d,w)),b=w(b,f)}return e==="extend"&&s.get(d)?.extend(b),c.value=b,c},initDataDomain:a,scopes:n,allScopesHaveSameDefs:r}}collectOptimizationMetadata(e,t){const i=e.optimizations?.domainBanding;e.optimizations={performance:{processingTime:e.time,pathTaken:t},...i&&{domainBanding:i}};const n=this.isReprocessingSupported(e),s=t==="reprocess";let o;if(!n){const r=[];if(e.type==="grouped"){e.groupsUnique||r.push("groupsUnique=false"),this.getUniqueDataSets(e).size!==1&&r.push("multiple data sources");const l=Uc(e.scopes);e.invalidKeys?.get(l)?.some(u=>u)&&r.push("has invalid keys")}this.aggregates.length>0&&r.push("has aggregates"),this.reducers.length>0&&r.push("has reducers"),this.processors.length>0&&r.push("has processors"),this.propertyProcessors.length>0&&r.push("has property processors"),o=r.length>0?r.join(", "):void 0}if(e.optimizations.reprocessing={applied:s,reason:o},e.type==="grouped"){let r=0;const a=e.groups[0];if(a){const l=a.datumIndices;for(const c of e.groups)c.datumIndices===l&&r++}e.optimizations.sharedDatumIndices={applied:r>0,sharedGroupCount:r,totalGroupCount:e.groups.length}}}collectDomainBandingMetadata(e,t,i,n,s){e.optimizations??(e.optimizations={});const o=[],r=[];for(const a of this.keys){const l=t.get(a),c=n.get(a),u=l instanceof mf;let d;u||(a.valueType==="category"?d="discrete domain":this.opts.domainBandingConfig?.enableBanding===!1?d="banding disabled":d="not configured");let p;if(u&&c){const f=s.get(c)??c.getStats(),m=f.bandCount>0?f.dirtyBandCount/f.bandCount:0;p={totalBands:f.bandCount,dirtyBands:f.dirtyBandCount,dataSize:f.dataSize,scanRatio:m}}o.push({property:String(a.property),applied:u,reason:d,stats:p})}for(const a of this.values){const l=i.get(a),c=n.get(a),u=l instanceof mf;let d;u||(a.valueType==="category"?d="discrete domain":this.opts.domainBandingConfig?.enableBanding===!1?d="banding disabled":d="not configured");let p;if(u&&c){const f=s.get(c)??c.getStats(),m=f.bandCount>0?f.dirtyBandCount/f.bandCount:0;p={totalBands:f.bandCount,dirtyBands:f.dirtyBandCount,dataSize:f.dataSize,scanRatio:m}}r.push({property:String(a.property),applied:u,reason:d,stats:p})}e.optimizations.domainBanding={keyDefs:o,valueDefs:r}}buildAccessors(e){const t=new Map;if(this.suppressFieldDotNotation)return t;for(const i of e){if(!(i.property.includes(".")||i.property.includes("[")))continue;const s=gte(i.property);if(s==null){fe.warnOnce("Invalid property path [%s]",i.property);continue}const o=NMe(s);t.set(i.property,o)}return t}};function OMe(e){const t=(i,n)=>{n.length>0&&(fe.log(`DataModel.processData() - ${i}`),fe.table(n))};if(fe.log("DataModel.processData() - processedData",e),t("Key Domains",e.domain.keys),t("Value Domains",e.domain.values),t("Aggregate Domains",e.domain.aggValues??[]),e.optimizations){fe.log("DataModel.processData() - Optimization Summary");const i=e.optimizations;if(i.performance&&fe.log(`  Performance: ${i.performance.processingTime.toFixed(2)}ms (${i.performance.pathTaken})`),i.reprocessing){const n=i.reprocessing.applied?"":"",s=i.reprocessing.reason?` (${i.reprocessing.reason})`:"";fe.log(`  Reprocessing: ${n}${s}`)}if(i.domainBanding){const n=i.domainBanding.keyDefs.filter(a=>a.applied),s=i.domainBanding.valueDefs.filter(a=>a.applied),o=n.length+s.length,r=i.domainBanding.keyDefs.length+i.domainBanding.valueDefs.length;if(o>0){fe.log(`  Domain Banding:  (${o}/${r} definitions)`);for(const a of[...n,...s])if(a.stats){const l=(a.stats.scanRatio*100).toFixed(1);fe.log(`    ${a.property}: scanned ${a.stats.dirtyBands}/${a.stats.totalBands} bands (${l}%)`)}}else{const a=[...i.domainBanding.keyDefs.filter(c=>!c.applied).map(c=>c.reason),...i.domainBanding.valueDefs.filter(c=>!c.applied).map(c=>c.reason)],l=[...new Set(a)].join(", ");fe.log(`  Domain Banding:  (${l})`)}}if(i.sharedDatumIndices){const n=i.sharedDatumIndices.applied?"":"",s=`${i.sharedDatumIndices.sharedGroupCount}/${i.sharedDatumIndices.totalGroupCount}`;fe.log(`  Shared DatumIndices: ${n} (${s} groups)`)}if(i.batchMerging){const n=(i.batchMerging.mergeRatio*100).toFixed(0),s=`${i.batchMerging.originalBatchCount}  ${i.batchMerging.mergedBatchCount}`;fe.log(`  Batch Merging: ${s} (${n}% reduction)`)}}}var rb=class i_{constructor(t){this.data=t,this.pendingTransactions=[]}static empty(){return new i_([])}static wrap(t){return new i_(t)}netSize(){if(!this.hasPendingTransactions())return this.data.length;const t=this.getChangeDescription();return t?t.indexMap.finalLength:this.data.length}addTransaction(t){this.pendingTransactions.push(t),this.cachedChangeDescription=void 0}hasPendingTransactions(){return this.pendingTransactions.length>0}getPendingTransactionCount(){return this.pendingTransactions.length}commitPendingTransactions(){if(!this.hasPendingTransactions())return!1;const t=this.getChangeDescription();if(!t)return!1;const i=[...t.getPrependedValues(),...t.getAppendedValues()];let n=0;return t.applyToArray(this.data,()=>i[n++]),this.pendingTransactions=[],this.cachedChangeDescription=void 0,!0}clearPendingTransactions(){const t=this.pendingTransactions.length;return this.pendingTransactions=[],this.cachedChangeDescription=void 0,t}getPendingTransactions(){return[...this.pendingTransactions]}toJSON(){return this.data}getChangeDescription(){if(!this.hasPendingTransactions())return;if(this.cachedChangeDescription)return this.cachedChangeDescription;const{indexMap:t,prependValues:i,appendValues:n}=this.buildIndexMap(),s=new ute(t,{prependValues:i,appendValues:n});return this.cachedChangeDescription=s,s}removeFromGroups(t,i){for(const n of t){let s=0;for(;s<n.length&&i.size>0;)i.has(n[s])?(i.delete(n[s]),n.splice(s,1)):s++;if(i.size===0)break}}buildIndexMap(){const t=this.data.length,i=[],n=[],s=new Set;for(const f of this.pendingTransactions){const{prepend:m,append:v,remove:b}=f;if(Array.isArray(m)&&m.length>0&&i.unshift([...m]),Array.isArray(v)&&v.length>0&&n.push([...v]),Array.isArray(b)&&b.length>0){const C=new Set(b);if(this.removeFromGroups(i,C),C.size>0&&this.removeFromGroups(n,C),C.size>0)for(let x=0;x<this.data.length&&C.size>0;x++){const w=this.data[x];C.has(w)&&(s.add(x),C.delete(w))}}}const o=i.flat(),r=n.flat(),a=o.length,l=r.length,c=t-s.size,u=a+c+l,d=[];if(a>0&&d.push({index:0,deleteCount:0,insertCount:a}),s.size>0){const f=Array.from(s).sort((b,C)=>C-b);let m=f[0],v=1;for(let b=1;b<f.length;b++){const C=f[b];f[b-1]-C===1?v++:(d.push({index:m-v+1+a,deleteCount:v,insertCount:0}),m=C,v=1)}d.push({index:m-v+1+a,deleteCount:v,insertCount:0})}return l>0&&d.push({index:a+c,deleteCount:0,insertCount:l}),{indexMap:{originalLength:t,finalLength:u,spliceOps:d,removedIndices:s,totalPrependCount:a,totalAppendCount:l},prependValues:o,appendValues:r}}};function lY(e){return e.filter(t=>t.type==="key").map(t=>t.property).join(";")}var tV=class ll{constructor(t,i){this.mode=t,this.suppressFieldDotNotation=i,this.debug=Ct.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(t,i,n){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((s,o)=>{this.requested.push({id:t,opts:n,dataSet:i,resolve:s,reject:o})})}execute(t){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed";const i=new Map;for(const r of this.requested)r.dataSet.hasPendingTransactions()&&i.set(r.dataSet,r.dataSet.getChangeDescription()),r.dataSet.commitPendingTransactions();this.debug("DataController.execute() - requested",this.requested);const n=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",n);const s=this.mergeRequested(n);this.debug("DataController.execute() - merged",s),this.debug.check()&&(Qt().processedData=[]);const o=[];for(const{dataSet:r,ids:a,opts:l,resolves:c,rejects:u}of s){const d=t?.find(C=>AMe(C,r,a,l)),p=(C,x)=>{if(this.debug.check()&&Qt("processedData").push(x),x==null){for(const w of u)w(new Error("AG Charts - no processed data generated"));return}o.push({opts:l,dataSet:r,dataLength:r.data.length,ids:a,dataModel:C,processedData:x});for(const w of c)w({dataModel:C,processedData:x})},f=()=>{try{const C=new t_(l,this.mode,this.suppressFieldDotNotation),x=new Map(n.map(M=>[M.id,M.dataSet])),w=C.processData(x);return p(C,w),C}catch(C){for(const x of u)x(C)}};if(d==null){f();continue}const{dataModel:m,processedData:v}=d,b=i.get(r);if(v&&b&&m.isReprocessingSupported(v)){if(this.debug("DataController.execute() - reprocessing data",v,r),m.reprocessData(v,i),Ct.check("data-model:reprocess-diff")){const C=new t_(l,this.mode,this.suppressFieldDotNotation),x=new Map(n.map(I=>[I.id,I.dataSet])),w=C.processData(x),M=JSON.parse(JSON.stringify(v,ll.jsonReplacer)),T=JSON.parse(JSON.stringify(w,ll.jsonReplacer));delete M.time,delete M.optimizations,delete T.time,delete T.optimizations;const L=Nu(T,M);L?(fe.log(" DATA-MODEL REPROCESS DIFF DETECTED "),fe.log("Difference between incremental update and full reprocess:"),fe.log(""),fe.log("BASELINE (full reprocess):"),fe.log(JSON.stringify(T,null,2)),fe.log(""),fe.log("REPROCESSED (incremental update):"),fe.log(JSON.stringify(M,null,2)),fe.log(""),fe.log("DIFF (what changed):"),fe.log(JSON.stringify(L,null,2))):fe.log(" Data-model reprocess matches baseline (no diff)")}p(m,v);continue}f()}return o}validateRequests(t){const i=[];for(const[n,s]of t.entries())n>0&&s.dataSet.data.length!==t[0].dataSet.data.length&&s.opts.groupByData===!1&&s.opts.groupByKeys===!1?s.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):i.push(s);return i}mergeRequested(t){const i=[];for(const n of t){const s=i.find(ll.groupMatch(n));s?s.push(n):i.push([n])}return i.map(ll.mergeRequests)}static groupMatch({dataSet:t,opts:i}){const{groupByData:n,groupByKeys:s=!1,groupByFn:o,props:r}=i,a=lY(r);return([l])=>(n===!1||l.dataSet===t)&&(l.opts.groupByKeys??!1)===s&&l.opts.groupByFn===o&&lY(l.opts.props)===a}static mergeRequests(t){const i={ids:[],rejects:[],resolves:[],dataSet:t[0].dataSet,opts:{...t[0].opts,props:[]}},n=new Map,s=new Map;let o=0;for(const r of t){const{id:a,dataSet:l,resolve:c,reject:u,opts:{props:d,...p}}=r;i.ids.push(a),i.rejects.push(u),i.resolves.push(c),i.dataSet??(i.dataSet=l),i.opts??(i.opts={...p,props:[]});for(const f of d){const m={...f,scopes:[a],data:l.data};ll.createIdsMap(a,m);let v;ll.crossScopeMergableTypes.has(m.type)?v=-1:s.has(l.data)?v=s.get(l.data):(v=o++,s.set(l.data,v));const b=`${m.type}-${v}-${m.groupId}`,C=n.get(b),x=C?.find(w=>ll.deepEqual(w,m));if(C==null){i.opts.props.push(m),n.set(b,[m]);continue}else if(x==null){i.opts.props.push(m),C.push(m);continue}m.scopes!=null&&(x.scopes??(x.scopes=[]),x.scopes.push(...m.scopes)),(x.type==="key"||x.type==="value")&&m.idsMap?.size&&(x.idsMap??(x.idsMap=new Map),ll.mergeIdsMap(m.idsMap,x.idsMap))}}return i}static mergeIdsMap(t,i){for(const[n,s]of t){const o=i.get(n);if(o==null)i.set(n,new Set(s));else for(const r of s)o.add(r)}}static createIdsMap(t,i){i.id!=null&&(i.idsMap??(i.idsMap=new Map),i.idsMap.has(t)?i.idsMap.get(t).add(i.id):i.idsMap.set(t,new Set([i.id])))}static deepEqual(t,i){if(t===i)return!0;if(t&&i&&typeof t=="object"&&typeof i=="object"){if(t.constructor!==i.constructor)return!1;let n,s;if(Array.isArray(t)){if(s=t.length,s!==i.length)return!1;for(n=s-1;n>=0;n--)if(!ll.deepEqual(t[n],i[n]))return!1;return!0}const o=Object.keys(t);if(s=o.length,s!==Object.keys(i).length)return!1;for(n=s-1;n>=0;n--){const r=o[n];if(!ll.skipKeys.has(r)&&(!Object.hasOwn(i,r)||!ll.deepEqual(t[r],i[r])))return!1}return!0}return!1}static jsonReplacer(t,i){return i instanceof Map?{__type:"Map",value:Array.from(i.entries())}:i instanceof Set?{__type:"Set",value:Array.from(i)}:i}};tV.crossScopeMergableTypes=new Set(["key","group-value-processor"]);tV.skipKeys=new Set(["id","idsMap","type","scopes","data"]);var fte=tV,FMe=class{constructor(){this.axesMap=new Map,this.themeTemplates=new Map}register(e,t){this.axesMap.set(e,t.moduleFactory),t.themeTemplate&&this.setThemeTemplate(e,t.themeTemplate)}create(e,t){const i=this.axesMap.get(e);if(i)return i(t);throw new Error(`AG Charts - unknown axis type: ${e}`)}has(e){return this.axesMap.has(e)}keys(){return this.axesMap.keys()}setThemeTemplate(e,t){return this.themeTemplates.set(e,t),this}getThemeTemplate(e){return this.themeTemplates.get(e)}},fm=new FMe,sD=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","topology","standalone"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","topology","standalone"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","topology","standalone"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","topology","standalone"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","topology","standalone"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"root",optionsKey:"ranges",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","topology","standalone"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"]},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"axis-option",optionsKey:"bandHighlight",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"radial-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"sankey"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"},{type:"context",contextKey:"sharedToolbar",chartTypes:["cartesian"]}];function zE(e){return sD.find(t=>t.type==="series"&&t.identifier===e)?.chartTypes}function BMe(e){return zE(e)?.find(i=>i==="cartesian")==="cartesian"}function _Me(e){return zE(e)?.find(i=>i==="polar")==="polar"}function zMe(e){return zE(e)?.find(i=>i==="topology")==="topology"}function GMe(e){return zE(e)?.find(i=>i==="standalone")==="standalone"}function VMe(e){return e.packageType==="enterprise"}function HMe(e){if(!VMe(e))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const t=sD.find(i=>i.type===e.type&&("optionsKey"in i&&"optionsKey"in e?i.optionsKey===e.optionsKey:!0)&&("contextKey"in i&&"contextKey"in e?i.contextKey===e.contextKey:!0)&&i.identifier===e.identifier&&e.chartTypes.every(n=>i.chartTypes.includes(n)));return t&&(t.useCount??(t.useCount=0),t.useCount++),t!=null}function WMe(){return sD.filter(({useCount:e})=>e==null||e===0)}var jMe=class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(e,{optionsKey:t,moduleFactory:i,themeTemplate:n}){this.legendMap.set(e,{optionsKey:t,moduleFactory:i}),this.themeTemplates.set(t,n)}create(e,t){const i=this.legendMap.get(e)?.moduleFactory;if(i)return i(t);throw new Error(`AG Charts - unknown legend type: ${e}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((e,[t,i])=>(e[t]=i.optionsKey,e),{})}},iV=new jMe,mte=class extends Map{get(e){return super.get(e)??"unknown"}isCartesian(e){return this.get(e)==="cartesian"}isPolar(e){return this.get(e)==="polar"}isTopology(e){return this.get(e)==="topology"}isStandalone(e){return this.get(e)==="standalone"}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(e=>this.isCartesian(e))}get polarTypes(){return this.seriesTypes.filter(e=>this.isPolar(e))}get topologyTypes(){return this.seriesTypes.filter(e=>this.isTopology(e))}get standaloneTypes(){return this.seriesTypes.filter(e=>this.isStandalone(e))}},UMe=class extends Map{set(e,t){return super.set(e,oi(t,this.get(e)))}},Rs=new mte,$Me=new mte,n_=new UMe,KMe=class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(e,{chartTypes:[t],moduleFactory:i,predictAxis:n,defaultAxes:s,themeTemplate:o,solo:r,stackable:a,groupable:l,stackedByDefault:c,hidden:u}){this.setThemeTemplate(e,o),this.seriesMap.set(e,{moduleFactory:i,predictAxis:n,defaultAxes:s,solo:r,stackable:a,groupable:l,stackedByDefault:c}),Rs.set(e,t),u||$Me.set(e,t)}create(e,t){const i=this.seriesMap.get(e)?.moduleFactory;if(i)return i(t);throw new Error(`AG Charts - unknown series type: ${e}`)}predictAxes(e,t,i){if(!t)return;const n=t?.data??i;if(!n?.length)return;const s=this.seriesMap.get(e)?.predictAxis;if(!s)return;const o=new Map,r=mwe(0,n.length-1,5);for(const a of r){const l=n[a];for(const c of Object.values(TE)){const u=s(c,l,t);if(!o.has(c)){o.set(c,u);continue}const d=o.get(c);if(!(!u&&!d)){if(!u||!d)return;for(const p of Object.keys(d))if(d[p]!==u[p])return}}}for(const[a,l]of o)l||o.delete(a);if(o.size!==0){if(o.size===1){const a=this.cloneDefaultAxes(e);if(!a)return;const[l]=o.values();return a.map(c=>c.type==="category"?l:c)}return Array.from(o.values())}}cloneDefaultAxes(e){const t=this.seriesMap.get(e)?.defaultAxes;return t==null?null:fn(t)}setThemeTemplate(e,t){const i=this.themeTemplates.get(e);this.themeTemplates.set(e,oi(t,i))}getThemeTemplate(e){return this.themeTemplates.get(e)}isSolo(e){return this.seriesMap.get(e)?.solo??!1}isGroupable(e){return this.seriesMap.get(e)?.groupable??!1}isStackable(e){return this.seriesMap.get(e)?.stackable??!1}isStackedByDefault(e){return this.seriesMap.get(e)?.stackedByDefault??!1}},vl=new KMe,nV=class wd{constructor(t){this.chart=t}subscribe(t=wd.DEFAULT_GROUP){let i=this.get(t);return i||(i={members:new Set},wd.chartsGroups.set(t,i)),i.members.add(this.chart),this}unsubscribe(t=wd.DEFAULT_GROUP){const i=this.get(t);return i?.members.delete(this.chart),delete i?.domains?.x?.sources?.[this.chart.id],delete i?.domains?.y?.sources?.[this.chart.id],this}getChart(){return this.chart}getGroupState(t=wd.DEFAULT_GROUP){return this.get(t)}getGroupMembers(t=wd.DEFAULT_GROUP){const i=this.get(t);return i?Array.from(i.members):[]}getGroupSiblings(t=wd.DEFAULT_GROUP){return this.getGroupMembers(t).filter(i=>i!==this.chart)}getGroupSyncMode(t=wd.DEFAULT_GROUP){return this.getGroupMembers(t).some(i=>i.series.length>1)?"multi-series":"single-series"}get(t){return wd.chartsGroups.get(t)}};nV.chartsGroups=new Map;nV.DEFAULT_GROUP=Symbol("sync-group-default");var YMe=nV,sV=class extends pt{constructor(){super(...arguments),this.enabled=!1}};E([F],sV.prototype,"enabled",2);E([F],sV.prototype,"tabIndex",2);var yte={};Vu(yte,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>lc,fromToMotion:()=>Xn,staticFromToMotion:()=>vh});var lc={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function Xn(e,t,i,n,s,o,r){const{fromFn:a,toFn:l,applyFn:c=(m,v)=>m.setProperties(v)}=s,{nodes:u,selections:d}=OE(n),p=(m,v)=>{let b,C=0,x=0;for(const w of v){const M=m[C]===w,T={last:x>=v.length-1,lastLive:C>=m.length-1,prev:v[x-1],prevFromProps:b,prevLive:m[C-1],next:v[x+1],nextLive:m[C+(M?1:0)]},L=`${e}_${t}_${w.id}`;i.stopByAnimationId(L);let I="unknown";M?o&&r&&(I=XMe(w,w.datum,o,r)):I="removed",w.transitionOut=I==="removed";const{phase:R,start:O,finish:_,delay:B,duration:V,...j}=a(w,w.datum,I,T),{phase:K,start:Y,finish:G,delay:$,duration:W,...Q}=l(w,w.datum,I,T),q=_==null;i.animate({id:L,groupId:e,phase:R??K??"update",duration:V??W,delay:B??$,from:j,to:Q,ease:Kw,collapsable:q,onPlay:()=>{const H={...O,...Y,...j};c(w,H,"start")},onUpdate(H){c(w,H,"update")},onStop:()=>{const H={...O,...Y,...j,...Q,..._,...G};c(w,H,"end")}}),M&&C++,x++,b=j}};let f=0;for(const m of d){const v=m.nodes(),b=v.filter(C=>!m.isGarbage(C));p(b,v),i.animate({id:`${e}_${t}_selection_${f}`,groupId:e,phase:"end",from:0,to:1,ease:Kw,onStop(){m.cleanup()}}),f++}p(u,u)}function vh(e,t,i,n,s,o,r){const{nodes:a,selections:l}=OE(n),{start:c,finish:u,phase:d}=r;i.animate({id:`${e}_${t}`,groupId:e,phase:d??"update",from:s,to:o,ease:Kw,onPlay:()=>{if(c){for(const p of a)p.setProperties(c);for(const p of l)for(const f of p.nodes())f.setProperties(c)}},onUpdate(p){for(const f of a)f.setProperties(p);for(const f of l)for(const m of f.nodes())m.setProperties(p)},onStop:()=>{for(const p of a)p.setProperties({...o,...u});for(const p of l){for(const f of p.nodes())f.setProperties({...o,...u});p.cleanup()}}})}function XMe(e,t,i,n){const s=i(e,t);return n.added.has(s)?"added":n.removed.has(s)?"removed":e.previousDatum==null&&e.datum!=null?"added":e.previousDatum!=null&&e.datum==null?"removed":"updated"}var vte={};Vu(vte,{resetMotion:()=>mo});function mo(e,t){const{nodes:i,selections:n}=OE(e);for(const s of n){for(const o of s.nodes()){const r=t(o,o.datum);o.setProperties(r)}s.cleanup()}for(const s of i){const o=t(s,s.datum);s.setProperties(o)}}var Yo=class Gf{constructor(t,i,n=!0){this.parentNode=t,this.autoCleanup=n,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=Ct.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(oh,i)?()=>new i:i}static select(t,i,n=!0){return new Gf(t,i,n)}static selectAll(t,i){const n=[],s=o=>{if(i(o)&&n.push(o),o instanceof Mt)for(const r of o.children())s(r)};return s(t),n}static selectByClass(t,...i){return Gf.selectAll(t,n=>i.some(s=>n instanceof s))}static selectByTag(t,i){return Gf.selectAll(t,n=>n.tag===i)}createNode(t,i,n){const s=this.nodeFactory(t);return s.datum=t,i?.(s),n==null?this._nodes.push(s):this._nodes.splice(n,0,s),this.parentNode.appendChild(s),s}update(t,i,n){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",t),n){const s=new Map,o=new Map;for(let r=0;r<t.length;r++){const a=t[r];let l=n(a);if(s.has(l)){const c=(o.get(l)??0)+1;o.set(l,c),l=`${l}:${c}`}s.set(l,r)}for(const[r,a]of this._nodesMap.entries()){const l=s.get(a);l==null?this.garbageBin.add(r):(r.datum=t[l],this.garbageBin.delete(r),s.delete(a))}for(const[r,a]of s.entries()){const l=t[a];this._nodesMap.set(this.createNode(l,i,a),r)}}else{const s=Math.max(t.length,this.data.length);for(let o=0;o<s;o++)o>=t.length?this.garbageBin.add(this._nodes[o]):o>=this._nodes.length?this.createNode(t[o],i):(this._nodes[o].datum=t[o],this.garbageBin.delete(this._nodes[o]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(t=>this.garbageBin.has(t)?(this._nodesMap.delete(t),this.garbageBin.delete(t),t.destroy(),!1):!0),this)}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}each(t){for(const i of this._nodes.entries())t(i[1],i[1].datum,i[0]);return this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const i=this._nodes[t];yield{node:i,datum:i.datum,index:t}}}select(t){return Gf.selectAll(this.parentNode,t)}selectByClass(t){return Gf.selectByClass(this.parentNode,t)}selectByTag(t){return Gf.selectByTag(this.parentNode,t)}nodes(){return this._nodes}at(t){return this._nodes.at(t)}get length(){return this._nodes.length}},Ma=class extends Bn{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.fill=void 0,this.strokeWidth=1}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new He(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,i){return this.x1===this.x2||this.y1===this.y2?this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(t,i):!1}distanceSquared(t,i){const{x1:n,y1:s,x2:o,y2:r}=this;return VI(t,i,n,s,o,r,1/0)}render(t){const{ctx:i,devicePixelRatio:n}=t;let{x1:s,y1:o,x2:r,y2:a}=this;if(s===r){const{strokeWidth:l}=this,c=Math.round(s*n)/n+Math.trunc(l*n)%2/(n*2);s=c,r=c}else if(o===a){const{strokeWidth:l}=this,c=Math.round(o*n)/n+Math.trunc(l*n)%2/(n*2);o=c,a=c}i.beginPath(),i.moveTo(s,o),i.lineTo(r,a),this.fillStroke(i),this.fillShadow?.markClean(),super.render(t)}toSVG(){if(!this.visible)return;const t=Pn("line");return t.setAttribute("x1",String(this.x1)),t.setAttribute("y1",String(this.y1)),t.setAttribute("x2",String(this.x2)),t.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(t),{elements:[t]}}};Ma.className="Line";E([Le()],Ma.prototype,"x1",2);E([Le()],Ma.prototype,"y1",2);E([Le()],Ma.prototype,"x2",2);E([Le()],Ma.prototype,"y2",2);var hF="color: green",pF="color: grey";function ZMe(){return UJ(()=>{})}function s_(e,t){const i=Zp(t);if(i.length===0)return;const n=$J(e);for(const s of i)s in n&&(t[s]=n[s])}var bte=class{transitionRoot(e,t){this.parent?this.parent.transitionRoot(e,t):this.transition(e,t)}},oV=class zr extends bte{constructor(t,i,n){super(),this.defaultState=t,this.states=i,this.enterEach=n,this.debug=Ct.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,hF)}transition(t,i){if(!this.transitionChild(t,i)||this.state===zr.child||this.state===zr.parent)return;const s=this.state,o=this.states[this.state];let r=o[t];const a=`%c${this.constructor.name} | ${this.state} -> ${t} ->`;if(Array.isArray(r))r=r.find(u=>{if(!u.guard)return!0;const d=u.guard(i);return d||this.debug(`${a} (guarded)`,u.target,pF),d});else if(typeof r=="object"&&!(r instanceof zr)&&r.guard&&!r.guard(i)){this.debug(`${a} (guarded)`,r.target,pF);return}if(!r){this.debug(`${a} ${this.state}`,pF);return}const l=this.getDestinationState(r),c=l===this.state?void 0:o.onExit;this.debug(`${a} ${l}`,hF),this.state=l,typeof r=="function"?r(i):typeof r=="object"&&!(r instanceof zr)&&r.action?.(i),c?.(),this.enterEach?.(s,l),l!==s&&l!==zr.child&&l!==zr.parent&&this.states[l].onEnter?.(s,i)}transitionAsync(t,i){setTimeout(()=>{this.transition(t,i)},0)}is(t){return this.state===zr.child&&this.childState?this.childState.is(t):this.state===t}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(t,i){return this.state!==zr.child||!this.childState||(s_(this,this.childState),this.childState.transition(t,i),!this.childState.is(zr.parent))?!0:(this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.defaultState}`,hF),this.state=this.defaultState,this.states[this.state].onEnter?.(),this.childState.resetHierarchy(),!1)}getDestinationState(t){let i=this.state;return typeof t=="string"?i=t:t instanceof zr?(this.childState=t,this.childState.parent=this,i=zr.child):typeof t=="object"&&(t.target instanceof zr?(this.childState=t.target,this.childState.parent=this,i=zr.child):t.target!=null&&(i=t.target)),i}};oV.child="__child";oV.parent="__parent";var oD=oV,qMe=class extends bte{constructor(...t){super(),this.stateMachines=t;for(const i of t)i.parent=this}transition(t,i){for(const n of this.stateMachines)s_(this,n),n.transition(t,i)}transitionAsync(t,i){for(const n of this.stateMachines)s_(this,n),n.transitionAsync(t,i)}},qm=class{constructor(){this.enabled=!0}};E([F],qm.prototype,"enabled",2);E([F],qm.prototype,"stroke",2);E([F],qm.prototype,"strokeWidth",2);E([F],qm.prototype,"strokeOpacity",2);var xn=class extends pt{constructor(){super(...arguments),this.enabled=!0,this.border=new qm,this._cachedFormatter=void 0}formatValue(t,i,n,s){const{formatter:o,format:r}=this;let a;if(o!=null&&(a??(a=t(o,s))),r!=null){let l=this._cachedFormatter;(l==null||l.type!==i||l.format!==r)&&(l={type:i,format:r,formatter:tS.getFormatter(i,r)},this._cachedFormatter=l),a??(a=l.formatter?.(n))}return a==null||ft(a)?a:String(a)}};E([F],xn.prototype,"enabled",2);E([F],xn.prototype,"border",2);E([F],xn.prototype,"color",2);E([F],xn.prototype,"cornerRadius",2);E([F],xn.prototype,"fill",2);E([F],xn.prototype,"fillOpacity",2);E([F],xn.prototype,"fontStyle",2);E([F],xn.prototype,"fontWeight",2);E([F],xn.prototype,"fontSize",2);E([F],xn.prototype,"fontFamily",2);E([F],xn.prototype,"formatter",2);E([F],xn.prototype,"format",2);E([F],xn.prototype,"padding",2);E([F],xn.prototype,"itemStyler",2);function nS(e){const{enabled:t=!1,stroke:i}=e?.border??{},s=e?.fill!=null||t&&i!=null?e?.padding:null;if(s==null)return{bottom:0,left:0,right:0,top:0};if(typeof s=="number")return{bottom:s,left:s,right:s,top:s};{const{bottom:o=0,left:r=0,right:a=0,top:l=0}=s;return{bottom:o,left:r,right:a,top:l}}}var rV=class{constructor(){this.moduleMap=new Map}*modules(){for(const e of this.moduleMap.values())yield e.moduleInstance}addModule(e,t){if(this.moduleMap.has(e.optionsKey))throw new Error(`AG Charts - module already initialised: ${e.optionsKey}`);this.moduleMap.set(e.optionsKey,{module:e,moduleInstance:t(e)})}removeModule(e){const t=Nn(e)?e:e.optionsKey;this.moduleMap.get(t)?.moduleInstance.destroy(),this.moduleMap.delete(t)}getModule(e){return this.moduleMap.get(Nn(e)?e:e.optionsKey)?.moduleInstance}isEnabled(e){return this.moduleMap.has(Nn(e)?e:e.optionsKey)}mapModules(e){return Array.from(this.moduleMap.values(),(t,i)=>e(t.moduleInstance,i))}destroy(){for(const e of this.moduleMap.keys())this.moduleMap.get(e)?.moduleInstance.destroy();this.moduleMap.clear()}},Wu=class extends Bn{constructor(t={}){super(t),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.horizontal=!1,this.strokeWidth=1}computeBBox(){return new He(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,i){return!1}render(t){const{ctx:i}=t;let{x1:n,y1:s,x2:o,y2:r}=this;n=this.align(n),s=this.align(s),o=this.align(o),r=this.align(r);const{fill:a,horizontal:l}=this,{globalAlpha:c}=i;a!=null&&(this.applyFillAndAlpha(i),i.beginPath(),i.moveTo(n,s),i.lineTo(o,s),i.lineTo(o,r),i.lineTo(n,r),i.closePath(),i.fill(),i.globalAlpha=c);const{stroke:u,strokeWidth:d,startLine:p,endLine:f}=this;if(!!((p||f)&&u&&d)){const{lineDash:v,lineDashOffset:b,lineCap:C,lineJoin:x}=this;this.applyStrokeAndAlpha(i),i.lineWidth=d,v&&i.setLineDash([...v]),b&&(i.lineDashOffset=b),C&&(i.lineCap=C),x&&(i.lineJoin=x),i.beginPath(),p&&(i.moveTo(n,s),l?i.lineTo(n,r):i.lineTo(o,s)),f&&(i.moveTo(o,r),l?i.lineTo(o,s):i.lineTo(n,r)),i.stroke(),i.globalAlpha=c}this.fillShadow?.markClean(),super.render(t)}};Wu.className="Range";E([Le()],Wu.prototype,"x1",2);E([Le()],Wu.prototype,"y1",2);E([Le()],Wu.prototype,"x2",2);E([Le()],Wu.prototype,"y2",2);E([Le()],Wu.prototype,"startLine",2);E([Le()],Wu.prototype,"endLine",2);E([Le()],Wu.prototype,"horizontal",2);function QMe(e){return e!=null&&Object.hasOwn(e,"toString")&&Nn(e.toString())}function JMe(e){return e!=null&&Object.hasOwn(e,"valueOf")&&Kt(e.valueOf())}function GE(e){return Kt(e)||fb(e)||JMe(e)}function eAe(e,t){return e!=null&&(!t||GE(e))}function o_(e){return QMe(e)&&Object.hasOwn(e,"id")?e.id:e}function Ste(e){switch(e.type){case"line":return e.value;case"range":return e.range}}function Cte(e,t){const i=Ste(e);if(i==null)return!1;const n=mi.is(t)||kc.is(t),s=o=>eAe(o,n)&&!Number.isNaN(t.convert(o,{clamp:!0}));if(e.type==="range"){const[o,r]=i;return s(o)&&s(r)}else return s(i)}var tAe={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:-1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},iAe={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:-1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},nAe={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:-1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:-1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},sAe={top:{rangeH:0,rangeV:-1,labelH:0,labelV:1},"inside-top":{rangeH:0,rangeV:-1,labelH:0,labelV:-1},"top-left":{rangeH:-1,rangeV:-1,labelH:1,labelV:-1},"inside-top-left":{rangeH:-1,rangeV:-1,labelH:-1,labelV:-1},left:{rangeH:-1,rangeV:0,labelH:1,labelV:0},"inside-left":{rangeH:-1,rangeV:0,labelH:-1,labelV:0},"bottom-left":{rangeH:-1,rangeV:1,labelH:1,labelV:1},"inside-bottom-left":{rangeH:-1,rangeV:1,labelH:-1,labelV:1},bottom:{rangeH:0,rangeV:1,labelH:0,labelV:-1},"inside-bottom":{rangeH:0,rangeV:1,labelH:0,labelV:1},"bottom-right":{rangeH:1,rangeV:1,labelH:-1,labelV:1},"inside-bottom-right":{rangeH:1,rangeV:1,labelH:1,labelV:1},right:{rangeH:1,rangeV:0,labelH:-1,labelV:0},"inside-right":{rangeH:1,rangeV:0,labelH:1,labelV:0},"top-right":{rangeH:1,rangeV:-1,labelH:-1,labelV:-1},"inside-top-right":{rangeH:1,rangeV:-1,labelH:1,labelV:-1},inside:{rangeH:0,rangeV:0,labelH:0,labelV:0}},Vl=class extends pt{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};E([F],Vl.prototype,"enabled",2);E([F],Vl.prototype,"text",2);E([F],Vl.prototype,"fontStyle",2);E([F],Vl.prototype,"fontWeight",2);E([F],Vl.prototype,"fontSize",2);E([F],Vl.prototype,"fontFamily",2);E([F],Vl.prototype,"padding",2);E([F],Vl.prototype,"color",2);E([F],Vl.prototype,"position",2);E([F],Vl.prototype,"rotation",2);E([F],Vl.prototype,"parallel",2);var ir=class extends pt{constructor(){super(),this.id=To(this),this.defaultColorRange=[],this.fill="#c16068",this.label=new Vl,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.position="top",this.rangeGroup=new Mt({name:this.id}),this.lineGroup=new Mt({name:this.id}),this.labelGroup=new Mt({name:this.id}),this.crossLineRange=new Wu,this.crossLineLabel=new Zb,this.data=void 0,this.startLine=!1,this.endLine=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}get defaultLabelPosition(){return"top"}update(e){const{enabled:t,type:i,data:n,scale:s}=this;if(!s||!t||!e||!Cte(this,s)||n==null){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateNodes();const o=i==="range";o!==this._isRange&&(o?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=o}calculateLayout(e){if(this.data=void 0,!e)return;const{type:t,range:i,value:n,scale:s,clippedRange:o,strokeWidth:r=0}=this;if(!s)return;const a=s.bandwidth??0,l=s.step??0,c=s instanceof yh?(l-a)/2:0;let[u,d]=Es(o);u-=a,d+=a;let p,f,m,v;if(t==="line"){const b=a/2;if(p=s.convert(n)+b,f=Number.NaN,m=s.convert(n,{clamp:!0})+b,v=Number.NaN,m>=d||m<=u)return}else if(i){const[b,C]=i,[x,w]=rte(b,C);if(p=s.convert(b,{alignment:x}),f=s.convert(C,{alignment:w}),m=s.convert(b,{clamp:!0,alignment:x}),v=s.convert(C,{clamp:!0,alignment:w}),m>v&&([m,v]=[v,m],[p,f]=[f,p]),m>=d||v<=u)return;Number.isFinite(p)&&(m-=c),Number.isFinite(f)&&(f+=a,v+=a+c)}else return;m=iS(m,o),v=iS(v,o),p-c>=m&&(p-=c),f+c<=v&&(f+=c),this.startLine=r>0&&p>=m&&p<=m+c,this.endLine=r>0&&f>=v-a-c&&f<=v,this.data=[m,v],this.label.enabled===!1||this.label.text}updateNodes(){const{position:e,data:[t,i]=[0,0],gridLength:n}=this,s=Number.isFinite(i)?i-t:0;let o;switch(e){case"top":case"bottom":o=new He(t,e==="top"?0:-n,s,n);break;case"left":case"right":o=new He(e==="left"?0:-n,t,n,s)}this.updateRangeNode(o);const{label:r}=this;r.enabled!==!1&&r.text&&(this.updateLabel(),this.positionLabel(o))}updateRangeNode(e){const{type:t,position:i,crossLineRange:n,startLine:s,endLine:o,fill:r,fillOpacity:a,stroke:l,strokeWidth:c,strokeOpacity:u,lineDash:d}=this;n.x1=e.x,n.x2=e.x+e.width,n.y1=e.y,n.y2=e.y+e.height,n.horizontal=i==="top"||i==="bottom",n.startLine=s,n.endLine=o,n.fill=t==="range"?r:void 0,n.fillOpacity=a??1,n.stroke=l,n.strokeWidth=c??1,n.strokeOpacity=u??1,n.lineDash=d}updateLabel(){const{crossLineLabel:e,label:t}=this;t.text&&(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}get anchor(){const e=this.position==="left"||this.position==="right",t=this.type==="range",{position:i=this.defaultLabelPosition}=this.label;return t?(e?nAe:sAe)[i]:(e?tAe:iAe)[i]}positionLabel(e){const{crossLineLabel:t,label:i,anchor:n}=this;t.rotation=bo(i.rotation??0),t.textBaseline="middle",t.textAlign="center";const s=t.getBBox();if(!s)return;const{width:o,height:r}=s,a=i.padding+o/2,l=i.padding+r/2,c=e.x+e.width*(n.rangeH+1)/2-a*n.labelH,u=e.y+e.height*(n.rangeV+1)/2-l*n.labelV;t.x=c,t.y=u,t.rotationCenterX=c,t.rotationCenterY=u}computeLabelSize(){const{label:e}=this;if(e.enabled===!1||!e.text)return;const t=new Zb;t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=e.text,t.rotation=bo(e.rotation??0),t.textBaseline="middle",t.textAlign="center";const i=t.getBBox();if(!i)return;const{width:n,height:s}=i;return{width:n,height:s}}calculatePadding(e){const{label:t,anchor:i}=this,n=this.computeLabelSize();if(!n)return;const{width:s,height:o}=n,r=t.padding+s,a=t.padding+o,l=this.position==="left"||this.position==="right";l&&(i.rangeH===-1&&i.labelH===1?e.left=Math.max(e.left??0,r):i.rangeH===1&&i.labelH===-1&&(e.right=Math.max(e.right??0,r))),l||(i.rangeV===-1&&i.labelV===1?e.top=Math.max(e.top??0,a):i.rangeV===1&&i.labelV===-1&&(e.bottom=Math.max(e.bottom??0,a)))}};ir.className="CrossLine";E([F],ir.prototype,"enabled",2);E([F],ir.prototype,"type",2);E([F],ir.prototype,"range",2);E([F],ir.prototype,"value",2);E([F],ir.prototype,"defaultColorRange",2);E([F],ir.prototype,"fill",2);E([F],ir.prototype,"fillOpacity",2);E([F],ir.prototype,"stroke",2);E([F],ir.prototype,"strokeWidth",2);E([F],ir.prototype,"strokeOpacity",2);E([F],ir.prototype,"lineDash",2);E([F],ir.prototype,"label",2);var VE=class{constructor(){this.enabled=!0,this.width=1,this.style=[{fill:void 0,fillOpacity:1,stroke:void 0,strokeWidth:void 0,lineDash:[]}]}};E([F],VE.prototype,"enabled",2);E([F],VE.prototype,"width",2);E([F],VE.prototype,"style",2);var Qm=class extends pt{};E([F],Qm.prototype,"placement",2);E([F],Qm.prototype,"step",2);E([F],Qm.prototype,"values",2);E([F],Qm.prototype,"minSpacing",2);E([F],Qm.prototype,"maxSpacing",2);var Vi=class extends pt{constructor(){super(...arguments),this.enabled=!0,this.border=new qm,this.wrapping="never",this.truncate=!1,this.spacing=5,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this._formatters={"component:year":void 0,"component:month":void 0,"component:day":void 0,"component:none":void 0,"long:year":void 0,"long:month":void 0,"long:day":void 0,"long:none":void 0}}getSideFlag(){return this.mirrored?1:-1}formatValue(t,i,n,s){const{formatter:o,format:r}=this,{type:a,value:l,domain:c,boundSeries:u}=i,d=i.type==="number"?i.fractionDigits:void 0,p=i.type==="date"?i.unit:void 0;let f;if(o!=null){const m=i.type==="date"?i.step:void 0;f=t(o,{value:l,index:n,domain:c,fractionDigits:d,unit:p,step:m,boundSeries:u})}if(r!=null&&f==null){const{specifier:m,dateStyle:v="long",truncateDate:b}=s??{},C=`${v}:${b??"none"}`;let x=this._formatters[C];const w=tS.mergeSpecifiers(m,r);(x==null||x.type!==a||x.unit!==p||!yr(x.mergedFormat,w))&&(x={type:a,mergedFormat:w,unit:p,formatter:tS.getFormatter(a,w,p,v,{truncateDate:b})},this._formatters[C]=x),f=x.formatter?.(l,d)}return f==null||ft(f)?f:String(f)}};E([F],Vi.prototype,"enabled",2);E([F],Vi.prototype,"border",2);E([F],Vi.prototype,"cornerRadius",2);E([F],Vi.prototype,"fill",2);E([F],Vi.prototype,"fillOpacity",2);E([F],Vi.prototype,"fontStyle",2);E([F],Vi.prototype,"fontWeight",2);E([F],Vi.prototype,"fontSize",2);E([F],Vi.prototype,"fontFamily",2);E([F],Vi.prototype,"wrapping",2);E([F],Vi.prototype,"truncate",2);E([F],Vi.prototype,"spacing",2);E([F],Vi.prototype,"minSpacing",2);E([F],Vi.prototype,"color",2);E([F],Vi.prototype,"rotation",2);E([F],Vi.prototype,"avoidCollisions",2);E([F],Vi.prototype,"mirrored",2);E([F],Vi.prototype,"padding",2);E([F],Vi.prototype,"parallel",2);E([F],Vi.prototype,"itemStyler",2);E([F],Vi.prototype,"formatter",2);E([F],Vi.prototype,"format",2);var HE=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};E([F],HE.prototype,"enabled",2);E([F],HE.prototype,"width",2);E([F],HE.prototype,"stroke",2);var Jm=class extends pt{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};E([F],Jm.prototype,"enabled",2);E([F],Jm.prototype,"width",2);E([F],Jm.prototype,"size",2);E([F],Jm.prototype,"stroke",2);var Tc=class extends pt{constructor(){super(...arguments),this.caption=new en,this.enabled=!1,this.spacing=en.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};E([F],Tc.prototype,"enabled",2);E([F],Tc.prototype,"text",2);E([F],Tc.prototype,"spacing",2);E([F],Tc.prototype,"fontStyle",2);E([F],Tc.prototype,"fontWeight",2);E([F],Tc.prototype,"fontSize",2);E([F],Tc.prototype,"fontFamily",2);E([F],Tc.prototype,"color",2);E([F],Tc.prototype,"wrapping",2);E([F],Tc.prototype,"formatter",2);var xte=(e=>(e[e.TickAndDomain=0]="TickAndDomain",e[e.TicksOnly=1]="TicksOnly",e[e.Off=2]="Off",e))(xte||{});function wte(e){const[t,i]=Es(e.range),n=Math.floor(t),s=Math.ceil(i);return{min:n,max:s,visible:n!==s}}var r_=Math.PI*2,oAe=r_/2;function rAe(e,t){return Math.abs(t-e)<oAe?t:e>t?t+r_:t-r_}function Dte(e){const{min:t,max:i}=e,n=l=>l<t||l>i;return{tick:{fromFn(l,c,u){let{x1:d,x2:p,y1:f,y2:m}=l,v=l.opacity;return(u==="added"||n(c.offset))&&({x1:d,x2:p,y1:f,y2:m}=c,v=0),{x1:d,x2:p,y1:f,y2:m,opacity:v,phase:lc[u]}},toFn(l,c,u){const{x1:d,x2:p,y1:f,y2:m}=c;let v=1;return u==="removed"&&(v=0),{x1:d,x2:p,y1:f,y2:m,opacity:v}},applyFn(l,c){l.setProperties(c),l.visible=!n(l.y)}},line:{fromFn(l,c){const{x1:u,x2:d,y1:p,y2:f}=l.previousDatum??c;return{x1:u,x2:d,y1:p,y2:f,phase:lc.updated}},toFn(l,c){const{x1:u,x2:d,y1:p,y2:f}=c;return{x1:u,x2:d,y1:p,y2:f}}},label:{fromFn(l,c,u){const d=l.previousDatum??c;let{x:p,y:f,rotationCenterX:m,rotationCenterY:v,rotation:b}=d,C=l.opacity;return u==="removed"||n(d.y)?b=c.rotation:(u==="added"||n(l.datum.y))&&({x:p,y:f,rotationCenterX:m,rotationCenterY:v,rotation:b}=c,C=0),{x:p,y:f,rotationCenterX:m,rotationCenterY:v,rotation:b,opacity:C,phase:lc[u]}},toFn(l,c,u){const{x:d,y:p,rotationCenterX:f,rotationCenterY:m}=c;let v=0,b=1;return u==="added"?v=c.rotation:u==="removed"?(b=0,v=c.rotation):v=rAe(l.previousDatum?.rotation??c.rotation,c.rotation),{x:d,y:p,rotationCenterX:f,rotationCenterY:m,rotation:v,opacity:b,finish:{rotation:c.rotation}}}},group:{fromFn(l,c){const{translationX:u,translationY:d}=l;return{translationX:u,translationY:d,phase:lc.updated}},toFn(l,c){const{translationX:u,translationY:d}=c;return{translationX:u,translationY:d}}}}}function Mte(){return(e,t)=>({translationX:t.translationX,translationY:t.translationY})}function KI(){return(e,t)=>({x:t.x,y:t.y,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,rotation:t.rotation})}function a_(){return(e,t)=>{const{x1:i,x2:n,y1:s,y2:o}=t;return{x1:i,x2:n,y1:s,y2:o}}}function Ate(){return(e,t)=>{const{x1:i,x2:n,y1:s,y2:o}=t;return{x:i,y:s,width:n-i,height:o-s}}}var kte=(e=>(e[e.TickLines=0]="TickLines",e[e.AxisLine=1]="AxisLine",e[e.TickLabels=2]="TickLabels",e))(kte||{});function cY(e,t){return e.domain===t.domain&&e.rangeExtent===t.rangeExtent&&e.nice===t.nice&&e.gridLength===t.gridLength&&e.visibleRange[0]===t.visibleRange[0]&&e.visibleRange[1]===t.visibleRange[1]&&e.initialPrimaryTickCount?.unzoomed===t.initialPrimaryTickCount?.unzoomed&&e.initialPrimaryTickCount?.zoomed===t.initialPrimaryTickCount?.zoomed}var bh=class Tte{constructor(t,i){this.moduleCtx=t,this.scale=i,this.id=To(this),this._crossLines=[],this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new Qm,this.dataDomain={domain:[],clipped:!1},this.title=new Tc,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new Mt({name:`${this.id}-axis`}),this.tickLineGroup=this.axisGroup.appendChild(new Kv({name:`${this.id}-Axis-tick-lines`,zIndex:0})),this.tickLabelGroup=this.axisGroup.appendChild(new Kv({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.labelGroup=new Mt({name:`${this.id}-Labels`,zIndex:11}),this.gridGroup=new So({name:`${this.id}-Axis-grid`,zIndex:2}),this.gridFillGroup=this.gridGroup.appendChild(new Mt({name:`${this.id}-gridFills`})),this.gridLineGroup=this.gridGroup.appendChild(new Mt({name:`${this.id}-gridLines`})),this.crossLineRangeGroup=new Kv({name:`${this.id}-CrossLines-Range`,zIndex:6}),this.crossLineLineGroup=new Kv({name:`${this.id}-CrossLines-Line`,zIndex:10}),this.crossLineLabelGroup=new Kv({name:`${this.id}-CrossLines-Label`,zIndex:15}),this.tickLabelGroupSelection=Yo.select(this.tickLabelGroup,Zb,!1),this.line=new HE,this.tick=new Jm,this.gridLine=new VE,this.label=this.createLabel(),this.defaultTickMinSpacing=Tte.defaultTickMinSpacing,this.translation={x:0,y:0},this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.axisContext=void 0,this.cleanup=new _i,this.isHovering=!1,this.range=[0,1],this.visibleRange=[0,1],this.animatable=!0,this.tickLayout=void 0,this.formatterBoundSeries=new Dwe(()=>{const{direction:n,boundSeries:s}=this;return zd(s.flatMap(o=>o.getFormatterContext(n)))}),this.moduleMap=new rV,this.range=this.scale.range.slice();for(const n of this.crossLines)this.initCrossLine(n);this.cleanup.register(this.moduleCtx.widgets.containerWidget.addListener("mousemove",n=>this.onMouseMove(n)),this.moduleCtx.widgets.containerWidget.addListener("mouseleave",()=>this.endHovering()))}set crossLines(t){const{CrossLineConstructor:i}=this.constructor;for(const n of this._crossLines)this.detachCrossLine(n);this._crossLines=t.map(n=>{const s=new i;return s.set(n),s});for(const n of this._crossLines)this.attachCrossLine(n),this.initCrossLine(n)}get crossLines(){return this._crossLines}get type(){return this.constructor.type??""}get primaryLabel(){}get primaryTick(){}isCategoryLike(){return!1}resetAnimation(t){}onMouseMove(t){const n=this.tickLabelGroup.pickNode(t.currentX,t.currentY)?.datum,{textUntruncated:s=void 0}=n??{};s?(this.moduleCtx.tooltipManager.updateTooltip(this.id,{canvasX:t.currentX,canvasY:t.currentY,showArrow:!1},[{type:"structured",title:s}]),this.isHovering=!0):this.endHovering()}endHovering(){this.isHovering&&(this.moduleCtx.tooltipManager.removeTooltip(this.id),this.isHovering=!1)}attachCrossLine(t){this.crossLineRangeGroup.appendChild(t.rangeGroup),this.crossLineLineGroup.appendChild(t.lineGroup),this.crossLineLabelGroup.appendChild(t.labelGroup)}detachCrossLine(t){t.rangeGroup.remove(),t.lineGroup.remove(),t.labelGroup.remove()}destroy(){this.moduleMap.destroy(),this.cleanup.flush()}setScaleRange(t){const{range:i,scale:n}=this,s=(i[1]-i[0])/(t[1]-t[0]),o=s*t[0],r=i[0]-o;n.range=[r,r+s]}updateScale(){const{range:[t,i]}=this;this.setScaleRange(this.visibleRange);for(const n of this.crossLines)n.clippedRange=[t,i]}setCrossLinesVisible(t){this.crossLineRangeGroup.visible=t,this.crossLineLineGroup.visible=t,this.crossLineLabelGroup.visible=t}attachAxis(t){t.gridNode.appendChild(this.gridGroup),t.axisNode.appendChild(this.axisGroup),t.labelNode.appendChild(this.labelGroup),t.crossLineRangeNode.appendChild(this.crossLineRangeGroup),t.crossLineLineNode.appendChild(this.crossLineLineGroup),t.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(){this.gridGroup.remove(),this.axisGroup.remove(),this.labelGroup.remove(),this.crossLineRangeGroup.remove(),this.crossLineLineGroup.remove(),this.crossLineLabelGroup.remove()}attachLabel(t){this.labelGroup.append(t)}inRange(t,i=0){const[n,s]=Es(this.range);return t>=n-i&&t<=s+i}getRangeOverflow(t){const{range:i,visibleRange:n}=this,s=(i[1]-i[0])/(n[1]-n[0]),[o,r]=Es([i[0]-s*n[0],i[0]-s*n[0]+s]);return t<o?t-o:t>r?t-r:0}onGridLengthChange(t,i){i^t&&this.onGridVisibilityChange();for(const n of this.crossLines)this.initCrossLine(n)}onGridVisibilityChange(){}createLabel(){return new Vi}update(){this.formatterBoundSeries.clear(),this.updatePosition(),this.updateSelections(),this.gridLineGroup.visible=this.gridLine.enabled,this.updateLabels(),this.updateCrossLines()}getLabelStyles(t,i,n=this.label){const s={border:n.border,color:n.color,cornerRadius:n.cornerRadius,fill:n.fill,fillOpacity:n.fillOpacity,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontWeight:n.fontWeight,padding:n.padding,spacing:n.spacing};let o;n.itemStyler&&(o=this.cachedCallWithContext(n.itemStyler,{...t,...s}));const r=oi(o,i,s);return{border:r.border,color:r.color,cornerRadius:r.cornerRadius,fill:r.fill,fillOpacity:r.fillOpacity,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,fontWeight:r.fontWeight,padding:r.padding,spacing:r.spacing}}getTickSize(t=this.tick){return t.enabled?t.size:0}processData(){this.invalidateLayoutCache();const{includeInvisibleDomains:t,boundSeries:i,direction:n}=this,o=(t?i:i.filter(r=>r.isEnabled())).map(r=>r.getDomain(n));this.setDomains(...o)}setDomains(...t){let i,n;t.length>0?{domain:i,animatable:n}=this.scale.normalizeDomains(...t):(i=[],n=!0),this.dataDomain=this.normaliseDataDomain(i),this.reverse&&this.dataDomain.domain.reverse(),this.animatable=n}calculateDomain(t){const{dataDomain:{domain:i},range:n,nice:s,scale:o,gridLength:r}=this,a=Pm(n),l=[0,1];this.updateScale();const{unzoomedTickLayoutCache:c}=this;let u;if(c==null||!cY(c,{domain:i,rangeExtent:a,nice:s,gridLength:r,visibleRange:l,initialPrimaryTickCount:t})){const d=o.range;this.setScaleRange([0,1]);const p=s?0:2;u=this.calculateTickLayout(i,p,[0,1],t),o.range=d,this.unzoomedTickLayoutCache={domain:i,rangeExtent:a,nice:s,gridLength:r,visibleRange:l,initialPrimaryTickCount:t,tickLayout:u}}else u=c.tickLayout;return this.updateScale(),o.domain=u.niceDomain,{unzoomedTickLayout:u,domain:o.domain}}calculateLayout(t,i){this.chartLayout=i;const{visibleRange:n,nice:s}=this,o=n[0]===0&&n[1]===1,{unzoomedTickLayout:r,domain:a}=this.calculateDomain(t);let l;if(o)l=r;else{const{range:m,gridLength:v}=this,b=Pm(m),C=s?1:2,{tickLayoutCache:x}=this;x==null||!cY(x,{domain:a,rangeExtent:b,nice:s,gridLength:v,visibleRange:n,initialPrimaryTickCount:t})?(l=this.calculateTickLayout(a,C,n,t),this.tickLayoutCache={domain:a,rangeExtent:b,nice:s,gridLength:v,visibleRange:n,initialPrimaryTickCount:t,tickLayout:l}):l=x.tickLayout}const{rawTickCount:c=0,fractionDigits:u,bbox:d}=l,p=r.rawTickCount??0,f=c!==0&&p!==0?{zoomed:c,unzoomed:p}:void 0;return this.tickLayout=l.layout,this.layout.label={fractionDigits:u,spacing:this.label.spacing,format:this.label.format},this.layoutCrossLines(),{primaryTickCount:f,bbox:d}}invalidateLayoutCache(){this.unzoomedTickLayoutCache=void 0,this.tickLayoutCache=void 0,this.tickLayout=void 0}updateCrossLines(){const t=this.hasDefinedDomain()||this.hasVisibleSeries();for(const i of this.crossLines)i.update(t)}updatePosition(){const{crossLineRangeGroup:t,crossLineLineGroup:i,crossLineLabelGroup:n,gridGroup:s,translation:o}=this,r=Math.floor(o.x),a=Math.floor(o.y);s.setProperties({translationX:r,translationY:a}),t.setProperties({translationX:r,translationY:a}),i.setProperties({translationX:r,translationY:a}),n.setProperties({translationX:r,translationY:a})}tickFormatter(t,i,n,s,o,r="long"){const{moduleCtx:a,label:l}=this,{formatManager:c}=a,u=n?this.primaryLabel:void 0,d=this.tickFormatParams(t,i,s,o),p=this.formatterBoundSeries.get();let f,m,v;if(d.type==="number")f=d.fractionDigits;else if(d.type==="date"){const{unit:T,step:L,epoch:I}=d;m={unit:T,step:L,epoch:I},v=d.truncateDate}const b=this.uncachedCallWithContext.bind(this),C={datum:void 0,seriesId:void 0,legendItemName:void 0,key:void 0,source:"axis-label",property:this.direction,domain:t,boundSeries:p},x=u??l,w=n?l.format:void 0,M={specifier:tS.mergeSpecifiers(u?.format,l.format),truncateDate:v};return(T,L)=>{const I=this.datumFormatParams(T,C,f,m,r);return I.value=T,x.formatValue(b,I,L,{specifier:w,dateStyle:r,truncateDate:v})??c.format(b,I,M)??c.defaultFormat(I,M)}}formatDatum(t,i,n,s,o,r,a,l,c,u){if(i==null)return"";const{moduleCtx:d,direction:p,dataDomain:f}=this;l??(l=f.domain);const{formatManager:m}=d,v=this.formatterBoundSeries.get();let b;switch(n){case"crosshair":case"annotation-label":b=this.layout.label.fractionDigits+1;break;case"series-label":b=2;break;case"tooltip":b=3;break;case"legend-label":b=void 0;break}const C=this.datumFormatParams(i,{source:n,datum:r,seriesId:s,legendItemName:o,key:a,property:p,domain:l,boundSeries:v},b,void 0,"long"),{type:x,value:w}=C,M=this.createCallWithContext(t),T=c?.formatValue(M,x,w,u??C)??m.format(M,C)??this.label.formatValue(M,C,Number.NaN)??m.defaultFormat(C);return ft(T)?T:String(T)}getBBox(){return this.axisGroup.getBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}hasVisibleSeries(){return this.boundSeries.some(t=>t.isEnabled())}clipTickLines(t,i,n,s){this.tickLineGroup.setClipRect(new He(t,i,n,s))}clipGrid(t,i,n,s){this.gridGroup.setClipRect(new He(t,i,n,s))}getTitleFormatterParams(t){const{direction:i}=this,n=this.formatterBoundSeries.get();return{domain:t,direction:i,boundSeries:n,defaultValue:this.title?.text}}normaliseDataDomain(t){return{domain:[...t],clipped:!1}}getLayoutState(){return{id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale,...this.layout}}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),{...this.moduleCtx,parent:this.axisContext}}createAxisContext(){const{scale:t}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:mi.is(t)||kc.is(t),getCanvasBounds:()=>vn.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce((i,n)=>{const s=n.getKeyProperties(this.direction);for(const o of s)i.add(o);return i},new Set),seriesIds:()=>this.boundSeries.map(i=>i.id),scaleInvert:i=>t.invert(i,!0),scaleInvertNearest:i=>t.invert(i,!0),formatScaleValue:(i,n,s)=>this.formatDatum(void 0,i,n,void 0,void 0,void 0,void 0,void 0,s),attachLabel:i=>this.attachLabel(i),inRange:(i,n)=>this.inRange(i,n),getRangeOverflow:i=>this.getRangeOverflow(i),pickBand:i=>this.pickBand(i)}}pickBand(t){if(!yh.is(this.scale))return;const{scale:i,range:n}=this,s=i.invert(this.isVertical()?t.y:t.x,!0),o=i.bandwidth??0,a=((i.step??0)-o)/2,l=i.convert(s),c=l-a,u=l+o+a;return{id:this.id,value:s,band:[iS(c,n),iS(u,n)],position:l}}isVertical(){return this.direction==="y"}isReversed(){return this.reverse}cachedCallWithContext(t,i){const{callbackCache:n,chartService:s}=this.moduleCtx;return n.call([this,s],t,i)}uncachedCallWithContext(t,i){const{chartService:n}=this.moduleCtx;return mc([this,n],t,i)}createCallWithContext(t){const{chartService:i}=this.moduleCtx;return(n,s)=>mc([t,this,i],n,s)}};bh.defaultTickMinSpacing=50;bh.CrossLineConstructor=ir;E([F],bh.prototype,"nice",2);E([F],bh.prototype,"reverse",2);E([F],bh.prototype,"keys",2);E([F],bh.prototype,"interval",2);E([F],bh.prototype,"title",2);E([bg((e,t,i)=>e.onGridLengthChange(t,i))],bh.prototype,"gridLength",2);var aV=bh,lV=class extends Vi{constructor(){super(...arguments),this.autoRotateAngle=335}};E([F],lV.prototype,"autoRotate",2);E([F],lV.prototype,"autoRotateAngle",2);var Sb=1e3,Gp=Sb*60,mm=Gp*60,Nm=mm*24,Ite=Nm*7,cV=Nm*30,qw=Nm*365,Av=new Date().getTimezoneOffset()*Gp,rD={millisecond:{milliseconds:1,hierarchy:"day",encode(e){return e.getTime()},decode(e){return new Date(e)}},second:{milliseconds:Sb,hierarchy:"day",encode(e,t){const i=t?0:Av;return Math.floor((e.getTime()-i)/Sb)},decode(e,t){const i=t?0:Av;return new Date(i+e*Sb)}},minute:{milliseconds:Gp,hierarchy:"day",encode(e,t){const i=t?0:Av;return Math.floor((e.getTime()-i)/Gp)},decode(e,t){const i=t?0:Av;return new Date(i+e*Gp)}},hour:{milliseconds:mm,hierarchy:"day",encode(e,t){const i=t?0:Av;return Math.floor((e.getTime()-i)/mm)},decode(e,t){const i=t?0:Av;return new Date(i+e*mm)}},day:{milliseconds:Nm,hierarchy:"month",encode(e,t){const i=t?0:e.getTimezoneOffset()*Gp;return Math.floor((e.getTime()-i)/Nm)},decode(e,t){let i;return t?(i=new Date(0),i.setUTCDate(i.getUTCDate()+e),i.setUTCHours(0,0,0,0)):(i=new Date(1970,0,1),i.setDate(i.getDate()+e)),i}},month:{milliseconds:cV,hierarchy:"year",encode(e,t){return t?e.getUTCFullYear()*12+e.getUTCMonth():e.getFullYear()*12+e.getMonth()},decode(e,t){if(t){const i=Math.floor(e/12),n=e-i*12;return new Date(Date.UTC(i,n,1))}else{const i=Math.floor(e/12),n=e-i*12;return new Date(i,n,1)}}},year:{milliseconds:qw,hierarchy:void 0,encode(e,t){return t?e.getUTCFullYear():e.getFullYear()},decode(e,t){let i;return t?(i=new Date,i.setUTCFullYear(e),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)):i=new Date(e,0,1,0,0,0,0),i}}};function aD(e){return typeof e=="string"?{unit:e,step:1,epoch:void 0,utc:!1}:{unit:e.unit,step:e.step??1,epoch:e.epoch,utc:e.utc??!1}}function lD(e,t,i,n){if(i==null)return 0;const s=rD[e];return Math.floor(s.encode(new Date(i),n))%t}function sS(e,t,i,n,s){const o=rD[t];return Math.floor((o.encode(new Date(e),n)-s)/i)}function cD(e,t,i,n,s){return rD[t].decode(e*i+s,n)}function YI(e,t,i,n,s){const o=new Date(e),r=sS(o,t,i,n,s);return cD(r,t,i,n,s)}function XI(e,t,i,n,s){const o=new Date(Number(e)-1),r=sS(o,t,i,n,s);return cD(r+1,t,i,n,s)}function bl(e,t){const{unit:i,step:n,epoch:s,utc:o}=aD(e),r=lD(i,n,s,o);return YI(t,i,n,o,r)}function Rte(e,t){const{unit:i,step:n,epoch:s,utc:o}=aD(e),r=lD(i,n,s,o);return XI(t,i,n,o,r)}function Ete(e,t){const{unit:i,step:n,epoch:s,utc:o}=aD(e),r=lD(i,n,s,o);return cD(sS(XI(t,i,n,o,r),i,n,o,r)-1,i,n,o,r)}function uV(e,t){const{unit:i,step:n,epoch:s,utc:o}=aD(e),r=lD(i,n,s,o);return cD(sS(YI(t,i,n,o,r),i,n,o,r)+1,i,n,o,r)}function dV(e,t,i){if(e.valueOf()>t.valueOf()&&([e,t]=[t,e],i!=null&&(i=[1-i[1],1-i[0]])),i!=null){const n=t.valueOf()-e.valueOf(),s=e.valueOf();e=new Date(s+i[0]*n),t=new Date(s+i[1]*n)}return[new Date(e),new Date(t)]}function ZI(e,t,i,{extend:n=!1,visibleRange:s=[0,1],limit:o,defaultAlignment:r="start"}={}){const a=aD(e),{unit:l,step:c,utc:u}=a;let d;a.epoch!=null?d=a.epoch:r==="interval"?d=void 0:t.valueOf()>i.valueOf()?d=i:d=t;const p=lD(a.unit,a.step,d,a.utc);let[f,m]=dV(t,i,s);f=n?YI(f,l,c,u,p):XI(f,l,c,u,p),m=n?XI(m,l,c,u,p):YI(m,l,c,u,p);const v=sS(f,l,c,u,p);let b=sS(m,l,c,u,p);return o!=null&&b-v>o&&(b=v+o),{range:[v,b],unit:l,step:c,utc:u,offset:p}}function hV(e,t,i,n){const{range:[s,o]}=ZI(e,t,i,n);return Math.abs(o-s)}function Fl(e,t,i,n){const{range:[s,o],unit:r,step:a,utc:l,offset:c}=ZI(e,t,i,n),u=[];for(let d=s;d<=o;d+=1){const p=cD(d,r,a,l,c);u.push(p)}return u}function pV(e,t,i,{extend:n,visibleRange:s,limit:o,defaultAlignment:r}={}){const{range:[a]}=ZI(e,t,i,{extend:n,visibleRange:s,limit:o,defaultAlignment:r}),{range:[l]}=ZI(e,t,i,{extend:n,limit:o,defaultAlignment:r});return a-l}function lh(e){return typeof e=="string"?e:e.unit}function og(e){return typeof e=="string"?1:e.step??1}function Qw(e){return typeof e=="string"?void 0:e.epoch}function uD(e){return rD[lh(e)].hierarchy}function Ur(e){return og(e)*rD[lh(e)].milliseconds}function vo(e){return e instanceof Date?e.getTime():e}function dD(e){return e<Sb?"millisecond":e<Gp?"second":e<mm?"minute":e<mm*23?"hour":e<28*Nm?"day":e<qw?"month":"year"}function gV(e){if(e.length===0)return"millisecond";if(e.length===1)return WE(e[0]);let t=1/0;for(let i=1;i<e.length;i++)t=Math.min(t,Math.abs(e[i].valueOf()-e[i-1].valueOf()));return dD(t)}function WE(e){return bl("second",e)<e?"millisecond":bl("minute",e)<e?"second":bl("hour",e)<e?"minute":bl("day",e)<e?"hour":bl("month",e)<e?"day":bl("year",e)<e?"month":"year"}function fV(e){const[t,i]=e.length===0?[0,0]:Es([e[0].valueOf(),e.at(-1).valueOf()]),n=new Date(t).getFullYear(),s=new Date(i).getFullYear();if(n!==s)return;const o=new Date(t).getMonth(),r=new Date(i).getMonth();if(o!==r)return"year";const a=new Date(t).getDate(),l=new Date(i).getDate();return a!==l?"month":"day"}function Lte(e,t,i){if(i==null||i[0]===0&&i[1]===1)return;const n=Je(0,Math.floor(i[0]*e.length),e.length),s=Je(0,Math.ceil(i[1]*e.length),e.length),o=t?e.length-s:n,r=t?e.length-n:s;return[o,r]}function aAe(e,t,i){return Lte(e,t,i)??[0,e.length]}function Pte(e,t,i){const n=Lte(e,t,i);if(n==null)return{ticks:e,count:e.length,firstTickIndex:0};const[s,o]=n;return{ticks:e.slice(s,o),count:e.length,firstTickIndex:s}}var RS=class Nte extends yh{constructor(){super(...arguments),this.type="category",this.defaultTickCount=0,this.index=new Map,this.indexInitialized=!1,this._domain=[]}static is(t){return t instanceof Nte}set domain(t){this._domain!==t&&(this.invalid=!0,this._domain=t,this.index.clear(),this.indexInitialized=!1)}get domain(){return this._domain}get bands(){return this._domain}normalizeDomains(...t){let i;const n=new Set;let s=!0;for(const o of t)n.has(o)||(n.add(o),i==null?i=uY(o):(s&&(s=lAe(o,i)),i=uY([...i,...o])));return i??(i=[]),{domain:i,animatable:s}}toDomain(t){}invert(t,i=!1){this.refresh();const n=i?this.bandwidth/2:0,s=this.invertNearestIndex(Math.max(0,t-n));return i||t===this.ordinalRange(s)?this.domain[s]:void 0}ticks(t,i=this.domain,n){const{bands:s}=this;let{tickCount:o}=t;if(o===0){const v=s.length>1?1:0;return{ticks:s[v]?[s[v]]:[],count:void 0,firstTickIndex:v}}let r=o!=null&&o!==0?Math.trunc(s.length/o):1;if(r=QB(r),r<=1)return Pte(i,!1,n);o=Math.trunc(s.length/r);const a=r*o,l=QB(Math.trunc((s.length-a)/2)),c=Je(0,Math.floor((n?.[0]??0)*s.length),s.length),u=Je(0,Math.ceil((n?.[1]??1)*s.length),s.length),d=Math.floor((c-l)/r)*r+l,p=Math.ceil((u-l)/r)*r+l,f=[];for(let v=d;v<p;v+=r)v>=0&&v<s.length&&f.push(s[v]);let m=f.length>0?this.findIndex(f[0]):void 0;return m!=null&&(m=Math.floor((m-l)/r)),{ticks:f,count:void 0,firstTickIndex:m}}findIndex(t){const{index:i,indexInitialized:n}=this;if(!n){const{domain:s}=this;for(let o=0;o<s.length;o++)i.set(vo(s[o]),o);this.indexInitialized=!0}return i.get(vo(t))}};function uY(e){let t;const i=new Set;for(const n of e){const s=vo(n),o=i.size;i.add(s),i.size!==o?t?.push(n):t??(t=e.slice(0,i.size))}return t??e}function lAe(e,t){let i=-1;for(const n of e){const s=t.indexOf(n);if(s===-1)i=1/0;else{if(s<=i)return!1;i=s}}return!0}function mV(e,t){return e.valueOf()-t.valueOf()}function cAe(e){let t=Number.NaN;const i=[];for(const n of e){const s=n.valueOf();t!==s&&i.push(n),t=s}return i}function l_(e){const t=e.slice().sort(mV);return yV(t)==null?cAe(t):t}function yV(e){if(e.length===0)return 1;const t=Number(e.at(-1))>Number(e[0])?1:-1;let i=-1/0*t;for(const n of e){const s=n.valueOf();if(Math.sign(s-i)!==t)return;i=s}return t}function c_(e,[t,i],[n,s]){const o=s-n,r=i-t,a=t+r*e[0],l=t+r*e[1];return[(a-n)/o,(l-n)/o]}var rn=(e,t)=>({duration:Ur(e)*t,timeInterval:e,step:t}),u_=[rn({unit:"second"},1),rn({unit:"second"},5),rn({unit:"second"},15),rn({unit:"second"},30),rn({unit:"minute"},1),rn({unit:"minute"},5),rn({unit:"minute"},15),rn({unit:"minute"},30),rn({unit:"hour"},1),rn({unit:"hour"},3),rn({unit:"hour"},6),rn({unit:"hour"},12),rn({unit:"day"},1),rn({unit:"day"},2),rn({unit:"day",step:7},1),rn({unit:"day",step:7},2),rn({unit:"day",step:7},3),rn({unit:"month"},1),rn({unit:"month"},2),rn({unit:"month"},3),rn({unit:"month"},4),rn({unit:"month"},6),rn({unit:"year"},1)],Ote=[1,2,5,10];function dY(e,t){return Math.abs(Math.round(e)-e)<t}function Fte(e,t,i){return Math.abs(t-e)>=i?Math.abs(t-e)/i+1:1}function hD(e,t,i,n,s,o){if(e===t)return{ticks:[e],count:1,firstTickIndex:0};if(i<2)return{ticks:[e,t],count:2,firstTickIndex:0};const r=Jw(e,t,i,n,s);if(!Number.isFinite(r))return{ticks:[],count:0,firstTickIndex:void 0};let a=e,l=t;dY(a/r,1e-12)||(a=Math.ceil(a/r)*r),dY(l/r,1e-12)||(l=Math.floor(l/r)*r),o!=null&&(o=c_(o,[e,t],[a,l]));const{ticks:c}=UE(a,l,r,o),u=c.at(0);return{ticks:c,count:Fte(a,l,r),firstTickIndex:u==null?void 0:Math.round((u-a)/r)}}var uAe=Math.floor(2*Ite/cV*10)/10;function hY({timeInterval:e,step:t}){const i=Ur(e)*t,n=uD(e),s=n?Ur(n):void 0;return i<=(s??1/0)*uAe}function Bte(e,{weekStart:t}){if(e.unit==="day"&&e.step===7)return t}function jE(e,t,i,n,s,{weekStart:o,primaryOnly:r=!1,targetInterval:a}){if(i<=0)return;const l=a??Math.abs(t-e)/Math.max(i,1),c=u_.findLast(f=>(!r||hY(f))&&l>f.duration),u=u_.find(f=>(!r||hY(f))&&l<=f.duration);if(c==null)return{unit:"millisecond",step:Math.max(Jw(e,t,i,n,s),1)};if(u==null)return{unit:"year",step:a==null?Jw(e/qw,t/qw,i,n,s):1};const{timeInterval:d,step:p}=l-c.duration<u.duration-l?c:u;return{unit:d.unit,step:og(d)*p,epoch:Bte(d,{weekStart:o})}}function Jw(e,t,i,n=0,s=1/0){if(e===t)return Je(1,n,s);if(i<1)return Number.NaN;const o=Math.abs(t-e),r=10**Math.floor(Math.log10(o/i));let a=Number.NaN,l=1/0,c=!1;for(const u of Ote){const d=Math.ceil(o/(u*r)),p=d>=n&&d<=s;if(c&&!p)continue;const f=Math.abs(d-i);(l>f||c!==p)&&(c||(c=p),l=f,a=u)}return a*r}function pY(e){for(let t=e.length-1;t>=0;t-=1)if(e[t]!=="0")return t+1;return 0}function dAe(e,t){const i=gG(t??",f");if(i==null)return;(i.precision==null||Number.isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...e.map(s=>{if(!Number.isFinite(s))return 0;const[o,r]=s.toExponential((i.type?6:12)-1).split(/[.e]/g);return(o!=="1"&&o!=="-1"?1:0)+pY(r)+1})):"f%".includes(i.type)&&(i.precision=Math.max(...e.map(s=>{if(!Number.isFinite(s)||s===0)return 0;const o=Math.floor(Math.log10(Math.abs(s))),r=i.type?6:12,a=s.toExponential(r-1).split(/[.e]/g)[1],l=pY(a);return Math.max(0,l-o)}))));const n=yJ(i);return s=>n(Number(s))}function UE(e,t,i,n){if(!Number.isFinite(i)||i<=0)return{ticks:[],count:0,firstTickIndex:void 0};if(e===t)return{ticks:[e],count:1,firstTickIndex:0};const s=10**X0(i),o=Math.min(e,t),r=Math.max(e,t);let a,l;if(n!=null&&(n[0]!==0||n[1]!==1)){const d=t-e,p=e+d*n[0],f=t-d*(1-n[1]);a=Math.min(p,f),l=Math.max(p,f)}else a=o,l=r;a=Math.floor(a*s)/s,l=Math.ceil(l*s)/s;const c=[];for(let d=0;;d+=1){const p=Math.round((o+i*d)*s)/s;if(p>r)break;p>=a&&p<=l&&c.push(p)}const u=c.at(0);return{ticks:c,count:Fte(o,r,i),firstTickIndex:u==null?void 0:Math.round((u-o)/i)}}function oS(e,t){return e>=t?(fe.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}function _te(e,t){const i=Math.abs(t-e),n=10**Math.floor(Math.log10(i));let s=1/0,o=[e,t];for(const r of Ote){const a=r*n,l=Math.floor(e/a)*a,c=Math.ceil(t/a)*a,u=1-i/Math.abs(c-l);s>u&&(s=u,o=[l,c])}return o}function zte(e,t,i,n,s,o){if(e<=0)return{minTickCount:0,maxTickCount:0,tickCount:0};o=Math.max(o,e/(s+1)),i??(i=o),n??(n=e),i>n&&(i===o?i=n:n=i),i=Math.max(i,1);const r=Math.max(1,Math.floor(e/(t*i))),a=Math.min(r,Math.ceil(e/(t*n))),l=Je(a,Math.floor(s/t),r);return{minTickCount:a,maxTickCount:r,tickCount:l}}var $E=new Date(1970,0,4),rS=class Gte extends mi{constructor(){super([],[0,1]),this.type="time"}static is(t){return t instanceof Gte}toDomain(t){return new Date(t)}convert(t,i){return super.convert(t?.valueOf()??Number.NaN,i)}invert(t){return new Date(super.invert(t))}niceDomain(t,i=this.domain){if(i.length<2)return[];let[n,s]=i;const o=4,r=this.getPixelRange();for(let a=0;a<o;a++){const[l,c]=pAe(n,s,t,r);if(vo(n)===vo(l)&&vo(s)===vo(c))break;n=l,s=c}return[n,s]}ticks(t,i=this.domain,n=[0,1],{extend:s=!1}={}){const{nice:o,interval:r,tickCount:a=mi.defaultTickCount,minTickCount:l,maxTickCount:c}=t;if(i.length<2)return;const u=i.map(vo),d=u[0],p=u.at(-1);if(r!=null){const b=this.getPixelRange();return{ticks:vV({start:d,stop:p,interval:r,availableRange:b,visibleRange:n,extend:s})??hAe({start:d,stop:p,tickCount:a,minTickCount:l,maxTickCount:c,visibleRange:n,extend:s}),count:void 0}}else{if(o&&a===2)return{ticks:i,count:void 0};if(o&&a===1)return{ticks:i.slice(0,1),count:void 0}}const f=jE(d,p,a,l,c,{weekStart:$E});if(f==null)return;const m=Fl(f,new Date(d),new Date(p),{visibleRange:n,extend:s}),v=pV(f,new Date(d),new Date(p),{visibleRange:n,extend:s});return{ticks:m,count:void 0,firstTickIndex:v,timeInterval:f}}};function hAe({start:e,stop:t,tickCount:i,minTickCount:n,maxTickCount:s,visibleRange:o,extend:r}){const a=jE(e,t,i,n,s,{weekStart:$E});return a?Fl(a,new Date(e),new Date(t),{visibleRange:o,extend:r}):[]}function vV({start:e,stop:t,interval:i,availableRange:n,visibleRange:s,extend:o}){if(!i)return[];if(bi(i)||typeof i=="string"){const d=Fl(i,new Date(e),new Date(t),{visibleRange:s,extend:o});return oS(d.length,n)?void 0:d}const r=Math.abs(i);if(oS(Math.abs(t-e)/r,n))return;const a=u_.findLast(d=>r%d.duration===0);if(a){const{timeInterval:d,step:p,duration:f}=a,m={...d,step:p*og(d)*Math.round(r/f),epoch:Bte(d,{weekStart:$E})};return Fl(m,new Date(e),new Date(t),{visibleRange:s,extend:o})}let l=new Date(Math.min(e,t));const c=new Date(Math.max(e,t)),u=[];for(;l<=c;)u.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+r);return u}function pAe(e,t,i,n){const{interval:s}=i,o=Math.min(vo(e),vo(t)),r=Math.max(vo(e),vo(t));let a;if(bi(s)||typeof s=="string")a=s;else{let d;typeof s=="number"&&(d=(r-o)/Math.max(s,1),oS(d,n)&&(d=void 0)),d??(d=i.tickCount??mi.defaultTickCount),a=jE(o,r,d,i.minTickCount,i.maxTickCount,{weekStart:$E})}if(a==null)return[e,t];const l=Fl(a,new Date(o),new Date(r),{extend:!0});if(l==null||l.length<2)return[e,t];const c=l[0],u=l.at(-1);return e<=t?[c,u]:[u,c]}var Cb=class Vte extends kc{constructor(){super(...arguments),this.type="ordinal-time",this.defaultTickCount=mi.defaultTickCount,this._domain=[],this.isReversed=!1}static is(t){return t instanceof Vte}set domain(t){t!==this._domain&&(this.invalid=!0,this._domain=t,this._bands=void 0,this.isReversed=gY(t))}get domain(){return this._domain}get bands(){return this._bands??(this._bands=this.isReversed?this.domain.slice().reverse():this.domain),this._bands}normalizeDomains(...t){const i=t.filter(n=>n.length>0);if(i.length===0)return{domain:[],animatable:!1};if(i.length===1){let n=i[0];const s=yV(n);return s===-1?n=n.slice().reverse():s==null&&(n=l_(n.slice())),{domain:n,animatable:!0}}return{domain:l_(i.flat()),animatable:!0}}ticks(t,i,n=[0,1],{extend:s=!1,dropInitial:o=!1}={}){const{interval:r,maxTickCount:a,tickCount:l=a}=t,{bands:c}=this;if(!c.length)return;if(this.refresh(),r==null){const{ticks:x,tickOffset:w,tickEvery:M}=this.getDefaultTicks(i,l,n,s);let T=x.length>0?this.findIndex(x[0]):void 0;return T=T==null?void 0:Math.floor((T-w)/M),{ticks:x,count:void 0,firstTickIndex:T}}let u,d;i&&i.length>=2?(u=i[0].valueOf(),d=i.at(-1).valueOf()):(u=c[0].valueOf(),d=c.at(-1).valueOf());const[p,f]=this.range,m=Math.abs(f-p),v=vV({start:u,stop:d,interval:r,availableRange:m,visibleRange:n,extend:s})??this.getDefaultTicks(i,l,n,s).ticks,b=[];let C=-1;for(const x of v){const w=this.findIndex(x,1)??-1,M=w===C;C=w,!(o&&w===0)&&w!==-1&&!M&&b.push(c[w])}return{ticks:b,count:void 0,firstTickIndex:void 0}}stepTicks(t,i,n=[0,1],s=!0){const o=i?this.bandDomainIndices(i):void 0,r=this.ticksEvery(o,n,t,0,!1),a=r.at(-1),l=s&&t>1?o?.[1]:void 0,c=l!=null&&a!=null?this.findIndex(a):void 0;return c!=null&&l!=null&&l-c<t&&r.pop(),r}bandCount(t=[0,1]){const{domain:i}=this,n=Math.floor(t[0]*i.length);return Math.ceil(t[1]*i.length)-n}getDefaultTicks(t,i,n,s){const{bands:o}=this,r=Math.ceil(o.length/i),a=Math.floor(r/2),l=t?this.bandDomainIndices(t):void 0;return{ticks:this.ticksEvery(l,n,r,a,s),tickOffset:a,tickEvery:r}}bandDomainIndices(t){const i=gY(t),n=this.findIndex(t[i?t.length-1:0],1)??0,s=this.findIndex(t[i?0:t.length-1],1)??this.bands.length-1;return[n,s]}ticksEvery([t,i]=[0,this.bands.length],n,s,o,r){const{bands:a}=this,l=t,c=i-t+1;let u=l+Math.floor(n[0]*c),d=l+Math.ceil(n[1]*c);r&&(u-=s,d+=s),u=Math.max(u,0),d=Math.min(d,a.length);let p;if(s<=1)p=a.slice(u,d);else{p=[];for(let f=u;f<d;f+=1)(f-l+o)%s===0&&p.push(a[f])}return p}};function gY(e){return e.length>0&&e[0]>e.at(-1)}var Hte=5e7,Vp=class Wte extends kc{constructor(){super(...arguments),this.type="unit-time",this.defaultTickCount=12,this._domain=[],this._bands=void 0}static is(t){return t instanceof Wte}static supportsInterval(t,i){return fY(t,i)}set domain(t){t!==this._domain&&(this._domain=t,this._bands=void 0)}get domain(){return this._domain}get interval(){return this._interval}set interval(t){this._interval!==t&&(this._interval=t,this._bands=void 0)}get bands(){return this._bands??(this._bands=this.calculateBands(this._domain,[0,1]).bands),this._bands}normalizeDomains(...t){return qG(...t)}convert(t,i){this.refresh(),t instanceof Date||(t=new Date(t));const{domain:n,interval:s}=this;if(n.length<2)return Number.NaN;if(i?.clamp!==!0&&s!=null){const o=t.valueOf(),[r,a]=VT(n,s),l=Math.min(r.valueOf(),a.valueOf()),c=Math.max(r.valueOf(),a.valueOf()),u=uV(s,new Date(c)).valueOf();if(o<l||o>=u)return Number.NaN}return super.convert(t,i)}calculateBands(t,i,n=!1){if(t===this.domain&&i[0]===0&&i[1]===1&&!n&&this._bands!=null)return{bands:this._bands,firstBandIndex:0};if(t.length<2)return{bands:[],firstBandIndex:void 0};const{interval:s}=this;if(s==null)return{bands:[],firstBandIndex:void 0};const o={visibleRange:i,extend:n};if(!fY(t,s,o))return{bands:[],firstBandIndex:void 0};const[r,a]=VT(t,s);if(hV(s,r,a,o)>Hte)return fe.warnOnce("the configured unit results in too many bands, ignoring. Supply a larger unit."),{bands:[],firstBandIndex:void 0};const l=Fl(s,r,a,o),c=pV(s,r,a,o);return{bands:l,firstBandIndex:c}}ticks({interval:t},i=this.domain,n=[0,1],{extend:s=!1}={}){if(i.length<2)return;let o,r,a;if(i===this.domain&&!s?({bands:o}=this.calculateBands(i,[0,1],!1),a=aAe(o,!1,n),r=a[0]):{bands:o,firstBandIndex:r}=this.calculateBands(i,n,s),t==null)return{ticks:o,count:void 0,firstTickIndex:r};const l=this.interval?Ur(this.interval):1/0,c=Math.min(i[0].valueOf(),i[1].valueOf()),u=Math.max(i[0].valueOf(),i[1].valueOf());let d,p,f;if(bi(t)||typeof t=="string")d=Fl(t,i[0],i[1],{extend:!0,visibleRange:n}),p=0,f=d.length-1;else{const M=a?a[0]:0,T=a?a[1]:o.length-1;d=o,p=Qf(M,T,L=>o[L].valueOf()<=c)??M,f=Qf(M,T,L=>o[L].valueOf()<=u)??T}const m=[];let v;for(let M=p;M<=f;M++){const T=d[M].valueOf(),L=Qf(0,o.length-1,R=>o[R].valueOf()<=T),I=L!=null&&L!=v?o[L]:void 0;v=L,I!=null&&T-I.getTime()<=l&&m.push(I)}let b,C;if(this.interval){const M=VT([new Date(c),new Date(u)],this.interval);b=M[0].valueOf(),C=M[1].valueOf()}else b=c,C=u;let x=Ww(0,m.length-1,M=>m[M].valueOf()>=b)??0,w=Qf(0,m.length-1,M=>m[M].valueOf()<=C)??m.length-1;return s&&(x=Math.max(x-1,0),w=Math.min(w+1,m.length-1)),{ticks:m.slice(x,w+1),count:m.length,firstTickIndex:r}}};function fY(e,t,i){const[n,s]=VT(e,t);return hV(t,n,s,i)<=Hte}function VT(e,t){const i=bl(t,e[0]),n=bl(t,e[1]);return[i,n]}function gAe(e,t,i,n,s){let[o,r]=Es(t.map(Number));const a=Math.floor(i.unzoomed);if(a<=1){const[C,x]=fAe(o,r),w=5*Math.pow(2,-Math.ceil(Math.log2(s[1]-s[0]))),{ticks:M}=hD(C,x,w,void 0,void 0,s),T=[e.toDomain(C),e.toDomain(x)];return n&&T.reverse(),{domain:T,ticks:M}}if(o===r){const C=Math.floor(Math.log10(o)),x=Math.pow(10,C),w=Math.min(x,1),M=a-1;o-=w*Math.floor(M/2),r=o+w*M}let l=o,c=r;l=mAe(l,c,a);const u=vAe(l,c,a),d=a-1;c=l+d*u;const p=Math.floor(l/u)*u,f=Math.floor(c/u)*u;p<=o&&f>=r&&(l=p,c=f);const m=[e.toDomain(l),e.toDomain(c)];n&&m.reverse();const v=u*((i.unzoomed-1)/(i.zoomed-1)),b=yAe(l,v,Math.floor(i.zoomed));return{domain:m,ticks:b}}function fAe(e,t){let i=e,n=t,s=0;do{[i,n]=_te(i,n);const{ticks:o}=hD(i,n,5);if(o.length%2===1)return[i,n];i-=1,n+=1}while(s++<10);return[e,t]}function mAe(e,t,i){e=Math.floor(e);const n=Math.abs(t-e)/(i-1),s=Math.floor(Math.log10(n)),o=Math.pow(10,s);return Math.floor(e/o)*o}function yAe(e,t,i){const n=X0(t),s=Math.pow(10,n),o=[];for(let r=0;r<i;r++){const a=e+t*r;o.push(Math.round(a*s)/s)}return o}function vAe(e,t,i){const n=i-1,s=(t-e)/n;return bAe(s)}function bAe(e){const t=Math.floor(Math.log10(e)),i=Math.pow(10,t),n=e/i;return n>0&&n<=1?i:n>1&&n<=2?2*i:n>2&&n<=5?5*i:n>5&&n<=10?10*i:e}function bV(){const e=new Map;return t=>{const i=e.get(t);return i?(e.set(t,i+1),`${t}_${i}`):(e.set(t,1),t)}}var SAe=18,CAe=[1,2,3,4,6,8,9,10,12];function d_(e,t=0){const i=[];for(const n of e){const{x:s,y:o,width:r,height:a}=n;if(i.some(l=>PJ(l,s,o,r+t,a+t)))return!0;i.push(n)}return!1}function xAe(e,t,i,n){if(e==null)return t;if(typeof e!="number"){const a=t[0],l=typeof e=="string"?{unit:e,epoch:a}:{...e,epoch:a};return Fl(l,t[0],t[1],{visibleRange:i,extend:n})}const s=[],o=t[0].valueOf(),r=t[1].valueOf();for(let a=o;a<=r;a+=e)s.push(new Date(a));return s}function h_(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1)if(e[i]?.valueOf()!==t[i]?.valueOf())return!1;return!0}function jte(e){if(e.length<2)return 1/0;let t=0,i=e[0].translation;for(let n=1;n<e.length;n++){const s=e[n].translation,o=Math.abs(s-i);t=Math.max(t,o),i=s}return t}function Ute(e,{niceDomain:t,rawTicks:i,rawFirstTickIndex:n=0,generatePrimaryTicks:s,primaryTicksIndices:o,alignment:r,fractionDigits:a,timeInterval:l}){const{scale:c,label:u,tickFormatter:d,inRange:p,isVertical:f,sizeLimit:m=1/0}=e,v=rS.is(c)||kc.is(c),b=ei(u),C=bV(),x=[];return SV(c,t,()=>{const w=yh.is(c)?c.bandwidth??1/0:1/0,M=(c.bandwidth??0)/2,T=wAe(u.enabled,s,t,i,a,l,d),L={font:u,maxWidth:f?m:w,maxHeight:f?w:m,overflow:u.truncate?"ellipsis":"hide",textWrap:u.wrapping};for(let I=0;I<i.length;I++){const R=i[I],O=c.convert(R,{alignment:r})+M;if(p&&!p(O))continue;const _=o?.has(I)??!1,B=T(_,R,I);let V=null;u.avoidCollisions&&(V=mE(B,L)||null);const j=V??B,K=ft(j),Y=j!==B&&(!K||zJ(j.at(-1)));let G;if(v){const $=R?.valueOf();Number.isFinite($)&&(G=C(`v:${$}`))}G??(G=C(`l:${K?Gt(j.flat()):j}`)),x.push({tick:R,tickId:G,tickLabel:j,isPrimary:_,index:I+n,textUntruncated:Y?Gt(B):void 0,textMetrics:K?Da(j,u):b.measureLines(j),translation:Math.floor(O)})}}),x}function SV(e,t,i){const n=e.domain;try{e.domain=t,i()}finally{e.domain=n}}function wAe(e,t,i,n,s,o,r){const a=t?"component":"long",l=t&&o?uD(o):void 0,c=t?r(i,n,!0,s,l,a):null,u=e?r(i,n,!1,s,o,a):null;return(d,p,f)=>(d?c:u)?.(p,f)??String(p)}function $te(e,t,i,n,s,o,r,a){if(!rS.is(e)&&!kc.is(e))return;const l=uD(o);if(l==null)return;r&&(t=[1-t[1],1-t[0]]);const c=Math.min(e.domain[0].valueOf(),e.domain.at(-1).valueOf()),u=Math.max(e.domain[0].valueOf(),e.domain.at(-1).valueOf());let[d,p]=dV(new Date(c),new Date(u),t);d=bl(l,d),d.valueOf()>=c&&(d=Ete(l,d)),p=Rte(l,p),p.valueOf()<=u&&(p=uV(l,p));const f=Fl(l,d,p),m=Ur(o),v=Cb.is(e),b={...s,interval:o},C=[];let x,w,M,T=0;if(Cb.is(e)){const L=lh(o);w=a!=null&&Ur(a)>=Ur(L)?2:3,M=1;const I=i/n,R=e.bandCount(t)/(I*SAe);T=CAe.findLast(O=>R>=O)??1}else Vp.is(e)&&(e.interval==null||Ur(e.interval)>=m)?w=1:(w=0,M=2);for(let L=0;L<f.length-1;L++){const I=f[L],R=f[L+1],O=L===0,_=L===f.length-2,B=R.valueOf()-I.valueOf(),V=[Math.max((c-I.valueOf())/B,0),Math.min((u-I.valueOf())/B,1)];let j;switch(w){case 0:j=xAe(b.interval,[I,R],V,!0);break;case 1:case 3:{j=e.ticks(b,[I,R],V,{extend:!0,dropInitial:!0})?.ticks??[];break}case 2:j=e.stepTicks(T,[I,R],void 0,!_);break}if(gwe(j,$=>$.valueOf()<I.valueOf()),_||fwe(j,$=>{switch(w){case 0:case 3:return $.valueOf()+m>R.valueOf();case 1:case 2:return $.valueOf()>=R.valueOf()}}),j.length===0)continue;const K=j[0],Y=mV(K,I);(w===0?Y===0:Y<=m)&&(!v||!O)&&(x??(x=new Set),x.add(C.length)),C.push(...j)}return x?.size===1&&x.has(0)&&(x=void 0),{ticks:C,primaryTicksIndices:x,alignment:M}}function Kte(e,t,i,n,s){const o=mY(e.format,n);if(o==null)return{width:0,height:0};const r=zw(o),a=n?uD(n):void 0,l=mY(t?.format,a),c=l?zw(l):r,u=new Date(i[0]),d=new Date(i.at(-1)),p=a?Fl(a,new Date(i[0]),new Date(i.at(-1)),{extend:!0}):void 0;let f=0,m=0;if(r!=null){const v=nS(e),b=v.left+v.right,C=v.top+v.bottom;let x,w;p!=null&&p.length>1?(x=p[0],w=p[1]):(x=u,w=d);const M=Fl(n,x,w,{limit:50});for(const T of M){const L=r(T),{width:I,height:R}=s.measureLines(L);f=Math.max(f,I+b),m=Math.max(m,R+C)}}if(c!=null&&p!=null){const v=nS(t),b=v.left+v.right,C=v.top+v.bottom;for(const x of p){const w=c(x),{width:M,height:T}=s.measureLines(w);f=Math.max(f,M+b),m=Math.max(m,T+C)}}return{width:Math.ceil(f),height:Math.ceil(m)}}function Yte(e,t,i,n){return e&&!t?i*n===-1?"top":"bottom":"middle"}function Xte(e,t,i,n,s){const o=t>0&&t<=Math.PI,r=i>0&&i<=Math.PI,a=o||r?-1:1;if(e)if(t||i){if(n*a===-1)return"end"}else return"center";else if(n*s===-1)return"end";return"start"}function mY(e,t){if(e!=null){if(typeof e=="string")return e;if(bi(e)&&t!=null)return e[lh(t)]}}function Zte(e,t,i=0){const n=rh(e),s=!n&&i>=0&&i<=Math.PI?-1:1,o=!n&&i-Math.PI/2>=0&&i-Math.PI/2<=Math.PI?-1:1;let r=0;return t?r=s*(Math.PI/2):o===-1&&(r=Math.PI),{configuredRotation:n,defaultRotation:r,parallelFlipFlag:s,regularFlipFlag:o}}var DAe=new Date(1970,0,4);function qte(e){const{label:t,domain:i,axisRotation:n,labelOffset:s,sideFlag:o}=e,{defaultRotation:r,configuredRotation:a,parallelFlipFlag:l,regularFlipFlag:c}=Zte(t.rotation,t.parallel,n),u=a+r,d=(R,O=0)=>{const _=t.minSpacing??(a===0&&O===0?10:0),B=u+O,V=nS(t);return d_(kAe(e,R,B),_)||d_(TAe(R.ticks,s,B,V),_)},{maxTickCount:p}=Qte(e),f=MAe(e),m=t.enabled&&t.avoidCollisions,v=Number.isFinite(p)?p:10,b=m&&t.autoRotate&&t.rotation==null;let C=0,x=0,w=!0,M={tickDomain:[],niceDomain:i,ticks:[],rawTicks:[],rawTickCount:void 0,timeInterval:void 0,fractionDigits:0};for(;w&&C<=v;)({tickData:M,index:C}=AAe(e,f,M,C)),x=b&&d(M,0)?rh(t.autoRotateAngle):0,w=m&&d(M,x);const T=Xte(t.parallel,a,x,o,c),L=Yte(t.parallel,a,o,l),I=a+x;return{tickData:M,textAlign:T,textBaseline:L,rotation:I}}function MAe(e){return e.interval?.values?2:e.primaryTickCount!=null?1:0}function Qte({scale:e,domain:t,range:i,visibleRange:n,label:s,defaultTickMinSpacing:o,interval:{minSpacing:r,maxSpacing:a}}){const{defaultTickCount:l}=e,c=Pm(i),u=Pm(n);if(RS.is(e)){const d=t.length,p=Math.ceil(c/(u*s.fontSize));return{tickCount:Math.min(p,d),minTickCount:0,maxTickCount:d}}return zte(c,u,r,a,l,o)}function AAe(e,t,i,n){const{step:s,values:o}=e.interval,{maxTickCount:r,minTickCount:a,tickCount:l}=Qte(e),c=O=>Math.max(l-O,a),u=s==null&&o==null&&c(n)>a,d=i.rawTicks,p=l-a,f={minTickCount:a,maxTickCount:r,tickCount:c(n)};let m=yY(e,t,f);if(u&&h_(m.rawTicks,d)){let O=n,_=p;for(;O<=_;){n=Math.trunc((O+_)/2),f.tickCount=c(n);const B=yY(e,t,f);h_(B.rawTicks,d)?O=n+1:(m=B,_=n-1)}}const{tickDomain:v,niceDomain:b,rawTicks:C,rawTickCount:x,rawFirstTickIndex:w,generatePrimaryTicks:M,primaryTicksIndices:T,alignment:L,fractionDigits:I,timeInterval:R}=m;return{tickData:{tickDomain:v,niceDomain:b,rawTicks:C,rawTickCount:x,fractionDigits:I,timeInterval:R,ticks:Ute(e,{niceDomain:b,rawTicks:C,rawFirstTickIndex:w,generatePrimaryTicks:M,primaryTicksIndices:T,alignment:L,fractionDigits:I,timeInterval:R})},index:n+1}}function yY(e,t,i){const{domain:n,reverse:s,visibleRange:o,scale:r,interval:a,primaryLabel:l,niceMode:c,primaryTickCount:u,minimumTimeGranularity:d}=e,p={nice:c===0,interval:a.step,...i},f={...p};f.nice||(f.nice=c===1);let m;t===1&&u!=null&&mi.is(r)&&(m=gAe(r,n,u,s,o));const v=c===0?m?.domain??r.niceDomain(p,n):n;let b=v,C,x,w,M,T,L;const I=l?.enabled===!0&&f.interval==null;SV(r,v,()=>{switch(t){case 2:if(b=a.values,C=a.values,x=C.length,Cb.is(r)?L=1:Vp.is(r)&&(L=2),mi.is(r)){const[O,_]=Es(v.map(Number));C=C.filter(B=>Number(B)>=O&&Number(B)<=_).sort((B,V)=>Number(B)-Number(V))}break;case 1:if(m)C=m.ticks,x=m.ticks.length;else{const O=r.ticks(f,v,o);C=O?.ticks,x=O?.count}break;default:{const{tickCount:O,minTickCount:_,maxTickCount:B}=i;if(v.length>0&&f.interval==null&&(Vp.is(r)||I&&(rS.is(r)||Cb.is(r)))){const K=v,Y=Math.min(K[0].valueOf(),K.at(-1).valueOf()),G=Math.max(K[0].valueOf(),K.at(-1).valueOf());M=jE(Y,G,O,_,B,{weekStart:l==null?DAe:void 0,primaryOnly:!0})}let V;Cb.is(r)?V=d:Vp.is(r)&&(V=r.interval),V!=null&&M!=null&&Ur(V)>=Ur(M)&&(M=V);const j=M?$te(r,o,O,B,f,M,s,d):void 0;if(j)({ticks:C,primaryTicksIndices:T,alignment:L}=j);else{const K=Vp.is(r)&&f.interval==null&&M!=null?{...f,interval:M}:f,Y=r.ticks(K,v,o);if(C=Y?.ticks,x=Y?.count,w=Y?.firstTickIndex,rS.is(r)||kc.is(r)){const G=typeof f.interval=="number"?dD(f.interval):f.interval;M??(M=G??Y?.timeInterval)}}}}}),C??(C=[]);let R=0;for(const O of C){if(typeof O!="number")continue;const _=X0(O);_>R&&(R=_)}return I||(T=void 0),{tickDomain:b,niceDomain:v,rawTicks:C,rawTickCount:x,rawFirstTickIndex:w,generatePrimaryTicks:I,primaryTicksIndices:T,alignment:L,fractionDigits:R,timeInterval:M}}function kAe(e,t,i){const{niceDomain:n,ticks:s,timeInterval:o}=t;if(o==null)return[];const r=jte(s),{label:a,labelOffset:l,primaryLabel:c,domain:u}=e,{width:d,height:p}=Kte(a,c,n??u,o,ei(a)),f=[];for(const m of[0,r]){const{x:v,y:b}=LJ(l,m,i);f.push({x:v,y:b,width:d,height:p})}return f}function TAe(e,t,i,n){const s=[],o=n.left+n.right,r=n.top+n.bottom;for(const{tickLabel:a,textMetrics:l,translation:c}of e){if(!a)continue;const{x:u,y:d}=LJ(t,c,i),p=l.width+o,f=l.height+r;s.push({x:u,y:d,width:p,height:f})}return s}var pD=class Jte extends aV{constructor(t,i){super(t,i),this.maxThicknessRatio=.3,this.crossAxisTranslation={x:0,y:0},this.minimumTimeGranularity=void 0,this.headingLabelGroup=this.axisGroup.appendChild(new So({name:`${this.id}-Axis-heading`})),this.lineNodeGroup=this.axisGroup.appendChild(new So({name:`${this.id}-Axis-line`})),this.lineNode=this.lineNodeGroup.appendChild(new Ma({zIndex:1})),this.tickLineGroupSelection=Yo.select(this.tickLineGroup,Ma,!1),this.gridLineGroupSelection=Yo.select(this.gridLineGroup,Ma,!1),this.gridFillGroupSelection=Yo.select(this.gridFillGroup,bs,!1),this.tempText=new Zb({debugDirty:!1}),this.tempCaption=new en,this.animationManager=t.animationManager,this.animationState=new oD("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:s=>this.animateReadyUpdate(s),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.headingLabelGroup.appendChild(this.title.caption.node);let n;this.cleanup.register(t.eventsHub.on("layout:complete",s=>{const o=[s.chart.width,s.chart.height];n!=null&&!El(o,n)&&this.animationState.transition("resize"),n=o}),this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}static is(t){return t instanceof Jte}get horizontal(){return this.position==="top"||this.position==="bottom"}onGridVisibilityChange(){this.gridLineGroupSelection.clear(),this.gridFillGroupSelection.clear()}resetAnimation(t){t==="initial"&&this.animationState.transition("reset")}get direction(){return this.position==="top"||this.position==="bottom"?"x":"y"}createAxisContext(){return{...super.createAxisContext(),position:this.position}}createLabel(){return new lV}updateDirection(){switch(this.position){case"top":this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateLayout(t,i){return this.updateDirection(),super.calculateLayout(t,i)}layoutCrossLines(){const t=this.hasDefinedDomain()||this.hasVisibleSeries();for(const i of this.crossLines)i.calculateLayout?.(t)}calculateTickLayout(t,i,n,s){const o=this.label.getSideFlag(),r=o*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding);if(i===2&&this.label.enabled===!1&&this.tick.enabled===!1&&this.gridLine.enabled===!1){const{bbox:U,spacing:ee}=this.tickBBox(t,[],[]);return{ticks:[],rawTickCount:0,tickDomain:t,niceDomain:t,fractionDigits:0,timeInterval:void 0,bbox:U,layout:{ticks:[],tickLines:[],gridLines:[],gridFills:[],labels:[],spacing:ee}}}const{label:a,primaryLabel:l,scale:c,range:u,interval:d,reverse:p,defaultTickMinSpacing:f,minimumTimeGranularity:m}=this,v=qte({label:a,scale:c,interval:d,primaryLabel:l,domain:t,range:u,reverse:p,niceMode:i,visibleRange:n,defaultTickMinSpacing:f,minimumTimeGranularity:m,sideFlag:o,labelOffset:r,primaryTickCount:s,axisRotation:this.horizontal?-.5*Math.PI:0,isVertical:this.direction==="y",sizeLimit:this.chartLayout?.sizeLimit,inRange:U=>this.inRange(U,.001),tickFormatter:(...U)=>this.tickFormatter(...U)}),{tickData:b}=v;if(this.label.avoidCollisions&&this.horizontal&&b.ticks.length>2&&(mi.is(this.scale)||kc.is(this.scale))){const U=this.chartLayout?.padding.right??0,ee=b.ticks.at(-1);ee?.tickLabel!=null&&ee.translation+ee.textMetrics.width/2>u[1]+U&&(ee.tickLabel=void 0,n[0]===0&&n[1]===1&&(b.ticks[0].tickLabel=void 0))}const{ticks:x,tickDomain:w,rawTicks:M,rawTickCount:T,fractionDigits:L,timeInterval:I,niceDomain:R}=b,O=x.map(U=>this.getTickLabelProps(U,v)),{position:_,gridPadding:B,gridLength:V}=this,j=_==="bottom"||_==="right"?-1:1,K=j*B,Y=j*(V+B),G=this.calculateGridLines(x,K,Y),$=this.calculateGridFills(x,K,Y),W=this.calculateTickLines(x,j),{bbox:Q,spacing:q}=this.tickBBox(w,x,O);return{ticks:M,rawTickCount:T,tickDomain:w,niceDomain:R,fractionDigits:L,timeInterval:I,bbox:Q,layout:{ticks:x,gridLines:G,gridFills:$,tickLines:W,labels:O,spacing:q}}}calculateGridLines(t,i,n){return t.map((s,o)=>this.calculateGridLine(s,o,i,n,t))}calculateGridLine({index:t,tickId:i,translation:n},s,o,r,a){const{gridLine:l,horizontal:c}=this,[u,d,p,f]=c?[n,o,n,r]:[o,n,r,n],{style:m}=l,{stroke:v,strokeWidth:b=0,lineDash:C}=m[t%m.length]??{};return{tickId:i,offset:n,x1:u,y1:d,x2:p,y2:f,stroke:v,strokeWidth:b,lineDash:C}}calculateGridFills(t,i,n){const{horizontal:s,range:o,type:r}=this,a=[];if(t.length==0)return a;let l=0;const c=!s&&r==="unit-time";if(c&&t[0].translation<o[0]||!c&&t[0].translation>o[0]){const d={tickId:`before:${t[0].tickId}`,translation:o[0]};a.push(this.calculateGridFill(d,-1,t[0].index,i,n,t)),l=1}return a.push(...t.map((d,p)=>this.calculateGridFill(d,p,d.index+l,i,n,t))),a}calculateGridFill({tickId:t,translation:i},n,s,o,r,a){const{gridLine:l,horizontal:c,range:u}=this,d=a[n+1],p=i,f=d?d.translation:u[1],[m,v,b,C]=c?[p,Math.max(o,r),f,Math.min(o,r)]:[Math.min(o,r),Math.min(p,f),Math.max(o,r),Math.max(p,f)],{fill:x,fillOpacity:w}=l.style[s%l.style.length]??{};return{tickId:t,x1:m,y1:v,x2:b,y2:C,fill:x,fillOpacity:w}}calculateTickLines(t,i){return t.map(n=>this.calculateTickLine(n,n.index,i,t))}calculateTickLine({isPrimary:t,tickId:i,translation:n},s,o,r){const{horizontal:a,tick:l,primaryTick:c}=this,u=t&&c?c:l,d=-o*this.getTickSize(u),[p,f,m,v]=a?[n,0,n,d]:[0,n,d,n],{stroke:b,width:C}=u;return{tickId:i,offset:n,x1:p,y1:f,x2:m,y2:v,stroke:b,strokeWidth:C,lineDash:void 0}}update(){this.updateDirection();const t=Array.from(this.tickLabelGroupSelection.nodes(),r=>r.datum.tickId);super.update();const{tickLayout:i}=this;if(this.updateTitle(this.scale.domain,i?.spacing??0),this.animatable||this.moduleCtx.animationManager.skipCurrentBatch(),i){const{ticks:r}=i;if(this.animationManager.isSkipped())this.resetSelectionNodes();else{const a=r.map(c=>c.tickId),l=Mwe(t,a);this.animationState.transition("update",l)}}const{enabled:n,stroke:s,width:o}=this.line;this.lineNode.setProperties({stroke:s,strokeWidth:n?o:0}),this.updateTickLines(),this.updateGridLines(),this.updateGridFills()}getAxisTransform(){return{translationX:Math.floor(this.translation.x+this.crossAxisTranslation.x),translationY:Math.floor(this.translation.y+this.crossAxisTranslation.y)}}updatePosition(){super.updatePosition();const t=this.getAxisTransform();this.tickLineGroup.datum=t,this.tickLabelGroup.datum=t,this.lineNodeGroup.datum=t,this.headingLabelGroup.datum=t}setAxisVisible(t){this.tickLineGroup.visible=t&&(this.tick.enabled||(this.primaryTick?.enabled??!1)),this.tickLabelGroup.visible=t&&(this.label.enabled||(this.primaryTick?.enabled??!1)),this.lineNodeGroup.visible=t,this.headingLabelGroup.visible=t}getAxisLineCoordinates(){const{horizontal:t}=this,[i,n]=Es(this.range);return t?{x1:i,x2:n,y1:0,y2:0}:{x1:0,x2:0,y1:i,y2:n}}getTickLineBBox(t){const{translation:i}=t,{position:n,primaryTick:s}=this;let o=this.getTickSize();switch(s?.enabled&&(o=Math.max(o,this.getTickSize(s))),n){case"top":return new He(i,-o,i,o);case"bottom":return new He(i,0,i,o);case"left":return new He(-o,i,o,i);case"right":return new He(0,i,o,i)}}lineNodeBBox(){const{position:t,seriesAreaPadding:i}=this,{y1:n,y2:s}=this.getAxisLineCoordinates(),o=s-n;switch(t){case"top":return new He(n,-i,o,i);case"bottom":return new He(n,0,o,i);case"left":return new He(-i,n,i,o);case"right":return new He(0,n,i,o)}}titleBBox(t,i){const{tempCaption:n}=this;return n.node.setProperties(this.titleProps(n,t,i)),n.node.getBBox()}tickBBox(t,i,n){const{tick:s,primaryTick:o,label:r,primaryLabel:a,title:l,position:c,horizontal:u,seriesAreaPadding:d}=this,p=[];if(p.push(this.lineNodeBBox()),s.enabled||o?.enabled)for(const b of i)p.push(this.getTickLineBBox(b));const{tempText:f}=this;if(r.enabled)for(const b of n){if(!b.visible)continue;f.setProperties(b);const C=f.getBBox();C&&p.push(C)}if(a?.enabled&&c==="bottom"&&(p.push(new He(0,fc(r.fontSize)+2,1,this.getTickSize(s)+r.spacing+d)),a.format!=null)){const{format:C}=a,w=(bi(C)?Object.values(C):[C]).reduce((M,T)=>Math.max(M,Qxe(T)),0);p.push(new He(0,this.getTickSize(o??s)+a.spacing+d,1,w*fc(a.fontSize)+2))}let m=0;if(l.enabled){const b=He.merge(p);m=u?b.height:b.width,p.push(this.titleBBox(t,m))}return{bbox:He.merge(p),spacing:m}}titleProps(t,i,n){const{title:s}=this;if(!s.enabled)return t.enabled=!1,{visible:!1,text:"",textBaseline:"bottom",x:0,y:0,rotationCenterX:0,rotationCenterY:0,rotation:0};t.enabled=!0,t.color=s.color,t.fontFamily=s.fontFamily,t.fontSize=s.fontSize,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.wrapping=s.wrapping;const o=(s.spacing??0)+n,{range:r}=this,a=(r[0]+r[1])/2;let l,c,u,d;switch(this.position){case"top":l=a,c=-o,u=0,d="bottom";break;case"bottom":l=a,c=o,u=0,d="top";break;case"left":l=-o,c=a,u=-.5*Math.PI,d="bottom";break;case"right":l=o,c=a,u=.5*Math.PI,d="bottom";break}const{formatter:p=m=>m.defaultValue}=s,f=this.cachedCallWithContext(p,this.getTitleFormatterParams(i));return t.text=f,{visible:!0,text:f,textBaseline:d,x:l,y:c,rotationCenterX:l,rotationCenterY:c,rotation:u}}getTickLabelProps(t,i){const{horizontal:n,primaryLabel:s,primaryTick:o,seriesAreaPadding:r,scale:a}=this,{tickId:l,tickLabel:c="",translation:u,isPrimary:d,textUntruncated:p}=t,f=d&&s?.enabled?s:this.label,m=d&&o?.enabled?o:this.tick,{rotation:v,textBaseline:b,textAlign:C}=i,{range:x}=a,w=this.label.getSideFlag(),M=nS(f)[this.position],T=w*(this.getTickSize(m)+f.spacing+r)-M,L=c!=="",I=n?u:T,R=n?-T:u;return{...this.getLabelStyles({value:t.tick,formattedValue:c},void 0,f),tickId:l,rotation:v,text:c,textAlign:C,textBaseline:b,textUntruncated:p,visible:L,x:I,y:R,rotationCenterX:I,rotationCenterY:R,range:x}}updateSelections(){if(!this.tickLayout)return;const t=this.getAxisLineCoordinates(),{tickLines:i,gridLines:n,gridFills:s,labels:o}=this.tickLayout,r=a=>a.tickId;this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLine.enabled?n:[],void 0,r),this.gridFillGroupSelection.update(this.gridLine.enabled?s:[],void 0,r),this.tickLineGroupSelection.update(i,void 0,r),this.tickLabelGroupSelection.update(o,void 0,r)}updateGridLines(){this.gridLineGroupSelection.each((t,i)=>{t.stroke=i.stroke,t.strokeWidth=i.strokeWidth,t.lineDash=i.lineDash})}updateGridFills(){this.gridFillGroupSelection.each((t,i)=>{t.fill=i.fill,t.fillOpacity=i.fillOpacity??1})}updateTickLines(){this.tickLineGroupSelection.each((t,i)=>{t.stroke=i.stroke,t.strokeWidth=i.strokeWidth,t.lineDash=i.lineDash})}updateTitle(t,i){const{caption:n}=this.title,s=this.titleProps(n,t,i);n.node.visible=s.visible,n.node.text=s.text,n.node.textBaseline=s.textBaseline,n.node.datum=s}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each((t,i)=>{t.fill=i.color,t.text=i.text,t.textBaseline=i.textBaseline,t.textAlign=i.textAlign??"center",t.pointerEvents=i.textUntruncated==null?1:0,t.setFont(i),t.setBoxing(i)})}animateReadyUpdate(t){const{animationManager:i}=this.moduleCtx,n=wte(this),s=Dte(n);Xn(this.id,"axis-group",i,[this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],s.group),Xn(this.id,"line",i,[this.lineNode],s.line),Xn(this.id,"line-paths",i,[this.gridLineGroupSelection,this.tickLineGroupSelection],s.tick,(o,r)=>r.tickId,t),Xn(this.id,"tick-labels",i,[this.tickLabelGroupSelection],s.label,(o,r)=>r.tickId,t),Xn(this.id,"title",i,[this.title.caption.node],s.label,(o,r)=>r.tickId,t)}resetSelectionNodes(){mo([this.lineNodeGroup,this.tickLabelGroup,this.tickLineGroup,this.headingLabelGroup],Mte()),mo([this.gridLineGroupSelection,this.tickLineGroupSelection],a_()),mo([this.gridFillGroupSelection],Ate()),mo([this.tickLabelGroupSelection],KI()),mo([this.title.caption.node],KI()),mo([this.lineNode],a_())}};E([F],pD.prototype,"thickness",2);E([F],pD.prototype,"maxThicknessRatio",2);E([F],pD.prototype,"position",2);E([F],pD.prototype,"crossAt",2);var gD=pD,eie=["top","right","bottom","left"];function IAe(e){return typeof e=="string"&&eie.includes(e)}function RAe(e){const t=[],i=[],n=[...eie];for(const s of e)s instanceof gD&&(IAe(s.position)?i.push(s.position):t.push(s));for(const s of t){let o;do o=n.pop();while(o&&i.includes(o));if(o==null)break;s.position=o}}var EAe=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];function LAe(e,t,i){const n=(c,u,d)=>{const p=[c];for(const f of EAe)f in u&&u[f]!=null&&p.push(`${f}=${u[f]}`);return d?.seriesGrouping&&p.push(`seriesGrouping.groupId=${d?.seriesGrouping.groupId}`),p.join(";")},s=new Map;let o=0;for(const c of e){const u=n(c.type,c.properties,i?.[o]);s.has(u)||s.set(u,[]),s.get(u)?.push([c,o++])}const r=new Map;o=0;for(const c of t){const u=n(c.type,c,c);r.has(u)||r.set(u,[]),r.get(u)?.push([c,o++])}if(![...s.keys()].some(c=>r.has(c)))return{status:"no-overlap",oldKeys:s.keys(),newKeys:r.keys()};const l=[];for(const[c,u]of r.entries())for(const[d,p]of u){const f=s.get(c);if(f==null||f.length<1){l.push({opts:d,targetIdx:p,idx:p,status:"add"}),s.delete(c);continue}const[m,v]=f.shift(),b=i?.[v]??{},C=Nu(b,d??{}),{groupIndex:x,stackIndex:w}=C?.seriesGrouping??{};x!=null||w!=null?l.push({opts:d,series:m,diff:C,targetIdx:p,idx:v,status:"series-grouping"}):C?l.push({opts:d,series:m,diff:C,targetIdx:p,idx:v,status:"update"}):l.push({opts:d,series:m,targetIdx:p,idx:v,status:"no-op"}),f.length===0&&s.delete(c)}for(const c of s.values())for(const[u,d]of c)l.push({series:u,idx:d,targetIdx:-1,status:"remove"});return{status:"overlap",changes:l}}function KE(e){const{series:t}=e;return t?.[0]?.type??"line"}function tie(e){const t=KE(e);return Rs.isCartesian(t)||BMe(t)}function PAe(e){const t=KE(e);return Rs.isPolar(t)||_Me(t)}function iie(e){const t=KE(e);return Rs.isTopology(t)||zMe(t)}function nie(e){const t=KE(e);return Rs.isStandalone(t)||GMe(t)}var NAe=class extends rV{applyOptions(e){for(const t of this.moduleMap.values())t.module.optionsKey in e&&gm(t.moduleInstance)&&t.moduleInstance.set(e[t.module.optionsKey])}*legends(){for(const{module:e,moduleInstance:t}of this.moduleMap.values())e.type==="legend"&&(yield{legendType:e.identifier,legend:t})}},p_="ag-charts-overlay",vY="ag-charts-dark-overlay",tm=class extends pt{constructor(e,t){super(),this.className=e,this.defaultMessageId=t,this.enabled=!0}getText(e){return ft(this.text)?this.text.map(t=>t.text).join(""):e.t(this.text??this.defaultMessageId)}getElement(e,t,i,n){if(this.content?.remove(),this.focusBox=n,this.renderer){const s={},o=mc(e,this.renderer,s);if(o instanceof HTMLElement)this.content=o;else{const r=nt("div");r.innerHTML=o;const{firstElementChild:a}=r;a instanceof HTMLElement&&r.childElementCount===1?this.content=a:this.content=r}}else{const s=nt("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",fontFamily:"var(--ag-charts-font-family)",fontSize:"var(--ag-charts-font-size)",fontWeight:"var(--ag-charts-font-weight)"});if(ft(this.text)){const o=nt("div");for(const r of this.text){const a=nt("span",{color:r.color,fontSize:`${r.fontSize}px`,fontFamily:r.fontFamily??"inherit",fontWeight:String(r.fontWeight),fontStyle:r.fontStyle});a.innerText=r.text,o.appendChild(a)}s.appendChild(o)}else s.innerText=this.getText(i);this.content=s,t?.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(o){s.style.opacity=String(o)},onStop(){s.style.opacity="1"}})}return this.content}removeElement(e=()=>this.content?.remove(),t){if(this.content){if(t){const{content:i}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(n){i.style.opacity=String(n)},onStop(){e?.()}})}else e?.();this.content=void 0,this.focusBox=void 0}}};E([F],tm.prototype,"enabled",2);E([F],tm.prototype,"text",2);E([F],tm.prototype,"renderer",2);var ES=class extends pt{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new tm("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new tm("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new tm("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new tm("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(e){for(const t of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(t.focusBox!==void 0)return{text:t.getText(e),rect:t.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}};E([F],ES.prototype,"darkTheme",2);E([F],ES.prototype,"loading",2);E([F],ES.prototype,"noData",2);E([F],ES.prototype,"noVisibleSeries",2);E([F],ES.prototype,"unsupportedBrowser",2);function OAe(e,t){const{animationDuration:i}=Yw.add,n=i*t,s=nt("div",`${p_}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${n}ms linear 50ms both`}),o=nt("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),r=nt("p",{marginTop:"1em"});r.innerText=e;const a=nt("div",`${p_}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=nt("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),s.replaceChildren(l,o,r,a),s}var sie=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.ANY_CONTENT=1]="ANY_CONTENT",e))(sie||{}),oie=(e=>(e[e.FOREGROUND=0]="FOREGROUND",e[e.HIGHLIGHT=1]="HIGHLIGHT",e[e.LABEL=2]="LABEL",e))(oie||{});function rie(e,t,i,n){if(Ol(e))return{type:"gradient",gradient:e.gradient??t.gradient,colorStops:e.colorStops??t.colorStops,bounds:e.bounds??t.bounds,rotation:e.rotation??t.rotation,reverse:e.reverse??t.reverse,colorSpace:e.colorSpace??t.colorSpace};if(ah(e)){const s=e.pattern??i.pattern;let o=e.strokeWidth;s==="backward-slanted-lines"||s==="forward-slanted-lines"||s==="horizontal-lines"||s==="vertical-lines"?o??(o=i.strokeWidth):o??(o=0);const r=e.width??e.height??i.width,a=e.height??e.width??i.height;return{type:"pattern",pattern:s,width:r,height:a,path:e.path,padding:e.padding??i.padding,fill:e.fill??i.fill,fillOpacity:e.fillOpacity??i.fillOpacity,backgroundFill:e.backgroundFill??i.backgroundFill,backgroundFillOpacity:e.backgroundFillOpacity??i.backgroundFillOpacity,stroke:e.stroke??i.stroke,strokeOpacity:e.strokeOpacity??i.strokeOpacity,strokeWidth:o,rotation:e.rotation??i.rotation,scale:e.scale??i.scale}}return Em(e)?{type:"image",url:e.url,width:e.width,height:e.height,backgroundFill:e.backgroundFill??n.backgroundFill,backgroundFillOpacity:e.backgroundFillOpacity??n.backgroundFillOpacity,rotation:e.rotation??n.rotation,repeat:e.repeat??n.repeat,fit:e.fit??n.fit}:e}function g_(e,t,i,n){return!Ol(e?.fill)&&!ah(e?.fill)&&!Em(e?.fill)?e:{...e,fill:rie(e.fill,t,i,n)}}function aie(e,t,i,n){i==null||!Ol(t)||t.bounds==null||t.bounds==="item"?e.fillBBox=void 0:e.fillBBox=i[t.bounds],e.fillParams=n}function Yd(e,t,i,n){const s=t?.opacity??1;e.fill=t?.fill,aie(e,e.fill,i,n),e.fillOpacity=(t?.fillOpacity??1)*s,e.stroke=t?.stroke,e.strokeOpacity=(t?.strokeOpacity??1)*s,e.strokeWidth=t?.strokeWidth??0,e.lineDash=t?.lineDash,e.lineDashOffset=t?.lineDashOffset??0}var lie=(e=>(e[e.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",e[e.NEAREST_NODE=1]="NEAREST_NODE",e[e.AXIS_ALIGNED=2]="AXIS_ALIGNED",e))(lie||{}),FAe=.25,BAe=.125,YE=class{constructor(e,t,i,n){this.type=e,this.event=t,this.defaultPrevented=!1,this.datum=i.datum,this.seriesId=n.id}preventDefault(){this.defaultPrevented=!0}},qI=class{constructor(e,t){this.series=e,this.seriesGrouping=t,this.type="groupingChanged"}};function bY(e){switch(e){case"x":return"x";case"y":return"y";case"angle":return"angle";case"radius":return"radius"}}function gF(e){switch(e){case"x":return"x";case"y":return"y";case"angle":return"angle";case"radius":return"radius"}}var XE=class extends yee{constructor(t){super(),this.cleanup=new _i,this.usesPlacedLabels=!1,this.hasChangesOnHighlight=!1,this.seriesGrouping=void 0,this.NodeEvent=YE,this.internalId=To(this),this.contentGroup=new So({name:`${this.internalId}-content`,zIndex:1}),this.highlightGroup=new So({name:`${this.internalId}-highlight`,zIndex:1}),this.annotationGroup=new So({name:`${this.internalId}-annotation`}),this.labelGroup=new So({name:`${this.internalId}-series-labels`}),this.axes={},this.directions=["x","y"],this.nodeDataRefresh=!0,this.processedDataUpdated=!0,this.moduleMap=new rV,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this.declarationOrder=-1,this._broughtToFront=!1,this.events=new Dc,this._pickNodeCache=new hG(5),this.fireEventWrapper=l=>super.fireEvent(l);const{moduleCtx:i,pickModes:n,propertyKeys:s={},propertyNames:o={},canHaveAxes:r=!1,usesPlacedLabels:a=!1}=t;this.ctx=i,this.propertyKeys=s,this.propertyNames=o,this.canHaveAxes=r,this.usesPlacedLabels=a,this.pickModes=n,this.cleanup.register(this.ctx?.eventsHub.on("highlight:change",l=>this.onChangeHighlight(l)))}get pickModeAxis(){return"main"}get id(){return this.properties?.id??this.internalId}get type(){return this.constructor.type??""}get focusable(){return!0}get data(){return this._data??this._chartData}set visible(t){this.properties.visible=t,this.ctx.legendManager.toggleItem(t,this.id),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){return this.ctx.legendManager.getSeriesEnabled(this.id)??this.properties.visible}get hasData(){const t=this.data;return t==null?!1:t.netSize()>0}get tooltipEnabled(){return this.properties.tooltip?.enabled}onDataChange(){this.nodeDataRefresh=!0,this.processedDataUpdated=!0,this._pickNodeCache.clear()}setOptionsData(t){this._data=t,this.onDataChange()}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}onSeriesGroupingChange(t,i){const{internalId:n,type:s,visible:o}=this;t&&this.ctx.seriesStateManager.deregisterSeries(this),i&&this.ctx.seriesStateManager.registerSeries({internalId:n,type:s,visible:o,seriesGrouping:i}),this.fireEvent(new qI(this,i))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(t,i,n){t.appendChild(this.contentGroup),i.appendChild(this.highlightGroup),i.appendChild(this.labelGroup),n?.appendChild(this.annotationGroup)}detachSeries(t,i,n){this.contentGroup.remove(),this.highlightGroup.remove(),this.labelGroup.remove(),this.annotationGroup.remove()}setSeriesIndex(t,i=!1){const n=this.bringToFront();return!i&&t===this.declarationOrder&&n===this._broughtToFront?!1:(this.declarationOrder=t,this._broughtToFront=n,this.setZIndex(n?Number.MAX_VALUE:t),this.fireEvent(new qI(this,this.seriesGrouping)),!0)}setZIndex(t){this.contentGroup.zIndex=[1,t,0],this.highlightGroup.zIndex=[1,t,1],this.labelGroup.zIndex=[1,t,2],this.annotationGroup.zIndex=t}renderToOffscreenCanvas(){return!1}addEventListener(t,i){return super.addEventListener(t,i)}removeEventListener(t,i){return super.removeEventListener(t,i)}hasEventListener(t){return super.hasEventListener(t)}addChartEventListeners(){}updatedDomains(){}destroy(){this.cleanup.flush(),this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getPropertyValues(t,i){const n=bY(t),s=n==null?t:gF(this.resolveKeyDirection(n)),o=i?.[s],r=[];if(!o)return r;const a=(...l)=>{for(const c of l)Array.isArray(c)?a(...c):typeof c=="object"?a(...Object.values(c)):r.push(c)};return a(...o.map(l=>this.properties[l])),r}getKeys(t){return this.getPropertyValues(gF(t),this.propertyKeys)}getKeyProperties(t){return this.propertyKeys[this.resolveKeyDirection(t)]??[]}getNames(t){return this.getPropertyValues(gF(t),this.propertyNames)}getFormatterContext(t){const{id:i}=this,n=this.getPropertyValues(t,this.propertyKeys),s=this.getPropertyValues(t,this.propertyNames),o=[];for(let r=0;r<n.length;r++)o.push({seriesId:i,key:n[r],name:s[r]});return o}resolveKeyDirection(t){return t}getDomain(t){const i=this.getSeriesDomain(t),n=this.moduleMap.mapModules(s=>s.getDomain(t)).flat();return n.length===0?i:i.concat(n)}getRange(t,i){return this.getSeriesRange(t,i)}getZoomRangeFittingItems(t,i,n){}getVisibleItems(t,i,n){return 1/0}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){if(!this.properties.highlight)return 1;const{opacity:i=1}=this.getHighlightStyle();return i}getHighlightState(t,i,n,s){if(i)return 1;if(t?.series==null)return 0;if(this.isSeriesHighlighted(t,s)){const o=this.isItemHighlighted(t,n);return o==null||o?2:4}return 3}getHighlightStateString(t,i,n,s){return IS(this.getHighlightState(t,i,n,s))}onChangeHighlight(t){const i=t.previousHighlight,n=t.currentHighlight,s=this.getHighlightState(n),o=this.getHighlightState(i);this.setSeriesIndex(this.declarationOrder);const r=this.hasItemStylers();if(!r&&s===o){this.hasChangesOnHighlight=!1;return}const{highlightedSeries:a,unhighlightedItem:l,unhighlightedSeries:c}=this.properties.highlight;this.hasChangesOnHighlight=r||!TT(a)||!TT(l)||!TT(c)}bringToFront(){return this.properties.highlight.bringToFront&&this.isSeriesHighlighted(this.ctx.highlightManager.getActiveHighlight())}isSeriesHighlighted(t,i){return t?.series===this}isItemHighlighted(t,i){if(!(t?.datumIndex==null||i==null))return t.datumIndex===i}getHighlightStyle(t,i,n,s){const o=this.ctx.highlightManager?.getActiveHighlight();return n??(n=this.getHighlightState(o,t,i,s)),this.properties.highlight.getStyle(n)}filterItemStylerFillParams(t){return Ol(t)?_e(t,["bounds","colorSpace","gradient","reverse"]):ah(t)?_e(t,["padding"]):t}getModuleTooltipParams(){return this.moduleMap.mapModules(t=>t.getTooltipParams()).reduce((t,i)=>Object.assign(t,i),{})}pickNodes(t,i,n=!1){const{pickModes:s,pickModeAxis:o,visible:r,contentGroup:a}=this;if(!r||!a.visible||i==="highlight"&&!this.properties.highlight.enabled||i==="highlight-tooltip"&&!this.properties.highlight.enabled)return;let l=1/0;if(i==="tooltip"||i==="highlight-tooltip"){const{tooltip:f}=this.properties;l=typeof f.range=="number"?f.range:1/0,n||(n=f.range==="exact")}else if(i==="event"||i==="context-menu"){const{nodeClickRange:f}=this.properties;l=typeof f=="number"?f:1/0,n||(n=f==="exact")}const c=s.filter(f=>!n||f===0),{x:u,y:d}=t,p=JSON.stringify({x:u,y:d,maxDistance:l,selectedPickModes:c});if(this._pickNodeCache.has(p))return this._pickNodeCache.get(p);for(const f of c){let m;switch(f){case 0:{const v=this.pickNodesExactShape(t);m=v.length===0?void 0:{datums:v,distance:0};break}case 1:{const v=this.pickNodeClosestDatum(t),b=v?.distance===0?this.pickNodesExactShape(t):void 0;b!=null&&b.length!==0?m={datums:b,distance:0}:v?m={datums:[v.datum],distance:v.distance}:m=void 0;break}case 2:{const v=o==null?void 0:this.pickNodeMainAxisFirst(t,o==="main-category");m=v==null?void 0:{datums:[v.datum],distance:v.distance};break}}if(m&&m.distance<=l)return this._pickNodeCache.set(p,{pickMode:f,datums:m.datums,distance:m.distance})}return this._pickNodeCache.set(p,void 0)}pickNodesExactShape(t){const i=[];for(const n of this.contentGroup.pickNodes(t.x,t.y)){const s=n.closestDatum();s!=null&&s.missing!==!0&&i.push(s)}return i}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(t,i){const n=SE(t.x,t.y,i),s=n.nearest?.closestDatum();if(s!=null&&s.missing!==!0)return{datum:s,distance:Math.sqrt(n.distanceSquared)}}pickNodeMainAxisFirst(t,i){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(t){}fireEvent(t){mc([this.properties,this.ctx.chartService],this.fireEventWrapper,t)}fireNodeClickEvent(t,i){const n=new this.NodeEvent("seriesNodeClick",t,i,this);return this.fireEvent(n),!n.defaultPrevented}fireNodeDoubleClickEvent(t,i){const n=new this.NodeEvent("seriesNodeDoubleClick",t,i,this);return this.fireEvent(n),!n.defaultPrevented}createNodeContextMenuActionEvent(t,i){return new this.NodeEvent("nodeContextMenuAction",t,i,this)}onLegendInitialState(t,i){const{visible:n=!0,itemId:s,legendItemName:o}=i??{};this.toggleSeriesItem(n,t,s,o)}onLegendItemClick(t){const{enabled:i,itemId:n,series:s,legendType:o}=t,r="legendItemName"in this.properties?this.properties.legendItemName:void 0,a="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,l=r!=null&&r===t.legendItemName;(s.id===this.id||l||a!=null)&&this.toggleSeriesItem(i,o,n,r,t)}onLegendItemDoubleClick(t){const{enabled:i,itemId:n,series:s,numVisibleItems:o,legendType:r}=t,a="legendItemName"in this.properties?this.properties.legendItemName:void 0,l="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,c=a!=null&&a===t.legendItemName;s.id===this.id||c||l!=null?this.toggleSeriesItem(!0,r,n,a,t):i&&o===1?this.toggleSeriesItem(!0,r,void 0,a):this.toggleSeriesItem(!1,r,void 0,a)}toggleSeriesItem(t,i,n,s,o){const r=this.id;(t||i!=="category")&&(this.visible=t),this.nodeDataRefresh=!0,this._pickNodeCache.clear();const a={type:"seriesVisibilityChange",seriesId:r,itemId:n,legendItemName:o?.legendItemName??s,visible:t};this.fireEvent(a),this.ctx.legendManager.toggleItem(t,r,n,s)}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return{...this.ctx,series:this}}getAxisValueText(t,i,n,s,o,r){const{id:a,properties:l}=this;return t.formatDatum(l,n,i,a,r,s,o)}getLabelText(t,i,n,s,o,r,a){if(t==null)return"";const{axes:l,canHaveAxes:c,ctx:u,id:d,properties:p}=this,f="series-label",m="legendItemName"in p?p.legendItemName:void 0,v={seriesId:this.id,...a},b=c?bY(s):void 0,C=b==null?void 0:l[this.resolveKeyDirection(b)];if(C!=null)return C.formatDatum(p,t,f,d,m,i,n,o,r,v);const{formatManager:x}=u,w=this.callWithContext.bind(this),M=L=>r.formatValue(w,L.type,L.value,v)??x.format(w,L)??String(t),T=this.getFormatterContext(s);switch(s){case"y":case"color":case"size":return M({type:"number",value:t,datum:i,seriesId:d,legendItemName:m,key:n,source:f,property:s,domain:o,boundSeries:T,fractionDigits:void 0});case"x":case"radius":case"angle":case"label":case"secondaryLabel":case"calloutLabel":case"sectorLabel":case"legendItem":return M({type:"category",value:t,datum:i,seriesId:d,legendItemName:m,key:n,source:f,property:s,domain:o,boundSeries:T})}}getMarkerStyle(t,{datumIndex:i,datum:n,point:s},o,r,a={size:s?.size??t.size??0},l){const{itemStyler:c}=t,{highlightState:u,isHighlight:d=!1,checkForHighlight:p=!0,resolveMarkerSubPath:f=["marker"],resolveStyler:m=!1}=r??{},v=["series",`${this.declarationOrder}`,...f];if(m){const w={permissivePath:!0},M=this.ctx.optionsGraphService.resolvePartial(v,a,w);M&&(a={...M,size:M.size??a.size})}const b=p?this.getHighlightStyle(d,i,u):void 0;let x=oi(b,a,t.getStyle(),l);if(c&&o){const w=this.ctx.highlightManager?.getActiveHighlight(),M=this.getHighlightStateString(w,d,i),T=this.filterItemStylerFillParams(x.fill),L=this.cachedCallWithContext(c,{seriesId:this.id,...x,fill:T,...o,highlighted:d,highlightState:M,datum:n}),I=this.ctx.optionsGraphService.resolvePartial(v,L);x=oi(I,x)}return x}applyMarkerStyle(t,i,n,s,{applyTranslation:o=!0,selected:r=!0}={}){const{shape:a,size:l=0}=t,c=this.visible&&l>0&&n&&!Number.isNaN(n.x)&&!Number.isNaN(n.y);if(Yd(i,t,s),o?i.setProperties({visible:c,shape:a,size:l,x:n?.x,y:n?.y,scalingCenterX:n?.x,scalingCenterY:n?.y}):i.setProperties({visible:c,shape:a,size:l}),r||(i.fillOpacity*=FAe,i.strokeOpacity*=BAe),typeof a=="function"&&!i.dirtyPath){i.path.clear(!0),i.updatePath(),i.checkPathDirty();const u=i.getBBox();if(n!=null&&u.isFinite()){const d=u.computeCenter(),[p,f]=["x","y"].map(m=>(t.strokeWidth??0)+Math.abs(d[m]-n[m]));n.focusSize=Math.max(u.width+p,u.height+f)}}}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:Number.NaN,seriesRectHeight:Number.NaN}}checkResize(t){const{width:i,height:n}=t??{width:Number.NaN,height:Number.NaN},s=t?{seriesRectWidth:i,seriesRectHeight:n}:void 0,o=Nu(this.nodeDataDependencies,s)!=null;return o&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),o}pickFocus(t){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(t,i){const{datumCallbackCache:n}=this,s=n.get(t);if(s!=null)return s;try{const o=i();return n.set(t,o),o}catch(o){fe.error(String(o))}}cachedCallWithContext(t,i){return this.ctx.callbackCache.call([this.properties,this.ctx.chartService],t,i)}callWithContext(t,i){return mc([this.properties,this.ctx.chartService],t,i)}formatTooltipWithContext(t,i,n){return t.formatTooltip([this.properties,this.ctx.chartService],i,n)}minTimeInterval(){}};E([Io({changeValue:function(e,t){this.onSeriesGroupingChange(t,e)}})],XE.prototype,"seriesGrouping",2);var _Ae=class{constructor(e){this.swapChain=e,this.hasBeenActivated=!1,this.div=nt("div"),this.svg=Pn("svg"),this.outerPath=Pn("path"),this.innerPath=Pn("path"),this.svg.append(this.outerPath),this.svg.append(this.innerPath),this.outerPath.classList.add("ag-charts-focus-svg-outer-path"),this.innerPath.classList.add("ag-charts-focus-svg-inner-path"),this.element=nt("div","ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",t=>this.onSwap(t))}clear(){}update(e,t,i){if(t!=null)if(e instanceof Ls){const n=(o,r)=>{let{x:a,y:l}=vn.toCanvasPoint(e,o,r);return a-=t.x??0,l-=t.y??0,{x:a,y:l}},s=e.svgPathData(n);this.outerPath.setAttribute("d",s),this.innerPath.setAttribute("d",s),this.show(this.svg)}else{let n;if(i){const s=Math.max(e.x-t.x,0),o=Math.max(e.y-t.y,0),r=Math.min(e.x+e.width-t.x,t.width),a=Math.min(e.y+e.height-t.y,t.height);n=new He(s,o,r-s,a-o)}else n=new He(e.x-t.x,e.y-t.y,e.width,e.height);WI(this.div,n),this.show(this.div)}}onSwap(e){e!==this.element.parentElement&&(this.element.remove(),e.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(e){this.hasBeenActivated=!0,this.element.innerHTML="",this.element.append(e)}overrideFocusVisible(e){this.focusVisible=e;const t={true:"1",false:"0",undefined:""};this.element.parentElement?.style.setProperty("opacity",t[`${e}`])}isFocusVisible(e=!1){if(!e&&!this.hasBeenActivated)return!1;const t=this.element.parentElement;return t!=null&&Qt().getComputedStyle(t).opacity==="1"}},zAe=class{constructor(e,t,i,n){this.label1=e,this.label2=t,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=s=>(vu(s.target,"pointer-events",void 0),!this.skipDispatch&&this.dispatch("blur",s)),this.onFocus=s=>(vu(s.target,"pointer-events","auto"),!this.skipDispatch&&this.dispatch("focus",s)),Pt(this.label1,"id",pm()),Pt(this.label2,"id",pm()),vu(this.label1,"display","none"),vu(this.label2,"display","none"),this.label1.textContent=n,this.label2.textContent=n,this.activeAnnouncer=this.createAnnouncer(i),this.inactiveAnnouncer=this.createAnnouncer(i),Pt(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap(n)}createAnnouncer(e){const t=nt("div");return t.role=e,t.className="ag-charts-swapchain",t.addEventListener("blur",this.onBlur),t.addEventListener("focus",this.onFocus),t}destroy(){for(const e of[this.activeAnnouncer,this.inactiveAnnouncer])e.removeEventListener("blur",this.onBlur),e.removeEventListener("focus",this.onFocus),e.remove()}focus(e){this.focusOptions=e,this.activeAnnouncer.focus(e),this.focusOptions=void 0}update(e){this.skipDispatch=!0,this.swap(e),this.hasFocus&&this.activeAnnouncer.focus(this.focusOptions),this.skipDispatch=!1}addListener(e,t){this.listeners[e].push(t),e==="swap"&&t(this.activeAnnouncer)}dispatch(e,t){e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1);for(const i of this.listeners[e])i(t)}swap(e){const t=this.activeAnnouncer.tabIndex;this.label2.textContent=e,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],wu(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),wu(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:t}),this.dispatch("swap",this.activeAnnouncer)}},GAe={arrowdown:{bindings:[{code:"ArrowDown"}]},arrowleft:{bindings:[{code:"ArrowLeft"}]},arrowright:{bindings:[{code:"ArrowRight"}]},arrowup:{bindings:[{code:"ArrowUp"}]},delete:{bindings:[{key:"Backspace"},{key:"Delete"}],activatesFocusIndicator:!1},redo:{bindings:[{key:"y",ctrlOrMeta:!0},{key:"z",ctrlOrMeta:!0,shift:!0}],activatesFocusIndicator:!1},undo:{bindings:[{key:"z",ctrlOrMeta:!0}],activatesFocusIndicator:!1},submit:{bindings:[{key:"Enter"},{code:"Enter"},{code:"Space"}]},zoomin:{bindings:[{key:"+"},{code:"ZoomIn"},{code:"Add"}],activatesFocusIndicator:!1},zoomout:{bindings:[{key:"-"},{code:"ZoomOut"},{code:"Substract"}],activatesFocusIndicator:!1}};function VAe(e,t){for(const i of t)if("code"in i){if(i.code===e.code)return!0}else if(i.key===e.key&&(i.shift===void 0||i.shift===e.shiftKey)&&(i.ctrlOrMeta===void 0||i.ctrlOrMeta===e.ctrlKey||i.ctrlOrMeta===e.metaKey))return!0;return!1}function HAe(e){for(const[t,{activatesFocusIndicator:i=!0,bindings:n}]of Ji(GAe))if(VAe(e,n))return{name:t,activatesFocusIndicator:i}}function WAe(e,t,i){const n=XG(e,i.datum,i.movedBounds);if(n!=null)return{x:n.canvasX,y:n.canvasY};const s=i.bounds;if(s!=null){if(s instanceof He){const{x:o,y:r}=s.computeCenter();return{x:t.x+o,y:t.y+r}}return vn.toCanvas(s).computeCenter()}}function jAe({bounds:e}){return e instanceof He?e:e!=null?vn.toCanvas(e):He.NaN}function UAe(e,t,i){const{x:n,y:s}=WAe(e,t,i)??{};if(n!==void 0&&s!==void 0)return{type:"keyboard",canvasX:n,canvasY:s}}function cie(e,t,i,n){let{top:s,right:o,bottom:r,left:a,width:l,height:c}=n;return a!=null?l!=null?o=i.width-a+l:o!=null&&(l=i.width-a-o):o!=null&&l!=null&&(a=i.width-o-l),s!=null?c!=null?r=i.height-s-c:r!=null&&(c=i.height-r-s):r!=null&&c!=null&&(s=i.height-r-c),l==null?c==null?(c=t,l=e):l=Math.ceil(e*c/t):c??(c=Math.ceil(t*l/e)),a==null&&(o==null?a=Math.floor((i.width-l)/2):a=i.width-o-l),s==null&&(r==null?s=Math.floor((i.height-c)/2):s=i.height-c-r),{x:a,y:s,width:l,height:c}}var SY=.1,CY=200,xY=12,$Ae=.5,KAe=class{constructor(){this.events=new Dc,this.x1=Number.NaN,this.y1=Number.NaN,this.x=Number.NaN,this.y=Number.NaN,this.vx=0,this.vy=0,this.t0=Number.NaN,this.animationFrameHandle=void 0}reset(){this.x=Number.NaN,this.y=Number.NaN,this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(e,t){if(Number.isNaN(this.x)||Number.isNaN(this.y)){this.x=e,this.y=t,this.vx=0,this.vy=0,this.emitUpdate(),this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0);return}this.x1=e,this.y1=t,this.t0=Date.now(),this.animationFrameHandle??(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;const{x1:e,y1:t,t0:i}=this,n=Date.now(),s=n-i;this.t0=n;const o=.001,r=Math.trunc(Math.ceil(s/(o*1e3)));let{x:a,y:l,vx:c,vy:u}=this;for(let d=0;d<r;d+=1){const p=a-e,f=l-t,m=-(CY*p+xY*c)/SY,v=-(CY*f+xY*u)/SY;c+=m*o,u+=v*o,a+=c*o,l+=u*o}Math.hypot(a-e,l-t)<$Ae?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=a,this.y=l,this.vx=c,this.vy=u,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.events.emit("update",{x:this.x,y:this.y})}},ZA=null;function yw(e){return e===""?"":(ZA??(ZA=nt("div")),ZA.textContent=Gt(e),ZA.innerHTML.replaceAll(`
`,"<br>"))}function qx(e,t){const{path:i,size:n}=e,{x:s,y:o}=e;i.clear();let r=!1;for(const[a,l]of t){const c=s+(a-.5)*n,u=o+(l-.5)*n;r?i.lineTo(c,u):i.moveTo(c,u),r=!0}i.closePath()}var YAe={circle({path:e,x:t,y:i,size:n}){const s=n/2;e.arc(t,i,s,0,Math.PI*2),e.closePath()},cross(e){qx(e,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},diamond(e){qx(e,[[.5,0],[1,.5],[.5,1],[0,.5]])},heart({path:e,x:t,y:i,size:n}){const s=n/4;i=i+s/2,e.arc(t-s,i-s,s,bo(130),bo(330)),e.arc(t+s,i-s,s,bo(220),bo(50)),e.lineTo(t,i+s),e.closePath()},pin({path:e,x:t,y:i,size:n}){e.moveTo(t+(.15625-.5)*n,i+(.34375-.5)*n),e.cubicCurveTo(t+(.15625-.5)*n,i+(.151491-.5)*n,t+(.307741-.5)*n,i+(0-.5)*n,t+(.5-.5)*n,i+(0-.5)*n),e.cubicCurveTo(t+(.692259-.5)*n,i+(0-.5)*n,t+(.84375-.5)*n,i+(.151491-.5)*n,t+(.84375-.5)*n,i+(.34375-.5)*n),e.cubicCurveTo(t+(.84375-.5)*n,i+(.493824-.5)*n,t+(.784625-.5)*n,i+(.600181-.5)*n,t+(.716461-.5)*n,i+(.695393-.5)*n),e.cubicCurveTo(t+(.699009-.5)*n,i+(.719769-.5)*n,t+(.681271-.5)*n,i+(.743104-.5)*n,t+(.663785-.5)*n,i+(.766105-.5)*n),e.cubicCurveTo(t+(.611893-.5)*n,i+(.834367-.5)*n,t+(.562228-.5)*n,i+(.899699-.5)*n,t+(.528896-.5)*n,i+(.980648-.5)*n),e.cubicCurveTo(t+(.524075-.5)*n,i+(.992358-.5)*n,t+(.512663-.5)*n,i+(1-.5)*n,t+(.5-.5)*n,i+(1-.5)*n),e.cubicCurveTo(t+(.487337-.5)*n,i+(1-.5)*n,t+(.475925-.5)*n,i+(.992358-.5)*n,t+(.471104-.5)*n,i+(.980648-.5)*n),e.cubicCurveTo(t+(.487337-.5)*n,i+(1-.5)*n,t+(.475925-.5)*n,i+(.992358-.5)*n,t+(.471104-.5)*n,i+(.980648-.5)*n),e.cubicCurveTo(t+(.437772-.5)*n,i+(.899699-.5)*n,t+(.388107-.5)*n,i+(.834367-.5)*n,t+(.336215-.5)*n,i+(.766105-.5)*n),e.cubicCurveTo(t+(.318729-.5)*n,i+(.743104-.5)*n,t+(.300991-.5)*n,i+(.719769-.5)*n,t+(.283539-.5)*n,i+(.695393-.5)*n),e.cubicCurveTo(t+(.215375-.5)*n,i+(.600181-.5)*n,t+(.15625-.5)*n,i+(.493824-.5)*n,t+(.15625-.5)*n,i+(.34375-.5)*n),e.closePath()},plus(e){qx(e,[[1/3,0],[2/3,0],[2/3,1/3],[1,1/3],[1,2/3],[2/3,2/3],[2/3,1],[1/3,1],[1/3,2/3],[0,2/3],[0,1/3],[1/3,1/3]])},square({path:e,x:t,y:i,size:n,pixelRatio:s}){const o=n/2;e.moveTo(Ts(s,t-o),Ts(s,i-o)),e.lineTo(Ts(s,t+o),Ts(s,i-o)),e.lineTo(Ts(s,t+o),Ts(s,i+o)),e.lineTo(Ts(s,t-o),Ts(s,i+o)),e.closePath()},star({path:e,x:t,y:i,size:n}){const o=n/2,r=o/2,a=Math.PI/2;for(let l=0;l<10;l++){const c=l%2===0?o:r,u=l*Math.PI/5-a,d=t+Math.cos(u)*c,p=i+Math.sin(u)*c;e.lineTo(d,p)}e.closePath()},triangle(e){qx(e,[[.5,0],[1,.87],[0,.87]])}},fD=class extends Ls{constructor(){super(...arguments),this.shape="square",this.x=0,this.y=0,this.size=12}isPointInPath(e,t){return this.distanceSquared(e,t)<=0}get midPoint(){return{x:this.x,y:this.y}}distanceSquared(e,t){const i=vs.anchor(this.shape),n=e-this.x+(i.x-.5)*this.size,s=t-this.y+(i.y-.5)*this.size,o=this.size/2;return Math.max(n*n+s*s-o*o,0)}updatePath(){const{path:e,shape:t,x:i,y:n,size:s}=this,o=this.layerManager?.canvas?.pixelRatio??1,r=vs.anchor(t),a={path:e,x:i-(r.x-.5)*s,y:n-(r.y-.5)*s,size:s,pixelRatio:o};e.clear(),typeof t=="string"?YAe[t](a):typeof t=="function"&&t(a)}computeBBox(){const{x:e,y:t,size:i}=this,n=vs.anchor(this.shape);return new He(e-i*n.x,t-i*n.y,i,i)}executeFill(e,t){if(t)return super.executeFill(e,t)}executeStroke(e,t){if(t)return super.executeStroke(e,t)}};E([Pa({})],fD.prototype,"shape",2);E([Le()],fD.prototype,"x",2);E([Le()],fD.prototype,"y",2);E([Le({convertor:Math.abs})],fD.prototype,"size",2);var vs=class extends kS(AE(TS(fD))){static anchor(t){return t==="pin"?{x:.5,y:1}:typeof t=="function"&&"anchor"in t?t.anchor:{x:.5,y:.5}}constructor(t){super(t),t?.shape!=null&&(this.shape=t.shape)}};function uie(e,t,i=t*(5/3)){const n=new Mt,s=Math.min(e.marker.strokeWidth??1,2),o=Math.min(e.line?.strokeWidth??0,2),r=Math.max(e.marker.enabled===!1?0:t,e.line==null?0:i),a=Math.max(e.marker.enabled===!1?0:t,o);if(e.line!=null){const{stroke:l,strokeOpacity:c,lineDash:u}=e.line,d=new Ma;d.x1=0,d.y1=a/2,d.x2=r,d.y2=a/2,d.stroke=l,d.strokeOpacity=c,d.strokeWidth=o,d.lineDash=u,n.append(d)}if(e.marker.enabled!==!1){const{shape:l,fill:c,fillOpacity:u,stroke:d,strokeOpacity:p,lineDash:f,lineDashOffset:m}=e.marker,v=new vs;v.shape=l??"square",v.size=t,v.fill=c,v.fillOpacity=u??1,v.stroke=d,v.strokeOpacity=p??1,v.strokeWidth=s,v.lineDash=f,v.lineDashOffset=m??0;const b=vs.anchor(l),C=r/2+(b.x-.5)*t,x=a/2+(b.y-.5)*t,w=t/(t+s);v.x=C,v.y=x,v.scalingCenterX=C,v.scalingCenterY=x,v.scalingX=w,v.scalingY=w,n.append(v)}return Mt.toSVG(n,r,a)}var Us="ag-charts-tooltip",die="ag-charts-tooltip--dark";function hie(e){const t=[],i=new Map;for(const n of e)if(n.type==="structured"){const{heading:s}=n,o=s==null?void 0:i.get(s),r={type:"structured",heading:s,items:[n]};o==null?(i.set(s,r),t.push(r)):o.items.push(n)}else t.push(n);return t}function pie(e){const t=hie(e),i=[];for(const n of t)if(n.type!=="raw"){n.heading!=null&&i.push(Gt(n.heading));for(const s of n.items)if(s.title!=null&&i.push(Gt(s.title)),s.data)for(const o of s.data)i.push(o.label??o.fallbackLabel,o.value)}return i.filter(n=>n!=="").join("; ")}function f_(e,t,i){let n="";if(e==null&&!t)return"";e==null?n+=`<span class="${Us}-label">${yw(t)}</span>`:(n+=`<span class="${Us}-label">${yw(e)}</span>`,n+=" ",n+=`<span class="${Us}-value">${yw(t)}</span>`);const s=[`${Us}-row`];return i&&s.push(`${Us}-row--inline`),n=`<div class="${s.join(" ")}">${n}</div>`,n}function XAe(e){let t="";if(e.data?.length&&e.data.every(s=>s.value==null||s.value===""))return t;const i=e.title==null&&e.data?.length===1,n=e.symbol==null?void 0:uie(e.symbol,12);if(n!=null&&(e.title!=null||e.data?.length)&&(t+=`<span class="${Us}-symbol">${n}</span>`),e.title!=null&&(t+=`<span class="${Us}-title">${yw(e.title)}</span>`,t+=" "),e.data)for(const s of e.data)t+=f_(s.label??s.fallbackLabel,s.value,i),t+=" ";return t}function gie(e,t){if(e==null||t.length===1)return;const i=e?.t("tooltipPaginationStatus",{index:t.index+1,count:t.length});return`<div class="${Us}-footer">${i}</div>`}function wY(e,t,i,n){const s=t.items.length===1?t.items[0]:void 0;let o,r,a;switch(i){case"compact":o=!0,r=Gt(s?.title);break;case"single":o=s!=null&&(t.heading==null||s.title==null)&&s.data?.length===1&&s.data[0].label==null&&s.data[0].value!=null,a=Gt(t.heading??s?.title);break;case"shared":o=!1}let l="";if(o&&s!=null){if(r!=null&&(l+=f_(void 0,r,!1)),s.data)for(const u of s.data)l+=f_(u.label??a,u.value,!1),l+=" "}else{t.heading!=null&&(l+=`<span class="${Us}-heading">${yw(Gt(t.heading))}</span>`,l+=" ");for(const u of t.items)l+=XAe(u)}if(l.length===0)return;const c=i!=="compact"&&n!=null?gie(e,n):void 0;return c+null&&(l+=c),l=`<div class="${Us}-content">${l.trimEnd()}</div>`,l}function ZAe(e,t){const i=t==null?void 0:gie(e,t);return i==null?"":`<div class="${Us}-content">${i}</div>`}function fie(e,t,i,n){const s=hie(t);if(s.length!==0){if(s.length===1&&s[0].type==="structured")return wY(e,s[0],i,n);{const o=s.map(r=>r.type==="structured"?wY(e,r,i):r.rawHtmlString);return n!=null&&o.push(ZAe(e,n)??""),o.join("")}}}var qAe={left:-1,"top-left":-1,"bottom-left":-1,top:0,center:0,bottom:0,right:1,"top-right":1,"bottom-right":1},QAe={"top-left":-1,top:-1,"top-right":-1,left:0,center:0,right:0,"bottom-left":1,bottom:1,"bottom-right":1},JAe={left:3,"top-left":void 0,"bottom-left":void 0,top:2,center:void 0,bottom:1,right:0,"top-right":void 0,"bottom-right":void 0},DY={top:2,bottom:2,left:1,right:1,"top-right":3,"top-left":3,"bottom-right":3,"bottom-left":3,center:0},eke={pointer:"top",node:"top",chart:"top-left"},ey=class extends pt{constructor(){super(...arguments),this.xOffset=0,this.yOffset=0}};E([F],ey.prototype,"xOffset",2);E([F],ey.prototype,"yOffset",2);E([F],ey.prototype,"anchorTo",2);E([F],ey.prototype,"placement",2);var Hl=class extends pt{constructor(){super(),this.enabled=!0,this.mode="single",this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new ey,this.pagination=!1,this.darkTheme=!1,this.bounds="extended",this.cleanup=new _i,this.springAnimation=new KAe,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.sizeMonitor=new Pee,this._elementSize=void 0,this._showTimeout=void 0,this.arrowPosition=void 0,this._visible=!1,this.positionParams=void 0,this.localeManager=void 0,this.cleanup.register(this.springAnimation.events.on("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(e,t){return"togglePopover"in Qt().HTMLElement.prototype&&(this.element=t.addChild("tooltip-container",Us),this.element.setAttribute("popover","manual"),this.element.className=Us,this.element.style.positionAnchor=t.anchorName,this.sizeMonitor.observe(this.element,i=>{this._elementSize=i,this.updateTooltipPosition()})),this.localeManager=e,()=>{t.removeChild("tooltip-container",Us),this.cleanup.flush(),this.element&&this.sizeMonitor.unobserve(this.element)}}isVisible(){return this._visible}contains(e){return this.element?.contains(e)??!1}updateTooltipPosition(){const{element:e,_elementSize:t,positionParams:i}=this;if(e==null||t==null||i==null)return;const{canvasRect:n,relativeRect:s,meta:o}=i,{x:r,y:a}=this.springAnimation,l=o.position?.anchorTo??"pointer";let c=o.position?.placement??eke[l];Array.isArray(c)||(c=[c]);const u=o.position?.xOffset??0,d=o.position?.yOffset??0,p=s.x,f=s.y,m=s.width-t.width-1+p,v=s.height-t.height+f;let b=0,C,x,w=!1;do{C=c[b],b+=1;const R=this.getTooltipBounds({elementSize:t,placement:C,anchorTo:l,canvasX:r,canvasY:a,yOffset:d,xOffset:u,canvasRect:n});x=cie(t.width,t.height,s,R),w=!1,DY[C]&1&&(w||(w=x.x<p||x.x>m)),DY[C]&2&&(w||(w=x.y<f||x.y>v))}while(b<c.length&&w);const M=Je(p,x.x,m),T=Je(f,x.y,v);w||(w=M!==x.x||T!==x.y);const L=l!=="chart"&&!w&&!u&&!d,I=o.showArrow??this.showArrow??L;this.arrowPosition=I?JAe[C]:void 0,this.updateClassModifiers(),e.style.translate=`${M}px ${T}px`}show(e,t,i,n,s,o=!1){const{element:r}=this;if(r!=null&&n!=null&&n.length!==0){const c=fie(this.localeManager,n,this.mode,this.pagination?s:void 0);if(c==null){this.toggle(!1);return}r.innerHTML=c}else if(r==null||r.innerHTML===""){this.toggle(!1);return}const a={x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height};switch(this.positionParams={canvasRect:t,relativeRect:a,meta:i},i.position?.anchorTo??"pointer"){case"node":this.springAnimation.update(i.nodeCanvasX??i.canvasX,i.nodeCanvasY??i.canvasY);break;case"pointer":this.springAnimation.update(i.canvasX,i.canvasY);break;case"chart":this.springAnimation.reset()}i.enableInteraction?(this.enableInteraction=!0,r.style.pointerEvents="auto",r.removeAttribute("aria-hidden"),r.tabIndex=-1):(this.enableInteraction=!1,r.style.pointerEvents="none",r.setAttribute("aria-hidden","true"),r.removeAttribute("tabindex")),r.style.setProperty("--top",`${t.top}px`),r.style.setProperty("--left",`${t.left}px`),this.updateClassModifiers(),this.toggle(!0,o)}hide(){this.toggle(!1)}maybeEnterInteractiveTooltip({relatedTarget:e},t){const{interactive:i,interactiveLeave:n,enabled:s,element:o}=this;if(o==null)return!1;if(n)return!0;const r=i&&s&&this.isVisible()&&e instanceof Node&&this.contains(e);return r&&(this.interactiveLeave={callback:t,listener:a=>{(a.relatedTarget==null||a.relatedTarget instanceof Node&&!this.contains(a.relatedTarget))&&this.popInteractiveLeaveCallback()}},o.addEventListener("focusout",this.interactiveLeave.listener),o.addEventListener("mouseout",this.interactiveLeave.listener)),r}popInteractiveLeaveCallback(){const{interactiveLeave:e,element:t}=this;this.interactiveLeave=void 0,e&&(t&&(t.removeEventListener("focusout",e.listener),t.removeEventListener("mouseout",e.listener)),e.callback())}toggle(e,t=!1){const{delay:i}=this;e&&i>0&&!t?this._showTimeout??(this._showTimeout=setTimeout(()=>{this._showTimeout=void 0,this.toggleCallback(!0)},i)):(clearTimeout(this._showTimeout),this._showTimeout=void 0,this.toggleCallback(e))}toggleCallback(e){this.element?.isConnected&&this._visible!==e&&(this._visible=e,this.element.togglePopover(e),e?this.updateTooltipPosition():(this.springAnimation.reset(),this.popInteractiveLeaveCallback()))}updateClassModifiers(){if(!this.element?.isConnected)return;const{classList:e}=this.element,t=(i,n)=>e.toggle(`${Us}--${i}`,n);t("no-interaction",!this.enableInteraction),t("arrow-top",this.arrowPosition===1),t("arrow-right",this.arrowPosition===3),t("arrow-bottom",this.arrowPosition===2),t("arrow-left",this.arrowPosition===0),t("compact",this.mode==="compact"),e.toggle(die,this.darkTheme);for(const i of this.wrapTypes)e.toggle(`${Us}--wrap-${i}`,i===this.wrapping)}getTooltipBounds(e){const{elementSize:t,anchorTo:i,placement:n,canvasX:s,canvasY:o,yOffset:r,xOffset:a,canvasRect:l}=e,{width:c,height:u}=t,d={width:c,height:u};if(i==="node"||i==="pointer"){const p=qAe[n],f=QAe[n];return d.top=o+r+u*(f-1)/2+8*f,d.left=s+a+c*(p-1)/2+8*p,d}switch(n){case"top":return d.top=r,d.left=l.width/2-c/2+a,d;case"right":return d.top=l.height/2-u/2+r,d.left=l.width-c+a,d;case"left":return d.top=l.height/2-u/2+r,d.left=a,d;case"bottom":return d.top=l.height-u+r,d.left=l.width/2-c/2+a,d;case"top-left":return d.top=r,d.left=a,d;case"top-right":return d.top=r,d.left=l.width-c+a,d;case"bottom-right":return d.top=l.height-u+r,d.left=l.width-c+a,d;case"bottom-left":return d.top=l.height-u+r,d.left=a,d}return d}};E([F],Hl.prototype,"enabled",2);E([F],Hl.prototype,"mode",2);E([F],Hl.prototype,"showArrow",2);E([F],Hl.prototype,"delay",2);E([F],Hl.prototype,"range",2);E([F],Hl.prototype,"wrapping",2);E([F],Hl.prototype,"position",2);E([F],Hl.prototype,"pagination",2);E([F],Hl.prototype,"darkTheme",2);E([F],Hl.prototype,"bounds",2);function m_(e,t){return e.series===t.series&&yr(e.datumIndex,t.datumIndex)}var tke=class{constructor(){this.candidates=[]}get current(){return this.active}reset(){this.candidates.length=0,this.active=void 0}update(e,t){this.candidates=e;let i=t==null?-1:e.findIndex(n=>m_(n,t));return i===-1&&(i=0),this.active=e[i],{current:this.active,index:i,length:e.length}}next(){const{candidates:e,active:t}=this,i=t==null?-1:e.findIndex(s=>m_(s,t));if(i===-1)return;let n=i+1;return n>=e.length&&(n=0),this.active=e[n],{current:this.active,index:n,length:this.candidates.length}}},ike=class extends zG{constructor(e){super(),this.chart=e,this.id=To(this),this.series=[],this.announceMode="when-changed",this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="pointer",this.previousInputDevice="keyboard",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.cachedTooltipContent=void 0,this.hoverScheduler=T0e(()=>{if(!(!this.tooltip.lastHover&&!this.highlight.pendingHoverEvent)){if(this.chart.getUpdateType()<=5){this.hoverScheduler.schedule();return}this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)}}),this.tooltipCandidates=new tke;const t=e.ctx.localeManager.t("ariaInitSeriesArea"),i=e.ctx.domManager.addChild("series-area","series-area-aria-label1"),n=e.ctx.domManager.addChild("series-area","series-area-aria-label2");this.swapChain=new zAe(i,n,"img",t),this.swapChain.addListener("blur",a=>this.onBlur(a)),this.swapChain.addListener("focus",()=>this.onFocus()),e.ctx.domManager.mode==="normal"&&(this.focusIndicator=new _Ae(this.swapChain),this.focusIndicator.overrideFocusVisible(e.mode==="integrated"?!1:void 0));const{seriesDragInterpreter:s,seriesWidget:o,containerWidget:r}=e.ctx.widgets;o.setTabIndex(-1),this.cleanup.register(()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label1"),()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label2"),o.addListener("focus",()=>this.swapChain.focus({preventScroll:!0})),o.addListener("mousemove",a=>this.onHover(a,o)),o.addListener("wheel",a=>this.onWheel(a)),o.addListener("mouseleave",a=>this.onLeave(a)),o.addListener("keydown",a=>this.onKeyDown(a)),o.addListener("contextmenu",(a,l)=>this.onContextMenu(a,l)),r.addListener("contextmenu",(a,l)=>this.onContextMenu(a,l)),r.addListener("click",(a,l)=>this.onClick(a,l)),r.addListener("dblclick",(a,l)=>this.onClick(a,l)),e.ctx.animationManager.addListener("animation-start",()=>this.clearAll()),e.ctx.eventsHub.on("dom:resize",()=>this.clearAll()),e.ctx.eventsHub.on("highlight:change",a=>this.changeHighlightDatum(a)),e.ctx.eventsHub.on("layout:complete",a=>this.layoutComplete(a)),e.ctx.updateService.addListener("pre-scene-render",()=>this.preSceneRender()),e.ctx.updateService.addListener("update-complete",()=>this.updateComplete()),e.ctx.eventsHub.on("zoom:change",()=>this.clearAll()),e.ctx.eventsHub.on("zoom:pan-start",()=>this.clearAll())),s&&this.cleanup.register(s.events.on("drag-move",a=>this.onDragMove(a,o)),s.events.on("click",a=>this.onClick(a,o)),s.events.on("dblclick",a=>this.onClick(a,o)))}get bbox(){return(this.seriesRect??He.zero).clone()}isState(e){return this.chart.ctx.interactionManager.isState(e)}isIgnoredTouch(e){return!(e.device!=="touch"||e.type==="click"||this.chart.ctx.chartService.touch.dragAction==="hover"||this.chart.ctx.chartService.touch.dragAction==="drag"&&this.isState(9))}dataChanged(){var e;this.cachedTooltipContent=void 0,this.highlight.appliedHoverEvent&&((e=this.highlight).stashedHoverEvent??(e.stashedHoverEvent=this.highlight.appliedHoverEvent),this.clearHighlight()),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.focusIndicator?.clear()}preSceneRender(){this.highlight.stashedHoverEvent!=null&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),this.tooltip.lastHover!=null&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}updateComplete(){this.isState(34)&&this.focusIndicator?.isFocusVisible()&&(this.announceMode!=="always"&&(this.announceMode="never"),this.handleFocus(0,0))}update(e,t){this.chart.ctx.updateService.update(e,t)}seriesChanged(e){this.focus.sortedSeries=[...e].sort((t,i)=>{let n=t.properties.focusPriority??1/0,s=i.properties.focusPriority??1/0;return n===s&&([n,s]=[t.declarationOrder,i.declarationOrder]),n<s?-1:n>s?1:0}),this.series=e}layoutComplete(e){this.seriesRect=e.series.rect,this.hoverRect=e.series.rect,this.chart.ctx.widgets.seriesWidget.setBounds(e.series.rect),this.chart.ctx.domManager.mode==="normal"&&this.chart.ctx.widgets.chartWidget.setBounds(e.chart)}onContextMenu(e,t){const{sourceEvent:i}=e;if(i.currentTarget!=t.getElement())return;if(i.target==this.chart.ctx.widgets.containerWidget.getElement()){if(this.isState(36)){const{currentX:c,currentY:u}=e;this.chart.ctx.contextMenuRegistry.dispatchContext("always",{widgetEvent:e,canvasX:c,canvasY:u},void 0)}return}let n,s;if(this.focusIndicator?.isFocusVisible())n=this.chart.ctx.highlightManager.getActiveHighlight(),n&&this.seriesRect&&n.midPoint&&(s=vn.toCanvasPoint(n.series.contentGroup,n.midPoint.x,n.midPoint.y));else if(this.isState(36)){const c=this.pickNodes({x:e.currentX,y:e.currentY},"context-menu");c&&(this.chart.ctx.highlightManager.updateHighlight(this.id),n=c.matches[0].datum)}const o=n?.series;this.clearAll();const r=e.currentX+t.cssLeft(),a=e.currentY+t.cssTop(),{datumIndex:l}=n??{};o&&n&&l!=null?this.chart.ctx.contextMenuRegistry.dispatchContext("series-node",{widgetEvent:e,canvasX:r,canvasY:a},{pickedSeries:o,pickedNode:{...n,datumIndex:l}},s):this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",{widgetEvent:e,canvasX:r,canvasY:a},void 0,s)}onLeave(e){!this.isState(41)||e.sourceEvent.relatedTarget?.className==="ag-charts-text-input__textarea"||this.maybeEnterInteractiveTooltip(e.sourceEvent)||(this.chart.ctx.domManager.updateCursor(this.id),this.hoverDevice!=="keyboard"&&this.clearAll())}onWheel(e){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.previousInputDevice="pointer")}onDragMove(e,t){this.isState(41)&&(this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(e,t))}onHover(e,t){this.isState(41)&&this.onHoverLikeEvent(e,t)}onHoverLikeEvent(e,t){if(this.isIgnoredTouch(e)||(e.device==="touch"&&this.chart.ctx.chartService.touch.dragAction==="hover"&&e.sourceEvent.preventDefault(),t!==this.chart.ctx.widgets.seriesWidget))return;(e.device==="touch"||nke(e,"drag-move"))&&(this.tooltip.lastHover=e),this.hoverDevice="pointer",this.previousInputDevice="pointer",this.highlight.pendingHoverEvent=e,this.hoverScheduler.schedule();let i;if(this.isState(32)){const{currentX:s,currentY:o}=e;i=this.pickNodes({x:s,y:o},"event");const r=i?.matches,a=r?.[0];a?.series.hasEventListener("seriesNodeClick")||a?.series.hasEventListener("seriesNodeDoubleClick")||r!=null&&r.length>1&&this.chart.tooltip.pagination?this.chart.ctx.domManager.updateCursor(this.id,"pointer"):this.chart.ctx.domManager.updateCursor(this.id)}const n=!!i?.matches.length;this.emitSeriesAreaHoverEvent(e,n)}onClick(e,t){if(e.device==="keyboard"||(t===this.chart.ctx.widgets.seriesWidget&&this.chart.ctx.animationManager.isActive()&&this.chart.ctx.animationManager.skipCurrentBatch(),e.device==="touch"&&t===this.chart.ctx.widgets.seriesWidget&&this.swapChain.focus({preventScroll:!0}),!this.isState(41)))return;if(t===this.chart.ctx.widgets.seriesWidget){if(!t.getElement().contains(e.sourceEvent.target))return}else if(e.sourceEvent.target!=t.getElement())return;this.focusIndicator?.overrideFocusVisible(!1),this.onHoverLikeEvent(e,t);const i=t===this.chart.ctx.widgets.seriesWidget;if(!this.isState(32)){i&&this.emitSeriesAreaClickEvent(e,!1);return}if(i){if(!!this.checkSeriesNodeClick(e)){this.emitSeriesAreaClickEvent(e,!0),this.update(5),e.sourceEvent.preventDefault();return}this.emitSeriesAreaClickEvent(e,!1)}const n={type:e.type==="click"?"click":"doubleClick",event:e.sourceEvent};this.chart.fireEvent(n)}emitSeriesAreaHoverEvent(e,t){const i=this.toCanvasCoordinates(e.currentX,e.currentY);if(i==null)return;const n={x:i.x,y:i.y,consumed:t,sourceEvent:e.sourceEvent};this.chart.ctx.eventsHub.emit("series-area:hover",n)}emitSeriesAreaClickEvent(e,t){if(!("currentX"in e))return;const i=this.toCanvasCoordinates(e.currentX,e.currentY);if(i==null)return;const n={x:i.x,y:i.y,consumed:t,sourceEvent:e.sourceEvent};this.chart.ctx.eventsHub.emit("series-area:click",n)}toCanvasCoordinates(e,t){const i=this.hoverRect?.x??this.seriesRect?.x??0,n=this.hoverRect?.y??this.seriesRect?.y??0;return{x:e+i,y:t+n}}onFocus(){this.isState(34)&&(this.hoverDevice=this.focusIndicator?.isFocusVisible(!0)?"keyboard":"pointer",this.handleFocus(0,0))}onBlur(e){this.isState(34)&&(this.hoverDevice="pointer",this.maybeEnterInteractiveTooltip(e)||this.clearAll(),this.focusIndicator?.overrideFocusVisible(void 0))}onKeyDown(e){if(!this.isState(43))return;const t=HAe(e.sourceEvent);switch(t?.activatesFocusIndicator===!1&&this.focusIndicator?.overrideFocusVisible(this.previousInputDevice==="keyboard"),t?.name){case"redo":return this.chart.ctx.eventsHub.emit("series:redo",null);case"undo":return this.chart.ctx.eventsHub.emit("series:undo",null);case"zoomin":return this.chart.ctx.eventsHub.emit("series:keynav-zoom",{delta:1,widgetEvent:e});case"zoomout":return this.chart.ctx.eventsHub.emit("series:keynav-zoom",{delta:-1,widgetEvent:e});case"arrowup":return this.onArrow(-1,0,e);case"arrowdown":return this.onArrow(1,0,e);case"arrowleft":return this.onArrow(0,-1,e);case"arrowright":return this.onArrow(0,1,e);case"submit":return this.onSubmit(e)}}onArrow(e,t,i){this.isState(34)&&(this.hoverDevice="keyboard",this.previousInputDevice="keyboard",this.focusIndicator?.overrideFocusVisible(!0),this.focus.seriesIndex+=e,this.focus.datumIndex+=t,this.handleFocus(e,t),i.sourceEvent.preventDefault(),this.chart.ctx.eventsHub.emit("series:focus-change",null))}onSubmit(e){if(!this.isState(34))return;const{series:t,datum:i}=this.focus,n=e.sourceEvent;t!=null&&i!=null?t.fireNodeClickEvent(n,i):this.chart.fireEvent({type:"click",event:n}),n.preventDefault()}checkSeriesNodeClick(e){var t;const i=this.pickNodes({x:e.currentX,y:e.currentY},"event");if(i==null||i.matches.length===0)return;const n=this.chart.tooltip.pagination?this.tooltipCandidates.update(i.matches,this.tooltipCandidates.current)?.current:void 0,{series:s,datum:o}=n??i.matches[0],r=n==null?i.distance:0;if(e.type==="click"){const l=s.fireNodeClickEvent(e.sourceEvent,o)&&this.chart.tooltip.pagination?this.tooltipCandidates.next():void 0;if(l!=null){e.sourceEvent.preventDefault();const{currentX:c,currentY:u}=e,d=c+(this.hoverRect?.x??0),p=u+(this.hoverRect?.y??0);(t=this.highlight).pendingHoverEvent??(t.pendingHoverEvent=this.highlight.appliedHoverEvent),this.handleHoverHighlight(!1),this.showTooltip(l.current,d,p,{index:l.index,length:l.length})}return!0}return e.type==="dblclick"?(e.preventZoomDblClick=r===0,s.fireNodeDoubleClickEvent(e.sourceEvent,o),!0):!1}handleFocus(e,t){const i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);i==null?this.handleSeriesFocus(e,t)===0?this.announceMode="when-changed":this.announceMode="always":(this.focusIndicator?.update(i.rect,this.seriesRect,!1),this.swapChain.update(i.text),this.announceMode="always")}handleSeriesFocus(e,t){if(this.chart.chartType==="standalone")return this.handleSoloSeriesFocus(e,t);const{focus:i}=this,n=i.sortedSeries.filter(l=>l.visible&&l.focusable);if(n.length===0)return 1;const s=i.datumIndex-t,o=i.seriesIndex-e;i.seriesIndex=Je(0,i.seriesIndex,n.length-1),i.series=n[i.seriesIndex];const r=this.focus.datumIndex,a=this.focus.seriesIndex;return this.updatePickedFocus(r,t,s,a,e,o)}handleSoloSeriesFocus(e,t){this.focus.series=this.focus.sortedSeries[0];const i=this.focus.datumIndex,n=this.focus.seriesIndex,s=this.focus.datumIndex-t,o=this.focus.seriesIndex-e;return this.updatePickedFocus(i,t,s,n,e,o)}updatePickedFocus(e,t,i,n,s,o){const{focus:r,hoverRect:a,seriesRect:l}=this;if(r.series==null||a==null)return 1;const c=r?.series?.pickFocus({datumIndex:e,datumIndexDelta:t,otherIndex:n,otherIndexDelta:s,seriesRect:l});if(!c)return 2;const{datum:u}=c;if(r.datum=u,r.datumIndex=c.datumIndex,c.otherIndex!=null&&(r.seriesIndex=c.otherIndex),this.focusIndicator?.isFocusVisible()){this.chart.ctx.animationManager.reset();const f=jAe(c),{x:m,y:v}=f.computeCenter();if(!a.containsPoint(m,v)&&this.chart.ctx.zoomManager.panToBBox(this.id,a,f))return 3;const{x1:b,x2:C,y1:x,y2:w}=Zw.from(f),M=a.containsPoint(b,x),T=a.containsPoint(C,x),L=a.containsPoint(b,w),I=a.containsPoint(C,w);if(!(M||T||L||I)){const R=Zw.from(a);c.movedBounds=f.clone(),b<R.x1&&C<R.x1?(c.movedBounds.x=R.x1-2,c.movedBounds.width=4):b>R.x2&&C>R.x2&&(c.movedBounds.x=R.x2-2,c.movedBounds.width=4),x<R.y1&&w<R.y1?(c.movedBounds.y=R.y1-2,c.movedBounds.height=4):x>R.y2&&w>R.y2&&(c.movedBounds.y=R.y2-2,c.movedBounds.height=4)}}this.focusIndicator?.update(c.movedBounds??c.bounds,this.seriesRect,c.clipFocusBox);const d=this.getTooltipContent(r.series,u.datumIndex,u,"aria-label"),p=UAe(r.series,a,c);if(p!=null&&this.hoverDevice==="keyboard"){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;const f=UI.makeTooltipMeta(p,r.series,u,c.movedBounds);this.chart.ctx.highlightManager.updateHighlight(this.id,u),this.isTooltipEnabled(r.series)&&this.chart.ctx.tooltipManager.updateTooltip(this.id,f,d)}return this.maybeAnnouncePickedFocus(t,i,s,o,c,d),0}maybeAnnouncePickedFocus(e,t,i,n,s,o){const{focus:r}=this;let a;this.announceMode==="when-changed"?e===0&&i===0||t!==s.datumIndex||n!==(s.otherIndex??r.seriesIndex)?a="always":a="never":a=this.announceMode,a==="always"&&this.swapChain.update(this.getDatumAriaText(s.datum,o))}getDatumAriaText(e,t){const i=t==null?"":pie(t);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:e.series.getDatumAriaText?.(e,i)??i})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.focusIndicator?.clear()}handleHoverHighlight(e){this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;const t=this.highlight.appliedHoverEvent;if(!t||!this.isState(41))return;const{currentX:i,currentY:n}=t,s=t.currentX+(this.hoverRect?.x??0),o=t.currentY+(this.hoverRect?.y??0);if(e?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(s,o)){this.clearHighlight();return}const{range:r}=this.chart.highlight,a=r==="tooltip"?"highlight-tooltip":"highlight",l=this.pickNodes({x:i,y:n},a);if(!l||l.matches.length===0){this.chart.ctx.highlightManager.updateHighlight(this.id);return}const{current:c}=this.tooltipCandidates,d=(c==null?void 0:l.matches.find(p=>m_(p,c)))?.datum??l.matches[0].datum;this.chart.ctx.highlightManager.updateHighlight(this.id,d),this.hoverDevice="pointer"}handleHoverTooltip(e,t){const{current:i}=this.tooltipCandidates;if(this.tooltipCandidates.reset(),!this.isState(41))return;const{currentX:n,currentY:s}=e,o=n+(this.hoverRect?.x??0),r=s+(this.hoverRect?.y??0),a=e.sourceEvent.target;if(t?this.chart.ctx.animationManager.isActive():!this.hoverRect?.containsPoint(o,r)){this.hoverDevice=="pointer"&&this.clearTooltip();return}if(a&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(a,"canvas-overlay",Us))return;const l=this.pickNodes({x:e.currentX,y:e.currentY},"tooltip");if(!l||l.matches.length===0){this.hoverDevice=="pointer"&&this.clearTooltip();return}if(this.hoverDevice="pointer",l.distance===0){const{current:c,index:u,length:d}=this.tooltipCandidates.update(l.matches,this.chart.tooltip.pagination?i:void 0);this.showTooltip(c,o,r,{index:u,length:d})}else this.showTooltip(l.matches[0],o,r)}showTooltip({series:e,datum:t,datumIndex:i},n,s,o){const r=this.getTooltipContent(e,i,t,"tooltip");if(r!=null){const l=UI.makeTooltipMeta({type:"pointermove",canvasX:n,canvasY:s},e,t,void 0);this.chart.ctx.tooltipManager.updateTooltip(this.id,l,r,o)}else this.chart.ctx.tooltipManager.removeTooltip(this.id)}maybeEnterInteractiveTooltip(e){return this.chart.tooltip.maybeEnterInteractiveTooltip(e,()=>{this.tooltip.lastHover=void 0,this.chart.ctx.tooltipManager.removeTooltip(this.id),this.chart.ctx.highlightManager.updateHighlight(this.id)})}changeHighlightDatum(e){const t=e.previousHighlight?.series,i=e.currentHighlight?.series;t?.properties.cursor&&e.previousHighlight?.datum&&this.chart.ctx.domManager.updateCursor(t.id),i?.properties.cursor&&i.properties.cursor!=="default"&&e.currentHighlight?.datum&&this.chart.ctx.domManager.updateCursor(i.id,i.properties.cursor),i==null||t==null?this.update(5,{clearCallbackCache:!0}):this.update(5,{seriesToUpdate:new Set([t,i].filter(Boolean)),clearCallbackCache:!0})}pickNodes(e,t,i){const n=[...this.series].reverse();let s;for(const o of n){if(!o.visible||!o.contentGroup.visible)continue;const r=o.pickNodes(e,t,i);if(r==null||r.datums.length===0)continue;const{datums:a,distance:l}=r;if(r.datums.length!==0){if(l===0){s?.distance!==0&&(s={matches:[],distance:0});for(const c of a){const{datumIndex:u}=c;s.matches.push({series:o,datum:c,datumIndex:u})}}else if(s==null||s.distance>l){const[c]=a,{datumIndex:u}=c;s={matches:[{series:o,datum:c,datumIndex:u}],distance:l}}}}return s}isTooltipEnabled(e){return e.tooltipEnabled??this.chart.tooltip.enabled}getTooltipContent(e,t,i,n){let s;if(n==="aria-label"||this.isTooltipEnabled(e)){const{cachedTooltipContent:o}=this;if(o!=null&&o.series===e&&o.datumIndex===t)s=o.content;else{const r=this.chart.getTooltipContent(e,t,i,n);this.cachedTooltipContent={series:e,datumIndex:t,content:r},s=r}}else this.cachedTooltipContent=void 0;return s}};function nke(e,t){return e.type!==t}var MY=30,ske=class{constructor(e){this.seriesRoot=e,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(e){this.expectedSeriesCount=e}getGroupIndex(e){const{internalId:t,seriesGrouping:i}=e;return i?.groupIndex??t}getGroupType(e,t){return t?"top":e.type}requestGroup(e){const{internalId:t,contentGroup:i}=e,n=e.bringToFront(),s=this.getGroupType(e,n),o=this.getGroupIndex(e),r=this.series.get(t);if(r!=null)throw new Error(`AG Charts - series already has an allocated layer: ${JSON.stringify(r)}`);this.series.size===0&&(this.mode=this.expectedSeriesCount>=MY?"aggressive-grouping":"normal");let a=this.groups.get(s);a==null&&(a=new Map,this.groups.set(s,a));const l=this.lookupIdx(o);let c=a.get(l);return c==null&&(c={type:s,id:l,seriesIds:[],group:this.seriesRoot.appendChild(new Mt({name:`${e.contentGroup.name??s}-managed-layer`,zIndex:e.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},a.set(l,c)),this.series.set(t,{layerState:c,seriesConfig:e,bringToFront:n}),c.seriesIds.push(t),c.group.appendChild(i),c.group}changeGroup(e){const{internalId:t,contentGroup:i}=e,n=e.bringToFront(),s=this.getGroupType(e,n),o=this.series.get(t),r=o?this.getGroupType(o.seriesConfig,o.bringToFront):void 0,a=this.getGroupIndex(e),l=this.lookupIdx(a),c=this.groups.get(s)?.get(l);if(!(r===s&&c?.seriesIds.includes(t)===!0))return this.series.has(t)&&this._releaseGroup({internalId:t,contentGroup:i,type:r}),this.requestGroup(e)}releaseGroup(e){const{internalId:t,contentGroup:i}=e,n=this.getGroupType(e,e.bringToFront());this._releaseGroup({internalId:t,contentGroup:i,type:n})}_releaseGroup(e){const{internalId:t,contentGroup:i,type:n}=e;if(!this.series.has(t))throw new Error(`AG Charts - series doesn't have an allocated layer: ${t}`);const s=this.series.get(t)?.layerState;s&&(s.seriesIds=s.seriesIds.filter(o=>o!==t),i.remove()),s?.seriesIds.length===0?(s.group.remove(),this.groups.get(s.type)?.delete(s.id),this.groups.get(n)?.delete(t)):s!=null&&s.seriesIds.length>0&&(s.group.zIndex=this.getLowestSeriesZIndex(s.seriesIds)),this.series.delete(t)}updateLayerCompositing(){for(const e of this.groups.values())for(const t of e.values()){const{group:i,seriesIds:n}=t;let s;n.length===0?s=!1:n.length>1?s=!0:s=this.series.get(n[0])?.seriesConfig.renderToOffscreenCanvas()===!0,i.renderToOffscreenCanvas=s,i.zIndex=this.getLowestSeriesZIndex(n)}}lookupIdx(e){return this.mode==="normal"?e:typeof e=="string"&&(e=Number(e.split("-").at(-1)),!Number.isFinite(e))?0:Math.floor(Je(0,e/this.expectedSeriesCount,1)*MY)}destroy(){for(const e of this.groups.values())for(const t of e.values())t.group.remove();this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(e){let t;for(const i of e){const s=this.series.get(i)?.seriesConfig.contentGroup.zIndex??1;if(t==null||s==null){t=s;continue}t=QJ(t,s)<=0?t:s}return t??1}},mie=class extends pt{constructor(){super(...arguments),this.dragAction="drag"}};E([F],mie.prototype,"dragAction",2);var oke=class{constructor(e,t,i,n,s,o){this.chart=e,this.eventsHub=t,this.dataService=i,this.updateService=n,this.zoomManager=s,this.animationManager=o,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.cleanup=new _i,this.cleanup.register(this.eventsHub.on("data:source-change",()=>this.onDataSourceChange()),this.eventsHub.on("data:load",()=>this.onDataLoad()),this.eventsHub.on("data:error",()=>this.onDataError()),this.updateService.addListener("update-complete",r=>this.onUpdateComplete(r)),this.eventsHub.on("zoom:change",()=>this.onZoomChange()))}destroy(){this.cleanup.flush()}onDataLoad(){this.animationManager.skip(),this.updateService.update(1)}onDataError(){this.updateService.update(4)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(e){!e.apiUpdate&&!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow(e)}onZoomChange(){this.dirtyZoom=!0}updateWindow(e){if(!this.dataService.isLazy())return;const t=this.getValidAxis();let i,n=!0;if(t){const s=this.zoomManager.getAxisZoom(t.id);(s.min!==0||s.max!==1)&&(i=this.getAxisWindow(t,s)),n=this.shouldRefresh(e,t,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,n&&this.dataService.load({windowStart:i?.min,windowEnd:i?.max})}getValidAxis(){return this.chart.axes.find(e=>e.type==="time")}shouldRefresh(e,t,i){if(e.apiUpdate||this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const n=this.lastAxisZooms.get(t.id);return n&&i.min===n.min&&i.max===n.max?!1:(this.lastAxisZooms.set(t.id,i),!0)}getAxisWindow(e,t){const{domain:i}=e.scale;if(!t||i.length===0||Number.isNaN(Number(i[0])))return;const n=Number(i[1])-Number(i[0]),s=new Date(Number(i[0])+n*t.min),o=new Date(Number(i[0])+n*t.max);return{min:s,max:o}}},rke=/^((?!chrome|android).)*safari/i,ake=/Version\/(\d+(\.\d+)?)/,lke=/Chrome/,cke=/Chrome\/(\d+)/,uke=/Edg/,dke=/OPR/;function hke(){const{userAgent:e}=Qt("navigator");if(rke.test(e)){const t=ake.exec(e);if(t==null)return!1;const i=Number.parseFloat(t[1]),n=Math.floor(i)>16;return n||fe.warnOnce(`Unsupported Safari version: ${i}; ${e}`),!n}else if(lke.test(e)&&!uke.test(e)&&!dke.test(e)){const t=cke.exec(e);if(t==null)return!1;const i=Number.parseInt(t[1],10),n=i>126;return n||fe.warnOnce(`Unsupported Chrome version: ${i}; ${e}`),!n}return!1}var pke=new Set(["map-shape-background","map-line-background"]),gke=class{constructor(e,t,i,n,s,o,r){this.chartLike=e,this.overlays=t,this.eventsHub=i,this.dataService=n,this.localeManager=s,this.animationManager=o,this.domManager=r,this.cleanup=new _i,this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(p_),this.cleanup.register(this.eventsHub.on("layout:complete",a=>this.onLayoutComplete(a)))}destroy(){this.cleanup.flush(),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:e}}){const t=this.dataService.isLoading(),i=this.chartLike.series.some(c=>c.hasData),n=this.chartLike.series.some(c=>c.visible&&!pke.has(c.type));this.overlays.darkTheme?this.overlayElem.classList.add(vY):this.overlayElem.classList.remove(vY),this.overlayElem.style.left=`${e.x}px`,this.overlayElem.style.top=`${e.y}px`,this.overlayElem.style.width=`${e.width}px`,this.overlayElem.style.height=`${e.height}px`;const s=t,o=!t&&!i,r=i&&!n,a=this.overlays.unsupportedBrowser.enabled&&hke();s?this.showOverlay(this.overlays.loading,e):this.hideOverlay(this.overlays.loading),o?this.showOverlay(this.overlays.noData,e):this.hideOverlay(this.overlays.noData),r?this.showOverlay(this.overlays.noVisibleSeries,e):this.hideOverlay(this.overlays.noVisibleSeries),a?this.showOverlay(this.overlays.unsupportedBrowser,e):this.hideOverlay(this.overlays.unsupportedBrowser);const l=s||o||r||a;Pt(this.overlayElem,"aria-hidden",!l)}showOverlay(e,t){if(!e.enabled)return;const i=e.getElement(this.chartLike,this.animationManager,this.localeManager,t);this.overlayElem.appendChild(i)}hideOverlay(e){e.removeElement(()=>{this.overlayElem.innerText=""},this.animationManager)}},Ja=Ct.create(!0,"opts"),bn=class yie extends yee{constructor(t,i){var n;super(),this.id=To(this),this.seriesRoot=new So({name:`${this.id}-series-root`,zIndex:7}),this.annotationRoot=new So({name:`${this.id}-annotation-root`,zIndex:11}),this.titleGroup=new Mt({name:"titles",zIndex:15}),this.debug=Ct.create(),this.extraDebugStats={},this.data=rb.empty(),this._firstAutoSize=!0,this._autoSizeNotify=new GB,this.chartCaptions=new IE,this.padding=new Zm(20),this.keyboard=new sV,this.touch=new mie,this.mode="standalone",this.styleNonce=void 0,this.formatter=void 0,this.suppressFieldDotNotation=!1,this.loadGoogleFonts=!1,this.destroyed=!1,this.cleanup=new _i,this.chartAnimationPhase="initial",this.modulesManager=new NAe,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this.syncStatus="init",this.fireEventWrapper=u=>super.fireEvent(u),this.apiUpdate=!1,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new GB,this.performUpdateType=8,this.runningUpdateType=8,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new A0e,this.clearCallbackCacheOnUpdate=!1,this.updateRequestors={},this.performUpdateTrigger=I0e(({count:u})=>{this.destroyed||this.updateMutex.acquire(async()=>{try{await this.performUpdate(u)}catch(d){fe.error("update error",d,d.stack)}}).catch(d=>fe.errorOnce(d))}),this._performUpdateSplits={},this._previousSplit=0,this.axes=[],this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=u=>{this.fireEvent(u)},this.onSeriesNodeDoubleClick=u=>{this.fireEvent(u)},this.onSeriesVisibilityChange=u=>{this.fireEvent(u)},this.seriesGroupingChanged=u=>{if(!(u instanceof qI))return;const{series:d,seriesGrouping:p}=u;if(d.contentGroup.isRoot())return;const f=this.seriesLayerManager.changeGroup({internalId:d.internalId,type:d.type,contentGroup:d.contentGroup,bringToFront:()=>d.bringToFront(),renderToOffscreenCanvas:()=>d.renderToOffscreenCanvas(),seriesGrouping:p});f!=null&&d.attachSeries(f,this.seriesRoot,this.annotationRoot)},this.chartOptions=t;const s=i?.scene,o=i?.container??t.processedOptions.container??void 0,r=i?.styleContainer??t.specialOverrides.styleContainer;s&&(this._firstAutoSize=!1,this._lastAutoSize=[s.width,s.height,s.pixelRatio]);const a=new Mt({name:"root"});a.visible=!1,a.append(this.seriesRoot),a.append(this.annotationRoot),a.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new Hl,this.seriesLayerManager=new ske(this.seriesRoot),this.mode=t.userOptions.mode??this.mode,this.styleNonce=t.processedOptions.styleNonce;const l=this.ctx=new CMe(this,{chartType:this.getChartType(),scene:s,root:a,container:o,styleContainer:r,domMode:t.optionMetadata.domMode,withDragInterpretation:t.optionMetadata.withDragInterpretation??!0,syncManager:new YMe(this),fireEvent:u=>this.fireEvent(u),updateCallback:(u,d)=>this.update(u,d),updateMutex:this.updateMutex});this.cleanup.register(l.eventsHub.on("dom:resize",()=>this.parentResize(l.domManager.containerSize))),this.overlays=new ES,(n=this.overlays.loading).renderer??(n.renderer=()=>OAe(this.overlays.loading.getText(l.localeManager),l.animationManager.defaultDuration)),this.processors=[new oke(this,l.eventsHub,l.dataService,l.updateService,l.zoomManager,l.animationManager),new gke(this,this.overlays,l.eventsHub,l.dataService,l.localeManager,l.animationManager,l.domManager)],this.highlight=new eV,this.container=o;const c=this.getModuleContext();l.domManager.setDataBoolean("animating",!1),l.domManager.setDataNumber("animationTimeMs",0),this.seriesAreaManager=new ike(this.initSeriesAreaDependencies()),this.cleanup.register(l.layoutManager.registerElement(0,u=>{u.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(u)}),l.eventsHub.on("layout:complete",u=>this.chartCaptions.positionAbsoluteCaptions(u)),l.eventsHub.on("data:load",u=>{this.data=new rb(u.data)}),this.title.registerInteraction(c,"beforebegin"),this.subtitle.registerInteraction(c,"beforebegin"),this.footnote.registerInteraction(c,"afterend"),Hu.addWindowEvent("page-left",()=>this.destroy()),l.animationManager.addListener("animation-frame",()=>{this.update(7),l.domManager.setDataNumber("animationTimeMs",l.animationManager.getCumulativeAnimationTime())}),l.animationManager.addListener("animation-start",()=>l.domManager.setDataBoolean("animating",!0)),l.animationManager.addListener("animation-stop",()=>{l.domManager.setDataBoolean("animating",!1),l.domManager.setDataNumber("animationTimeMs",l.animationManager.getCumulativeAnimationTime())}),l.eventsHub.on("zoom:change",()=>{for(const d of this.series)d.animationState?.transition("updateData");const u=this.chartAnimationPhase!=="initial";this.update(4,{forceNodeDataRefresh:!0,skipAnimations:u})})),this.parentResize(l.domManager.containerSize)}static getInstance(t){return yie.chartsInstances.get(t)}get canvasElement(){return this.ctx.scene.canvas.element}download(t,i){this.ctx.scene.download(t,i)}getCanvasDataURL(t){return this.ctx.scene.getDataURL(t)}toSVG(){return this.ctx.scene.toSVG()}get seriesAreaBoundingBox(){return this.seriesAreaManager.bbox}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}getChartOptions(){return this.queuedChartOptions.at(-1)??this.chartOptions}overrideFocusVisible(t){this.seriesAreaManager.focusIndicator?.overrideFocusVisible(t)}fireEvent(t){mc(this,this.fireEventWrapper,t)}initSeriesAreaDependencies(){const{ctx:t,tooltip:i,highlight:n,overlays:s,seriesRoot:o,mode:r}=this,a=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,getTooltipContent:(d,p,f,m)=>this.getTooltipContent(d,p,f,m),chartType:a,ctx:t,tooltip:i,highlight:n,overlays:s,seriesRoot:o,mode:r}}getModuleContext(){return this.ctx}getTooltipContent(t,i,n,s){const r=s==="aria-label"||t.properties.tooltip.enabled!==!1?t.getTooltipContent(i,n):void 0,a=r==null?[]:[r];if(this.tooltip.mode!=="shared"||this.series.length===1)return a;const l=t.getCategoryValue(i);return l==null?a:this.series.flatMap(c=>{if(c===t)return a;if(!c.isEnabled()||c.properties.tooltip.enabled===!1)return[];const u=c.datumIndexForCategoryValue(l),d=u==null?void 0:c.getTooltipContent(u,void 0);return d==null?[]:[d]})}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(t=>t.enabled&&t.text).map(t=>t.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){this.chartAnimationPhase="initial";for(const t of this.series)t.resetAnimation(this.chartAnimationPhase);for(const t of this.axes)t.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clearCanvas()}destroy(t){if(this.destroyed)return;const i=t?.keepTransferableResources;let n;this.performUpdateType=8,this.cleanup.flush();for(const s of this.processors)s.destroy();this.overlays.destroy(),this.modulesManager.destroy(),i?(this.ctx.scene.strip(),n={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy();for(const s of this.axes)s.destroy();return this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),n}requestFactoryUpdate(t){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(async()=>{if(!this.destroyed)try{await t(this)}finally{this.destroyed||this._pendingFactoryUpdatesCount--}}).catch(i=>fe.errorOnce(i)))}clearCallbackCache(){this.ctx.callbackCache.invalidateCache();for(const t of this.series)t.resetDatumCallbackCache()}update(t=0,i){if(this.destroyed)return;const{forceNodeDataRefresh:n=!1,skipAnimations:s,seriesToUpdate:o=this.series,newAnimationBatch:r,apiUpdate:a=!1,clearCallbackCache:l=!1}=i??{};if(this.apiUpdate=a,this.ctx.widgets.seriesWidget.setDragTouchEnabled(this.touch.dragAction!=="none"),n)for(const c of this.series)c.markNodeDataDirty();for(const c of o)this.seriesToUpdate.add(c);if(s&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),r&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),(t===0||l)&&(this.clearCallbackCacheOnUpdate=!0),this.debug.check()){let c=new Error("Stack trace for update tracking").stack??"<unknown>";c=c.replaceAll(/\([^)]*/g,""),this.updateRequestors[c]=t}t<this.performUpdateType&&(this.performUpdateType=t,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(i?.backOffMs))}updateSplits(t){const i=this._performUpdateSplits;i[t]??(i[t]=0),i[t]+=performance.now()-this._previousSplit,this._previousSplit=performance.now()}async performUpdate(t){const{performUpdateType:i,extraDebugStats:n,_performUpdateSplits:s,ctx:o}=this,r=[...this.seriesToUpdate];switch(this.clearCallbackCacheOnUpdate&&(this.clearCallbackCacheOnUpdate=!1,this.clearCallbackCache()),this.performUpdateType=8,this.seriesToUpdate.clear(),this.runningUpdateType=i,this.updateShortcutCount===0&&i<7&&(o.animationManager.startBatch(this._performUpdateSkipAnimations),o.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.ctx.scene.updateDebugFlags(),this.debug("Chart.performUpdate() - start",mw[i]),this._previousSplit=performance.now(),s.start??(s.start=this._previousSplit),i){case 0:if(this.checkUpdateShortcut(0))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:if(this.checkUpdateShortcut(1))break;await this.updateData(),this.updateSplits("");case 2:if(this.checkUpdateShortcut(2))break;await this.processData(),this.seriesAreaManager.dataChanged(),this.updateSplits("");case 3:if(this.checkUpdateShortcut(3))break;await this.processDomains(),this.updateSplits("");case 4:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(4))break;await this.processLayout(),this.updateSplits("");case 5:{if(this.checkUpdateShortcut(5))break;this.seriesRoot.renderToOffscreenCanvas=this.highlight.drawingMode==="cutout",await this.updateSeries(r),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing(),this.updateSplits("")}case 6:if(this.checkUpdateShortcut(6))break;o.updateService.dispatchPreSceneRender(),this.updateSplits("");case 7:if(this.checkUpdateShortcut(7))break;o.animationManager.endBatch(),n.updateShortcutCount=this.updateShortcutCount,o.scene.render({debugSplitTimes:s,extraDebugStats:n,seriesRect:this.seriesRect}),this.extraDebugStats={};for(const l of Object.keys(s))delete s[l];this.ctx.domManager.incrementDataCounter("sceneRenders"),this.ctx.domManager.postRenderUpdate();case 8:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,o.animationManager.endBatch()}this.destroyed||(o.updateService.dispatchUpdateComplete(this.apiUpdate),this.apiUpdate=!1,this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=8,this.syncStatus="ready"),this._performUpdateNotify.notify();const a=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((a-s.start)*100)/100,count:t,performUpdateType:mw[i]})}updateThemeClassName(){const t="ag-charts-theme-",i=[`${t}default`,`${t}default-dark`];let n=i[0],s=!1,{theme:o}=this.chartOptions.processedOptions;for(;typeof o!="string"&&o!=null;)o=o.baseTheme;typeof o=="string"&&(n=o.replace("ag-",t),s=o.includes("-dark")),i.includes(n)||(n=s?i[1]:i[0]),this.ctx.domManager.setThemeClass(n)}updateDOM(){this.updateThemeClassName();const{enabled:t,tabIndex:i}=this.keyboard;this.ctx.domManager.setTabGuardIndex(t?i??0:-1),this.ctx.domManager.setThemeParameters(this.chartOptions.themeParameters)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(t){return this.destroyed?!0:this.updateShortcutCount>3?(fe.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t?(this.updateShortcutCount++,!0):!1}async checkFirstAutoSize(){this.width!=null&&this.height!=null||this._lastAutoSize||await this._autoSizeNotify.await(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}onAxisChange(t,i){i==null&&t.length===0||this.ctx.axisManager.updateAxes(i??[],t)}onSeriesChange(t,i){const n=i?.filter(s=>!t.includes(s))??[];this.destroySeries(n),this.seriesLayerManager?.setSeriesCount(t.length);for(const s of t){if(i?.includes(s))continue;const o=this.seriesLayerManager.requestGroup(s);s.attachSeries(o,this.seriesRoot,this.annotationRoot),s.chart={},Object.defineProperty(s.chart,"mode",{get:()=>this.mode}),Object.defineProperty(s.chart,"isMiniChart",{get:()=>!1}),Object.defineProperty(s.chart,"seriesRect",{get:()=>this.seriesRect}),s.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(s),s.addChartEventListeners()}this.seriesAreaManager?.seriesChanged(t)}destroySeries(t){if(t)for(const i of t)i.removeEventListener("seriesNodeClick",this.onSeriesNodeClick),i.removeEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),i.removeEventListener("groupingChanged",this.seriesGroupingChanged),i.destroy(),this.seriesLayerManager.releaseGroup(i),i.detachSeries(void 0,this.seriesRoot,this.annotationRoot),i.chart=void 0}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("seriesNodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&t.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),t.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(const t of this.axes)t.boundSeries=this.series.filter(i=>i.axes[t.direction]===t)}assignAxesToSeries(){const t=DG(this.axes,i=>i.direction);for(const i of this.series)for(const n of i.directions){const s=t[n];if(!s){fe.warnOnce(`no available axis for direction [${n}]; check series and axes configuration.`);return}const o=i.getKeys(n),r=s.find(a=>!a.keys.length||o.some(l=>a.keys.includes(l)));if(!r){fe.warnOnce(`no matching axis for direction [${n}] and keys [${o}]; check series and axes configuration.`);return}i.axes[n]=r}}parentResize(t){if(t==null||this.width!=null&&this.height!=null)return;let{width:i,height:n}=t;const{pixelRatio:s}=t;if(i=Math.floor(i),n=Math.floor(n),i===0&&n===0)return;const[o=0,r=0,a=1]=this._lastAutoSize??[];o===i&&r===n&&a===s||(this._lastAutoSize=[i,n,s],this.resize("SizeMonitor",{}))}resize(t,i){const{scene:n,animationManager:s}=this.ctx,{inWidth:o,inHeight:r,inMinWidth:a,inMinHeight:l,inOverrideDevicePixelRatio:c}=i;this.ctx.domManager.setSizeOptions(a??this.minWidth,l??this.minHeight,o??this.width,r??this.height);const u=o??this.width??this._lastAutoSize?.[0],d=r??this.height??this._lastAutoSize?.[1],p=c??this.overrideDevicePixelRatio??this._lastAutoSize?.[2];if(this.debug(`Chart.resize() from ${t}`,{width:u,height:d,pixelRatio:p,stack:new Error("Stack trace for resize tracking").stack}),!(u==null||d==null||!Kt(u)||!Kt(d))&&n.resize(u,d,p)){s.reset();let f=!0;(this.width==null||this.height==null)&&this._firstAutoSize&&(f=!1,this._firstAutoSize=!1),this.update(4,{forceNodeDataRefresh:!0,skipAnimations:f}),this._autoSizeNotify.notify()}}async updateData(){for(const i of this.series)i.setChartData(this.data);const t=this.modulesManager.mapModules(i=>i.updateData?.(this.data));await Promise.all(t.filter(i=>i!=null&&typeof i=="object"))}async processData(){this.series.some(s=>s.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=new fte(this.mode,this.suppressFieldDotNotation),i=this.series.map(s=>s.processData(t)),n=this.modulesManager.mapModules(s=>s.processData?.(t));this._cachedData=t.execute(this._cachedData),this.updateSplits(""),await Promise.all([...i,...n.filter(s=>s!=null)]),this.updateLegends()}async processDomains(){for(const t of this.axes)t.processData();for(const t of this.series)t.updatedDomains()}updateLegends(t){for(const{legend:i,legendType:n}of this.modulesManager.legends())n==="category"?this.setCategoryLegendData(t):this.setLegendData(n,i)}setCategoryLegendData(t){const{ctx:{legendManager:i,stateManager:n}}=this;if(t)for(const o of this.series){const r=t.find(a=>a.seriesId===o.id);o.onLegendInitialState("category",r)}const s=this.series.flatMap(o=>{const r=o.getLegendData("category");return i.updateData(o.id,r),r});if(t){n.setStateAndRestore(i,t);return}if(this.mode!=="integrated"){const o={},r=new Map(this.series.map(a=>[a.id,a.type]));for(const{seriesId:a,symbol:{marker:l},label:c}of s.filter(u=>!u.hideInLegend)){if(l.fill==null)continue;const u=r.get(a),d=o[u]??(o[u]=new Map);d.has(c.text)?d.get(c.text)!==l.fill&&fe.warnOnce(`legend item '${Gt(c.text)}' has multiple fill colors, this may cause unexpected behaviour.`):d.set(c.text,l.fill)}}i.update()}setLegendData(t,i){i.data=this.series.filter(n=>n.properties.showInLegend).flatMap(n=>n.getLegendData(t))}async processLayout(){const t=this.animationRect,{width:i,height:n}=this.ctx.scene,s=this.ctx.layoutManager.createContext(i,n);await this.performLayout(s),t&&!this.animationRect?.equals(t)&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(t){const{seriesRect:i}=this;await Promise.all(t.map(n=>n.update({seriesRect:i})).filter(n=>n!=null)),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter(n=>n.visible&&n.usesPlacedLabels),this.padding,this.seriesRect)}async waitForUpdate(t,i){const n=Qt("agChartsDebugTimeout");n==null?(t??(t=1e4),i??(i=!1)):(t=n,i??(i=!0));const s=performance.now();for(;(this._pendingFactoryUpdatesCount>0||this.performUpdateType!==8||this.runningUpdateType!==8||this.ctx.scene.waitingForUpdate()||this.data.hasPendingTransactions())&&!this.destroyed;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),(this.performUpdateType!==8||this.runningUpdateType!==8||this.data.hasPendingTransactions())&&await this._performUpdateNotify.await(),performance.now()-s>t){const o=`Chart.waitForUpdate() timeout of ${t} reached - first chart update taking too long.`;if(i)throw new Error(o);fe.warnOnce(o)}fee()&&await CK(),this.ctx.scene.waitingForUpdate()&&await CK(50)}}filterMiniChartSeries(t){return t?.filter(i=>i.showInMiniChart!==!1)}applyOptions(t){const n=this.firstApply?t.processedOptions:t.diffOptions(this.chartOptions);if(n==null||Object.keys(n).length===0){Ja("Chart.applyOptions() - no delta, forcing re-layout",n),this.update(4,{apiUpdate:!0,newAnimationBatch:!0});return}const s=this.firstApply?{}:this.chartOptions.processedOptions,o=t.processedOptions;Ja("Chart.applyOptions() - applying delta",n);const r=this.applyModules(o),a=["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer","formatter"];n.listeners&&this.registerListeners(this,n.listeners),gw(this,n,{skip:a});let l=!1,c="no-op";n.series!=null&&(c=this.applySeries(this,n.series,s?.series),l=!0),c==="replaced"&&this.resetAnimations(),this.applyAxes(this,o,s,c,[])&&(l=!0),n.data&&(this.data=new rb(n.data)),n.legend?.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,n.legend.listeners),n.locale?.localeText&&(this.modulesManager.getModule("locale").localeText=n.locale?.localeText),this.chartOptions=t;const u=this.modulesManager.getModule("navigator"),d=this.modulesManager.getModule("zoom");!u?.enabled&&!d?.enabled&&this.ctx.zoomManager.updateZoom("chart");const p=u?.miniChart,f=o.navigator?.miniChart?.series??o.series;p?.enabled===!0&&f!=null?this.applyMiniChartOptions(p,f,o,s):p?.enabled===!1&&(p.series=[],p.axes=[]),this.ctx.annotationManager.setAnnotationStyles(t.annotationThemes),l||(l=this.shouldForceNodeDataRefresh(n,c));const v=l||r?0:4;if(this.maybeResetAnimations(c),this.shouldClearLegendData(o,s,c)&&this.ctx.legendManager.clearData(),this.applyInitialState(o),this.ctx.formatManager.setFormatter(o.formatter),Ja("Chart.applyOptions() - update type",mw[v],{seriesStatus:c,forceNodeDataRefresh:l}),t.optionsProcessingTime!==void 0){this._performUpdateSplits[""]=t.optionsProcessingTime;const b=performance.now()-t.optionsProcessingTime;this._performUpdateSplits.start=b}this.update(v,{apiUpdate:!0,forceNodeDataRefresh:l,newAnimationBatch:!0,clearCallbackCache:!0}),this.firstApply=!1}applyInitialState(t){const{annotationManager:i,chartTypeOriginator:n,historyManager:s,stateManager:o,zoomManager:r}=this.ctx,{initialState:a}=t;if("annotations"in t&&t.annotations?.enabled&&a?.annotations!=null){const l=a.annotations.map(c=>{const u=i.getAnnotationTypeStyles(c.type);return oi(c,u)});o.setState(i,l)}a?.chartType!=null&&o.setState(n,a.chartType),(t.navigator?.enabled||t.zoom?.enabled)&&a?.zoom!=null&&o.setState(r,a.zoom),a?.legend!=null&&this.updateLegends(a.legend),a!=null&&s.clear()}maybeResetAnimations(t){if(this.mode==="standalone")switch(t){case"series-grouping-change":case"replaced":this.resetAnimations();break}}shouldForceNodeDataRefresh(t,i){const n=!!t.data||i==="data-change"||i==="replaced",s=iV.getKeys(),o=Object.values(s).some(a=>t[a]!=null),r=t.title!=null&&t.subtitle!=null||t.formatter!=null;return n||o||r}shouldClearLegendData(t,i,n){const s=n==="replaced"||n==="series-grouping-change"||n==="updated"&&(t.series?.length!==i.series?.length||!t.series?.every((r,a)=>r.type===i.series?.[a].type)),o=i.legend!=null&&t.legend==null;return s||o}applyMiniChartOptions(t,i,n,s){const o=s?.navigator?.miniChart?.series??s?.series,r=this.applySeries(t,this.filterMiniChartSeries(i),this.filterMiniChartSeries(o));this.applyAxes(t,n,s,r,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const a=t.series;for(const u of a)u.properties.id=void 0;const l=t.axes,c=l.find(u=>u.direction==="x");for(const u of l)u.nice=!1,u.gridLine.enabled=!1,u.label.enabled=u===c,u.tick.enabled=!1,u.interactionEnabled=!1;if(c!=null){const u=n.navigator?.miniChart,d=u?.label,p=u?.label?.interval;if(c.line.enabled=!1,c.label.set(_e(d,["interval","autoRotate","autoRotateAngle","itemStyler","minSpacing","rotation"])),c.type==="grouped-category"){c.label.enabled=!1,c.label.rotation=0;const{depthOptions:f}=c;if(f.length===0)f.set([{label:{enabled:!0}}]);else for(let m=1;m<f.length;m++)f[m].label.enabled=!1}else(c.type==="time"||c.type==="unit-time"||c.type==="ordinal-time")&&(c.parentLevel.enabled=!1);c.interval.step=p?.step,c.interval.values=p?.values,c.interval.minSpacing=p?.minSpacing,c.interval.maxSpacing=p?.maxSpacing}}applyModules(t){const{type:i}=this.constructor;let n=!1;for(const s of Du.byType("root","legend")){const r=t[s.optionsKey]!=null&&s.chartTypes.includes(i);r!==this.modulesManager.isEnabled(s)&&(r?(this.modulesManager.addModule(s,a=>a.moduleFactory(this.getModuleContext())),s.type==="legend"&&this.modulesManager.getModule(s)?.attachLegend(this.ctx.scene),this[s.optionsKey]=this.modulesManager.getModule(s)):(this.modulesManager.removeModule(s),delete this[s.optionsKey]),n=!0)}return n}initSeriesDeclarationOrder(t){for(let i=0;i<t.length;i++)t[i].setSeriesIndex(i)}applySeries(t,i,n){if(!i)return"no-change";const s=LAe(t.series,i,n);if(s.status==="no-overlap"){Ja(`Chart.applySeries() - creating new series instances, status: ${s.status}`,s);const u=i.map(d=>this.createSeries(d));return this.initSeriesDeclarationOrder(u),t.series=u,"replaced"}Ja("Chart.applySeries() - matchResult",s);const o=[];let r=!1,a=!1,l=!1;const c=s.changes.toSorted((u,d)=>u.targetIdx-d.targetIdx);for(const u of c)switch(a||(a=u.status==="series-grouping"),r||(r=u.diff?.data!=null),l||(l=u.status!=="no-op"),u.status){case"add":{const d=this.createSeries(u.opts);o.push(d),Ja("Chart.applySeries() - created new series",d);break}case"remove":Ja(`Chart.applySeries() - removing series at previous idx ${u.idx}`,u.series);break;case"no-op":o.push(u.series),Ja(`Chart.applySeries() - no change to series at previous idx ${u.idx}`,u.series);break;case"series-grouping":case"update":default:{const{series:d,diff:p,idx:f}=u;Ja(`Chart.applySeries() - applying series diff previous idx ${f}`,p,d),this.applySeriesValues(d,p),d.markNodeDataDirty(),o.push(d)}}return this.initSeriesDeclarationOrder(o),Ja("Chart.applySeries() - final series instances",o),t.series=o,a?"series-grouping-change":r?"data-change":l?"updated":"no-op"}applyAxes(t,i,n,s,o=[]){if(!("axes"in i)||!i.axes)return!1;o=["axes[].type",...o];const r=i.axes;if(!(s==="replaced")&&t.axes.length===r.length&&t.axes.every((c,u)=>c.type===r[u].type)&&tie(n)){for(const[c,u]of t.axes.entries()){const d=n.axes?.[c]??{},p=Nu(d,r[c]);Ja(`Chart.applyAxes() - applying axis diff idx ${c}`,p);const f=`axes[${c}]`;gw(u,p,{path:f,skip:o})}return!0}return Ja(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${s}`),t.axes=this.createAxis(r,o),!0}createSeries(t){const i=vl.create(t.type,this.getModuleContext());return this.applySeriesOptionModules(i,t),this.applySeriesValues(i,t),i}applySeriesOptionModules(t,i){const n=t.createModuleContext(),s=t.getModuleMap();for(const o of Du.byType("series-option"))o.optionsKey in i&&o.seriesTypes.includes(t.type)&&s.addModule(o,r=>r.moduleFactory(n))}applySeriesValues(t,i){const n=t.getModuleMap(),{type:s,data:o,listeners:r,seriesGrouping:a,showInMiniChart:l,...c}=i;for(const u of sD)if(u.type==="series-option"&&u.optionsKey in c){const d=n.getModule(u.optionsKey);if(d){const p=c[u.optionsKey];delete c[u.optionsKey],d.properties.set(p)}}c.visible!=null&&(t.visible=c.visible),t.properties.set(c),"data"in i&&t.setOptionsData(o==null?void 0:rb.wrap(o)),r&&this.registerListeners(t,r),"seriesGrouping"in i&&(a==null?t.seriesGrouping=void 0:t.seriesGrouping={...t.seriesGrouping,...a})}createAxis(t,i){const n=[],s=this.getModuleContext();for(let o=0;o<t.length;o++){const r=t[o],a=fm.create(r.type,s);this.applyAxisModules(a,r),gw(a,r,{path:`axes[${o}]`,skip:i}),n.push(a)}return RAe(n),n}applyAxisModules(t,i){const n=t.createModuleContext(),s=t.getModuleMap();for(const o of Du.byType("axis-option")){const r=i[o.optionsKey]!=null;r!==s.isEnabled(o)&&(r?(s.addModule(o,a=>a.moduleFactory(n)),t[o.optionsKey]=s.getModule(o)):(s.removeModule(o),delete t[o.optionsKey]))}}registerListeners(t,i){t.clearEventListeners();for(const[n,s]of Ji(i))t.addEventListener(n,s)}async applyTransaction(t){await this.updateMutex.acquire(()=>{this.data.addTransaction(t),this.update(1,{apiUpdate:!0,skipAnimations:!0})}),await this.waitForUpdate()}};bn.chartsInstances=new WeakMap;E([Io({newValue(e){this.destroyed||(this.ctx.domManager.setContainer(e),bn.chartsInstances.set(e,this))},oldValue(e){bn.chartsInstances.delete(e)}})],bn.prototype,"container",2);E([Io({newValue(e){this.resize("width option",{inWidth:e})}})],bn.prototype,"width",2);E([Io({newValue(e){this.resize("height option",{inHeight:e})}})],bn.prototype,"height",2);E([Io({newValue(e){this.resize("minWidth option",{inMinWidth:e})}})],bn.prototype,"minWidth",2);E([Io({newValue(e){this.resize("minHeight option",{inMinHeight:e})}})],bn.prototype,"minHeight",2);E([Io({newValue(e){this.resize("overrideDevicePixelRatio option",{inOverrideDevicePixelRatio:e})}})],bn.prototype,"overrideDevicePixelRatio",2);E([F],bn.prototype,"padding",2);E([F],bn.prototype,"keyboard",2);E([F],bn.prototype,"touch",2);E([F],bn.prototype,"mode",2);E([F],bn.prototype,"styleNonce",2);E([tr("chartCaptions.title")],bn.prototype,"title",2);E([tr("chartCaptions.subtitle")],bn.prototype,"subtitle",2);E([tr("chartCaptions.footnote")],bn.prototype,"footnote",2);E([F],bn.prototype,"formatter",2);E([F],bn.prototype,"suppressFieldDotNotation",2);E([F],bn.prototype,"loadGoogleFonts",2);E([Io({changeValue(e,t){this.onAxisChange(e,t)}})],bn.prototype,"axes",2);E([Io({changeValue(e,t){this.onSeriesChange(e,t)}})],bn.prototype,"series",2);var ZE=bn;function AY(e,t){let i=[];const n=e?.series?.[0]?.type,s=n==="linear-gauge"||n==="radial-gauge",o=n?Rs.get(n):"unknown";for(const r of sD)if(!(o!=="unknown"&&!r.chartTypes.includes(o))){if(r.type==="root"||r.type==="legend"){const a=e[r.optionsKey];if(a==null)continue;r.optionsInnerKey?a[r.optionsInnerKey]&&(i.push(`${r.optionsKey}.${r.optionsInnerKey}`),delete a[r.optionsInnerKey]):(i.push(r.optionsKey),delete e[r.optionsKey])}else if(r.type==="axis"){if(!("axes"in e)||!ft(e.axes)||!e.axes?.some(a=>a.type===r.identifier))continue;i.push(`axis[type=${r.identifier}]`),e.axes=e.axes.filter(a=>a.type!==r.identifier)}else if(r.type==="axis-option"){if(!("axes"in e)||!ft(e.axes)||!e.axes?.some(a=>a[r.optionsKey]))continue;i.push(`axis.${r.optionsKey}`);for(const a of e.axes)a[r.optionsKey]&&delete a[r.optionsKey]}else if(r.type==="series"){if(r.community||!ft(e.series)||!e.series?.some(a=>a.type===r.identifier))continue;i.push(`series[type=${r.identifier}]`),e.series=e.series.filter(a=>a.type!==r.identifier)}else if(r.type==="series-option"){if(!ft(e.series)||!e.series?.some(a=>a[r.optionsKey]))continue;i.push(`series.${r.optionsKey}`);for(const a of e.series)a[r.optionsKey]&&delete a[r.optionsKey]}}if(i.length&&!t){s&&(i=["AgCharts.createGauge"]);let r="ag-charts-enterprise",a="https://www.ag-grid.com/charts/javascript/installation/";e.mode==="integrated"&&(r="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",a="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),fe.warnOnce([`unable to use these enterprise features as '${r}' has not been loaded:`,"",...i,"",`See: ${a}`].join(`
`))}}function fke(e){const t="mode"in e&&e.mode==="integrated";for(const i of Du.byType("root","legend")){const n=e[i.optionsKey],s=n!=null&&n.enabled===!1,o=!("removable"in i)||i.removable===!0||i.removable==="standalone-only"&&!t;s&&o&&delete e[i.optionsKey]}}function vie(e){return e?.up||e?.down||e?.neutral?"user-full":e?.fills||e?.strokes?"user-indexed":"inbuilt"}var $n={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Ad={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},CV={};Vu(CV,{DEFAULT_ANNOTATION_HANDLE_FILL:()=>vD,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>CD,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>xD,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>t0,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>i0,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>bD,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>SD,DEFAULT_CAPTION_ALIGNMENT:()=>Wp,DEFAULT_CAPTION_LAYOUT_STYLE:()=>Hp,DEFAULT_FIBONACCI_STROKES:()=>e0,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>ys,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>dn,DEFAULT_GRIDLINE_ENABLED:()=>sc,DEFAULT_POLAR_SERIES_STROKE:()=>nL,DEFAULT_SEPARATION_LINES_COLOUR:()=>mD,DEFAULT_SHADOW_COLOUR:()=>ty,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>sL,DEFAULT_TEXTBOX_COLOR:()=>MD,DEFAULT_TEXTBOX_FILL:()=>wD,DEFAULT_TEXTBOX_STROKE:()=>DD,DEFAULT_TEXT_ANNOTATION_COLOR:()=>yD,DEFAULT_TOOLBAR_POSITION:()=>AD,IS_DARK_THEME:()=>xb,PALETTE_ALT_DOWN_FILL:()=>MV,PALETTE_ALT_DOWN_STROKE:()=>wV,PALETTE_ALT_NEUTRAL_FILL:()=>AV,PALETTE_ALT_NEUTRAL_STROKE:()=>kV,PALETTE_ALT_UP_FILL:()=>DV,PALETTE_ALT_UP_STROKE:()=>xV,PALETTE_DOWN_FILL:()=>eL,PALETTE_DOWN_STROKE:()=>QE,PALETTE_NEUTRAL_FILL:()=>iL,PALETTE_NEUTRAL_STROKE:()=>tL,PALETTE_UP_FILL:()=>JE,PALETTE_UP_STROKE:()=>qE});var xb=Symbol("is-dark-theme"),mD=Symbol("default-separation-lines-colour"),ty=Symbol("default-shadow-colour"),Hp=Symbol("default-caption-layout-style"),Wp=Symbol("default-caption-alignment"),qE=Symbol("palette-up-stroke"),QE=Symbol("palette-down-stroke"),JE=Symbol("palette-up-fill"),eL=Symbol("palette-down-fill"),tL=Symbol("palette-neutral-stroke"),iL=Symbol("palette-neutral-fill"),xV=Symbol("palette-alt-up-stroke"),wV=Symbol("palette-alt-down-stroke"),DV=Symbol("palette-alt-up-fill"),MV=Symbol("palette-alt-down-fill"),AV=Symbol("palette-gray-fill"),kV=Symbol("palette-gray-stroke"),nL=Symbol("default-polar-series-stroke"),sL=Symbol("default-sparkline-crosshair-stroke"),dn=Symbol("default-financial-charts-annotation-stroke"),e0=Symbol("default-hierarchy-strokes"),yD=Symbol("default-text-annotation-color"),ys=Symbol("default-financial-charts-annotation-background-fill"),vD=Symbol("default-annotation-handle-fill"),bD=Symbol("default-annotation-statistics-fill"),SD=Symbol("default-annotation-statistics-stroke"),CD=Symbol("default-annotation-statistics-color"),xD=Symbol("default-annotation-statistics-divider-stroke"),t0=Symbol("default-annotation-statistics-fill"),i0=Symbol("default-annotation-statistics-stroke"),wD=Symbol("default-textbox-fill"),DD=Symbol("default-textbox-stroke"),MD=Symbol("default-textbox-color"),AD=Symbol("default-toolbar-position"),sc=Symbol("default-gridline-enabled"),bie=[{type:"number",position:{$if:[{$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},"bottom","left"]}},{type:"category",position:{$if:[{$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},"left","bottom"]}}],mke={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},{$palette:"fillFallback"},{$palette:"fill"}]},yke={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},{$palette:"fillsFallback"},{$palette:"fills"}]},oL={$if:[{$isGradient:{$palette:"fill"}},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/stroke",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},vke={$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$value:"$1"}}]},[{$palette:"fillFallback"},{$palette:"fillFallback"}],{$palette:"range2"}]},bke={type:"gradient",gradient:"linear",bounds:"item",colorStops:[{color:"black"}],rotation:0,reverse:!1,colorSpace:"rgb"},Cg={type:"gradient",gradient:"linear",bounds:"item",colorStops:{$shallow:{$map:[{color:{$value:"$1"}},{$palette:"gradient"}]}},rotation:0,reverse:!1,colorSpace:"rgb"},Ske={...Cg,colorStops:{$shallow:[{color:{$mix:[{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"black",.15]}},{color:{$mix:[{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},"white",.15]}}]}},Cke={...Cg,colorStops:{$map:[{color:{$value:"$1"}},{$path:["/0",void 0,{$palette:"gradients"}]}]}},xke=e=>({...Cg,colorStops:{$shallow:{$if:[{$or:[{$isGradient:{$palette:`${e}.fill`}},{$isPattern:{$palette:`${e}.fill`}},{$isImage:{$palette:`${e}.fill`}}]},{$path:["/colorStops",void 0,{$palette:`${e}.fill`}]},[{color:{$mix:[{$palette:`${e}.fill`},"black",.15]}},{color:{$mix:[{$palette:`${e}.fill`},"white",.15]}}]]}}}),rL={type:"gradient",gradient:"radial",bounds:"item",colorStops:{$shallow:{$map:[{color:{$value:"$1"}},{$palette:"gradient"}]}},rotation:0,reverse:!1,colorSpace:"rgb"},kD={...rL,reverse:!0},wke={...rL,bounds:"series"},Sie={...rL,bounds:"series",reverse:!0},Dke={type:"gradient",gradient:"conic",bounds:"series",colorStops:{$map:[{color:{$value:"$1"}},{$palette:"gradient"}]},rotation:0,reverse:!1,colorSpace:"rgb"},Ra={type:"pattern",pattern:"forward-slanted-lines",width:{$isUserOption:["./height",{$path:"./height"},10]},height:{$isUserOption:["./width",{$path:"./width"},10]},padding:2,fill:{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/fill",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},fillOpacity:1,stroke:oL,strokeOpacity:1,strokeWidth:{$switch:[{$path:"./pattern"},0,[["backward-slanted-lines","forward-slanted-lines","horizontal-lines","vertical-lines"],4]]},backgroundFill:"none",backgroundFillOpacity:1,rotation:0,scale:1},Mke={...Ra,stroke:{$if:[{$isGradient:{$palette:"fill"}},{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/stroke",{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$path:["/0",void 0,{$palette:"fills"}]}]},{$path:["/0",void 0,{$palette:"fills"}]}]}]},fill:{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$if:[{$isPattern:{$palette:"fill"}},{$path:["/fill",{$path:["/0",void 0,{$palette:"fillsFallback"}]},{$path:["/0",void 0,{$palette:"fills"}]}]},{$path:["/0",void 0,{$palette:"fills"}]}]}]}},Ake={type:"pattern",pattern:"forward-slanted-lines",width:8,height:8,padding:1,fill:"black",fillOpacity:1,backgroundFill:"white",backgroundFillOpacity:1,stroke:"black",strokeOpacity:1,strokeWidth:1,rotation:0,scale:1},kke={...Ra,fill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]}},Tke=e=>({...Ra,stroke:{$if:[{$isGradient:{$palette:`${e}.fill`}},{$palette:"fillFallback"},{$if:[{$isPattern:{$palette:`${e}.fill`}},{$path:["/stroke",{$palette:"fillFallback"},{$palette:`${e}.fill`}]},{$palette:`${e}.fill`}]}]}}),Sh={type:"image",backgroundFill:{$palette:"fillFallback"},backgroundFillOpacity:1,repeat:"no-repeat",fit:"contain",rotation:0},Ike={type:"image",backgroundFill:"black",backgroundFillOpacity:1,rotation:0,repeat:"no-repeat",fit:"contain",width:8,height:8};function Na(e){return YJ(e,t=>{const i=Di.fromString(t);return[Di.darken(i,.15).toString(),t,Di.lighten(i,.15).toString()]})}var TV={stroke:{$path:["../../highlightStyle/item/stroke","rgba(0, 0, 0, 0.4)"]},strokeWidth:{$path:["../../highlightStyle/item/strokeWidth",2]},strokeOpacity:{$path:["../../highlightStyle/item/strokeOpacity",void 0]},opacity:{$path:["../../highlightStyle/item/opacity",{$if:[{$eq:[{$path:["/highlight/drawingMode",void 0]},"cutout"]},.67,1]}]}},Cie={...TV,fill:{$path:["../../highlightStyle/item/fill",{$if:[{$eq:[{$path:["/highlight/drawingMode",void 0]},"cutout"]},void 0,"rgba(255,255,255, 0.33)"]}]},fillOpacity:{$path:["../../highlightStyle/item/fillOpacity",void 0]}},Ou={padding:8,cornerRadius:4,fill:{$if:[{$and:[{$eq:[{$path:"./fill/type"},"image"]},{$isUserOption:["./fill/backgroundFill",!1,!0]}]},{backgroundFill:"transparent"},void 0]},border:{enabled:{$isUserOption:["../border",!0,!1]},strokeWidth:1,stroke:{$foregroundOpacity:.08}}};function xg(e=!0){return{enabled:!0,highlightedItem:e?Cie:TV,unhighlightedItem:{strokeWidth:{$path:["../../highlightStyle/series/strokeWidth",void 0]}},highlightedSeries:{strokeWidth:{$path:["../../highlightStyle/series/strokeWidth",void 0]}},unhighlightedSeries:{opacity:{$path:["../../highlightStyle/series/dimOpacity",void 0]}}}}function xie(e=!0){return{enabled:!0,highlightedItem:e?Cie:TV,unhighlightedItem:{strokeWidth:{$path:["../../highlightStyle/series/strokeWidth",void 0]},opacity:{$path:["../../highlightStyle/series/dimOpacity",void 0]}}}}var wie={border:{enabled:!1,stroke:{$foregroundBackgroundMix:.25},strokeOpacity:1,strokeWidth:1},cornerRadius:4,fillOpacity:1,padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},5,{$isUserOption:["./fill",5,0]}]}},aL={enabled:!1,key:"x",segments:{$apply:[{fill:{$applySwitch:[{$path:"type"},{$path:"../../../fill"},["gradient",Cg],["image",Sh],["pattern",Ra]]},stroke:{$path:"../../../stroke"},fillOpacity:{$path:"../../../fillOpacity"},strokeWidth:{$isUserOption:["./stroke",{$isUserOption:["../../../strokeWidth",{$path:"../../../strokeWidth"},{$if:[{$greaterThan:[{$path:"../../../strokeWidth"},0]},{$path:"../../../strokeWidth"},2]}]},{$path:"../../../strokeWidth"}]},strokeOpacity:{$path:"../../../strokeOpacity"},lineDash:{$path:"../../../lineDash"},lineDashOffset:{$path:"../../../lineDashOffset"}}]}},fF="white",Rke={get cartesian(){return{seriesTypes:Rs.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:Rs.polarTypes,commonOptions:[]}},get topology(){return{seriesTypes:Rs.topologyTypes,commonOptions:[]}},get standalone(){return{seriesTypes:Rs.standaloneTypes,commonOptions:[]}}},Eke={"radial-gauge":!0,"linear-gauge":!0};function Lke(e){return Eke[e]===!0}var pa=class Qx{static getDefaultColors(){return{fills:$n,fillsFallback:Object.values($n),strokes:Ad,sequentialColors:Na($n),divergingColors:[$n.ORANGE,$n.YELLOW,$n.GREEN],hierarchyColors:["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"],secondSequentialColors:Di.interpolate([Di.fromHexString($n.BLUE),Di.fromHexString("#cbdef5")],8).map(t=>t.toString()),secondDivergingColors:[$n.GREEN,$n.YELLOW,$n.RED],secondHierarchyColors:["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"],up:{fill:$n.GREEN,stroke:Ad.GREEN},down:{fill:$n.RED,stroke:Ad.RED},neutral:{fill:$n.GRAY,stroke:Ad.GRAY},altUp:{fill:$n.BLUE,stroke:Ad.BLUE},altDown:{fill:$n.ORANGE,stroke:Ad.ORANGE},altNeutral:{fill:$n.GRAY,stroke:Ad.GRAY}}}static getDefaultPublicParameters(){return{accentColor:"#2196f3",axisColor:{$foregroundBackgroundMix:.325},backgroundColor:fF,borderColor:{$foregroundOpacity:.15},borderRadius:4,chartBackgroundColor:{$ref:"backgroundColor"},chartPadding:20,focusShadow:"0 0 0 3px var(--ag-charts-accent-color)",foregroundColor:"#181d1f",fontFamily:"Verdana, sans-serif",fontSize:Td,fontWeight:400,gridLineColor:{$foregroundBackgroundMix:.1},popupShadow:"0 0 16px rgba(0, 0, 0, 0.15)",subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"chartBackgroundColor"},.38]},textColor:{$ref:"foregroundColor"},chromeBackgroundColor:{$foregroundBackgroundMix:.02},chromeFontFamily:{$ref:"fontFamily"},chromeFontSize:{$ref:"fontSize"},chromeFontWeight:{$ref:"fontWeight"},chromeTextColor:{$ref:"foregroundColor"},chromeSubtleTextColor:{$mix:[{$ref:"chromeTextColor"},{$ref:"backgroundColor"},.38]},buttonBackgroundColor:{$ref:"backgroundColor"},buttonBorder:!0,buttonFontWeight:400,buttonTextColor:{$ref:"textColor"},inputBackgroundColor:{$ref:"backgroundColor"},inputBorder:!0,inputTextColor:{$ref:"textColor"},menuBackgroundColor:{$ref:"chromeBackgroundColor"},menuBorder:!0,menuTextColor:{$ref:"chromeTextColor"},panelBackgroundColor:{$ref:"chromeBackgroundColor"},panelSubtleTextColor:{$ref:"chromeSubtleTextColor"},tooltipBackgroundColor:{$ref:"chromeBackgroundColor"},tooltipBorder:!0,tooltipTextColor:{$ref:"chromeTextColor"},tooltipSubtleTextColor:{$ref:"chromeSubtleTextColor"},crosshairLabelBackgroundColor:{$ref:"foregroundColor"},crosshairLabelTextColor:{$ref:"chartBackgroundColor"}}}static getAxisDefaults(t,{title:i,time:n}){return oi(t,i&&{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:rc.MEDIUM},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},n&&{parentLevel:{enabled:!1,label:{enabled:{$path:"../../label/enabled"},border:{enabled:{$or:[{$isUserOption:["../border",!0,!1]},{$path:"../../../label/border/enabled"}]},strokeWidth:{$path:"../../../label/border/strokeWidth"},stroke:{$path:"../../../label/border/stroke"}},fill:{$path:"../../label/fill"},fontSize:{$path:"../../label/fontSize"},fontFamily:{$path:"../../label/fontFamily"},fontWeight:"bold",spacing:{$path:"../../label/spacing"},color:{$path:"../../label/color"},cornerRadius:{$path:"../../label/cornerRadius"},padding:{$path:"../../label/padding"},avoidCollisions:{$path:"../../label/avoidCollisions"}},tick:{enabled:{$path:"../../tick/enabled"},width:{$path:"../../tick/width"},size:{$path:"../../tick/size"},stroke:{$path:"../../tick/stroke"}}}},{label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:11,color:{$ref:"textColor"},avoidCollisions:!0,cornerRadius:4,border:{enabled:{$isUserOption:["../border",!0,!1]},strokeWidth:1,stroke:{$foregroundOpacity:.08}},padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},{left:12,right:12,top:8,bottom:8},void 0]}},line:{enabled:!0,width:1,stroke:{$ref:"axisColor"}},tick:{enabled:!1,size:6,width:1,stroke:{$ref:"axisColor"}},gridLine:{enabled:!0,width:1,style:{$apply:[{fillOpacity:1,stroke:{$ref:"gridLineColor"},strokeWidth:{$path:"../../width"},lineDash:[]},[{fillOpacity:1,stroke:{$ref:"gridLineColor"},strokeWidth:{$path:"../../width"},lineDash:[]}]]}},crossLines:{$apply:[{enabled:!0,fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},fillOpacity:.08,strokeWidth:1,label:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},padding:5,color:{$ref:"textColor"}}},void 0,{$pathString:["/common/axes/$axisType/crossLines",{axisType:{$path:["/axes/$index/type"]}}]},{$pathString:["/$seriesType/axes/$axisType/crossLines",{seriesType:{$path:["/series/0/type","line"]},axisType:{$path:["/axes/$index/type"]}}]}]}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:{$ref:"chartBackgroundColor"}},padding:{top:{$ref:"chartPadding"},right:{$ref:"chartPadding"},bottom:{$ref:"chartPadding"},left:{$ref:"chartPadding"}},seriesArea:{border:{enabled:!1,stroke:{$ref:"foregroundColor"},strokeOpacity:1,strokeWidth:1},cornerRadius:4,padding:{$if:[{$eq:[{$path:"./border/enabled"},!0]},5,0]}},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",spacing:{$if:[{$path:"../subtitle/enabled"},10,20]},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:rc.LARGEST},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},wrapping:"hyphenate",layoutStyle:Hp,textAlign:Wp},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:rc.MEDIUM},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:Hp,textAlign:Wp},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:{$rem:rc.MEDIUM},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:Hp,textAlign:Wp},legend:{...wie,enabled:{$and:[{$greaterThan:[{$size:{$path:"/series"}},1]},{$or:[{$isChartType:"cartesian"},{$isChartType:"standalone"},{$and:[{$isChartType:"polar"},{$not:{$isSeriesType:"pie"}},{$not:{$isSeriesType:"donut"}}]}]}]},position:"bottom",orientation:{$if:[{$or:[{$eq:[{$path:"./position"},"left"]},{$eq:[{$path:"./position"},"left-top"]},{$eq:[{$path:"./position"},"left-bottom"]},{$eq:[{$path:"./position"},"right"]},{$eq:[{$path:"./position"},"right-top"]},{$eq:[{$path:"./position"},"right-bottom"]},{$eq:[{$path:"./position/placement"},"left"]},{$eq:[{$path:"./position/placement"},"left-top"]},{$eq:[{$path:"./position/placement"},"left-bottom"]},{$eq:[{$path:"./position/placement"},"right"]},{$eq:[{$path:"./position/placement"},"right-top"]},{$eq:[{$path:"./position/placement"},"right-bottom"]}]},"vertical","horizontal"]},spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:{$ref:"textColor"},fontSize:{$rem:rc.SMALL},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:{$ref:"foregroundColor"}},inactiveStyle:{fill:{$ref:"subtleTextColor"}},highlightStyle:{fill:{$ref:"foregroundColor"}},label:{color:{$ref:"textColor"}}},fill:{$if:[{$path:["./position/floating",!1]},{$ref:"chartBackgroundColor"},"transparent"]}},tooltip:{enabled:!0,darkTheme:xb,delay:0,pagination:!1,mode:{$if:[{$or:[{$and:[{$isChartType:"cartesian"},{$not:{$hasSeriesType:"bubble"}},{$not:{$hasSeriesType:"scatter"}},{$greaterThan:[{$size:{$path:"/series"}},1]},{$lessThan:[{$size:{$path:"/series"}},4]}]},{$and:[{$isChartType:"polar"},{$greaterThan:[{$size:{$path:"/series"}},1]},{$lessThan:[{$size:{$path:"/series"}},4]}]}]},"shared","single"]}},overlays:{darkTheme:xb},listeners:{},series:{tooltip:{range:{$path:["/tooltip/range","exact"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","pointer"]},placement:{$path:["/tooltip/position/placement",void 0]},xOffset:{$path:["/tooltip/position/xOffset",0]},yOffset:{$path:["/tooltip/position/yOffset",0]}}}}}}constructor(t={}){const{overrides:i,palette:n,params:s}=fn(t),o=this.createChartConfigPerChartType(this.getDefaults()),r={};i&&this.processOverrides(r,i);const{fills:a,strokes:l,sequentialColors:c,...u}=this.getDefaultColors();this.palette=zd(oi(n,{fills:Object.values(a),strokes:Object.values(l),sequentialColors:Object.values(c),...u})),this.paletteType=vie(n),this.params=oi(s,this.getPublicParameters()),this.config=zd(fn(o)),this.overrides=zd(i),this.presets=zd(r)}processOverrides(t,i){for(const n of Rs.seriesTypes){const s=n,o=i[s];Lke(s)&&(t[s]=o,delete i[s])}}createChartConfigPerChartType(t){for(const[i,{seriesTypes:n}]of Ji(Rke)){const s=n_.get(i);for(const o of n)t[o]??(t[o]=s)}return t}getDefaults(){const t=(i,n)=>{const s={},o={axes:{},...iV.getThemeTemplates(),...this.getChartDefaults(),...n_.get(i)};for(const r of n){s[r]=oi(vl.getThemeTemplate(r),s[r]??o);const{axes:a}=s[r];for(const l of fm.keys())a[l]=oi(a[l],fm.getThemeTemplate(l),Qx.axisDefault[l]);(r==="map-shape-background"||r==="map-line-background")&&delete s[r].series.tooltip}return s};return oi(t("cartesian",Rs.cartesianTypes),t("polar",Rs.polarTypes),t("topology",Rs.topologyTypes),t("standalone",Rs.standaloneTypes))}static applyTemplateTheme(t,i,n){if(ft(t))for(let s=0;s<t.length;s++){const o=t[s];typeof o=="symbol"&&n?.has(o)&&(t[s]=n.get(o))}else for(const s of Object.keys(t)){const o=t[s];typeof o=="symbol"&&n?.has(o)&&(t[s]=n.get(o))}}templateTheme(t,i=!0){const n=i?fn(t):t,s=this.getTemplateParameters();return qp(n,Qx.applyTemplateTheme,void 0,void 0,s),n}getDefaultColors(){return Qx.getDefaultColors()}getPublicParameters(){return Qx.getDefaultPublicParameters()}getTemplateParameters(){const t=new Map;t.set(xb,!1),t.set(mD,"#d9d9d9"),t.set(ty,"#00000080"),t.set(sL,"#aaa"),t.set(Hp,"block"),t.set(Wp,"center"),t.set(e0,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),t.set(nL,fF),t.set(dn,$n.BLUE),t.set(ys,$n.BLUE),t.set(yD,$n.BLUE),t.set(vD,fF),t.set(bD,"#fafafa"),t.set(SD,"#ddd"),t.set(CD,"#000"),t.set(xD,"#181d1f"),t.set(t0,"#e35c5c"),t.set(i0,"#e35c5c"),t.set(wD,"#fafafa"),t.set(DD,"#ddd"),t.set(MD,"#000"),t.set(AD,"top"),t.set(sc,!1);const i=this.getDefaultColors();return t.set(qE,this.palette.up?.stroke??i.up.stroke),t.set(JE,this.palette.up?.fill??i.up.fill),t.set(QE,this.palette.down?.stroke??i.down.stroke),t.set(eL,this.palette.down?.fill??i.down.fill),t.set(tL,this.palette.neutral?.stroke??i.neutral.stroke),t.set(iL,this.palette.neutral?.fill??i.neutral.fill),t.set(xV,this.palette.altUp?.stroke??i.up.stroke),t.set(DV,this.palette.altUp?.fill??i.up.fill),t.set(wV,this.palette.altDown?.stroke??i.down.stroke),t.set(MV,this.palette.altDown?.fill??i.down.fill),t.set(AV,this.palette.altNeutral?.fill??i.altNeutral.fill),t.set(kV,this.palette.altNeutral?.stroke??i.altNeutral.stroke),t}};pa.axisDefault={number:pa.getAxisDefaults({keys:[],line:{enabled:!1},crosshair:{enabled:!0}},{title:!0,time:!1}),log:pa.getAxisDefaults({keys:[],base:10,line:{enabled:!1},crosshair:{enabled:!0}},{title:!0,time:!1}),category:pa.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!0,wrapping:"on-space"},gridLine:{enabled:sc},crosshair:{enabled:!1}},{title:!0,time:!1}),"grouped-category":pa.getAxisDefaults({keys:[],tick:{enabled:!0,stroke:mD},label:{spacing:10,rotation:270,wrapping:"on-space"},maxThicknessRatio:.5,paddingInner:.4,groupPaddingInner:.2,crosshair:{enabled:!1}},{title:!0,time:!1}),time:pa.getAxisDefaults({keys:[],gridLine:{enabled:sc},crosshair:{enabled:!0}},{title:!0,time:!0}),"unit-time":pa.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!1},gridLine:{enabled:sc},crosshair:{enabled:!0},parentLevel:{enabled:!0}},{title:!0,time:!0}),"ordinal-time":pa.getAxisDefaults({keys:[],groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:sc},crosshair:{enabled:!0}},{title:!0,time:!0}),"angle-category":pa.getAxisDefaults({label:{spacing:5},gridLine:{enabled:sc},shape:{$findFirstSiblingNotOperation:void 0}},{title:!1,time:!1}),"angle-number":pa.getAxisDefaults({label:{spacing:5},gridLine:{enabled:sc}},{title:!1,time:!1}),"radius-category":pa.getAxisDefaults({positionAngle:0,line:{enabled:!1},label:{minSpacing:5}},{title:!0,time:!1}),"radius-number":pa.getAxisDefaults({positionAngle:0,line:{enabled:!1},shape:{$findFirstSiblingNotOperation:void 0},label:{minSpacing:5}},{title:!0,time:!1})};var yc=pa,mF="#192232",no={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},yf={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},LS=class extends yc{getDefaultColors(){return{fills:no,fillsFallback:Object.values(no),strokes:yf,sequentialColors:Na(no),divergingColors:[no.ORANGE,no.YELLOW,no.GREEN],hierarchyColors:["#192834","#253746","#324859","#3f596c","#4d6a80"],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[no.GREEN,no.YELLOW,no.RED],secondHierarchyColors:["#192834","#3b5164","#496275","#577287","#668399"],up:{fill:no.GREEN,stroke:yf.GREEN},down:{fill:no.RED,stroke:yf.RED},neutral:{fill:no.GRAY,stroke:yf.GRAY},altUp:{fill:no.BLUE,stroke:yf.BLUE},altDown:{fill:no.ORANGE,stroke:yf.ORANGE},altNeutral:{fill:no.GRAY,stroke:yf.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),axisColor:{$foregroundBackgroundMix:.737},backgroundColor:mF,borderColor:{$foregroundBackgroundMix:.216},chromeBackgroundColor:{$foregroundBackgroundMix:.07},foregroundColor:"#fff",gridLineColor:{$foregroundBackgroundMix:.257},popupShadow:"0 0 16px rgba(0, 0, 0, 0.33)",subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"chartBackgroundColor"},.57]},crosshairLabelBackgroundColor:{$foregroundBackgroundMix:.65}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(xb,!0),e.set(nL,mF),e.set(mD,"#7f8389"),e.set(dn,no.BLUE),e.set(yD,"#fff"),e.set(ys,no.BLUE),e.set(vD,mF),e.set(bD,"#28313e"),e.set(SD,"#4b525d"),e.set(CD,"#fff"),e.set(xD,"#fff"),e.set(wD,"#28313e"),e.set(DD,"#4b525d"),e.set(MD,"#fff"),e}constructor(e){super(e)}},Nr={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},vf={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},Pke=class extends LS{getDefaultColors(){return{...super.getDefaultColors(),fills:{...Nr},fillsFallback:Object.values({...Nr}),strokes:{...vf},sequentialColors:Na(Nr),divergingColors:[Nr.GREEN,Nr.BLUE,Nr.RED],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],up:{fill:Nr.GREEN,stroke:vf.GREEN},down:{fill:Nr.RED,stroke:vf.RED},neutral:{fill:Nr.BLUE,stroke:vf.BLUE},altUp:{fill:Nr.GREEN,stroke:vf.GREEN},altDown:{fill:Nr.RED,stroke:vf.RED},altNeutral:{fill:Nr.GRAY,stroke:vf.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),chartPadding:0,gridLineColor:{$foregroundBackgroundMix:.12}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(dn,Nr.BLUE),e.set(ys,Nr.BLUE),e.set(Hp,"overlay"),e.set(Wp,"left"),e.set(AD,"bottom"),e.set(sc,!0),e}},Or={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},bf={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},Nke=class extends yc{getDefaultColors(){return{...super.getDefaultColors(),fills:{...Or},fillsFallback:Object.values({...Or}),strokes:{...bf},sequentialColors:Na(Or),divergingColors:[Or.GREEN,Or.BLUE,Or.RED],up:{fill:Or.GREEN,stroke:bf.GREEN},down:{fill:Or.RED,stroke:bf.RED},neutral:{fill:Or.BLUE,stroke:bf.BLUE},altUp:{fill:Or.GREEN,stroke:bf.GREEN},altDown:{fill:Or.RED,stroke:bf.RED},altNeutral:{fill:Or.GRAY,stroke:bf.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),chartPadding:0,gridLineColor:{$foregroundBackgroundMix:.06}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(dn,Or.BLUE),e.set(ys,Or.BLUE),e.set(Hp,"overlay"),e.set(Wp,"left"),e.set(AD,"bottom"),e.set(sc,!0),e}},so={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Sf={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},Oke=class extends LS{getDefaultColors(){return{...super.getDefaultColors(),fills:so,fillsFallback:Object.values(so),strokes:Sf,sequentialColors:Na(so),divergingColors:[so.ORANGE,so.YELLOW,so.GREEN],secondSequentialColors:["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"],secondDivergingColors:[so.GREEN,so.YELLOW,so.RED],up:{fill:so.GREEN,stroke:Sf.GREEN},down:{fill:so.RED,stroke:Sf.RED},neutral:{fill:so.GRAY,stroke:Sf.GRAY},altUp:{fill:so.BLUE,stroke:Sf.BLUE},altDown:{fill:so.RED,stroke:Sf.RED},altNeutral:{fill:so.GRAY,stroke:Sf.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(dn,so.BLUE),e.set(ys,so.BLUE),e}},oo={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Cf={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},Fke=class extends yc{getDefaultColors(){return{...super.getDefaultColors(),fills:oo,fillsFallback:Object.values(oo),strokes:Cf,sequentialColors:Na(oo),divergingColors:[oo.ORANGE,oo.YELLOW,oo.GREEN],secondSequentialColors:["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"],secondDivergingColors:[oo.GREEN,oo.YELLOW,oo.RED],up:{fill:oo.GREEN,stroke:Cf.GREEN},down:{fill:oo.RED,stroke:Cf.RED},neutral:{fill:oo.GRAY,stroke:Cf.GRAY},altUp:{fill:oo.BLUE,stroke:Cf.BLUE},altDown:{fill:oo.RED,stroke:Cf.RED},altNeutral:{fill:oo.GRAY,stroke:Cf.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(dn,oo.BLUE),e.set(ys,oo.BLUE),e}},an={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},xf={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},Bke=class extends LS{getDefaultColors(){return{fills:an,fillsFallback:Object.values(an),strokes:xf,sequentialColors:Na(an),divergingColors:[an.BLUE,an.RED],hierarchyColors:[],secondSequentialColors:[an.BLUE,an.PURPLE,an.MAGENTA,an.PINK,an.RED,an.ORANGE,an.YELLOW,an.GREEN],secondDivergingColors:[an.BLUE,an.RED],secondHierarchyColors:[],up:{fill:an.GREEN,stroke:xf.GREEN},down:{fill:an.RED,stroke:xf.RED},neutral:{fill:an.GRAY,stroke:xf.GRAY},altUp:{fill:an.BLUE,stroke:xf.BLUE},altDown:{fill:an.RED,stroke:xf.RED},altNeutral:{fill:an.GRAY,stroke:xf.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(dn,an.BLUE),e.set(ys,an.BLUE),e}},ln={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},wf={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},_ke=class extends yc{getDefaultColors(){return{...super.getDefaultColors(),fills:ln,fillsFallback:Object.values(ln),strokes:wf,sequentialColors:Na(ln),divergingColors:[ln.BLUE,ln.RED],hierarchyColors:[],secondSequentialColors:[ln.BLUE,ln.PURPLE,ln.MAGENTA,ln.PINK,ln.RED,ln.ORANGE,ln.YELLOW,ln.GREEN],secondDivergingColors:[ln.BLUE,ln.RED],secondHierarchyColors:[],up:{fill:ln.GREEN,stroke:wf.GREEN},down:{fill:ln.RED,stroke:wf.RED},neutral:{fill:ln.GRAY,stroke:wf.GRAY},altUp:{fill:ln.BLUE,stroke:wf.BLUE},altDown:{fill:ln.RED,stroke:wf.RED},altNeutral:{fill:ln.GRAY,stroke:wf.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(dn,ln.BLUE),e.set(ys,ln.BLUE),e}},ps={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},gp={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},zke=class extends LS{getDefaultColors(){return{...super.getDefaultColors(),fills:{...ps,RED:ps.ORANGE},fillsFallback:Object.values({...ps,RED:ps.ORANGE}),strokes:{...gp,RED:gp.ORANGE},sequentialColors:Na({...ps,RED:ps.ORANGE}),divergingColors:[ps.ORANGE,ps.YELLOW,ps.GREEN],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[ps.GREEN,ps.YELLOW,ps.ORANGE],up:{fill:ps.GREEN,stroke:gp.GREEN},down:{fill:ps.ORANGE,stroke:gp.ORANGE},neutral:{fill:ps.GRAY,stroke:gp.GRAY},altUp:{fill:ps.BLUE,stroke:gp.BLUE},altDown:{fill:ps.ORANGE,stroke:gp.ORANGE},altNeutral:{fill:ps.GRAY,stroke:gp.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(dn,ps.BLUE),e.set(ys,ps.BLUE),e}},As={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},bd={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},Gke=class extends yc{getDefaultColors(){return{...super.getDefaultColors(),fills:{...As,RED:As.ORANGE},fillsFallback:Object.values({...As,RED:As.ORANGE}),strokes:{...bd,RED:bd.ORANGE},sequentialColors:Na({...As,RED:As.ORANGE}),divergingColors:[As.ORANGE,As.YELLOW,As.GREEN],secondSequentialColors:["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"],secondDivergingColors:[As.GREEN,As.YELLOW,As.ORANGE],secondHierarchyColors:[],up:{fill:As.GREEN,stroke:bd.GREEN},down:{fill:As.ORANGE,stroke:bd.ORANGE},neutral:{fill:bd.GRAY,stroke:bd.GRAY},altUp:{fill:As.BLUE,stroke:bd.BLUE},altDown:{fill:As.ORANGE,stroke:bd.ORANGE},altNeutral:{fill:As.GRAY,stroke:bd.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(dn,As.BLUE),e.set(ys,As.BLUE),e}},y_=["top","top-right","top-left","bottom","bottom-right","bottom-left","right","right-top","right-bottom","left","left-top","left-bottom"],Vke={floating:te,placement:Me(...y_),xOffset:ve,yOffset:ve},kY=Yt((e,t)=>{let i;if(typeof e=="string")y_.includes(e)?i=!0:(i={valid:!1,invalid:[],cleared:null},i.invalid.push(new Yp(yG.Invalid,`a legend placement string: ["${y_.join('", "')}"]`,e,t.path)));else{const{cleared:n,invalid:s}=yo(e,Vke);i={valid:s.length===0,cleared:n,invalid:s}}return i},"a legend position object or placement string"),QI=lt(Me("circle","cross","diamond","heart","plus","pin","square","star","triangle"),cn),Die=Me("never","always","hyphenate","on-space"),JI=Me("top","right","bottom","left","top-right","bottom-right","bottom-left","top-left","center"),lL=lt(re,Me("exact","nearest")),Jo=lt(J,Xe(ve),Xe(Lu),Sn({text:ue(J),...fi},"text segments array")),TY=Me("pointer","start","middle","end"),HT={enabled:te,text:Jo,textAlign:Me("left","center","right"),wrapping:Me("never","always","hyphenate","on-space"),spacing:re,maxWidth:re,maxHeight:re,...fi};HT.padding=Xe(re);var qA={enabled:te,text:Jo,renderer:Qo(lt(J,MJ))},yF=["defaults","download","zoom-to-cursor","pan-to-cursor","reset-zoom","toggle-series-visibility","toggle-other-series","separator"],Mie={type:Me("action","separator"),showOn:Me("always","series-area","series-node","legend-item"),label:ue(J),enabled:te,action:cn,items:(e,t)=>Aie(e,t)};Mie.iconUrl=Xe(J);var Hke=Ki(Mie),Wke=Yt((e,t)=>{let i;return typeof e=="string"?yF.includes(e)?i=!0:(i={valid:!1,invalid:[],cleared:null},i.invalid.push(new Yp(yG.Invalid,`a context menu item string alias: ["${yF.join('", "')}"]`,e,t.path))):i=Hke(e,t),i},`a context menu item object or string alias: [${yF.join(", ")}]`),Aie=it(Wke,"a menu items array",!1),im={label:J,ariaLabel:J,tooltip:J,icon:Me("align-center","align-left","align-right","arrow-drawing","arrow-down-drawing","arrow-up-drawing","callout-annotation","candlestick-series","close","comment-annotation","date-range-drawing","date-price-range-drawing","delete","disjoint-channel-drawing","drag-handle","fill-color","line-style-solid","line-style-dashed","line-style-dotted","high-low-series","hlc-series","hollow-candlestick-series","horizontal-line-drawing","line-color","line-series","line-with-markers-series","locked","measurer-drawing","note-annotation","ohlc-series","pan-end","pan-left","pan-right","pan-start","parallel-channel-drawing","position-bottom","position-center","position-top","price-label-annotation","price-range-drawing","reset","settings","step-line-series","text-annotation","trend-line-drawing","fibonacci-retracement-drawing","fibonacci-retracement-trend-based-drawing","unlocked","vertical-line-drawing","zoom-in","zoom-out")},ql=lt(J,Qo(Jo)),kie=Ki({x:ql,y:ql,angle:ql,radius:ql,size:ql,color:ql,label:ql,secondaryLabel:ql,sectorLabel:ql,calloutLabel:ql,legendItem:ql}),Ic=Yt(Gxe,"a valid number format string"),yt={width:re,height:re,minWidth:re,minHeight:re,suppressFieldDotNotation:te,title:HT,subtitle:HT,footnote:HT,padding:{top:re,right:re,bottom:re,left:re},seriesArea:{border:ET,clip:te,cornerRadius:ve,padding:RT},legend:{enabled:te,position:kY,orientation:Me("horizontal","vertical"),maxWidth:re,maxHeight:re,spacing:re,border:ET,cornerRadius:ve,padding:RT,fill:Nl,fillOpacity:Ke,preventHidingAll:te,reverseOrder:te,toggleSeries:te,item:{marker:{size:re,shape:QI,padding:re,strokeWidth:re},line:{length:re,strokeWidth:re},label:{maxLength:re,formatter:cn,...fi},maxWidth:re,paddingX:re,paddingY:re,showSeriesStroke:te},pagination:{marker:{size:re,shape:QI,padding:re},activeStyle:{...ze,...Ie},inactiveStyle:{...ze,...Ie},highlightStyle:{...ze,...Ie},label:fi},listeners:{legendItemClick:cn,legendItemDoubleClick:cn}},gradientLegend:{enabled:te,position:kY,spacing:re,reverseOrder:te,border:ET,cornerRadius:ve,padding:RT,fill:Nl,fillOpacity:Ke,gradient:{preferredLength:re,thickness:re},scale:{label:{...fi,minSpacing:re,format:Ic,formatter:cn},padding:re,interval:{step:ve,values:Mc,minSpacing:si(re,Il("maxSpacing")),maxSpacing:si(re,Rl("minSpacing"))}}},listeners:{seriesNodeClick:cn,seriesNodeDoubleClick:cn,seriesVisibilityChange:cn,click:cn,doubleClick:cn,annotations:cn,zoom:cn},loadGoogleFonts:te,highlight:{drawingMode:Me("overlay","cutout"),range:Me("tooltip","node")},overlays:{loading:qA,noData:qA,noVisibleSeries:qA,unsupportedBrowser:qA},tooltip:{enabled:te,showArrow:te,pagination:te,delay:re,range:lL,wrapping:Die,mode:Me("single","shared","compact"),position:{anchorTo:Me("pointer","node","chart"),placement:lt(JI,it(JI)),xOffset:ve,yOffset:ve}},animation:{enabled:te,duration:re},contextMenu:{enabled:te,items:Aie},context:()=>!0,dataSource:{getData:cn},keyboard:{enabled:te,tabIndex:ve},touch:{dragAction:Me("none","drag","hover")},ranges:{enabled:te,buttons:Sn({...im,value:lt(ve,si(it(lt(ve,Lu)),yg(2,2)),cn)},"range button options array")},locale:{localeText:gE,getLocaleText:Qo(J)},background:{visible:te,fill:Fe,image:{url:ue(J),top:ve,right:ve,bottom:ve,left:ve,width:re,height:re,opacity:Ke}},styleNonce:J,sync:{enabled:te,groupId:J,axes:Me("x","y","xy"),nodeInteraction:te,zoom:te},zoom:{enabled:te,enableAxisDragging:te,enableAxisScrolling:te,enableDoubleClickToReset:te,enablePanning:te,enableScrolling:te,enableSelecting:te,enableTwoFingerZoom:te,keepAspectRatio:te,anchorPointX:TY,anchorPointY:TY,axisDraggingMode:Me("pan","zoom"),axes:Me("x","y","xy"),deceleration:lt(Me("off","short","long"),Ke),minVisibleItems:re,panKey:Me("alt","ctrl","meta","shift"),scrollingStep:Ke,autoScaling:{enabled:te,padding:Ke},buttons:{enabled:te,buttons:Sn({...im,value:Me("reset","zoom-in","zoom-out","pan-left","pan-right","pan-start","pan-end"),section:J},"zoom button options array"),visible:Me("always","zoomed","hover")}},formatter:lt(Qo(Jo),kie)};yt.dataSource.requestThrottle=Xe(re);yt.dataSource.updateThrottle=Xe(re);yt.dataSource.updateDuringInteraction=Xe(te);yt.zoom.enableIndependentAxes=Xe(te);yt.statusBar=Xe(at);yt.foreground=Xe({visible:te,text:J,image:{url:J,top:ve,right:ve,bottom:ve,left:ve,width:re,height:re,opacity:Ke},...ze});yt.overrideDevicePixelRatio=Xe(ve);yt.sync.domainMode=Xe(Me("direction","position","key"));var Vt={cursor:J,context:()=>!0,showInLegend:te,nodeClickRange:lL,listeners:{seriesNodeClick:cn,seriesNodeDoubleClick:cn},highlightStyle:{item:{...ze,...Ie},series:{enabled:te,dimOpacity:Ke,strokeWidth:re}},highlight:EJ(Yi)},Rc={...Vt,id:J,visible:te,context:()=>!0,data:Mc};Rc.seriesGrouping=Xe(at);var wg={shape:QI,size:re,...ze,...Ie,...je},vc={enabled:te,itemStyler:ri({...ze,...Ie,...je,shape:QI,size:re}),...wg},Si={enabled:te,formatter:Qo(Jo),format:Ic,itemStyler:ri({enabled:te,...ac,...fi}),...ac,...fi},rg={...Si,lineHeight:re,minimumFontSize:re,wrapping:Die,overflowStrategy:Me("ellipsis","hide")},TD={visible:te,cap:{visible:te,length:re,lengthRatio:Ke,...Ie,...je},...Ie,...je},cL={...TD,xLowerKey:J,xUpperKey:J,yLowerKey:J,yUpperKey:J,xLowerName:J,xUpperName:J,yLowerName:J,yUpperName:J,itemStyler:ri({visible:te,...Ie,...je,cap:{visible:te,length:re,lengthRatio:Ke,...Ie,...je}})},ti={enabled:te,showArrow:te,range:lL,renderer:Qo(lt(J,Ki({heading:J,title:J,data:Sn({label:ue(J),value:ue(J)})},"tooltip renderer result object"))),position:{anchorTo:Me("node","pointer","chart"),placement:lt(JI,it(JI)),xOffset:ve,yOffset:ve},interaction:{enabled:te}},ju={enabled:te,xOffset:ve,yOffset:ve,blur:re,color:Fe},uL=Xm({linear:{},smooth:{tension:Ke},step:{position:Me("start","middle","end")}},"interpolation line options"),n0={fills:si(yg(2),it(Ki({color:Fe,stop:ve},"")),RJ),fillMode:Me("continuous","discrete")},dL={value:ue(ve),text:J,shape:lt(Me("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),cn),placement:Me("before","after","middle"),spacing:re,size:re,rotation:ve,...ze,...Ie,...je},hL={value:ue(ve),text:J,shape:lt(Me("circle","cross","diamond","heart","plus","pin","square","star","triangle","line"),cn),placement:Me("inside","outside","middle"),spacing:re,size:re,rotation:ve,label:{...Si,spacing:re},...ze,...Ie,...je},eR={direction:Me("horizontal","vertical"),cornerMode:Me("container","item"),cornerRadius:re,thickness:re,segmentation:{enabled:te,spacing:re,interval:{values:it(ve),step:ve,count:ve}},bar:{enabled:te,thickness:re,thicknessRatio:Ke,...n0,...ze,...Ie,...je},label:{...rg,text:J,spacing:re,avoidCollisions:te,placement:Me("inside-start","outside-start","inside-end","outside-end","inside-center","bar-inside","bar-inside-end","bar-outside-end","bar-end")},tooltip:ti,..._e(Vt,["listeners"])},ag={...eR,..._e(Rc,["listeners"]),type:ue(ht("linear-gauge")),value:ue(ve),scale:{min:si(ve,Il("max")),max:si(ve,Rl("min")),label:{enabled:te,formatter:cn,rotation:ve,spacing:re,minSpacing:re,placement:Me("before","after"),avoidCollisions:te,format:Ic,...fi},interval:{values:it(ve),step:ve},...n0,...ze,...Ie,...je},targets:Sn(dL,"target options array")};ag.margin=Xe(ve);ag.defaultColorRange=Xe(it(Fe));ag.defaultTarget=Xe({...dL,value:ve,label:{...Si,spacing:ve}});ag.defaultScale=Xe(ag.scale);ag.scale.defaultFill=Xe(Fe);var tR={outerRadius:re,innerRadius:re,outerRadiusRatio:Ke,innerRadiusRatio:Ke,startAngle:ve,endAngle:ve,spacing:re,cornerMode:Me("container","item"),cornerRadius:re,scale:{min:si(ve,Il("max")),max:si(ve,Rl("min")),label:{enabled:te,formatter:cn,rotation:ve,spacing:re,minSpacing:re,avoidCollisions:te,format:Ic,...fi},interval:{values:it(ve),step:ve},...n0,...ze,...Ie,...je},segmentation:{enabled:te,spacing:re,interval:{values:it(ve),step:ve,count:ve}},bar:{enabled:te,...n0,...ze,...Ie,...je},needle:{enabled:te,spacing:re,radiusRatio:Ke,...ze,...Ie,...je},label:{text:J,spacing:re,...rg},secondaryLabel:{text:J,...rg},tooltip:ti,...Vt},ID={...tR,...Rc,type:ue(ht("radial-gauge")),value:ue(ve),targets:Sn(hL,"target options array")};ID.defaultColorRange=Xe(it(Fe));ID.defaultTarget=Xe({...hL,value:ve,label:{...Si,spacing:ve}});ID.scale.defaultFill=Xe(Fe);var RD=Me("millisecond","second","minute","hour","day","month","year"),Tie={unit:ue(RD),step:Hw,epoch:Lu,utc:te};Tie.every=cn;var pL=Ki(Tie,"a time interval object"),Om={enabled:te,text:J,padding:ve,...fi},bu=Yt({enabled:te,type:ue(Me("line","range")),range:si(Yt((e,{options:t})=>t.type==="range","crossLine type to be 'range'"),it(at),yg(2,2)),value:si(Yt((e,{options:t})=>t.type==="line","crossLine type to be 'line'"),at),label:Om,fill:Fe,fillOpacity:Ke,...Ie,...je},"cross-line options"),kd={...bu,label:{...Om,position:Me("top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"),rotation:ve}},Ch={enabled:te,rotation:ve,avoidCollisions:te,minSpacing:re,spacing:re,formatter:Qo(Jo),itemStyler:ri({...fi,...ac,spacing:ve}),...fi,...ac},ED={autoRotate:te,autoRotateAngle:ve,wrapping:Me("never","always","hyphenate","on-space"),truncate:te,...Ch},IV={format:Ic,...ED},LD={format:lt(J,gE),...ED},Iie={enabled:te,width:re,size:re,stroke:Fe},gL={enabled:te,label:LD,tick:Iie},RV={values:it(at),minSpacing:re},iy={reverse:te,gridLine:{enabled:te,width:re,style:Sn({fill:Fe,fillOpacity:re,stroke:lt(Fe,FI),strokeWidth:re,lineDash:it(re)},"a grid-line style object array")},interval:RV,label:Ch,line:{enabled:te,width:re,stroke:Fe},tick:Iie,context:()=>!0};iy.layoutConstraints=Xe({stacked:ue(te),align:ue(Me("start","end")),unit:ue(Me("percent","px")),width:ue(re)});var xh={...iy,crossAt:{value:ue(lt(ve,Lu,J,it(J))),sticky:te},keys:it(J),crossLines:Sn(kd,"a cross-line options array"),position:Me("top","right","bottom","left"),thickness:re,maxThicknessRatio:Ke,title:{enabled:te,text:Jo,spacing:re,formatter:Qo(Jo),...fi}};xh.title._enabledFromTheme=Xe(te);var PD={enabled:te,...ze,...Ie,...je};function Dg(e,t){const i={enabled:te,xOffset:ve,yOffset:ve,formatter:Qo(J),renderer:Qo(lt(J,Ki({text:J,color:Fe,backgroundColor:Fe,opacity:Ke},"crosshair label renderer result object")))};let n;return e&&(n={...i,format:t?lt(J,Ki({millisecond:J,second:J,hour:J,day:J,month:J,year:J})):J}),{enabled:te,snap:te,label:n??i,...Ie,...je}}function PS(e,t){return{min:si(e,Il("max")),max:si(e,Rl("min")),nice:te,interval:{step:t?lt(Hw,RD,pL):Hw,values:it(e),minSpacing:si(re,Il("maxSpacing")),maxSpacing:si(re,Rl("minSpacing"))}}}var EV={step:lt(Hw,RD,pL),values:it(lt(ve,Lu)),minSpacing:si(re,Il("maxSpacing")),maxSpacing:si(re,Rl("minSpacing")),placement:Me("on","between")},NS=class Rie extends gD{constructor(t,i=new RS,n=!0){super(t,i),this.groupPaddingInner=.1,this.includeInvisibleDomains=n,this.nice=!1}static is(t){return t instanceof Rie}isCategoryLike(){return!0}hasDefinedDomain(){return!1}normaliseDataDomain(t){return{domain:t,clipped:!1}}updateScale(){super.updateScale();let{paddingInner:t,paddingOuter:i}=this;if(!Kt(t)||!Kt(i)){const n=this.reduceBandScalePadding();t??(t=n.inner),i??(i=n.outer)}this.scale.paddingInner=t??0,this.scale.paddingOuter=i??0}calculateGridLines(t,i,n){const s=super.calculateGridLines(t,i,n);return this.interval.placement==="between"&&t.length>0&&s.push(super.calculateGridLine({index:t.at(-1).index+1,tickId:`after:${t.at(-1).tickId}`,translation:this.range[1]},t.length,i,n,t)),s}calculateGridLine({index:t,tickId:i,translation:n},s,o,r,a){const{gridLine:l,horizontal:c,interval:u,scale:d}=this;if(u.placement!=="between")return super.calculateGridLine({index:t,tickId:i,translation:n},s,o,r,a);const p=n<d.step?Math.floor(d.step/2):d.step/2,f=n-p,[m,v,b,C]=c?[f,Math.max(o,r),f,Math.min(o,r)]:[Math.min(o,r),f,Math.max(o,r),f],{style:x}=l,{stroke:w,strokeWidth:M=0,lineDash:T}=x[t%x.length]??{};return{tickId:i,offset:f,x1:m,y1:v,x2:b,y2:C,stroke:w,strokeWidth:M,lineDash:T}}calculateGridFills(t,i,n){const{horizontal:s,range:o,scale:r}=this;if(this.interval.placement!=="between")return super.calculateGridFills(t,i,n);const a=[];if(t.length==0)return a;const l=t[0],c=l.translation>o[0]+r.step/2,u=t.at(-1),d=s&&u.translation<o[1]-r.step/2;if(c){const p={tickId:`before:${l.tickId}`,translation:l.translation-r.step};a.push(this.calculateGridFill(p,-1,l.index-1,i,n,t))}if(a.push(...t.map((p,f)=>this.calculateGridFill(p,f,p.index,i,n,t))),d){const p={tickId:`after:${u.tickId}`,translation:u.translation+r.step};a.push(this.calculateGridFill(p,t.length,u.index+1,i,n,t))}return a}calculateGridFill({tickId:t,translation:i},n,s,o,r,a){const{gridLine:l,horizontal:c,interval:u,scale:d}=this;if(u.placement!=="between")return super.calculateGridFill({tickId:t,translation:i},n,s,o,r,a);const p=i-d.step/2,f=i+d.step/2,[m,v,b,C]=c?[p,Math.max(o,r),f,Math.min(o,r)]:[Math.min(o,r),p,Math.max(o,r),f],{fill:x,fillOpacity:w}=l.style[s%l.style.length]??{};return{tickId:t,x1:m,y1:v,x2:b,y2:C,fill:x,fillOpacity:w}}calculateTickLines(t,i){const n=super.calculateTickLines(t,i);return this.interval.placement==="between"&&t.length>0&&n.push(super.calculateTickLine({isPrimary:!1,tickId:`after:${t.at(-1)?.tickId}`,translation:this.range[1]},t.length,i,t)),n}calculateTickLine({isPrimary:t,tickId:i,translation:n},s,o,r){const{horizontal:a,interval:l,primaryTick:c,scale:u,tick:d}=this;if(l.placement!=="between")return super.calculateTickLine({isPrimary:t,tickId:i,translation:n},s,o,r);const p=t&&c?.enabled?c:d,f=-o*this.getTickSize(p),m=n<u.step?Math.floor(u.step/2):u.step/2,v=n-m,[b,C,x,w]=a?[v,0,v,f]:[0,v,f,v],{stroke:M,width:T}=p;return{tickId:i,offset:v,x1:b,y1:C,x2:x,y2:w,stroke:M,strokeWidth:T,lineDash:void 0}}reduceBandScalePadding(){return this.boundSeries.reduce((t,i)=>{const n=i.getBandScalePadding?.();return n&&(t.inner>n.inner&&(t.inner=n.inner),t.outer<n.outer&&(t.outer=n.outer)),t},{inner:1/0,outer:-1/0})}tickFormatParams(t,i,n,s){return{type:"category"}}datumFormatParams(t,i,n,s,o){const{datum:r,seriesId:a,legendItemName:l,key:c,source:u,property:d,domain:p,boundSeries:f}=i;return Array.isArray(t)&&t.some(m=>typeof m!="string")?t=t.map(String):!Array.isArray(t)&&typeof t!="string"&&typeof t!="number"&&!(t instanceof Date)&&(t=String(t)),{type:"category",value:t,datum:r,seriesId:a,legendItemName:l,key:c,source:u,property:d,domain:p,boundSeries:f}}};NS.className="CategoryAxis";NS.type="category";E([F],NS.prototype,"groupPaddingInner",2);E([F],NS.prototype,"paddingInner",2);E([F],NS.prototype,"paddingOuter",2);var OS=NS,IY=class Eie extends RS{static is(t){return t instanceof Eie}normalizeDomains(...t){const{domain:i}=super.normalizeDomains(...t);return{domain:i,animatable:!1}}findIndex(t){return super.findIndex(t)??this.getMatchIndex(t)}getMatchIndex(t){const i=JSON.stringify(t),n=this._domain.find(s=>JSON.stringify(s)===i);if(n!=null)return super.findIndex(n)}};function Mg(e){if(e.length===0)return null;let t=1/0,i=-1/0;for(const s of e){const o=s instanceof Date?s.getTime():s;typeof o=="number"&&(o<t&&(t=o),o>i&&(i=o))}const n=[t,i];return n.every(Number.isFinite)?n:null}function LV(e,t,i){let n=!1;const s=Mg(e);if(s==null)return{extent:t!=null&&i!=null&&t<=i?[t,i]:[],clipped:!1};let[o,r]=s;return t!=null&&(n||(n=t>o),o=t),i!=null&&(n||(n=i<r),r=i),o>r?{extent:[],clipped:!1}:{extent:[o,r],clipped:n}}function fL(e,t=[0,0]){for(const i of e)typeof i=="number"&&(i<0&&(t[0]+=i),i>0&&(t[1]+=i));return t}function jke(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:n=>fL(n)}}function Lie(e,t){const i=t?.visible??!0;return{id:e,type:"aggregate",matchGroupIds:t?.matchGroupId?[t?.matchGroupId]:void 0,aggregateFunction:n=>fL(n),groupAggregateFunction:(n,s=[0,0])=>(i&&(s[0]+=n?.[0]??0,s[1]+=n?.[1]??0),s)}}function Uke(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:n=>al.extendDomain(n)}}function v_(e,t){const i=t?.visible??!0;return{id:e,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(n,s=[0,0])=>(i&&(s[0]+=n?.[0]??0,s[1]+=n?.[1]??0),s)}}function Pie(e,t){const i=t?.visible??!0;return{id:e,matchGroupIds:t?.matchGroupId?[t?.matchGroupId]:void 0,type:"aggregate",aggregateFunction:s=>fL(s),groupAggregateFunction:(s,o=[0,0,-1])=>(i&&(o[0]+=s?.[0]??0,o[2]++,o[1]+=s?.[1]??0),o),finalFunction:(s=[0,0,0])=>{const o=s[0]+s[1];return o>=0?[0,o/s[2]]:[o/s[2],0]}}}function b_(e,t,i){const n={id:e,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(s,o=[])=>{const r=o[1]-o[0];return t.aggregateFunction(s).map(a=>a/r)}};return t.groupAggregateFunction&&(n.groupAggregateFunction=t.groupAggregateFunction),n}function Nie(e){return()=>{let t=0;return i=>Kt(i)?(t+=e?Math.max(0,i):i,t):i}}function Oie(){return()=>{let e=0;return t=>{if(!Kt(t))return t;const i=e;return e+=t,i}}}var $ke=1e3;function FS(e){return e.input.count<=$ke}function Fie(e){return e!=null&&GE(e)}function Kke(e){return e!=null}function Bie(e){switch(e){case"number":case"log":case"time":case"unit-time":case"ordinal-time":case"color":return Fie;default:return Kke}}function _ie(e){switch(e){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function Qp(e,t,i={}){return{property:e,type:"key",valueType:_ie(t),validation:Bie(t),...i}}function Bi(e,t,i={}){return{property:e,type:"value",valueType:_ie(t),validation:Bie(t),...i}}function zie(e,t={}){return{property:e,type:"value",valueType:"range",missingValue:1,processor:()=>()=>1,...t}}var Yke=function(e){return e};function Gie(...e){const t=e.filter(i=>i!=null);return t.length===0?()=>Yke:t.length===1?t[0]:()=>{const i=t.map(n=>n());return(n,s)=>i.reduce((o,r)=>r(o,s),n)}}function Vie(e,t={}){const{min:i=-1/0,max:n=1/0,processor:s,...o}=t;return{type:"value",property:e,valueType:"range",validation:Fie,processor:Gie(s,()=>r=>Kt(r)?Je(i,r,n):r),...o}}function S_(e,t,i={}){const{onlyPositive:n,processor:s,...o}=i;return{...Bi(e,t,o),processor:Gie(s,Nie(n))}}function Xke(e,t,i={}){return{...Bi(e,t,i),processor:Oie()}}function s0(e,t,i,n){return[Bi(e,n,i),Uie(i.groupId,t,i.separateNegative),...i.rangeId==null?[]:[Uke(i.rangeId,i.groupId)]]}var Hie={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let e=Number.NaN;return(t,i)=>{const n=typeof i[0]=="number"?i[0]:Number(i[0]),s=Math.abs(n-e);e=n;const o=t??1/0;return!Number.isNaN(s)&&s>0&&s<o?s:o}}},Wie={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let e=Number.NaN;return(t,i)=>{const n=typeof i[0]=="number"?i[0]:Number(i[0]),s=Math.abs(n-e);e=n;const o=t??-1/0;return!Number.isNaN(s)&&s>0&&s>o?s:o}}},jie={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:e}})=>e?.slice().sort((t,i)=>{for(let n=0;n<t.length;n++){const s=t[n]-i[n];if(s!==0)return s}return 0})};function Zke({normaliseTo:e}){const t=(i,n)=>{if(n===0)return 0;const s=(i??0)*e/n;return s>=0?Math.min(e,s):Math.max(-e,s)};return()=>()=>(i,n,s,o)=>{const r=qke(i,n,s,o);for(const a of n){const l=s.datumIndices[a];if(l!=null)for(const c of l){const u=o+c,d=i[a],p=d[u];if(p==null){d[u]=void 0;continue}d[u]=t(p,r)}}}}function qke(e,t,i,n){const s=[0,0];for(const o of t){const r=e[o],a=i.datumIndices[o];if(a!=null)for(const l of a){const c=n+l,u=r[c];if(u==null)continue;const d=typeof u=="number"?u:Math.max(...u.map(f=>f??0)),p=d<0?0:1;p===0?s[p]=Math.min(s[p],d):s[p]=Math.max(s[p],d)}}return Math.max(Math.abs(s[0]),s[1])}function mL(e,t){return{type:"group-value-processor",matchGroupIds:e,adjust:NE({normaliseTo:t},Zke)}}function Qke({normaliseTo:e,zeroDomain:t,rangeMin:i,rangeMax:n}){const s=e[1]-e[0],o=(r,a,l)=>{const c=e[0]+(r-a)/l*s;return l===0?t:c>=e[1]?e[1]:c<e[0]?e[0]:c};return()=>(r,a)=>{let[l,c]=r.domain.values[a];i!=null&&(l=i),n!=null&&(c=n);const u=c-l;r.domain.values[a]=[e[0],e[1]];const d=r.columns[a];for(let p=0;p<d.length;p+=1)d[p]=o(d[p],l,u)}}function WT(e,t,i,n,s){return{type:"property-value-processor",property:e,adjust:NE({normaliseTo:t,rangeMin:n,rangeMax:s,zeroDomain:i},Qke)}}var vw=1,iR=2;function RY(e,t,i,n){let s=vw|iR;if(t.valueType==="category")return i.length<e&&(s&=~vw),s;let o=n[0]?.valueOf();for(let r=1;s!==0&&r<n.length;r++){const a=n[r]?.valueOf();(!Number.isFinite(a)||o>a)&&(s&=~iR),Number.isFinite(a)&&o===a&&(s&=~vw),o=a}return s}function ND(e){return{type:"processor",property:"animationValidation",calculate(t){if(!FS(t))return;const{keys:i,values:n}=t.defs,{input:s,domain:{keys:o,values:r},keys:a,columns:l,invalidKeyCount:c}=t;let u=vw|iR;if(s.count!==0){for(let d=0;u!==0&&d<i.length;d++)for(const p of i[d].scopes){const f=a[d].get(p),m=c?.get(p)??0,v=f.length-m;u&=RY(v,i[d],o[d],f)}for(let d=0;u!==0&&d<n.length;d++){const p=n[d];e?.includes(p.id)&&(u&=RY(0,p,r[d],l[d]))}}return{uniqueKeys:(u&vw)!==0,orderedKeys:(u&iR)!==0}}}}function Jke({mode:e,separateNegative:t}){return()=>()=>(i,n,s,o)=>{const r=[0,0];for(const a of n){const l=s.datumIndices[a];if(l==null)continue;const c=r[0],u=r[1],d=i[a];let p=!1;for(const f of l){const m=o+f,v=d[m];if(!Kt(v))continue;const b=t&&pG(v),C=b?c:u;if(e==="normal"?d[m]=C+v:d[m]=C,!p){const x=b?0:1;r[x]=C+v,p=!0}}}}}function Uie(e,t,i=!1){const n=NE({mode:t,separateNegative:i},Jke);return{type:"group-value-processor",matchGroupIds:[e],adjust:n,supportsReprocessing:!0}}function EY(e){return e.id??e.property}function eTe(e,t,i){const n=new Map,s=t.defs.values;for(let a=0;a<s.length;a+=1){const l=s[a];if(l.scopes?.includes(e)===!1)continue;const c=EY(l);if(n.has(c))return;n.set(c,a)}const o=[],r=i.defs.values;for(let a=0;a<r.length;a+=1){const l=r[a];if(l.scopes?.includes(e)===!1)continue;const c=EY(l),u=n.get(c);if(u==null)return;n.delete(c),o.push({previousIndex:u,nextIndex:a})}if(n.size===0)return o}function vF(e,t,i,n,s){for(const{previousIndex:o,nextIndex:r}of i){const a=e[o],l=t[r],c=a[n],u=l[s];if(c!==u)return!1}return!0}function yL(e,t,i=!0){return{type:"processor",property:"diff",calculate(n,s){if(!FS(n))return;const o=new Map,r=new Map,a=new Map,l=new Map,c=t.keys.map(C=>C.get(e)),u=n.keys.map(C=>C.get(e)),d=t.columns,p=n.columns,f=eTe(e,t,n);if(f==null)return s;const m=Math.max(t.input.count,n.input.count);for(let C=0;C<m;C++){const x=C<t.input.count,w=C<n.input.count,M=x?$I(c,C):void 0,T=M==null?"":Xo(...M),L=w?$I(u,C):void 0,I=L==null?"":Xo(...L);if(w&&x&&T===I){vF(d,p,f,C,C)||a.set(I,C);continue}const R=l.get(I);R!=null?((i||!vF(d,p,f,R,C))&&(a.set(I,C),o.set(I,C)),l.delete(I)):w&&r.set(I,C);const O=r.get(T);O!=null?((i||!vF(d,p,f,O,C))&&(a.set(T,C),o.set(T,C)),r.delete(T)):x&&(a.delete(T),l.set(T,C))}const b={changed:r.size>0||a.size>0||l.size>0,added:new Set(r.keys()),updated:new Set(a.keys()),removed:new Set(l.keys()),moved:new Set(o.keys())};return{...s,[e]:b}}}}function Xo(...e){if(e.length===1){const t=o_(e[0]);if(typeof t=="boolean"||typeof t=="number"||typeof t=="string")return t}return e.map(t=>o_(t)).join("___")}var tTe=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){e>this.right&&(this.right=e),e<this.left&&(this.left=e),t>this.bottom&&(this.bottom=t),t<this.top&&(this.top=t)}},iTe=class $ie{constructor(t="",i,n){this.label=t,this.parent=i,this.refId=n,this.position=0,this.subtreeLeft=Number.NaN,this.subtreeRight=Number.NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screen=0,this.depth=i?i.depth+1:0}insertTick(t,i){let n=this,s;for(let o=0;o<t.length;o++){const r=t[o],a=o!==t.length-1,{children:l}=n,c=l.find(u=>u.label===r);if(c&&a)n=c,s=c;else{const u=new $ie(r,n,i);u.index=l.length,l.push(u),a&&(n=u),s=u}}return s}getLeftSibling(){return this.index>0?this.parent?.children[this.index-1]:void 0}getLeftmostSibling(){return this.index>0?this.parent?.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){return this.parent?.children.filter((t,i)=>i!==this.index)??[]}};function nTe(e){const t=e.reduce((s,o)=>Math.max(s,o.length),0),i=new iTe,n=new Map;for(let s=0;s<e.length;s++){const o=e[s];for(;o.length<t;)o.push("");const r=i.insertTick(o,s);r!=null&&n.set(o,r)}return{root:i,tickNodes:n}}function sTe(e,t,i){const n=t.index-e.index,s=i/n;t.change-=s,t.shift+=i,e.change+=s,t.prelim+=i,t.mod+=i}function oTe(e,t,i){return t.getSiblings().includes(e.ancestor)?e.ancestor:i}function rTe({children:e}){let t=0,i=0;for(let n=e.length-1;n>=0;n--){const s=e[n];s.prelim+=t,s.mod+=t,i+=s.change,t+=s.shift+i}}function aTe(e,t){const i=e.getLeftSibling();if(i){let n=e,s=e,o=i,r=s.getLeftmostSibling(),a=s.mod,l=n.mod,c=o.mod,u=r.mod;for(;o.nextRight()&&s.nextLeft();){o=o.nextRight(),s=s.nextLeft(),r=r.nextLeft(),n=n.nextRight(),n.ancestor=e;const d=o.prelim+c-(s.prelim+a)+1;d>0&&(sTe(oTe(o,e,t),e,d),a+=d,l+=d),c+=o.mod,a+=s.mod,u+=r.mod,l+=n.mod}o.nextRight()&&!n.nextRight()?n.mod+=c-l:(s.nextLeft()&&!r.nextLeft()&&(r.mod+=a-u),t=e)}return t}function Kie(e){const{children:t}=e;if(t.length){let[i]=t;for(const o of t)Kie(o),i=aTe(o,i);rTe(e);const n=(t[0].prelim+t.at(-1).prelim)/2,s=e.getLeftSibling();s?(e.prelim=s.prelim+1,e.mod=e.prelim-n):e.prelim=n}else{const i=e.getLeftSibling();e.prelim=i?i.prelim+1:0}}function Yie(e,t,i){e.position=e.prelim+t,i.insertNode(e);for(const n of e.children)Yie(n,t+e.mod,i)}function Xie(e){const{children:t}=e;let i=0;for(const n of t)Xie(n),n.children.length?i+=n.leafCount:i++;e.leafCount=i,t.length?(e.subtreeLeft=t[0].subtreeLeft,e.subtreeRight=t.at(-1).subtreeRight,e.position=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.position,e.subtreeRight=e.position)}function lTe(e){const t=new cTe,{root:i,tickNodes:n}=nTe(e);return Kie(i),Yie(i,-i.prelim,t),Xie(i),{layout:t,tickNodes:n}}var cTe=class{constructor(){this.dimensions=new tTe,this.nodes=[],this.depth=0}insertNode(e){this.depth<e.depth&&(this.depth=e.depth),this.dimensions.update(e.position,e.depth),this.nodes.push(e)}scaling(e,t){let i=1;if(e>0){const{left:n,right:s}=this.dimensions;s!==n&&(i=e/(s-n))}return t&&(i*=-1),i}},Jx=5,nr=class extends pt{constructor(){super(...arguments),this.enabled=!0,this.border=new qm}};E([F],nr.prototype,"enabled",2);E([F],nr.prototype,"avoidCollisions",2);E([F],nr.prototype,"border",2);E([F],nr.prototype,"color",2);E([F],nr.prototype,"cornerRadius",2);E([F],nr.prototype,"spacing",2);E([F],nr.prototype,"rotation",2);E([F],nr.prototype,"wrapping",2);E([F],nr.prototype,"truncate",2);E([F],nr.prototype,"fill",2);E([F],nr.prototype,"fontStyle",2);E([F],nr.prototype,"fontWeight",2);E([F],nr.prototype,"fontSize",2);E([F],nr.prototype,"fontFamily",2);E([F],nr.prototype,"padding",2);var vL=class extends pt{constructor(){super(...arguments),this.enabled=!0}};E([F],vL.prototype,"enabled",2);E([F],vL.prototype,"width",2);E([F],vL.prototype,"stroke",2);var PV=class extends pt{constructor(){super(...arguments),this.label=new nr,this.tick=new vL}};E([F],PV.prototype,"label",2);E([F],PV.prototype,"tick",2);var ny=class extends OS{constructor(e){super(e,new IY),this.tickScale=new IY,this.computedLayout=void 0,this.tickTreeLayout=void 0,this.tickNodes=void 0,this.depthOptions=new AS(PV),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;const{nodes:e}=this.tickTreeLayout,{range:t,step:i,inset:n,bandwidth:s}=this.scale,o=Math.abs(t[1]-t[0])-i,r=this.tickTreeLayout.scaling(o,t[0]>t[1]),a=n+s/2;let l=0;for(const c of e){const u=c.position*r;l>u&&(l=u),c.screen=u+a}for(const c of e)c.screen-=l}getDepthOptionsMap(e){const t=[],{depthOptions:i,label:n}=this,s=this.horizontal?0:-90;for(let o=0;o<e;o++)t.push(i[o]?.label.enabled??n.enabled?{enabled:!0,spacing:i[o]?.label.spacing??n.spacing,wrapping:i[o]?.label.wrapping??n.wrapping,truncate:i[o]?.label.truncate??n.truncate,rotation:i[o]?.label.rotation??(o?s:n.rotation),avoidCollisions:i[o]?.label.avoidCollisions??n.avoidCollisions}:{enabled:!1,spacing:0,rotation:0,avoidCollisions:!1});return t}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each((e,t)=>{e.fill=t.color,e.text=t.text,e.textBaseline=t.textBaseline,e.textAlign=t.textAlign??"center",e.setFont(t),e.setBoxing(t)})}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){this.updateDirection(),this.updateScale();const{step:e}=this.scale,{title:t,label:i,range:n,depthOptions:s,horizontal:o,line:r}=this;if(this.lineNode.datum=o?{x1:n[0],x2:n[1],y1:0,y2:0}:{x1:0,x2:0,y1:n[0],y2:n[1]},this.lineNode.setProperties({stroke:r.stroke,strokeWidth:r.enabled?r.width:0}),this.resizeTickTree(),!this.tickTreeLayout?.depth)return{bbox:He.zero,spacing:0,depthLabelMaxSize:{},tickLabelLayout:[]};const{depth:a,nodes:l}=this.tickTreeLayout,c=o?-i.getSideFlag():i.getSideFlag(),u=[],d=new Map,p=new Zb,f=this.getDepthOptionsMap(a),m=c*f[0].spacing,v=this.tickFormatter(this.scale.domain,this.scale.domain,!1),b=(R,O)=>{const _=a-R.depth;if(!f[_]?.enabled||!Txe(R.screen,n))return!1;let B=(R.leafCount||1)*e;if(B<Jx)return!1;let V=v(R.label,O-1);const j=this.getLabelStyles({value:R.index,formattedValue:V,depth:_},s[_]?.label);if(i.avoidCollisions){const K=f[_].rotation;let Y=this.thickness;if(K!=null){const $=hwe(K,B,Y);B=$.width,Y=$.height}const G={font:j,textWrap:f[_].wrapping,overflow:f[_].truncate?"ellipsis":"hide",maxWidth:B,maxHeight:Y};V=mE(V,G)||V}return p.x=o?R.screen:m,p.y=o?m:R.screen,p.rotation=0,p.fill=j.color,p.text=V,p.textAlign="center",p.textBaseline=i.parallel?"top":"bottom",p.setFont(j),p.setBoxing(j),!0},C={};for(const[R,O]of l.entries()){const _=a-O.depth;if(C[_]??(C[_]=0),!O.children.length&&e<Jx||!b(O,R)||!p.getBBox())continue;d.set(R,p.getBBox()),p.rotation=rh(f[_]?.rotation);const{width:j,height:K}=p.getBBox(),Y=o?K:j;C[_]<Y&&(C[_]=Y)}const x=bV(),w=R=>{if(R===0)return 0;let O=C[0];for(let _=1;_<=R;_++)O+=f[_].spacing,_!==R&&(O+=C[_]);return O};for(const[R,O]of l.entries()){if(R===0)continue;const _=b(O,R),B=!O.children.length,V=a-O.depth;if(B&&e<Jx||!_)continue;const j=rh(f[V].rotation),K=d.get(R);if(!K)continue;const{width:Y,height:G}=K,$=w(V);if(p.textAlign="center",p.textBaseline="middle",p.rotation=j,o?(p.y+=($+UB(Y/2,G/2,j))*c,p.rotationCenterX=O.screen,p.rotationCenterY=p.y):(p.x+=$*c+UB((f[V].spacing*c+Y)/2,i.mirrored?Y:0,j)-Y/2,p.rotationCenterX=p.x,p.rotationCenterY=O.screen),f[V].avoidCollisions){const{width:q,height:H}=p.getBBox(),U=o?q:H,ee=B?e:O.leafCount*e;if(U>ee){d.delete(R);continue}}const W=p.getPlainText(),Q=p.getBoxingProperties();u.push({text:W,visible:!0,tickId:x(W),range:this.scale.range,border:Q.border,color:p.fill,cornerRadius:Q.cornerRadius,fill:Q.fill,fontFamily:p.fontFamily,fontSize:p.fontSize,fontStyle:p.fontStyle,fontWeight:p.fontWeight,padding:Q.padding,rotation:p.rotation,rotationCenterX:p.rotationCenterX,rotationCenterY:p.rotationCenterY,textAlign:p.textAlign,textBaseline:p.textBaseline,x:p.x,y:p.y}),d.set(R,vn.toCanvas(p))}let M=C[0];for(let R=0;R<a;R++)M+=f[R].spacing,R!==0&&(M+=C[R]);const T=[this.lineNodeBBox(),He.merge(d.values()),new He(0,0,M*c,0)];let L=0;if(t.enabled){const R=He.merge(T);L=o?R.height:R.width,T.push(this.titleBBox(this.scale.domain,L))}const I=He.merge(T);return this.layoutCrossLines(),{bbox:I,spacing:L,depthLabelMaxSize:C,tickLabelLayout:u}}update(){if(!this.computedLayout)return;this.moduleCtx.animationManager.skipCurrentBatch();const{tickScale:e,tick:t,gridLine:i,gridLength:n,visibleRange:s,tickTreeLayout:o}=this;if(!o)return;const{depthLabelMaxSize:r,spacing:a}=this.computedLayout,{depth:l}=o,c=this.getDepthOptionsMap(l),{position:u,horizontal:d,gridPadding:p}=this,f=u==="bottom"||u==="right"?-1:1,m=p,v=f*n-p;let b;if(e.step>Jx){const x={nice:!1,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0};b=e.ticks(x,void 0,s).ticks}else b=[];const C=b.map((x,w)=>({index:e.findIndex(x),tickId:Xo(w,...x),translation:Math.round(e.convert(x))}));this.gridLineGroupSelection.update(i.enabled&&n?this.calculateGridLines(C,m,v):[]),this.gridFillGroupSelection.update(i.enabled&&n?this.calculateGridFills(C,m,v):[]),this.tickLineGroupSelection.update(t.enabled?b.map((x,w)=>{const{tickId:M,translation:T}=C[w],L=this.tickNodes?.get(x),I=L==null?l-1:Math.min(uTe(L),l-1),R=this.depthOptions[I]?.tick;let O=r[0];for(let W=0;W<=I;W++)O+=c[W].spacing,W!==0&&(O+=r[W]);const _=R?.stroke??t.stroke,B=R?.enabled===!1?0:R?.width??t.width,V=-f*O,[j,K,Y,G]=d?[T,T,0,V]:[0,V,T,T];return{tickId:M,offset:T,x1:j,y1:Y,x2:K,y2:G,stroke:_,strokeWidth:B,lineDash:void 0}}):[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateGridFills(),this.updateTickLines(),this.updateTitle(this.scale.domain,a),this.updateCrossLines(),this.resetSelectionNodes()}calculateLayout(){const{depthLabelMaxSize:e,tickLabelLayout:t,spacing:i,bbox:n}=this.computeLayout();return this.computedLayout={depthLabelMaxSize:e,tickLabelLayout:t,spacing:i},{bbox:n,niceDomain:this.scale.domain}}onGridVisibilityChange(){super.onGridVisibilityChange(),this.tickLabelGroupSelection.clear()}updateScale(){super.updateScale(),this.tickScale.range=this.scale.range,this.scale.paddingOuter=this.scale.paddingInner/2}processData(){const{direction:e}=this,t=this.boundSeries.filter(l=>l.visible).flatMap(l=>l.getDomain(e));this.dataDomain={domain:Mg(t)??this.filterDuplicateArrays(t),clipped:!1},this.isReversed()&&this.dataDomain.domain.reverse();const i=this.dataDomain.domain.map(LY),{layout:n,tickNodes:s}=lTe(i);this.tickTreeLayout=n,this.tickNodes=s;const o=[];for(const l of this.tickTreeLayout.nodes)l.leafCount||l.refId==null||o.push(this.dataDomain.domain[l.refId]);const r=pwe(this.dataDomain.domain,o);this.scale.domain=r;const a=r.map(LY);a.push([""]),this.tickScale.domain=a}filterDuplicateArrays(e){const t=new Set;return e.filter(i=>{const n=ft(i)?JSON.stringify(i):i;return t.has(n)?!1:(t.add(n),!0)})}};ny.className="GroupedCategoryAxis";ny.type="grouped-category";E([F],ny.prototype,"depthOptions",2);function uTe(e){let t=0,i=e;for(;i?.index===0;)t+=1,i=i.parent;return t}function LY(e){return BI(St(e)&&"value"in e?e.value:e)}var dTe={2:(e,t)=>Math.log2(t),[Math.E]:(e,t)=>Math.log(t),10:(e,t)=>Math.log10(t)},hTe=(e,t)=>Math.log(t)/Math.log(e);function bF(e,t,i){const n=Math.min(...t),s=dTe[e]??hTe;return n>=0?s(e,i):-s(e,-i)}var pTe={[Math.E]:(e,t)=>Math.exp(t),10:(e,t)=>t>=0?10**t:1/10**-t},gTe=(e,t)=>e**t;function SF(e,t,i){const n=Math.min(...t),s=pTe[e]??gTe;return n>=0?s(e,i):-s(e,-i)}var NV=class Zie extends mi{constructor(t=[1,10],i=[0,1]){super(t,i),this.type="log",this.defaultClamp=!0,this.base=10,this.log=n=>bF(this.base,this.domain,n),this.pow=n=>SF(this.base,this.domain,n)}static is(t){return t instanceof Zie}transform(t){const[i,n]=Es(this.domain);return i>=0!=n>=0?Number.NaN:i>=0?Math.log(t):-Math.log(-t)}transformInvert(t){const[i,n]=Es(this.domain);return i>=0!=n>=0?Number.NaN:i>=0?Math.exp(t):-Math.exp(-t)}toDomain(t){return t}niceDomain(t,i=this.domain){if(i.length<2)return[];const{base:n}=this,[s,o]=i,r=s>o?Math.ceil:Math.floor,a=s>o?Math.floor:Math.ceil,l=SF(n,i,r(bF(n,i,s))),c=SF(n,i,a(bF(n,i,o)));return[l,c]}ticks({interval:t,tickCount:i=mi.defaultTickCount},n=this.domain,s){if(!n||n.length<2||i<1)return;const o=this.base,[r,a]=n,l=Math.min(r,a),c=Math.max(r,a);let u=this.log(l),d=this.log(c);if(t){const b=L=>L>=l&&L<=c,C=Math.min(Math.abs(t),Math.abs(d-u)),{ticks:x,count:w,firstTickIndex:M}=UE(u,d,C,s),T=x.map(this.pow).filter(b);if(!oS(T.length,this.getPixelRange()))return{ticks:T,count:w,firstTickIndex:M}}if(!Ixe(o)||d-u>=i){const b=Math.min(d-u,i),{ticks:C,count:x,firstTickIndex:w}=hD(u,d,b,void 0,void 0,s);return{ticks:C.map(this.pow),count:x,firstTickIndex:w}}const p=[],f=l>0;u=Math.floor(u)-1,d=Math.round(d)+1;const m=Pm(this.range)/i;let v=1/0;for(let b=u;b<=d;b++){const C=this.convert(this.pow(b+1));for(let x=1;x<o;x++){const w=f?x:o-x+1,M=this.pow(b)*w,T=this.convert(M),L=Math.abs(v-T),I=Math.abs(T-C),R=L>=m&&I>=m;M>=l&&M<=c&&(x===1||R||p.length===0)&&(p.push(M),v=T)}}return Pte(p,f,s)}},ym=class C_ extends mi{constructor(){super([0,1],[0,1]),this.type="number"}static is(t){return t instanceof C_}static getTickStep(t,i,n){const{interval:s,tickCount:o=mi.defaultTickCount,minTickCount:r,maxTickCount:a}=n;return s??Jw(t,i,o,r,a)}toDomain(t){return t}ticks({interval:t,tickCount:i=mi.defaultTickCount,minTickCount:n,maxTickCount:s},o=this.domain,r){if(!o||o.length<2||i<1||!o.every(Number.isFinite))return{ticks:[],count:0,firstTickIndex:0};const[a,l]=o;if(t){const c=Math.abs(t);if(!oS((l-a)/c,this.getPixelRange()))return UE(a,l,c,r)}return hD(a,l,i,n,s,r)}niceDomain(t,i=this.domain){if(i.length<2)return[];const{tickCount:n=mi.defaultTickCount}=t;let[s,o]=i;if(n===1)[s,o]=_te(s,o);else if(n>1){const r=s>o?Math.ceil:Math.floor,a=s>o?Math.floor:Math.ceil,l=4;for(let c=0;c<l;c++){const u=s,d=o,p=C_.getTickStep(s,o,t),[f,m]=i;if(s=r(f/p)*p,o=a(m/p)*p,s===u&&o===d)break}}return[s,o]}},Oa=class extends gD{constructor(e,t=new ym){super(e,t)}hasDefinedDomain(){const{min:e,max:t}=this;return e!=null&&t!=null&&e<t}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:n,clipped:s}=LV(e,t,i);return{domain:n,clipped:s}}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:n,seriesId:s,legendItemName:o,key:r,source:a,property:l,domain:c,boundSeries:u}=t;return{type:"number",value:e,datum:n,seriesId:s,legendItemName:o,key:r,source:a,property:l,domain:c,boundSeries:u,fractionDigits:i}}};Oa.className="NumberAxis";Oa.type="number";E([F],Oa.prototype,"min",2);E([F],Oa.prototype,"max",2);var sy=class extends Oa{normaliseDataDomain(e){const{min:t,max:i}=this,{extent:n,clipped:s}=LV(e,t,i);return n[0]<0&&n[1]>0||e[0]<0&&e[1]>0?(fe.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:s}):n[0]===0||n[1]===0||e[0]===0||e[1]===0?(fe.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:s}):{domain:n,clipped:s}}set base(e){this.scale.base=e}get base(){return this.scale.base}constructor(e){super(e,new NV)}};sy.className="LogAxis";sy.type="log";var BS=class extends pt{constructor(){super(...arguments),this.enabled=!1,this.label=new Vi,this.tick=new Jm}};E([F],BS.prototype,"enabled",2);E([F],BS.prototype,"label",2);E([F],BS.prototype,"tick",2);var wh=class extends gD{constructor(e){super(e,new rS),this.parentLevel=new BS,this.min=void 0,this.max=void 0}get _unit(){}set _unit(e){fe.warnOnce("To use 'unit', use an axis with type 'unit-time' instead of 'time'.")}hasDefinedDomain(){const{min:e,max:t}=this;return e!=null&&t!=null&&e<t}isCategoryLike(){return!1}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}normaliseDataDomain(e){return OV(e,this.min,this.max)}processData(){super.processData();const{boundSeries:e,direction:t,min:i,max:n}=this;this.minimumTimeGranularity=qie(e,t,i,n)}tickFormatParams(e,t,i,n){n??(n=gV(t));const s=fV(e),o=lh(n),r=og(n),a=Qw(n);return{type:"date",unit:o,step:r,epoch:a,truncateDate:s}}datumFormatParams(e,t,i,n,s){if(typeof e=="number"&&(e=new Date(e)),n==null){const{minimumTimeGranularity:b}=this,C=WE(e);b!=null&&Ur(b)<Ur(C)?n=b:n=C}const{datum:o,seriesId:r,legendItemName:a,key:l,source:c,property:u,domain:d,boundSeries:p}=t,f=lh(n),m=og(n),v=Qw(n);return{type:"date",value:e,datum:o,seriesId:r,legendItemName:a,key:l,source:c,property:u,domain:d,boundSeries:p,unit:f,step:m,epoch:v,style:s}}};wh.className="TimeAxis";wh.type="time";E([F],wh.prototype,"parentLevel",2);E([F],wh.prototype,"min",2);E([F],wh.prototype,"max",2);E([F,_n("_unit")],wh.prototype,"unit",2);function qie(e,t,i,n){const s=e.reduce((o,r)=>Math.min(r.minTimeInterval()??1/0,o),1/0);return Number.isFinite(s)?dD(s):Qie(e,t,i,n)?.unit}function Qie(e,t,i,n){let s=1/0,o=-1/0,r,a=0;const l=[];for(const p of e){if(!p.visible)continue;const{domain:f}=OV(p.getDomain(t),void 0,void 0);if(f.length===0)continue;const m=f[0].valueOf(),v=f.at(-1).valueOf();l.push(m,v),s=Math.min(s??1/0,m,v),o=Math.max(o??-1/0,m,v);const b=Math.abs(v-m);if(b===0)continue;const C=p.dataCount();if(a=Math.max(a,C),C<=1)continue;const x=b/(C-1);r=Math.min(r??1/0,x)}if(s=Math.min(s,i?.valueOf()??1/0,n?.valueOf()??1/0),o=Math.max(o,i?.valueOf()??-1/0,n?.valueOf()??-1/0),!Number.isFinite(s)||!Number.isFinite(o))return;r??(r=Math.abs(o-s)),r=Math.min(r,fTe(l));const c=dD(r);let u=r/Ur(c);a<=2?u=Math.floor(u):u=Math.round(u),u=Math.max(u,1);const d=u===1?void 0:bl(c,s);return{unit:c,step:u,epoch:d}}function fTe(e){e.sort((i,n)=>i-n);let t=1/0;for(let i=1;i<e.length;i++){const n=e[i-1],s=e[i];s-n>0&&(t=Math.min(t,Math.abs(s-n)))}return t}function OV(e,t,i){let n=!1;typeof t=="number"&&(t=new Date(t)),typeof i=="number"&&(i=new Date(i));const s=Mg(e)?.map(a=>new Date(a));if(s==null)return{domain:t!=null&&i!=null&&t.valueOf()<=i.valueOf()?[t,i]:[],clipped:!1};let[o,r]=s;return t instanceof Date&&(n||(n=t>o),o=t),i instanceof Date&&(n||(n=i<r),r=i),o>r?{domain:[],clipped:!1}:{domain:[o,r],clipped:n}}var Jie=class extends OS{calculateGridLine({index:e,tickId:t,translation:i},n,s,o,r){const{gridLine:a,horizontal:l,interval:c,range:u}=this;if(c.placement!=="between")return super.calculateGridLine({index:e,tickId:t,translation:i},n,s,o,r);const d=r[n-1],p=d?i-(i-d.translation)/2:u[0],[f,m,v,b]=l?[p,Math.max(s,o),p,Math.min(s,o)]:[Math.min(s,o),p,Math.max(s,o),p],{style:C}=a,{stroke:x,strokeWidth:w=0,lineDash:M}=C[e%C.length]??{};return{tickId:t,offset:p,x1:f,y1:m,x2:v,y2:b,stroke:x,strokeWidth:w,lineDash:M}}calculateGridFills(e,t,i){return this.interval.placement!=="between"?super.calculateGridFills(e,t,i):e.map((n,s)=>this.calculateGridFill(n,s,n.index,t,i,e))}calculateGridFill({tickId:e,translation:t},i,n,s,o,r){const{gridLine:a,horizontal:l,interval:c,range:u}=this;if(c.placement!=="between")return super.calculateGridFill({tickId:e,translation:t},i,n,s,o,r);const d=r[i-1],p=r[i+1],f=d?t-(t-d.translation)/2:u[0],m=p?t+(p.translation-t)/2:u[1],[v,b,C,x]=l?[f,Math.max(s,o),m,Math.min(s,o)]:[Math.min(s,o),f,Math.max(s,o),m],{fill:w,fillOpacity:M}=a.style[n%a.style.length]??{};return{tickId:e,x1:v,y1:b,x2:C,y2:x,fill:w,fillOpacity:M}}calculateTickLine({isPrimary:e,tickId:t,translation:i},n,s,o){const{horizontal:r,interval:a,primaryTick:l,range:c,tick:u}=this;if(a.placement!=="between")return super.calculateTickLine({isPrimary:e,tickId:t,translation:i},n,s,o);const d=e&&l?.enabled?l:u,p=-s*this.getTickSize(d),f=o[n-1],m=f?i-(i-f.translation)/2:c[0],[v,b,C,x]=r?[m,0,m,p]:[0,m,p,m],{stroke:w,width:M}=d;return{tickId:t,offset:m,x1:v,y1:b,x2:C,y2:x,stroke:w,strokeWidth:M,lineDash:void 0}}},Ag=class extends Jie{constructor(e){super(e,new Vp,!1),this.parentLevel=new BS,this.min=void 0,this.max=void 0,this.unit=void 0,this.defaultUnit=void 0}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}hasDefinedDomain(){const{min:e,max:t}=this;return e!=null&&t!=null&&e<t}isCategoryLike(){return!0}processData(){super.processData();let e;const{domain:t}=this.dataDomain;if(t.length===2&&t[0].valueOf()===t[1].valueOf())e=WE(t[0]);else{const{boundSeries:i,direction:n,min:s,max:o}=this;e=Qie(i,n,s,o)}yr(this.defaultUnit,e)||(this.defaultUnit=e)}updateScale(){super.updateScale(),this.scale.interval=this.unit??this.defaultUnit}normaliseDataDomain(e){return OV(e,this.min,this.max)}tickFormatParams(e,t,i,n){n??(n=gV(t));const s=fV(e),o=lh(n),r=og(n),a=Qw(n);return{type:"date",unit:o,step:r,epoch:a,truncateDate:s}}datumFormatParams(e,t,i,n,s){const o=this.unit??this.defaultUnit??"millisecond";n??(n=o);const{datum:r,seriesId:a,legendItemName:l,key:c,source:u,property:d,domain:p,boundSeries:f}=t,m=lh(n),v=og(n),b=Qw(n);return{type:"date",value:bl(o,e),datum:r,seriesId:a,legendItemName:l,key:c,source:u,property:d,domain:p,boundSeries:f,unit:m,step:v,epoch:b,style:s}}};Ag.className="UnitTimeAxis";Ag.type="unit-time";E([F],Ag.prototype,"parentLevel",2);E([F],Ag.prototype,"min",2);E([F],Ag.prototype,"max",2);E([F],Ag.prototype,"unit",2);var Xv={...xh,...PS(ve),type:ue(ht("number")),label:IV,crosshair:Dg(!0)},Zv={...xh,...PS(ve),type:ue(ht("log")),base:si(Hw,Yt(e=>e!==1,"not equal to 1")),label:IV,crosshair:Dg(!0)},qv={...xh,...PS(lt(ve,Lu),!0),type:ue(ht("time")),label:LD,parentLevel:gL,crosshair:Dg(!0,!0)},Qv={...xh,type:ue(ht("category")),label:ED,paddingInner:Ke,paddingOuter:Ke,groupPaddingInner:Ke,crosshair:Dg(),bandHighlight:PD,interval:{...RV,placement:Me("on","between")}},Jv={...xh,type:ue(ht("grouped-category")),label:ED,crosshair:Dg(),bandHighlight:PD,paddingInner:Ke,groupPaddingInner:Ke,depthOptions:Sn({label:{enabled:te,avoidCollisions:te,wrapping:Me("never","always","hyphenate","on-space"),truncate:te,rotation:ve,spacing:ve,...fi,...ac},tick:{enabled:te,stroke:Fe,width:re}},"depth options objects array")},eb={...xh,type:ue(ht("unit-time")),unit:lt(pL,RD),label:LD,parentLevel:gL,paddingInner:Ke,paddingOuter:Ke,groupPaddingInner:Ke,crosshair:Dg(!0,!0),bandHighlight:PD,min:si(lt(ve,Lu),Il("max")),max:si(lt(ve,Lu),Rl("min")),interval:EV},mTe={type:"axis",name:"number",chartType:"cartesian",options:Xv,create:e=>new Oa(e)},yTe={type:"axis",name:"log",chartType:"cartesian",options:Zv,create:e=>new sy(e)},vTe={type:"axis",name:"time",chartType:"cartesian",options:qv,create:e=>new wh(e)},bTe={type:"axis",name:"category",chartType:"cartesian",options:Qv,create:e=>new OS(e)},STe={type:"axis",name:"grouped-category",chartType:"cartesian",options:Jv,create:e=>new ny(e)},CTe={type:"axis",name:"unit-time",chartType:"cartesian",options:eb,create:e=>new Ag(e)},tb={...xh,type:ue(ht("ordinal-time")),paddingInner:Ke,paddingOuter:Ke,groupPaddingInner:Ke,label:LD,parentLevel:gL,interval:EV,crosshair:Dg(!0,!0),bandHighlight:PD},ene={...iy,...PS(ve),type:ue(ht("angle-number")),crossLines:Sn(bu),startAngle:ve,endAngle:ve,label:{...Ch,orientation:Me("fixed","parallel","perpendicular"),format:Ic}},FV={...iy,type:ue(ht("angle-category")),shape:Me("polygon","circle"),crossLines:Sn(bu),startAngle:ve,endAngle:ve,paddingInner:Ke,groupPaddingInner:Ke,label:{...Ch,orientation:Me("fixed","parallel","perpendicular")}};FV.innerRadiusRatio=Ke;var tne={...iy,...PS(ve),type:ue(ht("radius-number")),shape:Me("polygon","circle"),positionAngle:ve,innerRadiusRatio:Ke,crossLines:Sn({...bu,label:{...Om,positionAngle:ve}},"cross-line options"),title:{enabled:te,text:Jo,spacing:re,formatter:Qo(Jo),...fi},label:{...Ch,format:Ic}},ine={...iy,type:ue(ht("radius-category")),positionAngle:ve,innerRadiusRatio:Ke,paddingInner:Ke,paddingOuter:Ke,groupPaddingInner:Ke,label:Ch,crossLines:Sn({...bu,label:{...Om,positionAngle:ve}},"cross-line options"),title:{enabled:te,text:Jo,spacing:re,formatter:Qo(Jo),...fi}},nne=Fn(Yi,Yi),xTe=ri({...Ie,...ze,...je,marker:wg}),sne={showInMiniChart:te,connectMissingData:te,interpolation:uL,label:Si,styler:xTe,marker:vc,tooltip:ti,shadow:ju,...Vt,...ze,...Ie,...je,highlight:nne,segmentation:vg},one={...sne,...Rc,highlight:nne,type:ue(ht("area")),xKey:ue(J),yKey:ue(J),xName:J,yName:J,legendItemName:J,stacked:te,stackGroup:J,normalizedTo:ve},rne=Fn(Pu,Pu),PY=ri({...ze,...Ie,...je,cornerRadius:re}),BV={direction:Me("horizontal","vertical"),showInMiniChart:te,cornerRadius:re,styler:PY,itemStyler:PY,crisp:te,label:{...Si,placement:Me("inside-center","inside-start","inside-end","outside-start","outside-end"),spacing:re},errorBar:TD,shadow:ju,tooltip:ti,...Vt,highlight:rne,...ze,...Ie,...je,segmentation:vg};BV.sparklineMode=Xe(te);var bL={...BV,...Rc,highlight:rne,type:ue(ht("bar")),xKey:ue(J),yKey:ue(J),xName:J,yName:J,direction:Me("horizontal","vertical"),grouped:te,stacked:te,stackGroup:J,normalizedTo:ve,legendItemName:J,errorBar:cL};bL.pickOutsideVisibleMinorAxis=Xe(te);bL.focusPriority=Xe(ve);var ane={title:J,domain:it(ve),maxSize:re,showInMiniChart:te,label:{placement:Me("top","right","bottom","left"),...Si},tooltip:ti,styler:ri({...vc,maxSize:re}),maxRenderedItems:ve,...Vt,..._e(vc,["enabled"]),highlight:Fn(Yi,Yi)},wTe={...ane,...Rc,type:ue(ht("bubble")),xKey:ue(J),yKey:ue(J),sizeKey:ue(J),labelKey:J,xName:J,yName:J,sizeName:J,labelName:J,legendItemName:J,highlight:Fn(Yi,Yi)},lne={showInMiniChart:te,cornerRadius:re,label:Si,tooltip:ti,shadow:ju,...Vt,...ze,...Ie,...je,highlight:Fn(Yi,Yi),areaPlot:te,aggregation:Me("count","sum","mean"),bins:it(it(ve)),binCount:re},DTe={...Rc,...lne,type:ue(ht("histogram")),xKey:ue(J),yKey:J,xName:J,yName:J},cne=Fn(Yi,Im),MTe=ri({...Ie,...je,marker:wg}),_V={title:J,showInMiniChart:te,connectMissingData:te,interpolation:uL,label:Si,styler:MTe,marker:vc,tooltip:ti,errorBar:TD,...Vt,...Ie,...je,highlight:cne,segmentation:uwe};_V.sparklineMode=Xe(te);var SL={..._V,...Rc,highlight:cne,type:ue(ht("line")),xKey:ue(J),yKey:ue(J),xName:J,yName:J,stacked:te,stackGroup:J,normalizedTo:ve,legendItemName:J,errorBar:cL};SL.pickOutsideVisibleMinorAxis=Xe(te);SL.focusPriority=Xe(ve);var une={title:J,showInMiniChart:te,label:{placement:Me("top","right","bottom","left"),...Si},tooltip:ti,errorBar:TD,styler:ri(vc),maxRenderedItems:ve,...Vt,..._e(vc,["enabled"]),highlight:Fn(Yi,Yi)},ATe={...une,...Rc,type:ue(ht("scatter")),xKey:ue(J),yKey:ue(J),labelKey:J,xName:J,yName:J,labelName:J,legendItemName:J,errorBar:cL,highlight:Fn(Yi,Yi)},dne=Fn(Yi,Yi),zV={...Vt,radiusMin:re,radiusMax:re,rotation:ve,outerRadiusOffset:ve,outerRadiusRatio:Ke,hideZeroValueSectorsInLegend:te,sectorSpacing:re,cornerRadius:re,itemStyler:ri({...ze,...Ie,...je,cornerRadius:re}),title:{enabled:te,text:J,showInLegend:te,spacing:re,...fi},calloutLabel:{enabled:te,offset:ve,minAngle:re,avoidCollisions:te,formatter:Qo(Jo),format:J,itemStyler:ri({enabled:te,...ac,...fi}),...ac,...fi},sectorLabel:{enabled:te,positionOffset:ve,positionRatio:Ke,formatter:Qo(Jo),format:J,itemStyler:ri({enabled:te,...ac,...fi}),...ac,...fi},calloutLine:{colors:it(Fe),length:re,strokeWidth:re,itemStyler:ri({color:Fe,length:re,strokeWidth:re})},fills:it(Nl),strokes:it(Fe),tooltip:ti,shadow:ju,highlight:dne,...je,..._e(ze,["fill"]),..._e(Ie,["stroke"])},oy={...zV,...Rc,type:ue(ht("pie")),angleKey:ue(J),radiusKey:J,calloutLabelKey:J,sectorLabelKey:J,legendItemKey:J,angleName:J,radiusName:J,calloutLabelName:J,sectorLabelName:J,highlight:dne};oy.defaultColorRange=Xe(it(it(Fe)));oy.defaultPatternFills=Xe(it(Fe));oy.title._enabledFromTheme=Xe(te);oy.calloutLabel._enabledFromTheme=Xe(te);oy.sectorLabel._enabledFromTheme=Xe(te);var hne={...zV,innerRadiusOffset:ve,innerRadiusRatio:Ke,innerCircle:{fill:J,fillOpacity:Ke},innerLabels:{spacing:re,...fi,...ac}},kTe={...hne,...oy,type:ue(ht("donut")),innerLabels:Sn({text:ue(J),spacing:re,...fi,...ac},"inner label options array")},_S={lineStyle:Me("solid","dashed","dotted"),...je},ry={...ze,...Ie,...je},OD={visible:te,locked:te,readOnly:te,handle:ry,...fi},CL={position:Me("top","center","bottom"),alignment:Me("left","center","right"),...fi},pne={position:Me("top","inside","bottom"),alignment:Me("left","center","right"),...fi},TTe={enabled:te,cornerRadius:re,formatter:cn,...fi,...ze,...Ie,...je},ITe={visible:te,..._S,...Ie},gne={divider:Ie,...ze,...Ie,...fi},NY={handle:ry,statistics:gne,..._S,...ze,...Ie},nR={visible:te,locked:te,readOnly:te,extendStart:te,extendEnd:te,handle:ry,text:CL,..._S,...Ie},x_={visible:te,locked:te,readOnly:te,axisLabel:TTe,handle:ry,text:CL,..._S,...Ie},GV={visible:te,locked:te,readOnly:te,extendStart:te,extendEnd:te,handle:ry,text:pne,background:ze,..._S,...Ie},fne={...GV},mne={...GV,middle:ITe},w_={label:fi,showFill:te,isMultiColor:te,strokes:it(Fe),rangeStroke:Fe,bands:Me(4,6,10),...nR},yne={...ze,...Ie,...OD},vne={...ze,...Ie,...OD},bne={...ze,...Ie,...OD,background:{...ze,...Ie}},D_={visible:te,locked:te,readOnly:te,handle:ry,...ze},jT={visible:te,locked:te,readOnly:te,extendStart:te,extendEnd:te,handle:ry,text:CL,background:ze,statistics:gne,..._S,...Ie},Sne={visible:te,up:NY,down:NY},zS={enabled:te,axesButtons:{enabled:te,axes:Me("x","y","xy")},toolbar:{enabled:te,padding:re,buttons:Sn({...im,value:Me("line-menu","fibonacci-menu","text-menu","shape-menu","measurer-menu","line","horizontal-line","vertical-line","parallel-channel","disjoint-channel","fibonacci-retracement","fibonacci-retracement-trend-based","text","comment","callout","note","clear")},"annotation toolbar buttons array")},optionsToolbar:{enabled:te,buttons:it(lt(Ki({...im,value:ue(Me("line-stroke-width","line-style-type","line-color","fill-color","text-color","text-size","delete","settings"))}),Ki({...im,value:ue(Me("lock")),checkedOverrides:im})))}};zS.data=Xe(Mc);zS.xKey=Xe(J);zS.volumeKey=Xe(J);zS.snap=Xe(te);var VV={...ze,...Ie,...je,cornerRadius:re,whisker:{...Ie,...je},cap:{lengthRatio:Ke}},M_={...VV,opacity:Ke},OY=ri({...ze,...Ie,...je,cornerRadius:re,whisker:{...Ie,...je},cap:{lengthRatio:Ke}}),Cne={direction:Me("horizontal","vertical"),showInMiniChart:te,styler:OY,itemStyler:OY,tooltip:ti,...Vt,...VV,highlight:Fn(M_,M_),segmentation:vg},A_={cornerRadius:re,wick:{...Ie,...je},...ze,...Ie,...je},FY={...A_,opacity:Ke},xne={item:{up:A_,down:A_},itemStyler:ri({...ze,...Ie,...je,cornerRadius:re,wick:{...Ie,...je}}),showInMiniChart:te,tooltip:ti,...Vt,highlight:Fn(FY,FY)},wne={fills:it(Nl),strokes:it(Fe),label:{spacing:re,maxWidth:re,...Si},link:{tension:Ke,itemStyler:ri({...ze,...Ie,...je,tension:Ke}),...ze,...Ie,...je},node:{width:re,spacing:re,itemStyler:ri({...ze,...Ie,...je}),...ze,...Ie,...je},tooltip:ti,...Vt},Dne={direction:Me("horizontal","vertical"),fills:it(Nl),strokes:it(Fe),label:{spacing:re,placement:Me("before","middle","after"),...Si},stageLabel:{placement:Me("before","after"),format:Ic,...Ch},tooltip:ti,..._e(Vt,["showInLegend"]),..._e(ze,["fill"]),..._e(Ie,["stroke"]),...je,highlight:EJ(Im)},Mne={direction:Me("horizontal","vertical"),fills:it(Nl),strokes:it(Fe),itemStyler:ri({...ze,...Ie,...je}),spacingRatio:Ke,crisp:te,dropOff:{enabled:te,...ze,...Ie,...je},stageLabel:{placement:Me("before","after"),format:Ic,...Ch},label:Si,tooltip:ti,shadow:ju,..._e(Vt,["showInLegend"]),..._e(ze,["fill"]),..._e(Ie,["stroke"]),...je},Ane={title:J,textAlign:Me("left","center","right"),verticalAlign:Me("top","middle","bottom"),itemPadding:re,itemStyler:ri({...ze,...Ie}),showInMiniChart:te,label:rg,tooltip:ti,...Vt,...Ie},kne={showInMiniChart:te,itemStyler:ri({...Ie,...je}),item:{up:{...Ie,...je},down:{...Ie,...je}},tooltip:ti,...Vt,highlight:Fn(Im,Im)},Tne={maxStrokeWidth:re,itemStyler:ri({...Ie,...je}),sizeDomain:it(re),label:Si,tooltip:ti,...Vt,...Ie,...je,highlightStyle:{...Vt.highlightStyle,...Ie},highlight:Fn(Im,Im)},Ine={...Ie,...je},Rne={colorRange:it(Fe),maxSize:re,sizeDomain:it(re),label:{placement:Me("top","bottom","left","right"),...Si},tooltip:ti,...Vt,..._e(vc,["enabled"]),highlightStyle:{...Vt.highlightStyle,...ze,...Ie},highlight:Fn(Yi,Yi)},Ene={colorRange:it(Fe),padding:re,itemStyler:ri({...ze,...Ie,...je}),label:rg,tooltip:ti,...Vt,...ze,...Ie,...je,highlightStyle:{...Vt.highlightStyle,...ze,...Ie},highlight:Fn(Yi,Yi)},Lne={...Vt,...ze,...Ie,...je},Fm=ri({...ze,...Ie,...je,cornerRadius:re}),Pne={cornerRadius:re,styler:Fm,itemStyler:Fm,label:Si,tooltip:ti,...Vt,...ze,...Ie,...je,highlight:Fn(Pu,Pu)},Nne={direction:Me("horizontal","vertical"),aspectRatio:re,spacing:re,reverse:te,itemStyler:ri({...ze,...Ie,...je}),fills:it(Nl),strokes:it(Fe),label:Si,stageLabel:{spacing:re,placement:Me("before","after"),...Si},tooltip:ti,shadow:ju,...Vt,..._e(ze,["fill"]),..._e(Ie,["stroke"]),...je},One={connectMissingData:te,marker:vc,styler:ri({marker:wg,...ze,...Ie,...je}),label:Si,tooltip:ti,...Vt,...ze,...Ie,...je,highlight:Fn(Yi,Yi)},Fne={connectMissingData:te,marker:vc,styler:ri({marker:wg,...Ie,...je}),label:Si,tooltip:ti,...Vt,...Ie,...je,highlight:Fn(Yi,Im)},Bne={cornerRadius:re,styler:Fm,itemStyler:Fm,label:Si,tooltip:ti,...Vt,...ze,...Ie,...je,highlight:Fn(Pu,Pu)},_ne={cornerRadius:re,columnWidthRatio:Ke,maxColumnWidthRatio:Ke,styler:Fm,itemStyler:Fm,label:Si,tooltip:ti,...Vt,...ze,...Ie,...je,highlight:Fn(Pu,Pu)},RTe={marker:vc,...Ie,...je},BY={marker:{enabled:te,...wg},...Ie,...je},_Y={marker:wg,...Ie,...je},zne={showInMiniChart:te,connectMissingData:te,interpolation:uL,label:{...Si,placement:Me("inside","outside"),spacing:re},tooltip:ti,shadow:ju,...Vt,...ze,...RTe,item:{low:{...BY},high:{...BY}},styler:ri({...ze,item:{low:{..._Y},high:{..._Y}}}),highlight:Fn(Yi,Yi),segmentation:vg,invertedStyle:{enabled:te,...ze}},zY=ri({...ze,...Ie,...je,cornerRadius:re}),Gne={direction:Me("horizontal","vertical"),grouped:te,showInMiniChart:te,cornerRadius:re,styler:zY,itemStyler:zY,label:{...Si,placement:Me("inside","outside"),spacing:re},tooltip:ti,shadow:ju,...Vt,...ze,...Ie,...je,highlight:Fn(Pu,Pu),segmentation:vg},Vne={fills:it(Nl),strokes:it(Fe),label:{...Si,spacing:re,placement:Me("left","right","center"),edgePlacement:Me("inside","outside")},link:{itemStyler:ri({...ze,...Ie,...je}),...ze,...Ie,...je},node:{width:re,spacing:re,minSpacing:si(re,owe("spacing")),alignment:Me("left","center","right","justify"),verticalAlignment:Me("top","bottom","center"),sort:Me("data","ascending","descending","auto"),itemStyler:ri({...ze,...Ie,...je}),...ze,...Ie,...je},tooltip:ti,...Vt},Hne={fills:it(Nl),strokes:it(Fe),colorRange:it(Fe),sectorSpacing:re,cornerRadius:re,padding:re,itemStyler:ri({...ze,...Ie}),label:{spacing:re,...rg},secondaryLabel:rg,tooltip:ti,..._e(Vt,["highlight","showInLegend"]),..._e(ze,["fill"]),..._e(Ie,["stroke"]),highlightStyle:{label:{color:Fe},secondaryLabel:{color:Fe},...ze,...Ie}},Wne={fills:it(Nl),strokes:it(Fe),colorRange:it(Fe),itemStyler:ri({...ze,...Ie}),group:{gap:re,padding:re,cornerRadius:re,textAlign:Me("left","center","right"),interactive:te,label:{...Si,spacing:re},...ze,...Ie},tile:{gap:re,padding:re,cornerRadius:re,textAlign:Me("left","center","right"),verticalAlign:Me("top","middle","bottom"),label:{...Si,spacing:re,lineHeight:re,minimumFontSize:re,wrapping:Me("never","always","hyphenate","on-space"),overflowStrategy:Me("ellipsis","hide")},secondaryLabel:{...Si,lineHeight:re,minimumFontSize:re,wrapping:Me("never","always","hyphenate","on-space"),overflowStrategy:Me("ellipsis","hide")},...ze,...Ie},tooltip:ti,..._e(Vt,["highlight","showInLegend"]),highlightStyle:{group:{label:{color:Fe},...ze,...Ie},tile:{label:{color:Fe},secondaryLabel:{color:Fe},...ze,...Ie}}},CF={name:J,cornerRadius:re,itemStyler:ri({...ze,...Ie,...je,cornerRadius:re}),label:{...Si,placement:Me("inside-start","inside-center","inside-end","outside-start","outside-end"),spacing:re},tooltip:ti,shadow:ju,...ze,...Ie,...je},jne={direction:Me("horizontal","vertical"),showInMiniChart:te,item:{positive:CF,negative:CF,total:CF},line:{enabled:te,...Ie,...je},tooltip:ti,...Vt},QA=Ki({__type:ue(ht("date")),value:lt(J,ve)},"a serializable date object"),GY={width:re,height:re,grip:te,fill:Fe,stroke:Fe,strokeWidth:re,cornerRadius:re},ii={enabled:te,height:re,spacing:re,cornerRadius:ve,mask:{fill:Fe,fillOpacity:Ke,stroke:Fe,strokeWidth:re},minHandle:GY,maxHandle:GY,miniChart:{enabled:te,padding:{top:re,bottom:re},label:{enabled:te,avoidCollisions:te,spacing:re,format:Ic,formatter:Qo(Jo),interval:{minSpacing:re,maxSpacing:re,values:Mc,step:ve},...fi},series:at}},zo={number:{..._e(Xv,["type","crossLines"]),top:_e(Xv,["type","crossLines","position"]),right:_e(Xv,["type","crossLines","position"]),bottom:_e(Xv,["type","crossLines","position"]),left:_e(Xv,["type","crossLines","position"]),crossLines:_e(kd,["type"])},log:{..._e(Zv,["type","crossLines"]),top:_e(Zv,["type","crossLines","position"]),right:_e(Zv,["type","crossLines","position"]),bottom:_e(Zv,["type","crossLines","position"]),left:_e(Zv,["type","crossLines","position"]),crossLines:_e(kd,["type"])},category:{..._e(Qv,["type","crossLines"]),top:_e(Qv,["type","crossLines","position"]),right:_e(Qv,["type","crossLines","position"]),bottom:_e(Qv,["type","crossLines","position"]),left:_e(Qv,["type","crossLines","position"]),crossLines:_e(kd,["type"])},time:{..._e(qv,["type","crossLines"]),top:_e(qv,["type","crossLines","position"]),right:_e(qv,["type","crossLines","position"]),bottom:_e(qv,["type","crossLines","position"]),left:_e(qv,["type","crossLines","position"]),crossLines:_e(kd,["type"])},"unit-time":{..._e(eb,["type","crossLines"]),top:_e(eb,["type","crossLines","position"]),right:_e(eb,["type","crossLines","position"]),bottom:_e(eb,["type","crossLines","position"]),left:_e(eb,["type","crossLines","position"]),crossLines:_e(kd,["type"])},"grouped-category":{..._e(Jv,["type"]),top:_e(Jv,["type","position"]),right:_e(Jv,["type","position"]),bottom:_e(Jv,["type","position"]),left:_e(Jv,["type","position"]),crossLines:_e(kd,["type"])},"ordinal-time":{..._e(tb,["type","crossLines"]),top:_e(tb,["type","crossLines","position"]),right:_e(tb,["type","crossLines","position"]),bottom:_e(tb,["type","crossLines","position"]),left:_e(tb,["type","crossLines","position"]),crossLines:_e(kd,["type"])}},kv={"angle-category":{..._e(FV,["type","crossLines"]),crossLines:_e(bu,["type"])},"angle-number":{..._e(ene,["type","crossLines"]),crossLines:_e(bu,["type"])},"radius-category":{..._e(ine,["type","crossLines"]),crossLines:{..._e(bu,["type"]),label:{...Om,positionAngle:ve}}},"radius-number":{..._e(tne,["type","crossLines"]),crossLines:{..._e(bu,["type"]),label:{...Om,positionAngle:ve}}}},ci={visible:Xe(te)},ETe={common:{...yt,navigator:ii,axes:{...zo,...kv},annotations:{...zS,line:nR,"horizontal-line":x_,"vertical-line":x_,"disjoint-channel":fne,"parallel-channel":mne,"fibonacci-retracement":w_,"fibonacci-retracement-trend-based":w_,callout:yne,comment:vne,note:bne,text:OD,arrow:nR,"arrow-up":D_,"arrow-down":D_,"date-range":jT,"price-range":jT,"date-price-range":jT,"quick-date-price-range":Sne},chartToolbar:{enabled:te},initialState:{legend:Sn({visible:te,seriesId:J,itemId:J,legendItemName:J},"legend state array"),zoom:{rangeX:{start:lt(ve,QA),end:lt(ve,QA)},rangeY:{start:lt(ve,QA),end:lt(ve,QA)},ratioX:{start:Ke,end:Ke},ratioY:{start:Ke,end:Ke},autoScaledAxes:it(ht("y"))}}},line:{...yt,axes:zo,series:_V,navigator:ii,...ci},scatter:{...yt,axes:zo,series:une,navigator:ii,...ci,paired:Xe(te)},bubble:{...yt,axes:zo,series:ane,navigator:ii,...ci},area:{...yt,axes:zo,series:sne,navigator:ii,...ci},bar:{...yt,axes:zo,series:BV,navigator:ii,...ci},"box-plot":{...yt,axes:zo,series:Cne,navigator:ii,...ci},candlestick:{...yt,axes:zo,series:xne,navigator:ii,...ci},"cone-funnel":{...yt,axes:zo,series:Dne,navigator:ii,...ci},funnel:{...yt,axes:zo,series:Mne,navigator:ii,...ci},ohlc:{...yt,axes:zo,series:kne,navigator:ii,...ci},histogram:{...yt,axes:_e(zo,["category","grouped-category","unit-time","ordinal-time"]),series:lne,navigator:ii,...ci},heatmap:{...yt,axes:zo,series:Ane,navigator:ii,...ci},waterfall:{...yt,axes:zo,series:jne,navigator:ii,...ci},"range-bar":{...yt,axes:zo,series:Gne,navigator:ii,...ci},"range-area":{...yt,axes:zo,series:zne,navigator:ii,...ci},donut:{...yt,series:hne,navigator:ii,...ci},pie:{...yt,series:zV,navigator:ii,...ci},"radar-line":{...yt,axes:kv,series:Fne,navigator:ii,...ci},"radar-area":{...yt,axes:kv,series:One,navigator:ii,...ci},"radial-bar":{...yt,axes:kv,series:Bne,navigator:ii,...ci},"radial-column":{...yt,axes:kv,series:_ne,navigator:ii,...ci},nightingale:{...yt,axes:kv,series:Pne,navigator:ii,...ci},sunburst:{...yt,series:Hne,navigator:ii,...ci},treemap:{...yt,series:Wne,navigator:ii,...ci},"map-shape":{...yt,series:Ene,navigator:ii,...ci},"map-line":{...yt,series:Tne,navigator:ii,...ci},"map-marker":{...yt,series:Rne,navigator:ii,...ci},"map-shape-background":{...yt,series:Lne,navigator:ii,...ci},"map-line-background":{...yt,series:Ine,navigator:ii,...ci},sankey:{...yt,series:Vne,navigator:ii,...ci},chord:{...yt,series:wne,navigator:ii,...ci},pyramid:{...yt,series:Nne,navigator:ii,...ci},"radial-gauge":{...yt,...tR,targets:_e(hL,["value"]),tooltip:{...tR.tooltip,...yt.tooltip}},"linear-gauge":{...yt,...eR,targets:_e(dL,["value"]),tooltip:{...eR.tooltip,...yt.tooltip}}};function JA(e,t){const i={};for(const n of Reflect.ownKeys(e))i[n]=t(e[n],n,e);return i}var LTe=JA(ETe,function e(t,i){if(IT(i))return t;if(ph(t))return lt(t,FI,IT);if(St(t))return lt(Ki(OI in t?JA(t,n=>St(n)?JA(n,e):n):JA(t,e)),FI,IT);throw new Error(`Invalid theme override value: ${String(t)}`)}),ro={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Df={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},PTe=class extends LS{getDefaultColors(){return{fills:ro,fillsFallback:Object.values(ro),strokes:Df,sequentialColors:Na(ro),divergingColors:[ro.ORANGE,ro.YELLOW,ro.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"],secondDivergingColors:[ro.GREEN,ro.YELLOW,ro.RED],secondHierarchyColors:[],up:{fill:ro.GREEN,stroke:Df.GREEN},down:{fill:ro.RED,stroke:Df.RED},neutral:{fill:ro.GRAY,stroke:Df.GRAY},altUp:{fill:ro.BLUE,stroke:Df.BLUE},altDown:{fill:ro.ORANGE,stroke:Df.ORANGE},altNeutral:{fill:ro.GRAY,stroke:Df.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(dn,ro.BLUE),e.set(ys,ro.BLUE),e}},ao={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Mf={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},NTe=class extends yc{getDefaultColors(){return{...super.getDefaultColors(),fills:ao,fillsFallback:Object.values(ao),strokes:Mf,sequentialColors:Na(ao),divergingColors:[ao.ORANGE,ao.YELLOW,ao.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"],secondDivergingColors:[ao.GREEN,ao.YELLOW,ao.RED],secondHierarchyColors:[],up:{fill:ao.GREEN,stroke:Mf.GREEN},down:{fill:ao.RED,stroke:Mf.RED},neutral:{fill:ao.GRAY,stroke:Mf.GRAY},altUp:{fill:ao.BLUE,stroke:Mf.BLUE},altDown:{fill:ao.ORANGE,stroke:Mf.ORANGE},altNeutral:{fill:ao.GRAY,stroke:Mf.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(dn,ao.BLUE),e.set(ys,ao.BLUE),e}},k_=fo(()=>new yc),OTe=Ct.create(!0,"perf"),ic=(e,t,i)=>{OTe("[CACHE] ChartTheme",e,t.name,i)},HV={"ag-default-dark":fo(()=>new LS),"ag-sheets-dark":fo(()=>new zke,ic),"ag-polychroma-dark":fo(()=>new Bke,ic),"ag-vivid-dark":fo(()=>new PTe,ic),"ag-material-dark":fo(()=>new Oke,ic),"ag-financial-dark":fo(()=>new Pke,ic),"ag-default":k_,"ag-sheets":fo(()=>new Gke,ic),"ag-polychroma":fo(()=>new _ke,ic),"ag-vivid":fo(()=>new NTe,ic),"ag-material":fo(()=>new Fke,ic),"ag-financial":fo(()=>new Nke,ic)},sR=fo(FTe,ic);function FTe(e){if(e instanceof yc)return e;if(!GTe(e))return k_();if(e==null||typeof e=="string"){const s=HV[e??"ag-default"];if(s)return s();throw new Error(`Cannot find theme \`${e}\`.`)}const{cleared:t,invalid:i}=yo(BTe(e),_Te,"theme");for(const s of i)fe.warnOnce(String(s));const n=t?.baseTheme?sR(t.baseTheme):k_();return t?new n.constructor(t):n}function BTe(e){if(!St(e)||!St(e.baseTheme))return e;let t=e,i,n;const s=[];for(;typeof t=="object";)i??(i=t.palette),n??(n=t.params),t.overrides&&s.push(t.overrides),t=t.baseTheme;return{baseTheme:t,overrides:oi(...s),params:n,palette:i}}var _Te={baseTheme:lt(J,gE),overrides:LTe,params:{accentColor:Fe,axisColor:Fe,backgroundColor:Fe,borderColor:Fe,borderRadius:ve,chartBackgroundColor:Fe,chartPadding:ve,focusShadow:J,foregroundColor:Fe,fontFamily:_B,fontSize:ve,fontWeight:lt(J,ve),gridLineColor:Fe,popupShadow:J,subtleTextColor:Fe,textColor:Fe,chromeBackgroundColor:Fe,chromeFontFamily:_B,chromeFontSize:ve,chromeFontWeight:lt(J,ve),chromeSubtleTextColor:Fe,chromeTextColor:Fe,buttonBackgroundColor:Fe,buttonBorder:te,buttonFontWeight:ve,buttonTextColor:Fe,inputBackgroundColor:Fe,inputBorder:te,inputTextColor:Fe,menuBackgroundColor:Fe,menuBorder:te,menuTextColor:Fe,panelBackgroundColor:Fe,panelSubtleTextColor:Fe,tooltipBackgroundColor:Fe,tooltipBorder:te,tooltipTextColor:Fe,tooltipSubtleTextColor:Fe,crosshairLabelBackgroundColor:Fe,crosshairLabelTextColor:Fe},palette:{fills:it(Nl),strokes:it(Fe),up:{fill:lt(Fe,$O),stroke:Fe},down:{fill:lt(Fe,$O),stroke:Fe},neutral:{fill:lt(Fe,$O),stroke:Fe}}},zTe=Me("ag-default","ag-default-dark","ag-sheets","ag-sheets-dark","ag-polychroma","ag-polychroma-dark","ag-vivid","ag-vivid-dark","ag-material","ag-material-dark","ag-financial","ag-financial-dark");function GTe(e){const{invalid:t}=yo({theme:e},{theme:lt(zTe,gE)});for(const i of t)fe.warnOnce(String(i));return t.length===0}var Jp={isEnterprise:!1},Rn="path",el="pathArray",Kn="default",pl="override",nc="user",fp="userPartial",Tv="operation",Iv="operationValue",WV="dependency",xF="autoEnable",VY="autoEnableValue",HY="prune",WY="childrenSource";function jV(e){return En(e)&&e>=0&&e<=1}function kx(e,t){let i=e;for(const n of t){if(!(typeof n=="string"&&i!=null&&(typeof i=="object"||Array.isArray(i))&&n in i))return!1;i=i[n]}return!0}function Vo(e,t){let i=e;for(const n of t){if(!(typeof n=="string"&&i!=null&&(typeof i=="object"||Array.isArray(i))&&n in i))return;i=i[n]}return i}function Rv(e,t,i){const n=t.length;if(n===0)return;let s=e;const o=n-1,r=t[o];for(let a=0;a<o;a++){const l=t[a],c=t[a+1];let u=s[l];(u==null||!PI(u))&&(u=Number.isNaN(Number(c))?{}:[],s[l]=u),s=u}s[r]=i}var VTe=/^\d+$/;function Une(e,t=0){let i=0;for(let n=e.length-1;n>=0;n--){const s=e[n];if(VTe.test(s)&&(i++,i>t))return n}return-1}function aS(e,t=0){const i=Une(e,t);return Number(e[i])}function ay(e,t,i){const n=t.split("/");let s=[...e];t.startsWith("/")&&(s=[],n.shift());let o=!1;for(const r of n){if(r==="..")s.pop(),o||s.pop();else if(r===".")s.pop();else if(r==="$index"){const a=aS(e);if(Number.isNaN(a))return Mu;s.push(`${a}`)}else if(r==="$prevIndex"){const a=aS(e);if(Number.isNaN(a)||Number(a)<=0)return Mu;s.push(`${Number(a)-1}`)}else if(r.startsWith("$")){const a=i?.[r.slice(1)];if(a==null)return Mu;s.push(a)}else r.length!==0&&s.push(r);o=r===".."}return s}var Mu=Symbol("unresolvable-path"),Aa=Symbol("resolved-to-branch");function bw(e,t){if(e==null||typeof e!="object"||Array.isArray(e)||(t??(t=Object.keys(e)),t.length===0))return;const i=t[0];if(Kne.has(i))return{operation:i,values:Array.isArray(e[i])?e[i]:[e[i]]}}function HTe(e,t,i){const n=bw(e.getVertexValue(i));switch(n?.operation){case"$path":{const[s]=n.values,o=e.getPathArray(t),r=ay(o,s);return r===Mu?void 0:e.findVertexAtPath(r)}case"$value":return t}}var WTe={$cacheMax:jTe};function jTe(e,t,i){const[n]=i,s=e.getPathArray(t),o=e.getCachedValue(s,"$cacheMax"),r=e.resolveVertexValue(t,n);if(typeof r!="number")return o;if(typeof o!="number")return e.setCachedValue(s,"$cacheMax",r),r;const a=Math.max(o,r);return e.setCachedValue(s,"$cacheMax",a),a}var UTe={$hasSeriesType:{dependencies:wF,resolve:$Te},$isChartType:{dependencies:wF,resolve:YTe},$isSeriesType:{dependencies:wF,resolve:KTe}};function wF(e,t,i){const n=e.findVertexAtPath(["series","0","type"]);n&&e.addEdge(t,n,WV)}function $Te(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n),o=e.getResolvedPath(["series"]);if(!Array.isArray(o))return!1;for(const r of o)if(r.type===s)return!0;return!1}function KTe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);return e.getResolvedPath(["series","0","type"])===s}function YTe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n),o=e.getResolvedPath(["series","0","type"]);if(typeof o!="string")return!1;switch(s){case"cartesian":return Rs.isCartesian(o);case"polar":return Rs.isPolar(o);case"standalone":return Rs.isStandalone(o)}return!1}var XTe={$foregroundBackgroundMix:ZTe,$foregroundOpacity:qTe,$interpolate:QTe,$isGradient:JTe,$isImage:eIe,$isPattern:tIe,$mix:iIe};function ZTe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n),o=e.getParamValue("foregroundColor"),r=e.getParamValue("backgroundColor");if(typeof o=="string"&&typeof r=="string"&&jV(s))return Di.mix(Di.fromString(o),Di.fromString(r),1-s).toString();Ct.inDevelopmentMode(()=>fe.warnOnce(`\`$foregroundBackgroundMix\` json operation failed on [${String(s)}}}] at [${e.getPathArray(t).join(".")}], expecting a number between 0 and 1.`))}function qTe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n),o=e.getParamValue("foregroundColor");if(typeof o=="string"&&jV(s)){const r=Di.fromString(o);return new Di(r.r,r.g,r.b,s).toString()}Ct.inDevelopmentMode(()=>fe.warnOnce(`\`$foregroundOpacity\` json operation failed on [${String(s)}}}] at [${e.getPathArray(t).join(".")}], expecting a number between 0 and 1.`))}function QTe(e,t,i){const[n,s]=i,o=e.resolveVertexValue(t,n),r=e.resolveVertexValue(t,s);if(!(!ft(o)||!En(r)))return Di.interpolate(o.map(a=>Di.fromString(a)),r).map(a=>a.toString())}function JTe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);return Ol(s)}function eIe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);return Em(s)}function tIe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);return ah(s)}function iIe(e,t,i){const[n,s,o]=i,r=e.resolveVertexValue(t,n),a=e.resolveVertexValue(t,s),l=e.resolveVertexValue(t,o),c=e.getPathArray(t),u=`\`$mix\` json operation failed on [${String(r)}, ${String(a)}, ${String(l)}] at [${c.join(".")}], expecting`,d=`${u} two colors and a number between 0 and 1.`;if(typeof a!="string"||!jV(l)){Ct.inDevelopmentMode(()=>fe.warnOnce(d));return}if(typeof r=="string")try{return Di.mix(Di.fromString(r),Di.fromString(a),l).toString()}catch{Ct.inDevelopmentMode(()=>fe.warnOnce(d));return}if(!Ol(r)){Ct.inDevelopmentMode(()=>fe.warnOnce(d));return}let p=r.colorStops;try{p=p?.map(f=>{let m;return typeof f.color=="string"&&(m=Di.mix(Di.fromString(f.color),Di.fromString(a),l).toString()),{...f,color:m}})}catch{Ct.inDevelopmentMode(()=>fe.warnOnce(`${u} a gradient, a color and a number between 0 and 1.`));return}return{...r,colorStops:p}}var nIe={$rem:sIe};function sIe(e,t,i){const[n]=i,s=e.getVertexValue(n),o=e.getParamValue("fontSize");if(typeof o=="number"&&typeof s=="number")return Math.round(s*o);Ct.inDevelopmentMode(()=>fe.warnOnce(`\`$rem\` json operation failed on [${String(s)}] at [${e.getPathArray(t).join(".")}], expecting a number.`))}var oIe={$and:rIe,$eq:aIe,$greaterThan:lIe,$if:cIe,$lessThan:uIe,$not:dIe,$or:hIe,$switch:pIe};function rIe(e,t,i){for(const n of i)if(!e.resolveVertexValue(t,n))return!1;return!0}function aIe(e,t,i){let n,s=!0;for(const o of i){const r=e.resolveVertexValue(t,o);if(s)n=r,s=!1;else if(r!==n)return!1}return!0}function lIe(e,t,i){const[n,s]=i;return e.resolveVertexValue(t,n)>e.resolveVertexValue(t,s)}function cIe(e,t,i){const[n,s,o]=i,a=e.resolveVertexValue(t,n)?s:o,l=e.neighboursWithEdgeValue(a,Rn);if(l)for(const c of l)e.addEdge(t,c,Rn);return e.resolveVertexValue(t,a)}function uIe(e,t,i){const[n,s]=i;return e.resolveVertexValue(t,n)<e.resolveVertexValue(t,s)}function dIe(e,t,i){const[n]=i;if(n)return!e.resolveVertexValue(t,n)}function hIe(e,t,i){for(const n of i)if(e.resolveVertexValue(t,n))return!0;return!1}function pIe(e,t,i){const[n,s,...o]=i,r=e.resolveVertexValue(t,n);for(const a of o){const l=e.getVertexValue(a);if(!Array.isArray(l))continue;const[c,u]=l;if(r===c||Array.isArray(c)&&c.includes(r))return u}return e.resolveVertexValue(t,s)}var gIe={$isUserOption:fIe,$isThemeOverride:mIe,$palette:yIe,$mapPalette:vIe,$path:{dependencies:UY,resolve:bIe},$pathString:{dependencies:UY,resolve:SIe},$ref:CIe};function fIe(e,t,i){const[n,s,o]=i,r=e.neighboursWithEdgeValue(n,Rn);if(r)for(const a of r){const l=e.findNeighbour(a,Kn);if(l&&jY(e,t,l))return e.resolveVertexValue(t,s)}else if(jY(e,t,n))return e.resolveVertexValue(t,s);return e.resolveVertexValue(t,o)}function jY(e,t,i){const n=e.resolveVertexValue(t,i);if(!Nn(n))throw new Error(`\`$isUserOption\` json operation failed on [${String(n)}], expecting a string.`);const s=e.getPathArray(t),o=ay(s,n);return o===Mu?!1:e.hasUserOption(o)}function mIe(e,t,i){const[n,s,o]=i,r=e.resolveVertexValue(t,n);if(!Nn(r))throw new Error(`\`$isThemeOverride\` json operation failed on [${String(r)}], expecting a string.`);const a=e.getPathArray(t),l=ay(a,r);if(l!==Mu)return e.hasThemeOverride(l)?e.resolveVertexValue(t,s):e.resolveVertexValue(t,o)}var $ne=new Set(["fill","fillFallback","stroke","gradient","range2"]);function yIe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);if(!Nn(s))return;if($ne.has(s)){const r=e.getPathArray(t),a=aS(r);if(Number.isNaN(a))return;switch(s){case"fill":return du(e.palette.fills,1,a)[0];case"fillFallback":return du(e.palette.fillsFallback,1,a)[0];case"stroke":return du(e.palette.strokes,1,a)[0];case"gradient":return du(e.palette.sequentialColors,1,a)[0];case"range2":return du(e.palette.fills,2,a)}return}if(s==="gradients")return e.palette.sequentialColors;if(s==="type")return e.paletteType;const o=Vo(e.palette,s.split("."));return Array.isArray(o)?[...o]:typeof o=="object"?{...o}:o}function vIe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);if(!Nn(s))return;if($ne.has(s)){const r=e.getPathArray(t);let a=aS(r),l=0;const c=["series","0","type"];for(let u=0;u<a;u++){c[1]=`${u}`;const d=e.getResolvedPath(c);(d==="map-shape-background"||d==="map-line-background")&&l++}if(a-=l,Number.isNaN(a))return;switch(s){case"fill":return du(e.palette.fills,1,a)[0];case"fillFallback":return du(e.palette.fillsFallback,1,a)[0];case"stroke":return du(e.palette.strokes,1,a)[0];case"gradient":return du(e.palette.sequentialColors,1,a)[0];case"range2":return du(e.palette.fills,2,a)}return}if(s==="gradients")return e.palette.sequentialColors;if(s==="type")return e.paletteType;const o=Vo(e.palette,s.split("."));return Array.isArray(o)?[...o]:typeof o=="object"?{...o}:o}function UY(e,t,i){const[n]=i,s=e.getVertexValue(n);if(Nn(s)){const o=e.getPathArray(t),r=ay(o,s);if(r===Mu)return;const a=e.findVertexAtPath(r);a&&e.addEdge(t,a,WV)}}function bIe(e,t,i){const n=i.length>1,s=i.length>2,[o,r,a]=i,l=e.resolveVertexValue(t,o),c=s?e.resolveVertexValue(t,a):null;if(!Nn(l))throw new Error(`\`$path\` json operation failed on [${String(l)}], expecting a string.`);const u=e.getPathArray(t),d=ay(u,l);if(d===Mu)return;const p=c?Vo(c,d):e.getResolvedPath(d);if(p!=null)return p;if(n)return e.resolveVertexValue(t,r)}function SIe(e,t,i){const[n,s]=i,o=e.resolveVertexValue(t,n);if(!Nn(o))throw new Error(`\`$path\` json operation failed on [${String(o)}], expecting a string.`);let r;s&&(r=e.graftAndResolveOrphan(t,s));const a=e.getPathArray(t),l=ay(a,o,r);if(l===Mu)throw new Error(`Unresolvable path [${o}] at [${a.join(".")}]`);return l}function CIe(e,t,i){const[n]=i,s=e.getVertexValue(n);return e.getParamValue(s)}var xIe={$apply:wIe,$applyCycle:DIe,$applySwitch:MIe,$applyTheme:AIe,$findFirstSiblingNotOperation:kIe,$map:TIe,$merge:IIe,$omit:RIe,$size:EIe,$shallow:PIe,$shallowSimple:LIe,$value:NIe};function wIe(e,t,i){const[n,s,o,r]=i,a=e.getVertexValue(n);if(!bi(a))return;const l=s?e.getVertexValue(s):void 0,c=e.neighboursWithEdgeValue(t,Rn),u=c&&c.length>0;if(!u&&l==null)return Aa;const d=o?e.resolveVertexValue(t,o):void 0,p=r?e.resolveVertexValue(t,r):void 0;if(!u&&l!=null)if(bw(l)){const f=e.resolveVertexValue(t,s);bi(f)&&e.graftObject(t,f,[d,p])}else e.graftObject(t,l,[d,p]);if(!u)return Aa;for(const f of c){const m=e.neighboursWithEdgeValue(f,Rn);if(!m||m.length===0){const v=e.addVertex({});e.addEdge(f,v,Kn)}else e.graftObject(f,a,[d,p])}return Aa}function DIe(e,t,i){const[n,s,o]=i,r=e.resolveVertexValue(t,n);if(typeof r!="number")return;const a=e.getPathArray(t),l=e.dangerouslyGetUserOption(a),c=e.hasThemeOverride(a),u=l==null?void 0:nc,d=l??e.resolveVertexValue(t,s);if(!Array.isArray(d))return;const p=o?e.getVertexValue(o):void 0;for(let f=0;f<r;f++){const m=d[f%d.length];m!=null&&((l||!c)&&e.graftValue(t,`${f}`,m,void 0,u),p&&e.graftValue(t,`${f}`,p,m,u))}return Aa}function MIe(e,t,i){const[n,s,...o]=i,r=e.resolveVertexValue(t,n);for(const a of o){const l=e.getVertexValue(a);if(!Array.isArray(l))continue;const[c,u]=l;if(r===c||Array.isArray(c)&&c.includes(r))return e.graftObject(t,u,[],Kn),Aa}return e.resolveVertexValue(t,s)}function AIe(e,t,i){const[n,s,o]=i;let r=e.getVertexValue(n);if(typeof r=="string"&&(r=[r]),!Array.isArray(r))return;const a=e.neighboursWithEdgeValue(t,Rn),l=o?e.getVertexValue(o):[],c=Array.isArray(l)?new Set(l):new Set;if(!a)return Aa;for(const u of a){const d=e.graftAndResolveOrphan(u,s);for(const p of r){const f=ay([],p,d);f!==Mu&&e.graftConfig(u,f,c)}}return Aa}function kIe(e,t,i){const[n]=i,s=e.getPathArray(t),o=Une(s);if(o<0)return e.resolveVertexValue(t,n);const r=s.slice(0,o),a=e.findVertexAtPath(r);if(!a)return e.resolveVertexValue(t,n);const l=e.neighboursWithEdgeValue(a,Rn);if(l)for(let c=0;c<l.length;c++){if(`${c}`===s[o])continue;const u=r.concat([`${c}`,...s.slice(o+1)]),d=e.findVertexAtPath(u);if(!d)continue;const p=e.findNeighbourValue(d,nc);if(p!=null)return p;const f=e.findNeighbourValue(d,pl);if(f!=null)return f}return e.resolveVertexValue(t,n)}function TIe(e,t,i){const[n,s]=i,o=e.getVertexValue(n),r=e.resolveVertexValue(t,s);if(!Array.isArray(r))return;const a=e.neighboursWithEdgeValue(t,Rn);if(a&&a.length>0)return;let l=0;for(const c of r)e.graftValue(t,`${l}`,o,c),l++;return Aa}function IIe(e,t,i){for(const n of i){const s=e.resolveVertexValue(t,n);bi(s)&&e.graftObject(t,s)}return Aa}function RIe(e,t,i){const[n,s]=i;let o=e.getVertexValue(n);if(!Array.isArray(o)){const a=HTe(e,t,s);if(!a)return;o=e.resolveVertexValue(a,n)}const r=e.resolveVertexValue(t,s);if(!(!Array.isArray(o)||!bi(r)))return _e(r,o)}function EIe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);return PI(s)?"length"in s?s.length:Object.keys(s).length:0}function LIe(e,t,i){const n=[];for(const s of i)n.push(e.getVertexValue(s));return n}function PIe(e,t,i){const n=e.getPathArray(t),s=e.hasUserOption(n);if(!s&&i.length===1)return e.resolveVertexValue(t,i[0]);const o=[];for(const r of i)o.push(e.getVertexValue(r));return s?(e.prune(t,[pl,Kn]),Aa):(e.graftObject(t,o),Aa)}function NIe(e,t,i){const[n]=i,s=e.getVertexValue(n),o=e.getPathArray(t);if(s==="$index")return aS(o);if(s==="$parentIndex")return aS(o,1);if(s==="$1")return e.resolveValue$1(o)}var OIe={$isEven:FIe,$mul:BIe,$round:_Ie};function FIe(e,t,i){const[n]=i,s=e.resolveVertexValue(t,n);return Number.isNaN(Number(s))?!1:Number(s)%2===0}function BIe(e,t,i){let n;for(const s of i){const o=e.resolveVertexValue(t,s);n==null?n=Number(o):n*=Number(o)}return n}function _Ie(e,t,i){const[n]=i;if(n)return Math.round(Number(e.resolveVertexValue(t,n)))}var ew={...WTe,...UTe,...XTe,...nIe,...gIe,...oIe,...OIe,...xIe},Kne=new Set(Object.keys(ew));function Tx(e){return Kne.has(e)}var Pi=Ct.create("opts","options-graph"),zIe=fo(GIe);function GIe(e,t){return Pi.group("OptionsGraph.constructor()",()=>new Yne(e.config,t,e.params,e.palette,e.overrides,e.getTemplateParameters()))}var kg=class co extends Iwe{constructor(t={},i={},n=void 0,s={},o=void 0,r=new Map){super(Rn,Tv,new Set([fp,nc])),this.config=t,this.userOptions=i,this.palette=s,this.overrides=o,this.internalParams=r,this.edgePriority=[...co.EDGE_PRIORITY],this.graftEdge=co.GRAFT_EDGE,this.resolvedParams={},this.resolvedAnnotations={},this.value$1=new Map,this.cachedPathVertices=new Map,this.hasUnsafeClearKeys=!1,this.rollbackVertices=[],this.rollbackEdgesFrom=[],this.rollbackEdgesTo=[],this.rollbackEdgesValue=[],this.isRollingBack=!1,this.EMPTY_PATH_ARRAY_VERTEX=this.addVertex([]),this.root=this.addVertex("root"),this.params=this.addVertex("params"),this.annotations=this.addVertex("annotations"),this.paletteType=St(i?.theme)?vie(i.theme?.palette):"inbuilt";const a=i.series?.[0]?.type??"line";i.axes??(i.axes=vl.predictAxes(a,i.series?.[0],i.data)??vl.cloneDefaultAxes(a)??[]),Pi("build user"),this.buildGraphFromObject(this.root,nc,_e(i,["theme"])),Pi("build defaults"),this.buildGraphFromObject(this.root,Kn,_e(t[a],co.COMPLEX_KEYS));const l=o?_e(o[a],co.COMPLEX_KEYS):{};Object.keys(l).length>0&&(Pi("build series overrides"),this.buildGraphFromObject(this.root,pl,l));const c=o?_e(o.common,co.COMPLEX_KEYS):{};Object.keys(c).length>0&&(Pi("build common overrides"),this.buildGraphFromObject(this.root,pl,Rs.isCartesian(a)?c:_e(c,["zoom","navigator"]))),n&&(Pi("build params"),this.buildGraphFromObject(this.params,Kn,n));const u=this.findNeighbourWithValue(this.root,"axes",Rn),d=this.findNeighbourWithValue(this.root,"series",Rn);u&&(Pi("build axes"),this.buildGraphFromObject(u,Kn,{$applyTheme:[["/$seriesType/axes/$axisType/$position","/$seriesType/axes/$axisType"],{seriesType:{$path:["/series/0/type","line"]},axisType:{$path:["./type","category"]},position:{$path:["./position"]}},["top","right","bottom","left"]]})),d&&(Pi("build series"),this.buildGraphFromObject(d,Kn,{$applyTheme:["/$seriesType/series",{seriesType:{$path:["./type","line"]}}]}));const p=_e(t[a]?.annotations??{},co.ANNOTATIONS_OPTIONS_KEYS);Object.keys(p).length>0&&(Pi("build annotations type config"),this.buildGraphFromObject(this.annotations,Kn,p));const f=_e(o?.common?.annotations??{},co.ANNOTATIONS_OPTIONS_KEYS);Object.keys(f).length>0&&(Pi("build annotations type overrides"),this.buildGraphFromObject(this.annotations,pl,f));const m=OT(t[a]?.annotations??{},co.ANNOTATIONS_OPTIONS_KEYS);Object.keys(m).length>0&&(Pi("build annotations config"),this.buildGraphFromObject(this.root,Kn,{annotations:m}));const v=OT(o?.common?.annotations??{},co.ANNOTATIONS_OPTIONS_KEYS);Object.keys(v).length>0&&(Pi("build annotations overrides"),this.buildGraphFromObject(this.root,pl,{annotations:v})),this.buildDependencyGraph()}clear(){Pi.group("OptionsGraph.clear()",()=>{super.clear(),this.cachedPathVertices.clear(),this.root=void 0,this.params=void 0,this.annotations=void 0,Pi("cleared")})}clearSafe(){this.hasUnsafeClearKeys||this.clear()}resolve(){return Pi.group("OptionsGraph.resolve()",()=>(this.resolved={},this.resolvedParams={},this.resolvedAnnotations={},Pi("resolve params"),this.resolveVertex(this.params,this.resolvedParams),Pi("resolve annotations"),this.resolveVertex(this.annotations,this.resolvedAnnotations),Pi("resolve root"),this.resolveVertex(this.root),Pi("resolved root",this.resolved),Pi("vertex count",this.getVertexCount()),Pi("edge count",this.getEdgeCount()),this.resolved))}resolveParams(){return this.resolvedParams}resolveAnnotationThemes(){return this.resolvedAnnotations}addVertex(t){const i=super.addVertex(t);return this.isRollingBack&&this.rollbackVertices.push(i),i}addEdge(t,i,n){const s=(this.neighboursWithEdgeValue(t,n)?.indexOf(i)??-1)!==-1;this.isRollingBack&&!s&&(this.rollbackEdgesFrom.push(t),this.rollbackEdgesTo.push(i),this.rollbackEdgesValue.push(n)),super.addEdge(t,i,n)}resolvePartial(t,i,n){if(!i||!this.root)return;const{permissivePath:s,proxyPaths:o}=n??{},r=Object.keys(i);if(Pi.check()&&console.groupCollapsed(`OptionsGraph.resolvePartial() - ${t.join(".")} [${r}]`),r.length===0)return{};const a=this.findVertexAtPath(t);if(!a){if(s)return;throw new Error(`Could not find vertex in OptionsGraph at path [${t.join(".")}].`)}const l=this.findNeighbour(a,el);if(this.userPartialOptions={},Rv(this.userPartialOptions,t,i),o)for(const f of Object.keys(o)){const m=o[f],v=Vo(i,[f]);v!=null&&(Rv(i,m,v),Rv(this.userPartialOptions,[...t,...m],v),delete i[f],delete this.userPartialOptions[f])}this.graftEdge=fp,this.edgePriority=[fp,...co.EDGE_PRIORITY],this.snapshot(),this.buildGraphFromObject(a,fp,i,l);for(const f of r){const m=o?.[f]?this.findVertexAtPath([...t,...o[f]]):this.findNeighbourWithValue(a,f,Rn);m&&this.refreshPendingProcessingEdges(m)}this.buildDependencyGraph();const c={};if(this.resolveVertex(a,c),this.rollback(),this.graftEdge=co.GRAFT_EDGE,this.edgePriority=co.EDGE_PRIORITY,this.userPartialOptions=void 0,o)for(const f of Object.keys(o)){const m=o[f],v=Vo(c,[...t,...m]);Rv(c,[...t,f],v)}const u=Vo(c,t),p=n?.pick??!0?OT(Vo(c,t),r):u;return Pi("vertex count",this.getVertexCount()),Pi("edge count",this.getEdgeCount()),Pi("resolved partial",p),Pi.check()&&console.groupEnd(),p}findVertexAtPath(t){const i=t.join(".");if(this.cachedPathVertices.has(i))return this.cachedPathVertices.get(i);const n=this.findVertexAlongEdge(this.root,t,Rn);if(n)return this.cachedPathVertices.set(i,n),n}hasUserOption(t){if(kx(this.userOptions,t))return!0;const n=this.findVertexAtPath(t);if(n){if(this.findNeighbour(n,nc)!=null||this.findNeighbour(n,fp)!=null)return!0;const s=this.findNeighbourValue(n,WY);return s===nc||s===fp}return!1}dangerouslyGetUserOption(t){if(this.userPartialOptions){const i=Vo(this.userPartialOptions,t);if(i!=null)return i}return Vo(this.userOptions,t)}hasThemeOverride(t){if(this.overrides==null)return!1;if(t[0]==="axes"&&t.length>1){const i=this.getResolvedPath(["axes",t[1],"type"]);if(kx(this.overrides,["common","axes",i,...t.slice(2)]))return!0;const n=this.getResolvedPath(["series","0","type"]);return kx(this.overrides,[n,"axes",i,...t.slice(2)])}if(t[0]==="series"&&t.length>1){const i=this.getResolvedPath(["series",t[1],"type"]);return kx(this.overrides,[i,"series",...t.slice(2)])}return kx(this.overrides,t)}getParamValue(t){if(this.resolvedParams[t]!=null)return this.resolvedParams[t];const i=this.findVertexAlongEdge(this.params,[t],Rn);if(!i)return;const n=this.findNeighbour(i,Kn);if(!n)return;const s=this.resolveVertexValue(i,n);return this.resolvedParams[t]=s,s}getPathArray(t){return this.findNeighbourValue(t,el)??[]}getResolvedPath(t){return Vo(this.resolved,t)}getCachedValue(t,i){const n=[...t,i].join(".");return co.valueCache.get(n)}setCachedValue(t,i,n){const s=[...t,i].join(".");co.valueCache.set(s,n)}prune(t,i){this.addEdge(t,this.addVertex(i),HY)}resolveVertexValue(t,i){this.resolveVertexDependencies(i);const n=this.findNeighbourValue(i,Tv);if(n&&Tx(n)){const o=this.neighboursWithEdgeValue(i,Iv),r=ew[n],l=(typeof r=="function"?r:r.resolve)?.(this,t,o??[]);return l===Aa?void 0:l}let s=this.getVertexValue(i);if(Array.isArray(s)){const o={};this.resolveVertexChildren(i,o),s=Vo(o,this.getPathArray(t))}return this.resolveValueOrSymbol(s)}resolveValue$1(t){for(let i=t.length;i>=0;i--){const n=t.slice(0,i).join("."),s=this.value$1.get(n);if(s!=null)return s}}graftConfig(t,i,n){const s=Vo(this.config,i),o=this.findNeighbour(t,el);if(St(s)&&this.buildGraphFromObject(t,Kn,s,o,void 0,n),this.overrides){const r=Vo(this.overrides,i);St(r)&&this.buildGraphFromObject(t,pl,r,o,void 0,n);const a=Vo(this.overrides,["common",...i.slice(1)]);St(a)&&this.buildGraphFromObject(t,pl,a,o,void 0,n)}this.buildDependencyGraph()}graftObject(t,i,n,s=this.graftEdge){const o=this.findNeighbour(t,el);if(this.buildGraphFromObject(t,s,i,o),this.overrides&&n)for(const r of n){if(r==null)continue;const a=Vo(this.overrides,r);a&&this.buildGraphFromObject(t,pl,a,o)}this.buildDependencyGraph()}graftValue(t,i,n,s,o=this.graftEdge){const r=[...this.getPathArray(t),i];this.value$1.set(r.join("."),s);const a=this.findVertexAtPath(r)??this.addVertex(i);this.buildGraphFromValue(t,a,o,r,n),this.buildDependencyGraph()}graftAndResolveOrphan(t,i){const n={},s=this.addVertex(n),o=this.getPathArray(t);return this.graftAndResolveChildren(i,s,o,[]),this.resolveVertex(s,n),Vo(n,o)}buildGraphFromObject(t,i,n,s,o=co.SHALLOW_KEYS,r){const a=Object.keys(n),l=bw(n,a);if(l){const m=this.addVertex(n);this.addEdge(t,m,i),this.buildGraphFromOperation(m,i,l,s);return}if(a.length===0){this.addEdge(t,this.addVertex(Array.isArray(n)?[]:{}),i),this.buildGraphAutoEnable(t,i,n,void 0);return}const c=this.getVertexChildrenByKey(t),u=s?this.getVertexValue(s):[];let d;Array.isArray(n)&&this.addEdge(t,this.addVertex(i),WY);const p=[...u],f=u.length;for(const m of a){if(r?.has(m))continue;const v=c?.get(m)??this.addVertex(m);p[f]=m,o?.has(m)?this.buildShallowGraphFromValue(t,v,i,p,n[m]):this.buildGraphFromValue(t,v,i,p,n[m],o),m==="enabled"&&(d=v)}this.buildGraphAutoEnable(t,i,n,d)}buildGraphAutoEnable(t,i,n,s){if(i===Kn&&!s||i===nc&&s||i!==Kn&&i!==nc&&i!==fp&&i!==pl)return;let o=this.findNeighbour(t,xF);o||(o=this.addVertex(xF),this.addEdge(t,o,xF)),s&&this.addEdge(s,o,VY);const{enabled:r,_enabledFromTheme:a}=n;this.addEdge(o,this.addVertex({enabled:r,_enabledFromTheme:a,keys:Object.keys(n).length}),i)}getVertexChildrenByKey(t){const i=this.neighboursWithEdgeValue(t,Rn);if(!i)return;const n=new Map;for(const s of i)n.set(this.getVertexValue(s),s);return n}buildGraphFromValue(t,i,n,s,o,r){this.addEdge(t,i,Rn);let a=this.findNeighbour(i,el);a||(a=this.addVertex([...s]),this.addEdge(i,a,el));const l=bw(o);if(l){const c=this.addVertex(o);this.addEdge(i,c,n),this.addEdge(c,a,el),this.buildGraphFromOperation(c,n,l,a)}else if(PI(o))this.buildGraphFromObject(i,n,o,a,r);else{const c=this.findNeighbour(i,n);if(c&&this.getVertexValue(c)===o)return;const u=this.addVertex(o);this.addEdge(i,u,n)}}buildShallowGraphFromValue(t,i,n,s,o){this.addEdge(t,i,Rn);let r=this.findNeighbour(i,el);r||(r=this.addVertex([...s]),this.addEdge(i,r,el));const a=this.addVertex(o);this.addEdge(i,a,n)}buildGraphFromOperation(t,i,n,s){const o=this.addVertex(n.operation);this.addEdge(t,o,Tv);for(const r of n.values)this.buildGraphFromOperationValue(t,r,i,s)}buildGraphFromOperationValue(t,i,n,s=this.EMPTY_PATH_ARRAY_VERTEX){const o=this.addVertex(i);this.addEdge(t,s,el),this.addEdge(t,o,Iv);const r=bw(i);r?this.buildGraphFromOperation(o,n,r,s):PI(i)&&this.buildGraphFromObject(o,n,i,s)}buildDependencyGraph(){for(let t=0;t<this.pendingProcessingEdgesFrom.length;t++){const i=this.pendingProcessingEdgesFrom[t],n=this.pendingProcessingEdgesTo[t],s=this.getVertexValue(n);if(!Tx(s))continue;const o=this.neighboursWithEdgeValue(i,Iv),r=ew[s];(typeof r=="function"?void 0:r.dependencies)?.(this,i,o??[])}this.pendingProcessingEdgesFrom=[],this.pendingProcessingEdgesTo=[]}refreshPendingProcessingEdges(t){const n=this.findNeighbour(t,Kn)??t,s=this.findNeighbour(n,Tv);if(s){this.pendingProcessingEdgesFrom.push(n),this.pendingProcessingEdgesTo.push(s);const r=this.neighboursWithEdgeValue(n,Iv);if(r)for(const a of r)this.refreshPendingProcessingEdges(a)}const o=this.neighboursWithEdgeValue(t,Rn);if(o)for(const r of o)this.refreshPendingProcessingEdges(r)}resolveVertex(t,i=this.resolved,n){const s=this.getPathArray(t);this.resolveVertexInEdgePriority(t,i,s,n),this.resolveVertexAutoEnable(t,i,s),this.resolveVertexChildren(t,i,n)}resolveVertexInEdgePriority(t,i,n,s){const o=this.neighboursWithEdgeValue(t,Rn),[r]=this.edgePriority;for(const a of this.edgePriority){const l=this.findNeighbour(t,a);if(l==null)continue;const c=this.resolveVertexValueInternal(t,l);if(!(c==null&&a!==r)&&!(o&&o.length>0&&a!==r)&&!(Array.isArray(s)&&s.includes(a))){if(this.hasUnsafeClearKeys||(this.hasUnsafeClearKeys=c!=null&&co.UNSAFE_CLEAR_KEYS.has(n.at(-1))),n.length===0){if(c==null)continue;this.resolved=c}else Rv(i,n,c);break}}}resolveVertexValueInternal(t,i){this.resolveVertexDependencies(i);const n=this.findNeighbourValue(i,Tv);if(n&&Tx(n)){const s=this.neighboursWithEdgeValue(i,Iv),o=ew[n],a=(typeof o=="function"?o:o.resolve)?.(this,t,s??[]);return a===Aa?void 0:a}return this.resolveValueOrSymbol(this.getVertexValue(i))}resolveVertexAutoEnable(t,i,n){const s=this.neighboursWithEdgeValue(t,VY)?.[0];if(!s)return;const o=this.findVertexAtPath(n),r=this.findNeighbourValue(s,Kn),a=this.findNeighbourValue(s,pl),l=this.findNeighbourValue(s,nc),u=o&&this.findNeighbour(o,nc)!=null?void 0:this.findNeighbourValue(s,fp);(l!=null&&l.enabled==null||u!=null&&u.enabled==null)&&!r?._enabledFromTheme&&!a?._enabledFromTheme&&Rv(i,n,!0)}resolveVertexChildren(t,i,n){const s=this.neighboursWithEdgeValue(t,Rn);if(s){n??(n=this.findNeighbourValue(t,HY));for(const o of s){const r=this.getVertexValue(o);s.length>1&&Tx(r)||r!=="_enabledFromTheme"&&this.resolveVertex(o,i,n)}}}resolveVertexDependencies(t){const i=this.neighboursWithEdgeValue(t,WV);if(i)for(const n of i)this.resolveVertex(n)}graftAndResolveChildren(t,i,n,s){const o=this.neighboursWithEdgeValue(t,Rn);if(o)for(const r of o){const a=this.getVertexValue(r),l=[...n,a],c=[...s,a],u=this.addVertex(a),d=this.findNeighbourValue(r,Kn);this.addEdge(i,u,Rn);const p=this.addVertex(l);if(this.addEdge(u,p,el),St(d)){this.buildGraphFromObject(u,Kn,d,p);const f=this.findNeighbour(u,Kn);this.addEdge(f,this.addVertex(l),el);const m=this.findNeighbourValue(f,Tv);if(Tx(m)){const v=this.neighboursWithEdgeValue(f,Iv),b=ew[m];(typeof b=="function"?void 0:b.dependencies)?.(this,f,v??[])}}this.graftAndResolveChildren(r,u,l,c)}}resolveValueOrSymbol(t){return typeof t=="symbol"&&this.internalParams?.has(t)?this.internalParams.get(t):t}snapshot(){Pi("snapshot"),this.isRollingBack=!0}rollback(){Pi(`rollback ${this.rollbackEdgesFrom.length} edges and ${this.rollbackVertices.length} vertices`);for(let t=0;t<this.rollbackEdgesFrom.length;t++){const i=this.rollbackEdgesFrom[t],n=this.rollbackEdgesTo[t],s=this.rollbackEdgesValue[t];this.removeEdge(i,n,s)}for(const t of this.rollbackVertices)this.removeVertex(t);this.cachedPathVertices.clear(),this.rollbackVertices=[],this.rollbackEdgesFrom=[],this.rollbackEdgesTo=[],this.rollbackEdgesValue=[],this.isRollingBack=!1}};kg.EDGE_PRIORITY=[nc,pl,Kn];kg.GRAFT_EDGE=Kn;kg.SHALLOW_KEYS=new Set(["context","data","topology"]);kg.COMPLEX_KEYS=["annotations","axes","series"];kg.ANNOTATIONS_OPTIONS_KEYS=["axesButtons","data","enabled","optionsToolbar","snap","toolbar","xKey","volumeKey"];kg.UNSAFE_CLEAR_KEYS=new Set(["itemStyler","styler"]);kg.valueCache=new Map;var Yne=kg,$Y=e=>`'${e}'`,ly=class ks{constructor(t,i,n,s,o,r,a=!1,l){this.themeParameters={},this.optionMetadata=o??{},this.processedOverrides=n??{};let c=null;t instanceof ks?(c=t,this.specialOverrides=c.specialOverrides,r===void 0&&(r=Nu(c.userOptions,i,ks.JSON_DIFF_OPTS)),this.userOptions=fn(Uw(r,c.userOptions),{...ks.OPTIONS_CLONE_OPTS_SLOW,seen:[]})):(this.userOptions=fn(t??i,{...ks.OPTIONS_CLONE_OPTS_SLOW,seen:[]}),this.specialOverrides=this.specialOverridesDefaults({...s})),a&&this.removeLeftoverSymbols(this.userOptions);const u=t instanceof ks&&r?.data!==void 0&&r?.data?.length!==t.userOptions.data?.length;let d,p,f,m,v,b,C;if(!a&&r!==void 0&&ks.isFastPathDelta(r)&&c!=null&&!u?({activeTheme:d,processedOptions:p,fastDelta:f}=this.fastSetup(r,c),m=c.themeParameters,v=c.annotationThemes):(ks.perfDebug("ChartOptions.slowSetup()"),{activeTheme:d,processedOptions:p,themeParameters:m,annotationThemes:v,googleFonts:b,optionsGraph:C}=this.slowSetup(n,r,a)),this.activeTheme=d,this.processedOptions=p,this.fastDelta=f??void 0,this.themeParameters=m,this.annotationThemes=v,this.googleFonts=b,this.optionsGraph=C,l!==void 0&&typeof l=="number"&&!Number.isNaN(l)){const x=performance.now();this.optionsProcessingTime=x-l}Ct.inDevelopmentMode(()=>zd(this))}static isFastPathDelta(t){for(const i of Object.keys(t??{}))if(!this.FAST_PATH_OPTIONS.has(i))return ks.perfDebug("ChartOptions.isFastPathDelta() - slow path required due to presence of: ",i),!1;return ks.perfDebug("ChartOptions.isFastPathDelta() - fast path possible."),!0}fastSetup(t,i){const{activeTheme:n,processedOptions:s}=i,{presetType:o}=this.optionMetadata;if(o!=null&&t?.data!=null){const a=cr.getPresetModule(o);if(a?.processData){const{series:l,data:c}=a.processData(t.data);t=oi({series:l,data:c},t)}}this.fastSeriesSetup(t,s);const r=oi(t,s);return ks.debug("ChartOptions.fastSetup() - processed options",r),{activeTheme:n,processedOptions:r,fastDelta:t}}fastSeriesSetup(t,i){t?.series&&(t.series?.every((n,s)=>mee(n,i.series?.[s]??{}))?delete t.series:t.series=t.series.map((n,s)=>Uw(n,i.series?.[s]??{})))}slowSetup(t,i,n=!1){let s=fn(this.userOptions,ks.OPTIONS_CLONE_OPTS_FAST);i&&(s=oi(i,s),n&&this.removeLeftoverSymbols(s));const{presetType:o}=this.optionMetadata;if(o!=null){const f=cr.getPresetModule(o);if(f){const{validate:m=yo}=f,v=s,b=s.type,C=b==null?void 0:sR(s.theme).presets[b],{cleared:x,invalid:w}=m(v,f.options,"");for(const M of w)fe.warn(M);mb(w,"")?s={}:(ks.debug(">>> AgCharts.createOrUpdate() - applying preset",x),s=f.create(x,C,()=>this.activeTheme))}}this.soloSeriesIntegrity(s),Jp.isEnterprise||AY(s);const r=sR(s.theme);if(o!=null&&r.templateTheme(s,!1),this.validateSeriesOptions(s),this.chartDef=cr.detectChartDefinition(s),!this.chartDef.placeholder){const{validate:f=yo}=this.chartDef,{cleared:m,invalid:v}=f(s,this.chartDef.options,"");for(const b of v)fe.warn(b);s=m}this.validateAxesOptions(s),this.removeDisabledOptions(s);let a=this.processFonts(r.params);a=this.processFonts(s,a),this.processSeriesOptions(s);const l=zIe(r,s),c=l.resolve(),u=l.resolveParams(),d=l.resolveAnnotationThemes();l.clearSafe();const p=oi(t,c);return fke(p),Jp.isEnterprise||AY(p,!0),this.validateSeriesOptions(p),this.validateAxesOptions(p),this.validatePluginOptions(p),this.processMiniChartSeriesOptions(p),p.loadGoogleFonts||a.clear(),ks.debug(()=>["ChartOptions.slowSetup() - processed options",fn(p)]),{activeTheme:r,processedOptions:p,themeParameters:u,annotationThemes:d,googleFonts:a,optionsGraph:l}}validatePluginOptions(t){for(const i of cr.listModulesByType(kT.Plugin)){const n=i.name;if(n in t&&(!i.chartType||i.chartType===this.chartDef?.name)){const{cleared:s,invalid:o}=yo(t[n],i.options,i.name);for(const r of o)fe.warn(r);t[n]=s}}}validateSeriesOptions(t){const i=this.chartDef?.name,n=[],s=t.series?.length??0;let o;for(let r=0;r<s;r++){const a=`series[${r}]`,l=t.series[r],c=cr.getSeriesModule(l.type);if(c==null){o??(o=Gw(Array.from(cr.listModulesByType(kT.Series)).filter(f=>!i||f.chartType===i).map(f=>f.name),"or",$Y)),fe.warn(l.type==null?`Option \`${a}.type\` is required and has not been provided; expecting ${o}, ignoring.`:`Unknown type \`${l.type}\` at \`${a}.type\`; expecting ${o}, ignoring.`);continue}else if(i&&c.chartType!==i){fe.warn(`Series type \`${c.name}\` at \`${a}.type\` is not supported by chart type \`${i}\`, ignoring.`);continue}const{validate:u=yo}=c,{cleared:d,invalid:p}=u(l,c.options,a);for(const f of p)fe.warn(f);mb(p,a)||n.push(d)}t.series=n}validateAxesOptions(t){if(!("axes"in t)||!t.axes)return;const i=this.chartDef?.name,n=[],s=t.axes.length??0;let o;for(let r=0;r<s;r++){const a=`axes[${r}]`,l=t.axes[r],c=cr.getAxisModule(l.type);if(c==null){o??(o=Gw(Array.from(cr.listModulesByType(kT.Axis)).filter(f=>f.chartType===i).map(f=>f.name),"or",$Y)),fe.warn(`Unknown type \`${l.type}\` at  \`${a}.type\`; expecting one of ${o}, ignoring all axes options.`),delete t.axes;break}else if(c.chartType!==i){fe.warn(`Axis type \`${c.name}\` at  \`${a}.type\` is not supported by chart type \`${i}\`, ignoring.`);break}const{validate:u=yo}=c,{cleared:d,invalid:p}=u(l,c.options,a);for(const f of p)fe.warn(f);mb(p,a)||n.push(d)}t.axes=n}diffOptions(t){return this===t?{}:t==null?this.processedOptions:this.fastDelta??Nu(t.processedOptions,this.processedOptions,ks.JSON_DIFF_OPTS)}optionsType(t){return t.series?.[0]?.type??"line"}processSeriesOptions(t){const i=t.series?.map(n=>{n.type??(n.type="line");const o=!!cr.getSeriesModule(n.type)?.options.visible;return oi(this.getSeriesGroupingOptions(n),n,o&&{visible:!0})});t.series=this.setSeriesGroupingOptions(i??[])}processMiniChartSeriesOptions(t){const i=t.navigator?.miniChart?.series;i!=null&&(t.navigator.miniChart.series=this.setSeriesGroupingOptions(i))}getSeriesGroupingOptions(t){const i=vl.isGroupable(t.type),n=vl.isStackable(t.type),s=vl.isStackedByDefault(t.type);t.grouped&&!i&&fe.warnOnce(`unsupported grouping of series type "${t.type}".`),(t.stacked||t.stackGroup)&&!n&&fe.warnOnce(`unsupported stacking of series type "${t.type}".`);let{grouped:o,stacked:r}=t;return r??(r=(s||t.stackGroup!=null)&&!(i&&o)),o??(o=!0),{stacked:n&&r,grouped:i&&o&&!(n&&r)}}setSeriesGroupingOptions(t){const i=this.getSeriesGrouping(t);ks.debug("ChartOptions.setSeriesGroupingOptions() - series grouping: ",i);const n={},s=i.reduce((o,r)=>{var a;return r.groupType==="default"||(o[a=r.seriesType]??(o[a]=0),o[r.seriesType]+=r.groupType==="stack"?1:r.series.length),o},{});return i.flatMap(o=>{var r;switch(n[r=o.seriesType]??(n[r]=0),o.groupType){case"stack":{const a=n[o.seriesType]++;return o.series.map((l,c)=>Object.assign(l,{seriesGrouping:{groupId:o.groupId,groupIndex:a,groupCount:s[o.seriesType],stackIndex:c,stackCount:o.series.length}}))}case"group":return o.series.map(a=>Object.assign(a,{seriesGrouping:{groupId:o.groupId,groupIndex:n[o.seriesType]++,groupCount:s[o.seriesType],stackIndex:0,stackCount:0}}))}return o.series}).map(({stacked:o,grouped:r,...a})=>a)}getSeriesGroupId(t){return[t.type,t.xKey,t.stacked?t.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(t){const i=new Map;return t.reduce((n,s)=>{const o=s.type;if(!s.stacked&&!s.grouped)n.push({groupType:"default",seriesType:o,series:[s],groupId:"__default__"});else{const r=this.getSeriesGroupId(s);if(!i.has(r)){const l={groupType:s.stacked?"stack":"group",seriesType:o,series:[],groupId:r};i.set(r,l),n.push(l)}i.get(r).series.push(s)}return n},[])}soloSeriesIntegrity(t){if(!ft(t.series))return;const i=t.series;if(i&&i.length>1&&i.some(n=>vl.isSolo(n.type))){const n=this.optionsType(t);if(vl.isSolo(n))fe.warn(`series[0] of type '${n}' is incompatible with other series types. Only processing series[0]`),t.series=i.slice(0,1);else{const{solo:s,nonSolo:o}=DG(i,a=>vl.isSolo(a.type)?"solo":"nonSolo"),r=zB(s.map(a=>a.type)).join(", ");fe.warn(`Unable to mix these series types with the lead series type: ${r}`),t.series=o}}}static processFontOptions(t,i,n,s=new Set){if(typeof t=="object"&&"fontFamily"in t)if(Array.isArray(t.fontFamily)){const o=[];for(const r of t.fontFamily)typeof r=="object"&&"googleFont"in r?(o.push(r.googleFont),s?.add(r.googleFont)):o.push(r);t.fontFamily=o.join(", ")}else typeof t.fontFamily=="object"&&"googleFont"in t.fontFamily&&(t.fontFamily=t.fontFamily.googleFont,s?.add(t.fontFamily));return s}processFonts(t,i=new Set){return qp(t,ks.processFontOptions,new Set(["data","theme"]),void 0,void 0,i)}static removeDisabledOptionJson(t){if("enabled"in t&&t.enabled===!1)for(const i of Object.keys(t))i!=="enabled"&&delete t[i]}removeDisabledOptions(t){qp(t,ks.removeDisabledOptionJson,new Set(["data","theme","contextMenu"]))}static removeLeftoverSymbolsJson(t){if(!(!t||!St(t)))for(const i of Object.keys(t)){const n=t[i];IT(n)&&delete t[i]}}removeLeftoverSymbols(t){qp(t,ks.removeLeftoverSymbolsJson,new Set(["data"]))}specialOverridesDefaults(t){if(t.window==null?t.window=Qt():Lxe(t.window),t.document==null?t.document=Eu():Exe(t.document),t.window==null)throw new Error("AG Charts - unable to resolve global window");if(t.document==null)throw new Error("AG Charts - unable to resolve global document");return t}};ly.OPTIONS_CLONE_OPTS_SLOW={shallow:new Set(["data","container"]),assign:new Set(["context","theme"])};ly.OPTIONS_CLONE_OPTS_FAST={shallow:new Set(["container"]),assign:new Set(["data","context","theme"])};ly.JSON_DIFF_OPTS=new Set(["data"]);ly.perfDebug=Ct.create(!0,"perf");ly.FAST_PATH_OPTIONS=new Set(["data","width","height","container"]);ly.debug=Ct.create(!0,"opts");var Sw=ly,KY=Ct.create(!0,"opts"),mp="AG Charts - Chart was destroyed, cannot perform request.",Cw=class{constructor(t,i,n){this.factoryApi=i,this.licenseManager=n,this.chart=t}async update(t){if(!this.chart)throw new Error(mp);return KY.group("AgChartInstance.update()",async()=>{const i=Ct.check("scene:stats","scene:stats:verbose")?performance.now():void 0;this.factoryApi.update(t,this,void 0,i),await this.chart?.waitForUpdate()})}async updateDelta(t){if(!this.chart)throw new Error(mp);return KY.group("AgChartInstance.updateDelta()",async()=>{const i=Ct.check("scene:stats","scene:stats:verbose")?performance.now():void 0;this.factoryApi.updateUserDelta(this,t,i),await this.chart?.waitForUpdate()})}getOptions(){if(!this.chart)throw new Error(mp);const t=fn(this.chart.getOptions(),Sw.OPTIONS_CLONE_OPTS_FAST);for(const i of Object.keys(t))i.startsWith("_")&&delete t[i];return t}waitForUpdate(){if(!this.chart)throw new Error(mp);return this.chart.waitForUpdate()}async applyTransaction(t){if(!this.chart)throw new Error(mp);if(t==null||typeof t!="object")throw new Error("AG Charts - applyTransaction expects a transaction object.");const{append:i,prepend:n,remove:s}=t;if(i!=null&&!Array.isArray(i))throw new Error('AG Charts - transaction "append" must be an array.');if(n!=null&&!Array.isArray(n))throw new Error('AG Charts - transaction "prepend" must be an array.');if(s!=null&&!Array.isArray(s))throw new Error('AG Charts - transaction "remove" must be an array or single value.');return this.chart.applyTransaction(t)}async download(t){if(!this.chart)throw new Error(mp);const i=await this.prepareResizedChart(this,this.chart,t);try{i.chart?.download(t?.fileName,t?.fileFormat)}finally{i.destroy()}}async __toSVG(t){if(!this.chart)throw new Error(mp);const i=await this.prepareResizedChart(this,this.chart,{width:600,height:300,...t});try{return i?.chart?.toSVG()}finally{i?.destroy()}}async getImageDataURL(t){if(!this.chart)throw new Error(mp);const i=await this.prepareResizedChart(this,this.chart,t);try{return i.chart.getCanvasDataURL(t?.fileFormat)}finally{i.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(t){const{chart:i}=this;if(!i)return;const n=this.getEnabledOriginators();if(!n.includes(i.ctx.legendManager)){await this.setStateOriginators(t,n);return}await this.setStateOriginators(t,n.filter(s=>s!==i.ctx.zoomManager)),await this.setStateOriginators(t,[i.ctx.zoomManager])}resetAnimations(){this.chart?.resetAnimations()}skipAnimations(){this.chart?.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.releaseChart=void 0):this.chart&&(this.chart.publicApi=void 0,this.chart.destroy()),this.chart=void 0}async prepareResizedChart(t,i,n={}){const s=n.width??i.width??i.ctx.scene.canvas.width,o=n.height??i.height??i.ctx.scene.canvas.height,r=t.getState(),a=Du.hasEnterpriseModules(),l={...i.chartOptions.processedOverrides,container:document.createElement("div"),width:s,height:o};n.width!=null&&n.height!=null&&(l.overrideDevicePixelRatio=1);const c=i.getOptions();a&&(l.animation={enabled:!1},this.licenseManager?.isDisplayWatermark()&&(l.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));const u={...i.chartOptions.specialOverrides},d={...i.chartOptions.optionMetadata},p=await this.chart?.ctx.dataService.getData(),f=this.factoryApi.create(c,l,u,d,p);await f.setState(r),f.chart?.ctx.zoomManager.updateZoom("chartProxy",i.ctx.zoomManager.getZoom()),f.chart?.ctx.legendManager.clearData(),f.chart?.ctx.legendManager.update(i.ctx.legendManager.getData());for(const[v,b]of i.series.entries())f.chart.series[v].visible=b.visible;const m=[];for(const v of i.modulesManager.legends())m.push(v.legend.pagination?.currentPage??0);for(const v of f.chart.modulesManager.legends()){const b=m.shift()??0;v.legend.pagination&&v.legend.pagination.setPage(b)}return f.chart?.update(0,{forceNodeDataRefresh:!0}),await f.waitForUpdate(),f}getEnabledOriginators(){if(!this.chart)return[];const{chartOptions:{processedOptions:t,optionMetadata:i},ctx:{annotationManager:n,chartTypeOriginator:s,zoomManager:o,legendManager:r}}=this.chart,a=[];return"annotations"in t&&t.annotations?.enabled&&a.push(n),i.presetType==="price-volume"&&a.push(s),(t.navigator?.enabled||t.zoom?.enabled)&&a.push(o),"legend"in this.chart&&a.push(r),a}async setStateOriginators(t,i){this.factoryApi.caretaker.restore(t,...i),this.chart?.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),await this.chart?.waitForUpdate()}};Cw.chartInstances=new WeakMap;E([Io({oldValue(e){e.destroyed||(e.publicApi=void 0),Cw.chartInstances.delete(e)},newValue(e){e&&(e.publicApi=this,Cw.chartInstances.set(e,this))}})],Cw.prototype,"chart",2);var YY=Cw,UV=class extends vE{constructor(e){super(),this.ctx=e,this.localeText=void 0}};E([bg(e=>{e.ctx.localeManager.setLocaleText(e.localeText)}),F],UV.prototype,"localeText",2);E([bg(e=>{e.ctx.localeManager.setLocaleTextFormatter(e.getLocaleText)}),F],UV.prototype,"getLocaleText",2);var VIe={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new UV(e)},GS=class extends vE{constructor(t){super(),this.ctx=t,this.rectNode=new bs,this.textNode=new ba,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.cleanup.register(t.scene.attachNode(this.node),t.eventsHub.on("layout:complete",i=>this.onLayoutComplete(i)))}createNode(){return new Mt({name:"background",zIndex:0})}onLayoutComplete(t){const{width:i,height:n}=t.chart;this.rectNode.width=i,this.rectNode.height=n}};E([F,_n("node","visible")],GS.prototype,"visible",2);E([F,_n("rectNode","fill")],GS.prototype,"fill",2);E([F],GS.prototype,"image",2);E([F,_n("textNode")],GS.prototype,"text",2);var Xne={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new GS(e)},cy=class extends pt{constructor(e){super(),this.node=e,this.enabled=!1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=1}};E([Io({changeValue(e){e?this.node.strokeWidth=this.strokeWidth:this.node.strokeWidth=0}}),F],cy.prototype,"enabled",2);E([_n("node","stroke"),F],cy.prototype,"stroke",2);E([_n("node","strokeOpacity"),F],cy.prototype,"strokeOpacity",2);E([Io({changeValue(e){this.enabled?this.node.strokeWidth=e:this.node.strokeWidth=0}}),F],cy.prototype,"strokeWidth",2);function HIe({orientation:e,bboxes:t,maxHeight:i,maxWidth:n,itemPaddingY:s=0,itemPaddingX:o=0,forceResult:r=!1}){const a=e==="horizontal",l={max:a?n:i,fn:a?p=>p.width:p=>p.height,padding:a?o:s},c={max:a?i:n,fn:a?p=>p.height:p=>p.width,padding:a?s:o};let u=0;const d=[];for(;u<t.length;){const p=t.slice(u),f=WIe(p,u,l,c,r);if(!f)return;u+=f.processedBBoxCount,d.push(f.pageIndices)}return UIe(d,e,t,s,o)}function WIe(e,t,i,n,s){let r=KIe(e,i);if(r<1){if(!s)return;r=1}let a=r;for(;a>=1;){const l=jIe(e,t,a,i,n,s);if(l==null&&a<=1)return;if(l==null){a--;continue}if(typeof l=="number"){if(l<=1)return;a=l<a&&l>1?l:a,a--;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function jIe(e,t,i,n,s,o){const r=[];let a=0,l=0,c=[];const u=[];for(let d=0;d<e.length;d++){const p=(d+i)%i;p===0&&(a+=l,l=0,c.length>0&&r.push(c),c=[]);const f=n.fn(e[d])+n.padding;u[p]=Math.max(u[p]??0,f),l=Math.max(l,s.fn(e[d])+s.padding);const m=a+l,v=!o||r.length>0;if(m>s.max&&v){c=[];break}if(u.reduce((C,x)=>C+x,0)>n.max&&!o)return u.length<i?u.length:void 0;c.push(d+t)}return c.length>0&&r.push(c),r.length>0?r:void 0}function UIe(e,t,i,n,s){let o=0,r=0;return{pages:e.map(l=>{t==="horizontal"&&(l=$Ie(l));let c=0;const u=l.map(f=>{const m=f.map(C=>(c=Math.max(C,c),i[C]));let v=0,b=0;for(const C of m)v+=C.height+n,b=Math.max(b,C.width+s);return{indices:f,bboxes:m,columnHeight:Math.ceil(v),columnWidth:Math.ceil(b)}});let d=0,p=0;for(const f of u)d+=f.columnWidth,p=Math.max(p,f.columnHeight);return o=Math.max(d,o),r=Math.max(p,r),{columns:u,startIndex:l[0][0],endIndex:c,pageWidth:d,pageHeight:p}}),maxPageWidth:o,maxPageHeight:r}}function $Ie(e){const t=[];for(const i of e[0])t.push([]);for(const[i,n]of e.entries())for(const[s,o]of n.entries())t[s][i]=o;return t}function KIe(e,t){const i=e.length;let n=0;for(let s=0;s<i;s++)if(n+=t.fn(e[s])+t.padding,n>t.max)return i/s<2?Math.ceil(i/2):s;return i}var VS=class extends pt{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};E([F],VS.prototype,"color",2);E([F],VS.prototype,"fontStyle",2);E([F],VS.prototype,"fontWeight",2);E([F],VS.prototype,"fontSize",2);E([F],VS.prototype,"fontFamily",2);var Xd=class extends pt{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};E([F],Xd.prototype,"size",2);E([F],Xd.prototype,"fill",2);E([F],Xd.prototype,"fillOpacity",2);E([F],Xd.prototype,"stroke",2);E([F],Xd.prototype,"strokeWidth",2);E([F],Xd.prototype,"strokeOpacity",2);var xL=class extends pt{constructor(e){super(),this.parent=e,this.shape="triangle",this.size=15,this.padding=8}};E([Io({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],xL.prototype,"shape",2);E([F],xL.prototype,"size",2);E([F],xL.prototype,"padding",2);var uy=class extends pt{constructor(e,t){super(),this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.id=To(this),this.marker=new xL(this),this.activeStyle=new Xd,this.inactiveStyle=new Xd,this.highlightStyle=new Xd,this.label=new VS,this.group=new So({name:"pagination"}),this.labelNode=new ba,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this.nextButton=new vs,this.previousButton=new vs,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){switch(this._orientation=e,e){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){const e=this.labelNode.getBBox();this.nextButton.translationX=e.width+(this.marker.size/2+this.marker.padding)*2}updateLabel(){const{currentPage:e,totalPages:t,labelNode:i,label:{color:n,fontStyle:s,fontWeight:o,fontSize:r,fontFamily:a}}=this;i.text=`${e+1} / ${t}`,i.fill=n,i.fontStyle=s,i.fontWeight=o,i.fontSize=r,i.fontFamily=a}updateMarkers(){const{nextButton:e,previousButton:t,nextButtonDisabled:i,previousButtonDisabled:n,activeStyle:s,inactiveStyle:o,highlightStyle:r,highlightActive:a}=this,l=(c,u)=>u?o:c===a?r:s;this.updateMarker(e,l("next",i)),this.updateMarker(t,l("previous",n))}updateMarker(e,t){const{shape:i,size:n}=this.marker;e.shape=i,e.size=n,e.fill=t.fill,e.fillOpacity=t.fillOpacity??1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:t}=this,i=t===0,n=e===t-1,s=e===0;this.nextButtonDisabled=n||i,this.previousButtonDisabled=s||i}setPage(e){e=Je(0,e,Math.max(0,this.totalPages-1)),this.currentPage!==e&&(this.currentPage=e,this.onPaginationChanged())}getCursor(e){return{previous:this.previousButtonDisabled,next:this.nextButtonDisabled}[e]?void 0:"pointer"}onClick(e,t){e.preventDefault(),t==="next"&&!this.nextButtonDisabled?(this.incrementPage(),this.onPaginationChanged()):t==="previous"&&!this.previousButtonDisabled&&(this.decrementPage(),this.onPaginationChanged())}onMouseHover(e){this.highlightActive=e,this.updateMarkers(),this.chartUpdateCallback(7)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(7)}attachPagination(e){e.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){const e=vn.toCanvas(this.previousButton),t=vn.toCanvas(this.nextButton);return{prev:e,next:t}}};uy.className="Pagination";E([F],uy.prototype,"marker",2);E([F],uy.prototype,"activeStyle",2);E([F],uy.prototype,"inactiveStyle",2);E([F],uy.prototype,"highlightStyle",2);E([F],uy.prototype,"label",2);var YIe=class{constructor(e,t){this.dirty=!0,this.itemList=e.proxyInteractionService.createProxyContainer({type:"list",domManagerId:`${t}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=e.proxyInteractionService.createProxyContainer({type:"group",domManagerId:`${t}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"}}),this.itemDescription=nt("p"),this.itemDescription.style.display="none",this.itemDescription.id=pm(),this.itemDescription.textContent=this.getItemAriaDescription(e.localeManager),this.itemList.getElement().append(this.itemDescription)}initLegendList(e){if(!this.dirty)return;const{ctx:t,itemSelection:i,datumReader:n,itemListener:s}=e,o=t.localeManager,r=i.length;i.each((a,l,c)=>{a.proxyButton?.destroy(),a.proxyButton=t.proxyInteractionService.createProxyElement({type:"listswitch",textContent:this.getItemAriaText(o,Gt(n.getItemLabel(l)),c,r),ariaChecked:!!a.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});const u=a.proxyButton;u.addListener("click",d=>s.onClick(d.sourceEvent,a.datum,u)),u.addListener("dblclick",d=>s.onDoubleClick(d.sourceEvent,a.datum)),u.addListener("mouseenter",d=>s.onHover(d.sourceEvent,a)),u.addListener("mouseleave",()=>s.onLeave()),u.addListener("contextmenu",d=>s.onContextClick(d,a)),u.addListener("blur",()=>s.onLeave()),u.addListener("focus",d=>s.onHover(d.sourceEvent,a)),u.addListener("drag-start",()=>{})}),this.dirty=!1}update(e){e.visible&&(this.initLegendList(e),this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!0)),this.updateVisibility(e.visible)}updateVisibility(e){this.itemList.setHidden(!e),this.paginationGroup.setHidden(!e)}updateItemProxyButtons({itemSelection:e,group:t,pagination:i,interactive:n}){const s=vn.toCanvas(t);this.itemList.setBounds(s);const o=Math.max(...e.nodes().map(r=>r.getBBox().height));e.each((r,a)=>{if(r.proxyButton){const l=r.pageIndex===i.currentPage,{x:c,y:u,height:d,width:p}=vn.toCanvas(r),f=(o-d)/2,m={x:c-s.x,y:u-f-s.y,height:o,width:p},v=n&&l;r.proxyButton.setCursor("pointer"),r.proxyButton.setEnabled(v),r.proxyButton.setPointerEvents(v?void 0:"none"),r.proxyButton.setBounds(m)}})}updatePaginationProxyButtons(e,t){const{pagination:i}=e;if(this.paginationGroup.setHidden(!i.visible),t&&"ctx"in e){const{oldPages:n,newPages:s}=e,o=(n?.length??s.length)>1,r=s.length>1;o!==r&&(r?this.createPaginationButtons(e):this.destroyPaginationButtons()),this.paginationGroup.setAriaHidden(r?void 0:!0)}if(this.prevButton&&this.nextButton){const{prev:n,next:s}=i.computeCSSBounds(),o=He.merge([n,s]);n.x-=o.x,n.y-=o.y,s.x-=o.x,s.y-=o.y,this.paginationGroup.setBounds(o),this.prevButton.setBounds(n),this.nextButton.setBounds(s),this.prevButton.setEnabled(i.currentPage!==0),this.nextButton.setEnabled(i.currentPage!==i.totalPages-1),this.nextButton.setCursor(i.getCursor("next")),this.prevButton.setCursor(i.getCursor("previous"))}}createPaginationButtons(e){const{ctx:t,pagination:i}=e;this.prevButton||(this.prevButton=t.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",n=>this.onPageButton(e,n,"previous")),this.prevButton.addListener("mouseenter",()=>i.onMouseHover("previous")),this.prevButton.addListener("mouseleave",()=>i.onMouseHover(void 0))),this.nextButton||(this.nextButton=t.proxyInteractionService.createProxyElement({type:"button",textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup}),this.nextButton.addListener("click",n=>this.onPageButton(e,n,"next")),this.nextButton.addListener("mouseenter",()=>i.onMouseHover("next")),this.nextButton.addListener("mouseleave",()=>i.onMouseHover(void 0)))}destroyPaginationButtons(){this.nextButton?.destroy(),this.prevButton?.destroy(),this.nextButton=void 0,this.prevButton=void 0}onPageButton(e,t,i){e.pagination.onClick(t.sourceEvent,i),this.updatePaginationProxyButtons(e,!1)}onDataUpdate(e,t){this.dirty=e.length!==t.length||e.some((i,n,s)=>{const[o,r]=[t[n],e[n]];return o.id!==r.id})}onLocaleChanged(e,t,i){const n=t.length;t.each(({proxyButton:s},o,r)=>{const a=s?.getElement();if(a!=null){const l=Gt(i.getItemLabel(o));a.textContent=this.getItemAriaText(e,l,r,n)}}),this.itemDescription.textContent=this.getItemAriaDescription(e)}onPageChange(e){this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!1)}getItemAriaText(e,t,i,n){return i>=0&&t?(i++,e.t("ariaLabelLegendItem",{label:t,index:i,count:n})):e.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(e){return e.t("ariaDescriptionLegendItem")}};function XY(e,{itemId:t,seriesId:i,label:{text:n}},s){const o={defaultPrevented:!1,apiEvent:{type:e,itemId:t,seriesId:i,event:s,text:Gt(n),preventDefault:()=>o.defaultPrevented=!0}};return o}var Wl=class extends So{constructor(){super({name:"markerLabelGroup"}),this.symbolsGroup=this.appendChild(new Mt({name:"legend-markerLabel-symbols",renderToOffscreenCanvas:!0,optimizeForInfrequentRedraws:!0})),this.label=this.appendChild(new ba),this.enabled=!0,this.pageIndex=Number.NaN,this.spacing=0,this.length=0,this.isCustomMarker=!1,this.marker=this.symbolsGroup.appendChild(new vs({zIndex:1})),this.line=this.symbolsGroup.appendChild(new Ma({zIndex:0})),this.line.visible=!1,this.label.textBaseline="middle",this.label.y=1}destroy(){super.destroy(),this.proxyButton?.destroy()}setEnabled(e){this.enabled=e,this.refreshVisibilities()}getTextMeasureBBox(){return this.layout(),He.merge([this.symbolsGroup.getBBox(),this.label.getTextMeasureBBox()])}refreshVisibilities(){const e=this.enabled?1:.5;this.label.opacity=e,this.opacity=e}layout(){const{marker:e,line:t,length:i,isCustomMarker:n}=this;let s=0,o=0;if(e.visible){const{size:r}=e,a=vs.anchor(e.shape);s=(a.x-.5)*r+i/2,o=(a.y-.5)*r,n?(e.x=0,e.y=0,e.translationX=s,e.translationY=o):(e.x=s,e.y=o,e.translationX=0,e.translationY=0)}t.visible&&(t.x1=0,t.x2=i,t.y1=0,t.y2=0)}preRender(e){const t=super.preRender(e);return this.layout(),t}layoutLabel(){const{length:e,spacing:t}=this;this.label.x=e+t}computeBBox(){return this.layout(),super.computeBBox()}};Wl.className="MarkerLabel";E([_n("label")],Wl.prototype,"text",2);E([_n("label")],Wl.prototype,"fontStyle",2);E([_n("label")],Wl.prototype,"fontWeight",2);E([_n("label")],Wl.prototype,"fontSize",2);E([_n("label")],Wl.prototype,"fontFamily",2);E([_n("label","fill")],Wl.prototype,"color",2);E([bg(e=>e.layoutLabel())],Wl.prototype,"spacing",2);E([bg(e=>e.layoutLabel())],Wl.prototype,"length",2);E([Le()],Wl.prototype,"isCustomMarker",2);function UT(e){const{placement:t="bottom",floating:i=!1,xOffset:n=0,yOffset:s=0}=typeof e=="string"?{placement:e,floating:!1}:e;return{placement:t,floating:i,xOffset:n,yOffset:s}}var Tg=class extends pt{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};E([F],Tg.prototype,"maxLength",2);E([F],Tg.prototype,"color",2);E([F],Tg.prototype,"fontStyle",2);E([F],Tg.prototype,"fontWeight",2);E([F],Tg.prototype,"fontSize",2);E([F],Tg.prototype,"fontFamily",2);E([F],Tg.prototype,"formatter",2);var HS=class extends pt{constructor(){super(...arguments),this.shape=void 0,this.size=15,this.padding=8}};E([F],HS.prototype,"shape",2);E([F],HS.prototype,"size",2);E([F],HS.prototype,"padding",2);E([F],HS.prototype,"strokeWidth",2);E([F],HS.prototype,"enabled",2);var $V=class extends pt{};E([F],$V.prototype,"strokeWidth",2);E([F],$V.prototype,"length",2);var Ig=class extends pt{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new HS,this.label=new Tg,this.line=new $V}};E([F],Ig.prototype,"maxWidth",2);E([F],Ig.prototype,"paddingX",2);E([F],Ig.prototype,"paddingY",2);E([F],Ig.prototype,"showSeriesStroke",2);E([F],Ig.prototype,"marker",2);E([F],Ig.prototype,"label",2);E([F],Ig.prototype,"line",2);var KV=class extends pt{};E([F],KV.prototype,"legendItemClick",2);E([F],KV.prototype,"legendItemDoubleClick",2);var ZY={bounds:"item",gradient:"linear",colorStops:[{color:"black"}],rotation:0,reverse:!1,colorSpace:"rgb"},qY={pattern:"forward-slanted-lines",width:8,height:8,padding:1,fill:"black",fillOpacity:1,backgroundFill:"white",backgroundFillOpacity:1,stroke:"black",strokeOpacity:1,strokeWidth:1,rotation:0,scale:1},QY={backgroundFill:"black",backgroundFillOpacity:1,rotation:0,repeat:"no-repeat",fit:"contain"},Qn=class extends pt{constructor(e){super(),this.ctx=e,this.id=To(this),this.group=new So({name:"legend",zIndex:16}),this.itemSelection=Yo.select(this.group,Wl),this.containerNode=this.group.appendChild(new bs({name:"legend-container"})),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.toggleSeries=!0,this.item=new Ig,this.listeners=new KV,this.enabled=!0,this.position="bottom",this.border=new cy(this.containerNode),this.cornerRadius=0,this.fillOpacity=1,this.padding=4,this.spacing=0,this.cleanup=new _i,this.size=[0,0],this._visible=!0,this.pagination=new uy(i=>e.updateService.update(i),i=>this.updatePageNumber(i)),this.pagination.attachPagination(this.group);const{items:t}=e.contextMenuRegistry.builtins;t["toggle-series-visibility"].action=i=>this.contextToggleVisibility(i),t["toggle-other-series"].action=i=>this.contextToggleOtherSeries(i),this.cleanup.register(e.eventsHub.on("legend:change",this.onLegendDataChange.bind(this)),e.eventsHub.on("legend:change-partial",this.onLegendDataChangePartial.bind(this)),e.layoutManager.registerElement(1,i=>this.positionLegend(i)),e.eventsHub.on("locale:change",()=>this.onLocaleChanged()),()=>delete t["toggle-series-visibility"].action,()=>delete t["toggle-other-series"].action,()=>this.group.remove()),this.domProxy=new YIe(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(e.legendManager)}set data(e){yr(e,this._data)||(this.domProxy.onDataUpdate(this._data,e),this._data=e,this.updateGroupVisibility())}get data(){return this._data}onLegendDataChange({legendData:e=[]}){this.enabled&&(this.data=e.filter(t=>!t.hideInLegend))}onLegendDataChangePartial(e){this.itemSelection.each(({proxyButton:t},{itemId:i})=>{if(t!=null)for(const n of e.legendData)n.itemId===i&&t.setChecked(n.enabled)})}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.cleanup.flush(),this.itemSelection.clear()}getOrientation(){return this.orientation??"horizontal"}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}isInteractive(){const{toggleSeries:e,listeners:{legendItemClick:t,legendItemDoubleClick:i}}=this;return e||i!=null||t!=null}attachLegend(e){e.appendChild(this.group)}getItemLabel(e){const{formatter:t}=this.item.label;if(t){const i=e.datum;return this.cachedCallWithContext(t,{itemId:e.itemId,value:e.label.text,seriesId:e.seriesId,...i&&{datum:i}})}return e.label.text}calcLayout(e,t){const{paddingX:i,paddingY:n,label:s,maxWidth:o,label:{maxLength:r=1/0,fontStyle:a,fontWeight:l,fontSize:c,fontFamily:u}}=this.item,d=[...this.data];this.reverseOrder&&d.reverse(),this.itemSelection.update(d);const p=[],f=ei(s),v=o??e*.8,{markerWidth:b,anyLineEnabled:C}=this.calculateMarkerWidth();if(this.itemSelection.each((_,B)=>{_.fontStyle=a,_.fontWeight=l,_.fontSize=c,_.fontFamily=u;const V=this.updateMarkerLabel(_,B,b,C),j=B.itemId??B.id,K=this.getItemLabel(B),Y=Gt(K,"<unknown>").replace(Kb," ");_.text=this.truncate(Y,r,v,V,f,j),p.push(_.getTextMeasureBBox())}),e=Math.max(1,e),t=Math.max(1,t),!Number.isFinite(e))return{};[e,t]=this.updateContainer(e,t);const x=this.size,w=this.oldSize;x[0]=e,x[1]=t,(x[0]!==w[0]||x[1]!==w[1])&&(w[0]=x[0],w[1]=x[1]);const{pages:M,maxPageHeight:T,maxPageWidth:L}=this.updatePagination(p,e,t),I=this.pages;this.pages=M,this.maxPageSize=[L-i,T-n];const R=this.pagination.currentPage,O=this.pages[R];return this.pages.length<1||!O?(this.visible=!1,{oldPages:I}):(this.visible=!0,this.updatePositions(R),this.update(),{oldPages:I})}isCustomMarker(e,t){return e&&t!==void 0&&typeof t!="string"}calcSymbolsEnabled(e){const{showSeriesStroke:t,marker:i}=this.item,n=!!i.enabled||!t||(e.marker.enabled??!0),s=!!(e.line&&t),o=this.isCustomMarker(n,e.marker.shape);return{markerEnabled:n,lineEnabled:s,isCustomMarker:o}}calcSymbolsLengths(e,t,i){const{marker:n,line:s}=this.item;let o;const{shape:r}=e.marker;if(this.isCustomMarker(t,r)){const c=new vs;c.shape=r,c.updatePath();const u=c.getBBox();o=Math.max(u.width,u.height)}const a=t?n.size:0,l=i?s.length??25:0;return{markerLength:a,lineLength:l,customMarkerSize:o}}calculateMarkerWidth(){let e=0,t=!1;return this.itemSelection.each((i,n)=>{const{symbol:s}=n,{lineEnabled:o,markerEnabled:r}=this.calcSymbolsEnabled(s),{markerLength:a,lineLength:l,customMarkerSize:c=-1/0}=this.calcSymbolsLengths(s,r,o);e=Math.max(e,l,c,a),t||(t=o)}),{markerWidth:e,anyLineEnabled:t}}updateMarkerLabel(e,t,i,n){const{marker:s,paddingX:o}=this.item,{symbol:r}=t;let a=o;const{markerEnabled:l,isCustomMarker:c}=this.calcSymbolsEnabled(r),u=s.padding;(l||n)&&(a+=u+i);const{marker:d,line:p}=e;return d.visible=l,d.visible&&(d.shape=s.shape??r.marker.shape??"square",d.size=s.size,Yd(d,this.getMarkerStyles(fn(r)))),p.visible=n,p.visible&&Yd(p,this.getLineStyles(r)),e.length=i,e.spacing=u,e.isCustomMarker=c,a}updateContainer(e,t){const i=this.getContainerStyles();return this.containerNode.width=0,this.containerNode.height=0,Yd(this.containerNode,i),this.containerNode.cornerRadius=i.cornerRadius,e-=i.strokeWidth*2+i.padding.left+i.padding.right,t-=i.strokeWidth*2+i.padding.top+i.padding.bottom,[e,t]}truncate(e,t,i,n,s,o){let r=!1;e.length>t&&(e=e.substring(0,t),r=!0);const a=vb(e,s,i-n,r);return Z0(a)?this.truncatedItems.add(o):this.truncatedItems.delete(o),a}updatePagination(e,t,i){const n=this.getOrientation(),s=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:o,maxPageHeight:r,maxPageWidth:a,paginationBBox:l,paginationVertical:c}=this.calculatePagination(e,t,i),u=o.findIndex(w=>w.endIndex>=s);this.pagination.currentPage=Je(0,u,o.length-1);const{paddingX:d,paddingY:p}=this.item,f=8,m=a-d,v=r-p;let b=0,C=-l.y-this.item.marker.size/2;c?C+=v+f:(b+=-l.x+m+f,C+=(v-l.height)/2),this.pagination.translationX=b,this.pagination.translationY=C,this.pagination.update(),this.pagination.updateMarkers();let x=0;return this.itemSelection.each((w,M,T)=>{T>(o[x]?.endIndex??1/0)&&x++,w.pageIndex=x}),{maxPageHeight:r,maxPageWidth:a,pages:o}}calculatePagination(e,t,i){const{paddingX:n,paddingY:s}=this.item,o=["left","left-top","left-bottom","right","right-top","right-bottom"],{placement:r}=UT(this.position),a=this.getOrientation(),l=o.includes(r);let c=this.pagination.getBBox(),u=new He(0,0,0,0),d=[],p=0,f=0,m=0;const v=C=>C.width===c.width&&C.height===c.height,b=this.maxWidth!==void 0&&this.maxHeight!==void 0;do{if(m++>10){fe.warn("unable to find stable legend layout.");break}c=u;const C=t-(l?0:c.width),x=i-(l?c.height:0),w=HIe({orientation:a,bboxes:e,maxHeight:x,maxWidth:C,itemPaddingY:s,itemPaddingX:n,forceResult:b});d=w?.pages??[],p=w?.maxPageWidth??0,f=w?.maxPageHeight??0;const M=d.length;if(this.pagination.visible=M>1,this.pagination.totalPages=M,this.pagination.update(),this.pagination.updateMarkers(),u=this.pagination.getBBox(),!this.pagination.visible)break}while(!v(u));return{maxPageWidth:p,maxPageHeight:f,pages:d,paginationBBox:u,paginationVertical:l}}updatePositions(e=0){const{item:{paddingY:t},itemSelection:i,pages:n}=this;if(n.length<1||!n[e])return;const{columns:s,startIndex:o,endIndex:r}=n[e];let a=0,l=0;const c=s.length,u=s[0].indices.length,d=this.getOrientation()==="horizontal",p=s[0].bboxes[0].height+t,f=[];i.each((m,v,b)=>{if(b<o||b>r){m.visible=!1;return}const C=b-o;let x,w;d?(x=C%c,w=Math.floor(C/c)):(x=Math.floor(C/u),w=C%u),m.visible=!0;const M=s[x];M&&(l=Math.floor(p*w),a=Math.floor(f[w]??0),f[w]=(f[w]??0)+M.columnWidth,m.translationX=a,m.translationY=l)})}updatePageNumber(e){const{itemSelection:t,group:i,pagination:n,pages:s}=this,{startIndex:o,endIndex:r}=s[e];o===0?this.paginationTrackingIndex=0:e===s.length-1?this.paginationTrackingIndex=r:this.paginationTrackingIndex=Math.floor((o+r)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.domProxy.onPageChange({itemSelection:t,group:i,pagination:n,interactive:this.isInteractive()}),this.ctx.updateService.update(7)}update(){const{label:{color:e}}=this.item;this.itemSelection.each((t,i)=>{t.setEnabled(i.enabled),t.color=e}),this.updateContextMenu()}updateContextMenu(){const e=this.toggleSeries?"show":"hide";this.ctx.contextMenuRegistry.toggle("toggle-series-visibility",e),this.ctx.contextMenuRegistry.toggle("toggle-other-series",e)}getLineStyles(e){const{stroke:t,strokeOpacity:i=1,strokeWidth:n,lineDash:s}=e.line??{},o=Math.min(2,n??1);return{stroke:t,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??o,lineDash:s}}getMarkerStyles({marker:e}){const{fill:t,stroke:i,strokeOpacity:n=1,fillOpacity:s=1,strokeWidth:o,lineDash:r,lineDashOffset:a}=e,l=Math.min(2,o??1);return ah(t)&&(t.width=8,t.height=8,t.padding=1,t.strokeWidth=Math.min(2,t.strokeWidth??2)),Em(t)&&(t.fit="contain",t.width=void 0,t.height=void 0,t.repeat="no-repeat"),g_({fill:t,stroke:i,strokeOpacity:n,fillOpacity:s,strokeWidth:this.item.marker.strokeWidth??l,lineDash:r,lineDashOffset:a},ZY,qY,QY)}getContainerStyles(){const{stroke:e,strokeOpacity:t,strokeWidth:i}=this.border,{cornerRadius:n,fill:s,fillOpacity:o,padding:r}=this,a=typeof r=="number";return g_({cornerRadius:n,fill:s,fillOpacity:o,padding:{top:a?r:r.top??0,right:a?r:r.right??0,bottom:a?r:r.bottom??0,left:a?r:r.left??0},stroke:e,strokeOpacity:t,strokeWidth:this.border.enabled?i:0},ZY,qY,QY)}computePagedBBox(){const e=Mt.computeChildrenBBox(this.group.excludeChildren({name:"legend-container"}));if(this.pages.length>1){const[n,s]=this.maxPageSize;e.height=Math.max(s,e.height),e.width=Math.max(n,e.width)}const{strokeWidth:t,padding:i}=this.getContainerStyles();return e.grow(i).grow(t),e}findNode(e){const{datum:t,proxyButton:i}=this.itemSelection.select(n=>n.datum?.itemId===e.itemId)[0]??{};if(t===void 0||i===void 0)throw new Error(`AG Charts - Missing required properties { datum: ${t}, proxyButton: ${JSON.stringify(i)} }`);return{datum:t,proxyButton:i}}contextToggleVisibility(e){const{datum:t,proxyButton:i}=this.findNode(e);this.doClick(e.event,t,i)}contextToggleOtherSeries(e){this.doDoubleClick(e.event,this.findNode(e).datum)}onContextClick(e,t){const{sourceEvent:i}=e,n=t.datum;this.preventHidingAll&&this.contextMenuDatum?.enabled&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!1:this.ctx.contextMenuRegistry.builtins.items["toggle-series-visibility"].enabled=!0;const o=this.ctx.chartService.series.length>1&&this.ctx.chartService.series[0]?.getLegendData("category")[0]?.hideToggleOtherSeries!==!0?"show":"hide";this.ctx.contextMenuRegistry.toggle("toggle-other-series",o);const{offsetX:r,offsetY:a}=i,{x:l,y:c}=vn.toCanvasPoint(t,r,a);this.ctx.contextMenuRegistry.dispatchContext("legend-item",{widgetEvent:e,canvasX:l,canvasY:c},{legendItem:n})}onClick(e,t,i){this.doClick(e,t,i)&&e.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(e=>e.getLegendData("category")).filter(e=>e.enabled).length}doClick(e,t,i){const{listeners:{legendItemClick:n},ctx:{chartService:s,highlightManager:o},preventHidingAll:r,toggleSeries:a}=this;if(!t)return!1;const{legendType:l,seriesId:c,itemId:u,enabled:d,legendItemName:p}=t,f=s.series.find(b=>b.id===c);if(!f)return!1;let m=d;const v=XY("click",t,e);return n&&mc([f.properties,this.ctx.chartService],n,v.apiEvent),v.defaultPrevented||(a&&(m=!d,r&&!m&&this.getVisibleItemCount()<2&&(m=!0),i.setChecked(m),this.ctx.eventsHub.emit("legend:item-click",{legendType:l,series:f,itemId:u,enabled:m,legendItemName:p})),m?o.updateHighlight(this.id,{series:f,itemId:u,datum:void 0,datumIndex:void 0,legendItemName:p}):o.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0,skipAnimations:t.skipAnimations??!1})),!0}onDoubleClick(e,t){this.doDoubleClick(e,t)&&e.preventDefault()}doDoubleClick(e,t){const{listeners:{legendItemDoubleClick:i},ctx:{chartService:n},toggleSeries:s}=this;if(!t)return!1;const{legendType:o,id:r,itemId:a,seriesId:l}=t,c=n.series.find(d=>d.id===r);if(!c)return!1;const u=XY("dblclick",t,e);if(i&&mc([c.properties,this.ctx.chartService],i,u.apiEvent),u.defaultPrevented)return!0;if(s){const d=n.series.flatMap(v=>v.getLegendData("category"));let p=0;const f=new Set;for(const v of d)v.enabled&&(p+=1,v.legendItemName!=null&&f.add(v.legendItemName));f.size>0&&(p=f.size);const m=d.find(v=>v.itemId===a&&v.seriesId===l);this.ctx.eventsHub.emit("legend:item-double-click",{legendType:o,series:c,itemId:a,numVisibleItems:p,enabled:m?.enabled??!1,legendItemName:m?.legendItemName})}return this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(e,t){let i;return e instanceof FocusEvent?i=vn.toCanvas(t).computeCenter():(e.preventDefault(),i=vn.toCanvasPoint(t,e.offsetX,e.offsetY)),{canvasX:i.x,canvasY:i.y,showArrow:!1}}onHover(e,t){if(!this.enabled)throw new Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(t.pageIndex);const i=t.datum,n=i?this.ctx.chartService.series.find(s=>s.id===i?.id):void 0;if(i&&this.truncatedItems.has(i.itemId??i.id)){const s=this.toTooltipMeta(e,t);this.ctx.tooltipManager.updateTooltip(this.id,s,[{type:"structured",title:this.getItemLabel(i)}])}else this.ctx.tooltipManager.removeTooltip(this.id);i?.enabled&&n?this.updateHighlight({series:n,itemId:i?.itemId,datum:void 0,datumIndex:void 0,legendItemName:i?.legendItemName}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(e){this.ctx.interactionManager.isState(32)?this.ctx.highlightManager.updateHighlight(this.id,e):this.ctx.interactionManager.isState(2)&&(this.pendingHighlightDatum=e,this.ctx.animationManager.onBatchStop(()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)}))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(e){const t=this.positionLegendScene(e);this.positionLegendDOM(t)}positionLegendScene(e){if(!this.enabled||!this.data.length)return;const{placement:t,floating:i,xOffset:n,yOffset:s}=UT(this.position),o=i?new He(0,0,e.width,e.height):e.layoutBox,{x:r,y:a,width:l,height:c}=o,[u,d]=this.calculateLegendDimensions(o),{oldPages:p}=this.calcLayout(u,d),f=this.computePagedBBox();if(this.visible){const m=this.spacing;let v,b;switch(t){case"top":v=(l-f.width)/2,b=0;break;case"bottom":v=(l-f.width)/2,b=c-f.height;break;case"right":v=l-f.width,b=(c-f.height)/2;break;case"left":v=0,b=(c-f.height)/2;break;case"top-right":case"right-top":v=l-f.width,b=0;break;case"top-left":case"left-top":v=0,b=0;break;case"bottom-right":case"right-bottom":v=l-f.width,b=c-f.height;break;case"bottom-left":case"left-bottom":v=0,b=c-f.height;break}if(!i){let C,x;switch(t){case"top":case"top-right":case"top-left":C=f.height+m,x="top";break;case"bottom":case"bottom-right":case"bottom-left":C=f.height+m,x="bottom";break;case"left":case"left-top":case"left-bottom":C=f.width+m,x="left";break;case"right":case"right-top":case"right-bottom":C=f.width+m,x="right";break}o.shrink(C,x)}v+=n,b+=s,this.group.translationX=Math.floor(r+v-f.x),this.group.translationY=Math.floor(a+b-f.y),this.containerNode.x=f.x,this.containerNode.y=f.y,this.containerNode.width=f.width,this.containerNode.height=f.height}return p}positionLegendDOM(e){const{ctx:t,itemSelection:i,pagination:n,pages:s,group:o}=this,r=this.visible&&this.enabled,a=this.isInteractive();this.domProxy.update({visible:r,interactive:a,ctx:t,itemSelection:i,group:o,pagination:n,oldPages:e,newPages:s,datumReader:this,itemListener:this})}calculateLegendDimensions(e){const{width:t,height:i}=e,{placement:n}=UT(this.position),s=t/i,o=.5,r=.2,a=.25;let l,c;switch(n){case"top":case"top-left":case"top-right":case"bottom":case"bottom-left":case"bottom-right":{const u=s<1?Math.min(o,r*(1/s)):r;l=this.maxWidth?Math.min(this.maxWidth,t):t,c=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*u);break}case"left":case"left-top":case"left-bottom":case"right":case"right-top":case"right-bottom":{const u=s>1?Math.min(o,a*s):a;l=this.maxWidth?Math.min(this.maxWidth,t):Math.round(t*u),c=this.maxHeight?Math.min(this.maxHeight,i):i;break}}return[l,c]}cachedCallWithContext(e,t){const{callbackCache:i,chartService:n}=this.ctx;return i.call([this,n],e,t)}};Qn.className="Legend";E([F],Qn.prototype,"toggleSeries",2);E([F],Qn.prototype,"pagination",2);E([F],Qn.prototype,"item",2);E([F],Qn.prototype,"listeners",2);E([bg((e,t,i)=>{if(e.updateGroupVisibility(),t===i)return;const{ctx:{legendManager:n,stateManager:s}}=e;i===!1&&t===!0&&s.restoreState(n)}),F],Qn.prototype,"enabled",2);E([F],Qn.prototype,"position",2);E([F],Qn.prototype,"maxWidth",2);E([F],Qn.prototype,"maxHeight",2);E([F],Qn.prototype,"reverseOrder",2);E([F],Qn.prototype,"orientation",2);E([F],Qn.prototype,"preventHidingAll",2);E([F],Qn.prototype,"border",2);E([F],Qn.prototype,"cornerRadius",2);E([F],Qn.prototype,"fill",2);E([F],Qn.prototype,"fillOpacity",2);E([F],Qn.prototype,"padding",2);E([F],Qn.prototype,"spacing",2);E([F],Qn.prototype,"xOffset",2);E([F],Qn.prototype,"yOffset",2);var XIe={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new Qn(e),packageType:"community",removable:"standalone-only"},FD=class extends pt{constructor(e){super(),this.ctx=e,this.rectNode=new bs,this.border=new cy(this.rectNode),this.cornerRadius=0,this.padding=0,this.cleanup=new _i,this.node=this.createNode(),this.node.append([this.rectNode]),this.rectNode.fill=void 0,this.cleanup.register(e.scene.attachNode(this.node),e.eventsHub.on("layout:complete",t=>this.onLayoutComplete(t)))}destroy(){this.cleanup.flush()}getPadding(){const{border:e,padding:t}=this,i=e.enabled?e.strokeWidth:0;if(typeof t=="number"){const n=t+i;return{top:n,right:n,bottom:n,left:n}}return{top:(t.top??0)+i,right:(t.right??0)+i,bottom:(t.bottom??0)+i,left:(t.left??0)+i}}createNode(){return new Mt({name:"series-area-container",zIndex:4})}onLayoutComplete(e){const{x:t,y:i,width:n,height:s}=e.series.paddedRect;this.rectNode.x=t,this.rectNode.y=i,this.rectNode.width=n,this.rectNode.height=s}};E([F],FD.prototype,"border",2);E([F],FD.prototype,"clip",2);E([_n("rectNode","cornerRadius"),F],FD.prototype,"cornerRadius",2);E([F],FD.prototype,"padding",2);var ZIe={type:"root",optionsKey:"seriesArea",packageType:"community",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new FD(e)};function oR(e,t,i,n,s){const o=(d,p,f,m)=>{i.animate({id:`${e}_${t}_${p.id}_${d}`,groupId:e,from:f?1:0,to:1,ease:Kw,collapsable:f,onUpdate(v,b){b&&d!=="removed"||(p.path.clear(!0),m(v,p),p.checkPathDirty())},onStop(){d==="added"&&(p.path.clear(!0),m(1,p),p.checkPathDirty())},phase:lc[d]})},r=new Ls,a=d=>(r.resetPathDirty(),d(0,r),r.resetPathDirty(),d(1,r),r.checkPathDirty(),r.isPathDirty()),{addPhaseFn:l,updatePhaseFn:c,removePhaseFn:u}=s;for(const d of n)i.isSkipped()||(o("removed",d,!a(u),u),o("updated",d,!a(c),c)),o("added",d,!a(l),l)}function dy(e,t,i,n,s,o){if(e.visible&&n.itemStyler){const r=s||e.isSeriesHighlighted(o),a=e.getHighlightStateString(o,s||t!=null&&o?.series===t.series&&o?.datumIndex===t.datumIndex,t?.datumIndex),l={border:n.border,color:n.color,cornerRadius:n.cornerRadius,datum:t?.datum,enabled:n.enabled,fill:n.fill,fillOpacity:n.fillOpacity,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontWeight:n.fontWeight,itemId:t?.itemId,seriesId:e.id,padding:n.padding,highlighted:r,highlightState:a},c=e.ctx.optionsGraphService.resolvePartial(["series",`${e.declarationOrder}`,"label"],e.cachedCallWithContext(n.itemStyler,{...i,...l}),{pick:!1})??{};return oi(c,l)}return n}function Zne(e,t,i,n,s,o,r){if(e.visible&&n.enabled&&s){const a=dy(e,t.datum,i,n,o,r);t.visible=!0,t.x=s.x,t.y=s.y,t.text=s.text,t.fill=a.color,t.setAlign(s),t.setFont(a),t.setBoxing(a)}else t.visible=!1}var qIe={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function qne({isUpward:e,isVertical:t,placement:i,spacing:n=0,rect:s}){let o=s.x+s.width/2,r=s.y+s.height/2,a="center",l="middle";if(i!=="inside-center"){const c=(e?1:-1)*(t?-1:1),{direction:u,textAlignment:d}=qIe[i],p=(u+1)*.5;if(t){const f=e?s.y+s.height:s.y,m=s.height*c;r=f+m*p+n*d*c,l=d===c?"top":"bottom"}else{const f=e?s.x:s.x+s.width,m=s.width*c;o=f+m*p+n*d*c,a=d===c?"left":"right"}}return{x:o,y:r,textAlign:a,textBaseline:l}}function hn({id:e},t,i,...n){for(const s of n)s.cleanup();vh(e,t,i,n,{opacity:0},{opacity:1},{phase:"trailing"})}function $T({id:e},t,i,...n){vh(e,t,i,n,{opacity:1},{opacity:0},{phase:"remove"})}function hy(e){return{opacity:1}}var Wo=0,dr=1,hr=2,pr=3,cc=4,QIe=3,JIe=20,DF=100;function T_(e,t,i,n,s,o,r,a){let l=0;for(;l<DF&&e[n]==null&&n<s;)n+=1,l+=1;for(;l<DF&&e[s]==null&&s>n;)s-=1,l+=1;if(l>=DF||n>=s)return o;const c=Number.isFinite(t)?bc(e[s],t,i,a)-bc(e[n],t,i,a):o0(s,e.length)-o0(n,e.length);if(c===0||!Number.isFinite(c))return o;const u=Math.abs(c)/(s-n);let d;if(r<QIe?d=!0:r>JIe?d=!1:d=u<=o,o=Math.min(o,u),!d)return o;const p=Math.floor((n+s)/2),f=T_(e,t,i,n,p,o,r+1,a),m=T_(e,t,i,p+1,s,o,r+1,a);return Math.min(f,m,o)}function eRe(e,t,i,n){return T_(e,t,i,0,e.length-1,1/(e.length-1),0,n)}function wL(e,t,i,n){if(Number.isFinite(t)){const s=n?.smallestKeyInterval,o=n?.xNeedsValueOf??!0,r=s==null?eRe(e,t,i,o):s/(i-t);return ite(Math.trunc(1/r))>>3}else{let s=Math.ceil(Math.log2(e.length))-1;return s=Math.min(Math.max(s,0),24),Math.trunc(2**s)}}function lS(e,t){switch(e){case"category":return[Number.NaN,Number.NaN];case"number":case"time":case"ordinal-time":case"unit-time":{let i=1/0,n=-1/0;for(const s of t){const o=Number(s);i=Math.min(i,o),n=Math.max(n,o)}return[i,n]}case"color":case"log":case"mercator":return[0,0]}}function o0(e,t){return e/t}function bc(e,t,i,n){return n?(e.valueOf()-t)/(i-t):(e-t)/(i-t)}function YV(e,t){return Math.trunc(Math.min(Math.floor(e*t),t-1)*cc)}function r0(e,t,i,n,s,o,{positive:r,xNeedsValueOf:a=!0,yNeedsValueOf:l=!0}={}){const c=new Int32Array(o*cc).fill(-1),u=new Float64Array(o*cc).fill(Number.NaN),d=Number.isFinite(n)&&Number.isFinite(s),p=e.length,f=d?s-n:0,m=1/p;let v=-1,b=-1,C=Number.NaN,x=-1,w=Number.NaN,M=-1,T=Number.NaN,L=-1,I=Number.NaN;const R=V=>{const j=V;c[j+Wo]=b,c[j+dr]=x,c[j+hr]=M,c[j+pr]=L,u[j+Wo]=C,u[j+dr]=w,u[j+hr]=T,u[j+pr]=I},O=V=>{const j=V;b=c[j+Wo],x=c[j+dr],M=c[j+hr],L=c[j+pr],C=u[j+Wo],w=u[j+dr],T=u[j+hr],I=u[j+pr]},_=e.length,B=t===i;for(let V=0;V<_;V++){const j=e[V];if(j==null)continue;const K=t[V],Y=B?K:i[V];let G,$;if(l?(G=K==null?Number.NaN:K.valueOf(),$=Y==null?Number.NaN:Y.valueOf()):(G=K??Number.NaN,$=Y??Number.NaN),r!=null&&G>=0!==r)continue;let W;d?a?W=(j.valueOf()-n)/f:W=(j-n)/f:W=V*m;const Q=Math.trunc(Math.min(Math.floor(W*o),o-1)*cc);Q!==v&&(v!==-1&&R(v),v=Q,O(Q));const q=!Number.isNaN($),H=!Number.isNaN(G);b===-1?(b=V,C=W,x=V,w=W,q&&(M=V,T=$),H&&(L=V,I=G)):(W<C&&(b=V,C=W),W>w&&(x=V,w=W),q&&$<T&&(M=V,T=$),H&&G>I&&(L=V,I=G))}return v!==-1&&R(v),{indexData:c,valueData:u}}function a0(e,t,i,{inPlace:n=!1}={}){const s=Math.trunc(i/2),o=n?e:new Int32Array(s*cc),r=n?t:new Float64Array(s*cc);for(let a=0;a<s;a+=1){const l=Math.trunc(a*cc),c=Math.trunc(l*2),u=Math.trunc(c+cc),d=e[u+Wo]===-1,p=d||t[c+Wo]<t[u+Wo]?c:u;o[l+Wo]=e[p+Wo],r[l+Wo]=t[p+Wo];const f=d||t[c+dr]>t[u+dr]?c:u;o[l+dr]=e[f+dr],r[l+dr]=t[f+dr];const m=d||t[c+hr]<t[u+hr]?c:u;o[l+hr]=e[m+hr],r[l+hr]=t[m+hr];const v=d||t[c+pr]>t[u+pr]?c:u;o[l+pr]=e[v+pr],r[l+pr]=t[v+pr]}return{maxRange:s,indexData:o,valueData:r}}var tRe=1e3,iRe=10;function JY(e,t,i,n,s,o,r){const a=e[o];if(a==null)return-1;const l=Number.isFinite(t)?bc(a,t,i,r):o0(o,e.length),c=YV(l,s);return o===n[c+Wo]||o===n[c+dr]||o===n[c+hr]||o===n[c+pr]?c:-1}function nRe(e,t,i,n,s,o){if(t.length<tRe)return;const[r,a]=lS(e,n);let l=wL(t,r,a,{xNeedsValueOf:s});const{indexData:c,valueData:u}=r0(t,i,i,r,a,l,{xNeedsValueOf:s,yNeedsValueOf:o});let d=[],p=[],f=-1;for(let v=0;v<t.length;v+=1){const b=JY(t,r,a,c,l,v,s);if(b===-1)continue;const C=p.push(v)-1;b!==f&&(d.push(C),f=b)}d.push(p.length-1);const m=[{maxRange:l,metaIndices:d,indices:p}];for(;p.length>iRe&&l>64;){({maxRange:l}=a0(c,u,l,{inPlace:!0}));const v=p;d=[],p=[],f=-1;for(const b of v){const C=JY(t,r,a,c,l,b,s);if(C===-1)continue;const x=p.push(b)-1;C!==f&&(d.push(x),f=C)}d.push(p.length-1),m.push({maxRange:l,metaIndices:d,indices:p})}return m.reverse(),m}var XV=class extends pt{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(e){this._dirty=!1}isDirty(){return this._dirty}onChangeDetection(e){this.markDirty()}},Uu=class extends XV{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};E([F,Le()],Uu.prototype,"enabled",2);E([F,Le()],Uu.prototype,"color",2);E([F,Le()],Uu.prototype,"xOffset",2);E([F,Le()],Uu.prototype,"yOffset",2);E([F,Le()],Uu.prototype,"blur",2);var Sr=class extends XV{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){const{size:t,shape:i,fill:n,fillOpacity:s,stroke:o,strokeWidth:r,strokeOpacity:a,lineDash:l,lineDashOffset:c}=this;return{size:t,shape:i,fill:n,fillOpacity:s,stroke:o,strokeWidth:r,strokeOpacity:a,lineDash:l,lineDashOffset:c}}getDiameter(){return this.size+this.strokeWidth}};E([F,Le()],Sr.prototype,"enabled",2);E([F,Pa({})],Sr.prototype,"shape",2);E([F,Le()],Sr.prototype,"size",2);E([F,Pa({})],Sr.prototype,"fill",2);E([F,Le()],Sr.prototype,"fillOpacity",2);E([F,Le()],Sr.prototype,"stroke",2);E([F,Le()],Sr.prototype,"strokeWidth",2);E([F,Le()],Sr.prototype,"strokeOpacity",2);E([F],Sr.prototype,"lineDash",2);E([F],Sr.prototype,"lineDashOffset",2);E([F,Pa({})],Sr.prototype,"itemStyler",2);var Qne=class extends pt{constructor(){super(...arguments),this.enabled=!1}};E([F],Qne.prototype,"enabled",2);var Dh=class extends pt{constructor(){super(...arguments),this.interaction=new Qne,this.position=new ey,this.range=void 0,this.class=void 0}formatTooltip(e,t,i){const n=this.renderer==null?void 0:mc(e,this.renderer,i);return typeof n=="string"?{type:"raw",rawHtmlString:n}:n!=null?{type:"structured",...t,...n}:{type:"structured",...t}}};E([F],Dh.prototype,"enabled",2);E([F],Dh.prototype,"showArrow",2);E([F],Dh.prototype,"renderer",2);E([F],Dh.prototype,"interaction",2);E([F],Dh.prototype,"position",2);E([F],Dh.prototype,"range",2);E([F],Dh.prototype,"class",2);function py(){return new Dh}var ZV=class extends Ls{constructor(){super(...arguments),this.segmentPath=new Ls}drawPath(e){if(!this.segments||this.segments.length===0){super.drawPath(e);return}e.save();const t=new Path2D;wb(t,{x0:0,y0:0,x1:e.canvas.width,y1:e.canvas.height},!1);for(const n of this.segments)wb(t,n.clipRect);e.clip(t),super.drawPath(e),e.restore();const{segmentPath:i}=this;i.setProperties({opacity:this.opacity,visible:this.visible,lineCap:this.lineCap,lineJoin:this.lineJoin,pointerEvents:this.pointerEvents});for(const{clipRect:n,fill:s,stroke:o,...r}of this.segments){e.save(),i.path=this.path,i.setProperties(r),i.fill=this.fill==null?"none":s,i.stroke=this.stroke==null?"none":o;const a=new Path2D;wb(a,n),e.clip(a),i.drawPath(e),e.restore()}}};E([xE()],ZV.prototype,"segments",2);function wb(e,{x0:t,y0:i,x1:n,y1:s},o=!0){const r=Math.min(t,n),a=Math.min(i,s),l=Math.max(t,n),c=Math.max(i,s);e.moveTo(r,a),o?(e.lineTo(l,a),e.lineTo(l,c),e.lineTo(r,c)):(e.lineTo(r,c),e.lineTo(l,c),e.lineTo(l,a)),e.closePath()}var Jne=class extends So{constructor(){super(...arguments),this.segments=[],this.scalablePath=new(AE(Ls))}renderInContext(e){if(!this.visible)return;const{ctx:t}=e;if(!this.segments||this.segments?.length===0)return super.renderInContext(e);t.save();const i=new Path2D;wb(i,{x0:0,y0:0,x1:t.canvas.width,y1:t.canvas.height},!1);for(const s of this.segments)wb(i,s.clipRect);t.clip(i);for(const s of this.children())s.visible&&s.render(e);t.restore();const{scalablePath:n}=this;for(const{clipRect:s,...o}of this.segments){t.save();const r=new Path2D;wb(r,s),t.clip(r),n.setProperties(o);for(const a of this.children())!a.visible||!(a instanceof Ls)||(n.path=a.path,n.setProperties({opacity:a.opacity,lineCap:a.lineCap,lineJoin:a.lineJoin,...v0e(a)&&{scalingX:a.scalingX,scalingY:a.scalingY,scalingCenterX:a.scalingCenterX,scalingCenterY:a.scalingCenterY}}),n.render(e));t.restore()}}};E([xE()],Jne.prototype,"segments",2);var ese=class{constructor(e,t,i){this.root=new rRe(e,t,i)}clear(e){this.root.clear(e)}addValue(e,t){const i={hitTester:e,value:t,distanceSquared:(n,s)=>e.distanceSquared(n,s)};this.root.addElem(i)}find(e,t){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(e,t,i),i.best}},sRe=class{constructor(e,t,i,n){this.nw=e,this.ne=t,this.sw=i,this.se=n}addElem(e){this.nw.addElem(e),this.ne.addElem(e),this.sw.addElem(e),this.se.addElem(e)}find(e,t,i){this.nw.find(e,t,i),this.ne.find(e,t,i),this.sw.find(e,t,i),this.se.find(e,t,i)}},oRe=class{constructor(e,t,i){this.capacity=e,this.maxdepth=t,this.boundary=i??He.NaN,this.elems=[],this.subdivisions=void 0}clear(e){this.elems.length=0,this.boundary=e,this.subdivisions=void 0}addElem(e){this.addCondition(e)&&(this.subdivisions===void 0?this.maxdepth===0||this.elems.length<this.capacity?this.elems.push(e):this.subdivide(e):this.subdivisions.addElem(e))}find(e,t,i){this.findCondition(e,t,i)&&(this.subdivisions===void 0?this.findAction(e,t,i):this.subdivisions.find(e,t,i))}subdivide(e){this.subdivisions=this.makeSubdivisions();for(const t of this.elems)this.subdivisions.addElem(t);this.subdivisions.addElem(e),this.elems.length=0}makeSubdivisions(){const{x:e,y:t,width:i,height:n}=this.boundary,{capacity:s}=this,o=this.maxdepth-1,r=i/2,a=n/2,l=new He(e,t,r,a),c=new He(e+r,t,r,a),u=new He(e,t+a,r,a),d=new He(e+r,t+a,r,a);return new sRe(this.child(s,o,l),this.child(s,o,c),this.child(s,o,u),this.child(s,o,d))}},rRe=class tse extends oRe{addCondition(t){const{x:i,y:n}=t.hitTester.midPoint;return this.boundary.containsPoint(i,n)}findCondition(t,i,n){const{best:s}=n;return s.distanceSquared!==0&&this.boundary.distanceSquared(t,i)<s.distanceSquared}findAction(t,i,n){const s=SE(t,i,this.elems,n.best.distanceSquared);s.nearest!==void 0&&s.distanceSquared<n.best.distanceSquared&&(n.best=s)}child(t,i,n){return new tse(t,i,n)}},qV=class extends XE{constructor({clipFocusBox:e,categoryKey:t,...i}){super(i),this.categoryKey=t,this.clipFocusBox=e??!0}dataCount(){return this.processedData?.dataSources?.get(this.id)?.data?.length??0}getHasData(e){const{dataModel:t,processedData:i}=this;if(!t||!i)return super.hasData;const n=t.resolveColumnById(this,e,i);for(const s of n)if(s!=null&&(typeof s!="number"||!Number.isNaN(s)))return!0;return!1}getScaleInformation({xScale:e,yScale:t}){const i=mi.is(e),n=mi.is(t);return{isContinuousX:i,isContinuousY:n,xScaleType:e?.type,yScaleType:t?.type}}getModulePropertyDefinitions(){const e=this.axes.x?.scale,t=this.axes.y?.scale;return this.moduleMap.mapModules(i=>i.getPropertyDefinitions(this.getScaleInformation({xScale:e,yScale:t}))).flat()}async requestDataModel(e,t,i){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:n,processedData:s}=await e.request(this.id,t??rb.empty(),i);return this.dataModel=n,this.processedData=s,this.events.emit("data-processed",{dataModel:n,processedData:s}),{dataModel:n,processedData:s}}isProcessedDataAnimatable(){const{processedData:e,ctx:t}=this;if(!e)return!1;const i=this.getNodeData();if(i!=null&&i.length>t.animationManager.maxAnimatableItems)return!1;const n=e.reduced?.animationValidation;if(!n)return!0;const{orderedKeys:s,uniqueKeys:o}=n;return s&&o}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(e){const t=this.getNodeData();if(t===void 0||t.length===0)return;const i=this.computeFocusDatumIndex(e,t);if(i===void 0)return;const{clipFocusBox:n}=this,s=t[i],o={...e,datumIndex:i},r=this.computeFocusBounds(o);if(r!==void 0)return{bounds:r,clipFocusBox:n,datum:s,datumIndex:i}}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);return t.sort((i,n)=>i.datumIndex-n.datumIndex),t}isDatumEnabled(e,t){const{missing:i=!1,enabled:n=!0,focusable:s=!0}=e[t];return!i&&n&&s}computeFocusDatumIndex(e,t){const i=(r,a)=>{for(;r>=0&&!this.isDatumEnabled(t,r);)r+=a;return r===-1?void 0:r},n=(r,a)=>{for(;r<t.length&&!this.isDatumEnabled(t,r);)r+=a;return r===t.length?void 0:r};let s;const o=Je(0,e.datumIndex,t.length-1);return e.datumIndexDelta<0?s=i(o,e.datumIndexDelta):e.datumIndexDelta>0?s=n(o,e.datumIndexDelta):s=n(o,1)??i(o,-1),s===void 0?e.datumIndexDelta===0?void 0:e.datumIndex-e.datumIndexDelta:s}dataModelPropertyIsKey(e){const{processedData:t}=this;return t?t.defs.keys.some(i=>i.id===e&&i.idsMap?.get(this.id)?.has(e)===!0):!1}keysOrValues(e){const{dataModel:t,processedData:i}=this;return!t||!i?[]:this.dataModelPropertyIsKey(e)?t.resolveKeysById(this,e,i):t.resolveColumnById(this,e,i)}sortOrder(e){const{dataModel:t,processedData:i}=this;if(!(!t||!i))return this.dataModelPropertyIsKey(e)?t.getKeySortOrder(this,e,i):t.getColumnSortOrder(this,e,i)}getCategoryKey(){return this.categoryKey}getCategoryValue(e){const{processedData:t,dataModel:i}=this,n=this.getCategoryKey();return!t||!i||!n||(t.invalidData?.get(this.id)?.[e]??!1)?void 0:this.keysOrValues(n)[e]}datumIndexForCategoryValue(e){const{processedData:t,dataModel:i}=this,n=this.getCategoryKey();if(!t||!i||!n)return;e=e.valueOf();const s=t.invalidData?.get(this.id),o=this.keysOrValues(n);for(let r=0;r<o.length;r+=1){if(s?.[r]===!0)continue;const a=o[r]?.valueOf();if(yr(e,a))return r}}},WS={x:["xKey"],y:["yKey"]},jS={x:["xName"],y:["yName"]},QV=class extends YE{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.yKey=n.properties.yKey}},Mh=class extends Gl{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1,this.segmentation=new iD}};E([F],Mh.prototype,"legendItemName",2);E([F],Mh.prototype,"pickOutsideVisibleMinorAxis",2);E([F],Mh.prototype,"segmentation",2);var rR=100,Rg=class extends qV{constructor({pathsPerSeries:e=["path"],pathsZIndexSubOrderOffset:t=[],datumSelectionGarbageCollection:i=!0,animationAlwaysUpdateSelections:n=!1,segmentedDataNodes:s=!0,animationResetFns:o,propertyKeys:r,propertyNames:a,...l}){if(super({propertyKeys:r,propertyNames:a,canHaveAxes:!0,...l}),this.NodeEvent=QV,this.dataNodeGroup=this.contentGroup.appendChild(new Jne({name:`${this.id}-series-dataNodes`,zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new So({name:`${this.id}-series-labels`})),this.labelSelection=Yo.select(this.labelGroup,ba),this.highlightSelection=Yo.select(this.highlightGroup,()=>this.nodeFactory()),this.annotationSelections=new Set,this.seriesBelowStackContext=void 0,this.debug=Ct.create(),!r||!a)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:e,pathsZIndexSubOrderOffset:t,propertyKeys:r,propertyNames:a,animationResetFns:o,animationAlwaysUpdateSelections:n,datumSelectionGarbageCollection:i,segmentedDataNodes:s},this.paths=e.map(c=>new ZV({name:`${this.id}-${c}`})),this.datumSelection=Yo.select(this.dataNodeGroup,()=>this.nodeFactory(),i),this.animationState=new oD("empty",{empty:{update:{target:"ready",action:c=>this.animateEmptyUpdateReady(c)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:c=>this.animateReadyHighlight(c),resize:c=>this.animateReadyResize(c),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:c=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(c):this.animateWaitingUpdateReady(c)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:c=>this.resetAllAnimation(c),reset:"empty"},clearing:{update:{target:"empty",action:c=>this.animateClearingUpdateEmpty(c)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){return this.contextNodeData?.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),this.attachPaths(this.paths)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.detachPaths(this.paths)}updatedDomains(){this.animationState.transition("updateData")}attachPaths(e){for(const t of e)this.contentGroup.appendChild(t)}detachPaths(e){for(const t of e)t.remove()}renderToOffscreenCanvas(){const e=this.getNodeData();return e!=null&&e.length>rR}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"?this.animationState.transition("skip"):e==="disabled"&&this.animationState.transition("disable")}addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>this.onLegendItemClick(e)),this.ctx.eventsHub.on("legend:item-double-click",e=>this.onLegendItemDoubleClick(e)))}destroy(){super.destroy(),this._contextNodeData=void 0}isSeriesHighlighted(e){const{series:t,legendItemName:i}=e??{},{legendItemName:n}=this.properties;return t===this||n!=null&&n===i}strokewidthChange(){const e=("strokeWidth"in this.properties&&this.properties.strokeWidth)??0,t=this.properties.highlight.highlightedSeries.strokeWidth??e,i=this.properties.highlight.highlightedItem?.strokeWidth??e;return e>i||t>i}update({seriesRect:e}){const{_contextNodeData:t}=this,i=this.checkResize(e),n=this.updateHighlightSelection();this.contentGroup.batchedUpdate(()=>{const o=this.updateSelections(),r=this.contextNodeData?.segments;this.opts.segmentedDataNodes?this.dataNodeGroup.segments=r??this.dataNodeGroup.segments:this.dataNodeGroup.segments=void 0,this.updateNodes(n,i||o)});const s=this.getAnimationData(e,t);s&&(i&&this.animationState.transition("resize",s),this.animationState.transition("update",s),this.processedDataUpdated=!1)}createStackContext(){}updateSelections(){var e;const t=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!this.visible&&t)return!1;const{nodeDataRefresh:i}=this;if(!i&&!this.isPathOrSelectionDirty())return!1;if(i){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();const n=this.isProcessedDataAnimatable();this._contextNodeData&&((e=this._contextNodeData).animationValid??(e.animationValid=n));const{dataModel:s,processedData:o}=this;s!==void 0&&o!==void 0&&this.events.emit("data-update",{dataModel:s,processedData:o}),this.updateSeriesSelections()}return i}updateSeriesSelections(){const{datumSelection:e,labelSelection:t,paths:i}=this,n=this._contextNodeData;if(!n)return;const{nodeData:s,labelData:o,itemId:r}=n;this.updatePaths({itemId:r,contextData:n,paths:i}),this.datumSelection=this.updateDatumSelection({nodeData:s,datumSelection:e}),this.labelGroup.batchedUpdate(()=>{this.labelSelection=this.updateLabelSelection({labelData:o,labelSelection:t})??t})}getShapeFillBBox(){const{axes:e}=this,t=e.x,i=e.y,[n,s]=Es(t?.range??[0,1]),[o,r]=Es(i?.range??[0,1]),a=this.getSeriesDomain("x"),l=[t?.scale.convert(a.at(0)),t?.scale.convert(a.at(-1))],c=this.getSeriesDomain("y"),u=[i?.scale.convert(c.at(0)),i?.scale.convert(c.at(-1))],[d,p]=Es(l),[f,m]=Es(u);return{axis:new He(n,o,s-n,r-o),series:new He(d,f,p-d,m-f)}}updateNodes(e,t){const{highlightSelection:i,datumSelection:n}=this,s=!this.ctx.animationManager.isSkipped(),o=this.visible&&this._contextNodeData!=null;this.contentGroup.visible=s||o,this.highlightGroup.visible=(s||o)&&e,this.updateDatumStyles({datumSelection:i,isHighlight:!0});const r=this.ctx.chartService.highlight?.drawingMode??"overlay";this.updateDatumNodes({datumSelection:i,isHighlight:!0,drawingMode:r}),this.animationState.transition("highlight",i);const{dataNodeGroup:a,labelSelection:l,paths:c,labelGroup:u}=this,{itemId:d}=this.contextNodeData??{};if(this.updatePathNodes({itemId:d,paths:c,visible:o,animationEnabled:s}),a.visible=s||o,u.visible=o,!a.visible)return;this.hasItemStylers()&&this.updateDatumStyles({datumSelection:n,isHighlight:!1});const p=this.strokewidthChange()||this.hasChangesOnHighlight;(t||p)&&(this.updateDatumNodes({datumSelection:n,isHighlight:!1,drawingMode:"overlay"}),this.usesPlacedLabels||this.labelGroup.batchedUpdate(()=>{this.updateLabelNodes({labelSelection:l,isHighlight:!1})}))}getHighlightData(e,t){return t?[{...t}]:void 0}updateHighlightSelection(){const{highlightSelection:e,_contextNodeData:t}=this;if(!t)return!1;const i=this.ctx.highlightManager?.getActiveHighlight(),s=this.isSeriesHighlighted(i)&&i?.datum?i:void 0;if(s==null)return!1;const{nodeData:o}=t,r=this.getHighlightData(o,s);return this.highlightSelection=this.updateHighlightSelectionItem({items:r,highlightSelection:e}),!0}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:e}of this.datumSelection)e.datum.missing!==!0&&(yield e)}getQuadTree(){if(this.quadtree===void 0){const{width:e,height:t}=this.ctx.scene.canvas,i=new He(0,0,e,t);this.quadtree=new ese(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(e){}pickNodeDataExactShape(e){const{x:t,y:i}=e,{dataNodeGroup:n}=this,s=n.pickNodes(t,i).filter(o=>o.datum.missing!==!0);if(s.length!==0)return s.map(r=>r.datum)}pickModulesExactShape(e){for(const t of this.moduleMap.modules()){const{datum:i}=t.pickNodeExact(e)??{};if(i!=null&&i?.missing!==!0)return[i]}}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);return t.length!==0?t:this.pickNodeDataExactShape(e)??this.pickModulesExactShape(e)??[]}pickNodeDataClosestDatum(e){const{x:t,y:i}=e,{axes:n,_contextNodeData:s}=this;if(!s)return;const o=n.x,r=n.y,a={x:t,y:i};let l=1/0,c;for(const u of s.nodeData){const{point:{x:d=Number.NaN,y:p=Number.NaN}={}}=u;if(Number.isNaN(d)||Number.isNaN(p)||!(o?.inRange(d)&&r?.inRange(p)))continue;const m=Math.max((a.x-d)**2+(a.y-p)**2,0);m<l&&(l=m,c=u)}if(l!=null)return{datum:c,distance:Math.sqrt(l)}}pickModulesClosestDatum(e){let t=1/0,i;for(const n of this.moduleMap.modules()){const s=n.pickNodeNearest(e);s!==void 0&&s.distanceSquared<t&&(t=s.distanceSquared,i=s.datum)}if(t!=null)return{datum:i,distance:Math.sqrt(t)}}pickNodeClosestDatum(e){let t=1/0,i;const n=this.pickNodeDataClosestDatum(e);n!=null&&n.distance<t&&(t=n.distance,i=n.datum);const s=this.pickModulesClosestDatum(e);if(s!=null&&s.distance<t&&(t=s.distance,i=s.datum),i){const o=Math.max(t-(i.point?.size??0)/2,0);return{datum:i,distance:o}}}pickNodeMainAxisFirst(e,t){const{x:i,y:n}=e,{axes:s,_contextNodeData:o}=this,{pickOutsideVisibleMinorAxis:r}=this.properties;if(!o)return;const a=s.x,l=s.y;if(a==null||l==null)return;const c=[a,l].filter(m=>m.isCategoryLike()).map(m=>m.direction);if(t&&c.length===0)return;const[u="x"]=c,d=[i,n];u!=="x"&&d.reverse();const p=[1/0,1/0];let f;for(const m of o.nodeData){const{x:v=Number.NaN,y:b=Number.NaN}=m.point??m.midPoint??{};if(Number.isNaN(v)||Number.isNaN(b)||m.missing===!0)continue;const C=[a?.inRange(v,1),l?.inRange(b,1)];if(u!=="x"&&C.reverse(),!C[0]||!r&&!C[1])continue;const x=[v,b];u!=="x"&&x.reverse();let w=!0;for(let M=0;M<x.length;M++){const T=Math.abs(x[M]-d[M]);if(T>p[M]){w=!1;break}else T<p[M]&&(p[M]=T,p.fill(1/0,M+1,p.length))}w&&(f=m)}if(f){let m=Math.max(p[0]**2+p[1]**2-(f.point?.size??0),0);for(const v of this.moduleMap.modules()){const b=v.pickNodeMainAxisFirst(e,u);if(b!==void 0&&b.distanceSquared<m){f=b.datum,m=b.distanceSquared;break}}return{datum:f,distance:Math.sqrt(m)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}visibleRangeIndices(e,t,i,n){let s;if(n==null){const{processedData:c,dataModel:u}=this;s=u.getColumnSortOrder(this,e,c)??1}else s=n.sortOrder;const o=this.keysOrValues(e),r=0,[a,l]=Xw(s,i?.length??o.length,t,c=>{const u=i?.[c]??c;return this.xCoordinateRange(o[u],r,u)});return a<l?[a,l]:[l,a]}domainForVisibleRange(e,t,i,n,s){const{processedData:o,dataModel:r}=this,[a,l]=n,c=this.keysOrValues(i),u=this.sortOrder(i);if(u!=null){const m=this.visibleRangeIndices(i,n,s,{sortOrder:u});return r.getDomainBetweenRange(this,t,m,o)}const d=t.map(m=>this.keysOrValues(m));let p=1/0,f=-1/0;for(const[m,v]of c.entries()){const[b,C]=this.xCoordinateRange(v,0,m);if(!(C<a||b>l))for(let x=0;x<t.length;x++){const w=d[x][m];p=Math.min(p,w),f=Math.max(f,w)}}return p>f?[Number.NaN,Number.NaN]:[p,f]}domainForClippedRange(e,t,i){const{processedData:n,dataModel:s,axes:o}=this,a=aRe(o[e==="x"?"y":"x"]);if(!a)return t.flatMap(m=>s.getDomain(this,m,"value",n));const l=this.keysOrValues(i),c=s.getColumnSortOrder(this,i,n);if(c!=null){const m=lRe(c,l.length,a,v=>l[v]);return s.getDomainBetweenRange(this,t,m,n)}const u=t.map(m=>this.keysOrValues(m)),d=a[0].valueOf(),p=a[1].valueOf(),f=[];for(const[m,v]of l.entries()){const b=v.valueOf();if(b<d||b>p)continue;const C=u.map(x=>x[m]);b>=d&&f.push(...C),b<=p&&f.push(...C)}return f}zoomFittingVisibleItems(e,t,i,n,s){const{dataModel:o,processedData:r}=this;if(!o||!r)return;const a=this.axes.x;if(n!=null)return;const l=this.sortOrder(e);if(l==null)return;const c=this.keysOrValues(e);if(s>c.length)return{x:[0,1],y:void 0};const u=a.scale,d=u.range;u.range=[0,1];let[p,f]=this.visibleRangeIndices(e,i,void 0,{sortOrder:l});f-=1;const m=0;this.xCoordinateRange(c[p],m,p)[0]<i[0]&&(p+=1),this.xCoordinateRange(c[f],m,f)[1]>i[1]&&(f-=1);let v;if(Math.abs(f-p)>=s-1)v=i;else{const b=(i[0]+i[1])/2;for(;Math.abs(f-p)<s-1&&(p>0||f<c.length-1);)if(p===0)f+=1;else if(f===c.length-1)p-=1;else{const w=this.xCoordinateRange(c[p-1],m,p-1)[0],M=this.xCoordinateRange(c[f+1],m,f+1)[1];Math.abs(w-b)<Math.abs(M-b)?p-=1:f+=1}const C=this.xCoordinateRange(c[p],m,p)[0],x=this.xCoordinateRange(c[f],m,f)[1];v=[Math.min(i[0],C),Math.max(i[1],x)]}return u.range=d,{x:v,y:void 0}}countVisibleItems(e,t,i,n,s){const{dataModel:o,processedData:r}=this;if(!o||!r)return 1/0;const a=this.keysOrValues(e),l=t.map(I=>o.resolveColumnById(this,I,r)),c=this.shouldFlipXY(),u=c?this.axes.y:this.axes.x,d=c?this.axes.x:this.axes.y,p=c?n??[0,1]:i,f=c?i:n??[0,1];if(n==null){const I=this.sortOrder(e);if(I!=null){const R=u.scale,O=R.range;R.range=[0,1];const _=this.keysOrValues(e);let[B,V]=this.visibleRangeIndices(e,p,void 0,{sortOrder:I});V-=1;const j=0;this.xCoordinateRange(_[B],j,B)[0]<p[0]&&(B+=1),this.xCoordinateRange(_[V],j,V)[1]>p[1]&&(V-=1);const K=Math.abs(V-B)+1;return R.range=O,K}}const m=(I,R,O)=>I[0]+(O-R[0])/(R[1]-R[0])*(I[1]-I[0]),v=u.range.toSorted(),b=d.range.toSorted(),C=m(v,u.visibleRange,p[0]),x=m(v,u.visibleRange,p[1]),w=m(b,d.visibleRange,Math.min(...f)),M=m(b,d.visibleRange,Math.max(...f)),T=Math.round((p[0]+(p[1]-p[0])/2)*a.length),L=0;return ete(0,a.length-1,T,s,I=>{const[R,O]=this.xCoordinateRange(a[I],L,I),[_,B]=this.yCoordinateRange(l.map(V=>V[I]),L,I);return!Kt(R)||!Kt(O)||!Kt(_)||!Kt(B)?!1:R>=C&&O<=x&&_>=w&&B<=M})}minTimeInterval(){let e;try{e=this.keysOrValues("xValue")}catch{}if(e==null||e.length>1e3)return;let t=1/0,i=e[0],n;for(let s=1;s<e.length;s++){const o=e[s];if(o!=null&&i!=null){const r=o.valueOf()-i.valueOf(),a=Math.sign(r);if(a===0)continue;if(n!==void 0&&a!==n)return;t=Math.min(t,Math.abs(r)),n=a}i=o}if(Number.isFinite(t))return t}updateHighlightSelectionItem(e){const{items:t,highlightSelection:i}=e,n=t??[];return this.updateDatumSelection({nodeData:n,datumSelection:i})}updateDatumSelection(e){return e.datumSelection}updateDatumNodes(e){}updateDatumStyles(e){}updatePaths(e){for(const t of e.paths)t.visible=!1}updatePathNodes(e){const{paths:t,visible:i}=e;for(const n of t)n.visible=i}resetPathAnimation(e){const{path:t}=this.opts?.animationResetFns??{};if(t)for(const i of e.paths)mo([i],t)}resetDatumAnimation(e){const{datum:t}=this.opts?.animationResetFns??{};t&&mo([e.datumSelection],t)}resetLabelAnimation(e){const{label:t}=this.opts?.animationResetFns??{};t&&mo([e.labelSelection],t)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(e),this.resetDatumAnimation(e),this.resetLabelAnimation(e),e.contextData?.animationValid===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){const{datum:t}=this.opts?.animationResetFns??{};t&&mo([e],t)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(e,t){const{_contextNodeData:i}=this;return i?{datumSelection:this.datumSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:t,paths:this.paths,seriesRect:e}:void 0}updateLabelSelection(e){return e.labelSelection}getScaling(e){if(e instanceof NV){const{range:t,domain:i}=e;return{type:"log",convert:n=>e.convert(n),domain:[i[0],i[1]],range:[t[0],t[1]]}}else if(e instanceof mi){const{range:t,domain:i}=e;return{type:"continuous",domain:[i[0],i[1]],range:[t[0],t[1]]}}else if(e instanceof yh)return{type:"category",domain:e instanceof Vp?e.bands:e.domain,inset:e.inset,step:e.step}}calculateScaling(){const e={};for(const t of Object.values(TE)){const i=this.axes[t];if(!i)continue;const n=this.getScaling(i.scale);n!=null&&(e[t]=n)}return e}};function aRe(e){let t,i;if((e instanceof Oa||e instanceof wh)&&({min:t,max:i}=e),!(t==null&&i==null))return t??(t=-1/0),i??(i=1/0),[t,i]}function lRe(e,t,i,n){const s=i[0].valueOf(),o=i[1].valueOf();let r=Ww(0,t-1,l=>{const c=e===1?l:t-l,u=n(c)?.valueOf();return!Number.isFinite(u)||u>=s}),a=Qf(0,t-1,l=>{const c=e===1?l:t-l,u=n(c)?.valueOf();return!Number.isFinite(u)||u<=o});return r==null||a==null?[0,0]:(e===-1&&([r,a]=[t-a,t-r]),r=Math.max(r,0),a=Math.min(a+1,t),[r,a])}var US=class extends pt{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};E([F],US.prototype,"type",2);E([F],US.prototype,"tension",2);E([F],US.prototype,"position",2);var Jn=class extends Mh{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new US,this.shadow=new Uu,this.marker=new Sr,this.label=new xn,this.tooltip=py(),this.connectMissingData=!1}};E([F],Jn.prototype,"xKey",2);E([F],Jn.prototype,"xName",2);E([F],Jn.prototype,"yKey",2);E([F],Jn.prototype,"yName",2);E([F],Jn.prototype,"yFilterKey",2);E([F],Jn.prototype,"normalizedTo",2);E([F],Jn.prototype,"fill",2);E([F],Jn.prototype,"fillOpacity",2);E([F],Jn.prototype,"stroke",2);E([F],Jn.prototype,"strokeWidth",2);E([F],Jn.prototype,"strokeOpacity",2);E([F],Jn.prototype,"lineDash",2);E([F],Jn.prototype,"lineDashOffset",2);E([F],Jn.prototype,"interpolation",2);E([F],Jn.prototype,"styler",2);E([F],Jn.prototype,"shadow",2);E([F],Jn.prototype,"marker",2);E([F],Jn.prototype,"label",2);E([F],Jn.prototype,"tooltip",2);E([F],Jn.prototype,"connectMissingData",2);function Ea(e){switch(e.type){case"linear":case"step":case"multi-line":return[{x:e.x0,y:e.y0},{x:e.x1,y:e.y1}];case"cubic":return[{x:e.cp0x,y:e.cp0y},{x:e.cp3x,y:e.cp3y}]}}function cRe(e){const t=Ea(e);return t[0].x>t[1].x&&t.reverse(),t}function ise(e,t){const{x:i,y:n}=t;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:i,y0:n,x1:i,y1:n};case"step":return{type:"step",moveTo:e.moveTo,x0:i,y0:n,x1:i,y1:n,stepX:i};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:i,cp0y:n,cp1x:i,cp1y:n,cp2x:i,cp2y:n,cp3x:i,cp3y:n};case"multi-line":return{type:"multi-line",moveTo:e.moveTo,x0:i,y0:n,x1:i,y1:n,midPoints:e.midPoints.map(()=>({x:i,y:n}))}}}function cS(e,t,i){const[n,s]=Ea(e),o=s.x===n.x?0:(i.x-t.x)/(s.x-n.x),r=s.y===n.y?0:(i.y-t.y)/(s.y-n.y);switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:t.x,cp0y:t.y,cp1x:i.x-(e.cp2x-n.x)*o,cp1y:i.y-(e.cp2y-n.y)*r,cp2x:i.x-(e.cp1x-n.x)*o,cp2y:i.y-(e.cp1y-n.y)*r,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y,stepX:i.x-(e.stepX-n.x)*o};case"multi-line":return{type:"multi-line",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y,midPoints:e.midPoints.map(a=>({x:t.x+(a.x-n.x)*o,y:t.y+(a.y-n.y)*r}))}}}function JV(e,t,i){const{moveTo:n}=e,[s,o]=cRe(e),{x:r,y:a}=s,{x:l,y:c}=o;if(i<r)return cS(e,s,s);if(t>l)return cS(e,o,o);switch(e.type){case"linear":{const u=a===c?void 0:(c-a)/(l-r),d=u==null?a:u*(t-r)+a,p=u==null?a:u*(i-r)+a;return{type:"linear",moveTo:n,x0:t,y0:d,x1:i,y1:p}}case"step":if(i<=e.stepX){const u=e.y0;return{type:"step",moveTo:n,x0:t,y0:u,x1:i,y1:u,stepX:i}}else if(t>=e.stepX){const u=e.y1;return{type:"step",moveTo:n,x0:t,y0:u,x1:i,y1:u,stepX:t}}else{const{y0:u,y1:d,stepX:p}=e;return{type:"step",moveTo:n,x0:t,y0:u,x1:i,y1:d,stepX:p}}case"cubic":{const u=HI(e.cp0x,e.cp1x,e.cp2x,e.cp3x,t);let[d,p]=$w(e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,u);const f=HI(p[0].x,p[1].x,p[2].x,p[3].x,i);return[p,d]=$w(p[0].x,p[0].y,p[1].x,p[1].y,p[2].x,p[2].y,p[3].x,p[3].y,f),{type:"cubic",moveTo:n,cp0x:p[0].x,cp0y:p[0].y,cp1x:p[1].x,cp1y:p[1].y,cp2x:p[2].x,cp2y:p[2].y,cp3x:p[3].x,cp3y:p[3].y}}case"multi-line":{const{midPoints:u}=e,d=u.findLastIndex(L=>L.x<=t);let p=u.findIndex(L=>L.x>=i);p===-1&&(p=u.length);const f=d>=0?u[d]:void 0,m=f?.x??r,v=f?.y??a,b=p<u.length?u[p]:void 0,C=b?.x??l,x=b?.y??c,w=v===x?void 0:(x-v)/(C-m),M=w==null?v:w*(m-r)+v,T=w==null?v:w*(C-r)+v;return{type:"multi-line",moveTo:n,x0:t,y0:M,x1:i,y1:T,midPoints:u.slice(Math.max(d,0),p)}}}}var nse=(e=>(e[e.MoveTo=0]="MoveTo",e[e.LineTo=1]="LineTo",e[e.Skip=2]="Skip",e))(nse||{});function sse(e){const t=[];let i=0,n=Number.NaN,s=Number.NaN;for(const{x:o,y:r}of e){if(i>0){const a=i===1;t.push({type:"linear",moveTo:a,x0:n,y0:s,x1:o,y1:r})}i+=1,n=o,s=r}return t}var uRe={start:0,middle:.5,end:1};function ose(e,t){const i=[];let n=0,s=Number.NaN,o=Number.NaN;const r=typeof t=="number"?t:uRe[t];for(const{x:a,y:l}of e){if(n>0){const c=n===1,u=s+(a-s)*r;i.push({type:"step",moveTo:c,x0:s,y0:o,x1:a,y1:l,stepX:u})}n+=1,s=a,o=l}return i}var ek=.05;function rse(e,t){const i=Array.isArray(e)?e:Array.from(e);if(i.length<=1)return[];const n=i.map((o,r)=>{const a=r===0?o:i[r-1],l=r===i.length-1?o:i[r+1],c=r===0||r===i.length-1;if(Math.sign(a.y-o.y)===Math.sign(l.y-o.y))return 0;if(!c){const u=Math.abs(a.y-l.y),d=Math.abs(o.y-a.y)/u,p=Math.abs(o.y-l.y)/u;if(d<=ek||1-d<=ek||p<=ek||1-p<=ek)return 0}return(l.y-a.y)/(l.x-a.x)});n[1]===0&&(n[0]*=2),n.at(-2)===0&&(n[n.length-1]*=2);const s=[];for(let o=1;o<i.length;o+=1){const r=i[o-1],a=n[o-1],l=i[o],c=n[o],u=l.x-r.x,d=l.y-r.y;let p=u*t/3,f=u*a*t/3,m=u*t/3,v=u*c*t/3;c===0&&Math.abs(f)>Math.abs(d)&&(p*=Math.abs(d/f),f=Math.sign(f)*Math.abs(d)),a===0&&Math.abs(v)>Math.abs(d)&&(m*=Math.abs(d/v),v=Math.sign(v)*Math.abs(d)),s.push({type:"cubic",moveTo:o===1,cp0x:r.x,cp0y:r.y,cp1x:r.x+p,cp1y:r.y+f,cp2x:l.x-m,cp2y:l.y-v,cp3x:l.x,cp3y:l.y})}return s}function ms(e,t,i){return(t-e)*i+e}function e6(e,t){const{x0:i,y0:n,x1:s,y1:o}=e,a=(o-n)/(s-i)*(t-i)+n;return{leftCp1x:i,leftCp1y:n,leftCp2x:t,leftCp2y:a,stepX:t,stepY0:a,stepY1:a,rightCp1x:t,rightCp1y:a,rightCp2x:s,rightCp2y:o}}function dRe(e,t){const{cp0x:i,cp0y:n,cp1x:s,cp1y:o,cp2x:r,cp2y:a,cp3x:l,cp3y:c}=e,u=HI(i,s,r,l,t),[d,p]=$w(i,n,s,o,r,a,l,c,u),f=d[3].y;return{leftCp1x:d[1].x,leftCp1y:d[1].y,leftCp2x:d[2].x,leftCp2y:d[2].y,stepX:t,stepY0:f,stepY1:f,rightCp1x:p[1].x,rightCp1y:p[1].y,rightCp2x:p[2].x,rightCp2y:p[2].y}}function hRe(e){const{x0:t,y0:i,x1:n,y1:s,stepX:o}=e;return{leftCp1x:(t+o)/2,leftCp1y:i,leftCp2x:(t+o)/2,leftCp2y:i,stepX:o,stepY0:i,stepY1:s,rightCp1x:(o+n)/2,rightCp1y:s,rightCp2x:(o+n)/2,rightCp2y:s}}function t6(e,t){return e.type==="linear"?e6(e,t):e.type==="cubic"?dRe(e,t):e.type==="step"?hRe(e):e6(e,t)}function ase(e,t,i,n,s,o,r){switch(t){case 0:r?e.moveTo(s,o):e.moveTo(i,n);break;case 1:r?e.lineTo(s,o):e.lineTo(i,n);break}}function lse(e,t,i,n,s,o){o?e.lineTo(t,i):e.lineTo(n,s)}function cse(e,t,i,n,s,o,r,a,l,c){c?e.cubicCurveTo(o,r,n,s,t,i):e.cubicCurveTo(n,s,o,r,a,l)}function use(e,t,i,n,s,o,r){r?(e.lineTo(o,s),e.lineTo(o,i),e.lineTo(t,i)):(e.lineTo(o,i),e.lineTo(o,s),e.lineTo(n,s))}function pRe(e,t,i,n,s,o,r){if(r){for(let a=o.length-1;a>=0;a--){const{x:l,y:c}=o[a];e.lineTo(l,c)}e.lineTo(t,i)}else{for(const{x:a,y:l}of o)e.lineTo(a,l);e.lineTo(n,s)}}function tw(e,t,i,n){const[s,o]=Ea(t);switch(ase(e,i,s.x,s.y,o.x,o.y,n),t.type){case"linear":lse(e,t.x0,t.y0,t.x1,t.y1,n);break;case"cubic":cse(e,t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,n);break;case"step":use(e,t.x0,t.y0,t.x1,t.y1,t.stepX,n);break;case"multi-line":pRe(e,t.x0,t.y0,t.x1,t.y1,t.midPoints,n);break}}function dse(e,t,i){const[n,s]=Ea(e),[o,r]=Ea(t),a=ms(n.x,o.x,i),l=ms(n.y,o.y,i),c=ms(s.x,r.x,i),u=ms(s.y,r.y,i);return[{x:a,y:l},{x:c,y:u}]}function I_(e,t,i,n,s,o){const[{x:r,y:a},{x:l,y:c}]=dse(t,i,n);if(ase(e,s,r,a,l,c,o),t.type==="cubic"&&i.type==="cubic"){const u=ms(t.cp1x,i.cp1x,n),d=ms(t.cp1y,i.cp1y,n),p=ms(t.cp2x,i.cp2x,n),f=ms(t.cp2y,i.cp2y,n);cse(e,r,a,u,d,p,f,l,c,o)}else if(t.type==="step"&&i.type==="step"){const u=ms(t.stepX,i.stepX,n);use(e,r,a,l,c,u,o)}else if(t.type==="linear"&&i.type==="linear")lse(e,r,a,l,c,o);else{let u;t.type==="step"?u=t.stepX:i.type==="step"?u=i.stepX:u=(r+l)/2;const d=t6(t,u),p=t6(i,u),f=ms(d.leftCp1x,p.leftCp1x,n),m=ms(d.leftCp1y,p.leftCp1y,n),v=ms(d.leftCp2x,p.leftCp2x,n),b=ms(d.leftCp2y,p.leftCp2y,n),C=ms(d.stepX,p.stepX,n),x=ms(d.stepY0,p.stepY0,n),w=ms(d.stepY1,p.stepY1,n),M=ms(d.rightCp1x,p.rightCp1x,n),T=ms(d.rightCp1y,p.rightCp1y,n),L=ms(d.rightCp2x,p.rightCp2x,n),I=ms(d.rightCp2y,p.rightCp2y,n);o?(e.cubicCurveTo(L,I,M,T,C,w),e.lineTo(C,x),e.cubicCurveTo(v,b,f,m,r,a)):(e.cubicCurveTo(f,m,v,b,C,x),e.lineTo(C,w),e.cubicCurveTo(M,T,L,I,l,c))}}var gRe=1e3,hse=(e=>(e[e.Zero=0]="Zero",e[e.Split=1]="Split",e))(hse||{});function fRe(e,t){return e==null||t==null||typeof e!="object"||typeof t!="object"?!1:"id"in e&&"id"in t?e.id===t.id:e.toString()===t.toString()}function Zo(e){return o_(e).valueOf()}function Ws(e,t){if(!t)return Number.NaN;if(e instanceof Date&&(e=e.getTime()),t.type==="continuous"&&typeof e=="number")return(e-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0];if(t.type==="log"&&typeof e=="number")return t.convert(e);if(t.type!=="category")return Number.NaN;const i=Zo(e);let n=t.domain.findIndex(s=>Zo(s)===i);return n===-1&&(n=t.domain.findIndex(s=>fRe(e,s))),n>=0?t.inset+t.step*n:Number.NaN}function i6({data:e},t){return e.map((i,n)=>({xValue0Index:t.indexOf(Zo(i.xValue0)),xValue1Index:t.indexOf(Zo(i.xValue1)),datumIndex:n}))}function n6(e){return Object.values(e.scales).every(t=>t.type==="category"?t.domain.length<gRe:!0)}function mRe(e,t){const i=t.scales.x,n=e.scales.x;if(i?.type!=="category"||n?.type!=="category")return!0;let s=-1/0;for(const o of i.domain){const r=Ws(o,n);if(Number.isFinite(r)){if(r<s)return!1;s=r}}return!0}function yRe(e,t){let i=-1/0;for(const n of e){const s=Ws(n.value,t.scales.x);if(Number.isFinite(s)){if(s<i)return!1;i=s}}return!0}function vRe(e,t){const i=new Map;for(const{xValue0:u,xValue1:d}of e.data){const p=Zo(u),f=Zo(d);i.set(p,u).set(f,d)}const n=Array.from(i,([u,d])=>({axisValue:u,value:d}));n.sort((u,d)=>Ws(u.value,e.scales.x)-Ws(d.value,e.scales.x));const s=[];for(const{xValue0:u,xValue1:d}of t.data){const p=Zo(u),f=Zo(d);i.has(p)||(i.set(p,u),s.push({axisValue:p,value:u})),i.has(f)||(i.set(f,d),s.push({axisValue:f,value:d}))}s.sort((u,d)=>Ws(u.value,t.scales.x)-Ws(d.value,t.scales.x));const o=n;let r=0;for(const u of s){for(let d=o.length-1;d>=r;d-=1){const p=Ws(u.value,t.scales.x),f=Ws(o[d].value,t.scales.x);if(p>f){r=d+1;break}}o.splice(r,0,u),r+=1}if(!yRe(o,t))return;const a=o.map(u=>u.axisValue),l=i6(t,a),c=i6(e,a);return{axisValues:a,oldDataAxisIndices:l,newDataAxisIndices:c}}function s6(e,t,i,n,s){if(s.xValue1Index===s.xValue0Index+1)return e;const o=Ea(e);let r,a;if(t.scales.x?.type==="category"){const l=(o[1].x-o[0].x)/(s.xValue1Index-s.xValue0Index);r=o[0].x+(n-s.xValue0Index)*l,a=r+l}else{const l=i[n],c=i[n+1];r=Ws(l,t.scales.x),a=Ws(c,t.scales.x)}return JV(e,r,a)}function pse(e,t){const[i,n]=Ea(e),s=Ws(0,t.scales.y);return cS(e,{x:i.x,y:s},{x:n.x,y:s})}function gse(e){const[t,i]=Ea(e);return ise(e,{x:(t.x+i.x)/2,y:(t.y+i.y)/2})}function fse(e,t,i,n,s,o){let r,a;if(s.xValue0Index>=o.xValue1Index){const d=n.findLast(f=>f.xValue1Index<=o.xValue1Index)?.datumIndex,p=d==null?void 0:i.data[d];r=p?.xValue1,a=p?.yValue1}else if(s.xValue0Index<=o.xValue0Index){const d=n.find(f=>f.xValue0Index>=o.xValue0Index)?.datumIndex,p=d==null?void 0:i.data[d];r=p?.xValue0,a=p?.yValue0}if(r==null||a==null)switch(t){case 0:return pse(e,i);case 1:return gse(e)}const l=Ws(r,i.scales.x),c=Ws(a,i.scales.y),u={x:l,y:c};return cS(e,u,u)}function eH(e,t){if(t==null)return;const i=Zo(e.xValue0),n=Zo(e.xValue1);return t.find(s=>Zo(s.xValue0)===i&&Zo(s.xValue1)===n)?.span}function o6(e,t,i,n,s,o,r){const a=e.data[n.datumIndex],l=a.span,c=eH(a,s);if(c==null){const u=fse(l,t,e,i,n,o);r.added.push({from:u,to:l})}else r.removed.push({from:c,to:c}),r.moved.push({from:c,to:l}),r.added.push({from:l,to:l})}function r6(e,t,i,n,s,o,r){const a=e.data[n.datumIndex],l=a.span,c=eH(a,s);if(c==null){const u=fse(l,t,e,i,n,o);r.removed.push({from:l,to:u})}else r.removed.push({from:l,to:l}),r.moved.push({from:l,to:c}),r.added.push({from:c,to:c})}function a6(e,t,i,n,s){const o=n.scales.x,r=t[s.xValue0Index],a=t[s.xValue1Index];let l,c;if(o?.type==="continuous"||o?.type==="log"?(l=i.data.findLast(C=>Zo(C.xValue0)<=r),c=i.data.find(C=>Zo(C.xValue1)>=a)):(l=i.data.find(C=>Zo(C.xValue0)===r),c=i.data.find(C=>Zo(C.xValue1)===a)),l==null||c==null)return;const[{x:u},{x:d}]=Ea(e),p=Ws(l.xValue0,i.scales.x),f=Ws(l.yValue0,i.scales.y),m=Ws(c.xValue1,i.scales.x),v=Ws(c.yValue1,i.scales.y);let b=n.data[s.datumIndex].span;return b=cS(b,{x:p,y:f},{x:m,y:v}),b=JV(b,u,d),b}function bRe(e,t,i,n,s,o,r,a,l){const c=s+1,u=r.find(w=>w.xValue0Index<=s&&w.xValue1Index>=c),d=o.find(w=>w.xValue0Index<=s&&w.xValue1Index>=c),p=t.zeroData,f=e.zeroData;if(u==null&&d!=null){o6(e,i,o,d,p,a,l);return}else if(u!=null&&d==null){r6(t,i,r,u,f,a,l);return}else if(u==null||d==null)return;let m;u.xValue0Index===d.xValue0Index&&u.xValue1Index===d.xValue1Index?m=0:u.xValue0Index<=d.xValue0Index&&u.xValue1Index>=d.xValue1Index?m=-1:u.xValue0Index>=d.xValue0Index&&u.xValue1Index<=d.xValue1Index?m=1:m=0;const v=t.data[u.datumIndex],b=s6(v.span,t,n,s,u),C=e.data[d.datumIndex],x=s6(C.span,e,n,s,d);if(m===1){const w=a6(b,n,t,e,d);w==null?r6(t,i,r,u,f,a,l):(l.removed.push({from:b,to:w}),l.moved.push({from:w,to:x}),l.added.push({from:x,to:x}))}else if(m===-1){const w=a6(x,n,e,t,u);w==null?o6(e,i,o,d,p,a,l):(l.removed.push({from:b,to:b}),l.moved.push({from:b,to:w}),l.added.push({from:w,to:x}))}else l.removed.push({from:b,to:b}),l.moved.push({from:b,to:x}),l.added.push({from:x,to:x})}function SRe(e,t,i,n){const s={removed:[],moved:[],added:[]},{axisValues:o,oldDataAxisIndices:r,newDataAxisIndices:a}=e,l={xValue0Index:Math.max(r.at(0)?.xValue0Index??-1/0,a.at(0)?.xValue0Index??-1/0),xValue1Index:Math.min(r.at(-1)?.xValue1Index??1/0,a.at(-1)?.xValue1Index??1/0)};for(let c=0;c<o.length-1;c+=1)bRe(t,i,n,o,c,a,r,l,s);return s}function CRe(e,t){const i=[],n=[],s=[];for(let o=0;o<t.data.length;o+=1){const r=t.data[o].span,a=e.data[o].span;i.push({from:r,to:r}),n.push({from:r,to:a}),s.push({from:a,to:a})}return{removed:i,moved:n,added:s}}function l6(e,t,i){const{span:n}=t;switch(i){case 0:return eH(t,e.zeroData)??pse(n,e);case 1:return gse(n)}}function xRe(e,t,i){const n=[],s=[];for(const o of t.data){const r=o.span,a=l6(t,o,i);s.push({from:r,to:a})}for(const o of e.data){const r=o.span,a=l6(e,o,i);n.push({from:a,to:r})}return{removed:s,moved:[],added:n}}function xw(e,t,i){if(!n6(e)||!n6(t)||!mRe(e,t))return;const n=vRe(e,t);return n==null?xRe(e,t,i):n.axisValues.length===n.oldDataAxisIndices.length+n.newDataAxisIndices.length+2?CRe(e,t):SRe(n,e,t,i)}function c6(e){return e.type==="continuous"||e.type==="log"}function u6(e){return e.type==="category"}function vm(e,t){return e===void 0||t===void 0?e!==void 0||t!==void 0:c6(e)&&c6(t)?e.type===t.type&&El(e.domain,t.domain)&&El(e.range,t.range):u6(e)&&u6(t)?e.inset===t.inset&&e.step===t.step&&El(e.domain,t.domain):!1}function l0(e){return e==null?!1:e.type==="category"?e.domain.every(t=>t!=null):e.domain.every(t=>Number.isFinite(t)||t instanceof Date)&&e.range.every(t=>Number.isFinite(t))}function ww(e,t){let i;const n=e.map(s=>s.point);switch(t.type){case"linear":i=sse(n);break;case"smooth":i=rse(n,t.tension);break;case"step":i=ose(n,t.position);break}return i.map((s,o)=>({span:s,xValue0:e[o].xDatum,yValue0:e[o].yDatum,xValue1:e[o+1].xDatum,yValue1:e[o+1].yDatum}))}function c0(e,t,i=.001){return Math.abs(e.x-t.x)<i&&Math.abs(e.y-t.y)<i}function tH({path:e},t){let i;for(const{span:n}of t){const[s,o]=Ea(n),r=i!=null&&c0(i,s)?2:0;tw(e,n,r,!1),i=o}}function KT(e,t,i){let n;for(const s of i){const[o,r]=dse(s.from,s.to,e),a=n!=null&&c0(n,o)?2:0;I_(t.path,s.from,s.to,e,a,!1),n=r}}function iH(e,t,i){const n=(a,l)=>KT(a,l,t.removed),s=(a,l)=>KT(a,l,t.moved),o=(a,l)=>KT(a,l,t.added),r=nH(e,i);return{status:e,path:{addPhaseFn:o,updatePhaseFn:s,removePhaseFn:n},pathProperties:r}}function nH(e,t){const i=t==="none"?"updated":e,n={fromFn(s,o){const r={phase:lc[i]},a=s.previousDatum??o;return a!=null&&(r.segments=a),e==="removed"?r.finish={visible:!1}:e==="added"&&(r.start={visible:!0}),r},toFn(s,o){const r={phase:lc[i]},a=o;return a!=null&&(r.segments=a),r}};return t==="fade"?{fromFn(s,o){const r=e==="added"?0:s.opacity,a=e==="removed"?s.previousDatum??o:o;return{...n.fromFn(s,o),opacity:r,segments:a}},toFn(s,o){const r=e==="removed"?0:1,a=e==="removed"?s.previousDatum??o:o;return{...n.toFn(s,o),opacity:r,segments:a}}}:n}function mse(e,t,i){const n=e.scales.x?.type==="category",s=t.scales.x?.type==="category";if(n!==s||!l0(e.scales.x)||!l0(t.scales.x)||e.strokeData==null||t.strokeData==null)return;let o="updated";t.visible&&!e.visible?o="removed":!t.visible&&e.visible&&(o="added");const r=xw({scales:e.scales,data:e.strokeData.spans},{scales:t.scales,data:t.strokeData.spans},1);if(r==null)return;const a=iH(o,r,"fade"),l=(i?.changed??!0)||!vm(e.scales.x,t.scales.x)||!vm(e.scales.y,t.scales.y)||o!=="updated";return{status:o,stroke:a,hasMotion:l}}function yse({path:e},{spans:t,phantomSpans:i}){let n=0,s={x:Number.NaN,y:Number.NaN},o={x:Number.NaN,y:Number.NaN};for(let r=0;r<t.length;r+=1){const{span:a}=t[r],{span:l}=i[r],{0:c,1:u}=Ea(a),{0:d,1:p}=Ea(l);if(c0(s,c)&&c0(o,d))tw(e,a,2,!1);else{for(let f=r-1;f>=n;f-=1)tw(e,i[f].span,1,!0);e.closePath(),tw(e,a,0,!1),n=r}s=u,o=p}for(let r=t.length-1;r>=n;r-=1)tw(e,i[r].span,1,!0);e.closePath()}function YT(e,{path:t},i,n){for(let s=0;s<i.length;s+=1){const o=i[s],r=n[s];I_(t,o.from,o.to,e,0,!1),I_(t,r.from,r.to,e,1,!0),t.closePath()}}function vse(e,t,i,n){const s=(l,c)=>YT(l,c,t.removed,i.removed),o=(l,c)=>YT(l,c,t.moved,i.moved),r=(l,c)=>YT(l,c,t.added,i.added),a=nH(e,n);return{status:e,path:{addPhaseFn:r,updatePhaseFn:o,removePhaseFn:s},pathProperties:a}}function bse(e,t){const i=e.scales.x?.type==="category",n=t.scales.x?.type==="category";if(i!==n||!l0(e.scales.x)||!l0(t.scales.x))return;let s="updated";t.visible&&!e.visible?s="removed":!t.visible&&e.visible&&(s="added");const o=xw({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},0);if(o==null)return;const r=xw({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},0);if(r==null)return;const a=xw({scales:e.scales,data:e.strokeData.spans,zeroData:e.fillData.phantomSpans},{scales:t.scales,data:t.strokeData.spans,zeroData:t.fillData.phantomSpans},0);if(a==null)return;const l="none",c=vse(s,o,r,l),u=iH(s,a,l);return{status:s,fill:c,stroke:u}}function u0({id:e},t,i,...n){const s={phase:i?lc[i]:"trailing"};vh(e,"markers",t,n,{opacity:0},{opacity:1},s);for(const o of n)o.cleanup()}function Sse({id:e},t,...i){vh(e,"markers",t,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"});for(const n of i)n.cleanup()}function sH({id:e,nodeDataDependencies:t},i,...n){const s=t.seriesRectWidth;Xn(e,"markers",i,n,{fromFn:(a,l)=>{const c=l.midPoint?.x??s;let u=Je(0,Wee(c/s),1);return Number.isNaN(u)&&(u=0),{scalingX:0,scalingY:0,delay:u,duration:jI,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function DL(e){return{opacity:1,scalingX:1,scalingY:1}}function d0(e,t){return{x:t.point?.x??Number.NaN,y:t.point?.y??Number.NaN,scalingCenterX:t.point?.x??Number.NaN,scalingCenterY:t.point?.y??Number.NaN}}function ML(e,{datumIndex:t}){const i=e.getNodeData();if(i===void 0)return;const n=i[t],{point:s}=n??{};if(n==null||s==null)return;const o=e.getFormattedMarkerStyle(n),r=vs.anchor(o.shape),a=s.focusSize??o.size,l=4+a,c=l/2,u=(r.x-.5)*a,d=(r.y-.5)*a,p=n.point.x-c-u,f=n.point.y-c-d;return vn.toCanvas(e.contentGroup,new He(p,f,l,l))}function oH(e,t,i,n=i){return n.enabled??i.enabled?(t.step??Pm(t.range)/Math.max(1,e))>1:!1}function AL(e,t,i,n){return n??(n={stroke:t.stroke,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth}),FE.reduce((s,o)=>(s[o]=e.getMarkerStyle(i,{},void 0,{highlightState:o},void 0,n),s),{})}function rH({id:e,visible:t,nodeDataDependencies:i},n,...s){const{seriesRectWidth:o,seriesRectHeight:r}=i;vh(e,"path_properties",n,s,{clipX:0},{clipX:o},{phase:"initial",start:{clip:!0,clipY:r,visible:t},finish:{clip:!1,visible:t}})}function aR({id:e},t,i,n="add",...s){vh(e,t,i,s,{opacity:0},{opacity:1},{phase:n})}function aH(e){return t=>({visible:e.getVisible(),opacity:e.getOpacity(),clipScalingX:1,clip:!1})}function lR({nodeDataDependencies:e},t){const i=n=>Number.isFinite(n)?n:0;t.clipX=i(e.seriesRectWidth),t.clipY=i(e.seriesRectHeight)}function d6(e){return e.isReversed()!==e.range[1]<e.range[0]}function kL(e,t,i,n,s,o=!0){if(t.scale.domain.length===0||i.scale.domain.length===0)return;const r=e.key==="x"?t:i,{scale:a,direction:l}=r,c=l==="x",u=a.bandwidth??0,d=o?((a.step??0)-u)/2:0,p=Math.max(n.x,s.width-(n.x+n.width)),f=Math.max(n.y,s.height-(n.y+n.height)),m=()=>d6(c?t:i)?c?n.width+p:n.height+f:c?-p:-f,v=()=>d6(c?t:i)?c?-p:-f:c?n.width+p:n.height+f;return(C=>{const x=[];let w=-1;for(let M=0;M<C.length;M++){const T=C[M];if(TT(T))continue;const{start:L,stop:I,...R}=C[M],O=C[w]?.stop,_=C.slice(M+1).find(Y=>Y.start!=null)?.start;let B=a.convert(L??O)-d,V=a.convert(I??_)+2*d;const j=L!=null&&Number.isNaN(B),K=I!=null&&Number.isNaN(V);j||K||(Number.isNaN(B)&&(B=m()),Number.isNaN(V)&&(V=v()),I!=null&&(w=M),x.push({start:B,stop:V,...R}))}return x})(e.segments).map(({stop:C,start:x,...w})=>{const M=c?x:-p,T=c?-f:x,L=c?C+u:n.width+p,I=c?n.height+f:C+u;return{clipRect:{x0:M,y0:T,x1:L,y1:I},...w}})}var Cse=new Set(["time","timestamp","date","datetime"]);function lH(e,t,i){if(e!=="x"&&e!=="y"||!St(t))return;const n=xse(e,i);if(n==null||!(n in t))return;const s=t[n],o=wse(e,i),r=cH(n,s);return r?{type:r,position:o}:typeof s=="number"?{type:"number",position:o}:{type:"category",position:o}}function BD(e,t,i){if(e!=="x"&&e!=="y"||!St(t))return;const n=xse(e,i);if(n==null||!(n in t))return;const s=wse(e,i),o=cH(n,t[n]);if(o)return{type:o,position:s}}function cH(e,t){if(gc(t)||Cse.has(e)&&En(t))return"time"}function xse(e,t){let i;return e==="x"?"xKey"in t&&(i=t.xKey):e==="y"&&"yKey"in t&&(i=t.yKey),i}function wse(e,t){return"direction"in t&&t.direction==="horizontal"?e==="x"?"left":"bottom":e==="x"?"bottom":"left"}var wRe=.125,DRe=.25,MRe=tD(nRe),TL=class extends Rg{constructor(e){super({moduleCtx:e,propertyKeys:WS,propertyNames:jS,categoryKey:"xValue",pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],datumSelectionGarbageCollection:!1,segmentedDataNodes:!1,pickModes:[2,0],animationResetFns:{path:aH({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:hy,datum:(t,i)=>({...DL(),...d0(t,i)})},clipFocusBox:!1}),this.properties=new Jn,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0,this.backgroundGroup=new Mt({name:`${this.id}-background`,zIndex:0}),this._isStacked=void 0,this.fillSpans=[],this.phantomSpans=[],this.strokeSpans=[]}get pickModeAxis(){return"main"}get hasData(){return this.getHasData("xValue")}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||this.contextNodeData!=null&&(this.contextNodeData.fillData.spans.length>rR||this.contextNodeData.strokeData.spans.length>rR)}attachSeries(e,t,i){super.attachSeries(e,t,i),e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.backgroundGroup.remove()}attachPaths([e,t]){this.backgroundGroup.appendChild(e),this.contentGroup.appendChild(t),t.zIndex=-1}detachPaths([e,t]){e.remove(),t.remove()}isStacked(){return(this.seriesGrouping?.stackCount??1)>1}isNormalized(){return this.properties.normalizedTo!=null}setSeriesIndex(e){const i=this.isStacked()===this._isStacked;return this._isStacked=i,super.setSeriesIndex(e,i)}setZIndex(e){super.setZIndex(e),this.isStacked()?(this.backgroundGroup.zIndex=[0,e],this.contentGroup.zIndex=[1,e,0]):(this.backgroundGroup.zIndex=[1,e,0,0],this.contentGroup.zIndex=[1,e,0,1])}async processData(e){if(this.data==null)return;const{data:t,visible:i,seriesGrouping:{groupIndex:n=this.id,stackCount:s=1}={}}=this,{xKey:o,yKey:r,yFilterKey:a,connectMissingData:l,normalizedTo:c}=this.properties,u=!this.ctx.animationManager.isSkipped(),d=this.axes.x?.scale,p=this.axes.y?.scale,{xScaleType:f,yScaleType:m}=this.getScaleInformation({xScale:d,yScale:p}),v=s>1||c!=null,b={value:`area-stack-${n}-yValue`,marker:`area-stack-${n}-yValues-marker`},C={invalidValue:null};(In(c)||l)&&s>1&&(C.invalidValue=0),i||(C.forceValue=0);const x=[Qp(o,f,{id:"xValue"}),Bi(r,m,{id:"yValueRaw",...C}),...a==null?[]:[Bi(a,m,{id:"yFilterRaw"})]];v&&x.push(...s0(r,"normal",{id:"yValueCumulative",...C,groupId:b.marker},m)),In(c)&&x.push(Bi(r,m,{id:"yValue",...C,groupId:b.value}),mL(Object.values(b),c)),u&&x.push(ND());const{dataModel:w,processedData:M}=await this.requestDataModel(e,t,{props:x,groupByKeys:v,groupByData:!v});this.dataAggregationFilters=this.aggregateData(w,M),this.animationState.transition("updateData")}xCoordinateRange(e,t){const{marker:i}=this.properties,n=this.axes.x.scale.convert(e),s=i.enabled?.5*i.size*t:0;return[n-s,n+s]}yCoordinateRange(e,t){const{marker:i}=this.properties,n=this.axes.y.scale.convert(e[0]),s=i.enabled?.5*i.size*t:0;return[n-s,n+s]}yValueKey(){return this.isNormalized()?"yValue":"yValueRaw"}yCumulativeKey(e){return e.type==="grouped"?"yValueCumulative":this.yValueKey()}getSeriesDomain(e){const{dataModel:t,processedData:i,axes:n}=this;if(!t||!i)return[];const s=n.y;if(e==="x"){const r=t.resolveProcessedDataDefById(this,"xValue"),a=t.getDomain(this,"xValue","key",i);return r?.def.type==="key"&&r.def.valueType==="category"?a:Xr(Mg(a))}const o=this.domainForClippedRange("y",[this.yCumulativeKey(i)],"xValue");if(s instanceof Oa&&!(s instanceof sy)){const r=Number.isFinite(o[1]-o[0])?[Math.min(o[0],0),Math.max(o[1],0)]:[];return Xr(r)}else return Xr(o)}getSeriesRange(e,t){const[i,n]=this.domainForVisibleRange("y",[this.yCumulativeKey(this.processedData)],"xValue",t);return[Math.min(i,0),Math.max(n,0)]}getZoomRangeFittingItems(e,t,i){return this.zoomFittingVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}aggregateData(e,t){if(FS(t))return;const i=this.axes.x;if(i==null)return;const{scale:n}=i,s=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,this.yCumulativeKey(t),t),r=e.getDomain(this,"xValue","key",t),a=e.resolveColumnNeedsValueOf(this,"xValue",t),l=e.resolveColumnNeedsValueOf(this,this.yCumulativeKey(t),t);return MRe(n.type,s,o,r,a,l)}stackAggregatedData(e){const{indices:t,metaIndices:i}=e,{visible:n,axes:s,dataModel:o,processedData:r,seriesBelowStackContext:a}=this,l=s.x,c=s.y;if(!n)return this.phantomSpans=[],this.fillSpans=[],this.strokeSpans=[],a;if(l==null||c==null||o==null||r==null)return;const{scale:u}=l,{scale:d}=c,p=(u.bandwidth??0)/2,f=o.resolveKeysById(this,"xValue",r),m=o.resolveColumnById(this,this.yCumulativeKey(r),r);let[v,b]=Xw(1,i.length-1,l.range,M=>{const T=i[M],L=i[M+1],I=t[T],R=t[L],O=f[I],_=f[R],{0:B}=this.xCoordinateRange(O,0),{1:V}=this.xCoordinateRange(_,0);return[B,V]});v=Math.max(v-1,0),b=Math.min(b+1,i.length-1);let C=[];if(a?.fillSpans)C=a?.fillSpans;else for(let M=v;M<b;M+=1){const T=i[M],L=i[M+1],I=t[T],R=t[L],O=f[I],_=f[R],B={type:"linear",moveTo:!1,x0:u.convert(O)+p,y0:d.convert(0),x1:u.convert(_)+p,y1:d.convert(0)};C.push({span:B,xValue0:O,xValue1:_,yValue0:0,yValue1:0})}this.phantomSpans=C;const x=[],w=[];for(let M=v;M<b;M+=1){const T=i[M],L=i[M+1],I=t[T],R=t[L],O=f[I],_=f[R],B=m[I],V=m[R],j=[];for(let G=T+1;G<L;G++){const $=t[G];j.push({x:u.convert(f[$])+p,y:d.convert(m[$])})}const Y={span:{type:"multi-line",moveTo:!1,x0:u.convert(O)+p,y0:d.convert(B),x1:u.convert(_)+p,y1:d.convert(V),midPoints:j},xValue0:O,xValue1:_,yValue0:B,yValue1:V};x.push(Y),w.push(Y)}return this.fillSpans=x,this.strokeSpans=w,{stack:[],fillSpans:x,strokeSpans:w}}stackYValueData(){const{visible:e,axes:t,dataModel:i,processedData:n,seriesBelowStackContext:s,properties:o}=this,r=t.x,a=t.y;if(r==null||a==null||i==null||n==null)return;const{interpolation:l}=o,{scale:c}=r,{scale:u}=a,d=(c.bandwidth??0)/2;let p=i.resolveKeysById(this,"xValue",n),f=i.resolveColumnById(this,this.yValueKey(),n);const m=!this.isStacked()&&this.properties.connectMissingData,v=n.invalidKeys?.get(this.id),C=(m?n.invalidData?.get(this.id):void 0)??v;C!=null&&(p=p.filter((B,V)=>C[V]===!1),f=f.filter((B,V)=>C[V]===!1));let[x,w]=Xw(1,p.length,r.range,B=>this.xCoordinateRange(p[B],0));x=Math.max(x-2,0),w=Math.min(w+2,p.length);let M;if(s?.fillSpans)M=s?.fillSpans;else{const B=[];for(let V=x;V<w;V+=1){const j=p[V];B.push({point:{x:c.convert(j)+d,y:u.convert(0)},xDatum:j,yDatum:0})}M=ww(B,{type:"linear"})}if(this.phantomSpans=M,!e)return this.fillSpans=M,this.strokeSpans=[],s;let T=s?.stack;if(T==null){T=[];for(let B=x;B<w-1;B+=1)T.push({leading:0,trailing:0,dataValid:!0,breakBefore:!1})}const L=T.slice();let I=!1;for(let B=0;B<L.length;B+=1){const V=x+B,j=x+B+1;let{leading:K,trailing:Y,breakBefore:G}=T[B];const $=f[V],W=f[j],Q=!Number.isFinite($),q=!Number.isFinite(W),H=!Q&&!q;H&&(K+=$,Y+=W),B!==0&&H!==I&&(G=!0),I=H,L[B]={leading:K,trailing:Y,dataValid:H,breakBefore:G}}const R=[],O=[],_=[];for(let B=0;B<L.length;B+=1){const{leading:V,dataValid:j,breakBefore:K}=L[B],Y=x+B;if(K){if(_.length!==0){const G=L[B-1],$={point:{x:c.convert(p[Y])+d,y:u.convert(G.trailing)},xDatum:p[Y],yDatum:G.trailing};_.push($);const W=ww(_,l);R.push(...W),O.push(...W)}_.length=0}if(j){const G={point:{x:c.convert(p[Y])+d,y:u.convert(V)},xDatum:p[Y],yDatum:V};_.push(G)}else R.push(M[B])}if(_.length!==0){const B=L.at(-1),V=x+L.length,j={point:{x:c.convert(p[V])+d,y:u.convert(B.trailing)},xDatum:p[V],yDatum:B.trailing};_.push(j);const K=ww(_,l);R.push(...K),O.push(...K),_.length=0}return this.fillSpans=R,this.strokeSpans=O,{stack:L,fillSpans:R,strokeSpans:O}}createStackContext(){const e=this.axes.x;if(e==null)return;const{scale:t}=e,[i,n]=t.range,s=Math.abs(n-i),o=this.dataAggregationFilters?.find(r=>r.maxRange>s);return o?this.stackAggregatedData(o):this.stackYValueData()}createNodeData(){const{axes:e,data:t,processedData:i,dataModel:n,dataAggregationFilters:s}=this,o=e.x,r=e.y;if(!o||!r||!t||!n||!i)return;const{xKey:a,xName:l,yFilterKey:c,yKey:u,yName:d,legendItemName:p,marker:f,label:m,fill:v,stroke:b}=this.properties,C=o.scale,x=r.scale,{isContinuousY:w}=this.getScaleInformation({xScale:C,yScale:x}),M=(C.bandwidth??0)/2,T=i.type==="grouped",L=n.resolveKeysById(this,"xValue",i),I=n.resolveColumnById(this,"yValueRaw",i),R=T?n.resolveColumnById(this,"yValueCumulative",i):I,O=c==null?void 0:n.resolveColumnById(this,"yFilterRaw",i),_=this.getSeriesDomain("y"),B=[],V=[],{visibleSameStackCount:j}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);let K=!1;const Y=i.dataSources.get(this.id)?.data??[],G=i.invalidData?.get(this.id),[$,W]=C.range,Q=Math.abs(W-$),q=s?.find(xe=>xe.maxRange>Q);let H=0,U=0;const ee=q?.indices;[H,U]=this.visibleRangeIndices("xValue",o.range,ee),H=Math.max(H-2,0),U=Math.min(U+2,ee?.length??L.length),i.input.count<1e3&&(H=0,U=i.input.count);const ie=(xe,be,ge)=>{let Re;return(In(this.properties.normalizedTo)?w&&GE(ge):!Number.isNaN(ge))&&(Re=be),{x:C.convert(xe)+M,y:x.convert(Re),size:f.size}},oe=xe=>{const be=L[xe];if(be==null)return;const ge=Y[xe],Re=I[xe],Ne=R[xe],Pe=Number.isFinite(Re)&&G?.[xe]!==!0,Be=ie(be,+Ne,Re),Ue=O==null?void 0:O[xe]===Re;if(Ue===!1&&(K=!0),Pe&&f&&V.push({series:this,itemId:u,datum:ge,datumIndex:xe,midPoint:{x:Be.x,y:Be.y},cumulativeValue:+Ne,yValue:Re,xValue:be,yKey:u,xKey:a,point:Be,fill:f.fill??v,stroke:f.stroke??b,strokeWidth:f.strokeWidth??this.properties.strokeWidth,selected:Ue}),m.enabled&&Pe){const Ae=this.getLabelText(Re,ge,u,"y",_,m,{value:Re,datum:ge,xKey:a,yKey:u,xName:l,yName:d,legendItemName:p});B.push({series:this,itemId:u,datum:ge,datumIndex:xe,x:Be.x,y:Be.y,labelText:Ae})}};for(let xe=H;xe<U;xe+=1){const be=ee?.[xe]??xe;L[be]!=null&&oe(be)}const ae=kL(this.properties.segmentation,o,r,this.chart.seriesRect,this.ctx.scene,!1);return{itemId:u,fillData:{itemId:u,spans:this.fillSpans,phantomSpans:this.phantomSpans},strokeData:{itemId:u,spans:this.strokeSpans},labelData:B,nodeData:V,scales:this.calculateScaling(),visible:this.visible,stackVisible:j>0,crossFiltering:K,styles:AL(this,this.properties,f),segments:ae}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){const{paths:[t,i],visible:n,animationEnabled:s}=e,o=this.contextNodeData?.crossFiltering===!0,r=this.contextNodeData?.segments,a=oi(this.getHighlightStyle(),this.getStyle(!1)),{strokeWidth:l,stroke:c,strokeOpacity:u,lineDash:d,lineDashOffset:p,fill:f,fillOpacity:m,opacity:v}=a;i.setProperties({segments:r,fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:c,strokeWidth:l,strokeOpacity:u*(o?DRe:1),lineDash:d,lineDashOffset:p,opacity:v,visible:n||s}),i.datum=r,Yd(t,{fill:f,stroke:void 0,fillOpacity:m*(o?wRe:1)},this.getShapeFillBBox()),t.setProperties({segments:r,lineJoin:"round",pointerEvents:1,fillShadow:this.properties.shadow,opacity:v,visible:n||s}),t.datum=r,lR(this,i),lR(this,t)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty("AreaSeries")}updateFillPath(e,t){const[i]=e;i.path.clear(),yse(i,t.fillData),i.markDirty("AreaSeries")}updateStrokePath(e,t){const{spans:i}=t.strokeData,[,n]=e;n.path.clear(),tH(n,i),n.markDirty("AreaSeries")}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,{contextNodeData:n,processedData:s,axes:o,properties:r}=this,{marker:a,styler:l}=r,c=l?this.getStyle(!1).marker:void 0,u=n?.crossFiltering===!0||oH(s.input.count,o.x.scale,a,c);return a.isDirty()&&(i.clear(),i.cleanup()),i.update(u?t:[])}updateDatumStyles(e){const{datumSelection:t,isHighlight:i}=e,{marker:n}=this.properties,s=this.ctx.highlightManager.getActiveHighlight();t.each((o,r)=>{if(!t.isGarbage(o)){const a=this.getHighlightState(s,e.isHighlight,r.datumIndex),l=this.getStyle(i,a),{stroke:c,strokeWidth:u,strokeOpacity:d}=l,p=this.makeItemStylerParams(this.dataModel,this.processedData,r.datumIndex,l.marker);r.style=this.getMarkerStyle(n,r,p,{isHighlight:i,highlightState:a},l.marker,{stroke:c,strokeWidth:u,strokeOpacity:d})}})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const{datumSelection:i,isHighlight:n}=e,s=this.getShapeFillBBox(),o=this.ctx.highlightManager.getActiveHighlight();i.each((r,a)=>{const l=a.style??t.styles[this.getHighlightState(o,n,a.datumIndex)];this.applyMarkerStyle(l,r,a.point,s,{selected:a.selected})}),n||this.properties.marker.markClean()}updateLabelSelection(e){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])}updateLabelNodes(e){const{isHighlight:t=!1}=e,i=this.ctx.highlightManager?.getActiveHighlight(),n=this.makeLabelFormatterParams();e.labelSelection.each((s,o)=>{const r=dy(this,o,n,this.properties.label,t,i),{enabled:a,fontStyle:l,fontWeight:c,fontSize:u,fontFamily:d,color:p}=r;a&&o?.labelText?(s.fontStyle=l,s.fontWeight=c,s.fontSize=u,s.fontFamily=d,s.textAlign="center",s.textBaseline="bottom",s.text=o.labelText,s.x=o.x,s.y=o.y-10,s.fill=p,s.visible=!0,s.fillOpacity=this.getHighlightStyle(t,o.datumIndex).opacity??1,s.setBoxing(r)):s.visible=!1})}makeStylerParams(e,t){const{id:i}=this,{marker:n,fill:s,fillOpacity:o,lineDash:r,lineDashOffset:a,stroke:l,strokeOpacity:c,strokeWidth:u,xKey:d,yKey:p}=this.properties,f=IS(t??0);return{marker:{fill:n.fill,fillOpacity:n.fillOpacity,size:n.size,shape:n.shape,stroke:n.stroke,strokeOpacity:n.strokeOpacity,strokeWidth:n.strokeWidth,lineDash:n.lineDash,lineDashOffset:n.lineDashOffset},highlightState:f,highlighted:e,fill:s,fillOpacity:o,lineDash:r,lineDashOffset:a,seriesId:i,stroke:l,strokeOpacity:c,strokeWidth:u,xKey:d,yKey:p}}makeItemStylerParams(e,t,i,n){const{xKey:s,yKey:o}=this.properties,r=e.resolveKeysById(this,"xValue",t)[i],a=e.resolveColumnById(this,"yValueRaw",t)[i],l=e.getDomain(this,"xValue","key",t),c=e.getDomain(this,this.yCumulativeKey(t),"value",t),u=this.filterItemStylerFillParams(n.fill)??n.fill;return{..._E(r,a,s,o,l,c),xValue:r,yValue:a,...n,fill:u}}makeLabelFormatterParams(){const{xKey:e,xName:t,yKey:i,yName:n,legendItemName:s}=this.properties;return{xKey:e,xName:t,yKey:i,yName:n,legendItemName:s}}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:s,properties:o}=this,{xKey:r,xName:a,yKey:l,yName:c,tooltip:u,legendItemName:d}=o,p=s.x,f=s.y;if(!i||!n||!p||!f)return;const m=n.dataSources.get(this.id)?.data?.[e],v=i.resolveKeysById(this,"xValue",n)[e],b=i.resolveColumnById(this,"yValueRaw",n)[e];if(v==null)return;const C=this.getStyle(!1),x=this.makeItemStylerParams(i,n,e,C.marker),w=this.getMarkerStyle(this.properties.marker,{datumIndex:e,datum:m},x,{isHighlight:!1},C.marker);return this.formatTooltipWithContext(u,{heading:this.getAxisValueText(p,"tooltip",v,m,r,d),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(f,"tooltip",b,m,l,d)}]},{seriesId:t,datum:m,title:c,xKey:r,xName:a,yKey:l,yName:c,...w,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:n,strokeWidth:s,lineDash:o,marker:r}=this.getStyle(!1),a=!r.enabled||r.fill==null,l=a?e:r.fill;return{marker:{...this.getMarkerStyle(this.properties.marker,{},void 0,{isHighlight:!1,checkForHighlight:!1},{size:r.size,shape:r.shape,fill:l,fillOpacity:a?i:r.fillOpacity,stroke:r.stroke}),enabled:r.enabled||s<=0},line:{stroke:t,strokeOpacity:n,strokeWidth:s,lineDash:o}}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:n}=this,{yKey:s,yName:o,legendItemName:r,showInLegend:a}=this.properties;return[{legendType:e,id:t,itemId:s,legendItemName:r,seriesId:t,enabled:n&&i.getItemEnabled({seriesId:t,itemId:s}),label:{text:r??o??s},symbol:this.legendItemSymbol(),hideInLegend:!a}]}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:n,paths:s}=e,{animationManager:o}=this.ctx;this.updateAreaPaths(s,n),rH(this,o,...s),mo([t],d0),sH(this,o,t),hn(this,"labels",o,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{datumSelection:i,labelSelection:n,contextData:s,paths:o,previousContextData:r}=e,[a,l]=o;if(s.visible===!1&&r?.visible===!1||a==null&&l==null)return;this.resetDatumAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateAreaPaths(o,s)},u=()=>{t.skipCurrentBatch(),c()};if(s==null||r==null){c(),u0(this,t,"added",i),aR(this,"fill_path_properties",t,"add",a),aR(this,"stroke_path_properties",t,"add",l),hn(this,"labels",t,n);return}if(s.crossFiltering!==r.crossFiltering){u();return}const d=bse(s,r);if(d===void 0){u();return}else if(d.status==="no-op")return;u0(this,t,void 0,i),Xn(this.id,"fill_path_properties",t,[a],d.fill.pathProperties),oR(this.id,"fill_path_update",t,[a],d.fill.path),Xn(this.id,"stroke_path_properties",t,[l],d.stroke.pathProperties),oR(this.id,"stroke_path_update",t,[l],d.stroke.path),hn(this,"labels",t,n),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(o,s)})}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new vs}getStyle(e,t){const{styler:i,marker:n,fill:s,fillOpacity:o,lineDash:r,lineDashOffset:a,stroke:l,strokeOpacity:c,strokeWidth:u}=this.properties,{size:d,shape:p,fill:f="transparent",fillOpacity:m}=n;let v={};if(i){const b=this.makeStylerParams(e,t),C=this.cachedCallWithContext(i,b)??{};v=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],C,{pick:!1})??{}}return v.marker??(v.marker={}),{fill:v.fill??s,fillOpacity:v.fillOpacity??o,lineDash:v.lineDash??r,lineDashOffset:v.lineDashOffset??a,stroke:v.stroke??l,strokeOpacity:v.strokeOpacity??c,strokeWidth:v.strokeWidth??u,marker:{enabled:v.marker.enabled??n.enabled,fill:v.marker.fill??f,fillOpacity:v.marker.fillOpacity??m,shape:v.marker.shape??p,size:v.marker.size??d,lineDash:v.marker.lineDash??n.lineDash??r,lineDashOffset:v.marker.lineDashOffset??n.lineDashOffset??a,stroke:v.marker.stroke??n.stroke??l,strokeOpacity:v.marker.strokeOpacity??n.strokeOpacity??c,strokeWidth:v.marker.strokeWidth??n.strokeWidth??u}}}getFormattedMarkerStyle(e){const t=this.getStyle(!1),i=this.makeItemStylerParams(this.dataModel,this.processedData,e.datumIndex,t.marker);return this.getMarkerStyle(this.properties.marker,e,i,{isHighlight:!0},void 0,t)}computeFocusBounds(e){return ML(this,e)}hasItemStylers(){return this.properties.styler!=null||this.properties.marker.itemStyler!=null||this.properties.label.itemStyler!=null}};TL.className="AreaSeries";TL.type="area";var ARe={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:e=>new TL(e),stackable:!0,predictAxis:BD,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",Cg],["image",Sh],["pattern",Ra]]},stroke:{$palette:"stroke"},fillOpacity:.8,strokeOpacity:1,strokeWidth:{$isUserOption:["./stroke",2,0]},lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:ty,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:{$isUserOption:["./stroke",1,0]},fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",kD],["pattern",Ra]]},stroke:{$palette:"stroke"}},label:{...Ou,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:xg(),segmentation:aL}}},Dse={type:"series",name:"area",chartType:"cartesian",options:one,create:e=>new TL(e)},uH=class extends bs{constructor(){super(...arguments),this.direction="x",this.featherRatio=0}get feathered(){return Math.abs(this.featherRatio)>1e-6}isPointInPath(e,t){return this.feathered?this.getBBox().containsPoint(e,t):super.isPointInPath(e,t)}updatePath(){if(!this.feathered){super.updatePath();return}const{path:e,borderPath:t,x:i,y:n,width:s,height:o,direction:r,featherRatio:a}=this;if(e.clear(),t.clear(),r==="x"){const l=Math.abs(a)*s;a>0?(e.moveTo(i,n),e.lineTo(i+s-l,n),e.lineTo(i+s,n+o/2),e.lineTo(i+s-l,n+o),e.lineTo(i,n+o),e.closePath()):(e.moveTo(i+l,n),e.lineTo(i+s,n),e.lineTo(i+s,n+o),e.lineTo(i+l,n+o),e.lineTo(i,n+o/2),e.closePath())}else{const l=Math.abs(a)*o;a>0?(e.moveTo(i,n+l),e.lineTo(i+s/2,n),e.lineTo(i+s,n+l),e.lineTo(i+s,n+o),e.lineTo(i,n+o),e.closePath()):(e.moveTo(i,n),e.lineTo(i+s,n),e.lineTo(i+s,n+o-l),e.lineTo(i+s/2,n+o),e.lineTo(i,n+o-l),e.closePath())}}renderStroke(e){if(!this.feathered){super.renderStroke(e);return}const{stroke:t,strokeWidth:i}=this;if(t&&i){const{globalAlpha:n}=e,{lineDash:s,lineDashOffset:o,lineCap:r,lineJoin:a,path:l}=this;this.applyStrokeAndAlpha(e),e.lineWidth=i,s&&e.setLineDash(s),o&&(e.lineDashOffset=o),r&&(e.lineCap=r),a&&(e.lineJoin=a),e.stroke(l.getPath2D()),e.globalAlpha=n}}};E([Le()],uH.prototype,"direction",2);E([Le()],uH.prototype,"featherRatio",2);function IL(e,t){for(const i of t){const n=i.datum;n===void 0?fe.error("undefined datum"):e.addValue(i,n)}}function RL(e,t){const{x:i,y:n}=t,{nearest:s,distanceSquared:o}=e.getQuadTree().find(i,n);if(s!==void 0)return{datum:s.value,distance:Math.sqrt(o)}}var dH=class extends Mh{constructor(){super(...arguments),this.direction="vertical"}};E([F],dH.prototype,"direction",2);var Mse=class extends Rg{constructor(){super(...arguments),this.groupScale=new RS,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}get hasData(){return this.getHasData("xValue")}padBandExtent(e,t){const i=typeof t=="boolean"?1:.5,n=Kt(this.smallestDataInterval)?this.smallestDataInterval*i:0,s=Mg(e)??[Number.NaN,Number.NaN];return typeof t=="boolean"?s[t?0:1]-=(t?1:-1)*n:(s[0]-=n,s[1]+=n),Xr(s)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const e=this.getBarDirection();return this.axes[e]}getCategoryAxis(){const e=this.getCategoryDirection();return this.axes[e]}getBandwidth(e,t){return mi.is(e.scale)?e.scale.calcBandwidth(this.smallestDataInterval,t):e.scale.bandwidth}xCoordinateRange(e){const t=this.axes[this.getCategoryDirection()],i=t.scale,n=this.getBandwidth(t,0)??0,s=mi.is(i)?n*-.5:0,o=i.convert(e)+s;return[o,o+n]}yCoordinateRange(e){const i=this.axes[this.getBarDirection()].scale,n=e.map(s=>i.convert(s));if(n.length===1){const s=i.convert(0);return[Math.min(n[0],s),Math.max(n[0],s)]}return[Math.min(...n),Math.max(...n)]}updateGroupScale(e){const t=[],{groupScale:i}=this,n=this.getBandwidth(e),{index:s,visibleGroupCount:o}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let a=0;a<o;a++)t.push(String(a));return i.domain=t,i.range=[0,n??0],e instanceof ny?i.paddingInner=e.groupPaddingInner:e instanceof OS?(i.paddingInner=e.groupPaddingInner,i.round=i.padding!==0):i.padding=0,{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:s}}resolveKeyDirection(e){return this.getBarDirection()==="x"?e==="x"?"y":"x":e}initQuadTree(e){IL(e,this.datumNodesIter())}pickNodeClosestDatum(e){return RL(this,e)}},kRe=1e3;function tk(e,t){return Array.from({length:e},(i,n)=>{const s=n*cc,o=t[s+Wo],r=t[s+dr];return Math.trunc((o+r)/2)})}function TRe(e,t,i,n,s,o){if(t.length<kRe)return;const[r,a]=lS(e,s);let l=wL(t,r,a,{smallestKeyInterval:o}),{indexData:c,valueData:u}=r0(t,n,i??n,r,a,l,{positive:!0}),{indexData:d,valueData:p}=r0(t,n,i??n,r,a,l,{positive:!1}),f=tk(l,c),m=tk(l,d);const v=[{maxRange:l,positiveIndices:f,positiveIndexData:c,negativeIndices:m,negativeIndexData:d}];for(;l>64;)({indexData:c,valueData:u}=a0(c,u,l)),{indexData:d,valueData:p,maxRange:l}=a0(d,p,l),f=tk(l,c),m=tk(l,d),v.push({maxRange:l,positiveIndices:f,positiveIndexData:c,negativeIndices:m,negativeIndexData:d});return v.reverse(),v}var hH=class extends xn{constructor(){super(...arguments),this.placement="inside-center",this.spacing=0}};E([F],hH.prototype,"placement",2);E([F],hH.prototype,"spacing",2);var wn=class extends dH{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new Uu,this.label=new hH,this.tooltip=py(),this.sparklineMode=!1}};E([F],wn.prototype,"xKey",2);E([F],wn.prototype,"xName",2);E([F],wn.prototype,"yKey",2);E([F],wn.prototype,"yName",2);E([F],wn.prototype,"yFilterKey",2);E([F],wn.prototype,"stackGroup",2);E([F],wn.prototype,"normalizedTo",2);E([F],wn.prototype,"fill",2);E([F],wn.prototype,"fillOpacity",2);E([F],wn.prototype,"stroke",2);E([F],wn.prototype,"strokeWidth",2);E([F],wn.prototype,"strokeOpacity",2);E([F],wn.prototype,"lineDash",2);E([F],wn.prototype,"lineDashOffset",2);E([F],wn.prototype,"cornerRadius",2);E([F],wn.prototype,"crisp",2);E([F],wn.prototype,"styler",2);E([F],wn.prototype,"itemStyler",2);E([F],wn.prototype,"shadow",2);E([F],wn.prototype,"label",2);E([F],wn.prototype,"tooltip",2);E([F],wn.prototype,"sparklineMode",2);function Ase(e,t,i,n){if(t!=null){const[s,o]=t;if(s!==0||o!==1)return!1}if(mi.is(e)){const s=e.calcBandwidth(n)-e.calcBandwidth(i);if(s>0&&s<1)return!1}if(yh.is(e)){const{bandwidth:s,step:o}=e;if(s>0&&s<1)return!1;const r=o-s;if(r>0&&r<1)return!1}return!0}var MF=e=>pG(e.yValue??0);function h0(e,t,i){const{startingX:n,startingY:s}=RRe(e,t);return{isVertical:e,calculate:(r,a)=>{let l=e?r.x:n,c=e?s:r.y,u=e?r.width:0,d=e?0:r.height;const{opacity:p=1}=r;a&&(Number.isNaN(l)||Number.isNaN(c))&&({x:l,y:c}=a,u=e?a.width:0,d=e?0:a.height,e&&!MF(a)?c+=a.height:!e&&MF(a)&&(l+=a.width));let f;return r.clipBBox==null?f=void 0:MF(r)?f=e?new He(l,c-d,u,d):new He(l-u,c,u,d):f=new He(l,c,u,d),{x:l,y:c,width:u,height:d,clipBBox:f,opacity:p}},mode:i}}function IRe(e,t){return{isVertical:e,calculate:i=>({x:e?i.x:i.x+i.width/2,y:e?i.y+i.height/2:i.y,width:e?i.width:0,height:e?0:i.height,clipBBox:i.clipBBox,opacity:i.opacity??1}),mode:t}}function p0(e,t){const i=r=>r==null||Number.isNaN(r.x)||Number.isNaN(r.y);return{toFn:(r,a,l)=>l==="removed"&&r.datum==null&&e.mode==="fade"?{...g0(r,a),opacity:0}:l==="removed"||i(a)?e.calculate(a,r.previousDatum):{x:a.x,y:a.y,width:a.width,height:a.height,clipBBox:a.clipBBox,opacity:a.opacity??1},fromFn:(r,a,l)=>{l==="updated"&&i(a)?l="removed":l==="updated"&&i(r.previousDatum)&&(l="added");let c;l==="unknown"||l==="added"?(r.previousDatum==null&&e.mode==="fade"?c={...g0(r,a),opacity:0}:c=e.calculate(a,r.previousDatum),l==="unknown"&&(l=t)):c={x:r.x,y:r.y,width:r.width,height:r.height,clipBBox:r.clipBBox,opacity:r.opacity??1};const u=lc[l];return{...c,phase:u}},applyFn:(r,a,l)=>{r.setProperties(a),r.crisp=l==="end"&&(r.datum?.crisp??!1)}}}function RRe(e,t){const i=t[e?"y":"x"];let n=1/0,s=0;return i?(e?s=i.scale.convert(mi.is(i.scale)?0:Math.max(...i.range)):n=i.scale.convert(mi.is(i.scale)?0:Math.min(...i.range)),{startingX:n,startingY:s}):{startingX:n,startingY:s}}function g0(e,{x:t,y:i,width:n,height:s,clipBBox:o,opacity:r=1}){return{x:t,y:i,width:n,height:s,clipBBox:o,opacity:r,crisp:e.datum?.crisp??!1}}function pH(e,t){if(t===void 0)return;const{x:i,y:n,width:s,height:o}=t;return vn.toCanvas(e.contentGroup,new He(i,n,s,o))}function kse(e,t,i,n,s,o,r){let a=o?.reduced?.diff?.[e];if(a?.changed)return a;if(!r)return{changed:!1,added:new Set,updated:new Set,removed:new Set,moved:new Set};const l=ERe(n,s);return a==null&&o?.reduced?.diff!=null?(a={changed:!0,added:new Set,updated:new Set,removed:new Set,moved:new Set},l?a.updated=new Set(Array.from(t,({datum:c})=>i(c))):a.added=new Set(Array.from(t,({datum:c})=>i(c)))):l&&(a={changed:!0,added:new Set,updated:new Set(Array.from(t,({datum:c})=>i(c))),removed:new Set,moved:new Set}),a}function h6(e){return typeof e=="object"&&e!==null&&"groupScale"in e}function ERe(e,t){if(!t)return!1;const i=e.scales,n=t.scales;if(!vm(i.x,n.x)||!vm(i.y,n.y))return!0;if(!h6(e)||!h6(t))return!1;const s=e.groupScale,o=t.groupScale;return!vm(s,o)}var LRe=tD(TRe),_D=class extends Mse{constructor(e){super({moduleCtx:e,propertyKeys:WS,propertyNames:jS,categoryKey:"xValue",pickModes:[2,1,0],pathsPerSeries:[],datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:g0,label:hy}}),this.properties=new wn,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return this.properties.yFilterKey!=null&&(this.seriesGrouping==null||this.seriesGrouping.stackIndex===0)}async processData(e){if(!this.data)return;const{xKey:t,yKey:i,yFilterKey:n,normalizedTo:s}=this.properties,{seriesGrouping:{groupIndex:o=this.id}={},data:r}=this,l=(this.seriesGrouping?.stackCount??0)>1||s!=null,c=l,u=!this.ctx.animationManager.isSkipped(),d=this.getCategoryAxis()?.scale,p=this.getValueAxis()?.scale,{isContinuousX:f,xScaleType:m,yScaleType:v}=this.getScaleInformation({xScale:d,yScale:p}),b=`bar-stack-${o}-yValues`,C=`${b}-trailing`,x=this.visible?{}:{forceValue:0},w=[Qp(t,m,{id:"xValue"}),Bi(i,v,{id:"yValue-raw",invalidValue:null,...x})];this.crossFilteringEnabled()&&w.push(Bi(n,v,{id:"yFilterValue",invalidValue:null,...x})),l&&w.push(...s0(i,"normal",{id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:b,separateNegative:!0,...x},v),...s0(i,"trailing",{id:"yValue-start",invalidValue:null,missingValue:0,groupId:C,separateNegative:!0,...x},v)),f&&w.push(Hie,Wie),Kt(s)&&w.push(mL([b,C],Math.abs(s))),u&&this.processedData&&w.push(yL(this.id,this.processedData)),(u||!c)&&w.push(ND());const{dataModel:M,processedData:T}=await this.requestDataModel(e,r,{props:w,groupByKeys:c,groupByData:!c});this.dataAggregationFilters=this.aggregateData(M,T),this.smallestDataInterval=T.reduced?.smallestKeyInterval,this.largestDataInterval=T.reduced?.largestKeyInterval,this.animationState.transition("updateData")}yCumulativeKey(e){return e.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw"}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(i==null||t==null)return[];if(e===this.getCategoryDirection()){const a=i.resolveProcessedDataDefById(this,"xValue"),l=i.getDomain(this,"xValue","key",t);return a?.def.type==="key"&&a.def.valueType==="category"?l:this.padBandExtent(l)}const n=this.yCumulativeKey(i);let s=this.domainForClippedRange(e,[n],"xValue");const o=this.crossFilteringEnabled()?i.getDomain(this,"yFilterValue","value",t):void 0;o!=null&&(s=[Math.min(s[0],o[0]),Math.max(s[1],o[1])]);const r=this.getValueAxis();if(r instanceof Oa&&!(r instanceof sy)){const a=Number.isFinite(s[1]-s[0])?[Math.min(0,s[0]),Math.max(0,s[1])]:[];return Xr(a)}else return Xr(s)}getSeriesRange(e,t){if((this.properties.direction==="horizontal"?"x":"y")!==e)return[];const n=this.yCumulativeKey(this.dataModel),[s,o]=this.domainForVisibleRange("y",[n],"xValue",t);return[Math.min(s,0),Math.max(o,0)]}getZoomRangeFittingItems(e,t,i){const n=this.yCumulativeKey(this.dataModel);return this.zoomFittingVisibleItems("xValue",[n],e,t,i)}getVisibleItems(e,t,i){const n=this.yCumulativeKey(this.dataModel);return this.countVisibleItems("xValue",[n],e,t,i)}aggregateData(e,t){if(FS(t))return;const i=this.axes.x;if(i==null)return;const n=e.resolveKeysById(this,"xValue",t),s=e.hasColumnById(this,"yValue-start"),o=s?e.resolveColumnById(this,"yValue-start",t):void 0,r=s?e.resolveColumnById(this,"yValue-end",t):e.resolveColumnById(this,"yValue-raw",t),{index:a}=e.resolveProcessedDataDefById(this,"xValue"),l=t.domain.keys[a];return LRe(i.scale.type,n,o,r,l,t.reduced?.smallestKeyInterval)}createNodeData(){const{dataModel:e,processedData:t,groupScale:i,dataAggregationFilters:n}=this,s=this.getCategoryAxis(),o=this.getValueAxis();if(!e||!t||!s||!o)return;const r=t.dataSources?.get(this.id);if(r==null)return;const a=s.scale,l=o.scale,{xKey:c,yKey:u,xName:d,yName:p,legendItemName:f,label:m}=this.properties,v=this.getSeriesDomain("y"),b=o.isReversed(),{barWidth:C,groupIndex:x}=this.updateGroupScale(s),w=i.convert(String(x)),M=mi.is(a)?C*-.5:0,T=e.hasColumnById(this,"yValue-start"),L=e.resolveKeysById(this,"xValue",t),I=e.resolveColumnById(this,"yValue-raw",t),R=T?e.resolveColumnById(this,"yValue-start",t):void 0,O=T?e.resolveColumnById(this,"yValue-end",t):void 0,_=this.crossFilteringEnabled()?e.resolveColumnById(this,"yFilterValue",t):void 0,B=!this.ctx.animationManager.isSkipped(),V=oe=>a.convert(L[oe])+w+M,[j,K]=a.range,Y=Math.abs(K-j),G=n?.find(oe=>oe.maxRange>Y),$=G==null&&(this.properties.crisp??Ase(s?.scale,s?.visibleRange,this.smallestDataInterval,this.largestDataInterval)),W=l.convert(0),Q=({datum:oe,datumIndex:ae,xValue:me,yValue:xe,cumulativeValue:be,phantom:ge,currY:Re,prevY:Ne,x:Pe,width:Be,isPositive:Ue,yRange:Ae,labelText:Ve,opacity:$e,featherRatio:Qe,crossScale:Oe=1})=>{const Ze=Ue!==b,dt=l.convert(Re),Tt=l.convert(Ne),gt=l.convert(Ae),Lt=this.getBarDirection()==="x",Gi=Be*.5*(1-Oe),Ti={x:Lt?Math.min(dt,Tt):Pe+Gi,y:Lt?Pe+Gi:Math.min(dt,Tt),width:Lt?Math.abs(Tt-dt):Be*Oe,height:Lt?Be*Oe:Math.abs(Tt-dt)},Ht=new He(Ti.x,Ti.y,Ti.width,Ti.height),Hi={x:Lt?Math.min(W,gt):Pe+Gi,y:Lt?Pe+Gi:Math.min(W,gt),width:Lt?Math.abs(W-gt):Be*Oe,height:Lt?Be*Oe:Math.abs(W-gt)},zc=this.shouldFlipXY()?Ti.height:Ti.width,Fy=m.spacing+(typeof m.padding=="number"?m.padding:0);return{series:this,itemId:ge?Xo(u,ge):u,datum:oe,datumIndex:ae,cumulativeValue:be,phantom:ge,xValue:me,yValue:xe,yKey:u,xKey:c,capDefaults:{lengthRatioMultiplier:zc,lengthMax:zc},x:Hi.x,y:Hi.y,width:Hi.width,height:Hi.height,midPoint:{x:Ti.x+Ti.width/2,y:Ti.y+Ti.height/2},opacity:$e,featherRatio:Qe,topLeftCornerRadius:Lt!==Ze,topRightCornerRadius:Ze,bottomRightCornerRadius:Lt===Ze,bottomLeftCornerRadius:!Ze,clipBBox:Ht,crisp:$,label:Ve==null?void 0:{text:Ve,...qne({isUpward:Ze,isVertical:!Lt,placement:m.placement,spacing:Fy,rect:Ti})},missing:xe==null,focusable:!ge}},q=[],H=[],U=[],ee=(oe,ae,me,xe,be,ge,Re=0,Ne=1)=>{const Pe=L[oe];if(Pe==null)return;const Be=r.data[oe],Ue=I[oe],Ae=_==null?void 0:Number(_[oe]),Ve=Ue>=0&&!Object.is(Ue,-0);if(!Number.isFinite(be)||Ae!=null&&!Number.isFinite(Ae))return;const $e=m.enabled&&Ue!=null?this.getLabelText(Ae??Ue,Be,u,"y",v,m,{datum:Be,value:Ae??Ue,xKey:c,yKey:u,xName:d,yName:p,legendItemName:f}):void 0,Qe=Ae!=null&&Ae>Ue,Oe=Q({datum:Be,datumIndex:oe,xValue:Pe,yValue:Ae??Ue,cumulativeValue:Ae??be,phantom:!1,currY:Ae==null?be:xe+Ae,prevY:xe,x:ae,width:me,isPositive:Ve,yRange:Math.max(xe+(Ae??-1/0),ge),labelText:$e,opacity:Ne,featherRatio:Re,crossScale:Qe?.6:void 0});if(H.push(Oe),U.push(Oe),Ae!=null){const Ze=Q({datum:r.data[oe],datumIndex:oe,xValue:Pe,yValue:Ae,cumulativeValue:Ae,phantom:!0,currY:be,prevY:xe,x:ae,width:me,isPositive:Ve,yRange:ge,labelText:void 0,opacity:Ne,featherRatio:Re,crossScale:void 0});q.push(Ze)}};if(G!=null){const{positiveIndices:oe,positiveIndexData:ae,negativeIndices:me,negativeIndexData:xe}=G,be=b?-1:1;for(let ge=0;ge<2;ge+=1){const Re=ge===0,Ne=Re?oe:me,Pe=Re?ae:xe,Be=Re?hr:pr,Ue=Re?pr:hr,[Ae,Ve]=this.visibleRangeIndices("xValue",s.range,Ne);for(let $e=Ae;$e<Ve;$e+=1){const Qe=$e*cc,Oe=Pe[Qe+Wo],Ze=Pe[Qe+dr],dt=Pe[Qe+Be],Tt=Pe[Qe+Ue];if(Oe===-1||L[Tt]==null||L[dt]==null)continue;const gt=V(Math.trunc((Oe+Ze)/2)),Lt=Math.abs(V(Ze)-V(Oe))+C;if(gt-Lt<0||gt>Y)continue;const Gi=Math.abs(Ze-Oe)+1,Ti=yh.is(a)?Math.min(a.bandwidth*Math.max(Gi-1,1)/(a.step*Gi),1):1;let Ht,Hi,zc=0;if(T)Ht=Number(R[dt]),Hi=Number(O[Tt]);else{const Fy=Number(I[Tt]),uP=Number(I[dt]);Ht=0,Hi=Fy,zc=(Re?1:-1)*be*(1-uP/Fy)}ee(Tt,gt,Lt,Ht,Hi,Hi,zc,Ti)}}}else if(t.type==="grouped"){const oe=t.invalidData?.get(this.id),ae=C,me=T?e.resolveProcessedDataIndexById(this,"yValue-range"):-1,xe=t.columnScopes.findIndex(Ne=>Ne.has(this.id)),{groups:be}=t,[ge,Re]=Xw(1,be.length,s.range,Ne=>{const Be=be[Ne].keys[0];return this.xCoordinateRange(Be)});for(let Ne=ge;Ne<Re;Ne+=1){const Pe=be[Ne],{aggregation:Be}=Pe,Ue=Pe.datumIndices[xe];if(Ue!=null)for(const Ae of Ue){const Ve=Ne+Ae,$e=V(Ve);if(oe?.[Ve]===!0)continue;const Qe=I[Ve];if(Qe==null)continue;const Oe=Qe>=0&&!Object.is(Qe,-0),Ze=T?Number(R?.[Ve]):0,dt=T?Number(O?.[Ve]):Qe;let Tt=dt;T&&(Tt=Be[me][Oe?1:0]),ee(Ve,$e,ae,Ze,dt,Tt)}}}else{const oe=t.invalidData?.get(this.id),ae=C;let[me,xe]=this.visibleRangeIndices("xValue",s.range);t.input.count<1e3&&(me=0,xe=t.input.count);for(let be=me;be<xe;be+=1){if(oe?.[be]===!0)continue;const ge=I[be];if(ge==null)continue;const Re=V(be),Ne=Number(ge);ee(be,Re,ae,0,Ne,Ne)}}const ie=kL(this.properties.segmentation,s,o,this.chart.seriesRect,this.ctx.scene);return{itemId:u,nodeData:q.length>0?[...q,...H]:H,labelData:U,scales:this.calculateScaling(),visible:this.visible||B,groupScale:this.getScaling(this.groupScale),styles:ZG(this.getItemStyle.bind(this)),segments:ie}}nodeFactory(){return new uH}getHighlightData(e,t){const i=e.find(n=>n.datum===t.datum&&!n.phantom);return i==null?void 0:[{...i}]}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>this.getDatumId(t))}makeStylerParams(e,t){const{id:i}=this,{cornerRadius:n,fill:s,fillOpacity:o,lineDash:r,lineDashOffset:a,stackGroup:l,stroke:c,strokeOpacity:u,strokeWidth:d,xKey:p,yKey:f}=this.properties,m=IS(t??0);return{cornerRadius:n,fill:s,fillOpacity:o,highlightState:m,highlighted:e,lineDash:r,lineDashOffset:a,seriesId:i,stackGroup:l,stroke:c,strokeOpacity:u,strokeWidth:d,xKey:p,yKey:f}}makeItemStylerParams(e,t,i,n,s,o){const{id:r}=this,{xKey:a,yKey:l,stackGroup:c}=this.properties,u=t.dataSources.get(r)?.data?.[i],d=e.resolveColumnById(this,"yValue-raw",t)[i],p=e.getDomain(this,"xValue","key",t),f=e.getDomain(this,this.yCumulativeKey(e),"value",t),m=this.ctx.highlightManager?.getActiveHighlight(),v=this.getHighlightStateString(m,s,i),b=this.filterItemStylerFillParams(o.fill)??o.fill;return{seriesId:r,..._E(n,d,a,l,p,f),datum:u,xValue:n,yValue:d,stackGroup:c,highlighted:s,highlightState:v,...o,fill:b}}getStyle(e,t,i){const{cornerRadius:n,fill:s,fillOpacity:o,lineDash:r,lineDashOffset:a,stroke:l,strokeOpacity:c,strokeWidth:u,styler:d}=this.properties;let p={};if(!e&&d){const f=this.makeStylerParams(t,i);p=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.cachedCallWithContext(d,f)??{},{pick:!1})??{}}return{cornerRadius:p.cornerRadius??n,fill:p.fill??s,fillOpacity:p.fillOpacity??o,lineDash:p.lineDash??r,lineDashOffset:p.lineDashOffset??a,opacity:1,stroke:p.stroke??l,strokeOpacity:p.strokeOpacity??c,strokeWidth:p.strokeWidth??u}}getItemStyle(e,t,i){const{properties:n,dataModel:s,processedData:o}=this,{itemStyler:r}=n,a=this.getHighlightStyle(t,e,i);let l=oi(a,this.getStyle(e===void 0,t,i));if(r&&s!=null&&o!=null&&e!=null){const c=s.resolveKeysById(this,"xValue",o)[e],u=this.cachedDatumCallback(Xo(this.getDatumId({xValue:c,phantom:!1}),t?"highlight":"node"),()=>{const d=this.makeItemStylerParams(s,o,e,c,t,l);return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.callWithContext(r,d))});u&&(l=oi(u,l))}return l}updateDatumStyles(e){const t=this.ctx.highlightManager.getActiveHighlight();e.datumSelection.each((i,n)=>{if(!e.datumSelection.isGarbage(i)){const s=this.getHighlightState(t,e.isHighlight,n.datumIndex);n.style=this.getItemStyle(n.datumIndex,e.isHighlight,s)}})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const i=this.ctx.highlightManager.getActiveHighlight(),{shadow:n}=this.properties,s=this.getCategoryDirection()==="x",o=this.getShapeFillBBox(),r=this.getBarDirection();e.datumSelection.each((a,l)=>{const c=l.style??t.styles[this.getHighlightState(i,e.isHighlight,l.datumIndex)];Yd(a,c,o),a.drawingMode=e.drawingMode;const u=c.cornerRadius??0;a.topLeftCornerRadius=l.topLeftCornerRadius?u:0,a.topRightCornerRadius=l.topRightCornerRadius?u:0,a.bottomRightCornerRadius=l.bottomRightCornerRadius?u:0,a.bottomLeftCornerRadius=l.bottomLeftCornerRadius?u:0,a.visible=s?(l.clipBBox?.width??l.width)>0:(l.clipBBox?.height??l.height)>0,a.direction=r,a.featherRatio=l.featherRatio,a.crisp=l.crisp,a.fillShadow=n})}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=1})}updateLabelNodes(e){const{isHighlight:t=!1}=e,i={xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xKey,yKey:this.properties.yKey,yName:this.properties.yName??this.properties.yKey,legendItemName:this.properties.legendItemName??this.properties.xName??this.properties.xKey},n=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((s,o)=>{s.fillOpacity=this.getHighlightStyle(t,o?.datumIndex).opacity??1,Zne(this,s,i,this.properties.label,o.label,t,n)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s}=this,{xKey:o,xName:r,yKey:a,yName:l,legendItemName:c,stackGroup:u,tooltip:d}=s,p=this.getCategoryAxis(),f=this.getValueAxis();if(!i||!n||!p||!f)return;const m=n.dataSources.get(this.id)?.data?.[e],v=i.resolveKeysById(this,"xValue",n)[e],b=i.resolveColumnById(this,"yValue-raw",n)[e];if(v==null)return;const C=this.getItemStyle(e,!1);return this.formatTooltipWithContext(d,{heading:this.getAxisValueText(p,"tooltip",v,m,o,c),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:a,value:this.getAxisValueText(f,"tooltip",b,m,a,c)}]},{seriesId:t,datum:m,title:l,xKey:o,xName:r,yKey:a,yName:l,legendItemName:c,stackGroup:u,...C,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:n,strokeOpacity:s,lineDash:o,lineDashOffset:r}=this.getStyle(!1,!1,0);return{marker:{fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:n,strokeOpacity:s,strokeWidth:i,lineDash:o,lineDashOffset:r}}}getLegendData(e){const{showInLegend:t}=this.properties;if(e!=="category")return[];const{id:i,ctx:{legendManager:n},visible:s}=this,{yKey:o,yName:r,legendItemName:a}=this.properties;return[{legendType:"category",id:i,itemId:o,seriesId:i,enabled:s&&n.getItemEnabled({seriesId:i,itemId:o}),label:{text:a??r??o},symbol:this.legendItemSymbol(),legendItemName:a,hideInLegend:!t}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t,annotationSelections:i}){const n=p0(h0(this.isVertical(),this.axes,"normal"),"unknown");Xn(this.id,"nodes",this.ctx.animationManager,[e],n),hn(this,"labels",this.ctx.animationManager,t),hn(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(e){const{datumSelection:t,labelSelection:i,annotationSelections:n,contextData:s,previousContextData:o}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=kse(this.id,t,this.getDatumId.bind(this),e.contextData,o,this.processedData,this.processedDataUpdated),a=o==null?"fade":"normal",l=p0(h0(this.isVertical(),this.axes,a),"added");Xn(this.id,"nodes",this.ctx.animationManager,[t],l,(c,u)=>this.getDatumId(u),r),(!r||r?.changed||!vm(s.groupScale,o?.groupScale))&&(hn(this,"labels",this.ctx.animationManager,i),hn(this,"annotations",this.ctx.animationManager,...n))}getDatumId(e){return Xo(e.xValue,e.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){const t=this.contextNodeData?.nodeData[e].clipBBox;return pH(this,t)}hasItemStylers(){return this.properties.styler!=null||this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}};_D.className="BarSeries";_D.type="bar";var Tse={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:e=>new _D(e),stackable:!0,groupable:!0,predictAxis:BD,defaultAxes:bie,themeTemplate:{zoom:{autoScaling:{enabled:{$and:[{$eq:[{$path:"../axes"},"x"]},{$not:{$eq:[{$path:"/series/0/direction"},"horizontal"]}}]}}},series:{direction:"vertical",fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",Cg],["image",Sh],["pattern",Ra]]},stroke:{$palette:"stroke"},fillOpacity:1,strokeWidth:{$isUserOption:["./stroke",2,0]},lineDash:[0],lineDashOffset:0,label:{...Ou,padding:{$isUserOption:["./spacing",0,8]},enabled:!1,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$if:[{$or:[{$eq:[{$path:"./placement"},"outside-start"]},{$eq:[{$path:"./placement"},"outside-end"]}]},{$ref:"textColor"},{$ref:"chartBackgroundColor"}]},placement:"inside-center"},shadow:{enabled:!1,color:ty,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}},highlight:xg(),segmentation:aL}}},Ise={type:"series",name:"bar",chartType:"cartesian",options:bL,create:e=>new _D(e)},ik=3,PRe=5,p6=.05;function NRe(e,t,i){const{xValues:n,yValues:s,xDomain:o,yDomain:r,xNeedsValueOf:a,yNeedsValueOf:l}=e,{x0:c,y0:u,x1:d,y1:p}=i;let f=0,m=1/0;const v=(c+d)/2,b=(u+p)/2;for(const C of t){const x=n[C],w=s[C];if(x==null||w==null)continue;const M=bc(x,o.min,o.max,a),T=bc(w,r.min,r.max,l),L=(M-v)**2+(T-b)**2;L<m&&(m=L,f=C)}return f}function ORe(e,t,i){const{xValues:n,yValues:s,xDomain:o,yDomain:r,xNeedsValueOf:a,yNeedsValueOf:l}=e,{x0:c,y0:u,x1:d,y1:p}=i;let f=0;for(const m of t){const v=n[m],b=s[m];if(v==null||b==null)continue;const C=bc(v,o.min,o.max,a),x=bc(b,r.min,r.max,l);C>=c&&C<=d&&x>=u&&x<=p&&(f+=1)}return f}function FRe(e,t,i){const{xValues:n,yValues:s,xDomain:o,yDomain:r,xNeedsValueOf:a,yNeedsValueOf:l}=e,{x0:c,y0:u,x1:d,y1:p}=i,f=[{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]},{x0:1,y0:1,x1:0,y1:0,indices:[]}],m=(c+d)/2,v=(u+p)/2;for(const C of t){const x=n[C],w=s[C];if(x==null||w==null)continue;const M=bc(x,o.min,o.max,a),T=bc(w,r.min,r.max,l),L=(M>m?1:0)+(T>v?2:0),I=f[L];I.indices.push(C),I.x0=Math.min(I.x0,M),I.y0=Math.min(I.y0,T),I.x1=Math.max(I.x1,M),I.y1=Math.max(I.y1,T)}const b=[];for(const C of f){const{indices:x,x0:w,x1:M,y0:T,y1:L}=C;if(x.length===0)continue;const I=R_(e,x,{x0:w,y0:T,x1:M,y1:L});b.push(I)}return b}function R_(e,t,i){const{x0:n,y0:s,x1:o,y1:r}=i;let l=t.length<PRe&&o-n<p6&&r-s<p6||n===o&&s===r?null:FRe(e,t,i);if(l?.length===1)return l[0];l?.length===0&&(l=null);const c=Math.hypot(o-n,r-s),u=NRe(e,t,i);return{scale:c,x0:n,y0:s,x1:o,y1:r,indices:t,primaryDatumIndex:u,children:l}}function BRe(e,t,i,n,s,o,r,a,l,c){const[u,d]=lS(e,o),[p,f]=lS(t,r),[m,v]=a,b={xValues:i,yValues:n,xDomain:{min:u,max:d},yDomain:{min:p,max:f},xNeedsValueOf:l,yNeedsValueOf:c},C=[];if(s!=null&&v>m){const x=Array.from({length:ik},()=>[]);for(let w=0;w<s.length;w+=1){const T=(s[w]-m)/(v-m),L=Math.trunc(T*ik);L>=0&&L<ik&&x[L].push(w)}for(let w=0;w<x.length;w+=1){const M=x[w],T=R_(b,M,{x0:0,y0:0,x1:1,y1:1});if(T!=null){const L=w/ik;C.push({sizeRatio:L,node:T})}}}else{const x=i.map((M,T)=>T),w=R_(b,x,{x0:0,y0:0,x1:1,y1:1});w!=null&&C.push({sizeRatio:0,node:w})}return C.length>0?{xValues:i,yValues:n,xd0:u,xd1:d,yd0:p,yd1:f,filters:C,xNeedsValueOf:l,yNeedsValueOf:c}:void 0}function Rse(e,t,i,n,s,o){const{xRange:r,yRange:a,xVisibleRange:[l,c],yVisibleRange:[u,d],minSize:p,maxSize:f}=i,{xValues:m,yValues:v,xd0:b,xd1:C,yd0:x,yd1:w,xNeedsValueOf:M,yNeedsValueOf:T}=t,L=1/Math.min(r/(c-l),a/(d-u)),I={xValues:m,yValues:v,xDomain:{min:b,max:C},yDomain:{min:x,max:w},xNeedsValueOf:M,yNeedsValueOf:T};for(const{sizeRatio:R,node:O}of t.filters){const _=.5*(p+R*(f-p)),B=_*L,V=e*B,j=l-_/r,K=c+_/r,Y=u-_/a,G=d+_/a,$=[O];for(;$.length>0;){const W=$.pop();if(!(W.x1<j||W.x0>K||W.y1<Y||W.y0>G))if(e!==1&&W.scale<=V)n!=null&&(n.count+=1),s?.push({datumIndex:W.primaryDatumIndex,count:W.indices.length,area:(W.x1-W.x0)*(W.y1-W.y0),dilation:Je(1,W.scale/B,e)});else if(W.children==null){const{indices:Q}=W;if(n!=null){const H=W.x0>=l&&W.x1<=c&&W.y0>=u&&W.y1<=d?Q.length:ORe(I,Q,{x0:l,y0:u,x1:c,y1:d});n.count+=H}o?.push(...Q)}else $.push(...W.children)}}}function XT(e,t,i){const n={count:0};return Rse(e,t,i,n,void 0,void 0),n.count}var _Re=100,zRe=12;function GRe(e,t,i){if(XT(1,e,t)<=i)return 1;let n=1,s=2;for(;XT(s,e,t)>i&&s<_Re;)n*=2,s*=2;for(let o=0;o<zRe;o+=1){const r=(s+n)/2;XT(r,e,t)>i?n=r:s=r}return(n+s)/2}function VRe(e,t,i){const n=[],s=[];return Rse(e,t,i,void 0,n,s),{groupedAggregation:n,singleDatumIndices:s}}var gH=class extends Sr{constructor(){super(...arguments),this.maxSize=30}};E([F,Le()],gH.prototype,"maxSize",2);E([F,LG()],gH.prototype,"domain",2);var Ese=class extends xn{constructor(){super(...arguments),this.placement="top"}};E([F],Ese.prototype,"placement",2);var ki=class extends Mh{constructor(){super(...arguments),this.label=new Ese,this.tooltip=py(),this.maxRenderedItems=1/0,this.marker=new gH}};E([F],ki.prototype,"xKey",2);E([F],ki.prototype,"yKey",2);E([F],ki.prototype,"sizeKey",2);E([F],ki.prototype,"labelKey",2);E([F],ki.prototype,"xFilterKey",2);E([F],ki.prototype,"yFilterKey",2);E([F],ki.prototype,"sizeFilterKey",2);E([F],ki.prototype,"xName",2);E([F],ki.prototype,"yName",2);E([F],ki.prototype,"sizeName",2);E([F],ki.prototype,"labelName",2);E([F],ki.prototype,"title",2);E([tr("marker.shape")],ki.prototype,"shape",2);E([tr("marker.size")],ki.prototype,"size",2);E([tr("marker.maxSize")],ki.prototype,"maxSize",2);E([tr("marker.domain")],ki.prototype,"domain",2);E([tr("marker.fill")],ki.prototype,"fill",2);E([tr("marker.fillOpacity")],ki.prototype,"fillOpacity",2);E([tr("marker.stroke")],ki.prototype,"stroke",2);E([tr("marker.strokeWidth")],ki.prototype,"strokeWidth",2);E([tr("marker.strokeOpacity")],ki.prototype,"strokeOpacity",2);E([tr("marker.lineDash")],ki.prototype,"lineDash",2);E([tr("marker.lineDashOffset")],ki.prototype,"lineDashOffset",2);E([tr("marker.itemStyler")],ki.prototype,"itemStyler",2);E([F],ki.prototype,"styler",2);E([F],ki.prototype,"label",2);E([F],ki.prototype,"tooltip",2);E([F],ki.prototype,"maxRenderedItems",2);var HRe=class extends QV{constructor(e,t,i,n){super(e,t,i,n),this.sizeKey=n.properties.sizeKey}},zD=class extends Rg{constructor(e){super({moduleCtx:e,propertyKeys:{...WS,label:["labelKey"],size:["sizeKey"]},propertyNames:{...jS,label:["labelName"],size:["sizeName"]},categoryKey:void 0,pickModes:[2,1,0],pathsPerSeries:[],datumSelectionGarbageCollection:!1,animationResetFns:{label:hy,datum:DL},usesPlacedLabels:!0,clipFocusBox:!1}),this.NodeEvent=HRe,this.properties=new ki,this.dataAggregation=void 0,this.sizeScale=new ym}get pickModeAxis(){return"main-category"}get type(){return super.type}get hasData(){return this.getHasData("xValue")}async processData(e){if(this.data==null||!this.visible)return;const t=this.axes.x?.scale,i=this.axes.y?.scale,{xScaleType:n,yScaleType:s}=this.getScaleInformation({xScale:t,yScale:i}),o=this.sizeScale.type,{xKey:r,yKey:a,sizeKey:l,xFilterKey:c,yFilterKey:u,sizeFilterKey:d,labelKey:p,marker:f}=this.properties,{dataModel:m,processedData:v}=await this.requestDataModel(e,this.data,{props:[Bi(r,n,{id:"xValue"}),Bi(a,s,{id:"yValue"}),...c==null?[]:[Bi(c,n,{id:"xFilterValue"})],...u==null?[]:[Bi(u,s,{id:"yFilterValue"})],...d==null?[]:[Bi(d,o,{id:"sizeFilterValue"})],...l?[Bi(l,o,{id:"sizeValue"})]:[],...p?[Bi(p,"category",{id:"labelValue"})]:[]]}),b=l?m.resolveProcessedDataIndexById(this,"sizeValue"):void 0,C=f.domain?[f.domain[0],f.domain[1]]:void 0;this.sizeScale.domain=C??(b==null?void 0:v.domain.values[b])??[],this.dataAggregation=this.aggregateData(m,v),this.animationState.transition("updateData")}xCoordinateRange(e,t,i){const{properties:n,sizeScale:s}=this,{size:o,sizeKey:r}=n,a=this.axes.x.scale.convert(e),l=r==null?void 0:this.dataModel.resolveColumnById(this,"sizeValue",this.processedData),u=.5*(l==null?o:s.convert(l[i]))*t;return[a-u,a+u]}yCoordinateRange(e,t,i){const{properties:n,sizeScale:s}=this,{size:o,sizeKey:r}=n,a=this.axes.y.scale.convert(e[0]),l=r==null?void 0:this.dataModel.resolveColumnById(this,"sizeValue",this.processedData),u=.5*(l==null?o:s.convert(l[i]))*t;return[a-u,a+u]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const n={x:"xValue",y:"yValue"},s=n[e],o=t.resolveProcessedDataDefById(this,s),r=t.getDomain(this,s,"value",i);if(o?.def.type==="value"&&o?.def.valueType==="category")return r;const l=n[e==="x"?"y":"x"],c=this.domainForClippedRange(e,[s],l);return Xr(Mg(c))}getSeriesRange(e,t){return this.domainForVisibleRange("y",["yValue"],"xValue",t)}getVisibleItems(e,t,i){const{dataAggregation:n,axes:s}=this,o=s.x,r=s.y;if(n==null||o==null||r==null)return this.countVisibleItems("xValue",["yValue"],e,t,i);const a=this.aggregationOptions(o,r,e,t??[0,1]);return XT(0,n,a)}aggregateData(e,t){if(t.type==="grouped"||t.input.count<=this.properties.maxRenderedItems)return;const i=this.axes.x,n=this.axes.y;if(i==null||n==null)return;const s=i.scale,o=n.scale;if(!mi.is(s)||!mi.is(o))return;const{sizeScale:r,properties:a}=this,{sizeKey:l}=a,c=e.resolveColumnById(this,"xValue",t),u=e.resolveColumnById(this,"yValue",t),d=l?e.resolveColumnById(this,"sizeValue",t):void 0,p=e.getDomain(this,"xValue","value",t),f=e.getDomain(this,"yValue","value",t),m=l?r.domain:[0,0],v=e.resolveColumnNeedsValueOf(this,"xValue",t),b=e.resolveColumnNeedsValueOf(this,"yValue",t);return BRe(s.type,o.type,c,u,d,p,f,m,v,b)}aggregationOptions(e,t,i=e.visibleRange,n=t.visibleRange){const{processedData:s,dataModel:o}=this,{sizeKey:r}=this.properties,[a,l]=this.getSizeRange(),c=Math.abs(e.range[1]-e.range[0]),u=Math.abs(t.range[1]-t.range[0]),d=Math.max(a,1),p=r?Math.max(l,1):d,f=e.scale,m=t.scale;return s!=null&&o!=null&&(mi.is(f)&&(i=c_(i,f.domain.map(vo),o.getDomain(this,"xValue","value",s).map(vo))),mi.is(m)&&(n=c_(n,m.domain.map(vo),o.getDomain(this,"yValue","value",s).map(vo)))),{xRange:c,yRange:u,minSize:d,maxSize:p,xVisibleRange:i,yVisibleRange:n}}createNodeData(){const{axes:e,dataModel:t,processedData:i,sizeScale:n,visible:s}=this,{xKey:o,yKey:r,sizeKey:a,xFilterKey:l,yFilterKey:c,sizeFilterKey:u,labelKey:d,xName:p,yName:f,sizeName:m,labelName:v,label:b,legendItemName:C,marker:x,maxRenderedItems:w}=this.properties,{enabled:M,placement:T}=b,L=vs.anchor(x.shape),I=e.x,R=e.y;if(!(t&&i&&I&&R))return;const O=!this.ctx.animationManager.isSkipped(),_=t.resolveColumnById(this,"xValue",i),B=t.resolveColumnById(this,"yValue",i),V=a==null?void 0:t.resolveColumnById(this,"sizeValue",i),j=d==null?void 0:t.resolveColumnById(this,"labelValue",i),K=l==null?void 0:t.resolveColumnById(this,"xFilterValue",i),Y=c==null?void 0:t.resolveColumnById(this,"yFilterValue",i),G=u==null?void 0:t.resolveColumnById(this,"sizeFilterValue",i);let $;d?$=[]:a?$=t.getDomain(this,"sizeValue","value",i):$=[];const W=I.scale,Q=R.scale,q=(W.bandwidth??0)/2,H=(Q.bandwidth??0)/2,U=[];n.range=this.getSizeRange();const ee=ei(b),ie=i.dataSources.get(this.id)?.data;if(ie==null)return;const oe=nS(b),ae=(xe,be,ge,Re)=>{const Ne=ie[xe],Pe=_[xe],Be=B[xe],Ue=V?.[xe],Ae=W.convert(Pe)+q,Ve=Q.convert(Be)+H;let $e;K!=null&&Y!=null&&($e=K[xe]===Pe&&Y[xe]===Be,G!=null&&$e&&($e=G[xe]===Ue));let Qe;if(M){let dt,Tt,gt;d&&j?(dt=j[xe],Tt=d,gt="label"):a?(dt=Ue,Tt=a,gt="size"):(dt=Be,Tt=r,gt="y");const Lt=this.getLabelText(dt,Ne,Tt,gt,$,b,{value:dt,datum:Ne,xKey:o,yKey:r,sizeKey:a,labelKey:d,xName:p,yName:f,sizeName:m,labelName:v,legendItemName:C});let{width:Gi,height:Ti}=ft(Lt)?Da(Lt,b):ee.measureLines(String(Lt));Gi+=oe.left+oe.right,Ti+=oe.bottom+oe.top,Qe={text:Lt,width:Gi,height:Ti}}else Qe={text:"",width:0,height:0};const Oe=Ue==null?n.range[0]:n.convert(Ue),Ze={x:Ae,y:Ve,size:Math.sqrt(ge)*Oe};U.push({series:this,itemId:r,yKey:r,xKey:o,datum:Ne,datumIndex:xe,xValue:Pe,yValue:Be,sizeValue:Ue,capDefaults:{lengthRatioMultiplier:x.getDiameter(),lengthMax:1/0},point:Ze,midPoint:{x:Ae,y:Ve},label:Qe,anchor:L,placement:T,count:be,dilation:ge,area:Re,selected:$e})},{dataAggregation:me}=this;if(s)if(me==null)for(let xe=0;xe<ie.length;xe++)ae(xe,1,1,0);else{const xe=this.aggregationOptions(I,R),be=GRe(me,xe,w),{groupedAggregation:ge,singleDatumIndices:Re}=VRe(be,me,xe);for(const{datumIndex:Ne,count:Pe,dilation:Be,area:Ue}of ge)ae(Ne,Pe,Be,Ue);for(const Ne of Re)ae(Ne,1,1,0)}return{itemId:r,nodeData:U,labelData:M?U:[],scales:this.calculateScaling(),visible:this.visible||O,styles:AL(this,this.properties,x)}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,{sizeKey:n}=this.properties;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());let s;return n&&(s=o=>Xo(o.xValue,o.yValue,o.sizeValue,Gt(o.label.text))),i.update(t,void 0,s)}updateDatumStyles(e){const{datumSelection:t,isHighlight:i}=e,{xKey:n,yKey:s,sizeKey:o,labelKey:r,marker:a}=this.properties,l={xKey:n,yKey:s,sizeKey:o,labelKey:r},c=this.ctx.highlightManager.getActiveHighlight();t.each((u,d)=>{if(!t.isGarbage(u)){const p=this.getHighlightState(c,e.isHighlight,d.datumIndex),f=this.getStyle(e.isHighlight,p);d.style=this.getMarkerStyle(a,d,l,{isHighlight:i,highlightState:p,resolveMarkerSubPath:[]},f)}})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const{datumSelection:i,isHighlight:n,drawingMode:s}=e;this.sizeScale.range=this.getSizeRange();const o=this.getShapeFillBBox(),r=this.dataAggregation!=null,a=this.ctx.highlightManager.getActiveHighlight();i.each((l,c,u)=>{const{point:{size:d},count:p,area:f,dilation:m}=c;let v=c.style??t.styles[this.getHighlightState(a,n,c.datumIndex)];if(v={...v},v.size=d,m>1){const b=v.fillOpacity??0,C=.269669+683e-6*p+-37.534348*f+.004449*p*f+-0*p**2+44.428603*f**2;v.fillOpacity=Je(b/m,b/.1*C,1)}this.applyMarkerStyle(v,l,c.point,o,{selected:c.selected}),l.drawingMode=s,l.zIndex=r?[-p,u]:0}),n||this.properties.marker.markClean()}updatePlacedLabelData(e){this.labelSelection.update(e.map(t=>({...t.datum,point:{x:t.x,y:t.y,size:t.datum.point.size}})),t=>{t.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{isHighlight:t=!1}=e,i=this.ctx.highlightManager?.getActiveHighlight(),n=this.makeLabelFormatterParams();e.labelSelection.each((s,o)=>{const r=dy(this,o,n,this.properties.label,t,i);s.text=o.label.text,s.fill=r.color,s.x=o.point?.x??0,s.y=o.point?.y??0,s.fontStyle=r.fontStyle,s.fontWeight=r.fontWeight,s.fontSize=r.fontSize,s.fontFamily=r.fontFamily,s.textBaseline="top",s.fillOpacity=this.getHighlightStyle(t,o.datumIndex).opacity??1,s.setBoxing(r)})}makeStylerParams(e,t){const{id:i,properties:{size:n,maxSize:s,shape:o,fill:r,fillOpacity:a,lineDash:l,lineDashOffset:c,stroke:u,strokeOpacity:d,strokeWidth:p,xKey:f,yKey:m,sizeKey:v,labelKey:b}}=this,C=IS(t??0);return this.type==="bubble"?{highlightState:C,highlighted:e,size:n,maxSize:s,shape:o,fill:r,fillOpacity:a,lineDash:l,lineDashOffset:c,seriesId:i,sizeKey:v,stroke:u,strokeOpacity:d,strokeWidth:p,xKey:f,yKey:m,labelKey:b}:this.type==="scatter"?{highlightState:C,highlighted:e,size:n,shape:o,fill:r,fillOpacity:a,lineDash:l,lineDashOffset:c,seriesId:i,stroke:u,strokeOpacity:d,strokeWidth:p,xKey:f,yKey:m,labelKey:b}:this.type}makeLabelFormatterParams(){const{xKey:e,xName:t,yKey:i,yName:n,sizeKey:s,sizeName:o,labelKey:r,labelName:a,legendItemName:l}=this.properties;return{xKey:e,xName:t,yKey:i,yName:n,sizeKey:s,sizeName:o,labelKey:r,labelName:a,legendItemName:l}}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:s,properties:o,ctx:r}=this,{formatManager:a}=r,{xKey:l,xName:c,yKey:u,yName:d,sizeKey:p,sizeName:f,labelKey:m,labelName:v,title:b,tooltip:C,marker:x,legendItemName:w}=o,M=s.x,T=s.y;if(!i||!n||!M||!T)return;const L=n.dataSources.get(this.id)?.data?.[e],I=i.resolveColumnById(this,"xValue",n)[e],R=i.resolveColumnById(this,"yValue",n)[e];if(I==null)return;const O=[];if(this.isLabelEnabled()&&m!=null){const B=i.resolveColumnById(this,"labelValue",n)[e],V=a.format(this.callWithContext.bind(this),{type:"category",value:B,datum:L,seriesId:t,legendItemName:w,key:m,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});O.push({label:v,fallbackLabel:m,value:V??eS(B)})}if(O.push({label:c,fallbackLabel:l,value:this.getAxisValueText(M,"tooltip",I,L,l,w)},{label:d,fallbackLabel:u,value:this.getAxisValueText(T,"tooltip",R,L,u,w)}),p!=null){const B=i.resolveColumnById(this,"sizeValue",n)[e],V=i.getDomain(this,"sizeValue","value",n),j=a.format(this.callWithContext.bind(this),{type:"number",value:B,datum:L,seriesId:t,legendItemName:w,key:p,source:"tooltip",property:"size",boundSeries:this.getFormatterContext("size"),domain:V,fractionDigits:void 0});O.push({label:f,fallbackLabel:p,value:j??eS(B)})}const _=this.getMarkerStyle(x,{datum:L,datumIndex:e},{xKey:l,yKey:u,sizeKey:p,labelKey:m,highlighted:!0},{resolveMarkerSubPath:[]});return this.formatTooltipWithContext(C,{title:b,symbol:this.legendItemSymbol(),data:O},{seriesId:t,datum:L,title:u,xKey:l,xName:c,yKey:u,yName:d,sizeKey:p,sizeName:f,labelKey:m,labelName:v,legendItemName:w,..._,...this.getModuleTooltipParams()})}legendItemSymbol(){const e=this.getStyle(!1);return{marker:this.getMarkerStyle(this.properties.marker,{},void 0,{isHighlight:!1,checkForHighlight:!1,resolveMarkerSubPath:[]},e)}}getLegendData(){const{id:e,ctx:{legendManager:t},visible:i}=this,{yKey:n,yName:s,legendItemName:o,title:r,showInLegend:a}=this.properties;return[{legendType:"category",id:e,itemId:n,seriesId:e,enabled:i&&t.getItemEnabled({seriesId:e,itemId:n}),label:{text:o??r??s??n},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!a}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){Sse(this,this.ctx.animationManager,e),hn(this,"labels",this.ctx.animationManager,t)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new vs}getStyle(e,t){const{properties:i}=this;let n={};if(i.styler){const s=this.makeStylerParams(e,t),o=this.cachedCallWithContext(i.styler,s)??{};n=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],o,{pick:!1})??{}}return{fill:n.fill??i.fill,fillOpacity:n.fillOpacity??i.fillOpacity,lineDash:n.lineDash??i.lineDash,lineDashOffset:n.lineDashOffset??i.lineDashOffset,shape:n.shape??i.shape,size:n.size??i.size,maxSize:n.maxSize??i.maxSize,stroke:n.stroke??i.stroke,strokeOpacity:n.strokeOpacity??i.strokeOpacity,strokeWidth:n.strokeWidth??i.strokeWidth}}getSizeRange(){const{size:e,maxSize:t}=this.getStyle(!1);return[e,t]}getFormattedMarkerStyle(e){const{xKey:t,yKey:i,sizeKey:n,labelKey:s,marker:o}=this.properties;return this.getMarkerStyle(o,e,{xKey:t,yKey:i,sizeKey:n,labelKey:s},{resolveMarkerSubPath:[]})}computeFocusBounds(e){return ML(this,e)}hasItemStylers(){const{styler:e,itemStyler:t,marker:i,label:n}=this.properties;return!!(e??t??i.itemStyler??n.itemStyler)}initQuadTree(e){IL(e,this.datumNodesIter())}pickNodeDataClosestDatum(e){return RL(this,e)}};zD.className="BubbleSeries";zD.type="bubble";var WRe={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:e=>new zD(e),predictAxis:lH,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",kD],["image",Sh],["pattern",Ra]]},stroke:{$palette:"stroke"},fillOpacity:.8,maxRenderedItems:1e4,label:{...Ou,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:xg()}}},Lse={type:"series",name:"bubble",chartType:"cartesian",options:wTe,create:e=>new zD(e)},Cs=class extends Mh{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new Uu,this.label=new xn,this.tooltip=py()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,cornerRadius:a}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,cornerRadius:a,opacity:1}}};E([F],Cs.prototype,"xKey",2);E([F],Cs.prototype,"yKey",2);E([F],Cs.prototype,"xName",2);E([F],Cs.prototype,"yName",2);E([F],Cs.prototype,"fill",2);E([F],Cs.prototype,"fillOpacity",2);E([F],Cs.prototype,"stroke",2);E([F],Cs.prototype,"strokeWidth",2);E([F],Cs.prototype,"strokeOpacity",2);E([F],Cs.prototype,"lineDash",2);E([F],Cs.prototype,"lineDashOffset",2);E([F],Cs.prototype,"cornerRadius",2);E([F],Cs.prototype,"areaPlot",2);E([F],Cs.prototype,"bins",2);E([F],Cs.prototype,"aggregation",2);E([F],Cs.prototype,"binCount",2);E([F],Cs.prototype,"shadow",2);E([F],Cs.prototype,"label",2);E([F],Cs.prototype,"tooltip",2);var g6=10,EL=class extends Rg{constructor(e){super({moduleCtx:e,propertyKeys:WS,propertyNames:jS,categoryKey:void 0,pickModes:[1,0],datumSelectionGarbageCollection:!0,animationResetFns:{datum:g0,label:hy}}),this.properties=new Cs,this.calculatedBins=[]}get hasData(){return this.calculatedBins.length>0}deriveBins(e){const t=hD(e[0],e[1],g6).ticks,i=Jw(e[0],e[1],g6),[n]=t,s=o=>[o,o+i];return[[n-i,n],...t.map(s)]}calculateNiceBins(e,t){const i=Math.floor(e[0]),n=e[1],s=t||1,{start:o,binSize:r}=this.calculateNiceStart(i,n,s);return this.getBins(o,n,r,s)}getBins(e,t,i,n){const s=[],o=this.calculatePrecision(i);for(let r=0;r<n;r++){const a=Math.round((e+r*i)*o)/o;let l=Math.round((e+(r+1)*i)*o)/o;r===n-1&&(l=Math.max(l,t)),s[r]=[a,l]}return s}calculatePrecision(e){let t=10;if(Number.isFinite(e)&&e>0)for(;e<1;)t*=10,e*=10;return t}calculateNiceStart(e,t,i){const n=Math.abs(t-e)/i,s=Math.floor(Math.log10(n)),o=Math.pow(10,s);return{start:Math.floor(e/o)*o,binSize:n}}async processData(e){const{visible:t}=this,{xKey:i,yKey:n,areaPlot:s,aggregation:o}=this.properties,r=this.axes.x?.scale,a=this.axes.y?.scale,{xScaleType:l,yScaleType:c}=this.getScaleInformation({yScale:a,xScale:r}),u=t?{}:{forceValue:0},d=[Qp(i,l),jie];if(n){let x=v_("groupAgg",{visible:t});o==="count"||(o==="sum"?x=Lie("groupAgg",{visible:t}):o==="mean"&&(x=Pie("groupAgg",{visible:t}))),s&&(x=b_("groupAgg",x)),d.push(Bi(n,c,{invalidValue:void 0,...u}),x)}else{d.push(zie("count"));let x=v_("groupAgg",{visible:t});s&&(x=b_("groupAgg",x)),d.push(x)}let p=[];const f=x=>{const w=Xr(x.domain.keys[0]);if(w.length===0)return x.domain.groups=[],()=>[];const M=En(this.properties.binCount)?this.calculateNiceBins(w,this.properties.binCount):this.properties.bins??this.deriveBins(w),T=M.length;return p=[...M],L=>{let I=L[0];if(gc(I)&&(I=I.getTime()),!En(I))return[];for(let R=0;R<T;R++){const O=M[R];if(I>=O[0]&&I<O[1]||R===T-1&&I<=O[1])return O}return[]}},{dataModel:m,processedData:v}=await this.requestDataModel(e,this.data,{props:d,groupByFn:f}),b=v,C=new Map;for(const[x,w]of b.groups.entries()){const M=w.keys;C.set(Xo(...M),{group:w,groupIndex:x})}this.calculatedBins=p.map(x=>{const w=C.get(Xo(...x));if(w){const{group:M,groupIndex:T}=w,[[L,I]=[0,0]]=M.aggregation,R=[...m.forEachDatum(this,b,M,T)],O=this.frequency(M),_=L+I;return{domain:x,datum:R,groupIndex:T,frequency:O,total:_}}else return{domain:x,datum:[],groupIndex:-1,frequency:0,total:0}}),this.animationState.transition("updateData")}xCoordinateRange(){return[Number.NaN,Number.NaN]}yCoordinateRange(){return[Number.NaN,Number.NaN]}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i||!this.calculatedBins.length)return[];const n=i.getDomain(this,"groupAgg","aggregate",t),s=this.calculatedBins[0].domain[0],o=this.calculatedBins[(this.calculatedBins?.length??0)-1].domain[1];return Xr(e==="x"?[s,o]:n)}getSeriesRange(e,[t,i]){const{dataModel:n,processedData:s}=this;if(!n||s?.type!=="grouped")return[Number.NaN,Number.NaN];const o=this.axes.x.scale,r=0;let a=-1/0;for(const{keys:l,aggregation:c}of s.groups){const[[u,d]=[0,0]]=c,[p,f]=l,[m,v]=Es([o.convert(p),o.convert(f)]);if(v>=t&&m<=i){const b=u+d;a=Math.max(a,b)}}return r>a?[Number.NaN,Number.NaN]:[r,a]}frequency(e){return e.datumIndices.reduce((t,i)=>t+i.length,0)}createNodeData(){const{axes:e,processedData:t,dataModel:i}=this,n=e.x,s=e.y;if(!n||!s||!i)return;const{scale:o}=n,{scale:r}=s,{xKey:a,yKey:l,xName:c,yName:u,label:d}=this.properties,p=!this.ctx.animationManager.isSkipped(),f=[],m={itemId:this.properties.yKey??this.id,nodeData:f,labelData:f,scales:this.calculateScaling(),animationValid:!0,visible:this.visible||p,styles:ZG(this.getItemStyle.bind(this))};if(t==null||t.type!=="grouped")return m;for(const{domain:v,datum:b,groupIndex:C,frequency:x,total:w}of this.calculatedBins){const[M,T]=v,L=o.convert(M),I=o.convert(T),R=r.convert(0),O=r.convert(w),_=Math.abs(I-L),B=Math.abs(O-R),V=Math.min(L,I),j=Math.min(R,O);let K;d.enabled&&w!==0&&(K={x:V+_/2,y:j+B/2,text:this.getLabelText(w,b,l,"y",[],d,{value:w,datum:b,xKey:a,yKey:l,xName:c,yName:u})});const Y={x:V+_/2,y:j+B/2},G=s.isReversed();f.push({series:this,datumIndex:C,datum:b,aggregatedValue:w,frequency:x,domain:v,yKey:l,xKey:a,x:V,y:j,xValue:L,yValue:O,width:_,height:B,midPoint:Y,topLeftCornerRadius:!G,topRightCornerRadius:!G,bottomRightCornerRadius:G,bottomLeftCornerRadius:G,label:K,crisp:!0})}return f.sort((v,b)=>v.x-b.x),m}nodeFactory(){return new bs}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e;return i.update(t,void 0,n=>Xo(...n.domain))}getItemStyle(e,t,i){const{properties:n}=this,s=this.getHighlightStyle(t,e,i);return oi(s,n.getStyle())}updateDatumStyles(e){const{datumSelection:t,isHighlight:i}=e;t.each((n,s)=>{t.isGarbage(n)||(s.style=this.getItemStyle(s.datumIndex,i))})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const i=this.ctx.highlightManager.getActiveHighlight(),{shadow:n}=this.properties,s=this.getShapeFillBBox();e.datumSelection.each((o,r)=>{const a=r.style??t.styles[this.getHighlightState(i,e.isHighlight,r.datumIndex)],{cornerRadius:l=0}=a,{topLeftCornerRadius:c,topRightCornerRadius:u,bottomRightCornerRadius:d,bottomLeftCornerRadius:p}=r;Yd(o,a,s),o.topLeftCornerRadius=c?l:0,o.topRightCornerRadius=u?l:0,o.bottomRightCornerRadius=d?l:0,o.bottomLeftCornerRadius=p?l:0,o.crisp=r.crisp,o.fillShadow=n})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,n=>{n.pointerEvents=1,n.textAlign="center",n.textBaseline="middle"})}updateLabelNodes(e){const t=this.isLabelEnabled(),i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((n,s)=>{const o=dy(this,s,this.properties,this.properties.label,!1,i),{enabled:r,fontStyle:a,fontWeight:l,fontSize:c,fontFamily:u,color:d}=o;r&&t&&s?.label?(n.text=s.label.text,n.x=s.label.x,n.y=s.label.y,n.fontStyle=a,n.fontWeight=l,n.fontFamily=u,n.fontSize=c,n.fill=d,n.visible=!0,n.fillOpacity=this.getHighlightStyle(!1,s.datumIndex).opacity??1,n.setBoxing(o)):n.visible=!1})}initQuadTree(e){const{value:t}=this.contentGroup.children().next();t instanceof Mt&&IL(e,t.children())}pickNodeClosestDatum(e){return RL(this,e)}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:s,properties:o,ctx:{localeManager:r}}=this,{xKey:a,xName:l,yKey:c,yName:u,tooltip:d,legendItemName:p}=o,f=s.x,m=s.y;if(!i||n?.type!=="grouped"||!f||!m)return;const v=n.groups[e],{aggregation:b,keys:C}=v,[[x,w]=[0,0]]=b,M=this.frequency(v),T=C,[L,I]=T,R=x+w,O={data:[...i.forEachDatum(this,n,v,e)],aggregatedValue:R,frequency:M,domain:T},_=[{label:l,fallbackLabel:a,value:`${this.getAxisValueText(f,"tooltip",L,O,a,p)} - ${this.getAxisValueText(f,"tooltip",I,O,a,p)}`},{label:r.t("seriesHistogramTooltipFrequency"),value:this.getAxisValueText(m,"tooltip",M,O,c,p)}];if(c!=null){let B;switch(o.aggregation){case"sum":B=r.t("seriesHistogramTooltipSum",{yName:u??c});break;case"mean":B=r.t("seriesHistogramTooltipMean",{yName:u??c});break;case"count":B=r.t("seriesHistogramTooltipCount",{yName:u??c});break}_.push({label:B,value:this.getAxisValueText(m,"tooltip",R,O,c,p)})}return this.formatTooltipWithContext(d,{symbol:this.legendItemSymbol(),data:_},{seriesId:t,datum:O,title:u,xKey:a,xName:l,yKey:c,yName:u,xRange:[L,I],frequency:M,...this.getItemStyle(e,!1)})}legendItemSymbol(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r}=this.properties;return{marker:{fill:fn(e)??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:t,strokeOpacity:s,strokeWidth:n,lineDash:o,lineDashOffset:r}}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:n}=this,{xKey:s,yName:o,showInLegend:r}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:n&&i.getItemEnabled({seriesId:t,itemId:s}),label:{text:o??s??"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!r}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){const i=p0(h0(!0,this.axes,"normal"),"unknown");Xn(this.id,"datums",this.ctx.animationManager,[e],i),hn(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){const t=p0(h0(!0,this.axes,"normal"),"added"),i={changed:!0,added:new Set,removed:new Set};Xn(this.id,"datums",this.ctx.animationManager,[e.datumSelection],t,(n,s)=>Xo(...s.domain),i),i?.changed&&hn(this,"labels",this.ctx.animationManager,e.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){return pH(this,this.contextNodeData?.nodeData[e])}hasItemStylers(){return this.properties.label.itemStyler!=null}};EL.className="HistogramSeries";EL.type="histogram";var jRe={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:e=>new EL(e),predictAxis:BD,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",Cg],["image",Sh],["pattern",Ra]]},stroke:{$palette:"stroke"},strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{...Ou,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},shadow:{enabled:!1,color:ty,xOffset:3,yOffset:3,blur:5},highlight:xg()}}},Pse={type:"series",name:"histogram",chartType:"cartesian",enterprise:!0,options:DTe,create:e=>new EL(e)},URe=1e3,$Re=10;function f6(e,t,i,n,s,o,r,a){const l=e[o];if(l==null)return!1;const c=Number.isFinite(t)?bc(l,t,i,r):o0(o,a),u=YV(c,s);return o===n[u+Wo]||o===n[u+dr]||o===n[u+hr]||o===n[u+pr]}function KRe(e,t,i,n,s,o){const r=t.length;if(r<URe)return;const[a,l]=lS(e,n);let c=wL(t,a,l,{xNeedsValueOf:s});const{indexData:u,valueData:d}=r0(t,i,i,a,l,c,{xNeedsValueOf:s,yNeedsValueOf:o});let p=[];for(let m=0;m<r;m++)f6(t,a,l,u,c,m,s,r)&&p.push(m);const f=[{maxRange:c,indices:p}];for(;p.length>$Re&&c>64;)({maxRange:c}=a0(u,d,c,{inPlace:!0})),p=p.filter(m=>f6(t,a,l,u,c,m,s,r)),f.push({maxRange:c,indices:p});return f.reverse(),f}var es=class extends Mh{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new US,this.marker=new Sr,this.label=new xn,this.tooltip=py(),this.connectMissingData=!1,this.sparklineMode=!1}};E([F],es.prototype,"xKey",2);E([F],es.prototype,"yKey",2);E([F],es.prototype,"xName",2);E([F],es.prototype,"yName",2);E([F],es.prototype,"yFilterKey",2);E([F],es.prototype,"stackGroup",2);E([F],es.prototype,"normalizedTo",2);E([F],es.prototype,"title",2);E([F],es.prototype,"stroke",2);E([F],es.prototype,"strokeWidth",2);E([F],es.prototype,"strokeOpacity",2);E([F],es.prototype,"lineDash",2);E([F],es.prototype,"lineDashOffset",2);E([F],es.prototype,"interpolation",2);E([F],es.prototype,"styler",2);E([F],es.prototype,"marker",2);E([F],es.prototype,"label",2);E([F],es.prototype,"tooltip",2);E([F],es.prototype,"connectMissingData",2);E([F],es.prototype,"sparklineMode",2);var YRe=.25,XRe=tD(KRe),GD=class extends Rg{constructor(e){super({moduleCtx:e,propertyKeys:WS,propertyNames:jS,categoryKey:"xValue",pickModes:[2,1,0],datumSelectionGarbageCollection:!1,segmentedDataNodes:!1,animationResetFns:{path:aH({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:hy,datum:(t,i)=>({...DL(),...d0(t,i)})},clipFocusBox:!1}),this.properties=new es,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}get hasData(){return this.getHasData("xValue")}isNormalized(){return this.properties.normalizedTo!=null}async processData(e){if(this.data==null)return;const{data:t,visible:i,seriesGrouping:{groupIndex:n=this.id,stackCount:s=0}={}}=this,{xKey:o,yKey:r,yFilterKey:a,connectMissingData:l,normalizedTo:c}=this.properties,u=!this.ctx.animationManager.isSkipped(),d=this.axes.x?.scale,p=this.axes.y?.scale,{isContinuousX:f,xScaleType:m,yScaleType:v}=this.getScaleInformation({xScale:d,yScale:p}),b=s>1||c!=null,C={invalidValue:null};l&&b&&(C.invalidValue=0),b&&!i&&(C.forceValue=0);const x={value:`area-stack-${n}-yValue`,marker:`area-stack-${n}-yValues-marker`},w=[];(!f||b)&&w.push(Qp(o,m,{id:"xKey"})),w.push(Bi(o,m,{id:"xValue"}),Bi(r,v,{id:"yValueRaw",...C,invalidValue:void 0})),a!=null&&w.push(Bi(a,v,{id:"yFilterRaw"})),b&&w.push(...s0(r,"normal",{id:"yValueCumulative",...C,groupId:x.marker},v)),In(c)&&w.push(Bi(r,v,{id:"yValue",...C,groupId:x.value}),mL(Object.values(x),c)),u&&(w.push(ND(f?["xValue"]:void 0)),this.processedData&&w.push(yL(this.id,this.processedData)));const{dataModel:M,processedData:T}=await this.requestDataModel(e,t,{props:w,groupByKeys:b,groupByData:!b});this.dataAggregationFilters=this.aggregateData(M,T),this.animationState.transition("updateData")}yValueKey(){return this.isNormalized()?"yValue":"yValueRaw"}yCumulativeKey(e){return e.type==="grouped"?"yValueCumulative":this.yValueKey()}xCoordinateRange(e,t){const{marker:i}=this.properties,n=this.axes.x.scale.convert(e),s=i.enabled?.5*i.size*t:0;return[n-s,n+s]}yCoordinateRange(e,t){const{marker:i}=this.properties,n=this.axes.y.scale.convert(e[0]),s=i.enabled?.5*i.size*t:0;return[n-s,n+s]}getSeriesDomain(e){const{dataModel:t,processedData:i,axes:n}=this;if(!t||!i)return[];const s=n.y;if(e==="x"){const r=t.resolveProcessedDataDefById(this,"xValue"),a=t.getDomain(this,"xValue","value",i);return r?.def.type==="value"&&r.def.valueType==="category"?a:Xr(Mg(a))}const o=this.domainForClippedRange("y",[this.yCumulativeKey(i)],"xValue");if(this.isNormalized()&&s instanceof Oa&&!(s instanceof sy)){const r=Number.isFinite(o[1]-o[0])?[Math.min(o[0],0),Math.max(o[1],0)]:[];return Xr(r)}else return Xr(o)}getSeriesRange(e,t){return this.domainForVisibleRange("y",[this.yCumulativeKey(this.processedData)],"xValue",t)}getZoomRangeFittingItems(e,t,i){return this.zoomFittingVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",[this.yCumulativeKey(this.processedData)],e,t,i)}aggregateData(e,t){if(t.type!=="ungrouped"||FS(t))return;const i=this.axes.x;if(i==null)return;const{scale:n}=i,s=e.resolveColumnById(this,"xValue",t),o=e.resolveColumnById(this,this.yCumulativeKey(t),t),r=e.getDomain(this,"xValue","value",t),a=e.resolveColumnNeedsValueOf(this,"xValue",t),l=e.resolveColumnNeedsValueOf(this,this.yCumulativeKey(t),t);return XRe(n.type,s,o,r,a,l)}createNodeData(){const{dataModel:e,processedData:t,axes:i,dataAggregationFilters:n}=this,s=i.x,o=i.y;if(!e||!t||!s||!o)return;const{xKey:r,xName:a,yFilterKey:l,yKey:c,yName:u,marker:d,label:p,connectMissingData:f,interpolation:m,legendItemName:v}=this.properties,b=s.scale,C=o.scale,x=(b.bandwidth??0)/2,w=(C.bandwidth??0)/2,M=d.enabled?d.size:0,T=t.dataSources.get(this.id)?.data??[],L=e.resolveColumnById(this,"xValue",t),I=e.resolveColumnById(this,"yValueRaw",t),R=e.resolveColumnById(this,this.yCumulativeKey(t),t),O=l==null?void 0:e.resolveColumnById(this,"yFilterRaw",t),_=this.getSeriesDomain("y"),B={lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},V=[],j=[],K=ae=>{const me=T[ae],xe=L[ae],be=I[ae],ge=R[ae],Re=O?.[ae],Ne=b.convert(xe)+x,Pe=C.convert(ge)+w;if(!Number.isFinite(Ne))return;if(be!=null){const Ue=p.enabled?this.getLabelText(be,me,c,"y",_,p,{value:be,datum:me,xKey:r,yKey:c,xName:a,yName:u,legendItemName:v}):void 0;V.push({series:this,datum:me,datumIndex:ae,yKey:c,xKey:r,point:{x:Ne,y:Pe,size:M},midPoint:{x:Ne,y:Pe},cumulativeValue:ge,yValue:be,xValue:xe,capDefaults:B,labelText:Ue,selected:Re})}const Be=j.at(-1);if(be!=null){const Ue={point:{x:Ne,y:Pe},xDatum:xe,yDatum:be};Array.isArray(Be)?Be.push(Ue):Be==null?j.push([Ue]):(Be.skip+=1,j.push([Ue]))}else f||(Array.isArray(Be)||Be==null?j.push({skip:0}):Be.skip+=1)},[Y,G]=b.range,$=Math.abs(G-Y),Q=n?.find(ae=>ae.maxRange>$)?.indices;let[q,H]=this.visibleRangeIndices("xValue",s.range,Q);q=Math.max(q-1,0),H=Math.min(H+1,Q?.length??L.length),t.input.count<1e3&&(q=0,H=t.input.count);for(let ae=q;ae<H;ae+=1)K(Q?.[ae]??ae);const U=j.flatMap(ae=>Array.isArray(ae)?ww(ae,m):[]),ee={itemId:c,spans:U},ie=O?.some((ae,me)=>ae===I[me])??!1,oe=kL(this.properties.segmentation,s,o,this.chart.seriesRect,this.ctx.scene,!1);return{itemId:c,nodeData:V,labelData:V,strokeData:ee,scales:this.calculateScaling(),visible:this.visible,crossFiltering:ie,styles:AL(this,this.properties,d),segments:oe}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){const{paths:[t],visible:i,animationEnabled:n}=e,s=this.contextNodeData?.crossFiltering===!0,o=oi(this.getHighlightStyle(),this.getStyle(!1)),{strokeWidth:r,stroke:a,strokeOpacity:l,lineDash:c,lineDashOffset:u,opacity:d}=o,p=this.contextNodeData?.segments;t.setProperties({segments:p,fill:void 0,lineJoin:"round",pointerEvents:1,opacity:d,stroke:a,strokeWidth:r,strokeOpacity:l*(s?YRe:1),lineDash:c,lineDashOffset:u}),t.datum=p,n||(t.visible=i),lR(this,t)}updateDatumSelection(e){let{nodeData:t}=e;const{datumSelection:i}=e,{contextNodeData:n,processedData:s,axes:o,properties:r}=this,{marker:a}=r;return t=n?.crossFiltering===!0||oH(s.input.count,o.x.scale,a)?t:[],a.isDirty()&&(i.clear(),i.cleanup()),i.update(t,void 0,c=>Xo(c.xValue))}updateDatumStyles(e){const{datumSelection:t,isHighlight:i}=e,{marker:n}=this.properties,s=this.ctx.highlightManager.getActiveHighlight();t.each((o,r)=>{if(!t.isGarbage(o)){const a=this.getHighlightState(s,e.isHighlight,r.datumIndex),l=this.getStyle(i,a),{stroke:c,strokeWidth:u,strokeOpacity:d}=l,p=this.makeItemStylerParams(this.dataModel,this.processedData,r.datumIndex,l.marker);r.style=this.getMarkerStyle(n,r,p,{isHighlight:i,highlightState:a},l.marker,{stroke:c,strokeWidth:u,strokeOpacity:d})}})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const{datumSelection:i,isHighlight:n,drawingMode:s}=e,o=this.ctx.animationManager.isSkipped(),r=this.getShapeFillBBox(),a=this.ctx.highlightManager.getActiveHighlight();i.each((l,c)=>{const u=this.getHighlightState(a,n,c.datumIndex),d=c.style??t.styles[u];this.applyMarkerStyle(d,l,c.point,r,{applyTranslation:o,selected:c.selected}),l.drawingMode=s}),n||this.properties.marker.markClean()}updateLabelSelection(e){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])}updateLabelNodes(e){const{isHighlight:t=!1}=e,i=this.ctx.highlightManager?.getActiveHighlight(),n=this.makeLabelFormatterParams();e.labelSelection.each((s,o)=>{const r=dy(this,o,n,this.properties.label,t,i),{enabled:a,fontStyle:l,fontWeight:c,fontSize:u,fontFamily:d,color:p}=r;a&&o?.labelText?(s.fontStyle=l,s.fontWeight=c,s.fontSize=u,s.fontFamily=d,s.textAlign="center",s.textBaseline="bottom",s.text=o.labelText,s.x=o.point.x,s.y=o.point.y-10,s.fill=p,s.visible=!0,s.fillOpacity=this.getHighlightStyle(t,o.datumIndex).opacity??1,s.setBoxing(r)):s.visible=!1})}makeStylerParams(e,t){const{id:i}=this,{marker:n,lineDash:s,lineDashOffset:o,stroke:r,strokeOpacity:a,strokeWidth:l,xKey:c,yKey:u}=this.properties,d=IS(t??0);return{marker:{fill:n.fill,fillOpacity:n.fillOpacity,size:n.size,shape:n.shape,stroke:n.stroke,strokeOpacity:n.strokeOpacity,strokeWidth:n.strokeWidth,lineDash:n.lineDash,lineDashOffset:n.lineDashOffset},highlightState:d,highlighted:e,lineDash:s,lineDashOffset:o,seriesId:i,stroke:r,strokeOpacity:a,strokeWidth:l,xKey:c,yKey:u}}makeItemStylerParams(e,t,i,n){const{xKey:s,yKey:o}=this.properties,r=e.resolveColumnById(this,"xValue",t)[i],a=e.resolveColumnById(this,"yValueRaw",t)[i],l=e.getDomain(this,"xValue","key",t),c=e.getDomain(this,this.yCumulativeKey(t),"value",t),u=this.filterItemStylerFillParams(n.fill)??n.fill;return{..._E(r,a,s,o,l,c),xValue:r,yValue:a,...n,fill:u}}makeLabelFormatterParams(){const{xKey:e,xName:t,yKey:i,yName:n,legendItemName:s}=this.properties;return{xKey:e,xName:t,yKey:i,yName:n,legendItemName:s}}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:s,properties:o}=this,{xKey:r,xName:a,yKey:l,yName:c,tooltip:u,legendItemName:d}=o,p=s.x,f=s.y;if(!i||!n||!p||!f)return;const m=n.dataSources.get(this.id)?.data?.[e],v=i.resolveColumnById(this,"xValue",n)[e],b=i.resolveColumnById(this,"yValueRaw",n)[e];if(v==null)return;const C=this.getStyle(!1),x=this.makeItemStylerParams(i,n,e,C.marker),w=this.getMarkerStyle(this.properties.marker,{datumIndex:e,datum:m},x,{isHighlight:!1},C.marker);return this.formatTooltipWithContext(u,{heading:this.getAxisValueText(p,"tooltip",v,m,r,d),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(f,"tooltip",b,m,l,d)}]},{seriesId:t,datum:m,title:c,xKey:r,xName:a,yKey:l,yName:c,...w,...this.getModuleTooltipParams()})}legendItemSymbol(){const{stroke:e,strokeOpacity:t,strokeWidth:i,lineDash:n,marker:s}=this.getStyle(!1);return{marker:{...this.getMarkerStyle(this.properties.marker,{},void 0,{isHighlight:!1,checkForHighlight:!1},{size:s.size,shape:s.shape,fill:s.fill,fillOpacity:s.fillOpacity,stroke:s.stroke,strokeOpacity:s.strokeOpacity,strokeWidth:s.strokeWidth,lineDash:s.lineDash,lineDashOffset:s.lineDashOffset}),enabled:this.properties.marker.enabled},line:{stroke:e,strokeOpacity:t,strokeWidth:i,lineDash:n}}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:n}=this,{yKey:s,yName:o,title:r,legendItemName:a,showInLegend:l}=this.properties;return[{legendType:e,id:t,itemId:s,legendItemName:a,seriesId:t,enabled:n&&i.getItemEnabled({seriesId:t,itemId:s}),label:{text:a??r??o??s},symbol:this.legendItemSymbol(),hideInLegend:!l}]}updatePaths(e){this.updateLinePaths(e.paths,e.contextData)}updateLinePaths(e,t){const i=t.strokeData.spans,[n]=e;n.path.clear(),tH(n,i),n.markDirty("LineSeries")}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,annotationSelections:n,contextData:s,paths:o}=e,{animationManager:r}=this.ctx;this.updateLinePaths(o,s),rH(this,r,...o),mo([t],d0),sH(this,r,t),hn(this,"labels",r,i),hn(this,"annotations",r,...n)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateLinePaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{datumSelection:i,labelSelection:n,annotationSelections:s,contextData:o,paths:r,previousContextData:a}=e,[l]=r;if(o.visible===!1&&a?.visible===!1)return;this.resetDatumAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateLinePaths(r,o)},u=()=>{t.skipCurrentBatch(),c()};if(o==null||a==null){c(),u0(this,t,"added",i),aR(this,"path_properties",t,"add",l),hn(this,"labels",t,n),hn(this,"annotations",t,...s);return}if(o.crossFiltering!==a.crossFiltering){u();return}const d=mse(o,a,this.processedData?.reduced?.diff?.[this.id]);if(d===void 0){u();return}else if(d.status==="no-op")return;Xn(this.id,"path_properties",t,[l],d.stroke.pathProperties),d.status==="added"?this.updateLinePaths(r,o):d.status==="removed"?this.updateLinePaths(r,a):oR(this.id,"path_update",t,[l],d.stroke.path),d.hasMotion&&(u0(this,t,void 0,i),hn(this,"labels",t,n),hn(this,"annotations",t,...s)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateLinePaths(r,o)})}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new vs}getStyle(e,t){const{styler:i,marker:n,lineDash:s,lineDashOffset:o,stroke:r,strokeOpacity:a,strokeWidth:l}=this.properties,{size:c,shape:u,fill:d="transparent",fillOpacity:p}=n;let f={};if(i){const m=this.makeStylerParams(e,t),v=this.cachedCallWithContext(i,m)??{};f=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],v,{pick:!1})??{}}return f.marker??(f.marker={}),{lineDash:f.lineDash??s,lineDashOffset:f.lineDashOffset??o,stroke:f.stroke??r,strokeOpacity:f.strokeOpacity??a,strokeWidth:f.strokeWidth??l,marker:{fill:f.marker.fill??d,fillOpacity:f.marker.fillOpacity??p,shape:f.marker.shape??u,size:f.marker.size??c,lineDash:f.marker.lineDash??n.lineDash??s,lineDashOffset:f.marker.lineDashOffset??n.lineDashOffset??o,stroke:f.marker.stroke??n.stroke??r,strokeOpacity:f.marker.strokeOpacity??n.strokeOpacity??a,strokeWidth:f.marker.strokeWidth??n.strokeWidth??l}}}getFormattedMarkerStyle(e){const t=this.getStyle(!1),i=this.makeItemStylerParams(this.dataModel,this.processedData,e.datumIndex,t.marker);return this.getMarkerStyle(this.properties.marker,e,i,{isHighlight:!0},void 0,t)}computeFocusBounds(e){return ML(this,e)}hasItemStylers(){return this.properties.styler!=null||this.properties.marker.itemStyler!=null||this.properties.label.itemStyler!=null}};GD.className="LineSeries";GD.type="line";var Nse={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:e=>new GD(e),stackable:!0,predictAxis:BD,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{stroke:oL,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear"},marker:{shape:"circle",size:7,strokeWidth:{$isUserOption:["./stroke",1,0]},fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",kD],["image",Sh],["pattern",Ra]]},stroke:{$palette:"stroke"}},label:{...Ou,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:xg(),segmentation:aL}}},Ose={type:"series",name:"line",chartType:"cartesian",options:SL,create:e=>new GD(e)},LL=class extends zD{};LL.className="ScatterSeries";LL.type="scatter";var ZRe={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:e=>new LL(e),predictAxis:lH,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",kD],["image",Sh],["pattern",Ra]]},stroke:{$palette:"stroke"},fillOpacity:.8,maxRenderedItems:1e4,label:{...Ou,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}},tooltip:{range:{$path:["/tooltip/range","nearest"]},position:{anchorTo:{$path:["/tooltip/position/anchorTo","node"]}}},highlight:xg()}}},Fse={type:"series",name:"scatter",chartType:"cartesian",options:ATe,create:e=>new LL(e)},Bse=class E_{constructor(t,i,n,s){this.startAngle=t,this.endAngle=i,this.innerRadius=n,this.outerRadius=s}clone(){const{startAngle:t,endAngle:i,innerRadius:n,outerRadius:s}=this;return new E_(t,i,n,s)}equals(t){return this.startAngle===t.startAngle&&this.endAngle===t.endAngle&&this.innerRadius===t.innerRadius&&this.outerRadius===t.outerRadius}[bE](t,i){return new E_(this.startAngle*(1-i)+t.startAngle*i,this.endAngle*(1-i)+t.endAngle*i,this.innerRadius*(1-i)+t.innerRadius*i,this.outerRadius*(1-i)+t.outerRadius*i)}};function _se({startAngle:e,endAngle:t,innerRadius:i,outerRadius:n}){let s=1/0,o=1/0,r=-1/0,a=-1/0;const l=(c,u)=>{s=Math.min(c,s),o=Math.min(u,o),r=Math.max(c,r),a=Math.max(u,a)};return l(i*Math.cos(e),i*Math.sin(e)),l(i*Math.cos(t),i*Math.sin(t)),l(n*Math.cos(e),n*Math.sin(e)),l(n*Math.cos(t),n*Math.sin(t)),Jf(0,e,t)&&l(n,0),Jf(Math.PI*.5,e,t)&&l(0,n),Jf(Math.PI,e,t)&&l(-n,0),Jf(Math.PI*1.5,e,t)&&l(0,-n),new He(s,o,r-s,a-o)}function L_(e,t,i){const n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),{innerRadius:s,outerRadius:o}=i;if(i.startAngle===i.endAngle||n<Math.min(s,o)||n>Math.max(s,o))return!1;const r=GI(i.startAngle),a=GI(i.endAngle),l=Math.atan2(t,e);return r<a?l<=a&&l>=r:l<=a&&l>=-Math.PI||l>=r&&l<=Math.PI}function qRe(e,t,i,n,s,o,r,a,l,c){if(Number.isNaN(e)||Number.isNaN(t))return 0;[s,n]=[n,s];const u=(c-a)/(l-r),d=a-u*r,p=Math.pow(u,2)+1,f=2*(u*(d-t)-e),m=Math.pow(e,2)+Math.pow(d-t,2)-Math.pow(i,2),v=Math.pow(f,2)-4*p*m;if(v<0)return 0;const b=(-f+Math.sqrt(v))/2/p,C=(-f-Math.sqrt(v))/2/p;let x=0;for(const w of[b,C]){if(!(w>=Math.min(r,l)&&w<=Math.max(r,l)))continue;const T=u*w+d,L=w-e,I=T-t,R=Math.atan2(I,L);Jf(R,n,s)&&x++}return x}function m6(e,t){const{startAngle:i,endAngle:n,innerRadius:s,outerRadius:o}=t,r={x:o*Math.cos(i),y:o*Math.sin(i)},a={x:o*Math.cos(n),y:o*Math.sin(n)},l=s===0?{x:0,y:0}:{x:s*Math.cos(i),y:s*Math.sin(i)},c=s===0?{x:0,y:0}:{x:s*Math.cos(n),y:s*Math.sin(n)};return pw(e.start.x,e.start.y,e.end.x,e.end.y,r.x,r.y,l.x,l.y)||pw(e.start.x,e.start.y,e.end.x,e.end.y,a.x,a.y,c.x,c.y)||qRe(0,0,o,i,n,!0,e.start.x,e.start.y,e.end.x,e.end.y)}function QRe(e,t){const i={x:e.x,y:e.y},n={x:e.x+e.width,y:e.y},s={x:e.x,y:e.y+e.height},o={x:e.x+e.width,y:e.y+e.height};return m6({start:i,end:n},t)||m6({start:s,end:o},t)}function y6(e,t,i,n){if(i===0&&n===0)return 0;if(Math.asin(Math.abs(1*i)/(e+1*i))+Math.asin(Math.abs(1*n)/(e+1*n))-t<0)return 1;let o=0,r=1;for(let a=0;a<8;a+=1){const l=(o+r)/2;Math.asin(Math.abs(l*i)/(e+l*i))+Math.asin(Math.abs(l*n)/(e+l*n))-t<0?o=l:r=l}return o}var JRe=1e-6;function eg(e,t){return wE(e,t)<JRe?t:Is(e-t)+t}function nk(e,t,i=0){const s=Math.abs(t-e)>=2*Math.PI?2*Math.PI:Is(t-e);return e=eg(e,i),t=e+s,{startAngle:e,endAngle:t}}function sk(e,t,i,n,s,o){const r=Math.sin(o),a=Math.cos(o),l=e**2+t**2-i**2;let c,u,d,p;if(a>.5){const w=r/a,M=1+w**2,T=-2*(e+t*w),L=T**2-4*M*l;if(L<0)return;const I=(-T+Math.sqrt(L))/(2*M),R=(-T-Math.sqrt(L))/(2*M);c=I,u=I*w,d=R,p=R*w}else{const w=a/r,M=1+w**2,T=-2*(t+e*w),L=T**2-4*M*l;if(L<0)return;const I=(-T+Math.sqrt(L))/(2*M),R=(-T-Math.sqrt(L))/(2*M);c=I*w,u=I,d=R*w,p=R}const f=a,m=r,v=c*f+u*m,b=d*f+p*m,C=v>0?eg(Math.atan2(u-t,c-e),n):Number.NaN,x=b>0?eg(Math.atan2(p-t,d-e),n):Number.NaN;if(C>=n&&C<=s)return C;if(x>=n&&x<=s)return x}function ok(e,t,i,n,s,o){const r=Math.hypot(e,t),a=(r**2-i**2+o**2)/(2*r),l=r-a,c=Math.atan2(t,e),u=Math.acos(-l/i),d=eg(c+u,n),p=eg(c-u,n);if(d>=n&&d<=s)return d;if(p>=n&&p<=s)return p}var AF=class{constructor(e,t,i,n,s){this.cx=e,this.cy=t,this.r=i,this.a0=n,this.a1=s,this.a0>=this.a1&&(this.a0=Number.NaN,this.a1=Number.NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(e){return{x:this.cx+this.r*Math.cos(e),y:this.cy+this.r*Math.sin(e)}}clipStart(e){e==null||!this.isValid()||e<this.a0||(this.a0=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=Number.NaN,this.a1=Number.NaN))}clipEnd(e){e==null||!this.isValid()||e>this.a1||(this.a1=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=Number.NaN,this.a1=Number.NaN))}},Ro=class extends Ls{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(t){this.concentricEdgeInset=t,this.radialEdgeInset=t}set cornerRadius(t){this.startOuterCornerRadius=t,this.endOuterCornerRadius=t,this.startInnerCornerRadius=t,this.endInnerCornerRadius=t}computeBBox(){return _se(this).translate(this.centerX,this.centerY)}normalizedRadii(){const{concentricEdgeInset:t}=this;let{innerRadius:i,outerRadius:n}=this;return i=i>0?i+t:0,n=Math.max(n-t,0),{innerRadius:i,outerRadius:n}}normalizedClipSector(){const{clipSector:t}=this;if(t==null)return;const{startAngle:i,endAngle:n}=nk(this.startAngle,this.endAngle),{innerRadius:s,outerRadius:o}=this.normalizedRadii(),r=nk(t.startAngle,t.endAngle,i);return new Bse(Math.max(i,r.startAngle),Math.min(n,r.endAngle),Math.max(s,t.innerRadius),Math.min(o,t.outerRadius))}getAngleOffset(t){return t>0?this.radialEdgeInset/t:0}arc(t,i,n,s,o,r,a,l){if(t<=0)return;const{startAngle:c,endAngle:u}=nk(this.startAngle,this.endAngle),{innerRadius:d,outerRadius:p}=this.normalizedRadii(),f=this.normalizedClipSector();if(l&&d<=0)return;const m=l?this.getAngleOffset(d+t):this.getAngleOffset(p-t),v=a?c+m+i:u-m-i,b=l?d+t:p-t,C=b*Math.cos(v),x=b*Math.sin(v);if(f!=null&&(!a&&!(v>=c-1e-6&&v<=f.endAngle-1e-6)||a&&!(v>=f.startAngle+1e-6&&v<=u-1e-6)||l&&b<f.innerRadius-1e-6||!l&&b>f.outerRadius+1e-6))return;const w=new AF(C,x,t,n,s);if(f!=null){l?(w.clipStart(sk(C,x,t,n,s,f.endAngle)),w.clipEnd(sk(C,x,t,n,s,f.startAngle))):(w.clipStart(sk(C,x,t,n,s,f.startAngle)),w.clipEnd(sk(C,x,t,n,s,f.endAngle)));let R,O;if(a?(R=ok(C,x,t,n,s,f.innerRadius),O=ok(C,x,t,n,s,f.outerRadius)):(R=ok(C,x,t,n,s,f.outerRadius),O=ok(C,x,t,n,s,f.innerRadius)),w.clipStart(R),w.clipEnd(O),R!=null){const{x:_,y:B}=w.pointAt(R),V=eg(Math.atan2(B,_),c);a?r?.clipStart(V):o.clipEnd(V)}if(O!=null){const{x:_,y:B}=w.pointAt(O),V=eg(Math.atan2(B,_),c);a?o.clipStart(V):r?.clipEnd(V)}}if(f!=null){const{x:R,y:O}=w.pointAt((w.a0+w.a1)/2);if(!L_(R,O,f))return}const{x:M,y:T}=w.pointAt(a===l?w.a0:w.a1),L=eg(Math.atan2(T,M),c),I=l?r:o;return a?I?.clipStart(L):I?.clipEnd(L),w}updatePath(){const{path:i,centerX:n,centerY:s,concentricEdgeInset:o,radialEdgeInset:r}=this;let{startOuterCornerRadius:a,endOuterCornerRadius:l,startInnerCornerRadius:c,endInnerCornerRadius:u}=this;const{startAngle:d,endAngle:p}=nk(this.startAngle,this.endAngle),{innerRadius:f,outerRadius:m}=this.normalizedRadii(),v=this.normalizedClipSector(),b=p-d,C=b>=2*Math.PI-1e-6;if(i.clear(),f===0&&m===0||f>m)return;if((v?.startAngle??d)===(v?.endAngle??p))return;if(C&&this.clipSector==null&&a===0&&l===0&&c===0&&u===0){i.moveTo(n+m*Math.cos(d),s+m*Math.sin(d)),i.arc(n,s,m,d,p),f>o&&(i.moveTo(n+f*Math.cos(p),s+f*Math.sin(p)),i.arc(n,s,f,p,d,!0)),i.closePath();return}else if(this.clipSector==null&&Math.abs(f-m)<1e-6){i.arc(n,s,m,d,p,!1),i.arc(n,s,m,p,d,!0),i.closePath();return}const x=this.getAngleOffset(f),w=this.getAngleOffset(m);if(b<2*w)return;const T=(v?.innerRadius??f)>o,L=f<o||b<2*x,I=m-f,R=Math.max(a,c,l,u),O=R>0?Math.min(I/R,1):1;a*=O,l*=O,c*=O,u*=O;const _=y6(m,b-2*w,-a,-l);if(a*=_,l*=_,!L&&T){const be=y6(f,b-2*x,c,u);c*=be,u*=be}else c=0,u=0;const B=Math.max(a+c,l+u),V=B>0?Math.min(I/B,1):1;a*=V,l*=V,c*=V,u*=V;let j=0,K=0;const Y=a/(m-a),G=l/(m-l);if(Y>=0&&Y<1-1e-6)j=Math.asin(Y);else{j=b/2;const be=m/(1/Math.sin(j)+1);a=Math.min(be,a)}if(G>=0&&G<1-1e-6)K=Math.asin(G);else{K=b/2;const be=m/(1/Math.sin(K)+1);l=Math.min(be,l)}const $=Math.asin(c/(f+c)),W=Math.asin(u/(f+u)),Q=v?.outerRadius??m,q=this.getAngleOffset(Q),H=new AF(0,0,Q,d+q,p-q),U=v?.innerRadius??f,ee=this.getAngleOffset(U),ie=T?new AF(0,0,U,d+ee,p-ee):void 0;v!=null&&(H.clipStart(v.startAngle),H.clipEnd(v.endAngle),ie?.clipStart(v.startAngle),ie?.clipEnd(v.endAngle));const oe=this.arc(a,j,d-Math.PI*.5,d+j,H,ie,!0,!1),ae=this.arc(l,K,p-K,p+Math.PI*.5,H,ie,!1,!1),me=this.arc(u,W,p+Math.PI*.5,p+Math.PI-W,H,ie,!1,!0),xe=this.arc(c,$,d+Math.PI+$,d+Math.PI*1.5,H,ie,!0,!0);if(L){const be=b<Math.PI*.5?r*(1+Math.cos(b))/Math.sin(b):Number.NaN;let ge;be>0&&be<m?ge=Math.max(Math.hypot(r,be),f):ge=r,ge=Math.max(ge,f);const Re=d+b*.5;i.moveTo(n+ge*Math.cos(Re),s+ge*Math.sin(Re))}else if(!(xe?.isValid()===!0||ie?.isValid()===!0)){const be=d+b/2,ge=f*Math.cos(be),Re=f*Math.sin(be);i.moveTo(n+ge,s+Re)}if(oe?.isValid()===!0){const{cx:be,cy:ge,r:Re,a0:Ne,a1:Pe}=oe;i.arc(n+be,s+ge,Re,Ne,Pe)}if(H.isValid()){const{r:be,a0:ge,a1:Re}=H;i.arc(n,s,be,ge,Re)}if(ae?.isValid()===!0){const{cx:be,cy:ge,r:Re,a0:Ne,a1:Pe}=ae;i.arc(n+be,s+ge,Re,Ne,Pe)}if(!L){if(me?.isValid()===!0){const{cx:be,cy:ge,r:Re,a0:Ne,a1:Pe}=me;i.arc(n+be,s+ge,Re,Ne,Pe)}if(ie?.isValid()===!0){const{r:be,a0:ge,a1:Re}=ie;i.arc(n,s,be,Re,ge,!0)}if(xe?.isValid()===!0){const{cx:be,cy:ge,r:Re,a0:Ne,a1:Pe}=xe;i.arc(n+be,s+ge,Re,Ne,Pe)}}i.closePath()}isPointInPath(t,i){const{startAngle:n,endAngle:s,innerRadius:o,outerRadius:r}=this.clipSector??this;return L_(t-this.centerX,i-this.centerY,{startAngle:n,endAngle:s,innerRadius:Math.min(o,r),outerRadius:Math.max(o,r)})}};Ro.className="Sector";E([Le()],Ro.prototype,"centerX",2);E([Le()],Ro.prototype,"centerY",2);E([Le()],Ro.prototype,"innerRadius",2);E([Le()],Ro.prototype,"outerRadius",2);E([Le()],Ro.prototype,"startAngle",2);E([Le()],Ro.prototype,"endAngle",2);E([Pa({})],Ro.prototype,"clipSector",2);E([Le()],Ro.prototype,"concentricEdgeInset",2);E([Le()],Ro.prototype,"radialEdgeInset",2);E([Le()],Ro.prototype,"startOuterCornerRadius",2);E([Le()],Ro.prototype,"endOuterCornerRadius",2);E([Le()],Ro.prototype,"startInnerCornerRadius",2);E([Le()],Ro.prototype,"endInnerCornerRadius",2);var zse=class extends en{constructor(){super(...arguments),this.showInLegend=!1}};E([F],zse.prototype,"showInLegend",2);var fH=class extends xn{constructor(){super(...arguments),this.spacing=2}set(e,t){return super.set(e)}};E([F],fH.prototype,"text",2);E([F],fH.prototype,"spacing",2);var mH=class extends pt{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};E([F],mH.prototype,"fill",2);E([F],mH.prototype,"fillOpacity",2);var $S=class extends xn{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};E([F],$S.prototype,"offset",2);E([F],$S.prototype,"minAngle",2);E([F],$S.prototype,"minSpacing",2);E([F],$S.prototype,"maxCollisionOffset",2);E([F],$S.prototype,"avoidCollisions",2);var yH=class extends xn{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};E([F],yH.prototype,"positionOffset",2);E([F],yH.prototype,"positionRatio",2);var VD=class extends pt{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};E([F],VD.prototype,"colors",2);E([F],VD.prototype,"length",2);E([F],VD.prototype,"strokeWidth",2);E([F],VD.prototype,"itemStyler",2);var Ft=class extends Gl{constructor(){super(...arguments),this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=Object.values($n),this.strokes=Object.values(Ad),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new AS(fH),this.title=new zse,this.innerCircle=new mH,this.shadow=new Uu,this.calloutLabel=new $S,this.sectorLabel=new yH,this.calloutLine=new VD,this.tooltip=py()}};E([F],Ft.prototype,"angleKey",2);E([F],Ft.prototype,"angleName",2);E([F],Ft.prototype,"angleFilterKey",2);E([F],Ft.prototype,"radiusKey",2);E([F],Ft.prototype,"radiusName",2);E([F],Ft.prototype,"radiusMin",2);E([F],Ft.prototype,"radiusMax",2);E([F],Ft.prototype,"calloutLabelKey",2);E([F],Ft.prototype,"calloutLabelName",2);E([F],Ft.prototype,"sectorLabelKey",2);E([F],Ft.prototype,"sectorLabelName",2);E([F],Ft.prototype,"legendItemKey",2);E([F],Ft.prototype,"defaultColorRange",2);E([F],Ft.prototype,"defaultPatternFills",2);E([F],Ft.prototype,"fills",2);E([F],Ft.prototype,"strokes",2);E([F],Ft.prototype,"fillOpacity",2);E([F],Ft.prototype,"strokeOpacity",2);E([F],Ft.prototype,"lineDash",2);E([F],Ft.prototype,"lineDashOffset",2);E([F],Ft.prototype,"cornerRadius",2);E([F],Ft.prototype,"itemStyler",2);E([F],Ft.prototype,"rotation",2);E([F],Ft.prototype,"outerRadiusOffset",2);E([F],Ft.prototype,"outerRadiusRatio",2);E([F],Ft.prototype,"innerRadiusOffset",2);E([F],Ft.prototype,"innerRadiusRatio",2);E([F],Ft.prototype,"strokeWidth",2);E([F],Ft.prototype,"sectorSpacing",2);E([F],Ft.prototype,"hideZeroValueSectorsInLegend",2);E([F],Ft.prototype,"innerLabels",2);E([F],Ft.prototype,"title",2);E([F],Ft.prototype,"innerCircle",2);E([F],Ft.prototype,"shadow",2);E([F],Ft.prototype,"calloutLabel",2);E([F],Ft.prototype,"sectorLabel",2);E([F],Ft.prototype,"calloutLine",2);E([F],Ft.prototype,"tooltip",2);function ZT(e,t,i,n){const s=[i.convert(0),i.convert(1)],o=[n.convert(0),n.convert(1)],r=Math.PI/-2+bo(t),a=e?"initial":"update",l=({radius:m})=>({innerRadius:s[0],outerRadius:s[0]+(s[1]-s[0])*m}),c=({radius:m})=>({innerRadius:o[0],outerRadius:o[0]+(o[1]-o[0])*m});return{nodes:{toFn:(m,v,b,{prevLive:C})=>{let{startAngle:x,endAngle:w,innerRadius:M,outerRadius:T}=v;const{stroke:L,fill:I}=v.sectorFormat;if(b==="removed"&&C?(x=C.datum?.endAngle,w=C.datum?.endAngle):b==="removed"&&!C&&(x=r,w=r),b==="removed"){const R=l(v);M=R.innerRadius,T=R.outerRadius}return{startAngle:x,endAngle:w,outerRadius:T,innerRadius:M,stroke:L,fill:I}},fromFn:(m,v,b,{prevFromProps:C})=>{let{startAngle:x,endAngle:w,innerRadius:M,outerRadius:T}=m,{fill:L,stroke:I}=v.sectorFormat;if(b==="updated"&&m.previousDatum==null&&(b="added"),b==="unknown"||b==="added"&&!C?(x=r,w=r,M=v.innerRadius,T=v.outerRadius):b==="added"&&C&&(x=C.endAngle??r,w=C.endAngle??r,M=C.innerRadius??v.innerRadius,T=C.outerRadius??v.outerRadius),b==="added"&&!e){const R=c(v);M=R.innerRadius,T=R.outerRadius}return b==="updated"&&(L=m.fill??L,I=(typeof m.stroke=="string"?m.stroke:void 0)??I),{startAngle:x,endAngle:w,innerRadius:M,outerRadius:T,fill:L,stroke:I,phase:a}}},innerCircle:{fromFn:(m,v)=>({size:m.previousDatum?.radius??m.size??0,phase:a}),toFn:(m,v)=>({size:v.radius??0})}}}function Gse(e,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,stroke:t.sectorFormat.stroke}}function Vse(e,t){const i=t.y-e.centerY,n=t.x-e.centerX,s=Math.atan2(i,n),o=e.getItemNodes();for(const r of o)if(r.datum.missing!==!0&&Jf(s,r.startAngle,r.endAngle)){const a=Math.hypot(n,i);let l=0;return a<r.innerRadius?l=r.innerRadius-a:a>r.outerRadius&&(l=a-r.outerRadius),{datum:r.datum,distance:l}}}var Hse=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.FOREGROUND=1]="FOREGROUND",e[e.HIGHLIGHT=2]="HIGHLIGHT",e[e.LABEL=3]="LABEL",e))(Hse||{}),Wse={angle:["angleKey"],radius:["radiusKey"]},jse={angle:["angleName"],radius:["radiusName"]},vH=class extends qV{constructor({categoryKey:e,pickModes:t=[1,0],canHaveAxes:i=!1,animationResetFns:n,...s}){super({...s,categoryKey:e,pickModes:t,canHaveAxes:i}),this.directions=["angle","radius"],this.itemGroup=this.contentGroup.appendChild(new Mt),this.nodeData=[],this.itemSelection=Yo.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=Yo.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=Yo.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.animationResetFns=n,this.animationState=new oD("empty",{empty:{update:{target:"ready",action:o=>this.animateEmptyUpdateReady(o)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:o=>this.animateReadyHighlight(o),highlightMarkers:o=>this.animateReadyHighlightMarkers(o),resize:o=>this.animateReadyResize(o),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:o=>this.animateWaitingUpdateReady(o)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:o=>this.animateClearingUpdateEmpty(o)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}setZIndex(e){super.setZIndex(e),this.contentGroup.zIndex=[e,1],this.highlightGroup.zIndex=[e,2],this.labelGroup.zIndex=[e,3]}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}labelFactory(){const e=new ba;return e.pointerEvents=1,e}addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>this.onLegendItemClick(e)),this.ctx.eventsHub.on("legend:item-double-click",e=>this.onLegendItemDoubleClick(e)))}getInnerRadius(){return 0}computeLabelsBBox(e,t){return null}getShapeFillBBox(){const e=this.radius;return{series:new He(-e,-e,e*2,e*2),axis:new He(-e,-e,e*2,e*2)}}resetAllAnimation(){const{item:e,label:t}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&mo([this.itemSelection,this.highlightSelection],e),t&&mo([this.labelSelection],t),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(e){const{item:t}=this.animationResetFns??{};t&&mo([this.highlightSelection],t)}animateReadyHighlightMarkers(e){}animateReadyResize(e){this.resetAllAnimation()}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(e){const t=this.getNodeData()?.[e.datumIndex];if(t!==void 0)return this.itemSelection.select(i=>i instanceof Ls&&i.datum===t)[0]}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}isSeriesHighlighted(e,t){const{series:i,legendItemName:n,itemId:s}=e??{},o=typeof s=="number"?t?.[s]:void 0;return i===this||o!=null&&o===n}},eEe=class extends YE{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey,this.calloutLabelKey=n.properties.calloutLabelKey,this.sectorLabelKey=n.properties.sectorLabelKey}},HD=class extends vH{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{...Wse,sectorLabel:["sectorLabelKey"],calloutLabel:["calloutLabelKey"]},propertyNames:{...jse,sectorLabel:["sectorLabelName"],calloutLabel:["calloutLabelName"]},pickModes:[1,0],animationResetFns:{item:Gse,label:hy}}),this.properties=new Ft,this.phantomNodeData=void 0,this.backgroundGroup=new So({name:`${this.id}-background`,zIndex:0}),this.noVisibleData=!1,this.previousRadiusScale=new ym,this.radiusScale=new ym,this.phantomGroup=this.backgroundGroup.appendChild(new Mt({name:"phantom"})),this.phantomSelection=Yo.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new Mt({name:"pieCalloutLabels"})),this.calloutLabelSelection=new Yo(this.calloutLabelGroup,Mt),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new Mt({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new vs({shape:"circle"})),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new vs({shape:"circle"})),this.innerLabelsGroup=this.contentGroup.appendChild(new Mt({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new Mt({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=Yo.select(this.innerLabelsGroup,ba),this.innerCircleSelection=Yo.select(this.innerCircleGroup,()=>new vs({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=eEe,this.angleScale=new ym,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2),this.phantomGroup.opacity=.2,this.innerLabelsGroup.pointerEvents=1}get calloutNodeData(){return this.phantomNodeData??this.nodeData}get hasData(){return this.getHasData("angleValue")}attachSeries(e,t,i){super.attachSeries(e,t,i),e?.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.backgroundGroup.remove()}setZIndex(e){super.setZIndex(e),this.backgroundGroup.zIndex=[0,e]}nodeFactory(){const e=new Ro;return e.miterLimit=1e9,e}getSeriesDomain(e){return e==="angle"?this.angleScale.domain:this.radiusScale.domain}async processData(e){if(this.data==null)return;const{visible:t,id:i,ctx:{legendManager:n}}=this,{angleKey:s,angleFilterKey:o,radiusKey:r,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c}=this.properties,u=()=>(b,C)=>t&&n.getItemEnabled({seriesId:i,itemId:C})?b:0,d=!this.ctx.animationManager.isSkipped(),p=[],f=[];c?p.push(Qp(c,"category",{id:"legendItemKey"})):a?p.push(Qp(a,"category",{id:"calloutLabelKey"})):l&&p.push(Qp(l,"category",{id:"sectorLabelKey"}));const m=this.radiusScale.type,v=this.angleScale.type;r&&f.push(Vie(r,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax,missingValue:this.properties.radiusMax??1,processor:u}),Bi(r,m,{id:"radiusRaw",processor:u}),WT("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),a&&f.push(Bi(a,"category",{id:"calloutLabelValue"})),l&&f.push(Bi(l,"category",{id:"sectorLabelValue"})),c&&f.push(Bi(c,"category",{id:"legendItemValue"})),o&&f.push(S_(o,v,{id:"angleFilterValue",onlyPositive:!0,invalidValue:0,processor:u}),Bi(o,v,{id:"angleFilterRaw"}),WT("angleFilterValue",[0,1],0,0)),d&&this.processedData?.reduced?.animationValidation?.uniqueKeys&&p.length>0&&f.push(yL(this.id,this.processedData)),f.push(ND()),await this.requestDataModel(e,this.data,{props:[...p,S_(s,v,{id:"angleValue",onlyPositive:!0,invalidValue:0,processor:u}),Bi(s,v,{id:"angleRaw"}),WT("angleValue",[0,1],0,0),...f]});for(const b of this.processedData?.defs?.values??[]){const{id:C,missing:x,property:w}=b,M=pte(this,x);C!=="angleRaw"&&M>0&&fe.warnOnce(`no value was found for the key '${String(w)}' on ${M} data element${M>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:e=[],phantomNodeData:t}=this.createNodeData()??{};this.nodeData=e,this.phantomNodeData=t,this.nodeDataRefresh=!1}getProcessedDataValues(e,t){const i=e.resolveColumnById(this,"angleValue",t),n=e.resolveColumnById(this,"angleRaw",t),s=this.properties.angleFilterKey==null?void 0:e.resolveColumnById(this,"angleFilterValue",t),o=this.properties.angleFilterKey==null?void 0:e.resolveColumnById(this,"angleFilterRaw",t),r=this.properties.radiusKey?e.resolveColumnById(this,"radiusValue",t):void 0,a=this.properties.radiusKey?e.resolveColumnById(this,"radiusRaw",t):void 0,l=this.properties.calloutLabelKey?e.resolveColumnById(this,"calloutLabelValue",t):void 0,c=this.properties.sectorLabelKey?e.resolveColumnById(this,"sectorLabelValue",t):void 0,u=this.properties.legendItemKey?e.resolveColumnById(this,"legendItemValue",t):void 0;return{angleValues:i,angleRawValues:n,angleFilterValues:s,angleFilterRawValues:o,radiusValues:r,radiusRawValues:a,calloutLabelValues:l,sectorLabelValues:c,legendItemValues:u}}createNodeData(){const{id:e,processedData:t,dataModel:i,angleScale:n,ctx:{legendManager:s},visible:o}=this,{rotation:r,innerRadiusRatio:a}=this.properties;if(!i||t?.type!=="ungrouped")return;const l=this.getProcessedDataValues(i,t),{angleValues:c,angleRawValues:u,angleFilterValues:d,angleFilterRawValues:p,radiusValues:f,radiusRawValues:m,legendItemValues:v}=l,b=p?.some((I,R)=>I>u[R])??!1;let C=0,x=0;const w=[],M=p==null?void 0:[],T=t.dataSources.get(this.id)?.data??[],L=t.invalidData?.get(this.id);for(const[I,R]of T.entries()){if(L?.[I]===!0)continue;const O=b?d[I]:c[I],_=p!=null&&!b?Math.sqrt(p[I]/u[I]):1,B=n.convert(C)+bo(r);C=O,x+=O;const V=n.convert(C)+bo(r),j=Math.abs(V-B),K=B+j/2,Y=u[I],$=(f?.[I]??1)*_,W=m?.[I],Q=v?.[I],q=this.getLabels(I,R,K,j,l),H=this.getItemStyle({datum:R,datumIndex:I},!1),U={itemId:I,series:this,datum:R,datumIndex:I,angleValue:Y,midAngle:K,midCos:Math.cos(K),midSin:Math.sin(K),startAngle:B,endAngle:V,radius:$,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert($),0),sectorFormat:H,radiusValue:W,legendItemValue:Q,enabled:o&&s.getItemEnabled({seriesId:e,itemId:I}),focusable:!0,...q};w.push(U),M?.push({...U,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1})}return this.zerosumOuterRing.visible=x===0,this.zerosumInnerRing.visible=x===0&&a!=null&&a!==1&&a>0,{itemId:e,nodeData:w,labelData:w,phantomNodeData:M}}getLabelContent(e,t,i){const{id:n,ctx:s,properties:o}=this,{formatManager:r}=s,{calloutLabel:a,sectorLabel:l,calloutLabelKey:c,sectorLabelKey:u,legendItemKey:d}=o,p=i.calloutLabelValues?.[e],f=i.sectorLabelValues?.[e],m=i.legendItemValues?.[e],v={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},b={callout:void 0,sector:void 0,legendItem:void 0};return c&&(b.callout=this.getLabelText(p,t,c,"calloutLabel",[],a,{...v,value:p})),u&&(b.sector=this.getLabelText(f,t,u,"sectorLabel",[],l,{...v,value:f})),d!=null&&m!=null&&(b.legendItem=r.format(this.callWithContext.bind(this),{type:"category",value:m,datum:t,seriesId:n,legendItemName:void 0,key:d,source:"legend-label",property:"legendItem",domain:[],boundSeries:this.getFormatterContext("legendItem")})??m),b}getLabels(e,t,i,n,s){const{properties:o}=this,{calloutLabel:r,sectorLabel:a,legendItemKey:l}=o,c=this.getLabelContent(e,t,s),u={};return r.enabled&&c.callout&&n>=bo(r.minAngle)&&(u.calloutLabel={...this.getTextAlignment(i),text:c.callout,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),a.enabled&&c.sector&&(u.sectorLabel={text:c.sector}),l&&c.legendItem&&(u.legendItem={key:l,text:c.legendItem}),u}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"top"},{textAlign:"right",textBaseline:"middle"}],i=GI(e),n=-.75*Math.PI,s=i-n,o=Math.floor(s/(Math.PI/2)),r=Rxe(o,t.length);return t[r]}getFillParams(e,t,i){if(!(!Ol(e)||e.bounds==="item"))return{centerX:0,centerY:0,innerRadius:t,outerRadius:i}}getItemStyle({datum:e,datumIndex:t},i,n,s){const{fills:o,strokes:r,itemStyler:a}=this.properties,l=r[t],c=o[t],{fill:u,fillOpacity:d,stroke:p,strokeWidth:f,strokeOpacity:m,lineDash:v,lineDashOffset:b,cornerRadius:C,opacity:x}=oi(this.getHighlightStyle(i,t,n,s),{fill:c,stroke:l},this.properties);let w;return a&&(w=this.cachedDatumCallback(this.getDatumId(t)+(i?"-highlight":"-hide"),()=>{const M=this.makeItemStylerParams(e,t,i,{fill:u,fillOpacity:d,stroke:p,strokeWidth:f,strokeOpacity:m,lineDash:v,lineDashOffset:b,cornerRadius:C});return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.callWithContext(a,M),{proxyPaths:{fill:["fills",`${t}`],stroke:["strokes",`${t}`]}})})),{fill:w?.fill??u,fillOpacity:w?.fillOpacity??d,stroke:w?.stroke??p,strokeWidth:w?.strokeWidth??f,strokeOpacity:w?.strokeOpacity??m,lineDash:w?.lineDash??v,lineDashOffset:w?.lineDashOffset??b,cornerRadius:w?.cornerRadius??C,opacity:x}}makeItemStylerParams(e,t,i,n){const{angleKey:s,radiusKey:o,calloutLabelKey:r,sectorLabelKey:a,legendItemKey:l}=this.properties,c=this.filterItemStylerFillParams(n.fill)??n.fill;return{datum:e,angleKey:s,radiusKey:o,calloutLabelKey:r,sectorLabelKey:a,legendItemKey:l,...n,fill:c,highlighted:i,highlightState:this.getHighlightStateString(this.ctx.highlightManager?.getActiveHighlight(),i,t),seriesId:this.id}}getCalloutLineStyle(e,t){const{properties:i}=this;let n={};if(i.calloutLine.itemStyler){const s=this.getHighlightStateString(this.ctx.highlightManager?.getActiveHighlight(),t,e.datumIndex),o={angleKey:i.angleKey,angleName:i.angleName??i.angleKey,calloutLabelKey:i.calloutLabelKey,calloutLabelName:i.calloutLabelName??i.calloutLabelKey,datum:e.datum,highlighted:t,highlightState:s,legendItemKey:i.legendItemKey,radiusKey:i.radiusKey,radiusName:i.radiusName??i.radiusKey,sectorLabelKey:i.sectorLabelKey,sectorLabelName:i.sectorLabelName??i.sectorLabelKey,seriesId:this.id};n=this.cachedCallWithContext(i.calloutLine.itemStyler,o)??{}}return{length:n.length??i.calloutLine.length,strokeWidth:n.strokeWidth??i.calloutLine.strokeWidth,color:n.color,colors:i.calloutLine.colors}}getInnerRadius(){const{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:i=0}=this.properties,n=e*t+i;return n===e||n<0?0:n}getOuterRadius(){const{outerRadiusRatio:e,outerRadiusOffset:t}=this.properties;return Math.max(this.radius*e+t,0)}updateRadiusScale(e){const t=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t);const i=n=>({...n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=this.phantomNodeData?.map(i)}getTitleTranslationY(){const e=Math.max(0,this.radiusScale.range[1]);if(e===0)return Number.NaN;const i=2+(this.properties.title?.spacing??0),n=Math.max(0,-e);return-e-i-n}update({seriesRect:e}){const{title:t}=this.properties,i={seriesRectWidth:e?.width,seriesRectHeight:e?.height},n=Nu(this.nodeDataDependencies,i)!=null;if(n&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){const s=this.getTitleTranslationY();t.node.y=Number.isFinite(s)?s:0;const o=t.node.getBBox();t.node.visible=t.enabled&&Number.isFinite(s)&&!this.bboxIntersectsSurroundingSeries(o)}for(const s of[this.zerosumInnerRing,this.zerosumOuterRing])s.fillOpacity=0,s.stroke=this.properties.calloutLabel.color,s.strokeWidth=1,s.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(e)}updateTitleNodes(){const{oldTitle:e}=this,{title:t}=this.properties;e!==t&&(e&&e.node.remove(),t&&(t.node.textBaseline="bottom",this.labelGroup?.appendChild(t.node)),this.oldTitle=t)}updateNodeMidPoint(){const e=t=>{const i=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,i),y:t.midSin*Math.max(0,i)}};for(const t of this.nodeData)e(t);if(this.phantomNodeData)for(const t of this.phantomNodeData)e(t)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,calloutLabelSelection:n,labelSelection:s,innerLabelsSelection:o}=this,r=this.nodeData.map(l=>({...l,sectorFormat:{...l.sectorFormat}})),a=(l,c)=>{l.update(c,void 0,u=>this.getDatumId(u.datumIndex)),this.ctx.animationManager.isSkipped()&&l.cleanup()};a(e,this.nodeData),a(t,r),a(i,this.phantomNodeData??[]),n.update(this.calloutNodeData,l=>{const c=new Ma;c.tag=0,c.pointerEvents=1,l.appendChild(c);const u=new ba;u.tag=1,u.pointerEvents=1,l.appendChild(u)}),s.update(this.nodeData),o.update(this.properties.innerLabels,l=>{l.pointerEvents=1})}updateInnerCircleSelection(){const{innerCircle:e}=this.properties;let t=0;const i=this.getInnerRadius();if(i>0){const s=Math.min(i,this.getOuterRadius());t=Math.ceil(s*2+1)}const n=e?[{radius:t}]:[];this.innerCircleSelection.update(n)}updateNodes(e){const t=this.ctx.highlightManager.getActiveHighlight(),{visible:i,dataModel:n,processedData:s}=this;if(this.backgroundGroup.visible=i,this.contentGroup.visible=i,!n||!s)return;const{legendItemValues:o}=this.getProcessedDataValues(n,s),r=this.isSeriesHighlighted(t,o),a=this.ctx.chartService.highlight?.drawingMode??"overlay";this.highlightGroup.visible=i&&r,this.labelGroup.visible=i,this.innerCircleSelection.each((f,{radius:m})=>{f.setProperties({fill:this.properties.innerCircle?.fill,opacity:this.properties.innerCircle?.fillOpacity,size:m})});const l=this.radiusScale.range[0],c=this.radiusScale.range[1],u=this.getShapeFillBBox(),d=this.ctx.animationManager.isSkipped(),p=(f,m,v,b,C)=>{const x=this.getItemStyle(m,b,void 0,o);m.sectorFormat.fill=x.fill,m.sectorFormat.stroke=x.stroke,d&&(f.startAngle=m.startAngle,f.endAngle=m.endAngle,f.innerRadius=m.innerRadius,f.outerRadius=m.outerRadius),(b||d)&&(f.fill=x.fill,f.stroke=x.stroke);const w=this.getFillParams(x.fill,l,c);Yd(f,x,u,w),f.drawingMode=C,f.cornerRadius=x.cornerRadius,f.fillShadow=this.properties.shadow;const M=Math.max((this.properties.sectorSpacing+(x.stroke==null?0:x.strokeWidth))/2,0);f.inset=M,f.lineJoin=this.properties.sectorSpacing>=0||M>0?"miter":"round"};this.itemSelection.each((f,m,v)=>p(f,m,v,!1,"overlay")),this.phantomSelection.each((f,m,v)=>p(f,m,v,!1,"overlay")),this.highlightSelection.each((f,m,v)=>{p(f,m,v,!0,a),f.visible=m.itemId===t?.itemId}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{strokes:e}=this.properties,{offset:t}=this.properties.calloutLabel;for(const i of this.calloutLabelSelection.selectByTag(0)){const n=i.closestDatum(),{length:s,strokeWidth:o,color:r,colors:a}=this.getCalloutLineStyle(n,!1),l=o,c=g0e(a)?a:e,{calloutLabel:u,outerRadius:d,datumIndex:p}=n;if(u?.text&&!u.hidden&&d!==0){i.visible=!0,i.strokeWidth=l,i.stroke=r??c[p%c.length],i.strokeOpacity=this.getHighlightStyle(!1,n.datumIndex).opacity??1,i.fill=void 0;const f=n.midCos*d,m=n.midSin*d;let v=n.midCos*(d+s),b=n.midSin*(d+s);if((u.collisionTextAlign??u.collisionOffsetY!==0)&&u.box!=null){const x=u.box;let w=v,M=b;v<x.x?w=x.x:v>x.x+x.width&&(w=x.x+x.width),b<x.y?M=x.y:b>x.y+x.height&&(M=x.y+x.height);const T=w-v,L=M-b,I=Math.sqrt(Math.pow(T,2)+Math.pow(L,2)),R=I-t;R>0&&(v=v+T*R/I,b=b+L*R/I)}i.x1=f,i.y1=m,i.x2=v,i.y2=b}else i.visible=!1}}getLabelOverflow(e,t){const i=-this.centerX,n=i+t.width,s=-this.centerY,o=s+t.height,r=1;let a=e.width;e.x+r<i?a=(e.x+e.width-i)/e.width:e.x+e.width-r>n&&(a=(n-e.x)/e.width);const l=e.y+r<s||e.y+e.height-r>o,c=this.bboxIntersectsSurroundingSeries(e);return{maxWidth:a,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:c}}bboxIntersectsSurroundingSeries(e){const{surroundingRadius:t}=this;if(t==null)return!1;const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],n=t**2;return i.some(s=>s.x**2+s.y**2>n)}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t}=this.properties,{offset:i,minSpacing:n}=t,s=e.convert(0),o=b=>!b.calloutLabel||b.outerRadius===0,r=this.calloutNodeData,a=r.filter(b=>!o(b));for(const b of a){const C=b.calloutLabel;C!=null&&(C.hidden=!1,C.collisionTextAlign=void 0,C.collisionOffsetY=0)}if(a.length<=1)return;const l=a.filter(b=>b.midCos<0).sort((b,C)=>b.midSin-C.midSin),c=a.filter(b=>b.midCos>=0).sort((b,C)=>b.midSin-C.midSin),u=a.filter(b=>b.midSin<0&&b.calloutLabel?.textAlign==="center").sort((b,C)=>b.midCos-C.midCos),d=a.filter(b=>b.midSin>=0&&b.calloutLabel?.textAlign==="center").sort((b,C)=>b.midCos-C.midCos),p=b=>{const C=b.calloutLabel;if(C==null)return He.zero.clone();const x=this.getLabelStyle(b,t),w=nS(x),M=this.getCalloutLineStyle(b,!1).length,T=b.outerRadius+M+i,L=b.midCos*T,I=b.midSin*T+C.collisionOffsetY,R=C.collisionTextAlign??C.textAlign,O=C.textBaseline;return ba.measureBBox(C.text,L,I,{font:this.properties.calloutLabel,textAlign:R,textBaseline:O}).grow(w)},f=(b,C,x)=>{const w=p(b).grow(n/2),M=p(C).grow(n/2);w.x<M.x+M.width&&w.x+w.width>M.x&&(x==="to-top"?w.y<M.y+M.height:w.y+w.height>M.y)&&(C.calloutLabel.collisionOffsetY=x==="to-top"?w.y-M.y-M.height:w.y+w.height-M.y)},m=b=>{const C=b.slice().sort((w,M)=>Math.abs(w.midSin)-Math.abs(M.midSin))[0],x=b.indexOf(C);for(let w=x-1;w>=0;w--){const M=b[w+1],T=b[w];f(M,T,"to-top")}for(let w=x+1;w<b.length;w++){const M=b[w-1],T=b[w];f(M,T,"to-bottom")}},v=b=>{const C=a.some(I=>I.calloutLabel.collisionOffsetY!==0),x=b.map(I=>p(I)),w=x.map(I=>I.clone().grow(n/2));let M=!1;for(let I=0;I<w.length&&!M;I++){const R=w[I];for(let O=I+1;O<b.length;O++){const _=w[O];if(R.collidesBBox(_)){M=!0;break}}}const T=r.map(I=>{const{startAngle:R,endAngle:O,outerRadius:_}=I;return{startAngle:R,endAngle:O,innerRadius:s,outerRadius:_}}),L=x.some(I=>T.some(R=>QRe(I,R)));if(!(!M&&!C&&!L))for(const I of b){if(I.calloutLabel.textAlign!=="center")continue;const R=I.calloutLabel;I.midCos<0?R.collisionTextAlign="right":I.midCos>0?R.collisionTextAlign="left":R.collisionTextAlign="center"}};m(l),m(c),v(u),v(d)}getLabelStyle(e,t){const i=this.ctx.highlightManager?.getActiveHighlight();return dy(this,e,this.properties,t,!1,i)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i}=this.properties,n=new ba;for(const s of this.calloutLabelSelection.selectByTag(1)){const o=s.closestDatum(),r=o.calloutLabel,a=t.convert(o.radius),l=Math.max(0,a);if(!r?.text||l===0||r.hidden){s.visible=!1;continue}const c=this.getLabelStyle(o,i),u=this.getCalloutLineStyle(o,!1).length,d=l+u+i.offset,p=o.midCos*d,f=o.midSin*d+r.collisionOffsetY,m={textAlign:r.collisionTextAlign??r.textAlign,textBaseline:r.textBaseline};n.text=r.text,n.x=p,n.y=f,n.setFont(c),n.setAlign(m),n.setBoxing(c);const v=n.getBBox();let b=r.text,C=!0;if(i.avoidCollisions){const{maxWidth:x,hasVerticalOverflow:w}=this.getLabelOverflow(v,e);if(v.width>x){const M={font:this.properties.calloutLabel,textWrap:"on-space",overflow:"hide",maxWidth:x};b=mE(r.text,M)}C=!w}s.text=b,s.x=p,s.y=f,s.setFont(c),s.setAlign(m),s.setBoxing(c),s.fill=c.color,s.fillOpacity=this.getHighlightStyle(!1,o.datumIndex).opacity??1,s.visible=C}}computeLabelsBBox(e,t){const{calloutLabel:i}=this.properties,{offset:n,maxCollisionOffset:s,minSpacing:o}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const r=[],a=new ba;let l;const{title:c}=this.properties;if(c?.text&&c.enabled){const u=this.getTitleTranslationY();Number.isFinite(u)&&(a.text=c.text,a.x=0,a.y=u,a.setFont(c),a.setAlign({textBaseline:"bottom",textAlign:"center"}),l=a.getBBox(),r.push(l))}for(const u of this.calloutNodeData){const d=u.calloutLabel;if(!d||u.outerRadius===0)continue;const p=this.getLabelStyle(u,i),f=this.getCalloutLineStyle(u,!1).length,m=u.outerRadius+f+n,v=u.midCos*m,b=u.midSin*m+d.collisionOffsetY;a.text=d.text,a.x=v,a.y=b,a.setFont(p),a.setAlign({textAlign:d.collisionTextAlign??d.textAlign,textBaseline:d.textBaseline}),a.setBoxing(p);const C=a.getBBox();if(d.box=C,Math.abs(d.collisionOffsetY)>s){d.hidden=!0;continue}if(l){const x=-this.centerY,w=new He(l.x-o,x,l.width+2*o,l.y+l.height+o-x);if(C.collidesBBox(w)){d.hidden=!0;continue}}if(e.hideWhenNecessary){const{maxWidth:x,hasVerticalOverflow:w,hasSurroundingSeriesOverflow:M}=this.getLabelOverflow(C,t),T=C.width>x;if(w||T||M){d.hidden=!0;continue}}d.hidden=!1,r.push(C)}return r.length===0?null:He.merge(r)}updateSectorLabelNodes(){const{properties:e}=this,{positionOffset:t,positionRatio:i}=this.properties.sectorLabel,n=this.radiusScale.convert(0),s=n<=0&&this.ctx.legendManager.getData(this.id)?.filter(a=>a.enabled).length===1,o={textAlign:"center",textBaseline:"middle"},r=(a,l)=>{const{outerRadius:c,startAngle:u,endAngle:d}=l;let p=!1;if(l.sectorLabel&&c!==0){const f=this.getLabelStyle(l,e.sectorLabel),m=n*(1-i)+c*i+t;a.fill=f.color,a.fillOpacity=this.getHighlightStyle(!1,l.datumIndex).opacity??1,a.text=l.sectorLabel.text,s?(a.x=0,a.y=0):(a.x=l.midCos*m,a.y=l.midSin*m),a.setFont(f),a.setAlign(o),a.setBoxing(f);const v=a.getBBox(),b=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]],C={startAngle:u,endAngle:d,innerRadius:n,outerRadius:c};b.every(([x,w])=>L_(x,w,C))&&(p=!0)}a.visible=p};this.labelSelection.each(r)}updateInnerLabelNodes(){const e=[],t=[];this.innerLabelsSelection.each((u,d)=>{const{fontStyle:p,fontWeight:f,fontSize:m,fontFamily:v,color:b}=d;u.fontStyle=p,u.fontWeight=f,u.fontSize=m,u.fontFamily=v,u.text=d.text,u.x=0,u.y=0,u.fill=b,u.textAlign="center",e.push(u.getBBox()),t.push(d.spacing)});const i=u=>u===0?0:t[u],n=u=>u===t.length-1?0:t[u],s=e.reduce((u,d)=>Math.max(u,d.width),0),o=e.reduce((u,d,p)=>u+d.height+i(p)+n(p),0),r=this.getInnerRadius(),l=Math.sqrt(Math.pow(s/2,2)+Math.pow(o/2,2))<=(r>0?r:this.getOuterRadius()),c=[];for(let u=0,d=-o/2;u<e.length;u++){const f=e[u].height+d+i(u);c.push(f),d=f+n(u)}this.innerLabelsSelection.each((u,d,p)=>{u.visible=l,Array.isArray(u.text)?u.y=c[p]-e[p].height:u.y=c[p]})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}pickNodeClosestDatum(e){return Vse(this,e)}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s,ctx:{formatManager:o}}=this,{legendItemKey:r,calloutLabelKey:a,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:u,angleKey:d,angleName:p,radiusKey:f,radiusName:m,tooltip:v}=s,b=this.properties.title.node.getPlainText();if(!i||!n)return;const C=n.dataSources.get(this.id)?.data?.[e],x=this.getProcessedDataValues(i,n),{angleRawValues:w}=x,M=w[e],T=this.getLabelContent(e,C,x),L=T.legendItem??T.callout??T.sector??p,I=i.getDomain(this,"angleRaw","value",n),R=o.format(this.callWithContext.bind(this),{type:"number",value:M,datum:C,seriesId:t,legendItemName:void 0,key:d,source:"tooltip",property:"angle",domain:I,boundSeries:this.getFormatterContext("angle"),fractionDigits:void 0})??eS(M,3);return this.formatTooltipWithContext(v,{title:b,symbol:this.legendItemSymbol(e),data:[{label:Gt(L),fallbackLabel:d,value:R}]},{seriesId:t,datum:C,title:p,legendItemKey:r,calloutLabelKey:a,calloutLabelName:l,sectorLabelKey:c,sectorLabelName:u,angleKey:d,angleName:p,radiusKey:f,radiusName:m,...this.getItemStyle({datum:C,datumIndex:e},!1)})}legendItemSymbol(e){const t=this.processedData?.dataSources.get(this.id)?.data?.[e],i=this.getItemStyle({datum:t,datumIndex:e},!1),{fillOpacity:n,strokeOpacity:s,strokeWidth:o,lineDash:r,lineDashOffset:a}=this.properties;let{fill:l}=i;const{stroke:c}=i;return Ol(l)&&(l={...l,gradient:"linear",rotation:0,reverse:!1}),{marker:{fill:l,stroke:c,fillOpacity:n,strokeOpacity:s,strokeWidth:o,lineDash:r,lineDashOffset:a}}}getLegendData(e){const{visible:t,processedData:i,dataModel:n,id:s,ctx:{legendManager:o}}=this;if(!n||!i||e!=="category")return[];const{angleKey:r,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c,showInLegend:u}=this.properties;if(!c&&(!a||a===r)&&(!l||l===r))return[];const d=this.getProcessedDataValues(n,i),{angleRawValues:p}=d,f=this.properties.title?.showInLegend&&this.properties.title.text,m=[],v=this.properties.hideZeroValueSectorsInLegend,b=i.dataSources.get(this.id)?.data,C=i.invalidData?.get(this.id);for(let x=0;x<i.input.count;x++){const w=b?.[x],M=p[x];if(C?.[x]===!0||v&&M===0)continue;const T=[];f&&T.push(f);const L=this.getLabelContent(x,w,d);c&&L.legendItem!==void 0?T.push(L.legendItem):a&&a!==r&&L.callout!==void 0?T.push(L.callout):l&&l!==r&&L.sector!==void 0&&T.push(L.sector),T.length!==0&&m.push({legendType:"category",id:s,datum:w,itemId:x,seriesId:s,hideToggleOtherSeries:!0,enabled:t&&o.getItemEnabled({seriesId:s,itemId:x}),label:{text:T.map(I=>Gt(I)).join(" - ")},symbol:this.legendItemSymbol(x),legendItemName:c==null?void 0:w[c],hideInLegend:!u})}return m}setLegendState(e){const{id:t,ctx:{legendManager:i,updateService:n}}=this;for(const[s,o]of e.entries())i.toggleItem(o,t,s);i.update(),n.update(5)}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=ZT(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Xn(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(n,s)=>this.getDatumId(s.datumIndex)),Xn(this.id,"innerCircle",t,[this.innerCircleSelection],i.innerCircle),hn(this,"callout",t,this.calloutLabelSelection),hn(this,"sector",t,this.labelSelection),hn(this,"inner",t,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,processedData:n,radiusScale:s,previousRadiusScale:o}=this,{animationManager:r}=this.ctx,a=n?.reduced?.diff?.[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=(a?.moved.size??0)===0,c=(n?.defs.keys.length??0)>0,u=n?.reduced?.animationValidation?.uniqueKeys??!0;(!l||!c||!u)&&this.ctx.animationManager.skipCurrentBatch();const d=!this.nodeData.some(f=>f.enabled),p=ZT(!1,this.properties.rotation,s,o);Xn(this.id,"nodes",r,[e,t,i],p.nodes,(f,m)=>this.getDatumId(m.datumIndex),a),Xn(this.id,"innerCircle",r,[this.innerCircleSelection],p.innerCircle),hn(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),hn(this,"sector",this.ctx.animationManager,this.labelSelection),this.noVisibleData!==d&&(this.noVisibleData=d,hn(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:n,previousRadiusScale:s}=this,{animationManager:o}=this.ctx,r=ZT(!1,this.properties.rotation,n,s);Xn(this.id,"nodes",o,[e,t,i],r.nodes,(a,l)=>this.getDatumId(l.datumIndex)),Xn(this.id,"innerCircle",o,[this.innerCircleSelection],r.innerCircle),$T(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),$T(this,"sector",this.ctx.animationManager,this.labelSelection),$T(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(e){const{dataModel:t,processedData:i}=this;if(!t||!i)return`${e}`;const{calloutLabelKey:n,sectorLabelKey:s,legendItemKey:o}=this.properties;if(!i.reduced?.animationValidation?.uniqueKeys)return`${e}`;if(o){const r=t.resolveKeysById(this,"legendItemKey",i);return Xo(r[e])}else if(n){const r=t.resolveKeysById(this,"calloutLabelKey",i);return Xo(r[e])}else if(s){const r=t.resolveKeysById(this,"sectorLabelKey",i);return Xo(r[e])}return`${e}`}hasItemStylers(){return!(this.properties.itemStyler==null&&this.properties.calloutLabel.itemStyler==null&&this.properties.sectorLabel.itemStyler==null&&this.properties.innerLabels.every(e=>e.itemStyler==null))}};HD.className="DonutSeries";HD.type="donut";var P_={series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:rc.LARGE},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{...Ou,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{...Ou,enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"chartBackgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2,colors:{$map:[{$if:[{$or:[{$isGradient:{$value:"$1"}},{$isPattern:{$value:"$1"}},{$isImage:{$value:"$1"}}]},{$path:["../../strokes/$index",{$ref:"foregroundColor"}]},{$value:"$1"}]},{$if:[{$eq:[{$path:"../strokeWidth"},0]},{$path:"../fills"},{$path:"../strokes"}]}]}},fills:{$applyCycle:[{$cacheMax:{$size:{$path:["./data",{$path:"/data"}]}}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",Sie],["pattern",Ra],["image",Sh]]}]},strokes:{$applyCycle:[{$cacheMax:{$size:{$path:["./data",{$path:"/data"}]}}},{$palette:"strokes"}]},fillOpacity:1,strokeOpacity:1,strokeWidth:{$isUserOption:["./strokes/0",2,0]},lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:ty,xOffset:3,yOffset:3,blur:5},highlight:xg()},legend:{enabled:!0}},tEe={...P_,series:{...P_.series,innerRadiusRatio:{$if:[{$eq:[{$path:["./innerRadiusOffset",void 0]},void 0]},.7,void 0]},innerLabels:{$apply:{...Ou,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:2}},highlight:xie()}},iEe={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:e=>new HD(e),themeTemplate:tEe},nEe={type:"series",name:"donut",chartType:"polar",options:kTe,create:e=>new HD(e)},PL=class extends HD{};PL.className="PieSeries";PL.type="pie";var sEe={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:e=>new PL(e),themeTemplate:P_},oEe={type:"series",name:"pie",chartType:"polar",options:oy,create:e=>new PL(e)};function rEe(){Du.register(Xne,ZIe,XIe,VIe,ARe,Tse,WRe,Nse,ZRe,iEe,sEe,jRe);for(const e of[Oa,OS,wh,ny,sy,Ag])fm.register(e.type,{moduleFactory:t=>new e(t)})}function aEe(){for(const e of Du.modules){if(e.packageType==="enterprise"&&!HMe(e)&&fe.errorOnce("Unexpected enterprise module registered: "+e.identifier),e.type==="root"&&e.themeTemplate)for(const t of e.chartTypes)n_.set(t,e.themeTemplate);if(e.type==="series"){if(e.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${e.identifier}`);vl.register(e.identifier,e)}if(e.type==="series-option"&&e.themeTemplate)for(const t of e.seriesTypes)vl.setThemeTemplate(t,e.themeTemplate);if(e.type==="axis-option"&&e.themeTemplate)for(const t of e.axisTypes){const i=fm.getThemeTemplate(t),n=oi(e.themeTemplate,i);fm.setThemeTemplate(t,n)}e.type==="axis"&&fm.register(e.identifier,e),e.type==="legend"&&iV.register(e.identifier,e)}if(Du.hasEnterpriseModules()){const e=WMe();e.length>0&&fe.errorOnce("Enterprise modules expected but not registered: ",e)}}var Vr=Symbol("IGNORED_PROP");function Ll(e,t){const i={};for(const n of Object.keys(t)){const s=t[n];s!==Vr&&Object.hasOwn(e,n)&&(i[n]=s)}return i}function Use(e){const{enabled:t,mode:i,showArrow:n,range:s,position:o,pagination:r,delay:a,wrapping:l,interaction:c,renderer:u,...d}=e,p=Ll(e,{enabled:t,showArrow:n,range:s,position:o,interaction:c,renderer:u,...d});return{chartTooltipOptions:Ll(e,{enabled:Vr,showArrow:Vr,range:Vr,position:Vr,mode:i,pagination:r,delay:a,wrapping:l,...d}),seriesTooltipOptions:p}}function lEe(e){const{animation:t,background:i,container:n,contextMenu:s,context:o,footnote:r,height:a,listeners:l,locale:c,minHeight:u,minWidth:d,overrideDevicePixelRatio:p,padding:f,subtitle:m,theme:v,title:b,width:C,type:x,cursor:w,nodeClickRange:M,tooltip:T={},value:L,scale:I={},startAngle:R,endAngle:O,highlightStyle:_,highlight:B,segmentation:V,bar:j,needle:K,targets:Y,outerRadius:G,innerRadius:$,outerRadiusRatio:W,innerRadiusRatio:Q,cornerRadius:q,cornerMode:H,label:U,secondaryLabel:ee,spacing:ie,...oe}=e,{chartTooltipOptions:ae,seriesTooltipOptions:me}=Use(T),xe=Ll(e,{animation:t,background:i,container:n,contextMenu:s,context:o,footnote:r,height:a,listeners:l,locale:c,minHeight:u,minWidth:d,overrideDevicePixelRatio:p,padding:f,subtitle:m,theme:v,title:b,tooltip:ae,width:C}),be=Ll(e,{needle:K==null?Vr:{enabled:!0,...K},startAngle:R,endAngle:O,scale:I,type:x,cursor:w,context:o,nodeClickRange:M,tooltip:me,value:L,highlightStyle:_,highlight:B,segmentation:V,bar:j,targets:Y,outerRadius:G,innerRadius:$,outerRadiusRatio:W,innerRadiusRatio:Q,cornerRadius:q,cornerMode:H,label:U,secondaryLabel:ee,spacing:ie,...oe});return{...xe,series:[be]}}function cEe(e){const{animation:t,background:i,container:n,contextMenu:s,context:o,footnote:r,height:a,listeners:l,locale:c,minHeight:u,minWidth:d,overrideDevicePixelRatio:p,padding:f,subtitle:m,theme:v,title:b,width:C,type:x,cursor:w,nodeClickRange:M,tooltip:T={},value:L,scale:I={},direction:R="vertical",thickness:O,highlightStyle:_,highlight:B,segmentation:V,bar:j,targets:K,cornerRadius:Y,cornerMode:G,label:$,...W}=e,{chartTooltipOptions:Q,seriesTooltipOptions:q}=Use(T),H=Ll(e,{animation:t,background:i,container:n,contextMenu:s,context:o,footnote:r,height:a,listeners:l,locale:c,minHeight:u,minWidth:d,overrideDevicePixelRatio:p,padding:f,subtitle:m,theme:v,title:b,tooltip:Q,width:C}),U=Ll(e,{scale:I,type:x,cursor:w,context:o,nodeClickRange:M,tooltip:q,value:L,direction:R,thickness:O,highlightStyle:_,highlight:B,segmentation:V,bar:j,targets:K,cornerRadius:Y,cornerMode:G,label:$,...W});return{...H,series:[U]}}function v6(e,t){if(t==null)return e;const{targets:i,...n}=t;return e=oi(e,n),e.targets!=null&&i!=null&&(e.targets=KJ(e.targets,i)),e}function uEe(e,t){switch(e.type){case"radial-gauge":return lEe(v6(e,t));case"linear-gauge":return cEe(v6(e,t));default:return{}}}var cl={stroke:dn},uo={fill:vD},b6={color:"white",fill:dn},Dd={color:dn},Vf={color:yD,fontSize:{$rem:rc.LARGE},fontFamily:{$ref:"fontFamily"}},N_={...Vf,fontSize:{$ref:"fontSize"},color:CD,fill:bD,stroke:SD,strokeWidth:1,divider:{stroke:xD,strokeWidth:1,strokeOpacity:.5}},kF={...cl,background:{fill:ys,fillOpacity:.2},handle:{...uo},text:{...Dd},statistics:{...N_}},dEe={line:{...cl,handle:{...uo},text:{...Dd}},"horizontal-line":{...cl,handle:{...uo},axisLabel:{...b6},text:{...Dd}},"vertical-line":{...cl,handle:{...uo},axisLabel:{...b6},text:{...Dd}},"disjoint-channel":{...cl,background:{fill:ys,fillOpacity:.2},handle:{...uo},text:{...Dd}},"parallel-channel":{...cl,background:{fill:ys,fillOpacity:.2},handle:{...uo},text:{...Dd}},"fibonacci-retracement":{...cl,strokes:e0,rangeStroke:dn,handle:{...uo},text:{...Dd,position:"center"},label:{...Vf,color:void 0,fontSize:{$rem:rc.SMALLER}}},"fibonacci-retracement-trend-based":{...cl,strokes:e0,rangeStroke:dn,handle:{...uo},text:{...Dd,position:"center"},label:{...Vf,color:void 0,fontSize:{$rem:rc.SMALLER}}},callout:{...cl,...Vf,color:{$ref:"textColor"},handle:{...uo},fill:ys,fillOpacity:.2},comment:{...Vf,color:"white",fontWeight:700,handle:{...uo},fill:dn},note:{...Vf,color:MD,fill:dn,stroke:{$ref:"chartBackgroundColor"},strokeWidth:1,strokeOpacity:1,handle:{...uo},background:{fill:wD,stroke:DD,strokeWidth:1}},text:{...Vf,handle:{...uo}},arrow:{...cl,handle:{...uo},text:{...Dd}},"arrow-up":{fill:{$palette:"up.fill"},handle:{...uo,stroke:dn}},"arrow-down":{fill:{$palette:"down.fill"},handle:{...uo,stroke:dn}},"date-range":{...kF},"price-range":{...kF},"date-price-range":{...kF},"quick-date-price-range":{up:{...cl,fill:ys,fillOpacity:.2,handle:{...uo},statistics:{...N_,color:"#fff",fill:ys,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...cl,stroke:i0,fill:t0,fillOpacity:.2,handle:{...uo,stroke:i0},statistics:{...N_,color:"#fff",fill:t0,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}},axesButtons:{enabled:!0}},hEe=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"],pEe=[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"fibonacci-retracement-drawing",tooltip:"toolbarAnnotationsFibonacciAnnotations",value:"fibonacci-menu"},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}];function gEe(e,t,i){const{dateKey:n="date",highKey:s="high",openKey:o="open",lowKey:r="low",closeKey:a="close",volumeKey:l="volume",chartType:c="candlestick",navigator:u=!1,volume:d=!0,rangeButtons:p=!0,statusBar:f=!0,toolbar:m=!0,zoom:v=!0,sync:b=!1,theme:C,data:x,formatter:w,...M}=e,T=mEe(c,n,s,r,o,a),L=fEe(i,o,a,d,l),R={navigator:{enabled:u,...d?{miniChart:{enabled:u,series:[{type:"line",xKey:n,yKey:l,stroke:oL,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null}},O={annotations:{enabled:m,optionsToolbar:{enabled:m},snap:!0,toolbar:{enabled:m,buttons:pEe,padding:0},data:x,xKey:n,volumeKey:d?l:void 0}},_=f?{statusBar:{enabled:!0,data:x,highKey:s,openKey:o,lowKey:r,closeKey:a,volumeKey:d?l:void 0}}:null,B={zoom:{enabled:v,autoScaling:{enabled:!0},enableIndependentAxes:!0}},V={ranges:{enabled:p}},j=b?{sync:{enabled:b,nodeInteraction:!0,zoom:!0}}:null,K=d?[{type:"number",position:"left",keys:[l],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percent",align:"end"}}]:[];return{theme:{baseTheme:typeof C=="string"?C:"ag-financial",...oi(typeof C=="object"?C:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:6},chartToolbar:{enabled:m},annotations:{...dEe},axes:{number:{interval:{maxSpacing:45},label:{format:".2f"}}}},bar:{series:{fillOpacity:.5}},line:{series:{marker:{enabled:!1},...x6(c,{hlc:{stroke:{$palette:"altNeutral.stroke"},strokeWidth:2},line:{stroke:{$palette:"neutral.stroke"}},"step-line":{stroke:{$palette:"neutral.stroke"},interpolation:{type:"step"}}})}},candlestick:{series:{...x6(c,{"hollow-candlestick":{item:{up:{fill:"transparent"}}}})}},"range-area":{series:{fillOpacity:.3,strokeWidth:2}}}})},animation:{enabled:!1},legend:{enabled:!1},series:[...L,...T],axes:[{type:"number",position:"right",keys:[o,a,s,r],crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percent",align:"start"}},...K,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:x,formatter:w,...O,...R,..._,...B,...V,...j,...M}}function fEe(e,t,i,n,s){return n?[{type:"bar",xKey:"date",yKey:s,tooltip:{enabled:!1},itemStyler({datum:o}){const{up:r,down:a}=e().palette;return{fill:o[t]<o[i]?r?.fill:a?.fill}},focusPriority:1,highlight:{enabled:!1}}]:[]}var S6="range-area";function mEe(e,t,i,n,s,o){const r={xKey:t,openKey:s,closeKey:o,highKey:i,lowKey:n},a={xKey:t,yKey:o},l={pickOutsideVisibleMinorAxis:!0};switch(e??"candlestick"){case"ohlc":return yEe(l,r);case"line":case"step-line":return vEe(l,a);case"hlc":return bEe(l,a,r);case"high-low":return SEe(l,r);case"candlestick":case"hollow-candlestick":return C6(l,r);default:return fe.warnOnce(`unknown chart type: ${e}; expected one of: ${hEe.join(", ")}`),C6(l,r)}}function yEe(e,t){return[{type:"ohlc",focusPriority:0,...e,...t}]}function vEe(e,t){return[{type:"line",focusPriority:0,...e,...t}]}function bEe(e,t,{xKey:i,highKey:n,closeKey:s,lowKey:o}){return[{type:S6,focusPriority:0,...e,xKey:i,yHighKey:n,yLowKey:s,fill:JE,stroke:qE},{type:S6,focusPriority:0,...e,xKey:i,yHighKey:s,yLowKey:o,fill:eL,stroke:QE},{type:"line",...e,...t}]}function SEe(e,{xKey:t,highKey:i,lowKey:n}){return[{type:"range-bar",...e,xKey:t,yHighKey:i,yLowKey:n,fill:iL,stroke:tL,tooltip:{range:"nearest"},focusPriority:0}]}function C6(e,t){return[{type:"candlestick",focusPriority:0,...e,...t}]}function x6(e,t){return t[e]??t.default}var $se={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:sL,lineDash:[0],label:{enabled:!1}}},TF={...$se,nice:!1},rk={mode:"compact",position:{anchorTo:"node",placement:["right","left"]},showArrow:!1},IF={style:[{stroke:{$ref:"gridLineColor"}}],width:2},CEe={number:{gridLine:IF},time:{gridLine:IF},category:{gridLine:IF}},xEe={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},navigator:{enabled:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:{...TF,interval:{values:[0]}},log:{...TF},time:{...TF},category:{...$se}}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:{...rk,position:{...rk.position,anchorTo:"pointer"},range:"nearest"},axes:CEe},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3}},tooltip:rk},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4},tooltip:rk}}},Kse=fo(wEe);function wEe(e,t){return typeof e=="string"?{...t,baseTheme:e}:e!=null?{...e,baseTheme:Kse(e.baseTheme,t)}:t}function Yse(e){if(Array.isArray(e)&&e.length!==0){const t=e.find(i=>i!=null);if(typeof t=="number")return{data:e.map((n,s)=>({x:s,y:n})),series:[{xKey:"x",yKey:"y"}],datumKey:"y"};if(Array.isArray(t))return{data:e.map(n=>({x:n?.[0],y:n?.[1],datum:n})),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}else if(e?.length===0)return{data:e,series:[{xKey:"x",yKey:"y"}],datumKey:"y"};return{data:e}}function DEe(e){switch(e?.type){case"number":{const{type:t,min:i,max:n,reverse:s}=e;return Ll(e,{type:t,reverse:s,min:i,max:n})}case"time":{const{type:t,min:i,max:n,reverse:s}=e;return Ll(e,{type:t,reverse:s,min:i,max:n})}case"category":default:{const{paddingInner:t,paddingOuter:i,reverse:n}=e??{};return Ll({...e,type:"category"},{type:"category",reverse:n,paddingInner:t,paddingOuter:i})}}}function MEe(e,t,i){const n={};return e?.stroke!=null&&(n.style=[{stroke:e?.stroke}],n.enabled??(n.enabled=!0)),e?.strokeWidth!=null&&(n.width=e?.strokeWidth,n.enabled??(n.enabled=!0)),i.type==="bar"&&i.direction!=="horizontal"&&(n.enabled??(n.enabled=!0)),e?.visible!=null&&(n.enabled=e.visible),n.enabled??(n.enabled=t),n}var AEe=fo((e,t,i)=>n=>{const s=n.datum[n.xKey],o=n.datum[n.yKey],r=i==null?n.datum:n.datum[i],a=t?.renderer?.({context:e,datum:r,xValue:s,yValue:o});if(typeof a=="string")return a;const l=a?.content??o.toFixed(2);return a?.title?{heading:void 0,title:void 0,data:[{label:a.title,value:l}]}:{heading:void 0,title:l,data:[]}});function kEe(e){const{background:t,container:i,height:n,listeners:s,locale:o,minHeight:r,minWidth:a,overrideDevicePixelRatio:l,padding:c,width:u,theme:d,data:p,crosshair:f,axis:m,min:v,max:b,tooltip:C,context:x,styleNonce:w,...M}=e,T=Ll(e,{background:t,container:i,height:n,listeners:s,locale:o,minHeight:r,minWidth:a,overrideDevicePixelRatio:l,padding:c,width:u,styleNonce:w,tooltip:Vr,context:Vr,data:Vr,crosshair:Vr,axis:Vr,min:Vr,max:Vr,theme:Vr}),{data:L,series:[I]=[],datumKey:R}=Yse(p),O=M;I!=null&&Object.assign(O,I),O.tooltip={...C,renderer:AEe(x,C,R)},T.theme=Kse(d,xEe),T.data=L,T.series=[O];const _=O.type!=="bar"||O.direction!=="horizontal",[B,V]=_?["bottom","left"]:["left","bottom"],j={...DEe(m),position:B,...Ll(e,{crosshair:f})},K={type:"number",gridLine:MEe(m,!1,e),position:V,...Ll(e,{min:v,max:b})};return T.axes=_?[K,j]:[j,K],T}var TEe={chartType:Me("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),dateKey:J,openKey:J,highKey:J,lowKey:J,closeKey:J,volumeKey:J,navigator:te,volume:te,rangeButtons:te,statusBar:te,toolbar:te,zoom:te,sync:te,theme:at,container:at,width:at,height:at,minWidth:at,minHeight:at,listeners:at,initialState:at,title:at,data:Mc,formatter:at},O_={theme:at,container:at,animation:at,background:at,contextMenu:at,context:()=>!0,listeners:at,locale:at,width:at,height:at,minWidth:at,minHeight:at,title:at,subtitle:at,footnote:at,padding:at,tooltip:{...ti,...yt.tooltip}};O_.overrideDevicePixelRatio=Xe(re);var RF=["showInLegend","showInMiniChart","grouped","stacked","stackGroup","tooltip","listeners","errorBar","xKey","yKey","type"],EF={visible:te,reverse:te,stroke:Fe,strokeWidth:re},qT={context:()=>!0,tooltip:at,theme:at,background:at,container:at,width:at,height:at,minWidth:at,minHeight:at,padding:at,listeners:at,locale:at,data:at,styleNonce:J,axis:Xm({number:{...EF,min:si(ve,Il("max")),max:si(ve,Rl("min"))},category:{...EF,paddingInner:Ke,paddingOuter:Ke},time:{...EF,min:si(lt(ve,Lu),Il("max")),max:si(lt(ve,Lu),Rl("min"))}},"axis options","category"),min:si(ve,Il("max")),max:si(ve,Rl("min")),crosshair:{enabled:te,snap:te,...Ie,...je},xKey:J,yKey:J};qT.overrideDevicePixelRatio=Xe(ve);var IEe={type:"preset",name:"price-volume",enterprise:!0,options:TEe,create:gEe},REe={type:"preset",name:"gauge-preset",enterprise:!0,options:Xm({"linear-gauge":{..._e(ag,["type"]),...O_},"radial-gauge":{..._e(ID,["type"]),...O_}},"gauge options"),create:uEe},EEe={type:"preset",name:"sparkline",options:Xm({area:{...qT,..._e(one,RF)},bar:{...qT,..._e(bL,RF)},line:{...qT,..._e(SL,RF)}},"sparkline options"),create:kEe,processData:Yse};function Xse(e){const t=new Map;for(const i of e){if(!(i instanceof Rg))continue;const s=(i.seriesGrouping?.stackCount??0)>0?i.seriesGrouping?.groupIndex:void 0;if(s==null){i.seriesBelowStackContext=void 0,i.createStackContext();continue}const o=`${i.type}-${s}`;let r=t.get(o);r==null&&(r=[],t.set(o,r)),r.push(i)}for(const i of t.values()){i.sort((s,o)=>(s.seriesGrouping?.stackIndex??0)-(o.seriesGrouping?.stackIndex??0));let n;for(const s of i)s.seriesBelowStackContext=n,n=s.createStackContext()}}var LEe=["top","right","bottom","left"],WD=class Zse extends ZE{constructor(t,i){super(t,i),this.paired=!0,this.axes=[],this.lastUpdateClipRect=void 0,this.lastLayoutWidth=Number.NaN,this.lastLayoutHeight=Number.NaN}onAxisChange(t,i){super.onAxisChange(t,i),this.syncAxisChanges(t,i),this.ctx!=null&&this.ctx.zoomManager.updateAxes(t)}destroySeries(t){super.destroySeries(t),this.lastLayoutWidth=Number.NaN,this.lastLayoutHeight=Number.NaN}getChartType(){return"cartesian"}setRootClipRects(t){const{seriesRoot:i,annotationRoot:n}=this;i.setClipRect(t),n.setClipRect(t)}async processData(){await super.processData(),this.syncStatus==="init"&&(this.syncStatus="domains-calculated"),this.ctx.updateService.dispatchProcessData({series:{shouldFlipXY:this.shouldFlipXY()}})}async processDomains(){await super.processDomains();for(const t of this.axes){const i=await this.getSyncedDomain(t);i!=null&&t.setDomains(i)}}performLayout(t){const{seriesRoot:i,annotationRoot:n}=this,{clipSeries:s,seriesRect:o,visible:r}=this.updateAxes(t.layoutBox);this.seriesRoot.visible=r,this.seriesRect=o,this.animationRect=t.layoutBox;const{x:a,y:l}=o;if(t.width!==this.lastLayoutWidth||t.height!==this.lastLayoutHeight)for(const f of[i,n])f.translationX=Math.floor(a),f.translationY=Math.floor(l);else{const{translationX:f,translationY:m}=i;vh(this.id,"seriesRect",this.ctx.animationManager,[i,n],{translationX:f,translationY:m},{translationX:Math.floor(a),translationY:Math.floor(l)},{phase:"update"})}this.lastLayoutWidth=t.width,this.lastLayoutHeight=t.height;const c=this.modulesManager.getModule("seriesArea"),u=o.clone().grow(c.getPadding()),d=c.clip||s?u:void 0,{lastUpdateClipRect:p}=this;this.lastUpdateClipRect=d,this.ctx.animationManager.isActive()&&p!=null?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:p,to:u,onUpdate:f=>this.setRootClipRects(f),onComplete:()=>this.setRootClipRects(d)}):this.setRootClipRects(d),this.ctx.layoutManager.emitLayoutComplete(t,{axes:this.axes.map(f=>f.getLayoutState()),series:{visible:r,rect:o,paddedRect:u},clipSeries:s}),Xse(this.series)}updateAxes(t){const{clipSeries:i,seriesRect:n,overflows:s}=this.resolveAxesLayout(t);for(const o of this.axes)o.update(),o.setCrossLinesVisible(!s),this.clipAxis(o,n,t);return{clipSeries:i,seriesRect:n,visible:!s}}resolveAxesLayout(t){let i,n,s=0;const o=10,r=this.axes.filter(a=>a.crossAt?.value!=null);do if(n=i??this.getDefaultState(),i=this.updateAxesPass(new Map(n.axisAreaWidths),t.clone(),r),s++>o){fe.warn("Max iterations reached. Unable to stabilize axes layout.");break}while(!this.isLayoutStable(i,n));return this.lastAreaWidths=i.axisAreaWidths,i}updateAxesPass(t,i,n){const s=new Map,o={};let r=!1,a=!1;for(const w of LEe){const M=this.modulesManager.getModule("seriesArea").getPadding()[w],T=this.axes.findLast(L=>L.position===w);T?T.seriesAreaPadding=M:i.shrink(M,w)}const l=(t.get("left")??0)+(t.get("right")??0),c=(t.get("top")??0)+(t.get("bottom")??0),u=this.buildCrossLinePadding(t),d=u.left+u.right,p=u.top+u.bottom;i.width<=l+d||i.height<=c+p?r=!0:i.shrink(u);const{scene:f}=this.ctx,m=i.clone().shrink(Object.fromEntries(t));for(const w of this.axes){const{position:M="left",direction:T}=w,L=T==="y";let I;this.sizeAxis(w,m,M),w.thickness==null?I=LF(L,f)*(w.maxThicknessRatio??1):I=w.thickness;const{primaryTickCount:R,bbox:O}=w.calculateLayout(w.nice?o[T]:void 0,{sizeLimit:I-w.label.spacing,padding:this.padding});o[T]??(o[T]=R),a||(a=w.dataDomain.clipped||w.visibleRange[0]>0||w.visibleRange[1]<1),w.thickness==null&&(I=Math.min(LF(L,O)??0,I)),s.set(w.id,Math.ceil(I))}let v;n.length>0&&(v=this.calculateAxesCrossPositions(s,m,n));const b=DG(this.axes,w=>w.position??"left"),C=new Map,x=new Map;for(const[w,M]of Ji(b)){let T=LF(w!=="left"&&w!=="right",f)%f.pixelRatio,L=0;for(const I of M??[]){x.set(I.id,T);const R=s.get(I.id)??0;L=Math.max(L,T+R),I.layoutConstraints.stacked&&(T+=R+Zse.AxesPadding)}C.set(w,Math.ceil(L))}for(const[w,M]of Ji(b))this.positionAxes({axes:M??[],position:w,axisWidths:s,axisOffsets:x,axisAreaWidths:C,axisBound:i,seriesRect:m});return v!=null&&this.applyAxisCrossing(m,v),{clipSeries:a,seriesRect:m,axisAreaWidths:C,overflows:r}}calculateAxesCrossPositions(t,i,n){const s=new Map,o=this.axes.find(a=>a.direction==="x"),r=this.axes.find(a=>a.direction==="y");for(const a of n){const{crossPosition:l,visible:c}=this.calculateAxisCrossPosition(a,o,r);a.setAxisVisible(c),this.adjustAxisWidth(a,t,l,i,c),l!=null&&s.set(a.id,l)}return s}calculateAxisCrossPosition(t,i,n){const s=t.direction==="x"?n:i;if(!s)return{crossPosition:void 0,visible:!0};const{scale:{domain:o,bandwidth:r},range:a}=s,l=(r??0)/2,c=s.scale.convert(t.crossAt?.value,{clamp:!1})+l;return s.inRange(c)?{crossPosition:c,visible:!0}:t.crossAt?.sticky===!1?{crossPosition:void 0,visible:!1}:{crossPosition:Number.isNaN(c)?a[o[0]]:iS(c,a),visible:!0}}adjustAxisWidth(t,i,n,s,o){const r=t.getModuleMap().getModule("crosshair")?.enabled===!0,a=this.modulesManager.getModule("annotations")?.enabled===!0,l=this.ctx.annotationManager.createMemento(),c=a||l.some(p=>{switch(p.type){case"vertical-line":return t.direction==="x";case"horizontal-line":return t.direction==="y";default:return!1}});if(r||c)return;const u=i.get(t.id)??0,d=o?this.calculateAxisBleedingWidth(t,u,n,s):0;i.set(t.id,d)}calculateAxisBleedingWidth(t,i,n,s){if(n==null)return i;switch(t.position){case"left":case"top":return Math.max(0,i-n);case"right":return Math.max(0,n+i-s.width);case"bottom":return Math.max(0,n+i-s.height);default:return i}}applyAxisCrossing(t,i){for(const n of this.axes){const s=i.get(n.id);if(s==null){n.crossAxisTranslation.x=0,n.crossAxisTranslation.y=0;continue}const o=n.direction==="x";n.crossAxisTranslation.x=o?0:t.x+s-n.translation.x,n.crossAxisTranslation.y=o?t.y+s-n.translation.y:0}}buildCrossLinePadding(t){var i;const n={top:0,right:0,bottom:0,left:0};for(const s of this.axes){const{position:o,label:r}=s;if(s.crossLines)for(const a of s.crossLines)a instanceof ir&&(a.position=o??"top",(i=a.label).parallel??(i.parallel=r.parallel)),a.calculatePadding?.(n)}for(const[s,o=0]of Ji(n))n[s]=Math.max(o-(t.get(s)??0),0);return n}clampToOutsideSeriesRect(t,i,n,s){const o=n==="x"?t.x:t.y,r=n==="x"?t.width:t.height;return s===1?Math.min(i,o+r):Math.max(i,o)}async getSyncedDomain(t){const i=this.modulesManager.getModule("sync");if(i?.enabled)return await i.getSyncedDomain(t)}syncAxisChanges(t,i){const n=this.modulesManager.getModule("sync");if(!n?.enabled)return;const s=new Set(i??[]);for(const o of t)s.delete(o);for(const o of s)n.removeAxis(o)}sizeAxis(t,i,n){const s=t instanceof Oa,o=n==="left"||n==="right",{width:r,height:a}=i,l=o?a:r;let c=0,u=l,{min:d,max:p}=this.ctx.zoomManager.getAxisZoom(t.id);const{width:f,unit:m,align:v}=t.layoutConstraints;m==="px"?u=c+f:u=u*f/100,v==="end"&&(c=l-(u-c),u=l),o&&(s?[c,u]=[u,c]:[d,p]=[1-p,1-d]),t.range=[c,u],t.visibleRange=[d,p],t.gridLength=o?r:a}positionAxes(t){const{axes:i,axisBound:n,axisWidths:s,axisOffsets:o,axisAreaWidths:r,seriesRect:a,position:l}=t,c=r.get(l)??0;let u="x",d="y",p=1;(l==="top"||l==="bottom")&&(u="y",d="x");let f=n[u];(l==="right"||l==="bottom")&&(p=-1,f+=u==="x"?n.width:n.height);for(const m of i){const v=r.get(d==="x"?"left":"top")??0,b=s.get(m.id)??0,C=o.get(m.id)??0;m.gridPadding=c-C-b,m.translation[d]=n[d]+v,m.translation[u]=this.clampToOutsideSeriesRect(a,f+p*(C+b),u,p)}}shouldFlipXY(){return this.series.every(t=>t instanceof Rg&&t.shouldFlipXY())}getDefaultState(){const t=new Map;if(this.lastAreaWidths)for(const{position:i="left"}of this.axes){const n=this.lastAreaWidths.get(i);n!=null&&t.set(i,n)}return{axisAreaWidths:t,clipSeries:!1,overflows:!1}}isLayoutStable(t,i){if(i.overflows!==t.overflows||i.clipSeries!==t.clipSeries)return!1;for(const n of t.axisAreaWidths.keys())if(!i.axisAreaWidths.has(n))return!1;for(const[n,s]of i.axisAreaWidths.entries()){const o=t.axisAreaWidths.get(n);if((s!=null||o!=null)&&s!==o)return!1}return!0}clipAxis(t,i,n){const s=Math.ceil(t.gridLine?.width??0),o=Math.ceil(t.line?.width??0);let{width:r,height:a}=i;switch(r+=t.direction==="x"?s:o,a+=t.direction==="y"?s:o,t.clipGrid(i.x,i.y,r,a),t.position){case"left":case"right":t.clipTickLines(n.x,i.y-s,n.width+s,i.height+s*2);break;case"top":case"bottom":t.clipTickLines(i.x-s,n.y,i.width+s*2,n.height+s);break}}};WD.className="CartesianChart";WD.type="cartesian";WD.AxesPadding=15;E([Io({changeValue(e,t){this.onAxisChange(e,t)}})],WD.prototype,"axes",2);var PEe=WD;function LF(e,t){return e?t?.width:t?.height}var NL={mode:Xe(Me("integrated","standalone")),container:MJ,context:()=>!0,theme:at,series:Mc,annotations:at,navigator:at,initialState:{chartType:J,annotations:at,legend:Sn({visible:te,seriesId:J,itemId:J,legendItemName:J},"legend state array"),zoom:at}},qse={...yt,...NL,axes:yg(2),data:Mc},Qse={...yt,...NL,axes:yg(2),data:Mc},NEe={...yt,...NL,data:Mc,topology:DS},OEe={...yt,...NL,data:Mc},FEe=new Set(["number","log","time"]),BEe=e=>St(e)&&!FEe.has(e.type),_Ee={type:"chart",name:"cartesian",options:qse,detect:tie,create(e,t){return new PEe(e,t)},validate(e,t,i){const n=[];e?.series?.[0]?.type==="histogram"&&e?.axes?.some(BEe)&&(n.push(new Yp("invalid","only continuous axis types when histogram series is used",e.axes,i,"axes")),e=_e(e,["axes"]));const s=yo(e,t,i);return s.invalid.push(...n),s}},Jse=()=>{throw new Error("Enterprise module placeholder cannot be initialised")},zEe={type:"chart",name:"standalone",placeholder:!0,options:{},detect:nie,create:Jse},GEe={type:"chart",name:"topology",placeholder:!0,options:{},detect:iie,create:Jse},uS=class extends aV{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}update(){super.update(),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled}layoutCrossLines(){const t=this.label.getSideFlag(),i=this.hasDefinedDomain()||this.hasVisibleSeries(),{rotation:n,parallelFlipRotation:s,regularFlipRotation:o}=this.calculateRotations();for(const r of this.crossLines)r.sideFlag=-t,r.direction=n===-Math.PI/2?"angle":"radius",r.parallelFlipRotation=s,r.regularFlipRotation=o,r.calculateLayout?.(i,this.reverse)}updatePosition(){super.updatePosition();const t=Math.floor(this.translation.x),i=Math.floor(this.translation.y);this.tickLineGroup.translationX=t,this.tickLineGroup.translationY=i,this.tickLabelGroup.translationX=t,this.tickLabelGroup.translationY=i,this.crossLineRangeGroup.translationX=t,this.crossLineRangeGroup.translationY=i,this.crossLineLineGroup.translationX=t,this.crossLineLineGroup.translationY=i,this.crossLineLabelGroup.translationX=t,this.crossLineLabelGroup.translationY=i,this.tickLabelGroupSelection.each(KI())}computeLabelsBBox(t,i){return null}computeRange(){}getAxisLinePoints(){}};E([F],uS.prototype,"shape",2);E([F],uS.prototype,"innerRadiusRatio",2);var bH=class extends ZE{constructor(e,t){super(e,t),this.padding=new Zm(40),this.ctx.axisManager.axisGroup.zIndex=8}getChartType(){return"polar"}async performLayout(e){const{layoutBox:t}=e,i=t.clone().shrink(this.modulesManager.getModule("seriesArea").getPadding());this.seriesRect=i,this.animationRect=i,this.seriesRoot.translationX=i.x,this.seriesRoot.translationY=i.y,await this.computeCircle(i);for(const n of this.axes)n.update();this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:i,paddedRect:t}})}updateAxes(e,t,i,n){const s=this.axes.find(l=>l.direction==="angle"),o=this.axes.find(l=>l.direction==="radius");if(!(s instanceof uS)||!(o instanceof uS))return;const r=s.scale,a=o.innerRadiusRatio;s.innerRadiusRatio=a,s.computeRange(),s.gridLength=n,o.gridAngles=r.ticks({nice:s.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.map(l=>r.convert(l)),o.gridRange=s.range,o.range=[n,n*a];for(const l of[s,o])l.translation.x=e.x+t,l.translation.y=e.y+i,l.calculateLayout()}async computeCircle(e){const t=this.series.filter(VEe),i=this.axes.filter(HEe),n=(c,u,d)=>{this.updateAxes(e,c,u,d);for(const f of t)f.centerX=c,f.centerY=u,f.radius=d;const p=t.filter(f=>f.type==="donut"||f.type==="pie");if(p.length>1){const f=p.map(m=>{const v=m.getInnerRadius();return{series:m,innerRadius:v}}).sort((m,v)=>m.innerRadius-v.innerRadius);f.at(-1).series.surroundingRadius=void 0;for(let m=0;m<f.length-1;m++)f[m].series.surroundingRadius=f[m+1].innerRadius}},s=e.width/2,o=e.height/2,r=Math.max(0,Math.min(e.width,e.height)/2);let a=r;n(s,o,a);const l=async({hideWhenNecessary:c=!1}={})=>{const u=[];for(const f of qf(i,t)){const m=await f.computeLabelsBBox({hideWhenNecessary:c},e);m&&u.push(m)}if(u.length===0){n(s,o,r);return}const d=He.merge(u),p=this.refineCircle(d,a,e);n(p.centerX,p.centerY,p.radius),a=p.radius};await l(),await l(),await l(),await l({hideWhenNecessary:!0}),await l({hideWhenNecessary:!0});for(const c of qf(i,t))await c.computeLabelsBBox({hideWhenNecessary:!0},e);return{radius:a,centerX:s,centerY:o}}refineCircle(e,t,i){const s=-t,o=-t,r=t,a=t;let l=Math.max(0,s-e.x),c=Math.max(0,o-e.y),u=Math.max(0,e.x+e.width-r),d=Math.max(0,e.y+e.height-a);l=u=Math.max(l,u),c=d=Math.max(c,d);const p=i.width-l-u,f=i.height-c-d;let m=Math.min(p,f)/2;const v=.5*i.width/2,b=.5*i.height/2,C=Math.min(v,b);if(m<C){m=C;const M=l+u,T=c+d;if(2*m+T>i.height){const L=i.height-2*m;Math.min(c,d)*2>L?(c=L/2,d=L/2):c>d?c=L-d:d=L-c}if(2*m+M>i.width){const L=i.width-2*m;Math.min(l,u)*2>L?(l=L/2,u=L/2):l>u?l=L-u:u=L-l}}const x=l+2*m+u,w=c+2*m+d;return{centerX:(i.width-x)/2+l+m,centerY:(i.height-w)/2+c+m,radius:m}}};bH.className="PolarChart";bH.type="polar";function VEe(e){return e instanceof vH}function HEe(e){return e instanceof uS}var WEe={type:"chart",name:"polar",options:Qse,detect:PAe,create(e,t){return new bH(e,t)},validate(e,t,i){const n=[],s=e?.series?.[0]?.type;(s==="pie"||s==="donut")&&e?.axes&&(n.push(new vG([],e.axes,i,"axes")),e=_e(e,["axes"]));const o=yo(e,t,i);return o.invalid.push(...n),o}},jEe=[_Ee,mTe,yTe,vTe,bTe,STe,CTe,Dse,Ise,Lse,Pse,Ose,Fse],UEe=[WEe,nEe,oEe],$Ee=[...jEe,...UEe,zEe,GEe,IEe,REe,EEe],KEe=1e3,SH=class Tp{constructor(t,i,n,s,o,r=KEe){this.name=t,this.buildItem=i,this.releaseItem=n,this.destroyItem=s,this.maxPoolSize=o,this.cleanupTimeMs=r,this.freePool=[],this.busyPool=new Set}static getPool(t,i,n,s,o){return this.pools.has(t)||this.pools.set(t,new Tp(t,i,n,s,o)),this.pools.get(t)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}hasFree(){return this.freePool.length>0}obtain(t){if(!this.hasFree()&&this.isFull())throw new Error("AG Charts - pool exhausted");let i=this.freePool.pop();return i==null?(i=this.buildItem(t),Tp.debug(()=>[`Pool[name=${this.name}]: Created instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i])):Tp.debug(()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i]),this.busyPool.add(i),{item:i,release:()=>this.release(i)}}obtainFree(){const t=this.freePool.pop();if(t==null)throw new Error("AG Charts - pool has no free instances");return Tp.debug(()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,t]),this.busyPool.add(t),{item:t,release:()=>this.release(t)}}release(t){if(!this.busyPool.has(t))throw new Error("AG Charts - cannot free item from pool which is not tracked as busy.");Tp.debug(()=>[`Pool[name=${this.name}]: Releasing instance (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t]),this.releaseItem(t),this.busyPool.delete(t),this.freePool.push(t),Tp.debug(()=>[`Pool[name=${this.name}]: Returned instance to free pool (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t]);const i=Date.now(),n=i+this.cleanupTimeMs*.5;this.cleanPoolTimer&&(this.cleanPoolDue??1/0)<n&&(clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=void 0),this.cleanPoolTimer||(this.cleanPoolDue=i+this.cleanupTimeMs,this.cleanPoolTimer=setTimeout(this.cleanPool.bind(this),this.cleanupTimeMs))}cleanPool(){const t=this.freePool.splice(0);for(const i of t)this.destroyItem(i);Tp.debug(()=>[`Pool[name=${this.name}]: Cleaned pool of ${t.length} items (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`])}destroy(){this.cleanPool();for(const t of this.busyPool.values())this.destroyItem(t);this.busyPool.clear()}};SH.pools=new Map;SH.debug=Ct.create(!0,"pool");var YEe=SH;cr.registerMany($Ee,qb);var Od=Ct.create(!0,"opts"),Al=class{static licenseCheck(t){this.licenseChecked||(this.licenseManager=Jp.licenseManager?.(t),this.licenseManager?.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(t){return Jp.licenseManager?.({}).getLicenseDetails(t)}static getInstance(t){return w6.getInstance(t)}static create(t,i){const n=Ct.check("scene:stats","scene:stats:verbose")?performance.now():void 0;return Od.group("AgCharts.create()",()=>{t=Ct.inDevelopmentMode(()=>zd(fn(t)))??t,this.licenseCheck(t);const s=w6.createOrUpdate({userOptions:t,licenseManager:this.licenseManager,optionsMetadata:i,apiStartTime:n});return this.licenseManager?.isDisplayWatermark()&&this.licenseManager&&Jp.injectWatermark?.(s.chart.ctx.domManager,this.licenseManager.getWatermarkMessage()),s})}static createFinancialChart(t){return Od.group("AgCharts.createFinancialChart()",()=>this.create(t,{presetType:"price-volume"}))}static createGauge(t){return Od.group("AgCharts.createGauge()",()=>this.create(t,{presetType:"gauge-preset"}))}static __createSparkline(t){return Od.group("AgCharts.__createSparkline()",()=>{const{pool:i,...n}=t;return this.create(n,{presetType:"sparkline",pool:i??!0,domMode:"minimal",withDragInterpretation:!1})})}};Al.licenseChecked=!1;var hu=class Ip{static getInstance(t){const i=ZE.getInstance(t);return i?YY.chartInstances.get(i):void 0}static initialiseModules(){Ip.initialised||(rEe(),aEe(),Ip.initialised=!0)}static createOrUpdate(t){let{proxy:i}=t;const{userOptions:n,licenseManager:s,processedOverrides:o=i?.chart?.chartOptions.processedOverrides??{},specialOverrides:r=i?.chart?.chartOptions.specialOverrides??{},optionsMetadata:a=i?.chart?.chartOptions.optionMetadata??{},deltaOptions:l,data:c,stripSymbols:u=!1,apiStartTime:d}=t,p=Jp.styles==null?[]:[["ag-charts-enterprise",Jp.styles]];Ip.initialiseModules(),Od(()=>[">>> AgCharts.createOrUpdate() user options",fn(n)]);const{presetType:f}=a;let m=n;Al.optionsMutationFn&&m&&(m=Al.optionsMutationFn(fn(m,Sw.OPTIONS_CLONE_OPTS_FAST),f),Od(()=>[">>> AgCharts.createOrUpdate() MUTATED user options",fn(m)]));const v=this.getPool(a);let b=!1,C,x=i?.chart;x==null&&v?.hasFree()&&(C=v.obtainFree(),x=C.item);const{document:w,window:M,styleContainer:T,...L}=m??{},I=x?.getChartOptions(),R=new Sw(I,L,o,{...r,document:w,window:M,styleContainer:T},a,l,u,d);(x==null||cr.detectChartDefinition(R.processedOptions)!==cr.detectChartDefinition(x.chartOptions.processedOptions))&&(C?.release(),C=this.getPool(R.optionMetadata)?.obtain(R),C?x=C.item:(b=!0,x=Ip.createChartInstance(R,x))),R.optionsGraph&&x.ctx.optionsGraphService.updateCallback((O,_,B)=>R.optionsGraph?.resolvePartial(O,_,B));for(const[O,_]of p)x.ctx.domManager.addStyles(O,_);return x.ctx.fontManager.updateFonts(R.googleFonts),c!=null&&x.ctx.dataService.restoreData(c),i==null?(i=new YY(x,Ip.callbackApi,s),i.releaseChart=C?.release):(C||b)&&(i.releaseChart?.(),i.chart=x,i.releaseChart=C?.release),Od.check()&&typeof globalThis.window<"u"&&(globalThis.agChartInstances??(globalThis.agChartInstances={}),globalThis.agChartInstances[x.id]=x),x.queuedUserOptions.push(R.userOptions),x.queuedChartOptions.push(R),x.requestFactoryUpdate(O=>{Od.group(">>>> Chart.applyOptions()",()=>{O.applyOptions(R);const _=O.queuedUserOptions.indexOf(R.userOptions)+1;O.queuedUserOptions.splice(0,_),O.queuedChartOptions.splice(0,_)})}),i}static markRemovedProperties(t,i,n=!1){if(typeof t!="object")return n;for(const s of Object.keys(t))t[s]===void 0&&(Object.assign(t,{[s]:Symbol("UNSET")}),n||(n=!0));return n}static updateUserDelta(t,i,n){i=fn(i,Sw.OPTIONS_CLONE_OPTS_FAST);const s=qp(i,Ip.markRemovedProperties,new Set(["data"]),void 0,void 0,!1);Od(()=>[">>> AgCharts.updateUserDelta() user delta",fn(i)]),Ip.createOrUpdate({proxy:t,deltaOptions:i,stripSymbols:s,apiStartTime:n})}static createChartInstance(t,i){const n=i?.destroy({keepTransferableResources:!0});return cr.detectChartDefinition(t.processedOptions).create(t,n)}static getPool(t){if(t.pool===!0)return YEe.getPool(t.presetType??"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}};hu.caretaker=new kee(qb);hu.initialised=!1;hu.callbackApi={caretaker:hu.caretaker,create(e,t,i,n,s){return hu.createOrUpdate({userOptions:e,processedOverrides:t,specialOverrides:i,optionsMetadata:n,data:s})},update(e,t,i,n){return hu.createOrUpdate({userOptions:e,proxy:t,specialOverrides:i,apiStartTime:n})},updateUserDelta(e,t,i){return hu.updateUserDelta(e,t,i)}};hu.detachAndClear=e=>e.detachAndClear();hu.destroy=e=>e.destroy();var w6=hu,XEe={};Vu(XEe,{Arc:()=>$u,BBox:()=>He,Caption:()=>en,CategoryScale:()=>RS,Group:()=>Mt,Line:()=>Ma,LinearScale:()=>ym,Marker:()=>vs,Path:()=>Ls,RadialColumnShape:()=>jl,Rect:()=>bs,Scene:()=>LE,Sector:()=>Ro,Shape:()=>Bn,TranslatableGroup:()=>So,getRadialColumnWidth:()=>eoe,toRadians:()=>bo});var $u=class extends Ls{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0}get fullPie(){return Jt(Is(this.startAngle),Is(this.endAngle))}updatePath(){const e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?e.closePath():this.type===2&&!this.fullPie&&(e.lineTo(this.centerX,this.centerY),e.closePath())}computeBBox(){return new He(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(e,t){const i=this.getBBox();return this.type!==0&&i.containsPoint(e,t)&&this.path.isPointInPath(e,t)}};$u.className="Arc";E([Le()],$u.prototype,"centerX",2);E([Le()],$u.prototype,"centerY",2);E([Le()],$u.prototype,"radius",2);E([Le()],$u.prototype,"startAngle",2);E([Le()],$u.prototype,"endAngle",2);E([Le()],$u.prototype,"counterClockwise",2);E([Le()],$u.prototype,"type",2);function PF(e,t,i){const n=Math.hypot(e,t),o=Math.atan2(t,e)+i;return{x:Math.cos(o)*n,y:Math.sin(o)*n}}var jl=class extends Ls{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(t){}computeBBox(){const{innerRadius:t,outerRadius:i,columnWidth:n}=this,s=this.getRotation(),o=-n/2,r=n/2,a=-i,l=-t;let c=1/0,u=1/0,d=-1/0,p=-1/0;for(let f=0;f<4;f+=1){const{x:m,y:v}=PF(f%2===0?o:r,f<2?a:l,s);c=Math.min(m,c),u=Math.min(v,u),d=Math.max(m,d),p=Math.max(v,p)}return new He(c,u,d-c,p-u)}getRotation(){const{startAngle:t,endAngle:i}=this,n=wE(t,i);return Is(t+n/2+Math.PI/2)}updatePath(){const{isBeveled:t}=this;t?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:t,innerRadius:i,outerRadius:n,path:s}=this,o=-t/2,r=t/2,a=-n,l=-i,c=this.getRotation(),u=[[o,l],[o,a],[r,a],[r,l]].map(([d,p])=>PF(d,p,c));s.clear(!0),s.moveTo(u[0].x,u[0].y),s.lineTo(u[1].x,u[1].y),s.lineTo(u[2].x,u[2].y),s.lineTo(u[3].x,u[3].y),s.closePath()}updateBeveledPath(){const{columnWidth:t,path:i,outerRadius:n,innerRadius:s,axisInnerRadius:o,axisOuterRadius:r,isRadiusAxisReversed:a}=this,l=Jt(s,o),c=Math.asin(t/2/s),u=this.getRotation(),d=(O,_)=>PF(O,_,u),p=(O,_)=>Math.hypot(O,_),f=(O,_)=>_>O?0:Math.sqrt(O**2-_**2),m=(O,_,B)=>B?O<_:O>_,v=l&&!Number.isNaN(c)&&c<Math.PI/6;let b=-t/2,C=t/2;const x=-n,w=-s*(v?Math.cos(c):1),M=m(r,p(s,t/2),!a);if(M){const O=f(r,s);b=-O,C=O}i.clear(!0);const T=d(b,w);i.moveTo(T.x,T.y);const L=Jt(s,n),I=m(r,p(n,t/2),!a);if(L&&v)i.arc(0,0,s,Is(-c-Math.PI/2)+u,Is(c-Math.PI/2)+u,!1);else if(I){const O=-f(r,t/2),_=f(r,n);if(!M){const B=d(b,O);i.lineTo(B.x,B.y)}if(i.arc(0,0,r,Math.atan2(O,b)+u,Math.atan2(x,-_)+u,!1),!Jt(_,0)){const B=d(_,x);i.lineTo(B.x,B.y)}i.arc(0,0,r,Math.atan2(x,_)+u,Math.atan2(O,C)+u,!1)}else{const O=d(b,x),_=d(C,x);i.lineTo(O.x,O.y),i.lineTo(_.x,_.y)}const R=d(C,w);if(i.lineTo(R.x,R.y),v)i.arc(0,0,s,Is(c-Math.PI/2)+u,Is(-c-Math.PI/2)+u,!0);else{const O=d(b,w);i.lineTo(O.x,O.y)}i.closePath()}};jl.className="RadialColumnShape";E([Le()],jl.prototype,"isBeveled",2);E([Le()],jl.prototype,"columnWidth",2);E([Le()],jl.prototype,"startAngle",2);E([Le()],jl.prototype,"endAngle",2);E([Le()],jl.prototype,"outerRadius",2);E([Le()],jl.prototype,"innerRadius",2);E([Le()],jl.prototype,"axisInnerRadius",2);E([Le()],jl.prototype,"axisOuterRadius",2);E([Le()],jl.prototype,"isRadiusAxisReversed",2);function eoe(e,t,i,n,s){const o=wE(e,t),r=o*(1-n)/2;if(e+=r,t-=r,o<.001)return 2*i*s;if(o>=2*Math.PI){const f=e+o/2;e=f-Math.PI,t=f+Math.PI}const a=i*Math.cos(e),l=i*Math.sin(e),c=i*Math.cos(t),u=i*Math.sin(t),d=Math.floor(Math.hypot(a-c,l-u)),p=2*i*s;return Math.max(1,Math.min(p,d))}var ZEe={};Vu(ZEe,{ChartTheme:()=>yc,DEFAULT_ANNOTATION_HANDLE_FILL:()=>vD,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>CD,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>xD,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>t0,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>i0,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>bD,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>SD,DEFAULT_CAPTION_ALIGNMENT:()=>Wp,DEFAULT_CAPTION_LAYOUT_STYLE:()=>Hp,DEFAULT_FIBONACCI_STROKES:()=>e0,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>ys,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>dn,DEFAULT_GRIDLINE_ENABLED:()=>sc,DEFAULT_POLAR_SERIES_STROKE:()=>nL,DEFAULT_SEPARATION_LINES_COLOUR:()=>mD,DEFAULT_SHADOW_COLOUR:()=>ty,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>sL,DEFAULT_TEXTBOX_COLOR:()=>MD,DEFAULT_TEXTBOX_FILL:()=>wD,DEFAULT_TEXTBOX_STROKE:()=>DD,DEFAULT_TEXT_ANNOTATION_COLOR:()=>yD,DEFAULT_TOOLBAR_POSITION:()=>AD,IS_DARK_THEME:()=>xb,PALETTE_ALT_DOWN_FILL:()=>MV,PALETTE_ALT_DOWN_STROKE:()=>wV,PALETTE_ALT_NEUTRAL_FILL:()=>AV,PALETTE_ALT_NEUTRAL_STROKE:()=>kV,PALETTE_ALT_UP_FILL:()=>DV,PALETTE_ALT_UP_STROKE:()=>xV,PALETTE_DOWN_FILL:()=>eL,PALETTE_DOWN_STROKE:()=>QE,PALETTE_NEUTRAL_FILL:()=>iL,PALETTE_NEUTRAL_STROKE:()=>tL,PALETTE_UP_FILL:()=>JE,PALETTE_UP_STROKE:()=>qE,getChartTheme:()=>sR,resolveOperation:()=>QEe,themeNames:()=>qEe,themeSymbols:()=>CV,themes:()=>HV});var qEe=Object.keys(HV);function QEe(e){const t=yc.getDefaultPublicParameters(),i=yc.getDefaultColors();return new Yne({line:{operation:e}},{series:[{type:"line"}]},t,i).resolve().operation}var JEe={};Vu(JEe,{Color:()=>Di,interpolateColor:()=>Vee});var N={};Vu(N,{AGGREGATION_INDEX_X_MAX:()=>dr,AGGREGATION_INDEX_X_MIN:()=>Wo,AGGREGATION_INDEX_Y_MAX:()=>pr,AGGREGATION_INDEX_Y_MIN:()=>hr,AGGREGATION_SPAN:()=>cc,AbstractBarSeries:()=>Mse,AbstractBarSeriesProperties:()=>dH,ActionOnSet:()=>Io,AnchoredPopover:()=>loe,Animation:()=>Uee,AnimationManager:()=>Yee,Arc:()=>$u,Axis:()=>aV,AxisGroupZIndexMap:()=>kte,AxisInterval:()=>Qm,AxisLabel:()=>Vi,AxisTick:()=>Jm,BASE_FONT_SIZE:()=>Td,BBox:()=>He,Background:()=>GS,BackgroundModule:()=>Xne,BandScale:()=>yh,BarSeries:()=>_D,BarSeriesModule:()=>Tse,BaseModuleInstance:()=>vE,BaseProperties:()=>pt,BaseToolbar:()=>AH,Border:()=>cy,ButtonWidget:()=>eD,CallbackCache:()=>pee,Caption:()=>en,CartesianAxis:()=>gD,CartesianCrossLine:()=>ir,CartesianSeries:()=>Rg,CartesianSeriesNodeEvent:()=>QV,CartesianSeriesProperties:()=>Mh,CategoryAxis:()=>OS,CategoryScale:()=>RS,ChangeDetectableProperties:()=>XV,Chart:()=>ZE,ChartAxisDirection:()=>TE,ChartOptions:()=>Sw,ChartUpdateType:()=>mw,CollapseMode:()=>hse,Color:()=>Di,ColorScale:()=>MS,ConicGradient:()=>nee,ContextMenuBuiltins:()=>Xee,ContextMenuRegistry:()=>Zee,ContinuousScale:()=>mi,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>WS,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>jS,DEFAULT_POLAR_DIRECTION_KEYS:()=>Wse,DEFAULT_POLAR_DIRECTION_NAMES:()=>jse,DEFAULT_TOOLTIP_CLASS:()=>Us,DEFAULT_TOOLTIP_DARK_CLASS:()=>die,DIRECTION_SWAP_AXES:()=>bie,DOMManager:()=>Oee,DataChangeDescription:()=>ute,DataController:()=>fte,DataModel:()=>t_,DataModelSeries:()=>qV,DataService:()=>PE,DataSet:()=>rb,Debug:()=>Ct,Deprecated:()=>eLe,DeprecatedAndRenamedTo:()=>tLe,DiscreteTimeAxis:()=>Jie,DiscreteTimeScale:()=>kc,DragInterpreter:()=>tte,DraggablePopover:()=>coe,DropShadow:()=>Uu,ExtendedPath2D:()=>Xb,FILL_GRADIENT_BLANK_DEFAULTS:()=>bke,FILL_GRADIENT_CONIC_SERIES_DEFAULTS:()=>Dke,FILL_GRADIENT_LINEAR_DEFAULTS:()=>Cg,FILL_GRADIENT_LINEAR_HIERARCHY_DEFAULTS:()=>Ske,FILL_GRADIENT_LINEAR_KEYED_DEFAULTS:()=>xke,FILL_GRADIENT_LINEAR_SINGLE_DEFAULTS:()=>Cke,FILL_GRADIENT_RADIAL_DEFAULTS:()=>rL,FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS:()=>kD,FILL_GRADIENT_RADIAL_REVERSED_SERIES_DEFAULTS:()=>Sie,FILL_GRADIENT_RADIAL_SERIES_DEFAULTS:()=>wke,FILL_IMAGE_BLANK_DEFAULTS:()=>Ike,FILL_IMAGE_DEFAULTS:()=>Sh,FILL_PATTERN_BLANK_DEFAULTS:()=>Ake,FILL_PATTERN_DEFAULTS:()=>Ra,FILL_PATTERN_HIERARCHY_DEFAULTS:()=>kke,FILL_PATTERN_KEYED_DEFAULTS:()=>Tke,FILL_PATTERN_SINGLE_DEFAULTS:()=>Mke,FONT_SIZE:()=>_G,FONT_SIZE_RATIO:()=>rc,FillGradientDefaults:()=>Sg,FillImageDefaults:()=>mh,FillPatternDefaults:()=>Ss,FloatingToolbar:()=>FLe,FormatManager:()=>tS,Gradient:()=>ME,Group:()=>Mt,GroupedCategoryAxis:()=>ny,HdpiCanvas:()=>YG,HierarchyNode:()=>vLe,HierarchySeries:()=>bLe,HierarchySeriesProperties:()=>Eg,HighlightManager:()=>qee,HighlightProperties:()=>fh,HighlightState:()=>Qee,HighlightStyle:()=>nD,Image:()=>KS,InteractionManager:()=>Kee,InteractionState:()=>$ee,InterpolationProperties:()=>US,Invalidating:()=>Q0,LABEL_BOXING_DEFAULTS:()=>Ou,LARGEST_KEY_INTERVAL:()=>Wie,LEGEND_CONTAINER_THEME:()=>wie,Label:()=>xn,LayoutElement:()=>JG,LayoutManager:()=>lte,LegendMarkerLabel:()=>Wl,Line:()=>Ma,LineSeries:()=>GD,LineSeriesModule:()=>Nse,LinearGradient:()=>see,LinearScale:()=>ym,LogScale:()=>NV,LonLatBBox:()=>SLe,MIN_CATEGORY_SPACING:()=>Jx,Marker:()=>vs,Menu:()=>ELe,MenuItemRadioWidget:()=>wH,MenuItemWidget:()=>_L,MenuWidget:()=>DH,MercatorScale:()=>CLe,ModuleRegistry:()=>cr,Motion:()=>ZB,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>lc,NativeWidget:()=>Jb,NewAreaSeriesModule:()=>Dse,NewBarSeriesModule:()=>Ise,NewBubbleSeriesModule:()=>Lse,NewHistogramSeriesModule:()=>Pse,NewLineSeriesModule:()=>Ose,NewScatterSeriesModule:()=>Fse,NiceMode:()=>xte,Node:()=>oh,NumberAxis:()=>Oa,ObserveChanges:()=>bg,OrdinalTimeScale:()=>Cb,PHASE_METADATA:()=>Yw,PHASE_ORDER:()=>Yv,PREV_NEXT_KEYS:()=>fw,Padding:()=>Zm,ParallelStateMachine:()=>qMe,Path:()=>Ls,PointerEvents:()=>JJ,PolarAxis:()=>uS,PolarSeries:()=>vH,PolarZIndexMap:()=>Hse,Popover:()=>MH,PropertiesArray:()=>AS,Property:()=>F,ProxyInteractionService:()=>_ee,ProxyOnWrite:()=>k0e,ProxyProperty:()=>tr,ProxyPropertyOnWrite:()=>_n,QUICK_TRANSITION:()=>jI,QuadtreeNearest:()=>ese,RENDER_TO_OFFSCREEN_CANVAS_THRESHOLD:()=>rR,RadialColumnShape:()=>jl,Range:()=>Wu,Rect:()=>bs,RepeatType:()=>jee,Rotatable:()=>kS,RotatableGroup:()=>S0e,RotatableText:()=>Cee,SAFE_FILLS_OPERATION:()=>yke,SAFE_FILL_OPERATION:()=>mke,SAFE_RANGE2_OPERATION:()=>vke,SAFE_STROKE_FILL_OPERATION:()=>oL,SEGMENTATION_DEFAULTS:()=>aL,SKIP_JS_BUILTINS:()=>RG,SMALLEST_KEY_INTERVAL:()=>Hie,SORT_DOMAIN_GROUPS:()=>jie,Scalable:()=>AE,ScalableGroup:()=>b0e,ScaleAlignment:()=>iee,Scene:()=>LE,SceneArrayChangeDetection:()=>LG,SceneChangeDetection:()=>Le,SceneObjectChangeDetection:()=>Pa,SceneRefChangeDetection:()=>xE,Sector:()=>Ro,SectorBox:()=>Bse,SegmentOptions:()=>Ac,Segmentation:()=>iD,SegmentedPath:()=>ZV,Selection:()=>Yo,Series:()=>XE,SeriesContentZIndexMap:()=>oie,SeriesGroupingChangedEvent:()=>qI,SeriesItemHighlightStyle:()=>gh,SeriesMarker:()=>Sr,SeriesNodeEvent:()=>YE,SeriesNodePickMode:()=>lie,SeriesProperties:()=>Gl,SeriesTooltip:()=>Dh,SeriesZIndexMap:()=>sie,Shape:()=>Bn,SliderWidget:()=>KG,SpanJoin:()=>nse,StateMachine:()=>oD,StateMachineProperty:()=>ZMe,StopProperties:()=>PG,SvgPath:()=>roe,TIME_AXIS_KEYS:()=>Cse,TRIPLE_EQ:()=>ZJ,Text:()=>ba,ThemeConstants:()=>xee,ThemeSymbols:()=>CV,TimeAxisParentLevel:()=>BS,TimeScale:()=>rS,Toolbar:()=>NLe,ToolbarButtonProperties:()=>jD,ToolbarButtonWidget:()=>uoe,ToolbarWidget:()=>EE,Tooltip:()=>Hl,TooltipManager:()=>UI,TooltipPosition:()=>ey,Transformable:()=>vn,TransformableGroup:()=>Kv,TransformableText:()=>Zb,Translatable:()=>TS,TranslatableGroup:()=>So,TranslatableSvgPath:()=>ILe,UnitTimeScale:()=>Vp,UpdateService:()=>cte,Vec2:()=>ib,Vec4:()=>Zw,WIDGET_HTML_EVENTS:()=>BG,Widget:()=>Hu,WidgetEventUtil:()=>Kd,ZIndexMap:()=>zee,ZoomManager:()=>ate,accumulateGroup:()=>Uie,accumulatedValue:()=>Nie,accumulativeValueProperty:()=>S_,addEscapeEventListener:()=>GG,addHitTestersToQuadtree:()=>IL,addMouseCloseListener:()=>Tee,addOverrideFocusVisibleEventListener:()=>Eee,addTouchCloseListener:()=>Iee,adjustLabelPlacement:()=>qne,aggregationDomain:()=>lS,aggregationIndexForXRatio:()=>YV,aggregationRangeFittingPoints:()=>wL,aggregationXRatioForDatumIndex:()=>o0,aggregationXRatioForXValue:()=>bc,angleBetween:()=>wE,angleCategoryAxisOptionsDefs:()=>FV,angleNumberAxisOptionsDefs:()=>ene,angularPadding:()=>UB,animationValidation:()=>ND,annotationCalloutStylesDefs:()=>yne,annotationChannelStyleDefs:()=>GV,annotationChannelTextDefs:()=>pne,annotationCommentStylesDefs:()=>vne,annotationCrossLineStyleDefs:()=>x_,annotationDisjointChannelStyleDefs:()=>fne,annotationFibonacciStylesDefs:()=>w_,annotationLineStyleDefs:()=>nR,annotationLineTextDefs:()=>CL,annotationMeasurerStylesDefs:()=>jT,annotationNoteStylesDefs:()=>bne,annotationOptionsDef:()=>zS,annotationParallelChannelStyleDefs:()=>mne,annotationQuickMeasurerStylesDefs:()=>Sne,annotationShapeStylesDefs:()=>D_,annotationTextStylesDef:()=>OD,applyShapeFillBBox:()=>aie,applyShapeStyle:()=>Yd,areScalingEqual:()=>vm,area:()=>b_,autoSizedLabelOptionsDefs:()=>rg,axisLabelsOverlap:()=>d_,bezier2DDistance:()=>cee,bezier2DExtrema:()=>lee,boxPlotHighlightStyleOptionsDef:()=>M_,boxPlotSeriesThemeableOptionsDef:()=>Cne,boxPlotStyleOptionsDef:()=>VV,buildResetPathFn:()=>aH,calculateDataDiff:()=>kse,calculateLabelRotation:()=>Zte,calculateLabelTranslation:()=>DLe,calculatePlacement:()=>cie,calculateSegments:()=>kL,callWithContext:()=>mc,candlestickSeriesThemeableOptionsDef:()=>xne,cartesianAxisBandHighlightOptions:()=>PD,cartesianAxisCrosshairOptions:()=>Dg,cartesianAxisLabelOptionsDefs:()=>ED,cartesianAxisOptionsDefs:()=>xh,cartesianChartOptionsDefs:()=>qse,cartesianCrossLineOptionsDefs:()=>kd,cartesianNumericAxisLabel:()=>IV,cartesianTimeAxisLabel:()=>LD,cartesianTimeAxisParentLevel:()=>gL,checkCrisp:()=>Ase,chordSeriesThemeableOptionsDef:()=>wne,clampArray:()=>iS,clipSpanX:()=>JV,clippedRoundRect:()=>_T,collapseSpanToPoint:()=>ise,collapsedStartingBarPosition:()=>h0,commonAxisIntervalOptionsDefs:()=>RV,commonAxisLabelOptionsDefs:()=>Ch,commonAxisOptionsDefs:()=>iy,commonChartOptionsDefs:()=>yt,commonCrossLineLabelOptionsDefs:()=>Om,commonCrossLineOptionsDefs:()=>bu,commonSeriesOptionsDefs:()=>Rc,commonSeriesThemeableOptionsDefs:()=>Vt,compactAggregationIndices:()=>a0,compareDates:()=>mV,computeBarFocusBounds:()=>pH,computeMarkerFocusBounds:()=>ML,coneFunnelSeriesThemeableOptionsDef:()=>Dne,continuousAxisOptions:()=>PS,countExpandingSearch:()=>ete,createAggregationIndices:()=>r0,createButton:()=>MLe,createCheckbox:()=>ALe,createDatumId:()=>Xo,createDeprecationWarning:()=>CH,createIcon:()=>ooe,createIdsGenerator:()=>bV,createSelect:()=>kLe,createTextArea:()=>TLe,dateToNumber:()=>vo,dateTruncationForDomain:()=>fV,datesSortOrder:()=>yV,datumKeys:()=>$I,datumStylerProperties:()=>_E,deconstructSelectionsOrNodes:()=>OE,deepClone:()=>fn,deepFreeze:()=>zd,diff:()=>yL,discreteTimeAxisIntervalOptionsDefs:()=>EV,drawCorner:()=>Xx,drawMarkerUnitPolygon:()=>qx,durationDay:()=>Nm,durationHour:()=>mm,durationMinute:()=>Gp,durationMonth:()=>cV,durationSecond:()=>Sb,durationWeek:()=>Ite,durationYear:()=>qw,easing:()=>ZB,enterpriseModule:()=>Jp,errorBarOptionsDefs:()=>cL,errorBarThemeableOptionsDefs:()=>TD,estimateTickCount:()=>zte,evaluateBezier:()=>Yb,expandLegendPosition:()=>UT,extent:()=>Mg,extractDecoratedProperties:()=>$J,fillsOptionsDef:()=>n0,findMinMax:()=>Es,findQuadtreeMatch:()=>RL,findRangeExtent:()=>Pm,fixNumericExtent:()=>Xr,focusCursorAtEnd:()=>x0e,formatNumber:()=>Bee,formatObjectValidator:()=>kie,formatPercent:()=>Fee,formatTicks:()=>Ute,formatValue:()=>eS,fromToMotion:()=>Xn,funnelSeriesThemeableOptionsDef:()=>Mne,generateTicks:()=>qte,getAngleRatioRadians:()=>eee,getColorStops:()=>aee,getCrossLineValue:()=>Ste,getDateTicksForInterval:()=>vV,getDatumRefPoint:()=>XG,getElementBBox:()=>gee,getIconClassNames:()=>kE,getItemStyles:()=>ZG,getItemStylesPerItemId:()=>KDe,getLabelStyles:()=>dy,getLastFocus:()=>HG,getMarkerStyles:()=>AL,getMissCount:()=>pte,getPath:()=>IG,getPathComponents:()=>gte,getRadialColumnWidth:()=>eoe,getSequentialColors:()=>Na,getShapeFill:()=>rie,getShapeStyle:()=>g_,getTextAlign:()=>Xte,getTextBaseline:()=>Yte,getTimeIntervalTicks:()=>$te,groupAccumulativeValueProperty:()=>s0,groupAverage:()=>Pie,groupCount:()=>v_,groupSum:()=>Lie,hasNoModifiers:()=>J0,heatmapSeriesThemeableOptionsDef:()=>Ane,highlightStates:()=>FE,initRovingTabIndex:()=>oDe,interpolatePoints:()=>ww,interpolationOptionsDefs:()=>uL,intervalCeil:()=>Rte,intervalEpoch:()=>Qw,intervalExtent:()=>dV,intervalFloor:()=>bl,intervalHierarchy:()=>uD,intervalMilliseconds:()=>Ur,intervalNext:()=>uV,intervalPrevious:()=>Ete,intervalRange:()=>Fl,intervalRangeCount:()=>hV,intervalRangeStartIndex:()=>pV,intervalStep:()=>og,intervalUnit:()=>lh,isAgStandaloneChartOptions:()=>nie,isAgTopologyChartOptions:()=>iie,isBetweenAngles:()=>Jf,isButtonClickEvent:()=>VG,isChartAxisDirection:()=>Q0e,isContinuous:()=>GE,isDecoratedObject:()=>CE,isDenseInterval:()=>oS,isGradientFill:()=>Ol,isGradientOrPatternFill:()=>f0e,isImageFill:()=>Em,isInputPending:()=>fee,isObjectWithProperty:()=>XJ,isObjectWithStringProperty:()=>jwe,isPatternFill:()=>ah,isProperties:()=>gm,isScaleValid:()=>l0,jsonApply:()=>gw,jsonDiff:()=>Nu,jsonPropertyCompare:()=>mee,jsonWalk:()=>qp,keyProperty:()=>Qp,legendSymbolSvg:()=>uie,lineDistanceSquared:()=>VI,linearGaugeSeriesOptionsDef:()=>ag,linearGaugeSeriesThemeableOptionsDef:()=>eR,linearGaugeTargetOptionsDef:()=>dL,linearPoints:()=>sse,listDecoratedProperties:()=>Zp,lowestGranularityForInterval:()=>dD,lowestGranularityUnitForTicks:()=>gV,lowestGranularityUnitForValue:()=>WE,makeAccessibleClickListener:()=>rDe,makeSeriesTooltip:()=>py,mapLineBackgroundSeriesThemeableOptionsDef:()=>Ine,mapLineSeriesThemeableOptionsDef:()=>Tne,mapMarkerSeriesThemeableOptionsDef:()=>Rne,mapShapeBackgroundSeriesThemeableOptionsDef:()=>Lne,mapShapeSeriesThemeableOptionsDef:()=>Ene,mapValues:()=>YJ,markerEnabled:()=>oH,markerFadeInAnimation:()=>u0,markerOptionsDefs:()=>vc,markerScaleInAnimation:()=>Sse,markerStyleOptionsDefs:()=>wg,markerSwipeScaleInAnimation:()=>sH,memo:()=>NE,merge:()=>Uw,mergeArrayDefaults:()=>KJ,mergeDefaults:()=>oi,midpointStartingBarPosition:()=>IRe,minimumTimeAxisDatumGranularity:()=>qie,moduleRegistry:()=>Du,motion:()=>_Le,multiSeriesHighlightStyle:()=>xg,nearestSquared:()=>SE,nearestSquaredInContainer:()=>Vwe,nextPowerOf2:()=>ite,nightingaleSeriesThemeableOptionsDef:()=>Pne,normaliseGroupTo:()=>mL,normalisePropertyTo:()=>WT,normalisedExtentWithMetadata:()=>LV,normalizeAngle180:()=>GI,normalizeAngle360:()=>Is,normalizeAngle360FromDegrees:()=>rh,normalizeAngle360Inclusive:()=>qwe,normalizeContinuousDomains:()=>qG,numberFormatValidator:()=>Ic,objectsEqual:()=>yr,objectsEqualWith:()=>TG,ohlcSeriesThemeableOptionsDef:()=>kne,ordinalTimeAxisOptionsDefs:()=>tb,pairUpSpans:()=>xw,partialAssign:()=>WB,pathFadeInAnimation:()=>aR,pathMotion:()=>oR,pathSwipeInAnimation:()=>rH,pick:()=>OT,pickByMatchingAngle:()=>Vse,plotAreaPathFill:()=>yse,plotInterpolatedAreaSeriesFillSpans:()=>YT,plotInterpolatedLinePathStroke:()=>KT,plotLinePathStroke:()=>tH,pointsEq:()=>c0,polarChartOptionsDefs:()=>Qse,predictCartesianAxis:()=>lH,predictCartesianTimeAxis:()=>BD,predictTimeAxisType:()=>cH,prepareAreaFillAnimationFns:()=>vse,prepareAreaPathAnimation:()=>bse,prepareAxisAnimationContext:()=>wte,prepareAxisAnimationFunctions:()=>Dte,prepareBarAnimationFunctions:()=>p0,prepareLinePathAnimation:()=>mse,prepareLinePathPropertyAnimation:()=>nH,prepareLinePathStrokeAnimationFns:()=>iH,preparePieSeriesAnimationFunctions:()=>ZT,previousPowerOf2:()=>QB,processedDataIsAnimatable:()=>FS,pyramidSeriesThemeableOptionsDef:()=>Nne,radarAreaSeriesThemeableOptionsDef:()=>One,radarLineSeriesThemeableOptionsDef:()=>Fne,radialBarSeriesThemeableOptionsDef:()=>Bne,radialColumnSeriesThemeableOptionsDef:()=>_ne,radialGaugeSeriesOptionsDef:()=>ID,radialGaugeSeriesThemeableOptionsDef:()=>tR,radialGaugeTargetOptionsDef:()=>hL,radialSeriesStylerDef:()=>Fm,radiusCategoryAxisOptionsDefs:()=>ine,radiusNumberAxisOptionsDefs:()=>tne,range:()=>UE,rangeAreaSeriesThemeableOptionsDef:()=>zne,rangeBarSeriesThemeableOptionsDef:()=>Gne,rangeValidator:()=>lL,rangedValueProperty:()=>Vie,rescaleSpan:()=>cS,resetAxisFillSelectionFn:()=>Ate,resetAxisGroupFn:()=>Mte,resetAxisLabelSelectionFn:()=>KI,resetAxisLineSelectionFn:()=>a_,resetBarSelectionsFn:()=>g0,resetLabelFn:()=>hy,resetMarkerFn:()=>DL,resetMarkerPositionFn:()=>d0,resetMotion:()=>mo,resetPieSelectionsFn:()=>Gse,rowCountProperty:()=>zie,sankeySeriesThemeableOptionsDef:()=>Vne,scale:()=>Ws,sectorBox:()=>_se,seriesLabelFadeInAnimation:()=>hn,seriesLabelFadeOutAnimation:()=>$T,seriesLabelOptionsDefs:()=>Si,setElementBBox:()=>WI,setPath:()=>EG,shadowOptionsDefs:()=>ju,shallowClone:()=>FG,simpleMemorize:()=>fo,simpleMemorize2:()=>tD,singleSeriesHighlightStyle:()=>xie,smoothPoints:()=>rse,solveBezier:()=>HI,sortAndUniqueDates:()=>l_,spanRange:()=>Ea,splitBezier2D:()=>$w,stackCartesianSeries:()=>Xse,standaloneChartOptionsDefs:()=>OEe,staticFromToMotion:()=>vh,stepPoints:()=>ose,stopPageScrolling:()=>Lee,sum:()=>jke,sumValues:()=>fL,sunburstSeriesThemeableOptionsDef:()=>Hne,textOrSegments:()=>Jo,tickFormat:()=>dAe,ticksEqual:()=>h_,ticksSpacing:()=>jte,timeInterval:()=>pL,timeIntervalMaxLabelSize:()=>Kte,timeIntervalUnit:()=>RD,toDegrees:()=>Qwe,toHighlightString:()=>IS,toRadians:()=>bo,toolbarButtonOptionsDefs:()=>im,tooltipContentAriaLabel:()=>pie,tooltipHtml:()=>fie,tooltipOptionsDefs:()=>ti,topologyChartOptionsDefs:()=>NEe,trailingAccumulatedValue:()=>Oie,trailingAccumulatedValueProperty:()=>Xke,treemapSeriesThemeableOptionsDef:()=>Wne,updateClipPath:()=>lR,updateLabelNode:()=>Zne,validateCrossLineValue:()=>Cte,valueProperty:()=>Bi,visibleRangeIndices:()=>Xw,waterfallSeriesThemeableOptionsDef:()=>jne,withTemporaryDomain:()=>SV,without:()=>_e});function CH(){return(e,t)=>{const i=[`Property [${e}] is deprecated.`,t].filter(Boolean).join(" ");fe.warnOnce(i)}}function eLe(e,t){const i=CH(),n=t?.default;return Rm((s,o,r)=>(r!==n&&i(o.toString(),e),r))}function tLe(e,t){const i=CH();return Rm((n,s,o)=>(o!==n[e]&&(i(s.toString(),`Use [${e}] instead.`),EG(n,e,t?t(o):o)),HB),(n,s)=>(i(s.toString(),`Use [${e}] instead.`),IG(n,e)))}var ib={add:iLe,angle:aLe,apply:mLe,equal:gLe,distance:sLe,distanceSquared:oLe,from:fLe,gradient:cLe,intercept:uLe,intersectAtX:hLe,intersectAtY:dLe,length:OL,lengthSquared:toe,multiply:nLe,normalized:rLe,origin:ioe,required:yLe,rotate:lLe,round:pLe,sub:xH};function iLe(e,t){return typeof t=="number"?{x:e.x+t,y:e.y+t}:{x:e.x+t.x,y:e.y+t.y}}function xH(e,t){return typeof t=="number"?{x:e.x-t,y:e.y-t}:{x:e.x-t.x,y:e.y-t.y}}function nLe(e,t){return typeof t=="number"?{x:e.x*t,y:e.y*t}:{x:e.x*t.x,y:e.y*t.y}}function OL(e){return Math.hypot(e.x,e.y)}function toe(e){return e.x*e.x+e.y*e.y}function sLe(e,t){return OL(xH(e,t))}function oLe(e,t){return toe(xH(e,t))}function rLe(e){const t=OL(e);return{x:e.x/t,y:e.y/t}}function aLe(e,t){return t==null?Math.atan2(e.y,e.x):Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)}function lLe(e,t,i=ioe()){const n=OL(e);return{x:i.x+n*Math.cos(t),y:i.y+n*Math.sin(t)}}function cLe(e,t,i){const n=t.x-e.x;return(i==null?t.y-e.y:i-t.y-(i-e.y))/n}function uLe(e,t,i){return(i==null?e.y:i-e.y)-t*e.x}function dLe(e,t,i=0,n){return{x:e===1/0?1/0:(i-t)/e,y:n==null?i:n-i}}function hLe(e,t,i=0,n){const s=e===1/0?1/0:e*i+t;return{x:i,y:n==null?s:n-s}}function pLe(e,t=2){return{x:FB(e.x,t),y:FB(e.y,t)}}function gLe(e,t){return e.x===t.x&&e.y===t.y}function fLe(e,t){if(typeof e=="number")return{x:e,y:t};if("currentX"in e)return{x:e.currentX,y:e.currentY};if("offsetWidth"in e)return{x:e.offsetWidth,y:e.offsetHeight};if("width"in e)return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y+e.height}];if("x1"in e)return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}];throw new Error(`Values can not be converted into a vector: [${JSON.stringify(e)}] [${t}]`)}function mLe(e,t){return e.x=t.x,e.y=t.y,e}function yLe(e){return{x:e?.x??0,y:e?.y??0}}function ioe(){return{x:0,y:0}}var noe=class QT{constructor(t,i,n,s,o,r,a,l,c,u){this.series=t,this.datumIndex=i,this.datum=n,this.sizeValue=s,this.colorValue=o,this.sumSize=r,this.depth=a,this.parent=l,this.children=c,this.style=u,this.midPoint={x:0,y:0}}get hasChildren(){return this.children.length>0}walk(t,i=QT.Walk.PreOrder){i===QT.Walk.PreOrder&&t(this);for(const n of this.children)n.walk(t,i);i===QT.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*t}};noe.Walk={PreOrder:0,PostOrder:1};var vLe=noe,bLe=class extends XE{constructor(e){super({moduleCtx:e,pickModes:[1,0]}),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new MS,this.animationState=new oD("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}processData(){const{NodeClass:e}=this,{childrenKey:t,sizeKey:i,colorKey:n,colorRange:s}=this.properties;let o=0,r=1/0,a=-1/0;const l=(p,f,m)=>{const v=m.depth==null?0:m.depth+1,b=t==null?void 0:p[t],C=b==null||b.length===0;let x=i==null?void 0:p[i];Number.isFinite(x)?x=Math.max(x,0):x=C?1:0;const w=x;o=Math.max(o,v);const M=n==null?void 0:p[n];typeof M=="number"&&(r=Math.min(r,M),a=Math.max(a,M));const T=this.getItemStyle({datumIndex:f,datum:p,depth:v,colorValue:M},C,!1);return c(new e(this,f,p,x,M,w,v,m,[],T),b)},c=(p,f)=>{const{datumIndex:m}=p;if(f)for(const[v,b]of f.entries()){const C=l(b,m.concat(v),p);p.children.push(C),p.sumSize+=C.sumSize}return p},u=c(new e(this,[],void 0,0,void 0,0,void 0,void 0,[],{}),this.data?.data),d=[r,a];this.colorScale.domain=r<a?[r,a]:[0,1],this.colorScale.range=s??["black"],this.colorScale.update(),this.rootNode=u,this.maxDepth=o,this.colorDomain=d}update({seriesRect:e}){this.updateSelections(),this.updateNodes();const t=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",t),this.animationState.transition("update",t)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(){return{}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}dataCount(){return Number.NaN}getSeriesDomain(){return[Number.NaN,Number.NaN]}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}getLegendData(e){const{colorKey:t,colorRange:i}=this.properties,{id:n,ctx:{legendManager:s},visible:o}=this;return e==="gradient"&&t!=null&&i!=null?[{legendType:"gradient",enabled:o&&s.getItemEnabled({seriesId:n}),seriesId:n,series:this.getFormatterContext("color"),colorRange:i,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(e){return e.datumIndex.join(":")}getDatumId(e){return this.getDatumIdFromData(e)}removeMeIndexPathForIndex(e){return this.datumSelection.at(e+1)?.datum.datumIndex??[]}removeMeIndexForIndexPath(e){for(const{index:t,datum:i}of this.datumSelection)if(El(i.datumIndex,e))return t-1;return 0}pickFocus(e){if(!this.rootNode?.children.length)return;const t=Je(0,e.datumIndex-e.datumIndexDelta,this.datumSelection.length-1),{datumIndexDelta:i,otherIndexDelta:n}=e;let s=this.removeMeIndexPathForIndex(t);const o=s.reduce((l,c)=>l.children[c],this.rootNode);if(n>0&&o.hasChildren)s=[...s,0];else if(n<0&&s.length>1)s=s.slice(0,-1);else if(n===0&&i!==0){const l=o.parent.children.length-1;s=s.slice(),s[s.length-1]=Je(0,s.at(-1)+i,l)}const r=s.reduce((l,c)=>l.children[c],this.rootNode),a=this.computeFocusBounds(this.datumSelection.at(t+1));if(a!=null)return{datum:r,datumIndex:this.removeMeIndexForIndexPath(s),otherIndex:r.depth,bounds:a,clipFocusBox:!0}}getDatumAriaText(e,t){if(!(e instanceof this.NodeClass)){fe.error(`datum is not HierarchyNode: ${JSON.stringify(e)}`);return}return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(e.depth??-1)+1,count:e.children.length,description:t})}getCategoryValue(e){}datumIndexForCategoryValue(e){}},Eg=class extends Gl{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values($n),this.strokes=Object.values(Ad)}};E([F],Eg.prototype,"childrenKey",2);E([F],Eg.prototype,"sizeKey",2);E([F],Eg.prototype,"colorKey",2);E([F],Eg.prototype,"colorName",2);E([F],Eg.prototype,"fills",2);E([F],Eg.prototype,"strokes",2);E([F],Eg.prototype,"colorRange",2);var SLe=class soe{constructor(t,i,n,s){this.lon0=t,this.lat0=i,this.lon1=n,this.lat1=s}extend(t,i,n,s){return this.lon0=Math.min(this.lon0,t),this.lat0=Math.min(this.lat0,i),this.lon1=Math.max(this.lon1,n),this.lat1=Math.max(this.lat1,s),this}merge(t){return this.extend(t.lon0,t.lat0,t.lon1,t.lat1)}static extend(t,i,n,s,o){return t?t.extend(i,n,s,o):new soe(i,n,s,o)}},FL=Math.PI/180,NF=e=>e*FL,OF=e=>-Math.log(Math.tan(Math.PI*.25+e*FL*.5)),FF=e=>e/FL,BF=e=>(Math.atan(Math.exp(-e))-Math.PI*.25)/(FL*.5),CLe=class F_ extends DE{constructor(t,i){super(),this.domain=t,this.range=i,this.type="mercator",this.defaultTickCount=0,this.bounds=F_.bounds(t)}static bounds(t){const[[i,n],[s,o]]=t,r=NF(i),a=OF(n),l=NF(s),c=OF(o);return new He(Math.min(r,l),Math.min(a,c),Math.abs(l-r),Math.abs(c-a))}static fixedScale(){return new F_([[FF(0),BF(0)],[FF(1),BF(1)]],[[0,0],[1,1]])}toDomain(){}normalizeDomains(...t){let i=-1/0,n=1/0,s=-1/0,o=1/0;for(const r of t)for(const[a,l]of r)i=Math.min(a,i),n=Math.max(a,n),s=Math.min(l,s),o=Math.max(l,o);return{domain:[[i,s],[n,o]],animatable:!0}}convert([t,i]){const[[n,s],[o,r]]=this.range,a=(o-n)/this.bounds.width,l=(r-s)/this.bounds.height;return[(NF(t)-this.bounds.x)*a+n,(OF(i)-this.bounds.y)*l+s]}invert([t,i]){const[[n,s],[o,r]]=this.range,a=(o-n)/this.bounds.width,l=(r-s)/this.bounds.height;return[FF((t-n)/a+this.bounds.x),BF((i-s)/l+this.bounds.y)]}},xLe={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},wLe={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}};function DLe({yDirection:e,padding:t=0,position:i="top",bbox:n}){const s=e?xLe:wLe,{xTranslationDirection:o,yTranslationDirection:r}=s[i],a=o*(t+n.width/2),l=r*(t+n.height/2);return{xTranslation:a,yTranslation:l}}function MLe(e,t){const i=nt("button",BL("ag-charts-input ag-charts-button",t));return e.label===void 0?(i.append(ooe(e.icon)),i.ariaLabel=e.altText):i.append(e.label),i.addEventListener("click",e.onPress),wu(i,t),i}function ALe(e,t){const i=nt("input",BL("ag-charts-input ag-charts-checkbox",t));return i.type="checkbox",i.checked=e.checked,i.addEventListener("change",n=>e.onChange(i.checked,n)),i.addEventListener("keydown",n=>{VG(n)&&(n.preventDefault(),i.click())}),wu(i,t),i}function kLe(e,t){const i=nt("select",BL("ag-charts-input ag-charts-select",t));return i.append(...e.options.map(n=>{const s=nt("option");return s.value=n.value,s.textContent=n.label,s})),Pt(i,"data-preventdefault",!1),i.value=e.value,i.addEventListener("change",n=>e.onChange(i.value,n)),wu(i,t),i}function TLe(e,t){const i=nt("textarea",BL("ag-charts-input ag-charts-textarea",t));return i.value=e.value,i.addEventListener("input",n=>e.onChange(i.value,n)),wu(i,t),Pt(i,"data-preventdefault",!1),i}function ooe(e){const t=nt("span",`ag-charts-icon ag-charts-icon-${e}`);return Pt(t,"aria-hidden",!0),t}function BL(e,t){return t==null?e:`${e} ${t.class}`}var roe=class extends Ls{constructor(t=""){super(),this._d="",this.d=t}get d(){return this._d}set d(t){t!==this._d&&(this._d=t,this.path.clear(),this.path.appendSvg(t),this.checkPathDirty())}},ILe=class extends TS(roe){isPointInPath(e,t){return super.isPointInPath(e-this.translationX,t-this.translationY)}},KS=class extends oh{constructor(e){super(),this.sourceImage=e,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}render(e){const{ctx:t}=e,i=this.sourceImage;i&&(t.globalAlpha=this.opacity,t.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height)),super.render(e)}};E([Le()],KS.prototype,"x",2);E([Le()],KS.prototype,"y",2);E([Le()],KS.prototype,"width",2);E([Le()],KS.prototype,"height",2);E([Le()],KS.prototype,"opacity",2);var cR={};Vu(cR,{ButtonWidget:()=>eD,MenuItemRadioWidget:()=>wH,MenuItemWidget:()=>_L,MenuWidget:()=>DH,NativeWidget:()=>Jb,SliderWidget:()=>KG,ToolbarWidget:()=>EE,WIDGET_HTML_EVENTS:()=>BG,Widget:()=>Hu,WidgetEventUtil:()=>Kd});var _L=class extends jG{constructor(){super(nt("div"),"menuitem")}},wH=class extends jG{constructor(){super(nt("div"),"menuitemradio")}setChecked(e){Pt(this.elem,"aria-checked",e)}},RLe=["Escape","ArrowLeft"],DH=class aoe extends UG{constructor(t="vertical"){super(t,"menu"),this.handleMouseEnter=(i,n)=>{n.hasPopup()||this.expandSubMenu(i,void 0)},this.handleMouseMove=(i,n)=>{n.focus({preventScroll:!0})}}destructor(){this.collapse({mode:"2"})}addSeparator(){const t=Eu().createElement("div");return Pt(t,"role","separator"),this.elem.appendChild(t),t}onChildAdded(t){super.onChildAdded(t),t.addListener("mouseenter",this.handleMouseEnter),t.addListener("mousemove",this.handleMouseMove)}onChildRemoved(t){super.onChildRemoved(t),t.removeListener("mouseenter",this.handleMouseEnter),t.removeListener("mousemove",this.handleMouseMove)}addSubMenu(){const t=new _L,i=new aoe(this.orientation);i.id=pm();const n=()=>{this.collapseExpandedSubMenu(i),t.expandControlled()},s=o=>{J0(o.sourceEvent)&&o.sourceEvent.code==="ArrowRight"&&(this.collapseExpandedSubMenu(i),t.expandControlled())};return t.setControlled(i),t.setAriaHasPopup("menu"),t.addListener("click",n),t.addListener("mouseenter",n),t.addListener("keydown",s),this.addChild(t),{subMenuButton:t,subMenu:i}}expandSubMenu(t,i){const{expansionScope:n}=this;n&&(this.collapseExpandedSubMenu(i),i?.expand(t))}collapseExpandedSubMenu(t){const{expansionScope:i}=this;i&&(i.expandedSubMenu?.collapse({mode:"4"}),i.expandedSubMenu=t)}expand(t){if(this.expansionScope!=null)return;this.expansionScope={lastFocus:HG(t.sourceEvent),expandedSubMenu:void 0,abort:()=>this.collapse({mode:"1"}),close:()=>this.collapse({mode:"0"}),removers:new _i};const i=this.expansionScope,n=this.children.map(s=>s.getElement());Pt(i.lastFocus,"aria-expanded",!0),i.removers.register(Tee(this.elem,i.abort),Iee(this.elem,i.abort),...this.children.map(s=>GG(s.getElement(),i.close,RLe)),t?.overrideFocusVisible&&Eee(this.elem,n,t.overrideFocusVisible)),this.internalListener?.dispatch("expand-widget",this,{type:"expand-widget"}),this.children[0]?.focus({preventScroll:!0})}collapse(t){const{mode:i="0"}=t??{};if(this.expansionScope===void 0)return;const{lastFocus:n,removers:s,expandedSubMenu:o}=this.expansionScope;this.expansionScope=void 0,o?.collapse({mode:"3"}),Pt(n,"aria-expanded",!1),i==="0"&&n?.focus({preventScroll:!0}),s.flush(),this.internalListener?.dispatch("collapse-widget",this,{type:"collapse-widget",mode:i})}},D6="canvas-overlay",MH=class extends vE{constructor(e,t,i){super(),this.ctx=e,this.hideFns=[],this.setOwnedWidget=(()=>{let n;return s=>{n?.destroy(),n=s}})(),this.moduleId=`popover-${t}`,i?.detached?this.element=nt("div"):this.element=e.domManager.addChild(D6,this.moduleId),this.element.setAttribute("role","presentation"),this.hideFns.push(()=>this.setOwnedWidget(void 0)),this.cleanup.register(()=>e.domManager.removeChild(D6,this.moduleId))}attachTo(e){this.element.parentElement||e.element.append(this.element)}hide(e){const{lastFocus:t=this.lastFocus}=e??{};if(this.element.children.length!==0){for(const i of this.hideFns)i();t?.focus(),this.lastFocus=void 0}}removeChildren(){this.element.replaceChildren()}initPopoverElement(e,t){if(!this.element.parentElement)throw new Error("Can not show popover that has not been attached to a parent.");return e??(e=nt("div","ag-charts-popover")),e.classList.toggle("ag-charts-popover",!0),t.ariaLabel!=null&&e.setAttribute("aria-label",t.ariaLabel),t.class!=null&&e.classList.add(t.class),this.element.replaceChildren(e),e}showWidget(e,t,i){this.setOwnedWidget(t),this.initPopoverElement(t.getElement(),i),t.addListener("collapse-widget",()=>{e.setControlled(void 0),this.setOwnedWidget(void 0)}),e.setControlled(t),e.expandControlled()}showWithChildren(e,t){const i=this.initPopoverElement(void 0,t);if(i.replaceChildren(...e),this.hideFns.push(()=>this.removeChildren()),t.onHide&&this.hideFns.push(t.onHide),t.initialFocus&&t.sourceEvent){const n=HG(t.sourceEvent);n!==void 0&&(this.lastFocus=n,this.initialFocus=t.initialFocus)}return i}getPopoverElement(){return this.element.firstElementChild}updatePosition(e){const t=this.getPopoverElement();t&&(t.style.setProperty("right","unset"),t.style.setProperty("bottom","unset"),e.x!=null&&t.style.setProperty("left",`${Math.floor(e.x)}px`),e.y!=null&&t.style.setProperty("top",`${Math.floor(e.y)}px`),this.initialFocus?.focus(),this.initialFocus=void 0)}},loe=class extends MH{setAnchor(e,t){this.anchor=e,this.fallbackAnchor=t,this.updatePosition(e),this.repositionWithinBounds()}updateAnchor(e){const t=e.anchor??this.anchor,i=e.fallbackAnchor??this.fallbackAnchor;t&&this.setAnchor(t,i)}showWidget(e,t,i){super.showWidget(e,t,i),this.updateAnchor(i)}showWithChildren(e,t){const i=super.showWithChildren(e,t);return this.updateAnchor(t),Qt().requestAnimationFrame(()=>{this.repositionWithinBounds()}),i}repositionWithinBounds(){const{anchor:e,ctx:t,fallbackAnchor:i}=this,n=this.getPopoverElement();if(!e||!n)return;const s=t.domManager.getBoundingClientRect(),{offsetWidth:o,offsetHeight:r}=n;let a=Je(0,e.x,s.width-o),l=Je(0,e.y,s.height-r);a!==e.x&&i?.x!=null&&(a=Je(0,i.x-o,s.width-o)),l!==e.y&&i?.y!=null&&(l=Je(0,i.y-r,s.height-r)),this.updatePosition({x:a,y:l})}},ELe=class extends loe{show(t,i){const n=new DH("vertical");for(const s of i.items)n.addChild(this.createRow(i,s,n));n.addClass("ag-charts-menu"),this.showWidget(t,n,i)}allocRow(t,i){if(t.menuItemRole==null||t.menuItemRole==="menuitem")return new _L;{t.menuItemRole;const n=new wH;return n.setChecked(t.value===i.value),n}}createRow(t,i,n){const s=i.value===t.value,o=this.allocRow(t,i);if(o.addClass("ag-charts-menu__row"),o.toggleClass("ag-charts-menu__row--active",s),typeof i.value=="string"&&(o.getElement().dataset.popoverId=i.value),i.icon!=null){const a=nt("span",`ag-charts-menu__icon ${kE(i.icon)}`);o.getElement().appendChild(a)}const r=i.strokeWidth!=null;if(r&&(o.toggleClass("ag-charts-menu__row--stroke-width-visible",r),o.setCSSVariable("--strokeWidth",r?`${i.strokeWidth}px`:null)),i.label!=null){const a=nt("span","ag-charts-menu__label");a.textContent=this.ctx.localeManager.t(i.label),o.getElement().appendChild(a)}return"altText"in i&&o.setAriaLabel(this.ctx.localeManager.t(i.altText)),o.addListener("click",({sourceEvent:a})=>{t.onPress?.(i),a.preventDefault(),a.stopPropagation(),n.collapse()}),o}},coe=class extends MH{constructor(){super(...arguments),this.dragged=!1}setDragHandle(t){t.addListener("drag-start",i=>{t.addClass(this.dragHandleDraggingClass),this.onDragStart(i)}),t.addListener("drag-move",this.onDragMove.bind(this)),t.addListener("drag-end",()=>{t.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)})}onDragStart(t){const i=this.getPopoverElement();i&&(t.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:ib.from(t.clientX,t.clientY),position:ib.from(Number(i.style.getPropertyValue("left").replace("px","")),Number(i.style.getPropertyValue("top").replace("px","")))})}onDragMove(t){const{dragStartState:i}=this,n=this.getPopoverElement();if(!i||!n)return;const s=ib.sub(ib.from(t.clientX,t.clientY),i.client),o=ib.add(i.position,s),r=this.ctx.domManager.getBoundingClientRect(),a={};o.x>=0&&o.x+n.offsetWidth<=r.width&&(a.x=o.x),o.y>=0&&o.y+n.offsetHeight<=r.height&&(a.y=o.y),this.updatePosition(a)}onDragEnd(){this.dragStartState=void 0}},jD=class extends pt{};E([F],jD.prototype,"icon",2);E([F],jD.prototype,"label",2);E([F],jD.prototype,"ariaLabel",2);E([F],jD.prototype,"tooltip",2);var LLe={"disjoint-channel":"false","fibonacci-menu":"menu","fibonacci-retracement":"false","fibonacci-retracement-trend-based":"false","fill-color":"dialog","horizontal-line":"false","line-color":"dialog","line-menu":"menu","line-stroke-width":"menu","line-style-type":"menu","measurer-menu":"menu","pan-end":"false","pan-left":"false","pan-right":"false","pan-start":"false","parallel-channel":"false","shape-menu":"menu","text-color":"dialog","text-menu":"menu","text-size":"menu","vertical-line":"false","zoom-in":"false","zoom-out":"false",callout:"false",clear:"false",comment:"false",delete:"false",line:"false",lock:"false",menu:"menu",note:"false",reset:"false",settings:"dialog",text:"false"};function PLe(e){return typeof e!="string"?"false":LLe[e]}var uoe=class extends eD{constructor(t){super(),this.localeManager=t}update(t){const{localeManager:i}=this;t.tooltip&&(this.elem.title=i.t(t.tooltip));let n="";if(t.icon!=null&&(n=`<span class="${kE(t.icon)} ag-charts-toolbar__icon"></span>`),t.label!=null){const o=i.t(t.label);n=`${n}<span class="ag-charts-toolbar__label">${o}</span>`}const s=PLe(t.value);s=="false"?(this.setAriaHasPopup(void 0),this.setAriaExpanded(void 0)):(this.setAriaHasPopup(s),this.setAriaExpanded(!1)),this.elem.innerHTML=n}setChecked(t){Pt(this.elem,"aria-checked",t)}},M6="ag-charts-toolbar__button--active",AH=class extends EE{constructor({eventsHub:e,localeManager:t},i,n){super(n),this.ariaLabelId=i,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new Gee,this.hasPrefix=!1,this.buttonWidgets=[],this.updateAriaLabel=()=>this.setAriaLabel(this.localeManager.t(this.ariaLabelId)),this.eventsHub=e,this.localeManager=t,this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal",n==="horizontal"),this.toggleClass("ag-charts-toolbar--vertical",n==="vertical"),this.eventsHub.on("locale:change",this.updateAriaLabel),this.updateAriaLabel()}setAriaLabelId(e){this.ariaLabelId=e,this.updateAriaLabel()}addToolbarListener(e,t){return this.events.addListener(e,t)}clearButtons(){this.expanded?.collapse({mode:"2"});for(const e of this.buttonWidgets)e.destroy();this.buttonWidgets.splice(0)}updateButtons(e){const{buttonWidgets:t}=this;for(const[i,n]of e.entries())(this.buttonWidgets.at(i)??this.createButton(i,n)).update(n);for(let i=e.length;i<t.length;i++)this.buttonWidgets.at(i)?.destroy();this.buttonWidgets.splice(e.length),this.refreshButtonClasses()}updateButtonByIndex(e,t){this.buttonWidgets.at(e)?.update(t)}clearActiveButton(){for(const e of this.buttonWidgets)e.toggleClass(M6,!1)}toggleActiveButtonByIndex(e){if(e!==-1)for(const[t,i]of this.buttonWidgets.entries())i.toggleClass(M6,e!=null&&e===t)}toggleButtonEnabledByIndex(e,t){e!==-1&&this.buttonWidgets.at(e)?.setEnabled(t)}toggleSwitchCheckedByIndex(e,t){e!==-1&&this.buttonWidgets.at(e)?.setChecked(t)}getButtonBounds(){return this.buttonWidgets.map(e=>this.getButtonWidgetBounds(e))}setButtonHiddenByIndex(e,t){this.buttonWidgets.at(e)?.setHidden(t)}getButtonWidgetBounds(e){const t=this.getBounds(),i=e.getBounds();return new He(i.x+t.x,i.y+t.y,i.width,i.height)}refreshButtonClasses(){const{buttonWidgets:e,hasPrefix:t}=this;let i,n,s;for(const[o,r]of e.entries())i=!t&&o===0||s!=r.section,n=o===e.length-1||r.section!=e.at(o+1)?.section,r.toggleClass("ag-charts-toolbar__button--first",i),r.toggleClass("ag-charts-toolbar__button--last",n),r.toggleClass("ag-charts-toolbar__button--gap",o>0&&i),s=r.section}createButton(e,t){const i=this.createButtonWidget();return i.addClass("ag-charts-toolbar__button"),i.addListener("click",n=>{const s={index:e,...t instanceof pt?t.toJson():t},o=this.getButtonWidgetBounds(i),r={event:n,button:s,buttonBounds:o,buttonWidget:i};this.events.dispatch("button-pressed",r)}),i.addListener("focus",()=>{const n={button:{index:e}};this.events.dispatch("button-focused",n)}),i.addListener("expand-controlled-widget",n=>{this.expanded?.collapse({mode:"4"}),this.expanded=n.controlled;const s=this.expanded.addListener("collapse-widget",()=>{this.expanded=void 0,s()})}),t.section&&(i.section=t.section),this.buttonWidgets.push(i),this.addChild(i),i}},NLe=class extends AH{createButtonWidget(){return new uoe(this.localeManager)}},OLe=class extends coe{constructor(e,t,i){super(e,t),this.onPopoverMoved=i,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(e,t={}){this.showWithChildren(e,{...t,class:"ag-charts-floating-toolbar"})}hide(){this.dragged=!1,super.hide()}getBounds(){const e=this.getPopoverElement();return new He(e?.offsetLeft??0,e?.offsetTop??0,e?.offsetWidth??0,e?.offsetHeight??0)}hasBeenDragged(){return this.dragged}setAnchor(e,t,i){const n=this.getPopoverElement();if(!n)return;const s=e.position??"above",{offsetWidth:o,offsetHeight:r}=n;let a=e.y-r-i,l=e.x-o/2;s==="below"?a=e.y+i:s==="right"?(a=e.y-r/2,l=e.x+t):s==="above-left"&&(l=e.x),this.updatePosition({x:l,y:a})}ignorePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="none")}capturePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="unset")}updatePosition(e){const t=this.getBounds(),i=this.ctx.domManager.getBoundingClientRect();e.x=Math.floor(Je(0,e.x,i.width-t.width)),e.y=Math.floor(Je(0,e.y,i.height-t.height)),super.updatePosition(e),this.onPopoverMoved()}},FLe=class extends AH{constructor(t,i,n){super(t,i,"horizontal"),this.hasPrefix=!0,this.popover=new OLe(t,n,this.onPopoverMoved.bind(this)),this.dragHandle=new BLe(t.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}destroy(){super.destroy(),this.popover.destroy()}show(t={}){this.popover.show([this.dragHandle.getElement(),this.getElement()],t)}hide(){this.popover.hide()}setAnchor(t){this.popover.setAnchor(t,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){const t=this.popover.getBounds();if(this.popoverBounds?.equals(t))return;this.popoverBounds=t.clone();const i=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:t,buttonBounds:i})}getButtonWidgetBounds(t){const i=this.popover.getBounds(),n=super.getButtonWidgetBounds(t),s=this.dragHandle.getBounds();return new He(n.x+i.x-s.width,n.y+i.y,n.width,n.height)}},BLe=class extends Jb{constructor(t){super(nt("div","ag-charts-floating-toolbar__drag-handle"));const i=new Jb(nt("span",`${kE("drag-handle")} ag-charts-toolbar__icon`));i.setAriaHidden(!0),this.addChild(i),this.elem.title=t}},_Le={...yte,...vte};Al.create.bind(Al),Al.__createSparkline.bind(Al);function A6(e,t){return{...e,container:t.current}}function zLe(e,t){const i=P.forwardRef(function(s,o){const{options:r,style:a,className:l}=s,c=P.useRef(null),u=P.useRef();P.useLayoutEffect(()=>{const p=e(A6(r,c));return u.current=p,()=>{p.destroy()}},[]);const d=u.current===void 0;return P.useEffect(()=>{d||u.current?.update(A6(r,c)).catch(p=>console.error(p))},[r]),P.useImperativeHandle(o,()=>u.current,[]),P.useMemo(()=>P.createElement("div",{ref:c,style:a,className:l}),[a,l])});return i.displayName=t,i}var k6=zLe(e=>Al.create(e),"AgCharts"),GLe=Object.defineProperty,D=(e,t,i,n)=>{for(var s=void 0,o=e.length-1,r;o>=0;o--)(r=e[o])&&(s=r(t,i,s)||s);return s&&GLe(t,i,s),s},VLe=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(e,t){let i=e[0],n=e[1],s=e[2],o=e[3];i=this.ff(i,n,s,o,t[0],7,-680876936),o=this.ff(o,i,n,s,t[1],12,-389564586),s=this.ff(s,o,i,n,t[2],17,606105819),n=this.ff(n,s,o,i,t[3],22,-1044525330),i=this.ff(i,n,s,o,t[4],7,-176418897),o=this.ff(o,i,n,s,t[5],12,1200080426),s=this.ff(s,o,i,n,t[6],17,-1473231341),n=this.ff(n,s,o,i,t[7],22,-45705983),i=this.ff(i,n,s,o,t[8],7,1770035416),o=this.ff(o,i,n,s,t[9],12,-1958414417),s=this.ff(s,o,i,n,t[10],17,-42063),n=this.ff(n,s,o,i,t[11],22,-1990404162),i=this.ff(i,n,s,o,t[12],7,1804603682),o=this.ff(o,i,n,s,t[13],12,-40341101),s=this.ff(s,o,i,n,t[14],17,-1502002290),n=this.ff(n,s,o,i,t[15],22,1236535329),i=this.gg(i,n,s,o,t[1],5,-165796510),o=this.gg(o,i,n,s,t[6],9,-1069501632),s=this.gg(s,o,i,n,t[11],14,643717713),n=this.gg(n,s,o,i,t[0],20,-373897302),i=this.gg(i,n,s,o,t[5],5,-701558691),o=this.gg(o,i,n,s,t[10],9,38016083),s=this.gg(s,o,i,n,t[15],14,-660478335),n=this.gg(n,s,o,i,t[4],20,-405537848),i=this.gg(i,n,s,o,t[9],5,568446438),o=this.gg(o,i,n,s,t[14],9,-1019803690),s=this.gg(s,o,i,n,t[3],14,-187363961),n=this.gg(n,s,o,i,t[8],20,1163531501),i=this.gg(i,n,s,o,t[13],5,-1444681467),o=this.gg(o,i,n,s,t[2],9,-51403784),s=this.gg(s,o,i,n,t[7],14,1735328473),n=this.gg(n,s,o,i,t[12],20,-1926607734),i=this.hh(i,n,s,o,t[5],4,-378558),o=this.hh(o,i,n,s,t[8],11,-2022574463),s=this.hh(s,o,i,n,t[11],16,1839030562),n=this.hh(n,s,o,i,t[14],23,-35309556),i=this.hh(i,n,s,o,t[1],4,-1530992060),o=this.hh(o,i,n,s,t[4],11,1272893353),s=this.hh(s,o,i,n,t[7],16,-155497632),n=this.hh(n,s,o,i,t[10],23,-1094730640),i=this.hh(i,n,s,o,t[13],4,681279174),o=this.hh(o,i,n,s,t[0],11,-358537222),s=this.hh(s,o,i,n,t[3],16,-722521979),n=this.hh(n,s,o,i,t[6],23,76029189),i=this.hh(i,n,s,o,t[9],4,-640364487),o=this.hh(o,i,n,s,t[12],11,-421815835),s=this.hh(s,o,i,n,t[15],16,530742520),n=this.hh(n,s,o,i,t[2],23,-995338651),i=this.ii(i,n,s,o,t[0],6,-198630844),o=this.ii(o,i,n,s,t[7],10,1126891415),s=this.ii(s,o,i,n,t[14],15,-1416354905),n=this.ii(n,s,o,i,t[5],21,-57434055),i=this.ii(i,n,s,o,t[12],6,1700485571),o=this.ii(o,i,n,s,t[3],10,-1894986606),s=this.ii(s,o,i,n,t[10],15,-1051523),n=this.ii(n,s,o,i,t[1],21,-2054922799),i=this.ii(i,n,s,o,t[8],6,1873313359),o=this.ii(o,i,n,s,t[15],10,-30611744),s=this.ii(s,o,i,n,t[6],15,-1560198380),n=this.ii(n,s,o,i,t[13],21,1309151649),i=this.ii(i,n,s,o,t[4],6,-145523070),o=this.ii(o,i,n,s,t[11],10,-1120210379),s=this.ii(s,o,i,n,t[2],15,718787259),n=this.ii(n,s,o,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(n,e[1]),e[2]=this.add32(s,e[2]),e[3]=this.add32(o,e[3])}cmn(e,t,i,n,s,o){return t=this.add32(this.add32(t,e),this.add32(n,o)),this.add32(t<<s|t>>>32-s,i)}ff(e,t,i,n,s,o,r){return this.cmn(t&i|~t&n,e,t,s,o,r)}gg(e,t,i,n,s,o,r){return this.cmn(t&n|i&~n,e,t,s,o,r)}hh(e,t,i,n,s,o,r){return this.cmn(t^i^n,e,t,s,o,r)}ii(e,t,i,n,s,o,r){return this.cmn(i^(t|~n),e,t,s,o,r)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let n;for(n=64;n<=e.length;n+=64)this.md5cycle(i,this.md5blk(e.substring(n-64,n)));e=e.substring(n-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)s[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(s[n>>2]|=128<<(n%4<<3),n>55)for(this.md5cycle(i,s),n=0;n<16;n++)s[n]=0;return s[14]=t*8,this.md5cycle(i,s),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",n=0;for(;n<4;n++)i+=t[e>>n*8+4&15]+t[e>>n*8&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(i>>16)<<16|i&65535}};function _F(e){return e==null||e.length===0}var ak={"01":"GRID","02":"CHARTS","0102":"BOTH"},T6="https://www.ag-grid.com/charts/licensing/",kH=class fs{constructor(t){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=t,this.md5=new VLe,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(fs.licenseKey,fs.gridContext),i=`AG ${t.currentLicenseType==="BOTH"?"Grid and ":""}Charts Enterprise`;let n="";if(t.suppliedLicenseType==="BOTH"?n="AG Grid and AG Charts Enterprise":t.suppliedLicenseType==="GRID"?n="AG Grid Enterprise":t.suppliedLicenseType!==void 0&&(n="AG Charts Enterprise"),t.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(t.expired){const s=fs.getChartsReleaseDate(),o=fs.formatDate(s);this.outputExpiredKey(t.expiry,o,n)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,i,n):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,i,n)}static extractExpiry(t){const i=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(Number.parseInt(fs.decode(i),10))}static extractLicenseComponents(t){let i=t.replaceAll(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replaceAll(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const n=i.length-32,s=i.substring(n),o=i.substring(0,n),[r,a,l]=fs.extractBracketedInformation(i);return{md5:s,license:o,version:r,isTrial:a,type:l}}getLicenseDetails(t,i=!1){const n="CHARTS";if(_F(t))return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:n};const s=fs.getChartsReleaseDate(),{md5:o,license:r,version:a,isTrial:l,type:c}=fs.extractLicenseComponents(t);let u=o===this.md5.md5(r)&&!t.includes("For_Trialing_ag-Grid_Only"),d,p,f=null,m=!1,v;function b(){d=f<new Date,p=void 0}if(u&&(f=fs.extractExpiry(r),u=!Number.isNaN(f.getTime()),u))switch(p=s>f,a){case"legacy":case"2":{u=!1;break}case"3":_F(c)?u=!1:(v=c,c!==ak["02"]&&c!==ak["0102"]?(u=!1,m=!0):l&&b())}return u?{licenseKey:t,valid:u,expiry:fs.formatDate(f),expired:p,version:a,isTrial:l,trialExpired:d,invalidLicenseTypeForCombo:i?v!=="BOTH":void 0,incorrectLicenseType:m,currentLicenseType:n,suppliedLicenseType:v}:{licenseKey:t,valid:u,incorrectLicenseType:m,currentLicenseType:n,suppliedLicenseType:v}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isE2ETest()&&!this.isWebsiteUrl()&&!_F(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage??""}getHostname(){if(!this.document)return"localhost";const t=this.document.defaultView??globalThis;if(!t)return"localhost";const i=t.location,{hostname:n=""}=i;return n}isForceWatermark(){if(!this.document)return!1;const t=this.document?.defaultView??globalThis.window!=null?globalThis:void 0;if(!t)return!1;const{pathname:i}=t.location;return i?i.includes("forceWatermark"):!1}isWebsiteUrl(){const t=this.getHostname();return/^((?:[\w-]+\.)?ag-grid\.com)$/.exec(t)!==null}isLocalhost(){const t=this.getHostname();return/^(?:127\.0\.0\.1|localhost)$/.exec(t)!==null}isE2ETest(){const t=this.getHostname();return/^(?:172\.17\.0\.1|host\.docker\.internal)$/.exec(t)!==null}static formatDate(t){const i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=t.getDate(),s=t.getMonth(),o=t.getFullYear();return n+" "+i[s]+" "+o}static getChartsReleaseDate(){return new Date(Number.parseInt(fs.decode(fs.RELEASE_INFORMATION),10))}static decode(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",s,o,r,a,l,c,u,d=0;const p=t.replaceAll(/[^A-Za-z0-9+/=]/g,"");for(;d<p.length;)a=i.indexOf(p.charAt(d++)),l=i.indexOf(p.charAt(d++)),c=i.indexOf(p.charAt(d++)),u=i.indexOf(p.charAt(d++)),s=a<<2|l>>4,o=(l&15)<<4|c>>2,r=(c&3)<<6|u,n=n+String.fromCodePoint(s),c!=64&&(n=n+String.fromCodePoint(o)),u!=64&&(n=n+String.fromCodePoint(r));return n=fs.utf8_decode(n),n}static utf8_decode(t){t=t.replaceAll("rn","n");let i="";for(let n=0;n<t.length;n++){const s=t.codePointAt(n);s<128?i+=String.fromCodePoint(s):s>127&&s<2048?(i+=String.fromCodePoint(s>>6|192),i+=String.fromCodePoint(s&63|128)):(i+=String.fromCodePoint(s>>12|224),i+=String.fromCodePoint(s>>6&63|128),i+=String.fromCodePoint(s&63|128))}return i}static setGridContext(t=!1){fs.gridContext=t}static setLicenseKey(t){this.licenseKey&&this.licenseKey!==t&&console.warn("License Key being set multiple times with different values. This can result in an incorrect license key being used."),fs.licenseKey=t}static extractBracketedInformation(t){if(!t.includes("["))return["legacy",!1,void 0];const i=t.match(/\[(.*?)\]/g).map(a=>a.replace("[","").replace("]",""));if(!i||i.length===0)return["legacy",!1,void 0];const n=i.filter(a=>a==="TRIAL").length===1,s=i.find(a=>a.startsWith("v")),o=s?s.replace("v",""):"legacy",r=ak[i.find(a=>ak[a])];return[o,n,r]}centerPadAndOutput(t){const i=this.totalMessageLength-t.length;console.error(t.padStart(i/2+t.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(t,i="*",n=""){console.error(t.padEnd(this.totalMessageLength-n.length,i)+n)}outputInvalidLicenseKey(t,i,n){fs.gridContext||(t?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${n} only and does not cover you for ${i}.`," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${T6}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid."," ","*"),this.padAndOutput(`* To troubleshoot your license key visit ${T6}.`," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(t,i,n){fs.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${n} expired on ${t}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(t){fs.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${t} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${t} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(t,i,n){fs.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${n} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${n} released before ${t}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};kH.RELEASE_INFORMATION="MTc2MTcyODQ5OTU1NQ==";kH.gridContext=!1;var iw=kH;function zF(e,t,i){const n=(o,r,a,l)=>{let c=e[0];for(let u=o;a>0?u<=r:u>r;u+=a){const d=e[u];if(l(c,d))return!0;c=d}return!1},s=Math.floor(e.length/2);return n(t,s,t,i)?!0:n(e.length-t,s,-t,i)}var{AxisInterval:HLe,Property:WLe}=N,TH=class extends HLe{};D([WLe],TH.prototype,"minSpacing");var{BaseProperties:doe,ChartAxisDirection:jLe,Property:zn,Group:GF,FONT_SIZE:ULe}=N,Ec=class extends doe{constructor(){super(...arguments),this.fontSize=ULe.LARGE,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};D([zn],Ec.prototype,"enabled");D([zn],Ec.prototype,"text");D([zn],Ec.prototype,"fontStyle");D([zn],Ec.prototype,"fontWeight");D([zn],Ec.prototype,"fontSize");D([zn],Ec.prototype,"fontFamily");D([zn],Ec.prototype,"padding");D([zn],Ec.prototype,"color");D([zn],Ec.prototype,"parallel");var Cr=class extends doe{constructor(){super(...arguments),this.id=To(this),this.defaultColorRange=[],this.shape="polygon",this.label=new Ec,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=jLe.Angle,this.axisInnerRadius=0,this.axisOuterRadius=0,this.lineGroup=new GF({name:this.id}),this.rangeGroup=new GF({name:this.id}),this.labelGroup=new GF({name:this.id}),this._isRange=void 0}assignCrossLineGroup(e,t){e!==this._isRange&&(e?this.rangeGroup.appendChild(t):this.lineGroup.appendChild(t)),this._isRange=e}setSectorNodeProps(e){e.fill=this.fill,e.fillOpacity=this.fillOpacity??1,e.stroke=this.stroke,e.strokeOpacity=this.strokeOpacity??1,e.strokeWidth=this.strokeWidth??1,e.lineDash=this.lineDash}setLabelNodeProps(e,t,i,n,s){const{label:o}=this;e.x=t,e.y=i,e.text=o.text,e.textAlign="center",e.textBaseline=n,e.rotation=s,e.rotationCenterX=t,e.rotationCenterY=i,e.fill=o.color,e.fontFamily=o.fontFamily,e.fontSize=o.fontSize,e.fontStyle=o.fontStyle,e.visible=!0}};D([zn],Cr.prototype,"enabled");D([zn],Cr.prototype,"type");D([zn],Cr.prototype,"range");D([zn],Cr.prototype,"value");D([zn],Cr.prototype,"defaultColorRange");D([zn],Cr.prototype,"fill");D([zn],Cr.prototype,"fillOpacity");D([zn],Cr.prototype,"stroke");D([zn],Cr.prototype,"strokeWidth");D([zn],Cr.prototype,"strokeOpacity");D([zn],Cr.prototype,"lineDash");D([zn],Cr.prototype,"shape");D([zn],Cr.prototype,"label");var{ChartAxisDirection:$Le,getCrossLineValue:KLe,validateCrossLineValue:YLe,normalizeAngle360:VF,Group:XLe,Path:I6,Sector:ZLe,RotatableText:qLe,ContinuousScale:QLe}=N,IH=class extends Cr{constructor(){super(),this.direction=$Le.Angle,this.polygonNode=new I6,this.sectorNode=new ZLe,this.lineNode=new I6,this.crossLineRange=new XLe,this.labelNode=new qLe,this.ticks=[],this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.crossLineRange.append(this.lineNode),this.labelGroup.append(this.labelNode)}visibilityCheck(){if(!QLe.is(this.scale))return!0;const[e,t]=this.scale.domain,i=KLe(this);if(this.type==="range"){const[n,s]=i;return n>=e&&n<=t&&s>=n&&s<=t}else return i>=e&&i<=t}update(e){const{scale:t}=this;if(!t||!YLe(this,t)||!this.visibilityCheck()){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateLineNode(e),this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e)}updateLineNode(e){const{scale:t,type:i,value:n,lineNode:s}=this;if(!e||i!=="line"||!t){s.visible=!1;return}const o=t.convert(n);if(Number.isNaN(o)){s.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:a}=this;s.visible=!0,s.stroke=this.stroke,s.strokeOpacity=this.strokeOpacity??1,s.strokeWidth=this.strokeWidth??1,s.fill=void 0,s.lineDash=this.lineDash;const l=a*Math.cos(o),c=a*Math.sin(o),u=r*Math.cos(o),d=r*Math.sin(o);s.path.clear(!0),s.path.moveTo(u,d),s.path.lineTo(l,c),this.assignCrossLineGroup(!1,this.crossLineRange)}updatePolygonNode(e){const{polygonNode:t,range:i,scale:n,shape:s,type:o,ticks:r}=this;if(!e||o!=="range"||s!=="polygon"||!n||!i){t.visible=!1;return}const{axisInnerRadius:a,axisOuterRadius:l}=this,c=r.indexOf(i[0]),u=r.indexOf(i[1]),p=(c<=u?r.slice(c,u+1):r.slice(c).concat(r.slice(0,u+1))).map(m=>n.convert(m));t.visible=!0,this.setSectorNodeProps(t);const{path:f}=t;f.clear(!0);for(const[m,v]of p.entries()){const b=l*Math.cos(v),C=l*Math.sin(v);m===0?f.moveTo(b,C):f.lineTo(b,C)}if(a===0)f.lineTo(0,0);else{const m=p.slice().reverse();for(const v of m){const b=a*Math.cos(v),C=a*Math.sin(v);f.lineTo(b,C)}}t.path.closePath(),this.assignCrossLineGroup(!0,this.crossLineRange)}updateSectorNode(e){const{sectorNode:t,range:i,scale:n,shape:s,type:o}=this;if(!e||o!=="range"||s!=="circle"||!n||!i){t.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:a}=this,l=i.map(d=>n.convert(d)),c=n.step??0,u=n instanceof N.BandScale?c/2:0;t.visible=!0,this.setSectorNodeProps(t),t.centerX=0,t.centerY=0,t.innerRadius=r,t.outerRadius=a,t.startAngle=l[0]-u,t.endAngle=l[1]+u,this.assignCrossLineGroup(!0,this.crossLineRange)}updateLabelNode(e){const{label:t,labelNode:i,range:n,scale:s,type:o,ticks:r}=this;if(!e||t.enabled===!1||!t.text||!s||o==="range"&&!n){i.visible=!1;return}i.visible=!0;const{axisInnerRadius:a,axisOuterRadius:l}=this;let c,u,d,p;if(o==="line"){const f=VF(s.convert(this.value)),m=1.5*Math.PI,v=Jt(f,m)||f>m||f<Math.PI/2,b=(a+l)/2*Math.cos(f),C=(a+l)/2*Math.sin(f);c=b+t.padding*Math.cos(f+Math.PI/2),u=C+t.padding*Math.sin(f+Math.PI/2),p=v?"top":"bottom",d=v?f:f-Math.PI}else{const[f,m]=n.map(x=>VF(s.convert(x)));let v=(f+m)/2;f>m&&(v-=Math.PI),v=VF(v);const b=(Jt(v,0)||v>0)&&v<Math.PI;let C;this.shape==="circle"||r.length<3?C=l-t.padding:C=l*Math.cos(Math.PI/r.length)-t.padding,c=C*Math.cos(v),u=C*Math.sin(v),p=b?"bottom":"top",d=b?v-Math.PI/2:v+Math.PI/2}this.setLabelNodeProps(i,c,u,p,d)}};IH.className="AngleCrossLine";var{ChartAxisDirection:JLe,Property:RH,toRadians:Ix,normalizeAngle360:yp,normalizeAngle360Inclusive:e1e,Path:t1e,RotatableText:i1e,Transformable:n1e,BBox:s1e,Selection:R6,Line:E6}=N,B_=class extends N.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};D([RH],B_.prototype,"orientation");var UD=class extends N.PolarAxis{constructor(e,t){super(e,t),this.startAngle=0,this.endAngle=void 0,this.tickLineGroupSelection=R6.select(this.tickLineGroup,E6,!1),this.gridLineGroupSelection=R6.select(this.gridLineGroup,E6,!1),this.labelData=[],this.tickData=[],this.radiusLineGroup=this.axisGroup.appendChild(new N.TransformableGroup),this.radiusLine=this.radiusLineGroup.appendChild(new t1e),this.includeInvisibleDomains=!0}get direction(){return JLe.Angle}createLabel(){return new B_}calculateRotations(){const e=Ix(this.startAngle),t=yp(e),i=yp(e-Math.PI/2);return{rotation:e,parallelFlipRotation:t,regularFlipRotation:i}}calculateTickLayout(e){const{nice:t,scale:i}=this,n={nice:t,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},s=t?i.niceDomain(n,e):e,o=this.generateAngleTicks(s);this.tickData=o;const r=o.map(l=>l.value),a=r.reduce((l,c)=>Math.max(typeof c=="number"?X0(c):0,l),0);return{niceDomain:s,tickDomain:s,ticks:r,rawTickCount:void 0,fractionDigits:a,timeInterval:void 0,bbox:this.getBBox()}}update(){super.update(),this.updateRadiusLine(),this.updateGridLines(),this.updateTickLines()}normalizedAngles(){const e=yp(-Math.PI/2+Ix(this.startAngle)),t=this.endAngle==null?2*Math.PI:e1e(Ix(this.endAngle)-Ix(this.startAngle)),i=e+t;return[e,i]}computeRange(){this.range=this.normalizedAngles()}updateSelections(){const e=this.tickData;this.gridLineGroupSelection.update(this.gridLength&&this.gridLine.enabled?e:[]),this.tickLineGroupSelection.update(this.tick.enabled?e:[]),this.tickLabelGroupSelection.update(this.label.enabled?e:[]),this.gridLineGroupSelection.cleanup(),this.tickLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup()}updatePosition(){super.updatePosition();const{translation:e,radiusLineGroup:t}=this,i=Math.floor(e.x),n=Math.floor(e.y);t.translationX=i,t.translationY=n}updateRadiusLine(){const e=this.radiusLine,{path:t}=e;t.clear(!0);const{points:i,closePath:n}=this.getAxisLinePoints();for(const{x:s,y:o,moveTo:r,arc:a,radius:l=0,startAngle:c=0,endAngle:u=0}of i)a?t.arc(s,o,l,c,u):r?t.moveTo(s,o):t.lineTo(s,o);n&&t.closePath(),e.visible=this.line.enabled,e.stroke=this.line.stroke,e.strokeWidth=this.line.width,e.fill=void 0}getAxisLinePoints(){const{scale:e,shape:t,gridLength:i}=this,[n,s]=this.range,o=Jt(s-n,2*Math.PI),r=[];if(t==="circle")o?r.push({x:i,y:0,moveTo:!0},{x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1}):r.push({x:i*Math.cos(n),y:i*Math.sin(n),moveTo:!0},{x:0,y:0,radius:i,startAngle:yp(n),endAngle:yp(s),arc:!0,moveTo:!1});else if(t==="polygon"){const a=e.ticks({nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.map(l=>e.convert(l));if(a&&a.length>2)for(const[l,c]of a.entries()){const u=i*Math.cos(c),d=i*Math.sin(c),p=l===0;r.push({x:u,y:d,moveTo:p})}}return{points:r,closePath:o}}updateGridLines(){const{scale:e,gridLength:t,gridLine:{style:i,width:n},innerRadiusRatio:s}=this;if(!(i&&t>0))return;const o=t*s,r=i.length;this.gridLineGroupSelection.each((a,l,c)=>{const{value:u}=l,{stroke:d,lineDash:p}=i[c%r],f=e.convert(u);a.x1=o*Math.cos(f),a.y1=o*Math.sin(f),a.x2=t*Math.cos(f),a.y2=t*Math.sin(f),a.stroke=d,a.strokeWidth=n,a.lineDash=p,a.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:e,tickLabelGroupSelection:t}=this;t.each((i,n,s)=>{const o=this.labelData[s];if(!o||o.hidden){i.visible=!1;return}i.text=o.text,i.setFont(e),i.fill=e.color,i.x=o.x,i.y=o.y,i.setAlign(o),i.setBoxing(e),i.visible=!0,o.rotation?(i.rotation=o.rotation,i.rotationCenterX=o.x,i.rotationCenterY=o.y):i.rotation=0})}updateTickLines(){const{scale:e,gridLength:t,tick:i,tickLineGroupSelection:n}=this;n.each((s,o)=>{const{value:r}=o,a=e.convert(r),l=Math.cos(a),c=Math.sin(a);s.x1=t*l,s.y1=t*c,s.x2=(t+i.size)*l,s.y2=(t+i.size)*c,s.stroke=i.stroke,s.strokeWidth=i.width})}createLabelNodeData(e,t,i){const{label:n,gridLength:s,scale:o,tick:r}=this;if(!n.enabled)return[];const a=new i1e,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,{fractionDigits:u}=this.layout.label,d=this.tickFormatter(this.scale.domain,this.tickData,!1,u),p=e.map((f,m)=>{const{value:v}=f,b=s+n.spacing+r.size,C=o.convert(v),x=Math.cos(C),w=Math.sin(C),M=b*x,T=b*w,{textAlign:L,textBaseline:I}=this.getLabelAlign(C),R=m===e.length-1&&v!==e[0]&&Jt(yp(C),yp(o.convert(e[0]))),O=this.getLabelRotation(C);let _=d(v,m);a.text=_,a.x=M,a.y=T,a.setFont(n),a.textAlign=L,a.textBaseline=I,a.rotation=O,O&&(a.rotationCenterX=M,a.rotationCenterY=T);let B=O?n1e.toCanvas(a):a.getBBox();if(B&&t.hideWhenNecessary&&!O){const V=l-B.x,j=B.x+B.width-c,K=1;if(V>K||j>K){const G={maxWidth:B.width-Math.max(V,j),font:n,textWrap:"never"};_=mE(_,G),a.text=_,B=a.getBBox()}}return{text:_,x:M,y:T,textAlign:L,textBaseline:I,hidden:_===""||(f.hidden??R),rotation:O,box:B}});return n.avoidCollisions&&this.avoidLabelCollisions(p),p}computeLabelsBBox(e,t){this.labelData=this.createLabelNodeData(this.tickData,e,t);const i=this.labelData.map(({box:n})=>n).filter(n=>n!=null);return!this.label.enabled||i.length===0?null:s1e.merge(i)}getLabelOrientation(){const{label:e}=this;return e instanceof B_?e.orientation:"fixed"}getLabelRotation(e){let t=Ix(this.label.rotation??0);e=yp(e);const i=this.getLabelOrientation();return i==="parallel"?(t+=e,e>=0&&e<Math.PI?t-=Math.PI/2:t+=Math.PI/2):i==="perpendicular"&&(t+=e,e>=Math.PI/2&&e<1.5*Math.PI&&(t+=Math.PI)),t}getLabelAlign(e){const t=Math.cos(e),i=Math.sin(e);let n,s;const o=this.getLabelOrientation(),r=Jt(t,0),a=Jt(i,0),l=Jt(t,1),c=Jt(i,-1),u=t>0&&!r,d=i>0&&!a;return o==="parallel"?(n="center",s=l&&a||d?"top":"bottom"):o==="perpendicular"?(n=c||u?"left":"right",s="middle"):(n="right",r?n="center":u&&(n="left"),s="bottom",a?s="middle":d&&(s="top")),{textAlign:n,textBaseline:s}}updateCrossLines(){const{shape:e,gridLength:t,innerRadiusRatio:i}=this;for(const n of this.crossLines)n instanceof IH&&(n.ticks=this.tickData.map(s=>s.value),n.shape=e,n.axisOuterRadius=t,n.axisInnerRadius=t*i);super.updateCrossLines()}};UD.CrossLineConstructor=IH;D([RH],UD.prototype,"startAngle");D([RH],UD.prototype,"endAngle");var{Property:EH,CategoryScale:o1e}=N,Lg=class extends UD{constructor(e){super(e,new o1e),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new TH}hasDefinedDomain(){return!1}generateAngleTicks(e){const{scale:t,gridLength:i}=this,{values:n,minSpacing:s}=this.interval,o={nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},r=n??t.ticks(o,e)?.ticks??[];if(r.length<2||s==null)return r.map(d=>({value:d,visible:!0}));const a=r[0],l=t.convert(a),c=i*Math.cos(l),u=i*Math.sin(l);for(let d=1;d<r.length-1;d++){const p=r[d],f=t.convert(p);if(f-l>Math.PI)break;const m=i*Math.cos(f),v=i*Math.sin(f);if(Math.hypot(m-c,v-u)>s){const C=new Set([a]);return zF(r,d,(x,w)=>{C.add(w)}),r.map(x=>{const w=C.has(x);return{value:x,visible:w}})}}return[{value:a,visible:!0}]}avoidLabelCollisions(e){const{minSpacing:t}=this.label;if(e.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;if(t==null)return l.box.collidesBBox(c.box);const u=l.box.clone().grow(t/2),d=c.box.clone().grow(t/2);return u.collidesBBox(d)},n=e[0],s=e.at(-1),o=new Set([n]),r=Jt(n.x,s.x)&&Jt(n.y,s.y),a=Math.floor(e.length/2);for(let l=1;l<=a;l++){const c=r?e.slice(0,-1):e;if(!zF(c,l,i)){zF(c,l,(d,p)=>{o.add(p)});break}}for(const l of e)o.has(l)||(l.hidden=!0,l.box=void 0)}tickFormatParams(){return{type:"category"}}datumFormatParams(e,t){const{datum:i,seriesId:n,legendItemName:s,key:o,source:r,property:a,domain:l,boundSeries:c}=t;return{type:"category",value:e,datum:i,seriesId:n,legendItemName:s,key:o,source:r,property:a,domain:l,boundSeries:c}}};Lg.className="AngleCategoryAxis";Lg.type="angle-category";D([EH],Lg.prototype,"groupPaddingInner");D([EH],Lg.prototype,"paddingInner");D([EH],Lg.prototype,"interval");var r1e={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",moduleFactory:e=>new Lg(e)},{range:L6,isDenseInterval:a1e,LinearScale:HF}=N,hoe=class __ extends HF{constructor(){super(...arguments),this.arcLength=0}static getNiceStepAndTickCount(t,i){const[n,s]=i;let o=HF.getTickStep(n,s,t);const r=Number.isNaN(t.maxTickCount)?1/0:t.maxTickCount,a=Math.abs(s-n)/o;let l=Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)));return l>r&&(l/=2,o*=2),{count:l,step:o}}ticks(t,i=this.domain){const{arcLength:n}=this;if(!i||i.length<2||i.some(c=>!Number.isFinite(c))||n<=0)return{ticks:[],count:0};const{nice:s,interval:o}=t,[r,a]=i;if(o){const c=Math.abs(o),u=this.getPixelRange();if(!a1e((a-r)/c,u))return L6(r,a,c)}let l;if(s&&this.hasNiceRange()){const c=super.niceDomain(t,i);l=__.getNiceStepAndTickCount(t,c).step}else l=HF.getTickStep(r,a,t);return L6(r,a,l)}hasNiceRange(){const t=this.range.slice().sort((n,s)=>n-s);return[Math.PI,2*Math.PI].some(n=>Jt(n,t[1]-t[0]))}niceDomain(t,i=this.domain){const n=super.niceDomain(t,i);if(!this.hasNiceRange())return n;const s=n[0]>n[1],o=s?n[1]:n[0],{step:r,count:a}=__.getNiceStepAndTickCount(t,n),l=1/r,c=r>=1?Math.ceil(o/r+a)*r:Math.ceil((o+a*r)*l)/l;return s?[c,o]:[o,c]}getPixelRange(){return this.arcLength}},{Property:LH,angleBetween:l1e,normalisedExtentWithMetadata:c1e,findMinMax:u1e}=N,gy=class extends UD{constructor(e){super(e,new hoe),this.shape="circle",this.interval=new TH}hasDefinedDomain(){const{min:e,max:t}=this;return e!=null&&t!=null&&e<t}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:n,clipped:s}=c1e(e,t,i);return{domain:n,clipped:s}}updateScale(){super.updateScale(),this.scale.arcLength=this.getRangeArcLength()}getRangeArcLength(){const{range:e}=this,t=Math.min(...e),i=Math.max(...e),n=l1e(t,i)||2*Math.PI,s=this.gridLength;return n*s}generateAngleTicks(e){const{scale:t,range:i,nice:n}=this,{values:s,step:o,minSpacing:r,maxSpacing:a}=this.interval;let l;if(s==null){const{arcLength:c}=t,u=a?Math.floor(c/a):1,d=r?Math.floor(c/r):1/0,p=Math.floor(4/Math.PI*Math.abs(i[0]-i[1])),f=Math.max(u,Math.min(d,p)),m={nice:n,interval:o,tickCount:f,minTickCount:u,maxTickCount:d};l=t.ticks(m,e)?.ticks??[]}else{const[c,u]=u1e(e.map(Number));l=s.filter(d=>d>=c&&d<=u).sort((d,p)=>d-p)}return l.map(c=>({value:c,visible:!0}))}avoidLabelCollisions(e){const{minSpacing:t}=this.label,i=(o,r)=>{if(o.hidden||r.hidden)return!1;if(t==null)return o.box.collidesBBox(r.box);const a=o.box.clone().grow(t/2),l=r.box.clone().grow(t/2);return a.collidesBBox(l)},n=e[0],s=e.at(-1);n!==s&&Jt(n.x,s.x)&&Jt(n.y,s.y)&&(s.hidden=!0);for(let o=1;o<e.length;o*=2){let r=!1;for(let a=o;a<e.length;a+=o){const l=e[a],c=e[a-o];if(i(c,l)){r=!0;break}}if(!r){for(const[a,l]of e.entries())a%o>0&&(l.hidden=!0,l.box=void 0);return}}for(const[o,r]of e.entries())o>0&&(r.hidden=!0,r.box=void 0)}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:n,seriesId:s,legendItemName:o,key:r,source:a,property:l,domain:c,boundSeries:u}=t;return{type:"number",value:e,datum:n,seriesId:s,legendItemName:o,key:r,source:a,property:l,domain:c,boundSeries:u,fractionDigits:i}}};gy.className="AngleNumberAxis";gy.type="angle-number";D([LH],gy.prototype,"min");D([LH],gy.prototype,"max");D([LH],gy.prototype,"interval");var d1e={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",moduleFactory:e=>new gy(e)},{OrdinalTimeScale:h1e,Property:p1e,TimeAxisParentLevel:g1e,lowestGranularityUnitForTicks:f1e,lowestGranularityUnitForValue:m1e,minimumTimeAxisDatumGranularity:y1e,dateTruncationForDomain:v1e,intervalUnit:P6,intervalStep:N6,intervalEpoch:O6,intervalMilliseconds:F6}=N,$D=class extends N.DiscreteTimeAxis{constructor(e){super(e,new h1e),this.parentLevel=new g1e}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}processData(){super.processData();const{boundSeries:e,direction:t}=this;this.minimumTimeGranularity=y1e(e,t,void 0,void 0)}tickFormatParams(e,t,i,n){n??(n=f1e(t));const s=v1e(e),o=P6(n),r=N6(n),a=O6(n);return{type:"date",unit:o,step:r,epoch:a,truncateDate:s}}datumFormatParams(e,t,i,n,s){if(typeof e=="number"&&(e=new Date(e)),n==null){const{minimumTimeGranularity:b}=this,C=m1e(e);b!=null&&F6(b)<F6(C)?n=b:n=C}const{datum:o,seriesId:r,legendItemName:a,key:l,source:c,property:u,domain:d,boundSeries:p}=t,f=P6(n),m=N6(n),v=O6(n);return{type:"date",value:e,datum:o,seriesId:r,legendItemName:a,key:l,source:c,property:u,domain:d,boundSeries:p,unit:f,step:m,epoch:v,style:s}}};$D.className="OrdinalTimeAxis";$D.type="ordinal-time";D([p1e],$D.prototype,"parentLevel");var b1e={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ordinal-time",moduleFactory:e=>new $D(e)},{ChartAxisDirection:S1e,Property:C1e,validateCrossLineValue:x1e,normalizeAngle360FromDegrees:w1e,Group:D1e,Path:M1e,Sector:A1e,RotatableText:k1e}=N,poe=class extends Ec{constructor(){super(...arguments),this.positionAngle=void 0}};D([C1e],poe.prototype,"positionAngle");var PH=class extends Cr{constructor(){super(),this.direction=S1e.Radius,this.label=new poe,this.polygonNode=new M1e,this.sectorNode=new A1e,this.crossLineRange=new D1e,this.labelNode=new k1e,this.outerRadius=0,this.innerRadius=0,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:t}=this;if(!t||!x1e(this,t)){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.updateRadii();const{innerRadius:i,outerRadius:n}=this;e&&(e=i>=this.axisInnerRadius&&n<=this.axisOuterRadius),this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e),this.assignCrossLineGroup(this.type==="range",this.crossLineRange)}updateRadii(){const{range:e,scale:t,type:i,axisInnerRadius:n,axisOuterRadius:s}=this;if(!t)return{innerRadius:0,outerRadius:0};const o=l=>s+n-l;let r,a;if(i==="line")r=o(t.convert(this.value)),a=r;else{const l=Math.abs(t?.bandwidth??0),c=e.map(u=>t.convert(u));r=o(Math.max(...c)),a=o(Math.min(...c))+l}this.outerRadius=r,this.innerRadius=a}drawPolygon(e,t,i){for(const[n,s]of t.entries()){const o=e*Math.cos(s),r=e*Math.sin(s);n===0?i.path.moveTo(o,r):i.path.lineTo(o,r)}i.path.closePath()}updatePolygonNode(e){const{gridAngles:t,polygonNode:i,scale:n,shape:s,type:o,innerRadius:r,outerRadius:a}=this;if(!e||s!=="polygon"||!n||!t){i.visible=!1;return}i.visible=!0;const l=this.getPadding();i.path.clear(!0),this.drawPolygon(a-l,t,i);const c=t.slice().reverse(),u=o==="line"?a-l:r+l;this.drawPolygon(u,c,i),this.setSectorNodeProps(i)}updateSectorNode(e){const{axisInnerRadius:t,axisOuterRadius:i,scale:n,sectorNode:s,shape:o,innerRadius:r,outerRadius:a}=this;if(!e||o!=="circle"||!n){s.visible=!1;return}s.visible=!0,s.startAngle=0,s.endAngle=2*Math.PI;const l=this.getPadding(),c=Je(t,r+l,i),u=Je(t,a-l,i);s.innerRadius=Math.min(c,u),s.outerRadius=Math.max(c,u),this.setSectorNodeProps(s)}updateLabelNode(e){const{innerRadius:t,label:i,labelNode:n,scale:s,shape:o,type:r}=this;if(!e||i.enabled===!1||!i.text||!s){n.visible=!1;return}const a=w1e((i.positionAngle??0)-90),l=(Jt(a,0)||a>0)&&a<Math.PI,c=l?a-Math.PI/2:a+Math.PI/2;let u;const d=this.gridAngles??[];r==="line"?u=t+i.padding:o==="circle"||d.length<3?u=t-i.padding:u=t*Math.cos(Math.PI/d.length)-i.padding;const p=u*Math.cos(a),f=u*Math.sin(a);let m;r==="line"?m=l?"top":"bottom":m=l?"bottom":"top",this.setLabelNodeProps(n,p,f,m,c)}getPadding(){const{scale:e}=this;if(!e)return 0;const t=Math.abs(e.bandwidth??0),i=Math.abs(e.step??0);return e instanceof N.BandScale?(i-t)/2:0}};PH.className="RadiusCrossLine";var{ChartAxisDirection:T1e,ZIndexMap:I1e,Property:NH,normalizeAngle360:B6,toRadians:R1e,Caption:E1e,Group:L1e,TransformableGroup:_6,Path:P1e,Line:z6,Selection:G6,generateTicks:N1e,AxisGroupZIndexMap:O1e}=N,OH=class extends N.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};D([NH],OH.prototype,"autoRotate");D([NH],OH.prototype,"autoRotateAngle");var zL=class extends N.PolarAxis{constructor(e,t){super(e,t),this.positionAngle=0,this.gridLineGroupSelection=G6.select(this.gridLineGroup,z6,!1),this.generatedTicks=void 0,this.headingLabelGroup=this.axisGroup.appendChild(new _6({name:`${this.id}-Axis-heading`})),this.lineNodeGroup=this.axisGroup.appendChild(new _6({name:`${this.id}-Axis-line`})),this.lineNode=this.lineNodeGroup.appendChild(new z6({name:`${this.id}-Axis-line`,zIndex:O1e.AxisLine})),this.gridPathGroup=this.gridGroup.appendChild(new L1e({name:`${this.id}-gridPaths`,zIndex:I1e.AXIS_GRID})),this.gridPathSelection=G6.select(this.gridPathGroup,P1e),this.headingLabelGroup.appendChild(this.title.caption.node),this.cleanup.register(this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}get direction(){return T1e.Radius}getAxisTransform(){const e=this.scale.range[0],{translation:t,positionAngle:i,innerRadiusRatio:n}=this,s=e*n,o=R1e(i);return{translationX:t.x,translationY:t.y-e-s,rotation:o,rotationCenterX:0,rotationCenterY:e+s}}update(){super.update(),this.updateTitle(),this.updateGridLines();const{enabled:e,stroke:t,width:i}=this.line;this.lineNode.setProperties({stroke:t,strokeWidth:e?i:0,x1:0,y1:this.range[0],x2:0,y2:this.range[1]})}updatePosition(){super.updatePosition();const e=this.getAxisTransform();this.tickLineGroup.setProperties(e),this.tickLabelGroup.setProperties(e),this.lineNodeGroup.setProperties(e),this.headingLabelGroup.setProperties(e)}calculateRotations(){return{rotation:0,parallelFlipRotation:0,regularFlipRotation:-Math.PI/2}}calculateTickLayout(e,t,i){const n=[0,1],s=this.label.getSideFlag(),o=s*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),{range:r,reverse:a,defaultTickMinSpacing:l}=this,c=N1e({scale:this.scale,label:this.label,interval:this.interval,tickFormatter:(...x)=>this.tickFormatter(...x),domain:e,range:r,reverse:a,niceMode:t,visibleRange:n,defaultTickMinSpacing:l,labelOffset:o,sideFlag:s,axisRotation:0,sizeLimit:void 0,primaryTickCount:void 0}),{tickData:u}=c,{ticks:d,rawTicks:p,rawTickCount:f,tickDomain:m,fractionDigits:v,niceDomain:b=e}=u,C=d.map(x=>this.getTickLabelProps(x,c));return this.generatedTicks={ticks:d,labels:C},{ticks:p,tickDomain:m,niceDomain:b,rawTickCount:f,fractionDigits:v,timeInterval:void 0}}updateSelections(){const{generatedTicks:e}=this;if(!e)return;const{ticks:t,labels:i}=e;this.gridLineGroupSelection.update(this.gridLength?t:[]),this.tickLabelGroupSelection.update(i),this.gridPathSelection.update(this.gridLine.enabled?this.prepareGridPathTickData(t):[]),this.gridLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup(),this.gridPathSelection.cleanup()}updateLabels(){if(!this.label.enabled)return;const e=N.resetAxisLabelSelectionFn();this.tickLabelGroupSelection.each((t,i)=>{t.fill=i.color,t.text=i.text,t.textBaseline=i.textBaseline,t.textAlign=i.textAlign??"center",t.setFont(i),t.setBoxing(i),t.setProperties(e(t,i))})}updateGridLines(){const{gridLine:{style:e,width:t},shape:i,generatedTicks:n}=this;if(!e||!n)return;const s=e.length,o=(p,f)=>{const{stroke:m,lineDash:v}=e[f%s];p.stroke=m,p.strokeWidth=t,p.lineDash=v,p.fill=void 0},[r,a]=this.gridRange??[0,2*Math.PI],l=Jt(a-r,2*Math.PI),d=i==="circle"?(p,f)=>{const{path:m}=p;m.clear(!0);const v=this.getTickRadius(f);l?(m.moveTo(v,0),m.arc(0,0,v,0,2*Math.PI)):(m.moveTo(v*Math.cos(r),v*Math.sin(r)),m.arc(0,0,v,B6(r),B6(a))),l&&m.closePath()}:(p,f)=>{const{path:m}=p,v=this.gridAngles;if(m.clear(!0),!v||v.length<3)return;const b=this.getTickRadius(f);for(const[C,x]of v.entries()){const w=b*Math.cos(x),M=b*Math.sin(x);C===0?m.moveTo(w,M):m.lineTo(w,M);for(const[T,L]of v.entries()){const I=b*Math.cos(L),R=b*Math.sin(L);T===0?m.moveTo(I,R):m.lineTo(I,R)}m.closePath()}m.closePath()};this.gridPathSelection.each((p,f,m)=>{o(p,m),d(p,f)})}updateTitle(){const e=r=>r.defaultValue,{title:t,range:i}=this,{formatter:n=e}=this.title;t.caption.enabled=t.enabled,t.caption.fontFamily=t.fontFamily,t.caption.fontSize=t.fontSize,t.caption.fontStyle=t.fontStyle,t.caption.fontWeight=t.fontWeight,t.caption.color=t.color,t.caption.wrapping=t.wrapping;let s=!1;const o=t.caption.node;t.enabled&&(s=!0,o.rotation=Math.PI/2,o.x=Math.floor((i[0]+i[1])/2),o.y=-E1e.SMALL_PADDING,o.textAlign="center",o.textBaseline="bottom",o.text=this.cachedCallWithContext(n,this.getTitleFormatterParams(this.scale.domain))),o.visible=s}updateCrossLines(){for(const e of this.crossLines)if(e instanceof PH){const{shape:t,gridAngles:i,range:n,innerRadiusRatio:s}=this,o=n[0];e.shape=t,e.gridAngles=i,e.axisOuterRadius=o,e.axisInnerRadius=o*s}super.updateCrossLines()}createLabel(){return new OH}getTickLabelProps(e,t){const{label:i}=this,{rotation:n,textBaseline:s,textAlign:o}=t,r=this.scale.range,a=e.tickLabel??"",c=i.getSideFlag()*(this.getTickSize()+i.spacing+this.seriesAreaPadding),u=a!==""&&a!=null,d=n;return{...this.getLabelStyles({value:e.tick,formattedValue:e.tickLabel}),tickId:e.tickId,rotation:d,text:a,textAlign:o,textBaseline:s,visible:u,x:c,y:e.translation,rotationCenterX:c,rotationCenterY:e.translation,range:r}}};zL.CrossLineConstructor=PH;D([NH],zL.prototype,"positionAngle");var{ProxyPropertyOnWrite:goe,Property:FH,CategoryScale:V6}=N,Pg=class extends zL{constructor(e){super(e,new V6),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}hasDefinedDomain(){return!1}normaliseDataDomain(e){return{domain:e,clipped:!1}}prepareGridPathTickData(e){return e.slice().reverse()}getTickRadius(e){const{scale:t,innerRadiusRatio:i}=this,n=t.range[0],s=n*i;if(V6.is(t)){const o=t.domain,r=o.length-1-o.indexOf(e.tick);return r===0?s:t.inset+t.step*(r-.5)+t.bandwidth/2}else{const o=(n-s)/t.domain.length;return n-e.translation+s-o/2}}tickFormatParams(){return{type:"category"}}datumFormatParams(e,t){const{datum:i,seriesId:n,legendItemName:s,key:o,source:r,property:a,domain:l,boundSeries:c}=t;return{type:"category",value:e,datum:i,seriesId:n,legendItemName:s,key:o,source:r,property:a,domain:l,boundSeries:c}}};Pg.className="RadiusCategoryAxis";Pg.type="radius-category";D([FH],Pg.prototype,"groupPaddingInner");D([goe("scale","paddingInner"),FH],Pg.prototype,"paddingInner");D([goe("scale","paddingOuter"),FH],Pg.prototype,"paddingOuter");var F1e={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",moduleFactory:e=>new Pg(e)},{Property:foe,normalisedExtentWithMetadata:B1e,LinearScale:_1e}=N,YS=class extends zL{constructor(e){super(e,new _1e),this.shape="polygon"}hasDefinedDomain(){const{min:e,max:t}=this;return e!=null&&t!=null&&e<t}prepareGridPathTickData(e){const{scale:t}=this,i=t.domain[1];return e.filter(({tick:n})=>n!==i).sort((n,s)=>s.tick-n.tick)}getTickRadius(e){const{scale:t}=this,i=t.range[0],n=i*this.innerRadiusRatio;return i-e.translation+n}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:n,clipped:s}=B1e(e,t,i);return{domain:n,clipped:s}}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:n,seriesId:s,legendItemName:o,key:r,source:a,property:l,domain:c,boundSeries:u}=t;return{type:"number",value:e,datum:n,seriesId:s,legendItemName:o,key:r,source:a,property:l,domain:c,boundSeries:u,fractionDigits:i}}};YS.className="RadiusNumberAxis";YS.type="radius-number";D([foe],YS.prototype,"min");D([foe],YS.prototype,"max");var z1e={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",moduleFactory:e=>new YS(e)},{ObserveChanges:BH,Property:_H}=N,GL=class extends N.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,e.animationManager.skip(!1),this.cleanup.register(()=>{e.animationManager.skip(!0)})}};D([BH((e,t)=>{e.ctx.animationManager.skip(!t)}),_H],GL.prototype,"enabled");D([BH((e,t)=>{e.ctx.animationManager.defaultDuration=t}),_H],GL.prototype,"duration");D([BH((e,t)=>{e.ctx.animationManager.maxAnimatableItems=t??1/0}),_H],GL.prototype,"maxAnimatableItems");var G1e={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new GL(e),themeTemplate:{animation:{enabled:!0,maxAnimatableItems:1e3}}},V1e='<div contenteditable="plaintext-only" class="ag-charts-text-input__textarea" tabindex="0"></div>',{focusCursorAtEnd:H1e}=N,H6="text-input",W6="canvas-overlay",W1e=class extends N.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1,this.element=e.domManager.addChild(W6,H6),this.element.classList.add("ag-charts-text-input"),this.cleanup.register(()=>e.domManager.removeChild(W6,H6))}setKeyDownHandler(e){this.cleanup.register(gi(this.element,"keydown",e))}show(e){this.element.innerHTML=V1e;const t=this.element.firstElementChild;wu(t,{role:"textbox","data-preventdefault":!1}),t.isContentEditable||(t.contentEditable="true"),t.setAttribute("placeholder",this.ctx.localeManager.t(e.placeholderText??"inputTextareaPlaceholder")),e.styles?.placeholderColor&&t.style.setProperty("--placeholder-text-color",e.styles?.placeholderColor),t.innerText=e.text??"",t.style.color=e.styles?.color??"inherit",t.style.fontFamily=e.styles?.fontFamily??"inherit",t.style.fontSize=e.styles?.fontSize?`${e.styles.fontSize}px`:"inherit",t.style.fontStyle=e.styles?.fontStyle??"inherit",t.style.fontWeight=typeof e.styles?.fontWeight=="number"?`${e.styles.fontWeight}`:e.styles?.fontWeight??"inherit",H1e(t),t.addEventListener("input",()=>{this.updatePosition(),e.onChange?.(this.getValue(),this.getBBox())}),t.addEventListener("click",i=>{i.stopPropagation()}),e.layout&&(this.layout=e.layout,this.updatePosition()),e.onChange?.(this.getValue(),this.getBBox()),this.visible=!0}hide(){this.element.innerHTML="",this.layout={getTextInputCoords:()=>({x:0,y:0}),getTextPosition:()=>"center",alignment:"center",textAlign:"center"},this.visible=!1}isVisible(){return this.visible}updateColor(e){this.element.firstElementChild&&(this.element.firstElementChild.style.color=e)}updateFontSize(e){if(this.element.firstElementChild)return this.element.firstElementChild.style.fontSize=`${e}px`,this.updatePosition(),this.getBBox()}getValue(){if(this.element.firstElementChild)return this.element.firstElementChild.innerText.trim()}updatePosition(){const{element:e}=this,t=e.firstElementChild;if(!t)return;const i=this.ctx.domManager.getBoundingClientRect(),{width:n,getTextInputCoords:s,getTextPosition:o,alignment:r,textAlign:a}=this.layout;e.style.setProperty("width",n?`${n}px`:"unset");const l=t.getBoundingClientRect(),c=s(l.height);let u=c.x;r==="center"?u-=(n??l.width)/2:r==="right"&&(u-=n??l.width);const d=o();let p=c.y;d==="center"?p-=l.height/2:d==="bottom"&&(p-=l.height),e.style.setProperty("top",`${p}px`),e.style.setProperty("left",`${u}px`),e.style.setProperty("max-width",`${i.width-u}px`),e.style.setProperty("text-align",r),t.style.setProperty("text-align",a)}getBBox(){const{left:e,top:t,width:i,height:n}=this.element.getBoundingClientRect();return new N.BBox(e,t,i,n)}},{BaseProperties:j1e,Property:moe}=N,zH=class extends j1e{constructor(){super(...arguments),this.enabled=!1,this.axes="y"}};D([moe],zH.prototype,"enabled");D([moe],zH.prototype,"axes");var GH=(e=>(e.Line="line",e.HorizontalLine="horizontal-line",e.VerticalLine="vertical-line",e.DisjointChannel="disjoint-channel",e.ParallelChannel="parallel-channel",e.FibonacciRetracement="fibonacci-retracement",e.FibonacciRetracementTrendBased="fibonacci-retracement-trend-based",e.Callout="callout",e.Comment="comment",e.Note="note",e.Text="text",e.Arrow="arrow",e.ArrowUp="arrow-up",e.ArrowDown="arrow-down",e.DateRange="date-range",e.PriceRange="price-range",e.DatePriceRange="date-price-range",e.QuickDatePriceRange="quick-date-price-range",e))(GH||{}),U1e=Object.values(GH);function $1e(e){for(const t of U1e)if(t===e)return t}var{BaseProperties:Ng,FONT_SIZE:K1e,Property:Ot}=N,f0=class extends Ng{};D([Ot],f0.prototype,"x");D([Ot],f0.prototype,"y");var Y1e=class extends sr(Ah(Soe(Ng))){},VH=class extends sr(Ah(Ku(jH(yy(Ng))))){constructor(){super(...arguments),this.cornerRadius=2}};D([Ot],VH.prototype,"enabled");D([Ot],VH.prototype,"cornerRadius");var X1e=class extends Ku(Ng){},Z1e=class extends sr(Ah(Ku(Ng))){},fy=class extends yy(Ng){constructor(){super(...arguments),this.label="",this.position="top",this.alignment="left"}};D([Ot],fy.prototype,"label");D([Ot],fy.prototype,"position");D([Ot],fy.prototype,"alignment");var q1e=class extends yy(Ng){},KD=class extends yy(Ng){constructor(){super(...arguments),this.label=""}};D([Ot],KD.prototype,"label");D([Ot],KD.prototype,"position");D([Ot],KD.prototype,"alignment");function my(e){class t extends J1e(Soe(e)){constructor(){super(...arguments),this.id=PT()}}return t}function HH(e){class t extends e{constructor(){super(...arguments),this.start=new f0,this.end=new f0}}return D([Ot],t.prototype,"start"),D([Ot],t.prototype,"end"),t}function yoe(e){class t extends e{}return D([Ot],t.prototype,"x"),D([Ot],t.prototype,"y"),t}function voe(e){class t extends e{}return D([Ot],t.prototype,"value"),t}function WH(e){class t extends e{constructor(){super(...arguments),this.background=new X1e}}return D([Ot],t.prototype,"background"),t}function Og(e){class t extends e{constructor(){super(...arguments),this.handle=new Z1e}}return D([Ot],t.prototype,"handle"),t}function boe(e){class t extends e{constructor(){super(...arguments),this.axisLabel=new VH}}return D([Ot],t.prototype,"axisLabel"),t}function jH(e){class t extends e{constructor(){super(...arguments),this.padding=void 0,this.textAlign="center",this.formatter=void 0}}return D([Ot],t.prototype,"padding"),D([Ot],t.prototype,"textAlign"),D([Ot],t.prototype,"formatter"),t}function Q1e(e){class t extends e{}return t}function UH(e){class t extends e{}return D([Ot],t.prototype,"extendStart"),D([Ot],t.prototype,"extendEnd"),t}function J1e(e){class t extends e{isWriteable(){return!this.locked&&!this.readOnly}isHoverable(){return!this.readOnly}}return D([Ot],t.prototype,"locked"),D([Ot],t.prototype,"readOnly"),t}function $H(e){class t extends e{setLocaleManager(n){this.localeManager??(this.localeManager=n)}}return t}function Soe(e){class t extends e{}return D([Ot],t.prototype,"visible"),t}function Ku(e){class t extends e{}return D([Ot],t.prototype,"fill"),D([Ot],t.prototype,"fillOpacity"),t}function sr(e){class t extends e{}return D([Ot],t.prototype,"stroke"),D([Ot],t.prototype,"strokeOpacity"),D([Ot],t.prototype,"strokeWidth"),t}function Ah(e){class t extends e{constructor(){super(...arguments),this.lineCap=void 0,this.computedLineDash=void 0}}return D([Ot],t.prototype,"lineDash"),D([Ot],t.prototype,"lineDashOffset"),D([Ot],t.prototype,"lineStyle"),t}function yy(e){class t extends e{constructor(){super(...arguments),this.fontSize=K1e.SMALL,this.fontFamily="Verdana, sans-serif"}}return D([Ot],t.prototype,"fontStyle"),D([Ot],t.prototype,"fontWeight"),D([Ot],t.prototype,"fontSize"),D([Ot],t.prototype,"fontFamily"),D([Ot],t.prototype,"color"),t}function Coe(e){return En(e)||Nn(e)||gc(e)?{value:e,groupPercentage:0}:e??{value:void 0,groupPercentage:0}}function js(e){return Coe(e)?.value}function vr(e,t){if(e.start==null||e.end==null)return;const i=mn(e.start,t),n=mn(e.end,t);if(!(i==null||n==null))return{x1:i.x,y1:i.y,x2:n.x,y2:n.y}}function mn(e,t){const i=Fd(e.x,t.xAxis),n=Fd(e.y,t.yAxis);return{x:i,y:n}}function Fd(e,t){if(e==null)return 0;const{value:i,groupPercentage:n}=Coe(e),{scale:s,snapToGroup:o}=t,r=s.bandwidth===0?s.step??0:s.bandwidth??0,a=o?r/2:r*n;return s.convert(i)+a}function gr(e,t){const i=uR(e.x,t.xAxis),n=uR(e.y,t.yAxis);return{x:i,y:n}}function uR(e,t){const{scale:i}=t;if(t.continuous&&i.step==null)return t.scaleInvert(e);const n=t.scaleInvertNearest(e),s=i.bandwidth===0?i.step:i.bandwidth??0,o=i.convert(n),r=o+s,a=o===r?0:(e-o)/(r-o);return{value:n,groupPercentage:a}}var{BaseProperties:ePe}=N,KH=class extends my(HH(Og(ePe))){constructor(){super(...arguments),this.snapToAngle=45}getDefaultColor(e){}getDefaultOpacity(e){}},{Property:tPe}=N,xoe=class extends $H(jH(yy(KH))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}getDefaultColor(e){return this.color}getDefaultOpacity(e){}getPlaceholderColor(){}getPadding(){const{padding:e=0}=this;return{top:e,right:e,bottom:e,left:e}}getText(){const e=this.text.length==0;let t=this.text;return e&&(t=this.placeholderText??"",this.localeManager&&(t=this.localeManager.t(t))),{text:t,isPlaceholder:e}}getTextInputCoords(e,t){return mn(this.end,e)}getTextPosition(){return this.position}};D([tPe],xoe.prototype,"text");var{Property:iPe,Color:j6}=N,nPe={top:6,right:12,bottom:9,left:12},oc=class extends Ku(sr(xoe)){constructor(){super(...arguments),this.type="callout",this.position="bottom",this.alignment="left"}static is(e){return St(e)&&e.type==="callout"}getDefaultColor(e){switch(e){case"fill-color":return this.fill;case"line-color":return this.stroke;case"text-color":default:return this.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;case"text-color":default:return}}getPlaceholderColor(){const{r:e,g:t,b:i}=j6.fromString(this.color??"#888888");return new j6(e,t,i,.66).toString()}getPadding(){const{padding:e}=this;return e==null?{...nPe}:{top:e,right:e,bottom:e,left:e}}getTextInputCoords(e,t){const i=super.getTextInputCoords(e,t),n=this.getPadding(),s=n.left??0,o=n.bottom??0;return{x:i.x+s,y:i.y-o}}};D([iPe],oc.prototype,"type");var{BaseProperties:sPe,Property:oPe}=N,VL=class extends my(yoe(Og(jH(yy(sPe))))){constructor(){super(...arguments),this.text="",this.position="top",this.alignment="left",this.placement="inside",this.placeholderText="inputTextareaPlaceholder"}getDefaultColor(e){return this.color}getDefaultOpacity(e){}getPlaceholderColor(){}getPadding(){const{padding:e=0}=this;return{top:e,right:e,bottom:e,left:e}}getText(){const e=this.text.length==0;return{text:e?this.placeholderText??"":this.text,isPlaceholder:e}}getTextInputCoords(e,t){return mn(this,e)}getTextPosition(){return this.position}};D([oPe],VL.prototype,"text");var{Property:rPe,Color:U6}=N,lk={top:8,right:14,bottom:8,left:14},ru=class extends Ku(sr(VL)){constructor(){super(...arguments),this.type="comment",this.position="bottom",this.alignment="left"}static is(e){return St(e)&&e.type==="comment"}getDefaultColor(e){switch(e){case"fill-color":return this.fill;case"line-color":return this.stroke;case"text-color":default:return this.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.fillOpacity;case"line-color":return this.strokeOpacity;case"text-color":default:return}}getPlaceholderColor(){const{r:e,g:t,b:i}=U6.fromString(this.color??"#888888");return new U6(e,t,i,.66).toString()}getPadding(){const{padding:e,fontSize:t}=this;return e==null?{top:Math.max(t*.4,lk.top),bottom:Math.max(t*.4,lk.bottom),left:Math.max(t*.8,lk.left),right:Math.max(t*.8,lk.right)}:{top:e,right:e,bottom:e,left:e}}getTextInputCoords(e,t){const i=super.getTextInputCoords(e,t),n=this.getPadding();return{x:i.x+n.left,y:i.y-n.bottom}}};D([rPe],ru.prototype,"type");var{Vec2:Af}=N;function m0(e,t){return e?"dashed":t??"solid"}function woe(e,t){switch(t){case"solid":return[];case"dashed":return[e*4,e*2];case"dotted":return[0,e*2]}}function XS(e,t,i,n){const s=m0(e,i);return t??e??woe(n??1,s)}function ZS(e,t,i){const n=m0(t,i);return e??n==="dotted"?"round":void 0}function aPe(e,t){const[i,n]=Af.from(e),s=t.height,o=Af.gradient(n,i,s),r=Af.intercept(n,o,s),a=[{x:i.x,y:s??0},{x:i.x,y:s==null?t.height:s-t.height}];if(o===1/0)return a;let l=[Af.intersectAtY(o,r,0,s),Af.intersectAtY(o,r,t.height,s),Af.intersectAtX(o,r,0,s),Af.intersectAtX(o,r,t.width,s)];return l=l.filter(c=>c.x>=t.x&&c.x<=t.width&&c.y>=t.y&&c.y<=t.height).sort((c,u)=>c.x===u.x?0:c.x<u.x?-1:1),l.length!==2?a:l}var{BaseProperties:YH,Property:ea}=N,lPe=class extends sr(YH){},XH=class extends yy(Ku(sr(YH))){constructor(){super(...arguments),this.divider=new lPe}};D([ea],XH.prototype,"divider");var z_=class extends Ku(sr(Og(YH))){constructor(){super(...arguments),this.statistics=new XH}};D([ea],z_.prototype,"statistics");var qS=class extends $H(WH(sr(Ah(KH)))){constructor(){super(...arguments),this.direction="both",this.hasDateRange=!1,this.hasPriceRange=!1,this.statistics=new XH,this.getVolume=()=>{},this.text=new fy}getDefaultColor(e){switch(e){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return XS(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return ZS(this.lineCap,this.lineDash,this.lineStyle)}};D([ea],qS.prototype,"statistics");D([ea],qS.prototype,"text");function ZH(e){class t extends e{constructor(){super(...arguments),this.hasDateRange=!0}}return t}function qH(e){class t extends e{constructor(){super(...arguments),this.hasPriceRange=!0}}return t}var Sl=class extends ZH(qS){constructor(){super(...arguments),this.type="date-range",this.direction="horizontal"}static is(e){return St(e)&&e.type==="date-range"}};D([ea],Sl.prototype,"type");D([ea],Sl.prototype,"extendAbove");D([ea],Sl.prototype,"extendBelow");var Cl=class extends qH(qS){constructor(){super(...arguments),this.type="price-range",this.direction="vertical"}static is(e){return St(e)&&e.type==="price-range"}};D([ea],Cl.prototype,"type");D([ea],Cl.prototype,"extendLeft");D([ea],Cl.prototype,"extendRight");var Id=class extends ZH(qH(qS)){constructor(){super(...arguments),this.type="date-price-range",this.direction="both"}static is(e){return St(e)&&e.type==="date-price-range"}};D([ea],Id.prototype,"type");var ya=class extends ZH(qH(qS)){constructor(){super(...arguments),this.type="quick-date-price-range",this.up=new z_,this.down=new z_,this.direction="both"}static is(e){return St(e)&&e.type==="quick-date-price-range"}};D([ea],ya.prototype,"type");D([ea],ya.prototype,"up");D([ea],ya.prototype,"down");var{BBox:cPe}=N,HL=1.38;function WL(e,t,i){return i?Xp(t,{maxWidth:i,font:e,textWrap:"always",avoidOrphans:!1}):t}function uPe(e,t){const{lineMetrics:i,width:n}=ei(e).measureLines(t),s=i.length*fc(e.fontSize,HL);return{width:n,height:s}}function QH(e,t,i,n){let s=n?.width??0,o=n?.height??0;if(!n){const r=e.width==null?t:WL(e,t,e.width);({width:s,height:o}=uPe(e,r))}return new cPe(i.x,i.y,s,o)}function Doe(e,t,i,n,{x:s,y:o},r){const{visible:a=!0,fontFamily:l,fontSize:c=14,fontStyle:u,fontWeight:d,textAlign:p}=n,f=fc(c,HL);r??(r=n.position=="center"?"middle":n.position);const m=i?n.getPlaceholderColor():n.color;e.setProperties({x:s,y:o,visible:a,text:t,fill:m,fontFamily:l,fontSize:c,fontStyle:u,fontWeight:d,textAlign:p,lineHeight:f,textBaseline:r})}var{BaseProperties:dPe,Property:Moe}=N,hPe=10,pPe=11,Aoe=20,gPe=22,fPe=10,koe=Aoe+fPe,Toe=34,mPe=class extends Ku(sr(dPe)){},Hr=class extends Ku(sr(VL)){constructor(){super(...arguments),this.type="note",this.background=new mPe,this.position="bottom",this.alignment="center",this.width=200}static is(e){return St(e)&&e.type==="note"}getDefaultColor(e){switch(e){case"line-color":return this.fill;case"text-color":return this.color}}getDefaultOpacity(e){switch(e){case"line-color":return this.fillOpacity;case"text-color":return}}getPadding(){const e=this.padding??hPe;return{top:e,right:e,bottom:e,left:e}}getTextInputCoords(e,t){const{width:i,text:n}=this,s=super.getTextInputCoords(e,t),o=this.getPadding().top,r=QH(this,n,s);r.x=Je(i/2,r.x,e.seriesRect.width-i/2);const a=r.y-koe-o*2,l=r.y+pPe+o*2,c=Math.max(r.height,t);return a-c-Toe<0?(r.y=l,this.position="top"):(r.y=a+o,this.position="bottom"),{x:r.x,y:r.y}}isHoverable(){return!0}};D([Moe],Hr.prototype,"type");D([Moe],Hr.prototype,"background");var{BaseProperties:yPe}=N,vPe=class extends my(yoe(Og(yPe))){getDefaultColor(e){}getDefaultOpacity(e){}},JH=class Ioe extends Ku(vPe){constructor(){super(...arguments),this.size=32}static is(t){return t instanceof Ioe}getDefaultColor(t){return t==="fill-color"?this.fill:void 0}getDefaultOpacity(t){return t==="fill-color"?this.fillOpacity:void 0}},{BaseProperties:Roe,Property:jL}=N,Uo=class extends my(voe(Og(boe(sr(Ah(Roe)))))){constructor(){super(...arguments),this.direction="horizontal",this.type="horizontal-line",this.text=new fy}static is(e){return St(e)&&e.type==="horizontal-line"}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return XS(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return ZS(this.lineCap,this.lineDash,this.lineStyle)}};D([jL],Uo.prototype,"type");D([jL],Uo.prototype,"text");var au=class extends my(voe(Og(boe(sr(Ah(Roe)))))){constructor(){super(...arguments),this.direction="vertical",this.type="vertical-line",this.text=new fy}static is(e){return St(e)&&e.type==="vertical-line"}getDefaultColor(){return this.stroke}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return XS(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return ZS(this.lineCap,this.lineDash,this.lineStyle)}};D([jL],au.prototype,"type");D([jL],au.prototype,"text");var{BaseProperties:bPe,Property:UL}=N,xl=class extends my(WH(HH(Og(UH(sr(Ah(bPe))))))){constructor(){super(...arguments),this.type="disjoint-channel",this.text=new KD,this.snapToAngle=45}static is(e){return St(e)&&e.type==="disjoint-channel"}get bottom(){const e={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof e.start.y=="number"&&typeof e.end.y=="number"?(e.start.y-=this.startHeight,e.end.y-=this.endHeight):fe.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),e}getDefaultColor(e){switch(e){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return XS(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return ZS(this.lineCap,this.lineDash,this.lineStyle)}};D([UL],xl.prototype,"type");D([UL],xl.prototype,"startHeight");D([UL],xl.prototype,"endHeight");D([UL],xl.prototype,"text");var{Property:eW}=N,$L=class extends $H(Q1e(UH(sr(Ah(KH))))){constructor(){super(...arguments),this.text=new fy}getDefaultColor(e){switch(e){case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(){return this.strokeOpacity}getLineDash(){return XS(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return ZS(this.lineCap,this.lineDash,this.lineStyle)}};D([eW],$L.prototype,"text");var Rd=class extends $L{constructor(){super(...arguments),this.type="arrow",this.endCap="arrow"}static is(e){return St(e)&&e.type==="arrow"}};D([eW],Rd.prototype,"type");var Ed=class extends $L{constructor(){super(...arguments),this.type="line"}static is(e){return St(e)&&e.type==="line"}};D([eW],Ed.prototype,"type");var{Property:vy}=N,kh=class extends $L{constructor(){super(...arguments),this.label=new q1e,this.reverse=!1,this.showFill=!0,this.isMultiColor=!0,this.strokes=[],this.bands=10}getDefaultColor(e){switch(e){case"line-color":return this.rangeStroke??this.stroke;case"text-color":return this.text.color}}};D([vy],kh.prototype,"label");D([vy],kh.prototype,"reverse");D([vy],kh.prototype,"showFill");D([vy],kh.prototype,"isMultiColor");D([vy],kh.prototype,"strokes");D([vy],kh.prototype,"rangeStroke");D([vy],kh.prototype,"bands");var{Property:Eoe}=N,lu=class extends kh{constructor(){super(...arguments),this.type="fibonacci-retracement-trend-based",this.endRetracement=new f0}static is(e){return St(e)&&e.type==="fibonacci-retracement-trend-based"}};D([Eoe],lu.prototype,"type");D([Eoe],lu.prototype,"endRetracement");var{Property:SPe}=N,Ld=class extends kh{constructor(){super(...arguments),this.type="fibonacci-retracement"}static is(e){return St(e)&&e.type==="fibonacci-retracement"}};D([SPe],Ld.prototype,"type");var{BaseProperties:CPe,Property:KL}=N,wl=class extends my(WH(HH(Og(UH(sr(Ah(CPe))))))){constructor(){super(...arguments),this.type="parallel-channel",this.middle=new Y1e,this.text=new KD,this.snapToAngle=45}static is(e){return St(e)&&e.type==="parallel-channel"}get bottom(){const e={start:{x:this.start.x,y:this.start.y},end:{x:this.end.x,y:this.end.y}};return typeof e.start.y=="number"&&typeof e.end.y=="number"?(e.start.y-=this.height,e.end.y-=this.height):fe.warnOnce(`Annotation [${this.type}] can only be used with a numeric y-axis.`),e}getDefaultColor(e){switch(e){case"fill-color":return this.background.fill;case"line-color":return this.stroke;case"text-color":return this.text.color}}getDefaultOpacity(e){switch(e){case"fill-color":return this.background.fillOpacity;case"line-color":return this.strokeOpacity}}getLineDash(){return XS(this.lineDash,this.computedLineDash,this.lineStyle,this.strokeWidth)}getLineCap(){return ZS(this.lineCap,this.lineDash,this.lineStyle)}};D([KL],wl.prototype,"type");D([KL],wl.prototype,"height");D([KL],wl.prototype,"middle");D([KL],wl.prototype,"text");var{Property:xPe}=N,Pd=class extends VL{constructor(){super(...arguments),this.type="text",this.position="bottom"}static is(e){return St(e)&&e.type==="text"}};D([xPe],Pd.prototype,"type");function _p(e){return ya.is(e)}function YL(e){return Ed.is(e)||Uo.is(e)||au.is(e)||Rd.is(e)||Loe(e)}function Zd(e){return xl.is(e)||wl.is(e)}function Loe(e){return Ld.is(e)||lu.is(e)}function Au(e){return oc.is(e)||ru.is(e)||Hr.is(e)||Pd.is(e)}function YD(e){return Sl.is(e)||Cl.is(e)||Id.is(e)||ya.is(e)}function WF(e){return Au(e)&&!Hr.is(e)}function Rp(e){return YL(e)||Zd(e)||YD(e)&&!ya.is(e)}function wPe(e){return YL(e)||Zd(e)||YD(e)||oc.is(e)||Hr.is(e)}function DPe(e){return Hr.is(e)}function MPe(e){return Zd(e)||YD(e)||oc.is(e)||ru.is(e)||JH.is(e)}function APe(e){return Au(e)&&!Hr.is(e)}function Db(e){return(YL(e)||Zd(e)||YD(e))&&!_p(e)&&St(e.text)}function kPe(e,t){"fontSize"in e&&(e.fontSize=t),Db(e)&&(e.text.fontSize=t)}function Poe(e,t){const i=t?.strokeWidth??e.strokeWidth??1,n=t?.type??e.lineStyle,s=n??m0(e.lineDash,n),o=woe(i,s);e.strokeWidth=i,e.computedLineDash=o,e.lineStyle=s,e.lineCap=s==="dotted"?"round":void 0}function XL(e,t,i,n,s,o){switch(t){case"fill-color":{"fill"in e&&(e.fill=n),"fillOpacity"in e&&(e.fillOpacity=s),"background"in e&&(e.background.fill=n,e.background.fillOpacity=s);break}case"line-color":{"axisLabel"in e&&(e.axisLabel.fill=n,e.axisLabel.fillOpacity=s,e.axisLabel.stroke=n,e.axisLabel.strokeOpacity=s),"fill"in e&&"fillOpacity"in e&&DPe(e)?(e.fill=n,e.fillOpacity=s):("strokeOpacity"in e&&(e.strokeOpacity=s),"isMultiColor"in e&&"rangeStroke"in e?(e.isMultiColor=o,e.rangeStroke=n):"stroke"in e&&(e.stroke=n));break}case"text-color":{"color"in e&&(e.color=i),Db(e)&&(e.text.color=n);break}}}var{deepClone:tl}=N,TPe=class{constructor(){this.mementoOriginatorKey="annotation-defaults",this.colors=new Map(Object.values(GH).map(e=>[e,new Map([["line-color",void 0],["fill-color",void 0],["text-color",void 0]])])),this.fontSizes=new Map([["callout",void 0],["comment",void 0],["text",void 0],["arrow",void 0],["line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineStyles=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextAlignments=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.lineTextPositions=new Map([["line",void 0],["horizontal-line",void 0],["vertical-line",void 0],["disjoint-channel",void 0],["parallel-channel",void 0],["arrow",void 0],["date-range",void 0],["price-range",void 0],["date-price-range",void 0]]),this.fibonacciOptions=new Map([["fibonacci-retracement",{bands:void 0,reverse:void 0,showFill:void 0}],["fibonacci-retracement-trend-based",{bands:void 0,reverse:void 0,showFill:void 0}]])}createMemento(){return{colors:tl(this.colors),fontSizes:tl(this.fontSizes),lineStyles:tl(this.lineStyles),lineTextAlignments:tl(this.lineTextAlignments),lineTextPositions:tl(this.lineTextPositions),fibonacciOptions:tl(this.fibonacciOptions)}}guardMemento(e){return!0}restoreMemento(e,t,i){this.colors=tl(i.colors),this.fontSizes=tl(i.fontSizes),this.lineStyles=tl(i.lineStyles),this.lineTextAlignments=tl(i.lineTextAlignments),this.lineTextPositions=tl(i.lineTextPositions),this.fibonacciOptions=tl(i.fibonacciOptions)}setDefaultColor(e,t,i,n,s,o){this.colors.get(e)?.set(t,[i,n,s,o])}setDefaultFontSize(e,t){this.fontSizes.set(e,t)}setDefaultLineStyleType(e,t){const i=this.lineStyles.get(e);i?i.type=t:this.lineStyles.set(e,{type:t})}setDefaultLineStyleWidth(e,t){const i=this.lineStyles.get(e);i?i.strokeWidth=t:this.lineStyles.set(e,{strokeWidth:t})}setDefaultLineTextAlignment(e,t){this.lineTextAlignments.set(e,t)}setDefaultLineTextPosition(e,t){this.lineTextPositions.set(e,t)}setDefaultFibonacciOptions(e,t,i){if(e!="fibonacci-retracement"&&e!="fibonacci-retracement-trend-based")return;const n=this.fibonacciOptions.get(e);n[t]=i,this.fibonacciOptions.set(e,n)}applyDefaults(e){for(const[t,i]of this.colors)if(e.type===t)for(const[n,[s,o,r,a]=[]]of i)s&&o&&r!=null&&a!=null&&XL(e,n,s,o,r,a);for(const[t,i]of this.fontSizes)e.type!==t||i==null||kPe(e,i);for(const[t,i]of this.lineStyles)e.type!==t||i==null||Poe(e,i);for(const[t,i]of this.lineTextPositions)e.type!==t||i==null||(e.text.position=i);for(const[t,i]of this.lineTextAlignments)e.type!==t||i==null||(e.text.alignment=i);for(const[t,i]of this.fibonacciOptions)if(!(e.type!==t||i==null))for(const n of Object.keys(i)){const s=i[n];s!=null&&e.set({[n]:s})}}},IPe='<div class="ag-charts-color-picker__palette" role="slider" tabindex="0"></div><div class="ag-charts-color-picker__color-row" role="presentation"><button class="ag-charts-color-picker__multi-color-button" tabindex="0" type="button" role="switch"></button> <input class="ag-charts-color-picker__hue-input" tabindex="0" type="range" min="0" max="360" value="0"></div><input class="ag-charts-color-picker__alpha-input" tabindex="0" type="range" min="0" max="1" value="1" step="0.01"> <label class="ag-charts-color-picker__color-field" role="presentation"><span class="ag-charts-color-picker__color-label" aria-hidden="true"></span> <input class="ag-charts-color-picker__color-input" tabindex="0" value="#000"></label>',{Color:G_}=N,$6=e=>{try{const t=G_.fromString(e),[i,n,s]=t.toHSB();return[i,n,s,t.a]}catch{return}},Noe=class extends N.AnchoredPopover{constructor(e,t){super(e,"color-picker",t),this.hasChanged=!1,this.hideFns.push(()=>{this.i18nUpdater=void 0,this.hasChanged&&this.onChangeHide?.()}),this.cleanup.register(this.ctx.eventsHub.on("locale:change",()=>this.i18nUpdater?.()))}show(e){this.hasChanged=!1,this.onChangeHide=e.onChangeHide;const{element:t,initialFocus:i}=this.createColorPicker(e),n=this.showWithChildren([t],{initialFocus:i,...e});n.classList.add("ag-charts-color-picker"),n.setAttribute("role","dialog")}createColorPicker(e){const{localeManager:t}=this.ctx;let i=e.isMultiColor??!1,[n,s,o,r]=$6(e.color??"#f00")??[0,1,.5,1];r=e.opacity??r;const a=nt("div","ag-charts-color-picker__content");a.innerHTML=IPe,a.ariaLabel=this.ctx.localeManager.t("ariaLabelColorPicker");const l=a.querySelector(".ag-charts-color-picker__palette"),c=a.querySelector(".ag-charts-color-picker__hue-input"),u=a.querySelector(".ag-charts-color-picker__multi-color-button"),d=a.querySelector(".ag-charts-color-picker__alpha-input"),p=a.querySelector(".ag-charts-color-picker__color-input"),f=a.querySelector(".ag-charts-color-picker__color-label"),m=w=>{const M={s:"ariaValueColorPalette",v:"ariaValueColorPaletteFirstV"}[w];l.ariaValueText=t.t(M,{s,v:o})};this.i18nUpdater=()=>{l.ariaRoleDescription=t.t("ariaRoleDescription2DSlider"),l.ariaLabel=t.t("ariaLabelColorPickerPalette"),c.ariaLabel=t.t("ariaLabelColorPickerHue"),u.ariaLabel=t.t("ariaLabelColorPickerMultiColor"),d.ariaLabel=t.t("ariaLabelColorPickerAlpha"),p.ariaLabel=t.t("ariaLabelColor"),m("s")},this.i18nUpdater(),u.classList.toggle("ag-charts-color-picker__multi-color-button--hidden",!e.hasMultiColorOption);const v=(w=!0)=>{const T=G_.fromHSB(n,s,o,r).toHexString();if(a.style.setProperty("--h",`${n}`),a.style.setProperty("--s",`${s}`),a.style.setProperty("--v",`${o}`),a.style.setProperty("--a",`${r}`),a.style.setProperty("--color",T.slice(0,7)),a.style.setProperty("--color-a",T),c.value=`${n}`,d.value=`${r}`,d.classList.toggle("ag-charts-color-picker__alpha-input--opaque",r===1),u.classList.toggle("ag-charts-color-picker__multi-color-button--active",i),f.classList.toggle("ag-charts-color-picker__color-label--multi-color",i),document.activeElement!==p&&(u.ariaChecked=i.toString(),p.value=i?t.t("ariaLabelColorPickerMultiColor"):T.toUpperCase()),w||e.color==null){const L=G_.fromHSB(n,s,o,1).toHexString();e.onChange?.(T,L,r,i)}w&&(this.hasChanged=!0)};v(!1);const b=w=>w.preventDefault(),C=w=>w.stopPropagation(),x=w=>{w.preventDefault();const M=w.currentTarget;M.focus();const T=M.getBoundingClientRect(),L=({clientX:R,clientY:O})=>{i=!1,s=Math.min(Math.max((R-T.left)/T.width,0),1),o=1-Math.min(Math.max((O-T.top)/T.height,0),1),v(),m("s")};L(w);const I=gi(Qt(),"pointermove",L);Qt().addEventListener("pointerup",I,{once:!0})};return a.addEventListener("mousedown",C),a.addEventListener("touchstart",C),a.addEventListener("touchmove",C),a.addEventListener("keydown",w=>{switch(w.stopPropagation(),w.key){case"Enter":case"Escape":this.hide();break;default:return}w.preventDefault()}),l.addEventListener("pointerdown",x),l.addEventListener("touchstart",b,{passive:!1}),l.addEventListener("touchmove",b,{passive:!1}),l.addEventListener("keydown",w=>{if(w.key==="ArrowLeft")s=Je(0,s-.01,1),m("s");else if(w.key==="ArrowRight")s=Je(0,s+.01,1),m("s");else if(w.key==="ArrowUp")o=Je(0,o+.01,1),m("v");else if(w.key==="ArrowDown")o=Je(0,o-.01,1),m("v");else return;w.preventDefault(),v()}),l.addEventListener("focus",()=>{m("s")}),u.addEventListener("click",()=>{i=!i,v()}),c.addEventListener("input",w=>{i=!1,n=w.currentTarget.valueAsNumber??0,v()}),d.addEventListener("input",w=>{i=!1,r=w.currentTarget.valueAsNumber??0,v()}),p.addEventListener("input",w=>{i=!1;const M=$6(w.currentTarget.value);M!=null&&([n,s,o,r]=M,v())}),p.addEventListener("blur",()=>v()),p.addEventListener("keydown",w=>{w.key==="Enter"&&(w.currentTarget.blur(),v())}),{element:a,initialFocus:l}}};function K6(e){return!(e instanceof N.LogScale)&&!(e instanceof N.BandScale)}var RPe=[{label:"toolbarAnnotationsTrendLine",icon:"trend-line-drawing",value:"line"},{label:"toolbarAnnotationsHorizontalLine",icon:"horizontal-line-drawing",value:"horizontal-line"},{label:"toolbarAnnotationsVerticalLine",icon:"vertical-line-drawing",value:"vertical-line"},{label:"toolbarAnnotationsParallelChannel",icon:"parallel-channel-drawing",value:"parallel-channel",visible:K6},{label:"toolbarAnnotationsDisjointChannel",icon:"disjoint-channel-drawing",value:"disjoint-channel",visible:K6}],EPe=[{label:"toolbarAnnotationsFibonacciRetracement",icon:"fibonacci-retracement-drawing",value:"fibonacci-retracement"},{label:"toolbarAnnotationsFibonacciRetracementTrendBased",icon:"fibonacci-retracement-trend-based-drawing",value:"fibonacci-retracement-trend-based"}],LPe=[{label:"Fibonacci - Extended",value:10},{label:"Fibonacci - 6 Band",value:6},{label:"Fibonacci - 4 Band",value:4}],PPe=[{label:"toolbarAnnotationsText",icon:"text-annotation",value:"text"},{label:"toolbarAnnotationsComment",icon:"comment-annotation",value:"comment"},{label:"toolbarAnnotationsCallout",icon:"callout-annotation",value:"callout"},{label:"toolbarAnnotationsNote",icon:"note-annotation",value:"note"}],NPe=[{label:"toolbarAnnotationsArrow",icon:"arrow-drawing",value:"arrow"},{label:"toolbarAnnotationsArrowUp",icon:"arrow-up-drawing",value:"arrow-up"},{label:"toolbarAnnotationsArrowDown",icon:"arrow-down-drawing",value:"arrow-down"}],OPe=[{label:"toolbarAnnotationsQuickDatePriceRange",icon:"measurer-drawing",value:"quick-date-price-range"},{label:"toolbarAnnotationsDateRange",icon:"date-range-drawing",value:"date-range"},{label:"toolbarAnnotationsPriceRange",icon:"price-range-drawing",value:"price-range"},{label:"toolbarAnnotationsDatePriceRange",icon:"date-price-range-drawing",value:"date-price-range"}],Ooe=[{strokeWidth:1,label:"1",value:1},{strokeWidth:2,label:"2",value:2},{strokeWidth:3,label:"3",value:3},{strokeWidth:4,label:"4",value:4},{strokeWidth:8,label:"8",value:8}],Dw=[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],Foe=[{label:"10",value:10},{label:"12",value:12},{label:"14",value:14},{label:"16",value:16},{label:"18",value:18},{label:"22",value:22},{label:"28",value:28},{label:"36",value:36},{label:"46",value:46}],{Color:Y6,FloatingToolbar:FPe,Menu:jF,PropertiesArray:BPe,ToolbarButtonProperties:X6,ToolbarButtonWidget:_Pe,Property:by}=N,QS=class extends X6{constructor(){super(...arguments),this.checkedOverrides=new X6}};D([by],QS.prototype,"value");D([by],QS.prototype,"checkedOverrides");D([by],QS.prototype,"color");D([by],QS.prototype,"strokeWidth");D([by],QS.prototype,"isMultiColor");var zPe=class extends _Pe{update(e){super.update(e),e.value==="line-stroke-width"&&this.updateLineStrokeWidth(e),(e.value==="fill-color"||e.value==="line-color"||e.value==="text-color")&&this.updateFillColor(e)}updateFillColor(e){const t=this.getElement();t.classList.add("ag-charts-annotations__color-picker-button"),t.classList.toggle("ag-charts-annotations__color-picker-button--multi-color",e.isMultiColor),t.style.setProperty("--color",e.color??null)}updateLineStrokeWidth(e){const t=this.getElement();t.classList.add("ag-charts-annotations__stroke-width-button"),t.style.setProperty("--stroke-width",`${e.strokeWidth}px`)}},GPe=class extends FPe{createButtonWidget(){return new zPe(this.localeManager)}},tW=class extends N.BaseProperties{constructor(e,t){super(),this.ctx=e,this.getActiveDatum=t,this.enabled=!0,this.buttons=new BPe(QS),this.cleanup=new _i,this.events=new Dc,this.visibleButtons=[],this.toolbar=new GPe(this.ctx,"ariaLabelAnnotationOptionsToolbar","annotation-options"),this.colorPicker=new Noe(this.ctx),this.textSizeMenu=new jF(this.ctx,"text-size"),this.lineStyleTypeMenu=new jF(this.ctx,"annotations-line-style-type"),this.lineStrokeWidthMenu=new jF(this.ctx,"annotations-line-stroke-width"),this.cleanup.register(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("toolbar-moved",this.onToolbarMoved.bind(this)),e.widgets.seriesWidget.addListener("drag-start",this.onDragStart.bind(this)),e.widgets.seriesWidget.addListener("drag-end",this.onDragEnd.bind(this)),()=>{this.colorPicker.destroy(),this.toolbar.destroy()})}onDragStart(){this.toolbar.ignorePointerEvents()}onDragEnd(){this.toolbar.capturePointerEvents()}destroy(){this.cleanup.flush()}show(){this.enabled&&this.toolbar.show()}hide(){this.toolbar.hide()}updateButtons(e){if(!this.enabled)return;const t={"line-style-type":Rp(e),"line-stroke-width":Rp(e),"line-color":wPe(e),"text-color":APe(e),"fill-color":MPe(e),"text-size":WF(e),settings:Db(e),lock:!0,delete:!0};this.visibleButtons=this.buttons.filter(i=>t[i.value]),this.toolbar.clearButtons(),this.toolbar.updateButtons(this.visibleButtons),this.refreshButtons(e)}setAnchorScene(e){this.toolbar.hasBeenDragged()||this.toolbar.setAnchor(e.getAnchor())}hideOverlays(){this.toolbar.clearActiveButton(),this.colorPicker.hide({lastFocus:null}),this.textSizeMenu.hide(),this.lineStyleTypeMenu.hide(),this.lineStrokeWidthMenu.hide(),this.events.emit("hid-overlays",null)}clearActiveButton(){this.toolbar.clearActiveButton()}updateColors(e){this.updateColorPickerColor("line-color",e.getDefaultColor("line-color"),e.getDefaultOpacity("line-color"),"isMultiColor"in e&&e?.isMultiColor),this.updateColorPickerColor("fill-color",e.getDefaultColor("fill-color"),e.getDefaultOpacity("fill-color"),"isMultiColor"in e&&e?.isMultiColor),this.updateColorPickerColor("text-color",e.getDefaultColor("text-color"),e.getDefaultOpacity("text-color"),"isMultiColor"in e&&e?.isMultiColor)}updateColorPickerColor(e,t,i,n){if(t!=null&&i!=null){const{r:s,g:o,b:r}=Y6.fromString(t);t=Y6.fromArray([s,o,r,i]).toHexString()}this.updateButtonByValue(e,{color:t,isMultiColor:n})}updateFontSize(e){this.updateButtonByValue("text-size",{label:e==null?void 0:String(e)})}updateLineStyleType(e){this.updateButtonByValue("line-style-type",{icon:e.icon})}updateStrokeWidth(e){this.updateButtonByValue("line-stroke-width",{label:e.label,strokeWidth:e.value})}onButtonPress({event:e,button:t,buttonWidget:i}){const n=this.getActiveDatum();if(n)switch(this.hideOverlays(),t.value){case"line-style-type":{const s=Rp(n)?m0(n.lineDash,n.lineStyle):void 0;this.lineStyleTypeMenu.show(i,{items:Dw,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStyle"),value:s,onPress:o=>this.onLineStyleTypeMenuPress(o,n),class:"ag-charts-annotations__line-style-type-menu"});break}case"line-stroke-width":{const s=Rp(n)?n.strokeWidth:void 0;this.lineStrokeWidthMenu.show(i,{items:Ooe,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsLineStrokeWidth"),value:s,onPress:o=>this.onLineStrokeWidthMenuPress(o,n),class:"ag-charts-annotations__line-stroke-width-menu"});break}case"line-color":case"fill-color":case"text-color":{this.toolbar.toggleActiveButtonByIndex(t.index),this.colorPicker.show({color:n?.getDefaultColor(t.value),opacity:n?.getDefaultOpacity(t.value),sourceEvent:e.sourceEvent,hasMultiColorOption:"isMultiColor"in n,isMultiColor:"isMultiColor"in n&&n?.isMultiColor,onChange:n==null?void 0:this.onColorPickerChange.bind(this,t.value,n),onChangeHide:(s=>{this.events.emit("saved-color",{type:n.type,colorPickerType:t.value,color:n.getDefaultColor(s)})}).bind(this,t.value)});break}case"text-size":{const s=Au(n)?n.fontSize:void 0;this.textSizeMenu.show(i,{items:Foe,ariaLabel:this.ctx.localeManager.t("toolbarAnnotationsTextSize"),value:s,onPress:o=>this.onTextSizeMenuPress(o,n),class:"ag-charts-annotations__text-size-menu"});break}case"delete":{this.events.emit("pressed-delete",null);break}case"lock":{n.locked=!n.locked,this.refreshButtons(n),this.events.emit("pressed-lock",{locked:n.locked});break}case"settings":{this.toolbar.toggleActiveButtonByIndex(t.index),this.events.emit("pressed-settings",e);break}}}onToolbarMoved(e){const{buttonBounds:t,popoverBounds:i}=e,n={x:i.x,y:i.y+i.height+4},s={y:i.y-4};this.colorPicker.setAnchor(n,s);for(const[o,r]of t.entries()){const a=this.visibleButtons.at(o);if(!a)continue;const l={x:r.x,y:r.y+r.height-1},c={y:r.y};switch(a.value){case"line-stroke-width":this.lineStrokeWidthMenu.setAnchor(l,c);break;case"line-style-type":this.lineStyleTypeMenu.setAnchor(l,c);break;case"text-size":this.textSizeMenu.setAnchor(l,c);break}}}onColorPickerChange(e,t,i,n,s,o){this.events.emit("updated-color",{type:t.type,colorPickerType:e,colorOpacity:i,color:n,opacity:s,isMultiColor:o}),this.updateColorPickerColor(e,i,s,o)}onTextSizeMenuPress(e,t){if(!WF(t))return;const i=e.value;this.events.emit("updated-font-size",{type:t.type,fontSize:i}),this.textSizeMenu.hide(),this.updateFontSize(i)}onLineStyleTypeMenuPress(e,t){if(!Rp(t))return;const i=e.value;this.events.emit("updated-line-style",{type:t.type,lineStyleType:i}),this.lineStyleTypeMenu.hide(),this.updateLineStyleType(e)}onLineStrokeWidthMenuPress(e,t){if(!Rp(t))return;const i=e.value;this.events.emit("updated-line-width",{type:t.type,strokeWidth:i}),this.lineStrokeWidthMenu.hide(),this.updateStrokeWidth(e)}refreshButtons(e){const t=e.locked??!1;for(const[i,n]of this.visibleButtons.entries())n&&(n.value==="lock"?(this.toolbar.toggleSwitchCheckedByIndex(i,t),this.updateButtonByIndex(i,t?n.checkedOverrides.toJson():n.toJson())):this.toolbar.toggleButtonEnabledByIndex(i,!t));WF(e)&&this.updateFontSize(e.fontSize),this.updateColors(e),this.updateLineStyles(e)}updateLineStyles(e){if(!Rp(e))return;const t=e.strokeWidth??1,i=m0(e.lineDash,e.lineStyle);this.updateStrokeWidth({strokeWidth:t,value:t,label:String(t)}),this.updateLineStyleType(Dw.find(n=>n.value===i)??Dw[0])}updateButtonByValue(e,t){const i=this.visibleButtons.findIndex(n=>n.value===e);i!==-1&&this.updateButtonByIndex(i,t)}updateButtonByIndex(e,t){const i=this.visibleButtons.at(e);i&&this.toolbar.updateButtonByIndex(e,{...i.toJson(),...t,value:t.value??i.value})}};D([by],tW.prototype,"enabled");D([by],tW.prototype,"buttons");var{StateMachine:Z6,StateMachineProperty:iW,Vec2:q6,Debug:VPe}=N,ts=class extends Z6{constructor(e){const t=({context:i})=>{this.node?.drag(this.datum,this.offset,i,this.snapping),e.update()};super("idle",{idle:{dragStart:{target:"dragging",action:({offset:i,context:n})=>{this.hasMoved=!1,this.dragStart=i,this.offset=i,this.node?.dragStart(this.datum,i,n)}}},dragging:{keyDown:t,keyUp:t,drag:({offset:i,context:n})=>{this.hasMoved=q6.lengthSquared(q6.sub(i,this.dragStart))>0,this.offset=i,this.node?.drag(this.datum,i,n,this.snapping),e.update()},dragEnd:{target:Z6.parent,action:()=>{this.node?.stopDragging(),this.hasMoved&&e.recordAction("Move annotation"),e.update()}}}}),this.debug=VPe.create(!0,"annotations"),this.hasMoved=!1,this.snapping=!1}};D([iW()],ts.prototype,"snapping");D([iW()],ts.prototype,"datum");D([iW()],ts.prototype,"node");var{Property:HPe}=N,Lp=class extends JH{constructor(){super(...arguments),this.type="arrow-down"}static is(e){return St(e)&&e.type==="arrow-down"}};D([HPe],Lp.prototype,"type");var dS=class extends N.Marker{isPointInPath(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)}},Boe=class _oe extends N.Group{constructor(){super(...arguments),this.active=!1,this.locked=!1,this.visible=!1,this.zIndex=1}drag(t){const{handle:i,locked:n}=this;return n?{point:{x:i.x,y:i.y},offset:{x:0,y:0}}:{point:t,offset:{x:t.x-i.x,y:t.y-i.y}}}toggleActive(t){this.active=t,t||(this.handle.strokeWidth=_oe.INACTIVE_STROKE_WIDTH)}toggleHovered(t){this.glow.visible=!this.locked&&t,this.glow.dirtyPath=!0}toggleDragging(t){this.locked||(this.handle.visible=!t,this.glow.visible=this.glow.visible&&!t,this.handle.dirtyPath=!0,this.glow.dirtyPath=!0)}toggleLocked(t){this.locked=t}getCursor(){}containsPoint(t,i){return this.handle.containsPoint(t,i)}};Boe.INACTIVE_STROKE_WIDTH=2;var tg=Boe,nW=class zoe extends tg{constructor(){super(),this.handle=new dS({shape:"circle"}),this.glow=new dS({shape:"circle"}),this.append([this.handle]),this.handle.size=zoe.HANDLE_SIZE,this.handle.strokeWidth=tg.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2}update(t){this.handle.setProperties({...t,strokeWidth:tg.INACTIVE_STROKE_WIDTH})}drag(t){return{point:t,offset:{x:0,y:0}}}};nW.HANDLE_SIZE=7;nW.GLOW_SIZE=9;var Pp=nW,ZL=class Gr extends tg{constructor(){super(),this.handle=new N.Rect,this.glow=new N.Rect,this.gradient="horizontal",this.append([this.glow,this.handle]),this.handle.cornerRadius=Gr.CORNER_RADIUS,this.handle.width=Gr.HANDLE_SIZE,this.handle.height=Gr.HANDLE_SIZE,this.handle.strokeWidth=tg.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.cornerRadius=Gr.CORNER_RADIUS,this.glow.width=Gr.GLOW_SIZE,this.glow.height=Gr.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(t){if(super.toggleLocked(t),t){const i=(Gr.HANDLE_SIZE-Pp.HANDLE_SIZE)/2;this.handle.cornerRadius=1,this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.x+=i,this.handle.y+=i,this.handle.width=Pp.HANDLE_SIZE,this.handle.height=Pp.HANDLE_SIZE,this.glow.width=Pp.GLOW_SIZE,this.glow.height=Pp.GLOW_SIZE}else this.handle.cornerRadius=Gr.CORNER_RADIUS,this.handle.width=Gr.HANDLE_SIZE,this.handle.height=Gr.HANDLE_SIZE,this.glow.width=Gr.GLOW_SIZE,this.glow.height=Gr.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles)}update(t){if(this.cachedStyles={...t},this.active||delete t.strokeWidth,this.locked){delete t.fill,delete t.strokeWidth;const i=(Gr.HANDLE_SIZE-Pp.HANDLE_SIZE)/2;t.x-=i,t.y-=i,this.cachedStyles.x-=i,this.cachedStyles.y-=i}this.handle.setProperties(t),this.glow.setProperties({...t,x:(t.x??this.glow.x)-2,y:(t.y??this.glow.y)-2,strokeWidth:0,fill:t.stroke})}drag(t){return this.locked?{point:t,offset:{x:0,y:0}}:this.gradient==="vertical"?{point:{x:t.x,y:this.handle.y},offset:{x:t.x-this.handle.x,y:0}}:{point:{x:this.handle.x,y:t.y},offset:{x:0,y:t.y-this.handle.y}}}getCursor(){if(!this.locked)return this.gradient==="vertical"?"col-resize":"row-resize"}};ZL.HANDLE_SIZE=12;ZL.GLOW_SIZE=16;ZL.CORNER_RADIUS=4;var ab=ZL,sW=class nw extends tg{constructor(){super(),this.handle=new dS({shape:"circle"}),this.glow=new dS({shape:"circle"}),this.append([this.glow,this.handle]),this.handle.size=nw.HANDLE_SIZE,this.handle.strokeWidth=tg.INACTIVE_STROKE_WIDTH,this.handle.zIndex=2,this.glow.size=nw.GLOW_SIZE,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}toggleLocked(t){super.toggleLocked(t),t?(this.handle.fill=this.handle.stroke,this.handle.strokeWidth=0,this.handle.size=Pp.HANDLE_SIZE,this.glow.size=Pp.GLOW_SIZE):(this.handle.size=nw.HANDLE_SIZE,this.glow.size=nw.GLOW_SIZE,this.cachedStyles&&this.handle.setProperties(this.cachedStyles))}update(t){this.cachedStyles={...t},this.active||delete t.strokeWidth,this.locked&&(delete t.fill,delete t.strokeWidth),this.handle.setProperties(t),this.glow.setProperties({...t,strokeWidth:0,fill:t.stroke})}getCursor(){return"pointer"}};sW.HANDLE_SIZE=11;sW.GLOW_SIZE=17;var yn=sW,{ZIndexMap:WPe}=N,Xs=class extends N.Group{constructor(){super(...arguments),this.name="AnnotationScene",this.zIndex=WPe.CHART_ANNOTATION}static isCheck(e,t){return St(e)&&Object.hasOwn(e,"type")&&e.type===t}toggleHovered(e,t,i){i!==!0&&this.toggleHandles(e||t)}computeBBoxWithoutHandles(){return N.Transformable.toCanvas(this,N.Group.computeChildrenBBox(this.excludeChildren({instance:tg})))}updateNode(e,t,i){if(!i&&t){t.remove();return}return i&&t==null&&(t=new e,this.appendChild(t)),t}},{ContinuousScale:jPe,Vec2:gl,toRadians:UPe}=N;function y0(e,t,i=!1,n,s=1){if(!i)return gr(e,t);const o=n?mn(n,t):gl.origin();return gr(qL(e,o,s),t)}function qL(e,t,i){const n=gl.sub(e,t),s=UPe(i),o=Math.round(gl.angle(n)/s)*s;return gl.rotate(n,o,t)}function QL(e,t){const i={};for(const[n,s]of Ji(e))i[n]=mn(s,t);return i}function ch(e,t,i,n={overflowContinuous:0,translateVectors:void 0,invertYVectors:void 0,snap:void 0}){const{xAxis:s,yAxis:o}=i,r=Object.keys(e),a=[],l=[],c=new Set(n.translateVectors??r),u=new Set(n.invertYVectors??[]),d=new Set([...c,...u]),p=gl.multiply(t,gl.from(1,-1));for(const C of r)d.has(C)&&(e[C]=gl.add(e[C],u.has(C)?p:t),n.snap&&(e[C]=qL(e[C],n.snap.vectors[C],n.snap.angle))),a.push(s.getRangeOverflow(e[C].x)),l.push(o.getRangeOverflow(e[C].y));const f=(C,x)=>Math.abs(C)-Math.abs(x),m=(C,x,w)=>n.overflowContinuous===0||!jPe.is(C)?w.toSorted(f).at(-1)??0:r.length===d.size?w.toSorted(f).at(-n.overflowContinuous-1)??0:w.filter(T=>T!==0).length<=n.overflowContinuous?0:w.filter((T,L)=>T!==0&&Math.abs(T)<=Math.abs(x)&&d.has(r[L])).toSorted(f).at(-1)??0,v=gl.from(m(s.scale,t.x,a),m(o.scale,t.y,l));if(!gl.equal(v,gl.origin()))for(const C of r)d.has(C)&&(e[C]=gl.round(gl.sub(e[C],v),4));const b={};for(const C of r)b[C]=gr(e[C],i);return b}var{Vec2:$Pe}=N,Goe=class extends Xs{constructor(){super(...arguments),this.handle=new yn,this.anchor={x:0,y:0,position:"above"}}update(e,t){const i=mn(e,t);this.updateHandle(e,i),this.anchor=this.updateAnchor(e,i,t)}dragStart(e,t,i){this.dragState={offset:t,...QL({handle:e},i)}}drag(e,t,i){const{dragState:n}=this;if(!e.isWriteable()||!n)return;const{point:s}=ch({point:n.handle},$Pe.sub(t,n.offset),i);e.x=s.x,e.y=s.y}translate(e,t,i){if(!e.isWriteable())return;const{point:n}=ch({point:mn(e,i)},t,i);e.x=n.x,e.y=n.y}toggleHandles(e){this.handle.visible=!!e,this.handle.toggleHovered(this.activeHandle==="handle")}toggleActive(e){this.toggleHandles(e),this.handle.toggleActive(e)}stopDragging(){this.handle.toggleDragging(!1)}copy(e,t,i){const n=mn(e,i),s=gr({x:n.x-30,y:n.y-30},i);return t.x=s.x,t.y=s.y,t}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(e,t){const{handle:i}=this;return this.activeHandle=void 0,i.containsPoint(e,t)?(this.activeHandle="handle",!0):!1}getNodeAtCoords(e,t){if(this.handle.containsPoint(e,t))return"handle"}updateHandle(e,t,i){const{x:n,y:s}=this.getHandleCoords(e,t,i),o=this.getHandleStyles(e);this.handle.update({...o,x:n,y:s}),this.handle.toggleLocked(e.locked??!1)}updateAnchor(e,t,i){const n=this.getHandleCoords(e,t);return{x:n.x+i.seriesRect.x,y:n.y+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(e,t,i){return{x:t.x,y:t.y}}getHandleStyles(e){return{fill:e.handle.fill,stroke:e.handle.stroke,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}},Voe=class extends Goe{constructor(){super(),this.append([this.handle])}update(e,t){super.update(e,t);const i=mn(e,t);this.updateShape(e,i)}updateShape(e,t){this.updateShapeStyles(e),this.updateShapePath(e,t)}updateShapeStyles(e){const{shape:t}=this;t.fill=e.fill,t.fillOpacity=e.fillOpacity??1}updateShapePath(e,t){const{shape:i}=this;i.x=t.x,i.y=t.y,i.size=e.size}containsPoint(e,t){return super.containsPoint(e,t)||this.shape.containsPoint(e,t)}getNodeAtCoords(e,t){return this.shape.containsPoint(e,t)?"shape":super.getNodeAtCoords(e,t)}},Hoe=[[.5,0],[1,.5],[.75,.5],[.75,1],[.25,1],[.25,.5],[0,.5]];function Woe(e){N.drawMarkerUnitPolygon(e,Hoe)}Woe.anchor={x:.5,y:0};var ck=class extends Voe{constructor(){super(),this.type="arrow-up",this.shape=new dS({shape:Woe}),this.append([this.shape])}static is(e){return Xs.isCheck(e,"arrow-up")}getHandleCoords(e,t){const i=yn.HANDLE_SIZE/2,n=super.getHandleCoords(e,t);return n.y-=i,n}},KPe=Hoe.map(([e,t])=>[e,1-t]);function joe(e){N.drawMarkerUnitPolygon(e,KPe)}joe.anchor={x:.5,y:1};var uk=class extends Voe{constructor(){super(),this.type="arrow-down",this.shape=new dS({shape:joe}),this.append([this.shape])}static is(e){return Xs.isCheck(e,"arrow-down")}updateAnchor(e,t,i){const n=super.updateAnchor(e,t,i);return n.y-=e.size,n}getHandleCoords(e,t){const i=yn.HANDLE_SIZE/2,n=super.getHandleCoords(e,t);return n.y+=i,n}},{StateMachine:dk,StateMachineProperty:YPe,Debug:XPe}=N,oW=class extends dk{constructor(e){const t=({point:n})=>{const s=this.createDatum();s.set({x:n.x,y:n.y}),e.create(s)},i=()=>{this.node?.toggleActive(!0),e.showAnnotationOptions(),e.update()};super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},cancel:dk.parent,reset:dk.parent},"waiting-first-render":{render:{target:dk.parent,action:i}}}),this.debug=XPe.create(!0,"annotations")}};D([YPe()],oW.prototype,"node");var ZPe=class extends oW{createDatum(){return new Lp}},Q6={type:"arrow-down",datum:Lp,scene:uk,isDatum:Lp.is,translate:(e,t,i,n)=>{Lp.is(t)&&uk.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(Lp.is(t)&&Lp.is(i)&&uk.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{Lp.is(t)&&uk.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new ZPe({...e,create:t("arrow-down")}),dragState:e=>new ts(e)},{Property:qPe}=N,Np=class extends JH{constructor(){super(...arguments),this.type="arrow-up"}static is(e){return St(e)&&e.type==="arrow-up"}};D([qPe],Np.prototype,"type");var QPe=class extends oW{createDatum(){return new Np}},J6={type:"arrow-up",datum:Np,scene:ck,isDatum:Np.is,translate:(e,t,i,n)=>{Np.is(t)&&ck.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(Np.is(t)&&Np.is(i)&&ck.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{Np.is(t)&&ck.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new QPe({...e,create:t("arrow-up")}),dragState:e=>new ts(e)},{Vec2:JPe,Vec4:e8}=N,Uoe=class extends Xs{constructor(){super(...arguments),this.overflowContinuous=0}extendLine({x1:e,y1:t,x2:i,y2:n},s,o){const r={x1:e,y1:t,x2:i,y2:n};if(!s.extendStart&&!s.extendEnd)return r;const[a,l]=aPe(r,o.yAxis.bounds),c=r.x2<r.x1,u=r.y1>=r.y2,d=r.x2===r.x1;return s.extendEnd&&(d?r.y2=u?l.y:a.y:(r.x2=c?a.x:l.x,r.y2=c?a.y:l.y)),s.extendStart&&(d?r.y1=u?a.y:l.y:(r.x1=c?l.x:a.x,r.y1=c?l.y:a.y)),r}dragStart(e,t,i){this.dragState={offset:t,...QL({start:e.start,end:e.end},i)}}drag(e,t,i,n){e.isWriteable()&&(this.activeHandle?this.dragHandle(e,t,i,n):this.dragAll(e,t,i))}dragAll(e,t,i){const{dragState:n}=this;n&&this.translatePoints(e,n.start,n.end,JPe.sub(t,n.offset),i)}translate(e,t,i){e.isWriteable()&&this.translatePoints(e,mn(e.start,i),mn(e.end,i),t,i)}copy(e,t,i){const n=vr(e,i);if(!n)return;const s=this.computeBBoxWithoutHandles(),o={x:-s.width/2,y:-s.height/2};return this.translatePoints(t,e8.start(n),e8.end(n),o,i),t}translatePoints(e,t,i,n,s){const o=this.getTranslatePointsVectors(t,i),r=ch(o,n,s,{overflowContinuous:this.overflowContinuous});e.start.x=r.start.x,e.end.x=r.end.x,e.start.y=r.start.y,e.end.y=r.end.y}getTranslatePointsVectors(e,t){return{start:e,end:t}}},{Vec2:eNe,Vec4:t8}=N,rW=class extends Uoe{constructor(){super(...arguments),this.start=new yn,this.end=new yn,this.anchor={x:0,y:0,position:"above"}}update(e,t){const i=vr(e,t);i!=null&&(this.updateHandles(e,i),this.updateAnchor(e,i,t))}toggleHandles(e){if(typeof e=="boolean")this.start.visible=e,this.end.visible=e;else for(const[t,i]of Ji(e))this[t].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(e){this.toggleHandles(e),this.start.toggleActive(e),this.end.toggleActive(e)}dragHandle(e,t,i,n){const{activeHandle:s,dragState:o}=this;if(!s||!o)return;this[s].toggleDragging(!0);const r=s==="start"?"end":"start",a=n?{vectors:{[s]:mn(e[r],i)},angle:e.snapToAngle}:void 0,{[s]:l}=ch({[s]:o[s]},eNe.sub(t,o.offset),i,{overflowContinuous:0,snap:a});e[s].x=l.x,e[s].y=l.y}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return"pointer"}containsPoint(e,t){const{start:i,end:n}=this;return this.activeHandle=void 0,i.containsPoint(e,t)?(this.activeHandle="start",!0):n.containsPoint(e,t)?(this.activeHandle="end",!0):!1}getNodeAtCoords(e,t){if(this.start.containsPoint(e,t)||this.end.containsPoint(e,t))return"handle"}updateHandles(e,t,i){this.start.update({...this.getHandleStyles(e,"start"),...this.getHandleCoords(e,t,"start")}),this.end.update({...this.getHandleStyles(e,"end"),...this.getHandleCoords(e,t,"end",i)}),this.start.toggleLocked(e.locked??!1),this.end.toggleLocked(e.locked??!1)}updateAnchor(e,t,i,n){this.anchor={x:t.x1+i.seriesRect.x,y:t.y1+i.seriesRect.y,position:this.anchor.position}}getHandleCoords(e,t,i,n){return i==="start"?t8.start(t):t8.end(t)}getHandleStyles(e,t){return{fill:e.handle.fill,stroke:e.handle.stroke,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}},{Vec4:i8}=N,tNe=class extends rW{constructor(){super(...arguments),this.label=new N.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(e){this.textInputBBox=e,this.markDirty("TextualStartEndScene")}update(e,t){const i=vr(e,t);if(i==null)return;const n=this.getTextBBox(e,i);this.updateLabel(e,n,i),this.updateHandles(e,i,n),this.updateShape(e,n,i),this.updateAnchor(e,i,t,n)}containsPoint(e,t){return super.containsPoint(e,t)||this.label.containsPoint(e,t)}getNodeAtCoords(e,t){return this.label.containsPoint(e,t)?"text":super.getNodeAtCoords(e,t)}getTextBBox(e,t){const{text:i}=e.getText();return QH(e,i,i8.end(t),this.textInputBBox)}updateLabel(e,t,i){const{text:n,isPlaceholder:s}=e.getText();Doe(this.label,n,s,e,this.getLabelCoords(e,t,i))}updateShape(e,t,i){}getLabelCoords(e,t,i){return i8.end(i)}getHandleStyles(e,t){return{...super.getHandleStyles(e,t),stroke:e.handle.stroke??e.color}}},{drawCorner:iNe,Path:nNe}=N,hk=class extends tNe{constructor(){super(),this.type="callout",this.shape=new nNe,this.append([this.shape,this.label,this.start,this.end])}static is(e){return Xs.isCheck(e,"callout")}drag(e,t,i,n){e.isWriteable()&&(this.activeHandle==="end"?this.dragHandle(e,t,i,n):this.dragAll(e,t,i))}getLabelCoords(e,t,i){const n=e.getPadding(),{bodyBounds:s={x:0,y:0,width:0,height:0}}=this.getDimensions(e,t,i)??{};return{x:s.x+n.left,y:s.y-n.bottom}}getHandleStyles(e,t){return t==="start"?{fill:e.handle.fill,stroke:e.handle.stroke??e.stroke,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}:{fill:void 0,strokeWidth:0}}updateAnchor(e,t,i,n){const{bodyBounds:s}=this.getDimensions(e,n,t)??{},o=s??n;this.anchor={x:o.x+i.seriesRect.x,y:o.y+i.seriesRect.y-o.height,position:this.anchor.position}}updateShape(e,t,i){const{shape:n}=this;n.fill=e.fill,n.fillOpacity=e.fillOpacity??1,n.stroke=e.stroke,n.strokeWidth=e.strokeWidth??1,n.strokeOpacity=e.strokeOpacity??1;const{tailPoint:s,bodyBounds:o}=this.getDimensions(e,t,i)??{};!s||!o||this.updatePath(s,o)}updatePath(e,t){const{x:i,y:n}=e,{x:s,y:o,width:r,height:a}=t,l=o-a,c=s+r,u=this.calculateCalloutPlacement({x:i,y:n},t),d=8,p=[{coordinates:{x0:s,x1:s+d,y0:l+d,y1:l,cx:u==="topLeft"?i:s+d,cy:u==="topLeft"?n:l+d},type:u==="topLeft"?"calloutCorner":"corner"},{coordinates:{x0:s+d,x1:c-d,y0:l,y1:l,cx:i,cy:n},type:u==="top"?"calloutSide":"side"},{coordinates:{x0:c-d,x1:c,y0:l,y1:l+d,cx:u==="topRight"?i:c-d,cy:u==="topRight"?n:l+d},type:u==="topRight"?"calloutCorner":"corner"},{coordinates:{x0:c,x1:c,y0:l+d,y1:o-d,cx:i,cy:n},type:u==="right"?"calloutSide":"side"},{coordinates:{x0:c,x1:c-d,y0:o-d,y1:o,cx:u==="bottomRight"?i:c-d,cy:u==="bottomRight"?n:o-d},type:u==="bottomRight"?"calloutCorner":"corner"},{coordinates:{x0:c-d,x1:s+d,y0:o,y1:o,cx:i,cy:n},type:u==="bottom"?"calloutSide":"side"},{coordinates:{x0:s+d,x1:s,y0:o,y1:o-d,cx:u==="bottomLeft"?i:s+d,cy:u==="bottomLeft"?n:o-d},type:u==="bottomLeft"?"calloutCorner":"corner"},{coordinates:{x0:s,x1:s,y0:o-d,y1:l+d,cx:i,cy:n},type:u==="left"?"calloutSide":"side"}],{path:f}=this.shape;f.clear(),f.moveTo(s,l+d);for(const{coordinates:m,type:v}of p)this.drawPath(f,m,d,v);f.closePath()}drawPath(e,{x0:t,y0:i,x1:n,y1:s,cx:o,cy:r},a,l){switch(l){case"calloutCorner":{e.lineTo(o,r),e.lineTo(n,s);break}case"corner":{iNe(e,{x0:t,x1:n,y0:i,y1:s,cx:o,cy:r},a,!1);break}case"calloutSide":{if(t===n){const u=i>s?-1:1,d=Math.min(i,s)+Math.abs(i-s)/2;e.lineTo(t,d-6*u),e.lineTo(o,r),e.lineTo(t,d+6*u),e.lineTo(n,s)}else{const u=t>n?-1:1,d=Math.min(t,n)+Math.abs(n-t)/2;e.lineTo(d-6*u,i),e.lineTo(o,r),e.lineTo(d+6*u,i),e.lineTo(n,s)}break}case"side":default:{e.lineTo(n,s);break}}}calculateCalloutPlacement(e,t){const i=t.x+t.width,n=t.y-t.height;let s,o;return e.x>i?s="right":e.x<t.x&&(s="left"),e.y>t.y?o="bottom":e.y<n&&(o="top"),s&&o?`${o}${s[0].toUpperCase()}${s.substring(1)}`:o??s}getDimensions(e,t,i){const{fontSize:n}=e,s=e.getPadding(),o=s.left+s.right,r=s.top+s.bottom,a=t.width+o,l=Math.max(t.height+r,n+r);return{tailPoint:{x:i.x1,y:i.y1},bodyBounds:{x:t.x,y:t.y,width:a,height:l}}}containsPoint(e,t){const{start:i,end:n,shape:s}=this;if(this.activeHandle=void 0,i.containsPoint(e,t))return this.activeHandle="start",!0;const o=n.containsPoint(e,t)||s.containsPoint(e,t);return o&&(this.activeHandle="end"),o}};function aW({key:e}){return e==="Escape"}function lW({key:e,shiftKey:t}){return!t&&e==="Enter"}var{StateMachine:Ql,StateMachineProperty:$oe,Debug:sNe}=N,cW=class extends Ql{constructor(e){const t=({point:p})=>{const f=this.createDatum();f.set({start:p,end:p,visible:!0}),e.create(f)},i=()=>{const{node:p}=this;p?.toggleActive(!0),p?.toggleHandles({start:!0})},n=()=>{e.showTextInput(),this.datum&&(this.datum.visible=!1)},s=()=>{e.hideTextInput(),this.datum&&(this.datum.visible=!0),e.deselect()},o=p=>{this.node?.setTextInputBBox(p),e.update()},r=({point:p})=>{const{datum:f,node:m}=this;f?.set({end:p}),m?.toggleActive(!0),m?.toggleHandles({end:!1}),e.update()},a=()=>{e.showAnnotationOptions(),this.node?.toggleHandles({end:!0})},l=({colorPickerType:p,colorOpacity:f,color:m,opacity:v,isMultiColor:b})=>{const{datum:C}=this;C&&(p==="text-color"&&e.updateTextInputColor(m),XL(C,p,f,m,v,b),e.update())},c=p=>{const{datum:f,node:m}=this;!f||!m||!Au(f)||(f.fontSize=p,e.updateTextInputFontSize(p),e.update())},u=()=>{e.delete()},d=({textInputValue:p,bbox:f})=>{const{datum:m}=this;if(f!=null&&p!=null&&p.length>0){if(!Au(m))return;const v=WL(m,p,f.width);m?.set({text:v}),e.update(),e.recordAction(`Create ${m?.type} annotation`)}else e.delete()};super("start",{start:{click:{target:"waiting-first-render",action:t},dragStart:{target:"waiting-first-render",action:t},cancel:Ql.parent,reset:Ql.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:r,drag:r,click:{target:"edit",action:a},dragEnd:{target:"edit",action:a},reset:{target:Ql.parent,action:u},cancel:{target:Ql.parent,action:u}},edit:{onEnter:n,updateTextInputBBox:o,color:l,fontSize:c,textInput:[{guard:aW,target:Ql.parent,action:u},{guard:lW,target:Ql.parent,action:d}],click:{target:Ql.parent,action:d},dragStart:{target:Ql.parent,action:d},resize:{target:Ql.parent,action:d},onExit:s,cancel:{target:Ql.parent,action:u}}}),this.debug=sNe.create(!0,"annotations")}};D([$oe()],cW.prototype,"datum");D([$oe()],cW.prototype,"node");var oNe=class extends cW{createDatum(){return new oc}},n8={type:"callout",datum:oc,scene:hk,isDatum:oc.is,translate:(e,t,i,n)=>{if(oc.is(t)&&hk.is(e))return e.translate(t,i,n)},copy:(e,t,i,n)=>{if(oc.is(t)&&oc.is(i)&&hk.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{oc.is(t)&&hk.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new oNe({...e,create:t("callout")}),dragState:e=>new ts(e)},uW=class extends Goe{constructor(){super(...arguments),this.label=new N.Text({zIndex:1}),this.anchor={x:0,y:0,position:"above-left"}}setTextInputBBox(e){this.textInputBBox=e,this.markDirty("TextualPointScene")}update(e,t){const i=mn(e,t),n=this.getTextBBox(e,i,t);this.updateLabel(e,n),this.updateHandle(e,i,n),this.updateShape(e,n),this.anchor=this.updateAnchor(e,n,t)}copy(e,t,i){const n=mn(e,i),s=this.getTextBBox(e,n,i),o=e.getPadding(),r=o.left+o.right,a=o.top+o.bottom,l=(s.width+r)/2,c=s.height+a,u=gr({x:n.x-l,y:n.y-c},i);return t.x=u.x,t.y=u.y,t}containsPoint(e,t){const{label:i}=this;return super.containsPoint(e,t)||i.visible&&i.containsPoint(e,t)}getNodeAtCoords(e,t){return this.label.visible&&this.label.containsPoint(e,t)?"text":super.getNodeAtCoords(e,t)}getTextBBox(e,t,i){const{text:n}=e.getText();return QH(e,n,{x:t.x,y:t.y},this.textInputBBox)}updateLabel(e,t){const{text:i,isPlaceholder:n}=e.getText();Doe(this.label,i,n,e,this.getLabelCoords(e,t),this.getTextBaseline(e))}updateShape(e,t){}updateAnchor(e,t,i){return{x:t.x+i.seriesRect.x,y:t.y+i.seriesRect.y-t.height,position:this.anchor.position}}getLabelCoords(e,t){return t}getTextBaseline(e){return e.position=="center"?"middle":e.position}getHandleCoords(e,t,i){return i}getHandleStyles(e){const t=super.getHandleStyles(e);return t.stroke=e.handle.stroke??e.color,t}},{drawCorner:UF}=N,pk=class extends uW{constructor(){super(),this.type="comment",this.shape=new N.Path,this.append([this.shape,this.label,this.handle])}static is(e){return Xs.isCheck(e,"comment")}updateShape(e,t){const{shape:i}=this;i.fill=e.fill,i.fillOpacity=e.fillOpacity??1,i.stroke=e.stroke??"transparent",i.strokeWidth=e.strokeWidth??1,i.strokeOpacity=e.strokeOpacity??1,this.updatePath(e,t)}getLabelCoords(e,t){const i=e.getPadding();return{x:t.x+i.left,y:t.y-i.bottom}}getHandleStyles(e){return{fill:e.handle.fill,stroke:e.handle.stroke??e.stroke??e.fill,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}updateAnchor(e,t,i){const n=super.updateAnchor(e,t,i),s=e.getPadding();return n.y-=s.bottom+s.top,n}updatePath(e,t){const i=e.getPadding(),{x:n,y:s}=t;let{width:o,height:r}=t;const{fontSize:a}=e,l=i.left+i.right,c=i.top+i.bottom;o=o+l,r=Math.max(r+c,a+c);const u=s-r,d=n+o,p=(fc(a,HL)+c)/2,{path:f}=this.shape;f.clear(),f.moveTo(n,s),f.lineTo(n,u+p),UF(f,{x0:n,x1:n+p,y0:u+p,y1:u,cx:n+p,cy:u+p},p,!1),f.lineTo(d-p,u),UF(f,{x0:d-p,x1:d,y0:u,y1:u+p,cx:d-p,cy:u+p},p,!1),f.lineTo(d,s-p),UF(f,{x0:d,x1:d-p,y0:s-p,y1:s,cx:d-p,cy:s-p},p,!1),f.closePath()}containsPoint(e,t){return super.containsPoint(e,t)||this.shape.containsPoint(e,t)}},{StateMachine:Sd,StateMachineProperty:Koe,Debug:rNe}=N,XD=class extends Sd{constructor(e){const t=({point:u})=>{const d=this.createDatum();d.set({x:u.x,y:u.y}),e.create(d)},i=()=>{this.node?.toggleActive(!0),e.showAnnotationOptions(),e.update()},n=()=>{e.showTextInput(),this.datum&&(this.datum.visible=!1)},s=()=>{e.hideTextInput(),this.datum&&(this.datum.visible=!0),e.deselect()},o=u=>{this.node?.setTextInputBBox(u),e.update()},r=({colorPickerType:u,colorOpacity:d,color:p,opacity:f,isMultiColor:m})=>{this.datum&&(u==="text-color"&&e.updateTextInputColor(p),XL(this.datum,u,d,p,f,m),e.update())},a=u=>{const{datum:d,node:p}=this;!d||!p||!Au(d)||(d.fontSize=u,e.updateTextInputFontSize(u),e.update())},l=()=>{e.delete()},c=({textInputValue:u,bbox:d})=>{if(d!=null&&u!=null&&u.length>0){const{datum:p}=this;if(!Au(p))return;const f=WL(p,u,d.width);p?.set({text:f}),e.update(),e.recordAction(`Create ${p?.type} annotation`)}else e.delete()};super("start",{start:{click:{target:"waiting-first-render",action:t},dragStart:{target:"waiting-first-render",action:t},cancel:Sd.parent,reset:Sd.parent},"waiting-first-render":{render:{target:"edit",action:i}},edit:{onEnter:n,updateTextInputBBox:o,color:r,fontSize:a,textInput:[{guard:aW,target:Sd.parent,action:l},{guard:lW,target:Sd.parent,action:c}],click:{target:Sd.parent,action:c},dragStart:{target:Sd.parent,action:c},resize:{target:Sd.parent,action:c},onExit:s,cancel:{target:Sd.parent,action:l}}}),this.debug=rNe.create(!0,"annotations")}};D([Koe()],XD.prototype,"datum");D([Koe()],XD.prototype,"node");var aNe=class extends XD{createDatum(){return new ru}},s8={type:"comment",datum:ru,scene:pk,isDatum:ru.is,translate:(e,t,i,n)=>{ru.is(t)&&pk.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(ru.is(t)&&ru.is(i)&&pk.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{ru.is(t)&&pk.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new aNe({...e,create:t("comment")}),dragState:e=>new ts(e)},{calculateLabelTranslation:lNe}=N,Yoe=class extends N.Group{constructor(){super({name:"AnnotationAxisLabelGroup"}),this.label=new N.Text({zIndex:1}),this.rect=new N.Rect;const{label:e}=this;e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.textBaseline="middle",e.textAlign="center",this.append([this.rect,this.label])}update(e){this.updateLabel(e),this.updateRect(e),this.updatePosition(e)}updateLabel({value:e,styles:t,context:i}){const{fontWeight:n,fontSize:s,fontStyle:o,fontFamily:r,textAlign:a,color:l="white",formatter:c}=t,u=c?c({value:e}):i.formatScaleValue(e,"annotation-label");this.label.setProperties({fontWeight:n,fontSize:s,fontStyle:o,fontFamily:r,textAlign:a,fill:l,text:u})}updateRect({styles:e}){const{rect:t}=this,{cornerRadius:i,fill:n,fillOpacity:s,stroke:o,strokeOpacity:r}=e;t.fill=n,t.fillOpacity=s??1,t.stroke=o,t.strokeOpacity=r??1,t.cornerRadius=i??0}updatePosition({x:e,y:t,context:i,styles:{padding:n}}){const{label:s,rect:o}=this,r=s.getBBox()?.clone(),a=n??8,l=n??4,{xTranslation:c,yTranslation:u}=lNe({yDirection:!0,padding:i.labelPadding,position:i.position??"left",bbox:r});r.grow(a,"horizontal"),r.grow(l,"vertical");const d=e+c,p=t+u;s.x=d,s.y=p,o.y=p-Math.round(r.height/2),o.x=d-Math.round(r.width/2),o.height=r.height,o.width=r.width}};Yoe.className="AxisLabel";var{Vec2:Kc}=N,Wr=class extends N.Line{constructor(){super(...arguments),this.growCollisionBox=9,this.clipMask=new Map}setProperties(e){return super.setProperties(e),this.updateCollisionBBox(),this}updateCollisionBBox(){const{growCollisionBox:e,strokeWidth:t,x1:i,y1:n,x2:s,y2:o}=this;let r=t+e;r%2===0&&(r+=1);const a=Kc.from(i,n-Math.floor(r/2)),l=Kc.from(s,o),c=Kc.distance(a,l);this.collisionBBox=new N.BBox(a.x,a.y,c,r)}isPointInPath(e,t){const{collisionBBox:i,x1:n,y1:s,x2:o,y2:r}=this;if(!i)return!1;const a=Kc.from(n,s),l=Kc.from(o,r),c=Kc.sub(Kc.from(e,t),a),u=Kc.sub(l,a),d=Kc.rotate(c,Kc.angle(c,u),a);return i.containsPoint(d.x,d.y)??!1}render(e){const{clipMask:t}=this,{ctx:i}=e;if(t.size===0){super.render(e);return}i.save();try{for(const n of this.clipMask.values()){const{x:s,y:o,radius:r}=n;i.beginPath(),i.rect(0,0,i.canvas.width,i.canvas.height),i.ellipse(s,o,r,r,0,Math.PI*2,0,!0),i.clip()}super.render(e)}finally{i.restore()}}setClipMask(e,t){const i=this.clipMask.get(e);N.jsonDiff(i,t)!=null&&this.markDirty("CollidableLine"),t?this.clipMask.set(e,t):this.clipMask.delete(e)}},Bm=class extends N.TransformableText{constructor(){super(...arguments),this.growCollisionBox={top:4,right:4,bottom:4,left:4}}isPointInPath(e,t){const i=this.fromParentPoint(e,t),n=this.computeBBoxWithoutTransforms();return n?n.grow(this.growCollisionBox).containsPoint(i.x,i.y):!1}},{Vec2:jo}=N;function Mb(e,t,i,n,s,o,r){if(!o||!s||!n){t.setClipMask(e);return}const{alignment:a,position:l}=n,c=Zoe(i,n.fontSize,r),{point:u,textBaseline:d}=qoe(c,l,a);Qoe(s,o,n,u,c.angle,d);const{x:p,y:f,width:m,height:v}=s.getBBox(),b=jo.length(jo.from(m,v)),C={x:p+m/2,y:f+v/2,radius:b/2+jo.length(c.offset)};return l==="center"?t.setClipMask(e,C):t.setClipMask(e),{clipMask:C,numbers:c}}function Xoe(e,t,i,n,s,o,r){if(!r||!o)return;const{alignment:a,position:l}=n,[c,u]=t.y1<=i.y1?[t,i]:[i,t];let d=c;l==="bottom"?d=u:l==="inside"&&(d={x1:(c.x1+u.x1)/2,y1:(c.y1+u.y1)/2,x2:(c.x2+u.x2)/2,y2:(c.y2+u.y2)/2});const p=Zoe(d,n.fontSize,s),{point:f,textBaseline:m}=qoe(p,l==="inside"?"center":l,a,e);Qoe(o,r,n,f,p.angle,m)}function Zoe(e,t,i){let[n,s]=jo.from(e);n.x>s.x&&([n,s]=[s,n]);const o=jo.normalized(jo.sub(s,n)),r=jo.angle(o),a=jo.multiply(o,yn.HANDLE_SIZE/2+(t??14)/2),l=jo.multiply(o,(i??2)/2+(t??14)/3);return{left:n,right:s,normal:o,angle:r,inset:a,offset:l}}function qoe({left:e,right:t,normal:i,angle:n,inset:s,offset:o},r,a,l){let c;a==="right"?c=jo.sub(t,s):a==="center"?c=jo.add(e,jo.multiply(i,jo.distance(e,t)/2)):c=jo.add(e,s);let u="bottom";return r==="bottom"?(c=jo.rotate(o,n+Math.PI/2,c),u="top"):r==="center"&&!l?u="middle":c=jo.rotate(o,n-Math.PI/2,c),{point:c,textBaseline:u}}function Qoe(e,t,i,n,s,o){e.setProperties({text:t,x:n.x,y:n.y,rotation:s,rotationCenterX:n.x,rotationCenterY:n.y,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textAlign:i.alignment,textBaseline:o})}var{ChartAxisDirection:cNe,Vec2:kf,Vec4:$F}=N,jp=class extends Xs{constructor(){super(),this.type="cross-line",this.line=new Wr,this.middle=new ab,this.isHorizontal=!1,this.append([this.line,this.middle])}static is(e){return Xs.isCheck(e,"cross-line")}update(e,t){const{seriesRect:i}=t;this.seriesRect=i,this.isHorizontal=Uo.is(e);const n=this.isHorizontal?t.yAxis:t.xAxis,s=this.convertCrossLine(e,n);if(s==null){this.visible=!1;return}this.visible=e.visible??!0,this.visible&&(this.updateLine(e,s),this.updateHandle(e,s),this.updateText(e,s),this.updateAxisLabel(e,n,s))}updateLine(e,t){const{line:i}=this,{lineDashOffset:n,stroke:s,strokeWidth:o,strokeOpacity:r}=e,{x1:a,y1:l,x2:c,y2:u}=t;i.setProperties({x1:a,y1:l,x2:c,y2:u,lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:n,stroke:s,strokeWidth:o,strokeOpacity:r,fillOpacity:0})}updateHandle(e,t){const{middle:i}=this,{locked:n,stroke:s,strokeWidth:o,strokeOpacity:r}=e,a={fill:e.handle.fill,stroke:e.handle.stroke??s,strokeOpacity:e.handle.strokeOpacity??r,strokeWidth:e.handle.strokeWidth??o},l=kf.sub($F.center(t),kf.from(i.handle.width/2,i.handle.height/2));i.gradient=this.isHorizontal?"horizontal":"vertical",i.update({...a,...l}),i.toggleLocked(n??!1)}updateText(e,t){this.text=this.updateNode(Bm,this.text,!!e.text.label),Mb(this.line.id,this.line,t,e.text,this.text,e.text.label,e.strokeWidth)}createAxisLabel(e){const t=new Yoe;return e.attachLabel(t),t}updateAxisLabel(e,t,i){this.axisLabel??(this.axisLabel=this.createAxisLabel(t));const{axisLabel:n,seriesRect:s}=this,{direction:o,position:r}=t;if(e.axisLabel.enabled){n.visible=this.visible;const a=r==="left"||r==="top"?$F.start(i):$F.end(i),l=o===cNe.X?a.x:a.y;if(!t.inRange(l)){n.visible=!1;return}const c=js(e.value);n.update({...kf.add(a,kf.required(s)),value:c,styles:e.axisLabel,context:t})}else n.visible=!1}setAxisLabelOpacity(e){this.axisLabel&&(this.axisLabel.opacity=e)}setAxisLabelVisible(e){this.axisLabel&&(this.axisLabel.visible=e)}toggleHandles(e){this.middle.visible=e,this.middle.toggleHovered(this.activeHandle==="middle")}destroy(){super.destroy(),this.axisLabel?.destroy()}toggleActive(e){this.toggleHandles(e),this.middle.toggleActive(e)}dragStart(e,t,i){const n=Uo.is(e)?{x:t.x,y:Fd(e.value,i.yAxis)}:{x:Fd(e.value,i.xAxis),y:t.y};this.dragState={offset:t,middle:n}}drag(e,t,i){const{activeHandle:n,dragState:s}=this;!e.isWriteable()||!s||(n&&this[n].toggleDragging(!0),this.translatePoint(e,s.middle,kf.sub(t,s.offset),i))}translate(e,t,i){if(!e.isWriteable())return;const n=Uo.is(e)?kf.from(0,Fd(e.value,i.yAxis)):kf.from(Fd(e.value,i.xAxis),0);this.translatePoint(e,n,t,i)}translatePoint(e,t,i,n){const s=Uo.is(e);s?i.x=0:i.y=0;const{point:o}=ch({point:t},i,n);e.value=s?o.y:o.x}stopDragging(){this.middle.toggleDragging(!1)}copy(e,t,i){const n=Uo.is(e),s=this.isHorizontal?i.yAxis:i.xAxis,o=this.convertCrossLine(e,s);if(!o)return;const r=n?-30:0,a=n?0:-30,l=gr({x:o.x1+a,y:o.y1+r},i);return t.set({value:n?l.y:l.x}),t}getCursor(){return this.activeHandle==null?"pointer":this[this.activeHandle].getCursor()}containsPoint(e,t){const{middle:i,line:n,text:s}=this;return this.activeHandle=void 0,i.containsPoint(e,t)?(this.activeHandle="middle",!0):n.isPointInPath(e,t)||!!s?.containsPoint(e,t)}getNodeAtCoords(e,t){if(this.text?.containsPoint(e,t))return"text";if(this.line.isPointInPath(e,t))return"line";if(this.middle.containsPoint(e,t))return"handle"}getAnchor(){const e=this.computeBBoxWithoutHandles();return this.isHorizontal?{x:e.x+e.width/2,y:e.y}:{x:e.x+e.width,y:e.y+e.height/2,position:"right"}}convertCrossLine(e,t){if(e.value==null)return;let i=0,n=0,s,o;const{bounds:r}=t,a=Fd(e.value,t);return Uo.is(e)?(s=r.width,n=a,o=a):(i=a,s=a,o=r.height),{x1:i,y1:n,x2:s,y2:o}}},{StateMachine:gk,StateMachineProperty:uNe,Debug:dNe}=N,dW=class extends gk{constructor(e,t){const i=({point:s})=>{const o=e==="horizontal",r=o?new Uo:new au;r.set({value:o?s.y:s.x}),t.create(r),t.recordAction(`Create ${o?"horizontal-line":"vertical-line"} annotation`)},n=()=>{this.node?.toggleActive(!0),t.showAnnotationOptions(),t.update()};super("start",{start:{click:{target:"waiting-first-render",action:i},drag:{target:"waiting-first-render",action:i},reset:gk.parent,cancel:gk.parent},"waiting-first-render":{render:{target:gk.parent,action:n}}}),this.debug=dNe.create(!0,"annotations")}};D([uNe()],dW.prototype,"node");var o8={type:"horizontal-line",datum:Uo,scene:jp,isDatum:Uo.is,translate:(e,t,i,n)=>{Uo.is(t)&&jp.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(Uo.is(t)&&Uo.is(i)&&jp.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{Uo.is(t)&&jp.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new dW("horizontal",{...e,create:t("horizontal-line")}),dragState:e=>new ts(e)},r8={type:"vertical-line",datum:au,scene:jp,isDatum:au.is,translate:(e,t,i,n)=>{au.is(t)&&jp.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(au.is(t)&&au.is(i)&&jp.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{au.is(t)&&jp.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new dW("vertical",{...e,create:t("vertical-line")}),dragState:e=>new ts(e)},{Vec4:hNe}=N,Joe=class{static updateBackground(e,t,i,n){const{background:s}=this,{seriesRect:o}=n;s.path.clear(!0);const r=hNe.from(0,0,o.width,o.height),a=this.getBackgroundPoints(e,t,i,r);for(let c=0;c<a.length;c++){const u=a[c];c===0?s.path.moveTo(u.x,u.y):s.path.lineTo(u.x,u.y)}s.path.closePath(),s.checkPathDirty();const l=this.getBackgroundStyles?.(e)??e.background;s.fill=l.fill,s.fillOpacity=l.fillOpacity??1}},ere=class extends Uoe{constructor(){super(...arguments),this.handles={},this.overflowContinuous=2,this.topLine=new Wr,this.bottomLine=new Wr,this.background=new N.Path({zIndex:-1}),this.anchor={x:0,y:0},this.updateBackground=Joe.updateBackground.bind(this)}update(e,t){const{locked:i,visible:n}=e,s=vr(e,t),o=vr(e.bottom,t);if(s==null||o==null){this.visible=!1;return}else this.visible=n??!0;const r=this.extendLine(s,e,t),a=this.extendLine(o,e,t);this.updateLines(e,r,a,t,s,o),this.updateHandles(e,s,o),this.updateText(e,s,o),this.updateBackground(e,r,a,t),this.updateAnchor(s,o);for(const l of Object.values(this.handles))l.toggleLocked(i??!1)}toggleHandles(e){const{handles:t}=this;if(typeof e=="boolean"){for(const[i,n]of Object.entries(t))n.visible=e,n.toggleHovered(this.activeHandle===i);return}for(const[i,n]of Object.entries(e)){const s=t[i];s.visible=n??!0,s.toggleHovered(this.activeHandle===i)}}toggleActive(e){this.toggleHandles(e);for(const t of Object.values(this.handles))t.toggleActive(e)}stopDragging(){const{activeHandle:e,handles:t}=this;e!=null&&t[e].toggleDragging(!1)}getAnchor(){return this.anchor}getCursor(){return this.activeHandle==null?"pointer":this.handles[this.activeHandle].getCursor()}containsPoint(e,t){const{handles:i,topLine:n,bottomLine:s,text:o}=this;this.activeHandle=void 0;for(const[r,a]of Object.entries(i))if(a.containsPoint(e,t))return this.activeHandle=r,!0;return n.containsPoint(e,t)||s.containsPoint(e,t)||!!o?.containsPoint(e,t)}getNodeAtCoords(e,t){if(this.text?.containsPoint(e,t))return"text";if(this.topLine.containsPoint(e,t)||this.bottomLine.containsPoint(e,t))return"line";for(const[,i]of Object.entries(this.handles))if(i.containsPoint(e,t))return"handle"}updateAnchor(e,t){const{x:i,y:n}=N.Transformable.toCanvasPoint(this.topLine,(e.x1+e.x2)/2,Math.min(e.y1,e.y2,t.y1,t.y2));this.anchor.x=i,this.anchor.y=n}},{Vec2:il,Vec4:vp}=N,fk=class extends ere{constructor(){super(),this.type="disjoint-channel",this.handles={topLeft:new yn,topRight:new yn,bottomLeft:new yn,bottomRight:new ab},this.append([this.background,this.topLine,this.bottomLine,...Object.values(this.handles)])}static is(e){return Xs.isCheck(e,"disjoint-channel")}dragHandle(e,t,i,n){const{activeHandle:s,handles:o}=this;if(s==null)return;const{offset:r}=o[s].drag(t);o[s].toggleDragging(!0),s==="bottomRight"&&(r.x=0);let a=[],l=[],c=n;switch(s){case"topLeft":a=["topLeft"],l=["bottomLeft"];break;case"bottomLeft":a=["bottomLeft"],l=["topLeft"];break;case"topRight":a=["topRight"],l=["bottomRight"];break;case"bottomRight":a=["bottomLeft","bottomRight"],c=!1;break}const u=vr(e,i),d=vr(e.bottom,i);if(!u||!d)return;const p={topLeft:vp.start(u),topRight:vp.end(u),bottomLeft:vp.start(d),bottomRight:vp.end(d)},f={vectors:{topLeft:p.topRight,bottomLeft:p.bottomRight,topRight:p.topLeft,bottomRight:p.bottomLeft},angle:e.snapToAngle},m=ch(p,r,i,{overflowContinuous:this.overflowContinuous,translateVectors:a,invertYVectors:l,snap:c?f:void 0});e.start.x=m.topLeft.x,e.start.y=m.topLeft.y,e.end.x=m.topRight.x,e.end.y=m.topRight.y,e.startHeight=m.topLeft.y-m.bottomLeft.y,e.endHeight=m.topRight.y-m.bottomRight.y}getTranslatePointsVectors(e,t){const{bottomLeft:i,bottomRight:n,topLeft:s,topRight:o}=this.handles,r=i.getBBox().y-s.getBBox().y,a=n.getBBox().y-o.getBBox().y,l=il.add(e,il.from(0,r)),c=il.add(t,il.from(0,a));return{start:e,end:t,bottomStart:l,bottomEnd:c}}updateLines(e,t,i){const{topLine:n,bottomLine:s}=this,{lineDashOffset:o,stroke:r,strokeOpacity:a,strokeWidth:l}=e,c={lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:o,stroke:r,strokeOpacity:a,strokeWidth:l};n.setProperties({...t,...c}),s.setProperties({...i,...c})}updateHandles(e,t,i){const{handles:{topLeft:n,topRight:s,bottomLeft:o,bottomRight:r}}=this,a={fill:e.handle.fill,stroke:e.handle.stroke??e.stroke,strokeOpacity:e.handle.strokeOpacity??e.strokeOpacity,strokeWidth:e.handle.strokeWidth??e.strokeWidth};n.update({...a,...vp.start(t)}),s.update({...a,...vp.end(t)}),o.update({...a,...vp.start(i)}),r.update({...a,...il.sub(vp.end(i),il.from(r.handle.width/2,r.handle.height/2))})}updateText(e,t,i){this.text=this.updateNode(Bm,this.text,!!e.text.label),Xoe(!1,t,i,e.text,e.strokeWidth,this.text,e.text.label)}getBackgroundPoints(e,t,i,n){const s=t.x1>t.x2,o=t.y1>t.y2,r=o?n.y2:n.y1,a=o?n.y1:n.y2,l=il.from(t);return e.extendEnd&&t.y2===a&&l.push(il.from(s?n.x1:n.x2,o?n.y1:n.y2)),e.extendEnd&&i.y2===r&&l.push(il.from(s?n.x1:n.x2,o?n.y2:n.y1)),l.push(...il.from(i).reverse()),e.extendStart&&i.y1===a&&l.push(il.from(s?n.x2:n.x1,o?n.y1:n.y2)),e.extendStart&&t.y1===r&&l.push(il.from(s?n.x2:n.x1,o?n.y2:n.y1)),l}},{StateMachine:bp,StateMachineProperty:hW,Debug:pNe}=N,JL=class extends bp{constructor(e){const t=({point:l})=>{const c=new xl;c.set({start:l,end:l,startHeight:0,endHeight:0}),e.create(c)},i=()=>{const{node:l}=this;l?.toggleActive(!0),l?.toggleHandles({topLeft:!0,topRight:!1,bottomLeft:!1,bottomRight:!1})},n=({offset:l,context:c})=>{const{datum:u,snapping:d}=this;u&&(u.set({end:y0(l,c,d,u.start,u.snapToAngle)}),e.update())},s=()=>{this.node?.toggleHandles({topRight:!0}),e.update()},o=({point:l})=>{const{datum:c,node:u}=this,d=js(c?.end.y),p=js(c?.start.y),{y:f}=l;if(c==null||!En(p)||!En(d)||!En(f))return;const m=d-(f??0),v=(p-d)*2+m,b={x:c?.start.x,y:p-v},C={x:c?.end.x,y:l.y};u?.toggleHandles({bottomLeft:!0,bottomRight:!0}),!(!e.validatePoint(b,{overflowContinuous:!0})||!e.validatePoint(C,{overflowContinuous:!0}))&&(c.set({startHeight:v,endHeight:m}),e.update())},r=({point:l})=>{const{datum:c,node:u}=this,d=js(c?.end.y),p=js(c?.start.y),{y:f}=l;if(c==null||!En(p)||!En(d)||!En(f))return;const m=d-(f??0),v=(p-d)*2+m,b={x:c.start.x,y:p-m},C={x:c.end.x,y:l.y};u?.toggleHandles(!0),!(!e.validatePoint(b,{overflowContinuous:!0})||!e.validatePoint(C,{overflowContinuous:!0}))&&(c.set({startHeight:v,endHeight:m}),e.recordAction("Create disjoint-channel annotation"),e.showAnnotationOptions(),e.update())},a=()=>e.delete();super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},reset:bp.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:n,drag:n,click:{target:"height",action:s},dragEnd:{target:"height",action:s},reset:{target:bp.parent,action:a},cancel:{target:bp.parent,action:a}},height:{hover:o,click:{target:bp.parent,action:r},drag:{target:bp.parent,action:r},reset:{target:bp.parent,action:a},cancel:{target:bp.parent,action:a}}}),this.debug=pNe.create(!0,"annotations"),this.snapping=!1}};D([hW()],JL.prototype,"datum");D([hW()],JL.prototype,"node");D([hW()],JL.prototype,"snapping");var a8={type:"disjoint-channel",datum:xl,scene:fk,isDatum:xl.is,translate:(e,t,i,n)=>{xl.is(t)&&fk.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(xl.is(t)&&xl.is(i)&&fk.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{xl.is(t)&&fk.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new JL({...e,create:t("disjoint-channel")}),dragState:e=>new ts(e)},V_=[0,23.6,38.2,50,61.8,78.6,100],gNe=[161.8,261.8,361.8,423.6],fNe=[...V_,...gNe],mNe={10:fNe,6:V_,4:V_.filter(e=>e!==78.6&&e!==23.6)},yNe=10;function vNe(e,t){const{x2:i,y1:n,y2:s}=e,o=n-s;return t==null?{x1:i,x2:i,y1:s-o,y2:s}:{x1:t.x1,x2:t.x2,y1:t.y2-o,y2:t.y2}}function tre({x1:e,y1:t,x2:i,y2:n},s,o,r,a=10){const l=t-n,c=o?-1:1;let u=r;const d=[];for(const[p,f]of mNe[a].entries()){const m=r+l*(f/100)*c,v=s.yAxis.scaleInvert(m);d.push({id:p,x1:e,x2:i,y1:u,y2:m,tag:f==100?0:1,label:{x1:Math.min(e,i)-yNe,x2:i,y1:m,y2:m,text:`${(f/100).toFixed(3)} (${v.toFixed(2)})`}}),u=m}return d}var{Vec2:bNe,Vec4:l8}=N,ire=class extends Xs{constructor(){super(),this.trendLine=new Wr,this.rangeFillsGroup=new N.Group({name:`${this.id}-range-fills`}),this.rangeFillsGroupSelection=N.Selection.select(this.rangeFillsGroup,N.Range),this.rangeStrokesGroup=new N.Group({name:`${this.id}-range-strokes`}),this.rangeStrokesGroupSelection=N.Selection.select(this.rangeStrokesGroup,Wr),this.labelsGroup=new N.Group({name:`${this.id}-ranges-labels`}),this.labelsGroupSelection=N.Selection.select(this.labelsGroup,Bm),this.anchor={x:0,y:0,position:"above"},this.append([this.trendLine,this.rangeFillsGroup,this.rangeStrokesGroup,this.labelsGroup])}update(e,t){let i=vr(e,t);if(i==null){this.visible=!1;return}if(i=l8.round(i),this.visible=e.visible??!0,!this.visible)return;this.updateLine(e,i,this.trendLine),this.updateHandles(e,i),this.updateAnchor(e,i,t);const{reverse:n}=e,s=this.extendLine(i,e,t),o=n?s.y1:s.y2,r=n?s.y2:s.y1,a=tre(s,t,e.reverse,o,e.bands);this.updateRanges(e,a,t);const l={...s,y1:r,y2:r};this.updateText(e,l)}extendLine({x1:e,y1:t,x2:i,y2:n},s,o){const r={x1:e,y1:t,x2:i,y2:n};if(!s.extendStart&&!s.extendEnd)return r;const{x:a,width:l}=o.xAxis.bounds;return s.extendEnd&&(r[e>i?"x1":"x2"]=a+l),s.extendStart&&(r[e>i?"x2":"x1"]=a),r}updateLine(e,t,i){if(!t||!i)return;const{lineDashOffset:n,strokeWidth:s,strokeOpacity:o,stroke:r}=e;i.setProperties({...t,lineCap:e.getLineCap(),lineDash:[3,4],lineDashOffset:n,strokeWidth:s,strokeOpacity:o,fillOpacity:0,stroke:r})}updateRangeStrokes(e){const{lineDashOffset:t,strokeWidth:i,strokeOpacity:n,strokes:s,rangeStroke:o,isMultiColor:r}=e;this.rangeStrokesGroupSelection.each((a,{x1:l,x2:c,y2:u,tag:d},p)=>{const f=u,m=r?s[p%s.length]:o;a.setProperties({x1:l,x2:c,y1:f,y2:f,stroke:m,strokeOpacity:n,strokeWidth:i,lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:t,tag:d})})}updateRanges(e,t,i){const n=s=>s.id;this.rangeFillsGroupSelection.update(t,void 0,n),this.rangeStrokesGroupSelection.update(t,void 0,n),this.labelsGroupSelection.update(t,void 0,n),this.updateRangeFills(e),this.updateRangeStrokes(e),this.updateRangeLabels(e,i)}updateRangeFills(e){const{lineDashOffset:t,strokeWidth:i,strokeOpacity:n,strokes:s,rangeStroke:o,showFill:r,isMultiColor:a}=e;this.rangeFillsGroupSelection.each((l,{x1:c,x2:u,y1:d,y2:p},f)=>{const m=a?s[f%s.length]:o;if(!r){l.visible=!1;return}l.setProperties({x1:c,x2:u,y1:d,y2:p,startLine:!1,endLine:!1,stroke:m,strokeOpacity:n,fill:m,fillOpacity:(n??1)*.15,strokeWidth:i,lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:t,visible:!0})})}updateRangeLabels(e,{xAxis:t}){const{rangeStrokesGroupSelection:i}=this,{strokes:n,strokeWidth:s,rangeStroke:o,isMultiColor:r,label:{fontFamily:a,fontSize:l,fontStyle:c,fontWeight:u,color:d}}=e,p={fontFamily:a,fontSize:l,fontStyle:c,fontWeight:u},f=this.checkWithinBounds(t,p,this.labelsGroupSelection.at(0));this.labelsGroupSelection.each((m,v,b)=>{const C=d??(r?n[b%n.length]:o),x=i.at(b);if(!x)return;const{text:w,...M}=v.label;if(f)m.setProperties({...p,text:w,x:M.x1,y:M.y1,textBaseline:"middle",textAlign:"end",fill:C}),Mb(m.id,x,M);else{const T={...p,position:"center",alignment:"left",color:C};Mb(m.id,x,M,T,m,w,s)}})}checkWithinBounds(e,t,i){if(!i)return!1;const{text:n,...s}=i.datum.label;i.setProperties({...t,text:n,x:s.x1,y:s.y1,textBaseline:"middle",textAlign:"end"});const{x:o}=i.getBBox();return o>=e.bounds.x&&o<=e.bounds.x+e.bounds.width}updateText(e,t){const i=this.rangeStrokesGroupSelection.selectByTag(0)[0];if(!i)return;const{text:n,strokeWidth:s}=e;this.text=this.updateNode(Bm,this.text,!!n.label),Mb(i.id,i,t,n,this.text,n.label,s)}updateAnchor(e,t,i,n){const s=l8.topCenter(t);bNe.apply(this.anchor,N.Transformable.toCanvasPoint(this.trendLine,s.x,s.y))}containsPoint(e,t){const{trendLine:i,rangeStrokesGroupSelection:n,text:s}=this;let o=!1;return n.each(r=>o||(o=r.isPointInPath(e,t))),o||i.isPointInPath(e,t)||!!s?.containsPoint(e,t)}getNodeAtCoords(e,t){if(this.text?.containsPoint(e,t))return"text";if(this.trendLine.isPointInPath(e,t))return"line"}getHandleStyles(e){return{fill:e.handle.fill,stroke:e.handle.stroke??e.stroke,strokeOpacity:e.handle.strokeOpacity??e.strokeOpacity,strokeWidth:e.handle.strokeWidth??e.strokeWidth}}drag(e,t,i,n){e.isWriteable()&&(this.activeHandle?this.dragHandle(e,t,i,n):this.dragAll(e,t,i))}getAnchor(){return this.anchor}getCursor(){return"pointer"}},{ContinuousScale:c8}=N;function dR(e,t,i={overflowContinuous:!1},n){if(t.x==null||t.y==null)return!1;const{xAxis:s,yAxis:o}=e,r=i.overflowContinuous&&c8.is(s.scale),a=i.overflowContinuous&&c8.is(o.scale),l=r||u8(t.x,s),c=a||u8(t.y,o);return!!(l&&c)}function u8(e,t){const{domain:i}=t.scale,n=js(e);return i&&n!=null&&t.continuous?n>=i[0]&&n<=i.at(-1):!0}var{Vec2:SNe,Vec4:Tf}=N,mk=class extends ire{constructor(){super(),this.type="fibonacci-retracement-trend-based",this.endRetracementLine=new Wr,this.start=new yn,this.end=new yn,this.endRetracement=new yn,this.append([this.endRetracementLine,this.start,this.end,this.endRetracement])}static is(e){return Xs.isCheck(e,"fibonacci-retracement-trend-based")}update(e,t){let{coords1:i,coords2:n}=this.getCoords(e,t);if(i==null||n==null){this.visible=!1;return}if(i=Tf.round(i),n=Tf.round(n),this.visible=e.visible??!0,!this.visible)return;(e.endRetracement.x==null||e.endRetracement.y==null)&&(n=void 0),this.updateLine(e,i,this.trendLine),this.updateLine(e,n,this.endRetracementLine),this.updateHandles(e,i,n),this.updateAnchor(e,n??i,t);const{reverse:s,bands:o}=e,r=vNe(i,n),a=this.extendLine(r,e,t),l=a.y2,c=a.y1,u=n?tre(a,t,s,l,o):[];this.updateRanges(e,u,t);const d={...a,y1:c,y2:c};this.updateText(e,d)}containsPoint(e,t){const{start:i,end:n,endRetracement:s,endRetracementLine:o}=this;return this.activeHandle=void 0,i.containsPoint(e,t)?(this.activeHandle="start",!0):n.containsPoint(e,t)?(this.activeHandle="end",!0):s.containsPoint(e,t)?(this.activeHandle="endRetracement",!0):o.isPointInPath(e,t)||super.containsPoint(e,t)}getNodeAtCoords(e,t){return this.start.containsPoint(e,t)||this.end.containsPoint(e,t)||this.endRetracement.containsPoint(e,t)?"handle":this.endRetracementLine.isPointInPath(e,t)?"line":super.getNodeAtCoords(e,t)}dragStart(e,t,i){this.dragState={offset:t,...QL({start:e.start,end:e.end,endRetracement:e.endRetracement},i)}}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1),this.endRetracement.toggleDragging(!1)}dragAll(e,t,i){const{dragState:n}=this;n&&this.translatePoints({datum:e,start:n.start,end:n.end,endRetracement:n.endRetracement,translation:SNe.sub(t,n.offset),context:i})}dragHandle(e,t,i,n){const{activeHandle:s,dragState:o}=this;if(!s||!o)return;this[s].toggleDragging(!0);const r=n?this.snapToAngle(e,t,i):gr(this[s].drag(t).point,i);!r||!dR(i,r)||(e[s].x=r.x,e[s].y=r.y)}snapToAngle(e,t,i){const{activeHandle:n}=this,s=["start","end","endRetracement"];if(!n)return;const o=(s.indexOf(n)+1)%s.length,r=s[o];this[n].toggleDragging(!0);const a=mn(e[r],i);return gr(qL(t,a,e.snapToAngle),i)}translatePoints({datum:e,start:t,end:i,endRetracement:n,translation:s,context:o}){const r=ch({start:t,end:i,endRetracement:n},s,o,{overflowContinuous:2});e.start.x=r.start.x,e.end.x=r.end.x,e.endRetracement.x=r.endRetracement.x,e.start.y=r.start.y,e.end.y=r.end.y,e.endRetracement.y=r.endRetracement.y}translate(e,t,i){this.translatePoints({datum:e,start:mn(e.start,i),end:mn(e.end,i),endRetracement:mn(e.endRetracement,i),translation:t,context:i})}copy(e,t,i){const{coords1:n,coords2:s}=this.getCoords(e,i);if(!n||!s)return;const o=this.computeBBoxWithoutHandles();return this.translatePoints({datum:t,start:Tf.start(n),end:Tf.end(n),endRetracement:Tf.end(s),translation:{x:-o.width/2,y:-o.height/2},context:i}),t}getCoords(e,t){return{coords1:vr(e,t),coords2:vr({start:e.end,end:e.endRetracement},t)}}toggleHandles(e){if(typeof e=="boolean")this.start.visible=e,this.end.visible=e,this.endRetracement.visible=e;else for(const[t,i]of Ji(e))this[t].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end"),this.endRetracement.toggleHovered(this.activeHandle==="endRetracement")}toggleActive(e){this.toggleHandles(e),this.start.toggleActive(e),this.end.toggleActive(e),this.endRetracement.toggleActive(e)}updateHandles(e,t,i,n){this.start.update({...this.getHandleStyles(e),...this.getHandleCoords(e,t,"start")}),this.end.update({...this.getHandleStyles(e),...this.getHandleCoords(e,t,"end",n)}),i&&this.endRetracement.update({...this.getHandleStyles(e),...this.getHandleCoords(e,i,"endRetracement",n)}),this.start.toggleLocked(e.locked??!1),this.end.toggleLocked(e.locked??!1),this.endRetracement.toggleLocked(e.locked??!1)}getHandleCoords(e,t,i,n){return i==="start"?Tf.start(t):Tf.end(t)}},{StateMachine:Sp,StateMachineProperty:pW,Debug:CNe}=N,e1=class extends Sp{constructor(e){const t=({point:c})=>{const u=this.createDatum();u.set({start:c,end:c}),e.create(u)},i=()=>{const{node:c}=this;c?.toggleActive(!0),c?.toggleHandles({start:!0,end:!1,endRetracement:!1})},n=({offset:c,context:u})=>{const{datum:d,snapping:p}=this;d&&(d.set({end:y0(c,u,p,d.start,d.snapToAngle)}),e.update())},s=()=>{const{datum:c}=this;c&&(c.endRetracement.x=c.end.x,c.endRetracement.y=c.end.y,this.node?.toggleHandles({end:!0}),e.update())},o=({offset:c,context:u})=>{const{datum:d,snapping:p}=this;d&&(d.set({endRetracement:y0(c,u,p,d.end,d.snapToAngle)}),e.update())},r=()=>{this.node?.toggleHandles({endRetracement:!0}),e.update()},a=()=>e.delete(),l=()=>{e.showAnnotationOptions(),e.recordAction(`Create ${this.datum?.type} annotation`)};super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},reset:Sp.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:n,click:{target:"endRetracement",action:s},drag:n,dragEnd:{target:"endRetracement",action:s},reset:{target:Sp.parent,action:a},cancel:{target:Sp.parent,action:a},onExit:l},endRetracement:{hover:o,click:{target:Sp.parent,action:r},drag:{target:Sp.parent,action:r},reset:{target:Sp.parent,action:a},cancel:{target:Sp.parent,action:a}}}),this.debug=CNe.create(!0,"annotations"),this.snapping=!1}createDatum(){return new lu}};D([pW()],e1.prototype,"datum");D([pW()],e1.prototype,"node");D([pW()],e1.prototype,"snapping");var d8={type:"fibonacci-retracement-trend-based",datum:lu,scene:mk,isDatum:lu.is,translate:(e,t,i,n)=>{lu.is(t)&&mk.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(lu.is(t)&&lu.is(i)&&mk.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{lu.is(t)&&mk.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new e1({...e,create:t("fibonacci-retracement-trend-based")}),dragState:e=>new ts(e)},{Vec2:xNe,Vec4:h8}=N,yk=class extends ire{constructor(){super(),this.type="fibonacci-retracement",this.start=new yn,this.end=new yn,this.append([this.start,this.end])}static is(e){return Xs.isCheck(e,"fibonacci-retracement")}containsPoint(e,t){const{start:i,end:n}=this;return this.activeHandle=void 0,i.containsPoint(e,t)?(this.activeHandle="start",!0):n.containsPoint(e,t)?(this.activeHandle="end",!0):super.containsPoint(e,t)}getNodeAtCoords(e,t){return this.start.containsPoint(e,t)||this.end.containsPoint(e,t)?"handle":super.getNodeAtCoords(e,t)}dragStart(e,t,i){this.dragState={offset:t,...QL({start:e.start,end:e.end},i)}}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}dragAll(e,t,i){const{dragState:n}=this;n&&this.translatePoints({datum:e,start:n.start,end:n.end,translation:xNe.sub(t,n.offset),context:i})}dragHandle(e,t,i,n){const{activeHandle:s,dragState:o}=this;if(!s||!o)return;this[s].toggleDragging(!0);const r=n?this.snapToAngle(e,t,i):gr(this[s].drag(t).point,i);!r||!dR(i,r)||(e[s].x=r.x,e[s].y=r.y)}snapToAngle(e,t,i){const{activeHandle:n}=this,o=["start","end"].find(a=>a!==n);if(!n||!o)return;this[n].toggleDragging(!0);const r=mn(e[o],i);return gr(qL(t,r,e.snapToAngle),i)}translatePoints({datum:e,start:t,end:i,translation:n,context:s}){const o=ch({start:t,end:i},n,s,{overflowContinuous:1});e.start.x=o.start.x,e.end.x=o.end.x,e.start.y=o.start.y,e.end.y=o.end.y}translate(e,t,i){this.translatePoints({datum:e,start:mn(e.start,i),end:mn(e.end,i),translation:t,context:i})}copy(e,t,i){const n=vr(e,i);if(!n)return;const s=this.computeBBoxWithoutHandles();return this.translatePoints({datum:t,start:{x:n.x1,y:n.y1},end:{x:n.x2,y:n.y2},translation:{x:-s.width/2,y:-s.height/2},context:i}),t}toggleHandles(e){if(typeof e=="boolean")this.start.visible=e,this.end.visible=e;else for(const[t,i]of Ji(e))this[t].visible=i;this.start.toggleHovered(this.activeHandle==="start"),this.end.toggleHovered(this.activeHandle==="end")}toggleActive(e){this.toggleHandles(e),this.start.toggleActive(e),this.end.toggleActive(e)}updateHandles(e,t,i,n){this.start.update({...this.getHandleStyles(e),...this.getHandleCoords(e,t,"start")}),this.end.update({...this.getHandleStyles(e),...this.getHandleCoords(e,t,"end",n)}),this.start.toggleLocked(e.locked??!1),this.end.toggleLocked(e.locked??!1)}getHandleCoords(e,t,i,n){return i==="start"?h8.start(t):h8.end(t)}},{StateMachine:Ev,StateMachineProperty:gW,Debug:wNe}=N,JS=class extends Ev{constructor(e){const t=({point:a})=>{const l=this.createDatum();l.set({start:a,end:a}),e.create(l)},i=()=>{const{node:a}=this;a?.toggleActive(!0),a?.toggleHandles({start:!0,end:!1})},n=({offset:a,context:l})=>{const{datum:c,snapping:u}=this;c&&(c.set({end:y0(a,l,u,c.start,c.snapToAngle)}),e.update())},s=()=>{this.node?.toggleHandles({end:!0}),e.update()},o=()=>e.delete(),r=()=>{e.showAnnotationOptions(),e.recordAction(`Create ${this.datum?.type} annotation`)};super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},reset:Ev.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:n,click:{target:Ev.parent,action:s},drag:n,dragEnd:{target:Ev.parent,action:s},reset:{target:Ev.parent,action:o},cancel:{target:Ev.parent,action:o},onExit:r}}),this.debug=wNe.create(!0,"annotations"),this.snapping=!1}};D([gW()],JS.prototype,"datum");D([gW()],JS.prototype,"node");D([gW()],JS.prototype,"snapping");var DNe=class extends JS{createDatum(){return new Rd}},MNe=class extends JS{createDatum(){return new Ed}},ANe=class extends JS{createDatum(){return new Ld}},p8={type:"fibonacci-retracement",datum:Ld,scene:yk,isDatum:Ld.is,translate:(e,t,i,n)=>{Ld.is(t)&&yk.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(Ld.is(t)&&Ld.is(i)&&yk.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{Ld.is(t)&&yk.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new ANe({...e,create:t("fibonacci-retracement")}),dragState:e=>new ts(e)},{Vec2:Rx}=N,kNe=class extends N.Group{},hR=class extends kNe{constructor(){super(),this.type="arrow",this.path=new N.Path,this.armLength=6,this.append([this.path])}update(e){const{path:t}=this,{x:i,y:n,angle:s,...o}=e,r=Rx.from(i,n),a=3*Math.PI/4,l=this.armLength+(e.strokeWidth??0)*2,c=Rx.rotate(Rx.from(0,l),s+a,r),u=Rx.rotate(Rx.from(l,0),s-a,r);t.setProperties(o),t.fillOpacity=0,t.path.clear(),t.path.moveTo(c.x,c.y),t.path.lineTo(r.x,r.y),t.path.lineTo(u.x,u.y)}},{Vec2:Jl,Vec4:g8}=N,Up=class extends rW{constructor(){super(),this.type="line",this.line=new Wr,this.append([this.line,this.start,this.end])}static is(e){return Xs.isCheck(e,"line")}update(e,t){let i=vr(e,t);if(i==null){this.visible=!1;return}i=g8.round(i),this.visible=e.visible??!0,this.visible&&(this.updateLine(e,i,t),this.updateHandles(e,i),this.updateText(e,i),this.updateCaps(e,i),this.updateAnchor(e,i,t))}updateLine(e,t,i){const{line:n}=this,{lineDashOffset:s,stroke:o,strokeWidth:r,strokeOpacity:a}=e,l=this.extendLine(t,e,i);n.setProperties({...l,lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:s,stroke:o,strokeWidth:r,strokeOpacity:a,fillOpacity:0})}updateText(e,t){this.text=this.updateNode(Bm,this.text,!!e.text.label),Mb(this.line.id,this.line,t,e.text,this.text,e.text.label,e.strokeWidth)}updateCaps(e,t){if(!e.startCap&&this.startCap&&(this.startCap.remove(),this.startCap=void 0),!e.endCap&&this.endCap&&(this.endCap.remove(),this.endCap=void 0),!e.startCap&&!e.endCap)return;const{stroke:i,strokeWidth:n,strokeOpacity:s}=e,[o,r]=Jl.from(t),a=Jl.angle(Jl.sub(r,o));e.startCap&&(this.startCap&&this.startCap.type!==e.startCap&&(this.startCap.remove(),this.startCap=void 0),this.startCap==null&&(this.startCap=new hR,this.append([this.startCap])),this.startCap.update({x:o.x,y:o.y,angle:a-Math.PI,stroke:i,strokeWidth:n,strokeOpacity:s})),e.endCap&&(this.endCap&&this.endCap.type!==e.endCap&&(this.endCap.remove(),this.endCap=void 0),this.endCap==null&&(this.endCap=new hR,this.append([this.endCap])),this.endCap.update({x:r.x,y:r.y,angle:a,stroke:i,strokeWidth:n,strokeOpacity:s}))}updateAnchor(e,t,i,n){const s=g8.topCenter(t);Jl.apply(this.anchor,N.Transformable.toCanvasPoint(this.line,s.x,s.y))}containsPoint(e,t){const{line:i,text:n}=this;return super.containsPoint(e,t)||i.isPointInPath(e,t)||!!n?.containsPoint(e,t)}getNodeAtCoords(e,t){return this.text?.containsPoint(e,t)?"text":this.line.isPointInPath(e,t)?"line":super.getNodeAtCoords(e,t)}getHandleCoords(e,t,i,n){const{startCap:s,endCap:o}=this;let[r,a]=Jl.from(t);const l=Jl.angle(Jl.sub(a,r));return s&&(r=Jl.rotate(Jl.from(0,-yn.HANDLE_SIZE/2),l,r)),o&&(a=Jl.rotate(Jl.from(0,yn.HANDLE_SIZE/2),l,a)),i==="start"?r:a}getHandleStyles(e){return{fill:e.handle.fill,stroke:e.handle.stroke??e.stroke,strokeOpacity:e.handle.strokeOpacity??e.strokeOpacity,strokeWidth:e.handle.strokeWidth??e.strokeWidth}}},f8={type:"line",datum:Ed,scene:Up,isDatum:Ed.is,translate:(e,t,i,n)=>{Ed.is(t)&&Up.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(Ed.is(t)&&Ed.is(i)&&Up.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{Ed.is(t)&&Up.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new MNe({...e,create:t("line")}),dragState:e=>new ts(e)},m8={type:"arrow",datum:Rd,scene:Up,isDatum:Rd.is,translate:(e,t,i,n)=>{Rd.is(t)&&Up.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(Rd.is(t)&&Rd.is(i)&&Up.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{Rd.is(t)&&Up.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new DNe({...e,create:t("arrow")}),dragState:e=>new ts(e)};function y8(e,t=0,i=0){let n=t;for(const s of e)if(Array.isArray(s)){for(const o of s)v8(o,n);n+=N.Group.computeChildrenBBox(s).width+i}else v8(s,n),n+=s.getBBox().width+i}function TNe(e,t=0,i=0){let n=t;for(const s of e)if(Array.isArray(s)){for(const o of s)b8(o,n);n+=N.Group.computeChildrenBBox(s).height+i}else b8(s,n),n+=s.getBBox().height+i}function v8(e,t){"x1"in e?(e.x2=t+(e.x2-e.x1),e.x1=t):e.x=t}function b8(e,t){"y1"in e?(e.y2=t+(e.y2-e.y1),e.y1=t):e.y=t}function S8(e,t){"x1"in e?(e.x1+=t,e.x2+=t):e.x+=t}function C8(e,t){"y1"in e?(e.y1+=t,e.y2+=t):e.y+=t}var{Vec4:KF}=N,nre=class extends N.Group{constructor(){super(),this.name="MeasurerStatisticsScene",this.background=new N.Rect,this.dateRangeBarsText=new N.Text,this.dateRangeDivider=new N.Line,this.dateRangeValueText=new N.Text,this.priceRangeValueText=new N.Text,this.priceRangeDivider=new N.Line,this.priceRangePercentageText=new N.Text,this.volumeText=new N.Text,this.volumeFormatter=new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2}),this.append([this.background,this.dateRangeBarsText,this.dateRangeDivider,this.dateRangeValueText,this.priceRangeValueText,this.priceRangeDivider,this.priceRangePercentageText,this.volumeText])}update(e,t,i,n,s,o,r){this.verticalDirection=o;const a=this.updateStatistics(e,t,i,r),l=N.Group.computeChildrenBBox(a.flat()),c=10;l.grow(c),this.updateBackground(e,l,c),this.reposition(a,c,s),this.checkVisibility(e,s,n)}checkVisibility(e,t,i){const n=KF.from(new N.BBox(0,0,t.seriesRect.width,t.seriesRect.height));KF.collides(i,n)?this.visible=e.visible??!0:this.visible=!1}updateStatistics(e,t,i,n){const{dateRangeBarsText:s,dateRangeDivider:o,dateRangeValueText:r,priceRangeValueText:a,priceRangeDivider:l,priceRangePercentageText:c,volumeText:u}=this,d=8,p=6,f=e.statistics.fontSize+3,m=-2,v=this.getTextStyles(e),b={...this.getDividerStyles(e),x1:0,y1:0,x2:0,y2:f},C=[s,o,r],x=[a,l,c],w=[];return t.priceRange&&(a.setProperties({...v,text:this.formatPriceRangeValue(t.priceRange.value,n)}),l.setProperties(b),c.setProperties({...v,text:this.formatPriceRangePercentage(t.priceRange.percentage,n)}),y8(x,i.x,d),w.push(x)),t.dateRange&&(s.setProperties({...v,text:this.formatDateRangeBars(t.dateRange.bars,n)}),o.setProperties(b),r.setProperties({...v,text:this.formatDateRangeValue(t.dateRange.value)}),y8(C,i.x,d),w.push(C)),t.volume==null?u.visible=!1:(u.setProperties({...v,x:i.x,text:this.formatVolume(t.volume,n),visible:!0}),w.push(u)),TNe(w,i.y,p),l.y1+=m,l.y2+=m,o.y1+=m,o.y2+=m,w}updateBackground(e,t,i){const n=this.getBackgroundStyles(e);this.background.setProperties({...n,...t,x:t.x-t.width/2+i,y:t.y})}reposition(e,t,i){const{width:n,height:s}=i.seriesRect,o=KF.from(this.background.getBBox());let r=0;o.x1<0&&(r=-o.x1),o.x2>n&&(r=n-o.x2);const a=Math.min(t,s-o.y2);for(const l of e)if(Array.isArray(l)){const c=N.Group.computeChildrenBBox(l).width;for(const u of l)S8(u,r-c/2),C8(u,a)}else S8(l,r-l.getBBox().width/2),C8(l,a);this.background.x+=r,this.background.y+=a}getTextStyles(e){return{fill:e.statistics.color,fontFamily:e.statistics.fontFamily,fontSize:e.statistics.fontSize,fontStyle:e.statistics.fontStyle,fontWeight:e.statistics.fontWeight,textBaseline:"top"}}getDividerStyles(e){return{stroke:e.statistics.divider.stroke,strokeOpacity:e.statistics.divider.strokeOpacity,strokeWidth:e.statistics.divider.strokeWidth}}getBackgroundStyles(e){return{fill:e.statistics.fill,stroke:e.statistics.stroke,strokeOpacity:e.statistics.strokeOpacity,strokeWidth:e.statistics.strokeWidth,cornerRadius:4}}formatDateRangeBars(e,t){return t?.t("measurerDateRangeBars",{value:e})??`${e}`}formatDateRangeValue(e){const t=[],i=e>=0?"":"-";e=Math.abs(e);const n=1e3*60,s=n*60,o=s*24,r=Math.floor(e/n),a=Math.floor(e/s),l=Math.floor(e/o),c=a%(o/s),u=r%(s/n);return l>=1&&t.push(`${l}d`),a>=1&&(e<o||c!==0)&&t.push(`${c}h`),(e<s||u!==0)&&t.push(`${u}m`),t[0]=`${i}${t[0]}`,t.join(" ")}formatPriceRangeValue(e,t){return t?.t("measurerPriceRangeValue",{value:Number(e.toFixed(2))})??`${e}`}formatPriceRangePercentage(e,t){return t?.t("measurerPriceRangePercent",{value:e})??`${e}`}formatVolume(e,t){const i=Number.isNaN(e)?"":this.volumeFormatter.format(e);return t?.t("measurerVolume",{value:i})??i}},INe=class extends nre{getDirectionStyles(e){return this.verticalDirection==="down"?e.down.statistics:e.up.statistics}getTextStyles(e){const t=this.getDirectionStyles(e);return{...super.getTextStyles(e),fill:t.color,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight}}getDividerStyles(e){const t=this.getDirectionStyles(e);return{stroke:t.divider.stroke,strokeOpacity:t.divider.strokeOpacity,strokeWidth:t.divider.strokeWidth}}getBackgroundStyles(e){const t=this.getDirectionStyles(e);return{...super.getBackgroundStyles(e),fill:t.fill,stroke:t.stroke,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth}}},{Vec2:Yc,Vec4:If}=N,Sa=class extends rW{constructor(){super(),this.type="measurer",this.horizontalLine=new Wr,this.verticalLine=new Wr,this.horizontalStartLine=new Wr,this.horizontalEndLine=new Wr,this.verticalStartLine=new Wr,this.verticalEndLine=new Wr,this.horizontalEndCap=new hR,this.verticalEndCap=new hR,this.background=new N.Path({zIndex:-1}),this.updateBackground=Joe.updateBackground.bind(this),this.statistics=this.createStatisticsScene(),this.statistics.zIndex=1,this.append([this.background,this.verticalStartLine,this.verticalEndLine,this.horizontalStartLine,this.horizontalEndLine,this.horizontalLine,this.verticalLine,this.horizontalEndCap,this.verticalEndCap,this.start,this.end,this.statistics])}static is(e){return Xs.isCheck(e,"measurer")}createStatisticsScene(){return new nre}update(e,t){const i=vr(e,t);if(i==null){this.visible=!1;return}if(this.visible=e.visible??!0,!this.visible)return;const n=this.extendPerpendicular(i,e,t),s={...n,y2:n.y1},o={...n,y1:n.y2};this.verticalDirection=i.y1<i.y2?"down":"up",this.updateVisibilities(e),this.updateLines(e,i),this.updateHandles(e,i),this.updateText(e,i),this.updateCaps(e,i),this.updateBoundingLines(e,n),this.updateBackground(e,s,o,t),this.updateStatistics(e,i,t),this.updateAnchor(e,i,t)}extendPerpendicular(e,t,i){const n={x1:Math.min(e.x1,e.x2),x2:Math.max(e.x1,e.x2),y1:Math.min(e.y1,e.y2),y2:Math.max(e.y1,e.y2)},[s,o]=Yc.from(i.yAxis.bounds);return Sl.is(t)?(t.extendAbove&&(n.y1=s.y),t.extendBelow&&(n.y2=o.y)):Cl.is(t)&&(t.extendLeft&&(n.x1=s.x),t.extendRight&&(n.x2=o.x)),n}updateVisibilities(e){const{horizontalStartLine:t,horizontalEndLine:i,horizontalEndCap:n,verticalStartLine:s,verticalEndLine:o,verticalEndCap:r}=this,{direction:a}=e;s.visible=a!=="vertical",o.visible=a!=="vertical",n.visible=a!=="vertical",t.visible=a!=="horizontal",i.visible=a!=="horizontal",r.visible=a!=="horizontal"}updateLines(e,t){const{horizontalLine:i,verticalLine:n}=this,{direction:s}=e,{x1:o,y1:r,x2:a,y2:l}=t,c=Yc.round(If.center(t),0),u=this.getLineStyles(e);s!=="vertical"&&i.setProperties({...u,x1:o,x2:a,y1:c.y,y2:c.y}),s!=="horizontal"&&n.setProperties({...u,x1:c.x,x2:c.x,y1:r,y2:l})}updateText(e,t){const{direction:i}=e,n=Yc.round(If.center(t),0);let s;const o={...t};i==="vertical"?(s=this.verticalLine,o.x1=n.x,o.x2=n.x):(s=this.horizontalLine,o.y1=n.y,o.y2=n.y),this.text=this.updateNode(Bm,this.text,!!e.text.label);const{id:r}=s,a=Mb(r,s,o,e.text,this.text,e.text.label,e.strokeWidth);let l;if(i==="both"&&a&&this.text){const c=If.from(this.text.getBBox()),{offset:u}=a.numbers;c.x1<=n.x+u.x&&c.x2>=n.x-u.x&&(l={x:n.x,y:a.clipMask.y,radius:this.text.getBBox().height/2+Yc.length(u)})}this.verticalLine.setClipMask(r,l)}updateCaps(e,t){const{horizontalEndCap:i,verticalEndCap:n}=this,{direction:s}=e,{x1:o,y1:r,x2:a,y2:l}=t,c=Yc.round(If.center(t),0),{stroke:u,strokeWidth:d,strokeOpacity:p}=this.getLineStyles(e),f={stroke:u,strokeWidth:d,strokeOpacity:p};if(s!=="vertical"){const m=o<=a?0:Math.PI;let v=a;s==="horizontal"&&(v+=o<=a?-2:2),i.update({...f,x:v,y:c.y,angle:m})}if(s!=="horizontal"){const m=r<=l?Math.PI/2:Math.PI/-2;let v=l;s==="vertical"&&(v+=r<=l?-2:2),n.update({...f,x:c.x,y:v,angle:m})}}updateBoundingLines(e,t){const{verticalStartLine:i,verticalEndLine:n,horizontalStartLine:s,horizontalEndLine:o}=this,{direction:r}=e,{x1:a,y1:l,x2:c,y2:u}=t,d=this.getLineStyles(e);r==="horizontal"&&(i.setProperties({...d,x1:a,y1:l,x2:a,y2:u}),n.setProperties({...d,x1:c,y1:l,x2:c,y2:u})),r==="vertical"&&(s.setProperties({...d,x1:a,y1:l,x2:c,y2:l}),o.setProperties({...d,x1:a,y1:u,x2:c,y2:u}))}updateStatistics(e,t,i){const n=Yc.add(If.bottomCenter(t),Yc.from(0,10)),s={volume:this.getVolume(e)};e.hasPriceRange&&(s.priceRange={percentage:this.getPriceRangePercentage(e),value:this.getPriceRangeValue(e)}),e.hasDateRange&&(s.dateRange={bars:this.getDateRangeBars(t,i),value:this.getDateRangeValue(e)}),this.statistics.update(e,s,n,t,i,this.verticalDirection,e.localeManager)}updateAnchor(e,t,i,n){const s=If.topCenter(t);Yc.apply(this.anchor,N.Transformable.toCanvasPoint(this.horizontalLine,s.x,s.y))}getBackgroundPoints(e,t,i,n){const[s,o]=Yc.from(t),[r,a]=Yc.from(i);return[s,o,a,r]}getLineStyles(e){const{lineDashOffset:t,stroke:i,strokeWidth:n,strokeOpacity:s}=e;return{lineCap:e.getLineCap(),lineDash:e.getLineDash(),lineDashOffset:t,stroke:i,strokeWidth:n,strokeOpacity:s,fillOpacity:0}}getBackgroundStyles(e){const{background:t}=e;return{fill:t.fill,fillOpacity:t.fillOpacity}}getHandleStyles(e){return{fill:e.handle.fill,stroke:e.handle.stroke??e.stroke,strokeOpacity:e.handle.strokeOpacity??e.strokeOpacity,strokeWidth:e.handle.strokeWidth??e.strokeWidth}}containsPoint(e,t){const{horizontalLine:i,text:n,verticalLine:s,horizontalStartLine:o,horizontalEndLine:r,verticalStartLine:a,verticalEndLine:l}=this;return super.containsPoint(e,t)||i.isPointInPath(e,t)||s.isPointInPath(e,t)||o.visible&&o.isPointInPath(e,t)||r.visible&&r.isPointInPath(e,t)||a.visible&&a.isPointInPath(e,t)||l.visible&&l.isPointInPath(e,t)||!!n?.containsPoint(e,t)}getNodeAtCoords(e,t){return this.text?.containsPoint(e,t)?"text":this.start.containsPoint(e,t)||this.end.containsPoint(e,t)?"handle":"line"}getDateRangeBars(e,t){const{step:i}=t.xAxis.scale,n=e.x1<=e.x2?1:-1;return i?Math.round(If.width(e)/i)*n:0}getDateRangeValue(e){const t=js(e.start.x),i=js(e.end.x);if(!gc(t)||!gc(i))throw new Error("Can not create a date range measurement of non-date x-axis.");return i.getTime()-t.getTime()}getPriceRangePercentage(e){if(e.start.y==null||e.end.y==null)throw new Error("Can not create a price range measurement of a non-numeric y-axis");const t=js(e.end.y),i=js(e.start.y);if(!En(t)||!En(i))throw new Error("Can not create a price range measurement of a non-numeric y-axis");return(t-i)/i}getPriceRangeValue(e){if(e.start.y==null||e.end.y==null)throw new Error("Can not create a price range measurement of a non-numeric y-axis");const t=js(e.end.y),i=js(e.start.y);if(!En(t)||!En(i))throw new Error("Can not create a price range measurement of a non-numeric y-axis");return t-i}getVolume(e){return e.getVolume(e.start.x,e.end.x)}},vk=class extends Sa{constructor(){super(...arguments),this.type="quick-measurer"}static is(e){return Xs.isCheck(e,"quick-measurer")}createStatisticsScene(){return new INe}getDirectionStyles(e){return this.verticalDirection==="down"?e.down:e.up}getLineStyles(e){const t=this.getDirectionStyles(e);return{...super.getLineStyles(e),stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity}}getBackgroundStyles(e){const t=this.getDirectionStyles(e);return{fill:t.fill,fillOpacity:t.fillOpacity}}getHandleStyles(e){const t=this.getDirectionStyles(e);return{fill:t.handle.fill,stroke:t.handle.stroke??t.stroke,strokeOpacity:t.handle.strokeOpacity??t.strokeOpacity,strokeWidth:t.handle.strokeWidth??t.strokeWidth}}},{StateMachine:Lv,StateMachineProperty:sre,Debug:RNe}=N,eC=class extends Lv{constructor(e){const t=({point:r})=>{const a=this.createDatum();a.set({start:r,end:r}),e.create(a)},i=({point:r})=>{const{datum:a,node:l}=this;a?.set({end:r}),l?.toggleActive(!0),l?.toggleHandles({end:!1}),e.update()},n=()=>{this.node?.toggleHandles({end:!0})},s=()=>e.delete(),o=()=>{e.showAnnotationOptions(),e.recordAction(`Create ${this.node?.type} annotation`)};super("start",{start:{reset:Lv.parent,click:{target:"end",action:t},drag:{target:"end",action:t}},end:{hover:i,drag:i,click:{target:Lv.parent,action:n},dragEnd:{target:Lv.parent,action:n},reset:{target:Lv.parent,action:s},cancel:{target:Lv.parent,action:s},onExit:o}}),this.debug=RNe.create(!0,"annotations")}};D([sre()],eC.prototype,"datum");D([sre()],eC.prototype,"node");var ENe=class extends eC{createDatum(){return new Sl}},LNe=class extends eC{createDatum(){return new Cl}},PNe=class extends eC{createDatum(){return new Id}},NNe=class extends eC{createDatum(){return new ya}},x8={type:"date-range",datum:Sl,scene:Sa,isDatum:Sl.is,translate:(e,t,i,n)=>{Sl.is(t)&&Sa.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(Sl.is(t)&&Sl.is(i)&&Sa.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{Sl.is(t)&&Sa.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new ENe({...e,create:t("date-range")}),dragState:e=>new ts(e)},w8={type:"price-range",datum:Cl,scene:Sa,isDatum:Cl.is,translate:(e,t,i,n)=>{Cl.is(t)&&Sa.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(Cl.is(t)&&Cl.is(i)&&Sa.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{Cl.is(t)&&Sa.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new LNe({...e,create:t("date-range")}),dragState:e=>new ts(e)},D8={type:"date-price-range",datum:Id,scene:Sa,isDatum:Id.is,translate:(e,t,i,n)=>{Id.is(t)&&Sa.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(Id.is(t)&&Id.is(i)&&Sa.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{Id.is(t)&&Sa.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new PNe({...e,create:t("date-range")}),dragState:e=>new ts(e)},M8={type:"quick-date-price-range",datum:ya,scene:vk,isDatum:ya.is,translate:(e,t,i,n)=>{ya.is(t)&&vk.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(ya.is(t)&&ya.is(i)&&vk.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{ya.is(t)&&vk.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new NNe({...e,create:t("quick-date-price-range")}),dragState:e=>new ts(e)},{ZIndexMap:A8}=N,bk=class extends uW{constructor(){super(),this.type="note",this.shape=new N.Rect,this.iconBackground=new N.TranslatableSvgPath("M22 1.83333C22 0.820811 21.1792 0 20.1667 0H1.83333C0.820811 0 0 0.82081 0 1.83333V13.9868C0 14.9994 0.820811 15.8202 1.83333 15.8202L5.88971 15.8202C6.44575 15.8202 6.97175 16.0725 7.31971 16.5062L9.57006 19.3112C10.304 20.2259 11.6962 20.2259 12.4301 19.3112L14.6804 16.5062C15.0284 16.0725 15.5544 15.8202 16.1104 15.8202L20.1667 15.8202C21.1792 15.8202 22 14.9994 22 13.9868V1.83333Z"),this.iconLines=new N.TranslatableSvgPath("M17.1114 5.75C17.1114 6.16421 16.7756 6.5 16.3614 6.5H5.63916C5.22495 6.5 4.88916 6.16421 4.88916 5.75V5.75C4.88916 5.33579 5.22495 5 5.63916 5H16.3614C16.7756 5 17.1114 5.33579 17.1114 5.75V5.75ZM17.1114 9.25C17.1114 9.66421 16.7756 10 16.3614 10H5.63916C5.22495 10 4.88916 9.66421 4.88916 9.25V9.25C4.88916 8.83579 5.22495 8.5 5.63916 8.5H16.3614C16.7756 8.5 17.1114 8.83579 17.1114 9.25V9.25Z"),this.active=!1,this.shape.visible=!1,this.label.visible=!1,this.iconBackground.fillShadow=new N.DropShadow,this.append([this.shape,this.label,this.iconBackground,this.iconLines,this.handle])}static is(e){return Xs.isCheck(e,"note")}update(e,t){this.updateIcon(e,t),super.update(e,t)}getTextBBox(e,t,i){const n=super.getTextBBox(e,t,i);n.x-=e.width/2,n.x=Je(0,n.x,i.seriesRect.width-e.width);const s=e.getPadding().top,o=n.y-koe-s*2,r=n.y+yn.HANDLE_SIZE+s*2;return o-n.height-Toe<0?(n.y=r,e.position="top"):(n.y=o+s,e.position="bottom"),n}updateLabel(e,t){const i=e.visible===!1?!1:this.label.visible;super.updateLabel(e,t),this.label.visible=i,this.label.text=Xp(e.text,{maxWidth:200,font:e,textWrap:"always",avoidOrphans:!1})}updateShape(e,t){const{shape:i}=this;i.fill=e.background.fill,i.fillOpacity=e.background.fillOpacity??1,i.stroke=e.background.stroke,i.strokeOpacity=e.background.strokeOpacity??1,i.strokeWidth=e.background.strokeWidth??1,i.cornerRadius=4;const n=e.getPadding().top,s=e.position==="top";i.x=t.x-n,i.width=e.width+n*2,i.height=t.height+n*2,i.y=t.y+(s?0:-t.height)-n}updateIcon(e,t){const{active:i,iconBackground:n,iconLines:s}=this,{x:o,y:r}=mn(e,t);n.translationX=o-gPe/2,n.translationY=r-Aoe,s.translationX=n.translationX,s.translationY=n.translationY,n.fill=e.fill,n.fillOpacity=e.fillOpacity??1,n.stroke=e.stroke,n.strokeOpacity=e.strokeOpacity??1,n.strokeWidth=e.strokeWidth??1,s.fill=e.stroke,i?n.fillShadow.color=e.fill??"rgba(0, 0, 0, 0.22)":n.fillShadow.color="rgba(0, 0, 0, 0.22)"}updateAnchor(e,t,i){const n=e.getPadding().top,s=e.position==="top",o=s?1:-1;return{x:t.x+i.seriesRect.x+e.width/2,y:t.y+i.seriesRect.y+o*(t.height+n),position:s?"below":"above"}}getLabelCoords(e,t){const i=e.position==="top",n=e.getPadding().top+fc(e.fontSize,HL)/2;return{x:t.x,y:t.y+(i?n/2:0)}}getTextBaseline(e){return e.position==="top"?"middle":e.position}getHandleCoords(e,t,i){return{x:t.x,y:t.y+yn.HANDLE_SIZE/2+4}}getHandleStyles(e){return{fill:e.handle.fill,stroke:e.handle.stroke??e.fill,strokeOpacity:e.handle.strokeOpacity,strokeWidth:e.handle.strokeWidth}}toggleHovered(e,t,i){super.toggleHovered(e,t,i);const n=e||t&&!i;this.label.visible=n,this.shape.visible=n,this.zIndex=n?A8.CHART_ANNOTATION_FOCUSED:A8.CHART_ANNOTATION}toggleActive(e){super.toggleActive(e),this.label.visible=e,this.shape.visible=e,this.active=e}containsPoint(e,t){return this.shape.visible&&this.shape.containsPoint(e,t)||this.iconBackground.containsPoint(e,t)?!0:super.containsPoint(e,t)}},ONe=class extends XD{createDatum(){return new Hr}},k8={type:"note",datum:Hr,scene:bk,isDatum:Hr.is,translate:(e,t,i,n)=>{Hr.is(t)&&bk.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(Hr.is(t)&&Hr.is(i)&&bk.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{Hr.is(t)&&bk.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new ONe({...e,create:t("note")}),dragState:e=>new ts(e)},{Vec2:nl,Vec4:Xc}=N,Sk=class extends ere{constructor(){super(),this.type="parallel-channel",this.handles={topLeft:new yn,topMiddle:new ab,topRight:new yn,bottomLeft:new yn,bottomMiddle:new ab,bottomRight:new yn},this.middleLine=new Wr,this.append([this.background,this.topLine,this.middleLine,this.bottomLine,...Object.values(this.handles)])}static is(e){return Xs.isCheck(e,"parallel-channel")}dragHandle(e,t,i,n){const{activeHandle:s,handles:o}=this;if(s==null)return;const{offset:r}=o[s].drag(t);o[s].toggleDragging(!0),(s==="topMiddle"||s==="bottomMiddle")&&(r.x=0);let a=[],l=n;switch(s){case"topLeft":case"bottomLeft":a=["topLeft","bottomLeft"];break;case"topMiddle":a=["topLeft","topRight"],r.y-=ab.HANDLE_SIZE/2,l=!1;break;case"topRight":case"bottomRight":a=["topRight","bottomRight"];break;case"bottomMiddle":a=["bottomLeft","bottomRight"],r.y-=ab.HANDLE_SIZE/2,l=!1;break}const c=vr(e,i),u=vr(e.bottom,i);if(!c||!u)return;const d={topLeft:Xc.start(c),topRight:Xc.end(c),bottomLeft:Xc.start(u),bottomRight:Xc.end(u)},p={vectors:{topLeft:d.topRight,bottomLeft:d.bottomRight,topRight:d.topLeft,bottomRight:d.bottomLeft},angle:e.snapToAngle},f=ch(d,r,i,{overflowContinuous:this.overflowContinuous,translateVectors:a,snap:l?p:void 0});e.start.x=f.topLeft.x,e.start.y=f.topLeft.y,e.end.x=f.topRight.x,e.end.y=f.topRight.y,e.height=f.topLeft.y-f.bottomLeft.y}getTranslatePointsVectors(e,t){const{bottomLeft:i,topLeft:n}=this.handles,s=i.getBBox().y-n.getBBox().y,o=nl.add(e,nl.from(0,s)),r=nl.add(t,nl.from(0,s));return{start:e,end:t,bottomStart:o,bottomEnd:r}}containsPoint(e,t){return super.containsPoint(e,t)||this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(e,t)}getNodeAtCoords(e,t){return this.middleLine.visible&&this.middleLine.strokeWidth>0&&this.middleLine.containsPoint(e,t)?"line":super.getNodeAtCoords(e,t)}updateLines(e,t,i,n,s,o){const{topLine:r,middleLine:a,bottomLine:l}=this,{lineDashOffset:c,stroke:u,strokeOpacity:d,strokeWidth:p}=e,f=e.getLineDash(),m={lineCap:e.getLineCap(),lineDash:f,lineDashOffset:c,stroke:u,strokeOpacity:d,strokeWidth:p};r.setProperties({...t,...m}),l.setProperties({...i,...m});const v=this.extendLine({x1:s.x1,y1:o.y1+(s.y1-o.y1)/2,x2:s.x2,y2:o.y2+(s.y2-o.y2)/2},e,n);a.setProperties({...v,lineDash:e.middle.lineDash??f,lineDashOffset:e.middle.lineDashOffset??c,stroke:e.middle.stroke??u,strokeOpacity:e.middle.strokeOpacity??d,strokeWidth:e.middle.strokeWidth??p,visible:e.middle.visible??!0})}updateHandles(e,t,i){const{handles:{topLeft:n,topMiddle:s,topRight:o,bottomLeft:r,bottomMiddle:a,bottomRight:l}}=this,c={fill:e.handle.fill,stroke:e.handle.stroke??e.stroke,strokeOpacity:e.handle.strokeOpacity??e.strokeOpacity,strokeWidth:e.handle.strokeWidth??e.strokeWidth};n.update({...c,...Xc.start(t)}),o.update({...c,...Xc.end(t)}),r.update({...c,...Xc.start(i)}),l.update({...c,...Xc.end(i)}),s.update({...c,...nl.sub(Xc.center(t),nl.from(s.handle.width/2,s.handle.height/2))}),a.update({...c,...nl.sub(Xc.center(i),nl.from(a.handle.width/2,a.handle.height/2))})}updateText(e,t,i){this.text=this.updateNode(Bm,this.text,!!e.text.label),Xoe(!0,t,i,e.text,e.strokeWidth,this.text,e.text.label)}getBackgroundPoints(e,t,i,n){const s=t.x1>t.x2,o=t.y1>t.y2,r=t.x1!==i.x1&&t.y1!==i.y1,a=t.x2!==i.x2&&t.y2!==i.y2,l=nl.from(t);return e.extendEnd&&a&&l.push(nl.from(s?n.x1:n.x2,o?n.y1:n.y2)),l.push(...nl.from(i).reverse()),e.extendStart&&r&&l.push(nl.from(s?n.x2:n.x1,o?n.y2:n.y1)),l}},{StateMachine:Cp,StateMachineProperty:fW,Debug:FNe}=N,t1=class extends Cp{constructor(e){const t=({point:l})=>{const c=new wl;c.set({start:l,end:l,height:0}),e.create(c)},i=()=>{const{node:l}=this;l?.toggleActive(!0),l?.toggleHandles({topLeft:!0,topMiddle:!1,topRight:!1,bottomLeft:!1,bottomMiddle:!1,bottomRight:!1})},n=({offset:l,context:c})=>{const{datum:u,snapping:d}=this;u&&(u.set({end:y0(l,c,d,u.start,u.snapToAngle)}),e.update())},s=()=>{this.node?.toggleHandles({topRight:!0}),e.update()},o=({point:l})=>{const{datum:c,node:u}=this,d=js(c?.end.y),p=js(c?.start.y),{y:f}=l;if(c==null||!En(p)||!En(d)||!En(f))return;const m=d-(f??0),v=p-m;u?.toggleHandles({bottomLeft:!0,bottomRight:!0}),!(!e.validatePoint({x:c.start.x,y:v},{overflowContinuous:!0})||!e.validatePoint({x:c.end.x,y:l.y},{overflowContinuous:!0}))&&(c.set({height:m}),e.update())},r=({point:l})=>{const{datum:c,node:u}=this,d=js(c?.end.y),p=js(c?.start.y),{y:f}=l;if(c==null||!En(p)||!En(d)||!En(f))return;const m=d-(f??0),v=p-m;u?.toggleHandles(!0),!(!e.validatePoint({x:c.start.x,y:v},{overflowContinuous:!0})||!e.validatePoint({x:c.end.x,y:l.y},{overflowContinuous:!0}))&&(c.set({height:m}),e.recordAction("Create parallel-channel annotation"),e.showAnnotationOptions(),e.update())},a=()=>e.delete();super("start",{start:{click:{target:"waiting-first-render",action:t},drag:{target:"waiting-first-render",action:t},reset:Cp.parent},"waiting-first-render":{render:{target:"end",action:i}},end:{hover:n,drag:n,click:{target:"height",action:s},dragEnd:{target:"height",action:s},reset:{target:Cp.parent,action:a},cancel:{target:Cp.parent,action:a}},height:{hover:o,click:{target:Cp.parent,action:r},drag:{target:Cp.parent,action:r},reset:{target:Cp.parent,action:a},cancel:{target:Cp.parent,action:a}}}),this.debug=FNe.create(!0,"annotations"),this.snapping=!1}};D([fW()],t1.prototype,"datum");D([fW()],t1.prototype,"node");D([fW()],t1.prototype,"snapping");var T8={type:"parallel-channel",datum:wl,scene:Sk,isDatum:wl.is,translate:(e,t,i,n)=>{wl.is(t)&&Sk.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(wl.is(t)&&wl.is(i)&&Sk.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{wl.is(t)&&Sk.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new t1({...e,create:t("parallel-channel")}),dragState:e=>new ts(e)},Ck=class extends uW{constructor(){super(),this.type="text",this.append([this.label,this.handle])}static is(e){return Xs.isCheck(e,"text")}getHandleCoords(e,t){const i=yn.HANDLE_SIZE/2;return{x:t.x+i,y:t.y+2+i}}},BNe=class extends XD{createDatum(){return new Pd}},I8={type:"text",datum:Pd,scene:Ck,isDatum:Pd.is,translate:(e,t,i,n)=>{Pd.is(t)&&Ck.is(e)&&e.translate(t,i,n)},copy:(e,t,i,n)=>{if(Pd.is(t)&&Pd.is(i)&&Ck.is(e))return e.copy(t,i,n)},update:(e,t,i)=>{Pd.is(t)&&Ck.is(e)&&e.update(t,i)},createState:(e,{createDatum:t})=>new BNe({...e,create:t("text")}),dragState:e=>new ts(e)},fa={[f8.type]:f8,[o8.type]:o8,[r8.type]:r8,[T8.type]:T8,[a8.type]:a8,[p8.type]:p8,[d8.type]:d8,[n8.type]:n8,[s8.type]:s8,[k8.type]:k8,[I8.type]:I8,[m8.type]:m8,[J6.type]:J6,[Q6.type]:Q6,[x8.type]:x8,[w8.type]:w8,[D8.type]:D8,[M8.type]:M8};function nm(e){for(const{isDatum:t}of Object.values(fa))if(t(e))return e}var{ActionOnSet:_Ne,ParallelStateMachine:zNe,StateMachine:mW,StateMachineProperty:Yu,Debug:GNe}=N,i1=class extends zNe{constructor(e){super(new VNe(t=>{this.snapping=t}),new HNe(()=>{this.node=this.active==null?void 0:e.node(this.active)}),new Fg(e,t=>{this.active=t,this.datum=this.active==null?void 0:e.datum(this.active),this.node=this.active==null?void 0:e.node(this.active)})),this.snapping=!1}getActive(){return this.active}isActive(e){return e===this.active}};D([Yu()],i1.prototype,"snapping");D([Yu()],i1.prototype,"datum");D([Yu()],i1.prototype,"node");var VNe=class extends mW{constructor(e){super("idle",{idle:{hover:({shiftKey:t})=>e(t),keyDown:({shiftKey:t})=>e(t),keyUp:({shiftKey:t})=>e(t),click:({shiftKey:t})=>e(t),drag:({shiftKey:t})=>e(t)},dragging:{},translating:{},"text-input":{}})}},HNe=class extends mW{constructor(e){super("idle",{idle:{onEnter:e,render:e},dragging:{onEnter:e,render:e},translating:{onEnter:e,render:e},"text-input":{render:e}})}},Fg=class extends mW{constructor(e,t){const i=w=>M=>{e.create(w,M),this.active=e.selectLast()},n=()=>{this.active!=null&&e.delete(this.active),this.active=void 0,e.select()},s={createDatum:i},o={...e,delete:n,showTextInput:()=>{this.active!=null&&e.showTextInput(this.active)},deselect:()=>{const w=this.active;this.active=void 0,this.hovered=void 0,e.select(this.active,w)},showAnnotationOptions:()=>{this.active!=null&&e.showAnnotationOptions(this.active)}},r=Object.fromEntries(Object.entries(fa).map(([w,M])=>[w,M.createState(o,s)])),a=Object.fromEntries(Object.entries(fa).map(([w,M])=>[w,M.dragState(e,s)])),l=({colorPickerType:w,colorOpacity:M,color:T,opacity:L,isMultiColor:I})=>{this.datum&&(w==="text-color"&&e.updateTextInputColor(T),XL(this.datum,w,M,T,L,I),e.update())},c=w=>{const{datum:M,node:T}=this;!M||!T||(Au(M)?(M.fontSize=w,e.updateTextInputFontSize(w)):Db(M)&&(M.text.fontSize=w),e.update())},u=w=>{const{datum:M,node:T}=this;!M||!T||!Rp(M)||(Poe(M,w),e.update())},d=w=>{const{node:M}=this;!M||!("setTextInputBBox"in M)||(M.setTextInputBBox(w),e.update())},p=({textInputValue:w,bbox:M})=>{const{datum:T}=this;if(M!=null&&w!=null&&w.length>0){if(!Au(T))return;const L=WL(T,w,M.width);T.set({text:L}),e.update(),e.recordAction(`Change ${T.type} annotation text`)}else e.delete(this.active),e.recordAction(`Delete ${T?.type} annotation`)},f=()=>{e.updateTextInputBBox(void 0)},m=()=>this.active!=null,v=()=>this.copied!=null,b=()=>{const{active:w,datum:M}=this;return w==null||!M?!1:Db(M)&&M.isWriteable()},C=()=>this.active!=null&&!_p(this.datum),x=()=>this.hovered!=null;super("idle",{idle:{onEnter:()=>{e.select(this.active,this.active),this.hoverCoords&&(this.hovered=e.hoverAtCoords(this.hoverCoords,this.active,this.hovered))},hover:({offset:w})=>{this.hovered=e.hoverAtCoords(w,this.active,this.hovered),this.hoverCoords=w},translate:{guard:m,target:"translating",action:({translation:w})=>{e.startInteracting(),e.translate(this.active,w),e.update()}},copy:{guard:C,action:()=>{this.copied=e.copy(this.active)}},cut:{guard:C,action:()=>{this.copied=e.copy(this.active),n()}},paste:{guard:v,action:()=>{e.paste(this.copied)}},selectLast:()=>{const w=this.active;this.active=e.selectLast(),e.select(this.active,w)},click:[{guard:()=>{const{active:w,hovered:M,datum:T}=this;return w==null||M!==w||!T?!1:Au(T)&&T.isWriteable()},target:"text-input"},{action:()=>{const w=this.active;this.active=this.hovered,e.select(this.active,w)}}],dblclick:{guard:b,action:({offset:w})=>{const M=e.getNodeAtCoords(w,this.active)==="text"?"text":"line";e.showAnnotationSettings(this.active,void 0,M)}},dragStart:[{guard:x,target:"dragging",action:()=>{const w=this.active;this.active=this.hovered,e.select(this.active,w),e.startInteracting()}},{action:()=>{const w=this.active;this.active=this.hovered,e.select(this.active,w)}}],color:{guard:m,action:l},fontSize:{guard:m,action:c},lineProps:{guard:m,action:w=>{const M=nm(this.datum);M?.set(w),e.update(),e.recordAction(`Change ${M?.type} ${Object.entries(w).map(([T,L])=>`${T} to ${L}`).join(", ")}`)}},lineStyle:{guard:m,action:u},lineText:{guard:m,action:w=>{const M=nm(this.datum);Db(M)&&(Zd(M)&&w.position==="center"&&(w.position="inside"),M.text.set(w),e.update())}},updateTextInputBBox:{guard:m,action:d},toolbarPressSettings:{guard:b,action:w=>{e.showAnnotationSettings(this.active,w)}},reset:()=>{this.active!=null&&this.node?.toggleActive(!1),this.hovered=void 0,this.active=void 0,e.select(this.active,this.active),e.resetToIdle()},delete:()=>{this.active!=null&&(e.delete(this.active),!_p(this.datum)&&e.recordAction(`Delete ${this.datum?.type} annotation`))},deleteAll:()=>{e.deleteAll()},...r},dragging:{onEnter:(w,M)=>{if(this.active==null)return;const T=e.getAnnotationType(this.active);T&&(this.transitionRoot(T),this.transitionRoot("dragStart",M))},...a},translating:{onEnter:()=>{},translate:{guard:m,target:"translating",action:({translation:w})=>{e.startInteracting(),e.translate(this.active,w),e.update()}},translateEnd:{guard:m,target:"idle"},onExit:()=>{e.stopInteracting(),e.update(),e.recordAction("Translate annotation")}},"text-input":{onEnter:()=>{if(this.active==null)return;const w=nm(this.datum);!w||!("getTextInputCoords"in w)||(e.startInteracting(),e.showTextInput(this.active),w.visible=!1,e.update())},updateTextInputBBox:{guard:m,action:d},resize:{target:"idle",action:p},click:{target:"idle",action:p},drag:{target:"idle",action:p},textInput:[{guard:aW,target:"idle",action:f},{guard:lW,target:"idle",action:p}],color:{guard:m,action:l},fontSize:{guard:m,action:c},cancel:{target:"idle",action:f},onExit:()=>{e.stopInteracting(),e.hideTextInput();const w=this.active;if(this.active=this.hovered=void 0,e.select(this.active,w),w==null)return;const M=e.datum(w),T=e.node(w);!M||!T||(M.visible=!0)}}}),this.setActive=t,this.debug=GNe.create(!0,"annotations"),this.snapping=!1}};D([_Ne({changeValue(e){this.setActive(e)}}),Yu()],Fg.prototype,"active");D([Yu()],Fg.prototype,"hovered");D([Yu()],Fg.prototype,"hoverCoords");D([Yu()],Fg.prototype,"copied");D([Yu()],Fg.prototype,"snapping");D([Yu()],Fg.prototype,"datum");D([Yu()],Fg.prototype,"node");var{ActionOnSet:WNe,LayoutElement:jNe,Menu:UNe,PropertiesArray:$Ne,ToolbarButtonProperties:KNe,Property:n1,ChartAxisDirection:YNe}=N,ore=class extends KNe{};D([n1],ore.prototype,"value");var s1=class extends N.BaseProperties{constructor(e){super(),this.ctx=e,this.enabled=!0,this.padding=20,this.buttons=new $Ne(ore),this.events=new Dc,this.annotationMenu=new UNe(this.ctx,"annotations"),this.cleanup=new _i,this.toolbar=e.sharedToolbar.getSharedToolbar("annotations");const t=this.onKeyDown.bind(this);this.toolbar.addListener("keydown",t),this.cleanup.register(this.toolbar.addToolbarListener("button-pressed",this.onToolbarButtonPress.bind(this)),e.layoutManager.registerElement(jNe.ToolbarLeft,this.onLayoutStart.bind(this)),()=>{this.toolbar.removeListener("keydown",t),this.toolbar.destroy()})}destroy(){this.cleanup.flush()}toggleClearButtonEnabled(e){const t=this.buttons.findIndex(i=>i.value==="clear");this.toolbar.toggleButtonEnabledByIndex(t,e)}resetButtonIcons(){for(const[e,t]of this.buttons.entries())switch(t.value){case"line-menu":this.updateButtonByIndex(e,{icon:"trend-line-drawing",value:"line-menu"});break;case"fibonacci-menu":this.updateButtonByIndex(e,{icon:"fibonacci-retracement-drawing",value:"fibonacci-menu"});break;case"text-menu":this.updateButtonByIndex(e,{icon:"text-annotation",value:"text-menu"});break;case"shape-menu":this.updateButtonByIndex(e,{icon:"arrow-drawing",value:"shape-menu"});break;case"measurer-menu":this.updateButtonByIndex(e,{icon:"measurer-drawing",value:"measurer-menu"});break}}hideOverlays(){this.annotationMenu.hide()}clearActiveButton(){this.toolbar.clearActiveButton()}onLayoutStart(e){this.enabled&&(this.toolbar.updateButtons(this.buttons),this.toolbar.layout(e.layoutBox,this.padding))}refreshButtonsEnabled(e){for(const[t,i]of this.buttons.entries())i&&this.toolbar.toggleButtonEnabledByIndex(t,e)}onToolbarButtonPress({event:e,button:t,buttonBounds:i,buttonWidget:n}){const s=this.ctx.axisManager.getAxisContext(YNe.Y)[0].scale;switch(t.value){case"clear":this.events.emit("pressed-clear",null);break;case"line-menu":this.onToolbarButtonPressShowMenu(e,i,n,t.value,"toolbarAnnotationsLineAnnotations",RPe.filter(o=>o.visible?o.visible(s):!0));break;case"fibonacci-menu":this.onToolbarButtonPressShowMenu(e,i,n,t.value,"toolbarAnnotationsFibonacciAnnotations",EPe);break;case"text-menu":this.onToolbarButtonPressShowMenu(e,i,n,t.value,"toolbarAnnotationsTextAnnotations",PPe);break;case"shape-menu":this.onToolbarButtonPressShowMenu(e,i,n,t.value,"toolbarAnnotationsShapeAnnotations",NPe);break;case"measurer-menu":this.onToolbarButtonPressShowMenu(e,i,n,t.value,"toolbarAnnotationsMeasurerAnnotations",OPe);break}}onToolbarButtonPressShowMenu(e,t,i,n,s,o){this.events.emit("pressed-show-menu",null);const r=this.buttons.findIndex(a=>a.value===n);this.toolbar.toggleActiveButtonByIndex(r),this.annotationMenu.setAnchor({x:t.x+t.width+6,y:t.y}),this.annotationMenu.show(i,{items:o,ariaLabel:this.ctx.localeManager.t(s),class:"ag-charts-annotations__toolbar-menu",sourceEvent:e.sourceEvent,onPress:this.onButtonPressMenuCreateAnnotation.bind(this,n)})}onButtonPressMenuCreateAnnotation(e,t){const i=this.buttons.findIndex(n=>n.value===e);this.updateButtonByIndex(i,{icon:t.icon}),this.events.emit("pressed-create-annotation",{annotation:t.value}),this.annotationMenu.hide()}onKeyDown({sourceEvent:e}){e.key==="Escape"&&this.events.emit("cancel-create-annotation",null)}updateButtonByIndex(e,t){const i=this.buttons.at(e);i&&(i.set({...i.toJson(),...t,value:t.value??i.value}),this.toolbar.updateButtonByIndex(e,{...i.toJson()}))}};D([n1,WNe({changeValue(e){this.toolbar?.setHidden(!e)}})],s1.prototype,"enabled");D([n1],s1.prototype,"padding");D([n1],s1.prototype,"buttons");var{BaseModuleInstance:XNe,InteractionState:Ex,Property:ZNe,ChartAxisDirection:qNe,getIconClassNames:QNe}=N,sw="ag-charts-annotations__axis-button",rre=class extends XNe{constructor(e,t,i,n){super(),this.ctx=e,this.axisCtx=t,this.onButtonClick=i,this.seriesRect=n,this.enabled=!0,this.snap=!1,this.padding=0,this.button=this.setup(),this.toggleVisibility(!1),this.updateButtonElement(),this.snap=!!t.scale.bandwidth,e.domManager.addEventListener("focusin",({target:s})=>{const o=s instanceof HTMLElement?s:void 0;!(o&&e.domManager.contains(o,"series-area"))&&o!==this.button.getElement()&&this.hide()}),this.cleanup.register(e.widgets.seriesWidget.addListener("drag-move",s=>this.onMouseDrag(s)),e.widgets.seriesWidget.addListener("mousemove",s=>this.onMouseMove(s)),e.widgets.seriesWidget.addListener("mouseleave",()=>this.onMouseLeave()),e.widgets.seriesDragInterpreter?.events.on("click",s=>this.onClick(s)),e.eventsHub.on("series:focus-change",()=>this.onKeyPress()),e.eventsHub.on("zoom:pan-start",()=>this.hide()),e.eventsHub.on("zoom:change",()=>this.hide()),()=>this.destroyElements(),()=>this.button.destroy())}update(e,t){this.seriesRect=e,this.padding=t}setup(){const e=new cR.ButtonWidget;return e.addClass(sw),e.setTabIndex(-1),e.setAriaLabel(this.ctx.localeManager.t("ariaLabelAddHorizontalLine")),this.ctx.widgets.seriesWidget.getElement().appendChild(e.getElement()),e}destroyElements(){this.ctx.domManager.removeChild("canvas-overlay",sw)}onMouseMove(e){this.ctx.interactionManager.isState(Ex.Clickable)&&this.show(e)}onMouseDrag(e){this.ctx.interactionManager.isState(Ex.AnnotationsMoveable)&&this.show(e)}onMouseLeave(){this.ctx.interactionManager.isState(Ex.Clickable)&&this.hide()}onClick(e){this.ctx.interactionManager.isState(Ex.Clickable)&&e.device==="touch"&&this.show(e)}show(e){const{sourceEvent:t,currentX:i,currentY:n}=e;if(!(this.enabled&&this.ctx.widgets.seriesWidget.getElement().contains(t.target))){this.hide();return}this.toggleVisibility(!0);const s=this.getButtonCoordinates({x:i,y:n});this.coords={x:s.x+this.button.clientWidth/2,y:s.y+this.button.clientHeight/2},this.updatePosition(s)}hide(){this.toggleVisibility(!1)}onKeyPress(){this.snap&&this.ctx.interactionManager.isState(Ex.Default)||this.hide()}getButtonCoordinates({x:e,y:t}){const{axisCtx:{direction:i,position:n},seriesRect:s,snap:o,axisCtx:r,padding:a}=this,{clientWidth:l,clientHeight:c}=this.button,[u,d]=[0,s.height],[p,f]=[0,s.width];if(o&&(e=Fd(uR(e-s.x,r),r)+s.x,t=Fd(uR(t-s.y,r),r)+s.y),i===qNe.X){const v=c-Math.max(0,a-5);e=e-l/2,t=n==="top"?u-c+v:d-v}else{const v=l-Math.max(0,a-9);e=n==="left"?p-l+v:f-v,t=t-c/2}return{x:e,y:t}}toggleVisibility(e){const{button:t}=this;if(t==null)return;const i=this.enabled&&e;this.toggleClass("-hidden",!i)}toggleClass(e,t){this.button.toggleClass(`${sw}-${e}`,t)}updatePosition({x:e,y:t}){this.button.getElement().style.transform=`translate(${Math.round(e)}px, ${Math.round(t)}px)`}updateButtonElement(){const{button:e}=this;e.addListener("click",()=>this.onButtonClick(this.coords)),e.addListener("touchend",()=>this.onButtonClick(this.coords)),e.addListener("drag-start",()=>{}),e.setInnerHTML(`<span class="${QNe("zoom-in")} ${sw}-icon"></span>`)}};D([ZNe],rre.prototype,"enabled");var{Color:R8,DraggablePopover:JNe,NativeWidget:H_,Vec2:gs,createButton:xk,createCheckbox:eOe,createSelect:tOe,createTextArea:iOe,initRovingTabIndex:E8,getIconClassNames:nOe,mapValues:YF}=N,are=class W_ extends JNe{constructor(t,i){super(t,i),this.dragHandleDraggingClass="ag-charts-dialog__drag-handle--dragging",this.colorPicker=new Noe(this.ctx,{detached:!0}),this.cleanup.register(t.eventsHub.on("layout:complete",this.onLayoutComplete.bind(this)))}showWithChildren(t,i){const n=super.showWithChildren(t,i);return n.classList.add("ag-charts-dialog"),n.setAttribute("role","dialog"),n.addEventListener("mousedown",s=>{s.target.classList?.contains("ag-charts-dialog__color-picker-button")||this.colorPicker.hide()}),n.addEventListener("keydown",this.onKeyDown.bind(this)),Qt().requestAnimationFrame(()=>this.reposition()),this.colorPicker.attachTo(this),n}updatePosition(t){super.updatePosition(t);const{anchor:i,fallbackAnchor:n}=this.getColorPickerAnchors()??{};i&&this.colorPicker.setAnchor(i,n)}createTabs(t,i,n){const s=nt("div","ag-charts-dialog__tabs"),o=YF(n,()=>pm()),r=YF(n,()=>pm());for(const[f,m]of Ji(n))wu(m.panel,{id:r[f],role:"tabpanel","aria-labelledby":o[f]});const a=f=>{for(const[m,v]of Ji(n))v.panel.classList.toggle("ag-charts-dialog__tab-panel--active",m===f),u[m].classList.toggle("ag-charts-dialog__tab-button--active",m===f),Pt(u[m],"aria-selected",m===f),m===f&&v.onShow?.()},l=new H_(nt("div","ag-charts-dialog__header"));l.addListener("drag-start",f=>{const{sourceEvent:m}=f;m.target instanceof Element&&m.target.classList.contains("ag-charts-dialog__header")&&this.onDragStart(f)}),l.addListener("drag-move",f=>this.onDragMove(f)),l.addListener("drag-end",()=>this.onDragEnd());const c=new oOe;this.setDragHandle(c);const u=YF(n,(f,m)=>xk({label:this.ctx.localeManager.t(f.label),onPress:()=>a(m)},{id:o[m],class:"ag-charts-dialog__tab-button",role:"tab","aria-controls":r[m]})),d=nt("div","ag-charts-dialog__tab-list");wu(d,{role:"tablist","aria-label":this.ctx.localeManager.t(t)}),d.append(...Object.values(u));const p=this.createHeaderCloseButton();return l.getElement().append(c.getElement(),d,p),s.append(l.getElement(),...Object.values(n).map(f=>f.panel)),a(i),E8({orientation:"horizontal",buttons:Object.values(u)}),{tabs:s,initialFocus:u[i]}}createTabPanel(){return nt("div","ag-charts-dialog__tab-panel")}createInputGroupLine(){return nt("div","ag-charts-dialog__input-group-line")}createRadioGroup({label:t,options:i,value:n,onChange:s}){const o=this.createInputGroup(t);wu(o,{role:"radiogroup",tabindex:-1,"aria-label":this.ctx.localeManager.t(t)});const r="ag-charts-dialog__button--active",a=[];for(const l of i){const{icon:c,altText:u}=l,d=this.ctx.localeManager.t(u),p=xk({icon:c,altText:d,onPress:()=>{for(const f of Array.from(o.children))f.classList.remove(r),f.ariaChecked="false";p.classList.add(r),p.ariaChecked="true",s(l.value)}},{"aria-checked":l.value===n,class:"ag-charts-dialog__button",role:"radio",title:d});l.value===n&&p.classList.add(r),o.appendChild(p),a.push(p)}return E8({orientation:"horizontal",buttons:a}),o}createSelect({altText:t,label:i,options:n,value:s,onChange:o}){const r=this.createInputGroup(i),a=this.ctx.localeManager.t(t),l=tOe({value:s,options:n,onChange:o},{class:"ag-charts-dialog__select","aria-label":a,title:a});return r.append(l),r}createTextArea({placeholder:t,value:i,onChange:n}){const s=t?this.ctx.localeManager.t(t):void 0;return iOe({value:i,onChange:n},{placeholder:s})}createCheckbox({label:t,checked:i,onChange:n}){const s=pm(),o=this.createInputGroup(t,{for:s}),r=eOe({checked:i,onChange:n},{class:"ag-charts-dialog__checkbox",role:"switch",id:s});return o.append(r),o}createColorPicker({color:t,opacity:i,label:n,altText:s,onChange:o,onChangeHide:r,isMultiColor:a,hasMultiColorOption:l}){const c=this.createInputGroup(n),u=this.ctx.localeManager.t(s),d=xk({label:u,onPress:p=>{const{anchor:f,fallbackAnchor:m}=this.getColorPickerAnchors(d)??{};this.colorPicker.show({anchor:f,fallbackAnchor:m,color:t,opacity:i,isMultiColor:a,hasMultiColorOption:l,sourceEvent:p,onChange:(v,b,C,x)=>{d.style.setProperty("--color",v),d.classList.toggle("ag-charts-dialog__color-picker-button--multi-color",x),o(v,b,C,x)},onChangeHide:r})}},{"aria-label":u,tabindex:0,class:"ag-charts-dialog__color-picker-button",title:u});if(a)d.classList.toggle("ag-charts-dialog__color-picker-button--multi-color");else if(t){const p=R8.fromString(t),f=new R8(p.r,p.g,p.b,i);d.style.setProperty("--color",f.toHexString())}return c.append(d),this.hideFns.push(()=>{this.colorPicker.hide()}),c}createHeaderCloseButton(){return xk({icon:"close",altText:this.ctx.localeManager.t("iconAltTextClose"),onPress:()=>this.hide()},{class:"ag-charts-dialog__close-button"})}createInputGroup(t,i){const n=nt("div","ag-charts-dialog__input-group"),s=nt("label","ag-charts-dialog__input-group-label");return s.innerText=this.ctx.localeManager.t(t),Pt(s,"for",i?.for),n.appendChild(s),n}onLayoutComplete(t){this.seriesRect=t.series.paddedRect,this.reposition()}onKeyDown(t){t.altKey||t.ctrlKey||t.metaKey||t.isComposing||t.key!=="Escape"||this.hide()}reposition(){const{seriesRect:t,ctx:i}=this,n=i.domManager.getBoundingClientRect(),s=this.getPopoverElement();if(!t||!s)return;const o=gs.from(0,t.y),r=gs.from(n.width,t.height),a=gs.from(s),l=gs.from(.5,1);let c;if(t.width>1e3){const u=gs.sub(gs.add(o,gs.multiply(r,l)),gs.multiply(a,l));c=gs.sub(u,gs.from(0,W_.offset))}else{const u=gs.sub(gs.add(o,r),a);c=gs.sub(u,W_.offset)}this.updatePosition(c)}getColorPickerAnchors(t){if(t&&(this.colorPickerAnchorElement=t),!this.colorPickerAnchorElement)return;const i=this.colorPickerAnchorElement.getBoundingClientRect(),n=this.ctx.domManager.getBoundingClientRect(),s=gs.sub(gs.from(i.x,i.y),gs.from(n.left,n.top)),o=gs.add(s,gs.from(0,i.height+5)),r=gs.sub(s,gs.from(0,5));return{anchor:o,fallbackAnchor:r}}};are.offset=60;var sOe=are,oOe=class extends H_{constructor(){super(nt("div","ag-charts-dialog__drag-handle"));const e=new H_(nt("span",nOe("drag-handle")));e.setAriaHidden(!0),this.addChild(e)}},{focusCursorAtEnd:rOe}=N,aOe=class extends sOe{constructor(e){super(e,"settings"),this.events=new Dc,this.hideFns.push(()=>this.events.emit("hidden",null))}show(e,t){const i=this.createLinearLineTab(e,t),n=this.createLinearTextTab(e,t);let s="dialogHeaderLine";Zd(e)?s="dialogHeaderChannel":Loe(e)?s="dialogHeaderFibonacciRange":e.type==="date-range"?s="dialogHeaderDateRange":e.type==="price-range"?s="dialogHeaderPriceRange":e.type==="date-price-range"&&(s="dialogHeaderDatePriceRange");const{tabs:o,initialFocus:r}=this.createTabs("ariaLabelSettingsTabBar",t.initialSelectedTab,{line:{label:s,panel:i},text:{label:"dialogHeaderText",panel:n.panel,onShow:n.onShow}});t.initialFocus=r,this.showWithChildren([o],t).classList.add("ag-charts-dialog--annotation-settings")}createLinearLineTab(e,t){const i=this.createTabPanel(),n=this.createInputGroupLine(),s=this.createInputGroupLine(),o="isMultiColor"in e,r=this.createColorPickerInput("line-color",e.getDefaultColor("line-color"),e.getDefaultOpacity("line-color"),o?e.isMultiColor:!1,o,t.onChangeLineColor,t.onChangeHideLineColor),a=this.createStrokeWidthSelect(e.strokeWidth??2,t.onChangeLineStyleWidth),l=this.createLineStyleRadioGroup(e.lineStyle??"solid",t.onChangeLineStyleType);if(n.append(r),"background"in e){const c=this.createColorPickerInput("fill-color",e.getDefaultColor("fill-color"),e.getDefaultOpacity("fill-color"),!1,!1,t.onChangeFillColor,t.onChangeHideFillColor);n.append(c),s.append(a)}else"showFill"in e?(n.append(this.createCheckbox({label:"dialogInputShowFill",checked:e.showFill??!0,onChange:c=>t.onChangeLine({showFill:c})})),s.append(a)):n.append(a);return s.append(l),i.append(n,s),"bands"in e&&i.append(this.createFibonacciRatioSelect(e.bands??10,c=>t.onChangeLine({bands:c}))),"extendStart"in e&&"extendEnd"in e&&i.append(this.createCheckbox({label:Zd(e)?"dialogInputExtendChannelStart":"dialogInputExtendLineStart",checked:e.extendStart??!1,onChange:c=>t.onChangeLine({extendStart:c})}),this.createCheckbox({label:Zd(e)?"dialogInputExtendChannelEnd":"dialogInputExtendLineEnd",checked:e.extendEnd??!1,onChange:c=>t.onChangeLine({extendEnd:c})})),"extendAbove"in e&&"extendBelow"in e&&i.append(this.createCheckbox({label:"dialogInputExtendAbove",checked:e.extendAbove??!1,onChange:c=>t.onChangeLine({extendAbove:c})}),this.createCheckbox({label:"dialogInputExtendBelow",checked:e.extendBelow??!1,onChange:c=>t.onChangeLine({extendBelow:c})})),"extendLeft"in e&&"extendRight"in e&&i.append(this.createCheckbox({label:"dialogInputExtendLeft",checked:e.extendLeft??!1,onChange:c=>t.onChangeLine({extendLeft:c})}),this.createCheckbox({label:"dialogInputExtendRight",checked:e.extendRight??!1,onChange:c=>t.onChangeLine({extendRight:c})})),"reverse"in e&&"showFill"in e&&i.append(this.createCheckbox({label:"dialogInputReverse",checked:e.reverse??!1,onChange:c=>t.onChangeLine({reverse:c})})),i}createLinearTextTab(e,t){const i=this.createTabPanel(),n=this.createTextArea({placeholder:"inputTextareaPlaceholder",value:e.text.label,onChange:u=>t.onChangeText({label:u})}),s=this.createFontSizeSelect(e.text.fontSize,t.onChangeTextFontSize),o=this.createColorPickerInput("text-color",e.text.color,1,!1,!1,t.onChangeTextColor,t.onChangeHideTextColor),r=e.text.position==="inside"?"center":e.text.position,a=this.createPositionRadioGroup(r??"top",u=>t.onChangeText({position:u})),l=this.createAlignmentRadioGroup(e.text.alignment??"center",u=>t.onChangeText({alignment:u})),c=this.createInputGroupLine();return c.append(s,o,a,l),i.append(n,c),{panel:i,onShow:()=>rOe(n)}}createColorPickerInput(e,t,i,n,s,o,r){const a=e==="fill-color"?"dialogInputFillColorPicker":"dialogInputColorPicker",l=e==="fill-color"?"dialogInputFillColorPickerAltText":"dialogInputColorPickerAltText";return this.createColorPicker({label:a,altText:l,color:t,opacity:i,isMultiColor:n,hasMultiColorOption:s,onChange:o,onChangeHide:r})}createStrokeWidthSelect(e,t){return this.createSelect({label:"dialogInputStrokeWidth",altText:"dialogInputStrokeWidthAltText",options:Ooe.map(({label:i,value:n})=>({label:i,value:`${n}`})),value:String(e),onChange:i=>t(Number(i))})}createFibonacciRatioSelect(e,t){return this.createSelect({label:"dialogInputFibonacciBands",altText:"dialogInputFibonacciBandsAltText",options:LPe.map(({label:i,value:n})=>({label:i,value:`${n}`})),value:String(e),onChange:i=>t(Number(i))})}createLineStyleRadioGroup(e,t){return this.createRadioGroup({label:"dialogInputLineStyle",options:[{icon:"line-style-solid",altText:"iconAltTextLineStyleSolid",value:"solid"},{icon:"line-style-dashed",altText:"iconAltTextLineStyleDashed",value:"dashed"},{icon:"line-style-dotted",altText:"iconAltTextLineStyleDotted",value:"dotted"}],value:e,onChange:t})}createFontSizeSelect(e,t){return this.createSelect({label:"dialogInputFontSize",altText:"dialogInputFontSizeAltText",options:Foe.map(({label:i,value:n})=>({label:i,value:String(n)})),value:String(e),onChange:i=>t(Number(i))})}createPositionRadioGroup(e,t){return this.createRadioGroup({label:"dialogInputPosition",options:[{icon:"position-top",altText:"iconAltTextPositionTop",value:"top"},{icon:"position-center",altText:"iconAltTextPositionCenter",value:"center"},{icon:"position-bottom",altText:"iconAltTextPositionBottom",value:"bottom"}],value:e,onChange:t})}createAlignmentRadioGroup(e,t){return this.createRadioGroup({label:"dialogInputAlign",options:[{icon:"align-left",altText:"iconAltTextAlignLeft",value:"left"},{icon:"align-center",altText:"iconAltTextAlignCenter",value:"center"},{icon:"align-right",altText:"iconAltTextAlignRight",value:"right"}],value:e,onChange:t})}};function XF(e){return e.gridPadding+e.seriesAreaPadding+e.tickSize+e.label.spacing}function lOe(e,t,i){for(const{update:n}of Object.values(fa))n(e,t,i)}var{ChartUpdateType:cOe,InteractionState:Fr,PropertiesArray:uOe,Property:ZD,ChartAxisDirection:dOe,keyProperty:hOe,valueProperty:pOe,Vec2:Rf,Selection:gOe,BBox:fOe}=N,tC=class lre extends N.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.enabled=!0,this.toolbar=new s1(this.ctx),this.optionsToolbar=new tW(this.ctx,()=>{const i=this.state.getActive();if(i!=null)return nm(this.annotationData.at(i))}),this.axesButtons=new zH,this.snap=!1,this.data=void 0,this.xKey=void 0,this.volumeKey=void 0,this.annotationData=new uOe(lre.createAnnotationDatum),this.defaults=new TPe,this.container=new N.Group({name:"static-annotations"}),this.annotations=new gOe(this.container,this.createAnnotationScene.bind(this)),this.settingsDialog=new aOe(this.ctx),this.textInput=new W1e(this.ctx),this.postUpdateFns=[],this.state=this.setupStateMachine(),this.setupListeners(),this.setupDOM(),this.ctx.historyManager.addMementoOriginator(t.annotationManager),this.ctx.historyManager.addMementoOriginator(this.defaults),this.textInput.setKeyDownHandler(this.onTextInput.bind(this)),this.cleanup.register(()=>{this.clear(),this.xAxis?.button?.destroy(),this.yAxis?.button?.destroy()})}setupStateMachine(){const{ctx:t}=this;return new i1({resetToIdle:()=>{t.domManager.updateCursor("annotations"),this.popAnnotationState(Fr.Annotations),this.hideOverlays(),this.optionsToolbar.hide(),this.deleteEphemeralAnnotations(),this.update()},hoverAtCoords:(i,n,s)=>{let o;return this.annotations.each((r,a,l)=>{if(!a.isHoverable())return;const c=r.containsPoint(i.x,i.y);c&&(o??(o=l)),r.toggleHovered(c,n===l,a.readOnly)}),o!=null?t.tooltipManager.suppressTooltip("annotations"):this.isAnnotationState()||t.tooltipManager.unsuppressTooltip("annotations"),(o==null||!this.annotationData.at(o)?.readOnly)&&this.ctx.domManager.updateCursor("annotations",o==null?void 0:this.annotations.at(o)?.getCursor()),o!==s&&this.update(),o},getNodeAtCoords:(i,n)=>{const s=this.annotations.at(n);if(s)return s.getNodeAtCoords(i.x,i.y)},translate:(i,n)=>{const s=this.annotations.at(i),o=nm(this.annotationData.at(i));if(!(!s||!o))return this.translateNode(s,o,n)},copy:i=>{const n=this.annotations.at(i),s=nm(this.annotationData.at(i));if(!(!n||!s))return this.createAnnotationDatumCopy(n,s)},paste:i=>{this.createAnnotation(i.type,i,!1),this.postUpdateFns.push(()=>{this.state.transitionAsync("selectLast"),this.state.transitionAsync("copy")})},select:(i,n)=>{const{annotations:s,optionsToolbar:o,toolbar:r}=this;this.hideOverlays(),r.clearActiveButton(),r.resetButtonIcons();const a=i==null?null:s.at(i),l=n==null?null:s.at(n),c=i==null?null:this.annotationData.at(i);l===a&&a!=null||(l?.toggleActive(!1),o.hide(),a&&!c?.readOnly?(this.pushAnnotationState(Fr.AnnotationsSelected),a.toggleActive(!0),_p(c)||(o.updateButtons(this.annotationData.at(i)),this.postUpdateFns.push(()=>{o.show(),o.setAnchorScene(a)}))):(this.popAnnotationState(Fr.AnnotationsSelected),this.popAnnotationState(Fr.Annotations)),_p(c)||this.deleteEphemeralAnnotations(),this.update())},selectLast:()=>(this.pushAnnotationState(Fr.AnnotationsSelected),this.annotationData.length-1),startInteracting:()=>{this.pushAnnotationState(Fr.Annotations)},stopInteracting:()=>{this.popAnnotationState(Fr.Annotations)},create:(i,n)=>{this.createAnnotation(i,n)},delete:i=>{this.annotationData.splice(i,1)},deleteAll:()=>{const i=this.annotationData.filter(n=>{if(n.readOnly===!0)return n});this.annotationData.splice(0,this.annotationData.length);for(const n of i)this.annotationData.push(n)},validatePoint:(i,n)=>{const s=this.getAnnotationContext();return s?dR(s,i,n):!0},getAnnotationType:i=>$1e(this.annotationData[i].type),datum:i=>this.annotationData.at(i),node:i=>this.annotations.at(i),recordAction:i=>{this.recordActionAfterNextUpdate(i)},update:()=>{this.postUpdateFns.push(()=>{const i=this.state.getActive(),n=i==null?null:this.annotations.at(i);n!=null&&this.optionsToolbar.setAnchorScene(n)}),this.update()},showTextInput:i=>{const n=nm(this.annotationData.at(i));if(!this.annotations.at(i)||!n||!("getTextInputCoords"in n)||!("getTextPosition"in n))return;const o={color:n.color,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStyle:n.fontStyle,fontWeight:n.fontWeight,placeholderColor:n.getPlaceholderColor()},r=this.getAnnotationContext(),a=c=>Rf.add(n.getTextInputCoords(r,c),Rf.required(this.seriesRect)),l=()=>n.getTextPosition();this.textInput.show({styles:o,layout:{getTextInputCoords:a,getTextPosition:l,alignment:n.alignment,textAlign:n.textAlign,width:n.width},text:n.text,placeholderText:n.placeholderText,onChange:(c,u)=>{this.state.transition("updateTextInputBBox",u)}}),this.ctx.domManager.updateCursor("annotations")},hideTextInput:()=>{this.textInput.hide()},updateTextInputColor:i=>{this.textInput.updateColor(i)},updateTextInputFontSize:i=>{const n=this.textInput.updateFontSize(i);this.state.transition("updateTextInputBBox",n)},updateTextInputBBox:i=>{this.state.transition("updateTextInputBBox",i)},showAnnotationOptions:i=>{const n=this.annotations.at(i);!n||_p(this.annotationData.at(i))||(this.optionsToolbar.updateButtons(this.annotationData.at(i)),this.optionsToolbar.show(),this.optionsToolbar.setAnchorScene(n))},showAnnotationSettings:(i,n,s="line")=>{const o=this.annotationData.at(i);if(!YL(o)&&!Zd(o)&&!YD(o)||_p(o))return;const r=c=>(u,d,p,f)=>{this.setColorAndDefault(o.type,c,u,d,p,f),this.optionsToolbar.updateColorPickerColor(c,d,p,f)},a=c=>()=>{this.recordActionAfterNextUpdate(`Change ${o.type} ${c} to ${o.getDefaultColor(c)}`,["annotations","defaults"]),this.update()},l={initialSelectedTab:s,ariaLabel:this.ctx.localeManager.t("ariaLabelAnnotationSettingsDialog"),sourceEvent:n,onChangeLine:c=>{this.state.transition("lineProps",c),c.bands!=null&&this.defaults.setDefaultFibonacciOptions(o.type,"bands",c.bands),c.reverse!=null&&this.defaults.setDefaultFibonacciOptions(o.type,"reverse",c.reverse),c.showFill!=null&&this.defaults.setDefaultFibonacciOptions(o.type,"showFill",c.showFill)},onChangeText:c=>{this.state.transition("lineText",c),c.alignment&&this.defaults.setDefaultLineTextAlignment(o.type,c.alignment),c.position&&this.defaults.setDefaultLineTextPosition(o.type,c.position),this.recordActionAfterNextUpdate(`Change ${o.type} text ${Object.keys(c).map(u=>`${u} to ${c[u]}`).join(", ")}`)},onChangeFillColor:r("fill-color"),onChangeHideFillColor:a("fill-color"),onChangeLineColor:r("line-color"),onChangeHideLineColor:a("line-color"),onChangeLineStyleType:c=>{this.setLineStyleTypeAndDefault(o.type,c),this.optionsToolbar.updateLineStyleType(Dw.find(u=>u.value===c)??Dw[0])},onChangeLineStyleWidth:c=>{this.setLineStyleWidthAndDefault(o.type,c),this.optionsToolbar.updateStrokeWidth({strokeWidth:c,value:c,label:String(c)})},onChangeTextColor:r("text-color"),onChangeHideTextColor:a("text-color"),onChangeTextFontSize:c=>{this.setFontSizeAndDefault(o.type,c)}};this.settingsDialog.show(o,l)}})}setupListeners(){const{ctx:t,optionsToolbar:i,settingsDialog:n,toolbar:s}=this,{seriesWidget:o,seriesDragInterpreter:r,chartWidget:a}=t.widgets;r&&this.cleanup.register(r.events.on("click",this.hoverTouchPreHandler.bind(this)),r.events.on("drag-start",this.hoverTouchPreHandler.bind(this)),r.events.on("drag-move",this.dragMoveTouchPreHandler.bind(this)),r.events.on("mousemove",this.onHover.bind(this)),r.events.on("click",this.onClick.bind(this)),r.events.on("dblclick",this.onDoubleClick.bind(this)),r.events.on("drag-start",this.onDragStart.bind(this)),r.events.on("drag-move",this.onDrag.bind(this)),r.events.on("drag-end",this.onDragEnd.bind(this))),this.cleanup.register(o.addListener("keydown",this.onKeyDown.bind(this)),o.addListener("keyup",this.onKeyUp.bind(this)),a.addListener("click",this.onCancel.bind(this)),t.eventsHub.on("annotations:restore",this.onRestoreAnnotations.bind(this)),t.eventsHub.on("layout:complete",this.onLayoutComplete.bind(this)),t.updateService.addListener("pre-scene-render",this.onPreRender.bind(this)),t.eventsHub.on("zoom:change",()=>this.onResize()),t.eventsHub.on("dom:resize",()=>this.onResize()),s.events.on("cancel-create-annotation",()=>{this.cancel(),this.reset(),this.update()}),s.events.on("pressed-create-annotation",({annotation:l})=>{this.cancel(),this.pushAnnotationState(Fr.Annotations),this.state.transition(l),this.update()}),s.events.on("pressed-clear",()=>{this.clear(),this.recordActionAfterNextUpdate("Clear all")}),s.events.on("pressed-show-menu",()=>{this.cancel(),this.reset()}),s.events.on("pressed-unrelated",()=>{this.reset()}),i.events.on("pressed-delete",()=>{this.cancel(),this.delete(),this.reset()}),i.events.on("pressed-settings",({sourceEvent:l})=>{this.state.transition("toolbarPressSettings",l)}),i.events.on("pressed-lock",({locked:l})=>{this.recordActionAfterNextUpdate(l?"Locked":"Unlocked"),this.update()}),i.events.on("hid-overlays",()=>{this.settingsDialog.hide()}),i.events.on("saved-color",({type:l,colorPickerType:c,color:u})=>{this.recordActionAfterNextUpdate(`Change ${l} ${c} to ${u}`,["annotations","defaults"])}),i.events.on("updated-color",({type:l,colorPickerType:c,colorOpacity:u,color:d,opacity:p,isMultiColor:f})=>{this.setColorAndDefault(l,c,u,d,p,f)}),i.events.on("updated-font-size",({type:l,fontSize:c})=>{this.setFontSizeAndDefault(l,c)}),i.events.on("updated-line-style",({type:l,lineStyleType:c})=>{this.setLineStyleTypeAndDefault(l,c)}),i.events.on("updated-line-width",({type:l,strokeWidth:c})=>{this.setLineStyleWidthAndDefault(l,c)}),n.events.on("hidden",()=>{this.optionsToolbar.clearActiveButton()}))}setupDOM(){const{ctx:t,toolbar:i,optionsToolbar:n}=this;this.cleanup.register(t.annotationManager.attachNode(this.container),()=>{t.domManager.removeStyles(sw),i.destroy(),n.destroy()})}async processData(t){if(!this.enabled||this.data==null||this.xKey==null||this.volumeKey==null)return;const i=[hOe(this.xKey,void 0,{id:"date"}),pOe(this.volumeKey,"number",{id:"volume"})],n=N.DataSet.wrap(this.data)??N.DataSet.empty(),{dataModel:s,processedData:o}=await t.request("annotations",n,{props:i});this.dataModel=s,this.processedData=o}createAnnotationScene(t){if(t.type in fa)return new fa[t.type].scene;throw new Error(`AG Charts - Cannot create annotation scene of type [${t.type}], expected one of [${Object.keys(fa)}], ignoring.`)}static createAnnotationDatum(t){if(t.type in fa)return new fa[t.type].datum().set(t);throw new Error(`AG Charts - Cannot create annotation datum of unknown type [${t.type}], expected one of [${Object.keys(fa)}], ignoring.`)}createAnnotation(t,i,n=!0){if(this.annotationData.push(i),n){const s=this.ctx.annotationManager.getAnnotationTypeStyles(t);s&&i.set(s),this.defaults.applyDefaults(i)}this.injectDatumDependencies(i),this.update()}injectDatumDependencies(t){"setLocaleManager"in t&&t.setLocaleManager(this.ctx.localeManager),"getVolume"in t&&(t.getVolume=this.getDatumRangeVolume.bind(this))}getDatumRangeVolume(t,i){const{dataModel:n,processedData:s}=this;let o=js(t),r=js(i);if(!fb(o)||!fb(r)||!n||!s||this.volumeKey==null)return;o>r&&([o,r]=[r,o]);const a=n.resolveKeysById({id:"annotations"},"date",s),l=n.resolveColumnById({id:"annotations"},"volume",s);let c=0;for(let u=0;u<s.input.count;u++){const d=a[u];fb(d)&&d>=o&&d<=r&&(c+=l[u])}return c}translateNode(t,i,n){const s=this.getAnnotationConfig(i),o=this.getAnnotationContext();o&&s.translate(t,i,n,o)}createAnnotationDatumCopy(t,i){const n=this.getAnnotationConfig(i),s=new n.datum;s.set(i.toJson());const o=this.getAnnotationContext();if(o)return n.copy(t,i,s,o)}getAnnotationConfig(t){if(t.type in fa)return fa[t.type];throw new Error(`AG Charts - Cannot get annotation config of unknown type [${t.type}], expected one of [${Object.keys(fa)}], ignoring.`)}onRestoreAnnotations(t){this.enabled&&(this.clear(),this.annotationData.set(t.annotations),this.postUpdateFns.push(()=>{this.ctx.annotationManager.fireChangedEvent()}),this.update())}onLayoutComplete(t){const i=t.series.paddedRect;this.seriesRect=i,this.container.setClipRect(i);for(const n of t.axes??[])n.direction===N.ChartAxisDirection.X?this.xAxis=this.getAxis(n,i,this.xAxis?.button):this.yAxis=this.getAxis(n,i,this.yAxis?.button);this.showAnnotations()?this.animateAnnotations({from:0,to:1,phase:"trailing"}):this.animateAnnotations({from:1,to:0,phase:"remove"})}showAnnotations(){if(!this.yAxis||!this.xAxis)return!1;const t=this.ctx.chartService.series.some(s=>s.hasData),n=this.yAxis.context.seriesIds().some(s=>this.ctx.chartService.series.find(r=>r.id===s)?.visible);return t&&n}animateAnnotations({from:t,to:i,phase:n}){const{annotations:s}=this;this.ctx.animationManager?.animate({from:t,to:i,id:"chart-annotations",phase:n,groupId:"opacity",onUpdate(o){s.each(r=>{r.opacity=o,"setAxisLabelOpacity"in r&&r.setAxisLabelOpacity(o)})},onStop(){s.each(o=>{o.opacity=i,"setAxisLabelOpacity"in o&&o.setAxisLabelOpacity(i)})}})}onPreRender(){this.updateAnnotations(),this.state.transition("render")}getAxis(t,i,n){const s=this.ctx.axisManager.getAxisContext(t.direction)[0],{position:o="bottom",direction:r}=s,a=t.gridPadding+t.seriesAreaPadding,l=new fOe(0,0,i.width,i.height).grow(a,o),c=r===dOe.X?"vertical":"horizontal",{axesButtons:u,snap:d}=this;if(this.enabled&&u.enabled&&(u.axes==="xy"||u.axes===r)){n??(n=new rre(this.ctx,{...s,snapToGroup:d},m=>this.onAxisButtonClick(m,c),i));const f=XF(t);n.update(i,f)}else n?.destroy(),n=void 0;return{layout:t,context:s,bounds:l,button:n}}recordActionAfterNextUpdate(t,i=["annotations"]){const{defaults:n,ctx:{annotationManager:s,historyManager:o}}=this,r=i.map(a=>a==="defaults"?n:s);this.postUpdateFns.push(()=>{o.record(t,...r),s.fireChangedEvent()})}setColorAndDefault(t,i,n,s,o,r){this.state.transition("color",{colorPickerType:i,colorOpacity:n,color:s,opacity:o,isMultiColor:r}),this.defaults.setDefaultColor(t,i,n,s,o,r)}setFontSizeAndDefault(t,i){this.state.transition("fontSize",i),this.defaults.setDefaultFontSize(t,i),this.recordActionAfterNextUpdate(`Change ${t} font size to ${i}`,["annotations","defaults"])}setLineStyleTypeAndDefault(t,i){this.state.transition("lineStyle",{type:i}),this.defaults.setDefaultLineStyleType(t,i),this.recordActionAfterNextUpdate(`Change ${t} line style to ${i}`,["annotations","defaults"])}setLineStyleWidthAndDefault(t,i){this.state.transition("lineStyle",{strokeWidth:i}),this.defaults.setDefaultLineStyleWidth(t,i),this.recordActionAfterNextUpdate(`Change ${t} stroke width to ${i}`,["annotations","defaults"])}updateAnnotations(){const{annotationData:t,annotations:i,seriesRect:n,ctx:{annotationManager:s}}=this,o=this.getAnnotationContext();if(!n||!o)return;s.updateData(t.toJson());const r=this.showAnnotations();this.toolbar.refreshButtonsEnabled(r),this.toolbar.toggleClearButtonEnabled(t.length>0&&r),i.update(t??[],void 0,a=>a.id).each((a,l)=>{if(!r){a.visible=!1,"setAxisLabelVisible"in a&&a.setAxisLabelVisible(!1);return}"setAxisLabelVisible"in a&&a.setAxisLabelVisible(!0),this.injectDatumDependencies(l),lOe(a,l,o)});for(const a of this.postUpdateFns)a();this.postUpdateFns=[]}getAnnotationContext(){const{seriesRect:t,xAxis:i,yAxis:n,snap:s}=this;if(t&&i&&n)return{seriesRect:t,xAxis:{...i.context,bounds:i.bounds,labelPadding:XF(i.layout),snapToGroup:s},yAxis:{...n.context,bounds:n.bounds,labelPadding:XF(i.layout),snapToGroup:s}}}onHover(t){const{state:i}=this,n=this.getAnnotationContext();if(!n)return;const s=t.sourceEvent.shiftKey,o=Rf.from(t),r=gr(o,n);i.transition("hover",{offset:o,point:r,shiftKey:s,context:n})}onClick(t){const{state:i}=this,n=this.getAnnotationContext();if(!n)return;const s=t.sourceEvent.shiftKey,o=gr(Rf.from(t),n),r=this.textInput.getValue(),a=this.textInput.getBBox();i.transition("click",{point:o,shiftKey:s,textInputValue:r,bbox:a})}onDoubleClick(t){const{state:i}=this;if(!this.getAnnotationContext())return;const s=Rf.from(t);i.transition("dblclick",{offset:s})}onAxisButtonClick(t,i){this.cancel(),this.reset();const n=this.getAnnotationContext();if(!this.annotationData||!n)return;const{state:s}=this;this.pushAnnotationState(Fr.Annotations);const o=i==="horizontal";if(s.transition(o?"horizontal-line":"vertical-line"),this.optionsToolbar.hide(),!t)return;const r=gr(t,n);dR(n,r)&&(s.transition("click",{point:r,shiftKey:!1}),this.update())}onResize(){const t=this.textInput.getValue(),i=this.textInput.getBBox();this.state.transition("resize",{textInputValue:t,bbox:i})}hoverTouchPreHandler(t){t.device==="touch"&&this.onHover(t)}dragMoveTouchPreHandler(t){t.device==="touch"&&this.ctx.interactionManager.isState(Fr.AnnotationsSelected)&&t.sourceEvent.preventDefault()}onDragStart(t){if(!this.ctx.interactionManager.isState(Fr.AnnotationsDraggable))return;const i=this.getAnnotationContext();if(!i)return;const n=Rf.from(t),s=gr(n,i),o=this.textInput.getValue(),r=this.textInput.getBBox();this.state.transition("dragStart",{context:i,offset:n,point:s,textInputValue:o,bbox:r})}onDrag(t){if(!this.ctx.interactionManager.isState(Fr.AnnotationsDraggable))return;const i=this.getAnnotationContext();if(!i)return;const n=Rf.from(t),s=gr(n,i),o=t.sourceEvent.shiftKey,r=this.textInput.getValue(),a=this.textInput.getBBox();this.state.transition("drag",{context:i,offset:n,point:s,shiftKey:o,textInputValue:r,bbox:a})}onDragEnd(){this.state.transition("dragEnd")}onCancel(t){const{sourceEvent:i}=t??{};i?.currentTarget===i?.target&&(this.cancel(),this.reset())}onDelete(){this.textInput.isVisible()||(this.cancel(),this.delete(),this.reset(),this.update())}onTextInput(t){const{state:i}=this,n=this.getAnnotationContext();if(!n)return;const{key:s,shiftKey:o}=t,r=this.textInput.getValue(),a=this.textInput.getBBox();i.transition("textInput",{key:s,shiftKey:o,textInputValue:r,bbox:a,context:n})}onKeyDown(t){const{state:i}=this,n=this.getAnnotationContext();if(!n)return;const{sourceEvent:s}=t,{shiftKey:o,ctrlKey:r,metaKey:a}=s,l=r||a,c=r||o;i.transition("keyDown",{shiftKey:o,context:n});const u={x:0,y:0},d=Math.max(n?.xAxis.scale.bandwidth??0,c?10:1),p=Math.max(n?.yAxis.scale.bandwidth??0,c?10:1);switch(s.key){case"ArrowDown":u.y=p;break;case"ArrowUp":u.y=-p;break;case"ArrowLeft":u.x=-d;break;case"ArrowRight":u.x=d;break;case"Escape":this.onCancel();return;case"Backspace":case"Delete":this.onDelete();return}if((u.x||u.y)&&(i.transition("translate",{translation:u}),s.stopPropagation(),s.preventDefault()),!!l)switch(s.key){case"c":i.transition("copy");return;case"x":i.transition("cut"),this.recordActionAfterNextUpdate("Cut annotation");return;case"v":i.transition("paste"),this.recordActionAfterNextUpdate("Paste annotation");return}}onKeyUp(t){const{shiftKey:i}=t.sourceEvent,n=this.getAnnotationContext();n&&(this.state.transition("keyUp",{shiftKey:i,context:n}),this.state.transition("translateEnd"))}clear(){this.cancel(),this.deleteAll(),this.reset()}reset(){this.state.transition("reset")}cancel(){this.state.transition("cancel")}delete(){this.state.transition("delete")}deleteAll(){this.state.transition("deleteAll")}deleteEphemeralAnnotations(){let t=!1;for(const[i,n]of this.annotationData.entries())_p(n)&&(this.annotationData.splice(i,1),t=!0);t&&this.recordActionAfterNextUpdate("Delete ephemeral annotations")}hideOverlays(){this.settingsDialog.hide(),this.toolbar.hideOverlays(),this.optionsToolbar.hideOverlays()}pushAnnotationState(t){this.ctx.interactionManager.pushState(t),this.ctx.tooltipManager.suppressTooltip("annotations")}popAnnotationState(t){this.ctx.interactionManager.popState(t),this.ctx.tooltipManager.unsuppressTooltip("annotations")}isAnnotationState(){return this.ctx.interactionManager.isState(Fr.Annotations)||this.ctx.interactionManager.isState(Fr.AnnotationsSelected)}update(t=cOe.PRE_SCENE_RENDER){this.ctx.updateService.update(t)}};D([ZD],tC.prototype,"enabled");D([ZD],tC.prototype,"toolbar");D([ZD],tC.prototype,"optionsToolbar");D([ZD],tC.prototype,"axesButtons");D([ZD],tC.prototype,"snap");var mOe=tC,{FONT_SIZE_RATIO:j_,ThemeSymbols:go}=N,ul={stroke:{$ref:"foregroundColor"},strokeOpacity:1,strokeWidth:2},ho={fill:go.DEFAULT_ANNOTATION_HANDLE_FILL,strokeOpacity:1,strokeWidth:2},_m={color:{$ref:"chartBackgroundColor"},fontSize:{$rem:j_.LARGE},fontFamily:{$ref:"fontFamily"}},L8={..._m,enabled:!0,fill:{$ref:"foregroundColor"},fontSize:{$ref:"fontSize"}},wk={..._m,textAlign:"left"},Hf={..._m,position:"top",alignment:"center",color:{$ref:"textColor"}},P8={..._m,position:"top",alignment:"center",color:{$ref:"textColor"}},U_={..._m,fontSize:{$ref:"fontSize"},color:go.DEFAULT_ANNOTATION_STATISTICS_COLOR,fill:go.DEFAULT_ANNOTATION_STATISTICS_FILL,stroke:go.DEFAULT_ANNOTATION_STATISTICS_STROKE,strokeWidth:1,divider:{stroke:go.DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE,strokeWidth:1,strokeOpacity:.5}},ZF={...ul,background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:{...ho},text:{...Hf},statistics:{...U_}},yOe={buttons:{$shallowSimple:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}]},padding:{$ref:"chartPadding"}},vOe={buttons:{$shallowSimple:[{icon:"text-annotation",tooltip:"toolbarAnnotationsTextColor",value:"text-color"},{icon:"line-color",tooltip:"toolbarAnnotationsLineColor",value:"line-color"},{icon:"fill-color",tooltip:"toolbarAnnotationsFillColor",value:"fill-color"},{tooltip:"toolbarAnnotationsTextSize",value:"text-size"},{tooltip:"toolbarAnnotationsLineStrokeWidth",value:"line-stroke-width"},{icon:"line-style-solid",tooltip:"toolbarAnnotationsLineStyle",value:"line-style-type"},{icon:"settings",tooltip:"toolbarAnnotationsSettings",value:"settings"},{icon:"unlocked",tooltip:"toolbarAnnotationsLock",ariaLabel:"toolbarAnnotationsLock",checkedOverrides:{icon:"locked",tooltip:"toolbarAnnotationsUnlock"},value:"lock"},{icon:"delete",tooltip:"toolbarAnnotationsDelete",value:"delete"}]}},bOe={enabled:!1,line:{...ul,handle:{...ho},text:{...Hf}},"horizontal-line":{...ul,handle:{...ho},axisLabel:{...L8},text:{...Hf}},"vertical-line":{...ul,handle:{...ho},axisLabel:{...L8},text:{...Hf}},"disjoint-channel":{...ul,background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:{...ho},text:{...P8}},"parallel-channel":{...ul,middle:{lineDash:[6,5],strokeWidth:1},background:{fill:{$ref:"foregroundColor"},fillOpacity:.075},handle:{...ho},text:{...P8}},"fibonacci-retracement":{...ul,strokes:go.DEFAULT_FIBONACCI_STROKES,rangeStroke:{$ref:"foregroundColor"},handle:{...ho},text:{...Hf,position:"center"},label:{..._m,color:void 0,fontSize:{$rem:j_.SMALLER}}},"fibonacci-retracement-trend-based":{...ul,strokes:go.DEFAULT_FIBONACCI_STROKES,rangeStroke:{$ref:"foregroundColor"},handle:{...ho},text:{...Hf,position:"center"},label:{..._m,color:void 0,fontSize:{$rem:j_.SMALLER}}},callout:{...ul,...wk,color:{$ref:"textColor"},handle:{...ho},fill:{$ref:"foregroundColor"},fillOpacity:.075},comment:{...wk,fontWeight:700,handle:{...ho},fill:{$ref:"foregroundColor"}},note:{...wk,color:go.DEFAULT_TEXTBOX_COLOR,fill:go.DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR,stroke:{$ref:"chartBackgroundColor"},strokeWidth:1,strokeOpacity:1,handle:{...ho},background:{fill:go.DEFAULT_TEXTBOX_FILL,stroke:go.DEFAULT_TEXTBOX_STROKE,strokeWidth:1}},text:{...wk,color:{$ref:"textColor"},handle:{...ho}},arrow:{...ul,handle:{...ho},text:{...Hf}},"arrow-up":{fill:{$palette:"up.fill"},handle:{...ho,stroke:{$ref:"foregroundColor"}}},"arrow-down":{fill:{$palette:"down.fill"},handle:{...ho,stroke:{$ref:"foregroundColor"}}},"date-range":{...ZF},"price-range":{...ZF},"date-price-range":{...ZF},"quick-date-price-range":{up:{...ul,fill:go.DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2,handle:{...ho},statistics:{...U_,color:"#fff",fill:go.DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...ul,stroke:go.DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE,fill:go.DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL,fillOpacity:.2,handle:{...ho,stroke:go.DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE},statistics:{...U_,color:"#fff",fill:go.DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}},axesButtons:{},toolbar:yOe,optionsToolbar:vOe},SOe={type:"root",optionsKey:"annotations",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new mOe(e),themeTemplate:{annotations:bOe}},{BaseProperties:COe,ObserveChanges:xOe,ProxyProperty:wOe,Property:Sy,calculatePlacement:DOe}=N,Xu=class extends COe{constructor(){super(),this.opacity=1,this.loadedSynchronously=!0,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),this.onLoad?.())},this.imageElement=nt("img"),this.imageElement.onload=this.onImageLoad,this.node=new N.Image(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(t,i){this.containerWidth=t,this.containerHeight=i;const n={width:t,height:i},s=DOe(this.imageElement.width,this.imageElement.height,n,this);return this.node.setProperties(this.complete?{visible:!0,opacity:this.opacity,...s}:{visible:!1}),s}};D([Sy],Xu.prototype,"top");D([Sy],Xu.prototype,"right");D([Sy],Xu.prototype,"bottom");D([Sy],Xu.prototype,"left");D([Sy],Xu.prototype,"width");D([Sy],Xu.prototype,"height");D([Sy],Xu.prototype,"opacity");D([wOe("imageElement.src"),xOe(e=>e.loadedSynchronously=e.complete)],Xu.prototype,"url");var{ActionOnSet:MOe,Property:AOe}=N,cre=class extends N.Background{constructor(){super(...arguments),this.image=new Xu}onLayoutComplete(e){if(super.onLayoutComplete(e),this.image){const{width:t,height:i}=e.chart;this.image.performLayout(t,i)}}onImageLoad(){this.ctx.updateService.update(N.ChartUpdateType.SCENE_RENDER)}};D([AOe,MOe({newValue(e){this.node.appendChild(e.node),e.onLoad=()=>this.onImageLoad()},oldValue(e){e.node.remove(),e.onLoad=void 0}})],cre.prototype,"image");var kOe={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new cre(e)},{Range:TOe,TranslatableGroup:IOe,BBox:ROe,Property:Lc,ZIndexMap:EOe,ChartAxisDirection:LOe,FillGradientDefaults:POe,FillImageDefaults:NOe,FillPatternDefaults:OOe,getShapeFill:FOe,InteractionState:Dk}=N,Ul=class extends N.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.id=To(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.fill="#c16068",this.fillOpacity=1,this.fillGradientDefaults=new POe,this.fillPatternDefaults=new OOe,this.fillImageDefaults=new NOe,this.bounds=new ROe(0,0,0,0),this.bandHighlightGroup=new IOe({name:"bandHighlight",zIndex:EOe.AXIS_BAND_HIGHLIGHT}),this.rangeNode=this.bandHighlightGroup.appendChild(new TOe),this.activeAxisHighlight=void 0,this.axisCtx=e.parent,this.hideBand(),e.domManager.addEventListener("focusin",({target:o})=>{const r=o instanceof HTMLElement&&e.domManager.contains(o,"series-area");this.bandHighlightGroup.visible&&!r&&(this.hideBand(),this.ctx.updateService.update(N.ChartUpdateType.PERFORM_LAYOUT))});const{widgets:{seriesWidget:t,seriesDragInterpreter:i},animationManager:n,eventsHub:s}=e;this.cleanup.register(e.scene.attachNode(this.bandHighlightGroup),t.addListener("mousemove",o=>this.onHoverLikeEvent(o)),t.addListener("mouseleave",()=>this.clearAllHighlight()),n.addListener("animation-start",()=>this.clearAllHighlight()),s.on("layout:complete",o=>this.layout(o)),s.on("series:focus-change",()=>this.onKeyPress()),s.on("zoom:pan-start",()=>this.clearAllHighlight()),s.on("zoom:change",()=>this.clearAllHighlight()),s.on("dom:resize",()=>this.clearAllHighlight()),s.on("axis:change",()=>this.axisChange())),i&&this.cleanup.register(i.events.on("drag-move",o=>this.onHoverLikeEvent(o)),i.events.on("click",o=>this.onClick(o)))}axisChange(){this.onHighlightChange()}isHover(e){return e.type==="mousemove"||e.type==="click"||e.device==="touch"&&this.ctx.chartService.touch.dragAction==="hover"}onClick(e){e.device==="touch"&&this.onHoverLikeEvent(e)}clearAllHighlight(){this.ctx.interactionManager.isState(Dk.Clickable)&&this.onHighlightChange()}onKeyPress(){this.ctx.interactionManager.isState(Dk.Default)&&this.onHighlightChange()}onHoverLikeEvent(e){const t=this.isHover(e)?Dk.Clickable:Dk.AnnotationsMoveable;this.ctx.interactionManager.isState(t)&&this.handleHoverHighlight(e)}handleHoverHighlight(e){if(!e)return;const{currentX:t,currentY:i}=e;this.onHighlightChange(this.axisCtx.pickBand({x:t,y:i}))}layout({series:{rect:e,visible:t},axes:i}){if(!t||!i||!this.enabled)return;const{position:n="left",axisId:s}=this.axisCtx,o=i.find(l=>l.id===s);if(!o)return;this.axisLayout=o,this.bounds=e.clone().grow(o.gridPadding,n);const{bandHighlightGroup:r,bounds:a}=this;r.translationX=Math.round(a.x),r.translationY=Math.round(a.y),this.updateBand()}updateBand(){const{rangeNode:e,stroke:t,strokeWidth:i,strokeOpacity:n,lineDash:s,fill:o,fillOpacity:r,fillGradientDefaults:a,fillPatternDefaults:l,fillImageDefaults:c,lineDashOffset:u,axisLayout:d}=this;d&&(e.stroke=t,e.strokeWidth=i,e.strokeOpacity=n,e.lineDash=s,e.lineDashOffset=u,e.fill=FOe(o,a,l,c),e.fillOpacity=r,e.startLine=!0,e.endLine=!0)}isVertical(){return this.axisCtx.direction===LOe.X}onHighlightChange(e){this.enabled&&(this.activeAxisHighlight=e,this.activeAxisHighlight?this.showBand():this.hideBand(),this.ctx.updateService.update(N.ChartUpdateType.SCENE_RENDER))}updateBandPosition(){const{rangeNode:e,bounds:t}=this,{band:i}=this.activeAxisHighlight??{};if(i==null){this.hideBand();return}let n=Math.min(...i),s=Math.max(...i);if(s-n<1){const o=(n+s)/2;n=o-.5,s=o+.5}this.isVertical()?(e.y1=0,e.y2=t.height,e.x1=n,e.x2=s,e.horizontal=!0):(e.y1=n,e.y2=s,e.x1=0,e.x2=t.width,e.horizontal=!1)}showBand(){this.updateBandPosition(),this.bandHighlightGroup.visible=!0}hideBand(){this.bandHighlightGroup.visible=!1}};D([Lc],Ul.prototype,"enabled");D([Lc],Ul.prototype,"stroke");D([Lc],Ul.prototype,"lineDash");D([Lc],Ul.prototype,"lineDashOffset");D([Lc],Ul.prototype,"strokeWidth");D([Lc],Ul.prototype,"strokeOpacity");D([Lc],Ul.prototype,"fill");D([Lc],Ul.prototype,"fillOpacity");D([Lc],Ul.prototype,"fillGradientDefaults");D([Lc],Ul.prototype,"fillPatternDefaults");D([Lc],Ul.prototype,"fillImageDefaults");var BOe={type:"axis-option",optionsKey:"bandHighlight",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","ordinal-time","unit-time","grouped-category"],moduleFactory:e=>new Ul(e),themeTemplate:{bandHighlight:{enabled:!1,strokeWidth:0,lineDash:[],fill:{$foregroundBackgroundMix:.05}}}},{ActionOnSet:_Oe,LayoutElement:zOe,Menu:GOe,Property:VOe}=N,qF=[{label:"toolbarSeriesTypeOHLC",icon:"ohlc-series",value:"ohlc"},{label:"toolbarSeriesTypeCandles",icon:"candlestick-series",value:"candlestick"},{label:"toolbarSeriesTypeHollowCandles",icon:"hollow-candlestick-series",value:"hollow-candlestick"},{label:"toolbarSeriesTypeLine",icon:"line-series",value:"line"},{label:"toolbarSeriesTypeStepLine",icon:"step-line-series",value:"step-line"},{label:"toolbarSeriesTypeHLC",icon:"hlc-series",value:"hlc"},{label:"toolbarSeriesTypeHighLow",icon:"high-low-series",value:"high-low"}],ure=class extends N.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.menu=new GOe(this.ctx,"chart-toolbar"),this.toolbar=e.sharedToolbar.getSharedToolbar("chartToolbar"),this.cleanup.register(this.toolbar.addToolbarListener("button-pressed",this.onButtonPressed.bind(this)),e.layoutManager.registerElement(zOe.ToolbarLeft,this.onLayoutStart.bind(this)),()=>this.toolbar.destroy())}onLayoutStart(e){this.enabled&&(this.updateButton(),this.toolbar.layout(e.layoutBox))}onButtonPressed({event:e,buttonBounds:t,buttonWidget:i}){this.menu.setAnchor({x:t.x+t.width+6,y:t.y}),this.menu.show(i,{items:qF,menuItemRole:"menuitemradio",ariaLabel:this.ctx.localeManager.t("toolbarSeriesTypeDropdown"),class:"ag-charts-chart-toolbar__menu",value:this.getChartType(),sourceEvent:e.sourceEvent,onPress:n=>{this.setChartType(n.value),this.hidePopover()},onHide:()=>{this.toolbar.clearActiveButton()}}),this.toolbar.toggleActiveButtonByIndex(0)}updateButton(){const e=this.getChartType(),t=qF.find(i=>i.value===e)?.icon;t!=null&&this.toolbar.updateButtons([{icon:t,tooltip:"toolbarSeriesTypeDropdown",value:"menu"}])}hidePopover(){this.toolbar.clearActiveButton(),this.menu.hide()}setChartType(e){const t={chartType:e};this.ctx.chartService.publicApi?.updateDelta(t).catch(i=>fe.error(i))}getChartType(){const e=this.ctx.chartService.publicApi?.getOptions()?.chartType;return e==null||!qF.some(t=>t.value===e)?"candlestick":e}};D([VOe,_Oe({changeValue(e){this.toolbar?.setHidden(!e)}})],ure.prototype,"enabled");var HOe={type:"root",optionsKey:"chartToolbar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new ure(e)};function WOe(e,t){return e==="always"?!0:e==="series-area"?t==="series-area"||t==="series-node":e===t}function dre(e,t,i){let n=!0;if(t.type==="separator"){const s=i.at(-1);n=s!==void 0&&s.type!=="separator"}if(n&&(n=WOe(t.showOn??"always",e)),n){const s=new UOe(t);return i.push(s),s}}function N8(e,t,i,n){t.isVisible(i)&&dre(e,t.builtins.items[i],n)}function jOe(e,t,i,n){const{builtins:s}=t;if(zxe(i,s.lists))for(const o of s.lists[i])N8(e,t,o,n);else N8(e,t,i,n)}function hre(e,t,i,n){for(const s of i)if(typeof s=="string")jOe(e,t,s,n);else{const o=dre(e,s,n);s.items&&o&&s.items.length>0&&hre(e,t,s.items,o.items)}n.at(-1)?.type==="separator"&&n.pop()}var UOe=class{constructor(e){this.type="action",this.showOn="always",this.label="",this.iconUrl=void 0,this.enabled=!0,this.items=[],this.action=void 0,e&&this.setOptions(e),this.items=[]}setField(e,t,i){t[e]=i}setOptions(e){let t;for(t in e)e[t]!==void 0&&this.setField(t,this,e[t])}},Cd="ag-charts-context-menu",{Property:yW,ContextMenuRegistry:Lx,callWithContext:Mk,getIconClassNames:$Oe}=N,QF="context-menu",o1=class extends N.BaseModuleInstance{constructor(e){if(super(),this.ctx=e,this.enabled=!0,this.darkTheme=!1,this.items=["defaults"],this.pickedNode=void 0,this.showEvent=void 0,this.x=0,this.y=0,this.collapsingSubMenus=0,this.menuWidget=new cR.MenuWidget,this.interactionManager=e.interactionManager,this.element=e.domManager.addChild("canvas-overlay",QF),this.element.classList.add(Cd),this.element.style.display="none",this.element.addEventListener("contextmenu",t=>t.preventDefault()),this.element.addEventListener("focusout",({relatedTarget:t})=>{this.collapsingSubMenus>0||(t==null||t instanceof Node&&!this.element.contains(t))&&this.hide()}),this.cleanup.register(()=>this.element.remove(),()=>this.menuWidget.destroy(),e.eventsHub.on("dom:hidden",()=>this.hide()),this.menuWidget.addListener("collapse-widget",()=>this.onCollapse())),this.menuWidget.addClass(`${Cd}__menu`),typeof MutationObserver<"u"){const t=new MutationObserver(()=>{this.element.contains(this.menuWidget.getElement())&&this.reposition()});t.observe(this.element,{childList:!0}),this.mutationObserver=t,this.cleanup.register(()=>t.disconnect())}this.ctx.contextMenuRegistry.builtins.items.download.action=()=>{const t=e.chartService.title;let i="image";t?.enabled&&(i=t.node.getPlainText().replace(/\.+/,"")),this.ctx.chartService.publicApi?.download({fileName:i}).catch(n=>{fe.error("Unable to download chart",n)})},this.cleanup.register(this.ctx.eventsHub.on("context-menu:complete",t=>this.onContext(t)))}expandItemsOptions(e){const t=[];return hre(e,this.ctx.contextMenuRegistry,this.items,t),t}onContext(e){if(!this.enabled)return;e.widgetEvent.sourceEvent.preventDefault(),this.showEvent=e.widgetEvent.sourceEvent,this.x=e.x,this.y=e.y,this.pickedNode=void 0,this.pickedLegendItem=void 0,Lx.check("series-node",e)?this.pickedNode=e.context.pickedNode:Lx.check("legend-item",e)&&(this.pickedLegendItem=e.context.legendItem);const t=this.expandItemsOptions(e.showOn);t.length!==0&&this.show(e.widgetEvent,t)}show(e,t){const{sourceEvent:i}=e;this.interactionManager.pushState(N.InteractionState.ContextMenu),this.element.style.display="block";const n=i.pointerType==="touch"?!1:void 0;n!==void 0&&this.ctx.chartService.overrideFocusVisible(n),this.createMenu(t),this.element.appendChild(this.menuWidget.getElement()),this.menuWidget.expand({sourceEvent:i,overrideFocusVisible:n})}hide(){this.menuWidget.collapse()}onCollapse(){this.interactionManager.popState(N.InteractionState.ContextMenu),this.menuWidget.getElement().remove(),this.element.style.display="none"}onSubMenuExpand(e,t){const i=e.getBounds();e.setFocusOverride(!0),e.getElement().insertAdjacentElement("afterend",t.getElement()),t.getElement().style.position="absolute";const n=this.ctx.domManager.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.right-s.right,r=s.left-n.left,{offsetWidth:a,offsetHeight:l}=t.getElement();let c=i.y;if(n.height>l){const u=n.bottom-s.top;u<l&&(c-=l-u)}if(o>=a)t.setBounds({x:i.x+i.width,y:c});else{const u=i.x-a,d=r+u;d>=0?t.setBounds({x:u,y:c}):t.setBounds({x:u-d,y:c})}}onSubMenuCollapse(e,t){e.setFocusOverride(void 0),this.collapsingSubMenus++,t.remove(),this.collapsingSubMenus--}createMenu(e){const{menuWidget:t}=this;t.clear(),t.setTabIndex(-1),this.createMenuItems(t,e)}createMenuItems(e,t){for(const i of t)switch(i.type){case"separator":{e.addSeparator().classList.add(`${Cd}__divider`);break}case"action":{if(i.items.length===0){const n=new cR.MenuItemWidget;this.initButtonElement(n,i),e.addChild(n)}else{const{subMenuButton:n,subMenu:s}=e.addSubMenu();s.addClass(`${Cd}__menu`),s.addListener("expand-widget",()=>this.onSubMenuExpand(n,s)),s.addListener("collapse-widget",()=>this.onSubMenuCollapse(n,s)),this.initButtonElement(n,i),this.createMenuItems(s,i.items)}break}default:throw new Error("unhandled case")}}createButtonOnClick(e,t){return Lx.checkCallback("legend-item",e,t)?i=>{const n=i.sourceEvent;if(this.pickedLegendItem){const{seriesId:s,itemId:o,label:r}=this.pickedLegendItem,{chartService:a}=this.ctx;if(typeof o!="string"){fe.error(`unexpected itemId type: [${typeof o}] (expected [string])`);return}const c=[a.series.find(d=>d.id===s)?.properties,a],u={type:"contextmenu",seriesId:s,itemId:o,text:Gt(r.text),event:n};Mk(c,t,u),this.hide()}else fe.error("legend item not found")}:Lx.checkCallback("series-area",e,t)?()=>{const i=this.ctx.chartService,n={type:"seriesContextMenuAction",event:this.showEvent};Mk(i,t,n),this.hide()}:Lx.checkCallback("series-node",e,t)?()=>{const{showEvent:i}=this,{chartService:n}=this.ctx,s=this.pickedNode,o=[s?.series.properties,n],r=s?.series.createNodeContextMenuActionEvent(i,s);r?Mk(o,t,r):fe.error("series node not found"),this.hide()}:()=>{const i=this.ctx.chartService,n={type:"contextMenuEvent",event:this.showEvent};Mk(i,t,n),this.hide()}}initTableCells(e){const t=nt("div"),i=nt("div"),n=nt("div");return t.classList.toggle(`${Cd}__icon`,!0),i.classList.toggle(`${Cd}__cell`,!0),n.classList.toggle(`${Cd}__cell`,!0),t.ariaHidden="true",i.role="presentation",n.ariaHidden="true",e.append(t,i,n),{cellIcon:t,cellLabel:i,cellArrow:n}}initButtonElement(e,t){e.addClass(`${Cd}__item`),e.setEnabled(t.enabled);const i=this.ctx.localeManager.t(t.label),n=`${Cd}__cellpadding`,{cellIcon:s,cellLabel:o,cellArrow:r}=this.initTableCells(e.getElement());if(o.textContent=i,o.classList.add(n),t.iconUrl!=null){const c=nt("img");c.src=t.iconUrl,s.append(c),s.classList.add(n)}if(t.items.length>0){const c=nt("span",$Oe("chevron-right"));r.append(c),r.classList.add(n)}const{showOn:a,action:l}=t;l!=null&&e.addListener("click",this.createButtonOnClick(a,l)),t.items.length===0&&(e.addListener("mouseleave",()=>e.setFocusOverride(!1)),e.addListener("mouseenter",()=>e.setFocusOverride(void 0)))}reposition(){let{x:e,y:t}=this;this.element.style.top="unset",this.element.style.bottom="unset";const i=this.ctx.domManager.getBoundingClientRect(),{offsetWidth:n,offsetHeight:s}=this.element;e=Je(0,e,i.width-n),t=Je(0,t,i.height-s),this.element.style.left=`${e}px`,this.element.style.top=`calc(${t}px - 0.5em)`}destroy(){super.destroy(),this.mutationObserver?.disconnect(),this.ctx.domManager.removeStyles(QF),this.ctx.domManager.removeChild("canvas-overlay",QF)}};D([yW],o1.prototype,"enabled");D([yW],o1.prototype,"darkTheme");D([yW],o1.prototype,"items");var KOe={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","topology","standalone"],optionsKey:"contextMenu",moduleFactory:e=>new o1(e),themeTemplate:{contextMenu:{enabled:!0,darkTheme:N.ThemeSymbols.IS_DARK_THEME}}};function v0(e){return typeof e?.datum=="object"?e.datum:null}var{FormatManager:YOe,BaseProperties:XOe,Property:iC}=N,ZOe="ag-charts-crosshair-label",Bg=class extends XOe{constructor(){super(...arguments),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0,this._cachedFormatter=void 0}formatValue(e,t,i,n){const{formatter:s,format:o}=this,{domain:r,boundSeries:a}=n;let l;if(s!=null){const c=n.type==="number"?n.fractionDigits:void 0,u=n.type==="date"?n.unit:void 0,d=n.type==="date"?n.step:void 0;l=e(s,{value:i,domain:r,fractionDigits:c,unit:u,step:d,boundSeries:a})}if(o!=null){let c=this._cachedFormatter;(c==null||c.type!==t||c.format!==o)&&(c={type:t,format:o,formatter:YOe.getFormatter(t,o)},this._cachedFormatter=c),l??(l=c.formatter?.(i))}return l==null?void 0:String(l)}};D([iC],Bg.prototype,"enabled");D([iC],Bg.prototype,"xOffset");D([iC],Bg.prototype,"yOffset");D([iC],Bg.prototype,"formatter");D([iC],Bg.prototype,"format");D([iC],Bg.prototype,"renderer");var qOe=class extends Bg{constructor(e,t,i){super(),this.domManager=e,this.id=To(this),this.element=e.addChild("canvas-overlay",`crosshair-label-${this.id}`),this.element.classList.add(ZOe),Pt(this.element,"aria-hidden",!0),this.element.dataset.key=t,this.element.dataset.axisId=i}show(e){const{element:t}=this,i=e.x+this.xOffset,n=e.y+this.yOffset;t.style.top=`${Math.round(n)}px`,t.style.left=`${Math.round(i)}px`,this.toggle(!0)}setLabelHtml({html:e,styles:t}){if(e!==void 0&&(this.element.innerHTML=e),t!==void 0){const i=this.element.children[0]??this.element;Object.assign(i.style,t)}}getBBox(){const{element:e}=this;return new N.BBox(e.clientLeft,e.clientTop,e.clientWidth,e.clientHeight)}toggle(e){this.element.classList.toggle("ag-charts-crosshair-label--hidden",!e)}destroy(){this.domManager.removeChild("canvas-overlay",`crosshair-label-${this.id}`)}toLabelHtml(e,t){if(typeof e=="string")return{html:e,styles:{}};t=t??{};const{text:i=t.text??"",color:n=t.color,backgroundColor:s=t.backgroundColor,opacity:o=t.opacity??1}=e,r={opacity:o,"background-color":s?.toLowerCase(),color:n};return{html:`<div class="ag-charts-crosshair-label-content">
                    <span>${i}</span>
                </div>`,styles:r}}},{Group:QOe,TranslatableGroup:JOe,Line:eFe,BBox:O8,InteractionState:Ak,Property:_g,ZIndexMap:F8,ChartAxisDirection:B8}=N,Th=class extends N.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.id=To(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.label=new Bg,this.seriesRect=new O8(0,0,0,0),this.bounds=new O8(0,0,0,0),this.crosshairGroup=new JOe({name:"crosshairs",zIndex:F8.SERIES_CROSSHAIR}),this.lineGroup=this.crosshairGroup.appendChild(new QOe({name:`${this.id}-crosshair-lines`,zIndex:F8.SERIES_CROSSHAIR})),this.lineGroupSelection=N.Selection.select(this.lineGroup,eFe,!1),this.activeHighlight=void 0,this.axisCtx=e.parent,this.labels={},this.hideCrosshairs(),e.domManager.addEventListener("focusin",({target:i})=>{const n=i instanceof HTMLElement&&e.domManager.contains(i,"series-area");this.crosshairGroup.visible&&!n&&(this.hideCrosshairs(),this.ctx.updateService.update(N.ChartUpdateType.PERFORM_LAYOUT))});const{seriesDragInterpreter:t}=e.widgets;this.cleanup.register(e.scene.attachNode(this.crosshairGroup),e.widgets.seriesWidget.addListener("mousemove",i=>this.onMouseHoverLike(i)),e.widgets.seriesWidget.addListener("mouseleave",()=>this.onMouseOut()),e.eventsHub.on("series:focus-change",()=>this.onKeyPress()),e.eventsHub.on("zoom:pan-start",()=>this.onMouseOut()),e.eventsHub.on("zoom:change",()=>this.onMouseOut()),e.eventsHub.on("highlight:change",i=>this.onHighlightChange(i)),e.eventsHub.on("layout:complete",i=>this.layout(i)),()=>{for(const i of Object.values(this.labels))i.destroy()}),t&&this.cleanup.register(t.events.on("drag-move",i=>this.onMouseHoverLike(i)),t.events.on("click",i=>this.onClick(i)))}layout({series:{rect:e,visible:t},axes:i}){if(!t||!i||!this.enabled)return;this.seriesRect=e;const{position:n="left",axisId:s}=this.axisCtx,o=i.find(c=>c.id===s);if(!o)return;this.axisLayout=o,this.bounds=e.clone().grow(o.gridPadding+o.seriesAreaPadding,n);const{crosshairGroup:r,bounds:a}=this;r.translationX=Math.round(a.x),r.translationY=Math.round(a.y);const l=["pointer",...this.axisCtx.seriesKeyProperties()];this.updateSelections(l),this.updateLines(),this.updateLabels(l)}updateSelections(e){this.lineGroupSelection.update(e,void 0,t=>t)}updateLabels(e){const{labels:t,ctx:i}=this;for(const n of e)this.label.enabled&&(t[n]??(t[n]=new qOe(i.domManager,n,this.axisCtx.axisId))),t[n]&&this.updateLabel(t[n])}updateLabel(e){const{enabled:t,xOffset:i,yOffset:n,format:s,renderer:o}=this.label;e.enabled=t,e.xOffset=i,e.yOffset=n,e.format=s,e.renderer=o}updateLines(){const{lineGroupSelection:e,bounds:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,axisLayout:a}=this;if(!a)return;const l=this.isVertical();e.each(c=>{c.stroke=i,c.strokeWidth=n,c.strokeOpacity=s,c.lineDash=o,c.lineDashOffset=r,c.y1=0,c.y2=l?t.height:0,c.x1=0,c.x2=l?0:t.width})}isVertical(){return this.axisCtx.direction===B8.X}isHover(e){return e.type==="mousemove"||e.type==="click"||e.device==="touch"&&this.ctx.chartService.touch.dragAction==="hover"}formatValue(e){return Gt(this.axisCtx.formatScaleValue(e,"crosshair",this.label))}onClick(e){e.device==="touch"&&this.onMouseHoverLike(e)}onMouseHoverLike(e){if(!this.enabled||this.snap)return;const t=this.isHover(e)?Ak.Clickable:Ak.AnnotationsMoveable;this.ctx.interactionManager.isState(t)&&(this.updatePositions(this.getData(e)),this.crosshairGroup.visible=!0,this.ctx.updateService.update(N.ChartUpdateType.SCENE_RENDER))}onMouseOut(){this.ctx.interactionManager.isState(Ak.Clickable)&&(this.hideCrosshairs(),this.ctx.updateService.update(N.ChartUpdateType.SCENE_RENDER))}onKeyPress(){this.enabled&&!this.snap&&this.ctx.interactionManager.isState(Ak.Default)&&this.hideCrosshairs()}onHighlightChange(e){if(!this.enabled)return;const{crosshairGroup:t,axisCtx:i}=this,{datum:n,series:s}=e.currentHighlight??{},o=n&&(s?.axes.x?.id===i.axisId||s?.axes.y?.id===i.axisId);if(this.activeHighlight=o?e.currentHighlight:void 0,!this.activeHighlight)this.hideCrosshairs();else if(this.snap){const r=this.getActiveHighlightData(this.activeHighlight);this.updatePositions(r),t.visible=!0}}isInRange(e){return this.axisCtx.inRange(e)}updatePositions(e){const{seriesRect:t,lineGroupSelection:i}=this;i.each((n,s)=>{const o=e[s];if(!o){n.visible=!1,this.hideLabel(s);return}n.visible=!0;const{value:r,position:a}=o;let l=0,c=0;this.isVertical()?(l=a,n.x=Math.round(l)):(c=a,n.y=Math.round(c)),this.label.enabled?this.showLabel(l+t.x,c+t.y,r,s):this.hideLabel(s)})}getData(e){const{axisCtx:t}=this,i="pointer",{xKey:n="",yKey:s=""}=this.activeHighlight??{},{currentX:o,currentY:r}=e,a=v0(this.activeHighlight),l=this.isVertical(),c=l?o:r;let u=a?.[l?n:s]??"";return t.continuous&&(u=t.scaleInvert(c)),{[i]:{position:c,value:u}}}getActiveHighlightData(e){const{axisCtx:t}=this,{series:i,xKey:n="",aggregatedValue:s,cumulativeValue:o,midPoint:r}=e,a=v0(e),l=i.getKeyProperties(t.direction),c=(t.scale.bandwidth??0)/2,u=i.axes[t.direction]?.id===t.axisId,d=l.includes("yKey")&&u,p=l.includes("xKey")&&u,f=s??o;if(d&&f!==void 0){const v=t.scale.convert(f)+c;return this.isInRange(v)?{yKey:{value:f,position:v}}:{}}if(p){const v=(this.isVertical()?r?.x:r?.y)??0,b=t.continuous?t.scaleInvert(v):a?.[n];return this.isInRange(v)?{xKey:{value:b,position:v}}:{}}const m={};for(const v of l){const b=i.properties[v],C=a?.[b],x=t.scale.convert(C)+c;this.isInRange(x)&&(m[v]={value:C,position:x})}return m}getLabelHtml(e,t){const i=this.axisLayout?.label?.fractionDigits??0,n={text:this.formatValue(e)};return this.label.renderer?t.toLabelHtml(this.label.renderer({value:e,fractionDigits:i}),n):t.toLabelHtml(n)}showLabel(e,t,i,n){if(!this.axisLayout)return;const{bounds:s}=this,o=this.labels[n],r=this.getLabelHtml(i,o);o.setLabelHtml(r);const{width:a,height:l}=o.getBBox(),c=this.axisCtx.position;let u=this.axisLayout.label.spacing+this.axisLayout.tickSize;this.axisCtx.direction===B8.X?(u-=4,o.show({x:e-a/2,y:c==="bottom"?s.y+s.height+u:s.y-l-u})):(u-=8,o.show({x:c==="right"?s.x+s.width+u:s.x-a-u,y:t-l/2}))}hideCrosshairs(){this.crosshairGroup.visible=!1;for(const e of Object.keys(this.labels))this.hideLabel(e)}hideLabel(e){this.labels[e]?.toggle(!1)}};D([_g],Th.prototype,"enabled");D([_g],Th.prototype,"stroke");D([_g],Th.prototype,"lineDash");D([_g],Th.prototype,"lineDashOffset");D([_g],Th.prototype,"strokeWidth");D([_g],Th.prototype,"strokeOpacity");D([_g],Th.prototype,"snap");D([_g],Th.prototype,"label");var tFe={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","time","unit-time","ordinal-time","number","log"],moduleFactory:e=>new Th(e),themeTemplate:{crosshair:{snap:!0,stroke:{$ref:"subtleTextColor"},strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}},{ActionOnSet:qD,Property:pre}=N,nC=class extends N.BaseModuleInstance{constructor(e){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=e.dataService}updateCallback(e,t){this.dataService&&(e&&t!=null?this.dataService.updateCallback(t):this.dataService.clearCallback())}};D([qD({newValue(e){this.updateCallback(e,this.getData)}}),pre],nC.prototype,"enabled");D([qD({newValue(e){this.updateCallback(this.enabled,e)}}),pre],nC.prototype,"getData");D([qD({newValue(e){this.dataService.requestThrottle=e}})],nC.prototype,"requestThrottle");D([qD({newValue(e){this.dataService.dispatchThrottle=e}})],nC.prototype,"updateThrottle");D([qD({newValue(e){this.dataService.dispatchOnlyLatest=!e}})],nC.prototype,"updateDuringInteraction");var iFe={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new nC(e),themeTemplate:{dataSource:{enabled:!1}}},{nearestSquared:nFe,nearestSquaredInContainer:sFe,partialAssign:oFe,mergeDefaults:_8,BBox:Ep}=N,rFe=class{constructor(e){this.components=e,this.union=Ep.merge(e)}containsPoint(e,t){if(!this.union.containsPoint(e,t))return!1;for(const i of this.components)if(i.containsPoint(e,t))return!0;return!1}},aFe=class extends N.Group{constructor(){super(),this.capLength=Number.NaN,this._datum=void 0,this.whiskerPath=new N.Path,this.capsPath=new N.Path,this.bboxes=new rFe([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(e){this._datum=e}calculateCapLength(e,t){const{lengthRatio:i=1,length:n}=e,{lengthRatioMultiplier:s,lengthMax:o}=t,r=n??i*s;return Math.min(r,o)}getItemStylerParams(e,t,i,n){const{datum:s}=this;if(s==null||e.itemStyler==null)return;const{xLowerKey:o,xUpperKey:r,yLowerKey:a,yUpperKey:l}=e;return{...t,datum:s.datum,seriesId:s.series.id,xKey:s.xKey,yKey:s.yKey,xLowerKey:o,xUpperKey:r,yLowerKey:a,yUpperKey:l,highlighted:i,highlightState:n}}formatStyles(e,t,i,n,s){let{cap:o,...r}=e;const a=this.getItemStylerParams(t,e,n,s);if(a!=null&&t.itemStyler!=null){const l=i.callWithContext(t.itemStyler,a);r=_8(l,r),o=_8(l?.cap,l,o)}return{whiskerStyle:r,capsStyle:o}}applyStyling(e,t){oFe(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],e,t)}update(e,t,i,n,s){if(this.datum===void 0)return;const{whiskerStyle:o,capsStyle:r}=this.formatStyles(e,t,i,n,s),{xBar:a,yBar:l,capDefaults:c}=this.datum,u=this.whiskerPath;this.applyStyling(u,o),u.path.clear(!0),l!==void 0&&(u.path.moveTo(l.lowerPoint.x,l.lowerPoint.y),u.path.lineTo(l.upperPoint.x,l.upperPoint.y)),a!==void 0&&(u.path.moveTo(a.lowerPoint.x,a.lowerPoint.y),u.path.lineTo(a.upperPoint.x,a.upperPoint.y)),u.path.closePath(),this.capLength=this.calculateCapLength(r??{},c);const d=this.capLength/2,p=this.capsPath;this.applyStyling(p,r),p.path.clear(!0),l!==void 0&&(p.path.moveTo(l.lowerPoint.x-d,l.lowerPoint.y),p.path.lineTo(l.lowerPoint.x+d,l.lowerPoint.y),p.path.moveTo(l.upperPoint.x-d,l.upperPoint.y),p.path.lineTo(l.upperPoint.x+d,l.upperPoint.y)),a!==void 0&&(p.path.moveTo(a.lowerPoint.x,a.lowerPoint.y-d),p.path.lineTo(a.lowerPoint.x,a.lowerPoint.y+d),p.path.moveTo(a.upperPoint.x,a.upperPoint.y-d),p.path.lineTo(a.upperPoint.x,a.upperPoint.y+d)),p.path.closePath()}updateBBoxes(){const{capLength:e,whiskerPath:t,capsPath:i}=this,{yBar:n,xBar:s}=this.datum??{},o=e/2,r=[];if(n!==void 0){const a=n.lowerPoint.y-n.upperPoint.y;r.push(new Ep(n.lowerPoint.x,n.upperPoint.y,t.strokeWidth,a),new Ep(n.lowerPoint.x-o,n.lowerPoint.y,e,i.strokeWidth),new Ep(n.upperPoint.x-o,n.upperPoint.y,e,i.strokeWidth))}if(s!==void 0){const a=s.upperPoint.x-s.lowerPoint.x;r.push(new Ep(s.lowerPoint.x,s.upperPoint.y,a,t.strokeWidth),new Ep(s.lowerPoint.x,s.lowerPoint.y-o,i.strokeWidth,e),new Ep(s.upperPoint.x,s.upperPoint.y-o,i.strokeWidth,e))}this.bboxes.components=r,this.bboxes.union=Ep.merge(r)}containsPoint(e,t){return this.bboxes.containsPoint(e,t)}pickNode(e,t){return this.containsPoint(e,t)?this:void 0}nearestSquared(e,t,i){const{bboxes:n}=this;if(n.union.distanceSquared(e,t)>i)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:s}=nFe(e,t,n.components);return{nearest:this,distanceSquared:s}}},lFe=class extends N.Group{nearestSquared(e,t){const{nearest:i,distanceSquared:n}=sFe(e,t,{children:this.children()});if(i!==void 0&&!Number.isNaN(n))return{datum:i.datum,distanceSquared:n}}},{BaseProperties:gre,Property:nn}=N,Ih=class extends gre{};D([nn],Ih.prototype,"visible");D([nn],Ih.prototype,"stroke");D([nn],Ih.prototype,"strokeWidth");D([nn],Ih.prototype,"strokeOpacity");D([nn],Ih.prototype,"lineDash");D([nn],Ih.prototype,"lineDashOffset");D([nn],Ih.prototype,"length");D([nn],Ih.prototype,"lengthRatio");var Eo=class extends gre{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new Ih}};D([nn],Eo.prototype,"yLowerKey");D([nn],Eo.prototype,"yLowerName");D([nn],Eo.prototype,"yUpperKey");D([nn],Eo.prototype,"yUpperName");D([nn],Eo.prototype,"xLowerKey");D([nn],Eo.prototype,"xLowerName");D([nn],Eo.prototype,"xUpperKey");D([nn],Eo.prototype,"xUpperName");D([nn],Eo.prototype,"visible");D([nn],Eo.prototype,"stroke");D([nn],Eo.prototype,"strokeWidth");D([nn],Eo.prototype,"strokeOpacity");D([nn],Eo.prototype,"lineDash");D([nn],Eo.prototype,"lineDashOffset");D([nn],Eo.prototype,"itemStyler");D([nn],Eo.prototype,"cap");var{fixNumericExtent:cFe,groupAccumulativeValueProperty:uFe,mergeDefaults:dFe,valueProperty:kk,ChartAxisDirection:Px}=N;function hFe(e){for(const t of XB)if(t===e.series.type)return e.series;throw new Error(`AG Charts - unsupported series type '${e.series.type}', error bars supported series types: ${XB.join(", ")}`)}var pFe=class ow extends N.BaseModuleInstance{constructor(t){super(),this.properties=new Eo;const i=hFe(t),{annotationGroup:n,annotationSelections:s}=i;this.cartesianSeries=i,this.groupNode=new lFe({name:`${n.id}-errorBars`}),n.appendChild(this.groupNode),this.selection=N.Selection.select(this.groupNode,()=>this.errorBarFactory()),s.add(this.selection),i.addEventListener("seriesVisibilityChange",o=>this.onToggleSeriesItem(o)),this.cleanup.register(i.events.on("data-processed",o=>this.onDataProcessed(o)),i.events.on("data-update",o=>this.onDataUpdate(o)),t.eventsHub.on("highlight:change",o=>this.onHighlightChange(o)),()=>this.groupNode.remove(),()=>s.delete(this.selection))}hasErrorBars(){const{xLowerKey:t,xUpperKey:i,yLowerKey:n,yUpperKey:s}=this.properties;return In(t)&&In(i)||In(n)&&In(s)}isStacked(){const t=this.cartesianSeries.seriesGrouping?.stackCount;return t==null?!1:t>0}getUnstackPropertyDefinition(t){const i=[],{xLowerKey:n,xUpperKey:s,yLowerKey:o,yUpperKey:r,xErrorsID:a,yErrorsID:l}=this.getMaybeFlippedKeys(),{xScaleType:c,yScaleType:u}=t;return o!=null&&r!=null&&i.push(kk(o,u,{id:`${l}-lower`}),kk(r,u,{id:`${l}-upper`})),n!=null&&s!=null&&i.push(kk(n,c,{id:`${a}-lower`}),kk(s,c,{id:`${a}-upper`})),i}getStackPropertyDefinition(t){const i=[],{cartesianSeries:n}=this,{xLowerKey:s,xUpperKey:o,yLowerKey:r,yUpperKey:a,xErrorsID:l,yErrorsID:c}=this.getMaybeFlippedKeys(),{xScaleType:u,yScaleType:d}=t,p=n.seriesGrouping?.groupIndex??n.id,f={invalidValue:null,missingValue:0,separateNegative:!0,...n.visible?{}:{forceValue:0}},m=(b,C,x,w)=>uFe(b,"normal",{id:`${C}-${x}`,groupId:`errorGroup-${p}-${x}`,...f},w),v=(b,C,x,w)=>{i.push(...m(b,x,"lower",w),...m(C,x,"upper",w))};return r!=null&&a!=null&&v(r,a,c,d),s!=null&&o!=null&&v(s,o,l,u),i}getPropertyDefinitions(t){return this.isStacked()?this.getStackPropertyDefinition(t):this.getUnstackPropertyDefinition(t)}onDataProcessed(t){this.dataModel=t.dataModel,this.processedData=t.processedData}getDomain(t){const{xLowerKey:i,xUpperKey:n,xErrorsID:s,yLowerKey:o,yUpperKey:r,yErrorsID:a}=this.getMaybeFlippedKeys();if(t===Px.X?In(i)&&In(n):In(o)&&In(r)){const{dataModel:c,processedData:u,cartesianSeries:d}=this;if(c!=null&&u!=null){const p={x:s,y:a}[t],f=c.getDomain(d,`${p}-lower`,"value",u),m=c.getDomain(d,`${p}-upper`,"value",u),v=[Math.min(...f,...m),Math.max(...f,...m)];return cFe(v)}}return[]}onDataUpdate(t){this.dataModel=t.dataModel,this.processedData=t.processedData,In(t.dataModel)&&In(t.processedData)&&(this.createNodeData(),this.update())}getNodeData(){return this.hasErrorBars()?this.cartesianSeries.contextNodeData?.nodeData:void 0}createNodeData(){const t=this.getNodeData(),i=this.cartesianSeries.axes[Px.X]?.scale,n=this.cartesianSeries.axes[Px.Y]?.scale;if(!(!i||!n||!t))for(let s=0;s<t.length;s++){const{midPoint:o,xLower:r,xUpper:a,yLower:l,yUpper:c}=this.getDatum(t,s);if(o!=null){let u,d;In(r)&&In(a)&&(u={lowerPoint:{x:this.convert(i,r),y:o.y},upperPoint:{x:this.convert(i,a),y:o.y}}),In(l)&&In(c)&&(d={lowerPoint:{x:o.x,y:this.convert(n,l)},upperPoint:{x:o.x,y:this.convert(n,c)}}),t[s].xBar=u,t[s].yBar=d}}}getMaybeFlippedKeys(){let{xLowerKey:t,xUpperKey:i,yLowerKey:n,yUpperKey:s}=this.properties,[o,r]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([t,n]=[n,t],[i,s]=[s,i],[o,r]=[r,o]),{xLowerKey:t,xUpperKey:i,xErrorsID:o,yLowerKey:n,yUpperKey:s,yErrorsID:r}}static getDatumKey(t,i,n){if(i==null)return;const o=v0(t)?.[i];if(o!=null){if(typeof o!="number"){fe.warnOnce(`Found [${i}] error value of type ${typeof o}. Expected number type`);return}return o+n}}getDatum(t,i){const{xLowerKey:n,xUpperKey:s,yLowerKey:o,yUpperKey:r}=this.getMaybeFlippedKeys(),a=t[i],l=a.cumulativeValue==null||!this.isStacked()?0:a.cumulativeValue-a.yValue,[c,u]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:a.midPoint,xLower:ow.getDatumKey(a,n,c),xUpper:ow.getDatumKey(a,s,c),yLower:ow.getDatumKey(a,o,u),yUpper:ow.getDatumKey(a,r,u)}}convert(t,i){const n=(t.bandwidth??0)/2;return t.convert(i)+n}update(){const t=this.getNodeData();t!=null&&(this.selection.update(t),this.selection.each((i,n,s)=>this.updateNode(i,n,s)))}updateNode(t,i,n){t.datum=i,t.update(this.getDefaultStyle(),this.properties,this.cartesianSeries,!1,"none"),t.updateBBoxes()}pickNodeExact(t){const{x:i,y:n}=t,s=this.groupNode.pickNode(i,n);if(s!=null)return{datum:s.datum,distanceSquared:0}}pickNodeNearest(t){return this.groupNode.nearestSquared(t.x,t.y)}pickNodeMainAxisFirst(t,i){let n,s=[1/0,1/0];const o=[t.x,t.y];i===Px.Y&&o.reverse();for(const r of this.groupNode.children()){const a=r.getBBox(),l=[a.x+a.width/2,a.y+a.height/2];i===Px.Y&&l.reverse();const c=[];for(let u=0;u<o.length;u++)c.push(Math.abs(o[u]-l[u]));(c[0]<s[0]||c[0]==s[0]&&c[1]<s[1])&&(n=r.datum,s=c)}if(n)return{datum:n,distanceSquared:Math.pow(s[0],2)+Math.pow(s[1],2)}}getTooltipParams(){const{xLowerKey:t,xUpperKey:i,yLowerKey:n,yUpperKey:s,xLowerName:o=t,xUpperName:r=i,yLowerName:a=n,yUpperName:l=s}=this.properties;return{xLowerKey:t,xLowerName:o,xUpperKey:i,xUpperName:r,yLowerKey:n,yLowerName:a,yUpperKey:s,yUpperName:l}}onToggleSeriesItem(t){this.groupNode.visible=t.visible}makeStyle(t){return{visible:t.visible,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,stroke:t.stroke,strokeWidth:t.strokeWidth,strokeOpacity:t.strokeOpacity,cap:dFe(this.properties.cap,t)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(t,i,n){const s=this.getNodeData();if(s!=null){for(let o=0;o<s.length;o++)if(t===s[o]){this.selection.at(o)?.update(i,this.properties,this.cartesianSeries,n,n?"highlighted-item":"unhighlighted-item");break}}}onHighlightChange(t){const{previousHighlight:i,currentHighlight:n}=t;n?.series===this.cartesianSeries&&this.restyleHighlightChange(n,this.getHighlightStyle(),!0),i?.series===this.cartesianSeries&&this.restyleHighlightChange(i,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new aFe}getWhiskerProperties(){const{stroke:t,strokeWidth:i,visible:n,strokeOpacity:s,lineDash:o,lineDashOffset:r}=this.properties;return{stroke:t,strokeWidth:i,visible:n,strokeOpacity:s,lineDash:o,lineDashOffset:r}}},gFe={series:{errorBar:{visible:!0,stroke:{$ref:"foregroundColor"},strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},fFe={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:XB,moduleFactory:e=>new pFe(e),themeTemplate:gFe},{ZIndexMap:mFe,ActionOnSet:yFe,Property:vW,ProxyPropertyOnWrite:fre}=N,r1=class extends N.Background{constructor(){super(...arguments),this.image=new Xu,this.fill="transparent",this.fillOpacity=void 0}createNode(){return new N.Group({name:"foreground",zIndex:mFe.FOREGROUND})}onLayoutComplete(e){super.onLayoutComplete(e);const{width:t,height:i}=e.chart;let n={x:0,y:0,width:t,height:i};this.image&&(n=this.image.performLayout(t,i)),this.text&&this.updateTextNode(n)}onImageLoad(){this.ctx.updateService.update(N.ChartUpdateType.SCENE_RENDER)}updateTextNode(e){const{textNode:t}=this;t.fontWeight="bold",t.fontFamily="Impact, sans-serif",t.fontSize=19,t.opacity=.7,t.fill="#9b9b9b",t.textBaseline="top";const i=this.textNode.getBBox(),n=10;t.x=e.x+e.width/2-i.width/2,t.y=e.y+e.height+n}};D([vW,yFe({newValue(e){this.node.appendChild(e.node),e.onLoad=()=>this.onImageLoad()},oldValue(e){e.node.remove(),e.onLoad=void 0}})],r1.prototype,"image");D([vW,fre("rectNode","fill")],r1.prototype,"fill");D([vW,fre("rectNode","fillOpacity")],r1.prototype,"fillOpacity");var vFe={type:"root",optionsKey:"foreground",packageType:"enterprise",chartTypes:["cartesian","polar","topology","standalone"],moduleFactory:e=>new r1(e)},{TranslatableGroup:bFe,SceneChangeDetection:mre}=N,bW=class extends bFe{constructor(){super(...arguments),this.inset=0,this.cornerRadius=0}applyClip(e,t){const{cornerRadius:i,inset:n}=this,{x:s,y:o,width:r,height:a}=t,l=new Path2D;l.roundRect(s+n,o+n,r-2*n,a-2*n,i),e.clip(l)}};D([mre()],bW.prototype,"inset");D([mre()],bW.prototype,"cornerRadius");var{Property:SW,ZIndexMap:Ef,ActionOnSet:yre,CategoryAxis:SFe,Padding:CFe,Group:Lf,BBox:z8,ProxyProperty:vre,stackCartesianSeries:xFe}=N,CW=class{constructor(){this.top=0,this.bottom=0}};D([SW],CW.prototype,"top");D([SW],CW.prototype,"bottom");var sC=class extends N.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.padding=new CW,this.root=new Lf({name:"root"}),this.seriesRoot=this.root.appendChild(new bW({name:"Series-root",zIndex:Ef.SERIES_LAYER,renderToOffscreenCanvas:!0})),this.axisGridGroup=this.root.appendChild(new Lf({name:"Axes-Grids",zIndex:Ef.AXIS_GRID})),this.axisGroup=this.root.appendChild(new Lf({name:"Axes-Grids",zIndex:Ef.AXIS_GRID})),this.axisLabelGroup=this.root.appendChild(new Lf({name:"Axes-Labels",zIndex:Ef.SERIES_LABEL})),this.axisCrosslineRangeGroup=this.root.appendChild(new Lf({name:"Axes-Crosslines-Range",zIndex:Ef.SERIES_CROSSLINE_RANGE})),this.axisCrosslineLineGroup=this.root.appendChild(new Lf({name:"Axes-Crosslines-Line",zIndex:Ef.SERIES_CROSSLINE_LINE})),this.axisCrosslineLabelGroup=this.root.appendChild(new Lf({name:"Axes-Crosslines-Label",zIndex:Ef.SERIES_LABEL})),this.data=[],this._destroyed=!1,this.miniChartAnimationPhase="initial",this.seriesRect=void 0,this.axes=[],this.series=[]}destroy(){if(!this._destroyed){this.destroySeries(this.series);for(const e of this.axes)e.destroy();this.axes=[],this._destroyed=!0}}onSeriesChange(e,t){const i=t?.filter(n=>!e.includes(n))??[];this.destroySeries(i);for(const n of e)t?.includes(n)||(n.attachSeries(this.seriesRoot,this.seriesRoot,void 0),n.chart={},Object.defineProperty(n.chart,"mode",{get:()=>"standalone"}),Object.defineProperty(n.chart,"isMiniChart",{get:()=>!0}),Object.defineProperty(n.chart,"seriesRect",{get:()=>this.seriesRect}),n.resetAnimation(this.miniChartAnimationPhase==="initial"?"initial":"disabled"));this.seriesRect=void 0}destroySeries(e){if(e)for(const t of e)t.destroy(),t.detachSeries(this.seriesRoot,this.seriesRoot,void 0),t.chart=void 0}assignSeriesToAxes(){for(const e of this.axes)e.boundSeries=this.series.filter(t=>t.axes[e.direction]===e)}assignAxesToSeries(){const e={};for(const t of this.axes){const i=t.direction;(e[i]??(e[i]=[])).push(t)}for(const t of this.series)for(const i of t.directions){const n=e[i];if(!n){fe.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);continue}const s=t.getKeys(i),o=this.findMatchingAxis(n,s);if(!o){fe.warnOnce(`no matching axis for direction [${i}] and keys [${s}]; check series and axes configuration.`);continue}t.axes[i]=o}}findMatchingAxis(e,t){for(const i of e){if(!i.keys.length)return i;if(t){for(const n of t)if(i.keys.includes(n))return i}}}updateData(e){for(const t of this.series)t.setChartData(e);this.miniChartAnimationPhase==="initial"&&this.ctx.animationManager.onBatchStop(()=>{this.miniChartAnimationPhase="ready";for(const t of this.series)t.resetAnimation("disabled")})}async processData(e){this.series.some(t=>t.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes()),await Promise.all(this.series.map(async t=>(t.resetDatumCallbackCache(),t.processData(e))));for(const t of this.axes)t.processData()}computeAxisPadding(){const e=new CFe;if(!this.enabled)return e;for(const{position:t,thickness:i,line:n,label:s}of this.axes){if(t==null)continue;let o;i?o=i:o=(n.enabled?n.width:0)+(s.enabled?fc(s.fontSize??0)+s.spacing:0),e[t]=Math.ceil(o)}return e}async layout(e,t){var i;const{padding:n}=this,s=this.seriesRect!=null,o=new z8(0,0,e,t-(n.top+n.bottom)),r=this.seriesRect==null||this.seriesRect.width!==e||this.seriesRect.height!==t;this.seriesRect=o,this.seriesRoot.translationY=n.top,this.seriesRoot.setClipRectCanvasSpace(new z8(0,-n.top,e,t));for(const a of this.axes){const{position:l="left"}=a;switch(l){case"top":case"bottom":a.range=[0,o.width],a.gridLength=o.height;break;case"right":case"left":{const c=a instanceof SFe;a.range=c?[0,o.height]:[o.height,0],a.gridLength=o.width;break}}if(a.gridPadding=0,a.translation.x=0,a.translation.y=0,l==="right"?a.translation.x=e:l==="bottom"&&(a.translation.y=t),s||a.resetAnimation("initial"),a.crossLines)for(const c of a.crossLines)c instanceof N.CartesianCrossLine&&(c.position=a.position??"top",(i=c.label).parallel??(i.parallel=a.label?.parallel));a.calculateLayout(),a.update()}r&&xFe(this.series),await Promise.all(this.series.map(async a=>a.update({seriesRect:o})))}};D([SW],sC.prototype,"enabled");D([vre(["seriesRoot","inset"])],sC.prototype,"inset");D([vre(["seriesRoot","cornerRadius"])],sC.prototype,"cornerRadius");D([yre({changeValue(e,t=[]){const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const n of t)e.includes(n)||(n.detachAxis(),n.destroy());for(const n of e)t?.includes(n)||n.attachAxis(i)}})],sC.prototype,"axes");D([yre({changeValue(e,t){this.onSeriesChange(e,t)}})],sC.prototype,"series");var{SliderWidget:G8}=N,wFe=class{constructor(e,t){this.ctx=e,this.sliderHandlers=t,this._min=0,this._max=1,this.minRange=.001,this.dragStartX=0,this.ctx=e,this.toolbar=e.proxyInteractionService.createProxyContainer({type:"toolbar",domManagerId:"navigator-toolbar",classList:["ag-charts-proxy-navigator-toolbar"],orientation:"vertical",ariaLabel:{id:"ariaLabelNavigator"}}),this.sliders=[e.proxyInteractionService.createProxyElement({type:"slider",domIndex:1,ariaLabel:{id:"ariaLabelNavigatorMinimum"},parent:this.toolbar,cursor:"ew-resize"}),e.proxyInteractionService.createProxyElement({type:"slider",domIndex:-1/0,ariaLabel:{id:"ariaLabelNavigatorRange"},parent:this.toolbar,cursor:"grab"}),e.proxyInteractionService.createProxyElement({type:"slider",domIndex:2,ariaLabel:{id:"ariaLabelNavigatorMaximum"},parent:this.toolbar,cursor:"ew-resize"})];for(const[i,n]of["min","pan","max"].entries()){const s=this.sliders[i];s.step=G8.STEP_HUNDRETH,s.keyboardStep=G8.STEP_ONE,s.orientation="horizontal",s.setPreventsDefault(!1),s.addListener("drag-start",o=>this.onDragStart(i,o,n)),s.addListener("drag-move",o=>this.onDrag(s,o,n)),s.addListener("drag-end",()=>this.updateSliderRatios()),s.addListener("contextmenu",o=>this.onContextMenu(s,o))}this.sliders[0].addListener("change",()=>this.onMinSliderChange()),this.sliders[1].addListener("change",()=>this.onPanSliderChange()),this.sliders[2].addListener("change",()=>this.onMaxSliderChange()),this.updateSliderRatios(),this.updateVisibility(!1)}destroy(){this.toolbar.destroy()}updateVisibility(e){this.toolbar.setHidden(!e)}updateZoom(){const{_min:e,_max:t}=this;if(!(e==null||t==null))return this.ctx.zoomManager.updateZoom("navigator",{x:{min:e,max:t}})}updateBounds(e){this.toolbar.setBounds(e)}updateSliderBounds(e,t){this.sliders[e].setBounds(t)}updateMinMax(e,t){this._min=e,this._max=t,this.updateSliderRatios()}updateSliderRatios(){let{_min:e,_max:t}=this;e=Math.round(e*100)/100,t=Math.round(t*100)/100;const i=this.ctx.localeManager.t("ariaValuePanRange",{min:e,max:t});this.sliders[0].setValueRatio(e),this.sliders[1].setValueRatio(e,{ariaValueText:i}),this.sliders[2].setValueRatio(t)}toCanvasOffsets(e){return{offsetX:this.dragStartX+e.originDeltaX}}moveToFront(e){if(e===1)return;const t=this.sliders[e],i=this.sliders[2-e];this.toolbar.moveChild(i,t.domIndex-1)}onDragStart(e,t,i){const n=this.sliders[e],s=this.toolbar.cssLeft(),o=n.cssLeft();this.dragStartX=s+o+t.offsetX,this.moveToFront(e),t.sourceEvent.preventDefault(),this.sliderHandlers.onDragStart(i,this.toCanvasOffsets(t))}onDrag(e,t,i){t.sourceEvent.preventDefault(),this.sliderHandlers.onDrag(i,this.toCanvasOffsets(t))}onContextMenu(e,t){const{offsetX:i,offsetY:n}=t,{x:s,y:o}=this.toolbar.getBounds(),{x:r,y:a}=e.getBounds(),l=i+s+r,c=n+o+a;this.ctx.contextMenuRegistry.dispatchContext("always",{widgetEvent:t,canvasX:l,canvasY:c},void 0)}onPanSliderChange(){const e=this.sliders[1].getValueRatio(),t=this._max-this._min;this._min=Je(0,e,1-t),this._max=this._min+t,this.updateZoom()}onMinSliderChange(){this._min=this.sliders[0].clampValueRatio(0,this._max-this.minRange),this.updateZoom()}onMaxSliderChange(){this._max=this.sliders[2].clampValueRatio(this._min+this.minRange,1),this.updateZoom()}},{Property:a1,SceneChangeDetection:l1,BBox:DFe,ExtendedPath2D:MFe}=N,ig=class extends N.Path{constructor(){super(...arguments),this.zIndex=3,this.centerX=0,this.centerY=0,this.width=8,this.height=16,this.cornerRadius=4,this.grip=!0,this.gripPath=new MFe}setCenter(e,t){this.dirtyPath=!0,(this.centerX!==e||this.centerY!==t)&&(this.centerX=e,this.centerY=t,this.markDirty("center"))}static align(e,t,i,n,s,o,r,a,l){const c=e.align(i+s*r)+l,u=c+e.align(i+s*r,s*(a-r))-2*l,d=e.align(n+o/2);e.setCenter(c,d),t.setCenter(u,d)}computeBBox(){const{centerX:e,centerY:t,width:i,height:n}=this,s=e-i/2,o=t-n/2;return new DFe(s,o,i,n)}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}updatePath(){const{centerX:e,centerY:t,path:i,gripPath:n,strokeWidth:s,cornerRadius:o,grip:r}=this,a=s/2,l=this.layerManager?.canvas?.pixelRatio??1;i.clear(),n.clear();const c=Math.floor(this.width/2*l)/l,u=Math.floor(this.height/2*l)/l;i.roundRect(e-c+a,t-u+a,2*(c-a),2*(u-a),o);const d=3;if(r)for(let p=-.5;p<=.5;p+=1)for(let f=-1;f<=1;f+=1)n.arc(e+p*d,t+f*d,1,0,2*Math.PI),n.closePath()}renderFill(e,t){const{stroke:i}=this;super.renderFill(e,t),e.fillStyle=typeof i=="string"?i:"black",e.fill(this.gripPath.getPath2D())}};ig.className="RangeHandle";D([a1,l1()],ig.prototype,"width");D([a1,l1()],ig.prototype,"height");D([a1,l1()],ig.prototype,"cornerRadius");D([a1,l1()],ig.prototype,"grip");var{Path:AFe,BBox:JF,ExtendedPath2D:kFe,clippedRoundRect:TFe,Property:IFe,SceneChangeDetection:RFe}=N,xW=class extends AFe{constructor(){super(...arguments),this.cornerRadius=4,this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1,this.visiblePath=new kFe}layout(e,t,i,n,s,o){s=Number.isNaN(s)?this.min:s,o=Number.isNaN(o)?this.max:o,(e!==this.x||t!==this.y||i!==this.width||this.height!==n||s!==this.min||o!==this.max)&&(this.x=e,this.y=t,this.width=i,this.height=n,this.min=s,this.max=o,this.dirtyPath=!0,this.markDirty("RangeMask.layout"))}computeBBox(){const{x:e,y:t,width:i,height:n}=this;return new JF(e,t,i,n)}computeVisibleRangeBBox(){const{x:e,y:t,width:i,height:n,min:s,max:o}=this,r=e+i*s,a=e+i*o;return new JF(r,t,a-r,n)}updatePath(){const{path:e,visiblePath:t,x:i,y:n,width:s,height:o,min:r,max:a,strokeWidth:l,cornerRadius:c}=this,u=l/2;e.clear(),t.clear();const d=this.align(i)+u,p=this.align(n)+u,f=this.align(i,s)-2*u,m=this.align(n,o)-2*u,v=this.align(i+s*r)+u,b=v+this.align(i+s*r,s*(a-r))-2*u,C={topLeft:c,topRight:c,bottomRight:c,bottomLeft:c},x=(w,M,T)=>{if(T-M<1)return;const L=new JF(M,p,T-M,m);TFe(w,d,p,f,m,C,L)};x(e,d,v),x(e,b,f+d),x(t,v,b)}renderStroke(e,t){super.renderStroke(e,t),super.renderStroke(e,this.visiblePath.getPath2D())}};xW.className="RangeMask";D([IFe,RFe()],xW.prototype,"cornerRadius");var EFe=class extends N.Group{constructor(e){super({name:"rangeSelectorGroup",zIndex:N.ZIndexMap.NAVIGATOR}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.background=this.appendChild(new N.TranslatableGroup({name:"navigator-background",zIndex:1})),this.append(e)}layout(e,t,i,n,s,o){this.x=e,this.y=t,this.width=i,this.height=n,this.lOffset=s,this.rOffset=o,this.background.translationX=e,this.background.translationY=t,this.markDirty("RangeSelector")}updateBackground(e,t){e?.remove(),t!=null&&this.background.appendChild(t),this.markDirty("RangeSelector")}computeBBox(){const{x:e,y:t,width:i,height:n,lOffset:s,rOffset:o}=this;return new N.BBox(e-s,t,i+(s+o),n)}},{BaseModuleInstance:LFe,ObserveChanges:wW,Property:c1}=N,oC=class extends LFe{constructor(e){super(),this.ctx=e,this.enabled=!1,this.mask=new xW,this.minHandle=new ig,this.maxHandle=new ig,this.maskVisibleRange={id:"navigator-mask-visible-range",getBBox:()=>this.mask.computeVisibleRangeBBox(),toCanvasBBox:()=>this.mask.computeVisibleRangeBBox(),fromCanvasPoint:(t,i)=>({x:t,y:i})},this.height=30,this.cornerRadius=0,this.spacing=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new EFe([this.mask,this.minHandle,this.maxHandle]),this.cleanup.register(e.scene.attachNode(this.rangeSelector),e.eventsHub.on("locale:change",()=>this.updateZoom()),e.layoutManager.registerElement(N.LayoutElement.Navigator,t=>this.onLayoutStart(t)),e.eventsHub.on("layout:complete",t=>this.onLayoutComplete(t)),e.eventsHub.on("zoom:change",t=>this.onZoomChange(t))),this.domProxy=new wFe(e,this),this.updateGroupVisibility(),this.miniChart=new sC(e)}updateBackground(e,t){this.rangeSelector?.updateBackground(e,t)}updateGroupVisibility(){const{enabled:e}=this;this.rangeSelector==null||e===this.rangeSelector.visible||(this.rangeSelector.visible=e,this.domProxy.updateVisibility(e),e?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}onLayoutStart(e){if(this.enabled){const{layoutBox:t}=e,i=this.height+this.spacing;t.shrink(i,"bottom"),this.y=t.y+t.height+this.spacing}else this.y=0;if(this.enabled&&this.miniChart){const{top:t,bottom:i}=this.miniChart.computeAxisPadding();e.layoutBox.shrink(t+i,"bottom"),this.y-=i,this.miniChart.inset=this.mask.strokeWidth/2,this.miniChart.cornerRadius=this.mask.cornerRadius}}onLayoutComplete(e){const{x:t,width:i}=e.series.rect,{y:n,height:s}=this;if(this.domProxy.updateVisibility(this.enabled),this.enabled){const{_min:o,_max:r}=this.domProxy;this.layoutNodes(t,n,i,s,o,r),this.domProxy.updateBounds({x:t,y:n,width:i,height:s})}this.x=t,this.width=i,this.miniChart?.layout(i,s).catch(o=>fe.error(o))}canDrag(){return this.enabled&&this.ctx.interactionManager.isState(N.InteractionState.ZoomDraggable)}onDragStart(e,{offsetX:t}){this.canDrag()&&(e==="pan"&&(this.panStart=(t-this.x)/this.width-this.domProxy._min),this.ctx.zoomManager.fireZoomPanStartEvent("navigator"))}onDrag(e,{offsetX:t}){if(!this.canDrag())return;const{panStart:i,x:n,width:s}=this,{minRange:o}=this.domProxy;let{_min:r,_max:a}=this.domProxy;const l=(t-n)/s;if(e==="min")r=Je(0,l,a-o);else if(e==="max")a=Je(r+o,l,1);else if(e==="pan"&&i!=null){const c=a-r;r=Je(0,l-i,1-c),a=r+c}this.domProxy._min=r,this.domProxy._max=a,this.updateZoom()}onZoomChange(e){const{x:t}=e;if(!t)return;const{x:i,y:n,width:s,height:o}=this,{min:r,max:a}=t;this.domProxy.updateMinMax(r,a),this.layoutNodes(i,n,s,o,r,a)}layoutNodes(e,t,i,n,s,o){const{rangeSelector:r,mask:a,minHandle:l,maxHandle:c}=this;a.layout(e,t,i,n,s,o),r.layout(e,t,i,n,l.width/2,c.width/2),ig.align(l,c,e,t,i,n,s,o,a.strokeWidth/2),s+(o-s)/2<.5?(l.zIndex=3,c.zIndex=4):(l.zIndex=4,c.zIndex=3);for(const[u,d]of[l,this.maskVisibleRange,c].entries()){const p=d.getBBox(),f={x:p.x-e,y:p.y-t,height:p.height,width:p.width};this.domProxy.updateSliderBounds(u,f)}}updateZoom(){this.enabled&&this.domProxy.updateZoom()}updateData(e){return this.miniChart?.updateData(e)}async processData(e){if(this.miniChart)return this.miniChart?.processData(e)}};D([wW((e,t,i)=>{e.updateBackground(i?.root,t?.root)})],oC.prototype,"miniChart");D([c1,wW((e,t)=>{e.ctx.zoomManager.setNavigatorEnabled(!!t),e.updateGroupVisibility()})],oC.prototype,"enabled");D([c1],oC.prototype,"height");D([c1,wW((e,t)=>{e.mask.cornerRadius=t})],oC.prototype,"cornerRadius");D([c1],oC.prototype,"spacing");function PFe(e){return{from:e?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function NFe(e){return(t,i)=>e?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}var{Path:OFe,Scalable:FFe,ExtendedPath2D:BFe,SceneChangeDetection:Lo,SceneArrayChangeDetection:_Fe,BBox:Wf,clippedRoundRect:V8}=N,Ps=class extends FFe(OFe){constructor(){super(...arguments),this.wickPath=new BFe,this.horizontal=!1,this.center=0,this.thickness=0,this.min=0,this.q1=0,this.median=0,this.q3=0,this.max=0,this.cornerRadius=0,this.crisp=!1,this.strokeAlignment=0,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0,this.capLengthRatio=1,this.wickStrokeAlignment=0}computeBBox(){const{horizontal:e,center:t,thickness:i,min:n,max:s}=this;return e?new Wf(Math.min(n,s),t-i/2,Math.abs(s-n),i):new Wf(t-i/2,Math.min(n,s),i,Math.abs(s-n))}computeDefaultGradientFillBBox(){const{horizontal:e,center:t,thickness:i,q1:n,q3:s}=this;return e?new Wf(Math.min(n,s),t-i/2,Math.abs(s-n),i):new Wf(t-i/2,Math.min(n,s),i,Math.abs(s-n))}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}get midPoint(){return this.horizontal?{x:(this.min+this.max)/2,y:this.center}:{x:this.center,y:(this.min+this.max)/2}}alignedCoordinates(){const{thickness:e,crisp:t}=this;let{center:i,min:n,q1:s,median:o,q3:r,max:a}=this,l=i-e/2,c=i+e/2;if(t&&e>1){n=this.align(n),s=this.align(s),o=this.align(o),r=this.align(r),a=n+this.align(n,a-n);const u=this.align(e/2);i=this.align(i),l=i-u,c=i+u}return{center:i,x0:l,x1:c,min:n,max:a,q1:s,median:o,q3:r}}updatePath(){const{path:e,stroke:t,strokeWidth:i,strokeOpacity:n,lineDash:s,lineDashOffset:o,wickStroke:r,wickStrokeWidth:a,wickStrokeOpacity:l,wickLineDash:c,wickLineDashOffset:u,strokeAlignment:d,cornerRadius:p,capLengthRatio:f,horizontal:m}=this,{center:v,x0:b,x1:C,min:x,max:w,q1:M,median:T,q3:L}=this.alignedCoordinates(),I=this.layerManager?.canvas.pixelRatio??1,R=this.wickStrokeAlignment>0?I/this.wickStrokeAlignment/2%1:0;this.path.clear(),this.wickPath.clear();const _=r!=null&&r!==t||a!=null&&a!==i||l!=null&&l!==n||c!=null&&c!==s||u!=null&&u!==o?this.wickPath:e;if(Math.abs(C-b)<=3){Pv(_,m,v,x),Nv(_,m,v,w);return}const B=Math.min(x,w),V=Math.max(x,w),j=Math.min(M,L),K=Math.max(M,L),Y=v-Math.abs((C-b)*f)/2,G=v+Math.abs((C-b)*f)/2;Pv(_,m,Y,B-R),Nv(_,m,G,B-R),Pv(_,m,v-R,B-R),Nv(_,m,v-R,j+i/2),Pv(_,m,v-R,V+R),Nv(_,m,v-R,K-i/2),Pv(_,m,Y,V+R),Nv(_,m,G,V+R);const $=i/2+d,W=i/2-d,Q=K-j-2*W;if(Q>0){const q=b+$,H=j+W,U=C-b-2*$,ee={topLeft:p,topRight:p,bottomRight:p,bottomLeft:p};H8(e,m,q,H,U,Q,ee,new Wf(q,H,U,T-H)),H8(e,m,q,H,U,Q,ee,new Wf(q,T,U,H+Q-T))}else{const q=(j+K)/2;Pv(e,m,b,q),Nv(e,m,C,q)}}drawPath(e){super.drawPath(e);const{wickPath:t}=this;if(t.isEmpty())return;const{stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,wickStroke:a=i,wickStrokeWidth:l=n,wickStrokeOpacity:c=s,wickLineDash:u=o,wickLineDashOffset:d=r}=this;l!==0&&(e.globalAlpha*=c,typeof a=="string"&&(e.strokeStyle=a),e.lineWidth=l,u!=null&&e.setLineDash([...u]),e.lineDashOffset=d,e.stroke(t.getPath2D()))}};D([Lo()],Ps.prototype,"horizontal");D([Lo()],Ps.prototype,"center");D([Lo()],Ps.prototype,"thickness");D([Lo()],Ps.prototype,"min");D([Lo()],Ps.prototype,"q1");D([Lo()],Ps.prototype,"median");D([Lo()],Ps.prototype,"q3");D([Lo()],Ps.prototype,"max");D([Lo()],Ps.prototype,"cornerRadius");D([Lo()],Ps.prototype,"crisp");D([Lo()],Ps.prototype,"strokeAlignment");D([Lo()],Ps.prototype,"wickStroke");D([Lo()],Ps.prototype,"wickStrokeWidth");D([Lo()],Ps.prototype,"wickStrokeOpacity");D([_Fe()],Ps.prototype,"wickLineDash");D([Lo()],Ps.prototype,"wickLineDashOffset");D([Lo()],Ps.prototype,"capLengthRatio");D([Lo()],Ps.prototype,"wickStrokeAlignment");function Pv(e,t,i,n){t?e.moveTo(n,i):e.moveTo(i,n)}function Nv(e,t,i,n){t?e.lineTo(n,i):e.lineTo(i,n)}function H8(e,t,i,n,s,o,r,a){t?V8(e,n,i,o,s,r,a==null?void 0:new Wf(a.y,a.x,a.height,a.width)):V8(e,i,n,s,o,r,a)}var{BaseProperties:bre,AbstractBarSeriesProperties:zFe,makeSeriesTooltip:GFe,Property:ui,mergeDefaults:VFe}=N,Sre=class extends bre{constructor(){super(...arguments),this.lengthRatio=.5}};D([ui],Sre.prototype,"lengthRatio");var rC=class extends bre{};D([ui],rC.prototype,"stroke");D([ui],rC.prototype,"strokeWidth");D([ui],rC.prototype,"strokeOpacity");D([ui],rC.prototype,"lineDash");D([ui],rC.prototype,"lineDashOffset");var zi=class extends zFe{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new Sre,this.whisker=new rC,this.tooltip=GFe()}toJson(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:n,lineDashOffset:s}=this,o=super.toJson();return o.whisker=VFe(o.whisker,{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:n,lineDashOffset:s}),o}};D([ui],zi.prototype,"xKey");D([ui],zi.prototype,"minKey");D([ui],zi.prototype,"q1Key");D([ui],zi.prototype,"medianKey");D([ui],zi.prototype,"q3Key");D([ui],zi.prototype,"maxKey");D([ui],zi.prototype,"xName");D([ui],zi.prototype,"yName");D([ui],zi.prototype,"minName");D([ui],zi.prototype,"q1Name");D([ui],zi.prototype,"medianName");D([ui],zi.prototype,"q3Name");D([ui],zi.prototype,"maxName");D([ui],zi.prototype,"fill");D([ui],zi.prototype,"fillOpacity");D([ui],zi.prototype,"stroke");D([ui],zi.prototype,"strokeWidth");D([ui],zi.prototype,"strokeOpacity");D([ui],zi.prototype,"lineDash");D([ui],zi.prototype,"lineDashOffset");D([ui],zi.prototype,"cornerRadius");D([ui],zi.prototype,"styler");D([ui],zi.prototype,"itemStyler");D([ui],zi.prototype,"cap");D([ui],zi.prototype,"whisker");D([ui],zi.prototype,"tooltip");var{fixNumericExtent:HFe,keyProperty:WFe,mergeDefaults:e2,SeriesNodePickMode:W8,SMALLEST_KEY_INTERVAL:jFe,valueProperty:Nx,diff:UFe,animationValidation:$Fe,computeBarFocusBounds:KFe,createDatumId:YFe,HighlightState:t2,ContinuousScale:XFe,ChartAxisDirection:ZFe,motion:j8,getItemStyles:qFe,applyShapeFillBBox:QFe,calculateSegments:JFe,toHighlightString:e2e}=N,t2e=class extends N.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.minKey=n.properties.minKey,this.q1Key=n.properties.q1Key,this.medianKey=n.properties.medianKey,this.q3Key=n.properties.q3Key,this.maxKey=n.properties.maxKey}},u1=class extends N.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[W8.NEAREST_NODE,W8.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},propertyNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.properties=new zi,this.NodeEvent=t2e}async processData(e){if(!this.visible)return;const{xKey:t,minKey:i,q1Key:n,medianKey:s,q3Key:o,maxKey:r}=this.properties,a=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,c=this.getValueAxis()?.scale,{isContinuousX:u,xScaleType:d,yScaleType:p}=this.getScaleInformation({xScale:l,yScale:c}),f=[];a&&this.processedData&&f.push(UFe(this.id,this.processedData)),a&&f.push($Fe());const{processedData:m}=await this.requestDataModel(e,this.data,{props:[WFe(t,d,{id:"xValue"}),Nx(i,p,{id:"minValue"}),Nx(n,p,{id:"q1Value"}),Nx(s,p,{id:"medianValue"}),Nx(o,p,{id:"q3Value"}),Nx(r,p,{id:"maxValue"}),...u?[jFe]:[],...f]});this.smallestDataInterval=m.reduced?.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];if(e!==this.getBarDirection()){const{index:s,def:o}=i.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[s];return o.type==="key"&&o.valueType==="category"?r:this.padBandExtent(r)}const n=this.domainForClippedRange(e,["minValue","maxValue"],"xValue");return HFe(n)}getSeriesRange(e,t){return this.domainForVisibleRange(ZFe.Y,["maxValue","minValue"],"xValue",t)}createNodeData(){const{visible:e,dataModel:t,processedData:i}=this,n=this.getCategoryAxis(),s=this.getValueAxis();if(!(t&&i&&n&&s))return;const{xKey:o}=this.properties,r=[],a=t.resolveKeysById(this,"xValue",i),l=t.resolveColumnById(this,"minValue",i),c=t.resolveColumnById(this,"q1Value",i),u=t.resolveColumnById(this,"medianValue",i),d=t.resolveColumnById(this,"q3Value",i),p=t.resolveColumnById(this,"maxValue",i),{barWidth:f,groupIndex:m}=this.updateGroupScale(n),v=XFe.is(n.scale)?f*-.5:0,{groupScale:b}=this,C=this.isVertical(),x=JFe(this.properties.segmentation,n,s,this.chart.seriesRect,this.ctx.scene),w={itemId:o,nodeData:r,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible,styles:qFe(this.getItemStyle.bind(this)),segments:x};if(!e)return w;const M=i.dataSources.get(this.id)?.data??[];for(const[T,L]of M.entries()){const I=a[T];if(I==null)continue;const R=l[T],O=c[T],_=u[T],B=d[T],V=p[T];if([R,O,_,B,V].some(q=>typeof q!="number")||R>O||O>_||_>B||B>V)continue;const j={xValue:n.scale.convert(I),minValue:s.scale.convert(R),q1Value:s.scale.convert(O),medianValue:s.scale.convert(_),q3Value:s.scale.convert(B),maxValue:s.scale.convert(V)},K=f;j.xValue+=b.convert(String(m))+v+K/2;const Y=Math.abs(j.q3Value-j.q1Value),G=j.xValue,$=Math.min(j.q3Value,j.q1Value)+Y/2,W={x:C?G:$,y:C?$:G};let Q;C?Q={x:W.x-K/2,y:j.minValue,width:K,height:j.maxValue-j.minValue}:Q={x:j.minValue,y:W.y-K/2,width:j.maxValue-j.minValue,height:K},r.push({series:this,itemId:I,datum:L,datumIndex:T,xKey:o,bandwidth:K,scaledValues:j,midPoint:W,focusRect:Q})}return w}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:n,strokeOpacity:s,lineDash:o,lineDashOffset:r}=this.getStyle(!1,!1,t2.None);return{marker:{fill:N.deepClone(e),fillOpacity:n,stroke:t,strokeOpacity:s,strokeWidth:i,lineDash:o,lineDashOffset:r}}}getLegendData(e){const{id:t,ctx:{legendManager:i},visible:n}=this,{xKey:s,yName:o,showInLegend:r,legendItemName:a}=this.properties;return!s||e!=="category"?[]:[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:n&&i.getItemEnabled({seriesId:t,itemId:t}),label:{text:a??o??t},symbol:this.legendItemSymbol(),legendItemName:a,hideInLegend:!r}]}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s}=this,{xKey:o,xName:r,yName:a,medianKey:l,medianName:c,q1Key:u,q1Name:d,q3Key:p,q3Name:f,minKey:m,minName:v,maxKey:b,maxName:C,legendItemName:x,tooltip:w}=s,M=this.getCategoryAxis(),T=this.getValueAxis();if(!i||!n||!M||!T)return;const L=n.dataSources.get(this.id)?.data[e],I=i.resolveKeysById(this,"xValue",n)[e],R=i.resolveColumnById(this,"minValue",n)[e],O=i.resolveColumnById(this,"q1Value",n)[e],_=i.resolveColumnById(this,"medianValue",n)[e],B=i.resolveColumnById(this,"q3Value",n)[e],V=i.resolveColumnById(this,"maxValue",n)[e];if(I==null)return;const j=this.getItemStyle(e,!1),K=[{label:v,fallbackLabel:m,value:this.getAxisValueText(T,"tooltip",R,L,m,x)},{label:d,fallbackLabel:u,value:this.getAxisValueText(T,"tooltip",O,L,u,x)},{label:c,fallbackLabel:l,value:this.getAxisValueText(T,"tooltip",_,L,l,x)},{label:f,fallbackLabel:p,value:this.getAxisValueText(T,"tooltip",B,L,p,x)},{label:C,fallbackLabel:b,value:this.getAxisValueText(T,"tooltip",V,L,b,x)}];return this.formatTooltipWithContext(w,{heading:this.getAxisValueText(M,"tooltip",I,L,o,x),title:x??a,symbol:this.legendItemSymbol(),data:K},{seriesId:t,datum:L,title:a,xKey:o,xName:r,yName:a,medianKey:l,medianName:c,q1Key:u,q1Name:d,q3Key:p,q3Name:f,minKey:m,minName:v,maxKey:b,maxName:C,...j})}animateEmptyUpdateReady({datumSelection:e}){const t=this.isVertical(),{from:i,to:n}=PFe(t);j8.resetMotion([e],NFe(t)),j8.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[e],i,n,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(e){const t=e.nodeData??[];return e.datumSelection.update(t)}makeStylerParams(e,t){const{id:i}=this,{cornerRadius:n,cap:{lengthRatio:s},fill:o,fillOpacity:r,lineDash:a,lineDashOffset:l,stroke:c,strokeOpacity:u,strokeWidth:d,maxKey:p,maxName:f,medianKey:m,medianName:v,minKey:b,minName:C,q1Key:x,q1Name:w,q3Key:M,q3Name:T,whisker:{lineDash:L,lineDashOffset:I,stroke:R,strokeOpacity:O,strokeWidth:_},xKey:B,xName:V,yName:j}=this.properties,K=e2e(t??t2.None);return{cap:{lengthRatio:s},cornerRadius:n,fill:o,fillOpacity:r,highlightState:K,highlighted:e,lineDash:a,lineDashOffset:l,maxKey:p,maxName:f??p,medianKey:m,medianName:v??m,minKey:b,minName:C??b,q1Key:x,q1Name:w??x,q3Key:M,q3Name:T??M,seriesId:i,stroke:c,strokeOpacity:u,strokeWidth:d,whisker:{lineDash:L??a,lineDashOffset:I??l,stroke:R??c,strokeOpacity:O??u,strokeWidth:_??d},xKey:B,xName:V??B,yName:j}}getStyle(e,t,i){const{cap:n,cornerRadius:s,fill:o,fillOpacity:r,lineDash:a,lineDashOffset:l,stroke:c,strokeOpacity:u,strokeWidth:d,styler:p,whisker:f}=this.properties;let m={};if(!e&&p){const v=this.makeStylerParams(t,i);m=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.cachedCallWithContext(p,v)??{},{pick:!1})??{}}return{cornerRadius:m.cornerRadius??s,fill:m.fill??o,fillOpacity:m.fillOpacity??r,lineDash:m.lineDash??a,lineDashOffset:m.lineDashOffset??l,opacity:1,stroke:m.stroke??c,strokeOpacity:m.strokeOpacity??u,strokeWidth:m.strokeWidth??d,cap:{lengthRatio:m.cap?.lengthRatio??n.lengthRatio},whisker:{lineDash:m.whisker?.lineDash??f.lineDash,lineDashOffset:m.whisker?.lineDashOffset??f.lineDashOffset,stroke:m.whisker?.stroke??f.stroke,strokeOpacity:m.whisker?.strokeOpacity??f.strokeOpacity,strokeWidth:m.whisker?.strokeWidth??f.strokeWidth}}}getItemStyle(e,t,i){const{properties:n}=this,{itemStyler:s}=n,o=this.getHighlightStyle(t,e,i);let r=e2(o,this.getStyle(e===void 0,t,i));if(s!=null&&e!=null){const p=this.cachedDatumCallback(YFe(e,t?"highlight":"node"),()=>{const f=this.makeItemStylerParams(e,t,r);return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.callWithContext(s,f))});p&&(r=e2(p,r))}const{stroke:a,strokeWidth:l,strokeOpacity:c,lineDash:u,lineDashOffset:d}=r;return r.whisker=e2(r.whisker,{stroke:a,strokeWidth:l,strokeOpacity:c,lineDash:u,lineDashOffset:d}),r}makeItemStylerParams(e,t,i){const{id:n}=this,{xKey:s,minKey:o,q1Key:r,medianKey:a,q3Key:l,maxKey:c}=this.properties,u=this.processedData?.dataSources.get(n)?.data[e],d=this.ctx.highlightManager?.getActiveHighlight(),p=this.getHighlightStateString(d,t,e),f=this.filterItemStylerFillParams(i.fill)??i.fill;return{seriesId:n,datum:u,xKey:s,minKey:o,q1Key:r,medianKey:a,q3Key:l,maxKey:c,highlighted:t,highlightState:p,...i,fill:f}}updateDatumStyles({datumSelection:e,isHighlight:t}){const i=this.ctx.highlightManager.getActiveHighlight();e.each((n,s)=>{const o=this.getHighlightState(i,t,s.datumIndex);s.style=this.getItemStyle(s.datumIndex,t,o)})}updateDatumNodes({datumSelection:e,isHighlight:t}){const{contextNodeData:i,properties:n}=this;if(!i)return;const s=this.isVertical(),o=this.ctx.highlightManager.getActiveHighlight(),r=this.getShapeFillBBox(),a=this.getStyle(!1,!1,t2.None).strokeWidth/2,l=n.whisker.strokeWidth??n.strokeWidth;e.each((c,u)=>{const d=u.style??i.styles[this.getHighlightState(o,t,u.datumIndex)];QFe(c,d.fill,r),c.fill=d.fill,c.fillOpacity=d.fillOpacity,c.stroke=d.stroke,c.strokeWidth=d.strokeWidth,c.strokeOpacity=d.strokeOpacity,c.lineDash=d.lineDash,c.lineDashOffset=d.lineDashOffset,c.wickStroke=d.whisker.stroke,c.wickStrokeWidth=d.whisker.strokeWidth,c.wickStrokeOpacity=d.whisker.strokeOpacity,c.wickLineDash=d.whisker.lineDash,c.wickLineDashOffset=d.whisker.lineDashOffset,c.cornerRadius=d.cornerRadius,c.crisp=!0,c.horizontal=!s,c.center=u.scaledValues.xValue,c.thickness=u.bandwidth,c.min=u.scaledValues.minValue,c.q1=u.scaledValues.q1Value,c.median=u.scaledValues.medianValue,c.q3=u.scaledValues.q3Value,c.max=u.scaledValues.maxValue,c.capLengthRatio=d.cap.lengthRatio,c.strokeAlignment=a,c.wickStrokeAlignment=l})}updateLabelNodes(){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}nodeFactory(){return new Ps}computeFocusBounds({datumIndex:e}){return KFe(this,this.contextNodeData?.nodeData[e].focusRect)}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.styler!=null}};u1.className="BoxPlotSeries";u1.type="box-plot";var{boxPlotSeriesThemeableOptionsDef:i2e,commonSeriesOptionsDefs:n2e}=N,s2e={...n2e,...i2e,type:ue(ht("box-plot")),xKey:ue(J),minKey:ue(J),q1Key:ue(J),medianKey:ue(J),q3Key:ue(J),maxKey:ue(J),xName:J,yName:J,minName:J,q1Name:J,medianName:J,q3Name:J,maxName:J,grouped:te,legendItemName:J,segmentation:vg},{ThemeConstants:{CARTESIAN_AXIS_TYPE:U8},multiSeriesHighlightStyle:o2e,FILL_GRADIENT_LINEAR_DEFAULTS:r2e,FILL_IMAGE_DEFAULTS:a2e,FILL_PATTERN_DEFAULTS:l2e,SAFE_FILL_OPERATION:c2e,SEGMENTATION_DEFAULTS:u2e}=N,d2e={series:{direction:"vertical",fill:{$applySwitch:[{$path:"type"},{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$palette:"fill"},{$mix:[c2e,{$ref:"chartBackgroundColor"},.7]}]},["gradient",r2e],["image",a2e],["pattern",l2e]]},stroke:{$palette:"stroke"},strokeWidth:2,fillOpacity:1,strokeOpacity:1,lineDash:void 0,lineDashOffset:0,highlight:o2e(),segmentation:u2e},axes:{[U8.NUMBER]:{crosshair:{snap:!1}},[U8.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},h2e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",moduleFactory:e=>new u1(e),predictAxis:N.predictCartesianTimeAxis,defaultAxes:N.DIRECTION_SWAP_AXES,themeTemplate:d2e,groupable:!0},Cre={type:"series",name:"box-plot",chartType:"cartesian",enterprise:!0,options:s2e,create:e=>new u1(e)},{AGGREGATION_SPAN:$8,AGGREGATION_INDEX_X_MAX:p2e,AGGREGATION_INDEX_X_MIN:g2e,AGGREGATION_INDEX_Y_MAX:f2e,AGGREGATION_INDEX_Y_MIN:m2e,aggregationDomain:y2e,aggregationRangeFittingPoints:v2e,compactAggregationIndices:b2e,createAggregationIndices:S2e}=N,C2e=1e3,K8=g2e,x2e=f2e,w2e=m2e,Y8=p2e;function D2e(e,t,i,n,s,o){if(t.length<C2e)return;const[r,a]=y2e(e,s);let l=v2e(t,r,a,{smallestKeyInterval:o}),{indexData:c,valueData:u}=S2e(t,i,n,r,a,l);const d=[{maxRange:l,indexData:c}];for(;l>64;)({indexData:c,valueData:u,maxRange:l}=b2e(c,u,l)),d.push({maxRange:l,indexData:c});return d.reverse(),d}var{fixNumericExtent:M2e,keyProperty:A2e,createDatumId:X8,SeriesNodePickMode:Z8,ChartAxisDirection:q8,SMALLEST_KEY_INTERVAL:k2e,valueProperty:Tk,diff:T2e,animationValidation:I2e,computeBarFocusBounds:R2e,visibleRangeIndices:Q8,BandScale:E2e,processedDataIsAnimatable:L2e,mergeDefaults:J8,simpleMemorize2:P2e,getItemStylesPerItemId:N2e}=N,O2e=P2e(D2e),F2e=class extends N.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.openKey=n.properties.openKey,this.closeKey=n.properties.closeKey,this.highKey=n.properties.highKey,this.lowKey=n.properties.lowKey}},xre=class extends N.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[Z8.AXIS_ALIGNED,Z8.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},propertyNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.NodeEvent=F2e,this.dataAggregationFilters=void 0}async processData(e){if(!this.visible)return;const{xKey:t,openKey:i,closeKey:n,highKey:s,lowKey:o}=this.properties,r=!this.ctx.animationManager.isSkipped(),a=this.getCategoryAxis()?.scale,l=this.getValueAxis()?.scale,{isContinuousX:c,xScaleType:u,yScaleType:d}=this.getScaleInformation({xScale:a,yScale:l}),p=[];r&&(this.processedData&&p.push(T2e(this.id,this.processedData)),p.push(I2e())),i&&p.push(Tk(i,d,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{dataModel:f,processedData:m}=await this.requestDataModel(e,this.data,{props:[A2e(t,u,{id:"xValue"}),Tk(n,d,{id:"closeValue"}),Tk(s,d,{id:"highValue"}),Tk(o,d,{id:"lowValue"}),...c?[k2e]:[],...p]});this.smallestDataInterval=m.reduced?.smallestKeyInterval,this.dataAggregationFilters=this.aggregateData(f,m),this.animationState.transition("updateData")}aggregateData(e,t){if(t.type!=="ungrouped"||L2e(t))return;const i=this.axes[q8.X];if(i==null)return;const n=e.resolveKeysById(this,"xValue",t),s=e.resolveColumnById(this,"highValue",t),o=e.resolveColumnById(this,"lowValue",t),{index:r}=e.resolveProcessedDataDefById(this,"xValue"),a=t.domain.keys[r];return O2e(i.scale.type,n,s,o,a,t.reduced?.smallestKeyInterval)}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];if(e!==this.getBarDirection()){const{index:s,def:o}=i.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[s];return o.type==="key"&&o.valueType==="category"?r:this.padBandExtent(r)}const n=this.domainForClippedRange(e,["highValue","lowValue"],"xValue");return M2e(n)}getSeriesRange(e,t){return this.domainForVisibleRange(q8.Y,["highValue","lowValue"],"xValue",t)}getZoomRangeFittingItems(e,t,i){return this.zoomFittingVisibleItems("xValue",["highValue","lowValue"],e,t,i)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",["highValue","lowValue"],e,t,i)}createNodeData(){const{visible:e,dataModel:t,processedData:i}=this,n=this.getCategoryAxis(),s=this.getValueAxis();if(!(t&&i&&n&&s))return;const o=[],{xKey:r,highKey:a,lowKey:l}=this.properties,c=i.dataSources.get(this.id)?.data??[],u=t.resolveKeysById(this,"xValue",i),d=t.resolveColumnById(this,"openValue",i),p=t.resolveColumnById(this,"closeValue",i),f=t.resolveColumnById(this,"highValue",i),m=t.resolveColumnById(this,"lowValue",i),{groupScale:v}=this,{barWidth:b,groupIndex:C}=this.updateGroupScale(n),x=v.convert(String(C)),w=b>=1?b:v.rawBandwidth,M=E2e.is(n.scale),T={itemId:r,nodeData:o,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible,styles:N2e(this.getItemStyle.bind(this),"up","down")};if(!e)return T;const L=(K,Y,G,$,W,Q,q,H)=>{const U=c[K],ee=M?q/2:0,ie=n.scale.convert(Y)+x+ee,oe=s.scale.convert(G),ae=s.scale.convert($),me=s.scale.convert(W),xe=s.scale.convert(Q),be=$>G,ge=be?"up":"down",Re=Math.min(me,xe),Ne=Math.max(me,xe)-Re,Pe={x:ie,y:Re+Ne/2};o.push({series:this,itemId:ge,datum:U,datumIndex:K,xKey:r,xValue:Y,openValue:G,closeValue:$,highValue:W,lowValue:Q,midPoint:Pe,aggregatedValue:$,isRising:be,centerX:ie,width:q,y:Re,height:Ne,yOpen:oe,yClose:ae,crisp:H})},{dataAggregationFilters:I}=this,R=n.scale,[O,_]=R.range,B=Math.abs(_-O),V=K=>R.convert(u[K])+x,j=I?.find(K=>K.maxRange>B);if(j==null){const K=i.invalidData?.get(this.id);let[Y,G]=Q8(1,c.length,n.range,$=>{const W=M?0:-w/2,Q=V($)+W;return[Q,Q+w]});i.input.count<1e3&&(Y=0,G=i.input.count);for(let $=Y;$<G;$+=1){if(K?.[$]===!0)continue;const W=u[$];if(W==null)continue;const Q=d[$],q=p[$],H=f[$],U=m[$],ee=U!=null&&U<=Q&&U<=q,ie=H!=null&&H>=Q&&H>=q;if(!ee){fe.warnOnce(`invalid low value for key [${l}] in data element, low value cannot be higher than datum open or close values`);continue}if(!ie){fe.warnOnce(`invalid high value for key [${a}] in data element, high value cannot be lower than datum open or close values.`);continue}L($,W,Q,q,H,U,w,!0)}}else{const{maxRange:K,indexData:Y}=j,[G,$]=Q8(1,K,n.range,W=>{const Q=W*$8,q=Y[Q+K8],H=Y[Q+Y8];if(q===-1)return;const U=M?0:-w/2;return[V(q)+U,V(H)+U+w]});for(let W=G;W<$;W+=1){const Q=W*$8,q=Y[Q+K8],H=Y[Q+Y8],U=Y[Q+x2e],ee=Y[Q+w2e];if(q===-1)continue;const ie=Math.trunc((q+H)/2),oe=u[ie];if(oe==null)continue;const ae=d[q],me=p[H],xe=f[U],be=m[ee],ge=Math.abs(V(H)-V(q))+w;L(ie,oe,ae,me,xe,be,ge,!1)}}return T}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(e){const t=e.nodeData??[];return e.datumSelection.update(t)}updateLabelNodes(e){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}getItemStyle(e,t,i,n="up"){const{properties:s,dataModel:o,processedData:r}=this,{itemStyler:a}=s,l=this.getHighlightStyle(t,e,i);let u=J8(l,s.getStyle(n));if(a&&o!=null&&r!=null&&e!=null){const d=o.resolveKeysById(this,"xValue",r)[e],p=this.cachedDatumCallback(X8(X8(d),t?"highlight":"node"),()=>{const f=this.makeItemStylerParams(n,e,t,u);return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`,"item",n],this.callWithContext(a,f))});p&&(u=J8(p,u))}return u}makeItemStylerParams(e,t,i,n){const{id:s,properties:o,processedData:r}=this,{xKey:a,openKey:l,closeKey:c,highKey:u,lowKey:d}=o,p=r.dataSources.get(s)?.data[t],f=this.ctx.highlightManager?.getActiveHighlight(),m=this.getHighlightStateString(f,i,t),v={seriesId:s,datum:p,itemId:e,xKey:a,openKey:l,closeKey:c,highKey:u,lowKey:d,highlighted:i,highlightState:m,...n};return"fill"in v&&"fill"in n&&(v.fill=this.filterItemStylerFillParams(n.fill)??n.fill),v}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s}=this,{xKey:o,xName:r,yName:a,openKey:l,openName:c,highKey:u,highName:d,lowKey:p,lowName:f,closeKey:m,closeName:v,legendItemName:b,tooltip:C}=s,x=this.getCategoryAxis(),w=this.getValueAxis();if(!i||!n||!x||!w)return;const M=n.dataSources.get(this.id)?.data[e],T=i.resolveKeysById(this,"xValue",n)[e],L=i.resolveColumnById(this,"openValue",n)[e],I=i.resolveColumnById(this,"highValue",n)[e],R=i.resolveColumnById(this,"lowValue",n)[e],O=i.resolveColumnById(this,"closeValue",n)[e];if(T==null)return;const _=O>=L?"up":"down",B=this.properties.item[_],V=this.getItemStyle(e,!1),j={fill:B.fill??B.stroke,fillOpacity:B.fillOpacity??B.strokeOpacity??1,stroke:B.stroke,strokeWidth:B.strokeWidth??1,strokeOpacity:B.strokeOpacity??1,lineDash:B.lineDash??[0],lineDashOffset:B.lineDashOffset??0};return this.formatTooltipWithContext(C,{heading:this.getAxisValueText(x,"tooltip",T,M,o,b),title:b,symbol:{marker:j},data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(w,"tooltip",L,M,l,b)},{label:d,fallbackLabel:u,value:this.getAxisValueText(w,"tooltip",I,M,u,b)},{label:f,fallbackLabel:p,value:this.getAxisValueText(w,"tooltip",R,M,p,b)},{label:v,fallbackLabel:m,value:this.getAxisValueText(w,"tooltip",O,M,m,b)}]},{seriesId:t,datum:M,title:a,itemId:_,xKey:o,xName:r,yName:a,openKey:l,openName:c,highKey:u,highName:d,lowKey:p,lowName:f,closeKey:m,closeName:v,...V})}computeFocusBounds(e){const t=this.getNodeData()?.at(e.datumIndex);if(t==null)return;const{centerX:i,y:n,width:s,height:o}=t,r={x:i-s/2,y:n,width:s,height:o};return R2e(this,r)}},{Path:B2e,SceneChangeDetection:zg,BBox:_2e}=N,Rh=class extends B2e{constructor(){super(...arguments),this.centerX=0,this.y=0,this.width=0,this.height=0,this.yOpen=0,this.yClose=0,this.crisp=!1}computeBBox(){const{centerX:e,y:t,width:i,height:n}=this;return new _2e(e-i/2,t,i,n)}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}get midPoint(){return{x:this.centerX,y:this.y+this.height/2}}alignedCoordinates(){const{y:e,width:t,height:i,crisp:n}=this;let{centerX:s,yOpen:o,yClose:r}=this,a=s-t/2,l=s+t/2,c=e,u=e+i;if(n&&t>1){if(s=this.align(s),o<=r){const p=this.align(o,r-o);o=this.align(o),r=o+p}else{const p=this.align(r,o-r);r=this.align(r),o=r+p}const d=this.align(t/2);a=s-d,l=s+d,c=this.align(e),u=c+this.align(c,i)}return{centerX:s,x0:a,x1:l,y0:c,y1:u,yOpen:o,yClose:r}}executeStroke(e,t){const{width:i,strokeWidth:n}=this;i<n&&(e.lineWidth=i),super.executeStroke(e,t)}};D([zg()],Rh.prototype,"centerX");D([zg()],Rh.prototype,"y");D([zg()],Rh.prototype,"width");D([zg()],Rh.prototype,"height");D([zg()],Rh.prototype,"yOpen");D([zg()],Rh.prototype,"yClose");D([zg()],Rh.prototype,"crisp");var wre=class extends Rh{constructor(){super(...arguments),this.strokeAlignment=0}updatePath(){const{path:e}=this,{centerX:t,x0:i,x1:n,y0:s,y1:o,yOpen:r,yClose:a}=this.alignedCoordinates(),l=this.layerManager?.canvas.pixelRatio??1,c=this.strokeAlignment>0?l/this.strokeAlignment/2%1:0;e.clear(),e.moveTo(t-c,s),e.lineTo(t-c,o),Math.abs(n-i)>1&&(e.moveTo(i,r-c),e.lineTo(t-c,r-c),e.moveTo(t-c,a-c),e.lineTo(n,a-c))}};D([zg()],wre.prototype,"strokeAlignment");var{SceneArrayChangeDetection:z2e,SceneChangeDetection:QD,ExtendedPath2D:G2e,BBox:V2e}=N,Cy=class extends Rh{constructor(){super(...arguments),this.wickPath=new G2e,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0,this.wickStrokeAlignment=0}computeDefaultGradientFillBBox(){const{width:e,centerX:t,yOpen:i,yClose:n}=this,s=Math.min(i,n),r=Math.max(i,n)-s,a=t-e/2,l=t+e/2;return new V2e(a,s,l-a,r)}updatePath(){const{path:e,stroke:t,strokeWidth:i,strokeOpacity:n,lineDash:s,lineDashOffset:o,wickStroke:r,wickStrokeWidth:a,wickStrokeOpacity:l,wickLineDash:c,wickLineDashOffset:u}=this,{centerX:d,x0:p,x1:f,y0:m,y1:v,yOpen:b,yClose:C}=this.alignedCoordinates(),x=this.layerManager?.canvas.pixelRatio??1,w=this.wickStrokeAlignment>0?x/this.wickStrokeAlignment/2%1:0;this.path.clear(),this.wickPath.clear();const T=r!=null&&r!==t||a!=null&&a!==i||l!=null&&l!==n||c!=null&&c!==s||u!=null&&u!==o?this.wickPath:e;if(Math.abs(f-p)<=3){T.moveTo(d-w,m),T.lineTo(d-w,v);return}const L=Math.min(b,C),I=Math.max(b,C),R=i/2;T.moveTo(d-w,m),T.lineTo(d-w,L+R),T.moveTo(d-w,v),T.lineTo(d-w,I-R);const O=I-L-2*R;if(O>0)e.rect(p+R,L+R,f-p-2*R,O);else{const _=(L+I)/2;e.moveTo(p,_),e.lineTo(f,_)}}drawPath(e){super.drawPath(e);const{wickPath:t}=this;if(t.isEmpty())return;const{stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,wickStroke:a=i,wickStrokeWidth:l=n,wickStrokeOpacity:c=s,wickLineDash:u=o,wickLineDashOffset:d=r}=this;l!==0&&(e.globalAlpha*=c,typeof a=="string"&&(e.strokeStyle=a),e.lineWidth=l,u!=null&&e.setLineDash([...u]),e.lineDashOffset=d,e.stroke(t.getPath2D()))}};D([QD()],Cy.prototype,"wickStroke");D([QD()],Cy.prototype,"wickStrokeWidth");D([QD()],Cy.prototype,"wickStrokeOpacity");D([z2e()],Cy.prototype,"wickLineDash");D([QD()],Cy.prototype,"wickLineDashOffset");D([QD()],Cy.prototype,"wickStrokeAlignment");var{BaseProperties:Dre,Property:is,AbstractBarSeriesProperties:H2e,makeSeriesTooltip:W2e}=N,zm=class extends Dre{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};D([is],zm.prototype,"stroke");D([is],zm.prototype,"strokeWidth");D([is],zm.prototype,"strokeOpacity");D([is],zm.prototype,"lineDash");D([is],zm.prototype,"lineDashOffset");var DW=class extends Dre{constructor(){super(...arguments),this.up=new zm,this.down=new zm}};D([is],DW.prototype,"up");D([is],DW.prototype,"down");var Fa=class extends H2e{};D([is],Fa.prototype,"xKey");D([is],Fa.prototype,"openKey");D([is],Fa.prototype,"closeKey");D([is],Fa.prototype,"highKey");D([is],Fa.prototype,"lowKey");D([is],Fa.prototype,"xName");D([is],Fa.prototype,"yName");D([is],Fa.prototype,"openName");D([is],Fa.prototype,"closeName");D([is],Fa.prototype,"highName");D([is],Fa.prototype,"lowName");var d1=class extends Fa{constructor(){super(...arguments),this.tooltip=W2e(),this.item=new DW}getStyle(e){const{strokeWidth:t,strokeOpacity:i,stroke:n,lineDash:s,lineDashOffset:o}=this.item[e];return{stroke:n,strokeWidth:t,strokeOpacity:i,lineDash:s,lineDashOffset:o,opacity:1}}};D([is],d1.prototype,"tooltip");D([is],d1.prototype,"item");D([is],d1.prototype,"itemStyler");var{BaseProperties:MW,makeSeriesTooltip:j2e,Property:Ns}=N,aC=class extends MW{};D([Ns],aC.prototype,"stroke");D([Ns],aC.prototype,"strokeWidth");D([Ns],aC.prototype,"strokeOpacity");D([Ns],aC.prototype,"lineDash");D([Ns],aC.prototype,"lineDashOffset");var Sc=class extends MW{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new aC}};D([Ns],Sc.prototype,"fill");D([Ns],Sc.prototype,"fillOpacity");D([Ns],Sc.prototype,"stroke");D([Ns],Sc.prototype,"strokeWidth");D([Ns],Sc.prototype,"strokeOpacity");D([Ns],Sc.prototype,"lineDash");D([Ns],Sc.prototype,"lineDashOffset");D([Ns],Sc.prototype,"cornerRadius");D([Ns],Sc.prototype,"wick");var AW=class extends MW{constructor(){super(...arguments),this.up=new Sc,this.down=new Sc}};D([Ns],AW.prototype,"up");D([Ns],AW.prototype,"down");var h1=class extends Fa{constructor(){super(),this.item=new AW,this.tooltip=j2e(),this.highlightStyle.deprecated=!1}getStyle(e){const{fill:t,fillOpacity:i,strokeWidth:n,strokeOpacity:s,stroke:o,lineDash:r,lineDashOffset:a,cornerRadius:l,wick:c}=this.item[e];return{fill:t,fillOpacity:i,stroke:o,strokeWidth:n,strokeOpacity:s,lineDash:r,lineDashOffset:a,cornerRadius:l,opacity:1,wick:c}}};D([Ns],h1.prototype,"item");D([Ns],h1.prototype,"tooltip");D([Ns],h1.prototype,"itemStyler");var{isGradientFill:e9,isPatternFill:i2,isImageFill:n2,applyShapeStyle:U2e}=N,p1=class extends xre{constructor(){super(...arguments),this.properties=new h1}nodeFactory(){const e=new Cy;return e.lineCap="butt",e}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,n)=>{n.style=this.getItemStyle(n.datumIndex,t,void 0,n.itemId)})}updateDatumNodes({datumSelection:e,isHighlight:t}){const{contextNodeData:i,properties:n}=this;if(!i)return;const s=this.ctx.highlightManager.getActiveHighlight(),{up:o,down:r}=n.item;e.each((a,l)=>{const{centerX:c,width:u,y:d,height:p,yOpen:f,yClose:m,crisp:v}=l,b=l.isRising?o:r,C=l.style??i.styles[l.itemId][this.getHighlightState(s,t,l.datumIndex)];a.centerX=c,a.width=u,a.y=d,a.height=p,a.yOpen=f,a.yClose=m,a.crisp=v,U2e(a,C,this.getShapeFillBBox());const x=C?.wick;a.wickStroke=x?.stroke,a.wickStrokeWidth=x?.strokeWidth,a.wickStrokeOpacity=x?.strokeOpacity,a.wickLineDash=x?.lineDash,a.wickLineDashOffset=x?.lineDashOffset,a.wickStrokeAlignment=b.wick.strokeWidth??b.strokeWidth})}legendItemSymbol(){const{up:e,down:t}=this.properties.item,i=e9(e.fill)?e.fill.colorStops.map(r=>typeof r=="string"?r:{color:r.color,stop:r.stop==null?void 0:r.stop*.5}):[{color:i2(e.fill)||n2(e.fill)?e.stroke:e.fill,stop:0},{color:i2(e.fill)||n2(e.fill)?e.stroke:e.fill,stop:.5}],n=e9(t.fill)?t.fill.colorStops.map(r=>typeof r=="string"?r:{color:r.color,stop:r.stop==null?void 0:r.stop*.5}):[{color:i2(t.fill)||n2(t.fill)?t.stroke:t.fill,stop:.5}],s={type:"gradient",gradient:"linear",rotation:90,colorStops:[...i,...n],reverse:!1},o={type:"gradient",gradient:"linear",rotation:90,colorStops:[{color:e.stroke,stop:0},{color:e.stroke,stop:.5},{color:t.stroke,stop:.5}],reverse:!1};return{marker:{fill:s,fillOpacity:e.fillOpacity,stroke:o,strokeWidth:e.strokeWidth??1,strokeOpacity:e.strokeOpacity??1,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset}}}getLegendData(e){const{id:t,data:i,visible:n,ctx:{legendManager:s}}=this,{xKey:o,yName:r,showInLegend:a,legendItemName:l}=this.properties;return!i?.data.length||!o||e!=="category"?[]:[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:n&&s.getItemEnabled({seriesId:t,itemId:t}),label:{text:l??r??t},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!a}]}hasItemStylers(){return this.properties.itemStyler!=null}};p1.className="CandleStickSeries";p1.type="candlestick";var{commonSeriesOptionsDefs:$2e,candlestickSeriesThemeableOptionsDef:K2e}=N,kW={...$2e,...K2e,type:ue(ht("candlestick")),xKey:ue(J),openKey:ue(J),highKey:ue(J),lowKey:ue(J),closeKey:ue(J),xName:J,yName:J,openName:J,highName:J,lowName:J,closeName:J};kW.pickOutsideVisibleMinorAxis=Xe(te);kW.focusPriority=Xe(ve);var{ThemeConstants:{CARTESIAN_AXIS_TYPE:t9},multiSeriesHighlightStyle:Y2e,FILL_GRADIENT_LINEAR_KEYED_DEFAULTS:X2e,FILL_IMAGE_DEFAULTS:Z2e,FILL_PATTERN_KEYED_DEFAULTS:q2e}=N;function i9(e){return{fill:{$applySwitch:[{$path:"type"},{$if:[{$eq:[{$palette:"type"},"user-indexed"]},e==="up"?"transparent":{$palette:"fill"},{$palette:`${e}.fill`}]},["gradient",X2e(e)],["image",Z2e],["pattern",q2e(e)]]},stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:`${e}.stroke`}]}}}var Q2e={series:{item:{up:i9("up"),down:i9("down")},highlightStyle:{item:{strokeWidth:3}},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:Y2e()},animation:{enabled:!1},axes:{[t9.NUMBER]:{crosshair:{snap:!1}},[t9.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},{CARTESIAN_AXIS_TYPE:n9,CARTESIAN_POSITION:s9}=N.ThemeConstants,J2e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",moduleFactory:e=>new p1(e),defaultAxes:[{type:n9.NUMBER,position:s9.LEFT},{type:n9.ORDINAL_TIME,position:s9.BOTTOM}],themeTemplate:Q2e,groupable:!1},Mre={type:"series",name:"candlestick",chartType:"cartesian",enterprise:!0,options:kW,create:e=>new p1(e)};function eBe(e,t){const{fontSize:i,minimumFontSize:n=i}=e,{fontSize:s,minimumFontSize:o=s}=t,r=i-n,a=s-o;let l=e.fontSize,c=t.fontSize;const u=[{labelFontSize:i,secondaryLabelFontSize:s}];for(;l>n||c>o;){const d=r>0?(l-n)/r:-1,p=a>0?(c-o)/a:-1;d>p?l--:c--,u.push({labelFontSize:l,secondaryLabelFontSize:c})}return u.reverse(),u}function Are(e,t,i,n,{padding:s},o){const{spacing:r=0}=t,a=2*s,l=2*s+r,c=(t.minimumFontSize??t.fontSize)+(n.minimumFontSize??n.fontSize);if(c>o(c+l,!1).height-l)return;const u=eBe(t,n),d={fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight},p={fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight};let f,m;return NJ(0,u.length-1,v=>{const{labelFontSize:b,secondaryLabelFontSize:C}=u[v],x=v===0,w={...d,fontSize:b},M={...p,fontSize:C},T=ei(w).lineHeight(),L=ei(M).lineHeight(),I=o(T+L+l,x),R=I.width-a,O=I.height-l;if(T+L>O||((f==null||f.fontSize!==b)&&(f=r9(t,e,R,O,w,t.wrapping,x?t.overflowStrategy:"hide")),f==null||f.width>R||f.height>O)||((m==null||m.fontSize!==C)&&(m=r9(n,i,R,O,M,n.wrapping,x?n.overflowStrategy:"hide")),m==null))return;const _=f.height+m.height;if(!(m.width>R||_>O))return{width:Math.max(f.width,m.width),height:_+r,meta:I.meta,label:f,secondaryLabel:m}})}function b0(e,t,{padding:i},n){const s=2*i,o=Math.min(t.minimumFontSize??t.fontSize,t.fontSize),r={fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontWeight:t.fontWeight};return NJ(o,t.fontSize,a=>{const l={...r,fontSize:a},c=ei(l),u=a===o,d=t.lineHeight??c.lineHeight(),p=n(d+s,u),f=p.width-s,m=p.height-s;if(d>m||f<0)return;const v=yE(e,{maxWidth:f,maxHeight:m,font:l,textWrap:t.wrapping,overflow:(u?t.overflowStrategy:null)??"hide"});if(!v.length)return;const{width:b,height:C}=c.measureLines(v),x=v.join(`
`);return[{width:b,height:C,text:x,fontSize:a,lineHeight:d},p.meta]})}function o9(e){return e?.minimumFontSize!=null&&e?.fontSize!=null&&e?.minimumFontSize>e?.fontSize}function TW(e,t,i,n,s,o){const r=t.enabled?e:void 0,a=n.enabled?i:void 0;(o9(t)||o9(n))&&fe.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;r!=null&&a!=null&&(l=Are(r,t,a,n,s,o));let c;if(l==null&&r!=null&&(c=b0(r,t,s,o)),c!=null){const[d,p]=c;l={width:d.width,height:d.height,meta:p,label:d,secondaryLabel:void 0}}let u;if(l==null&&r==null&&a!=null&&(u=b0(a,n,s,o)),u!=null){const[d,p]=u;l={width:d.width,height:d.height,meta:p,label:void 0,secondaryLabel:d}}return l}function r9(e,t,i,n,s,o,r){const a=yE(t,{maxWidth:i,maxHeight:n,font:s,textWrap:o,overflow:r});if(!a.length)return;const l=ei(s),c=e.lineHeight??l.lineHeight(),{width:u}=l.measureLines(a);return{width:u,lineHeight:c,text:a.join(`
`),height:a.length*c,fontSize:s.fontSize}}var{Property:JD}=N,lC=class extends N.Label{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}};D([JD],lC.prototype,"wrapping");D([JD],lC.prototype,"overflowStrategy");D([JD],lC.prototype,"lineHeight");D([JD],lC.prototype,"minimumFontSize");var Fu=class extends lC{constructor(){super(...arguments),this.spacing=0}};D([JD],Fu.prototype,"spacing");var eM=class extends lC{},{CartesianSeriesProperties:tBe,makeSeriesTooltip:iBe,Property:Po}=N,Zs=class extends tBe{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new Fu,this.tooltip=iBe()}};D([Po],Zs.prototype,"title");D([Po],Zs.prototype,"xKey");D([Po],Zs.prototype,"yKey");D([Po],Zs.prototype,"colorKey");D([Po],Zs.prototype,"xName");D([Po],Zs.prototype,"yName");D([Po],Zs.prototype,"colorName");D([Po],Zs.prototype,"colorRange");D([Po],Zs.prototype,"stroke");D([Po],Zs.prototype,"strokeOpacity");D([Po],Zs.prototype,"strokeWidth");D([Po],Zs.prototype,"textAlign");D([Po],Zs.prototype,"verticalAlign");D([Po],Zs.prototype,"itemPadding");D([Po],Zs.prototype,"itemStyler");D([Po],Zs.prototype,"label");D([Po],Zs.prototype,"tooltip");var{SeriesNodePickMode:a9,computeBarFocusBounds:nBe,getMissCount:sBe,valueProperty:s2,ChartAxisDirection:sl,DEFAULT_CARTESIAN_DIRECTION_KEYS:oBe,DEFAULT_CARTESIAN_DIRECTION_NAMES:rBe,createDatumId:aBe,ColorScale:lBe,Rect:cBe,PointerEvents:uBe,applyShapeStyle:dBe,mergeDefaults:l9,formatValue:hBe,addHitTestersToQuadtree:pBe,findQuadtreeMatch:c9,updateLabelNode:gBe}=N,fBe=class extends N.CartesianSeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.colorKey=n.properties.colorKey}},mBe={left:-.5,center:0,right:-.5},yBe={top:-.5,middle:0,bottom:-.5},g1=class extends N.CartesianSeries{constructor(e){super({moduleCtx:e,propertyKeys:{...oBe,color:["colorKey"]},propertyNames:{...rBe,color:["colorName"]},categoryKey:void 0,pickModes:[a9.NEAREST_NODE,a9.EXACT_SHAPE_MATCH],pathsPerSeries:[]}),this.properties=new Zs,this.NodeEvent=fBe,this.colorScale=new lBe}async processData(e){const t=this.axes[sl.X],i=this.axes[sl.Y];if(!t||!i||!this.data?.data.length)return;const{xKey:n,yKey:s,colorRange:o,colorKey:r}=this.properties,a=this.axes[sl.X]?.scale,l=this.axes[sl.Y]?.scale,{xScaleType:c,yScaleType:u}=this.getScaleInformation({xScale:a,yScale:l}),d=this.colorScale.type,{dataModel:p,processedData:f}=await this.requestDataModel(e,this.data,{props:[s2(n,c,{id:"xValue"}),s2(s,u,{id:"yValue"}),...r?[s2(r,d,{id:"colorValue",invalidValue:void 0})]:[]]});if(this.isColorScaleValid()){const m=p.resolveProcessedDataIndexById(this,"colorValue"),v=f.domain.values[m].filter(C=>C!=null),b=N.extent(v);if(this.colorScale.domain=b??[],b?.length&&b[0]===b[1]){const C=Math.floor(o.length/2);this.colorScale.range=[o[C],o[C]]}else this.colorScale.range=o;this.colorScale.update()}}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const n=t.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,o=sBe(this,i.defs.values[n].missing),r=t.resolveProcessedDataIndexById(this,"colorValue"),a=i.domain.values[r].filter(c=>c!=null).length;return!(s===0||s===o||a===0)}xCoordinateRange(e,t){const i=this.axes[sl.X].scale,n=t*(i.bandwidth??0)/2,s=i.convert(e)+n,o=t*(i.bandwidth??10);return[s,s+o]}yCoordinateRange(e,t){const i=this.axes[sl.Y].scale,n=t*(i.bandwidth??0)/2,s=i.convert(e[0])+n,o=t*(i.bandwidth??10);return[s,s+o]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;return!t||!i?[]:e===sl.X?t.getDomain(this,"xValue","value",i):t.getDomain(this,"yValue","value",i)}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}createNodeData(){const{data:e,visible:t,axes:i,dataModel:n,processedData:s}=this,o=i[sl.X],r=i[sl.Y];if(!(e&&n&&s&&t&&o&&r))return;if(o.type!=="category"||r.type!=="category"){fe.warnOnce(`Heatmap series expected axes to have "category" type, but received "${o.type}" and "${r.type}" instead.`);return}const{xKey:a,xName:l,yKey:c,yName:u,colorKey:d,colorName:p,textAlign:f,verticalAlign:m,itemPadding:v,label:b}=this.properties,C=n.resolveColumnById(this,"xValue",s),x=n.resolveColumnById(this,"yValue",s),w=d?n.resolveColumnById(this,"colorValue",s):void 0,M=d?n.getDomain(this,"colorValue","value",s):[],T=o.scale,L=r.scale,I=(T.bandwidth??0)/2,R=(L.bandwidth??0)/2,O=[],_=[],B=T.bandwidth??10,V=L.bandwidth??10,j=(B-2*v)*mBe[f],K=(V-2*v)*yBe[m],Y=()=>({width:B,height:V,meta:null}),G=s.dataSources.get(this.id)?.data??[];for(const[$,W]of G.entries()){const Q=C[$],q=x[$],H=T.convert(Q)+I,U=L.convert(q)+R,ee=w?.[$],ie=b.enabled&&ee!=null?this.getLabelText(ee,W,d,"color",M,b,{value:ee,datum:W,colorKey:d,colorName:p,xKey:a,yKey:c,xName:l,yName:u}):void 0,oe=TW(Gt(ie),this.properties.label,void 0,this.properties.label,{padding:v},Y),ae={x:H,y:U,size:0},me=this.getItemStyle({datumIndex:$,datum:W,colorValue:ee},!1);if(O.push({series:this,itemId:c,datumIndex:$,yKey:c,xKey:a,xValue:Q,yValue:q,colorValue:ee,datum:W,point:ae,width:B,height:V,midPoint:{x:H,y:U},missing:w!=null&&ee==null,style:me}),oe?.label!=null){const{text:xe,fontSize:be,lineHeight:ge,height:Re}=oe.label,{fontStyle:Ne,fontFamily:Pe,fontWeight:Be,color:Ue}=this.properties.label,Ae=ae.x+j*(B-2*v),Ve=ae.y+K*(V-2*v)-(oe.height-Re)*.5;_.push({series:this,itemId:c,datum:W,datumIndex:$,text:xe,fontSize:be,lineHeight:ge,fontStyle:Ne,fontFamily:Pe,fontWeight:Be,color:Ue,textAlign:f,textBaseline:m,x:Ae,y:Ve,style:me})}}return{itemId:this.properties.yKey??this.id,nodeData:O,labelData:_,scales:this.calculateScaling(),visible:this.visible}}nodeFactory(){return new cBe}update(e){return this.ctx.animationManager.skipCurrentBatch(),super.update(e)}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,n=t??[];return i.update(n)}getItemStyle({datumIndex:e,datum:t,colorValue:i},n){const{properties:s}=this,{itemStyler:o,stroke:r,strokeWidth:a,strokeOpacity:l}=s,c=this.getHighlightStyle(n,e),u=l9(c,{fill:this.isColorScaleValid()&&i!=null?this.colorScale.convert(i):"transparent",fillOpacity:1,stroke:r,strokeWidth:a,strokeOpacity:l,opacity:1});let d;return o!=null&&e!=null&&(d=this.cachedDatumCallback(aBe(e,n?"highlight":"node"),()=>{const p=this.makeItemStylerParams(t,e,n,u);return this.callWithContext(o,p)})),d?l9(d,u):u}makeItemStylerParams(e,t,i,n){const{id:s,properties:o}=this,{xKey:r,yKey:a}=o,l=this.ctx.highlightManager?.getActiveHighlight(),c=this.getHighlightStateString(l,i,t),u=this.filterItemStylerFillParams(n.fill)??n.fill;return{seriesId:s,datum:e,xKey:r,yKey:a,highlighted:i,highlightState:c,...n,fill:u}}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,n)=>{n.style=this.getItemStyle(n,t)})}updateDatumNodes({datumSelection:e}){const t=this.axes[sl.X],[i,n]=t?.visibleRange??[],o=!(i!==0||n!==1);e.each((r,a)=>{const{point:l,width:c,height:u,style:d}=a;dBe(r,d),r.crisp=o,r.x=Math.floor(l.x-c/2),r.y=Math.floor(l.y-u/2),r.width=Math.ceil(c),r.height=Math.ceil(u)})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e,{enabled:n}=this.properties.label,s=n?t:[];return i.update(s)}updateLabelNodes(e){const t=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((i,n)=>{i.pointerEvents=uBe.None,i.text=n.text,i.fillOpacity=this.getHighlightStyle(!1,n.datumIndex)?.opacity??1,gBe(this,i,this.properties,this.properties.label,n,!1,t)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:s,properties:o,colorScale:r,ctx:a}=this,{formatManager:l}=a,{xKey:c,xName:u,yKey:d,yName:p,colorKey:f,colorName:m,colorRange:v,title:b,legendItemName:C,tooltip:x}=o,w=s[sl.X],M=s[sl.Y];if(!i||!n||!w||!M)return;const T=n.dataSources.get(this.id)?.data[e],L=i.resolveColumnById(this,"xValue",n)[e],I=i.resolveColumnById(this,"yValue",n)[e],R=f!=null&&this.isColorScaleValid()?i.resolveColumnById(this,"colorValue",n)[e]:void 0;if(L==null)return;const O=[];let _;if(R==null)_=v[0];else{_=r.convert(R);const j=i.getDomain(this,"colorValue","value",n),K=l.format(this.callWithContext.bind(this),{type:"number",value:R,datum:T,seriesId:t,legendItemName:C,key:f,source:"tooltip",property:"color",domain:j,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});O.push({label:m,fallbackLabel:f,value:K??hBe(R)})}O.push({label:u,fallbackLabel:c,value:this.getAxisValueText(w,"tooltip",L,T,c,C)},{label:p,fallbackLabel:d,value:this.getAxisValueText(M,"tooltip",I,T,d,C)});const B=this.getItemStyle({datumIndex:e,datum:T,colorValue:R},!1);B.fill!=null&&(_=B.fill);const V=_==null?void 0:{marker:{shape:"square",fill:_,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}};return this.formatTooltipWithContext(x,{title:b??C,symbol:V,data:O},{seriesId:t,datum:T,title:b,xKey:c,xName:u,yKey:d,yName:p,colorKey:f,colorName:m,...B})}getLegendData(e){return e!=="gradient"||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,series:this.getFormatterContext("color"),colorDomain:this.colorScale.domain,colorRange:this.colorScale.range}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds({datumIndex:e}){const t=this.contextNodeData?.nodeData[e];if(t===void 0)return;const{width:i,height:n,midPoint:s}=t,o={x:s.x-i/2,y:s.y-n/2,width:i,height:n};return nBe(this,o)}initQuadTree(e){pBe(e,this.datumNodesIter())}pickNodesExactShape(e){const t=c9(this,e);return t!=null&&t.distance<=0?[t.datum]:[]}pickNodeClosestDatum(e){return c9(this,e)}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}};g1.className="HeatmapSeries";g1.type="heatmap";var{commonSeriesOptionsDefs:vBe,heatmapSeriesThemeableOptionsDef:bBe,without:u9}=N,SBe={...u9(bBe,["showInLegend"]),...u9(vBe,["showInLegend"]),type:ue(ht("heatmap")),xKey:ue(J),yKey:ue(J),colorKey:J,xName:J,yName:J,colorName:J,colorRange:it(Fe)},CBe={series:{stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"chartBackgroundColor"},{$path:["/0",{$palette:"stroke"},{$palette:"strokes"}]}]},strokeWidth:{$isUserOption:["./stroke",2,void 0]},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},N.SAFE_RANGE2_OPERATION]},label:{...N.LABEL_BOXING_DEFAULTS,enabled:!1,color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3,highlight:N.singleSeriesHighlightStyle()},gradientLegend:{enabled:!0,...N.LEGEND_CONTAINER_THEME}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:d9,CARTESIAN_POSITION:h9}}=N,xBe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",moduleFactory:e=>new g1(e),defaultAxes:[{type:d9.CATEGORY,position:h9.LEFT},{type:d9.CATEGORY,position:h9.BOTTOM}],themeTemplate:CBe},kre={type:"series",name:"heatmap",chartType:"cartesian",enterprise:!0,options:SBe,create:e=>new g1(e)},{applyShapeStyle:wBe}=N,f1=class extends xre{constructor(){super(...arguments),this.properties=new d1}nodeFactory(){const e=new wre;return e.lineCap="square",e}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,n)=>{n.style=this.getItemStyle(n.datumIndex,t,void 0,n.itemId)})}updateDatumNodes({datumSelection:e,isHighlight:t}){const{contextNodeData:i,properties:n}=this;if(!i)return;const s=this.ctx.highlightManager.getActiveHighlight(),{up:o,down:r}=n.item;e.each((a,l)=>{const{centerX:c,width:u,y:d,height:p,yOpen:f,yClose:m,crisp:v}=l,b=l.isRising?o:r;a.centerX=c,a.width=u,a.y=d,a.height=p,a.yOpen=f,a.yClose=m,a.crisp=v;const C=l.style??i.styles[l.itemId][this.getHighlightState(s,t,l.datumIndex)];wBe(a,C),a.strokeAlignment=b.strokeWidth})}getLegendData(e){const{id:t,data:i,ctx:{legendManager:n},visible:s}=this,{xKey:o,yName:r,item:{up:a,down:l},showInLegend:c,legendItemName:u}=this.properties;if(!i?.data.length||!o||e!=="category")return[];const d={type:"gradient",gradient:"linear",colorSpace:"rgb",colorStops:[{color:a.stroke,stop:0},{color:a.stroke,stop:.5},{color:l.stroke,stop:.5}],rotation:90};return[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:s&&n.getItemEnabled({seriesId:t,itemId:t}),label:{text:u??r??t},symbol:{marker:{fill:d,fillOpacity:a.strokeOpacity,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}},legendItemName:u,hideInLegend:!c}]}hasItemStylers(){return this.properties.itemStyler!=null}};f1.className="ohlc";f1.type="ohlc";var{commonSeriesOptionsDefs:DBe,ohlcSeriesThemeableOptionsDef:MBe}=N,IW={...DBe,...MBe,type:ue(ht("ohlc")),xKey:ue(J),openKey:ue(J),highKey:ue(J),lowKey:ue(J),closeKey:ue(J),xName:J,yName:J,openName:J,highName:J,lowName:J,closeName:J};IW.pickOutsideVisibleMinorAxis=Xe(te);IW.focusPriority=Xe(ve);var{ThemeConstants:{CARTESIAN_AXIS_TYPE:Ik,CARTESIAN_POSITION:p9},multiSeriesHighlightStyle:ABe}=N,kBe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",moduleFactory:e=>new f1(e),defaultAxes:[{type:Ik.NUMBER,position:p9.LEFT},{type:Ik.ORDINAL_TIME,position:p9.BOTTOM}],themeTemplate:{animation:{enabled:!1},series:{item:{up:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"up.stroke"}]}},down:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"down.stroke"}]}}},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:ABe(!1)},axes:{[Ik.NUMBER]:{crosshair:{snap:!1}},[Ik.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},groupable:!1},Tre={type:"series",name:"ohlc",chartType:"cartesian",enterprise:!0,options:IW,create:e=>new f1(e)},{AGGREGATION_INDEX_Y_MAX:TBe,AGGREGATION_INDEX_Y_MIN:IBe,aggregationDomain:RBe,aggregationIndexForXRatio:Ire,aggregationRangeFittingPoints:EBe,aggregationXRatioForXValue:Rre,compactAggregationIndices:LBe,createAggregationIndices:PBe}=N,NBe=1e3;function g9(e,t,i,n,s,o,r){const a=e[o];if(a==null)return!1;const l=Rre(a,t,i,r),c=Ire(l,s);return o===n[c+TBe]}function f9(e,t,i,n,s,o,r){const a=e[o];if(a==null)return!1;const l=Rre(a,t,i,r),c=Ire(l,s);return o===n[c+IBe]}function OBe(e,t,i,n,s,o,r){if(t.length<NBe)return;const[a,l]=RBe(e,s);let c=EBe(t,a,l,{xNeedsValueOf:o});const{indexData:u,valueData:d}=PBe(t,i,n,a,l,c,{xNeedsValueOf:o,yNeedsValueOf:r});let p=[],f=[];for(let v=0;v<t.length;v+=1)g9(t,a,l,u,c,v,o)&&p.push(v),f9(t,a,l,u,c,v,o)&&f.push(v);const m=[{maxRange:c,topIndices:p,bottomIndices:f}];for(;c>64;)({maxRange:c}=LBe(u,d,c,{inPlace:!0})),p=p.filter(v=>g9(t,a,l,u,c,v,o)),f=f.filter(v=>f9(t,a,l,u,c,v,o)),m.push({maxRange:c,topIndices:p,bottomIndices:f});return m.reverse(),m}function m9({span:e},t){switch(e.type){case"linear":case"step":case"multi-line":{const i=(t-e.x0)/(e.x1-e.x0);return e.y0+i*(e.y1-e.y0)}case"cubic":{const{cp0x:i,cp0y:n,cp1x:s,cp1y:o,cp2x:r,cp2y:a,cp3x:l,cp3y:c}=e;let u=.5;const d=1e-6;for(let f=0;f<10;f++){const m=1-u,b=m*m*m*i+3*m*m*u*s+3*m*u*u*r+u*u*u*l-t;if(Math.abs(b)<d)break;const C=3*m*m*(s-i)+6*m*u*(r-s)+3*u*u*(l-r);if(Math.abs(C)<1e-12)break;u=u-b/C,u=Math.max(0,Math.min(1,u))}const p=1-u;return p*p*p*n+3*p*p*u*o+3*p*u*u*a+u*u*u*c}}}function y9(e,t,i=0){for(let n=i;n<e.length;n++){const s=e[n],[o,r]=N.spanRange(s.span);if(t>=o.x&&t<=r.x)return{span:s,index:n};if(t<o.x)break}return{span:null,index:i}}function FBe(e,t,i,n,s){const o=y9(e,i,s),r=y9(t,i,s);if(!o.span||!r.span)return{intersection:null,spanIndex:o.index,isInverted:n};const a=m9(o.span,i),l=m9(r.span,i),c=a>l;return{intersection:n===c?null:{x:i,y:a},spanIndex:o.index,isInverted:c}}function BBe(e,t,i,n,s=!1){if(e.length===0||t.length===0)return[];const o=[];let r=s,a=0;for(let l=i;l<=n;l+=.5){const c=FBe(e,t,l,r,a);c.intersection&&o.push(c.intersection.x),a=c.spanIndex,r=c.isInverted}return o}function _Be(e,t,i,n,s={}){const o=Math.max(t.x,i.width-(t.x+t.width)),r=Math.max(t.y,i.height-(t.y+t.height)),a=[],l=(u,d)=>({x0:u,y0:-r,x1:d,y1:t.height+r});n&&a.push({clipRect:l(-o,e[0]??t.width+o),...s});const c=n?1:0;for(let u=c;u<e.length;u+=2)a.push({clipRect:l(e[u],e[u+1]??t.width+o),...s});return a}var{BaseProperties:RW,CartesianSeriesProperties:zBe,InterpolationProperties:GBe,SeriesMarker:VBe,makeSeriesTooltip:HBe,Property:Dt,DropShadow:WBe,Label:jBe}=N,EW=class extends jBe{constructor(){super(...arguments),this.placement="outside",this.spacing=0}};D([Dt],EW.prototype,"placement");D([Dt],EW.prototype,"spacing");var m1=class{constructor(){this.enabled=!1,this.fillOpacity=1}};D([Dt],m1.prototype,"enabled");D([Dt],m1.prototype,"fill");D([Dt],m1.prototype,"fillOpacity");var lg=class extends RW{constructor(){super(...arguments),this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.marker=new VBe}};D([Dt],lg.prototype,"stroke");D([Dt],lg.prototype,"strokeWidth");D([Dt],lg.prototype,"strokeOpacity");D([Dt],lg.prototype,"lineDash");D([Dt],lg.prototype,"lineDashOffset");D([Dt],lg.prototype,"marker");var LW=class extends RW{constructor(){super(...arguments),this.low=new lg,this.high=new lg}};D([Dt],LW.prototype,"low");D([Dt],LW.prototype,"high");var $l=class extends RW{};D([Dt],$l.prototype,"enabled");D([Dt],$l.prototype,"shape");D([Dt],$l.prototype,"size");D([Dt],$l.prototype,"fill");D([Dt],$l.prototype,"fillOpacity");D([Dt],$l.prototype,"stroke");D([Dt],$l.prototype,"strokeWidth");D([Dt],$l.prototype,"strokeOpacity");D([Dt],$l.prototype,"lineDash");D([Dt],$l.prototype,"lineDashOffset");D([Dt],$l.prototype,"itemStyler");var sn=class extends zBe{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new GBe,this.item=new LW,this.invertedStyle=new m1,this.shadow=new WBe().set({enabled:!1}),this.marker=new $l,this.label=new EW,this.tooltip=HBe(),this.connectMissingData=!1}};D([Dt],sn.prototype,"xKey");D([Dt],sn.prototype,"yLowKey");D([Dt],sn.prototype,"yHighKey");D([Dt],sn.prototype,"xName");D([Dt],sn.prototype,"yName");D([Dt],sn.prototype,"yLowName");D([Dt],sn.prototype,"yHighName");D([Dt],sn.prototype,"fill");D([Dt],sn.prototype,"fillOpacity");D([Dt],sn.prototype,"stroke");D([Dt],sn.prototype,"strokeWidth");D([Dt],sn.prototype,"strokeOpacity");D([Dt],sn.prototype,"lineDash");D([Dt],sn.prototype,"lineDashOffset");D([Dt],sn.prototype,"interpolation");D([Dt],sn.prototype,"styler");D([Dt],sn.prototype,"item");D([Dt],sn.prototype,"invertedStyle");D([Dt],sn.prototype,"shadow");D([Dt],sn.prototype,"marker");D([Dt],sn.prototype,"label");D([Dt],sn.prototype,"tooltip");D([Dt],sn.prototype,"connectMissingData");var{CollapseMode:Rk,isScaleValid:v9,pairUpSpans:Ek,prepareAreaFillAnimationFns:UBe,plotInterpolatedLinePathStroke:Ov,prepareLinePathPropertyAnimation:$Be,areScalingEqual:b9}=N;function KBe(e,t,i,n){const s=(l,c)=>{Ov(l,c,t.removed),Ov(l,c,i.removed)},o=(l,c)=>{Ov(l,c,t.moved),Ov(l,c,i.moved)},r=(l,c)=>{Ov(l,c,t.added),Ov(l,c,i.added)},a=$Be(e,n);return{status:e,path:{addPhaseFn:r,updatePhaseFn:o,removePhaseFn:s},pathProperties:a}}function YBe(e,t,i){const n=e.scales.x?.type==="category",s=t.scales.x?.type==="category";if(n!==s||!v9(e.scales.x)||!v9(t.scales.x))return;let o="updated";t.visible&&!e.visible?o="removed":!t.visible&&e.visible&&(o="added");const r=Ek({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},Rk.Split);if(r==null)return;const a=Ek({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},Rk.Split);if(a==null)return;const l=Ek({scales:e.scales,data:e.highStrokeData.spans},{scales:t.scales,data:t.highStrokeData.spans},Rk.Split);if(l==null)return;const c=Ek({scales:e.scales,data:e.lowStrokeData.spans},{scales:t.scales,data:t.lowStrokeData.spans},Rk.Split);if(c==null)return;const u="fade",d=UBe(o,r,a,u),p=KBe(o,l,c,u),f=(i?.changed??!0)||!b9(e.scales.x,t.scales.x)||!b9(e.scales.y,t.scales.y)||o!=="updated";return{status:o,fill:d,stroke:p,hasMotion:f}}var{valueProperty:S9,keyProperty:XBe,ChartAxisDirection:zs,mergeDefaults:ZBe,updateLabelNode:qBe,fixNumericExtent:C9,buildResetPathFn:QBe,resetLabelFn:JBe,resetMarkerFn:e_e,resetMarkerPositionFn:x9,pathSwipeInAnimation:t_e,resetMotion:i_e,markerSwipeScaleInAnimation:n_e,seriesLabelFadeInAnimation:o2,animationValidation:s_e,diff:o_e,updateClipPath:r2,computeMarkerFocusBounds:w9,plotAreaPathFill:r_e,plotLinePathStroke:D9,interpolatePoints:M9,pathFadeInAnimation:a2,markerFadeInAnimation:A9,fromToMotion:l2,pathMotion:c2,extent:a_e,applyShapeFillBBox:l_e,PointerEvents:Lk,Marker:c_e,BBox:u_e,findMinMax:d_e,applyShapeStyle:h_e,processedDataIsAnimatable:p_e,simpleMemorize2:g_e,markerEnabled:f_e,getMarkerStyles:m_e,calculateSegments:y_e,toHighlightString:v_e,HighlightState:b_e}=N,S_e=g_e(OBe),C_e=class extends N.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.yLowKey=n.properties.yLowKey,this.yHighKey=n.properties.yHighKey}},x_e=N.CartesianSeries,y1=class extends x_e{constructor(e){super({moduleCtx:e,pathsPerSeries:["fill","lowStroke","highStroke"],pickModes:[N.SeriesNodePickMode.AXIS_ALIGNED],propertyKeys:{[zs.X]:["xKey"],[zs.Y]:["yLowKey","yHighKey"]},propertyNames:{[zs.X]:["xName"],[zs.Y]:["yLowName","yHighName","yName"]},categoryKey:"xValue",animationResetFns:{path:QBe({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:JBe,datum:(t,i)=>({...e_e(t),...x9(t,i)})},clipFocusBox:!1}),this.properties=new sn,this.NodeEvent=C_e,this.dataAggregationFilters=void 0}async processData(e){const{xKey:t,yLowKey:i,yHighKey:n}=this.properties,s=this.axes[zs.X]?.scale,o=this.axes[zs.Y]?.scale,{xScaleType:r,yScaleType:a}=this.getScaleInformation({xScale:s,yScale:o}),l=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&l.push(o_e(this.id,this.processedData)),c&&l.push(s_e());const{dataModel:u,processedData:d}=await this.requestDataModel(e,this.data,{props:[XBe(t,r,{id:"xValue"}),S9(i,a,{id:"yLowValue"}),S9(n,a,{id:"yHighValue"}),...l]});this.dataAggregationFilters=this.aggregateData(u,d),this.animationState.transition("updateData")}aggregateData(e,t){if(t.type!=="ungrouped"||p_e(t))return;const i=this.axes[zs.X];if(i==null)return;const n=e.resolveKeysById(this,"xValue",t),s=e.resolveColumnById(this,"yHighValue",t),o=e.resolveColumnById(this,"yLowValue",t),{index:r}=e.resolveProcessedDataDefById(this,"xValue"),a=t.domain.keys[r],l=e.resolveColumnNeedsValueOf(this,"xValue",t),c=e.resolveColumnNeedsValueOf(this,"yHighValue",t);return S_e(i.scale.type,n,s,o,a,l,c)}xCoordinateRange(e){const t=this.axes[zs.X].scale.convert(e);return[t,t]}yCoordinateRange(e){const t=this.axes[zs.Y].scale.convert(e[0]);return[t,t]}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];const{domain:{keys:[n]}}=t;if(e===zs.X){const s=i.resolveProcessedDataDefById(this,"xValue");return s?.def.type==="key"&&s.def.valueType==="category"?n:C9(a_e(n))}else{const s=this.domainForClippedRange(zs.Y,["yHighValue","yLowValue"],"xValue"),o=d_e(s);return C9(o)}}getSeriesRange(e,t){return this.domainForVisibleRange(zs.Y,["yHighValue","yLowValue"],"xValue",t)}createNodeData(){const{data:e,dataModel:t,processedData:i,axes:n}=this,s=n[zs.X],o=n[zs.Y];if(!(e&&s&&o&&t&&i&&this.chart?.seriesRect))return;const r=s.scale,a=o.scale,{xKey:l,yLowKey:c,yHighKey:u,connectMissingData:d,interpolation:p,fill:f,fillOpacity:m,item:v}=this.properties,b=i.dataSources.get(this.id)?.data??[],C=(r.bandwidth??0)/2,x=t.resolveKeysById(this,"xValue",i),w=t.resolveColumnById(this,"yHighValue",i),M=t.resolveColumnById(this,"yLowValue",i),T=oe=>r.convert(x[oe])+C,L=[],I=[],R=[],O=(oe,ae,me)=>{const xe=b[oe],be=x[oe];if(be==null)return;const ge=R.at(-1);if(Number.isFinite(ae)&&Number.isFinite(me)){const Re=(Ve,$e,Qe)=>{const{size:Oe}=v[Ve].marker;I.push({index:oe,series:this,itemId:Ve,datum:xe,datumIndex:oe,midPoint:{x:Pe,y:Qe},yHighValue:ae,yLowValue:me,xValue:be,xKey:l,yLowKey:c,yHighKey:u,point:{x:Pe,y:Qe,size:Oe},enabled:!0});const Ze=this.createLabelData({datumIndex:oe,point:{x:Pe,y:Qe},value:$e,yLowValue:me,yHighValue:ae,itemId:Ve,inverted:Ne,datum:xe,series:this});L.push(Ze)},Ne=me>ae,Pe=T(oe),Be=a.convert(ae),Ue=a.convert(me);Re("high",ae,Be),Re("low",me,Ue);const Ae={high:{point:{x:Pe,y:Be},xDatum:be,yDatum:ae},low:{point:{x:Pe,y:Ue},xDatum:be,yDatum:me}};Array.isArray(ge)?ge.push(Ae):ge==null?R.push([Ae]):(ge.skip+=1,R.push([Ae]))}else d||(Array.isArray(ge)||ge==null?R.push({skip:0}):ge.skip+=1)},{dataAggregationFilters:_}=this,[B,V]=r.range,j=Math.abs(V-B),K=_?.find(oe=>oe.maxRange>j),Y=K?.topIndices,G=K?.bottomIndices;let[$,W]=this.visibleRangeIndices("xValue",s.range,Y);$=Math.max($-1,0),W=Math.min(W+1,Y?.length??x.length),i.input.count<1e3&&($=0,W=i.input.count);for(let oe=$;oe<W;oe+=1){const ae=Y?.[oe]??oe,me=G?.[oe]??oe;O(ae,w[ae],M[me])}const Q=R.flatMap(oe=>{if(!Array.isArray(oe))return[];const ae=oe.map(me=>me.high);return M9(ae,p)}),q=R.flatMap(oe=>{if(!Array.isArray(oe))return[];const ae=oe.map(me=>me.low);return M9(ae,p)}),H=y_e(this.properties.segmentation,s,o,this.chart.seriesRect,this.ctx.scene,!1);let U;if(this.properties.invertedStyle.enabled){const oe=w[0]<M[0],ae=BBe(Q,q,r.range[0],r.range[1],oe);U=_Be(ae,this.chart.seriesRect,this.ctx.scene,oe,this.properties.invertedStyle)}const ee=oe=>{const ae=v[oe],{stroke:me,strokeWidth:xe,strokeOpacity:be}=ae,ge={fill:f,fillOpacity:m,stroke:me,strokeWidth:xe,strokeOpacity:be};return m_e(this,ae,ae.marker,ge)};return{itemId:`${c}-${u}`,labelData:L,nodeData:I,fillData:{itemId:"high",spans:Q,phantomSpans:q},highStrokeData:{itemId:"high",spans:Q},lowStrokeData:{itemId:"low",spans:q},scales:this.calculateScaling(),visible:this.visible,styles:{low:ee("low"),high:ee("high")},segments:H,intersectionSegments:U}}createLabelData({datumIndex:e,point:t,value:i,itemId:n,inverted:s,datum:o,series:r}){const{xKey:a,yLowKey:l,yHighKey:c,xName:u,yName:d,yLowName:p,yHighName:f,legendItemName:m,label:v}=this.properties,{placement:b}=v,C=v.spacing+(typeof v.padding=="number"?v.padding:0);let x=n;s&&(x=n==="low"?"high":"low");const w=b==="outside"&&x==="high"||b==="inside"&&x==="low"?-1:1,M=this.getSeriesDomain(zs.Y);return{x:t.x,y:t.y+C*w,series:r,itemId:n,datum:o,datumIndex:e,text:this.getLabelText(i,o,n==="high"?c:l,"y",M,v,{value:i,datum:o,itemId:n,xKey:a,yLowKey:l,yHighKey:c,xName:u,yLowName:p,yHighName:f,yName:d,legendItemName:m}),textAlign:"center",textBaseline:w===-1?"bottom":"top"}}isPathOrSelectionDirty(){const{low:e,high:t}=this.properties.item;return e.marker.isDirty()||t.marker.isDirty()}strokewidthChange(){const e=t=>{const i=this.properties.item[t].strokeWidth??0,n=this.properties.highlight.highlightedSeries.item?.[t]?.strokeWidth??i,s=this.properties.highlight.highlightedItem.item?.[t]?.strokeWidth??i;return i>s||n>s};return e("low")||e("high")}updatePathNodes(e){const{visible:t}=e,[i,n,s]=e.paths,o=this.contextNodeData?.segments,r=this.ctx.highlightManager?.getActiveHighlight(),a=this.getHighlightState(r,!1),l=this.getHighlightStyle(),{item:c,fill:u,fillOpacity:d,opacity:p}=ZBe(l,this.getStyle(!1,a));n.setProperties({datum:o,segments:o,fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:Lk.None,stroke:c.low.stroke,strokeWidth:c.low.strokeWidth,strokeOpacity:c.low.strokeOpacity,lineDash:c.low.lineDash,lineDashOffset:c.low.lineDashOffset,opacity:p,visible:t}),s.setProperties({segments:o,fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:Lk.None,stroke:c.high.stroke,strokeWidth:c.high.strokeWidth,strokeOpacity:c.high.strokeOpacity,lineDash:c.high.lineDash,lineDashOffset:c.high.lineDashOffset,opacity:p,visible:t});const f=this.getShapeFillBBox();l_e(i,u,f),h_e(i,{stroke:void 0,fill:u,fillOpacity:d,opacity:p},f);const m=this.contextNodeData?.intersectionSegments??o;i.setProperties({segments:m,pointerEvents:Lk.None,lineJoin:"round",fillShadow:this.properties.shadow,opacity:p,visible:t}),i.datum=m,r2(this,i),r2(this,n),r2(this,s)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty("RangeArea")}updateFillPath(e,t){const[i]=e;i.path.clear(),r_e(i,t.fillData),i.markDirty("RangeArea")}updateStrokePath(e,t){const[,i,n]=e;i.path.clear(),n.path.clear(),D9(i,t.lowStrokeData.spans),D9(n,t.highStrokeData.spans),i.markDirty("RangeArea"),n.markDirty("RangeArea")}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,{processedData:n,axes:s,properties:o}=this,r=o.styler?this.getStylerMarkerOptions().item:o.item,{low:a,high:l}=r,c=f_e(n.input.count,s[zs.X].scale,{enabled:a.marker.enabled||l.marker.enabled});(o.item.low.marker.isDirty()||o.item.high.marker.isDirty())&&(i.clear(),i.cleanup());let u;if(c)if(a.marker.enabled&&l.marker.enabled)u=t;else{u=[];for(const d of t)r[d.itemId].marker.enabled&&u.push(d)}else u=[];return i.update(u)}updateDatumStyles({datumSelection:e,isHighlight:t}){const i=this.ctx.highlightManager.getActiveHighlight();e.each((n,s)=>{const o=this.getHighlightState(i,t,s.datumIndex),r=this.getStyle(t,o),{fill:a,fillOpacity:l,item:c}=r,{stroke:u,strokeWidth:d,strokeOpacity:p}=c[s.itemId],{marker:f}=this.properties.item[s.itemId],m=this.makeItemStylerParams(s.itemId);s.style=this.getMarkerStyle(f,s,m,{isHighlight:t,highlightState:o,resolveMarkerSubPath:["item",s.itemId,"marker"]},r.item[s.itemId].marker,{fill:a,fillOpacity:l,stroke:u,strokeWidth:d,strokeOpacity:p})})}updateDatumNodes(e){const{contextNodeData:t}=this;if(!t)return;const{datumSelection:i,isHighlight:n}=e,s=this.getShapeFillBBox(),o=this.ctx.highlightManager.getActiveHighlight();i.each((r,a)=>{const{itemId:l}=a,c=a.style??t.styles[l][this.getHighlightState(o,n,a.datumIndex)];this.applyMarkerStyle(c,r,a.point,s)}),n||(this.properties.item.low.marker.markClean(),this.properties.item.high.marker.markClean())}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,n=>{n.pointerEvents=Lk.None})}updateLabelNodes(e){const t={xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xKey,yName:this.properties.yName,yLowKey:this.properties.yLowKey,yLowName:this.properties.yLowName??this.properties.yLowKey,yHighKey:this.properties.yHighKey,yHighName:this.properties.yHighName??this.properties.yHighKey,legendItemName:this.properties.legendItemName},i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((n,s)=>{n.fillOpacity=this.getHighlightStyle(!1,s.datumIndex).opacity??1,qBe(this,n,t,this.properties.label,s,!1,i)})}getHighlightData(e,t){const i=e.filter(n=>n.datum===t.datum);return i.length>0?i:void 0}getStyle(e,t){return this.getStylerCouple(e,t)[0]}getStylerMarkerOptions(){return this.getStylerCouple(!1)[1]}getStylerCouple(e,t){const{fill:i,fillOpacity:n,item:s,styler:o}=this.properties;let r={};if(o){const u=this.makeStylerParams(e,t);r=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.cachedCallWithContext(o,u)??{},{pick:!1})??{}}const a={item:{low:{marker:{enabled:!1}},high:{marker:{enabled:!1}}}},l=u=>{const d=r.item?.[u],{lineDash:p,lineDashOffset:f,marker:m,stroke:v,strokeOpacity:b,strokeWidth:C}=s[u];return a.item[u].marker.enabled=d?.marker?.enabled??m.enabled,{marker:{fill:d?.marker?.fill??m.fill??i,fillOpacity:d?.marker?.fillOpacity??m.fillOpacity,shape:d?.marker?.shape??m.shape,size:d?.marker?.size??m.size,lineDash:d?.marker?.lineDash??m.lineDash,lineDashOffset:d?.marker?.lineDashOffset??m.lineDashOffset,stroke:d?.marker?.stroke??m.stroke??v,strokeOpacity:d?.marker?.strokeOpacity??m.strokeOpacity,strokeWidth:d?.marker?.strokeWidth??m.strokeWidth},lineDash:d?.lineDash??p,lineDashOffset:d?.lineDashOffset??f,stroke:d?.stroke??v,strokeOpacity:d?.strokeOpacity??b,strokeWidth:d?.strokeWidth??C}};return[{fill:r.fill??i,fillOpacity:r.fillOpacity??n,opacity:1,topLevel:{lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,marker:this.properties.marker,stroke:this.properties.stroke,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},item:{low:l("low"),high:l("high")}},a]}makeStylerParams(e,t){const{id:i}=this,{fill:n,fillOpacity:s,item:o,xKey:r,yHighKey:a,yLowKey:l}=this.properties,c=v_e(t??b_e.None),u=d=>{const{lineDash:p,lineDashOffset:f,marker:m,stroke:v,strokeOpacity:b,strokeWidth:C}=o[d];return{marker:{fill:m.fill??n,fillOpacity:m.fillOpacity,size:m.size,shape:m.shape,stroke:m.stroke??v,strokeOpacity:m.strokeOpacity,strokeWidth:m.strokeWidth,lineDash:m.lineDash,lineDashOffset:m.lineDashOffset},lineDash:p,lineDashOffset:f,stroke:v,strokeOpacity:b,strokeWidth:C}};return{item:{low:u("low"),high:u("high")},fill:n,fillOpacity:s,highlightState:c,highlighted:e,seriesId:i,xKey:r,yLowKey:l,yHighKey:a}}makeItemStylerParams(e){const{xKey:t,yLowKey:i,yHighKey:n}=this.properties;return{xKey:t,yLowKey:i,yHighKey:n,itemId:e}}getTooltipContent(e,t){const i=t?.itemId??"high",{id:n,dataModel:s,processedData:o,axes:r,properties:a}=this,{xName:l,yName:c,yLowKey:u,yLowName:d,xKey:p,yHighKey:f,yHighName:m,tooltip:v,legendItemName:b}=a,C=r[zs.X],x=r[zs.Y];if(!s||!o||!C||!x)return;const w=o.dataSources.get(this.id)?.data[e],M=s.resolveKeysById(this,"xValue",o)[e],T=s.resolveColumnById(this,"yHighValue",o)[e],L=s.resolveColumnById(this,"yLowValue",o)[e];if(M==null)return;const I=this.getStyle(!1),R=this.makeItemStylerParams(i),O=this.getMarkerStyle(this.properties.item[i].marker,{datumIndex:e,datum:w},R,{isHighlight:!1,resolveMarkerSubPath:["item",i,"marker"]},I.item[i].marker),_=`${this.getAxisValueText(x,"tooltip",L,w,u,b)} - ${this.getAxisValueText(x,"tooltip",T,w,f,b)}`;return this.formatTooltipWithContext(v,{heading:this.getAxisValueText(C,"tooltip",M,w,p,b),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:`${d??u} - ${m??f}`,value:_}]},{seriesId:n,datum:w,title:c,itemId:i,xName:l,yName:c,yLowKey:u,yLowName:d,xKey:p,yHighKey:f,yHighName:m,legendItemName:b,...O})}legendItemSymbol(){const{fill:e,topLevel:t}=this.getStyle(!1),{stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,marker:r}=t;return{marker:{shape:r.shape,fill:r.fill??e,stroke:r.stroke??i,fillOpacity:r.fillOpacity,strokeOpacity:r.strokeOpacity,strokeWidth:r.strokeWidth,lineDash:r.lineDash,lineDashOffset:r.lineDashOffset},line:{stroke:i,strokeOpacity:s,strokeWidth:n,lineDash:o}}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{yLowKey:n,yHighKey:s,yName:o,yLowName:r,yHighName:a,legendItemName:l,showInLegend:c}=this.properties,u=l??o??`${r??n} - ${a??s}`,d=`${n}-${s}`;return[{legendType:"category",id:t,itemId:d,seriesId:t,enabled:i,label:{text:`${u}`},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!c}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new c_e}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:n,paths:s}=e,{animationManager:o}=this.ctx;this.updateAreaPaths(s,n),t_e(this,o,...s),i_e([t],x9),n_e(this,o,t),o2(this,"labels",o,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{datumSelection:i,labelSelection:n,contextData:s,paths:o,previousContextData:r}=e,[a,l,c]=o;if(a==null&&l==null&&c==null)return;this.resetDatumAnimation(e),this.resetLabelAnimation(e);const u=()=>{this.resetPathAnimation(e),this.updateAreaPaths(o,s)},d=()=>{t.skipCurrentBatch(),u()};if(s==null||r==null){u(),A9(this,t,"added",i),a2(this,"fill_path_properties",t,"add",a),a2(this,"low_stroke_path_properties",t,"add",l),a2(this,"high_stroke_path_properties",t,"add",c),o2(this,"labels",t,n);return}const p=YBe(s,r,this.processedData?.reduced?.diff?.[this.id]);if(p===void 0){d();return}else if(p.status==="no-op")return;l2(this.id,"fill_path_properties",t,[a],p.fill.pathProperties),l2(this.id,"low_stroke_path_properties",t,[l],p.stroke.pathProperties),l2(this.id,"high_stroke_path_properties",t,[c],p.stroke.pathProperties),p.status==="added"?this.updateAreaPaths(o,s):p.status==="removed"?this.updateAreaPaths(o,r):(c2(this.id,"fill_path_update",t,[a],p.fill.path),c2(this.id,"low_stroke_path_update",t,[l],p.stroke.path),c2(this.id,"high_stroke_path_update",t,[c],p.stroke.path)),p.hasMotion&&(A9(this,t,void 0,i),o2(this,"labels",t,n)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(o,s)})}getFormattedMarkerStyle(e){const t=this.getStyle(!1),i=this.makeItemStylerParams(e.itemId);return this.getMarkerStyle(this.properties.item[e.itemId].marker,e,i,{isHighlight:!0,resolveMarkerSubPath:["item",e.itemId,"marker"]},void 0,t)}getMarkerStyle(e,t,i,n,s,o){return e.itemStyler=this.properties.marker.itemStyler,super.getMarkerStyle(e,t,i,n,s,o)}computeFocusBounds(e){const t=w9(this,e),i=w9(this,{...e,datumIndex:e.datumIndex+1});if(t&&i)return u_e.merge([t,i])}isDatumEnabled(e,t){return t%2===0&&super.isDatumEnabled(e,t)}hasItemStylers(){return this.properties.styler!=null||this.properties.marker.itemStyler!=null||this.properties.label.itemStyler!=null}};y1.className="RangeAreaSeries";y1.type="range-area";var{commonSeriesOptionsDefs:w_e,rangeAreaSeriesThemeableOptionsDef:D_e}=N,PW={...w_e,...D_e,type:ue(ht("range-area")),xKey:ue(J),yLowKey:ue(J),yHighKey:ue(J),xName:J,yName:J,yLowName:J,yHighName:J,legendItemName:J,segmentation:vg,invertedStyle:{enabled:te,...ze}};PW.pickOutsideVisibleMinorAxis=Xe(te);PW.focusPriority=Xe(ve);var k9={lineDash:{$path:"/series/$index/lineDash"},lineDashOffset:{$path:"/series/$index/lineDashOffset"},stroke:{$path:["/series/$index/stroke",{$palette:"stroke"}]},strokeOpacity:{$path:"/series/$index/strokeOpacity"},strokeWidth:{$path:["/series/$index/strokeWidth",1]},marker:{enabled:{$path:"/series/$index/marker/enabled"},fill:{$isUserOption:["/series/$index/marker/fill",{$if:[{$or:[{$isGradient:{$path:"/series/$index/marker/fill"}},{$isImage:{$path:"/series/$index/marker/fill"}},{$isPattern:{$path:"/series/$index/marker/fill"}}]},{$merge:[{$path:"/series/$index/marker/fill"},{$applySwitch:[{$path:"type"},void 0,["gradient",N.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS]]}]},{$isUserOption:["/series/$index/marker/fill",{$path:"/series/$index/marker/fill"},{$palette:"fill"}]}]},{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",N.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS]]}]},fillOpacity:{$path:"/series/$index/marker/fillOpacity"},lineDash:{$path:"/series/$index/marker/lineDash"},lineDashOffset:{$path:"/series/$index/marker/lineDashOffset"},shape:{$path:"/series/$index/marker/shape"},size:{$path:["/series/$index/marker/size",6]},stroke:{$path:["/series/$index/marker/stroke",{$palette:"stroke"}]},strokeOpacity:{$path:"/series/$index/marker/strokeOpacity"},strokeWidth:{$path:["/series/$index/marker/strokeWidth",2]}}},M_e={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",N.FILL_GRADIENT_LINEAR_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS]]},fillOpacity:.7,stroke:{$palette:"stroke"},strokeWidth:1,marker:{enabled:!1,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",N.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS]]},shape:"circle",stroke:{$palette:"stroke"},size:6,strokeWidth:2},nodeClickRange:"nearest",item:{low:k9,high:k9},label:{...N.LABEL_BOXING_DEFAULTS,enabled:!1,placement:"outside",padding:{$isUserOption:["./spacing",0,10]},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},interpolation:{type:"linear"},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:N.multiSeriesHighlightStyle(),segmentation:N.SEGMENTATION_DEFAULTS,invertedStyle:{enabled:!1,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",N.FILL_GRADIENT_LINEAR_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS]]},fillOpacity:{$path:"../fillOpacity"}}},axes:{[N.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:T9,CARTESIAN_POSITION:I9}}=N,A_e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",moduleFactory:e=>new y1(e),predictAxis:N.predictCartesianTimeAxis,defaultAxes:[{type:T9.NUMBER,position:I9.LEFT},{type:T9.CATEGORY,position:I9.BOTTOM}],themeTemplate:M_e},Ere={type:"series",name:"range-area",chartType:"cartesian",enterprise:!0,options:PW,create:e=>new y1(e)},{aggregationDomain:k_e,aggregationRangeFittingPoints:T_e,compactAggregationIndices:I_e,createAggregationIndices:R_e}=N,E_e=1e3;function L_e(e,t,i,n,s,o){if(t.length<E_e)return;const[r,a]=k_e(e,s);let l=T_e(t,r,a,{smallestKeyInterval:o}),{indexData:c,valueData:u}=R_e(t,i,n,r,a,l);const d=[{maxRange:l,indexData:c}];for(;l>64;)({indexData:c,valueData:u,maxRange:l}=I_e(c,u,l)),d.push({maxRange:l,indexData:c});return d.reverse(),d}var{AbstractBarSeriesProperties:P_e,makeSeriesTooltip:N_e,Property:Gn,DropShadow:O_e,Label:F_e}=N,NW=class extends F_e{constructor(){super(...arguments),this.placement="inside",this.spacing=0}};D([Gn],NW.prototype,"placement");D([Gn],NW.prototype,"spacing");var ns=class extends P_e{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new O_e().set({enabled:!1}),this.label=new NW,this.tooltip=N_e()}};D([Gn],ns.prototype,"xKey");D([Gn],ns.prototype,"yLowKey");D([Gn],ns.prototype,"yHighKey");D([Gn],ns.prototype,"xName");D([Gn],ns.prototype,"yName");D([Gn],ns.prototype,"yLowName");D([Gn],ns.prototype,"yHighName");D([Gn],ns.prototype,"fill");D([Gn],ns.prototype,"fillOpacity");D([Gn],ns.prototype,"stroke");D([Gn],ns.prototype,"strokeWidth");D([Gn],ns.prototype,"strokeOpacity");D([Gn],ns.prototype,"lineDash");D([Gn],ns.prototype,"lineDashOffset");D([Gn],ns.prototype,"cornerRadius");D([Gn],ns.prototype,"styler");D([Gn],ns.prototype,"itemStyler");D([Gn],ns.prototype,"shadow");D([Gn],ns.prototype,"label");D([Gn],ns.prototype,"tooltip");var{SeriesNodePickMode:R9,valueProperty:E9,keyProperty:B_e,ChartAxisDirection:Ox,checkCrisp:__e,updateLabelNode:z_e,SMALLEST_KEY_INTERVAL:G_e,LARGEST_KEY_INTERVAL:V_e,diff:H_e,prepareBarAnimationFunctions:L9,midpointStartingBarPosition:P9,resetBarSelectionsFn:W_e,fixNumericExtent:j_e,seriesLabelFadeInAnimation:N9,resetLabelFn:U_e,animationValidation:$_e,computeBarFocusBounds:K_e,visibleRangeIndices:Y_e,createDatumId:X_e,ContinuousScale:Z_e,Rect:q_e,PointerEvents:Q_e,motion:O9,applyShapeStyle:J_e,findMinMax:eze,areScalingEqual:tze,processedDataIsAnimatable:ize,AGGREGATION_SPAN:F9,AGGREGATION_INDEX_X_MAX:B9,AGGREGATION_INDEX_X_MIN:_9,AGGREGATION_INDEX_Y_MAX:nze,AGGREGATION_INDEX_Y_MIN:sze,mergeDefaults:z9,simpleMemorize2:oze,getItemStyles:rze,calculateSegments:aze,toHighlightString:lze,HighlightState:G9}=N,cze=oze(L_e),uze=class extends N.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.xKey,this.yLowKey=n.properties.yLowKey,this.yHighKey=n.properties.yHighKey}},v1=class extends N.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[R9.AXIS_ALIGNED,R9.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},propertyNames:{x:["xName"],y:["yLowName","yHighName","yName"]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:W_e,label:U_e}}),this.properties=new ns,this.dataAggregationFilters=void 0,this.NodeEvent=uze}async processData(e){const{xKey:t,yLowKey:i,yHighKey:n}=this.properties,s=this.getCategoryAxis()?.scale,o=this.getValueAxis()?.scale,{isContinuousX:r,xScaleType:a,yScaleType:l}=this.getScaleInformation({xScale:s,yScale:o}),c=[];this.ctx.animationManager.isSkipped()||(this.processedData&&c.push(H_e(this.id,this.processedData)),c.push($_e()));const u=this.visible?{}:{forceValue:0},{dataModel:d,processedData:p}=await this.requestDataModel(e,this.data,{props:[B_e(t,a,{id:"xValue"}),E9(i,l,{id:"yLowValue",invalidValue:null,...u}),E9(n,l,{id:"yHighValue",invalidValue:null,...u}),...r?[G_e,V_e]:[],...c],groupByKeys:!1});this.smallestDataInterval=p.reduced?.smallestKeyInterval,this.largestDataInterval=p.reduced?.largestKeyInterval,this.dataAggregationFilters=this.aggregateData(d,p),this.animationState.transition("updateData")}aggregateData(e,t){if(t.type!=="ungrouped"||ize(t))return;const i=this.axes[Ox.X];if(i==null)return;const n=e.resolveKeysById(this,"xValue",t),s=e.resolveColumnById(this,"yHighValue",t),o=e.resolveColumnById(this,"yLowValue",t),{index:r}=e.resolveProcessedDataDefById(this,"xValue"),a=t.domain.keys[r];return cze(i.scale.type,n,s,o,a,t.reduced?.smallestKeyInterval)}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{keys:[n]}=t.domain;if(e===this.getCategoryDirection()){const s=i.resolveProcessedDataDefById(this,"xValue");return s?.def.type==="key"&&s?.def.valueType==="category"?n:this.padBandExtent(n)}else{const s=this.domainForClippedRange(e,["yHighValue","yLowValue"],"xValue"),o=eze(s);return j_e(o)}}getSeriesRange(e,t){return this.domainForVisibleRange(Ox.Y,["yHighValue","yLowValue"],"xValue",t)}createNodeData(){const{data:e,dataModel:t,groupScale:i,processedData:n,visible:s}=this,o=this.getCategoryAxis(),r=this.getValueAxis();if(!(e&&o&&r&&t&&n?.dataSources&&this.chart?.seriesRect))return;const a=o.scale,l=r.scale,c=this.getBarDirection()===Ox.X,{xKey:u,yLowKey:d,yHighKey:p,strokeWidth:f}=this.properties,m=`${d}-${p}`,v=aze(this.properties.segmentation,o,r,this.chart.seriesRect,this.ctx.scene),b={itemId:m,nodeData:[],labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible,styles:rze(this.getItemStyle.bind(this)),segments:v};if(!s)return b;const C=n.dataSources.get(this.id)?.data??[],x=t.resolveKeysById(this,"xValue",n),w=t.resolveColumnById(this,"yLowValue",n),M=t.resolveColumnById(this,"yHighValue",n),{barWidth:T,groupIndex:L}=this.updateGroupScale(o),I=Z_e.is(a)?T*-.5:0,R=i.convert(String(L)),O=__e(o?.scale,o?.visibleRange,this.smallestDataInterval,this.largestDataInterval),_=$=>Math.round(a.convert(x[$]))+R+I,B=($,W,Q,q,H,U,ee)=>{const ie=C[$],oe=x[$];if(oe==null)return;const ae=w[$],me=M[$];if(!Number.isFinite(ae?.valueOf())||!Number.isFinite(me?.valueOf()))return;const[xe,be]=ae<me?[ae,me]:[me,ae],ge=Math.round(l.convert(U)),Re=Math.round(l.convert(H)),Ne=Math.max(f,Math.abs(Re-ge)),Pe={x:c?Math.min(ge,Re):Q,y:c?Q:Math.min(ge,Re),width:c?Ne:q,height:c?q:Ne},Be={x:Pe.x+Pe.width/2,y:Pe.y+Pe.height/2},Ue=this.createLabelData({datumIndex:$,rect:Pe,barAlongX:c,yLowValue:xe,yHighValue:be,datum:ie,series:this}),Ae={index:W,series:this,itemId:m,datum:ie,datumIndex:$,xValue:oe,yLowValue:ae,yHighValue:me,yLowKey:d,yHighKey:p,xKey:u,x:Pe.x,y:Pe.y,width:Pe.width,height:Pe.height,midPoint:Be,crisp:ee,labels:Ue};b.nodeData.push(Ae),b.labelData.push(...Ue)},{dataAggregationFilters:V}=this,[j,K]=a.range,Y=Math.abs(K-j),G=V?.find($=>$.maxRange>Y);if(G!=null){const{maxRange:$,indexData:W}=G,[Q,q]=Y_e(1,$,o.range,H=>{const U=H*F9,ee=W[U+_9],ie=W[U+B9];if(ee===-1)return;const oe=Math.trunc((ee+ie)/2);return[_(oe),_(ie)+T]});for(let H=Q;H<q;H+=1){const U=H*F9,ee=W[U+_9],ie=W[U+B9],oe=W[U+sze],ae=W[U+nze];if(ee===-1)continue;const me=Math.trunc((ee+ie)/2);if(x[me]==null)continue;const be=_(me),ge=Math.abs(_(ee)-_(ie))+T,Re=w[oe],Ne=M[ae];B(me,0,be,ge,Re,Ne,!1)}}else if(n.type==="ungrouped"){const $=n.invalidData?.get(this.id);let[W,Q]=this.visibleRangeIndices("xValue",o.range);n.input.count<1e3&&(W=0,Q=n.input.count);for(let q=W;q<Q;q+=1){if($?.[q]===!0)continue;const H=_(q),U=T,ee=w[q],ie=M[q];B(q,0,H,U,ee,ie,O)}}else for(const{datumIndex:$,groupIndex:W}of t.forEachGroupDatum(this,n)){const Q=_($),q=T,H=w[$],U=M[$];B($,W,Q,q,H,U,O)}return b}createLabelData({datumIndex:e,rect:t,barAlongX:i,yLowValue:n,yHighValue:s,datum:o,series:r}){const{xKey:a,yLowKey:l,yHighKey:c,xName:u,yLowName:d,yHighName:p,yName:f,legendItemName:m,label:v}=this.properties,b={datum:o,xKey:a,yLowKey:l,yHighKey:c,xName:u,yLowName:d,yHighName:p,yName:f,legendItemName:m},{placement:C}=v,M=(v.spacing+(typeof v.padding=="number"?v.padding:0))*(C==="outside"?1:-1),T=this.getSeriesDomain(Ox.Y),L={datumIndex:e,x:t.x+(i?-M:t.width/2),y:t.y+(i?t.height/2:t.height+M),textAlign:i?"left":"center",textBaseline:i?"middle":"bottom",text:this.getLabelText(n,o,l,"y",T,v,{itemId:"low",value:n,...b}),itemId:"low",datum:o,series:r},I={datumIndex:e,x:t.x+(i?t.width+M:t.width/2),y:t.y+(i?t.height/2:-M),textAlign:i?"right":"center",textBaseline:i?"middle":"top",text:this.getLabelText(s,o,c,"y",T,v,{itemId:"high",value:s,...b}),itemId:"high",datum:o,series:r};return C==="outside"&&(L.textAlign=i?"right":"center",L.textBaseline=i?"middle":"top",I.textAlign=i?"left":"center",I.textBaseline=i?"middle":"bottom"),[L,I]}nodeFactory(){return new q_e}getStyle(e,t,i){const{cornerRadius:n,fill:s,fillOpacity:o,lineDash:r,lineDashOffset:a,stroke:l,strokeOpacity:c,strokeWidth:u,styler:d}=this.properties;let p={};if(!e&&d){const f=this.makeStylerParams(t,i);p=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.cachedCallWithContext(d,f)??{},{pick:!1})??{}}return{cornerRadius:p.cornerRadius??n,fill:p.fill??s,fillOpacity:p.fillOpacity??o,lineDash:p.lineDash??r,lineDashOffset:p.lineDashOffset??a,opacity:1,stroke:p.stroke??l,strokeOpacity:p.strokeOpacity??c,strokeWidth:p.strokeWidth??u}}makeStylerParams(e,t){const{id:i}=this,{cornerRadius:n,fill:s,fillOpacity:o,lineDash:r,lineDashOffset:a,stroke:l,strokeOpacity:c,strokeWidth:u,xKey:d,yLowKey:p,yHighKey:f}=this.properties,m=lze(t??G9.None);return{cornerRadius:n,fill:s,fillOpacity:o,highlightState:m,highlighted:e,lineDash:r,lineDashOffset:a,seriesId:i,stroke:l,strokeOpacity:c,strokeWidth:u,xKey:d,yLowKey:p,yHighKey:f}}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,n=t??[];return i.update(n,void 0,s=>this.getDatumId(s))}getItemStyle(e,t,i){const{properties:n,dataModel:s,processedData:o}=this,{itemStyler:r}=n,a=this.getHighlightStyle(t,e,i);let l=z9(a,this.getStyle(e===void 0,t,i));if(r&&s!=null&&o!=null&&e!=null){const c=s.resolveKeysById(this,"xValue",o)[e],u=this.cachedDatumCallback(X_e(this.getDatumId({xValue:c}),t?"highlight":"node"),()=>{const d=this.makeItemStylerParams(e,t,l);return this.callWithContext(r,d)});u&&(l=z9(u,l))}return l}makeItemStylerParams(e,t,i){const{id:n,properties:s,processedData:o}=this,{xKey:r,yHighKey:a,yLowKey:l}=s,c=o.dataSources.get(n)?.data[e],u=this.ctx.highlightManager?.getActiveHighlight(),d=this.getHighlightStateString(u,t,e),p=this.filterItemStylerFillParams(i.fill)??i.fill;return{seriesId:n,datum:c,xKey:r,yHighKey:a,yLowKey:l,highlighted:t,highlightState:d,...i,fill:p}}updateDatumStyles(e){const t=this.ctx.highlightManager.getActiveHighlight();e.datumSelection.each((i,n)=>{if(!e.datumSelection.isGarbage(i)){const s=this.getHighlightState(t,e.isHighlight,n.datumIndex);n.style=this.getItemStyle(n.datumIndex,e.isHighlight,s)}})}updateDatumNodes({datumSelection:e,isHighlight:t}){const{contextNodeData:i}=this;if(!i)return;const n=this.ctx.highlightManager.getActiveHighlight(),s=this.getCategoryDirection()===Ox.X,o=this.getShapeFillBBox();e.each((r,a)=>{const l=a.style??i.styles[this.getHighlightState(n,t,a.datumIndex)];J_e(r,l,o),r.cornerRadius=l.cornerRadius??0,r.visible=s?a.width>0:a.height>0,r.crisp=a.crisp})}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=Q_e.None})}updateLabelNodes(e){const t={xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xKey,yName:this.properties.yName,yLowKey:this.properties.yLowKey,yLowName:this.properties.yLowName??this.properties.yLowKey,yHighKey:this.properties.yHighKey,yHighName:this.properties.yHighName??this.properties.yHighKey,legendItemName:this.properties.legendItemName},i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((n,s)=>{n.fillOpacity=this.getHighlightStyle(!1,s?.datumIndex).opacity??1,z_e(this,n,t,this.properties.label,s,!1,i)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s}=this,{xKey:o,xName:r,yName:a,yLowKey:l,yHighKey:c,yLowName:u,yHighName:d,tooltip:p,legendItemName:f}=s,m=this.getCategoryAxis(),v=this.getValueAxis();if(!i||!n||!m||!v)return;const b=n.dataSources.get(this.id)?.data[e],C=i.resolveKeysById(this,"xValue",n)[e],x=i.resolveColumnById(this,"yHighValue",n)[e],w=i.resolveColumnById(this,"yLowValue",n)[e];if(C==null)return;const M=this.getItemStyle(e,!1),T=`${this.getAxisValueText(v,"tooltip",w,b,l,f)} - ${this.getAxisValueText(v,"tooltip",x,b,c,f)}`;return this.formatTooltipWithContext(p,{heading:this.getAxisValueText(m,"tooltip",C,b,o,f),symbol:this.legendItemSymbol(),data:[{label:a,fallbackLabel:`${u??l} - ${d??c}`,value:T}]},{seriesId:t,datum:b,title:a,xKey:o,xName:r,yName:a,yLowKey:l,yHighKey:c,yLowName:u,yHighName:d,legendItemName:f,...M})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:n,strokeOpacity:s,lineDash:o,lineDashOffset:r}=this.getStyle(!1,!1,G9.None);return{marker:{fill:e,stroke:t,fillOpacity:n,strokeOpacity:s,strokeWidth:i,lineDash:o,lineDashOffset:r}}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{yName:n,yLowName:s,yHighName:o,yLowKey:r,yHighKey:a,legendItemName:l,showInLegend:c}=this.properties,u=l??n??`${s??r} - ${o??a}`,d=`${r}-${a}`;return[{legendType:"category",id:t,itemId:d,seriesId:t,enabled:i,label:{text:`${u}`},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!c}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){const i=L9(P9(this.isVertical(),"normal"),"unknown");O9.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],i),N9(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:n,previousContextData:s}=e,o=N.calculateDataDiff(this.id,t,this.getDatumId.bind(this),n,s,this.processedData,this.processedDataUpdated);this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=s==null?"fade":"normal",a=L9(P9(this.isVertical(),r),"added");O9.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],a,(l,c)=>this.getDatumId(c),o),(o?.changed||!tze(n.groupScale,s?.groupScale))&&N9(this,"labels",this.ctx.animationManager,i)}getDatumId(e){return`${e.xValue}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:e}){return K_e(this,this.contextNodeData?.nodeData[e])}hasItemStylers(){return this.properties.styler!=null||this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}};v1.className="RangeBarSeries";v1.type="range-bar";var{commonSeriesOptionsDefs:dze,rangeBarSeriesThemeableOptionsDef:hze}=N,OW={...dze,...hze,type:ue(ht("range-bar")),xKey:ue(J),yLowKey:ue(J),yHighKey:ue(J),xName:J,yName:J,yLowName:J,yHighName:J,legendItemName:J,segmentation:vg};OW.pickOutsideVisibleMinorAxis=Xe(te);OW.focusPriority=Xe(ve);var pze={series:{direction:"vertical",fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",N.FILL_GRADIENT_LINEAR_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS]]},stroke:{$palette:"stroke"},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{...N.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},placement:"inside",padding:{$isUserOption:["./spacing",0,6]}},highlight:N.multiSeriesHighlightStyle(),segmentation:N.SEGMENTATION_DEFAULTS},axes:{[N.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},gze={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",moduleFactory:e=>new v1(e),predictAxis:N.predictCartesianTimeAxis,defaultAxes:N.DIRECTION_SWAP_AXES,themeTemplate:pze,groupable:!0},Lre={type:"series",name:"range-bar",chartType:"cartesian",enterprise:!0,options:OW,create:e=>new v1(e)},{AbstractBarSeriesProperties:fze,BaseProperties:tM,PropertiesArray:mze,makeSeriesTooltip:yze,Property:Xt,DropShadow:vze,Label:bze}=N,b1=class extends tM{};D([Xt],b1.prototype,"totalType");D([Xt],b1.prototype,"index");D([Xt],b1.prototype,"axisLabel");var Pre=class extends tM{};D([Xt],Pre.prototype,"renderer");var FW=class extends bze{constructor(){super(...arguments),this.placement="outside-end",this.spacing=0}};D([Xt],FW.prototype,"placement");D([Xt],FW.prototype,"spacing");var qo=class extends tM{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new vze().set({enabled:!1}),this.label=new FW,this.tooltip=new Pre}};D([Xt],qo.prototype,"name");D([Xt],qo.prototype,"fill");D([Xt],qo.prototype,"stroke");D([Xt],qo.prototype,"fillOpacity");D([Xt],qo.prototype,"strokeOpacity");D([Xt],qo.prototype,"lineDash");D([Xt],qo.prototype,"lineDashOffset");D([Xt],qo.prototype,"strokeWidth");D([Xt],qo.prototype,"cornerRadius");D([Xt],qo.prototype,"itemStyler");D([Xt],qo.prototype,"shadow");D([Xt],qo.prototype,"label");D([Xt],qo.prototype,"tooltip");var xy=class extends tM{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};D([Xt],xy.prototype,"enabled");D([Xt],xy.prototype,"stroke");D([Xt],xy.prototype,"strokeOpacity");D([Xt],xy.prototype,"lineDash");D([Xt],xy.prototype,"lineDashOffset");D([Xt],xy.prototype,"strokeWidth");var S1=class extends tM{constructor(){super(...arguments),this.positive=new qo,this.negative=new qo,this.total=new qo}};D([Xt],S1.prototype,"positive");D([Xt],S1.prototype,"negative");D([Xt],S1.prototype,"total");var Eh=class extends fze{constructor(){super(...arguments),this.item=new S1,this.totals=new mze(b1),this.line=new xy,this.tooltip=yze()}getStyle(e){const{fillOpacity:t,strokeWidth:i,strokeOpacity:n,fill:s,stroke:o,lineDash:r,lineDashOffset:a,cornerRadius:l}=this.item[e==="subtotal"?"total":e];return{fill:s,fillOpacity:t,stroke:o,strokeWidth:i,strokeOpacity:n,lineDash:r,lineDashOffset:a,cornerRadius:l,opacity:1}}};D([Xt],Eh.prototype,"xKey");D([Xt],Eh.prototype,"yKey");D([Xt],Eh.prototype,"xName");D([Xt],Eh.prototype,"yName");D([Xt],Eh.prototype,"item");D([Xt],Eh.prototype,"totals");D([Xt],Eh.prototype,"line");D([Xt],Eh.prototype,"tooltip");var{adjustLabelPlacement:Sze,SeriesNodePickMode:V9,fixNumericExtent:Cze,valueProperty:H9,keyProperty:xze,accumulativeValueProperty:Pk,trailingAccumulatedValueProperty:wze,ChartAxisDirection:Nk,createDatumId:Dze,checkCrisp:Mze,updateLabelNode:Aze,prepareBarAnimationFunctions:kze,collapsedStartingBarPosition:Tze,resetBarSelectionsFn:Ize,seriesLabelFadeInAnimation:Rze,resetLabelFn:Eze,animationValidation:Lze,DEFAULT_CARTESIAN_DIRECTION_KEYS:Pze,DEFAULT_CARTESIAN_DIRECTION_NAMES:Nze,computeBarFocusBounds:Oze,isContinuous:W9,Rect:Fze,motion:Bze,applyShapeStyle:_ze,mergeDefaults:j9,getItemStylesPerItemId:zze,DataSet:Gze}=N,C1=class extends N.AbstractBarSeries{constructor(e){super({moduleCtx:e,propertyKeys:Pze,propertyNames:Nze,categoryKey:void 0,pickModes:[V9.NEAREST_NODE,V9.EXACT_SHAPE_MATCH],pathsPerSeries:["connector"],pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:Ize,label:Eze}}),this.properties=new Eh,this.seriesItemTypes=new Set(["positive","negative","total"])}async processData(e){const{xKey:t,yKey:i,totals:n}=this.properties,{data:s}=this;if(!this.visible)return;const o=x=>W9(x)&&Number(x)>=0,r=x=>W9(x)&&Number(x)>=0,a=x=>x==="total"||x==="subtotal",l={missingValue:void 0,invalidValue:void 0},c=[],u=n.reduce((x,w)=>{const M=x.get(w.index);return M?M.push(w):x.set(w.index,[w]),x},new Map);for(const[x,w]of s?.data.entries()??[]){c.push(w);const M=u.get(x);if(M)for(const T of M)c.push({...T.toJson(),[t]:T.axisLabel})}const d=[];this.ctx.animationManager.isSkipped()||d.push(Lze());const p=this.getCategoryAxis()?.scale,f=this.getValueAxis()?.scale,{isContinuousX:m,xScaleType:v,yScaleType:b}=this.getScaleInformation({xScale:p,yScale:f}),{processedData:C}=await this.requestDataModel(e,Gze.wrap(c),{props:[xze(t,v,{id:"xValue"}),Pk(i,b,{...l,id:"yCurrent"}),Pk(i,b,{...l,missingValue:0,id:"yCurrentTotal"}),Pk(i,b,{...l,id:"yCurrentPositive",validation:o}),Pk(i,b,{...l,id:"yCurrentNegative",validation:r}),wze(i,b,{...l,id:"yPrevious"}),H9(i,b,{id:"yRaw"}),H9("totalType","category",{id:"totalTypeValue",missingValue:void 0,validation:a}),...m?[N.SMALLEST_KEY_INTERVAL,N.LARGEST_KEY_INTERVAL]:[],...d]});this.smallestDataInterval=C.reduced?.smallestKeyInterval,this.largestDataInterval=C.reduced?.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{keys:[n],values:s}=t.domain;if(e===this.getCategoryDirection()){const o=i.resolveProcessedDataDefById(this,"xValue");if(o?.def.type==="key"&&o?.def.valueType==="category")return n;const r=e===Nk.Y,a=this.getCategoryAxis().isReversed();return this.padBandExtent(n,a!==r)}else{const o=i.resolveProcessedDataIndexById(this,"yCurrent"),r=s[o],a=[Math.min(0,r[0]),Math.max(0,r[1])];return Cze(a)}}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}createNodeData(){const{data:e,dataModel:t,processedData:i}=this,n=this.getCategoryAxis(),s=this.getValueAxis();if(!e||!n||!s||!t||!i)return;const{line:o}=this.properties,r=n.scale,a=s.scale,l=this.getBarDirection()===Nk.X,c=this.getBandwidth(n)??10,u=n.isReversed(),d=s.isReversed();if(i.type!=="ungrouped")return;const p={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible,styles:zze(this.getItemStyle.bind(this),"total","subtotal","positive","negative")};if(!this.visible)return p;const f=[],m=t.resolveKeysById(this,"xValue",i),v=t.resolveColumnById(this,"yRaw",i),b=t.resolveColumnById(this,"totalTypeValue",i),C=t.resolveColumnById(this,"yCurrent",i),x=t.resolveColumnById(this,"yPrevious",i),w=t.resolveColumnById(this,"yCurrentTotal",i),M=this.getSeriesDomain(Nk.Y),T=Mze(n?.scale,n?.visibleRange,this.smallestDataInterval,this.largestDataInterval);function L(Y,G,$){return Y||G?{cumulativeValue:w[$],trailingValue:G?R:0}:{cumulativeValue:C[$],trailingValue:x[$]}}function I(Y,G,$,W,Q){return Y?W:G?(W??0)-(Q??0):$}let R=0;const{xKey:O,yKey:_,xName:B,yName:V}=this.properties,j=i.dataSources.get(this.id)?.data??[];for(const[Y,G]of j.entries()){const $=b[Y],W=this.isSubtotal($),Q=this.isTotal($),q=Q||W,H=m[Y];if(H==null)continue;const U=Math.round(r.convert(H)),ee=v[Y],{cumulativeValue:ie,trailingValue:oe}=L(Q,W,Y);q&&(R=ie??0);const ae=Math.round(a.convert(ie)),me=Math.round(a.convert(oe)),xe=I(Q,W,ee,ie,oe),be=(xe??0)>=0,ge=this.getSeriesItemType(be,$),{strokeWidth:Re,label:Ne}=this.getItemConfig(ge),Pe=be?ae:me,Be=be?me:ae,Ue=Math.max(Re,Math.abs(Be-Pe)),Ae={x:l?Math.min(Pe,Be):U,y:l?U:Math.min(Pe,Be),width:l?Ue:c,height:l?c:Ue},Ve={x:Ae.x+Ae.width/2,y:Ae.y+Ae.height/2},$e=q?ae:me,Qe=Math.floor(o.strokeWidth)%2/2,Oe=u?ae:$e,Ze=u?$e:ae;let dt,Tt;l?(dt={x:Oe+Qe,y:Ae.y},Tt={x:Ze+Qe,y:Ae.y+Ae.height}):(dt={x:Ae.x,y:Oe+Qe},Tt={x:Ae.x+Ae.width,y:Ze+Qe});const gt={x:u?Tt.x:dt.x,y:u?Tt.y:dt.y,x2:u?dt.x:Tt.x,y2:u?dt.y:Tt.y,size:0};f.push(gt);const Lt=ge==="subtotal"?"total":ge,Gi=this.getLabelText(xe,G,_,"y",M,Ne,{itemId:Lt,value:xe,datum:G,xKey:O,yKey:_,xName:B,yName:V}),Ti=Ne.spacing+(typeof Ne.padding=="number"?Ne.padding:0),Ht={index:Y,series:this,itemId:ge,datum:G,datumIndex:Y,cumulativeValue:ie??0,xValue:H,yValue:xe,yKey:_,xKey:O,x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,midPoint:Ve,crisp:T,label:{text:Gi,...Sze({isUpward:(xe??-1)>=0!==d,isVertical:!l,placement:Ne.placement,spacing:Ti,rect:Ae})}};p.nodeData.push(Ht),p.labelData.push(Ht)}const K=this.properties.line.enabled;return C!=null&&K&&(p.pointData=f),p}updateSeriesItemTypes(){const{dataModel:e,seriesItemTypes:t,processedData:i}=this;if(!e||!i)return;t.clear();const n=e.resolveProcessedDataIndexById(this,"yCurrentPositive"),s=e.resolveProcessedDataIndexById(this,"yCurrentNegative"),o=e.resolveProcessedDataIndexById(this,"totalTypeValue"),r=i.domain.values[n]??[],a=i.domain.values[s]??[];r.length>0&&t.add("positive"),a.length>0&&t.add("negative");const l=i?.domain.values[o];if(l)for(const c of l)(c==="total"||c==="subtotal")&&t.add("total")}isSubtotal(e){return e==="subtotal"}isTotal(e){return e==="total"}nodeFactory(){return new Fze}getSeriesItemType(e,t){return t??(e?"positive":"negative")}getItemConfig(e){switch(e){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,n=t??[];return i.update(n)}getItemStyle(e,t,i,n="total"){const{properties:s}=this,{datumIndex:o=0,datum:r}=e??{},a=n==="subtotal"?"total":n,l=s.item[a],c=this.getHighlightStyle(t,o,i),u=j9(c,s.getStyle(n)),{itemStyler:d}=l;let p=u;if(d!=null&&e!=null){const f=this.cachedDatumCallback(Dze(o,t?"highlight":"node"),()=>{const m=this.makeItemStylerParams(n,o,r,t,p);return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`,"item",a],this.callWithContext(d,m))});f&&(p=j9(f,p))}return p}makeItemStylerParams(e,t,i,n,s){const{id:o,properties:r}=this,{xKey:a,yKey:l}=r,c=this.ctx.highlightManager?.getActiveHighlight(),u=this.getHighlightStateString(c,n,t),d=this.filterItemStylerFillParams(s.fill)??s.fill;return{seriesId:o,itemId:e,datum:i,xKey:a,yKey:l,highlighted:n,highlightState:u,...s,fill:d}}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,n)=>{n.style=this.getItemStyle(n,t,void 0,n.itemId)})}updateDatumNodes({datumSelection:e,isHighlight:t}){const{contextNodeData:i}=this;if(!i)return;const n=this.ctx.highlightManager.getActiveHighlight(),s=this.getCategoryDirection()===Nk.X,o=this.getShapeFillBBox();e.each((r,a)=>{const l=a.style??i.styles[a.itemId][this.getHighlightState(n,t,a.datumIndex)];_ze(r,l,o),r.cornerRadius=l.cornerRadius??0,r.visible=s?a.width>0:a.height>0,r.crisp=a.crisp})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;if(t.length===0)return i.update([]);const n=t.filter(s=>{const{label:o}=this.getItemConfig(s.itemId);return o.enabled});return i.update(n)}updateLabelNodes(e){const t={itemId:"positive",xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xName,yKey:this.properties.yKey,yName:this.properties.yName??this.properties.yName},i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((n,s)=>{t.itemId=s.itemId,n.fillOpacity=this.getHighlightStyle(!1,s.datumIndex)?.opacity??1;const o=this.getItemConfig(s.itemId).label;Aze(this,n,t,o,s.label,!1,i)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s}=this,{xKey:o,xName:r,yKey:a,yName:l,tooltip:c,legendItemName:u}=s,d=this.getCategoryAxis(),p=this.getValueAxis();if(!i||!n||!d||!p)return;const f=n.dataSources.get(this.id)?.data[e],m=i.resolveKeysById(this,"xValue",n)[e],v=i.resolveColumnById(this,"yRaw",n)[e],b=i.resolveColumnById(this,"yCurrentTotal",n),C=i.resolveColumnById(this,"totalTypeValue",n);if(m==null)return;const x=C[e],w=(v??0)>=0,M=this.getSeriesItemType(w,x);let T;if(this.isTotal(x))T=b[e];else if(this.isSubtotal(x)){T=b[e];for(let R=e-1;R>=0;R-=1)if(this.isSubtotal(C[R])){T=T-b[R];break}}else T=v;const L=this.contextNodeData?.nodeData?.[e],I=this.getItemStyle(L,!1,void 0,L?.itemId);return this.formatTooltipWithContext(c,{heading:this.getAxisValueText(d,"tooltip",m,f,o,u),symbol:this.legendItemSymbol(M),data:[{label:l,fallbackLabel:a,value:this.getAxisValueText(p,"tooltip",T,f,a,u)}]},{seriesId:t,datum:f,title:l,itemId:M,xKey:o,xName:r,yKey:a,yName:l,...I})}legendItemSymbol(e){const{fill:t,stroke:i,fillOpacity:n,strokeOpacity:s,strokeWidth:o,lineDash:r,lineDashOffset:a}=this.getItemConfig(e);return{marker:{fill:t,stroke:i,fillOpacity:n,strokeOpacity:s,strokeWidth:o,lineDash:r,lineDashOffset:a}}}getLegendData(e){if(e!=="category")return[];const{id:t,seriesItemTypes:i}=this,n=[],s=r=>r.charAt(0).toUpperCase()+r.substring(1),{showInLegend:o}=this.properties;for(const r of i){const{name:a}=this.getItemConfig(r);n.push({legendType:"category",id:t,itemId:r,seriesId:t,enabled:!0,label:{text:a??s(r)},symbol:this.legendItemSymbol(r),hideInLegend:!o,isFixed:!0})}return n}toggleSeriesItem(){}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:n}=e,s=kze(Tze(this.isVertical(),this.axes,"normal"),"unknown");Bze.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],s),Rze(this,"labels",this.ctx.animationManager,i);const{pointData:o}=n;o&&(this.isVertical()?this.animateConnectorLinesVertical(e):this.animateConnectorLinesHorizontal(e))}animateConnectorLinesHorizontal(e){const{pointData:t=[]}=e.contextData,[i]=e.paths,{path:n}=i;this.updateLineNode(i);const s=this.getValueAxis(),o=s?.isReversed(),r=o?(u,d)=>u<d:(u,d)=>u>d,a=s?.scale.convert(0),l=t.reduce((u,d)=>(r(d.x,u)&&(u=d.x),u),o?1/0:0),c=(u,d,p,f,m)=>(u-d)/(p-d)*(m-f)+f;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:a,to:l,ease:N.Motion.easeOut,collapsable:!1,onUpdate(u){n.clear(!0);for(const[d,p]of t.entries()){const f=c(u,a,l,a,p.x),m=c(u,a,l,a,p.x2);d!==0&&n.lineTo(f,p.y),n.moveTo(m,p.y2)}i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(e)})}animateConnectorLinesVertical(e){const{pointData:t=[]}=e.contextData,[i]=e.paths,{path:n}=i;this.updateLineNode(i);const s=this.getValueAxis(),o=s?.isReversed(),r=o?(u,d)=>u>d:(u,d)=>u<d,a=s?.scale.convert(0),l=t.reduce((u,d)=>(r(d.y,u)&&(u=d.y),u),o?0:1/0),c=(u,d,p,f,m)=>(u-d)/(p-d)*(m-f)+f;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:a,to:l,ease:N.Motion.easeOut,collapsable:!1,onUpdate(u){n.clear(!0);for(const[d,p]of t.entries()){const f=c(u,a,l,a,p.y),m=c(u,a,l,a,p.y2);d!==0&&n.lineTo(p.x,f),n.moveTo(p.x2,m)}i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(e)})}animateReadyResize(e){super.animateReadyResize(e),this.resetConnectorLinesPath(e)}updatePaths(e){this.resetConnectorLinesPath({contextData:e.contextData,paths:e.paths})}resetConnectorLinesPath({contextData:e,paths:t}){if(t.length===0)return;const[i]=t;this.updateLineNode(i);const{path:n}=i;n.clear(!0);const{pointData:s}=e;if(s){for(const[o,r]of s.entries())o!==0&&n.lineTo(r.x,r.y),n.moveTo(r.x2,r.y2);i.checkPathDirty()}}updateLineNode(e){const{stroke:t,strokeWidth:i,strokeOpacity:n,lineDash:s,lineDashOffset:o}=this.properties.line;e.setProperties({fill:void 0,stroke:t,strokeWidth:i,strokeOpacity:n,lineDash:s,lineDashOffset:o,lineJoin:"round",pointerEvents:N.PointerEvents.None})}isLabelEnabled(){const{positive:e,negative:t,total:i}=this.properties.item;return e.label.enabled||t.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:e}){return Oze(this,this.contextNodeData?.nodeData[e])}hasItemStylers(){const{positive:e,negative:t,total:i}=this.properties.item;return e.itemStyler!=null||e.label.itemStyler!=null||t.itemStyler!=null||t.label.itemStyler!=null||i.itemStyler!=null||i.label.itemStyler!=null}};C1.className="WaterfallSeries";C1.type="waterfall";var{commonSeriesOptionsDefs:Vze,waterfallSeriesThemeableOptionsDef:Hze}=N,Wze={...Hze,...Vze,type:ue(ht("waterfall")),xKey:ue(J),yKey:ue(J),xName:J,yName:J,totals:Sn({totalType:ue(Me("total","subtotal")),index:ue(re),axisLabel:ue(J)},"a total definition options array")},{FILL_GRADIENT_LINEAR_KEYED_DEFAULTS:jze,FILL_IMAGE_DEFAULTS:Uze,FILL_PATTERN_KEYED_DEFAULTS:$ze}=N;function u2(e,t){return{fill:{$applySwitch:[{$path:"type"},{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$path:[`/${t}`,{$palette:"fill"},{$palette:"fills"}]},{$palette:`${e}.fill`}]},["gradient",jze(e)],["image",Uze],["pattern",$ze(e)]]},stroke:{$palette:`${e}.stroke`},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{...N.LABEL_BOXING_DEFAULTS,enabled:!1,fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},formatter:void 0,placement:"outside-end",padding:{$isUserOption:["./spacing",0,6]}}}}var Kze={series:{item:{positive:u2("altUp",0),negative:u2("altDown",1),total:u2("neutral",2)},line:{stroke:{$palette:"neutral.stroke"},strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2},highlight:N.singleSeriesHighlightStyle()},legend:{enabled:!0,toggleSeries:!1}},Yze={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,moduleFactory:e=>new C1(e),defaultAxes:N.DIRECTION_SWAP_AXES,themeTemplate:Kze},Nre={type:"series",name:"waterfall",chartType:"cartesian",enterprise:!0,options:Wze,create:e=>new C1(e)},{NewAreaSeriesModule:Xze,NewBarSeriesModule:Zze,NewBubbleSeriesModule:qze,NewHistogramSeriesModule:Qze,NewLineSeriesModule:Jze,NewScatterSeriesModule:eGe,numberFormatValidator:tGe,textOrSegments:iGe,without:ha}=N,U9={width:re,height:re,grip:te,fill:Fe,stroke:Fe,strokeWidth:re,cornerRadius:re},Zr=["cursor","highlightStyle","listeners","nodeClickRange","showInLegend","showInMiniChart","tooltip","visible","xName","yName"],Ore=[...Zr,"errorBar","label","legendItemName","direction"],Fre=[...Zr,"direction","legendItemName","minName","q1Name","medianName","q3Name","maxName"],Bre=[...Zr,"title","label","labelKey","labelName","sizeName"],_re=[...Zr,"title","label","colorName","textAlign","verticalAlign","itemPadding","colorRange"],zre=[...Zr,"label"],Gre=[...Zr,"errorBar","title","label"],Vre=[...Zr,"label","yLowName","yHighName"],Hre=[...Zr,"direction","label","yLowName","yHighName"],Wre=[...Zr,"errorBar","title","label","labelKey","labelName"],jre=[...Zr,"direction"],nGe={enabled:te,height:re,spacing:re,cornerRadius:ve,mask:{fill:Fe,fillOpacity:Ke,stroke:Fe,strokeWidth:re},minHandle:U9,maxHandle:U9,miniChart:{enabled:te,padding:{top:re,bottom:re},label:{enabled:te,avoidCollisions:te,spacing:re,format:tGe,formatter:Qo(iGe),interval:{minSpacing:re,maxSpacing:re,values:Mc,step:ve},...fi},series:Sn(Xm({area:ha(Xze.options,[...Zr,"type"]),bar:ha(Zze.options,[...Ore,"type"]),"box-plot":ha(Cre.options,[...Fre,"type"]),bubble:ha(qze.options,[...Bre,"type"]),candlestick:ha(Mre.options,[...Zr,"type"]),heatmap:ha(kre.options,[..._re,"type"]),histogram:ha(Qze.options,[...zre,"type"]),line:ha(Jze.options,[...Gre,"type"]),ohlc:ha(Tre.options,[...Zr,"type"]),"range-area":ha(Ere.options,[...Vre,"type"]),"range-bar":ha(Lre.options,[...Hre,"type"]),scatter:ha(eGe.options,[...Wre,"type"]),waterfall:ha(Nre.options,[...jre,"type"])},"miniChart series options"))}},sGe=["area","bar","bubble","candlestick","heatmap","histogram","line","ohlc","range-area","range-bar","scatter","waterfall"],oGe=["itemStyler","direction","fill","fillGradientDefaults","fillPatternDefaults","fillImageDefaults","fillOpacity","shadow","focusPriority","highlight","lineDash","lineDashOffset","strokeWidth"];function $9(e,t){return{$merge:[{$switch:[t,{},[["area","line","range-area"],{marker:{enabled:{$isUserOption:["/series/$index/marker/enabled",{$path:["/series/$index/marker/enabled",!1]},!1]}}}]]},{$omit:[{$switch:[t,Zr,["bar",Ore],["box-plot",Fre],["bubble",Bre],["heatmap",_re],["histogram",zre],["line",[...Gre,...oGe]],["range-area",Vre],["range-bar",Hre],["scatter",Wre],["waterfall",jre]]},e]}]}}var rGe={enabled:!1,height:{$if:[{$path:"./miniChart/enabled"},40,18]},cornerRadius:4,mask:{fill:{$ref:"foregroundColor"},fillOpacity:.1,stroke:{$ref:"borderColor"},strokeWidth:1},minHandle:{fill:{$ref:"chartBackgroundColor"},stroke:{$ref:"borderColor"},strokeWidth:1,width:12,height:24,cornerRadius:4},maxHandle:{fill:{$ref:"chartBackgroundColor"},stroke:{$ref:"borderColor"},strokeWidth:1,width:12,height:24,cornerRadius:4},miniChart:{enabled:!1,label:{color:{$ref:"textColor"},fontSize:{$rem:N.FONT_SIZE_RATIO.SMALLER},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:5},padding:{top:0,bottom:0},series:{$apply:[$9({$path:"/series/$index"},{$path:["/navigator/miniChart/series/$index/type",{$path:["type",{$path:"/series/$index/type"}]}]}),{$if:[{$or:sGe.map(e=>({$eq:[{$path:"/series/0/type"},e]}))},{$map:[$9({$value:"$1"},{$path:"/series/$index/type"}),{$path:"/series"}]},void 0]}]}}},aGe={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new oC(e),removable:!1,themeTemplate:{navigator:rGe}},{ToolbarButtonProperties:lGe,Property:cGe}=N,Ure=class extends lGe{};D([cGe],Ure.prototype,"value");var{ChartAxisDirection:d2,LayoutElement:uGe,PropertiesArray:dGe,Toolbar:hGe,Property:$re}=N,BW=class extends N.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.buttons=new dGe(Ure),this.verticalSpacing=10,this.container=e.domManager.addChild("canvas-overlay","range-buttons"),this.container.role="presentation",this.toolbar=new hGe(this.ctx,"ariaLabelRangesToolbar","horizontal"),this.toolbar.addClass("ag-charts-range-buttons"),this.container.append(this.toolbar.getElement()),this.cleanup.register(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),e.layoutManager.registerElement(uGe.ToolbarBottom,this.onLayoutStart.bind(this)),e.eventsHub.on("zoom:change",this.onZoomChanged.bind(this)),this.teardown.bind(this))}teardown(){this.toolbar.getElement().remove(),this.toolbar.destroy()}onLayoutStart(e){const{buttons:t,ctx:i,enabled:n,toolbar:s,verticalSpacing:o}=this,{layoutBox:r}=e;if(!n||!i.zoomManager.isZoomEnabled()){s.setHidden(!0);return}s.setHidden(!1),s.updateButtons(t);const a=s.getBounds().height;s.setBounds({x:r.x,y:r.y+r.height-a,width:r.width,height:a}),r.shrink({bottom:a+o})}onZoomChanged(){this.toolbar.clearActiveButton()}onButtonPress({button:{index:e}}){const{zoomManager:t}=this.ctx,i=this.buttons.at(e);if(!i)return;const{value:n}=i;n==null?t.resetZoom("zoom-buttons"):typeof n=="number"?t.extendToEnd("zoom-buttons",d2.X,n):Array.isArray(n)?t.updateWith("zoom-buttons",d2.X,()=>n):typeof n=="function"&&t.updateWith("zoom-buttons",d2.X,n),this.toolbar.toggleActiveButtonByIndex(e)}};D([$re],BW.prototype,"enabled");D([$re],BW.prototype,"buttons");var Kre=1e3*60*60*24,h2=Kre*30,pGe=Kre*365,gGe={type:"root",optionsKey:"ranges",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new BW(e),themeTemplate:{ranges:{enabled:!1,buttons:{$shallowSimple:[{label:"toolbarRange1Month",ariaLabel:"toolbarRange1MonthAria",value:h2},{label:"toolbarRange3Months",ariaLabel:"toolbarRange3MonthsAria",value:3*h2},{label:"toolbarRange6Months",ariaLabel:"toolbarRange6MonthsAria",value:6*h2},{label:"toolbarRangeYearToDate",ariaLabel:"toolbarRangeYearToDateAria",value:(e,t)=>[new Date(`${new Date(t).getFullYear()}-01-01`).getTime(),void 0]},{label:"toolbarRange1Year",ariaLabel:"toolbarRange1YearAria",value:pGe},{label:"toolbarRangeAll",ariaLabel:"toolbarRangeAllAria",value:void 0}]}}}},Yre=class rw extends N.BaseModuleInstance{constructor(t){super(),this.ctx=t,this.activeSections=new Set,this.sectionButtons={annotations:[],chartToolbar:[]},this.container=this.ctx.domManager.addChild("canvas-overlay","shared-toolbar"),this.container.role="presentation"}getSharedToolbar(t){return this.sharedToolbar||this.createSharedToolbar(),t==="chartToolbar"&&this.sharedToolbar&&this.sharedToolbar.setAriaLabelId("ariaLabelFinancialCharts"),this.toolbarWithSection(t)}createSharedToolbar(){this.sharedToolbar=new N.Toolbar(this.ctx,"ariaLabelAnnotationsToolbar","vertical"),this.sharedToolbar.addClass("ag-charts-shared-toolbar"),this.container.append(this.sharedToolbar.getElement()),this.cleanup.register(()=>{this.sharedToolbar&&(this.sharedToolbar.getElement().remove(),this.sharedToolbar.destroy(),this.sharedToolbar=void 0)})}toolbarWithSection(t){const i=this.sharedToolbar,n={layout:(s,o)=>{if(this.firstLayoutSection!=null&&this.firstLayoutSection!==t&&this.activeSections.has(this.firstLayoutSection))return;this.firstLayoutSection=t;const r=i.getBounds().width;i.setBounds({x:s.x,y:s.y,width:r}),s.shrink({left:r+i.horizontalSpacing+(o??0)})},addToolbarListener:(s,o)=>i.addToolbarListener(s,r=>{const a=this.getSectionIndex(t,r.button.index);if(a<0)return;const l={...r,button:this.sectionButtons[t][a]};o(l)}),updateButtons:s=>{this.sectionButtons[t]=s;const o=rw.SECTION_ORDER.flatMap(r=>this.sectionButtons[r]);i.updateButtons(o)},updateButtonByIndex:(s,o)=>{i.updateButtonByIndex(this.getIndex(t,s),o)},toggleActiveButtonByIndex:s=>{i.toggleActiveButtonByIndex(this.getIndex(t,s))},toggleButtonEnabledByIndex:(s,o)=>{i.toggleButtonEnabledByIndex(this.getIndex(t,s),o)},setHidden:s=>{s?this.activeSections.delete(t):this.activeSections.add(t);let o=0;for(const r of rw.SECTION_ORDER){if(r!==t){o+=this.sectionButtons[r].length;continue}for(const a of this.sectionButtons[t].keys())i.setButtonHiddenByIndex(o+a,s)}},destroy:()=>{n.setHidden(!0),this.activeSections.size===0&&this.destroy()},clearActiveButton:i.clearActiveButton.bind(i),addListener:i.addListener.bind(i),removeListener:i.removeListener.bind(i)};return n.setHidden(!1),n}getIndex(t,i){let n=0;for(const s of rw.SECTION_ORDER){if(s===t)return n+i;n+=this.sectionButtons[s].length}return-1}getSectionIndex(t,i){let n=0;for(const s of rw.SECTION_ORDER){if(s===t)return i>=n+this.sectionButtons[t].length?-1:i-n;n+=this.sectionButtons[s].length}return-1}};Yre.SECTION_ORDER=["chartToolbar","annotations"];var fGe=Yre,mGe={type:"context",contextKey:"sharedToolbar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new fGe(e)},{ZIndexMap:yGe,LayoutElement:vGe,Property:xr,BaseProperties:bGe,valueProperty:SGe,Group:CGe,Label:Fx,Rect:xGe,Text:Gs}=N,K9={ohlc:62,candlestick:62,"hollow-candlestick":62,line:96,"step-line":96,hlc:184,"high-low":800},wGe={up:"positive",down:"negative"},DGe={hlc:"altNeutral"},_W=class extends bGe{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};D([xr],_W.prototype,"fill");D([xr],_W.prototype,"fillOpacity");var ta=class extends N.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.openKey=void 0,this.highKey=void 0,this.lowKey=void 0,this.closeKey=void 0,this.volumeKey=void 0,this.title=new Fx,this.positive=new Fx,this.negative=new Fx,this.neutral=new Fx,this.altNeutral=new Fx,this.background=new _W,this.layoutStyle="block",this.id="status-bar",this.data=void 0,this.layer=new CGe({name:"StatusBar",zIndex:yGe.STATUS_BAR}),this.labelGroup=this.layer.appendChild(new N.TranslatableGroup),this.backgroundNode=this.labelGroup.appendChild(new xGe),this.labels=[{label:"O",configuration:2,title:this.labelGroup.appendChild(new Gs),value:this.labelGroup.appendChild(new Gs),id:"openValue",key:"openKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:16,title:this.labelGroup.appendChild(new Gs),value:this.labelGroup.appendChild(new Gs),id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"H",configuration:256,title:this.labelGroup.appendChild(new Gs),value:this.labelGroup.appendChild(new Gs),style:"neutral",id:"highValue",key:"highKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:8,title:this.labelGroup.appendChild(new Gs),value:this.labelGroup.appendChild(new Gs),id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"L",configuration:512,title:this.labelGroup.appendChild(new Gs),value:this.labelGroup.appendChild(new Gs),style:"neutral",id:"lowValue",key:"lowKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:4,title:this.labelGroup.appendChild(new Gs),value:this.labelGroup.appendChild(new Gs),id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"C",configuration:128,title:this.labelGroup.appendChild(new Gs),value:this.labelGroup.appendChild(new Gs),id:"closeValue",key:"closeKey",style:"neutral",domain:void 0,formatter:new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},{label:"",configuration:64,title:this.labelGroup.appendChild(new Gs),value:this.labelGroup.appendChild(new Gs),style:"neutral",id:"closeValue",key:"closeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})},{label:"Vol",configuration:32,title:this.labelGroup.appendChild(new Gs),value:this.labelGroup.appendChild(new Gs),id:"volumeValue",key:"volumeKey",domain:void 0,formatter:new Intl.NumberFormat("en-US",{notation:"compact",minimumFractionDigits:2,maximumFractionDigits:2})}],this.highlightManager=e.highlightManager,this.labelGroup.visible=!1,this.cleanup.register(e.scene.attachNode(this.layer),e.layoutManager.registerElement(vGe.Overlay,t=>this.startPerformLayout(t)),e.eventsHub.on("layout:complete",t=>this.onLayoutComplete(t)),e.eventsHub.on("highlight:change",()=>this.updateHighlight()))}async processData(e){if(!this.enabled||this.data==null)return;const t=[];for(const o of this.labels){const{id:r,key:a}=o,l=this[a];l==null?o.domain=void 0:t.push(SGe(l,"number",{id:r}))}if(t.length===0)return;const i=N.DataSet.wrap(this.data)??N.DataSet.empty(),{processedData:n,dataModel:s}=await e.request(this.id,i,{props:t});for(const o of this.labels){const{id:r,key:a}=o;this[a]!=null&&(o.domain=s.getDomain(this,r,"value",n))}}startPerformLayout(e){if(this.labelGroup.translationX=0,this.labelGroup.translationY=0,!this.enabled)return;const{layoutBox:t}=e,i=4,n=12,s=0,o=8;this.labelGroup.translationY=t.y+s;const r=Math.max(this.title.fontSize,this.positive.fontSize,this.negative.fontSize),a=fc(r),l=K9[this.getChartType()]??0;let c=0,u,d="alphabetic";if(this.layoutStyle==="block")t.shrink(s+a+o,"top"),u=r+(a-r)/2;else{const{title:p}=this.ctx.chartService;if(d="top",u=s+p.padding,p.enabled){const f=p.node.getBBox();c=f.x+f.width+n}else c=p.padding}for(const{label:p,configuration:f,title:m,value:v,domain:b,formatter:C}of this.labels){if(b==null||(l&f)===0){m.visible=!1,v.visible=!1;continue}const x=ei(this.positive),w=ei(this.negative),M=Math.max(x.textWidth(C.format(b[0])),x.textWidth(C.format(b[1])),w.textWidth(C.format(b[0])),w.textWidth(C.format(b[1])));m.visible=!0,v.visible=!0;const T=ei(this.title).measureLines(p);m.setFont(this.title),m.fill=this.title.color,m.text=p,m.textBaseline=d,m.y=u,m.x=c,c+=T.width+i,v.textBaseline=d,v.y=u,v.x=c,c+=M+n}this.backgroundNode.x=0,this.backgroundNode.y=0,this.backgroundNode.width=c-n,this.backgroundNode.height=a+s+o,this.backgroundNode.fill=this.background.fill,this.backgroundNode.fillOpacity=this.background.fillOpacity}onLayoutComplete(e){this.labelGroup.translationX=e.series.rect.x,this.updateHighlight()}updateHighlight(){if(!this.enabled)return;const e=this.highlightManager.getActiveHighlight(),t=e?.datum??this.data?.at(-1);if(t==null){this.labelGroup.visible=!1;return}this.labelGroup.visible=!0;const i=e?.itemId;let n=i==null?void 0:wGe[i];n==null&&this.openKey!=null&&this.closeKey!=null&&(t[this.openKey]<t[this.closeKey]?n="positive":n="negative");for(const{domain:s,value:o,key:r,formatter:a,style:l}of this.labels){if(s==null)continue;let c=l??n??"neutral";c==="neutral"&&(c=DGe[this.getChartType()]??c);const u=this[r],d=u==null?void 0:t?.[u];o.setFont(this[c]),o.fill=this[c].color,o.text=typeof d=="number"?a.format(d):""}}getChartType(){let e=this.ctx.chartService.publicApi?.getOptions()?.chartType;return(e==null||K9[e]==null)&&(e="candlestick"),e}};D([xr],ta.prototype,"enabled");D([xr],ta.prototype,"openKey");D([xr],ta.prototype,"highKey");D([xr],ta.prototype,"lowKey");D([xr],ta.prototype,"closeKey");D([xr],ta.prototype,"volumeKey");D([xr],ta.prototype,"title");D([xr],ta.prototype,"positive");D([xr],ta.prototype,"negative");D([xr],ta.prototype,"neutral");D([xr],ta.prototype,"altNeutral");D([xr],ta.prototype,"background");D([xr],ta.prototype,"layoutStyle");var MGe={type:"root",identifier:"status-bar",optionsKey:"statusBar",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new ta(e),themeTemplate:{statusBar:{enabled:!1,layoutStyle:N.ThemeSymbols.DEFAULT_CAPTION_LAYOUT_STYLE,title:{color:{$ref:"textColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},positive:{color:{$palette:"up.stroke"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},negative:{color:{$palette:"down.stroke"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},neutral:{color:{$palette:"neutral.stroke"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}},background:{fill:{$ref:"chartBackgroundColor"},fillOpacity:.5},altNeutral:{color:"gray",fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"}}}}},Bl=0,$s=1,sm=$s-Bl,Xre="end",Zre="middle",qre=300,Ok=(e,t=Bl,i=$s)=>Je(t,e,i);function zW(){return{x:{min:Bl,max:$s},y:{min:Bl,max:$s}}}function Ks(e){return e.x.max-e.x.min}function ka(e){return e.y.max-e.y.min}function Y9(e,t){return Jt(e.min,t.min)&&Jt(e.max,t.max)}function S0(e,t){return Y9(e.x,t.x)&&Y9(e.y,t.y)}function JT(e){return S0(e,zW())}function xo(e){return{x:{min:e?.x?.min??Bl,max:e?.x?.max??$s},y:{min:e?.y?.min??Bl,max:e?.y?.max??$s}}}function uh(e,t,i){if(!e)return{x:0,y:0};const n=Ok(t-e.x,0,e.x+e.width),s=Ok(i-e.y,0,e.y+e.height),o=1/e.width*n,r=1-1/e.height*s;return{x:Ok(o),y:Ok(r)}}function Gm(e,t,i){return{x:{min:e.x.min+t,max:e.x.max+t},y:{min:e.y.min+i,max:e.y.max+i}}}function pR(e,t,i){return{x:{min:e.x.min,max:e.x.min+Ks(e)*t},y:{min:e.y.min,max:e.y.min+ka(e)*i}}}function X9(e,t,i){const n=Ks(e),s=ka(e),o=e.x.min+n/2,r=e.y.min+s/2;return{x:{min:o-n*t/2,max:o+n*t/2},y:{min:r-s*i/2,max:r+s*i/2}}}function va(e,t,i,n){const{min:s,max:o}=t,r=s+(o-s)/2,a=e.max-e.min;switch(i){case"start":return{min:s,max:t.min+a};case"end":return{min:t.max-a,max:o};case"middle":return{min:r-a/2,max:r+a/2};case"pointer":return AGe(e,t,n??r);default:return{min:s,max:o}}}function AGe(e,t,i){const n=e.max-e.min,s=t.max-t.min,o=i*(1-(s-n)),r=i-o,a=e.min+r,l=e.max+r;return{min:a,max:l}}function kGe(e,t,i){return{x:{min:e.x.min*t,max:e.x.max*t},y:{min:e.y.min*i,max:e.y.max*i}}}function _l(e){return{x:gR(e.x),y:gR(e.y)}}function gR(e){const t=e.max-e.min;let i=e.max>$s?$s-t:e.min,n=e.min<Bl?t:e.max;return i=Math.max(Bl,i),n=Math.min($s,n),{min:i,max:n}}var{BaseProperties:TGe,CartesianAxis:p2,ChartAxisDirection:om,ContinuousScale:g2,TimeScale:IGe,UnitTimeScale:RGe,ChartUpdateType:Fk,ObserveChanges:cC,TooltipManager:EGe,Property:uC,findMinMax:Bk,isObjectWithStringProperty:LGe}=N,ec=N.Debug.create("sync");function Z9(e,t,i){const n=e.getKeys(t),s=e.getKeys(i);return e.shouldFlipXY?.()?[s,n]:[n,s]}function f2(e="x"){switch(e){case"x":return[om.X];case"y":return[om.Y];case"xy":return[om.X,om.Y]}}function q9(e,t,i){return IGe.is(e)||RGe.is(e)?!El(t.map(n=>n?.valueOf()),i.map(n=>n?.valueOf())):!El(t,i)}var Gg=class extends TGe{constructor(e){super(),this.moduleContext=e,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0,this.domainMode="key",this.domainSync=new GB}updateSiblings(e){const{syncManager:t}=this.moduleContext;for(const i of t.getGroupSiblings(e??this.groupId))ec("ChartSync.updateSiblings()",i.id,i),this.updateChart(i)}updateChart(e,t=Fk.PROCESS_DOMAIN){ec("ChartSync.updateChart()",e.id,Fk[t],e),t===Fk.PROCESS_DOMAIN?e.ctx.updateService.update(t,{forceNodeDataRefresh:!0}):e.ctx.updateService.update(t)}enabledZoomSync(){const{eventsHub:e}=this.moduleContext;this.disableZoomSync?.(),this.disableZoomSync=e.on("zoom:change",this.onZoom.bind(this))}onZoom(){const{syncManager:e}=this.moduleContext;for(const t of e.getGroupSiblings(this.groupId)){if(!t.modulesManager.getModule("sync")?.zoom)continue;const i=t.modulesManager.getModule("zoom");if(!i)continue;const n=this.prepareZoomUpdate();ec("ChartsSyncManager.enabledZoomSync()",t.id,n),i.updateSyncZoom(n)}}enabledNodeInteractionSync(){this.disableNodeInteractionSync?.(),this.disableNodeInteractionSync=this.moduleContext.eventsHub.on("highlight:change",this.onHighlightChange.bind(this))}onHighlightChange(e){const{syncManager:t}=this.moduleContext;if(e.callerId.endsWith("-sync"))return;ec("ChartSync.onHighlightChange()",e);const i=e.currentHighlight?.series,[n]=f2(this.axes),s=n===om.X?om.Y:om.X,[o,r]=i?Z9(i,n,s):[],a=v0(e.currentHighlight);let l=o?.[0]?a?.[o[0]]:void 0,c=!1;if(gc(l)&&(c=!0,l=l.getTime()),!e.currentHighlight?.datum){for(const d of t.getGroupSiblings(this.groupId))d.modulesManager.getModule("sync")?.nodeInteraction&&(d.ctx.highlightManager.updateHighlight(`${d.id}-sync`),d.ctx.tooltipManager.removeTooltip(`${d.id}-sync`));return}const u=t.getGroupSyncMode(this.groupId)==="multi-series";this.findMatchingHighlightNodes(n,s,u?r:[],c,l,e)}findMatchingHighlightNodes(e,t,i,n,s,o){const{syncManager:r}=this.moduleContext;ec("ChartSync.findMatchingHighlightNodes()",{mainDirection:e,secondaryKeys:i});for(const a of r.getGroupSiblings(this.groupId)){if(!a.modulesManager.getModule("sync")?.nodeInteraction)continue;let l=!1;for(const c of a.axes){if(!p2.is(c)||c.direction!==e)continue;const u=a.series.filter(d=>{if(!d.visible)return!1;if(i.length>0){const[,p]=Z9(d,e,t);return i.every(f=>p.includes(f))}return!0}).map(this.findMatchingNodes(c,e,n,s)).filter(In);if(u.length===1&&u[0]?.nodeDatum!==a.ctx.highlightManager.getActiveHighlight()){this.dispatchHighlightUpdate(a,u[0].nodeDatum),l=!0;break}}l||(ec("ChartSync.findMatchingHighlightNodes() - no matching nodes",a.id,o),this.dispatchHighlightUpdate(a))}}findMatchingNodes(e,t,i,n){return s=>{const o=s.getKeys(e.direction);if(e.keys.length&&!e.keys.some(d=>o.includes(d)))return;const r=s.contextNodeData?.nodeData??[];if(!r?.length)return;const a=r[0],l=`${t}Key`;if(!LGe(a,l))return;const c=a[l],u=r.find(d=>{const p=d.datum[c];return i?p.getTime()===n:p===n});return u?{series:s,nodeDatum:u}:null}}dispatchHighlightUpdate(e,t){ec("ChartSync.dispatchHighlightUpdate()",e.id,t),e.ctx.highlightManager.updateHighlight(`${e.id}-sync`,t);const i=t?.series.tooltipEnabled??e.tooltip.enabled;if(t&&i){const n=e.seriesAreaBoundingBox,s=n.x+(t.midPoint?.x??t.point?.x??0),o=n.y+(t.midPoint?.y??t.point?.y??0),r=EGe.makeTooltipMeta({type:"pointermove",canvasX:s,canvasY:o},t.series,t,void 0);e.ctx.tooltipManager.updateTooltip(`${e.id}-sync`,r,e.getTooltipContent(t.series,t.datumIndex,t,"tooltip"))}else e.ctx.tooltipManager.removeTooltip(`${e.id}-sync`);this.updateChart(e,Fk.SERIES_UPDATE)}async getSyncedDomain(e){if(!p2.is(e)||this.axes!=="xy"&&this.axes!==e.direction)return;const{groupState:t,directionDomains:i,domainsByKey:n,positionDomains:s}=this.updateDomainState(e);return this.validateAxis(e,t),await this.waitForDomainsToBeReady(),this.domainMode==="position"?this.calculateDerivedDomain(e,s):this.domainMode==="direction"||e.keys.length===0?this.calculateDerivedDomain(e,i):this.calculateKeyDerivedDomain(e,n)}updateDomainState(e){var t,i,n,s,o;const{syncManager:r}=this.moduleContext,a=r.getChart().id,l=e.id,c=r.getGroupState(this.groupId);if(!c)throw new Error("AG Charts - no GroupState for groupId: "+this.groupId);const u=c.domains??(c.domains={}),d=u[t=e.direction]??(u[t]={derived:[],sources:{},dirty:!0}),p=(i=d.sources)[a]??(i[a]={});p[l]=e.dataDomain.domain,d.dirty=!0;const f=c.domainsByKey??(c.domainsByKey={});for(const C of e.keys??[]){const x=f[C]??(f[C]={derived:[],sources:{},dirty:!0}),w=(n=x.sources)[a]??(n[a]={});w[l]=e.dataDomain.domain,x.dirty=!0}const m=c.domainsByPosition??(c.domainsByPosition={}),v=m[s=e.position]??(m[s]={derived:[],sources:{},dirty:!0}),b=(o=v.sources)[a]??(o[a]={});return b[l]=e.dataDomain.domain,v.dirty=!0,{groupState:c,directionDomains:d,domainsByKey:f,positionDomains:v}}validateAxis(e,t){const i=this.moduleContext.syncManager.getGroupSyncMode(this.groupId)==="multi-series";f2(this.axes).includes(e.direction)&&(i?this.validateMultiSeries(e,t):this.validateSingleSeries(e,t))}validateMultiSeries(e,t){const{min:i,max:n,nice:s,reverse:o}=e,r=new Set(e.boundSeries.flatMap(a=>a.getKeys(e.direction)));for(const a of t.members){const{axes:l,modulesManager:c}=a,u=f2(c.getModule("sync")?.axes),d=l.filter(f=>u.includes(f.direction)).filter(f=>f.boundSeries.some(m=>m.getKeys(f.direction).some(v=>r.has(v))));if(d.length===0)continue;const[p]=d;if(p.min!==i||p.max!==n||p.nice!==s||p.reverse!==o){fe.warnOnce("To allow synchronization, ensure that all synchronized axes with matching keys have matching min, max, nice, and reverse properties."),this.enabled=!1;return}}}validateSingleSeries(e,t){const i=t.members,[{axes:n}]=i,{direction:s,min:o,max:r,nice:a,reverse:l}=e;for(const c of n)if(s===c.direction&&(a!==c.nice||l!==c.reverse||o!==c.min&&(Kt(o)||Kt(c.min))||r!==c.max&&(Kt(r)||Kt(c.max)))){fe.warnOnce("To allow synchronization, ensure that all charts have matching min, max, nice, and reverse properties on the synchronized axes."),this.enabled=!1;return}}calculateDerivedDomain(e,t){if(!t.dirty)return t.derived;const i=t.derived;return t.derived=zB(Object.values(t.sources).map(n=>Object.values(n)).flat(2)),g2.is(e.scale)&&(t.derived=Bk(t.derived)),t.dirty=!1,q9(e.scale,i,t.derived)&&(ec(e.id,"updated",e.keys,{before:i,after:t.derived}),this.updateSiblings()),t.derived}calculateKeyDerivedDomain(e,t){let i=[],n=[],s=!1;for(const o of e.keys??[]){const r=t[o],a=r.derived;if(i.push(...a),!r.dirty){n.push(...r.derived);continue}r.derived=zB(Object.values(r.sources).map(l=>Object.values(l)).flat(2)),g2.is(e.scale)&&(r.derived=Bk(r.derived)),n.push(...r.derived),r.dirty=!1,s||(s=!El(a,r.derived))}return g2.is(e.scale)&&(i=Bk(i),n=Bk(n)),s&&q9(e.scale,i,n)&&(ec(e.id,"updated",e.keys,{before:i,after:n}),this.updateSiblings()),n}removeAxis(e){if(!p2.is(e)||this.axes!=="xy"&&this.axes!==e.direction)return;const{syncManager:t}=this.moduleContext,i=t.getGroupState(this.groupId),n=t.getChart().id,s=e.id;delete i?.domains?.[e.direction]?.sources?.[n]?.[s];for(const o of e.keys??[])delete i?.domainsByKey?.[o]?.sources?.[n]?.[s];delete i?.domainsByPosition?.[e.position]?.sources?.[n]?.[s]}async waitForDomainsToBeReady(){const{syncManager:e}=this.moduleContext;let t=0;for(;e.getGroupMembers(this.groupId).some(i=>i.syncStatus==="init");)ec("ChartSync.waitForDomainsToBeReady() - waiting for all domains to be calculated",this.groupId),await this.domainSync.await(),t++;t>0&&ec("ChartSync.waitForDomainsToBeReady() - waited for",t,"iterations"),this.domainSync.notify()}prepareZoomUpdate(){const{zoomManager:e}=this.moduleContext,t=e.getZoom();return this.axes==="x"?delete t?.y:this.axes==="y"&&delete t?.x,xo(t)}onEnabledChange(){const{syncManager:e}=this.moduleContext;this.enabled?e.subscribe(this.groupId):e.unsubscribe(this.groupId),this.updateSiblings(),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(e,t){if(!this.enabled||e===t)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(t),i.subscribe(e),this.updateSiblings(t),this.updateSiblings(e)}onAxesChange(){if(!this.enabled)return;const{syncManager:e}=this.moduleContext;this.updateChart(e.getChart())}onNodeInteractionChange(){this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():this.disableNodeInteractionSync?.()}onZoomChange(){this.enabled&&this.zoom?this.enabledZoomSync():this.disableZoomSync?.()}destroy(){const{syncManager:e}=this.moduleContext;e.unsubscribe(this.groupId),this.updateSiblings(),this.disableZoomSync?.()}};Gg.className="Sync";D([uC,cC(e=>e.onEnabledChange())],Gg.prototype,"enabled");D([uC,cC((e,t,i)=>e.onGroupIdChange(t,i))],Gg.prototype,"groupId");D([uC,cC(e=>e.onAxesChange())],Gg.prototype,"axes");D([uC,cC(e=>e.onNodeInteractionChange())],Gg.prototype,"nodeInteraction");D([uC,cC(e=>e.onZoomChange())],Gg.prototype,"zoom");D([uC,cC(e=>e.onAxesChange())],Gg.prototype,"domainMode");var PGe={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],moduleFactory:e=>new Gg(e),themeTemplate:{sync:{enabled:!1}}},{Property:Qre}=N,Q9="#2196f3",NGe="#8a8a8a",x1=class extends N.Rect{constructor(){super(...arguments),this.fill=Q9,this.fillOpacity=.2,this.zIndex=N.ZIndexMap.ZOOM_SELECTION}updateValid(){this.fill=Q9}updateInvalid(){this.fill=NGe}};x1.className="ZoomRect";D([Qre],x1.prototype,"fill");D([Qre],x1.prototype,"fillOpacity");var OGe=class{update(e,t,i,n,s,o){return this.oldZoom??(this.oldZoom=xo(t===N.ChartAxisDirection.X?{...s,x:o}:{...s,y:o})),this.updateCoords(e.offsetX,e.offsetY),this.updateZoom(t,i,n)}stop(){this.coords=void 0,this.oldZoom=void 0}updateCoords(e,t){this.coords?(this.coords.x2=e,this.coords.y2=t):this.coords={x1:e,y1:t,x2:e,y2:t}}updateZoom(e,t,i){const{coords:n,oldZoom:s}=this;let o=xo(s);if(!n||!s)return e===N.ChartAxisDirection.X?o.x:o.y;const r=uh(i,n.x1,n.y1),a=uh(i,n.x2,n.y2);if(e===N.ChartAxisDirection.X){const c=(a.x-r.x)*Ks(s);return o.x.max+=c,o.x=va(o.x,s.x,t,r.x),o=_l(o),o.x}const l=(a.y-r.y)*ka(s);return o.y.max-=l,o.y=va(o.y,s.y,t,r.y),o=_l(o),o.y}},FGe=class{constructor(e,t,i,n,s,o,r,a){this.eventsHub=e,this.contextMenuRegistry=t,this.zoomManager=i,this.getModuleProperties=n,this.canResetZoom=s,this.getRect=o,this.updateZoom=r,this.isZoomValid=a}registerActions(e){const{contextMenuRegistry:t}=this,i=e?"show":"hide";if(t.toggle("zoom-to-cursor",i),t.toggle("pan-to-cursor",i),t.toggle("reset-zoom",i),!e)return;t.builtins.items["zoom-to-cursor"].action=this.onZoomToHere.bind(this),t.builtins.items["pan-to-cursor"].action=this.onPanToHere.bind(this),t.builtins.items["reset-zoom"].action=this.onResetZoom.bind(this);const n=r=>{const a=this.getRect();if(!a)return!0;const l=uh(a,r.x,r.y);return this.iterateFindNextZoomAtPoint(l)!=null},s=()=>!S0(xo(this.zoomManager.getZoom()),zW()),o=this.eventsHub.on("context-menu:setup",r=>{t.builtins.items["zoom-to-cursor"].enabled=n(r),t.builtins.items["pan-to-cursor"].enabled=s(),t.builtins.items["reset-zoom"].enabled=this.canResetZoom()});return()=>{o(),t.toggle("zoom-to-cursor","hide"),t.toggle("pan-to-cursor","hide"),t.toggle("reset-zoom","hide")}}computeOrigin(e){const t=this.getRect(),{enabled:i}=this.getModuleProperties();if(!i||!t||!e?.target||!(e instanceof MouseEvent))return;const n={x:0,y:0,width:t.width,height:t.height};return uh(n,e.offsetX,e.offsetY)}onZoomToHere({event:e}){const t=this.computeOrigin(e);if(!t)return;const i=this.iterateFindNextZoomAtPoint(t);i!=null&&this.updateZoom(i)}onPanToHere({event:e}){const t=this.computeOrigin(e);if(!t)return;const i=xo(this.zoomManager.getZoom()),n=Ks(i),s=ka(i),o=t.x*n,r=t.y*s,a=sm/2;let l={x:{min:t.x-a,max:t.x+a},y:{min:t.y-a,max:t.y+a}};l=X9(l,n,s),l=Gm(l,i.x.min-t.x+o,i.y.min-t.y+r),this.updateZoom(_l(l))}onResetZoom(e){this.zoomManager.resetZoom("zoom")}iterateFindNextZoomAtPoint(e){const{scrollingStep:t}=this.getModuleProperties();for(let i=t;i<=1-t;i+=t){const n=this.getNextZoomAtPoint(e,i);if(this.isZoomValid(n))return n}}getNextZoomAtPoint(e,t){const{isScalingX:i,isScalingY:n}=this.getModuleProperties(),s=xo(this.zoomManager.getZoom()),o=e.x*Ks(s),r=e.y*ka(s),a=sm/2;let l={x:{min:e.x-a,max:e.x+a},y:{min:e.y-a,max:e.y+a}};return l=X9(l,i?Ks(s)*t:sm,n?ka(s)*t:sm),l=Gm(l,s.x.min-e.x+o,s.y.min-e.y+r),_l(l)}},{ChartAxisDirection:J9}=N,BGe=class{constructor(e){this.axesHandlers=e,this.axes=[],this.overlappingAxisIds=new Set}destroy(){for(const e of this.axes)e.div.destroy()}update(e,t,i,n){this.seriesRect=n;for(const c of this.axes)c.div.setHidden(!e&&!t);if(!e&&!t)return;const{X:s,Y:o}=J9,r=[...i.axisManager.getAxisContext(s),...i.axisManager.getAxisContext(o)],{removed:a,added:l}=this.diffAxisIds(r);a.length>0&&(this.axes=this.axes.filter(c=>a.includes(c.axisId)?(c.div.destroy(),this.overlappingAxisIds.delete(c.axisId),this.hoveredAxisId===c.axisId&&(this.hoveredAxisId=void 0),this.activeAxisId===c.axisId&&(this.activeAxisId=void 0),!1):!0));for(const c of l){const{axisId:u,direction:d}=c;this.axes.push(this.initAxis(i,u,this.axesHandlers,d))}for(const c of this.axes){const d=r.find(p=>p.axisId===c.axisId).getCanvasBounds();c.div.setHidden(Cwe(d)),d==null?c.bounds=void 0:(c.div.setBounds(d),c.bounds=new N.BBox(d.x,d.y,d.width,d.height))}this.updateOverlappingAxisPointerEvents(e,t)}setAxisCursor(e){this.cursor=e;for(const t of this.axes)t.div.setCursor(this.getCursor(t.direction))}toggleAxisDraggingCursor(e,t){for(const i of this.axes)i.direction===e&&i.div.setCursor(t?this.getCursor(e):void 0)}updateOverlappingAxisPointerEvents(e,t){this.overlappingAxisIds.clear();const i=(e||t)&&this.seriesRect;for(const n of this.axes){if(!i){n.div.setPointerEvents(void 0);continue}!!n.bounds?.collidesBBox(this.seriesRect)?(this.overlappingAxisIds.add(n.axisId),n.div.setPointerEvents("none")):n.div.setPointerEvents(void 0)}this.cleanupAxisState()}cleanupAxisState(){this.hoveredAxisId&&!this.overlappingAxisIds.has(this.hoveredAxisId)&&(this.hoveredAxisId=void 0),this.activeAxisId&&!this.overlappingAxisIds.has(this.activeAxisId)&&(this.activeAxisId=void 0)}pickAxisAtPoint(e,t){for(const i of this.axes)if(this.overlappingAxisIds.has(i.axisId)&&i.bounds?.containsPoint(e,t))return{axisId:i.axisId,direction:i.direction}}setHoveredAxis(e){this.overlappingAxisIds.has(e)&&(this.hoveredAxisId=e)}clearHoveredAxis(){this.activeAxisId||(this.hoveredAxisId=void 0)}beginDelegatedAxisDrag(e){return this.overlappingAxisIds.has(e)?(this.activeAxisId=e,this.hoveredAxisId=void 0,!0):!1}endDelegatedAxisDrag(e){this.activeAxisId===e&&(this.activeAxisId=void 0),this.hoveredAxisId=void 0}hasOverlappingAxes(){return this.overlappingAxisIds.size>0}getHoveredAxis(){if(!this.hoveredAxisId)return;const e=this.axes.find(t=>t.axisId===this.hoveredAxisId);return e?{axisId:e.axisId,direction:e.direction}:void 0}getCursor(e){return this.cursor?this.cursor:e===J9.X?"ew-resize":"ns-resize"}initAxis(e,t,i,n){const o=e.proxyInteractionService.createProxyElement({type:"region",domManagerId:t,where:"afterend"});return o.setCursor(this.getCursor(n)),o.addListener("drag-start",r=>{r.device==="touch"&&r.sourceEvent.preventDefault(),this.activeAxisId=t,i.onAxisDragStart(n)}),o.addListener("drag-move",r=>i.onAxisDragMove(t,n,r)),o.addListener("drag-end",()=>{this.activeAxisId=void 0,this.hoveredAxisId=void 0,i.onAxisDragEnd()}),o.addListener("dblclick",()=>i.onAxisDoubleClick(t,n)),o.addListener("wheel",r=>i.onAxisWheel(t,n,r)),{axisId:t,div:o,direction:n}}diffAxisIds(e){const t=this.axes.map(o=>o.axisId),i=e.map(o=>o.axisId),n=t.filter(o=>!i.includes(o)),s=e.filter(o=>!t.includes(o.axisId));return{removed:n,added:s}}},eX=16,_Ge={off:1,short:.01,long:.002},zGe=class{constructor(){this.deceleration=1,this.zoomCoordsHistoryIndex=0,this.coordsHistory=[]}get decelerationValue(){const{deceleration:e}=this;return Math.max(typeof e=="number"?e:_Ge[e]??1,1e-4)}addListener(e,t){return this.onUpdate=t,()=>{this.onUpdate=void 0}}stopInteractions(){this.inertiaHandle!=null&&(cancelAnimationFrame(this.inertiaHandle),this.inertiaHandle=void 0)}update(e){this.updateCoords(e.currentX,e.currentY);const{x1:t=0,y1:i=0,x2:n=0,y2:s=0}=this.coords??{};this.onUpdate?.({type:"update",deltaX:this.isPanningX()?t-n:0,deltaY:this.isPanningY()?i-s:0})}start(e){this.direction=e,this.coordsMonitorTimeout=setInterval(this.recordCurrentZoomCoords.bind(this),16)}stop(){const{coordsHistory:e}=this;let t=0,i=0,n=0;if(e.length>0){const s=this.zoomCoordsHistoryIndex%eX;let o=s-1;o<0&&(o=e.length-1);let r=s;r>=e.length&&(r=0);const a=e[o],l=e[r];t=this.isPanningX()?a.x-l.x:0,i=this.isPanningY()?a.y-l.y:0,n=a.t-l.t}if(this.coords=void 0,this.direction=void 0,clearInterval(this.coordsMonitorTimeout),this.coordsMonitorTimeout=void 0,this.zoomCoordsHistoryIndex=0,this.coordsHistory.length=0,n>0&&this.decelerationValue<1){const s=t/n,o=i/n,r=Math.hypot(s,o),a=Math.atan2(o,s),l=performance.now();this.inertiaHandle=Qt().requestAnimationFrame(c=>{this.animateInertia(c,c,l,r,a)})}}recordCurrentZoomCoords(){const{coords:e,coordsHistory:t,zoomCoordsHistoryIndex:i}=this;if(!e)return;const{x2:n,y2:s}=e,o=Date.now();t[i%eX]={x:n,y:s,t:o},this.zoomCoordsHistoryIndex+=1}animateInertia(e,t,i,n,s){const o=1-this.decelerationValue,r=-n/Math.log(o),a=n*(o**(t-i)-1)/Math.log(o),l=n*(o**(e-i)-1)/Math.log(o);this.onUpdate?.({type:"update",deltaX:this.isPanningX()?-Math.cos(s)*(l-a):0,deltaY:this.isPanningY()?-Math.sin(s)*(l-a):0}),!(l>=r-1)&&(this.inertiaHandle=requestAnimationFrame(c=>{this.animateInertia(c,e,i,n,s)}))}updateCoords(e,t){this.coords?this.coords={x1:this.coords.x2,y1:this.coords.y2,x2:e,y2:t}:this.coords={x1:e,y1:t,x2:e,y2:t}}isPanningX(){return this.direction==null||this.direction===N.ChartAxisDirection.X}isPanningY(){return this.direction==null||this.direction===N.ChartAxisDirection.Y}translateZooms(e,t,i,n){const s=uh(e,e.x+Math.abs(i),e.y+e.height-Math.abs(n)),o=Math.sign(i)*s.x,r=-Math.sign(n)*s.y,a={};for(const[l,{direction:c,zoom:u}]of Ji(t)){if(u&&u.min===Bl&&u.max===$s)continue;let d=xo({[c]:u});d=_l(Gm(d,o*Ks(d),r*ka(d))),a[l]={direction:c,zoom:d[c]}}return a}},GGe=200,VGe=class{update(e,t,i,n){const s=e.deltaX*t*GGe;return this.translateZooms(i,n,s)}translateZooms(e,t,i){const n={},s=uh(e,e.x+Math.abs(i),0),o=i<0?-s.x:s.x;for(const[r,{direction:a,zoom:l}]of Ji(t)){if(a!==N.ChartAxisDirection.X)continue;let c=xo({x:l});c=_l(Gm(c,o*Ks(c),0)),n[r]={direction:a,zoom:c.x}}return n}},HGe=class{updateAxes(e,t,i,n){const s=e.sourceEvent,o={},{anchorPointX:r,anchorPointY:a,isScalingX:l,isScalingY:c,scrollingStep:u}=t,d=uh(i,s.offsetX??s.clientX,s.offsetY??s.clientY);for(const[p,{direction:f,zoom:m}]of Ji(n)){if(m==null)continue;let v={...m};const b=u*e.deltaY*(m.max-m.min);if(f===N.ChartAxisDirection.X&&l)v.max+=b,v=va(v,m,r,d.x);else if(f===N.ChartAxisDirection.Y&&c)v.max+=b,v=va(v,m,a,d.y);else continue;v.max<v.min||(o[p]={direction:f,zoom:gR(v)})}return o}update(e,t,i,n){const{anchorPointX:s,anchorPointY:o,isScalingX:r,isScalingY:a,scrollingStep:l}=t,c=e.offsetX+i.x,u=e.offsetY+i.y,d=uh(i,c,u),p=e.deltaY;let f=xo(n);if(f.x.max+=r?l*p*Ks(n):0,f.y.max+=a?l*p*ka(n):0,!(f.x.max<f.x.min||f.y.max<f.y.min))return r&&(f.x=va(f.x,n.x,s,d.x)),a&&(f.y=va(f.y,n.y,o,d.y)),f=_l(f),f}updateDelta(e,t,i){const{anchorPointX:n,anchorPointY:s,isScalingX:o,isScalingY:r,scrollingStep:a}=t;let l=xo(i);return l.x.max+=o?a*-e*Ks(i):0,l.y.max+=r?a*-e*ka(i):0,o&&(l.x=va(l.x,i.x,n)),r&&(l.y=va(l.y,i.y,s)),l=_l(l),l}},WGe=class{constructor(e,t,i){this.rect=e,this.getZoom=t,this.isZoomValid=i,this.rect.visible=!1}update(e,t,i){const n=e.currentX+(i?.x??0),s=e.currentY+(i?.y??0);this.rect.visible=!0,this.updateCoords(n,s,t,i),this.updateRect(i)}stop(e,t,i){let n=xo();if(!e||!t)return n;this.coords&&(n=this.createZoomFromCoords(t,i));const s=t.width/e.width,o=t.height/e.height;return n=_l(kGe(n,s,o)),this.reset(),n}reset(){this.coords=void 0,this.rect.visible=!1}didUpdate(){return this.rect.visible&&this.rect.width>0&&this.rect.height>0}updateCoords(e,t,i,n){if(!this.coords){this.coords={x1:e,y1:t,x2:e,y2:t};return}const{coords:s}=this;if(s.x2=e,s.y2=t,!n)return;const{isScalingX:o,isScalingY:r,keepAspectRatio:a}=i,l=this.getNormalisedDimensions();if(a&&o&&r){const c=n.width/n.height;s.y2<s.y1?s.y2=Math.min(s.y1-l.width/c,s.y1):s.y2=Math.max(s.y1+l.width/c,s.y1)}o||(s.x1=n.x,s.x2=n.x+n.width),r||(s.y1=n.y,s.y2=n.y+n.height)}updateRect(e){if(!e)return;const{rect:t}=this,i=this.getNormalisedDimensions(),{width:n,height:s}=i;let{x:o,y:r}=i;o=Math.max(o,e.x),o-=Math.max(0,o+n-(e.x+e.width)),r=Math.max(r,e.y),r-=Math.max(0,r+s-(e.y+e.height)),t.x=o,t.y=r,t.width=n,t.height=s;const a=this.createZoomFromCoords(e,this.getZoom());this.isZoomValid(a)?t.updateValid():t.updateInvalid()}createZoomFromCoords(e,t){const i=xo(t),n=this.getNormalisedDimensions(),s=uh(e,n.x,n.y+n.height),o=n.width/e.width,r=n.height/e.height;let a=pR(i,o,r);const l=s.x*Ks(i),c=s.y*ka(i);return a=Gm(a,l,c),a=_l(a),a}getNormalisedDimensions(){const{x1:e=0,y1:t=0,x2:i=0,y2:n=0}=this.coords??{},s=Math.min(e,i),o=Math.min(t,n),r=e<=i?i-e:e-i,a=t<=n?n-t:t-n;return{x:s,y:o,width:r,height:a}}},{ActionOnSet:Jre,BaseProperties:jGe,ChartAxisDirection:UGe,NativeWidget:$Ge,PropertiesArray:KGe,Toolbar:YGe,ToolbarButtonProperties:XGe,Property:wy}=N,GW=class extends XGe{};D([wy],GW.prototype,"value");D([wy],GW.prototype,"section");var dC=class extends jGe{constructor(e,t,i,n,s,o,r){super(),this.ctx=e,this.getModuleProperties=t,this.canResetZoom=i,this.updateZoom=n,this.updateAxisZoom=s,this.resetZoom=o,this.isZoomValid=r,this.enabled=!1,this.buttons=new KGe(GW),this.visible="hover",this.verticalSpacing=10,this.detectionRange=38,this.cleanup=new _i,this.toggleButtonsDebounced=BB(this.toggleButtons.bind(this),qre,{leading:!0,trailing:!0}),this.container=new $Ge(nt("div")),this.container.addClass("ag-charts-zoom-buttons"),e.domManager.addChild("canvas-overlay","zoom-buttons",this.container.getElement()),this.toolbar=new YGe(e,"ariaLabelZoomToolbar","horizontal"),this.container.addChild(this.toolbar),this.toolbar.getElement().style.transform="translateY(54px)",this.toggleVisibility(this.visible==="always"),this.cleanup.register(this.toolbar.addToolbarListener("button-pressed",this.onButtonPress.bind(this)),this.toolbar.addToolbarListener("button-focused",this.onButtonFocus.bind(this)),e.widgets.containerWidget.addListener("mousemove",this.onHover.bind(this)),e.widgets.containerWidget.addListener("mouseleave",this.onLeave.bind(this)),e.eventsHub.on("layout:complete",this.onLayoutComplete.bind(this)),this.teardown.bind(this))}destroy(){this.cleanup.flush()}toggleVisibleZoomed(e){this.visible==="zoomed"&&this.toggleVisibility(!e)}teardown(){this.ctx.domManager.removeChild("canvas-overlay","zoom-buttons"),this.container.destroy()}onLayoutComplete(e){const{buttons:t,container:i}=this,{rect:n}=e.series;for(const o of t)if(o.tooltip==null&&o.label==null){const r={"pan-end":"toolbarZoomPanEnd","pan-left":"toolbarZoomPanLeft","pan-right":"toolbarZoomPanRight","pan-start":"toolbarZoomPanStart","zoom-in":"toolbarZoomZoomIn","zoom-out":"toolbarZoomZoomOut",reset:"toolbarZoomReset"};o.tooltip=r[o.value]}this.toolbar.updateButtons(t),this.toggleButtonsDebounced();const s=i.getBounds().height;i.setBounds({y:n.y+n.height-s})}onHover(e){if(!this.enabled||this.visible!=="hover"||this.toolbar.isHidden())return;const{container:t,detectionRange:i,ctx:{scene:n}}=this,{currentY:s,sourceEvent:{target:o}}=e,r=t.getElement(),a=r.offsetTop-i,l=s>a&&s<n.canvas.element.offsetHeight||o===r;this.toggleVisibility(l)}onLeave(){this.visible==="hover"&&this.toggleVisibility(!1)}toggleVisibility(e,t=!1){const{container:i,toolbar:n,verticalSpacing:s}=this;n.toggleClass("ag-charts-zoom-buttons__toolbar--hidden",!e);const o=n.getElement();o.style.transitionDuration=t?"0s":"",o.style.transform=e?"translateY(0)":`translateY(${i.getBounds().height+s}px)`}toggleButtons(){const e=xo(this.ctx.zoomManager.getZoom());if(!(this.previousZoom&&S0(this.previousZoom,e))){this.previousZoom=e;for(const[t,i]of this.buttons.entries()){let n=!0;switch(i?.value){case"pan-start":n=e.x.min>Bl;break;case"pan-end":n=e.x.max<$s;break;case"pan-left":n=e.x.min>Bl;break;case"pan-right":n=e.x.max<$s;break;case"zoom-out":n=!S0(e,zW());break;case"zoom-in":n=this.isZoomValid(this.getNextZoomStateUnified("zoom-in",e,this.getModuleProperties()));break;case"reset":n=this.canResetZoom(e);break}this.toolbar.toggleButtonEnabledByIndex(t,n)}}}onButtonPress({button:e}){if(!this.enabled||this.toolbar.isHidden())return;const t=this.getModuleProperties();if(t.independentAxes&&e.value!=="reset"){const i=this.ctx.zoomManager.getAxisZooms();for(const[n,{direction:s,zoom:o}]of Ji(i))o!=null&&this.onButtonPressAxis(e,t,n,s,o)}else this.onButtonPressUnified(e,t)}onButtonFocus(e){this.toggleVisibility(!0,!0)}onButtonPressAxis(e,t,i,n,s){const{isScalingX:o,isScalingY:r,scrollingStep:a}=t;let l={...s};const c=s.max-s.min;switch(e.value){case"pan-start":l.max=c,l.min=0;break;case"pan-end":l.min=l.max-c,l.max=$s;break;case"pan-left":l.min-=c*a,l.max-=c*a;break;case"pan-right":l.min+=c*a,l.max+=c*a;break;case"zoom-in":case"zoom-out":{const u=n===UGe.X,d=u&&o||!u&&r;let p=e.value==="zoom-in"?1-a:1+a;d||(p=1);const f=u?this.getAnchorPointX(t):this.getAnchorPointY(t);l.max=l.min+(l.max-l.min)*p,l=va(l,s,f);break}}this.updateAxisZoom(i,n,gR(l))}onButtonPressUnified(e,t){const{scrollingStep:i}=t,n=xo(this.ctx.zoomManager.getZoom());let s=xo(n);switch(e.value){case"reset":this.resetZoom();return;case"pan-start":s.x.max=Ks(s),s.x.min=0;break;case"pan-end":s.x.min=$s-Ks(s),s.x.max=$s;break;case"pan-left":s=Gm(s,-Ks(s)*i,0);break;case"pan-right":s=Gm(s,Ks(s)*i,0);break;case"zoom-in":case"zoom-out":{s=this.getNextZoomStateUnified(e.value,n,t);break}}this.updateZoom(_l(s))}getNextZoomStateUnified(e,t,i){const{isScalingX:n,isScalingY:s,scrollingStep:o}=i,r=e==="zoom-in"?1-o:1+o,a=pR(t,n?r:1,s?r:1);return a.x=va(a.x,t.x,this.getAnchorPointX(i)),a.y=va(a.y,t.y,this.getAnchorPointY(i)),a}getAnchorPointX(e){const t=this.anchorPointX??e.anchorPointX;return t==="pointer"?Xre:t}getAnchorPointY(e){const t=this.anchorPointY??e.anchorPointY;return t==="pointer"?Zre:t}};D([wy,Jre({changeValue(e){this.toolbar?.setHidden(!e)}})],dC.prototype,"enabled");D([wy],dC.prototype,"buttons");D([wy,Jre({changeValue(e,t){if(t==null)return;const i=e==="always",n=e==="zoomed"&&this.previousZoom!=null&&!JT(this.previousZoom);this.toggleVisibility(i||n)}})],dC.prototype,"visible");D([wy],dC.prototype,"anchorPointX");D([wy],dC.prototype,"anchorPointY");var Uf=1e6;function fR({min:e,max:t},i,n,s){return s===0?0:Uf*((i-n)/s*(t-e)+e)}function ZGe(e,t,i,n,s,o){[e,t]=[Math.min(e,t),Math.max(e,t)],[i,n]=[Math.min(i,n),Math.max(i,n)];const r=Uf*(i-s)/o,a=Uf*(n-s)/o,l=(i-s)/(n-s),c=(e-l*t)/(Uf-r+l*(a-Uf)),u=(t+(a-Uf)*c)/a;return{min:c,max:u}}function tX(e,t,i,n){t===0&&(t=30),n===0&&(n=30);const s=e-t,o=e+t,r=i-n,a=i+n;return!(o<r||a<s)}var qGe=class{constructor(){this.touchStart={origins:[{identifier:0,normalX:Number.NaN,normalY:Number.NaN},{identifier:0,normalX:Number.NaN,normalY:Number.NaN}]},this.initialZoom={x:{min:0,max:1},y:{min:0,max:1}},this.previous={a1:Number.NaN,a2:Number.NaN,b1:Number.NaN,b2:Number.NaN}}start(e,t,i){if(e.sourceEvent.targetTouches.length!==2)return!1;e.sourceEvent.preventDefault();const n=Array.from(e.sourceEvent.targetTouches),{x:s,y:o,width:r,height:a}=t.getBoundingClientRect();this.initialZoom.x.min=i.x?.min??0,this.initialZoom.x.max=i.x?.max??1,this.initialZoom.y.min=i.y?.min??0,this.initialZoom.y.max=i.y?.max??1;for(const m of this.touchStart.origins)m.identifier=0;this.previous.a1=Number.NaN,this.previous.a2=Number.NaN,this.previous.b1=Number.NaN,this.previous.b2=Number.NaN;for(const m of[0,1]){const v=n[m].clientX,b=o+a-n[m].clientY;this.touchStart.origins[m].identifier=n[m].identifier,this.touchStart.origins[m].normalX=fR(this.initialZoom.x,v,s,r),this.touchStart.origins[m].normalY=fR(this.initialZoom.y,b,o,a)}const[l,c]=n,[u,d]=this.touchStart.origins,p=tX(l.clientX,l.radiusX,c.clientX,c.radiusX);return tX(l.clientY,l.radiusY,c.clientY,c.radiusY)&&(u.normalY=d.normalY=(u.normalY+d.normalY)/2),p&&(u.normalX=d.normalX=(u.normalX+d.normalX)/2),!0}update(e,t){e.sourceEvent.preventDefault();const i=Array.from(e.sourceEvent.targetTouches),{x:n,y:s,width:o,height:r}=t.getBoundingClientRect(),{origins:a}=this.touchStart,l=[0,1].map(C=>i.find(x=>x.identifier===a[C].identifier)),c=a[0].normalX,u=a[1].normalX,d=l[0].clientX,p=l[1].clientX,f=a[0].normalY,m=a[1].normalY,v=s+r-l[0].clientY,b=s+r-l[1].clientY;return this.twitchTolerantZoomPan4(c,u,d,p,f,m,v,b,n,s,o,r)}end(e){const t=Array.from(e.sourceEvent.targetTouches).map(i=>i.identifier);return!t.includes(this.touchStart.origins[0].identifier)||!t.includes(this.touchStart.origins[1].identifier)}twitchTolerantZoomPan4(e,t,i,n,s,o,r,a,l,c,u,d){const{initialZoom:p,previous:f}=this,m=iX(e,t,i,n,f,"a1","a2",l,u,p.x),v=iX(s,o,r,a,f,"b1","b2",c,d,p.y);return{x:m,y:v}}};function iX(e,t,i,n,s,o,r,a,l,c){if(e==t){const u=fR(c,i,a,l),d=fR(c,n,a,l),p=(u+d)/2,f=(e-p)/Uf;return{min:c.min+f,max:c.max+f}}else{const u=s[o],d=s[r];return Math.abs(i-u)+Math.abs(n-d)<=1?(i=u,n=d):(s[o]=i,s[r]=n),ZGe(e,t,i,n,a,l)}}var{ActionOnSet:Dy,ChartAxisDirection:Br,ChartUpdateType:m2,Property:Vn,InteractionState:Bx,ProxyProperty:QGe}=N,_k=e=>FB(e,10),Fv="zoom-cursor",_x="zoom-tooltip",VW=class extends N.BaseProperties{constructor(e){super(),this.onChange=e,this.enabled=!1,this.padding=0}};D([Vn,Dy({changeValue(e){this.onChange({enabled:e,padding:this.padding})}})],VW.prototype,"enabled");D([Vn,Dy({changeValue(e){this.onChange({enabled:this.enabled,padding:e})}})],VW.prototype,"padding");var ss=class extends N.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.enableAxisDragging=!0,this.enableAxisScrolling=!1,this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.enableTwoFingerZoom=!0,this.panKey="alt",this.axes="x",this.scrollingStep=sm/10,this.keepAspectRatio=!1,this.minVisibleItems=2,this.anchorPointX=Xre,this.anchorPointY=Zre,this.autoScaling=new VW(i=>{this.ctx.zoomManager.setAutoScaleYAxis(i.enabled,i.padding)}),this.axisDraggingMode="zoom",this.canResetZoom=i=>(i??(i=this.getZoom()),!S0(i,this.getResetZoom())),this.buttons=new dC(this.ctx,this.getModuleProperties.bind(this),this.canResetZoom,this.updateZoom.bind(this),this.updateAxisZoom.bind(this),this.resetZoom.bind(this),this.isZoomValid.bind(this)),this.axisDragger=new OGe,this.panner=new zGe,this.scroller=new HGe,this.scrollPanner=new VGe,this.twoFingers=new qGe,this.deceleration="short",this.dragState=0,this.isState=i=>this.ctx.interactionManager.isState(i),this.destroyContextMenuActions=void 0,this.isFirstWheelEvent=!0,this.debouncedWheelReset=BB(()=>{this.isFirstWheelEvent=!0,this.wasFirstWheelEventZoomCapped=void 0},100),this.previousZoomValid=!0,this.previousAxisZoomValid={[N.ChartAxisDirection.X]:!0,[N.ChartAxisDirection.Y]:!0},this.toggleAxisDraggingCursorsDebounced=BB(this.toggleAxisDraggingCursors.bind(this),qre,{leading:!0,trailing:!0});const t=new x1;this.selector=new WGe(t,this.getZoom.bind(this),this.isZoomValid.bind(this)),this.contextMenu=new FGe(e.eventsHub,e.contextMenuRegistry,e.zoomManager,this.getModuleProperties.bind(this),this.canResetZoom,()=>this.paddedRect,this.updateZoom.bind(this),this.isZoomValid.bind(this)),this.domProxy=new BGe({onAxisDragStart:i=>this.onAxisDragStart(i),onAxisDragMove:(i,n,s)=>this.onAxisDragMove(i,n,s),onAxisDragEnd:()=>this.onAxisDragEnd(),onAxisDoubleClick:i=>this.onAxisDoubleClick(i),onAxisWheel:(i,n,s)=>this.onAxisWheel(i,n,s)}),e.widgets.seriesDragInterpreter&&this.cleanup.register(e.widgets.seriesDragInterpreter.events.on("dblclick",i=>this.onSeriesAreaDoubleClick(i)),e.widgets.seriesDragInterpreter.events.on("drag-move",i=>this.onSeriesAreaDragMove(i)),e.widgets.seriesDragInterpreter.events.on("drag-start",i=>this.onSeriesAreaDragStart(i)),e.widgets.seriesDragInterpreter.events.on("drag-end",()=>this.onSeriesAreaDragEnd())),this.cleanup.register(e.scene.attachNode(t),e.eventsHub.on("series-area:hover",i=>this.onSeriesAreaHoverEvent(i)),e.eventsHub.on("series-area:click",i=>this.onSeriesAreaClickEvent(i)),e.eventsHub.on("series:keynav-zoom",i=>this.onNavZoom(i)),e.widgets.seriesWidget.addListener("wheel",i=>this.onWheel(i)),e.widgets.seriesWidget.addListener("touchstart",(i,n)=>this.onTouchStart(i,n)),e.widgets.seriesWidget.addListener("touchmove",(i,n)=>this.onTouchMove(i,n)),e.widgets.seriesWidget.addListener("touchend",i=>this.onTouchEnd(i)),e.widgets.seriesWidget.addListener("touchcancel",i=>this.onTouchEnd(i)),e.updateService.addListener("process-data",i=>this.onProcessData(i)),e.eventsHub.on("layout:complete",i=>this.onLayoutComplete(i)),e.eventsHub.on("zoom:change",i=>this.onZoomChange(i)),e.eventsHub.on("zoom:pan-start",i=>this.onZoomPanStart(i)),this.panner.addListener("update",i=>this.onPanUpdate(i)),()=>this.teardown())}teardown(){this.ctx.zoomManager.setZoomModuleEnabled(!1),this.buttons.destroy(),this.destroyContextMenuActions?.(),this.domProxy.destroy()}onEnabledChange(e){this.ctx.zoomManager.setZoomModuleEnabled(e),this.contextMenu&&(this.destroyContextMenuActions?.(),this.destroyContextMenuActions=this.contextMenu.registerActions(e))}isIgnoredTouch(e){return e?.device!=="touch"?!1:this.ctx.chartService.touch.dragAction!=="drag"?!0:this.enableSelecting?!1:this.enablePanning?JT(this.getZoom()):!0}onSeriesAreaDoubleClick(e){const{enabled:t,enableDoubleClickToReset:i}=this;!t||!i||e?.preventZoomDblClick||!this.isState(Bx.ZoomClickable)||this.resetZoom()}onSeriesAreaHoverEvent(e){if(!this.shouldHandleAxisHover(e)){this.clearHoveredAxis();return}const t=this.domProxy.pickAxisAtPoint(e.x,e.y);t?(this.domProxy.setHoveredAxis(t.axisId),this.ctx.domManager.updateCursor(Fv,this.domProxy.getCursor(t.direction))):this.clearHoveredAxis()}onSeriesAreaClickEvent(e){if(!this.shouldHandleAxisClick(e))return;const t=this.domProxy.pickAxisAtPoint(e.x,e.y);t&&e.sourceEvent?.type==="dblclick"&&this.onAxisDoubleClick(t.axisId)}shouldHandleAxisHover(e){const{enabled:t,enableAxisDragging:i,enableAxisScrolling:n,dragState:s}=this;return t&&(i||n)&&!e.consumed&&!this.activeAxis&&s===0&&this.domProxy.hasOverlappingAxes()}shouldHandleAxisClick(e){const{enabled:t,enableAxisDragging:i,enableAxisScrolling:n,enableDoubleClickToReset:s}=this;return t&&!this.activeAxis&&!e.consumed&&(i||n||s)}clearHoveredAxis(){this.activeAxis||(this.domProxy.clearHoveredAxis(),this.dragState===0&&this.ctx.domManager.updateCursor(Fv))}tryBeginAxisDelegation(e){const t=this.domProxy.getHoveredAxis();if(!this.enabled||!this.enableAxisDragging||!t||!this.domProxy.beginDelegatedAxisDrag(t.axisId))return!1;this.activeAxis=t,this.onAxisDragStart(t.direction);const i=this.dragState===2?"grabbing":this.domProxy.getCursor(t.direction);return this.ctx.domManager.updateCursor(Fv,i),e.device==="touch"&&e.sourceEvent.preventDefault(),!0}onSeriesAreaDragStart(e){const{enabled:t,enablePanning:i,enableSelecting:n,ctx:{domManager:s,zoomManager:o}}=this;if(!t||!this.isState(Bx.ZoomDraggable)||this.dragState!==0||this.isIgnoredTouch(e)||(this.panner.stopInteractions(),this.tryBeginAxisDelegation(e)))return;let r=0;const a=this.isPanningKeyPressed(e.sourceEvent);i&&(!n||a)?(s.updateCursor(Fv,"grabbing"),r=2,this.panner.start()):n&&!a&&(r=3),(this.dragState=r)!==0&&o.fireZoomPanStartEvent("zoom")}onSeriesAreaDragMove(e){const{dragState:t,enabled:i,paddedRect:n,panner:s,selector:o,ctx:{interactionManager:r,tooltipManager:a,updateService:l}}=this;if(this.activeAxis){this.onAxisDragMove(this.activeAxis.axisId,this.activeAxis.direction,e);return}if(!(!i||!n||!this.isState(Bx.ZoomDraggable)||this.isIgnoredTouch(e))){switch(r.pushState(N.InteractionState.ZoomDrag),e.device==="touch"&&e.sourceEvent.preventDefault(),t){case 2:s.update(e);break;case 3:o.update(e,this.getModuleProperties(),n);break;case 0:return}a.updateTooltip(_x),l.update(m2.PERFORM_LAYOUT,{skipAnimations:!0})}}onSeriesAreaDragEnd(){const{ctx:{interactionManager:e}}=this;if(this.activeAxis){this.handleAxisDragEnd();return}e.popState(N.InteractionState.ZoomDrag),!(!this.enabled||this.dragState===0)&&(this.handleRegularDragEnd(),this.resetDragState())}handleAxisDragEnd(){this.onAxisDragEnd(),this.domProxy.endDelegatedAxisDrag(this.activeAxis.axisId),this.activeAxis=void 0,this.clearHoveredAxis()}handleRegularDragEnd(){const{panner:e,selector:t}=this;switch(this.dragState){case 2:e.stop();break;case 3:if(t.didUpdate()){const i=t.stop(this.seriesRect,this.paddedRect,this.getZoom());this.updateZoom(i)}break}}resetDragState(){this.dragState=0,this.ctx.domManager.updateCursor(Fv),this.ctx.tooltipManager.removeTooltip(_x)}onAxisDoubleClick(e){const{enabled:t,enableDoubleClickToReset:i,ctx:{zoomManager:n}}=this;!t||!i||!this.isState(Bx.ZoomClickable)||(this.previousAxisZoomValid={[Br.X]:!0,[Br.Y]:!0},n.resetAxisZoom("zoom",e))}onAxisDragStart(e){const{axisDraggingMode:t,domProxy:i,enabled:n,enableAxisDragging:s,panner:o,ctx:{zoomManager:r}}=this;!n||!s||(o.stopInteractions(),t==="pan"?(i.setAxisCursor("grabbing"),this.dragState=2,this.panner.start(e),r.fireZoomPanStartEvent("zoom")):this.dragState=1)}onAxisDragMove(e,t,i){const{anchorPointX:n,anchorPointY:s,axisDragger:o,dragState:r,enabled:a,enableAxisDragging:l,seriesRect:c,shouldFlipXY:u,ctx:{interactionManager:d,tooltipManager:p,updateService:f,zoomManager:m}}=this;if(!a||!l||!c)return;d.pushState(N.InteractionState.ZoomDrag),i.device==="touch"&&i.sourceEvent.preventDefault();const v=this.getZoom();if(r===2)this.panner.update({currentX:i.offsetX,currentY:i.offsetY});else{let b=t===Br.X?n:s;u&&(b=t===Br.X?s:n);const C=m.getAxisZoom(e),x=o.update(i,t,b,c,v,C);m.setAxisManuallyAdjusted("zoom",e),this.updateAxisZoom(e,t,x,{directional:!0})}p.updateTooltip(_x),f.update(m2.PERFORM_LAYOUT,{skipAnimations:!0})}onAxisDragEnd(){const{axisDraggingMode:e,axisDragger:t,dragState:i,domProxy:n,enabled:s,enableAxisDragging:o,ctx:{domManager:r,interactionManager:a,tooltipManager:l}}=this;a.popState(N.InteractionState.ZoomDrag),!(!s||!o||i===0)&&(this.dragState=0,e==="pan"&&(n.setAxisCursor("grab"),this.panner.stop()),t.stop(),r.updateCursor(Fv),l.removeTooltip(_x))}onNavZoom(e){const{enabled:t,enableScrolling:i,scroller:n}=this;!this.ctx.interactionManager.isState(N.InteractionState.Default)||!t||!i||(e.widgetEvent.sourceEvent.preventDefault(),this.updateZoom(n.updateDelta(e.delta,this.getModuleProperties(),this.getZoom())))}onWheel(e){const{enabled:t,enablePanning:i,enableScrolling:n,paddedRect:s}=this;if(!t||!n||!s||!this.isState(Bx.ZoomWheelable))return;const{deltaX:o,deltaY:r}=e.sourceEvent,a=o!=null&&r!=null&&Math.abs(o)>Math.abs(r);i&&a?this.onWheelPanning(e):this.onWheelScrolling(e)}onWheelPanning(e){const{scrollingStep:t,scrollPanner:i,seriesRect:n,ctx:{zoomManager:s}}=this;if(!n)return;e.sourceEvent.preventDefault();const o=i.update(e,t,n,s.getAxisZooms());for(const[r,{direction:a,zoom:l}]of Ji(o))this.updateAxisZoom(r,a,l)}onWheelScrolling(e){const t=this.getZoom(),i=e.deltaY>0&&JT(t);this.handleWheelScrolling(e,i)}onAxisWheel(e,t,i){const{enableAxisScrolling:n,ctx:{zoomManager:s}}=this;if(!n||t!==Br.X&&t!==Br.Y)return;const o=t===Br.X,r=!o,a=this.getModuleProperties({isScalingX:o,isScalingY:r}),l=this.getZoom(),c=i.deltaY>0&&l[t].min===Bl&&l[t].max===$s;s.setAxisManuallyAdjusted("zoom",e),this.handleWheelScrolling(i,c,a)}handleWheelScrolling(e,t,i=this.getModuleProperties()){const{enableIndependentAxes:n,scroller:s,seriesRect:o,ctx:{zoomManager:r}}=this;if(!o)return;let a=!0;if(n===!0){const l=s.updateAxes(e,i,o,r.getAxisZooms());for(const[c,{direction:u,zoom:d}]of Ji(l)){const p=u===Br.X?this.constrainZoom({x:d,y:{min:$s,max:$s}}).x:d;a&&(a=this.updateAxisZoom(c,u,p))}}else{const l=s.update(e,i,o,this.getZoom());if(l==null)return;a=this.updateUnifiedZoom(l,{directional:!0})}t||(t=e.deltaY<0&&!a),this.firstWheelEventDirection!=null&&this.firstWheelEventDirection!==e.deltaY<0&&(this.isFirstWheelEvent=!0),this.isFirstWheelEvent?(this.wasFirstWheelEventZoomCapped=t,this.firstWheelEventDirection=e.deltaY<0,t||e.sourceEvent.preventDefault()):this.wasFirstWheelEventZoomCapped===!1&&e.sourceEvent.preventDefault(),this.isFirstWheelEvent=!1,this.debouncedWheelReset()}onTouchStart(e,t){!this.enableTwoFingerZoom||this.dragState!==0||this.twoFingers.start(e,t,this.getZoom())&&(this.dragState=4)}onTouchMove(e,t){if(!this.enableTwoFingerZoom||this.dragState!==4)return;const i=this.twoFingers.update(e,t);this.updateZoom(_l(i))}onTouchEnd(e){!this.enableTwoFingerZoom||this.dragState!==4||(e.sourceEvent.preventDefault(),this.twoFingers.end(e)&&(this.dragState=0))}onProcessData(e){this.shouldFlipXY=e.series.shouldFlipXY}onLayoutComplete(e){this.domProxy.update(this.enableAxisDragging,this.enableAxisScrolling,this.ctx,e.series.rect),this.enabled&&(this.seriesRect=e.series.rect,this.paddedRect=e.series.paddedRect,this.enableAxisDragging&&this.toggleAxisDraggingCursorsDebounced())}onZoomChange(e){e.callerId!=="zoom"&&this.panner.stopInteractions();const t=this.getZoom();this.buttons.toggleVisibleZoomed(JT(t))}onZoomPanStart(e){e.callerId==="zoom"&&this.panner.stopInteractions()}onPanUpdate(e){const{panner:t,seriesRect:i,ctx:{tooltipManager:n,zoomManager:s}}=this;if(!i)return;const o=t.translateZooms(i,s.getAxisZooms(),e.deltaX,e.deltaY);for(const[r,{direction:a,zoom:l}]of Ji(o))this.updateAxisZoom(r,a,l);n.updateTooltip(_x)}isPanningKeyPressed(e){switch(this.panKey){case"alt":return e.altKey;case"ctrl":return e.ctrlKey;case"shift":return e.shiftKey;case"meta":return e.metaKey}}isScalingX(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="y":this.axes==="x"}isScalingY(){return this.axes==="xy"?!0:this.shouldFlipXY?this.axes==="x":this.axes==="y"}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}constrainZoom(e){const{minVisibleItems:t,ctx:{zoomManager:i}}=this;return t===0?e:i.constrainZoomToItemCount(e,t)??e}isZoomValid(e,t){const{minVisibleItems:i,ctx:{zoomManager:n}}=this;if(i===0)return this.previousZoomValid=!0,!0;const s=this.getZoom(),o=_k(Ks(e))<_k(Ks(s)),r=_k(ka(e))<_k(ka(s));if(!o&&!r)return this.previousZoomValid=!0,!0;if(!this.previousZoomValid&&t?.directional)return!1;const a=n.isVisibleItemsCountAtLeast(e,i,t?.includeYVisibleRange);return this.previousZoomValid=t?.directional?a:!0,a}isAxisZoomValid(e,t,i){const{minVisibleItems:n,ctx:{zoomManager:s}}=this,o=this.getZoom(),r=t.max-t.min,a=o[e].max-o[e].min,l={...o,[e]:t};if(r>=a)return this.previousAxisZoomValid[e]=!0,!0;if(!this.previousAxisZoomValid[e]&&i?.directional)return!1;const c=s.isVisibleItemsCountAtLeast(l,n);return this.previousAxisZoomValid[e]=i?.directional?c:!0,c}resetZoom(){this.previousZoomValid=!0,this.previousAxisZoomValid={[Br.X]:!0,[Br.Y]:!0},this.ctx.zoomManager.resetZoom("zoom")}updateSyncZoom(e){this.updateZoom(e)}updateZoom(e){this.enableIndependentAxes?this.updatePrimaryAxisZooms(e):this.updateUnifiedZoom(e)}updateUnifiedZoom(e,t){return e=this.constrainZoom(e),this.isZoomValid(e,t)?(this.ctx.zoomManager.updateZoom("zoom",e),!0):(this.ctx.updateService.update(m2.SCENE_RENDER,{skipAnimations:!0}),!1)}updatePrimaryAxisZooms(e){this.updatePrimaryAxisZoom(e,Br.X),this.updatePrimaryAxisZoom(e,Br.Y)}updatePrimaryAxisZoom(e,t){const i=this.ctx.zoomManager.getPrimaryAxisId(t);i!=null&&this.updateAxisZoom(i,t,e[t])}updateAxisZoom(e,t,i,n){const{enableIndependentAxes:s,ctx:{zoomManager:o}}=this;if(!i)return!1;const r=this.getZoom();return s!==!0?(r[t]=i,this.updateUnifiedZoom(r,n)):this.isAxisZoomValid(t,i,n)?(o.updateAxisZoom("zoom",e,i),!0):!1}updateAxisCursor(e){if(!this.domProxy)return;const{enableAxisDragging:t=this.enableAxisDragging,enableAxisScrolling:i=this.enableAxisScrolling,axisDraggingMode:n=this.axisDraggingMode}=e;t?this.domProxy.setAxisCursor(n==="pan"?"grab":void 0):i?this.domProxy.setAxisCursor("default"):this.domProxy.setAxisCursor(void 0)}toggleAxisDraggingCursors(){const{anchorPointX:e,anchorPointY:t,domProxy:i}=this,n=this.getZoom();let s=Ks(n)!==sm,o=ka(n)!==sm;if(!s){const r=pR(n,.999,1);r.x=va(r.x,n.x,e),s=this.isZoomValid(r,{includeYVisibleRange:!0})}if(!o){const r=pR(n,1,.999);r.y=va(r.y,n.y,t),o=this.isZoomValid(r,{includeYVisibleRange:!0})}i.toggleAxisDraggingCursor(Br.X,s),i.toggleAxisDraggingCursor(Br.Y,o)}getZoom(){return xo(this.ctx.zoomManager.getZoom())}getResetZoom(){return xo(this.ctx.zoomManager.getRestoredZoom())}getModuleProperties(e){return{anchorPointX:e?.anchorPointX??this.getAnchorPointX(),anchorPointY:e?.anchorPointY??this.getAnchorPointY(),enabled:e?.enabled??this.enabled,independentAxes:e?.independentAxes??this.enableIndependentAxes===!0,isScalingX:e?.isScalingX??this.isScalingX(),isScalingY:e?.isScalingY??this.isScalingY(),keepAspectRatio:e?.keepAspectRatio??this.keepAspectRatio,scrollingStep:e?.scrollingStep??this.scrollingStep}}};D([Dy({newValue(e){this.onEnabledChange(e)}}),Vn],ss.prototype,"enabled");D([Dy({changeValue(e){this.updateAxisCursor({enableAxisDragging:e})}}),Vn],ss.prototype,"enableAxisDragging");D([Dy({changeValue(e){this.updateAxisCursor({enableAxisScrolling:e})}}),Vn],ss.prototype,"enableAxisScrolling");D([Vn],ss.prototype,"enableDoubleClickToReset");D([Dy({changeValue(e){this.ctx.zoomManager.setIndependentAxes(!!e)}}),Vn],ss.prototype,"enableIndependentAxes");D([Vn],ss.prototype,"enablePanning");D([Vn],ss.prototype,"enableScrolling");D([Vn],ss.prototype,"enableSelecting");D([Vn],ss.prototype,"enableTwoFingerZoom");D([Vn],ss.prototype,"panKey");D([Vn],ss.prototype,"axes");D([Vn],ss.prototype,"scrollingStep");D([Vn],ss.prototype,"keepAspectRatio");D([Vn],ss.prototype,"minVisibleItems");D([Vn],ss.prototype,"anchorPointX");D([Vn],ss.prototype,"anchorPointY");D([Vn],ss.prototype,"autoScaling");D([Dy({changeValue(e){this.updateAxisCursor({axisDraggingMode:e})}}),Vn],ss.prototype,"axisDraggingMode");D([Vn],ss.prototype,"buttons");D([QGe("panner.deceleration"),Vn],ss.prototype,"deceleration");var JGe={enabled:!0,visible:"hover",buttons:[{icon:"zoom-out",value:"zoom-out",section:"scale"},{icon:"zoom-in",value:"zoom-in",section:"scale"},{icon:"pan-left",value:"pan-left",section:"pan"},{icon:"pan-right",value:"pan-right",section:"pan"},{icon:"reset",value:"reset",section:"reset"}]},eVe={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian","topology"],moduleFactory:e=>new ss(e),themeTemplate:{zoom:{anchorPointX:"end",anchorPointY:"middle",axes:"x",buttons:JGe,enabled:!1,enableAxisDragging:!0,enableDoubleClickToReset:!0,enablePanning:!0,enableScrolling:!0,enableSelecting:!1,enableTwoFingerZoom:!0,deceleration:"short",minVisibleItems:2,panKey:"alt",scrollingStep:.1,autoScaling:{enabled:{$eq:[{$path:"../axes"},"x"]},padding:.05}}}};function C0(e,t,i){return N.callWithContext(e.chartService,t,i)}var{AxisInterval:tVe,AxisLabel:iVe,ZIndexMap:nVe,LinearScale:sVe,BBox:oVe,TranslatableGroup:rVe,Selection:aVe,Text:lVe,createIdsGenerator:cVe,findMinMax:uVe,findRangeExtent:dVe,estimateTickCount:hVe}=N,HW=class $_{constructor(t,i){this.ctx=t,this.dataProvider=i,this.id=To(this),this.axisGroup=new rVe({name:`${this.id}-AxisTicks`,zIndex:nVe.AXIS}),this.labelSelection=aVe.select(this.axisGroup,lVe),this.interval=new tVe,this.label=new iVe,this.scale=new sVe,this.placement="bottom",this.translationX=0,this.translationY=0,this.padding=0}get horizontal(){return this.placement.startsWith("top")||this.placement.startsWith("bottom")}attachAxis(t){t.appendChild(this.axisGroup)}calculateLayout(){const{placement:t,translationX:i,translationY:n,horizontal:s,label:o}=this;let r,a;switch(t){case"top":case"top-right":case"top-left":r="bottom",a="center",o.mirrored=!1,o.parallel=!0;break;case"bottom":case"bottom-right":case"bottom-left":r="top",a="center",o.mirrored=!1,o.parallel=!0;break;case"right":case"right-top":case"right-bottom":case"left":case"left-top":case"left-bottom":r="middle",a="left",o.mirrored=!0,o.parallel=!1;break}const l=[],c=this.generateTicks(),{ticks:u}=c;return this.labelSelection.update(u,void 0,d=>d.tickId),this.axisGroup.setProperties({translationX:i,translationY:n}),this.labelSelection.each((d,p)=>{d.fontFamily=o.fontFamily,d.fontSize=o.fontSize,d.fontStyle=o.fontStyle,d.fontWeight=o.fontWeight,d.fill=o.color,d.textBaseline=r,d.textAlign=a,d.text=p.tickLabel,d.x=s?p.translation:0,d.y=s?0:p.translation,l.push(d.getBBox())}),l.length>0?oVe.merge(l).translate(i,n):void 0}tickFormatter(t,i,n,s){const{ctx:o}=this,{formatManager:r}=o,a=this.dataProvider.data.flatMap(l=>l.series);return(l,c)=>{const u={type:"number",value:l,datum:void 0,seriesId:void 0,legendItemName:void 0,key:void 0,source:"gradient-legend",property:"color",domain:t,boundSeries:a,fractionDigits:s};return this.label.formatValue((d,p)=>C0(o,d,p),u,c)??r.format((d,p)=>C0(o,d,p),u)??r.defaultFormat(u)}}inRange(t,i=.001){const[n,s]=uVe(this.scale.range);return t>=n-i&&t<=s+i}generateTicks(){const{minSpacing:t,maxSpacing:i}=this.interval,{maxTickCount:n,minTickCount:s,tickCount:o}=hVe(dVe(this.scale.range),1,t,i,$_.DefaultTickCount,$_.DefaultMinSpacing),r=this.getTicksData({nice:!0,interval:this.interval.step,tickCount:o,minTickCount:s,maxTickCount:n});if(this.placement==="bottom"||this.placement==="top"){const a=ei(this.label),{domain:l}=this.scale,u=l[0]>l[1]?-1:1;let d=-1/0*u;r.ticks=r.ticks.filter(p=>{if(Math.sign(p.translation-d)!==u)return!1;const{width:f}=ft(p.tickLabel)?Da(p.tickLabel,this.label):a.measureLines(p.tickLabel);return d=p.translation+f*u,!0})}return r}getTicksData(t){const i=[],n=t.nice?this.scale.niceDomain(t):this.scale.domain,s=this.scale.ticks(t,n)?.ticks??[],o=s.reduce((l,c)=>Math.max(l,X0(c)),0),r=cVe(),a=this.tickFormatter(n,s,!1,o);for(let l=0;l<s.length;l++){const c=s[l],u=this.scale.convert(c);if(!this.inRange(u))continue;const d=a(c,l);if(d==null||d==="")continue;const p=r(Gt(d));i.push({tick:c,tickId:p,tickLabel:d,translation:u})}return{rawTicks:s,fractionDigits:o,ticks:i}}};HW.DefaultTickCount=5;HW.DefaultMinSpacing=10;var pVe=HW,{BaseProperties:gVe,ZIndexMap:fVe,ProxyProperty:WW,Property:Ba,LayoutElement:mVe,Group:yVe,Rect:nX,Marker:vVe,TranslatableGroup:bVe,BBox:y2,expandLegendPosition:v2}=N,jW=class extends gVe{constructor(){super(...arguments),this.thickness=16,this.preferredLength=100}};D([Ba],jW.prototype,"thickness");D([Ba],jW.prototype,"preferredLength");var w1=class extends N.BaseProperties{constructor(e){super(),this.axisTicks=e}};D([WW("axisTicks.label")],w1.prototype,"label");D([WW("axisTicks.interval")],w1.prototype,"interval");D([WW("axisTicks.padding")],w1.prototype,"padding");var _a=class extends N.BaseProperties{constructor(e){super(),this.ctx=e,this.id=To(this),this.legendGroup=new bVe({name:"legend",zIndex:fVe.LEGEND}),this.containerNode=this.legendGroup.appendChild(new nX({name:"legend-container"})),this.gradientRect=new nX,this.arrow=new vVe({shape:"triangle"}),this.ticksGroup=new yVe({name:"legend-axis-group"}),this.cleanup=new _i,this.enabled=!1,this.position="bottom",this.reverseOrder=!1,this.gradient=new jW,this.spacing=20,this.border=new N.Border(this.containerNode),this.cornerRadius=0,this.fillOpacity=1,this.padding=4,this.data=[],this.highlightManager=e.highlightManager,this.axisTicks=new pVe(e,this),this.axisTicks.attachAxis(this.ticksGroup),this.scale=new w1(this.axisTicks),this.legendGroup.append([this.gradientRect,this.arrow,this.ticksGroup]),this.cleanup.register(e.eventsHub.on("highlight:change",()=>this.onChartHoverChange()),e.layoutManager.registerElement(mVe.Legend,t=>this.onStartLayout(t)),()=>this.legendGroup.remove())}isVertical(){const{placement:e}=v2(this.position);return e.startsWith("right")||e.startsWith("left")}destroy(){this.cleanup.flush()}attachLegend(e){e.appendChild(this.legendGroup)}onStartLayout(e){const[t]=this.data;if(!this.enabled||!t?.enabled||t.legendType!=="gradient"){this.legendGroup.visible=!1;return}const{colorRange:i}=this.normalizeColorArrays(t),n=this.updateGradientRect(e.layoutBox,i),s=this.updateAxis(t,n)??new y2(0,0,0,0),o=y2.merge([n,s]),{strokeWidth:r,padding:a}=this.getContainerStyles();o.grow(a).grow(r);const{left:l,top:c}=this.getMeasurements(e.layoutBox,o);this.updateContainer(o),this.updateArrow(),this.legendGroup.visible=!0,this.legendGroup.translationX=l,this.legendGroup.translationY=c}normalizeColorArrays(e){let t=e.colorDomain.slice();const i=e.colorRange.slice();if(t.length===i.length)return{colorDomain:t,colorRange:i};t.length>i.length&&i.splice(t.length);const[n,s]=t,o=i.length;return t=i.map((r,a)=>a===0?n:a===o-1?s:n+(s-n)*a/(o-1)),{colorDomain:t,colorRange:i}}updateGradientRect(e,t){const{gradientRect:i,gradient:n}=this,{preferredLength:s,thickness:o}=n,r=new y2(0,0,0,0);let a;return this.isVertical()?(a=0,r.width=o,r.height=Math.min(e.height,s)):(a=90,r.width=Math.min(e.width,s),r.height=o),i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height,i.fill={type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:t.map((l,c)=>({stop:c/(t.length-1),color:l})),rotation:a},r}updateAxis(e,t){const{axisTicks:i,gradient:n,scale:s}=this,{placement:o}=v2(this.position),r=this.isVertical(),a=this.reverseOrder!==r;i.placement=o;const l=n.thickness+(s.padding??0);return i.translationX=r?l:t.x,i.translationY=r?t.y:l,i.scale.domain=a?e.colorDomain.slice().reverse():e.colorDomain,i.scale.range=r?[t.x,t.height]:[t.y,t.width],i.calculateLayout()}updateContainer(e){const t=this.getContainerStyles();N.applyShapeStyle(this.containerNode,t),this.containerNode.cornerRadius=t.cornerRadius,this.containerNode.x=e.x,this.containerNode.y=e.y,this.containerNode.width=e.width,this.containerNode.height=e.height}updateArrow(){const e=this.highlightManager.getActiveHighlight(),{arrow:t}=this;if(e?.colorValue==null){t.visible=!1;return}const{scale:i,label:n}=this.axisTicks,s=n.fontSize??0,o=i.convert(e.colorValue);let{x:r,y:a}=this.gradientRect,l=Math.PI;this.isVertical()?(r-=s/2,a+=o,l/=2):(r+=o,a-=s/2),t.visible=!0,t.fill=n.color,t.rotation=l,t.size=s,t.translationX=r,t.translationY=a}getMeasurements(e,t){let{x:i,y:n}=e;const{width:s,height:o}=t,{placement:r,floating:a,xOffset:l,yOffset:c}=v2(this.position),u=this.getContainerStyles();switch(i+=u.strokeWidth+u.padding.left,n+=u.strokeWidth+u.padding.top,r){case"left":n+=e.height/2-o/2;break;case"right":i+=e.width-s,n+=e.height/2-o/2;break;case"top":i+=e.width/2-s/2;break;case"bottom":i+=e.width/2-s/2,n+=e.height-o;break;case"right-top":case"top-right":i+=e.width-s;break;case"right-bottom":case"bottom-right":i+=e.width-s,n+=e.height-o;break;case"left-bottom":case"bottom-left":n+=e.height-o;break}if(!a)switch(r){case"left":case"left-top":case"left-bottom":e.shrink(s+this.spacing,"left");break;case"right":case"right-top":case"right-bottom":e.shrink(s+this.spacing,"right");break;case"top":case"top-left":case"top-right":e.shrink(o+this.spacing,"top");break;case"bottom":case"bottom-left":case"bottom-right":e.shrink(o+this.spacing,"bottom");break}return i+=l,n+=c,{top:n,left:i}}getContainerStyles(){const{stroke:e,strokeOpacity:t,strokeWidth:i}=this.border,{cornerRadius:n,fill:s,fillOpacity:o,padding:r}=this,a=typeof r=="number";return{cornerRadius:n,fill:s,fillOpacity:o,padding:{top:a?r:r.top??0,right:a?r:r.right??0,bottom:a?r:r.bottom??0,left:a?r:r.left??0},stroke:e,strokeOpacity:t,strokeWidth:this.border.enabled?i:0}}onChartHoverChange(){this.enabled&&this.updateArrow()}};_a.className="GradientLegend";D([Ba],_a.prototype,"enabled");D([Ba],_a.prototype,"position");D([Ba],_a.prototype,"reverseOrder");D([Ba],_a.prototype,"gradient");D([Ba],_a.prototype,"spacing");D([Ba],_a.prototype,"border");D([Ba],_a.prototype,"cornerRadius");D([Ba],_a.prototype,"fill");D([Ba],_a.prototype,"fillOpacity");D([Ba],_a.prototype,"padding");D([Ba],_a.prototype,"scale");var SVe={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","topology","standalone"],identifier:"gradient",moduleFactory:e=>new _a(e),themeTemplate:{enabled:!1,position:"bottom",spacing:20,scale:{padding:13,label:{color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},minSpacing:5},interval:{minSpacing:15}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1,fill:{$applySwitch:[{$path:"type"},{$ref:"chartBackgroundColour"},["gradient",N.FILL_GRADIENT_BLANK_DEFAULTS],["pattern",N.FILL_PATTERN_BLANK_DEFAULTS],["image",N.FILL_IMAGE_BLANK_DEFAULTS]]}},removable:"standalone-only"};function CVe(e,t){const i=e.addChild("canvas-overlay","watermark"),n=nt("span");n.innerText=t,i.addEventListener("animationend",()=>{e.removeChild("canvas-overlay","watermark"),e.removeStyles("watermark")}),i.classList.add("ag-watermark"),i.appendChild(n)}var{ordinalTimeAxisOptionsDefs:xVe,angleNumberAxisOptionsDefs:wVe,angleCategoryAxisOptionsDefs:DVe,radiusNumberAxisOptionsDefs:MVe,radiusCategoryAxisOptionsDefs:AVe}=N,kVe={type:"axis",name:"ordinal-time",chartType:"cartesian",enterprise:!0,options:xVe,create:e=>new $D(e)},TVe={type:"axis",name:"angle-number",chartType:"polar",enterprise:!0,options:wVe,create:e=>new gy(e)},IVe={type:"axis",name:"angle-category",chartType:"polar",enterprise:!0,options:DVe,create:e=>new Lg(e)},RVe={type:"axis",name:"radius-number",chartType:"polar",enterprise:!0,options:MVe,create:e=>new YS(e)},EVe={type:"axis",name:"radius-category",chartType:"polar",enterprise:!0,options:AVe,create:e=>new Pg(e)},{Chart:LVe}=N,UW=class extends LVe{getChartType(){return"standalone"}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:n}=e,s=n.clone().shrink(this.modulesManager.getModule("seriesArea").getPadding());this.seriesRect=s,this.animationRect=s;for(const o of[t,i])o.translationX=Math.floor(s.x),o.translationY=Math.floor(s.y);t.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:s,paddedRect:n}})}getAriaLabel(){const e=this.series[0]?.type;if(e==null)return"";const t=this.getCaptionText();switch(e){case"radial-gauge":case"linear-gauge":{const i=[];t.length!==0&&i.push(t);for(const n of this.series)i.push(n.getCaptionText());return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i.join(". ")})}case"treemap":case"sunburst":return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t});default:return this.ctx.localeManager.t("ariaAnnounceStandaloneChart",{caption:t})}}};UW.className="StandaloneChart";UW.type="standalone";var{isAgStandaloneChartOptions:PVe,standaloneChartOptionsDefs:NVe}=N,OVe={type:"chart",name:"standalone",enterprise:!0,options:NVe,detect:PVe,create(e,t){return new UW(e,t)}},{Chart:FVe,MercatorScale:sX,ChartAxisDirection:zk,Property:BVe}=N;function oX(e){return e.type==="map-shape"||e.type==="map-line"||e.type==="map-marker"||e.type==="map-shape-background"||e.type==="map-line-background"}var D1=class extends FVe{constructor(e,t){super(e,t),this.ctx.zoomManager.updateAxes([zk.X,zk.Y])}getChartType(){return"topology"}async updateData(){await super.updateData();const e=this.getOptions();this.topology!==e.topology&&(this.topology=e.topology);const{topology:t}=this;for(const i of this.series)oX(i)&&i.setChartTopology(t)}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:n}=e,s=n.clone().shrink(this.modulesManager.getModule("seriesArea").getPadding());this.seriesRect=s,this.animationRect=s;const o=this.series.filter(oX),r=o.reduce((c,u)=>{if(!u.visible)return c;const d=u.topologyBounds;return d==null?c:c==null?d:c.merge(d)},void 0);let a;if(r!=null){const{lon0:c,lat0:u,lon1:d,lat1:p}=r,f=[[c,u],[d,p]],m=sX.bounds(f),{width:v,height:b}=s,C=Math.min(v/m.width,b/m.height),x=m.width*C,w=m.height*C,M=(v-x)/2,T=(b-w)/2,L=M,I=T,R=M+x,O=T+w,_=this.ctx.zoomManager.getAxisZoom(zk.X),B=this.ctx.zoomManager.getAxisZoom(zk.Y),V=(R-L)/(_.max-_.min),j=L-V*_.min,K=(O-I)/(1-B.min-(1-B.max)),Y=I-K*(1-B.max);a=new sX(f,[[j,Y],[j+V,Y+K]])}for(const c of o)c.scale=a;const l=this.series.some(c=>c.visible);t.visible=l;for(const c of[t,i])c.translationX=Math.floor(s.x),c.translationY=Math.floor(s.y),c.setClipRect(s.clone());this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:l,rect:s,paddedRect:n}})}};D1.className="TopologyChart";D1.type="topology";D([BVe],D1.prototype,"topology");var{isAgTopologyChartOptions:_Ve,topologyChartOptionsDefs:zVe}=N,GVe={type:"chart",name:"topology",enterprise:!0,options:zVe,detect:_Ve,create(e,t){return new D1(e,t)}},{annotationCalloutStylesDefs:VVe,annotationNoteStylesDefs:HVe,annotationTextStylesDef:WVe,annotationCommentStylesDefs:jVe,annotationMeasurerStylesDefs:Gk,annotationQuickMeasurerStylesDefs:UVe,annotationShapeStylesDefs:rX,annotationChannelTextDefs:$Ve,annotationCrossLineStyleDefs:aX,annotationFibonacciStylesDefs:lX,annotationLineStyleDefs:cX,annotationLineTextDefs:KVe,annotationDisjointChannelStyleDefs:YVe,annotationParallelChannelStyleDefs:XVe}=N,aw=Ki({__type:ue(ht("date")),value:lt(J,ve)},"a serializable date object"),uX=lt(J,ve,aw),K_=lt(uX,Ki({value:uX,groupPercentage:TJ(-1,2)})),dX={...$Ve,label:J},Zc={...KVe,label:J},Li={x:K_,y:ve},ZVe=Xm({line:{...cX,start:Li,end:Li,text:Zc},"horizontal-line":{...aX,value:K_,text:Zc},"vertical-line":{...aX,value:K_,text:Zc},"disjoint-channel":{...YVe,startHeight:ve,endHeight:ve,start:Li,end:Li,text:dX},"parallel-channel":{...XVe,height:ve,start:Li,end:Li,text:dX},"fibonacci-retracement":{...lX,start:Li,end:Li,text:Zc,reverse:te},"fibonacci-retracement-trend-based":{...lX,start:Li,end:Li,endRetracement:Li,text:Zc,reverse:te},callout:{...VVe,start:Li,end:Li,text:J},comment:{...jVe,...Li,text:J},note:{...HVe,...Li,text:J},text:{...WVe,...Li,text:J},arrow:{...cX,text:Zc,start:Li,end:Li},"arrow-up":{...rX,...Li},"arrow-down":{...rX,...Li},"date-range":{...Gk,extendAbove:te,extendBelow:te,text:Zc,start:Li,end:Li},"price-range":{...Gk,extendLeft:te,extendRight:te,text:Zc,start:Li,end:Li},"date-price-range":{...Gk,text:Zc,start:Li,end:Li},"quick-date-price-range":{...Gk,...UVe,text:Zc,start:Li,end:Li}},"an annotation initial state object"),qVe={chartType:Me("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),annotations:Sn(ZVe),legend:Sn({visible:te,seriesId:J,itemId:J,legendItemName:J},"legend state array"),zoom:{rangeX:{start:lt(ve,aw),end:lt(ve,aw)},rangeY:{start:lt(ve,aw),end:lt(ve,aw)},ratioX:{start:si(Ke,Il("end")),end:si(Ke,Rl("start"))},ratioY:{start:si(Ke,Il("end")),end:si(Ke,Rl("start"))},autoScaledAxes:it(ht("y"))}},{annotationOptionsDef:QVe}=N,JVe={type:"plugin",name:"annotations",chartType:"cartesian",options:QVe,create(){return null}},eHe={type:"plugin",name:"navigator",chartType:"cartesian",options:nGe,create(){return null}},tHe={type:"plugin",name:"initialState",options:qVe,create(){return null}};function hX(e,t,i){i||(t=iHe(t));const n=new Map;for(const o of e)n.set(o.id,{datum:o,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let s=0;for(const[o,r]of n.entries())s=Math.max(s,Y_(n,t,r,o,-1,[])+Y_(n,t,r,o,1,[])+1);return{links:t,nodeGraph:n,maxPathLength:s}}function eae(e,t,i,n){const s=n.indexOf(t);if(s!==-1){for(let r=s;r<n.length;r+=1)i.add(n[r]);return}n.push(t);const{toNode:o}=t;for(const r of e)r.fromNode===o&&eae(e,r,i,n);n.pop()}function iHe(e){const t=new Set;for(const i of e)eae(e,i,t,[]);return t.size!==0&&fe.warnOnce("Some links formed circular references. These will be removed from the output."),t.size===0?e:e.filter(i=>!t.has(i))}function Y_(e,t,i,n,s,o){if(o.includes(n))return 1/0;let r=s===-1?i.maxPathLengthBefore:i.maxPathLengthAfter;if(r===-1){r=0;const a=s===-1?i.linksBefore:i.linksAfter;for(const l of t){const{fromNode:c,toNode:u}=l,d=s===-1?u.id:c.id,p=s===-1?c.id:u.id,f=n===d?e.get(p):void 0;f!=null&&(a.push({node:f,link:l}),o?.push(n),r=Math.max(r,Y_(e,t,f,p,s,o)+1),o?.pop())}s===-1?i.maxPathLengthBefore=r:i.maxPathLengthAfter=r}return r}var{Series:nHe,DataController:sHe,keyProperty:oHe,valueProperty:Vk,Selection:Pf,Group:Bv,TransformableText:rHe}=N,aHe=class extends N.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n);const{datumIndex:s}=i,o=n.contextNodeData?.nodeData.find(r=>r.datumIndex.type===s.type&&r.datumIndex.index===s.index);this.size=o?.size,this.label=o?.type===1?o?.label:void 0}},tae=class extends nHe{constructor(){super(...arguments),this.NodeEvent=aHe,this.nodeCount=0,this.linkCount=0,this.linksDataModel=void 0,this.linksProcessedData=void 0,this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new Bv({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new Bv({name:"nodeGroup"})),this.focusLinkGroup=this.highlightGroup.appendChild(new Bv({name:"linkGroup"})),this.focusNodeGroup=this.highlightGroup.appendChild(new Bv({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightGroup.appendChild(new Bv({name:"linkGroup"})),this.highlightNodeGroup=this.highlightGroup.appendChild(new Bv({name:"nodeGroup"})),this.labelSelection=Pf.select(this.labelGroup,rHe),this.linkSelection=Pf.select(this.linkGroup,()=>this.linkFactory()),this.nodeSelection=Pf.select(this.nodeGroup,()=>this.nodeFactory()),this.focusLinkSelection=Pf.select(this.focusLinkGroup,()=>this.linkFactory()),this.focusNodeSelection=Pf.select(this.focusNodeGroup,()=>this.nodeFactory()),this.highlightLinkSelection=Pf.select(this.highlightLinkGroup,()=>this.linkFactory()),this.highlightNodeSelection=Pf.select(this.highlightNodeGroup,()=>this.nodeFactory())}get nodes(){return this.properties.nodes}async processData(e){const{data:t,nodes:i}=this;if(t==null)return;const{fromKey:n,toKey:s,sizeKey:o,idKey:r,labelKey:a}=this.properties,l=new sHe("standalone",e.suppressFieldDotNotation),c=i==null?null:l.request(this.id,N.DataSet.wrap(i)??N.DataSet.empty(),{props:[oHe(r,void 0,{id:"idValue",includeProperty:!1}),...a==null?[]:[Vk(a,void 0,{id:"labelValue",includeProperty:!1})]],groupByKeys:!0}),u=e.request(this.id,t,{props:[Vk(n,void 0,{id:"fromValue",includeProperty:!1}),Vk(s,void 0,{id:"toValue",includeProperty:!1}),...o==null?[]:[Vk(o,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]],groupByKeys:!1});i!=null&&l.execute();const[d,p]=await Promise.all([c??Promise.resolve(null),u]);this.nodesDataModel=d?.dataModel,this.nodesProcessedData=d?.processedData,this.linksDataModel=p?.dataModel,this.linksProcessedData=p?.processedData;const f=new Map;if(d==null){const m=p.dataModel.resolveColumnById(this,"fromValue",p.processedData),v=p.dataModel.resolveColumnById(this,"toValue",p.processedData),b=x=>{const w=f.size,M=x;return{series:this,itemId:void 0,datum:{},datumIndex:{type:1,index:w},type:1,index:w,linksBefore:[],linksAfter:[],id:x,size:0,label:M,style:this.getNodeStyle({datumIndex:{type:1,index:w},datum:{},size:0,label:M},w,!1)}},C=p.processedData.dataSources.get(this.id)?.data;if(C)for(const[x]of C.entries()){const w=m[x],M=v[x];w==null||M==null||(f.has(w)||f.set(w,b(w)),f.has(M)||f.set(M,b(M)))}}else{const m=d.dataModel.resolveColumnById(this,"idValue",d.processedData),v=a==null?void 0:d.dataModel.resolveColumnById(this,"labelValue",d.processedData),b=d.processedData.dataSources.get(this.id)?.data;if(b)for(const[C,x]of b.entries()){const w=m[C],M=v?.[C],T={type:1,index:C};f.set(w,{series:this,itemId:void 0,datum:x,datumIndex:T,type:1,index:C,linksBefore:[],linksAfter:[],id:w,size:0,label:M,style:this.getNodeStyle({datumIndex:T,datum:x,size:0,label:M},C,!1)})}}this.processedNodes=f}getNodeGraph(e,t,{includeCircularReferences:i}){const{linksDataModel:n,linksProcessedData:s}=this;if(n==null||s==null){const{links:v,nodeGraph:b,maxPathLength:C}=hX(new Map().values(),[],i);return this.nodeCount=0,this.linkCount=0,{nodeGraph:b,links:v,maxPathLength:C}}const{sizeKey:o}=this.properties,r=n.resolveColumnById(this,"fromValue",s),a=n.resolveColumnById(this,"toValue",s),l=o==null?void 0:n.resolveColumnById(this,"sizeValue",s),c=new Map;for(const v of this.processedNodes.values()){const b=e(v);c.set(v.id,b)}const u=[],d=s.dataSources.get(this.id)?.data;if(d)for(const[v,b]of d.entries()){const C=r[v],x=a[v],w=l==null?1:l[v],M=c.get(C),T=c.get(x);if(w<=0||M==null||T==null)continue;const L={type:0,index:v},I=t({series:this,itemId:void 0,datum:b,datumIndex:L,type:0,index:v,fromNode:M,toNode:T,size:w,style:this.getLinkStyle({datum:b,datumIndex:L},M.datumIndex,!1)});u.push(I)}const{links:p,nodeGraph:f,maxPathLength:m}=hX(c.values(),u,i);for(const v of f.values())v.datum.linksBefore=v.linksBefore.map(b=>b.link),v.datum.linksAfter=v.linksAfter.map(b=>b.link);return this.nodeCount=f.size,this.linkCount=p.length,{nodeGraph:f,links:p,maxPathLength:m}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(e){const{seriesRect:t}=e,i={seriesRectWidth:t?.width??0,seriesRectHeight:t?.height??0};(this._nodeDataDependencies==null||this._nodeDataDependencies.seriesRectWidth!==i.seriesRectWidth||this._nodeDataDependencies.seriesRectHeight!==i.seriesRectHeight)&&(this._nodeDataDependencies=i),this.updateSelections();const n=this.contextNodeData?.nodeData??[],s=this.contextNodeData?.labelData??[];let o=this.ctx.highlightManager?.getActiveHighlight();if(o?.series===this&&o.type==null){const{itemId:u}=o;o=u==null?void 0:n.find(d=>d.type===1&&d.id===u)}else o?.series!==this&&(o=void 0);this.contentGroup.visible=this.visible,this.contentGroup.opacity=o==null?1:this.properties.highlight.unhighlightedItem.opacity??1,this.labelSelection=this.updateLabelSelection({labelData:s,labelSelection:this.labelSelection}),this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=this.updateLinkSelection({nodeData:n.filter(u=>u.type===0),datumSelection:this.linkSelection}),this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=this.updateNodeSelection({nodeData:n.filter(u=>u.type===1),datumSelection:this.nodeSelection}),this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1});let r,a,l,c;o?.type===1?(r=n.filter(u=>u.type===0&&(u.toNode===o||u.fromNode===o)),a=r.map(u=>u.fromNode===o?u.toNode:u.fromNode),a.push(o),l=[],c=[o]):o?.type===0?(r=[o],a=[o.fromNode,o.toNode],l=[o],c=[]):(r=[],a=[],l=[],c=[]),this.focusLinkSelection=this.updateLinkSelection({nodeData:r,datumSelection:this.focusLinkSelection}),this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=this.updateNodeSelection({nodeData:a,datumSelection:this.focusNodeSelection}),this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=this.updateLinkSelection({nodeData:l,datumSelection:this.highlightLinkSelection}),this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=this.updateNodeSelection({nodeData:c,datumSelection:this.highlightNodeSelection}),this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})}resetAnimation(e){}dataCount(){return Number.NaN}getSeriesDomain(e){return[]}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}legendItemSymbol(e,t,i={}){const{fills:n,strokes:s}=this.properties,{fill:o=n[t%n.length],fillOpacity:r=1,stroke:a=s[t%s.length],strokeWidth:l=0,strokeOpacity:c=1,lineDash:u=[0],lineDashOffset:d=0}=i;return{marker:{fill:o,fillOpacity:r,stroke:a,strokeWidth:l,strokeOpacity:c,lineDash:u,lineDashOffset:d}}}getLegendData(e){if(e!=="category")return[];const{showInLegend:t}=this.properties;return Array.from(this.processedNodes.values(),({id:i,label:n},s)=>({legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:!0,label:{text:n??i},symbol:this.legendItemSymbol(1,s),hideInLegend:!t,isFixed:!0}))}pickNodeClosestDatum({x:e,y:t}){let i=1/0,n;return this.linkSelection.each((s,o)=>{const r=s.distanceSquared(e,t);r<i&&(i=r,n=o)}),this.nodeSelection.each((s,o)=>{const r=s.distanceSquared(e,t);r<i&&(i=r,n=o)}),n==null?void 0:{datum:n,distance:Math.sqrt(i)}}getDatumAriaText(e,t){if(e.type===0)return this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:e.index+1,count:this.linkCount,from:e.fromNode.id,to:e.toNode.id,size:e.size,sizeName:this.properties.sizeName??this.properties.sizeKey});if(e.type===1)return this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:e.index+1,count:this.nodeCount,description:t})}pickFocus(e){const{datumIndexDelta:t,otherIndexDelta:i}=e,n=this.contextNodeData?.nodeData[e.datumIndex-e.datumIndexDelta];let s=n;if(i!==0||t===0)return;if(n?.type===0){const a=Array.from(this.linkSelection,u=>u.datum),c=a.indexOf(n)+t;c>=0&&c<a.length?s=a[c]:c>0?s=a.at(-1):s=Array.from(this.nodeSelection,d=>d.datum).at(-1)}else if(n?.type===1){const a=Array.from(this.nodeSelection,u=>u.datum),c=a.indexOf(n)+t;c>=0&&c<a.length?s=a[c]:c<0?s=a[0]:s=Array.from(this.linkSelection,d=>d.datum)[0]}if(s==null)return;const o=s.type===1?Array.from(this.nodeSelection).find(a=>a.datum===s):Array.from(this.linkSelection).find(a=>a.datum===s);if(o==null)return;const r=this.computeFocusBounds(o.node);if(r!=null)return{datum:o.datum,datumIndex:this.contextNodeData?.nodeData.indexOf(o.datum)??0,otherIndex:0,bounds:r,clipFocusBox:!0}}getCategoryValue(e){}datumIndexForCategoryValue(e){}},{Path:lHe,SceneChangeDetection:Vg}=N;function pX({radius:e,startAngle:t,endAngle:i,tension:n}){const s=e*Math.cos(t),o=e*Math.sin(t),r=e*Math.cos(i),a=e*Math.sin(i),l=s*n,c=o*n,u=r*n,d=a*n;return{x:[s,l,u,r],y:[o,c,d,a]}}var Lh=class extends lHe{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}tensionedCurveTo(e,t,i,n,s,o,r,a){const{path:l,tension:c}=this,u=1-c;l.cubicCurveTo((i-e)*u+e,(n-t)*u+t,(s-r)*u+r,(o-a)*u+a,r,a)}updatePath(){const{path:e,centerX:t,centerY:i,radius:n}=this;let{startAngle1:s,endAngle1:o,startAngle2:r,endAngle2:a}=this;s>r&&([s,r]=[r,s],[o,a]=[a,o]),e.clear();const l=t+n*Math.cos(s),c=i+n*Math.sin(s);e.moveTo(l,c),this.tensionedCurveTo(l,c,t,i,t,i,t+n*Math.cos(a),i+n*Math.sin(a)),e.arc(t,i,n,a,r,!0),this.tensionedCurveTo(t+n*Math.cos(r),i+n*Math.sin(r),t,i,t,i,t+n*Math.cos(o),i+n*Math.sin(o)),e.arc(t,i,n,o,s,!0),e.closePath()}};D([Vg()],Lh.prototype,"centerX");D([Vg()],Lh.prototype,"centerY");D([Vg()],Lh.prototype,"radius");D([Vg()],Lh.prototype,"startAngle1");D([Vg()],Lh.prototype,"endAngle1");D([Vg()],Lh.prototype,"startAngle2");D([Vg()],Lh.prototype,"endAngle2");D([Vg()],Lh.prototype,"tension");var{FillGradientDefaults:cHe,FillPatternDefaults:uHe,FillImageDefaults:dHe,BaseProperties:iae,makeSeriesTooltip:hHe,SeriesProperties:pHe,Property:Bt,Label:gHe}=N,$W=class extends gHe{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};D([Bt],$W.prototype,"spacing");D([Bt],$W.prototype,"maxWidth");var Zu=class extends iae{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}getStyle(e,t,i){const{fillOpacity:n,strokeWidth:s,strokeOpacity:o,lineDash:r,lineDashOffset:a,tension:l}=this,c=this.fill??e[i%e.length],u=this.stroke??t[i%e.length];return{fill:c,fillOpacity:n,stroke:u,strokeWidth:s,strokeOpacity:o,lineDash:r,lineDashOffset:a,tension:l}}};D([Bt],Zu.prototype,"fill");D([Bt],Zu.prototype,"fillOpacity");D([Bt],Zu.prototype,"stroke");D([Bt],Zu.prototype,"strokeOpacity");D([Bt],Zu.prototype,"strokeWidth");D([Bt],Zu.prototype,"lineDash");D([Bt],Zu.prototype,"lineDashOffset");D([Bt],Zu.prototype,"tension");D([Bt],Zu.prototype,"itemStyler");var Pc=class extends iae{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(e,t,i){const{fillOpacity:n,strokeWidth:s,strokeOpacity:o,lineDash:r,lineDashOffset:a}=this,l=this.fill??e[i%e.length],c=this.stroke??t[i%e.length];return{fill:l,fillOpacity:n,stroke:c,strokeWidth:s,strokeOpacity:o,lineDash:r,lineDashOffset:a}}};D([Bt],Pc.prototype,"spacing");D([Bt],Pc.prototype,"width");D([Bt],Pc.prototype,"fill");D([Bt],Pc.prototype,"fillOpacity");D([Bt],Pc.prototype,"stroke");D([Bt],Pc.prototype,"strokeOpacity");D([Bt],Pc.prototype,"strokeWidth");D([Bt],Pc.prototype,"lineDash");D([Bt],Pc.prototype,"lineDashOffset");D([Bt],Pc.prototype,"itemStyler");var Os=class extends pHe{constructor(){super(),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fillGradientDefaults=new cHe,this.fillPatternDefaults=new uHe,this.fillImageDefaults=new dHe,this.fills=[],this.strokes=[],this.label=new $W,this.link=new Zu,this.node=new Pc,this.tooltip=hHe(),this.highlightStyle.deprecated=!1}};D([Bt],Os.prototype,"fromKey");D([Bt],Os.prototype,"toKey");D([Bt],Os.prototype,"idKey");D([Bt],Os.prototype,"idName");D([Bt],Os.prototype,"labelKey");D([Bt],Os.prototype,"labelName");D([Bt],Os.prototype,"sizeKey");D([Bt],Os.prototype,"sizeName");D([Bt],Os.prototype,"nodes");D([Bt],Os.prototype,"fillGradientDefaults");D([Bt],Os.prototype,"fillPatternDefaults");D([Bt],Os.prototype,"fillImageDefaults");D([Bt],Os.prototype,"fills");D([Bt],Os.prototype,"strokes");D([Bt],Os.prototype,"label");D([Bt],Os.prototype,"link");D([Bt],Os.prototype,"node");D([Bt],Os.prototype,"tooltip");var{SeriesNodePickMode:gX,createDatumId:Hk,angleBetween:eI,normalizeAngle360:fHe,isBetweenAngles:fX,Sector:mHe,evaluateBezier:Wk,applyShapeStyle:mX,getShapeStyle:jk,getLabelStyles:yHe,BBox:vHe,mergeDefaults:Uk}=N,$k=e=>e.startAngle+eI(e.startAngle,e.endAngle)/2,M1=class extends tae{constructor(e){super({moduleCtx:e,pickModes:[gX.NEAREST_NODE,gX.EXACT_SHAPE_MATCH]}),this.properties=new Os}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Lh}nodeFactory(){return new mHe}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0},properties:n}=this,{fromKey:s,toKey:o,sizeKey:r,labelKey:a,label:{spacing:l,maxWidth:c,fontSize:u},node:{width:d,spacing:p}}=n,f=t/2,m=i/2;let v=[];const{nodeGraph:b,links:C}=this.getNodeGraph(Y=>({...Y,centerX:f,centerY:m,innerRadius:Number.NaN,outerRadius:Number.NaN,startAngle:Number.NaN,endAngle:Number.NaN}),Y=>({...Y,centerX:f,centerY:m,radius:Number.NaN,startAngle1:Number.NaN,endAngle1:Number.NaN,startAngle2:Number.NaN,endAngle2:Number.NaN}),{includeCircularReferences:!0});let x=0;for(const[Y,{datum:G,linksBefore:$,linksAfter:W}]of b.entries()){const Q=$.reduce((q,{link:H})=>q+H.size,0)+W.reduce((q,{link:H})=>q+H.size,0);if(Q===0)b.delete(Y);else{const{label:q}=n;G.size=Q,x+=G.size;const H=q.enabled?this.getLabelText(G.label,G.datum,a,"label",[],q,{datum:G.datum,value:G.label,fromKey:s,toKey:o,sizeKey:r,size:G.size}):void 0;G.label=Gt(H)}}let w=0;if(this.isLabelEnabled()){const Y=ei(this.properties.label);let G=0;for(const{datum:$}of b.values()){const{id:W,label:Q}=$;if(Q==null)continue;const q=Xp(Q,{maxWidth:c,font:this.properties.label,textWrap:"never"}),{width:H}=Y.measureLines(q);G=Math.max(H,G),v.push({id:W,text:q,centerX:f,centerY:m,angle:Number.NaN,radius:Number.NaN,size:$.size})}w=G+l}const M=b.size;let T=Math.min(t,i)/2-d-w,L=p/T;if(w!==0&&(M*L>=1.5*Math.PI||T<=0)&&(v=[],T=Math.min(t,i)/2-d,L=p/T),M*L>=2*Math.PI||T<=0){fe.warnOnce("There was insufficient space to display the Chord Series.");return}const I=T,R=T+d,O=Math.max((2*Math.PI-M*L)/x,0);let _=0;for(const{datum:Y}of b.values()){Y.innerRadius=I,Y.outerRadius=R,Y.startAngle=_,Y.endAngle=_+Y.size*O,_=Y.endAngle+L;const G=(Y.innerRadius+Y.outerRadius)/2,$=$k(Y);Y.midPoint={x:Y.centerX+G*Math.cos($),y:Y.centerY+G*Math.sin($)}}const B=[];for(const{datum:Y,linksBefore:G,linksAfter:$}of b.values()){const W=$k(Y),Q=[...G.map(H=>({link:H.link,distance:eI($k(H.node.datum),W),after:!1})),...$.map(H=>({link:H.link,distance:eI($k(H.node.datum),W),after:!0}))];let q=Y.startAngle;for(const{link:H,after:U}of Q.toSorted((ee,ie)=>ee.distance-ie.distance)){const ee=H.size*O;U?(H.startAngle1=q,H.endAngle1=q+ee):(H.startAngle2=q,H.endAngle2=q+ee),q+=H.size*O}B.push(Y)}const{tension:V}=this.properties.link;for(const Y of C){Y.radius=T;const G=pX({radius:T,startAngle:Y.startAngle1,endAngle:Y.endAngle2,tension:V}),$=pX({radius:T,startAngle:Y.startAngle2,endAngle:Y.endAngle1,tension:V}),W=Wk(...G.x,.5),Q=Wk(...G.y,.5),q=Wk(...$.x,.5),H=Wk(...$.y,.5);Y.midPoint={x:Y.centerX+(W+q)/2,y:Y.centerY+(Q+H)/2},B.push(Y)}for(const Y of v){const G=b.get(Y.id)?.datum;G!=null&&(Y.radius=R+l,Y.angle=fHe(G.startAngle+eI(G.startAngle,G.endAngle)/2))}v.sort((Y,G)=>Y.angle-G.angle);let j=1/0,K=-1/0;return v=v.filter(Y=>{const G=fc(u),$=Math.atan2(G/2,Y.radius),W=Y.angle-$,Q=Y.angle+$;return fX(j,W,Q)||fX(K,W,Q)?!1:(j=Math.min(W,j),K=Math.max(Q,K),!0)}),{itemId:e,nodeData:B,labelData:v}}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const t={toKey:this.properties.toKey,fromKey:this.properties.fromKey,sizeKey:this.properties.sizeKey,size:Number.NaN},i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((n,{size:s,text:o,centerX:r,centerY:a,radius:l,angle:c})=>{t.size=s;const u=yHe(this,void 0,t,this.properties.label,!1,i),{fontStyle:d,fontWeight:p,fontSize:f,fontFamily:m,color:v}=u;n.visible=!0,n.translationX=r+l*Math.cos(c),n.translationY=a+l*Math.sin(c),n.text=o,n.fill=v,n.fontStyle=d,n.fontWeight=p,n.fontSize=f,n.fontFamily=m,n.textBaseline="middle",Math.cos(c)>=0?(n.textAlign="left",n.rotation=c):(n.textAlign="right",n.rotation=c-Math.PI),n.setBoxing(u)})}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Hk(t.type,t.id))}getNodeStyle(e,t,i){const{properties:n}=this,{fills:s,strokes:o,fillGradientDefaults:r,fillPatternDefaults:a,fillImageDefaults:l}=n,{itemStyler:c}=n.node,u=this.getHighlightStyle(i,e.datumIndex),d=Uk(u,n.node.getStyle(s,o,t));let p=jk(d,r,a,l);if(c!=null&&e.datumIndex!=null){const f=this.cachedDatumCallback(Hk(e.datumIndex.index,"node",i?"highlight":"node"),()=>{const m=this.makeItemStylerParams(e,i,p);return this.callWithContext(c,m)});f&&(p=jk(Uk(f,p),r,a,l))}return p.opacity=1,p}makeItemStylerParams({datum:e,datumIndex:t,size:i=0,label:n},s,o){const{id:r}=this,a=this.ctx.highlightManager?.getActiveHighlight(),l=this.getHighlightStateString(a,s,t),c=this.filterItemStylerFillParams(o.fill)??o.fill;return{seriesId:r,datum:e,highlighted:s,highlightState:l,...o,size:i,label:n,fill:c}}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getShapeFillBBox();t.each((s,o)=>{const{datumIndex:r}=o,a=this.getNodeStyle(o,r.index,i);mX(s,a,n),s.centerX=o.centerX,s.centerY=o.centerY,s.innerRadius=o.innerRadius,s.outerRadius=o.outerRadius,s.startAngle=o.startAngle,s.endAngle=o.endAngle,s.inset=s.strokeWidth/2})}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Hk(t.type,t.index,t.fromNode.id,t.toNode.id))}getLinkStyle({datumIndex:e,datum:t},i,n){const{id:s,properties:o}=this,{fills:r,strokes:a,fillGradientDefaults:l,fillPatternDefaults:c,fillImageDefaults:u}=o,{itemStyler:d}=o.link,p=this.getHighlightStyle(n,e),f=Uk(p,o.link.getStyle(r,a,i.index));let m=jk(f,l,c,u);if(d!=null&&e!=null){const v=this.ctx.highlightManager?.getActiveHighlight(),b=this.cachedDatumCallback(Hk(e.index,"link",n?"highlight":"node"),()=>{const C=this.getHighlightStateString(v,n,i);return this.callWithContext(d,{seriesId:s,datum:t,highlighted:n,highlightState:C,...m})});b&&(m=jk(Uk(b,m),l,c,u))}return m.opacity=1,m}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getShapeFillBBox();t.each((s,o)=>{const r=o.fromNode.datumIndex,a=this.getLinkStyle(o,r,i);s.centerX=o.centerX,s.centerY=o.centerY,s.radius=o.radius,s.startAngle1=o.startAngle1,s.endAngle1=o.endAngle1,s.startAngle2=o.startAngle2,s.endAngle2=o.endAngle2,s.tension=a.tension,mX(s,a,n)})}getShapeFillBBox(){const e=this._nodeDataDependencies?.seriesRectWidth??0,t=this._nodeDataDependencies?.seriesRectHeight??0,i=Math.min(e,t),n=(e-i)/2,s=(t-i)/2,o=new vHe(n,s,e,t);return{series:o,axis:o}}getTooltipContent(e){const{id:t,linksProcessedData:i,nodesProcessedData:n,properties:s,ctx:{formatManager:o}}=this,{fromKey:r,toKey:a,sizeKey:l,sizeName:c,tooltip:u}=s,d=this.contextNodeData?.nodeData.find(x=>x.datumIndex.type===e.type&&x.datumIndex.index===e.index);if(d==null)return;const p=d.type===0?d.fromNode.index:d.index,f=d.type===0?`${d.fromNode.label} - ${d.toNode.label}`:d.label,m=e.type===0?i?.dataSources.get(this.id)?.data[e.index]:n?.dataSources.get(this.id)?.data[e.index],v=d.size;let b;if(d.type===0){const x=d.fromNode.datumIndex;b=this.getLinkStyle({datumIndex:e,datum:m},x,!1)}else{const x=d.label;b=this.getNodeStyle({datumIndex:e,datum:m,size:v,label:x},e.index,!1)}const C=[];if(l!=null){const x=o.format(this.callWithContext.bind(this),{type:"number",value:v,datum:m,seriesId:t,legendItemName:void 0,key:l,source:"tooltip",property:"size",domain:[],boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});C.push({label:c,fallbackLabel:l,value:x??String(v)})}return this.formatTooltipWithContext(u,{title:f,symbol:this.legendItemSymbol(d.type,p,b),data:C},{seriesId:t,datum:m,title:f,fromKey:r,toKey:a,sizeKey:l,sizeName:c,size:v,...b})}computeFocusBounds(e){return e}hasItemStylers(){return this.properties.node.itemStyler!=null||this.properties.link.itemStyler!=null||this.properties.label.itemStyler!=null}};M1.className="ChordSeries";M1.type="chord";var{commonSeriesOptionsDefs:bHe,chordSeriesThemeableOptionsDef:SHe}=N,A1={...SHe,...bHe,type:ue(ht("chord")),fromKey:ue(J),toKey:ue(J),sizeKey:J,sizeName:J};A1.fillGradientDefaults=Xe(CG);A1.fillPatternDefaults=Xe(xG);A1.fillImageDefaults=Xe(wG);var CHe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],solo:!0,identifier:"chord",moduleFactory:e=>new M1(e),themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:N.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:N.FILL_PATTERN_DEFAULTS,fillImageDefaults:N.FILL_IMAGE_DEFAULTS,highlightStyle:{series:{dimOpacity:.2}},highlight:N.singleSeriesHighlightStyle(),label:{...N.LABEL_BOXING_DEFAULTS,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:5,maxWidth:100},node:{spacing:8,width:10,strokeWidth:{$isUserOption:["./stroke",2,0]}},link:{fillOpacity:.5,strokeWidth:{$isUserOption:["./stroke",2,0]},tension:.4}},legend:{enabled:!1,toggleSeries:!1}}},xHe={type:"series",name:"chord",chartType:"standalone",enterprise:!0,options:A1,create:e=>new M1(e)},{ThemeConstants:{CARTESIAN_AXIS_TYPE:lb,CARTESIAN_POSITION:_v},ThemeSymbols:{DEFAULT_SHADOW_COLOUR:wHe}}=N,zv={$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},yX={autoRotate:{$path:"/series/0/stageLabel/autoRotate"},autoRotateAngle:{$path:"/series/0/stageLabel/autoRotateAngle"},avoidCollisions:{$path:["/series/0/stageLabel/avoidCollisions",!0]},border:{$path:["/series/0/stageLabel/border"]},color:{$path:["/series/0/stageLabel/color",{$ref:"textColor"}]},cornerRadius:{$path:["/series/0/stageLabel/cornerRadius"]},enabled:{$if:[{$eq:[{$path:"/series/0/stageLabel/enabled"},void 0]},!0,{$path:"/series/0/stageLabel/enabled"}]},fill:{$path:["/series/0/stageLabel/fill"]},fillOpacity:{$path:["/series/0/stageLabel/fillOpacity"]},fontSize:{$path:["/series/0/stageLabel/fontSize",{$ref:"fontSize"}]},fontStyle:{$path:["/series/0/stageLabel/fontStyle",{$ref:"fontStyle"}]},fontWeight:{$path:["/series/0/stageLabel/fontWeight",{$ref:"fontWeight"}]},format:{$path:"/series/0/stageLabel/format"},formatter:{$path:"/series/0/stageLabel/formatter"},itemStyler:{$path:"/series/0/stageLabel/itemStyler"},minSpacing:{$path:"/series/0/stageLabel/minSpacing"},padding:{$path:["/series/0/stageLabel/padding"]},rotation:{$path:["/series/0/stageLabel/rotation",0]}},nae=[{type:{$if:[zv,lb.NUMBER,lb.CATEGORY]},position:{$if:[zv,_v.LEFT,{$if:[{$eq:[{$path:["/series/0/stageLabel/placement",void 0]},"after"]},_v.RIGHT,_v.LEFT]}]},label:{$if:[zv,void 0,yX]}},{type:{$if:[zv,lb.CATEGORY,lb.NUMBER]},position:{$if:[zv,{$if:[{$eq:[{$path:["/series/0/stageLabel/placement",void 0]},"before"]},_v.TOP,_v.BOTTOM]},_v.BOTTOM]},label:{$if:[zv,yX,void 0]}}],DHe={series:{direction:"vertical",strokeWidth:{$isUserOption:["./strokes/0",2,0]},spacingRatio:.25,fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},[{$path:["/0",void 0,{$palette:"fills"}]}],{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",N.FILL_GRADIENT_LINEAR_SINGLE_DEFAULTS],["pattern",N.FILL_PATTERN_SINGLE_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},[{$path:["/0",void 0,{$palette:"strokes"}]}]]},label:{...N.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},dropOff:{enabled:!0,fillOpacity:.2,strokeWidth:{$isUserOption:["./stroke",2,0]}},shadow:{enabled:!1,color:wHe,xOffset:3,yOffset:3,blur:5},highlight:N.singleSeriesHighlightStyle()},axes:{[lb.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1}},[lb.CATEGORY]:{line:{enabled:!1}}}},{lineDistanceSquared:Kk,BBox:MHe,Path:AHe,SceneChangeDetection:Hg}=N,vX=1e-6;function bX([e,t],[i,n]){return Math.abs(e-i)<=vX&&Math.abs(t-n)<=vX}var qu=class extends AHe{constructor(){super(...arguments),this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}get midPoint(){const{x0:e,y0:t,x1:i,y1:n,x2:s,y2:o,x3:r,y3:a}=this;return{x:(e+i+s+r)/4,y:(t+n+o+a)/4}}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;const{x0:i,y0:n,x1:s,y1:o,x2:r,y2:a,x3:l,y3:c}=this;return Math.min(Kk(e,t,i,n,s,o,1/0),Kk(e,t,s,o,r,a,1/0),Kk(e,t,r,a,l,c,1/0),Kk(e,t,l,c,i,n,1/0))}computeBBox(){const{x0:e,y0:t,x1:i,y1:n,x2:s,y2:o,x3:r,y3:a}=this,l=Math.min(e,i,s,r),c=Math.max(e,i,s,r)-l,u=Math.min(t,n,o,a),d=Math.max(t,n,o,a)-u;return new MHe(l,u,c,d)}updatePath(){const{path:e,x0:t,y0:i,x1:n,y1:s,x2:o,y2:r,x3:a,y3:l}=this,c=[[t,i],[n,s],[o,r],[a,l]];e.clear();let u,d;for(const p of c){if(u!=null&&bX(u,p)||d!=null&&bX(d,p))continue;const[f,m]=p;u==null?e.moveTo(f,m):e.lineTo(f,m),u??(u=p),d=p}e.closePath()}};D([Hg()],qu.prototype,"x0");D([Hg()],qu.prototype,"y0");D([Hg()],qu.prototype,"x1");D([Hg()],qu.prototype,"y1");D([Hg()],qu.prototype,"x2");D([Hg()],qu.prototype,"y2");D([Hg()],qu.prototype,"x3");D([Hg()],qu.prototype,"y3");var{NODE_UPDATE_STATE_TO_PHASE_MAPPING:kHe}=N;function SX(e,t,i,n){const{x0:s,y0:o,x1:r,y1:a,x2:l,y2:c,x3:u,y3:d,opacity:p}=e;return i?{x0:(s+u)/2,y0:(o+d)/2,x1:(r+l)/2,y1:(a+c)/2,x2:(r+l)/2,y2:(a+c)/2,x3:(s+u)/2,y3:(o+d)/2,opacity:p}:{x0:(s+r)/2,y0:(o+a)/2,x1:(s+r)/2,y1:(o+a)/2,x2:(l+u)/2,y2:(c+d)/2,x3:(l+u)/2,y3:(c+d)/2,opacity:p}}function THe(e,t){const i=o=>o==null;return{fromFn:(o,r,a)=>{a==="updated"&&i(r)?a="removed":a==="updated"&&i(o.previousDatum)&&(a="added");let l;a==="added"&&o.previousDatum==null&&t==="fade"||(a==="unknown"||a==="added"?l=SX(r,o.previousDatum,e):l={x0:o.x0,y0:o.y0,x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2,x3:o.x3,y3:o.y3,opacity:o.opacity});const c=kHe[a];return{...l,phase:c}},toFn:(o,r,a)=>{let l;return a==="removed"&&o.datum==null&&t==="fade"||(a==="removed"||i(r)?l=SX(r,o.previousDatum,e):l=X_(o,r)),l}}}function X_(e,t){const{x0:i,y0:n,x1:s,y1:o,x2:r,y2:a,x3:l,y3:c,opacity:u}=t;return{x0:i,y0:n,x1:s,y1:o,x2:r,y2:a,x3:l,y3:c,opacity:u}}var{SeriesNodePickMode:CX,SeriesZIndexMap:xX,valueProperty:IHe,keyProperty:RHe,ChartAxisDirection:EHe,updateLabelNode:LHe,SMALLEST_KEY_INTERVAL:PHe,LARGEST_KEY_INTERVAL:NHe,diff:OHe,fixNumericExtent:FHe,seriesLabelFadeInAnimation:wX,resetMotion:BHe,resetLabelFn:_He,animationValidation:zHe,computeBarFocusBounds:GHe,ContinuousScale:VHe,Group:HHe,Selection:WHe,PointerEvents:DX,motion:jHe,checkCrisp:UHe,createDatumId:$He,applyShapeStyle:KHe}=N,YHe=class extends N.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.xKey=n.properties.stageKey,this.yKey=n.properties.valueKey}},sae=class extends N.AbstractBarSeries{constructor({moduleCtx:e,animationResetFns:t}){super({moduleCtx:e,pickModes:[CX.AXIS_ALIGNED,CX.EXACT_SHAPE_MATCH],propertyKeys:{x:["stageKey"],y:["valueKey"]},propertyNames:{x:[],y:[]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:t.datum,label:_He}}),this.NodeEvent=YHe,this.connectorNodeGroup=this.contentGroup.appendChild(new HHe({name:`${this.id}-series-connectorNodes`,zIndex:xX.BACKGROUND})),this.connectorSelection=WHe.select(this.connectorNodeGroup,()=>this.connectionFactory()),this.connectorNodeGroup.pointerEvents=DX.None}get pickModeAxis(){return"main-category"}setZIndex(e){return super.setZIndex(e),this.connectorNodeGroup.zIndex=[xX.BACKGROUND,e],!0}isVertical(){return!super.isVertical()}connectionFactory(){return new qu}async processData(e){const{stageKey:t,valueKey:i}=this.properties,{visible:n,id:s}=this,o=(m,v,b)=>n&&this.ctx.legendManager.getItemEnabled({seriesId:s,itemId:b}),r=this.getCategoryAxis()?.scale,a=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:u}=this.getScaleInformation({xScale:r,yScale:a}),d=[];this.ctx.animationManager.isSkipped()||(this.processedData&&d.push(OHe(this.id,this.processedData)),d.push(zHe()));const p=this.visible?{}:{forceValue:0},{processedData:f}=await this.requestDataModel(e,this.data,{props:[RHe(t,c,{id:"xValue"}),IHe(i,u,{id:"yValue",...p,validation:o,invalidValue:0}),...l?[PHe,NHe]:[],...d],groupByKeys:!1});this.smallestDataInterval=f.reduced?.smallestKeyInterval,this.largestDataInterval=f.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i,id:n,ctx:{legendManager:s}}=this;if(!t||!i)return[];const{keys:[o]}=t.domain;if(e===this.getCategoryDirection()){const r=i.resolveProcessedDataDefById(this,"xValue");return r?.def.type==="key"&&r?.def.valueType==="category"?this.hasData?o.filter((a,l)=>s.getItemEnabled({seriesId:n,itemId:l})):[]:this.padBandExtent(o)}else{const r=this.domainForClippedRange(e,["yValue"],"xValue"),a=Math.max(...r),l=[-a,a];return FHe(l)}}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}createNodeData(){const{hasData:e,data:t,dataModel:i,groupScale:n,processedData:s,id:o,ctx:{legendManager:r}}=this,a=this.getCategoryAxis(),l=this.getValueAxis();if(!(e&&t&&a&&l&&i&&s?.type==="ungrouped"))return;const c=a.scale,u=l.scale,d=this.getBarDirection()===EHe.X,{stageKey:p,valueKey:f}=this.properties,m=`${f}`,v={itemId:m,nodeData:[],labelData:[],connectorData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible},b=this.visible;if(!b)return v;const C=i.resolveKeysById(this,"xValue",s),x=i.resolveColumnById(this,"yValue",s),{barWidth:w,groupIndex:M}=this.updateGroupScale(a),T=VHe.is(c)?w*-.5:0,L=UHe(a?.scale,a?.visibleRange,this.smallestDataInterval,this.largestDataInterval);let I;const R=s.dataSources.get(this.id)?.data??[];for(const[O,_]of R.entries()){const B=b&&r.getItemEnabled({seriesId:o,itemId:O}),V=C[O];if(V==null)continue;const j=Math.round(c.convert(V))+n.convert(String(M))+T,K=x[O],Y=Math.round(u.convert(-K)),G=Math.round(u.convert(K)),$=this.getItemStyle({datum:_,datumIndex:O},!1),W=Math.max($.strokeWidth??0,Math.abs(G-Y)),Q={x:d?Math.min(G,Y):j,y:d?j:Math.min(G,Y),width:d?W:w,height:d?w:W},q={x:Q.x+Q.width/2,y:Q.y+Q.height/2},H=this.createLabelData({datumIndex:O,rect:Q,barAlongX:d,yDatum:K,datum:_,visible:B}),U={index:O,series:this,itemId:m,datum:_,datumIndex:O,xValue:V,yValue:K,xKey:p,yKey:f,x:Q.x,y:Q.y,width:Q.width,height:Q.height,midPoint:q,crisp:L,label:H,visible:B};if(v.nodeData.push(U),H!=null&&v.labelData.push(H),I!=null){const ee=I.rect,ie=I.nodeDatum,oe=I.datumIndex;d?v.connectorData.push({datum:ie,datumIndex:oe,x0:ee.x,y0:ee.y+ee.height,x1:ee.x+ee.width,y1:ee.y+ee.height,x2:Q.x+Q.width,y2:Q.y,x3:Q.x,y3:Q.y,opacity:1}):v.connectorData.push({datum:ie,datumIndex:oe,x0:ee.x+ee.width,y0:ee.y,x1:Q.x,y1:Q.y,x2:Q.x,y2:Q.y+Q.height,x3:ee.x+ee.width,y3:ee.y+ee.height,opacity:1})}B&&(I={itemId:m,rect:Q,nodeDatum:U,datumIndex:O})}return v}updateNodes(e,t){super.updateNodes(e,t);const{connectorSelection:i}=this,n=this.contextNodeData?.connectorData??[];this.connectorSelection=this.updateConnectorSelection({connectorSelection:i,connectorData:n}),this.updateConnectorNodes({connectorSelection:i})}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,n=t??[];return i.update(n,void 0,s=>this.getDatumId(s))}updateConnectorSelection(e){const{connectorData:t,connectorSelection:i}=e;return i.update(this.connectorEnabled()?t:[],void 0,n=>this.getDatumId(n.datum))}updateConnectorNodes(e){const t=this.getShapeFillBBox();e.connectorSelection.each((i,n)=>{const{fill:s,fillOpacity:o,stroke:r,strokeOpacity:a,strokeWidth:l,lineDash:c,lineDashOffset:u}=this.connectorStyle(n.datumIndex);i.setProperties(X_(i,n)),KHe(i,{fill:s,stroke:r,fillOpacity:o,strokeOpacity:a,strokeWidth:l,lineDash:c,lineDashOffset:u},t)})}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=DX.None})}updateLabelNodes(e){const t={stageKey:this.properties.stageKey,valueKey:this.properties.valueKey},i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((n,s)=>{n.fillOpacity=this.getHighlightStyle(!1,s.datumIndex).opacity??1,LHe(this,n,t,this.properties.label,s,!1,i)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s}=this,{stageKey:o,valueKey:r,tooltip:a,legendItemName:l}=s,c=this.getCategoryAxis(),u=this.getValueAxis();if(!i||!n||!c||!u)return;const d=n.dataSources.get(this.id)?.data[e],p=i.resolveKeysById(this,"xValue",n)[e],f=i.resolveColumnById(this,"yValue",n)[e];if(p!=null)return this.formatTooltipWithContext(a,{symbol:this.legendItemSymbol(e),data:[{label:this.getAxisValueText(c,"tooltip",p,d,o,l),value:this.getAxisValueText(u,"tooltip",f,d,r,l)}]},{seriesId:t,datum:d,title:o,stageKey:o,valueKey:r,...this.tooltipStyle(d,e)})}resetAllAnimation(e){super.resetAllAnimation(e),BHe([this.connectorSelection],X_)}animateEmptyUpdateReady({labelSelection:e}){const{connectorSelection:t}=this,i=this.isVertical(),s=THe(i,"normal");jHe.fromToMotion(this.id,"connectors",this.ctx.animationManager,[t],s),wX(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(e){const{labelSelection:t}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id),wX(this,"labels",this.ctx.animationManager,t)}getDatumId(e){return $He(e.xValue)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){return GHe(this,this.contextNodeData?.nodeData[e])}legendItemSymbol(e){const{strokeWidth:t,fillOpacity:i,strokeOpacity:n,lineDash:s,lineDashOffset:o,fill:r,stroke:a}=this.properties.getStyle(e);return{marker:{fill:r,fillOpacity:i,stroke:a,strokeWidth:t,strokeOpacity:n,lineDash:s,lineDashOffset:o}}}getLegendData(e){const{id:t,processedData:i,dataModel:n,ctx:{legendManager:s},visible:o}=this;if(!n||!i||e!=="category")return[];const{showInLegend:r}=this.properties,a=n.resolveKeysById(this,"xValue",i);return(i.dataSources.get(this.id)?.data??[]).map((l,c)=>{const u=a[c];if(u!=null)return{legendType:"category",id:t,datum:l,itemId:c,seriesId:t,enabled:o&&s.getItemEnabled({seriesId:t,itemId:c}),label:{text:String(u)},symbol:this.legendItemSymbol(c),skipAnimations:!0,hideInLegend:!r}}).filter(l=>l!=null)}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}},{Label:XHe,AbstractBarSeriesProperties:ZHe,makeSeriesTooltip:qHe,AxisLabel:QHe,Property:wr}=N,KW=class extends XHe{constructor(){super(...arguments),this.spacing=0}};D([wr],KW.prototype,"placement");D([wr],KW.prototype,"spacing");var oae=class extends QHe{};D([wr],oae.prototype,"placement");var za=class extends ZHe{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new KW,this.stageLabel=new oae,this.tooltip=qHe()}getStyle(e){const{fills:t,strokes:i,fillOpacity:n,strokeWidth:s,strokeOpacity:o,lineDash:r,lineDashOffset:a}=this;return{fill:t[e],fillOpacity:n,stroke:i[e],strokeWidth:s,strokeOpacity:o,lineDash:r,lineDashOffset:a,opacity:1}}};D([wr],za.prototype,"stageKey");D([wr],za.prototype,"valueKey");D([wr],za.prototype,"fills");D([wr],za.prototype,"fillOpacity");D([wr],za.prototype,"strokes");D([wr],za.prototype,"strokeWidth");D([wr],za.prototype,"strokeOpacity");D([wr],za.prototype,"lineDash");D([wr],za.prototype,"lineDashOffset");D([wr],za.prototype,"label");D([wr],za.prototype,"stageLabel");D([wr],za.prototype,"tooltip");function MX(e,{x:t,y:i,width:n,height:s,opacity:o}){return{x1:t,y1:i,x2:t+n,y2:i+s,opacity:o??1}}var{Line:JHe,ChartAxisDirection:eWe}=N,k1=class extends sae{constructor(e){super({moduleCtx:e,animationResetFns:{datum:MX}}),this.properties=new za}get hasData(){const{id:e,ctx:{legendManager:t}}=this,i=this.data?.data.reduce((n,s,o)=>n+(t.getItemEnabled({seriesId:e,itemId:o})?1:0),0);return i!=null&&i>1}getBandScalePadding(){return{inner:1,outer:0}}connectorEnabled(){return!0}getItemStyle({datumIndex:e},t){return this.properties.getStyle(e)}connectorStyle(e){return this.properties.getStyle(e)}nodeFactory(){return new JHe}createLabelData({datumIndex:e,rect:t,barAlongX:i,yDatum:n,datum:s,visible:o}){const{stageKey:r,valueKey:a,label:l}=this.properties,{spacing:c,placement:u}=l;if(!l.enabled)return;let d,p,f,m;if(i)switch(d=t.x+t.width/2,f="center",u){case"before":p=t.y-c,m="bottom";break;case"after":p=t.y+t.height+c,m="top";break;default:p=t.y+t.height/2,m="middle"}else switch(p=t.y+t.height/2,m="middle",u){case"before":d=t.x-c,f="right";break;case"after":d=t.x+t.width+c,f="left";break;default:d=t.x+t.width/2,f="center"}const v=this.getSeriesDomain(eWe.Y),b=this.getLabelText(n,s,a,"y",v,l,{itemId:a,value:n,datum:s,stageKey:r,valueKey:a});return{x:d,y:p,textAlign:f,textBaseline:m,text:b,itemId:a,datum:s,datumIndex:e,series:this,visible:o}}updateDatumNodes(e){const t=this.getHighlightStyle(e.isHighlight);e.datumSelection.each((i,n)=>{i.setProperties(MX(i,n)),i.stroke=t?.stroke,i.strokeWidth=t?.strokeWidth??0,i.strokeOpacity=t?.strokeOpacity??1,i.lineDash=t?.lineDash,i.lineDashOffset=t?.lineDashOffset??0,i.opacity=t?.opacity??1})}tooltipStyle(e,t){const{fill:i,stroke:n,fillOpacity:s,strokeOpacity:o,strokeWidth:r,lineDash:a,lineDashOffset:l}=this.properties.getStyle(t);return{fill:i,fillOpacity:s,stroke:n,strokeOpacity:o,strokeWidth:r,lineDash:a,lineDashOffset:l}}hasItemStylers(){return this.properties.label.itemStyler!=null}};k1.className="ConeFunnelSeries";k1.type="cone-funnel";var{commonSeriesOptionsDefs:tWe,coneFunnelSeriesThemeableOptionsDef:iWe,without:nWe}=N,sWe={...nWe(tWe,["showInLegend"]),...iWe,type:ue(ht("cone-funnel")),stageKey:ue(J),valueKey:ue(J)},{ThemeConstants:{CARTESIAN_AXIS_TYPE:AX}}=N,oWe={series:{direction:"vertical",fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},N.SAFE_RANGE2_OPERATION]},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",N.FILL_GRADIENT_LINEAR_SINGLE_DEFAULTS],["pattern",N.FILL_PATTERN_SINGLE_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},N.SAFE_RANGE2_OPERATION]}]},strokeWidth:{$isUserOption:["./strokes/0",2,0]},label:{...N.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},placement:"before",spacing:4},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:N.singleSeriesHighlightStyle(!1)},seriesArea:{padding:{top:20,bottom:20}},axes:{[AX.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1}},[AX.CATEGORY]:{line:{enabled:!1}}}},rWe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"cone-funnel",moduleFactory:e=>new k1(e),solo:!0,defaultAxes:nae,themeTemplate:oWe},aWe={type:"series",name:"cone-funnel",chartType:"cartesian",enterprise:!0,options:sWe,create:e=>new k1(e)},{Label:lWe,DropShadow:cWe,AbstractBarSeriesProperties:uWe,BaseProperties:dWe,makeSeriesTooltip:hWe,AxisLabel:pWe,Property:Xi}=N,gWe=class extends lWe{},rae=class extends pWe{};D([Xi],rae.prototype,"placement");var Ph=class extends dWe{constructor(){super(...arguments),this.enabled=!0,this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){const{fill:e,stroke:t,fillOpacity:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r}=this;return{fill:e,fillOpacity:i,stroke:t,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,opacity:1}}};D([Xi],Ph.prototype,"enabled");D([Xi],Ph.prototype,"fill");D([Xi],Ph.prototype,"fillOpacity");D([Xi],Ph.prototype,"stroke");D([Xi],Ph.prototype,"strokeWidth");D([Xi],Ph.prototype,"strokeOpacity");D([Xi],Ph.prototype,"lineDash");D([Xi],Ph.prototype,"lineDashOffset");var No=class extends uWe{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.spacingRatio=0,this.dropOff=new Ph,this.shadow=new cWe().set({enabled:!1}),this.label=new gWe,this.stageLabel=new rae,this.tooltip=hWe()}getStyle(e){const{fills:t,strokes:i,fillOpacity:n,strokeWidth:s,strokeOpacity:o,lineDash:r,lineDashOffset:a}=this;return{fill:t[e],fillOpacity:n,stroke:i[e],strokeWidth:s,strokeOpacity:o,lineDash:r,lineDashOffset:a,opacity:1}}};D([Xi],No.prototype,"stageKey");D([Xi],No.prototype,"valueKey");D([Xi],No.prototype,"fills");D([Xi],No.prototype,"fillOpacity");D([Xi],No.prototype,"strokes");D([Xi],No.prototype,"strokeWidth");D([Xi],No.prototype,"strokeOpacity");D([Xi],No.prototype,"lineDash");D([Xi],No.prototype,"lineDashOffset");D([Xi],No.prototype,"spacingRatio");D([Xi],No.prototype,"itemStyler");D([Xi],No.prototype,"dropOff");D([Xi],No.prototype,"shadow");D([Xi],No.prototype,"label");D([Xi],No.prototype,"stageLabel");D([Xi],No.prototype,"tooltip");var{ChartAxisDirection:kX,resetBarSelectionsFn:fWe,prepareBarAnimationFunctions:TX,midpointStartingBarPosition:IX,createDatumId:mWe,Rect:yWe,motion:RX,applyShapeStyle:vWe,mergeDefaults:b2}=N,T1=class extends sae{constructor(e){super({moduleCtx:e,animationResetFns:{datum:fWe}}),this.properties=new No}getBandScalePadding(){return{inner:this.properties.spacingRatio,outer:0}}connectorEnabled(){return this.properties.dropOff.enabled}connectorStyle(e){return b2(this.properties.dropOff.getStyle(),this.properties.getStyle(e))}nodeFactory(){return new yWe}createLabelData({datumIndex:e,rect:t,yDatum:i,datum:n,visible:s}){const{valueKey:o,stageKey:r,label:a}=this.properties;if(!a.enabled)return;const l=this.getSeriesDomain(kX.Y),c=this.getLabelText(i,n,o,"y",l,a,{itemId:o,value:i,datum:n,stageKey:r,valueKey:o});return{x:t.x+t.width/2,y:t.y+t.height/2,textAlign:"center",textBaseline:"middle",text:c,itemId:r,datum:n,datumIndex:e,series:this,visible:s}}getItemStyle({datum:e,datumIndex:t},i){const{id:n,properties:s}=this,{stageKey:o,valueKey:r,itemStyler:a}=s,l=this.getHighlightStyle(i,t);let u=b2(l,s.getStyle(t));if(a!=null){const d=this.ctx.highlightManager?.getActiveHighlight(),p=this.cachedDatumCallback(mWe(t,i?"highlight":"node"),()=>{const f=this.getHighlightStateString(d,i,t);return this.callWithContext(a,{seriesId:n,datum:e,highlighted:i,highlightState:f,stageKey:o,valueKey:r,...u})});p&&(u=b2(p,u))}return u}updateDatumNodes({datumSelection:e,isHighlight:t}){const{contextNodeData:i}=this;if(!i)return;const{shadow:n}=this.properties,s=this.getCategoryDirection()===kX.X,o=this.getShapeFillBBox();e.each((r,a)=>{const l=this.getItemStyle(a,t);vWe(r,l,o),r.visible=s?a.width>0:a.height>0,r.crisp=a.crisp,r.fillShadow=n})}tooltipStyle(e,t){return this.getItemStyle({datum:e,datumIndex:t},!1)}animateEmptyUpdateReady(e){super.animateEmptyUpdateReady(e);const{datumSelection:t}=e,i=this.isVertical(),s=TX(IX(i,"normal"),"unknown");RX.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],s)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e);const{datumSelection:t}=e,{processedData:i}=this,n=i?.reduced?.diff?.[this.id],s=TX(IX(this.isVertical(),"fade"),"added");RX.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],s,(o,r)=>r.xValue,n)}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}};T1.className="FunnelSeries";T1.type="funnel";var{commonSeriesOptionsDefs:bWe,funnelSeriesThemeableOptionsDef:SWe,without:CWe}=N,xWe={...SWe,...CWe(bWe,["showInLegend"]),type:ue(ht("funnel")),stageKey:ue(J),valueKey:ue(J)},wWe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"funnel",moduleFactory:e=>new T1(e),solo:!0,defaultAxes:nae,themeTemplate:DHe},DWe={type:"series",name:"funnel",chartType:"cartesian",enterprise:!0,options:xWe,create:e=>new T1(e)},aae=class{*[Symbol.iterator](){const{node:e,datum:t}=this;e&&t&&(yield{node:e,datum:t})}nodes(){return this.node?[this.node]:[]}update(e,t,i,n){const s=e.nodes();if(s.length===0)this.node?.remove(),this.node=void 0;else{this.node===void 0&&(this.node=new i,this.node.fillOpacity=0,this.node.strokeOpacity=0,t.appendChild(this.node));const o=s[0],r=s.toReversed().find(a=>a.datum.datum.value>a.datum.datum.segmentStart)??s.at(-1);this.node.datum=this.datum=o.datum,n(this.node,o,r)}}},lae={fromFn:()=>({opacity:0,phase:"initial"}),toFn:()=>({opacity:1})};function cae(e,t){if(e==null)return"";const{min:i,max:n}=t,s=i===0?0:Math.ceil(Math.log10(Math.abs(i))),o=n===0?0:Math.ceil(Math.log10(Math.abs(n))),r=Math.max(2-Math.max(s,o),0);return e.toFixed(r)}function x0(e,t,i,n){if(i.text!=null)return i.text;const s=n??i.value;let o;return i?.formatter!=null&&(o=C0(t,i.formatter,{seriesId:e,datum:void 0,value:s})),o==null||ft(o)?o:String(o)}function uae({path:e,x:t,y:i,size:n}){e.moveTo(t,i-n/2),e.lineTo(t,i+n/2)}function dae(e,t){const i=qf(e.datumUnion.nodes(),e.targetSelection.nodes());return e.pickNodeNearestDistantObject(t,i)}function hae(e,t){const i=[{data:e.contextNodeData?.nodeData,selection:e.datumUnion},{data:e.contextNodeData?.targetData,selection:e.targetSelection}].filter(l=>l.data&&l.data.length>0),n=Je(0,t.otherIndex+t.otherIndexDelta,i.length-1);if(i.length===0)return;const{data:s,selection:o}=i[n];if(s==null||s.length===0)return;const r=Je(0,t.datumIndex,s.length-1),a=s[r];for(const l of o)if(l.datum===a)return{bounds:l.node,clipFocusBox:!0,datum:a,datumIndex:r,otherIndex:n}}var{BaseProperties:pae,Property:hC}=N,I1=class extends pae{getSegments(e,t){const{values:i,step:n,count:s}=this,o=Math.min(...e.domain),r=Math.max(...e.domain);let a;if(i!=null){const l=i.filter(c=>c>o&&c<r).sort((c,u)=>c-u);a=[o,...l,r]}else if(n!=null){const l=[];for(let c=o;c<r;c+=n)l.push(c);l.push(r),a=l}else if(s==null){const l=e.ticks({nice:!0,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.filter(c=>c>o&&c<r);a=l==null?void 0:[o,...l,r]}else{const l=s+1;a=Array.from({length:l+1},(c,u)=>u/l*(r-o)+o)}return a!=null&&a.length>t&&(fe.warnOnce("the configured segmentation results in more than 1 item per pixel, ignoring. Supply a segmentation configuration that results in larger segments or omit this configuration"),a=void 0),a??(a=[o,r]),a}};D([hC],I1.prototype,"values");D([hC],I1.prototype,"step");D([hC],I1.prototype,"count");var iM=class extends pae{constructor(){super(...arguments),this.enabled=!1,this.interval=new I1,this.spacing=0}};D([hC],iM.prototype,"enabled");D([hC],iM.prototype,"interval");D([hC],iM.prototype,"spacing");var{BaseProperties:R1,makeSeriesTooltip:MWe,SeriesProperties:AWe,PropertiesArray:YW,Property:tt,Label:kWe,AxisLabel:TWe,getColorStops:IWe}=N,gae=class extends kWe{};D([tt],gae.prototype,"spacing");var Mo=class extends R1{constructor(){super(...arguments),this.value=0,this.label=new gae}getStyle(e){const{fill:t=e.fill??"black",fillOpacity:i=e.fillOpacity??1,stroke:n=e.stroke??"black",strokeWidth:s=e.strokeWidth??0,strokeOpacity:o=e.strokeOpacity??1,lineDash:r=e.lineDash??[0],lineDashOffset:a=e.lineDashOffset??0}=this;return{fill:t,fillOpacity:i,stroke:n,strokeWidth:s,strokeOpacity:o,lineDash:r,lineDashOffset:a}}};D([tt],Mo.prototype,"text");D([tt],Mo.prototype,"value");D([tt],Mo.prototype,"shape");D([tt],Mo.prototype,"placement");D([tt],Mo.prototype,"spacing");D([tt],Mo.prototype,"size");D([tt],Mo.prototype,"rotation");D([tt],Mo.prototype,"fill");D([tt],Mo.prototype,"fillOpacity");D([tt],Mo.prototype,"stroke");D([tt],Mo.prototype,"strokeWidth");D([tt],Mo.prototype,"strokeOpacity");D([tt],Mo.prototype,"lineDash");D([tt],Mo.prototype,"lineDashOffset");D([tt],Mo.prototype,"label");var Ga=class extends R1{constructor(){super(...arguments),this.enabled=!0,this.thicknessRatio=1,this.fills=new YW(N.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(e,t,i){const{fill:n,fills:s,fillMode:o,fillOpacity:r,stroke:a,strokeWidth:l,strokeOpacity:c,lineDash:u,lineDashOffset:d}=this;return{fill:n??mae(s,o,e,i,t),fillOpacity:r,stroke:a,strokeWidth:l,strokeOpacity:c,lineDash:u,lineDashOffset:d}}};D([tt],Ga.prototype,"enabled");D([tt],Ga.prototype,"thickness");D([tt],Ga.prototype,"thicknessRatio");D([tt],Ga.prototype,"fills");D([tt],Ga.prototype,"fillMode");D([tt],Ga.prototype,"fill");D([tt],Ga.prototype,"fillOpacity");D([tt],Ga.prototype,"stroke");D([tt],Ga.prototype,"strokeWidth");D([tt],Ga.prototype,"strokeOpacity");D([tt],Ga.prototype,"lineDash");D([tt],Ga.prototype,"lineDashOffset");var nM=class extends R1{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};D([tt],nM.prototype,"values");D([tt],nM.prototype,"step");D([tt],nM.prototype,"minSpacing");D([tt],nM.prototype,"maxSpacing");var fae=class extends TWe{constructor(){super(...arguments),this.placement=void 0}};D([tt],fae.prototype,"placement");var er=class extends R1{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new YW(N.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new nM,this.label=new fae}getStyle(e,t,i,n){const{fill:s,fills:o,defaultFill:r,fillMode:a,fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:d,lineDash:p,lineDashOffset:f}=this;return{fill:s??(e&&o.length===0?r:void 0)??mae(o,a,t,n,i),fillOpacity:l,stroke:c,strokeWidth:u,strokeOpacity:d,lineDash:p,lineDashOffset:f}}};D([tt],er.prototype,"min");D([tt],er.prototype,"max");D([tt],er.prototype,"fills");D([tt],er.prototype,"fillMode");D([tt],er.prototype,"fill");D([tt],er.prototype,"fillOpacity");D([tt],er.prototype,"stroke");D([tt],er.prototype,"strokeWidth");D([tt],er.prototype,"strokeOpacity");D([tt],er.prototype,"lineDash");D([tt],er.prototype,"lineDashOffset");D([tt],er.prototype,"defaultFill");D([tt],er.prototype,"interval");D([tt],er.prototype,"label");var E1=class extends Fu{constructor(){super(...arguments),this.placement="inside-center",this.avoidCollisions=!0}};D([tt],E1.prototype,"text");D([tt],E1.prototype,"placement");D([tt],E1.prototype,"avoidCollisions");var or=class extends AWe{constructor(){super(...arguments),this.value=0,this.segmentation=new iM,this.defaultColorRange=[],this.targets=new YW(Mo),this.defaultTarget=new Mo,this.defaultScale=new er,this.direction="vertical",this.thickness=1,this.cornerRadius=0,this.cornerMode="container",this.margin=0,this.scale=new er,this.bar=new Ga,this.label=new E1,this.tooltip=MWe()}};D([tt],or.prototype,"value");D([tt],or.prototype,"segmentation");D([tt],or.prototype,"defaultColorRange");D([tt],or.prototype,"targets");D([tt],or.prototype,"defaultTarget");D([tt],or.prototype,"defaultScale");D([tt],or.prototype,"direction");D([tt],or.prototype,"thickness");D([tt],or.prototype,"cornerRadius");D([tt],or.prototype,"cornerMode");D([tt],or.prototype,"margin");D([tt],or.prototype,"scale");D([tt],or.prototype,"bar");D([tt],or.prototype,"label");D([tt],or.prototype,"tooltip");function mae(e,t,i,n,s){return{type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:IWe(e,i,n.domain,t),rotation:s?90:0,bounds:"series"}}var{BBox:RWe}=N;function XW(e){const{x0:t,y0:i,x1:n,y1:s,horizontalInset:o,verticalInset:r}=e,a=Math.min(t,n)+o,l=Math.min(i,s)+r,c=Math.max(Math.abs(n-t)-2*o,0),u=Math.max(Math.abs(s-i)-2*r,0);return{x:a,y:l,width:c,height:u}}function EWe(e,t){if(t==null)return!0;const i=XW(e),n=1e-6,s=i.x+n,o=i.y+n,r=i.x+i.width-n,a=i.y+i.height-n,l=t.x,c=t.x+t.width,u=t.y,d=t.y+t.height;return Math.max(s,l)<=Math.min(r,c)&&Math.max(o,u)<=Math.min(a,d)}function Z_(e){const{clipX0:t,clipX1:i,clipY0:n,clipY1:s}=e;return t!=null&&i!=null||n!=null&&s!=null}function LWe(e){if(!Z_(e))return;const{x0:t,y0:i,x1:n,y1:s}=e,{x:o,y:r,width:a,height:l}=XW(e);let{clipX0:c,clipX1:u,clipY0:d,clipY1:p}=e;(c==null||u==null)&&(c=t,u=n),(d==null||p==null)&&(d=i,p=s);const f=Math.min(c,u),m=Math.min(d,p),v=Math.abs(u-c),b=Math.abs(p-d);return c=Math.max(o,f),d=Math.max(r,m),u=Math.min(o+a,f+v),p=Math.min(r+l,m+b),new RWe(Math.min(c,u),Math.min(d,p),Math.abs(u-c),Math.abs(p-d))}function EX(e,t){const i=e?"initial":"update";return{node:{fromFn(s,o){const r=s.previousDatum;let{x0:a,y0:l,x1:c,y1:u,clipX0:d,clipY0:p,clipX1:f,clipY1:m}=r??o;const{horizontalInset:v,verticalInset:b}=o,C=r!=null&&Z_(r),x=Z_(o);return C&&x||(!C&&x?({x0:a,y0:l,x1:c,y1:u,clipX0:d,clipY0:p,clipX1:f,clipY1:m}=o,e&&(t?f=o.clipX0:m=o.clipY0)):C&&!x?({x0:a,y0:l,x1:c,y1:u}=o,d=void 0,p=void 0,f=void 0,m=void 0):e&&(t?c=a:u=l)),{x0:a,y0:l,x1:c,y1:u,clipX0:d,clipY0:p,clipX1:f,clipY1:m,horizontalInset:v,verticalInset:b,phase:i}},toFn(s,o){const{x0:r,y0:a,x1:l,y1:c,clipX0:u,clipY0:d,clipX1:p,clipY1:f,horizontalInset:m,verticalInset:v}=o;return{x0:r,y0:a,x1:l,y1:c,clipX0:u,clipY0:d,clipX1:p,clipY1:f,horizontalInset:m,verticalInset:v}},applyFn(s,o){s.setProperties(lw(s,o))}}}}function lw(e,t){const{x:i,y:n,width:s,height:o}=XW(t),r=LWe(t),a=EWe(t,r);return{x:i,y:n,width:s,height:o,clipBBox:r,visible:a}}var PWe={Before:"right",Center:"center",After:"left"},NWe={Before:"top",Center:"middle",After:"bottom"},OWe={Before:-1,Center:-.5,After:0},FWe={Before:0,Center:-.5,After:-1};function BWe(e,t,i,n,s,o){const{seriesRect:r,gaugeRect:a,barRect:l}=s,{padding:c,horizontal:u}=n;i.each((d,p)=>{const f=x0(e.id,t,p,o?.label);let m,v;p.placement==="outside-start"?u?(m=a.x,v=r.height):(m=r.width,v=r.height-(a.y+a.height)):p.placement==="outside-end"?u?(m=r.width-(a.x+a.width),v=r.height):(m=r.width,v=a.y):p.avoidCollisions&&(m=a.width,v=a.height);let b;if(f==null)return;if(m!=null&&v!=null){const Y=()=>({width:m,height:v,meta:null});b=b0(Gt(f),p,{padding:c},Y)?.[0]}else{const Y=ei(p),{width:G,height:$}=ft(f)?Da(f,p):Y.measureLines(f);b={text:f,fontSize:p.fontSize,lineHeight:p.lineHeight??Y.lineHeight(),width:G,height:$}}if(b==null){d.visible=!1;return}const C=u?a.x:a.y+a.height,x=u?a.x+a.width:a.y,w=u?l.x:l.y+l.height,M=u?l.x+l.width:l.y,T=p.spacing*(u?1:-1);let L,I,R,O;switch(p.placement){case"outside-start":L=-1/0,I=1/0,R=C-T,O="Before";break;case"outside-end":L=-1/0,I=1/0,R=x+T,O="After";break;case"inside-start":L=C,I=M,R=C+T,O="After";break;case"inside-end":L=M,I=x,R=x-T,O="Before";break;case"inside-center":L=C,I=x,R=(C+x)/2,O="Center";break;case"bar-inside":L=w,I=M,R=(w+M)/2,O="Center";break;case"bar-inside-end":L=w,I=M,R=M-T,O="Before";break;case"bar-outside-end":L=M,I=x,R=M+T,O="After";break;case"bar-end":L=-1/0,I=1/0,R=M,O="Center";break}const _=u?R:a.x+a.width/2,B=u?a.y+a.height/2:R;let V,j;u?(V=_+OWe[O]*b.width,j=V+b.width):(V=B+FWe[O]*b.height,j=V+b.height);const K=Math.min(V,j)>=Math.min(L,I)&&Math.max(V,j)<=Math.max(L,I);if(p.avoidCollisions&&!K){d.visible=!1;return}d.visible=!0,d.text=b.text,d.fontSize=b.fontSize,d.lineHeight=b.lineHeight,d.textAlign=u?PWe[O]:"center",d.textBaseline=u?"middle":NWe[O],d.x=_,d.y=B})}var{fromToMotion:S2,resetMotion:_We,SeriesNodePickMode:LX,StateMachine:zWe,createDatumId:PX,toRadians:NX,BBox:qc,Group:Nf,PointerEvents:OX,Selection:Of,Rect:GWe,Text:FX,TransformableText:VWe,Marker:HWe,LinearScale:WWe,generateTicks:jWe,NiceMode:UWe,easing:$We,findRangeExtent:KWe,tickFormat:YWe,mergeDefaults:XWe,applyShapeStyle:C2}=N,ZWe={before:180,middle:0,after:0},qWe={before:90,middle:0,after:-90},L1=class extends N.Series{constructor(e){super({moduleCtx:e,pickModes:[LX.EXACT_SHAPE_MATCH,LX.NEAREST_NODE]}),this.properties=new or,this.seriesRect=qc.NaN,this.gaugeRect=qc.NaN,this.scale=new WWe,this.originX=0,this.originY=0,this.scaleGroup=this.contentGroup.appendChild(new Nf({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new Nf({name:"itemGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new Nf({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new Nf({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Nf({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new Nf({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new Nf({name:"tickGroup"})),this.scaleSelection=Of.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=Of.select(this.itemGroup,()=>this.nodeFactory()),this.targetSelection=Of.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=Of.select(this.itemTargetLabelGroup,FX),this.labelSelection=Of.select(this.itemLabelGroup,FX),this.highlightTargetSelection=Of.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=Of.select(this.tickGroup,VWe),this.datumUnion=new aae,this.animationState=new zWe("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=OX.None,this.tickGroup.pointerEvents=OX.None}get range(){return this.horizontal?[0,this.gaugeRect.width]:[0,this.gaugeRect.height]}get horizontal(){return this.properties.direction==="horizontal"}get hasData(){return!0}nodeFactory(){const e=new GWe;return e.crisp=!0,e}markerFactory(){return new HWe}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){return cae(e,this.properties.scale)}getShapeFillBBox(){const{properties:e,originX:t,originY:i,horizontal:n,scale:s}=this,{thickness:o}=e,r=KWe(s.range),a=new qc(t,i,n?r:o,n?o:r);return{axis:a,series:a}}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map(i=>{const{text:n=t.text,value:s=t.value??0,shape:o=t.shape??"triangle",rotation:r=t.rotation??0,placement:a=t.placement??"middle",spacing:l=t.spacing??0,size:c=t.size??0}=i,{enabled:u=t.label.enabled,color:d=t.label.color??"black",fontStyle:p=t.label.fontStyle??"normal",fontWeight:f=t.label.fontWeight??"normal",fontSize:m=t.label.fontSize,fontFamily:v=t.label.fontFamily,spacing:b=t.label.spacing??0}=i.label;return{text:n,value:s,shape:o,placement:a,spacing:l,size:c,rotation:r,label:{enabled:u,color:d,fontStyle:p,fontWeight:f,fontSize:m,fontFamily:v,spacing:b},style:i.getStyle(t)}})}getTargetPoint(e){const{properties:t,originX:i,originY:n,horizontal:s,scale:o,gaugeRect:r}=this,{thickness:a}=t,{value:l,placement:c,spacing:u,size:d}=e,p=o.convert(l);let f;switch(c){case"before":f=-(u+d/2);break;case"after":f=a+u+d/2;break;default:f=a/2;break}return{x:i+r.x+(s?p:f),y:n+r.y+(s?f:p)}}getTargetLabel(e){const{size:t,placement:i,label:n}=e,{spacing:s,color:o,fontStyle:r,fontWeight:a,fontSize:l,fontFamily:c}=n,u=void 0,d=t/2+s;let p,f,m=0,v=0;return this.horizontal?(p="center",i==="after"?(f="top",v=d):(f="bottom",v=-d)):(f="middle",i==="before"?(p="right",m=-d):(p="left",m=d)),{offsetX:m,offsetY:v,fill:o,textAlign:p,textBaseline:f,fontStyle:r,fontWeight:a,fontSize:l,fontFamily:c,lineHeight:u}}labelDatum(e,t){const{placement:i,avoidCollisions:n,spacing:s,text:o,color:r,fontSize:a,minimumFontSize:l,fontStyle:c,fontWeight:u,fontFamily:d,lineHeight:p,wrapping:f,overflowStrategy:m,formatter:v=b=>this.formatLabel(b.value)}=e;return{placement:i,avoidCollisions:n,spacing:s,text:o,value:t,fill:r,fontSize:a,minimumFontSize:l,fontStyle:c,fontWeight:u,fontFamily:d,lineHeight:p,wrapping:f,overflowStrategy:m,formatter:v}}verticalLabelInset(){const{label:e}=this.properties,t=ei(e),i=e.text?.split(`
`),n=(e.lineHeight??t.lineHeight())*(i?.length??1);return e.spacing+n}horizontalLabelInset(){const{scale:e,properties:t}=this,{scale:i,label:n}=t,s=n.text?.split(`
`),o=ei(n),r=i.interval.values??e.ticks({nice:!1,interval:i.interval.step,minTickCount:0,maxTickCount:6,tickCount:5})?.ticks??[],l=(s??r?.map(c=>x0(this.id,this.ctx,this.labelDatum(n,c))??"")).reduce((c,u)=>{const{width:d}=ft(u)?Da(u,n):o.measureLines(u);return Math.max(c,d)},0);return n.spacing+l}tickFormatter(e,t){const{format:i,formatter:n}=this.properties.scale.label;let s;return i!=null&&(s=YWe(t,typeof i=="string"?i:void 0)),(o,r)=>{let a;return n&&(a??(a=C0(this.ctx,n,{value:o,index:r,domain:e,boundSeries:void 0}))),a??(a=s?.(o)),a??this.formatLabel(o)}}createNodeData(){const{id:e,properties:t,horizontal:i,scale:n,seriesRect:s}=this,{value:o,segmentation:r,thickness:a,cornerRadius:l,cornerMode:c,bar:u,scale:d,label:p,defaultColorRange:f}=t;n.domain=[d.min,d.max],n.range=i?[0,s.width]:[s.height,0];let m,v;i?(v=1,m=Math.PI/2):d.label.placement==="before"?(v=1,m=0):(v=-1,m=0);let b,C,x,w;i?(b=0,C=s.width,x=(s.height-a)/2,w=x+a,p.placement==="outside-start"?b+=this.horizontalLabelInset():p.placement==="outside-end"&&(C-=this.horizontalLabelInset())):(b=(s.width-a)/2,C=b+a,w=0,x=s.height,p.placement==="outside-start"?x-=this.verticalLabelInset():p.placement==="outside-end"&&(w+=this.verticalLabelInset())),this.gaugeRect=new qc(Math.min(b,C),Math.min(x,w),Math.abs(C-b),Math.abs(w-x));const M=0,T=0;n.domain=[d.min,d.max],n.range=i?[b,C]:[x,w];const{tickData:{ticks:L}}=jWe({scale:n,label:this.properties.scale.label,interval:this.properties.scale.interval,tickFormatter:(ge,Re)=>this.tickFormatter(ge,Re),domain:n.domain,range:this.range,reverse:!1,primaryTickCount:void 0,defaultTickMinSpacing:0,visibleRange:[0,1],niceMode:UWe.Off,labelOffset:0,axisRotation:m,sideFlag:v}),I=this.getTargets(),R=[],O=[],_=[],B=[],[V,j]=n.range,K=Math.abs(j-V),Y=i?n.convert(o):C,G=i?w:n.convert(o),$=r.enabled?r.spacing/2:0,W=i?$:0,Q=i?0:$,q=Math.min(u.thickness??Math.round(u.thicknessRatio*a),a),H=-(a-q)/2,U=i?0:H,ee=i?H:0,ie=c==="item",oe=Math.ceil(K);let ae=r.enabled?r.interval.getSegments(n,oe):void 0;const me=u.getStyle(f,i,n),xe=d.getStyle(u.enabled,f,i,n);if(ae==null&&ie){const ge=Math.min(...n.domain),Re=Math.max(...n.domain),Ne={value:o,segmentStart:ge,segmentEnd:Re};if(u.enabled){const $e=Math.min(l,q/2,K/2)*1,Qe=i?$e:0,Oe=i?0:$e;R.push({series:this,itemId:"value",datum:Ne,datumIndex:{type:0},type:0,x0:M+b-Qe-U,y0:T+x-Oe-ee,x1:M+Y+Qe+U,y1:T+G+Oe+ee,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,horizontalInset:W,verticalInset:Q,style:me})}const Be=Math.min(l,a/2,K/2)*1,Ue=i?Be:0,Ae=i?0:Be;B.push({series:this,itemId:"scale",datum:Ne,datumIndex:{type:0},type:0,x0:M+b-Ue,y0:T+x-Ae,x1:M+C+Ue,y1:T+w+Ae,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,horizontalInset:W,verticalInset:Q,style:xe})}else{ae??(ae=n.domain);const ge=M+b-U,Re=T+x-ee,Ne=M+Y+U,Pe=T+G+ee;for(let Be=0;Be<ae.length-1;Be+=1){const Ue=ae[Be+0],Ae=ae[Be+1],Ve={value:o,segmentStart:Ue,segmentEnd:Ae},$e=Be===0,Qe=Be===ae.length-2,Oe=n.convert(Ue),Ze=n.convert(Ae),dt=ie||$e?l:0,Tt=ie||Qe?l:0,gt=i?dt:Tt,Lt=Tt,Gi=i?Tt:dt,Ti=dt;u.enabled&&R.push({series:this,itemId:`value-${Be}`,datum:Ve,datumIndex:{type:0},type:0,x0:M+(i?Oe:b),y0:T+(i?x:Oe),x1:M+(i?Ze:C),y1:T+(i?w:Ze),clipX0:ge,clipY0:Re,clipX1:Ne,clipY1:Pe,topLeftCornerRadius:gt,topRightCornerRadius:Lt,bottomRightCornerRadius:Gi,bottomLeftCornerRadius:Ti,horizontalInset:W,verticalInset:Q,style:me}),B.push({series:this,itemId:`scale-${Be}`,datum:Ve,datumIndex:{type:0},type:0,x0:M+(i?Oe:b),y0:T+(i?x:Oe),x1:M+(i?Ze:C),y1:T+(i?w:Ze),clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:gt,topRightCornerRadius:Lt,bottomRightCornerRadius:Gi,bottomLeftCornerRadius:Ti,horizontalInset:W,verticalInset:Q,style:xe})}}p.enabled&&_.push(this.labelDatum(p,o));const be=i?ZWe:qWe;for(let ge=0;ge<I.length;ge+=1){const Re=I[ge],{value:Ne,text:Pe,shape:Be,size:Ue,style:Ae}=Re,Ve=this.getTargetPoint(Re),$e=NX(Re.rotation+be[Re.placement]);O.push({series:this,itemId:`target-${ge}`,midPoint:Ve,datum:{value:Ne},datumIndex:{type:1,index:ge},type:1,value:Ne,text:Pe,x:Ve.x,y:Ve.y,shape:Be,size:Ue,rotation:$e,label:this.getTargetLabel(Re),style:Ae})}return{itemId:e,nodeData:R,tickData:L,targetData:O,labelData:_,scaleData:B}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(e!=null&&e.series===this&&e.type===1)return e}update({seriesRect:e}){const{datumSelection:t,labelSelection:i,targetSelection:n,targetLabelSelection:s,scaleSelection:o,highlightTargetSelection:r,tickSelection:a}=this;this.seriesRect=e??qc.NaN;const l=this.checkResize(e);this.updateSelections(l),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const c=this.contextNodeData?.nodeData??[],u=this.contextNodeData?.labelData??[],d=this.contextNodeData?.targetData??[],p=this.contextNodeData?.scaleData??[],f=this.contextNodeData?.tickData??[],m=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:p,scaleSelection:o}),this.updateScaleNodes({scaleSelection:o}),this.targetSelection=this.updateTargetSelection({targetData:d,targetSelection:n}),this.updateTargetNodes({targetSelection:n,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:d,targetLabelSelection:s}),this.updateTargetLabelNodes({targetLabelSelection:s}),this.datumSelection=this.updateDatumSelection({nodeData:c,datumSelection:t}),this.updateDatumNodes({datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:u,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:m==null?[]:[m],targetSelection:r}),this.updateTargetNodes({targetSelection:r,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:f,tickSelection:a}),this.updateTickNodes({tickSelection:a}),l&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>PX(e.nodeData.length,t.itemId))}updateDatumNodes(e){const{datumSelection:t}=e,{ctx:i}=this,n=i.animationManager.isSkipped(),s=this.getShapeFillBBox();t.each((r,a)=>{const{topLeftCornerRadius:l,topRightCornerRadius:c,bottomRightCornerRadius:u,bottomLeftCornerRadius:d}=a;C2(r,a.style,s),r.topLeftCornerRadius=l,r.topRightCornerRadius=c,r.bottomRightCornerRadius=u,r.bottomLeftCornerRadius=d,r.pointerEvents=this.properties.bar.enabled?N.PointerEvents.All:N.PointerEvents.None,(n||r.previousDatum==null)&&r.setProperties(lw(r,a))});const{horizontal:o}=this;this.datumUnion.update(t,this.itemGroup,N.Rect,(r,a,l)=>{const c=Math.min(a.x,l.x),u=Math.max(a.x+a.width,l.x+l.width),d=Math.min(a.y,l.y),p=Math.max(a.y+a.height,l.y+l.height),f=u-c,m=p-d;r.pointerEvents=N.PointerEvents.None,r.x=c,r.y=d,r.width=f,r.height=m,r.topLeftCornerRadius=o?a.topLeftCornerRadius:l.topLeftCornerRadius,r.topRightCornerRadius=l.topRightCornerRadius,r.bottomRightCornerRadius=o?l.bottomRightCornerRadius:a.bottomRightCornerRadius,r.bottomLeftCornerRadius=a.bottomLeftCornerRadius;const v=a.clipBBox,b=l.clipBBox??v;v&&b?r.clipBBox=qc.merge([v,b]).intersection(o?new qc(c,-1/0,f,1/0):new qc(-1/0,d,1/0,m)):r.clipBBox=void 0})}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,t=>PX(e.scaleData.length,t.itemId))}updateScaleNodes(e){const{scaleSelection:t}=e,i=this.getShapeFillBBox();t.each((n,s)=>{const{topLeftCornerRadius:o,topRightCornerRadius:r,bottomRightCornerRadius:a,bottomLeftCornerRadius:l}=s;C2(n,s.style,i),n.setProperties(lw(n,s)),n.topLeftCornerRadius=o,n.topRightCornerRadius=r,n.bottomRightCornerRadius=a,n.bottomLeftCornerRadius=l,n.setProperties(lw(n,s))})}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetNodes(e){const{targetSelection:t,isHighlight:i}=e;t.each((n,s)=>{const{x:o,y:r,shape:a,size:l,rotation:c}=s,u=this.getTargetStyle(i,s);C2(n,u),n.size=l,n.shape=a==="line"?uae:a,n.translationX=o,n.translationY=r,n.rotation=c})}getTargetStyle(e,{datumIndex:t,style:i}){const n=this.getHighlightStyle(e,t);return XWe(n,{...i,opacity:1})}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each((i,n)=>{const{x:s,y:o,text:r}=n,{offsetX:a,offsetY:l,fill:c,fontStyle:u,fontWeight:d,fontSize:p,fontFamily:f,textAlign:m,textBaseline:v}=n.label;i.visible=!0,i.x=s+a,i.y=o+l,i.text=r,i.fill=c,i.fontStyle=u,i.fontWeight=d,i.fontSize=p,i.fontFamily=f,i.textAlign=m,i.textBaseline=v})}updateTickSelection(e){return e.tickSelection.update(e.tickData,void 0,t=>t.tickId)}updateTickNodes(e){const{gaugeRect:t,properties:i}=this,n=i.defaultScale,{enabled:s,color:o,fontFamily:r=n.label.fontFamily,fontSize:a=n.label.fontSize,fontStyle:l,fontWeight:c=n.label.fontWeight,spacing:u}=i.scale.label;let{placement:d}=i.scale.label;const p=NX(i.scale.label.rotation??0);let f,m,v,b;this.horizontal?(d??(d="after"),f="center",m=d==="before"?"bottom":"top",b=this.originY+t.y+(d==="before"?-u:t.height+u)):(d??(d="before"),f=d==="before"?"end":"start",m="middle",v=this.originX+t.x+(d==="before"?-u:t.width+u)),e.tickSelection.each((C,x)=>{if(!s){C.visible=!1;return}const w=v??x.translation,M=b??x.translation;C.visible=!0,C.text=x.tickLabel,C.fill=o,C.fontFamily=r,C.fontSize=a,C.fontStyle=l,C.fontWeight=c,C.textBaseline=m,C.textAlign=f,C.x=w,C.y=M,C.rotationCenterX=w,C.rotationCenterY=M,C.rotation=p})}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,t=>"primary")}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each((n,s)=>{n.fill=s.fill,n.fontStyle=s.fontStyle,n.fontWeight=s.fontWeight,n.fontFamily=s.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(e.text==null)return!1;return!0}formatLabelText(e){const{labelSelection:t,horizontal:i,scale:n,seriesRect:s,gaugeRect:o}=this,{x:r,y:a,width:l,height:c}=o,u=e?.label??this.properties.value;let d;if(i){const m=n.convert(u);d=new qc(r,a,m-r,c)}else{const m=n.convert(u);d=new qc(r,m,l,c-m)}const p={seriesRect:s,gaugeRect:o,barRect:d},{margin:f}=this.properties;BWe(this,this.ctx,t,{padding:f,horizontal:i},p,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),_We([this.datumSelection],lw),this.formatLabelText()}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}animateLabelText(e={}){const{animationManager:t}=this.ctx;let i=0,n=0;if(this.labelSelection.each((s,o)=>{s.opacity=1,i=s.previousDatum?.value??e.from??o.value,n=o.value}),!this.labelsHaveExplicitText())if(i===n)this.formatLabelText({label:n});else{const s=`${this.id}_labels`;t.animate({id:s,groupId:"label",from:{label:i},to:{label:n},phase:e.phase??"update",ease:$We.easeOut,onUpdate:o=>this.formatLabelText(o),onStop:()=>this.formatLabelText({label:n})})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=EX(!0,this.horizontal);S2(this.id,"node",e,[this.datumSelection],t,(i,n)=>n.itemId),S2(this.id,"label",e,[this.labelSelection],lae,()=>"primary"),this.animateLabelText({from:0,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=EX(!1,this.horizontal);S2(this.id,"node",e,[this.datumSelection],t,(i,n)=>n.itemId),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[0,1]}dataCount(){return Number.NaN}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}getLegendData(){return[]}getTooltipContent(e){const{id:t,properties:i}=this,{tooltip:n}=i;if(e==null)return;let s,o,r;if(e.type===0?(s=i.value,o=i.label.text,r=this.ctx.localeManager.t("ariaLabelGaugeValue")):({value:s,text:o}=i.targets[e.index],r=this.ctx.localeManager.t("ariaLabelGaugeTarget")),s!=null)return this.formatTooltipWithContext(n,{data:[{label:o,fallbackLabel:r,value:this.formatLabel(s)}]},{seriesId:t,title:void 0,datum:void 0,value:s})}pickNodeClosestDatum(e){return dae(this,e)}pickFocus(e){return hae(this,e)}getCaptionText(){return this.formatLabel(this.properties.value)}getCategoryValue(e){}datumIndexForCategoryValue(e){}hasItemStylers(){return this.properties.label.itemStyler!=null}};L1.className="LinearGaugeSeries";L1.type="linear-gauge";var QWe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"linear-gauge",moduleFactory:e=>new L1(e),themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{thickness:50,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},N.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/2",N.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{spacing:11}},bar:{strokeWidth:{$isUserOption:["./stroke",2,0]}},segmentation:{enabled:!1,interval:{},spacing:1},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"after",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},defaultScale:{label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},label:{...N.LABEL_BOXING_DEFAULTS,enabled:!1,placement:"inside-start",fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:2},minimumFontSize:N.FONT_SIZE.SMALL,spacing:18,color:{$ref:"chartBackgroundColor"}},margin:4,tooltip:{range:{$path:["/tooltip/range",10]}}}}},JWe={type:"series",name:"linear-gauge",chartType:"standalone",enterprise:!0,options:N.linearGaugeSeriesOptionsDef,create:e=>new L1(e)},sM={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer",buttons:{anchorPointX:"middle",anchorPointY:"middle"}},legend:{enabled:!1},gradientLegend:{enabled:!1,...N.LEGEND_CONTAINER_THEME}};function ku(e){const t=N.deepClone(e);return N.jsonWalk(t,i=>{typeof i=="object"&&"$palette"in i&&(i.$mapPalette=i.$palette,delete i.$palette)}),t}var eje=1e-9;function yae(e,t,i,n){const[s,o]=e,[r,a]=t,l=r-s,c=a-o,u=l*l+c*c;let d,p;if(Math.abs(u)<eje)d=s,p=o;else{let v=((i-s)*l+(n-o)*c)/u;v=Math.max(0,Math.min(1,v)),d=s+v*(r-s),p=o+v*(a-o)}const f=i-d,m=n-p;return f*f+m*m}function BX(e,t,i){let n=1/0,s=e.at(-1);for(const o of e)n=Math.min(n,yae(s,o,t,i)),s=o;return Math.sqrt(n)}function q_(e){let[t,i]=e[0],n=0;for(let s=1;s<e.length;s+=1){const[o,r]=e[s],a=Math.hypot(o-t,r-i);n+=a,t=o,i=r}return n}function mR(e){if(e.length===0)return;const t=q_(e)/2;let[i,n]=e[0],s=0;for(let o=1;o<e.length;o+=1){const[r,a]=e[o],l=Math.hypot(r-i,a-n),c=s+l;if(c>t){const u=(t-s)/l,d=[i+(r-i)*u,n+(a-n)*u],p=Math.atan2(a-n,r-i);return{point:d,angle:p}}s=c,i=r,n=a}}var{LonLatBBox:tje}=N;function rm(e,t){for(const i of e){const[n,s]=i;t=tje.extend(t,n,s,n,s)}return t}function ije(e){if(e.length===0)return;let t=0,i=0,n=0,[s,o]=e.at(-1);for(const[r,a]of e){const l=s*a-r*o;n+=l,t+=(s+r)*l,i+=(o+a)*l,s=r,o=a}return n*=3,[t/n,i/n]}function yR(e,t,i){let n=!1,s=1/0;for(const o of e){let r=o.at(-1),[a,l]=r;for(const c of o){const[u,d]=c;d>i!=l>i&&t<(a-u)*(i-d)/(l-d)+u&&(n=!n),s=Math.min(s,yae(r,c,t,i)),r=c,a=u,l=d}}return(n?-1:1)*Math.sqrt(s)}var{Path:nje,ExtendedPath2D:sje,BBox:oje,SceneChangeDetection:rje,SceneObjectChangeDetection:aje,objectsEqual:lje}=N,pC=class extends nje{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new sje}computeBBox(){return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.bbox?.clone()}updatePath(){const{projectedGeometry:e}=this;this.strokePath.clear(),this.path.clear(),this.bbox=e==null?void 0:this.drawGeometry(e,void 0)}drawPath(e){super.drawPath(e),this.renderStroke(e,this.strokePath.getPath2D())}containsPoint(e,t){const{projectedGeometry:i}=this;return i==null||!this.getBBox().containsPoint(e,t)?!1:this.geometryDistance(i,e,t)<=0}distanceSquared(e,t){const{projectedGeometry:i}=this;if(i==null)return 1/0;const n=this.geometryDistance(i,e,t);return n>0?n*n:0}geometryDistance(e,t,i){const{renderMode:n,strokeWidth:s}=this,o=(n&1)!==0,r=(n&2)!==0,a=Math.max(s/2,1)+1;switch(e.type){case"GeometryCollection":return e.geometries.reduce((l,c)=>Math.min(l,this.geometryDistance(c,t,i)),1/0);case"MultiPolygon":return o?e.coordinates.reduce((l,c)=>Math.min(l,Math.max(yR(c,t,i),0)),1/0):1/0;case"Polygon":return o?Math.max(yR(e.coordinates,t,i),0):1/0;case"MultiLineString":return r?e.coordinates.reduce((l,c)=>Math.min(l,Math.max(BX(c,t,i)-a,0)),1/0):1/0;case"LineString":return r?Math.max(BX(e.coordinates,t,i)-a,0):1/0;case"MultiPoint":case"Point":default:return 1/0}}drawGeometry(e,t){const{renderMode:i,path:n,strokePath:s}=this,o=(i&1)!==0,r=(i&2)!==0;switch(e.type){case"GeometryCollection":for(const a of e.geometries)t=this.drawGeometry(a,t);break;case"MultiPolygon":if(o)for(const a of e.coordinates)t=this.drawPolygon(n,a,t);break;case"Polygon":o&&(t=this.drawPolygon(n,e.coordinates,t));break;case"LineString":r&&(t=this.drawLineString(s,e.coordinates,t,!1));break;case"MultiLineString":if(r)for(const a of e.coordinates)t=this.drawLineString(s,a,t,!1);break}return t}drawPolygon(e,t,i){if(t.length<1)return i;i=this.drawLineString(e,t[0],i,!0);for(let n=1;n<t.length;n+=1){const s=t[n];this.drawLineString(e,s,void 0,!0)}return i}drawLineString(e,t,i,n){if(t.length<2)return i;const s=n?t.length-1:t.length;for(let o=0;o<s;o+=1){const[r,a]=t[o];if(o===0?e.moveTo(r,a):e.lineTo(r,a),i==null)i=new oje(r,a,0,0);else{const{x:l,y:c}=i,u=l+i.width,d=c+i.height;i.x=Math.min(l,r),i.y=Math.min(c,a),i.width=Math.max(u,r)-i.x,i.height=Math.max(d,a)-i.y}}return n&&e.closePath(),i}};D([aje({equals:lje})],pC.prototype,"projectedGeometry");D([rje()],pC.prototype,"renderMode");var{LonLatBBox:x2}=N;function gC(e,t){if(e.bbox!=null){const[i,n,s,o]=e.bbox;return t=x2.extend(t,i,n,s,o),t}switch(e.type){case"GeometryCollection":for(const i of e.geometries)t=gC(i,t);break;case"MultiPolygon":for(const i of e.coordinates)i.length>0&&(t=rm(i[0],t));break;case"Polygon":e.coordinates.length>0&&(t=rm(e.coordinates[0],t));break;case"MultiLineString":for(const i of e.coordinates)t=rm(i,t);break;case"LineString":t=rm(e.coordinates,t);break;case"MultiPoint":for(const i of e.coordinates){const[n,s]=i;t=x2.extend(t,n,s,n,s)}break;case"Point":{const[i,n]=e.coordinates;t=x2.extend(t,i,n,i,n);break}}return t}function vR(e){switch(e.type){case"GeometryCollection":{let t,i;for(const n of e.geometries){const s=vR(n);if(s==null)continue;const o=rm(s[0],void 0);if(o==null)continue;const r=Math.abs(o.lat1-o.lat0)*Math.abs(o.lon1-o.lon0);(t==null||r>t)&&(t=r,i=s)}return i}case"MultiPolygon":{let t,i;for(const n of e.coordinates){const s=rm(n[0],void 0);if(s==null)continue;const o=Math.abs(s.lat1-s.lat0)*Math.abs(s.lon1-s.lon0);(t==null||o>t)&&(t=o,i=n)}return i}case"Polygon":return e.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function bR(e){switch(e.type){case"GeometryCollection":{let t,i;for(const n of e.geometries){const s=bR(n);if(s==null)continue;const o=q_(s);o!=null&&(t==null||o>t)&&(t=o,i=s)}return i}case"MultiLineString":{let t=0,i;for(const n of e.coordinates){const s=q_(n);s>t&&(t=s,i=n)}return i}case"LineString":return e.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function ZW(e,t){if(e==null)return!1;switch(e.type){case"GeometryCollection":return e.geometries.some(i=>ZW(i,t));case"MultiPolygon":case"Polygon":return(t&1)!==0;case"MultiLineString":case"LineString":return(t&2)!==0;case"MultiPoint":case"Point":return(t&4)!==0}}function cg(e,t){switch(e.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:e.geometries.map(i=>cg(i,t))};case"Polygon":return{type:"Polygon",coordinates:Q_(e.coordinates,t)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:cje(e.coordinates,t)};case"MultiLineString":return{type:"MultiLineString",coordinates:Q_(e.coordinates,t)};case"LineString":return{type:"LineString",coordinates:J_(e.coordinates,t)};case"MultiPoint":return{type:"MultiPoint",coordinates:J_(e.coordinates,t)};case"Point":return{type:"Point",coordinates:t.convert(e.coordinates)}}}function cje(e,t){return e.map(i=>Q_(i,t))}function Q_(e,t){return e.map(i=>J_(i,t))}function J_(e,t){return e.map(i=>t.convert(i))}function uje(){return{fromFn:(i,n,s)=>s==="removed"?{scalingX:1,scalingY:1}:i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:i.scalingX,scalingY:i.scalingY},toFn:(i,n,s)=>s==="removed"?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}}function vae(e,t){const i=e.contextNodeData?.nodeData[t.datumIndex];if(i!==void 0){for(const n of e.datumSelection.nodes())if(n.datum===i)return n}}(class extends N.SeriesProperties{});var oM=class extends N.DataModelSeries{addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>{this.onLegendItemClick(e)}),this.ctx.eventsHub.on("legend:item-double-click",e=>{this.onLegendItemDoubleClick(e)}))}getSeriesDomain(){return[Number.NaN,Number.NaN]}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}},{Property:Dn,SeriesProperties:dje,makeSeriesTooltip:hje,Label:pje}=N,on=class extends dje{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new pje,this.tooltip=hje()}getStyle(){const{stroke:e,strokeOpacity:t,strokeWidth:i,lineDash:n,lineDashOffset:s}=this;return{stroke:e,strokeOpacity:t,strokeWidth:i,lineDash:n,lineDashOffset:s}}};D([Dn],on.prototype,"topology");D([Dn],on.prototype,"title");D([Dn],on.prototype,"legendItemName");D([Dn],on.prototype,"idKey");D([Dn],on.prototype,"topologyIdKey");D([Dn],on.prototype,"idName");D([Dn],on.prototype,"labelKey");D([Dn],on.prototype,"labelName");D([Dn],on.prototype,"sizeKey");D([Dn],on.prototype,"sizeName");D([Dn],on.prototype,"colorKey");D([Dn],on.prototype,"colorName");D([Dn],on.prototype,"sizeDomain");D([Dn],on.prototype,"colorRange");D([Dn],on.prototype,"maxStrokeWidth");D([Dn],on.prototype,"stroke");D([Dn],on.prototype,"strokeOpacity");D([Dn],on.prototype,"strokeWidth");D([Dn],on.prototype,"lineDash");D([Dn],on.prototype,"lineDashOffset");D([Dn],on.prototype,"itemStyler");D([Dn],on.prototype,"label");D([Dn],on.prototype,"tooltip");var{getMissCount:gje,getLabelStyles:fje,createDatumId:_X,SeriesNodePickMode:zX,valueProperty:zx,ColorScale:mje,LinearScale:yje,Selection:w2,Text:vje,Transformable:bje,mergeDefaults:GX}=N,P1=class extends oM{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{size:["colorKey"],color:["colorKey"],label:["labelKey"]},propertyNames:{size:["sizeName"],color:["colorName"],label:["labelName"]},pickModes:[zX.EXACT_SHAPE_MATCH,zX.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new on,this._chartTopology=void 0,this.colorScale=new mje,this.sizeScale=new yje,this.datumSelection=w2.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=w2.select(this.labelGroup,vje),this.highlightDatumSelection=w2.select(this.highlightGroup,()=>this.nodeFactory()),this._previousDatumMidPoint=void 0}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[2,e],!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const e=new pC;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e}async processData(e){if(this.data==null)return;const{data:t,topology:i,sizeScale:n,colorScale:s}=this,{topologyIdKey:o,idKey:r,sizeKey:a,colorKey:l,labelKey:c,sizeDomain:u,colorRange:d}=this.properties,p=new Map;for(const w of i?.features.values()??[]){const M=w.properties?.[o];M==null||!ZW(w.geometry,2)||p.set(M,w)}const f=this.sizeScale.type,m=this.colorScale.type,v=this.scale?.type,{dataModel:b,processedData:C}=await this.requestDataModel(e,t,{props:[zx(r,v,{id:"idValue",includeProperty:!1}),zx(r,v,{id:"featureValue",includeProperty:!1,processor:()=>w=>p.get(w)}),...c==null?[]:[zx(c,"category",{id:"labelValue"})],...a==null?[]:[zx(a,f,{id:"sizeValue"})],...l==null?[]:[zx(l,m,{id:"colorValue"})]]}),x=b.resolveColumnById(this,"featureValue",C);if(this.topologyBounds=x.reduce((w,M)=>{const T=M?.geometry;return T==null?w:gC(T,w)},void 0),a!=null){const w=b.resolveProcessedDataIndexById(this,"sizeValue"),M=C.domain.values[w]??[];n.domain=u??M}if(d!=null&&this.isColorScaleValid()){const w=b.resolveProcessedDataIndexById(this,"colorValue");s.domain=C.domain.values[w],s.range=d,s.update()}i==null&&fe.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const n=t.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,o=gje(this,i.defs.values[n].missing);return!(s===0||s===o)}getLabelDatum(e,t,i,n){if(t==null||i==null)return;const s=bR(i);if(s==null)return;const{idKey:o,idName:r,sizeKey:a,sizeName:l,colorKey:c,colorName:u,labelKey:d,labelName:p,label:f}=this.properties;if(d==null||!f.enabled)return;const m=this.getLabelText(t,e,d,"label",[],f,{value:t,datum:e,idKey:o,idName:r,sizeKey:a,sizeName:l,colorKey:c,colorName:u,labelKey:d,labelName:p});if(m==null)return;const v=n.measureLines(String(m)),b=mR(s);if(b==null)return;const[C,x]=b.point,{width:w,height:M}=v;return{point:{x:C,y:x,size:0},label:{width:w,height:M,text:m},anchor:void 0,placement:void 0}}createNodeData(){const{id:e,dataModel:t,processedData:i,sizeScale:n,properties:s,scale:o}=this,{idKey:r,sizeKey:a,colorKey:l,labelKey:c,label:u,legendItemName:d}=s;if(t==null||i==null)return;const p=t.resolveColumnById(this,"idValue",i),f=t.resolveColumnById(this,"featureValue",i),m=c==null?void 0:t.resolveColumnById(this,"labelValue",i),v=a==null?void 0:t.resolveColumnById(this,"sizeValue",i),b=l==null?void 0:t.resolveColumnById(this,"colorValue",i),C=s.maxStrokeWidth??s.strokeWidth;n.range=[Math.min(s.strokeWidth,C),C];const x=ei(u),w=new Map;for(const[O]of i.dataSources.get(this.id)?.data.entries()??[]){const _=p[O],B=f[O]?.geometry??void 0,V=B!=null&&o!=null?cg(B,o):void 0;_!=null&&V!=null&&w.set(_,V)}const M=[],T=[],L=[],I=i.dataSources.get(this.id)?.data??[];for(const[O,_]of I.entries()){const B=p[O],V=b?.[O],j=v?.[O],K=m?.[O],Y=w.get(B);Y==null&&L.push(B);const G=this.getLabelDatum(_,K,Y,x);G!=null&&T.push(G),M.push({series:this,itemId:r,datum:_,datumIndex:O,idValue:B,labelValue:K,colorValue:V,sizeValue:j,projectedGeometry:Y,legendItemName:d,style:this.getItemStyle({datumIndex:O,datum:_,colorValue:V,sizeValue:j},!1)})}const R=10;if(L.length>R){const O=L.length-R;L.length=R,L.push(`(+${O} more)`)}return L.length>0&&fe.warnOnce("some data items do not have matches in the provided topology",L),{itemId:e,nodeData:M,labelData:T}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e,highlightDatumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;let i=this.ctx.highlightManager?.getActiveHighlight();const{legendItemName:n}=this.properties,s=n!=null&&i?.datum==null&&n===i?.legendItemName;i!=null&&(i.series!==this&&!s||i.datum==null)&&(i=void 0);const o=this.contextNodeData?.nodeData??[];this.datumSelection=this.updateDatumSelection({nodeData:o,datumSelection:e}),this.updateDatumStyles({datumSelection:e,isHighlight:!1}),this.updateDatumNodes({datumSelection:e,isHighlight:!1}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:i==null?[]:[i],datumSelection:t}),this.updateDatumStyles({datumSelection:t,isHighlight:!0}),this.updateDatumNodes({datumSelection:t,isHighlight:!0})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>_X(t.idValue))}getItemStyle({datumIndex:e=0,datum:t,colorValue:i,sizeValue:n},s){const{properties:o,colorScale:r,sizeScale:a}=this,{colorRange:l,itemStyler:c}=o,u=this.getHighlightStyle(s,e),d=GX(u,o.getStyle());!s&&i!=null&&(d.stroke=this.isColorScaleValid()?r.convert(i):l?.[0]??o.stroke),n!=null&&(d.strokeWidth=a.convert(n,{clamp:!0}));let p;return c!=null&&(p=this.cachedDatumCallback(_X(e,s?"highlight":"node"),()=>{const f=this.makeItemStylerParams(t,e,s,d);return this.callWithContext(c,f)})),p?GX(d,p):d}makeItemStylerParams(e,t,i,n){const{id:s}=this,o=this.ctx.highlightManager?.getActiveHighlight(),r=this.getHighlightStateString(o,i,t);return{seriesId:s,datum:e,highlighted:i,highlightState:r,...n}}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,n)=>{n.style=this.getItemStyle(n,t)})}updateDatumNodes({datumSelection:e}){e.each((t,i)=>{const{projectedGeometry:n,style:s}=i;if(n==null){t.visible=!1,t.projectedGeometry=void 0;return}t.visible=!0,t.projectedGeometry=n,t.setProperties(s)})}updatePlacedLabelData(e){this.labelSelection=this.labelSelection.update(e,t=>{t.pointerEvents=N.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{properties:t}=this,i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((n,{x:s,y:o,width:r,height:a,text:l},c)=>{const u=fje(this,void 0,t,t.label,!1,i),{color:d,fontStyle:p,fontWeight:f,fontSize:m,fontFamily:v}=u;n.visible=!0,n.x=s+r/2,n.y=o+a/2,n.text=l,n.fill=d,n.fontStyle=p,n.fontWeight=f,n.fontSize=m,n.fontFamily=v,n.textAlign="center",n.textBaseline="middle",n.fillOpacity=this.getHighlightStyle(!1,c).opacity??1,n.setBoxing(u)})}resetAnimation(){}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum({x:e,y:t}){let i=1/0,n;return this.datumSelection.each((s,o)=>{const r=s.distanceSquared(e,t);r<i&&(i=r,n=o)}),n==null?void 0:{datum:n,distance:Math.sqrt(i)}}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if(t?.datum===e)return t.point;const i=e.projectedGeometry,n=i==null?void 0:bR(i),s=n==null?void 0:mR(n)?.point,o=s==null?void 0:{x:s[0],y:s[1]};return this._previousDatumMidPoint={datum:e,point:o},o}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:n}=this,{strokeWidth:s,strokeOpacity:o,lineDash:r}=n;let{stroke:a}=n;if(e!=null&&this.isColorScaleValid()){const c=t.resolveColumnById(this,"colorValue",i)[e];a=this.colorScale.convert(c)}return{marker:{fill:void 0,fillOpacity:0,stroke:void 0,strokeWidth:0,strokeOpacity:0,lineDash:[0],lineDashOffset:0,enabled:!1},line:{stroke:a,strokeWidth:s,strokeOpacity:o,lineDash:r}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:n,visible:s}=this,{title:o,legendItemName:r,idKey:a,idName:l,colorKey:c,colorRange:u,showInLegend:d}=this.properties;if(e==="gradient"&&c!=null&&u!=null){const p=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:s,seriesId:n,series:this.getFormatterContext("color"),colorRange:u,colorDomain:p}]}else return e==="category"?[{legendType:"category",id:n,itemId:n,seriesId:n,enabled:s,label:{text:r??o??l??a},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!d}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s,ctx:{formatManager:o}}=this,{idKey:r,idName:a,colorKey:l,colorName:c,sizeKey:u,sizeName:d,labelKey:p,labelName:f,title:m,legendItemName:v,tooltip:b}=s;if(!i||!n)return;const C=n.dataSources.get(this.id)?.data[e],x=i.resolveColumnById(this,"idValue",n),w=u==null?void 0:i.resolveColumnById(this,"sizeValue",n)[e],M=l==null?void 0:i.resolveColumnById(this,"colorValue",n)[e],T=[];if(this.isLabelEnabled()&&p!=null&&p!==r){const I=i.resolveColumnById(this,"labelValue",n)[e],R=o.format(this.callWithContext.bind(this),{type:"category",value:I,datum:C,seriesId:t,legendItemName:v,key:p,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});T.push({label:f,fallbackLabel:p,value:R??I})}if(w!=null&&u!=null){const I=i.getDomain(this,"sizeValue","value",n),R=o.format(this.callWithContext.bind(this),{type:"number",value:w,datum:C,seriesId:t,legendItemName:v,key:u,source:"tooltip",property:"size",domain:I,boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});T.push({label:d,fallbackLabel:u,value:R??String(w)})}if(M!=null&&l!=null){const I=i.getDomain(this,"colorValue","value",n),R=o.format(this.callWithContext.bind(this),{type:"number",value:M,datum:C,seriesId:t,legendItemName:v,key:l,source:"tooltip",property:"color",domain:I,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});T.push({label:c,fallbackLabel:l,value:R??String(M)})}const L=this.getItemStyle({datumIndex:e,datum:C,colorValue:M,sizeValue:w},!1);return this.formatTooltipWithContext(b,{heading:x[e],title:m??v,symbol:this.legendItemSymbol(e),data:T},{seriesId:t,datum:C,title:m,idKey:r,idName:a,colorKey:l,colorName:c,sizeKey:u,sizeName:d,labelKey:p,labelName:f,...L})}computeFocusBounds(e){const t=vae(this,e);return t?bje.toCanvas(this.contentGroup,t.getBBox()):void 0}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}};P1.className="MapLineSeries";P1.type="map-line";var{commonSeriesOptionsDefs:Sje,mapLineSeriesThemeableOptionsDef:Cje,without:xje}=N,bae={...xje(Sje,["highlightStyle","highlight"]),...Cje,type:ue(ht("map-line")),idKey:ue(J),sizeKey:J,colorKey:J,labelKey:J,idName:J,sizeName:J,colorName:J,labelName:J,topology:DS,topologyIdKey:J,legendItemName:J,title:J};bae.colorRange=Xe(si(it(Fe),yg(1)));var wje={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",moduleFactory:e=>new P1(e),themeTemplate:{...sM,series:{stroke:ku(N.SAFE_STROKE_FILL_OPERATION),colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},ku(N.SAFE_RANGE2_OPERATION)]},strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{...N.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:ku(N.multiSeriesHighlightStyle(!1))},tooltip:{range:"exact"}}},Dje={type:"series",name:"map-line",chartType:"topology",enterprise:!0,options:bae,create:e=>new P1(e)},{Property:My,SeriesProperties:Mje,makeSeriesTooltip:Aje}=N,Wg=class extends Mje{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=Aje()}};D([My],Wg.prototype,"topology");D([My],Wg.prototype,"stroke");D([My],Wg.prototype,"strokeOpacity");D([My],Wg.prototype,"strokeWidth");D([My],Wg.prototype,"lineDash");D([My],Wg.prototype,"lineDashOffset");D([My],Wg.prototype,"tooltip");var{createDatumId:kje,Group:Tje,Selection:Ije,PointerEvents:VX}=N,N1=class extends oM{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[]}),this.properties=new Wg,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new Tje({name:"itemGroup"})),this.datumSelection=Ije.select(this.itemGroup,()=>this.nodeFactory()),this.itemGroup.pointerEvents=VX.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0}nodeFactory(){const e=new pC;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e.pointerEvents=VX.None,e}processData(){const{topology:e}=this;this.topologyBounds=e?.features.reduce((t,i)=>{const n=i.geometry;return n==null?t:gC(n,t)},void 0),e==null&&fe.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i,properties:n}=this;if(t==null)return;const{stroke:s,strokeOpacity:o,lineDash:r,lineDashOffset:a,strokeWidth:l}=n,c=[],u=[];for(const[d,p]of t.features.entries()){const{geometry:f}=p,m=f!=null&&i!=null?cg(f,i):void 0;m!=null&&c.push({series:this,itemId:d,datum:p,datumIndex:0,index:d,projectedGeometry:m,style:{stroke:s,strokeOpacity:o,lineDash:r,lineDashOffset:a,strokeWidth:l}})}return{itemId:e,nodeData:c,labelData:u}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;const{nodeData:t=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:t,datumSelection:e}),this.updateDatumNodes({datumSelection:e})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>kje(t.index))}updateDatumNodes(e){const{datumSelection:t}=e;t.each((i,n)=>{const{projectedGeometry:s}=n;if(s==null){i.visible=!1,i.projectedGeometry=void 0;return}i.visible=!0,i.projectedGeometry=s,i.setProperties(n.style)})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}computeFocusBounds(e){}hasItemStylers(){return!1}};N1.className="MapLineBackgroundSeries";N1.type="map-line-background";var{mapLineBackgroundSeriesThemeableOptionsDef:Rje}=N,Eje={...Rje,type:ue(ht("map-line-background")),topology:DS},Lje={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",moduleFactory:e=>new N1(e),themeTemplate:{...sM,series:{stroke:{$path:["/1",{$mapPalette:"stroke"},{$mapPalette:"secondHierarchyColors"}]},strokeWidth:1,lineDash:[0],lineDashOffset:0}}},Pje={type:"series",name:"map-line-background",chartType:"topology",enterprise:!0,options:Eje,create:e=>new N1(e)};function Sae(e,t,i){const n=rm(e[0],void 0);if(n==null)return;const s=(n.lon0+n.lon1)/2,o=(n.lat0+n.lat1)/2,r=Math.abs(n.lon1-n.lon0),a=Math.abs(n.lat1-n.lat0),l=ije(e[0]),[c,u]=l,d=-yR(e,c,u);let p;const f=(T,L)=>{const R=Math.max(L-d,0);return T-.5*R},m=(T,L,I)=>{const{distance:R,maxDistance:O}=i(e,T,L,I),_=Math.hypot(c-T,u-L),B=Math.min(Math.max(c,T-I/2),T+I/2),V=Math.min(Math.max(u,L-I/2),L+I/2),j=Math.hypot(c-B,u-V),K=f(R,_),Y=f(O,j);return{distance:R,maxDistance:O,value:K,maxValue:Y,x:T,y:L,stride:I}},v=(T,L,I,R)=>{const O=m(L,I,R);O.maxDistance>=0&&T.push(O)},b=Math.min(r,a)/2;let C={value:m(s,o,b),next:null};for(;C!=null;){const T=C.value,{distance:L,value:I,maxValue:R,x:O,y:_,stride:B}=T;if(C=C.next,L>0&&(p==null||I>p.value)&&(p=T),p!=null&&R-p.value<=t)continue;const V=B/2,j=[];v(j,O-V,_-V,V),v(j,O+V,_-V,V),v(j,O-V,_+V,V),v(j,O+V,_+V,V),j.sort(HX),C=BJ(C,j,HX)}if(p==null)return;const{distance:x,x:w,y:M}=p;return{x:w,y:M,distance:x}}var HX=(e,t)=>t.maxValue-e.maxValue;function ez(e,t){const i=Sae(e,t,(o,r,a,l)=>{const c=-yR(o,r,a),u=c+l*Math.SQRT2;return{distance:c,maxDistance:u}});if(i==null)return;const{x:n,y:s}=i;return[n,s]}function Cae(e,t){let i;switch(e.type){case"GeometryCollection":return e.geometries.flatMap(n=>Cae(n,t));case"MultiPoint":return e.coordinates;case"Point":return[e.coordinates];case"MultiPolygon":{const n=vR(e);i=n==null?void 0:ez(n,t);break}case"Polygon":{const n=e.coordinates;i=n==null?void 0:ez(n,t);break}case"MultiLineString":{const n=bR(e);i=n==null?void 0:mR(n)?.point;break}case"LineString":{const n=e.coordinates;i=mR(n)?.point;break}}return i==null?[]:[i]}var{BBox:Nje}=N;function xae(e){if(!e)return;const{range:t}=e,i=t[0][0],n=t[0][1],s=t[1][0]-i,o=t[1][1]-n,r=new Nje(i,n,s,o);return{series:r,axis:r}}var{Property:di,SeriesProperties:Oje,makeSeriesTooltip:Fje,Label:Bje}=N,wae=class extends Bje{constructor(){super(...arguments),this.placement="bottom"}};D([di],wae.prototype,"placement");var hi=class extends Oje{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape="circle",this.size=6,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new wae,this.tooltip=Fje()}getStyle(){const{size:e,shape:t,fill:i,fillOpacity:n,stroke:s,strokeWidth:o,strokeOpacity:r,lineDash:a,lineDashOffset:l}=this;return{size:e,shape:t,fill:i,fillOpacity:n,opacity:1,stroke:s,strokeWidth:o,strokeOpacity:r,lineDash:a,lineDashOffset:l}}};D([di],hi.prototype,"topology");D([di],hi.prototype,"title");D([di],hi.prototype,"legendItemName");D([di],hi.prototype,"idKey");D([di],hi.prototype,"topologyIdKey");D([di],hi.prototype,"idName");D([di],hi.prototype,"latitudeKey");D([di],hi.prototype,"latitudeName");D([di],hi.prototype,"longitudeKey");D([di],hi.prototype,"longitudeName");D([di],hi.prototype,"labelKey");D([di],hi.prototype,"labelName");D([di],hi.prototype,"sizeKey");D([di],hi.prototype,"sizeName");D([di],hi.prototype,"colorKey");D([di],hi.prototype,"colorName");D([di],hi.prototype,"colorRange");D([di],hi.prototype,"shape");D([di],hi.prototype,"size");D([di],hi.prototype,"maxSize");D([di],hi.prototype,"sizeDomain");D([di],hi.prototype,"fill");D([di],hi.prototype,"fillOpacity");D([di],hi.prototype,"stroke");D([di],hi.prototype,"strokeWidth");D([di],hi.prototype,"strokeOpacity");D([di],hi.prototype,"lineDash");D([di],hi.prototype,"lineDashOffset");D([di],hi.prototype,"itemStyler");D([di],hi.prototype,"label");D([di],hi.prototype,"tooltip");var{fromToMotion:_je,StateMachine:zje,getMissCount:Gje,createDatumId:WX,SeriesNodePickMode:jX,valueProperty:Ff,computeMarkerFocusBounds:Vje,ColorScale:Hje,LinearScale:Wje,Group:jje,Selection:D2,Text:Uje,Marker:M2,applyShapeStyle:$je,getLabelStyles:Kje,LonLatBBox:Yje,mergeDefaults:UX}=N,O1=class extends oM{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{size:["colorKey"],color:["colorKey"],label:["labelKey"]},propertyNames:{size:["sizeName"],color:["colorName"],label:["labelName"]},pickModes:[jX.EXACT_SHAPE_MATCH,jX.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new hi,this._chartTopology=void 0,this.colorScale=new Hje,this.sizeScale=new Wje,this.markerGroup=this.contentGroup.appendChild(new jje({name:"markerGroup"})),this.labelSelection=D2.select(this.labelGroup,Uje,!1),this.markerSelection=D2.select(this.markerGroup,M2,!1),this.highlightMarkerSelection=D2.select(this.highlightGroup,M2),this.animationState=new zje("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){const e=this.properties.latitudeKey!=null&&this.properties.longitudeKey!=null;return super.hasData&&(this.topology!=null||e)}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[3,e],this.highlightGroup.zIndex=[4,e],!0}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}async processData(e){if(this.data==null)return;const{data:t,topology:i,sizeScale:n,colorScale:s}=this,{topologyIdKey:o,idKey:r,latitudeKey:a,longitudeKey:l,sizeKey:c,colorKey:u,labelKey:d,sizeDomain:p,colorRange:f}=this.properties,m=new Map;for(const R of i?.features.values()??[]){const O=R.properties?.[o];O!=null&&m.set(O,R)}const v=this.sizeScale.type,b=this.colorScale.type,C=this.scale?.type,x=a!=null&&l!=null,{dataModel:w,processedData:M}=await this.requestDataModel(e,t,{props:[...r==null?[]:[Ff(r,C,{id:"idValue",includeProperty:!1}),Ff(r,C,{id:"featureValue",includeProperty:!1,processor:()=>R=>m.get(R)})],...x?[Ff(a,C,{id:"latValue"}),Ff(l,C,{id:"lonValue"})]:[],...d?[Ff(d,"category",{id:"labelValue"})]:[],...c?[Ff(c,v,{id:"sizeValue"})]:[],...u?[Ff(u,b,{id:"colorValue"})]:[]]}),T=r==null?void 0:w.resolveColumnById(this,"featureValue",M),L=x?w.resolveColumnById(this,"latValue",M):void 0,I=x?w.resolveColumnById(this,"lonValue",M):void 0;if(this.topologyBounds=M.dataSources.get(this.id)?.data.reduce((R,O,_)=>{const V=T?.[_]?.geometry;if(V!=null&&(R=gC(V,R)),L!=null&&I!=null){const j=I[_],K=L[_];R=Yje.extend(R,j,K,j,K)}return R},void 0),c!=null){const R=w.resolveProcessedDataIndexById(this,"sizeValue"),O=M.domain.values[R]??[];n.domain=p??O}if(f!=null&&this.isColorScaleValid()){const R=w.resolveProcessedDataIndexById(this,"colorValue");s.domain=M.domain.values[R],s.range=f,s.update()}this.animationState.transition("updateData")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const n=t.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,o=Gje(this,i.defs.values[n].missing);return!(s===0||s===o)}getLabelDatum(e,t,i,n,s,o){if(t==null)return;const{idKey:r,idName:a,latitudeKey:l,latitudeName:c,longitudeKey:u,longitudeName:d,sizeKey:p,sizeName:f,colorKey:m,colorName:v,labelKey:b,labelName:C,label:x,shape:w}=this.properties;if(b==null||!x.enabled)return;const{placement:M}=x,T=this.getLabelText(t,e,b,"label",[],x,{value:t,datum:e,idKey:r,idName:a,latitudeKey:l,latitudeName:c,longitudeKey:u,longitudeName:d,sizeKey:p,sizeName:f,colorKey:m,colorName:v,labelKey:b,labelName:C});if(T==null)return;const{width:L,height:I}=o.measureLines(String(T)),R=M2.anchor(w);return{point:{x:i,y:n,size:s},label:{width:L,height:I,text:T},anchor:R,placement:M}}createNodeData(){const{id:e,dataModel:t,processedData:i,sizeScale:n,properties:s,scale:o}=this,{idKey:r,latitudeKey:a,longitudeKey:l,sizeKey:c,colorKey:u,labelKey:d,label:p,legendItemName:f}=s;if(t==null||i==null||o==null)return;const m=a!=null&&l!=null,v=r==null?void 0:t.resolveColumnById(this,"idValue",i),b=r==null?void 0:t.resolveColumnById(this,"featureValue",i),C=m?t.resolveColumnById(this,"latValue",i):void 0,x=m?t.resolveColumnById(this,"lonValue",i):void 0,w=d==null?void 0:t.resolveColumnById(this,"labelValue",i),M=c==null?void 0:t.resolveColumnById(this,"sizeValue",i),T=u==null?void 0:t.resolveColumnById(this,"colorValue",i),L=s.maxSize??s.size;n.range=[Math.min(s.size,L),L];const I=ei(p);let R;if(v!=null&&b!=null){R=new Map;for(const[K]of i.dataSources.get(this.id)?.data.entries()??[]){const Y=v[K],G=b[K]?.geometry??void 0,$=G!=null&&o!=null?cg(G,o):void 0;Y!=null&&$!=null&&R.set(Y,$)}}const O=[],_=[],B=[],V=i.dataSources.get(this.id)?.data??[];for(const[K,Y]of V.entries()){const G=v?.[K],$=x?.[K],W=C?.[K],Q=T?.[K],q=M?.[K],H=w?.[K],U=q==null?s.size:n.convert(q,{clamp:!0}),ee=G==null?void 0:R?.get(G);if(G!=null&&cg==null&&B.push(G),$!=null&&W!=null){const[ie,oe]=o.convert([$,W]),ae=this.getLabelDatum(Y,H,ie,oe,U,I);ae&&_.push(ae),O.push({series:this,itemId:a,datum:Y,datumIndex:K,index:-1,idValue:G,lonValue:$,latValue:W,labelValue:H,sizeValue:q,colorValue:Q,point:{x:ie,y:oe,size:U},midPoint:{x:ie,y:oe},legendItemName:f,style:this.getMarkerItemStyle({datumIndex:K,datum:Y,colorValue:Q,sizeValue:q},!1)})}else if(ee!=null)for(const[ie,[oe,ae]]of Cae(ee,1).entries()){const me=this.getLabelDatum(Y,H,oe,ae,U,I);me&&_.push(me),O.push({series:this,itemId:a,datum:Y,datumIndex:K,index:ie,idValue:G,lonValue:$,latValue:W,labelValue:H,sizeValue:q,colorValue:Q,point:{x:oe,y:ae,size:U},midPoint:{x:oe,y:ae},legendItemName:f,style:this.getMarkerItemStyle({datumIndex:K,datum:Y,colorValue:Q,sizeValue:q},!1)})}}const j=10;if(B.length>j){const K=B.length-j;B.length=j,B.push(`(+${K} more)`)}return B.length>0&&fe.warnOnce("some data items do not have matches in the provided topology",B),{itemId:e,nodeData:O,labelData:_}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}checkScaleChange(){return this.previousScale===this.scale?!1:(this.previousScale=this.scale,!0)}update({seriesRect:e}){const t=this.checkResize(e),i=this.checkScaleChange(),{markerSelection:n,highlightMarkerSelection:s}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;let o=this.ctx.highlightManager?.getActiveHighlight();const{legendItemName:r}=this.properties,a=r!=null&&o?.datum==null&&r===o?.legendItemName;o!=null&&(o.series!==this&&!a||o.datum==null)&&(o=void 0);const l=this.contextNodeData?.nodeData??[];this.markerSelection=this.updateMarkerSelection({markerData:l,markerSelection:n}),this.updateMarkerNodes({markerSelection:n,isHighlight:!1,highlightedDatum:o}),this.highlightMarkerSelection=this.updateMarkerSelection({markerData:o==null?[]:[o],markerSelection:s}),this.updateMarkerNodes({markerSelection:s,isHighlight:!0,highlightedDatum:o}),(i||t)&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePlacedLabelData(e){this.labelSelection=this.labelSelection.update(e,t=>{t.pointerEvents=N.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{properties:t}=this,i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((n,{x:s,y:o,width:r,height:a,text:l},c)=>{const u=Kje(this,void 0,t,t.label,!1,i),{color:d,fontStyle:p,fontWeight:f,fontSize:m,fontFamily:v}=u;n.visible=!0,n.x=s+r/2,n.y=o+a/2,n.text=l,n.fill=d,n.fontStyle=p,n.fontWeight=f,n.fontSize=m,n.fontFamily=v,n.textAlign="center",n.textBaseline="middle",n.fillOpacity=this.getHighlightStyle(!1,c).opacity??1,n.setBoxing(u)})}updateMarkerSelection(e){const{markerData:t,markerSelection:i}=e;return i.update(t,void 0,n=>WX(n.index,n.idValue,n.lonValue,n.latValue))}getMarkerItemStyle({datumIndex:e,datum:t,colorValue:i,sizeValue:n},s){const{properties:o,colorScale:r,sizeScale:a}=this,{colorRange:l,itemStyler:c}=o,u=this.getHighlightStyle(s,e),d=UX(u,o.getStyle());!s&&i!=null&&(d.fill=this.isColorScaleValid()?r.convert(i):l?.[0]??d.fill),n!=null&&(d.size=a.convert(n,{clamp:!0}));let p=d;if(c!=null&&e!=null){const f=this.cachedDatumCallback(WX(e,s?"highlight":"node"),()=>{const m=this.makeItemStylerParams(t,e,s,p);return this.callWithContext(c,m)});f&&(p=UX(f,d))}return p}makeItemStylerParams(e,t,i,n){const{id:s}=this,o=this.ctx.highlightManager?.getActiveHighlight(),r=this.getHighlightStateString(o,i,t),a=this.filterItemStylerFillParams(n.fill)??n.fill;return{seriesId:s,datum:e,highlighted:i,highlightState:r,...n,fill:a}}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i,highlightedDatum:n}=e,s=xae(this.scale);t.each((o,r)=>{const{datum:a,point:l}=r,c=this.getMarkerItemStyle(r,i);o.shape=c.shape,o.size=c.size,$je(o,c,s),o.x=l.x,o.y=l.y,o.scalingCenterX=l.x,o.scalingCenterY=l.y,o.zIndex=!i&&n!=null&&a===n.datum?1:0})}isProcessedDataAnimatable(){return!0}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:e}=this.ctx,t=uje();_je(this.id,"markers",e,[this.markerSelection,this.highlightMarkerSelection],t)}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum(e){const{x:t,y:i}=e;let n=1/0,s;for(const o of this.contextNodeData?.nodeData??[]){const{x:r,y:a,size:l}=o.point,c=Math.max(Math.abs(r-t)-l,0),u=Math.max(Math.abs(a-i)-l,0),d=c*c+u*u;d<n&&(n=d,s=o)}return s==null?void 0:{datum:s,distance:Math.sqrt(n)}}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:n}=this,{shape:s,fillOpacity:o,stroke:r,strokeWidth:a,strokeOpacity:l,lineDash:c,lineDashOffset:u}=n;let{fill:d}=n;if(e!=null&&this.isColorScaleValid()){const f=t.resolveColumnById(this,"colorValue",i)[e];d=this.colorScale.convert(f)}return{marker:{shape:s,fill:d,fillOpacity:o,stroke:r,strokeWidth:a,strokeOpacity:l,lineDash:c,lineDashOffset:u}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:n,visible:s}=this,{title:o,legendItemName:r,idName:a,idKey:l,colorKey:c,colorRange:u,showInLegend:d}=this.properties;if(e==="gradient"&&c!=null&&u!=null){const p=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:s,seriesId:n,series:this.getFormatterContext("color"),colorRange:u,colorDomain:p}]}else return e==="category"?[{legendType:"category",id:n,itemId:n,seriesId:n,enabled:s,label:{text:r??o??a??l??n},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!d}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s,ctx:{formatManager:o}}=this,{idKey:r,idName:a,latitudeKey:l,latitudeName:c,longitudeKey:u,longitudeName:d,colorKey:p,colorName:f,sizeKey:m,sizeName:v,labelKey:b,labelName:C,title:x,legendItemName:w,tooltip:M}=s;if(!i||!n)return;const T=n.dataSources.get(this.id)?.data[e],L=m==null?void 0:i.resolveColumnById(this,"sizeValue",n)[e],I=p==null?void 0:i.resolveColumnById(this,"colorValue",n)[e],R=[];if(this.isLabelEnabled()&&b!=null&&b!==r){const B=i.resolveColumnById(this,"labelValue",n)[e],V=o.format(this.callWithContext.bind(this),{type:"category",value:B,datum:T,seriesId:t,legendItemName:w,key:b,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});R.push({label:C,fallbackLabel:b,value:V??B})}if(m!=null&&L!=null){const B=i.getDomain(this,"sizeValue","value",n),V=o.format(this.callWithContext.bind(this),{type:"number",value:L,datum:T,seriesId:t,legendItemName:w,key:m,source:"tooltip",property:"size",domain:B,boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});R.push({label:v,fallbackLabel:m,value:V??String(L)})}if(p!=null&&I!=null){const B=i.getDomain(this,"colorValue","value",n),V=o.format(this.callWithContext.bind(this),{type:"number",value:I,datum:T,seriesId:t,legendItemName:w,key:p,source:"tooltip",property:"color",domain:B,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});R.push({label:f,fallbackLabel:p,value:V??String(I)})}let O;if(r!=null)O=i.resolveColumnById(this,"idValue",n)[e];else if(l!=null&&u!=null){const B=i.resolveColumnById(this,"latValue",n)[e],V=i.resolveColumnById(this,"lonValue",n)[e];O=`${Math.abs(B).toFixed(4)} ${B>=0?"N":"S"}, ${Math.abs(V).toFixed(4)} ${V>=0?"W":"E"}`}const _=this.getMarkerItemStyle({datumIndex:e,datum:T,colorValue:I,sizeValue:L},!1);return this.formatTooltipWithContext(M,{heading:O,title:x??w,symbol:this.legendItemSymbol(e),data:R},{seriesId:t,datum:T,title:x,idKey:r,idName:a,latitudeKey:l,latitudeName:c,longitudeKey:u,longitudeName:d,colorKey:p,colorName:f,sizeKey:m,sizeName:v,labelKey:b,labelName:C,..._})}getFormattedMarkerStyle(e){const t=this.getMarkerItemStyle(e,!1);return{size:t.size,shape:t.shape}}computeFocusBounds(e){return Vje(this,e)}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}};O1.className="MapMarkerSeries";O1.type="map-marker";var{commonSeriesOptionsDefs:Xje,mapMarkerSeriesThemeableOptionsDef:Zje,without:qje}=N,Qje={...qje(Xje,["highlightStyle","highlight"]),...Zje,type:ue(ht("map-marker")),idKey:J,latitudeKey:J,longitudeKey:J,sizeKey:J,colorKey:J,labelKey:J,idName:J,latitudeName:J,longitudeName:J,sizeName:J,colorName:J,labelName:J,topology:DS,topologyIdKey:J,legendItemName:J,title:J},Jje={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",moduleFactory:e=>new O1(e),themeTemplate:{...sM,series:{shape:"circle",maxSize:30,fill:ku({$applySwitch:[{$path:"type"},{$mapPalette:"fill"},["gradient",N.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS]]}),stroke:{$mapPalette:"stroke"},colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},ku(N.SAFE_RANGE2_OPERATION)]},fillOpacity:.5,label:{...N.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:ku(N.multiSeriesHighlightStyle())},tooltip:{range:"exact"}}},e4e={type:"series",name:"map-marker",chartType:"topology",enterprise:!0,options:Qje,create:e=>new O1(e),validate(e,t,i){const n=yo(e,t,i),{cleared:s,invalid:o}=n;if(s?.idKey==null&&(s?.latitudeKey==null||s?.longitudeKey==null)){const r=l=>i?`${i}.${l}`:l,a=`Either \`${r("idKey")}\` or both \`${r("latitudeKey")}\` and \`${r("longitudeKey")}\` are required.`;o.push(new Yp("required",a,null,i))}return n}};function t4e(e,{aspectRatio:t,precision:i}){const n=Sae(e,i,(l,c,u,d)=>{const p=n4e(l,c,u,t),f=p+2*d*t,m=p*Math.SQRT2,v=f*Math.SQRT2;return{distance:m,maxDistance:v}});if(n==null)return;const{x:s,y:o,distance:r}=n,a=r/Math.SQRT2;return{x:s,y:o,maxWidth:a}}function i4e(e,t,i,n,s){const[o,r]=e,[a,l]=t,c=1/s,u=a-o,d=l-r,[p,f]=r<=l?e:t,[m,v]=o<=a?e:t,[b,C]=r<=l?t:e,[x,w]=o<=a?t:e;let M=1/0;if(u===0)for(let _=0;_<=1;_+=1){const V=(_===0?c:-c)*(o-i)+n;if(V>=f&&V<=C){const K=Math.abs(n-V)*2*s;M=Math.min(M,K)}}else{const _=d/u;for(let B=0;B<=1;B+=1){const V=B===0?c:-c,j=(_*o-r-V*i+n)/(_-V);if(j>=m&&j<=x){const K=Math.abs(i-j)*2;M=Math.min(M,K)}}}const T=s,L=Math.abs((p-i)/(f-n)),I=Math.abs((b-i)/(C-n));if(C<n&&I<T){const B=Math.abs(n-C)*2*s;M=Math.min(M,B)}else if(f>n&&L<T){const B=Math.abs(n-f)*2*s;M=Math.min(M,B)}const R=Math.abs((v-n)/(m-i)),O=Math.abs((w-n)/(x-i));if(x<i&&O<c){const _=Math.abs(i-x)*2;M=Math.min(M,_)}else if(m>i&&R<c){const _=Math.abs(i-m)*2;M=Math.min(M,_)}return M}function n4e(e,t,i,n){let s=!1,o=1/0;for(const r of e){let a=r.at(-1),[l,c]=a;for(const u of r){const[d,p]=u;p>i!=c>i&&t<(l-d)*(i-p)/(c-p)+d&&(s=!s);const f=i4e(a,u,t,i,n);o=Math.min(o,f),a=u,l=d,c=p}}return(s?1:-1)*o}function Yk(e,t,i){i>=t&&(e.maxX=Math.min(e.maxX,i-t)),i<=t&&(e.minX=Math.max(e.minX,i-t))}function s4e(e,t,i,n,s,o){const r=s-o/2,a=s+o/2,[l,c]=t,[u,d]=i,p=u-l,f=d-c,[m,v]=l<=u?t:i,[b,C]=l<=u?i:t;if(p!==0){const x=f/p;for(let w=0;w<=1;w+=1){const T=((w===0?r:a)-c)/x+l;T>=m&&T<=b&&Yk(e,n,T)}}else Math.max(r,Math.min(c,d))<=Math.min(a,Math.max(c,d))&&Yk(e,n,l);return b<n&&C>=r&&C<=a?Yk(e,n,b):m>n&&v>=r&&v<=a&&Yk(e,n,m),e}function o4e(e,t,i,n){const s={minX:-1/0,maxX:1/0};for(const a of e){let l=a.at(-1);for(const c of a)s4e(s,l,c,t,i,n),l=c}const{minX:o,maxX:r}=s;return Number.isFinite(o)&&Number.isFinite(r)?{x:t+(o+r)/2,width:r-o}:{x:t,width:0}}var{Property:Hn,SeriesProperties:r4e,makeSeriesTooltip:a4e}=N,Mn=class extends r4e{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new eM,this.tooltip=a4e()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,opacity:1}}};D([Hn],Mn.prototype,"topology");D([Hn],Mn.prototype,"title");D([Hn],Mn.prototype,"legendItemName");D([Hn],Mn.prototype,"idKey");D([Hn],Mn.prototype,"idName");D([Hn],Mn.prototype,"topologyIdKey");D([Hn],Mn.prototype,"labelKey");D([Hn],Mn.prototype,"labelName");D([Hn],Mn.prototype,"colorKey");D([Hn],Mn.prototype,"colorName");D([Hn],Mn.prototype,"colorRange");D([Hn],Mn.prototype,"fill");D([Hn],Mn.prototype,"fillOpacity");D([Hn],Mn.prototype,"stroke");D([Hn],Mn.prototype,"strokeOpacity");D([Hn],Mn.prototype,"strokeWidth");D([Hn],Mn.prototype,"lineDash");D([Hn],Mn.prototype,"lineDashOffset");D([Hn],Mn.prototype,"padding");D([Hn],Mn.prototype,"itemStyler");D([Hn],Mn.prototype,"label");D([Hn],Mn.prototype,"tooltip");var{getMissCount:l4e,createDatumId:$X,SeriesNodePickMode:KX,valueProperty:Xk,ColorScale:c4e,Group:YX,Selection:A2,Text:u4e,PointerEvents:d4e,applyShapeStyle:h4e,getLabelStyles:p4e,mergeDefaults:XX}=N,ZX=N.MercatorScale.fixedScale(),F1=class extends oM{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{color:["colorKey"],label:["labelKey"]},propertyNames:{color:["colorName"],label:["labelName"]},pickModes:[KX.EXACT_SHAPE_MATCH,KX.NEAREST_NODE]}),this.properties=new Mn,this._chartTopology=void 0,this.colorScale=new c4e,this.itemGroup=this.contentGroup.appendChild(new YX({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new YX({name:"itemLabelGroup"})),this.datumSelection=A2.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=A2.select(this.itemLabelGroup,u4e),this.highlightDatumSelection=A2.select(this.highlightGroup,()=>this.nodeFactory()),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=d4e.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[2,e],!0}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const e=new pC;return e.renderMode=1,e.lineJoin="round",e}async processData(e){if(this.data==null)return;const{data:t,topology:i,colorScale:n}=this,{topologyIdKey:s,idKey:o,colorKey:r,labelKey:a,colorRange:l}=this.properties,c=new Map;for(const v of i?.features.values()??[]){const b=v.properties?.[s];b==null||!ZW(v.geometry,1)||c.set(b,v)}const u=this.colorScale.type,d=this.scale?.type,{dataModel:p,processedData:f}=await this.requestDataModel(e,t,{props:[Xk(o,d,{id:"idValue",includeProperty:!1}),Xk(o,d,{id:"featureValue",includeProperty:!1,processor:()=>v=>c.get(v)}),...a?[Xk(a,"category",{id:"labelValue"})]:[],...r?[Xk(r,u,{id:"colorValue"})]:[]]}),m=p.resolveColumnById(this,"featureValue",f);if(this.topologyBounds=m.reduce((v,b)=>{const C=b?.geometry;return C==null?v:gC(C,v)},void 0),l!=null&&this.isColorScaleValid()){const v=p.resolveProcessedDataIndexById(this,"colorValue");n.domain=f.domain.values[v],n.range=l,n.update()}i==null&&fe.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const n=t.resolveProcessedDataIndexById(this,"colorValue"),s=i.input.count,o=l4e(this,i.defs.values[n].missing);return!(s===0||s===o)}getLabelLayout(e,t,i,n,s){if(t==null||n==null)return;const{idKey:o,idName:r,colorKey:a,colorName:l,labelKey:c,labelName:u,padding:d,label:p}=this.properties;if(c==null||!p.enabled)return;const f=this.getLabelText(t,e,c,"label",[],p,{value:t,datum:e,idKey:o,idName:r,colorKey:a,colorName:l,labelKey:c,labelName:u});if(f==null)return;const m=ft(f)?Da(f,p):i.measureLines(String(f)),v=(m.width+2*d)/(m.height+2*d);if(s?.geometry===n&&s?.labelText===f&&s?.aspectRatio===v)return s;const b=cg(n,ZX),C=vR(b);if(C==null)return;const x=t4e(C,{aspectRatio:v,precision:.001});if(x==null)return;const{x:w,y:M,maxWidth:T}=x;return{geometry:n,labelText:f,aspectRatio:v,x:w,y:M,maxWidth:T,fixedPolygon:C}}getLabelDatum(e,t){const{scale:i}=this;if(i==null)return;const{padding:n,label:s}=this.properties,{labelText:o,aspectRatio:r,x:a,y:l,maxWidth:c,fixedPolygon:u}=e,d={width:Math.ceil(c*t),height:Math.ceil(c*t/r),meta:a},p=b0(Gt(o),s,{padding:n},(M,T)=>{if(!T)return d;const L=o4e(u,a,l,M/t);return{width:L.width*t,height:M,meta:L.x}});if(p==null)return;const[{text:f,fontSize:m,lineHeight:v,width:b},C]=p,x=b<d.width?a:C,w=this.scale.convert(ZX.invert([x,l]));return{x:w[0],y:w[1],text:f,fontSize:m,lineHeight:v}}createNodeData(){const{id:e,dataModel:t,processedData:i,properties:n,scale:s,previousLabelLayouts:o}=this,{idKey:r,colorKey:a,labelKey:l,label:c,legendItemName:u}=n;if(t==null||i==null)return;const d=s==null?Number.NaN:(s.range[1][0]-s.range[0][0])/s.bounds.width,p=t.resolveColumnById(this,"idValue",i),f=t.resolveColumnById(this,"featureValue",i),m=l==null?void 0:t.resolveColumnById(this,"labelValue",i),v=a==null?void 0:t.resolveColumnById(this,"colorValue",i),b=ei(c),C=new Map;this.previousLabelLayouts=C;const x=[],w=[],M=[],T=i.dataSources.get(this.id)?.data??[];for(const[I,R]of T.entries()){const O=p[I],_=v?.[I],B=m?.[I],V=f[I]?.geometry??void 0;V==null&&M.push(O);const j=this.getLabelLayout(R,B,b,V,o?.get(O));j!=null&&C.set(O,j);const K=j!=null&&s!=null?this.getLabelDatum(j,d):void 0;K!=null&&w.push(K);const Y=V!=null&&s!=null?cg(V,s):void 0;x.push({series:this,itemId:r,datum:R,datumIndex:I,idValue:O,colorValue:_,labelValue:B,projectedGeometry:Y,legendItemName:u,style:this.getItemStyle({datum:R,datumIndex:I,colorValue:_},!1)})}const L=10;if(M.length>L){const I=M.length-L;M.length=L,M.push(`(+${I} more)`)}return M.length>0&&fe.warnOnce("some data items do not have matches in the provided topology",M),{itemId:e,nodeData:x,labelData:w}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e,labelSelection:t,highlightDatumSelection:i}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;let n=this.ctx.highlightManager?.getActiveHighlight();const{legendItemName:s}=this.properties,o=s!=null&&n?.datum==null&&s===n?.legendItemName;n!=null&&(n.series!==this&&!o||n.datum==null)&&(n=void 0);const r=this.contextNodeData?.nodeData??[],a=this.contextNodeData?.labelData??[];this.datumSelection=this.updateDatumSelection({nodeData:r,datumSelection:e}),this.updateDatumStyles({datumSelection:e,isHighlight:!1}),this.updateDatumNodes({datumSelection:e}),this.labelSelection=this.updateLabelSelection({labelData:a,labelSelection:t}),this.updateLabelNodes({labelSelection:t}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:n==null?[]:[n],datumSelection:i}),this.updateDatumStyles({datumSelection:i,isHighlight:!0}),this.updateDatumNodes({datumSelection:i})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>$X(t.idValue))}getItemStyle({datumIndex:e,datum:t,colorValue:i},n){const{properties:s,colorScale:o}=this,{colorRange:r,itemStyler:a}=s,l=this.getHighlightStyle(n,e),c=XX(l,s.getStyle());!n&&i!=null&&(c.fill=this.isColorScaleValid()?o.convert(i):r?.[0]??c.fill);let u=c;if(a!=null&&e!=null){const d=this.cachedDatumCallback($X(e,n?"highlight":"node"),()=>{const p=this.makeItemStylerParams(t,e,n,u);return this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],this.callWithContext(a,p))});d&&(u=XX(d,u))}return u}makeItemStylerParams(e,t,i,n){const{id:s}=this,o=this.ctx.highlightManager?.getActiveHighlight(),r=this.getHighlightStateString(o,i,t),a=this.filterItemStylerFillParams(n.fill)??n.fill;return{seriesId:s,datum:e,highlighted:i,highlightState:r,...n,fill:a}}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,n)=>{n.style=this.getItemStyle(n,t)})}updateDatumNodes({datumSelection:e}){const t=xae(this.scale);e.each((i,n)=>{const{projectedGeometry:s}=n;if(s==null){i.visible=!1,i.projectedGeometry=void 0;return}i.visible=!0,i.projectedGeometry=s,h4e(i,n.style,t)})}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const{properties:t}=this,i=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((n,{x:s,y:o,text:r,fontSize:a,lineHeight:l},c)=>{const u=p4e(this,void 0,t,t.label,!1,i),{color:d,fontStyle:p,fontWeight:f,fontFamily:m}=u;n.visible=!0,n.x=s,n.y=o,n.text=r,n.fill=d,n.fontStyle=p,n.fontWeight=f,n.fontSize=a,n.lineHeight=l,n.fontFamily=m,n.textAlign="center",n.textBaseline="middle",n.fillOpacity=this.getHighlightStyle(!1,c).opacity??1,n.setBoxing(u)})}resetAnimation(){}pickNodeClosestDatum({x:e,y:t}){let i=1/0,n;return this.datumSelection.each((s,o)=>{const r=s.distanceSquared(e,t);r<i&&(i=r,n=o)}),n==null?void 0:{datum:n,distance:Math.sqrt(i)}}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if(t?.datum===e)return t.point;const i=e.projectedGeometry,n=i==null?void 0:vR(i),s=n==null?void 0:ez(n,2),o=s==null?void 0:{x:s[0],y:s[1]};return this._previousDatumMidPoint={datum:e,point:o},o}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:n}=this,{fillOpacity:s,stroke:o,strokeWidth:r,strokeOpacity:a,lineDash:l,lineDashOffset:c}=n;let{fill:u}=n;if(e!=null&&this.isColorScaleValid()){const p=t.resolveColumnById(this,"colorValue",i)[e];u=this.colorScale.convert(p)}return{marker:{fill:u,fillOpacity:s,stroke:o,strokeWidth:r,strokeOpacity:a,lineDash:l,lineDashOffset:c}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:n,visible:s}=this,{title:o,legendItemName:r,idKey:a,idName:l,colorKey:c,colorRange:u,showInLegend:d}=this.properties;if(e==="gradient"&&c!=null&&u!=null){const p=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:s,seriesId:n,series:this.getFormatterContext("color"),colorRange:u,colorDomain:p}]}else return e==="category"?[{legendType:"category",id:n,itemId:n,seriesId:n,enabled:s,label:{text:r??o??l??a},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!d}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s,ctx:{formatManager:o}}=this,{idKey:r,idName:a,colorKey:l,colorName:c,labelKey:u,labelName:d,legendItemName:p,title:f,tooltip:m}=s;if(!i||!n)return;const v=n.dataSources.get(this.id)?.data[e],b=i.resolveColumnById(this,"idValue",n)[e],C=l==null?void 0:i.resolveColumnById(this,"colorValue",n)[e],x=[];if(this.isLabelEnabled()&&u!=null&&u!==r){const M=i.resolveColumnById(this,"labelValue",n)[e],T=o.format(this.callWithContext.bind(this),{type:"category",value:M,datum:v,seriesId:t,legendItemName:p,key:u,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});x.push({label:d,fallbackLabel:u,value:T??M})}if(C!=null){const M=i.getDomain(this,"colorValue","value",n),T=o.format(this.callWithContext.bind(this),{type:"number",value:C,datum:v,seriesId:t,legendItemName:p,key:l,source:"tooltip",property:"color",domain:M,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});x.push({label:c,fallbackLabel:l,value:T??String(C)})}const w=this.getItemStyle({datum:v,datumIndex:e,colorValue:C},!1);return this.formatTooltipWithContext(m,{heading:b,title:f??p,symbol:this.legendItemSymbol(e),data:x},{seriesId:t,datum:v,title:f,idKey:r,idName:a,colorKey:l,colorName:c,labelKey:u,labelName:d,...w})}computeFocusBounds(e){return vae(this,e)}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}};F1.className="MapShapeSeries";F1.type="map-shape";var{commonSeriesOptionsDefs:g4e,mapShapeSeriesThemeableOptionsDef:f4e,without:m4e}=N,y4e={...m4e(g4e,["highlightStyle","highlight"]),...f4e,type:ue(ht("map-shape")),idKey:ue(J),colorKey:J,labelKey:J,idName:J,colorName:J,labelName:J,topology:DS,topologyIdKey:J,legendItemName:J,title:J},v4e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",moduleFactory:e=>new F1(e),themeTemplate:{...sM,series:{fill:ku({$applySwitch:[{$path:"type"},{$mapPalette:"fill"},["gradient",N.FILL_GRADIENT_LINEAR_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS]]}),stroke:{$ref:"chartBackgroundColor"},colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},ku(N.SAFE_RANGE2_OPERATION)]},fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{...N.LABEL_BOXING_DEFAULTS,color:{$ref:"chartBackgroundColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:"bold",overflowStrategy:"hide"},highlight:ku(N.multiSeriesHighlightStyle(!0))},tooltip:{range:"exact"}}},b4e={type:"series",name:"map-shape",chartType:"topology",enterprise:!0,options:y4e,create:e=>new F1(e)},{Property:Nh,SeriesProperties:S4e,makeSeriesTooltip:C4e}=N,Qu=class extends S4e{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=C4e()}};D([Nh],Qu.prototype,"topology");D([Nh],Qu.prototype,"fill");D([Nh],Qu.prototype,"fillOpacity");D([Nh],Qu.prototype,"stroke");D([Nh],Qu.prototype,"strokeOpacity");D([Nh],Qu.prototype,"strokeWidth");D([Nh],Qu.prototype,"lineDash");D([Nh],Qu.prototype,"lineDashOffset");D([Nh],Qu.prototype,"tooltip");var{createDatumId:x4e,Selection:w4e,Group:D4e,PointerEvents:qX}=N,B1=class extends oM{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[]}),this.properties=new Qu,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new D4e({name:"itemGroup"})),this.datumSelection=w4e.select(this.itemGroup,()=>this.nodeFactory()),this.itemGroup.pointerEvents=qX.None}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}getNodeData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0}nodeFactory(){const e=new pC;return e.renderMode=1,e.lineJoin="round",e.pointerEvents=qX.None,e}processData(){const{topology:e}=this;this.topologyBounds=e?.features.reduce((t,i)=>{const n=i.geometry;return n==null?t:gC(n,t)},void 0),e==null&&fe.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i,properties:n}=this;if(t==null)return;const{fill:s,fillOpacity:o,stroke:r,strokeWidth:a,strokeOpacity:l,lineDash:c,lineDashOffset:u}=n,d=[],p=[];for(const[f,m]of t.features.entries()){const{geometry:v}=m,b=v!=null&&i!=null?cg(v,i):void 0;b!=null&&d.push({series:this,itemId:f,datum:m,datumIndex:0,index:f,projectedGeometry:b,style:{fill:s,fillOpacity:o,stroke:r,strokeWidth:a,strokeOpacity:l,lineDash:c,lineDashOffset:u}})}return{itemId:e,nodeData:d,labelData:p}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;const{nodeData:t=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:t,datumSelection:e}),this.updateDatumNodes({datumSelection:e})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>x4e(t.index))}updateDatumNodes(e){const{datumSelection:t}=e;t.each((i,n)=>{const{projectedGeometry:s}=n;if(s==null){i.visible=!1,i.projectedGeometry=void 0;return}i.visible=!0,i.projectedGeometry=s,i.setProperties(n.style)})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}pickFocus(){}computeFocusBounds(e){}hasItemStylers(){return!1}};B1.className="MapShapeBackgroundSeries";B1.type="map-shape-background";var{commonSeriesOptionsDefs:M4e,mapShapeBackgroundSeriesThemeableOptionsDef:A4e}=N,k4e={...A4e,...M4e,type:ue(ht("map-shape-background")),topology:DS},T4e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",moduleFactory:e=>new B1(e),themeTemplate:{...sM,series:{fill:ku({$applySwitch:[{$path:"type"},{$path:["/1",{$mapPalette:"fill"},{$mapPalette:"hierarchyColors"}]},["gradient",N.FILL_GRADIENT_LINEAR_HIERARCHY_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS],["pattern",N.FILL_PATTERN_HIERARCHY_DEFAULTS]]}),stroke:{$ref:"chartBackgroundColor"},strokeWidth:1}}},I4e={type:"series",name:"map-shape-background",chartType:"topology",enterprise:!0,options:k4e,create:e=>new B1(e)},{createDatumId:R4e,mergeDefaults:QX,toHighlightString:E4e}=N;function L4e(e,t,i){const{id:n}=e,{angleKey:s,cornerRadius:o,fill:r,fillOpacity:a,lineDash:l,lineDashOffset:c,radiusKey:u,stackGroup:d,stroke:p,strokeOpacity:f,strokeWidth:m}=e.properties,v=E4e(i??N.HighlightState.None);return{angleKey:s,cornerRadius:o,fill:r,fillOpacity:a,highlightState:v,highlighted:t,lineDash:l,lineDashOffset:c,radiusKey:u,seriesId:n,stackGroup:d,stroke:p,strokeOpacity:f,strokeWidth:m}}function qW(e,t,i,n){const{styler:s}=e.properties;let o={};if(!t&&s){const r=L4e(e,i,n);o=e.ctx.optionsGraphService.resolvePartial(["series",`${e.declarationOrder}`],e.cachedCallWithContext(s,r)??{},{pick:!1})??{}}return{cornerRadius:o.cornerRadius??e.properties.cornerRadius,fill:o.fill??e.properties.fill,fillOpacity:o.fillOpacity??e.properties.fillOpacity,lineDash:o.lineDash??e.properties.lineDash,lineDashOffset:o.lineDashOffset??e.properties.lineDashOffset,stroke:o.stroke??e.properties.stroke,strokeOpacity:o.strokeOpacity??e.properties.strokeOpacity,strokeWidth:o.strokeWidth??e.properties.strokeWidth,opacity:1}}function P4e(e,t,i,n){const{id:s,properties:o}=e,{angleKey:r,radiusKey:a}=o,l=e.ctx.highlightManager?.getActiveHighlight(),c=e.getHighlightStateString(l,i,t.datumIndex),u=e.filterItemStylerFillParams(n.fill)??n.fill;return{seriesId:s,datum:t.datum,highlighted:i,highlightState:c,angleKey:r,radiusKey:a,...n,fill:u}}function Ab(e,t,i,n){const{properties:s}=e,{itemStyler:o}=s,r=e.getHighlightStyle(i,t?.datumIndex,n);let l=QX(r,qW(e,t===void 0,i,n));if(o!=null&&t!=null){const c=e.cachedDatumCallback(R4e(e.getDatumId(t),i?"highlight":"node"),()=>{const u=P4e(e,t,i,l);return e.callWithContext(o,u)});c&&(l=QX(c,l))}return l}var{DEFAULT_POLAR_DIRECTION_KEYS:N4e,DEFAULT_POLAR_DIRECTION_NAMES:O4e,ChartAxisDirection:Qc,PolarAxis:F4e,diff:B4e,fixNumericExtent:_4e,groupAccumulativeValueProperty:JX,keyProperty:z4e,normaliseGroupTo:G4e,resetLabelFn:V4e,seriesLabelFadeInAnimation:H4e,seriesLabelFadeOutAnimation:W4e,valueProperty:j4e,animationValidation:U4e,createDatumId:$4e,SeriesNodePickMode:eZ,normalizeAngle360:tZ,CategoryScale:K4e,motion:iZ,applyShapeStyle:Y4e,isGradientFill:X4e,updateLabelNode:Z4e,getItemStyles:q4e}=N,Q4e=class extends N.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey}},Dae=class extends N.PolarSeries{constructor(e,{animationResetFns:t}){super({moduleCtx:e,categoryKey:"angleValue",propertyKeys:N4e,propertyNames:O4e,canHaveAxes:!0,pickModes:[eZ.NEAREST_NODE,eZ.EXACT_SHAPE_MATCH],animationResetFns:{...t,label:V4e}}),this.NodeEvent=Q4e,this.groupScale=new K4e,this.circleCache={r:0,cx:0,cy:0}}get hasData(){return this.getHasData("radiusValue-raw")}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Qc.Angle)return t.getDomain(this,"angleValue","key",i);{const n=t.getDomain(this,"radiusValue-end","value",i),s=Number.isFinite(n[1]-n[0])?[Math.min(n[0],0),Math.max(n[1],0)]:[];return _4e(s)}}async processData(e){const{angleKey:t,radiusKey:i,normalizedTo:n}=this.properties,s=!this.ctx.animationManager.isSkipped(),o=this.getStackId(),r=`${o}-trailing`,a=[];In(n)&&a.push(G4e([o,r],Math.abs(n))),s&&this.processedData&&a.push(B4e(this.id,this.processedData)),s&&a.push(U4e());const l=this.visible?{}:{forceValue:0},c=this.axes[Qc.Radius]?.scale.type,u=this.axes[Qc.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[z4e(t,u,{id:"angleValue"}),j4e(i,c,{id:"radiusValue-raw",invalidValue:null,...l}),...JX(i,"normal",{id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:o,separateNegative:!0,...l},c),...JX(i,"trailing",{id:"radiusValue-start",invalidValue:null,groupId:r,separateNegative:!0,...l},c),...a],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,n=this.circleCache;return e!==n.r||t!==n.cx||i!==n.cy?(this.circleCache={r:e,cx:t,cy:i},!0):!1}isRadiusAxisReversed(){return this.axes[Qc.Radius]?.isReversed()}maybeRefreshNodeData(){!this.didCircleChange()&&!this.nodeDataRefresh||(this.contextNodeData=this.createNodeData(),this.nodeData=this.contextNodeData?.nodeData??[],this.nodeDataRefresh=!1)}getAxisInnerRadius(){const e=this.axes[Qc.Radius];return e instanceof F4e?this.radius*e.innerRadiusRatio:0}createNodeData(){const{processedData:e,dataModel:t,groupScale:i}=this;if(!t||!e||e.type!=="grouped")return;const n=this.axes[Qc.Angle],s=this.axes[Qc.Radius],o=n?.scale,r=s?.scale;if(!o||!r)return;const a=t.resolveKeysById(this,"angleValue",e),l=t.resolveColumnById(this,"radiusValue-start",e),c=t.resolveColumnById(this,"radiusValue-end",e),u=t.resolveColumnById(this,"radiusValue-raw",e),d=t.resolveProcessedDataIndexById(this,"radiusValue-range");let p=0,f=0;n instanceof Lg&&(p=n.groupPaddingInner,f=n.paddingInner);const v=(o.bandwidth??0)*(1-f),{index:b,visibleGroupCount:C}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);i.domain=Array.from({length:C}).map((Q,q)=>String(q)),i.range=[-v/2,v/2],i.paddingInner=C>1?p:0;const x=this.isRadiusAxisReversed(),w=x?this.radius:this.getAxisInnerRadius(),M=x?this.getAxisInnerRadius():this.radius,T=M+w,{angleKey:L,radiusKey:I,angleName:R,radiusName:O,legendItemName:_,label:B}=this.properties,V=this.getSeriesDomain(Qc.Radius),j=(Q,q,H,U)=>{const ee=this.getLabelText(q,Q,I,"radius",V,B,{value:q,datum:Q,angleKey:L,radiusKey:I,angleName:R,radiusName:O,legendItemName:_});if(ee)return{x:H,y:U,text:ee,textAlign:"center",textBaseline:"middle"}},K=[],Y=q4e((Q,q,H)=>Ab(this,Q,q,H)),G={itemId:I,nodeData:K,labelData:K,styles:Y};if(!this.visible)return G;const{dataSources:$}=e,W=$.get(this.id)?.data??[];for(const{datumIndex:Q,group:q}of t.forEachGroupDatum(this,e)){const H=W[Q],U=a[Q];if(U==null)return;const ee=u[Q],ie=ee>=0&&!Object.is(ee,-0),oe=l[Q],ae=c[Q],me=q.aggregation[d][ie?1:0]??0,xe=ie===x;if(oe===void 0||ae===void 0)return;let be,ge;if(W.length===1)be=-.5*Math.PI,ge=1.5*Math.PI;else{const Ze=o.convert(U);be=tZ(Ze+i.convert(String(b))),ge=tZ(be+i.bandwidth)}const Re=be+i.bandwidth/2,Ne=T-r.convert(oe),Pe=T-r.convert(ae),Be=(Ne+Pe)/2,Ue=T-r.convert(0),Ae=T-r.convert(me),Ve=Math.cos(Re)*Be,$e=Math.sin(Re)*Be,Qe=this.properties.label.enabled?j(H,ee,Ve,$e):void 0,Oe=this.getColumnWidth(be,ge);K.push({series:this,datum:H,datumIndex:Q,point:{x:Ve,y:$e,size:0},midPoint:{x:Ve,y:$e},label:Qe,angleValue:U,radiusValue:ee,negative:xe,innerRadius:Ne,outerRadius:Pe,stackInnerRadius:Ue,stackOuterRadius:Ae,startAngle:be,endAngle:ge,midAngle:Re,axisInnerRadius:w,axisOuterRadius:M,columnWidth:Oe,index:Q})}return{itemId:I,nodeData:K,labelData:K,styles:Y}}getColumnWidth(e,t){return Number.NaN}update({seriesRect:e}){const t=this.checkResize(e);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}updateSectorSelection(e,t){const{contextNodeData:i}=this;if(!i)return;const n=this.ctx.highlightManager.getActiveHighlight();let s=[];const o=this.ctx.highlightManager?.getActiveHighlight();t?o?.datum&&o.series===this&&s.push(o):s=this.nodeData;const r=this.isRadiusAxisReversed(),a=r?this.radius:this.getAxisInnerRadius(),l=r?this.getAxisInnerRadius():this.radius,c=this.getShapeFillBBox(),u=this.hasItemStylers();e.update(s,void 0,d=>this.getDatumId(d)).each((d,p)=>{const{midPoint:f}=p;if(u){const x=this.getHighlightState(o,t,p.datumIndex);p.style=Ab(this,p,t,x)}const m=p.style??i.styles[this.getHighlightState(n,t,p.datumIndex)],v=m.fill,C=X4e(v)&&v.bounds==="item"?{centerX:f?.x??0,centerY:f?.y??0}:{centerX:0,centerY:0,innerRadius:a,outerRadius:l};this.updateItemPath(d,p,t),Y4e(d,m,c,C),d.cornerRadius=m.cornerRadius??0,d.lineJoin="round"})}updateLabels(){const e=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.update(this.nodeData).each((t,i)=>{Z4e(this,t,this.properties,this.properties.label,i.label,!1,e),t.fillOpacity=this.getHighlightStyle(!1,i.datumIndex).opacity??1})}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getColumnTransitionFunctions();iZ.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),H4e(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getColumnTransitionFunctions();iZ.fromToMotion(this.id,"datums",t,[e],i),W4e(this,"labels",t,this.labelSelection)}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:s,properties:o}=this,{angleKey:r,angleName:a,radiusKey:l,radiusName:c,legendItemName:u,tooltip:d}=o,p=s[Qc.Angle],f=s[Qc.Radius],m=this.nodeData?.[e];if(!i||!n||!p||!f||!m)return;const v=n.dataSources.get(this.id)?.data[e],b=i.resolveKeysById(this,"angleValue",n)[e],C=i.resolveColumnById(this,"radiusValue-raw",n)[e];if(b==null)return;const x=Ab(this,m,!1);return this.formatTooltipWithContext(d,{heading:this.getAxisValueText(p,"tooltip",b,v,r,void 0),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(f,"tooltip",C,v,l,void 0)}]},{seriesId:t,datum:v,title:a,angleKey:r,angleName:a,radiusKey:l,radiusName:c,legendItemName:u,...x})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:n,strokeWidth:s,lineDash:o,lineDashOffset:r}=qW(this,!1,!1,N.HighlightState.None),a={fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:n,strokeWidth:s,lineDash:o,lineDashOffset:r};return N.isGradientFill(a.fill)&&(a.fill={...a.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:a}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{radiusKey:n,radiusName:s,legendItemName:o,showInLegend:r}=this.properties;return[{legendType:"category",id:t,itemId:n,seriesId:t,enabled:i,label:{text:o??s??n},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!r}]}getDatumId(e){return $4e(e.angleValue)}computeLabelsBBox(){return null}},{SeriesProperties:J4e,makeSeriesTooltip:eUe,Property:xs,Label:tUe}=N,Wn=class extends J4e{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new tUe,this.tooltip=eUe()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,cornerRadius:a}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,cornerRadius:a,opacity:1}}};D([xs],Wn.prototype,"angleKey");D([xs],Wn.prototype,"angleName");D([xs],Wn.prototype,"radiusKey");D([xs],Wn.prototype,"radiusName");D([xs],Wn.prototype,"legendItemName");D([xs],Wn.prototype,"fill");D([xs],Wn.prototype,"fillOpacity");D([xs],Wn.prototype,"stroke");D([xs],Wn.prototype,"strokeWidth");D([xs],Wn.prototype,"strokeOpacity");D([xs],Wn.prototype,"lineDash");D([xs],Wn.prototype,"lineDashOffset");D([xs],Wn.prototype,"cornerRadius");D([xs],Wn.prototype,"styler");D([xs],Wn.prototype,"itemStyler");D([xs],Wn.prototype,"rotation");D([xs],Wn.prototype,"stackGroup");D([xs],Wn.prototype,"normalizedTo");D([xs],Wn.prototype,"label");D([xs],Wn.prototype,"tooltip");var{motion:iUe}=N;function Mae(){const e={startAngle:new Map,endAngle:new Map},t=["startAngle","endAngle"],i=(r,a,l)=>{for(const c of t){const u=e[c];let d=(l==="removed"||l==="updated"?r:a)[c],p=(l==="removed"?r:a)[c];Number.isNaN(p)&&(p=r.previousDatum?.[c]??Number.NaN);const f=d-p;Math.abs(f)>Math.PI&&(d-=Math.sign(f)*2*Math.PI),u.set(a,{from:d,to:p})}},n=(r,a)=>({startAngle:e.startAngle.get(r)[a],endAngle:e.endAngle.get(r)[a]});return{calculate:i,from:r=>n(r,"from"),to:r=>n(r,"to")}}function Aae(e,t,i){if(i==="updated"){if(e.previousDatum==null||Number.isNaN(e.previousDatum.startAngle)||Number.isNaN(e.previousDatum.endAngle))return"added";if(Number.isNaN(t.startAngle)||Number.isNaN(t.endAngle))return"removed"}return i==="added"&&e.previousDatum!=null?"updated":i}function nUe(e){const t=Mae();return{toFn:(s,o,r)=>{const{startAngle:a,endAngle:l}=t.to(o);let c,u,d,p,f;return r==="removed"?(c=s.innerRadius,u=s.innerRadius,d=s.columnWidth,p=s.axisInnerRadius,f=s.axisOuterRadius):(c=Number.isNaN(o.innerRadius)?e:o.innerRadius,u=Number.isNaN(o.outerRadius)?e:o.outerRadius,d=Number.isNaN(o.columnWidth)?s.columnWidth:o.columnWidth,p=o.axisInnerRadius,f=o.axisOuterRadius),{innerRadius:c,outerRadius:u,columnWidth:d,axisInnerRadius:p,axisOuterRadius:f,startAngle:a,endAngle:l}},fromFn:(s,o,r)=>{r=Aae(s,o,r),t.calculate(s,o,r);const{startAngle:a,endAngle:l}=t.from(o);let c,u,d,p,f;r==="removed"||r==="updated"?(c=s.innerRadius,u=s.outerRadius,d=s.columnWidth,p=s.axisInnerRadius,f=s.axisOuterRadius):(c=e,u=e,d=o.columnWidth,p=o.axisInnerRadius,f=o.axisOuterRadius);const m=iUe.NODE_UPDATE_STATE_TO_PHASE_MAPPING[r];return{innerRadius:c,outerRadius:u,columnWidth:d,axisInnerRadius:p,axisOuterRadius:f,startAngle:a,endAngle:l,phase:m}}}}function sUe(e,{innerRadius:t,outerRadius:i,columnWidth:n,axisInnerRadius:s,axisOuterRadius:o,startAngle:r,endAngle:a}){return{innerRadius:t,outerRadius:i,columnWidth:n,axisInnerRadius:s,axisOuterRadius:o,startAngle:r,endAngle:a}}var{SectorBox:tI,motion:oUe}=N;function QW(e){const{negative:t,innerRadius:i,outerRadius:n,stackInnerRadius:s,stackOuterRadius:o}=e;return{innerRadius:t?o:s,outerRadius:t?s:o,clipInnerRadius:t?n:i,clipOuterRadius:t?i:n}}function rUe(e){const t=Mae();return{toFn:(s,o,r)=>{const{startAngle:a,endAngle:l}=t.to(o);let c,u,d;if(r==="removed")c=e,u=e,d=new tI(a,l,c,u);else{let p,f;({innerRadius:c,outerRadius:u,clipInnerRadius:p,clipOuterRadius:f}=QW(o)),Number.isNaN(c)&&(c=e),Number.isNaN(u)&&(u=e),Number.isNaN(p)&&(p=e),Number.isNaN(f)&&(f=e),d=new tI(a,l,p,f)}return{innerRadius:c,outerRadius:u,startAngle:a,endAngle:l,clipSector:d}},fromFn:(s,o,r)=>{r=Aae(s,o,r),t.calculate(s,o,r);const{startAngle:a,endAngle:l}=t.from(o);let c,u,d;r==="removed"||r==="updated"?(c=s.innerRadius,u=s.outerRadius,d=s.clipSector):(c=e,u=e),d??(d=new tI(a,l,c,u));const p=oUe.NODE_UPDATE_STATE_TO_PHASE_MAPPING[r];return{innerRadius:c,outerRadius:u,startAngle:a,endAngle:l,clipSector:d,phase:p}}}}function aUe(e,t){const{startAngle:i,endAngle:n}=t,{innerRadius:s,outerRadius:o,clipInnerRadius:r,clipOuterRadius:a}=QW(t),l=new tI(i,n,r,a);return{innerRadius:s,outerRadius:o,startAngle:i,endAngle:n,clipSector:l}}var{Sector:lUe,SectorBox:cUe,PolarZIndexMap:k2}=N,_1=class extends Dae{constructor(e){super(e,{animationResetFns:{item:aUe}}),this.properties=new Wn}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[0,k2.FOREGROUND,e],this.highlightGroup.zIndex=[0,k2.HIGHLIGHT,e],this.labelGroup.zIndex=[0,k2.LABEL,e],!0}getStackId(){return`nightingale-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new lUe}updateItemPath(e,t,i){const{negative:n}=t;if(e.centerX=0,e.centerY=0,e.startOuterCornerRadius=n?0:this.properties.cornerRadius,e.endOuterCornerRadius=n?0:this.properties.cornerRadius,e.startInnerCornerRadius=n?this.properties.cornerRadius:0,e.endInnerCornerRadius=n?this.properties.cornerRadius:0,i){const{startAngle:s,endAngle:o}=t,{innerRadius:r,outerRadius:a,clipInnerRadius:l,clipOuterRadius:c}=QW(t);e.innerRadius=r,e.outerRadius=a,e.startAngle=s,e.endAngle=o,e.clipSector=new cUe(s,o,l,c)}}getColumnTransitionFunctions(){const e=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return rUe(e)}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.styler!=null||this.properties.label.itemStyler!=null}};_1.className="NightingaleSeries";_1.type="nightingale";var{commonSeriesOptionsDefs:uUe,nightingaleSeriesThemeableOptionsDef:dUe}=N,hUe={...uUe,...dUe,type:ue(ht("nightingale")),angleKey:ue(J),radiusKey:ue(J),angleName:J,radiusName:J,legendItemName:J,grouped:te,stacked:te,stackGroup:J,normalizedTo:ve},{ThemeConstants:{POLAR_AXIS_TYPE:nZ,POLAR_AXIS_SHAPE:sZ},FILL_GRADIENT_RADIAL_SERIES_DEFAULTS:pUe,FILL_IMAGE_DEFAULTS:gUe,FILL_PATTERN_DEFAULTS:fUe}=N,mUe={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",pUe],["image",gUe],["pattern",fUe]]},stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"chartBackgroundColor"},{$palette:"stroke"}]},strokeWidth:1,label:{...N.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:N.multiSeriesHighlightStyle()},axes:{[nZ.ANGLE_CATEGORY]:{shape:{$findFirstSiblingNotOperation:sZ.CIRCLE},groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[nZ.RADIUS_NUMBER]:{shape:{$findFirstSiblingNotOperation:sZ.CIRCLE}}}},{ThemeConstants:{POLAR_AXIS_TYPE:oZ}}=N,yUe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",moduleFactory:e=>new _1(e),defaultAxes:[{type:oZ.ANGLE_CATEGORY},{type:oZ.RADIUS_NUMBER}],themeTemplate:mUe,stackable:!0,groupable:!0,stackedByDefault:!0},vUe={type:"series",name:"nightingale",chartType:"polar",enterprise:!0,options:hUe,create:e=>new _1(e)},{SeriesProperties:bUe,makeSeriesTooltip:SUe,Property:ws,Label:kae,DropShadow:CUe}=N,xUe=class extends kae{},JW=class extends kae{constructor(){super(...arguments),this.spacing=0}};D([ws],JW.prototype,"spacing");D([ws],JW.prototype,"placement");var Fs=class extends bUe{constructor(){super(...arguments),this.fills=[],this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.direction="vertical",this.reverse=void 0,this.spacing=0,this.aspectRatio=void 0,this.shadow=new CUe().set({enabled:!1}),this.label=new xUe,this.stageLabel=new JW,this.tooltip=SUe()}getStyle(e=0){const{fills:t,strokes:i,fillOpacity:n,strokeWidth:s,strokeOpacity:o,lineDash:r,lineDashOffset:a}=this;return{fill:t[e%t.length],fillOpacity:n,stroke:i[e%i.length],strokeWidth:s,strokeOpacity:o,lineDash:r,lineDashOffset:a,opacity:1}}};D([ws],Fs.prototype,"stageKey");D([ws],Fs.prototype,"valueKey");D([ws],Fs.prototype,"fills");D([ws],Fs.prototype,"fillOpacity");D([ws],Fs.prototype,"strokes");D([ws],Fs.prototype,"strokeWidth");D([ws],Fs.prototype,"strokeOpacity");D([ws],Fs.prototype,"lineDash");D([ws],Fs.prototype,"lineDashOffset");D([ws],Fs.prototype,"direction");D([ws],Fs.prototype,"reverse");D([ws],Fs.prototype,"spacing");D([ws],Fs.prototype,"aspectRatio");D([ws],Fs.prototype,"itemStyler");D([ws],Fs.prototype,"shadow");D([ws],Fs.prototype,"label");D([ws],Fs.prototype,"stageLabel");D([ws],Fs.prototype,"tooltip");function Tae(e,{x:t,y:i,top:n,right:s,bottom:o,left:r}){e.x0=t-n/2,e.x1=t+n/2,e.x2=t+o/2,e.x3=t-o/2,e.y0=i-r/2,e.y1=i-s/2,e.y2=i+s/2,e.y3=i+r/2}function wUe(e){return{fromFn:(s,o)=>{const{x:r,y:a}=o;let{top:l,right:c,bottom:u,left:d}=o;return e==="vertical"?(l=0,u=0):(d=0,c=0),{x:r,y:a,top:l,right:c,bottom:u,left:d}},toFn:(s,o)=>{const{x:r,y:a,top:l,right:c,bottom:u,left:d}=o;return{x:r,y:a,top:l,right:c,bottom:u,left:d}},applyFn:Tae}}var{StateMachine:DUe,valueProperty:rZ,SeriesNodePickMode:aZ,createDatumId:MUe,BBox:T2,Group:I2,Selection:Zk,Text:lZ,PointerEvents:cZ,applyShapeStyle:AUe,mergeDefaults:uZ,fromToMotion:kUe,seriesLabelFadeInAnimation:TUe,getLabelStyles:IUe}=N,z1=class extends N.DataModelSeries{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[aZ.EXACT_SHAPE_MATCH,aZ.NEAREST_NODE]}),this.properties=new Fs,this.itemGroup=this.contentGroup.appendChild(new I2({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new I2({name:"itemLabelGroup"})),this.stageLabelGroup=this.contentGroup.appendChild(new I2({name:"stageLabelGroup"})),this.datumSelection=Zk.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=Zk.select(this.itemLabelGroup,lZ),this.stageLabelSelection=Zk.select(this.stageLabelGroup,lZ),this.highlightDatumSelection=Zk.select(this.highlightGroup,()=>this.nodeFactory()),this.animationState=new DUe("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{clear:"empty",reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable()),this.itemLabelGroup.pointerEvents=cZ.None,this.stageLabelGroup.pointerEvents=cZ.None}addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>this.onLegendItemClick(e)))}nodeFactory(){return new qu}getNodeData(){return this.contextNodeData?.nodeData}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}async processData(e){if(this.data==null)return;const{id:t,visible:i,ctx:{legendManager:n}}=this,{stageKey:s,valueKey:o}=this.properties,r="category",a="number",l=(u,d,p)=>i&&n.getItemEnabled({seriesId:t,itemId:p}),c=this.visible?{}:{forceValue:0};await this.requestDataModel(e,this.data,{props:[rZ(s,r,{id:"xValue"}),rZ(o,a,{id:"yValue",...c,validation:l,invalidValue:0})]})}createNodeData(){const{id:e,dataModel:t,processedData:i,properties:n,visible:s,ctx:{legendManager:o}}=this,{stageKey:r,valueKey:a,direction:l,reverse:c=l==="horizontal",spacing:u,aspectRatio:d,label:p,stageLabel:f}=n;if(t==null||i==null)return;const m=l==="horizontal",v=t.resolveColumnById(this,"xValue",i),b=t.resolveColumnById(this,"yValue",i),C=t.getDomain(this,"xValue","value",i),x=t.getDomain(this,"yValue","value",i),w=ei(f);let M,T;m?(M="center",T=f.placement==="before"?"bottom":"top"):(M=f.placement==="after"?"left":"right",T="middle");const L=f.enabled?[]:void 0;let I=0,R=0,O=0;const _=i.dataSources.get(this.id)?.data??[];for(const[U,ee]of _.entries()){const ie=v[U],oe=b[U],ae=s&&o.getItemEnabled({seriesId:e,itemId:U});if(O+=oe,L==null)continue;const me=this.getLabelText(ie,ee,r,"x",C,this.properties.stageLabel,{datum:ee,value:oe,stageKey:r,valueKey:a}),{width:xe,height:be}=ft(me)?Da(me,p):w.measureLines(me);I=Math.max(I,xe),R=Math.max(R,be),L.push({x:Number.NaN,y:Number.NaN,text:me,textAlign:M,textBaseline:T,visible:ae})}const B=this._nodeDataDependencies?.seriesRectWidth??0,V=this._nodeDataDependencies?.seriesRectHeight??0,j=u*(i.input.count-1);let K;if(m){const U=R+f.spacing;K=new T2(0,f.placement==="before"?U:0,B,V-U)}else{const U=I+f.spacing;K=new T2(f.placement==="after"?0:U,0,B-U,V)}if(d!=null&&d!==0){const U=l==="horizontal"?1/d:d,ee=Math.min(K.width,K.height*U),ie=ee/U;K=new T2(K.x+(K.width-ee)/2,K.y+(K.height-ie)/2,ee,ie)}let Y,G;m?G=f.placement==="before"?K.y-f.spacing:K.y+K.height+f.spacing:Y=f.placement==="after"?K.x+K.width+f.spacing:K.x-f.spacing;const $=K.width-(m?j:0),W=K.height-(m?0:j);if($<0||W<0)return;const Q=[],q=[];let H=0;for(const[U,ee]of _.entries()){const ie=v[U],oe=b[U],ae=s&&o.getItemEnabled({seriesId:e,itemId:U}),me=H+oe,xe=(H+me)/(2*O),be=(me-H)/O,ge=m?$*xe+u*U:$*.5,Re=m?W*.5:W*xe+u*U,Ne=K.x+ge,Pe=K.y+Re;if(L!=null){const Oe=L[U];Oe.x=Y??Ne,Oe.y=G??Pe}let Be,Ue,Ae,Ve;if(m){const Oe=$*be;Be=Oe,Ae=Oe;const Ze=(ge+Oe/2)*(W/K.width),dt=(ge-Oe/2)*(W/K.width);Ue=c?K.height-Ze:Ze,Ve=c?K.height-dt:dt}else{const Oe=W*be;Ue=Oe,Ve=Oe;const Ze=(Re-Oe/2)*($/K.height),dt=(Re+Oe/2)*($/K.height);Be=c?K.width-Ze:Ze,Ae=c?K.width-dt:dt}const $e=this.getLabelText(oe,ee,a,"y",x,p,{datum:ee,value:oe,stageKey:r,valueKey:a}),Qe={x:Ne,y:Pe,text:$e,textAlign:"center",textBaseline:"middle",visible:ae};q.push(Qe),Q.push({series:this,itemId:a,datum:ee,datumIndex:U,index:U,xValue:ie,yValue:oe,x:Ne,y:Pe,top:Be,right:Ue,bottom:Ae,left:Ve,label:Qe,enabled:ae,midPoint:{x:Ne,y:Pe},style:this.getItemStyle({datumIndex:U,datum:ee},!1)}),H=me}return{itemId:e,nodeData:Q,labelData:q,stageLabelData:L,bounds:K}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update({seriesRect:e}){this.checkResize(e);const{datumSelection:t,labelSelection:i,stageLabelSelection:n,highlightDatumSelection:s}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let o=this.ctx.highlightManager?.getActiveHighlight();o!=null&&(o.series!==this||o.datum==null)&&(o=void 0);const r=this.contextNodeData?.nodeData??[],a=this.contextNodeData?.labelData??[],l=this.contextNodeData?.stageLabelData??[];this.datumSelection=this.updateDatumSelection({nodeData:r,datumSelection:t}),this.updateDatumStyles({datumSelection:t,isHighlight:!1}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:a,labelSelection:i}),this.updateLabelNodes({labelSelection:i,labelProperties:this.properties.label}),this.stageLabelSelection=this.updateStageLabelSelection({stageLabelData:l,stageLabelSelection:n}),this.updateLabelNodes({labelSelection:n,labelProperties:this.properties.stageLabel}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:o==null?[]:[o],datumSelection:s}),this.updateDatumStyles({datumSelection:s,isHighlight:!0}),this.updateDatumNodes({datumSelection:s,isHighlight:!0}),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData)}getItemStyle({datumIndex:e,datum:t},i){const{properties:n}=this,{itemStyler:s}=n,o=this.getHighlightStyle(i,e);let a=uZ(o,n.getStyle(e));if(s!=null&&e!=null){const l=this.cachedDatumCallback(MUe(e,i?"highlight":"node"),()=>{const c=this.makeItemStylerParams(t,e,i,a);return this.callWithContext(s,c)});l&&(a=uZ(l,a))}return a}makeItemStylerParams(e,t,i,n){const{id:s,properties:o}=this,{stageKey:r,valueKey:a}=o,l=this.ctx.highlightManager?.getActiveHighlight(),c=this.getHighlightStateString(l,i,t),u=this.filterItemStylerFillParams(n.fill)??n.fill;return{seriesId:s,datum:e,stageKey:r,valueKey:a,highlighted:i,highlightState:c,...n,fill:u}}updateDatumStyles({datumSelection:e,isHighlight:t}){e.each((i,n)=>{n.style=this.getItemStyle(n,t)})}updateDatumNodes({datumSelection:e}){const{properties:t}=this,{shadow:i}=t,n=this.contextNodeData?.bounds,s=n?{series:n,axis:n}:void 0;e.each((o,r)=>{AUe(o,r.style,s),Tae(o,r),o.fillShadow=i})}updateLabelSelection(e){return e.labelSelection.update(this.properties.label.enabled?e.labelData:[])}updateStageLabelSelection(e){return e.stageLabelSelection.update(e.stageLabelData)}updateLabelNodes(e){const t=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((i,n,s)=>{const{visible:o,x:r,y:a,text:l,textAlign:c,textBaseline:u}=n,d=IUe(this,void 0,this.properties,e.labelProperties,!1,t),{color:p,fontSize:f,fontStyle:m,fontWeight:v,fontFamily:b}=d;i.visible=o,i.x=r,i.y=a,i.text=l,i.fill=p,i.fillOpacity=this.getHighlightStyle(!1,s).opacity??1,i.fontStyle=m,i.fontWeight=v,i.fontSize=f,i.fontFamily=b,i.textAlign=c,i.textBaseline=u,i.setBoxing(d)})}computeFocusBounds(e){const t=this.getNodeData()?.[e.datumIndex];if(t!==void 0){for(const i of this.datumSelection)if(i.datum===t)return i.node}}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,properties:s}=this,{stageKey:o,valueKey:r,tooltip:a}=s;if(!i||!n)return;const l=n.dataSources.get(this.id)?.data[e],c=i.resolveColumnById(this,"xValue",n)[e],u=i.resolveColumnById(this,"yValue",n)[e];if(c==null)return;const d=this.getLabelText(c,l,o,"x",i.getDomain(this,"xValue","value",n),this.properties.stageLabel,{datum:l,value:c,stageKey:o,valueKey:r}),p=this.getLabelText(u,l,r,"y",i.getDomain(this,"yValue","value",n),this.properties.stageLabel,{datum:l,value:u,stageKey:o,valueKey:r}),f=this.getItemStyle({datumIndex:e,datum:l},!1);return this.formatTooltipWithContext(a,{symbol:this.legendItemSymbol(e),data:[{label:Gt(d),value:Gt(p)}]},{seriesId:t,datum:l,title:void 0,stageKey:o,valueKey:r,...f})}getSeriesDomain(){return[Number.NaN,Number.NaN]}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}pickNodeClosestDatum({x:e,y:t}){let i=1/0,n;return this.datumSelection.each((s,o)=>{const r=s.distanceSquared(e,t);r<i&&(i=r,n=o)}),n==null?void 0:{datum:n,distance:Math.sqrt(i)}}legendItemSymbol(e){const{fills:t,strokes:i,strokeWidth:n,fillOpacity:s,strokeOpacity:o,lineDash:r,lineDashOffset:a}=this.properties,l=t[e]??"black",c=i[e]??"black";return{marker:{fill:l,fillOpacity:s,stroke:c,strokeWidth:n,strokeOpacity:o,lineDash:r,lineDashOffset:a}}}getLegendData(e){const{processedData:t,dataModel:i,id:n,ctx:{legendManager:s},visible:o}=this;if(!i||!t||e!=="category")return[];const{showInLegend:r}=this.properties,a=[],l=i.resolveColumnById(this,"xValue",t),c=t.dataSources.get(this.id)?.data??[];for(const[u]of c.entries()){const d=l[u];a.push({legendType:"category",id:n,itemId:u,seriesId:n,enabled:o&&s.getItemEnabled({seriesId:n,itemId:u}),label:{text:d},symbol:this.legendItemSymbol(u),hideInLegend:!r})}return a}animateReset(){this.ctx.animationManager.skipCurrentBatch(),this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(){const{datumSelection:e,labelSelection:t,properties:i}=this,n=wUe(i.direction);kUe(this.id,"nodes",this.ctx.animationManager,[e],n),TUe(this,"labels",this.ctx.animationManager,t)}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}};z1.className="PyramidSeries";z1.type="pyramid";var{commonSeriesOptionsDefs:RUe,pyramidSeriesThemeableOptionsDef:EUe}=N,LUe={...EUe,...RUe,type:ue(ht("pyramid")),stageKey:ue(J),valueKey:ue(J)},{ThemeSymbols:{DEFAULT_SHADOW_COLOUR:PUe}}=N,NUe={series:{direction:"vertical",strokeWidth:{$isUserOption:["./strokes/0",2,0]},spacing:2,fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",N.FILL_GRADIENT_LINEAR_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"strokes"}]},label:{...N.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},stageLabel:{...N.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:12},shadow:{enabled:!1,color:PUe,xOffset:3,yOffset:3,blur:5},highlight:N.singleSeriesHighlightStyle()}},OUe={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"pyramid",moduleFactory:e=>new z1(e),solo:!0,themeTemplate:NUe},FUe={type:"series",name:"pyramid",chartType:"standalone",enterprise:!0,options:LUe,create:e=>new z1(e)},{ThemeConstants:{POLAR_AXIS_TYPE:BUe}}=N,Iae={series:{stroke:{$palette:"stroke"},label:{...N.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},marker:{enabled:!0,fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",N.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS]]},stroke:{$palette:"stroke"},fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:{$isUserOption:["./stroke",1,0]}},highlight:N.multiSeriesHighlightStyle(),tooltip:{range:{$path:["/tooltip/range","nearest"]}}},axes:{[BUe.ANGLE_CATEGORY]:{label:{spacing:10}}}},_Ue=N.mergeDefaults({series:{stroke:N.SAFE_STROKE_FILL_OPERATION,strokeWidth:2}},Iae),zUe=N.mergeDefaults({series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",N.FILL_GRADIENT_LINEAR_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS]]},fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},Iae),{Label:GUe,SeriesMarker:VUe,SeriesProperties:HUe,makeSeriesTooltip:WUe,Property:rr}=N,qs=class extends HUe{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new VUe,this.label=new GUe,this.tooltip=WUe(),this.connectMissingData=!1}};D([rr],qs.prototype,"angleKey");D([rr],qs.prototype,"radiusKey");D([rr],qs.prototype,"angleName");D([rr],qs.prototype,"radiusName");D([rr],qs.prototype,"legendItemName");D([rr],qs.prototype,"stroke");D([rr],qs.prototype,"strokeWidth");D([rr],qs.prototype,"strokeOpacity");D([rr],qs.prototype,"lineDash");D([rr],qs.prototype,"lineDashOffset");D([rr],qs.prototype,"rotation");D([rr],qs.prototype,"styler");D([rr],qs.prototype,"marker");D([rr],qs.prototype,"label");D([rr],qs.prototype,"tooltip");D([rr],qs.prototype,"connectMissingData");var{DEFAULT_POLAR_DIRECTION_KEYS:jUe,DEFAULT_POLAR_DIRECTION_NAMES:UUe,ChartAxisDirection:ol,PolarAxis:$Ue,SeriesNodePickMode:dZ,valueProperty:hZ,fixNumericExtent:KUe,seriesLabelFadeInAnimation:YUe,markerFadeInAnimation:XUe,resetMarkerFn:ZUe,animationValidation:qUe,computeMarkerFocusBounds:QUe,extent:JUe,BBox:e3e,Group:t3e,Path:i3e,Selection:R2,Text:n3e,Marker:s3e,updateLabelNode:o3e,getMarkerStyles:r3e,mergeDefaults:a3e}=N,l3e=class extends N.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey}},ej=class extends N.PolarSeries{constructor(e){super({moduleCtx:e,categoryKey:"angleValue",propertyKeys:jUe,propertyNames:UUe,pickModes:[dZ.NEAREST_NODE,dZ.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:ZUe},clipFocusBox:!1}),this.NodeEvent=l3e,this.lineGroup=this.contentGroup.appendChild(new t3e({name:"radar-line"})),this.lineSelection=R2.select(this.lineGroup,i3e),this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0},this.lineGroup.zIndex=0,this.itemGroup.zIndex=1}get hasData(){return this.getHasData("angleValue")}nodeFactory(){return new s3e}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===ol.Angle)return t.getDomain(this,"angleValue","value",i);{const n=t.getDomain(this,"radiusValue","value",i),s=JUe(n.length===0?n:[0].concat(n));return KUe(s)}}async processData(e){const{angleKey:t,radiusKey:i}=this.properties,n=[];this.ctx.animationManager.isSkipped()||n.push(qUe());const s=this.axes[ol.Radius]?.scale.type,o=this.axes[ol.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[hZ(t,o,{id:"angleValue"}),hZ(i,s,{id:"radiusValue",invalidValue:void 0}),...n]}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,n=this.circleCache;return e===n.r&&t===n.cx&&i===n.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}getAxisInnerRadius(){const e=this.axes[ol.Radius];return e instanceof $Ue?this.radius*e.innerRadiusRatio:0}maybeRefreshNodeData(){!this.didCircleChange()&&!this.nodeDataRefresh||(this.contextNodeData=this.createNodeData(),this.nodeData=this.contextNodeData?.nodeData??[],this.nodeDataRefresh=!1)}createNodeData(){const{processedData:e,dataModel:t}=this;if(!e||!t)return;const{angleKey:i,radiusKey:n,angleName:s,radiusName:o,legendItemName:r,marker:a,label:l}=this.properties,c=this.axes[ol.Angle]?.scale,u=this.axes[ol.Radius]?.scale;if(!c||!u)return;const d=t.resolveColumnById(this,"angleValue",e),p=t.resolveColumnById(this,"radiusValue",e),f=this.getAxisInnerRadius(),m=this.getSeriesDomain(ol.Radius),b=(e.dataSources.get(this.id)?.data??[]).map((C,x)=>{const w=d[x],M=p[x],T=c.convert(w),L=this.radius+f-u.convert(M),I=Math.cos(T),R=Math.sin(T),O=I*L,_=R*L;let B;if(l.enabled){const V=this.getLabelText(M,C,n,"radius",m,l,{value:M,datum:C,angleKey:i,radiusKey:n,angleName:s,radiusName:o,legendItemName:r});if(V){let j="right";Jt(I,0)?j="center":I>0&&(j="left");let K="bottom";Jt(R,0)?K="middle":R>0&&(K="top"),B={x:O+I*a.size,y:_+R*a.size,text:V,textAlign:j,textBaseline:K}}}return{series:this,datum:C,datumIndex:x,index:x,point:{x:O,y:_,size:a.size},midPoint:{x:O,y:_},label:B,angleValue:w,radiusValue:M,missing:!Kt(T)||!Kt(L)}});return{itemId:n,nodeData:b,labelData:b,styles:r3e(this,this.properties,a)}}update({seriesRect:e}){const t=this.checkResize(e),i=!this.ctx.animationManager.isSkipped(),{series:n}=this.ctx.highlightManager?.getActiveHighlight()??{};this.highlightGroup.visible=(i||this.visible)&&n===this,this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updateHighlightSelection(),this.updatePathNodes(),this.hasItemStylers()&&(this.updateDatumStyles(this.itemSelection,!1),this.updateDatumStyles(this.highlightSelection,!0)),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePathSelections(){const e=this.visible?[!0]:[];this.lineSelection.update(e)}updateMarkerSelection(){const{marker:e,styler:t}=this.properties;e.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=R2.select(this.itemGroup,()=>this.nodeFactory(),!1));const i=t==null?e.enabled:this.getStyle(!1).marker.enabled,n=this.visible&&e.shape&&i?this.nodeData:[];this.itemSelection.update(n)}updateHighlightSelection(){const{marker:e,styler:t}=this.properties;e.isDirty()&&(this.highlightSelection.clear(),this.highlightSelection.cleanup(),this.highlightSelection=R2.select(this.highlightGroup,()=>this.nodeFactory(),!1));const i=t==null?e.enabled:this.getStyle(!1).marker.enabled,n=this.ctx.highlightManager?.getActiveHighlight(),s=this.visible&&e.shape&&i&&n?.datum?[{...n}]:[];this.highlightSelection.update(s)}getMarkerFill(e){return e?.fill??this.getStyle(!1).marker.fill}getDatumStylerProperties(e){const{id:t,properties:i}=this,{angleKey:n,radiusKey:s}=i;return{seriesId:t,datum:e,angleKey:n,radiusKey:s}}updateDatumStyles(e,t){const i=this.ctx.highlightManager.getActiveHighlight();e.each((n,s)=>{const o=this.getHighlightState(i,t,s.datumIndex),r=this.getStyle(t,o),{stroke:a,strokeWidth:l,strokeOpacity:c}=r;s.style=this.getMarkerStyle(this.properties.marker,s,this.getDatumStylerProperties(s.datum),{isHighlight:t,highlightState:o},r.marker,{stroke:a,strokeWidth:l,strokeOpacity:c})})}updateMarkers(e,t){const i=this.getShapeFillBBox(),{contextNodeData:n}=this;if(!n)return;const s=this.ctx.highlightManager.getActiveHighlight();e.each((o,r)=>{const a=r.style??n.styles[this.getHighlightState(s,t,r.datumIndex)];this.applyMarkerStyle(a,o,r.point,i)})}updateLabels(){const{properties:e}=this,t=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.update(this.nodeData).each((i,n)=>{n.label&&(i.fillOpacity=this.getHighlightStyle(!1,n.datumIndex).opacity??1,o3e(this,i,e,e.label,n.label,!1,t))})}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:s,properties:o}=this,{angleKey:r,angleName:a,radiusKey:l,radiusName:c,legendItemName:u,tooltip:d,marker:p}=o,f=s[ol.Angle],m=s[ol.Radius];if(!i||!n||!f||!m)return;const v=n.dataSources.get(this.id)?.data[e],b=i.resolveColumnById(this,"angleValue",n)[e],C=i.resolveColumnById(this,"radiusValue",n)[e];if(b==null)return;const x=this.getMarkerStyle(p,{datum:v,datumIndex:e},this.getDatumStylerProperties(v),{isHighlight:!1});return this.formatTooltipWithContext(d,{heading:this.getAxisValueText(f,"tooltip",b,v,r,void 0),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(m,"tooltip",C,v,l,void 0)}]},{seriesId:t,datum:v,title:a,angleKey:r,radiusKey:l,angleName:a,radiusName:c,legendItemName:u,...x})}legendItemSymbol(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:n,marker:s}=this.getStyle(!1);return{marker:{shape:s.shape,enabled:s.enabled||t<=0,fill:this.getMarkerFill()??s.stroke??e??"rgba(0, 0, 0, 0)",stroke:s.stroke??e??"rgba(0, 0, 0, 0)",fillOpacity:s.fillOpacity,strokeOpacity:s.strokeOpacity,strokeWidth:s.strokeWidth,lineDash:s.lineDash,lineDashOffset:s.lineDashOffset},line:{stroke:e,strokeOpacity:i,strokeWidth:t,lineDash:n}}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:n}=this,{radiusKey:s,radiusName:o,legendItemName:r,showInLegend:a}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:n&&i.getItemEnabled({seriesId:t,itemId:s}),label:{text:r??o??s},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!a}]}pickNodeClosestDatum(e){const{nodeData:t,centerX:i,centerY:n}=this,{x:s,y:o}=e,r=this.radius;if(Math.hypot(s-i,o-n)>r+this.properties.marker.size)return;let l=1/0,c;for(const u of t){const{point:{x:d=Number.NaN,y:p=Number.NaN}={}}=u;if(Number.isNaN(d)||Number.isNaN(p))continue;const f=Math.hypot(e.x-d-i,e.y-p-n);f<l&&(l=f,c=u)}if(c){const u=Math.max(l-(c.point?.size??0),0);return{datum:c,distance:u}}}computeLabelsBBox(){const{label:e}=this.properties;this.maybeRefreshNodeData();const t=[],i=new n3e;for(const n of this.nodeData){if(!e.enabled||!n.label)continue;i.text=n.label.text,i.x=n.label.x,i.y=n.label.y,i.setFont(e),i.setAlign(n.label);const s=i.getBBox();t.push(s)}return t.length===0?null:e3e.merge(t)}getLineNode(){return this.lineSelection?.at(0)}beforePathAnimation(){this.updatePathNodes()}getPathNodesStyle(){const e=this.ctx.highlightManager?.getActiveHighlight(),t=this.getHighlightState(e),i=this.getHighlightStyle(void 0,void 0,t),n=this.getStyle(!1,t);return a3e(i,n)}getLinePoints(){const{nodeData:e,resetInvalidToZero:t}=this,{connectMissingData:i}=this.properties;if(e.length===0)return[];const n=this.axes[ol.Radius],o=this.axes[ol.Angle]?.isReversed(),a=n?.isReversed()&&!o?[...e].reverse():e,l=[];let c=!1,u;for(const[d,p]of a.entries()){let{x:f,y:m}=p.point;const v=Number.isNaN(f)||Number.isNaN(m);v||(u??(u=p)),v&&!i&&(f=0,m=0);const b=d===0||!t&&!i&&(v||c);l.push({x:f,y:m,moveTo:b}),c=v}return u!==void 0&&l.push({x:u.point.x,y:u.point.y,moveTo:!1}),l}animateSinglePath(e,t,i){const{path:n}=e;n.clear(!0);const s=this.getAxisInnerRadius(),o=this.axes[ol.Radius],a=o?.isReversed()?this.radius+s-o?.scale.convert(0):s;for(const l of t){const{x:c,y:u,arc:d,radius:p=0,startAngle:f=0,endAngle:m=0,moveTo:v}=l,b=Math.atan2(u,c),C=a*Math.cos(b),x=a*Math.sin(b),w=i,M=C*(1-w)+c*w,T=x*(1-w)+u*w;d?n.arc(c,u,p,f,m):v?n.moveTo(M,T):n.lineTo(M,T)}e.checkPathDirty()}animatePaths(e){const t=this.getLinePoints(),i=this.getLineNode();i&&this.animateSinglePath(i,t,e)}animateEmptyUpdateReady(){const{itemSelection:e,labelSelection:t}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:n=>this.animatePaths(n),onStop:()=>this.animatePaths(1)}),XUe(this,i,"added",e),YUe(this,"labels",i,t)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e),this.resetPaths()}animateReadyResize(e){super.animateReadyResize(e),this.resetPaths()}resetPaths(){const e=this.getLineNode();if(e){const{path:t}=e,i=this.getLinePoints(),n=this.getStyle(!1);e.fill=void 0,e.stroke=n.stroke,e.strokeWidth=n.strokeWidth,e.strokeOpacity=n.strokeOpacity,e.lineDash=n.lineDash,e.lineDashOffset=n.lineDashOffset,t.clear(!0);for(const{x:s,y:o,moveTo:r}of i)r?t.moveTo(s,o):t.lineTo(s,o);return e.checkPathDirty(),n}}getStylerResult(e,t,i){const{styler:n}=this.properties;if(n){const s=this.makeStylerParams(t,i),o=this.cachedCallWithContext(n,s)??{},r=this.ctx.optionsGraphService.resolvePartial(["series",`${this.declarationOrder}`],o,{pick:!1});r&&(e=r)}return e}getFormattedMarkerStyle(e){const{angleKey:t,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,e,{angleKey:t,radiusKey:i},{isHighlight:!0})}computeFocusBounds(e){return QUe(this,e)}hasItemStylers(){return this.properties.styler!=null||this.properties.marker.itemStyler!=null||this.properties.label.itemStyler!=null}};ej.className="RadarSeries";var{Property:Rae}=N,tj=class extends qs{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};D([Rae],tj.prototype,"fill");D([Rae],tj.prototype,"fillOpacity");var{ChartAxisDirection:pZ,Group:c3e,HighlightState:u3e,Path:d3e,PointerEvents:gZ,Selection:h3e,applyShapeStyle:fZ,toHighlightString:p3e}=N,G1=class extends ej{constructor(e){super(e),this.properties=new tj,this.areaGroup=this.contentGroup.appendChild(new c3e({name:"radar-area"})),this.areaSelection=h3e.select(this.areaGroup,d3e),this.resetInvalidToZero=!0,this.areaGroup.zIndex=-1}updatePathSelections(){const e=this.visible?[!0]:[];this.areaSelection.update(e),super.updatePathSelections()}getAreaNode(){return this.areaSelection.at(0)}getMarkerFill(e){if(e?.fill!=null)return e.fill;const t=this.getStyle(!1);return t.marker.fill??t.fill}updatePathNodes(){const e=this.getPathNodesStyle(),{fill:t,fillOpacity:i,strokeWidth:n,stroke:s,strokeOpacity:o,lineDash:r,lineDashOffset:a,opacity:l}=e,c=this.getLineNode();c&&c.setProperties({fill:void 0,lineJoin:"round",lineCap:"round",pointerEvents:gZ.None,opacity:l,stroke:s,strokeWidth:n,strokeOpacity:o,lineDash:r,lineDashOffset:a});const u=this.getAreaNode();u&&(fZ(u,{fill:t,fillOpacity:i,stroke:void 0},this.getShapeFillBBox()),u.setProperties({lineJoin:"round",pointerEvents:gZ.None,opacity:l}))}animatePaths(e){super.animatePaths(e);const t=this.getAreaNode();t&&this.animateSinglePath(t,this.getAreaPoints(),e)}getAreaPoints(){const e=this.getLinePoints(),t=r=>{const a=this.axes[r];return a instanceof N.PolarAxis?a:void 0},i=t(pZ.Radius),n=t(pZ.Angle);if(!i?.isReversed())return e;const o=n?.getAxisLinePoints()?.points??[];return e.concat(...o)}resetPaths(){const e=super.resetPaths(),t=this.getAreaNode();if(t){const{path:i}=t,n=this.getAreaPoints(),s=e??this.getStyle(!1),o=this.getShapeFillBBox();fZ(t,{fill:s.fill,stroke:void 0,fillOpacity:s.fillOpacity,lineDash:s.lineDash,lineDashOffset:s.lineDashOffset},o),t.lineJoin=t.lineCap="round",i.clear(!0);for(const{x:r,y:a,moveTo:l,arc:c,radius:u=0,startAngle:d=0,endAngle:p=0}of n)c?i.arc(r,a,u,d,p):l?i.moveTo(r,a):i.lineTo(r,a);return i.closePath(),t.checkPathDirty(),s}}makeStylerParams(e,t){const{properties:i}=this,n=p3e(t??u3e.None);return{marker:{fill:i.marker.fill,fillOpacity:i.marker.fillOpacity,size:i.marker.size,shape:i.marker.shape,stroke:i.marker.stroke,strokeOpacity:i.marker.strokeOpacity,strokeWidth:i.marker.strokeWidth,lineDash:i.marker.lineDash,lineDashOffset:i.marker.lineDashOffset},highlightState:n,highlighted:e,fill:i.fill,fillOpacity:i.fillOpacity,lineDash:i.lineDash,lineDashOffset:i.lineDashOffset,seriesId:this.id,stroke:i.stroke,strokeOpacity:i.strokeOpacity,strokeWidth:i.strokeWidth,angleKey:i.angleKey,radiusKey:i.radiusKey}}getStyle(e,t){const{marker:i,fill:n,fillOpacity:s,lineDash:o,lineDashOffset:r,stroke:a,strokeOpacity:l,strokeWidth:c}=this.properties,{size:u,shape:d,fill:p="transparent",fillOpacity:f}=i,m=this.getStylerResult({},e,t);return m.marker??(m.marker={}),{fill:m.fill??n,fillOpacity:m.fillOpacity??s,lineDash:m.lineDash??o,lineDashOffset:m.lineDashOffset??r,stroke:m.stroke??a,strokeOpacity:m.strokeOpacity??l,strokeWidth:m.strokeWidth??c,marker:{enabled:m.marker.enabled??i.enabled,fill:m.marker.fill??p,fillOpacity:m.marker.fillOpacity??f,shape:m.marker.shape??d,size:m.marker.size??u,lineDash:m.marker.lineDash??i.lineDash??o,lineDashOffset:m.marker.lineDashOffset??i.lineDashOffset??r,stroke:m.marker.stroke??i.stroke??a,strokeOpacity:m.marker.strokeOpacity??i.strokeOpacity??l,strokeWidth:m.marker.strokeWidth??i.strokeWidth??c}}}};G1.className="RadarAreaSeries";G1.type="radar-area";var{commonSeriesOptionsDefs:g3e,radarAreaSeriesThemeableOptionsDef:f3e}=N,m3e={...g3e,...f3e,type:ue(ht("radar-area")),angleKey:ue(J),radiusKey:ue(J),angleName:J,radiusName:J,legendItemName:J},{ThemeConstants:{POLAR_AXIS_TYPE:mZ}}=N,y3e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",moduleFactory:e=>new G1(e),defaultAxes:[{type:mZ.ANGLE_CATEGORY},{type:mZ.RADIUS_NUMBER}],themeTemplate:zUe},v3e={type:"series",name:"radar-area",chartType:"polar",enterprise:!0,options:m3e,create:e=>new G1(e)},{HighlightState:b3e,PointerEvents:S3e,toHighlightString:C3e}=N,V1=class extends ej{constructor(){super(...arguments),this.properties=new qs}updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}updatePathNodes(){const e=this.getLineNode();if(!e)return;const t=this.getPathNodesStyle(),{strokeWidth:i,stroke:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,opacity:a}=t;e.setProperties({fill:void 0,lineJoin:"round",lineCap:"round",pointerEvents:S3e.None,opacity:a,stroke:n,strokeWidth:i,strokeOpacity:s,lineDash:o,lineDashOffset:r})}makeStylerParams(e,t){const{properties:i}=this,n=C3e(t??b3e.None);return{marker:{fill:i.marker.fill,fillOpacity:i.marker.fillOpacity,size:i.marker.size,shape:i.marker.shape,stroke:i.marker.stroke,strokeOpacity:i.marker.strokeOpacity,strokeWidth:i.marker.strokeWidth,lineDash:i.marker.lineDash,lineDashOffset:i.marker.lineDashOffset},highlightState:n,highlighted:e,lineDash:i.lineDash,lineDashOffset:i.lineDashOffset,seriesId:this.id,stroke:i.stroke,strokeOpacity:i.strokeOpacity,strokeWidth:i.strokeWidth,angleKey:i.angleKey,radiusKey:i.radiusKey}}getStyle(e,t){const{marker:i,lineDash:n,lineDashOffset:s,stroke:o,strokeOpacity:r,strokeWidth:a}=this.properties,{size:l,shape:c,fill:u="transparent",fillOpacity:d}=i,p=this.getStylerResult({},e,t);return p.marker??(p.marker={}),{lineDash:p.lineDash??n,lineDashOffset:p.lineDashOffset??s,stroke:p.stroke??o,strokeOpacity:p.strokeOpacity??r,strokeWidth:p.strokeWidth??a,marker:{enabled:p.marker.enabled??i.enabled,fill:p.marker.fill??u,fillOpacity:p.marker.fillOpacity??d,shape:p.marker.shape??c,size:p.marker.size??l,lineDash:p.marker.lineDash??i.lineDash??n,lineDashOffset:p.marker.lineDashOffset??i.lineDashOffset??s,stroke:p.marker.stroke??i.stroke??o,strokeOpacity:p.marker.strokeOpacity??i.strokeOpacity??r,strokeWidth:p.marker.strokeWidth??i.strokeWidth??a}}}};V1.className="RadarLineSeries";V1.type="radar-line";var{commonSeriesOptionsDefs:x3e,radarLineSeriesThemeableOptionsDef:w3e}=N,D3e={...x3e,...w3e,type:ue(ht("radar-line")),angleKey:ue(J),radiusKey:ue(J),angleName:J,radiusName:J,legendItemName:J},{POLAR_AXIS_TYPE:yZ}=N.ThemeConstants,M3e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",moduleFactory:e=>new V1(e),defaultAxes:[{type:yZ.ANGLE_CATEGORY},{type:yZ.RADIUS_NUMBER}],themeTemplate:_Ue},A3e={type:"series",name:"radar-line",chartType:"polar",enterprise:!0,options:D3e,create:e=>new V1(e)},{SeriesProperties:k3e,makeSeriesTooltip:T3e,Property:Ds,Label:I3e}=N,os=class extends k3e{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new I3e,this.tooltip=T3e()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,cornerRadius:a}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r,cornerRadius:a,opacity:1}}};D([Ds],os.prototype,"angleKey");D([Ds],os.prototype,"radiusKey");D([Ds],os.prototype,"angleName");D([Ds],os.prototype,"radiusName");D([Ds],os.prototype,"legendItemName");D([Ds],os.prototype,"fill");D([Ds],os.prototype,"fillOpacity");D([Ds],os.prototype,"stroke");D([Ds],os.prototype,"strokeWidth");D([Ds],os.prototype,"strokeOpacity");D([Ds],os.prototype,"lineDash");D([Ds],os.prototype,"lineDashOffset");D([Ds],os.prototype,"cornerRadius");D([Ds],os.prototype,"styler");D([Ds],os.prototype,"itemStyler");D([Ds],os.prototype,"rotation");D([Ds],os.prototype,"stackGroup");D([Ds],os.prototype,"normalizedTo");D([Ds],os.prototype,"label");D([Ds],os.prototype,"tooltip");var{SectorBox:vZ,motion:R3e}=N;function E3e(e,t,i){if(i==="updated"){if(e.previousDatum==null||Number.isNaN(e.previousDatum.innerRadius)||Number.isNaN(e.previousDatum.outerRadius))return"added";if(Number.isNaN(t.innerRadius)||Number.isNaN(t.outerRadius))return"removed"}return i==="added"&&e.previousDatum!=null?"updated":i}function bZ(e){return{toFn:(n,s,o)=>{let r,a,l,c,u;return o==="removed"?(r=e,a=e,l=s.innerRadius,c=s.outerRadius,u=new vZ(r,a,l,c)):(r=s.startAngle,a=s.endAngle,l=Number.isNaN(s.innerRadius)?n.innerRadius:s.innerRadius,c=Number.isNaN(s.outerRadius)?n.outerRadius:s.outerRadius,u=s.clipSector),{startAngle:r,endAngle:a,innerRadius:l,outerRadius:c,clipSector:u}},fromFn:(n,s,o)=>{o=E3e(n,s,o);let r,a,l,c,u;o==="removed"||o==="updated"?(r=n.startAngle,a=n.endAngle,l=n.innerRadius,c=n.outerRadius,u=n.clipSector):(r=e,a=e,l=s.innerRadius,c=s.outerRadius),u??(u=new vZ(r,a,l,c));const d=R3e.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o];return{startAngle:r,endAngle:a,innerRadius:l,outerRadius:c,clipSector:u,phase:d}}}}function L3e(e,t){return{centerX:0,centerY:0,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle,clipSector:t.clipSector}}var{DEFAULT_POLAR_DIRECTION_KEYS:P3e,DEFAULT_POLAR_DIRECTION_NAMES:N3e,ChartAxisDirection:Jc,PolarAxis:O3e,diff:F3e,groupAccumulativeValueProperty:SZ,keyProperty:B3e,normaliseGroupTo:_3e,valueProperty:z3e,fixNumericExtent:G3e,resetLabelFn:V3e,seriesLabelFadeInAnimation:H3e,seriesLabelFadeOutAnimation:W3e,animationValidation:j3e,angleBetween:U3e,createDatumId:$3e,CategoryScale:K3e,Sector:Y3e,SectorBox:X3e,motion:CZ,isGradientFill:Z3e,applyShapeStyle:q3e,updateLabelNode:Q3e,getItemStyles:J3e}=N,e$e=class extends N.SeriesNodeEvent{constructor(e,t,i,n){super(e,t,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey}},H1=class extends N.PolarSeries{constructor(e){super({moduleCtx:e,categoryKey:"radiusValue",propertyKeys:P3e,propertyNames:N3e,canHaveAxes:!0,animationResetFns:{item:L3e,label:V3e}}),this.properties=new os,this.NodeEvent=e$e,this.groupScale=new K3e,this.circleCache={r:0,cx:0,cy:0}}get hasData(){return this.getHasData("angleValue-raw")}nodeFactory(){return new Y3e}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Jc.Angle){const n=t.getDomain(this,"angleValue-end","value",i),s=[Math.min(n[0],0),Math.max(n[1],0)];return G3e(s)}else return t.getDomain(this,"radiusValue","key",i)}async processData(e){const{angleKey:t,radiusKey:i,normalizedTo:n}=this.properties,s=!this.ctx.animationManager.isSkipped(),o=this.getStackId(),r=`${o}-trailing`,a=[];In(n)&&a.push(_3e([o,r],Math.abs(n))),s&&(this.processedData&&a.push(F3e(this.id,this.processedData)),a.push(j3e()));const l=this.visible?{}:{forceValue:0},c=this.axes[Jc.Radius]?.scale.type,u=this.axes[Jc.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[B3e(i,c,{id:"radiusValue"}),z3e(t,u,{id:"angleValue-raw",invalidValue:null,...l}),...SZ(t,"normal",{id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:o,separateNegative:!0,...l},u),...SZ(t,"trailing",{id:"angleValue-start",invalidValue:null,groupId:r,separateNegative:!0,...l},u),...a],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,n=this.circleCache;return e===n.r&&t===n.cx&&i===n.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}maybeRefreshNodeData(){!this.didCircleChange()&&!this.nodeDataRefresh||(this.contextNodeData=this.createNodeData(),this.nodeData=this.contextNodeData?.nodeData??[],this.nodeDataRefresh=!1)}getAxisInnerRadius(){const e=this.axes[Jc.Radius];return e instanceof O3e?this.radius*e.innerRadiusRatio:0}createNodeData(){const{processedData:e,dataModel:t}=this;if(!t||!e||e.type!=="grouped")return;const i=this.axes[Jc.Angle],n=this.axes[Jc.Radius],s=i?.scale,o=n?.scale;if(!s||!o)return;const r=t.resolveKeysById(this,"radiusValue",e),a=t.resolveColumnById(this,"angleValue-start",e),l=t.resolveColumnById(this,"angleValue-end",e),c=t.resolveColumnById(this,"angleValue-raw",e),u=t.resolveProcessedDataIndexById(this,"angleValue-range");let d=0;n instanceof Pg&&(d=n.groupPaddingInner);const{groupScale:p}=this,{index:f,visibleGroupCount:m}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);p.domain=Array.from({length:m}).map((W,Q)=>String(Q)),p.range=[0,Math.abs(o.bandwidth??0)],p.paddingInner=m>1?d:0;const v=p.bandwidth>=1?p.bandwidth:p.rawBandwidth,b=i.isReversed(),C=n.isReversed(),x=C?this.radius:this.getAxisInnerRadius(),M=(C?this.getAxisInnerRadius():this.radius)+x,T=this.getSeriesDomain(Jc.Angle),{angleKey:L,radiusKey:I,angleName:R,radiusName:O,legendItemName:_,label:B}=this.properties,V=(W,Q,q,H)=>{const U=this.getLabelText(Q,W,L,"angle",T,B,{value:Q,datum:W,angleKey:L,radiusKey:I,angleName:R,radiusName:O,legendItemName:_});if(U)return{x:q,y:H,text:U,textAlign:"center",textBaseline:"middle"}},j=[],K=J3e((W,Q,q)=>Ab(this,W,Q,q)),Y={itemId:I,nodeData:j,labelData:j,styles:K};if(!this.visible)return Y;const{dataSources:G}=e,$=G.get(this.id)?.data??[];for(const{datumIndex:W,group:Q}of t.forEachGroupDatum(this,e)){const q=$[W],H=r[W];if(H==null)return;const U=c[W],ee=a[W],ie=l[W],oe=U>=0&&!Object.is(U,-0),ae=Q.aggregation[u][oe?1:0],me=oe===b;let xe=s.convert(ee,{clamp:!0}),be=s.convert(ie,{clamp:!0}),ge=s.convert(0,{clamp:!0}),Re=s.convert(ae,{clamp:!0});me&&([ge,Re]=[Re,ge],[xe,be]=[be,xe]);const Pe=M-o.convert(H)+p.convert(String(f)),Be=Pe+v,Ue=(Pe+Be)/2,Ae=xe+U3e(xe,be)/2,Ve=Math.cos(Ae)*Ue,$e=Math.sin(Ae)*Ue,Qe=this.properties.label.enabled?V(q,U,Ve,$e):void 0,Oe=new X3e(xe,be,Pe,Be);j.push({series:this,datum:q,datumIndex:W,point:{x:Ve,y:$e,size:0},midPoint:{x:Ve,y:$e},label:Qe,angleValue:U,radiusValue:H,innerRadius:Pe,outerRadius:Be,startAngle:ge,endAngle:Re,clipSector:Oe,reversed:me,index:W})}return Y}update({seriesRect:e}){const t=this.checkResize(e);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}updateSectorSelection(e,t){let i=[];const n=this.ctx.highlightManager?.getActiveHighlight();t?n?.datum&&n.series===this&&i.push(n):i=this.nodeData;const{contextNodeData:s}=this;if(!s)return;const o=this.ctx.highlightManager.getActiveHighlight(),r=this.getShapeFillBBox(),a=this.hasItemStylers();e.update(i,void 0,l=>this.getDatumId(l)).each((l,c)=>{const u=v0(c);if(u==null)return;if(a){const v=this.getHighlightState(n,t,c.datumIndex);c.style=Ab(this,c,t,v)}const d=c.style??s.styles[this.getHighlightState(o,t,c.datumIndex)],p=d.cornerRadius,f=d.fill,m=N.isGradientFill(f)&&f.bounds!=="item"?{centerX:0,centerY:0}:void 0;q3e(l,d,r,m),l.lineJoin="round",l.inset=l.stroke==null?0:l.strokeWidth/2,l.startInnerCornerRadius=u.reversed?p:0,l.startOuterCornerRadius=u.reversed?p:0,l.endInnerCornerRadius=u.reversed?0:p,l.endOuterCornerRadius=u.reversed?0:p,t&&(l.startAngle=c.startAngle,l.endAngle=c.endAngle,l.clipSector=c.clipSector,l.innerRadius=c.innerRadius,l.outerRadius=c.outerRadius)})}updateLabels(){const{properties:e}=this,t=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.update(this.nodeData).each((i,n)=>{Q3e(this,i,e,e.label,n.label,!1,t),i.fillOpacity=this.getHighlightStyle(!1,n.datumIndex).opacity??1})}getBarTransitionFunctions(){const e=this.axes[Jc.Angle]?.scale;let t=0;if(!e)return bZ(t);const i=Math.min(e.domain[0],e.domain[1]),n=Math.max(e.domain[0],e.domain[1]);return i<=0&&n>=0&&(t=e.convert(0)),bZ(t)}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getBarTransitionFunctions();CZ.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),H3e(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getBarTransitionFunctions();CZ.fromToMotion(this.id,"datums",t,[e],i),W3e(this,"labels",t,this.labelSelection)}getTooltipContent(e){const{id:t,dataModel:i,processedData:n,axes:s,properties:o}=this,{angleKey:r,angleName:a,radiusKey:l,radiusName:c,legendItemName:u,tooltip:d}=o,p=s[Jc.Angle],f=s[Jc.Radius],m=this.nodeData?.[e];if(!i||!n||!p||!f||!m)return;const v=n.dataSources.get(this.id)?.data[e],b=i.resolveKeysById(this,"radiusValue",n)[e],C=i.resolveColumnById(this,"angleValue-raw",n)[e];if(b==null)return;const x=Ab(this,m,!1);return this.formatTooltipWithContext(d,{heading:this.getAxisValueText(f,"tooltip",b,v,l,void 0),symbol:this.legendItemSymbol(),data:[{label:a,fallbackLabel:r,value:this.getAxisValueText(p,"tooltip",C,v,r,void 0)}]},{seriesId:t,datum:v,title:a,angleKey:r,angleName:a,radiusKey:l,radiusName:c,legendItemName:u,...x})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:n,strokeWidth:s,lineDash:o,lineDashOffset:r}=qW(this,!1,!1,N.HighlightState.None),a={fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:n,strokeWidth:s,lineDash:o,lineDashOffset:r};return Z3e(a.fill)&&(a.fill={...a.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:a}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{angleKey:n,angleName:s,legendItemName:o,showInLegend:r}=this.properties;return[{legendType:"category",id:t,itemId:n,seriesId:t,enabled:i,label:{text:o??s??n},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!r}]}getDatumId(e){return $3e(e.radiusValue)}computeLabelsBBox(){return null}getStackId(){return`radialBar-stack-${this.seriesGrouping?.groupIndex??this.id}-xValues`}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.styler!=null||this.properties.label.itemStyler!=null}};H1.className="RadialBarSeries";H1.type="radial-bar";var{commonSeriesOptionsDefs:t$e,radialBarSeriesThemeableOptionsDef:i$e}=N,n$e={...t$e,...i$e,type:ue(ht("radial-bar")),angleKey:ue(J),radiusKey:ue(J),angleName:J,radiusName:J,legendItemName:J,grouped:te,stacked:te,stackGroup:J,normalizedTo:ve},{ThemeConstants:{POLAR_AXIS_TYPE:s$e},FILL_GRADIENT_CONIC_SERIES_DEFAULTS:o$e,FILL_IMAGE_DEFAULTS:r$e,FILL_PATTERN_DEFAULTS:a$e}=N,l$e={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",o$e],["image",r$e],["pattern",a$e]]},stroke:{$palette:"stroke"},strokeWidth:{$isUserOption:["./stroke",1,0]},label:{...N.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},highlight:N.multiSeriesHighlightStyle()},axes:{[s$e.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},{POLAR_AXIS_TYPE:xZ}=N.ThemeConstants,c$e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",moduleFactory:e=>new H1(e),defaultAxes:[{type:xZ.ANGLE_NUMBER},{type:xZ.RADIUS_CATEGORY}],themeTemplate:l$e,stackable:!0,groupable:!0},u$e={type:"series",name:"radial-bar",chartType:"polar",enterprise:!0,options:n$e,create:e=>new H1(e)},{Property:Eae}=N,ij=class extends Wn{};D([Eae],ij.prototype,"columnWidthRatio");D([Eae],ij.prototype,"maxColumnWidthRatio");var{ChartAxisDirection:d$e,PolarAxis:h$e,RadialColumnShape:p$e,getRadialColumnWidth:g$e}=N,W1=class extends Dae{constructor(e){super(e,{animationResetFns:{item:sUe}}),this.properties=new ij}getStackId(){return`radarColumn-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new p$e}getColumnTransitionFunctions(){const e=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return nUe(e)}isRadiusAxisCircle(){const e=this.axes[d$e.Radius];return e instanceof h$e?e.shape==="circle":!1}updateItemPath(e,t,i){e.isBeveled=this.isRadiusAxisCircle(),e.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.columnWidth=t.columnWidth,e.axisInnerRadius=t.axisInnerRadius,e.axisOuterRadius=t.axisOuterRadius)}getColumnWidth(e,t){const{columnWidthRatio:i=.5,maxColumnWidthRatio:n=.5}=this.properties;return g$e(e,t,this.radius,i,n)}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.styler!=null||this.properties.label.itemStyler!=null}};W1.className="RadialColumnSeries";W1.type="radial-column";var{commonSeriesOptionsDefs:f$e,radialColumnSeriesThemeableOptionsDef:m$e}=N,y$e={...f$e,...m$e,type:ue(ht("radial-column")),angleKey:ue(J),radiusKey:ue(J),angleName:J,radiusName:J,legendItemName:J,grouped:te,stacked:te,stackGroup:J,normalizedTo:ve},{ThemeConstants:{POLAR_AXIS_TYPE:wZ,POLAR_AXIS_SHAPE:DZ},FILL_GRADIENT_RADIAL_SERIES_DEFAULTS:v$e,FILL_IMAGE_DEFAULTS:b$e,FILL_PATTERN_DEFAULTS:S$e}=N,C$e={series:{fill:{$applySwitch:[{$path:"type"},{$palette:"fill"},["gradient",v$e],["image",b$e],["pattern",S$e]]},stroke:{$palette:"stroke"},columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:{$isUserOption:["./stroke",1,0]},label:{...N.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:N.multiSeriesHighlightStyle()},axes:{[wZ.ANGLE_CATEGORY]:{shape:{$findFirstSiblingNotOperation:DZ.CIRCLE},groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[wZ.RADIUS_NUMBER]:{shape:{$findFirstSiblingNotOperation:DZ.CIRCLE},innerRadiusRatio:.5}}},{POLAR_AXIS_TYPE:MZ}=N.ThemeConstants,x$e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",moduleFactory:e=>new W1(e),defaultAxes:[{type:MZ.ANGLE_CATEGORY},{type:MZ.RADIUS_NUMBER}],themeTemplate:C$e,stackable:!0,groupable:!0},w$e={type:"series",name:"radial-column",chartType:"polar",enterprise:!0,options:y$e,create:e=>new W1(e)},{SvgPath:D$e,Rotatable:M$e,Translatable:A$e,Scalable:k$e}=N,tz=class extends M$e(k$e(A$e(D$e))){constructor(){super(...arguments),this.scalingCenterX=.5,this.scalingCenterY=.5,this.rotationCenterX=.5,this.rotationCenterY=.5}};tz.defaultPathData="M0.50245 0.53745C0.481767 0.53745 0.465 0.520683 0.465 0.5C0.465 0.479317 0.481767 0.46255 0.50245 0.46255L1 0.500012L0.50245 0.53745Z";var{getColorStops:T$e,normalizeAngle360:I$e,normalizeAngle360Inclusive:R$e,toDegrees:E$e}=N,{BaseProperties:rM,makeSeriesTooltip:L$e,SeriesProperties:P$e,PropertiesArray:nj,AxisLabel:N$e,Property:Ye,Label:O$e}=N,Lae=class extends O$e{};D([Ye],Lae.prototype,"spacing");var Ao=class extends rM{constructor(){super(...arguments),this.label=new Lae}getStyle(){const{fill:e="black",fillOpacity:t=1,stroke:i="black",strokeWidth:n=0,strokeOpacity:s=1,lineDash:o=[0],lineDashOffset:r=0}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s,lineDash:o,lineDashOffset:r}}};D([Ye],Ao.prototype,"text");D([Ye],Ao.prototype,"value");D([Ye],Ao.prototype,"shape");D([Ye],Ao.prototype,"placement");D([Ye],Ao.prototype,"spacing");D([Ye],Ao.prototype,"size");D([Ye],Ao.prototype,"rotation");D([Ye],Ao.prototype,"fill");D([Ye],Ao.prototype,"fillOpacity");D([Ye],Ao.prototype,"stroke");D([Ye],Ao.prototype,"strokeWidth");D([Ye],Ao.prototype,"strokeOpacity");D([Ye],Ao.prototype,"lineDash");D([Ye],Ao.prototype,"lineDashOffset");D([Ye],Ao.prototype,"label");var Nc=class extends rM{constructor(){super(...arguments),this.enabled=!0,this.fills=new nj(N.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(e,t){const{enabled:i,fill:n,fills:s,fillMode:o,fillOpacity:r,stroke:a,strokeWidth:l,strokeOpacity:c,lineDash:u,lineDashOffset:d}=this;return{fill:i?n??Oae(s,o,e,t):"none",fillOpacity:r,stroke:a,strokeWidth:l,strokeOpacity:c,lineDash:u,lineDashOffset:d}}};D([Ye],Nc.prototype,"enabled");D([Ye],Nc.prototype,"fills");D([Ye],Nc.prototype,"fillMode");D([Ye],Nc.prototype,"fill");D([Ye],Nc.prototype,"fillOpacity");D([Ye],Nc.prototype,"stroke");D([Ye],Nc.prototype,"strokeWidth");D([Ye],Nc.prototype,"strokeOpacity");D([Ye],Nc.prototype,"lineDash");D([Ye],Nc.prototype,"lineDashOffset");var aM=class extends rM{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};D([Ye],aM.prototype,"values");D([Ye],aM.prototype,"step");D([Ye],aM.prototype,"minSpacing");D([Ye],aM.prototype,"maxSpacing");var F$e=class extends N$e{},Dr=class extends rM{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new nj(N.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new aM,this.label=new F$e}getStyle(e,t,i){const{fill:n,fills:s,defaultFill:o,fillMode:r,fillOpacity:a,stroke:l,strokeWidth:c,strokeOpacity:u,lineDash:d,lineDashOffset:p}=this;return{fill:n??(e&&s.length===0?o:void 0)??Oae(s,r,t,i),fillOpacity:a,stroke:l,strokeWidth:c,strokeOpacity:u,lineDash:d,lineDashOffset:p}}};D([Ye],Dr.prototype,"min");D([Ye],Dr.prototype,"max");D([Ye],Dr.prototype,"fills");D([Ye],Dr.prototype,"fillMode");D([Ye],Dr.prototype,"fill");D([Ye],Dr.prototype,"fillOpacity");D([Ye],Dr.prototype,"stroke");D([Ye],Dr.prototype,"strokeWidth");D([Ye],Dr.prototype,"strokeOpacity");D([Ye],Dr.prototype,"lineDash");D([Ye],Dr.prototype,"lineDashOffset");D([Ye],Dr.prototype,"defaultFill");D([Ye],Dr.prototype,"interval");D([Ye],Dr.prototype,"label");var Oc=class extends rM{constructor(){super(...arguments),this.enabled=!0,this.spacing=0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};D([Ye],Oc.prototype,"enabled");D([Ye],Oc.prototype,"radiusRatio");D([Ye],Oc.prototype,"spacing");D([Ye],Oc.prototype,"fill");D([Ye],Oc.prototype,"fillOpacity");D([Ye],Oc.prototype,"stroke");D([Ye],Oc.prototype,"strokeWidth");D([Ye],Oc.prototype,"strokeOpacity");D([Ye],Oc.prototype,"lineDash");D([Ye],Oc.prototype,"lineDashOffset");var Pae=class extends Fu{};D([Ye],Pae.prototype,"text");var Nae=class extends eM{};D([Ye],Nae.prototype,"text");var rs=class extends P$e{constructor(){super(...arguments),this.startAngle=0,this.endAngle=0,this.segmentation=new iM,this.defaultColorRange=[],this.targets=new nj(Ao),this.defaultTarget=new Ao,this.outerRadiusRatio=1,this.innerRadiusRatio=1,this.cornerRadius=0,this.cornerMode="container",this.spacing=0,this.scale=new Dr,this.bar=new Nc,this.needle=new Oc,this.label=new Pae,this.secondaryLabel=new Nae,this.tooltip=L$e()}};D([Ye],rs.prototype,"value");D([Ye],rs.prototype,"startAngle");D([Ye],rs.prototype,"endAngle");D([Ye],rs.prototype,"segmentation");D([Ye],rs.prototype,"defaultColorRange");D([Ye],rs.prototype,"targets");D([Ye],rs.prototype,"defaultTarget");D([Ye],rs.prototype,"outerRadiusRatio");D([Ye],rs.prototype,"innerRadiusRatio");D([Ye],rs.prototype,"outerRadius");D([Ye],rs.prototype,"innerRadius");D([Ye],rs.prototype,"cornerRadius");D([Ye],rs.prototype,"cornerMode");D([Ye],rs.prototype,"spacing");D([Ye],rs.prototype,"scale");D([Ye],rs.prototype,"bar");D([Ye],rs.prototype,"needle");D([Ye],rs.prototype,"label");D([Ye],rs.prototype,"secondaryLabel");D([Ye],rs.prototype,"tooltip");function Oae(e,t,i,n){const{domain:s,range:o}=n,[r,a]=o,l=I$e((r+a)/2+Math.PI),c=R$e(a-r);return{type:"gradient",gradient:"conic",colorSpace:"oklch",colorStops:T$e(e,i,s,t).map(({color:d,stop:p})=>(p=Math.min(Math.max(p,0),1),p=(r+c*p-l)/(2*Math.PI),p=(p%1+1)%1,{stop:p,color:d})),bounds:"series",rotation:E$e(l)+90}}var{SectorBox:sj}=N;function B$e(e){const{startAngle:t,endAngle:i,clipStartAngle:n,clipEndAngle:s,innerRadius:o,outerRadius:r}=e;if(!(n==null||s==null))return new sj(Math.max(n,t),Math.min(s,i),o,r)}function Fae(e,t,i){return Math.max(e,i.startAngle)<=Math.min(t,i.endAngle)}function E2(e){return e.clipStartAngle!=null&&e.clipEndAngle!=null}function L2(e,t){const{clipStartAngle:i,clipEndAngle:n,innerRadius:s,outerRadius:o}=e;return new sj(i,t?i:n,s,o)}function AZ(e,t){const i=e?"initial":"update";return{node:{fromFn(o,r){const a=o.previousDatum;let{startAngle:l,endAngle:c}=a??r;const u=a!=null&&E2(a)?L2(a,e):void 0,d=E2(r)?L2(r,e):void 0;let p;return u!=null&&d!=null?p=u:u==null&&d!=null?(p=d,l=r.startAngle,c=r.endAngle):u!=null&&d==null?(p=void 0,l=r.startAngle,c=r.endAngle):e&&(c=l),{startAngle:l,endAngle:c,clipSector:p,phase:i}},toFn(o,r){const{startAngle:a,endAngle:l}=r;let c;return E2(r)&&(c=L2(r,!1)),{startAngle:a,endAngle:l,clipSector:c}},applyFn(o,r){const{startAngle:a,endAngle:l}=r;let{clipSector:c}=r;c!=null&&(c=new sj(Math.max(a,c.startAngle),Math.min(l,c.endAngle),c.innerRadius,c.outerRadius));const u=c==null||Fae(a,l,c);o.startAngle=a,o.endAngle=l,o.clipSector=c,o.visible=u}},needle:{fromFn(o){let{angle:r}=o.previousDatum??o.datum;return e&&(r=t),{rotation:r,phase:i}},toFn(o,r){const{angle:a}=r;return{rotation:a}}}}}function P2(e,t){const{startAngle:i,endAngle:n}=t,s=B$e(t),o=s==null||Fae(i,n,s);return{startAngle:i,endAngle:n,clipSector:s,visible:o}}function kZ(e,t){const{angle:i}=t;return{rotation:i}}var _$e={top:0,middle:.5,bottom:1};function z$e(e,t,i,n,s,o){const{padding:r,textAlign:a,verticalAlign:l}=n;let c,u;if(i.each((T,L)=>{L.label==="primary"?c=L:L.label==="secondary"&&(u=L)}),c==null)return;const d=x0(e.id,t,c,o?.label);if(d==null)return;const p=u==null?void 0:x0(e.id,t,u,o?.secondaryLabel),f={padding:r},m=a==="center"?2:1,v=l==="middle"?2:1,b=T=>({width:Math.sqrt(Math.max(s**2-(T/v)**2,0))*m,height:Math.min(T,v*s),meta:null});let C,x,w;if(u!=null&&p!=null){const T=Are(Gt(d),c,Gt(p),u,f,b);C=T?.label,x=T?.secondaryLabel,w=T?.height??0}else{const T=b0(Gt(d),c,f,b);C=T?.[0],x=void 0,w=T?.[0].height??0}const M=w*_$e[l];i.each((T,L)=>{let I;if(L.label==="primary"?I=C:L.label==="secondary"&&(I=x),I==null){T.visible=!1;return}T.visible=!0,T.text=I.text,T.fontSize=I.fontSize,T.lineHeight=I.lineHeight,T.textAlign=a,T.textBaseline="middle";const R=L.label==="primary"?I.height/2:w-I.height/2;T.y=L.centerY+R-M,T.x=L.centerX})}var{fromToMotion:Gx,resetMotion:TZ,SeriesNodePickMode:IZ,StateMachine:G$e,createDatumId:N2,normalizeAngle360:V$e,normalizeAngle360Inclusive:RZ,isBetweenAngles:qk,sectorBox:H$e,toRadians:Qk,BBox:W$e,Group:xp,PointerEvents:Jk,Selection:wp,Sector:j$e,SectorBox:U$e,Text:EZ,Marker:$$e,tickFormat:K$e,applyShapeStyle:eT,mergeDefaults:Y$e}=N,X$e={inside:90,middle:0,outside:-90},Z$e=[{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"},{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"}],q$e=[{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"},{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"}],j1=class extends N.Series{constructor(e){super({moduleCtx:e,pickModes:[IZ.EXACT_SHAPE_MATCH,IZ.NEAREST_NODE]}),this.centerX=0,this.centerY=0,this.radius=0,this.textAlign="center",this.verticalAlign="middle",this.properties=new rs,this.scale=new hoe,this.scaleGroup=this.contentGroup.appendChild(new xp({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new xp({name:"itemGroup"})),this.itemNeedleGroup=this.contentGroup.appendChild(new xp({name:"itemNeedleGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new xp({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new xp({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new xp({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new xp({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new xp({name:"tickGroup"})),this.scaleSelection=wp.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=wp.select(this.itemGroup,()=>this.nodeFactory()),this.needleSelection=wp.select(this.itemNeedleGroup,tz),this.targetSelection=wp.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=wp.select(this.itemTargetLabelGroup,EZ),this.labelSelection=wp.select(this.itemLabelGroup,EZ),this.highlightTargetSelection=wp.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=wp.select(this.tickGroup,N.TransformableText),this.datumUnion=new aae,this.animationState=new G$e("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=Jk.None,this.tickGroup.pointerEvents=Jk.None,this.itemNeedleGroup.pointerEvents=Jk.None,this.itemLabelGroup.pointerEvents=Jk.None}get hasData(){return this.properties.value!=null}nodeFactory(){return new j$e}markerFactory(){const e=new $$e;return e.size=1,e}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){const{min:t,max:i}=this.properties.scale;return cae(e,{min:t,max:i})}layoutScale(){const{scale:e,properties:t}=this,{seriesRectWidth:i,seriesRectHeight:n}=this.nodeDataDependencies,{scale:s,outerRadius:o}=this.properties,{min:r,max:a,label:l,interval:c}=s,u=Qk(t.startAngle-90),d=Qk(t.endAngle-90),f=RZ(d-u)>Math.PI,m=f||qk(1.5*Math.PI,u,d),v=f||qk(0*Math.PI,u,d),b=f||qk(.5*Math.PI,u,d),C=f||qk(1*Math.PI,u,d);let x;C&&!v?x="right":!C&&v?x="left":x="center";let w;m&&!b?w="bottom":!m&&b?w="top":w="middle";const M=H$e({startAngle:u,endAngle:d,innerRadius:0,outerRadius:.5}),T=-(M.x+M.width/2)*2,L=-(M.y+M.height/2)*2,I=Math.min(i/M.width,n/M.height);e.domain=[r,a],e.range=[u,d],e.arcLength=I/2;const{maxSpacing:R,minSpacing:O}=c,{arcLength:_}=e,B=R?Math.floor(_/R):1,V=O?Math.floor(_/O):1/0,j=Math.floor(4/Math.PI*Math.abs(e.range[0]-e.range[1])),K=Math.max(B,Math.min(V,j)),Y=c.values??e.ticks({nice:!1,interval:c.step,minTickCount:B,maxTickCount:V,tickCount:K})?.ticks??[],G=K$e(Y,typeof l.format=="string"?l.format:void 0),$=ei(l),W=Y.map((ie,oe)=>{let ae;if(l.formatter&&(ae=C0(this.ctx,l.formatter,{value:ie,index:oe,domain:e.domain,boundSeries:void 0})),ae??(ae=G?.(ie)),ae==null)return;const{width:me,height:xe}=ft(ae)?Da(ae,l):$.measureLines(ae);return{index:oe,value:ie,text:ae,width:me,height:xe}}).filter(ie=>ie!=null),Q=W.reduce((ie,oe)=>Math.max(ie,oe.width),0),q=W.reduce((ie,oe)=>Math.max(ie,oe.height),0),H=l.enabled?Math.max(Q,q)+l.spacing:0,U=Math.max(.5*I-H,0),ee=o??U;return this.centerX=i/2+T*ee,this.centerY=n/2+L*ee,this.radius=ee,this.textAlign=x,this.verticalAlign=w,W}getShapeFillBBox(){const{centerX:e,centerY:t,radius:i}=this,n=new W$e(e-i,t-i,2*i,2*i);return{series:n,axis:n}}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map(i=>{const{text:n=t.text,value:s=t.value??0,shape:o=t.shape??"triangle",rotation:r=t.rotation??0,placement:a=t.placement??"middle",spacing:l=t.spacing??0,size:c=t.size??0}=i,{enabled:u=t.label.enabled,color:d=t.label.color??"black",fontStyle:p=t.label.fontStyle??"normal",fontWeight:f=t.label.fontWeight??"normal",fontSize:m=t.label.fontSize,fontFamily:v=t.label.fontFamily,spacing:b=t.label.spacing??0}=i.label;return{text:n,value:s,shape:o,placement:a,spacing:l,size:c,rotation:r,label:{enabled:u,color:d,fontStyle:p,fontWeight:f,fontSize:m,fontFamily:v,spacing:b},style:i.getStyle()}})}getTargetRadius(e){const{radius:t,properties:i}=this,{innerRadiusRatio:n,outerRadiusRatio:s}=i,{placement:o,spacing:r,size:a}=e,l=t*s,c=t*n;switch(o){case"inside":return Math.max(c-r-a/2,0);case"outside":return l+r+a/2;default:return(c+l)/2}}getTargetLabel(e){const{scale:t}=this,{value:i,size:n,placement:s,label:o}=e,{spacing:r,color:a,fontStyle:l,fontWeight:c,fontSize:u,fontFamily:d}=o,p=void 0,f=t.convert(i),m=Math.trunc(V$e(f)/(Math.PI/2)),v=n/2+r;let b,C,x,w;switch(s){case"outside":({textAlign:b,textBaseline:C}=Z$e[m]),x=v*Math.cos(f),w=v*Math.sin(f);break;case"inside":({textAlign:b,textBaseline:C}=q$e[m]),x=-v*Math.cos(f),w=-v*Math.sin(f);break;default:b="center",C="bottom",x=0,w=-v;break}return{offsetX:x,offsetY:w,fill:a,textAlign:b,textBaseline:C,fontStyle:l,fontWeight:c,fontSize:u,fontFamily:d,lineHeight:p}}createNodeData(){const e=this.layoutScale(),{id:t,scale:i,properties:n,radius:s,centerX:o,centerY:r}=this,{value:a,innerRadiusRatio:l,outerRadiusRatio:c,segmentation:u,cornerRadius:d,cornerMode:p,needle:f,bar:m,scale:v,label:b,secondaryLabel:C}=n,{outerRadius:x=s*c,innerRadius:w=s*l,defaultColorRange:M}=n,T=this.getTargets(),L=[],I=[],R=[],O=[],_=[],B=p==="item",V=i.convert(i.domain[0]),j=i.convert(a),K=Math.ceil(RZ(j-V)*s);let Y=u.enabled?u.interval.getSegments(i,K):void 0;const G=m.getStyle(M,i),$=v.getStyle(m.enabled,M,i);if(Y==null&&B){const W=Math.min(...i.domain),Q=Math.max(...i.domain),q={value:a,segmentStart:W,segmentEnd:Q},U=Math.min(d,(x-w)/2)/((w+x)/2);L.push({series:this,itemId:"value",datum:q,datumIndex:{type:0},type:0,centerX:o,centerY:r,outerRadius:x,innerRadius:w,startAngle:V-U,endAngle:j+U,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:d,endCornerRadius:d,style:G}),_.push({series:this,itemId:"scale",datum:q,datumIndex:{type:0},type:0,centerX:o,centerY:r,outerRadius:x,innerRadius:w,startAngle:i.range[0]-U,endAngle:i.range[1]+U,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:d,endCornerRadius:d,style:$})}else{Y??(Y=i.domain);for(let W=0;W<Y.length-1;W++){const Q=Y[W],q=Y[W+1],H={value:a,segmentStart:Q,segmentEnd:q},U=W===0,ee=W===Y.length-2,ie=i.convert(Q),oe=i.convert(q);L.push({series:this,itemId:`value-${W}`,datum:H,datumIndex:{type:0},type:0,centerX:o,centerY:r,outerRadius:x,innerRadius:w,startAngle:ie,endAngle:oe,clipStartAngle:V,clipEndAngle:j,startCornerRadius:B||U?d:0,endCornerRadius:B||ee?d:0,style:G}),_.push({series:this,itemId:`scale-${W}`,datum:H,datumIndex:{type:0},type:0,centerX:o,centerY:r,outerRadius:x,innerRadius:w,startAngle:ie,endAngle:oe,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:B||U?d:0,endCornerRadius:B||ee?d:0,style:$})}}if(!f.enabled&&b.enabled){const{text:W,color:Q,fontSize:q,minimumFontSize:H,fontStyle:U,fontWeight:ee,fontFamily:ie,lineHeight:oe,formatter:ae=me=>this.formatLabel(me.value)}=b;O.push({label:"primary",centerX:o,centerY:r,text:W,value:a,fill:Q,fontSize:q,minimumFontSize:H,fontStyle:U,fontWeight:ee,fontFamily:ie,lineHeight:oe,formatter:ae})}if(!f.enabled&&C.enabled){const{text:W,color:Q,fontSize:q,minimumFontSize:H,fontStyle:U,fontWeight:ee,fontFamily:ie,lineHeight:oe,formatter:ae}=C;O.push({label:"secondary",centerX:o,centerY:r,text:W,value:a,fill:Q,fontSize:q,minimumFontSize:H,fontStyle:U,fontWeight:ee,fontFamily:ie,lineHeight:oe,formatter:ae})}if(f.enabled){let W=f.radiusRatio==null?w:s*f.radiusRatio;W=Math.max(W-f.spacing,0);const Q=i.convert(a);R.push({centerX:o,centerY:r,radius:W,angle:Q,series:this})}for(let W=0;W<T.length;W+=1){const Q=T[W],{value:q,text:H,size:U,shape:ee,style:ie}=Q;if(q<Math.min(...i.domain)||q>Math.max(...i.domain))continue;const oe=this.getTargetRadius(Q),ae=i.convert(q),me=Qk(Q.rotation+X$e[Q.placement]);I.push({series:this,itemId:`target-${W}`,midPoint:{x:oe*Math.cos(ae)+o,y:oe*Math.sin(ae)+r},datum:{value:q},datumIndex:{type:1,index:W},type:1,value:q,text:H,centerX:o,centerY:r,shape:ee,radius:oe,angle:ae,rotation:me,size:U,label:this.getTargetLabel(Q),style:ie})}return{itemId:t,nodeData:L,needleData:R,targetData:I,labelData:O,scaleData:_,tickData:e}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(e!=null&&e.series===this&&e.type===1)return e}update({seriesRect:e}){const{datumSelection:t,labelSelection:i,needleSelection:n,targetSelection:s,targetLabelSelection:o,scaleSelection:r,highlightTargetSelection:a,tickSelection:l}=this,c=this.checkResize(e);this.updateSelections(c),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const u=this.contextNodeData?.nodeData??[],d=this.contextNodeData?.labelData??[],p=this.contextNodeData?.needleData??[],f=this.contextNodeData?.targetData??[],m=this.contextNodeData?.scaleData??[],v=this.contextNodeData?.tickData??[],b=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:m,scaleSelection:r}),this.updateScaleNodes({scaleSelection:r}),this.needleSelection=this.updateNeedleSelection({needleData:p,needleSelection:n}),this.updateNeedleNodes({needleSelection:n}),this.targetSelection=this.updateTargetSelection({targetData:f,targetSelection:s}),this.updateTargetStyles({targetSelection:s,isHighlight:!1}),this.updateTargetNodes({targetSelection:s}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:f,targetLabelSelection:o}),this.updateTargetLabelNodes({targetLabelSelection:o}),this.datumSelection=this.updateDatumSelection({nodeData:u,datumSelection:t}),this.updateDatumNodes({datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:d,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:b==null?[]:[b],targetSelection:a}),this.updateTargetStyles({targetSelection:a,isHighlight:!0}),this.updateTargetNodes({targetSelection:a}),this.tickSelection=this.updateTickSelection({tickData:v,tickSelection:l}),this.updateTickNodes({tickSelection:l}),c&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>N2(e.nodeData.length,t.itemId))}updateDatumNodes(e){const{datumSelection:t}=e,{ctx:i,properties:n}=this,{segmentation:s}=n,o=s.spacing??0,r=i.animationManager.isSkipped(),a=this.getShapeFillBBox();t.each((l,c)=>{const{centerX:u,centerY:d,innerRadius:p,outerRadius:f,startCornerRadius:m,endCornerRadius:v}=c;l.centerX=u,l.centerY=d,l.innerRadius=p,l.outerRadius=f,l.pointerEvents=this.properties.bar.enabled?N.PointerEvents.All:N.PointerEvents.None,eT(l,c.style,a),l.startOuterCornerRadius=m,l.startInnerCornerRadius=m,l.endOuterCornerRadius=v,l.endInnerCornerRadius=v,l.radialEdgeInset=(o+l.strokeWidth)/2,l.concentricEdgeInset=l.strokeWidth/2,(r||l.previousDatum==null)&&l.setProperties(P2(l,c))}),this.datumUnion.update(t,this.itemGroup,N.Sector,(l,c,u)=>{l.clipSector??(l.clipSector=new U$e(Number.NaN,Number.NaN,Number.NaN,Number.NaN)),l.centerX=c.centerX,l.centerY=c.centerY,l.outerRadius=l.clipSector.outerRadius=c.outerRadius,l.innerRadius=l.clipSector.innerRadius=c.innerRadius,l.startAngle=l.clipSector.startAngle=c.startAngle,l.startInnerCornerRadius=c.startInnerCornerRadius,l.startOuterCornerRadius=c.startOuterCornerRadius,l.endAngle=u.endAngle,l.clipSector.endAngle=u.clipSector?.endAngle??u.endAngle,l.endInnerCornerRadius=u.endInnerCornerRadius,l.endOuterCornerRadius=u.endOuterCornerRadius,l.pointerEvents=N.PointerEvents.None})}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,t=>N2(e.scaleData.length,t.itemId))}updateScaleNodes(e){const{scaleSelection:t}=e,{segmentation:i}=this.properties,n=i.spacing??0,s=this.getShapeFillBBox();t.each((o,r)=>{const{centerX:a,centerY:l,innerRadius:c,outerRadius:u,startCornerRadius:d,endCornerRadius:p}=r;o.centerX=a,o.centerY=l,o.innerRadius=c,o.outerRadius=u,eT(o,r.style,s),o.startOuterCornerRadius=d,o.startInnerCornerRadius=d,o.endOuterCornerRadius=p,o.endInnerCornerRadius=p,o.radialEdgeInset=(n+o.strokeWidth)/2,o.concentricEdgeInset=o.strokeWidth/2,o.setProperties(P2(o,r))})}updateNeedleSelection(e){return e.needleSelection.update(e.needleData,void 0,()=>N2(0))}updateNeedleNodes(e){const{needleSelection:t}=e,{fill:i,fillOpacity:n,stroke:s,strokeOpacity:o,strokeWidth:r,lineDash:a,lineDashOffset:l}=this.properties.needle,c=this.ctx.animationManager.isSkipped();t.each((u,d)=>{const{centerX:p,centerY:f,radius:m}=d,v=m*2;u.d=tz.defaultPathData,eT(u,{fill:i,fillOpacity:n,stroke:s,strokeOpacity:o,strokeWidth:r/v,lineDash:a.map(b=>b/v),lineDashOffset:l/v}),u.translationX=p,u.translationY=f,u.scalingX=v,u.scalingY=v,c&&u.setProperties(kZ(u,d))})}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetStyles({targetSelection:e,isHighlight:t}){e.each((i,n)=>{n.style=this.getTargetStyle(t,n)})}updateTargetNodes({targetSelection:e}){e.each((t,i)=>{const{centerX:n,centerY:s,angle:o,radius:r,shape:a,size:l,rotation:c}=i;eT(t,i.style),t.size=l,t.shape=a==="line"?uae:a,t.translationX=n+r*Math.cos(o),t.translationY=s+r*Math.sin(o),t.rotation=o+c})}getTargetStyle(e,{datumIndex:t,style:i}){const n=this.getHighlightStyle(e,t);return Y$e(n,{...i,opacity:1})}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each((i,n)=>{const{centerX:s,centerY:o,radius:r,angle:a,text:l}=n,{offsetX:c,offsetY:u,fill:d,fontStyle:p,fontWeight:f,fontSize:m,fontFamily:v,textAlign:b,textBaseline:C}=n.label;if(l==null){i.visible=!1;return}i.visible=!0,i.x=s+r*Math.cos(a)+c,i.y=o+r*Math.sin(a)+u,i.text=l,i.fill=d,i.fontStyle=p,i.fontWeight=f,i.fontSize=m,i.fontFamily=v,i.textAlign=b,i.textBaseline=C})}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,t=>t.label)}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each((n,s)=>{n.fill=s.fill,n.fontStyle=s.fontStyle,n.fontWeight=s.fontWeight,n.fontFamily=s.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}updateTickSelection(e){return e.tickSelection.update(e.tickData,void 0,t=>t.index)}updateTickNodes(e){const{scale:t,radius:i,centerX:n,centerY:s,properties:o}=this,{enabled:r,color:a,fontFamily:l,fontSize:c,fontStyle:u,fontWeight:d,spacing:p}=o.scale.label,f=Qk(o.scale.label.rotation??0);e.tickSelection.each((m,v)=>{if(!r){m.visible=!1;return}m.visible=!0,m.text=v.text,m.fill=a,m.fontFamily=l,m.fontSize=c,m.fontStyle=u,m.fontWeight=d,m.textAlign="center",m.textBaseline="middle";const b=t.convert(v.value),{width:C,height:x}=v,w=Math.abs(i*Math.cos(b)),M=Math.abs(i*Math.sin(b)),T=Math.min(Math.max(Math.abs(i/Math.tan(b)),w-C/2),w+C/2),L=Math.min(Math.max(Math.abs(i*Math.tan(b)),M-x/2),M+x/2),I=Math.hypot(T,L),R=n+(I+p)*Math.cos(b),O=s+(I+p)*Math.sin(b);m.x=R,m.y=O,m.rotationCenterX=R,m.rotationCenterY=O,m.rotation=f})}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(e.text==null)return!1;return!0}formatLabelText(e){const{labelSelection:t,radius:i,textAlign:n,verticalAlign:s}=this,{spacing:o,innerRadiusRatio:r}=this.properties;z$e(this,this.ctx,t,{padding:o,textAlign:n,verticalAlign:s},i*r,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),TZ([this.datumSelection],P2),TZ([this.needleSelection],kZ),this.formatLabelText()}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}animateLabelText(e={}){const{animationManager:t}=this.ctx;let i,n,s,o;if(this.labelSelection.each((r,a)=>{r.opacity=1,a.label==="primary"?(i=r.previousDatum?.value??e.from??a.value,n=a.value):a.label==="secondary"&&(s=r.previousDatum?.value??e.from??a.value,o=a.value)}),!this.labelsHaveExplicitText())if(n==null||o==null)this.formatLabelText();else if(i===n&&s===o)this.formatLabelText({label:n,secondaryLabel:o});else{const r=`${this.id}_labels`;t.animate({id:r,groupId:"label",from:{label:i,secondaryLabel:s},to:{label:n,secondaryLabel:o},phase:e.phase??"update",onUpdate:a=>this.formatLabelText(a),onStop:()=>this.formatLabelText({label:n,secondaryLabel:o})})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t,needle:i}=AZ(!0,this.scale.range[0]);Gx(this.id,"node",e,[this.datumSelection],t,(n,s)=>s.itemId),Gx(this.id,"needle",e,[this.needleSelection],i,()=>"needle"),Gx(this.id,"label",e,[this.labelSelection],lae,(n,s)=>s.label),this.animateLabelText({from:this.properties.scale.min,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t,needle:i}=AZ(!1,this.scale.range[0]);Gx(this.id,"node",e,[this.datumSelection],t,(n,s)=>s.itemId),Gx(this.id,"needle",e,[this.needleSelection],i,()=>"needle"),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}dataCount(){return Number.NaN}getSeriesDomain(){return[Number.NaN,Number.NaN]}getSeriesRange(e,t){return[Number.NaN,Number.NaN]}getLegendData(){return[]}getTooltipContent(e){const{id:t,properties:i}=this,{tooltip:n}=i;let s,o,r;if(e.type===0?(s=i.value,o=i.label.text,r=this.ctx.localeManager.t("ariaLabelGaugeValue")):({value:s,text:o}=i.targets[e.index],r=this.ctx.localeManager.t("ariaLabelGaugeTarget")),s!=null)return this.formatTooltipWithContext(n,{data:[{label:o,fallbackLabel:r,value:this.formatLabel(s)}]},{seriesId:t,title:void 0,datum:void 0,value:s})}pickNodeClosestDatum(e){return dae(this,e)}pickFocus(e){return hae(this,e)}getCaptionText(){const{value:e}=this.properties,t=[];return t.push(this.formatLabel(e)),this.labelSelection.each((i,n)=>{const s=x0(this.id,this.ctx,n);s!=null&&t.push(Gt(s))}),t.join(". ")}getCategoryValue(e){}datumIndexForCategoryValue(e){}hasItemStylers(){return this.properties.label.itemStyler!=null}};j1.className="RadialGaugeSeries";j1.type="radial-gauge";var{FONT_SIZE_RATIO:Q$e}=N,J$e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"radial-gauge",moduleFactory:e=>new j1(e),themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{outerRadiusRatio:1,innerRadiusRatio:.8,startAngle:270,endAngle:450,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},N.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/2",N.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:12}},bar:{strokeWidth:{$isUserOption:["./stroke",2,0]}},segmentation:{enabled:!1,interval:{},spacing:2},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"outside",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},needle:{enabled:!1,fill:{$ref:"foregroundColor"},spacing:10},label:{...N.LABEL_BOXING_DEFAULTS,enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:56,minimumFontSize:18/56,fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}},secondaryLabel:{...N.LABEL_BOXING_DEFAULTS,enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:Q$e.LARGE},minimumFontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"}},tooltip:{range:{$path:["/tooltip/range",10]}}}}},e5e={type:"series",name:"radial-gauge",chartType:"standalone",enterprise:!0,options:N.radialGaugeSeriesOptionsDef,create:e=>new j1(e)},{BBox:t5e,Path:i5e,Vec2:Hs,SceneChangeDetection:fC}=N,Ay=class extends i5e{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0,this.elbows=[]}computeBBox(){const e=Math.min(this.x1,this.x2),t=Math.max(this.x1,this.x2)-e,i=Math.min(this.y1,this.y2),n=Math.max(this.y1,this.y2)-i+this.height;return new t5e(e,i,t,n)}updatePath(){const{path:e,inset:t}=this;e.clear();const i=this.height-2*this.inset,n=i/2;let s=this.x1+t,o=this.y1+t;e.moveTo(s,o);for(const l of this.elbows)this.updatePathSection(s,o,l.x,l.y,i,-n),s=l.x,o=l.y;const r=this.x2-t,a=this.y2+t;this.updatePathSection(s,o,r,a,i,-n),e.lineTo(r,a+i),s=r,o=a;for(const l of this.elbows.toReversed())this.updatePathSection(s,o,l.x,l.y,i,n),s=l.x,o=l.y;this.updatePathSection(s,o,this.x1+t,this.y1+t,i,n),e.closePath()}updatePathSection(e,t,i,n,s,o){const{path:r}=this,a=Hs.from(e,t+o+s/2),l=Hs.from(i,n+o+s/2);if(Math.abs(l.y-a.y)<2){r.lineTo(l.x,l.y);return}let c=Hs.angle(Hs.sub(l,a));c<0&&(c=2*Math.PI+c);const u=0,d=Math.PI/2,p=Math.PI,f=Math.PI*1.5,m=LZ(a,l,0),v=LZ(a,l,s);if(m.radius<s){r.cubicCurveTo((a.x+l.x)/2,a.y,(a.x+l.x)/2,l.y,l.x,l.y);return}c>=f?(r.arc(a.x,t-m.radius,m.radius,d,d+v.angle,!0),r.arc(l.x,n+v.radius,v.radius,f+v.angle,f),r.lineTo(l.x,l.y)):c>u&&c<=d?(r.arc(a.x,t+v.radius,v.radius,f,f+v.angle),r.arc(l.x,n-m.radius,m.radius,d+m.angle,d,!0),r.lineTo(l.x,l.y)):c>d&&c<=p?(r.arc(a.x,t+v.radius,v.radius-s,f,f+v.angle,!0),r.arc(l.x,n-m.radius,m.radius+s,d+m.angle,d),r.lineTo(l.x,l.y)):(r.arc(a.x,t-m.radius,m.radius+s,d,d+m.angle),r.arc(l.x,n+v.radius,v.radius-s,f+v.angle,f,!0),r.lineTo(l.x,l.y))}};D([fC()],Ay.prototype,"x1");D([fC()],Ay.prototype,"x2");D([fC()],Ay.prototype,"y1");D([fC()],Ay.prototype,"y2");D([fC()],Ay.prototype,"height");D([fC()],Ay.prototype,"inset");function LZ(e,t,i){const n=Hs.angle(Hs.sub(t,e)),s=Hs.distance(e,t),o=Hs.add(e,Hs.rotate(Hs.from(s/2,0),n)),r=-1/Hs.gradient(e,t),a=Hs.intercept(o,r),l=n5e(.1,.5,Math.PI/2-Math.abs(Hs.gradient(e,t))),c=Hs.intersectAtX(r,a,e.x),u=Math.max(i,Hs.distance(e,c)*l);return{angle:Hs.angle(Hs.sub(c,e),Hs.sub(c,o))/-(1.1-l),radius:u}}function n5e(e,t,i){return Je(e,(t-e)*i+e,t)}var{BaseProperties:Bae,FillGradientDefaults:s5e,FillPatternDefaults:o5e,FillImageDefaults:r5e,makeSeriesTooltip:a5e,SeriesProperties:l5e,Property:At,Label:c5e}=N,U1=class extends c5e{constructor(){super(...arguments),this.spacing=1,this.placement=void 0,this.edgePlacement=void 0}};D([At],U1.prototype,"spacing");D([At],U1.prototype,"placement");D([At],U1.prototype,"edgePlacement");var Oh=class extends Bae{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};D([At],Oh.prototype,"fill");D([At],Oh.prototype,"fillOpacity");D([At],Oh.prototype,"stroke");D([At],Oh.prototype,"strokeOpacity");D([At],Oh.prototype,"strokeWidth");D([At],Oh.prototype,"lineDash");D([At],Oh.prototype,"lineDashOffset");D([At],Oh.prototype,"itemStyler");var Mr=class extends Bae{constructor(){super(...arguments),this.spacing=1,this.minSpacing=0,this.width=1,this.alignment="justify",this.verticalAlignment="center",this.sort="auto",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};D([At],Mr.prototype,"spacing");D([At],Mr.prototype,"minSpacing");D([At],Mr.prototype,"width");D([At],Mr.prototype,"alignment");D([At],Mr.prototype,"verticalAlignment");D([At],Mr.prototype,"sort");D([At],Mr.prototype,"fill");D([At],Mr.prototype,"fillOpacity");D([At],Mr.prototype,"stroke");D([At],Mr.prototype,"strokeOpacity");D([At],Mr.prototype,"strokeWidth");D([At],Mr.prototype,"lineDash");D([At],Mr.prototype,"lineDashOffset");D([At],Mr.prototype,"itemStyler");var as=class extends l5e{constructor(){super(),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fillGradientDefaults=new s5e,this.fillPatternDefaults=new o5e,this.fillImageDefaults=new r5e,this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=[],this.strokes=[],this.label=new U1,this.link=new Oh,this.node=new Mr,this.tooltip=a5e(),this.highlightStyle.deprecated=!1}getStyle(e,t,i,n){const{fillOpacity:s,strokeWidth:o,strokeOpacity:r,lineDash:a,lineDashOffset:l,fill:c=t[n%t.length],stroke:u=i[n%t.length]}=e?this.link:this.node;return{fill:c,fillOpacity:s,stroke:u,strokeWidth:o,strokeOpacity:r,lineDash:a,lineDashOffset:l}}};D([At],as.prototype,"nodes");D([At],as.prototype,"fromKey");D([At],as.prototype,"toKey");D([At],as.prototype,"idKey");D([At],as.prototype,"idName");D([At],as.prototype,"labelKey");D([At],as.prototype,"labelName");D([At],as.prototype,"sizeKey");D([At],as.prototype,"sizeName");D([At],as.prototype,"fillGradientDefaults");D([At],as.prototype,"fillPatternDefaults");D([At],as.prototype,"fillImageDefaults");D([At],as.prototype,"defaultColorRange");D([At],as.prototype,"defaultPatternFills");D([At],as.prototype,"fills");D([At],as.prototype,"strokes");D([At],as.prototype,"label");D([At],as.prototype,"link");D([At],as.prototype,"node");D([At],as.prototype,"tooltip");var{Transformable:u5e,applyShapeStyle:PZ,SeriesNodePickMode:NZ,createDatumId:tT,getShapeStyle:OZ,getLabelStyles:d5e,Rect:FZ,BBox:BZ,mergeDefaults:iT}=N,$1=class extends tae{constructor(e){super({moduleCtx:e,pickModes:[NZ.NEAREST_NODE,NZ.EXACT_SHAPE_MATCH]}),this.properties=new as}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Ay}nodeFactory(){return new FZ}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:n,toKey:s,sizeKey:o,labelKey:r,label:{spacing:a,placement:l,edgePlacement:c},node:{width:u,alignment:d}}=this.properties,p=G=>({...G,x:Number.NaN,y:Number.NaN,width:u,height:Number.NaN}),f=G=>({...G,x1:Number.NaN,x2:Number.NaN,y1:Number.NaN,y2:Number.NaN,height:Number.NaN,elbows:[]}),{nodeGraph:m,links:v,maxPathLength:b}=this.getNodeGraph(p,f,{includeCircularReferences:!1}),C=m;if(C.size===0)return;const x=[];for(let G=0;G<b;G+=1)x.push({index:G,size:0,nodes:[],x:0});for(const G of C.values()){const{datum:$,linksBefore:W,linksAfter:Q,maxPathLengthBefore:q,maxPathLengthAfter:H}=G,U=Math.max(W.reduce((ae,{link:me})=>ae+me.size,0),Q.reduce((ae,{link:me})=>ae+me.size,0));if(W.length===0&&Q.length===0||U===0){G.columnIndex=-1;continue}let ee;switch(d){case"left":ee=x[q];break;case"right":ee=x[b-1-H];break;case"center":{if(W.length!==0)ee=x[q];else if(Q.length===0)ee=x[0];else{const ae=Q.reduce((me,xe)=>Math.min(me,xe.node.maxPathLengthBefore),b)-1;ee=x[ae]}break}case"justify":{ee=Q.length===0?x[b-1]:x[q];break}}$.size=U;const{label:ie}=this.properties,oe=ie.enabled?this.getLabelText($.label,$.datum,r,"label",[],this.properties.label,{datum:$.datum,value:$.label,fromKey:n,toKey:s,sizeKey:o,size:U}):void 0;$.label=Gt(oe),ee.nodes.push(G),ee.size+=U,G.columnIndex=ee.index}const w=ei(this.properties.label);let M=0,T=0;if(this.isLabelEnabled()){if(l==null&&c==null)M=(t-u)*(1-b/(b+1)),T=M;else if(c==="outside"||c==null){const G=($,W)=>{const Q=W;if(Q.datum.label==null||Q.datum.label==="")return $;let q=(t-u)/(b-1)-a;l==="center"&&c==null&&(q/=2);const H=Xp(Q.datum.label,{maxWidth:q,maxHeight:Q.datum.height,font:this.properties.label,textWrap:"never"});let{width:U}=w.measureLines(H);return l==="center"&&c==null&&(U/=2),Math.max($,U)};(l!=="right"||c==="outside")&&(M=u+x[0].nodes.reduce(G,0)),(l!=="left"||c==="outside")&&(T=u+x.at(-1).nodes.reduce(G,0))}}const L=(t-u-M-T)/(b-1);for(let G=0;G<x.length;G++){const $=x[G];$.x=M+G*L;for(const W of $.nodes)W.datum.x=$.x}for(const G of C.values()){G.weight=0;let $=1/0;for(const W of G.linksAfter){const Q=W.node;$=Math.min($,Q.columnIndex-G.columnIndex)}if($===1/0)for(const W of G.linksBefore){const Q=W.node;$=Math.min($,G.columnIndex-Q.columnIndex)}G.closestColumnDiff=$;for(const W of G.linksAfter){const Q=W.node;if(!(Q.columnIndex<=G.columnIndex))for(let q=Q.columnIndex-1;q>G.columnIndex;q--){const H=W.link.size,U={ghost:!0,datum:{...G.datum,size:H,y:0,height:0},weight:0,linksBefore:[{node:{columnIndex:q-1,datum:{size:H}}}],linksAfter:[{node:{columnIndex:q+1,datum:{size:H}}}],link:W.link,columnIndex:G.columnIndex,size:G.datum.size,closestColumnDiff:$,fromNode:{y:Q.datum.y},toNode:{y:0}};x[q].size+=H,x[q].nodes.push(U)}}}const I=x.toSorted((G,$)=>{const W=G.nodes.reduce((q,H)=>Math.max(q,H.datum.size),0);return $.nodes.reduce((q,H)=>Math.max(q,H.datum.size),0)-W}),R={};for(let G=0;G<I.length;G++)R[I[G].index]=Math.pow(10,I.length-G-1);for(const G of x){for(const $ of G.nodes){if($.weight=$.datum.size/G.size*R[G.index],"ghost"in $&&$.ghost){$.weight=$.size/G.size*R[G.index];continue}$.weight+=$.linksBefore.reduce((W,Q)=>{if(Q.node.columnIndex!==G.index-1)return W;const q=Q.node.datum.size/x[Q.node.columnIndex].size*R[Q.node.columnIndex];return Math.max(W,q)},0),$.weight+=$.linksAfter.reduce((W,Q)=>{if(Q.node.columnIndex!==G.index+1)return W;const q=Q.node.datum.size/x[Q.node.columnIndex].size*R[Q.node.columnIndex];return Math.max(W,q)},0)}G.nodes.sort(($,W)=>this.sortNodes($,W))}const O=1,_=G=>x.reduce(($,{size:W,nodes:Q})=>{const q=i-Q.length*O,U=(1-(Q.length-1)*G/q)/W;return Math.min($,U)},1/0);let B=this.properties.node.spacing,V=_(B);for(;V<0&&B>this.properties.node.minSpacing;)B-=1,V=_(B);if(V<0){fe.warnOnce("There was insufficient space to display the Sankey Series. Reduce [node.spacing], [node.minSpacing], or provide a larger container.");return}for(const G of x){let $=0;for(const q of G.nodes){const H=i*q.datum.size*V;q.datum.height=Math.max(O,H),$+=H}const W=B*(G.nodes.length-1);let Q=0;this.properties.node.verticalAlignment==="bottom"?Q=i-$-W:this.properties.node.verticalAlignment==="center"&&(Q=(i-$-W)/2);for(const q of G.nodes)q.datum.y=Q,Q+=i*q.datum.size*V+B,"ghost"in q&&q.ghost&&q.link.elbows.push({x:G.x,y:q.datum.y})}for(const{datum:G,linksBefore:$,linksAfter:W}of C.values()){let Q=G.y;$.sort((H,U)=>this.sortNodes(H.node,U.node));for(const{link:H}of $)H.y2=Q,Q+=H.size*i*V;let q=G.y;W.sort((H,U)=>this.sortNodes(H.node,U.node,{invertColumnSort:!0}));for(const{link:H}of W)H.y1=q,q+=H.size*i*V}const j=[],K=[],{fontSize:Y}=this.properties.label;for(const[G,$]of x.entries()){const W=G===0,Q=G===x.length-1;let q=-1/0;$.nodes.sort((H,U)=>H.datum.y-U.datum.y);for(const H of $.nodes){if("ghost"in H&&H.ghost)continue;const{datum:U}=H;if(U.midPoint={x:U.x+U.width/2,y:U.y+U.height/2},j.push(U),U.label==null)continue;const ee=U.y+U.height/2;let ie;if(!W&&!Q){const Re=fc(Y),Ne=ee-Re,Pe=ee+Re;let Be=t;for(const{datum:Ae}of C.values())Ae.x>U.x&&Math.max(Ae.y,Ne)<=Math.min(Ae.y+Ae.height,Pe)&&(Be=Math.min(Be,Ae.x-a));const Ue=Be-U.x-2*a;ie=Xp(U.label,{maxWidth:Ue,maxHeight:U.height,font:this.properties.label,textWrap:"never",overflow:"hide"})}if(ie==null||ie===""){const Re=c==null&&(W||Q)?a:a*2;ie=Xp(U.label,{maxWidth:L-Re,maxHeight:U.height,font:this.properties.label,textWrap:"never"})}if(ie==="")continue;const{height:oe}=w.measureLines(ie),ae=ee-oe/2,me=ee+oe/2;let xe=U.x+U.width+a,be="left",ge=l;W&&c==null&&l==null&&(ge="left"),c==="outside"?(W&&(ge="left"),Q&&(ge="right")):c==="inside"&&(W&&(ge="right"),Q&&(ge="left")),ge==="left"?(xe=U.x-a,be="right"):ge==="center"&&(xe=U.x+U.width/2,be="center"),ae>=q&&(K.push({x:xe,y:ee,textAlign:be,text:ie,size:U.size}),q=me)}}for(const G of v){const{fromNode:$,toNode:W,size:Q}=G;G.height=Math.max(O,i*Q*V),G.x1=$.x+u,G.x2=W.x,G.midPoint={x:(G.x1+G.x2)/2,y:(G.y1+G.y2)/2+G.height/2},j.push(G)}return{itemId:e,nodeData:j,labelData:K}}sortNodes(e,t,i){const{properties:n}=this;return n.node.sort==="ascending"?(e.datum.label??"").localeCompare(t.datum.label??""):n.node.sort==="descending"?(t.datum.label??"").localeCompare(e.datum.label??""):n.node.sort==="data"?0:e.columnIndex<t.columnIndex?i?.invertColumnSort?1:-1:e.columnIndex>t.columnIndex?i?.invertColumnSort?-1:1:e.weight===t.weight?e.datum.size-t.datum.size:e.closestColumnDiff<t.closestColumnDiff?1:e.closestColumnDiff>t.closestColumnDiff?-1:e.weight-t.weight}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const t=this.ctx.highlightManager?.getActiveHighlight();e.labelSelection.each((i,n)=>{const{x:s,y:o,textAlign:r,text:a}=n,c=d5e(this,void 0,n,this.properties.label,!1,t),{color:u,fontStyle:d,fontWeight:p,fontSize:f,fontFamily:m}=c;i.visible=!0,i.x=s,i.y=o,i.text=a,i.fill=u,i.fontStyle=d,i.fontWeight=p,i.fontSize=f,i.fontFamily=m,i.textAlign=r,i.textBaseline="middle",i.setBoxing(c)})}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>tT(t.type,t.id))}getNodeStyle(e,t,i){const{properties:n}=this,{fills:s,strokes:o,defaultColorRange:r,defaultPatternFills:a,fillGradientDefaults:l,fillPatternDefaults:c,fillImageDefaults:u}=n,{itemStyler:d}=n.node,p=r[t%r.length].map(x=>({color:x})),f=a[t%a.length],m=this.getHighlightStyle(i,e.datumIndex),v=iT(m,n.getStyle(!1,s,o,t)),b=n.node.fill!=null;let C=OZ(v,b?l:{...l.toJson(),colorStops:p},b?c:{...c.toJson(),fill:f,stroke:f},u);if(d!=null&&e.datumIndex!=null){const x=this.cachedDatumCallback(tT(e.datumIndex.index,"node",i?"highlight":"node"),()=>{const w=this.makeItemStylerParams(e,i,C);return this.callWithContext(d,w)});x&&(C=iT(x,C,{...l.toJson(),colorStops:p},{...c.toJson(),fill:f,stroke:f},u))}return C.opacity=1,C}makeItemStylerParams({datum:e,datumIndex:t,size:i=0,label:n},s,o){const{id:r}=this,a=this.ctx.highlightManager?.getActiveHighlight(),l=this.getHighlightStateString(a,s,t),c=this.filterItemStylerFillParams(o.fill)??o.fill;return{seriesId:r,datum:e,highlighted:s,highlightState:l,...o,size:i,label:n,fill:c}}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getShapeFillBBox();t.each((s,o)=>{const{datumIndex:r}=o,a=this.getNodeStyle(o,r.index,i);s.x=o.x,s.y=o.y,s.width=Math.max(o.width,0),s.height=Math.max(o.height,0),PZ(s,a,n)})}getShapeFillBBox(){const e=this._nodeDataDependencies?.seriesRectWidth??0,t=this._nodeDataDependencies?.seriesRectHeight??0,i=new BZ(0,0,e,t);return{series:i,axis:i}}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>tT(t.type,t.index,t.fromNode.id,t.toNode.id))}getLinkStyle({datumIndex:e,datum:t},i,n){const{id:s,properties:o}=this,{fills:r,strokes:a,defaultColorRange:l,defaultPatternFills:c,fillGradientDefaults:u,fillPatternDefaults:d,fillImageDefaults:p}=o,{itemStyler:f}=o.link,m=l[i.index%l.length].map(M=>({color:M})),v=c[i.index%c.length],b=this.getHighlightStyle(n,e),C=iT(b,o.getStyle(!0,r,a,i.index)),x=o.link.fill!=null;let w=OZ(C,x?u:{...u.toJson(),colorStops:m},x?d:{...d.toJson(),fill:v,stroke:v},p);if(f!=null&&e!=null){const M=this.cachedDatumCallback(tT(e.index,"link",n?"highlight":"node"),()=>{const T=this.ctx.highlightManager?.getActiveHighlight(),L=this.getHighlightStateString(T,n,e);return this.callWithContext(f,{seriesId:s,datum:t,highlighted:n,highlightState:L,...w})});M&&(w=iT(M,w,{...u.toJson(),colorStops:m},{...d.toJson(),fill:v,stroke:v},p))}return w.opacity=1,w}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,n=this.getShapeFillBBox();t.each((s,o)=>{const r=o.fromNode.datumIndex,a=this.getLinkStyle(o,r,i);s.x1=o.x1,s.y1=o.y1,s.x2=o.x2,s.y2=o.y2,s.height=o.height,s.elbows=o.elbows,PZ(s,a,n),s.inset=s.strokeWidth/2})}getTooltipContent(e){const{id:t,linksProcessedData:i,nodesProcessedData:n,properties:s,ctx:{formatManager:o}}=this,{fromKey:r,toKey:a,sizeKey:l,sizeName:c,tooltip:u}=s,d=this.contextNodeData?.nodeData.find(x=>x.datumIndex.type===e.type&&x.datumIndex.index===e.index);if(d==null)return;const p=d.type===0?d.fromNode.index:d.index,f=d.type===0?`${d.fromNode.label} - ${d.toNode.label}`:d.label,m=e.type===0?i?.dataSources.get(this.id)?.data[e.index]:n?.dataSources.get(this.id)?.data[e.index],v=d.size;let b;if(d.type===0){const x=d.fromNode.datumIndex;b=this.getLinkStyle({datumIndex:e,datum:m},x,!1)}else b=this.getNodeStyle({datumIndex:e,datum:m},e.index,!1);const C=[];if(l!=null){const x=o.format(this.callWithContext.bind(this),{type:"number",value:v,datum:m,seriesId:t,legendItemName:void 0,key:l,source:"tooltip",property:"size",domain:[],boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});C.push({label:c,fallbackLabel:l,value:x??String(v)})}return this.formatTooltipWithContext(u,{title:f,symbol:this.legendItemSymbol(d.type,p,b),data:C},{seriesId:t,datum:m,title:f,fromKey:r,toKey:a,sizeKey:l,sizeName:c,size:v,...b})}computeFocusBounds(e){if(e instanceof FZ){const{x:t,y:i,width:n,height:s}=e,o=new BZ(t,i,n,s);return u5e.toCanvas(this.contentGroup,o)}return e}hasItemStylers(){return this.properties.node.itemStyler!=null||this.properties.link.itemStyler!=null||this.properties.label.itemStyler!=null}};$1.className="SankeySeries";$1.type="sankey";var{commonSeriesOptionsDefs:h5e,sankeySeriesThemeableOptionsDef:p5e}=N,mC={...p5e,...h5e,type:ue(ht("sankey")),fromKey:ue(J),toKey:ue(J),sizeKey:J,sizeName:J};mC.fillGradientDefaults=Xe(CG);mC.fillPatternDefaults=Xe(xG);mC.fillImageDefaults=Xe(wG);mC.defaultColorRange=Xe(it(it(Fe)));mC.defaultPatternFills=Xe(it(Fe));var g5e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],solo:!0,identifier:"sankey",moduleFactory:e=>new $1(e),themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:N.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:N.FILL_PATTERN_DEFAULTS,fillImageDefaults:N.FILL_IMAGE_DEFAULTS,defaultColorRange:{$palette:"gradients"},defaultPatternFills:N.SAFE_FILLS_OPERATION,highlightStyle:{series:{dimOpacity:.2}},highlight:{...N.singleSeriesHighlightStyle()},label:{...N.LABEL_BOXING_DEFAULTS,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:10},node:{spacing:{$if:[{$greaterThan:[{$path:"./minSpacing"},20]},{$path:"./minSpacing"},20]},minSpacing:0,width:10,strokeWidth:{$isUserOption:["./stroke",2,0]}},link:{fillOpacity:.5,strokeWidth:{$isUserOption:["./stroke",2,0]}}},legend:{enabled:!1,toggleSeries:!1}}},f5e={type:"series",name:"sankey",chartType:"standalone",enterprise:!0,options:mC,create:e=>new $1(e)},{HierarchySeriesProperties:m5e,HighlightStyle:y5e,makeSeriesTooltip:v5e,Property:ls}=N,jg=class extends y5e{constructor(){super(!1),this.label=new Fu,this.secondaryLabel=new Fu}};D([ls],jg.prototype,"fill");D([ls],jg.prototype,"fillOpacity");D([ls],jg.prototype,"stroke");D([ls],jg.prototype,"strokeWidth");D([ls],jg.prototype,"strokeOpacity");D([ls],jg.prototype,"label");D([ls],jg.prototype,"secondaryLabel");var Ar=class extends m5e{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new jg,this.label=new Fu,this.secondaryLabel=new eM,this.tooltip=v5e()}getStyle(e){const{fills:t,strokes:i,fillOpacity:n,strokeWidth:s,strokeOpacity:o}=this;return{fill:t[e%t.length],fillOpacity:n,stroke:i[e%i.length],strokeWidth:s,strokeOpacity:o,opacity:1}}};D([ls],Ar.prototype,"sizeName");D([ls],Ar.prototype,"labelKey");D([ls],Ar.prototype,"secondaryLabelKey");D([ls],Ar.prototype,"fillOpacity");D([ls],Ar.prototype,"strokeWidth");D([ls],Ar.prototype,"strokeOpacity");D([ls],Ar.prototype,"cornerRadius");D([ls],Ar.prototype,"sectorSpacing");D([ls],Ar.prototype,"padding");D([ls],Ar.prototype,"itemStyler");D([ls],Ar.prototype,"highlightStyle");D([ls],Ar.prototype,"label");D([ls],Ar.prototype,"secondaryLabel");D([ls],Ar.prototype,"tooltip");var{fromToMotion:b5e,normalizeAngle360:S5e,createDatumId:C5e,PointerEvents:x5e,Sector:_Z,Group:nT,ScalableGroup:w5e,Selection:O2,TransformableText:F2,BBox:zZ,applyShapeStyle:D5e,mergeDefaults:GZ,formatValue:VZ,getLabelStyles:M5e}=N,A5e=class extends N.HierarchyNode{constructor(){super(...arguments),this.label=void 0,this.secondaryLabel=void 0,this.contentHeight=0,this.bbox=void 0,this.startAngle=0,this.endAngle=0}};function _ae(e,t=0,i=2*Math.PI/e.sumSize){for(const n of e.children){const s=t+n.sumSize*i;n.startAngle=t,n.endAngle=s,_ae(n,t,i),t=s}}var K1=class extends N.HierarchySeries{constructor(e){super(e),this.NodeClass=A5e,this.properties=new Ar,this.scalingGroup=this.contentGroup.appendChild(new w5e),this.sectorGroup=this.scalingGroup.appendChild(new nT),this.sectorLabelGroup=this.scalingGroup.appendChild(new nT),this.highlightSectorGroup=this.scalingGroup.appendChild(new nT),this.datumSelection=O2.select(this.sectorGroup,_Z),this.labelSelection=O2.select(this.sectorLabelGroup,nT),this.highlightSelection=O2.select(this.highlightSectorGroup,_Z),this.sectorLabelGroup.pointerEvents=x5e.None}processData(){super.processData(),_ae(this.rootNode)}updateSelections(){const e=this.ctx.highlightManager?.getActiveHighlight();if(this.highlightSelection.update(e==null?[]:[e],void 0,o=>this.getDatumId(o)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t}=this;if(t==null||t.seriesRect==null)return;const n=Array.from(this.rootNode),s=o=>{o.append([new F2({tag:0}),new F2({tag:1})])};this.datumSelection.update(n,void 0,o=>this.getDatumId(o)),this.labelSelection.update(n,s,o=>this.getDatumId(o))}getItemStyle(e,t){const{properties:i,colorScale:n}=this,{itemStyler:s}=i,o=e.datumIndex?.[0]??0,r=t?i.highlightStyle:void 0,a=GZ(r,i.getStyle(o));!t&&e.colorValue!=null&&(a.fill=n.convert(e.colorValue));let l=a;if(s!=null&&e!=null){const c=this.cachedDatumCallback(C5e(this.getDatumId(e),t?"highlight":"node"),()=>{const u=this.makeItemStylerParams(e,t,l);return this.callWithContext(s,u)});c&&(l=GZ(c,l))}return l}makeItemStylerParams(e,t,i){const{id:n}=this,s=this.ctx.highlightManager?.getActiveHighlight(),o=this.getHighlightStateString(s,t,e.datumIndex),r=this.filterItemStylerFillParams(i.fill)??i.fill;return{seriesId:n,datum:e.datum,depth:e.depth??0,highlighted:t,highlightState:o,...i,fill:r}}updateNodes(){const{chart:e,data:t,maxDepth:i}=this;if(e==null||t==null)return;const{width:n,height:s}=e.seriesRect,{sectorSpacing:o=0,padding:r=0,cornerRadius:a,childrenKey:l,colorKey:c,colorName:u,labelKey:d,secondaryLabelKey:p,sizeKey:f,sizeName:m}=this.properties;this.contentGroup.translationX=n/2,this.contentGroup.translationY=s/2;const v=o*.5,b=Math.min(n,s)/2,C=b/(i+1),x=-Math.PI/2,w={series:new zZ(-b,-b,2*b,2*b),axis:new zZ(-b,-b,2*b,2*b)};this.rootNode?.walk(I=>{const{startAngle:R,endAngle:O}=I;if(I.depth!=null){const _=(R+O)/2+x,B=(I.depth+.5)*C;I.midPoint.x=Math.cos(_)*B,I.midPoint.y=Math.sin(_)*B}}),this.rootNode?.walk(I=>{const{datum:R,depth:O,startAngle:_,endAngle:B,parent:V,sumSize:j}=I;I.label=void 0,I.secondaryLabel=void 0,I.contentHeight=0;let K;if(R!=null&&O!=null&&d!=null){const $e=R[d];K=this.getLabelText($e,R,d,"label",[],this.properties.label,{depth:O,datum:R,childrenKey:l,colorKey:c,colorName:u,labelKey:d,secondaryLabelKey:p,sizeKey:f,sizeName:m,value:$e})}K===""&&(K=void 0);let Y;if(R!=null&&O!=null&&p!=null){const $e=R[p];Y=this.getLabelText($e,R,p,"secondaryLabel",[],this.properties.secondaryLabel,{depth:O,datum:R,childrenKey:l,colorKey:c,colorName:u,labelKey:d,secondaryLabelKey:p,sizeKey:f,sizeName:m,value:$e})}if(Y===""&&(Y=void 0),O==null)return;const G=O*C+v,$=(O+1)*C-v,W=G>v?v/G:v,Q=$>v?v/$:v,q=_+W,U=B+W-q,ee=_+Q,oe=B+Q-ee,ae=$e=>{if(O===0&&V?.sumSize===j)return{width:2*Math.sqrt($**2-($e*.5)**2),height:$e,meta:0};const Oe=$e,Ze=2*Math.sqrt($**2-(G+Oe)**2),dt=U<Math.PI?2*G*Math.tan(U*.5):1/0,Tt=Math.min(Ze,dt),gt=Math.PI/4;let Lt,Gi;return O===0?(Lt=$e,Gi=Math.sqrt($**2-(Lt/2)**2)-$e/(2*Math.tan(oe*.5))):S5e(U)<gt?(Lt=2*G*Math.tan(U*.5),Gi=Math.sqrt($**2-(Lt/2)**2)-G):(Gi=0,Lt=0),Tt>=Gi?{width:Tt,height:Oe,meta:1}:{width:Gi,height:Lt,meta:2}},me=TW(Gt(K),this.properties.label,Gt(Y),this.properties.secondaryLabel,{padding:r},ae);if(me==null)return;const{width:xe,height:be,meta:ge,label:Re,secondaryLabel:Ne}=me,Pe=x+(_+B)/2,Be=Math.sin(Pe)>=0,Ue=Math.cos(Pe)>=0,Ae=(Be?3:12)&(Ue?6:9);let Ve;switch(ge){case 0:Ve=0;break;case 1:{const Qe=$-(C-be)*.58,Oe=Math.sqrt(($-r)**2-(xe/2)**2);Ve=Math.min(Qe,Oe);break}case 2:if(O===0){const $e=be/(2*Math.tan(U*.5))+xe*.5,Qe=Math.sqrt($**2-(be*.5)**2)-xe*.5;Ve=($e+Qe)*.5}else Ve=(G+$)*.5;break}if(Re!=null){const{fontStyle:$e="normal",fontFamily:Qe,fontWeight:Oe="normal",color:Ze="black"}=this.properties.label;I.label={...Re,fontStyle:$e,fontFamily:Qe,fontWeight:Oe,color:Ze,labelPlacement:ge,circleQuarter:Ae,radius:Ve,theta:Pe}}if(Ne!=null){const{fontStyle:$e="normal",fontFamily:Qe,fontWeight:Oe="normal",color:Ze="black"}=this.properties.secondaryLabel;I.secondaryLabel={...Ne,fontStyle:$e,fontFamily:Qe,fontWeight:Oe,color:Ze,labelPlacement:ge,circleQuarter:Ae,radius:Ve,theta:Pe}}I.contentHeight=me.height});const M=(I,R,O)=>{const{depth:_,startAngle:B,endAngle:V}=I;if(_==null){R.visible=!1;return}R.visible=!0;const j=this.getItemStyle(I,O),K=j.fill,Y=j.strokeWidth,G=N.isGradientFill(K)&&K.bounds!=="item"?w:void 0;D5e(R,j,G),R.centerX=0,R.centerY=0,R.innerRadius=_*C,R.outerRadius=(_+1)*C,R.startAngle=B+x,R.endAngle=V+x,R.inset=v+Y*.5,R.cornerRadius=a};this.datumSelection.each((I,R)=>{M(R,I,!1)}),this.highlightSelection.each((I,R)=>{M(R,I,!0)});const T=(I,R,O,_)=>{const{depth:B,contentHeight:V}=I,j=O===0,K=j?I.label:I.secondaryLabel;if(B==null||K==null){R.visible=!1;return}const{labelPlacement:Y,circleQuarter:G,radius:$,theta:W}=K;let Q;_&&(Q=(j?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color);const q={childrenKey:this.properties.childrenKey,colorKey:this.properties.colorKey,colorName:this.properties.colorName??this.properties.colorKey,depth:I.depth??Number.NaN,labelKey:this.properties.labelKey,secondaryLabelKey:this.properties.secondaryLabelKey,sizeKey:this.properties.sizeKey,sizeName:this.properties.sizeName??this.properties.sizeKey},H=j?this.properties.label:this.properties.secondaryLabel,U=this.ctx.highlightManager?.getActiveHighlight(),ee=M5e(this,I,q,H,_,U);switch(R.text=K.text,R.fontSize=K.fontSize,R.lineHeight=K.lineHeight,R.fontStyle=K.fontStyle,R.fontFamily=K.fontFamily,R.fontWeight=K.fontWeight,R.fill=Q??K.color,R.fillOpacity=this.getHighlightStyle(_,I.datumIndex)?.opacity??1,R.setBoxing(ee),Y){case 0:R.textAlign="center",R.textBaseline="top",R.translationX=0,R.translationY=(j?0:V-K.height)-V*.5,R.rotation=0;break;case 1:{const ie=(G&3)!==0,oe=j===!ie?$:$-(V-K.height);R.textAlign="center",R.textBaseline=ie?"bottom":"top",R.translationX=Math.cos(W)*oe,R.translationY=Math.sin(W)*oe,R.rotation=ie?W-Math.PI*.5:W+Math.PI*.5;break}case 2:{const ie=(G&6)!==0,oe=j===!ie?(V-K.height)*.5:(K.height-V)*.5;R.textAlign="center",R.textBaseline="middle",R.translationX=Math.cos(W)*$+Math.cos(W+Math.PI/2)*oe,R.translationY=Math.sin(W)*$+Math.sin(W+Math.PI/2)*oe,R.rotation=ie?W:W+Math.PI;break}}R.visible=!0},L=this.ctx.highlightManager?.getActiveHighlight();for(const I of this.labelSelection.selectByClass(F2)){const R=I.closestDatum();T(R,I,I.tag,R===L)}}getTooltipContent(e){const{id:t,properties:i,ctx:n}=this,{labelKey:s,secondaryLabelKey:o,childrenKey:r,sizeKey:a,sizeName:l,colorKey:c,colorName:u,tooltip:d}=i,{formatManager:p}=n,f=e.reduce((L,I)=>L?.children[I],this.rootNode);if(f==null)return;const{datum:m,depth:v}=f;if(m==null||v==null)return;const b=[],C=a==null?void 0:m[a];if(C!=null){const L=[0,this.rootNode?.sumSize??0],I=p.format(this.callWithContext.bind(this),{type:"number",value:C,datum:m,seriesId:t,legendItemName:void 0,key:a,source:"tooltip",property:"size",boundSeries:this.getFormatterContext("size"),domain:L,fractionDigits:void 0});b.push({label:l,fallbackLabel:a,value:I??VZ(C)})}const x=c==null?void 0:m[c];if(x!=null){const{colorDomain:L}=this,I=p.format(this.callWithContext.bind(this),{type:"number",value:x,datum:m,seriesId:t,legendItemName:void 0,key:c,source:"tooltip",property:"color",boundSeries:this.getFormatterContext("color"),domain:L,fractionDigits:void 0});b.push({label:u,fallbackLabel:c,value:I??VZ(x)})}const w=this.getItemStyle({...f,colorValue:x??f.colorValue},!1),T={shape:"square",fill:w.fill,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0};return N.isGradientFill(T.fill)&&(T.fill={...T.fill,gradient:"linear",rotation:0,reverse:!1}),this.formatTooltipWithContext(d,{title:s==null?void 0:m[s],symbol:{marker:T},data:b},{seriesId:t,datum:m,title:void 0,depth:v,labelKey:s,secondaryLabelKey:o,childrenKey:r,sizeKey:a,sizeName:l,colorKey:c,colorName:u,...w})}createNodeData(){}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.datumSelection.nodes())}animateEmptyUpdateReady(){b5e(this.id,"nodes",this.ctx.animationManager,[this.scalingGroup],{toFn(){return{scalingX:1,scalingY:1}},fromFn(){return{scalingX:0,scalingY:0}}})}computeFocusBounds(e){return e}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}};K1.className="SunburstSeries";K1.type="sunburst";var{commonSeriesOptionsDefs:k5e,sunburstSeriesThemeableOptionsDef:T5e,without:I5e}=N,R5e={...T5e,...I5e(k5e,["highlightStyle","highlight","showInLegend"]),type:ue(ht("sunburst")),labelKey:J,secondaryLabelKey:J,childrenKey:J,sizeKey:J,colorKey:J,sizeName:J,colorName:J},{BASE_FONT_SIZE:HZ,FONT_SIZE_RATIO:WZ}=N,E5e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"sunburst",moduleFactory:e=>new K1(e),solo:!0,themeTemplate:{series:{fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",N.FILL_GRADIENT_RADIAL_REVERSED_SERIES_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"strokes"}]},colorRange:{$palette:"divergingColors"},strokeWidth:{$isUserOption:["./strokes/0",2,0]},label:{...N.LABEL_BOXING_DEFAULTS,fontFamily:{$ref:"fontFamily"},fontSize:{$rem:WZ.LARGE},minimumFontSize:{$rem:9/HZ},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{...N.LABEL_BOXING_DEFAULTS,fontFamily:{$ref:"fontFamily"},fontSize:{$rem:WZ.SMALLEST},minimumFontSize:{$rem:7/HZ},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:{$ref:"chartBackgroundColor"}},secondaryLabel:{color:{$ref:"chartBackgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0,...N.LEGEND_CONTAINER_THEME}}},L5e={type:"series",name:"sunburst",chartType:"standalone",enterprise:!0,options:R5e,create:e=>new K1(e)},{BaseProperties:Y1,HierarchySeriesProperties:P5e,HighlightStyle:N5e,makeSeriesTooltip:O5e,Property:xt,Label:F5e}=N,zae=class extends F5e{constructor(){super(...arguments),this.spacing=0}};D([xt],zae.prototype,"spacing");var Kl=class extends Y1{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new zae}};D([xt],Kl.prototype,"fill");D([xt],Kl.prototype,"fillOpacity");D([xt],Kl.prototype,"stroke");D([xt],Kl.prototype,"strokeWidth");D([xt],Kl.prototype,"strokeOpacity");D([xt],Kl.prototype,"cornerRadius");D([xt],Kl.prototype,"textAlign");D([xt],Kl.prototype,"gap");D([xt],Kl.prototype,"padding");D([xt],Kl.prototype,"interactive");D([xt],Kl.prototype,"label");var Va=class extends Y1{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new Fu,this.secondaryLabel=new eM}};D([xt],Va.prototype,"fill");D([xt],Va.prototype,"fillOpacity");D([xt],Va.prototype,"stroke");D([xt],Va.prototype,"strokeWidth");D([xt],Va.prototype,"strokeOpacity");D([xt],Va.prototype,"cornerRadius");D([xt],Va.prototype,"textAlign");D([xt],Va.prototype,"verticalAlign");D([xt],Va.prototype,"gap");D([xt],Va.prototype,"padding");D([xt],Va.prototype,"label");D([xt],Va.prototype,"secondaryLabel");var ky=class extends Y1{constructor(){super(...arguments),this.label=new Fu}};D([xt],ky.prototype,"fill");D([xt],ky.prototype,"fillOpacity");D([xt],ky.prototype,"stroke");D([xt],ky.prototype,"strokeWidth");D([xt],ky.prototype,"strokeOpacity");D([xt],ky.prototype,"label");var Ug=class extends Y1{constructor(){super(...arguments),this.label=new Fu,this.secondaryLabel=new eM}};D([xt],Ug.prototype,"fill");D([xt],Ug.prototype,"fillOpacity");D([xt],Ug.prototype,"stroke");D([xt],Ug.prototype,"strokeWidth");D([xt],Ug.prototype,"strokeOpacity");D([xt],Ug.prototype,"label");D([xt],Ug.prototype,"secondaryLabel");var oj=class extends N5e{constructor(){super(!1),this.group=new ky,this.tile=new Ug}getStyle(e){return e?this.tile:this.group}};D([xt],oj.prototype,"group");D([xt],oj.prototype,"tile");var Fc=class extends P5e{constructor(){super(...arguments),this.highlightStyle=new oj,this.tooltip=O5e(),this.group=new Kl,this.tile=new Va,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}getStyle(e,t,i,n){const{fillOpacity:s,strokeWidth:o,strokeOpacity:r,fill:a=e?t[n%t.length]:t[Math.min(n,t.length)],stroke:l=e?i[n%t.length]:i[Math.min(n,i.length)]}=e?this.tile:this.group;return{fill:a,fillOpacity:s,stroke:l,strokeWidth:o,strokeOpacity:r,opacity:1}}};D([xt],Fc.prototype,"sizeName");D([xt],Fc.prototype,"labelKey");D([xt],Fc.prototype,"secondaryLabelKey");D([xt],Fc.prototype,"itemStyler");D([xt],Fc.prototype,"highlightStyle");D([xt],Fc.prototype,"tooltip");D([xt],Fc.prototype,"group");D([xt],Fc.prototype,"tile");D([xt],Fc.prototype,"undocumentedGroupFills");D([xt],Fc.prototype,"undocumentedGroupStrokes");var{createDatumId:B5e,Rect:jZ,Group:UZ,BBox:Gv,Selection:B2,Text:_2,Transformable:_5e,applyShapeStyle:z5e,getLabelStyles:G5e,mergeDefaults:$Z,formatValue:KZ}=N,V5e=class extends N.HierarchyNode{constructor(){super(...arguments),this.labelValue=void 0,this.secondaryLabelValue=void 0,this.label=void 0,this.secondaryLabel=void 0,this.bbox=void 0,this.padding=void 0}};function Dp(e){return e.children.length>0?e.sumSize-e.sizeValue:e.sizeValue}var YZ={left:0,center:.5,right:1},H5e={top:0,middle:.5,bottom:1};(class extends N.Group{distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}});var X1=class extends N.HierarchySeries{constructor(){super(...arguments),this.NodeClass=V5e,this.properties=new Fc,this.rectGroup=this.contentGroup.appendChild(new UZ),this.datumSelection=B2.select(this.rectGroup,jZ),this.labelSelection=B2.select(this.labelGroup,UZ),this.highlightSelection=B2.select(this.rectGroup,jZ)}groupTitleHeight(e,t){const{labelValue:i}=e,{label:n}=this.properties.group,s=3;if(i!=null){if(n.fontSize>t.width/s||n.fontSize>t.height/s)return;{const{height:o}=ei(n).measureLines(i);return Math.max(o,n.fontSize)}}}getNodePadding(e,t){if(e.parent==null)return{top:0,right:0,bottom:0,left:0};if(e.children.length===0){const{padding:r}=this.properties.tile;return{top:r,right:r,bottom:r,left:r}}const{label:{spacing:i},padding:n}=this.properties.group,s=this.groupTitleHeight(e,t),o=s==null?0:s+i;return{top:n+o,right:n,bottom:n,left:n}}sortChildren({children:e}){const t=Array.from(e,(n,s)=>s).filter(n=>Dp(e[n])>0).sort((n,s)=>Dp(e[s])-Dp(e[n]));return{sortedChildrenIndices:t,childAt:n=>{const s=t[n];return e[s]}}}squarify(e,t){const{datum:i,children:n}=e;if(t.width<=0||t.height<=0){e.bbox=void 0,e.padding=void 0,e.midPoint.x=Number.NaN,e.midPoint.y=Number.NaN;return}const s=i==null?{top:0,right:0,bottom:0,left:0}:this.getNodePadding(e,t);e.parent==null?(e.bbox=void 0,e.padding=void 0,e.midPoint.x=Number.NaN,e.midPoint.y=Number.NaN):(e.bbox=t,e.padding=s,e.midPoint.x=t.x+t.width/2,e.midPoint.y=t.y);const{sortedChildrenIndices:o,childAt:r}=this.sortChildren(e),a=o.every(T=>n[T].children.length===0),l=1,c=t.width-s.left-s.right,u=t.height-s.top-s.bottom;if(c<=0||u<=0)return;const d=o.length;let p=0,f=0,m=1/0,v=o.reduce((T,L)=>T+Dp(n[L]),0);const b=new Gv(t.x+s.left,t.y+s.top,c,u),C=b.clone();let x=0;for(;x<d;){const T=Dp(r(x)),L=Dp(r(f)),I=C.width<C.height;p+=T;const R=I?C.height:C.width,O=I?C.width:C.height,_=O*L/p;let B=R*p/v;const V=Math.max(_,B)/Math.min(_,B),j=Math.abs(l-V);if(j<m){m=j,x++;continue}p-=T,B=R*p/v;let K=I?C.x:C.y;for(let Y=f;Y<x;Y++){const G=r(Y),$=Dp(G),W=I?K:C.x,Q=I?C.y:K,q=O*$/p,H=I?q:B,U=I?B:q,ee=new Gv(W,Q,H,U);this.applyGap(b,ee,a),this.squarify(G,ee),v-=$,K+=q}I?(C.y+=B,C.height-=B):(C.x+=B,C.width-=B),f=x,p=0,m=1/0}const w=C.width<C.height;let M=w?C.x:C.y;for(let T=f;T<d;T++){const L=r(T),I=w?M:C.x,R=w?C.y:M,O=Dp(L)/v,_=C.width*(w?O:1),B=C.height*(w?1:O),V=new Gv(I,R,_,B);this.applyGap(b,V,a),this.squarify(L,V),M+=w?_:B}}applyGap(e,t,i){const n=i?this.properties.tile.gap*.5:this.properties.group.gap*.5,s=l=>({left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height}),o=s(e),r=s(t),a=["top","right","bottom","left"];for(const l of a)Jt(o[l],r[l])||t.shrink(n,l)}createNodeData(){}getItemStyle(e,t,i){const{properties:n,colorScale:s}=this,{itemStyler:o}=n,r=e.datumIndex?.[0]??0,a=t?n.fills:n.undocumentedGroupFills,l=t?n.strokes:n.undocumentedGroupStrokes,c=t?r:e.depth??-1,u=i?n.highlightStyle.getStyle(t):void 0,d=$Z(u,n.getStyle(t,a,l,c));!i&&t&&e.colorValue!=null&&(d.fill=s.convert(e.colorValue));let p=d;if(o!=null&&e!=null){const f=this.cachedDatumCallback(B5e(this.getDatumId(e),i?"highlight":"node"),()=>{const m=this.makeItemStylerParams(e,i,p);return this.callWithContext(o,m)});f&&(p=$Z(f,p))}return p}makeItemStylerParams(e,t,i){const{id:n}=this,s=this.ctx.highlightManager?.getActiveHighlight(),o=this.getHighlightStateString(s,t,e.datumIndex),r=this.filterItemStylerFillParams(i.fill)??i.fill;return{seriesId:n,datum:e.datum,depth:e.depth??-1,highlighted:t,highlightState:o,...i,fill:r}}updateSelections(){let e=this.ctx.highlightManager?.getActiveHighlight();if(e!=null&&!this.properties.group.interactive&&e.children.length!==0&&(e=void 0),this.highlightSelection.update(e==null?[]:[e],void 0,s=>this.getDatumId(s)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:t}=this.chart??{};if(!t)return;const i=Array.from(this.rootNode),n=s=>{s.append([new _2({tag:0}),new _2({tag:1})])};this.datumSelection.update(i,void 0,s=>this.getDatumId(s)),this.labelSelection.update(i,n,s=>this.getDatumId(s))}updateNodes(){const{rootNode:e,data:t}=this,{childrenKey:i,colorKey:n,colorName:s,labelKey:o,secondaryLabelKey:r,sizeKey:a,sizeName:l,highlightStyle:c,tile:u,group:d}=this.properties,{seriesRect:p}=this.chart??{};if(!p||!t)return;this.rootNode?.walk(w=>{const{datum:M,depth:T,children:L}=w,I=L.length===0,R=I?u.label:d.label;let O;if(R.enabled&&M!=null&&T!=null&&o!=null){const B=M[o];O=this.getLabelText(B,M,o,"label",[],R,{depth:T,datum:M,childrenKey:i,colorKey:n,colorName:s,labelKey:o,secondaryLabelKey:r,sizeKey:a,sizeName:l,value:B})}O===""&&(O=void 0);let _;if(u.secondaryLabel.enabled&&I&&M!=null&&T!=null&&r!=null){const B=M[r];_=this.getLabelText(B,M,r,"secondaryLabel",[],u.secondaryLabel,{depth:T,datum:M,childrenKey:i,colorKey:n,colorName:s,labelKey:o,secondaryLabelKey:r,sizeKey:a,sizeName:l,value:B})}_===""&&(_=void 0),w.labelValue=Gt(O),w.secondaryLabelValue=Gt(_)});const{width:f,height:m}=p;this.squarify(e,new Gv(0,0,f,m)),this.rootNode?.walk(w=>{const{bbox:M,children:T,labelValue:L,secondaryLabelValue:I}=w;if(w.label=void 0,w.secondaryLabel=void 0,M!=null)if(T.length===0){const R={width:M.width,height:M.height,meta:null},O=TW(L,this.properties.tile.label,I,this.properties.tile.secondaryLabel,{padding:u.padding},()=>R);if(O==null)return;const{height:_,label:B,secondaryLabel:V}=O,{textAlign:j,verticalAlign:K,padding:Y}=u,G=YZ[j]??.5,$=M.x+Y+(M.width-2*Y)*G,W=H5e[K]??.5,Q=M.y+Y+_*.5+(M.height-2*Y-_)*W;if(B!=null){const{fontStyle:q="normal",fontFamily:H,fontWeight:U="normal",color:ee="black"}=this.properties.tile.label;w.label={text:B.text,fontSize:B.fontSize,lineHeight:B.lineHeight,fontStyle:q,fontFamily:H,fontWeight:U,color:ee,textAlign:j,verticalAlign:"middle",x:$,y:Q-(_-B.height)*.5}}if(V!=null){const{fontStyle:q="normal",fontFamily:H,fontWeight:U="normal",color:ee="black"}=this.properties.tile.secondaryLabel;w.secondaryLabel={text:V.text,fontSize:V.fontSize,lineHeight:V.fontSize,fontStyle:q,fontFamily:H,fontWeight:U,color:ee,textAlign:j,verticalAlign:"middle",x:$,y:Q+(_-V.height)*.5}}}else{if(L==null)return;{const{padding:R,textAlign:O}=d,_=this.groupTitleHeight(w,M);if(_==null)return;const B=M.width-2*R,V=Xp(L,{maxWidth:M.width-2*R,font:d.label,textWrap:"never"}),j=YZ[O]??.5,{fontStyle:K="normal",fontFamily:Y,fontWeight:G="normal",color:$="black"}=this.properties.group.label;w.label={text:V,fontSize:d.label.fontSize,lineHeight:fc(d.label.fontSize),fontStyle:K,fontFamily:Y,fontWeight:G,color:$,textAlign:O,verticalAlign:"middle",x:M.x+R+B*j,y:M.y+R+_*.5}}}});const v={series:new Gv(0,0,f,m),axis:new Gv(0,0,f,m)},b=(w,M,T)=>{const{bbox:L}=w;if(L==null){M.visible=!1;return}const{depth:I=-1}=w,R=w.children.length===0,O=this.getItemStyle(w,R,T);M.crisp=!0,z5e(M,O,v),M.cornerRadius=R?u.cornerRadius:d.cornerRadius,M.zIndex=[0,I,T?1:0];const _=w.parent?.children.every(j=>j.children.length===0),B=w.parent==null?void 0:w.parent.bbox,V=w.parent==null?void 0:w.parent.padding;_===!0&&B!=null&&V!=null?(M.clipBBox=L,M.x=B.x+V.left,M.y=B.y+V.top,M.width=B.width-(V.left+V.right),M.height=B.height-(V.top+V.bottom)):(M.clipBBox=void 0,M.x=L.x,M.y=L.y,M.width=L.width,M.height=L.height),M.visible=!0};this.datumSelection.each((w,M)=>b(M,w,!1)),this.highlightSelection.each((w,M)=>{b(M,w,!0)});const C=(w,M,T,L)=>{const I=w.children.length===0,R=T===0?w.label:w.secondaryLabel;if(R==null){M.visible=!1;return}const O=T===0?u.label:u.secondaryLabel;let _;if(L){const{tile:K,group:Y}=c;_=K.secondaryLabel.color,I?T===0&&(_=K.label.color):_=Y.label.color}const B={childrenKey:this.properties.childrenKey,colorKey:this.properties.colorKey,colorName:this.properties.colorName??this.properties.colorKey,depth:w.depth??Number.NaN,labelKey:this.properties.labelKey,secondaryLabelKey:this.properties.secondaryLabelKey,sizeKey:this.properties.sizeKey,sizeName:this.properties.sizeName??this.properties.sizeKey},V=this.ctx.highlightManager?.getActiveHighlight(),j=G5e(this,w,B,O,L,V);M.text=R.text,M.fontSize=R.fontSize,M.lineHeight=R.lineHeight,M.fontStyle=R.fontStyle,M.fontFamily=R.fontFamily,M.fontWeight=R.fontWeight,M.fill=_??R.color,M.fillOpacity=this.getHighlightStyle(L,w.datumIndex)?.opacity??1,M.textAlign=R.textAlign,M.textBaseline=R.verticalAlign,M.x=R.x,M.y=R.y,M.setBoxing(j),M.visible=!0,M.zIndex=1},x=this.ctx.highlightManager?.getActiveHighlight();for(const w of this.labelSelection.selectByClass(_2)){const M=w.closestDatum();C(M,w,w.tag,M===x)}}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);return t.sort((i,n)=>n.datumIndex.length-i.datumIndex.length),t}pickNodeClosestDatum(e){const t=this.pickNodesExactShape(e);return t.length!==0?{datum:t[0],distance:0}:this.pickNodeNearestDistantObject(e,this.datumSelection.nodes())}getTooltipContent(e){const{id:t,properties:i,ctx:n}=this,{formatManager:s}=n,{labelKey:o,secondaryLabelKey:r,childrenKey:a,sizeKey:l,sizeName:c,colorKey:u,colorName:d,tooltip:p}=i,f=e.reduce((O,_)=>O?.children[_],this.rootNode);if(f==null)return;const{datum:m,depth:v,children:b}=f;if(m==null||v==null)return;const C=b.length===0,x=[],w=l==null?void 0:m[l];if(w!=null){const O=[0,this.rootNode?.sumSize??0],_=s.format(this.callWithContext.bind(this),{type:"number",value:w,datum:m,seriesId:t,legendItemName:void 0,key:l,source:"tooltip",property:"size",boundSeries:this.getFormatterContext("size"),domain:O,fractionDigits:void 0});x.push({label:c,fallbackLabel:l,value:_??KZ(w)})}const M=u==null?void 0:m[u];if(M!=null){const{colorDomain:O}=this,_=s.format(this.callWithContext.bind(this),{type:"number",value:M,datum:m,seriesId:t,legendItemName:void 0,key:u,source:"tooltip",property:"color",boundSeries:this.getFormatterContext("color"),domain:O,fractionDigits:void 0});x.push({label:d,fallbackLabel:u,value:_??KZ(M)})}const T=this.getItemStyle({...f,colorValue:M??f.colorValue},C,!1),I={shape:"square",fill:T.fill,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0};N.isGradientFill(I.fill)&&(I.fill={...I.fill,gradient:"linear",rotation:0,reverse:!1});const R=C?{marker:I}:void 0;return this.formatTooltipWithContext(p,{title:o==null?void 0:m[o],symbol:R,data:x},{seriesId:t,datum:m,title:void 0,depth:v,labelKey:o,secondaryLabelKey:r,childrenKey:a,sizeKey:l,sizeName:c,colorKey:u,colorName:d,...T})}computeFocusBounds(e){return _5e.toCanvas(this.contentGroup,e.getBBox())}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.tile.label.itemStyler!=null||this.properties.group.label.itemStyler!=null}};X1.className="TreemapSeries";X1.type="treemap";var{commonSeriesOptionsDefs:W5e,treemapSeriesThemeableOptionsDef:j5e,without:U5e}=N,rj={...j5e,...U5e(W5e,["highlightStyle","highlight","showInLegend"]),type:ue(ht("treemap")),labelKey:J,secondaryLabelKey:J,childrenKey:J,sizeKey:J,colorKey:J,sizeName:J,colorName:J};rj.undocumentedGroupFills=Xe(it(Fe));rj.undocumentedGroupStrokes=Xe(it(Fe));var{FONT_SIZE_RATIO:XZ}=N,$5e={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"treemap",moduleFactory:e=>new X1(e),solo:!0,themeTemplate:{series:{fills:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"fills"},{$applySwitch:[{$path:["/type",void 0,{$value:"$1"}]},{$value:"$1"},["gradient",N.FILL_GRADIENT_LINEAR_DEFAULTS],["pattern",N.FILL_PATTERN_DEFAULTS],["image",N.FILL_IMAGE_DEFAULTS]]}]},strokes:{$applyCycle:[{$size:{$path:["./data",{$path:"/data"}]}},{$palette:"strokes"}]},colorRange:{$palette:"divergingColors"},undocumentedGroupFills:{$palette:"hierarchyColors"},undocumentedGroupStrokes:{$palette:"secondHierarchyColors"},group:{label:{...N.LABEL_BOXING_DEFAULTS,enabled:!0,color:{$ref:"textColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{...N.LABEL_BOXING_DEFAULTS,enabled:!0,color:{$ref:"chartBackgroundColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:1.5},minimumFontSize:{$rem:XZ.SMALLER},fontFamily:{$ref:"fontFamily"},wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{...N.LABEL_BOXING_DEFAULTS,enabled:!0,color:{$ref:"chartBackgroundColor"},fontStyle:void 0,fontWeight:void 0,fontSize:{$ref:"fontSize"},minimumFontSize:{$rem:XZ.SMALLER},fontFamily:{$ref:"fontFamily"},wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:{$isUserOption:["../strokes/0",2,{$isUserOption:["./stroke",2,0]}]},padding:3,gap:1},highlightStyle:{group:{label:{color:{$ref:"textColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:{$ref:"chartBackgroundColor"}},secondaryLabel:{color:{$ref:"chartBackgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0,...N.LEGEND_CONTAINER_THEME}}},K5e={type:"series",name:"treemap",chartType:"standalone",enterprise:!0,options:rj,create:e=>new X1(e)};N.ModuleRegistry;var Y5e=[kVe,Cre,Mre,aWe,DWe,kre,Tre,Ere,Lre,Nre],X5e=[TVe,IVe,RVe,EVe,vUe,v3e,A3e,u$e,w$e],Z5e=[OVe,FUe,JWe,e5e,L5e,K5e,xHe,f5e],q5e=[GVe,Dje,Pje,e4e,b4e,I4e],Q5e=[...Y5e,...X5e,...Z5e,...q5e,JVe,eHe,tHe],J5e=`.ag-watermark{position:absolute;bottom:20px;right:25px;font-weight:700;font-family:Impact,sans-serif;font-size:19px;opacity:.7;animation:1s ease-out 3s ag-watermark-fadeout;color:#9b9b9b;pointer-events:none;&:before{content:"";display:block;height:40px;width:170px;background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);background-repeat:no-repeat;background-size:170px 40px}>span{padding-left:.7rem}}@keyframes ag-watermark-fadeout{0%{opacity:.5}to{opacity:0}}.ag-charts-dialog{display:flex;flex-direction:column;font-size:var(--ag-charts-chrome-font-size-large)}.ag-charts-dialog__tabs{display:flex;flex-direction:column}.ag-charts-dialog__header{border-bottom:1px solid var(--ag-charts-border-color);display:flex}.ag-charts-dialog__tab-list{display:flex;gap:calc(var(--ag-charts-spacing) * 2)}.ag-charts-dialog__drag-handle{align-items:center;color:inherit;cursor:grab;display:flex;padding:1px 6px;text-align:center}.ag-charts-dialog__drag-handle--dragging{cursor:grabbing}.ag-charts-dialog__tab-button{background:none;border:0;border-bottom:2px solid transparent;border-radius:0;color:var(--ag-charts-panel-subtle-text-color);margin-bottom:-1px;padding:var(--input-padding) calc(var(--input-padding) / 2)}.ag-charts-dialog__tab-button:hover{background:none}.ag-charts-dialog__tab-button--active{border-color:var(--ag-charts-accent-color);color:inherit}.ag-charts-dialog__drag-handle+.ag-charts-dialog__tab-button{margin-left:calc(var(--ag-charts-spacing) * -2)}.ag-charts-button.ag-charts-dialog__close-button{background:none;border:0;margin-left:auto;padding:1px 6px}.ag-charts-dialog__close-button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-dialog__tab-panel{display:none;flex-direction:column;gap:calc(var(--ag-charts-spacing) * 4);margin:0 calc(var(--ag-charts-spacing) * 4);padding:calc(var(--ag-charts-spacing) * 4) 0}.ag-charts-dialog__tab-panel--active{display:flex}.ag-charts-dialog__input-group-line{display:flex;gap:16px 18px;flex-wrap:wrap}.ag-charts-dialog__input-group{align-items:center;display:flex;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-dialog__input-group-label{color:var(--ag-charts-panel-subtle-text-color);margin-right:5px}.ag-charts-dialog__input-group-label[for]{cursor:pointer}.ag-charts-dialog__button{border-radius:0;margin-right:-1px}.ag-charts-dialog__button.ag-charts-dialog__button--active{background:var(--ag-charts-button-focus-background-color);border-color:var(--ag-charts-input-focus-border-color);color:var(--ag-charts-input-focus-text-color);z-index:var(--input-layer-active)}.ag-charts-dialog__button:first-child,.ag-charts-dialog__input-group-label+.ag-charts-dialog__button{border-bottom-left-radius:var(--ag-charts-input-border-radius);border-top-left-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__button:last-child{border-bottom-right-radius:var(--ag-charts-input-border-radius);border-top-right-radius:var(--ag-charts-input-border-radius)}.ag-charts-dialog__color-picker-button{--color: #000;background:var(--color);border:none;color:transparent;height:26px;width:26px}.ag-charts-dialog__color-picker-button:hover{background:var(--color)}.ag-charts-dialog__color-picker-button--multi-color,.ag-charts-dialog__color-picker-button--multi-color:hover{background:linear-gradient(135deg,red 0%,#ff0 calc(100% * 1 / 6),#0f0 calc(100% * 2 / 6),#0ff 50%,#00f calc(100% * 4 / 6),#f0f calc(100% * 5 / 6),red 100%)}.ag-charts-color-picker{width:190px;padding:8px;cursor:default;--h: 0;--s: 0;--v: 0;--a: 0;--color: #000;--color-a: #000;--thumb-size: 18px;--inner-width: 172px;--track-height: 12px;--palette-height: 136px;--checker: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="4" height="4"><rect x="0" y="0" width="4" height="4" fill="%23fff"/><path d="M0 0H2V4H4V2H0Z" fill="%23b2b2b2"/></svg>');--multi-color: linear-gradient( 135deg, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-color-picker__content{display:flex;flex-direction:column}.ag-charts-color-picker__palette{position:relative;width:100%;height:var(--palette-height);margin-bottom:8px;background:linear-gradient(to bottom,#0000,#000),linear-gradient(to right,#fff,#fff0) hsl(var(--h),100%,50%);border-radius:calc(var(--ag-charts-border-radius) * 1.5);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__palette:after{content:"";position:absolute;display:block;top:calc(var(--thumb-size) * -.5 + (1 - var(--v)) * 100%);left:calc(var(--thumb-size) * -.5 + var(--s) * 100%);background:var(--color);width:var(--thumb-size);height:var(--thumb-size);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038}.ag-charts-color-picker__palette:focus-visible:after{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),0 0 0 2px #fff8,var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-row{display:flex;gap:8px;align-items:center;margin-bottom:4px;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input,.ag-charts-color-picker__alpha-input{-webkit-appearance:none;display:block;position:relative;padding:0;margin:0 calc(var(--inset) * -1);border:0;height:var(--thumb-size);width:auto;background:transparent;--inset: calc((var(--thumb-size) - var(--track-height)) / 2)}.ag-charts-color-picker__hue-input::-moz-range-thumb,.ag-charts-color-picker__alpha-input::-moz-range-thumb{appearance:none;width:var(--thumb-size);height:var(--thumb-size);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038}.ag-charts-color-picker__hue-input::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{-webkit-appearance:none;width:var(--thumb-size);height:var(--thumb-size);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:var(--box-shadow);--box-shadow: inset 0 0 0 3px white, inset 0 0 1px 3px #0006, 0 0 5px #00000038;transform:translateZ(0)}.ag-charts-color-picker__hue-input::-moz-range-thumb{background:hsl(var(--h),100%,50%)}.ag-charts-color-picker__hue-input::-webkit-slider-thumb{background:hsl(var(--h),100%,50%)}.ag-charts-color-picker__alpha-input::-moz-range-thumb{background:transparent}.ag-charts-color-picker__alpha-input::-webkit-slider-thumb{background:transparent}.ag-charts-color-picker__alpha-input--opaque::-moz-range-thumb{background:var(--color)}.ag-charts-color-picker__alpha-input--opaque::-webkit-slider-thumb{background:var(--color)}.ag-charts-color-picker__hue-input:focus-visible::-moz-range-thumb,.ag-charts-color-picker__alpha-input:focus-visible::-moz-range-thumb{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input:focus-visible::-webkit-slider-thumb,.ag-charts-color-picker__alpha-input:focus-visible::-webkit-slider-thumb{outline:var(--ag-charts-focus-border);box-shadow:var(--box-shadow),var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__hue-input::-moz-range-track,.ag-charts-color-picker__alpha-input::-moz-range-track{position:absolute;content:"";display:block;top:calc(50% - var(--track-height) / 2);left:var(--inset);right:var(--inset);height:var(--track-height);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__hue-input:before,.ag-charts-color-picker__alpha-input:before{position:absolute;content:"";display:block;top:calc(50% - var(--track-height) / 2);left:var(--inset);right:var(--inset);height:var(--track-height);border-radius:calc(var(--ag-charts-border-radius) * 99);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button{width:36px;margin-left:var(--inset);height:var(--track-height);border-radius:calc(var(--ag-charts-border-radius) * 99);border:0;background:var(--multi-color);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__multi-color-button--hidden{display:none}.ag-charts-color-picker__multi-color-button--active{box-shadow:inset 0 0 0 1px #0003;outline-offset:1px;outline:2px solid #2196f3}.ag-charts-color-picker__hue-input{flex:1 0 0}.ag-charts-color-picker__hue-input::-moz-range-track{background:linear-gradient(to right,red,red calc((100% - var(--track-height)) * 0 / 6 + var(--track-height) / 2),#ff0 calc((100% - var(--track-height)) * 1 / 6 + var(--track-height) / 2),#0f0 calc((100% - var(--track-height)) * 2 / 6 + var(--track-height) / 2),#0ff calc((100% - var(--track-height)) * 3 / 6 + var(--track-height) / 2),#00f calc((100% - var(--track-height)) * 4 / 6 + var(--track-height) / 2),#f0f calc((100% - var(--track-height)) * 5 / 6 + var(--track-height) / 2),red calc((100% - var(--track-height)) * 6 / 6 + var(--track-height) / 2))}.ag-charts-color-picker__hue-input:before{background:linear-gradient(to right,red,red calc((100% - var(--track-height)) * 0 / 6 + var(--track-height) / 2),#ff0 calc((100% - var(--track-height)) * 1 / 6 + var(--track-height) / 2),#0f0 calc((100% - var(--track-height)) * 2 / 6 + var(--track-height) / 2),#0ff calc((100% - var(--track-height)) * 3 / 6 + var(--track-height) / 2),#00f calc((100% - var(--track-height)) * 4 / 6 + var(--track-height) / 2),#f0f calc((100% - var(--track-height)) * 5 / 6 + var(--track-height) / 2),red calc((100% - var(--track-height)) * 6 / 6 + var(--track-height) / 2))}.ag-charts-color-picker__alpha-input{margin-bottom:7px}.ag-charts-color-picker__alpha-input::-moz-range-track{background:linear-gradient(to right,transparent,var(--color)),var(--checker) top left / 4px 4px}.ag-charts-color-picker__alpha-input:before{background:linear-gradient(to right,transparent,var(--color)),var(--checker) top left / 4px 4px}.ag-charts-color-picker__color-field{display:flex;border:var(--ag-charts-border);background:var(--ag-charts-background-color);border-radius:var(--ag-charts-border-radius);overflow:hidden}.ag-charts-color-picker__color-field:has(:focus-visible){border-color:var(--ag-charts-accent-color);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-color-picker__color-label{width:16px;height:16px;margin:7px 0 7px 7px;color:transparent;background:linear-gradient(to right,var(--color-a),var(--color-a)),var(--checker) top left / 4px 4px;border-radius:calc(var(--ag-charts-border-radius) / 2);box-shadow:inset 0 0 0 1px #0003}.ag-charts-color-picker__color-label--multi-color{background:var(--multi-color)}.ag-charts-color-picker__color-input{flex:1;min-width:0;padding:7px 7px 7px 8px;border:0;margin:0;color:inherit;background:transparent;font-variant:tabular-nums}.ag-charts-color-picker__color-input:focus-visible{border:none;outline:none}.ag-charts-annotations__line-stroke-width-menu,.ag-charts-annotations__line-style-type-menu,.ag-charts-annotations__text-size-menu{border-top-left-radius:0;border-top-right-radius:0;.ag-charts-menu__row:first-child{border-radius:0}}.ag-charts-annotations__text-size-menu{--item-padding: 4px 8px;min-width:34px;text-align:center}.ag-charts-annotations__line-stroke-width-menu{--item-padding: 6px;column-gap:6px}.ag-charts-annotations__line-style-type-menu{--item-padding: 6px;column-gap:0}.ag-charts-annotations__stroke-width-button:before{background:var(--ag-charts-foreground-color);content:"";margin-right:var(--toolbar-button-padding);height:min(var(--stroke-width),20px);width:12px}.ag-charts-annotations__stroke-width-button[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-annotations__color-picker-button{--emblem: var(--color)}.ag-charts-annotations__color-picker-button--multi-color{--emblem: linear-gradient( to right, #f00 0% , #ff0 calc(100% * 1 / 6), #0f0 calc(100% * 2 / 6), #0ff 50% , #00f calc(100% * 4 / 6), #f0f calc(100% * 5 / 6), #f00 100% )}.ag-charts-annotations__color-picker-button:after{content:"";display:block;position:absolute;bottom:3px;left:5px;right:5px;height:4px;border-radius:99px;box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--ag-charts-foreground-color) 10%,transparent);background:var(--emblem)}.ag-charts-annotations__color-picker-button[aria-disabled=true]:after{filter:grayscale(1);opacity:.5}.ag-charts-annotations__toolbar-menu{min-width:200px}.ag-charts-annotations__axis-button--hidden{display:none}.ag-charts-annotations__axis-button{background-color:var(--ag-charts-crosshair-label-background-color);border-radius:calc(var(--ag-charts-border-radius) / 2);border:none;box-sizing:border-box;color:var(--ag-charts-crosshair-label-text-color);cursor:pointer;font-family:var(--ag-charts-button-font-family);font-size:var(--ag-charts-button-font-size);font-weight:var(--ag-charts-button-font-weight);left:0;line-height:16px;overflow:hidden;padding:0;position:absolute;top:0;user-select:none;white-space:nowrap;z-index:var(--ag-charts-layer-annotations)}.ag-charts-annotations__axis-button:hover{opacity:.8;color:var(--ag-charts-background-color)}.ag-charts-dialog--annotation-settings{min-height:233px;width:289px}.ag-charts-dialog--annotation-settings .ag-charts-textarea{height:calc(10px * 2 + var(--textarea-line-height) * 1em * 3 + 2px);overflow-y:auto;resize:vertical}.ag-charts-context-menu{font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-context-menu__cover{position:fixed;left:0;top:0}.ag-charts-context-menu__menu{background:var(--ag-charts-menu-background-color);border-radius:var(--ag-charts-border-radius);border:var(--ag-charts-menu-border);box-shadow:var(--ag-charts-popup-shadow);color:var(--ag-charts-menu-text-color);display:flex;flex-direction:column;padding:.5em 0;transition:transform .1s ease;white-space:nowrap}.ag-charts-context-menu__menu:focus{outline:none}.ag-charts-context-menu__item{align-items:center;background:none;border:none;box-sizing:border-box;color:inherit;cursor:pointer;display:flex;font:inherit;justify-content:space-between;text-align:left;width:100%;-webkit-appearance:none;-moz-appearance:none}.ag-charts-context-menu__icon>img{width:var(--ag-charts-icon-size);height:var(--ag-charts-icon-size)}.ag-charts-context-menu__icon,.ag-charts-context-menu__cell{display:flex;align-items:center;flex-shrink:0}.ag-charts-context-menu__cell{flex-grow:1}.ag-charts-context-menu__cellpadding{padding:.5em 1em}.ag-charts-context-menu__icon{padding-right:0}.ag-charts-context-menu__item[data-focus-override=true],.ag-charts-context-menu__item:focus,.ag-charts-context-menu__item:active{background:var(--ag-charts-focus-color)}.ag-charts-context-menu__item[data-focus-override=false]{background:inherit}.ag-charts-context-menu__item[data-focus-visible-override=true]:focus,.ag-charts-context-menu__item:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-context-menu__item[data-focus-visible-override=false]{outline:inherit;box-shadow:inherit;z-index:inherit}.ag-charts-context-menu__item[aria-disabled=true]{border:none;color:color-mix(in srgb,var(--ag-charts-input-text-color) 50%,transparent)}.ag-charts-context-menu__item[aria-disabled=true]:focus{background:inherit;cursor:inherit}.ag-charts-context-menu__divider{padding:5px 0}.ag-charts-context-menu__divider:after{content:"";display:block;border-top:1px solid var(--ag-charts-border-color)}.ag-charts-crosshair-label{position:absolute;left:0;top:0;user-select:none;pointer-events:none;font-family:var(--ag-charts-font-family);font-size:var(--ag-charts-font-size);font-weight:var(--ag-charts-font-weight);overflow:hidden;white-space:nowrap;z-index:var(--ag-charts-layer-crosshair);box-sizing:border-box}.ag-charts-crosshair-label-content{padding:0 8px;border-radius:calc(var(--ag-charts-border-radius) / 2);line-height:calc(var(--ag-charts-font-size) + 8px);background-color:var(--ag-charts-crosshair-label-background-color);color:var(--ag-charts-crosshair-label-text-color)}.ag-charts-crosshair-label--hidden{visibility:hidden!important}.ag-charts-text-input{position:absolute}.ag-charts-text-input__textarea{--placeholder-text-color: var(--ag-charts-input-placeholder-text-color);display:block;height:100%;width:100%;border:0;background:none;line-height:1.38;outline:none;transform:translateY(.09em)}.ag-charts-text-input__textarea[placeholder]:empty:before{content:attr(placeholder);color:var(--placeholder-text-color);font-weight:400}.ag-charts-text-input__textarea[placeholder]:not(:empty):before{content:""}.ag-charts-chart-toolbar__menu{min-width:200px}.ag-charts-range-buttons .ag-charts-toolbar__button{padding:var(--toolbar-button-padding) calc(var(--toolbar-button-padding) * 1.5)}.ag-charts-zoom-buttons{align-items:center;display:flex;height:44px;justify-content:center;overflow:hidden;padding-bottom:10px;pointer-events:none;width:100%;.ag-charts-toolbar{--toolbar-size: 24px;--toolbar-button-padding: 1px;display:flex;font-size:var(--ag-charts-chrome-font-size);height:var(--toolbar-size);justify-content:center;opacity:1;pointer-events:auto;transition:opacity .2s ease-in-out,transform .4s ease-in-out;.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius)}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}.ag-charts-toolbar__label{padding-left:var(--ag-charts-spacing);padding-right:var(--ag-charts-spacing)}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{padding-left:0}.ag-charts-toolbar__button--gap{margin-left:var(--toolbar-gap)}&.ag-charts-zoom-buttons__toolbar--hidden{opacity:0;transition:opacity .4s ease-in-out,transform .4s ease-in-out}}}.ag-charts-shared-toolbar{gap:var(--toolbar-gap);.ag-charts-toolbar__button{border-radius:var(--ag-charts-border-radius);margin:0}}
`;N.ModuleRegistry.registerMany(Q5e,qb);function eKe(){N.moduleRegistry.register(r1e,d1e,G1e,SOe,kOe,vFe,h2e,J2e,CHe,rWe,wWe,kBe,HOe,KOe,tFe,BOe,iFe,fFe,QWe,wje,Lje,Jje,v4e,T4e,aGe,MGe,SVe,xBe,yUe,b1e,y3e,M3e,c$e,x$e,F1e,J$e,z1e,gze,A_e,gGe,OUe,g5e,mGe,E5e,PGe,$5e,Yze,eVe),N.enterpriseModule.isEnterprise=!0,N.enterpriseModule.styles=J5e,N.enterpriseModule.licenseManager=e=>new iw(e.container?.ownerDocument??(typeof document>"u"?void 0:document)),N.enterpriseModule.injectWatermark=CVe}eKe();Al.create.bind(Al),Al.__createSparkline.bind(Al),iw.setGridContext.bind(iw),iw.setLicenseKey.bind(iw);const tKe=()=>{const{getMonthlyAttendance:e,isLoading:t,getCounts:i,isLoadingAttendance:n}=K0(),[s,o]=P.useState({}),[r,a]=P.useState({}),[l,c]=P.useState(new Date),[u,d]=P.useState({classes:0,students:0,teachers:0,subjects:0}),p=async v=>{const b=await e(v);if(b.success){if(b.monthlyAttendance.length===0){o({}),a({});return}const C=b.monthlyAttendance.map(M=>({month:new Date(0,M.month-1).toLocaleString("default",{month:"short"}),presentPercentage:parseFloat(M.totalPresent.replace("%","")),absentPercentage:parseFloat(M.totalAbsent.replace("%",""))}));o({data:C,series:[{type:"bar",xKey:"month",yKey:"presentPercentage",yName:"Present",fill:"#6c62ff"},{type:"bar",xKey:"month",yKey:"absentPercentage",yName:"Absent",fill:"oklch(44.4% 0.177 26.899)"}],animation:{enabled:!0,duration:1700}});const x=C.reduce((M,T)=>M+T.presentPercentage,0),w=C.reduce((M,T)=>M+T.absentPercentage,0);a({data:[{category:"Present",value:x},{category:"Absent",value:w,fill:"oklch(44.4% 0.177 26.899)"}],series:[{type:"pie",angleKey:"value",labelKey:"category",title:{text:"Overall Attendance Distribution"},fills:["#6c62ff","oklch(44.4% 0.177 26.899)"]}],animation:{enabled:!0,duration:1700,easing:"easeInOutQuad"}})}else un.error(b.message)},f=v=>{c(v)};return P.useEffect(()=>{const v=l.getFullYear();p(v)},[l]),P.useEffect(()=>{(async()=>{const b=await i();b.success?d(b.counts):un.error(b.message)})()},[i]),t?X.jsx("div",{className:"w-full h-[400px] flex items-center justify-center",children:X.jsx(Do,{className:"animate-spin text-[#6c62ff]"})}):X.jsxs("div",{children:[X.jsxs("div",{className:"flex gap-8 w-full items-center",children:[X.jsx(Yf,{name:"Classes",count:u.classes,icon:X.jsx(dw,{className:" text-xl text-yellow-400 "})}),X.jsx(Yf,{name:"Students",count:u.students,icon:X.jsx(Yz,{className:" text-xl text-blue-500 "})}),X.jsx(Yf,{name:"Teachers",count:u.teachers,icon:X.jsx(bQ,{className:" text-xl text-purple-600 "})}),X.jsx(Yf,{name:"Subjects",count:u.subjects,icon:X.jsx(vQ,{className:" text-xl text-green-600 "})})]}),X.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[X.jsxs("h3",{className:"text-2xl font-semibold",children:["Visual representation of attendance for the year ",l.getFullYear()]}),X.jsx(uJ,{selected:l,onChange:f,dateFormat:"yyyy",showYearPicker:!0,className:"p-2 bg-gray-100 text-gray-700 rounded-md border-2 border-[#6c62ff]  focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto transition duration-150",disabled:t})]}),X.jsx("div",{className:"flex gap-8 h-96 mt-8",children:n?X.jsx("div",{className:"w-full h-[400px] flex items-center justify-center",children:X.jsx(Do,{className:"animate-spin text-[#6c62ff]"})}):X.jsxs(X.Fragment,{children:[X.jsx("div",{className:"w-[900px] h-full",children:X.jsx(k6,{className:"h-full border-2",options:s})}),X.jsx(k6,{className:"border-2",options:r})]})})]})},iKe=({setIsOpen:e})=>{const{user:t}=jr(),[i,n]=P.useState(""),s=()=>{const r=new Date().getHours();r<12?n("Good Morning"):r<18?n("Good Afternoon"):n("Good Evening")};P.useEffect(()=>{s();const r=setInterval(s,6e4);return()=>clearInterval(r)},[]);const o=t?.email.slice(0,1).toUpperCase();return X.jsxs("div",{className:"w-full border-b py-8 h-11 flex justify-between items-center",children:[X.jsxs("div",{className:"flex items-center gap-4",children:[X.jsx(Pme,{onClick:()=>e(r=>!r),className:"ml-2 cursor-e-resize text-gray-500"}),X.jsxs("p",{className:"text-xl font-semibold",children:[i,","," ",t.firstName&&t.secondName?`${t.firstName.charAt(0).toUpperCase()+t.firstName.slice(1)} ${t.secondName.charAt(0).toUpperCase()+t.secondName.slice(1)}`:"Admin"]})]}),X.jsx("div",{className:"flex items-center gap-4",children:X.jsx("div",{className:"w-[40px] h-[40px] font-semibold text-xl text-white mr-3 rounded-full cursor-pointer flex items-center justify-center",style:{backgroundColor:t.color||"rgb(37, 99, 235)"},children:o})})]})},nKe=({isOpen:e})=>{const{user:t}=jr(),i=UR(),n=()=>{localStorage.removeItem("token"),jr.setState({isAuthorized:!1,user:null,token:null}),i("/signin"),bt.success("logged out successfully")},s=({to:o,icon:r,label:a,...l})=>X.jsxs(H7,{to:o,...l,className:({isActive:c})=>Ui("flex items-center gap-3 p-3 rounded-md transition-colors duration-150","hover:bg-[#f3f4ff] hover:text-[#6c62ff]",c&&"bg-[#eceeff] border-r-4 border-[#6c62ff] text-[#6c62ff] font-semibold",e&&"justify-center"),title:e?a:void 0,children:[X.jsx(r,{className:"w-5 h-5 flex-shrink-0"}),X.jsx("span",{className:Ui("truncate",e&&"hidden"),children:a})]});return X.jsxs("aside",{className:Ui("h-screen bg-white border-r flex flex-col transition-all duration-300",e?"w-[50px]":"w-[250px]"),children:[X.jsxs("div",{className:"flex items-center justify-center py-3 border-b",children:[X.jsx("img",{src:U7,alt:"logo",className:"w-10"}),X.jsxs("p",{className:Ui("ml-2 font-semibold resize-none",e&&"hidden"),children:["INTANGO ",X.jsx("span",{className:"text-[#6c62ff]",children:"TSS"}),X.jsx("span",{className:"font-thin ml-1  px-3 py-1 rounded-full border bg-white  transform hover:scale-105 transition-all duration-200",children:t?.role})]})]}),X.jsxs("nav",{className:"flex-1 mt-4 px-2 space-y-1",children:[t?.role.toLowerCase()==="admin"&&X.jsxs(X.Fragment,{children:[X.jsx(s,{to:"/",icon:NO,label:"Dashboard"}),X.jsx(s,{to:"/teachers",icon:bQ,label:"Teachers"}),X.jsx(s,{to:"/students",icon:Yz,label:"Students"}),X.jsx(s,{to:"/classes",icon:dw,label:"Classes"}),X.jsx(s,{to:"/attendance",icon:OO,label:"Attendance"})]}),t?.role.toLowerCase()==="teacher"&&X.jsxs(X.Fragment,{children:[X.jsx(s,{to:"/teacher",end:!0,icon:NO,label:"Dashboard"}),X.jsx(s,{to:"/teacher/students",icon:dw,label:"Students"}),X.jsx(s,{to:"/teacher/classes",icon:dw,label:"Classes"}),X.jsx(s,{to:"/teacher/attendance",icon:OO,label:"Attendance"})]}),t?.role.toLowerCase()==="student"&&X.jsxs(X.Fragment,{children:[X.jsx(s,{to:"/student",end:!0,icon:NO,label:"Dashboard"}),X.jsx(s,{to:"/student/attendance",icon:OO,label:"Attendance"})]})]}),X.jsx("div",{className:Ui("mt-auto mb-4 px-2",e&&"hidden"),children:X.jsxs("div",{className:"border-t-2 pt-3",children:[X.jsxs("button",{onClick:n,className:"flex w-full items-center justify-center gap-2 px-4 py-2 bg-red-500 text-white font-semibold rounded-lg shadow hover:bg-red-700 transition",children:[X.jsx(Eme,{size:20}),X.jsx("span",{children:"Logout"})]}),X.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:t?.email})]})})]})},aj=({setState:e,name:t})=>X.jsxs("div",{className:"flex w-full justify-between items-center border-2 p-3 rounded-lg",children:[X.jsx("h3",{className:"font-semibold text-2xl",children:t}),X.jsxs("button",{onClick:()=>e(i=>!i),className:"bg-[#6c62ff] px-5 py-3 rounded-lg text-white flex items-center gap-2",children:[X.jsx(Ome,{}),"  Add ",t]})]});var Vm=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const n=t?this.allAsyncListeners:this.allSyncListeners;let s=n.get(e);return!s&&i&&(s=new Set,n.set(e,s)),s}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const n=this.getListeners(e,i,!1);n&&(n.delete(t),n.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const{frameworkOverrides:n}=this,s=a=>{const l=n?()=>n.wrapIncoming(a):a;t?this.dispatchAsync(l):l()},o=this.getListeners(i,t,!1);if((o?.size??0)>0){const a=new Set(o);for(const l of a)o?.has(l)&&s(()=>l(e))}const r=this.getGlobalListeners(t);if(r.size>0){const a=new Set(r);for(const l of a)s(()=>l(i,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(const t of e)t()}};function qd(e){return e==null||e===""?null:e}function We(e){return e!=null&&e!==""}function tn(e){return!We(e)}function iz(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function w0(e,t){const i=e?JSON.stringify(e):null,n=t?JSON.stringify(t):null;return i===n}function sKe(e,t,i=!1){const n=e==null,s=t==null;if(e?.toNumber&&(e=e.toNumber()),t?.toNumber&&(t=t.toNumber()),n&&s)return 0;if(n)return-1;if(s)return 1;function o(r,a){return r>a?1:r<a?-1:0}if(typeof e!="string"||!i)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}var oKe=/[&<>"']/g,rKe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function yC(e){return e?.toString().toString()??null}function Mw(e){return yC(e)?.replace(oKe,t=>rKe[t])??null}function nu(e){return e.eRootDiv.getRootNode()}function Cn(e){return nu(e).activeElement}function Ys(e){const{gos:t,eRootDiv:i}=e;let n=null;const s=t.get("getDocument");return s&&We(s)?n=s():i&&(n=i.ownerDocument),n&&We(n)?n:document}function Gae(e){const t=Cn(e);return t===null||t===Ys(e).body}function Vae(e){return Ys(e).defaultView||window}function lj(e){let t=null,i=null;try{t=Ys(e).fullscreenElement}catch{}finally{t||(t=nu(e));const n=t.querySelector("body");n?i=n:t instanceof ShadowRoot?i=t:t instanceof Document?i=t?.documentElement:i=t}return i}function aKe(e){return lj(e)?.clientWidth??(window.innerWidth||-1)}function lKe(e){return lj(e)?.clientHeight??(window.innerHeight||-1)}function Bc(e,t,i){i==null||typeof i=="string"&&i==""?Hae(e,t):_c(e,t,i)}function _c(e,t,i){e.setAttribute(Wae(t),i.toString())}function Hae(e,t){e.removeAttribute(Wae(t))}function Wae(e){return`aria-${e}`}function Hm(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function cKe(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function uKe(e){return e.getAttribute("aria-label")}function hS(e,t){Bc(e,"label",t)}function D0(e,t){Bc(e,"labelledby",t)}function jae(e,t){Bc(e,"live",t)}function dKe(e,t){Bc(e,"atomic",t)}function hKe(e,t){Bc(e,"relevant",t)}function pKe(e,t){Bc(e,"invalid",t)}function gKe(e,t){Bc(e,"disabled",t)}function Uae(e,t){Bc(e,"hidden",t)}function nz(e,t){_c(e,"expanded",t)}function fKe(e,t){_c(e,"setsize",t)}function mKe(e,t){_c(e,"posinset",t)}function yKe(e,t){_c(e,"rowcount",t)}function $ae(e,t){_c(e,"rowindex",t)}function vKe(e,t){_c(e,"rowspan",t)}function bKe(e,t){_c(e,"colcount",t)}function Kae(e,t){_c(e,"colindex",t)}function SKe(e,t){_c(e,"colspan",t)}function CKe(e,t){_c(e,"sort",t)}function xKe(e){Hae(e,"sort")}function Yae(e,t){Bc(e,"selected",t)}function wKe(e,t){Bc(e,"controls",t)}function DKe(e,t){wKe(e,t.id),D0(t,e.id)}function ZZ(e,t){Bc(e,"owns",t)}function Z1(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var MKe="[tabindex], input, select, button, textarea, [href]",Xae="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Aw(e){return!e||!e.matches("input, select, button, textarea")||!e.matches(Xae)?!1:Fh(e)}function pn(e,t,i={}){const{skipAriaHidden:n}=i;e.classList.toggle("ag-hidden",!t),n||Uae(e,!t)}function AKe(e,t,i={}){const{skipAriaHidden:n}=i;e.classList.toggle("ag-invisible",!t),n||Uae(e,!t)}function M0(e,t){const i="disabled",n=t?o=>o.setAttribute(i,""):o=>o.removeAttribute(i);n(e);const s=e.querySelectorAll("input")??[];for(const o of s)n(o)}function bm(e,t,i){let n=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++n>i)break}else if(e===i)break}return!1}function Ty(e){const{height:t,width:i,borderTopWidth:n,borderRightWidth:s,borderBottomWidth:o,borderLeftWidth:r,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:d,marginRight:p,marginBottom:f,marginLeft:m,boxSizing:v}=window.getComputedStyle(e),b=Number.parseFloat;return{height:b(t||"0"),width:b(i||"0"),borderTopWidth:b(n||"0"),borderRightWidth:b(s||"0"),borderBottomWidth:b(o||"0"),borderLeftWidth:b(r||"0"),paddingTop:b(a||"0"),paddingRight:b(l||"0"),paddingBottom:b(c||"0"),paddingLeft:b(u||"0"),marginTop:b(d||"0"),marginRight:b(p||"0"),marginBottom:b(f||"0"),marginLeft:b(m||"0"),boxSizing:v}}function cj(e){const t=Ty(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function A0(e){const t=Ty(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function Zae(e){const{height:t,marginBottom:i,marginTop:n}=Ty(e);return Math.floor(t+i+n)}function SR(e){const{width:t,marginLeft:i,marginRight:n}=Ty(e);return Math.floor(t+i+n)}function qae(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:n,borderRightWidth:s,borderBottomWidth:o}=Ty(e);return{top:t.top+(i||0),left:t.left+(n||0),right:t.right+(s||0),bottom:t.bottom+(o||0)}}function CR(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i)),i}function xR(e,t,i){i&&(t*=-1),e.scrollLeft=t}function qr(e){for(;e?.firstChild;)e.firstChild.remove()}function ug(e){e?.parentNode&&e.remove()}function Qae(e){return!!e.offsetParent}function Fh(e){return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!Qae(e)||window.getComputedStyle(e).visibility!=="visible")}function uj(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function iI(e){return()=>{const t=e();return t?dj(t)||Jae(t):!0}}function dj(e){return e.clientWidth<e.scrollWidth}function Jae(e){return e.clientHeight<e.scrollHeight}function wR(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Tu(e,t)}function Tu(e,t){t=hj(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function kw(e,t){t=hj(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function hj(e){return typeof e=="number"?`${e}px`:e}function pj(e){return e instanceof Node||e instanceof HTMLElement}function Ca(e,t,i){i==null||i===""?e.removeAttribute(t):e.setAttribute(t,i.toString())}function Bh(e,t,i){const s=Vae(e).ResizeObserver,o=s?new s(i):null;return o?.observe(t),()=>o?.disconnect()}function _h(e,t){const i=Vae(e);i.requestAnimationFrame?i.requestAnimationFrame(t):i.webkitRequestAnimationFrame?i.webkitRequestAnimationFrame(t):i.setTimeout(t,0)}var ele="data-ref",z2;function qZ(){return z2??(z2=document.createTextNode(" ")),z2.cloneNode()}function lM(e){const{attrs:t,children:i,cls:n,ref:s,role:o,tag:r}=e,a=document.createElement(r);if(n&&(a.className=n),s&&a.setAttribute(ele,s),o&&a.setAttribute("role",o),t)for(const l of Object.keys(t))a.setAttribute(l,t[l]);if(i)if(typeof i=="string")a.textContent=i;else{let l=!0;for(const c of i)c&&(typeof c=="string"?(a.appendChild(document.createTextNode(c)),l=!1):typeof c=="function"?a.appendChild(c()):(l&&(a.appendChild(qZ()),l=!1),a.append(lM(c)),a.appendChild(qZ())))}return a}var kKe=["touchstart","touchend","touchmove","touchcancel","scroll"],TKe=["wheel"],G2={},tle=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof G2[i]=="boolean")return G2[i];const n=document.createElement(e[i]||"div");return i="on"+i,G2[i]=i in n}})();function IKe(e,t){return!t||!e?!1:EKe(t).indexOf(e)>=0}function RKe(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function EKe(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():RKe(t)}function LKe(e,t,i){const n=PKe(t);let s;n!=null&&(s={passive:n}),e.addEventListener(t,i,s)}var PKe=e=>{const t=kKe.includes(e),i=TKe.includes(e);if(t)return!0;if(i)return!1};function ile(e,t,i){if(i===0)return!1;const n=Math.abs(e.clientX-t.clientX),s=Math.abs(e.clientY-t.clientY);return Math.max(n,s)<=i}var Tw=(e,t)=>{const i=e.identifier;for(let n=0,s=t.length;n<s;++n){const o=t[n];if(o.identifier===i)return o}return null};function k0(e,t){return e.gos.isElementInThisInstance(t.target)}function NKe(e,t,i){const s=e.getBoundingClientRect().height,o=aKe(i)-2,r=lKe(i)-2;if(!e.offsetParent)return;const l=qae(e.offsetParent),{clientY:c,clientX:u}=t;let d=c-l.top-s/2,p=u-l.left-10;const f=Ys(i),m=f.defaultView||window,v=m.pageYOffset||f.documentElement.scrollTop,b=m.pageXOffset||f.documentElement.scrollLeft;o>0&&p+e.clientWidth>o+b&&(p=o+b-e.clientWidth),p<0&&(p=0),r>0&&d+e.clientHeight>r+v&&(d=r+v-e.clientHeight),d<0&&(d=0),e.style.left=`${p}px`,e.style.top=`${d}px`}var nI=(e,...t)=>{for(const i of t){const[n,s,o,r]=i;n.addEventListener(s,o,r),e.push(i)}},gj=e=>{if(e){for(const[t,i,n,s]of e)t.removeEventListener(i,n,s);e.length=0}},Op=e=>{e.cancelable&&e.preventDefault()};function OKe(e,t){return t}function nle(e){return e?.getLocaleTextFunc()??OKe}function FKe(e,t,i,n){const s=t[i];return e.getLocaleTextFunc()(i,typeof s=="function"?s(n):s,n)}function BKe(e){return(t,i,n)=>e({key:t,defaultValue:i,variableValues:n})}function _Ke(e){return(t,i,n)=>{let s=e?.[t];if(s&&n?.length){let o=0;for(;!(o>=n.length||s.indexOf("${variable}")===-1);)s=s.replace("${variable}",n[o++])}return s??i}}var Ju=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new Vm),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService?.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const n of Object.keys(t)){const s=t[n];s&&i.push(this._setupListener(e,n,s))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;let n;if(zKe(e))e.__addEventListener(t,i),n=()=>(e.__removeEventListener(t,i),null);else{const s=GKe(e);e instanceof HTMLElement?LKe(e,t,i):s?e.addListener(t,i):e.addEventListener(t,i),n=s?()=>(e.removeListener(t,i),null):()=>(e.removeEventListener(t,i),null)}return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==n),null)}setupPropertyListener(e,t){const{gos:i}=this;i.addPropertyEventListener(e,t);const n=()=>(i.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==n),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,n=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=s.changeSet.id}const o={type:"propertyChanged",changeSet:s.changeSet,source:s.source};t(o)};for(const s of e)this.setupPropertyListener(s,n)}getLocaleTextFunc(){return nle(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function zKe(e){return e.__addEventListener!==void 0}function GKe(e){return e.eventServiceType==="global"}var we=class extends Ju{},QZ={};function fj(e,t){QZ[t]||(e(),QZ[t]=!0)}var VKe={pending:!1,funcs:[]},HKe={pending:!1,funcs:[]};function sz(e,t="setTimeout",i){const n=t==="raf"?HKe:VKe;if(n.funcs.push(e),n.pending)return;n.pending=!0;const s=()=>{const o=n.funcs.slice();n.funcs.length=0,n.pending=!1;for(const r of o)r()};t==="raf"?_h(i,s):window.setTimeout(s,0)}function Co(e,t,i){let n;return function(...s){const o=this;window.clearTimeout(n),n=window.setTimeout(function(){e.isAlive()&&t.apply(o,s)},i)}}function JZ(e,t){let i=0;return function(...n){const s=this,o=Date.now();o-i<t||(i=o,e.apply(s,n))}}function WKe(e,t,i,n=100){const s=Date.now();let o=null,r=!1;const a=()=>{o!=null&&(window.clearInterval(o),o=null)};e.addDestroyFunc(a);const l=()=>{const c=Date.now()-s>n;(t()||c)&&(i(),r=!0,a())};l(),r||(o=window.setInterval(l,10))}var sle=new Set(["__proto__","constructor","prototype"]);function jKe(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(const i of Object.keys(e).filter(n=>!sle.has(n)))t(i,e[i])}}function mr(e,t,i=!0,n=!1){We(t)&&jKe(t,(s,o)=>{let r=e[s];r!==o&&(n&&r==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(r={},e[s]=r),eq(o)&&eq(r)&&!Array.isArray(r)?mr(r,o,i,n):(i||o!==void 0)&&(e[s]=o))})}function eq(e){return typeof e=="object"&&e!==null}var mj=class Md{static applyGlobalGridOptions(t){if(!Md.gridOptions)return{...t};let i={};return mr(i,Md.gridOptions,!0,!0),Md.mergeStrategy==="deep"?mr(i,t,!0,!0):i={...i,...t},Md.gridOptions.context&&(i.context=Md.gridOptions.context),t.context&&(Md.mergeStrategy==="deep"&&i.context&&mr(t.context,i.context,!0,!0),i.context=t.context),i}static applyGlobalGridOption(t,i){if(Md.mergeStrategy==="deep"){const n=ole(t);if(n&&typeof n=="object"&&typeof i=="object")return Md.applyGlobalGridOptions({[t]:i})[t]}return i}};mj.gridOptions=void 0;mj.mergeStrategy="shallow";var yj=mj;function ole(e){return yj.gridOptions?.[e]}var rle={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,rowNumbers:!1,enableFilterHandlers:!1},ale="https://www.ag-grid.com";function Wm(e,t,...i){e.get("debug")&&console.log("AG Grid: "+t,...i)}function Iw(e,...t){fj(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function kb(e,...t){fj(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}var lle=new Set,DR={},Sm={},sI,cle=!1,ule=!1,UKe=!1;function $Ke(e){const[t,i]=e.version.split(".")||[],[n,s]=sI.split(".")||[];return t===n&&i===s}function KKe(e){sI||(sI=e.version);const t=n=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${n} Please update all modules to the same version.`;e.version?$Ke(e)||kb(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${sI}.`)):kb(t(`'${e.moduleName}' is incompatible.`));const i=e.validate?.();i&&!i.isValid&&kb(`${i.message}`)}function T0(e,t,i=!1){i||(cle=!0),KKe(e);const n=e.rowModels??["all"];lle.add(e);let s;t!==void 0?(ule=!0,Sm[t]===void 0&&(Sm[t]={}),s=Sm[t]):s=DR;for(const o of n)s[o]===void 0&&(s[o]={}),s[o][e.moduleName]=e;if(e.dependsOn)for(const o of e.dependsOn)T0(o,t,i)}function YKe(e){delete Sm[e]}function oz(e,t,i){const n=s=>!!DR[s]?.[e]||!!Sm[t]?.[s]?.[e];return n(i)||n("all")}function vj(){return ule}function XKe(e,t){const i=Sm[e]??{};return[...Object.values(DR.all??{}),...Object.values(i.all??{}),...Object.values(DR[t]??{}),...Object.values(i[t]??{})]}function ZKe(){return new Set(lle)}function qKe(e,t){const i=Sm[e]??{};return[...Object.values(i.all??{}),...Object.values(i[t]??{})]}function QKe(){return cle}function JKe(){return UKe}var Iy=class{static register(e){T0(e,void 0)}static registerModules(e){for(const t of e)T0(t,void 0)}},Ge="34.3.1",tq=2e3,iq=100,dle="_version_",hle=null,Tb=`${ale}/javascript-data-grid`;function eYe(e){hle=e}function tYe(e){Tb=e}function ple(e,t,i){return hle?.(e,t)??[oYe(e,t,i)]}function bj(e,t,i,n,s){e(`${n?"warning":"error"} #${t}`,...ple(t,i,s))}function iYe(e){if(!e)return String(e);const t={};for(const i of Object.keys(e))typeof e[i]!="object"&&typeof e[i]!="function"&&(t[i]=e[i]);return JSON.stringify(t)}function nYe(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=iYe(e)),t}function MR(e){return e===void 0?"undefined":e===null?"null":e}function rz(e,t){return`${e}?${t.toString()}`}function sYe(e,t,i){const n=Array.from(t.entries()).sort((o,r)=>r[1].length-o[1].length);let s=rz(e,t);for(const[o,r]of n){if(o===dle)continue;const a=s.length-i;if(a<=0)break;const l="...",c=a+l.length,u=r.length-c>iq?r.slice(0,r.length-c)+l:r.slice(0,iq)+l;t.set(o,u),s=rz(e,t)}return s}function gle(e,t){const i=new URLSearchParams;if(i.append(dle,Ge),t)for(const o of Object.keys(t))i.append(o,nYe(t[o]));const n=`${Tb}/errors/${e}`,s=rz(n,i);return s.length<=tq?s:sYe(n,i,tq)}var oYe=(e,t,i)=>{const n=gle(e,t);return`${`${i?i+` 
`:""}Visit ${n}`}${i?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function Ee(...e){bj(Iw,e[0],e[1],!0)}function Mi(...e){bj(kb,e[0],e[1],!1)}function cw(e,t,i){bj(kb,e,t,!1,i)}function rYe(e,t){const i=t[0];return`error #${i} `+ple(i,t[1],e).join(" ")}function Iu(...e){return rYe(void 0,e)}function fle(e,t){return e.get("rowModelType")===t}function Ln(e,t){return fle(e,"clientSide")}function Ry(e,t){return fle(e,"serverSide")}function wo(e,t){return e.get("domLayout")===t}function Cm(e){return kR(e)!==void 0}function mle(e){return typeof e.get("getRowHeight")=="function"}function aYe(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function dg(e,t,i=!1,n){const{gos:s,environment:o}=e;if(n==null&&(n=o.getDefaultRowHeight()),mle(s)){if(i)return{height:n,estimated:!0};const l={node:t,data:t.data},c=s.getCallback("getRowHeight")(l);if(az(c))return c===0&&Ee(23),{height:Math.max(1,c),estimated:!1}}if(t.detail&&s.get("masterDetail"))return lYe(s);const r=s.get("rowHeight");return{height:r&&az(r)?r:n,estimated:!1}}function lYe(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return az(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function xm(e){const{environment:t,gos:i}=e,n=i.get("rowHeight");if(!n||tn(n))return t.getDefaultRowHeight();const s=t.refreshRowHeightVariable();return s!==-1?s:(Ee(24),t.getDefaultRowHeight())}function az(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function yle(e,t,i){const n=t[e.getDomDataKey()];return n?n[i]:void 0}function jm(e,t,i,n){const s=e.getDomDataKey();let o=t[s];tn(o)&&(o={},t[s]=o),o[i]=n}function Ib(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function vle(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||wo(e,"print"))}function pu(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function lz(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function ble(e){return e.get("grandTotalRow")}function Sle(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function Cle(e,t,i){return!!t.group&&!t.footer&&Sle(e,i)}function pS(e){const t=e.getCallback("getRowId");return t===void 0?t:i=>{let n=t(i);return typeof n!="string"&&(fj(()=>Ee(25,{id:n}),"getRowIdString"),n=String(n)),n}}function cYe(e,t){const i=e.get("groupHideParentOfSingleChild");return!!(i===!0||i==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function uYe(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function Rb(e){return e?.checkboxes??!0}function oI(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function AR(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function V2(e){return e?.hideDisabledCheckboxes??!1}function dYe(e){return typeof e.get("rowSelection")!="string"}function hg(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function xle(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const i=e.get("suppressRowClickSelection"),n=e.get("suppressRowDeselection");return i&&n?!1:i?"enableDeselection":n?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function hYe(e){const t=xle(e);return t===!0||t==="enableSelection"}function pYe(e){const t=xle(e);return t===!0||t==="enableDeselection"}function cz(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function kR(e){const t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t?.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function TR(e){return kR(e)==="multiRow"}function gYe(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function IR(e){const t=e.get("rowSelection");if(typeof t=="string"){const i=e.get("groupSelectsChildren"),n=e.get("groupSelectsFiltered");return i&&n?"filteredDescendants":i?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function wle(e,t=!0){const i=e.get("rowSelection");return typeof i!="object"?t?"all":void 0:i.mode==="multiRow"?i.selectAll:"all"}function fYe(e){const t=e.get("rowSelection");return typeof t=="string"?!1:t?.mode==="multiRow"?t.ctrlASelectsRows??!1:!1}function I0(e){const t=IR(e);return t==="descendants"||t==="filteredDescendants"}function nq(e){const t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function mYe(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function xa(e){return e.get("columnMenu")==="legacy"}function yYe(e){return!xa(e)}function vYe(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function bYe(e,t,i){typeof e!="object"&&(e={});const n={...e};for(const s of i){const o=t[s];typeof o<"u"&&(n[s]=o)}return n}function SYe(e,t){if(!e)return;const i={};let n=!1;for(const r of Object.keys(e))i[r]=e[r],n=!0;if(!n)return;const s={type:"gridOptionsChanged",options:i};t.dispatchEvent(s);const o={type:"componentStateChanged",...i};t.dispatchEvent(o)}function ct(e,t){return e.addCommon(t)}function rI(e,t){return e[t]??e.gridOptions?.[t]??ole(t)??rle[t]}function sq({gos:e},t){return t.button===2||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var CYe={resizable:!0,sortable:!0},xYe=0;function Dle(){return xYe++}function pg(e){return e instanceof Ey}var Ey=class extends we{constructor(e,t,i,n){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=n,this.isColumn=!0,this.instanceId=Dle(),this.autoHeaderHeight=null,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new Vm,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=Mw(i)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}setState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:i,colFlex:n}}=this;t?.initCol(this);const s=e.hide;s!==void 0?this.visible=!s:this.visible=!e.initialHide,i?.initCol(this),n?.initCol(this)}setColDef(e,t,i){const n=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),n&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",i)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.setState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:i}}=this,n=e.get("suppressFieldDotNotation");this.fieldContainsDots=We(t)&&t.includes(".")&&!n,this.tooltipFieldContainsDots=We(i)&&i.includes(".")&&!n}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:i=>{const n=e.recreateColDef(this.colDef);this.setColDef(n,n,i.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=e.width,n=e.initialWidth;return i!=null?t=i:n!=null?t=n:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);const i=this.frameworkEventListenerService?.wrap(e,t)??t;this.colEventSvc.addEventListener(e,i)}removeEventListener(e,t){const i=this.frameworkEventListenerService?.unwrap(e,t)??t;this.colEventSvc.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return ct(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable({rowNode:e,column:this})??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??CYe[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}createColumnEvent(e,t){return ct(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return tn(this.sort)}isSorting(){return We(this.sort)}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){return Ee(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const i=e===!0;this.visible!==i&&(this.visible=i,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e?.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e?.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return ct(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(tn(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(tn(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchColEvent(e,t,i){const n=this.createColumnEvent(e,t);i&&mr(n,i),this.colEventSvc.dispatchEvent(n)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function Ho(e){return e instanceof aI}var aI=class extends we{constructor(e,t,i,n){super(),this.colGroupDef=e,this.groupId=t,this.padding=i,this.level=n,this.isColumn=!1,this.expandable=!1,this.instanceId=Dle(),this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)pg(t)?e(t):Ho(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(const t of this.children)pg(t)?e.push(t):Ho(t)&&t.addLeafColumns(e)}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);for(const t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(const t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const n=this.findChildrenRemovingPadding();for(let o=0,r=n.length;o<r;o++){const a=n[o];if(!a.isVisible())continue;const l=a.getColumnGroupShow();l==="open"?(e=!0,i=!0):l==="closed"?(t=!0,i=!0):(e=!0,t=!0)}const s=e&&t&&i;this.expandable!==s&&(this.expandable=s,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{for(const n of i)Ho(n)&&n.isPadding()?t(n.children):e.push(n)};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},wYe={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function oq(e,t,i){const n={},s=e.gos;return Object.assign(n,s.get("defaultColGroupDef")),Object.assign(n,t),s.validateColDef(n,i),n}var DYe=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=iz(e);let i=0;for(;;){let n=e??t;if(n?i!==0&&(n+="_"+i):n=i,!this.existingKeys[n]){const s=String(n);return e&&i>0&&Ee(273,{providedId:e,usedId:s}),this.existingKeys[s]=!0,s}i++}}};function Ni(e){if(e?.length)return e[e.length-1]}function $g(e,t,i){if(e===t)return!0;if(!e||!t)return e==null&&t==null;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s]&&!i?.(e[s],t[s]))return!1;return!0}function Vx(e,t){if(e)for(const i of e)t(i)}function Cc(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function rq(e,t,i){for(let n=0;n<t.length;n++)Cc(e,t[n]);for(let n=t.length-1;n>=0;n--)e.splice(i,0,t[n])}var q1="ag-Grid-AutoColumn",Mle="ag-Grid-SelectionColumn",Ale="ag-Grid-RowNumbersColumn";function kle(e){const t=[],i=n=>{for(let s=0;s<n.length;s++){const o=n[s];pg(o)?t.push(o):Ho(o)&&i(o.getChildren())}};return i(e),t}function Nd(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}function RR(e,t,i){const n={};if(!t)return;Jd(null,t,o=>{n[o.getInstanceId()]=o}),i&&Jd(null,i,o=>{n[o.getInstanceId()]=null});const s=Object.values(n).filter(o=>o!=null);e.context.destroyBeans(s)}function Sj(e){return e.getId().startsWith(q1)}function zh(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(Mle)??!1}function Qd(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(Ale)??!1}function MYe(e){return zh(e)||Qd(e)}function ER(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function AYe(e,t){return $g(e,t,(i,n)=>i.getColId()===n.getColId())}function kYe(e){e.map={};for(const t of e.list)e.map[t.getId()]=t}function Eb(e){return e==="optionsUpdated"?"gridOptionsChanged":e}function Rw(e,t){const i=e===t,n=e.getColDef()===t,s=e.getColId()==t;return i||n||s}var TYe=(e,t)=>(i,n)=>{const s={value1:void 0,value2:void 0};let o=!1;return e&&(e[i]!==void 0&&(s.value1=e[i],o=!0),We(n)&&e[n]!==void 0&&(s.value2=e[n],o=!0)),!o&&t&&(t[i]!==void 0&&(s.value1=t[i]),We(n)&&t[n]!==void 0&&(s.value2=t[n])),s},IYe=(e,t)=>{Ho(e)&&e.setupExpandable(),e.originalParent=t};function RYe(e,t=null,i,n,s){const o=new DYe,{existingCols:r,existingGroups:a,existingColKeys:l}=EYe(n);o.addExistingKeys(l);const c=Tle(e,t,0,i,r,o,a,s),{colGroupSvc:u}=e,d=u?.findMaxDepth(c,0)??0,p=u?u.balanceColumnTree(c,0,d,o):c;return Jd(null,p,IYe),{columnTree:p,treeDepth:d}}function EYe(e){const t=[],i=[],n=[];return e&&Jd(null,e,s=>{if(Ho(s)){const o=s;i.push(o)}else{const o=s;n.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:i,existingColKeys:n}}function Tle(e,t,i,n,s,o,r,a){if(!t)return[];const{colGroupSvc:l}=e,c=new Array(t.length);for(let u=0;u<c.length;u++){const d=t[u];l&&BYe(d)?c[u]=l.createProvidedColumnGroup(n,d,i,s,o,r,a):c[u]=LYe(e,n,d,s,o,a)}return c}function LYe(e,t,i,n,s,o){const r=NYe(i,n);r&&n?.splice(r.idx,1);let a=r?.column;if(a){const l=uz(e,i,a.getColId());a.setColDef(l,i,o),PYe(e,a,l,o)}else{const l=s.getUniqueKey(i.colId,i.field),c=uz(e,i,l);a=new Ey(c,i,l,t),e.context.createBean(a)}return e.dataTypeSvc?.addColumnListeners(a),a}function Ile(e,t,i,n,s,o,r,a){const{sortSvc:l,pinnedCols:c,colFlex:u}=e;i!==void 0&&t.setVisible(!i,a),l&&(l.updateColSort(t,n,a),s!==void 0&&l.setColSortIndex(t,s)),o!==void 0&&c?.setColPinned(t,o),r!==void 0&&u?.setColFlex(t,r)}function PYe(e,t,i,n){Ile(e,t,i.hide,i.sort,i.sortIndex,i.pinned,i.flex,n);const s=t.getFlex();if(!(s!=null&&s>0))if(i.width!=null)t.setActualWidth(i.width,n);else{const o=t.getActualWidth();t.setActualWidth(o,n)}}function NYe(e,t){if(t)for(let i=0;i<t.length;i++){const n=t[i].getUserProvidedColDef();if(!n)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(n.field===e.field)return{idx:i,column:t[i]};continue}if(n===e)return{idx:i,column:t[i]}}}function uz(e,t,i,n){const{gos:s,dataTypeSvc:o}=e,r={},a=s.get("defaultColDef");mr(r,a,!1,!0);const l=OYe(e,r,t,i);l&&FYe(e,l,r);const c=r.cellDataType;mr(r,t,!1,!0),c!==void 0&&(r.cellDataType=c);const u=s.get("autoGroupColumnDef"),d=pu(s);return t.rowGroup&&u&&d&&mr(r,{sort:u.sort,initialSort:u.initialSort},!1,!0),o&&(o.postProcess(r),o.validateColDef(r)),s.validateColDef(r,i,n),r}function OYe(e,t,i,n){const s=e.dataTypeSvc?.updateColDefAndGetColumnType(t,i,n),o=i.type??s??t.type;return t.type=o,o?ER(o):void 0}function FYe(e,t,i){if(!t.length)return;const n=Object.assign({},wYe),s=e.gos.get("columnTypes")||{};for(const o of Object.keys(s)){const r=s[o];o in n?Ee(34,{key:o}):(r.type&&Ee(35),n[o]=r)}for(const o of t){const r=n[o.trim()];r?mr(i,r,!1,!0):Ee(36,{t:o})}}function BYe(e){return e.children!==void 0}function Jd(e,t,i){if(t)for(let n=0;n<t.length;n++){const s=t[n];Ho(s)&&Jd(s,s.getChildren(),i),i(s,e)}}function Rle(e,t){const i=[],n=[],s=[];return e.forEach(r=>{const a=r.getColDef().lockPosition;a==="right"?s.push(r):a==="left"||a===!0?i.push(r):n.push(r)}),t.get("enableRtl")?[...s,...n,...i]:[...i,...n,...s]}function Ele(e,t){let i=!0;return Jd(null,t,n=>{if(!Ho(n))return;const s=n;if(!s.getColGroupDef()?.marryChildren)return;const a=[];for(const p of s.getLeafColumns()){const f=e.indexOf(p);a.push(f)}const l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),u=l-c,d=s.getLeafColumns().length-1;u>d&&(i=!1)}),i}function Lle(e,t){if(!e||e.length==0)return;const i=t(e[0]);for(let n=1;n<e.length;n++)if(i!==t(e[n]))return;return i}function Ple(e,t,i){if(!t.length)return;const n=t.length===1?t[0]:null,s=Lle(t,o=>o.getPinned());e.dispatchEvent({type:"columnPinned",pinned:s??null,columns:t,column:n,source:i})}function _Ye(e,t,i){if(!t.length)return;const n=t.length===1?t[0]:null,s=Lle(t,o=>o.isVisible());e.dispatchEvent({type:"columnVisible",visible:s,columns:t,column:n,source:i})}function zYe(e,t,i,n){e.dispatchEvent({type:t,columns:i,column:i&&i.length==1?i[0]:null,source:n})}function gS(e,t,i,n,s=null){t?.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:s,finished:i,source:n})}function dc(e,t,i){const{colModel:n,rowGroupColsSvc:s,pivotColsSvc:o,autoColSvc:r,selectionColSvc:a,colAnimation:l,visibleCols:c,pivotResultCols:u,environment:d,valueColsSvc:p,eventSvc:f,gos:m}=e,v=n.getColDefCols()??[],b=a?.getColumns();if(!v.length&&!b?.length)return!1;if(t?.state&&!t.state.forEach)return Ee(32),!1;const C=(T,L,I,R,O)=>{if(!T)return;const _=TYe(L,t.defaultState),B=_("flex").value1;if(Ile(e,T,_("hide").value1,_("sort").value1,_("sortIndex").value1,_("pinned").value1,B,i),B==null){const V=_("width").value1;if(V!=null){const j=T.getColDef().minWidth??d.getDefaultColumnMinWidth();j!=null&&V>=j&&T.setActualWidth(V,i)}}O||!T.isPrimary()||(p?.syncColumnWithState(T,i,_),s?.syncColumnWithState(T,i,_,I),o?.syncColumnWithState(T,i,_,R))},x=(T,L,I)=>{const R=Nle(e,i),O=L.slice(),_={},B={},V=[],j=[],K=[];let Y=0;const G=s?.columns.slice()??[],$=o?.columns.slice()??[];for(const q of T){const H=q.colId;if(H.startsWith(q1)){V.push(q),K.push(q);continue}if(zh(H)){j.push(q),K.push(q);continue}const ee=I(H);ee?(C(ee,q,_,B,!1),Cc(O,ee)):(K.push(q),Y+=1)}const W=q=>C(q,null,_,B,!1);O.forEach(W),s?.sortColumns(aq.bind(s,_,G)),o?.sortColumns(aq.bind(o,B,$)),n.refreshCols(!1,i);const Q=(q,H,U=[])=>{for(const ee of H){const ie=q(ee.colId);Cc(U,ie),C(ie,ee,null,null,!0)}U.forEach(W)};return Q(q=>r?.getColumn(q)??null,V,r?.getColumns()?.slice()),Q(q=>a?.getColumn(q)??null,j,a?.getColumns()?.slice()),VYe(t,n,m),c.refresh(i),f.dispatchEvent({type:"columnEverythingChanged",source:i}),R(),{unmatchedAndAutoStates:K,unmatchedCount:Y}};l?.start();let{unmatchedAndAutoStates:w,unmatchedCount:M}=x(t.state||[],v,T=>n.getColDefCol(T));if(w.length>0||We(t.defaultState)){const T=u?.getPivotResultCols()?.list??[];M=x(w,T,L=>u?.getPivotResultCol(L)??null).unmatchedCount}return l?.finish(),M===0}function GYe(e,t){const{colModel:i,autoColSvc:n,selectionColSvc:s,eventSvc:o,gos:r}=e,a=i.getColDefCols();if(!a?.length)return;const l=i.getColDefColTree(),c=kle(l),u=[];let d=1e3,p=1e3;const f=x=>{const w=Ole(x);tn(w.rowGroupIndex)&&w.rowGroup&&(w.rowGroupIndex=d++),tn(w.pivotIndex)&&w.pivot&&(w.pivotIndex=p++),u.push(w)};n?.getColumns()?.forEach(f),s?.getColumns()?.forEach(f),c?.forEach(f),dc(e,{state:u},t);const m=n?.getColumns()??[],C=[...s?.getColumns()??[],...m,...a].map(x=>({colId:x.colId}));dc(e,{state:C,applyOrder:!0},t),o.dispatchEvent(ct(r,{type:"columnsReset",source:t}))}function Nle(e,t){const{rowGroupColsSvc:i,pivotColsSvc:n,valueColsSvc:s,colModel:o,sortSvc:r,eventSvc:a}=e,l={rowGroupColumns:i?.columns.slice()??[],pivotColumns:n?.columns.slice()??[],valueColumns:s?.columns.slice()??[]},c=LR(e),u={};for(const d of c)u[d.colId]=d;return()=>{const d=(L,I,R,O)=>{const _=I.map(O),B=R.map(O);if($g(_,B))return;const j=new Set(I);for(const Y of R)j.delete(Y)||j.add(Y);const K=[...j];a.dispatchEvent({type:L,columns:K,column:K.length===1?K[0]:null,source:t})},p=L=>{const I=[];return o.forAllCols(R=>{const O=u[R.getColId()];O&&L(O,R)&&I.push(R)}),I},f=L=>L.getColId();d("columnRowGroupChanged",l.rowGroupColumns,i?.columns??[],f),d("columnPivotChanged",l.pivotColumns,n?.columns??[],f);const v=p((L,I)=>{const R=L.aggFunc!=null,O=R!=I.isValueActive(),_=R&&L.aggFunc!=I.getAggFunc();return O||_});v.length>0&&zYe(a,"columnValueChanged",v,t),gS(a,p((L,I)=>L.width!=I.getActualWidth()),!0,t),Ple(a,p((L,I)=>L.pinned!=I.getPinned()),t),_Ye(a,p((L,I)=>L.hide==I.isVisible()),t);const M=p((L,I)=>L.sort!=I.getSort()||L.sortIndex!=I.getSortIndex());M.length>0&&r?.dispatchSortChangedEvents(t,M);const T=LR(e);WYe(c,T,t,o,a)}}function LR(e){const{colModel:t,rowGroupColsSvc:i,pivotColsSvc:n}=e,s=t.getColDefCols();if(tn(s)||!t.isAlive())return[];const o=i?.columns,r=n?.columns,a=[],l=u=>{const d=u.isRowGroupActive()&&o?o.indexOf(u):null,p=u.isPivotActive()&&r?r.indexOf(u):null,f=u.isValueActive()?u.getAggFunc():null,m=u.getSort()!=null?u.getSort():null,v=u.getSortIndex()!=null?u.getSortIndex():null;a.push({colId:u.getColId(),width:u.getActualWidth(),hide:!u.isVisible(),pinned:u.getPinned(),sort:m,sortIndex:v,aggFunc:f,rowGroup:u.isRowGroupActive(),rowGroupIndex:d,pivot:u.isPivotActive(),pivotIndex:p,flex:u.getFlex()??null})};t.forAllCols(u=>l(u));const c=new Map(t.getCols().map((u,d)=>[u.getColId(),d]));return a.sort((u,d)=>{const p=c.has(u.colId)?c.get(u.colId):-1,f=c.has(d.colId)?c.get(d.colId):-1;return p-f}),a}function Ole(e){const t=(m,v)=>m??v??null,i=e.getColDef(),n=t(i.sort,i.initialSort),s=t(i.sortIndex,i.initialSortIndex),o=t(i.hide,i.initialHide),r=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let c=t(i.rowGroupIndex,i.initialRowGroupIndex),u=t(i.rowGroup,i.initialRowGroup);c==null&&!u&&(c=null,u=null);let d=t(i.pivotIndex,i.initialPivotIndex),p=t(i.pivot,i.initialPivot);d==null&&!p&&(d=null,p=null);const f=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:s,hide:o,pinned:r,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:p,pivotIndex:d,aggFunc:f}}function VYe(e,t,i){if(!e.applyOrder||!e.state)return;const n=[];for(const s of e.state)s.colId!=null&&n.push(s.colId);HYe(t.cols,n,t,i)}function HYe(e,t,i,n){if(e==null)return;let s=[];const o={};for(const a of t){if(o[a])continue;const l=e.map[a];l&&(s.push(l),o[a]=!0)}let r=0;for(const a of e.list){const l=a.getColId();if(o[l]!=null)continue;l.startsWith(q1)?s.splice(r++,0,a):s.push(a)}if(s=Rle(s,n),!Ele(s,i.getColTree())){Ee(39);return}e.list=s}function WYe(e,t,i,n,s){const o={};for(const u of t)o[u.colId]=u;const r={};for(const u of e)o[u.colId]&&(r[u.colId]=!0);const a=e.filter(u=>r[u.colId]),l=t.filter(u=>r[u.colId]),c=[];l.forEach((u,d)=>{const p=a?.[d];if(p&&p.colId!==u.colId){const f=n.getCol(p.colId);f&&c.push(f)}}),c.length&&s.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,finished:!0,source:i})}var aq=(e,t,i,n)=>{const s=e[i.getId()],o=e[n.getId()],r=s!=null,a=o!=null;if(r&&a)return s-o;if(r)return-1;if(a)return 1;const l=t.indexOf(i),c=t.indexOf(n),u=l>=0,d=c>=0;return u&&d?l-c:u?-1:1},jYe=class extends we{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(Eb(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),Eb(e.source)))}createColsFromColDefs(e){const{beans:t}=this,{valueCache:i,colAutosize:n,rowGroupColsSvc:s,pivotColsSvc:o,valueColsSvc:r,visibleCols:a,eventSvc:l,groupHierarchyColSvc:c}=t,u=this.colDefs?Nle(t,e):void 0;i?.expire();const d=this.colDefCols?.list,p=this.colDefCols?.tree,f=RYe(t,this.colDefs,!0,p,e);RR(t,this.colDefCols?.tree,f.columnTree);const m=f.columnTree,v=f.treeDepth,b=kle(m),C={};for(const x of b)C[x.getId()]=x;this.colDefCols={tree:m,treeDepth:v,list:b,map:C},this.createColumnsForService([c],this.colDefCols,e),s?.extractCols(e,d),o?.extractCols(e,d),r?.extractCols(e,d),this.ready=!0,this.refreshCols(!0,e),a.refresh(e),l.dispatchEvent({type:"columnEverythingChanged",source:e}),u&&(this.changeEventsDispatching=!0,u(),this.changeEventsDispatching=!1),l.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&n?.applyAutosizeStrategy()}refreshCols(e,t){if(!this.colDefCols)return;const i=this.cols?.tree;this.saveColOrder();const{autoColSvc:n,selectionColSvc:s,rowNumbersSvc:o,quickFilter:r,pivotResultCols:a,showRowGroupCols:l,rowAutoHeight:c,visibleCols:u,colViewport:d,eventSvc:p}=this.beans,f=this.selectCols(a,this.colDefCols);this.createColumnsForService([n,s,o],f,t);const m=aYe(this.gos,this.showingPivotResult);(!e||m)&&this.restoreColOrder(f),this.positionLockedCols(f),l?.refresh(),r?.refreshCols(),this.setColSpanActive(),c?.setAutoHeightActive(f),u.clear(),d.clear(),!$g(i,this.cols.tree)&&p.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,i){for(const n of e)n&&(n.createColumns(t,s=>{this.lastOrder=s(this.lastOrder),this.lastPivotOrder=s(this.lastPivotOrder)},i),n.addColumns(t))}selectCols(e,t){const i=e?.getPivotResultCols()??null;this.showingPivotResult=i!=null;const{map:n,list:s,tree:o,treeDepth:r}=i??t;return this.cols={list:s.slice(),map:{...n},tree:o.slice(),treeDepth:r},i&&(i.list.some(l=>this.cols?.map[l.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];const{valueColsSvc:e,selectionColSvc:t,gos:i}=this.beans,n=this.isPivotMode()&&!this.showingPivotResult,s=t?.isSelectionColumnEnabled(),o=i.get("rowNumbers"),r=e?.columns;return this.cols.list.filter(l=>{const c=Sj(l);if(n){const u=r?.includes(l);return c||u||s&&zh(l)||o&&Qd(l)}else return c||l.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,i){dc(this.beans,{state:e.map(n=>({colId:typeof n=="string"?n:n.getColId(),hide:!t}))},i)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const i=t.filter(d=>e.map[d.getId()]!=null);if(i.length===0)return;if(i.length===e.list.length){e.list=i;return}const n=d=>{const p=d.getOriginalParent();return p?p.getChildren().length>1?!0:n(p):!1};if(!i.some(d=>n(d))){const d=new Set(i);for(const p of e.list)d.has(p)||i.push(p);e.list=i;return}const s=new Map;for(let d=0;d<i.length;d++){const p=i[d];s.set(p,d)}const o=e.list.filter(d=>!s.has(d));if(o.length===0){e.list=i;return}const r=(d,p)=>{const f=p?p.getOriginalParent():d.getOriginalParent();if(!f)return null;let m=null,v=null;for(const b of f.getChildren())if(!(b===p||b===d)){if(b instanceof Ey){const C=s.get(b);if(C==null)continue;(m==null||m<C)&&(m=C,v=b);continue}b.forEachLeafColumn(C=>{const x=s.get(C);x!=null&&(m==null||m<x)&&(m=x,v=C)})}return v??r(d,f)},a=[],l=new Map;for(const d of o){const p=r(d,null);if(p==null){a.push(d);continue}const f=l.get(p);f===void 0?l.set(p,d):Array.isArray(f)?f.push(d):l.set(p,[f,d])}const c=new Array(e.list.length);let u=c.length-1;for(let d=a.length-1;d>=0;d--)c[u--]=a[d];for(let d=i.length-1;d>=0;d--){const p=i[d],f=l.get(p);if(f)if(Array.isArray(f))for(let m=f.length-1;m>=0;m--){const v=f[m];c[u--]=v}else c[u--]=f;c[u--]=p}e.list=c}positionLockedCols(e){e.list=Rle(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(e){return this.colDefCols&&this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[],e)}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(e=>e.getColDef().colSpan!=null)}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1,t);const{visibleCols:i,eventSvc:n}=this.beans;i.refresh(t),n.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){const e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);const t=Eb(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){RR(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(e){const{pivotResultCols:t,autoColSvc:i,selectionColSvc:n,groupHierarchyColSvc:s}=this.beans;Vx(this.colDefCols?.list,e),Vx(i?.columns?.list,e),Vx(n?.columns?.list,e),Vx(s?.columns?.list,e),Vx(t?.getPivotResultCols()?.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){return this.cols?.map[e]??null}getColFromCollection(e,t){if(t==null)return null;const{map:i,list:n}=t;if(typeof e=="string"&&i[e])return i[e];for(let a=0;a<n.length;a++)if(Rw(n[a],e))return n[a];const{autoColSvc:s,selectionColSvc:o,groupHierarchyColSvc:r}=this.beans;return s?.getColumn(e)??o?.getColumn(e)??r?.getColumn(e)??null}},Fle=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}},vC=class extends we{};function cM(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),i??e}var ot=null;function lq(e){return typeof e?.getGui=="function"}var uM=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(!e)return;if(e.indexOf(" ")>=0){const n=(e||"").split(" ");if(n.length>1){for(const s of n)this.toggleCss(s,t);return}}this.cssClassStates[e]!==t&&e.length&&(this.getGui()?.classList.toggle(e,t),this.cssClassStates[e]=t)}},UYe=0,dM=class extends Ju{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=UYe++,this.cssManager=new uM(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(i=>[i.selector,i])),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui());const e="component-"+Object.getPrototypeOf(this)?.constructor?.name;for(const t of this.css??[])this.beans.environment.addGlobalCSS(t,e)}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(ele):null}applyElementsToComponent(e,t,i,n=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){const s=this[t];if(s===ot)this[t]=n??e;else{const o=i?.[t];if(!this.suppressDataRefValidation&&!o)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${s}`)}}}createChildComponentsFromTags(e,t){const i=[];for(const n of e.childNodes??[])i.push(n);for(const n of i){if(!(n instanceof HTMLElement))continue;const s=this.createComponentFromElement(n,o=>{const r=o.getGui();if(r)for(const a of n.attributes??[])r.setAttribute(a.name,a.value)},t);if(s){if(s.addItems&&n.children.length){this.createChildComponentsFromTags(n,t);const o=Array.prototype.slice.call(n.children);s.addItems(o)}this.swapComponentForNode(s,e,n)}else n.childNodes&&this.createChildComponentsFromTags(n,t)}}createComponentFromElement(e,t,i){const n=e.nodeName,s=this.getDataRefAttribute(e),o=n.indexOf("AG-")===0,r=o?this.componentSelectors.get(n):null;let a=null;if(r){const l=i&&s?i[s]:void 0;a=new r.component(l),a.setParentComponent(this),this.createBean(a,null,t)}else if(o)throw new Error(`selector: ${n}`);return this.applyElementsToComponent(e,s,i,a),a}swapComponentForNode(e,t,i){const n=e.getGui();t.replaceChild(n,i),t.insertBefore(document.createComment(i.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui());for(const i of e)i.setAttribute("tabindex",t.toString())}setTemplate(e,t,i){let n;typeof e=="string"||e==null?n=uj(e):n=lM(e),this.setTemplateFromElement(n,t,i)}setTemplateFromElement(e,t,i,n=!1){if(this.eGui=e,this.suppressDataRefValidation=n,t)for(let s=0;s<t.length;s++){const o=t[s];this.componentSelectors.set(o.selector,o)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return e==null?null:(i||(i=this.eGui),pj(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};!i||!n||n.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:n}=this.getContainerAndElement(e,t)||{};!i||!n||n.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;AKe(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;pn(this.eGui,e,{skipAriaHidden:i});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css||(this.css=[]),this.css.push(e)}},An=class extends dM{};function Ble(e){return typeof e=="object"&&!!e.component}function $Ye(e,t){return new qt(i=>{i(window.setInterval(e,t))})}var qt=class uw{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return t.length?new uw(i=>{let n=t.length;const s=new Array(n);t.forEach((o,r)=>{o.then(a=>{s[r]=a,n--,n===0&&i(s)})})}):uw.resolve()}static resolve(t=null){return new uw(i=>i(t))}then(t){return new uw(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(n=>i(t(n)))})}onDone(t){this.status=1,this.resolution=t;for(const i of this.waiters)i(t)}onReject(t){}};function KYe(e){return e?e.prototype&&"getGui"in e.prototype:!1}function _le(e,t,i,n){const{name:s}=i;let o,r,a,l,c,u;if(t){const d=t,p=d[s+"Selector"],f=p?p(n):null,m=v=>{typeof v=="string"?o=v:v!=null&&v!==!0&&(e.isFrameworkComponent(v)?a=v:r=v)};f?(m(f.component),l=f.params,c=f.popup,u=f.popupPosition):m(d[s])}return{compName:o,jsComp:r,fwComp:a,paramsFromSelector:l,popupFromSelector:c,popupPositionFromSelector:u}}var YYe=class extends we{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,i,n=!1){return this.getCompDetails(this.gridOptions,e,t,i,n)}getCompDetails(e,t,i,n,s=!1){const{name:o,cellRenderer:r}=t;let{compName:a,jsComp:l,fwComp:c,paramsFromSelector:u,popupFromSelector:d,popupPositionFromSelector:p}=_le(this.beans.frameworkOverrides,e,t,n),f,m;const v=w=>{const M=this.registry.getUserComponent(o,w);M&&(l=M.componentFromFramework?void 0:M.component,c=M.componentFromFramework?M.component:void 0,f=M.params,m=M.processParams)};if(a!=null&&v(a),l==null&&c==null&&i!=null&&v(i),l&&r&&!KYe(l)&&(l=this.agCompUtils?.adaptFunction(t,l)),!l&&!c){const{validation:w}=this.beans;s&&(a!==i||!i)?a?w?.isProvidedUserComp(a)||Mi(50,{compName:a}):i?w||Mi(260,{...this.gos.getModuleErrorParams(),propName:o,compName:i}):Mi(216,{name:o}):i&&!w&&Mi(146,{comp:i});return}const b=this.mergeParams(e,t,n,u,f,m),C=l==null,x=l??c;return{componentFromFramework:C,componentClass:x,params:b,type:t,popupFromSelector:d,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(x,C,b,t)}}newAgStackInstance(e,t,i,n){const s=!t;let o;s?o=new e:o=this.frameworkCompWrapper.wrap(e,n.mandatoryMethods,n.optionalMethods,n),this.createBean(o);const r=o.init?.(i);return r==null?qt.resolve(o):r.then(()=>o)}mergeParams(e,t,i,n=null,s,o){const r={...i,...s},l=e?.[t.name+"Params"];if(typeof l=="function"){const c=l(i);mr(r,c)}else typeof l=="object"&&mr(r,l);return mr(r,n),o?o(r):r}},XYe={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},ZYe={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},qYe={name:"headerComponent",optionalMethods:["refresh"]},QYe={name:"innerHeaderComponent"},JYe={name:"innerHeaderGroupComponent"},e6e={name:"headerGroupComponent"},t6e={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},i6e={name:"loadingCellRenderer",cellRenderer:!0},n6e={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},s6e={name:"loadingOverlayComponent",optionalMethods:["refresh"]},o6e={name:"noRowsOverlayComponent",optionalMethods:["refresh"]},r6e={name:"tooltipComponent"},Cj={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},a6e={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},l6e={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},c6e={name:"loadingCellRenderer",cellRenderer:!0},u6e={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},d6e={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function h6e(e,t){return e.getCompDetailsFromGridOptions(ZYe,"agDragAndDropImage",t,!0)}function p6e(e,t,i){return e.getCompDetails(t,qYe,"agColumnHeader",i)}function g6e(e,t,i){return e.getCompDetails(t,QYe,void 0,i)}function f6e(e,t){const i=t.columnGroup.getColGroupDef();return e.getCompDetails(i,e6e,"agColumnGroupHeader",t)}function m6e(e,t,i){return e.getCompDetails(t,JYe,void 0,i)}function y6e(e,t){return e.getCompDetailsFromGridOptions(l6e,void 0,t,!0)}function v6e(e,t){return e.getCompDetailsFromGridOptions(c6e,"agLoadingCellRenderer",t,!0)}function b6e(e,t){return e.getCompDetailsFromGridOptions(u6e,"agGroupRowRenderer",t,!0)}function S6e(e,t){return e.getCompDetailsFromGridOptions(d6e,"agDetailCellRenderer",t,!0)}function cq(e,t,i){return e.getCompDetails(t,t6e,void 0,i)}function uq(e,t,i){return e.getCompDetails(t,i6e,"agSkeletonCellRenderer",i,!0)}function zle(e,t,i){return e.getCompDetails(t,n6e,"agCellEditor",i,!0)}function C6e(e,t,i,n){const s=t.filter;return Ble(s)&&(t={filter:s.component,filterParams:t.filterParams}),e.getCompDetails(t,Cj,n,i,!0)}function x6e(e,t,i){return e.getCompDetails(t,XYe,"agDateInput",i,!0)}function w6e(e,t){return e.getCompDetailsFromGridOptions(s6e,"agLoadingOverlay",t,!0)}function D6e(e,t){return e.getCompDetailsFromGridOptions(o6e,"agNoRowsOverlay",t,!0)}function M6e(e,t){return e.getCompDetails(t.colDef,r6e,"agTooltipComponent",t,!0)}function A6e(e,t,i,n){return e.getCompDetails(t,a6e,n,i)}function Gle(e,t){return _le(e,t,Cj)}function H2(e,t,i){return e.mergeParams(t,Cj,i)}function R0(e){const t=e;return t?.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}function k6e(e){return typeof e=="object"&&!!e.getComp}var pe={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},xj=class extends dM{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e?.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},W2,j2,U2,$2,dz,hz,K2;function Kg(){return W2===void 0&&(W2=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),W2}function Vle(){return j2===void 0&&(j2=/(firefox)/i.test(navigator.userAgent)),j2}function Hle(){return U2===void 0&&(U2=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),U2}function wm(){return $2===void 0&&($2=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),$2}function pz(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!Vle())?null:t.toString()}function T6e(){if(K2!==void 0)return K2;if(!document.body)return-1;let e=1e6;const t=Vle()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const n=e*2;if(i.style.height=n+"px",n>t||i.clientHeight!==n)break;e=n}return i.remove(),K2=e,e}function I6e(){return hz==null&&Wle(),hz}function Wle(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.remove(),i!=null&&(hz=i,dz=i===0)}function jle(){return dz==null&&Wle(),dz}var wj="T",R6e=new RegExp(`[${wj} ]`),E6e=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${wj}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function gu(e,t){return e.toString().padStart(t,"0")}function Ta(e,t=!0,i=wj){if(!e)return null;let n=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(s=>gu(s,2)).join("-");return t&&(n+=i+[e.getHours(),e.getMinutes(),e.getSeconds()].map(s=>gu(s,2)).join(":")),n}function sT(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),gu(e.getDate(),2),gu(e.getHours(),2),`:${gu(e.getMinutes(),2)}`,`:${gu(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,gu(e.getDate(),2)].map(String):null}var Y2=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},dq=["January","February","March","April","May","June","July","August","September","October","November","December"],X2=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function gz(e,t){if(t==null)return Ta(e,!1);const i=gu(e.getFullYear(),4),n={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>dq[e.getMonth()],MMM:()=>dq[e.getMonth()].slice(0,3),MM:()=>gu(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${Y2(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${Y2(e.getDate())}`,DD:()=>gu(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>X2[e.getDay()],ddd:()=>X2[e.getDay()].slice(0,3),dd:()=>X2[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${Y2(e.getDay())}`,d:()=>`${e.getDay()}`},s=new RegExp(Object.keys(n).join("|"),"g");return t.replace(s,o=>o in n?n[o]():o)}function lI(e,t=!1){return!!Qr(e,t)}function L6e(e){return lI(e,!0)}function Qr(e,t=!1,i){if(!e||!i&&!E6e.test(e))return null;const[n,s]=e.split(R6e);if(!n)return null;const o=n.split("-").map(f=>Number.parseInt(f,10));if(o.filter(f=>!isNaN(f)).length!==3)return null;const[r,a,l]=o,c=new Date(r,a-1,l);if(c.getFullYear()!==r||c.getMonth()!==a-1||c.getDate()!==l||!s&&t)return null;if(!s||s==="00:00:00")return c;const[u,d,p]=s.split(":").map(f=>Number.parseInt(f,10));if(u>=0&&u<24)c.setHours(u);else if(t)return null;if(d>=0&&d<60)c.setMinutes(d);else if(t)return null;if(p>=0&&p<60)c.setSeconds(p);else if(t)return null;return c}function fz(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:n,filterByPercentageOfBestMatch:s}=e;let o=(i??[]).map((l,c)=>({value:l,relevance:P6e(t,l),idx:c}));if(o.sort((l,c)=>l.relevance-c.relevance),n&&(o=o.filter(l=>l.relevance<Math.max(l.value.length,t.length))),o.length>0&&s&&s>0){const c=o[0].relevance*s;o=o.filter(u=>c-u.relevance<0)}const r=[],a=[];for(const l of o)r.push(l.value),a.push(l.idx);return{values:r,indices:a}}function P6e(e,t){e.length<t.length&&([e,t]=[t,e]);let i=[],n=[];const s=e.length,o=t.length;for(let a=0;a<=o;a++)i[a]=a;let r=0;for(let a=1;a<=s;a++){n[0]=a;for(let l=1;l<=o;l++){const c=e[a-1],u=t[l-1];if(c.toLocaleLowerCase()===u.toLocaleLowerCase())++r,c===u&&++r,a>1&&l>1&&e[a-2].toLocaleLowerCase()===t[l-2].toLocaleLowerCase()&&(++r,e[a-2]===t[l-2]&&++r),a<s/2-10&&++r,n[l]=i[l-1];else{const d=n[l-1],p=i[l],f=i[l-1];n[l]=1+Math.min(d,p,f)}}[i,n]=[n,i]}return i[o]/(r+1)}function Ule(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}var mz=!1,PR=0;function N6e(e){PR>0||(e.addEventListener("keydown",NR),e.addEventListener("mousedown",NR))}function O6e(e){PR>0||(e.removeEventListener("keydown",NR),e.removeEventListener("mousedown",NR))}function NR(e){const t=mz,i=e.type==="keydown";i&&(e.ctrlKey||e.metaKey||e.altKey)||t!==i&&(mz=i)}function F6e(e){const t=Ys(e);return N6e(t),PR++,()=>{PR--,O6e(t)}}function B6e(){return mz}function Lb(e,t,i=!1){const n=MKe;let s=Xae;t&&(s+=", "+t),i&&(s+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll(n)).filter(l=>Fh(l)),r=Array.prototype.slice.apply(e.querySelectorAll(s));return r.length?((l,c)=>l.filter(u=>c.indexOf(u)===-1))(o,r):o}function Um(e,t=!1,i=!1,n=!1){const s=Lb(e,n?".ag-tab-guard":null,i),o=t?Ni(s):s[0];return o?(o.focus({preventScroll:!0}),!0):!1}function Ly(e,t,i,n){const s=Lb(t,i?':not([tabindex="-1"])':null),o=Cn(e);let r;i?r=s.findIndex(l=>l.contains(o)):r=s.indexOf(o);const a=r+(n?-1:1);return a<0||a>=s.length?null:s[a]}function $le(e,t=5){let i=0;for(;e&&pz(e)===null&&++i<=t;)e=e.parentElement;return pz(e)===null?null:e}var _6e=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}.ag-label-align-right>*{flex:none}.ag-label-align-top{align-items:flex-start;flex-direction:column;>*{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",z6e=class extends dM{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(_6e)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:n,disabled:s}=this.config;s!=null&&this.setDisabled(s),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;qr(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(pn(t,!1),Hm(t,"presentation")):(pn(t,!0),Hm(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(wR(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return M0(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},Kle=class extends z6e{constructor(e,t,i,n){super(e,t,i),this.className=n}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),i!=null&&this.onValueChange(i),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();i==null||i==""||uKe(e)!==null?D0(e,""):D0(e,t??"")}setAriaLabel(e){return hS(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Tu(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function G6e(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var am=class extends Kle{constructor(e,t,i="text",n="input"){super(e,e?.template??G6e(n),[],t),this.inputType=i,this.displayFieldTag=n,this.eLabel=ot,this.eWrapper=ot,this.eInput=ot}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:i,className:n}=this;e.classList.add(`${n}-label`),t.classList.add(`${n}-input-wrapper`),i.classList.add(`${n}-input`),this.addCss("ag-input-field"),i.id=i.id||`ag-${this.getCompId()}-input`;const{inputName:s,inputWidth:o}=this.config;s!=null&&this.setInputName(s),o!=null&&this.setInputWidth(o),this.addInputListeners(),this.activateTabIndex([i])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag==="input"&&(this.inputType=e,Ca(this.eInput,"type",e))}getInputElement(){return this.eInput}setInputWidth(e){return wR(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Ca(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return hS(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return M0(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Ca(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";Ca(this.eInput,"autocomplete",t)}return this}},Dj=class extends am{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;const i=this.eInput;i.checked=e,i.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const n=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:n.id,name:n.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},Mj={selector:"AG-CHECKBOX",component:Dj},V6e=class extends Dj{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},Py=class extends am{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const i=this.eInput;return i.value!==e&&(i.value=We(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{Ule(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:i=>{i.clipboardData?.getData("text")?.split("").some(s=>!e.test(s))&&i.preventDefault()}})}},Q1={selector:"AG-INPUT-TEXT-FIELD",component:Py},H6e=class extends am{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},W6e={selector:"AG-INPUT-TEXT-AREA",component:H6e},Aj=class extends Py{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const o=Number.parseFloat(e.value),r=isNaN(o)?"":this.normalizeValue(o.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:i,max:n,step:s}=this.config;typeof t=="number"&&this.setPrecision(t),typeof i=="number"&&this.setMin(i),typeof n=="number"&&this.setMax(n),typeof s=="number"&&this.setStep(s)}onWheel(e){Cn(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return e===""?"":(this.precision!=null&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){const i=this.precision;if(i==null)return e;if(t){const s=Number.parseFloat(e).toFixed(i);return Number.parseFloat(s).toString()}const n=String(e).split(".");if(n.length>1){if(n[1].length<=i)return e;if(i>0)return`${n[0]}.${n[1].slice(0,i)}`}return n[0]}setMin(e){return this.min===e?this:(this.min=e,Ca(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Ca(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Ca(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(We(i)){let n=this.isScientificNotation(i);if(n&&this.eInput.validity.valid)return e(i);if(!n){i=this.adjustPrecision(i);const s=this.normalizeValue(i);n=i!=s}if(n)return t(i)}return e(i)}getValue(){const e=this.eInput;if(!e.validity.valid)return;const t=e.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},j6e={selector:"AG-INPUT-NUMBER-FIELD",component:Aj},U6e=class extends Py{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=Kg();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Cn(this.beans)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Ta(e??null,!!this.includeTime)??void 0:e;return this.min===t?this:(this.min=t,Ca(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?Ta(e??null,!!this.includeTime)??void 0:e;return this.max===t?this:(this.max=t,Ca(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,Ca(this.eInput,"step",e),this)}setIncludeTime(e){return this.includeTime===e?this:(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1),this)}getDate(){if(this.eInput.validity.valid)return Qr(this.getValue())??void 0}setDate(e,t){this.setValue(Ta(e??null,this.includeTime),t)}},Yle={selector:"AG-INPUT-DATE-FIELD",component:U6e},$6e=".ag-list-item{align-items:center;display:flex;height:var(--ag-list-item-height);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}",K6e="ag-active-item",Y6e=(e,t)=>({tag:"div",cls:`ag-list-item ag-${e}-list-item`,attrs:{role:"option"},children:[{tag:"span",ref:"eText",children:t}]}),X6e=class extends dM{constructor(e,t,i){super(Y6e(e,t)),this.label=t,this.value=i,this.eText=ot}postConstruct(){this.createTooltip(),this.addEventListeners()}setHighlighted(e){const t=this.getGui();t.classList.toggle(K6e,e),Yae(t,e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}getHeight(){return this.getGui().clientHeight}setIndex(e,t){const i=this.getGui();mKe(i,e),fKe(i,t)}createTooltip(){const e={getTooltipValue:()=>this.label,getGui:()=>this.getGui(),getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>dj(this.eText)},t=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("highlightTooltipFeature",!1,e,this));t&&(this.tooltipFeature=t)}addEventListeners(){const e=this.getParentComponent();e&&(this.addGuiEventListener("mouseover",()=>{e.highlightItem(this)}),this.addGuiEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation(),e.setValue(this.value)}))}},Z6e=class extends dM{constructor(e="default"){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.options=[],this.listItems=[],this.highlightedItem=null,this.registerCSS($6e)}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()})}handleKeyDown(e){const t=e.key;switch(t){case pe.ENTER:if(!this.highlightedItem)this.setValue(this.getValue());else{const i=this.listItems.indexOf(this.highlightedItem);this.setValueByIndex(i)}break;case pe.DOWN:case pe.UP:e.preventDefault(),this.navigate(t);break;case pe.PAGE_DOWN:case pe.PAGE_UP:case pe.PAGE_HOME:case pe.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){const{value:t,text:i}=e,n=i??t;return this.options.push({value:t,text:n}),this.renderOption(t,n),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0);for(const e of this.listItems)e.destroy();qr(this.getGui()),this.listItems=[],this.refreshAriaRole()}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const i=this.options.findIndex(n=>n.value===e);if(i!==-1){const n=this.options[i];this.value=n.value,this.displayValue=n.text,this.highlightItem(this.listItems[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.listItems[e])}highlightItem(e){const t=e.getGui();if(!Fh(t))return;this.clearHighlighted(),e.setHighlighted(!0),this.highlightedItem=e;const i=this.getGui(),{scrollTop:n,clientHeight:s}=i,{offsetTop:o,offsetHeight:r}=t;(o+r>n+s||o<n)&&t.scrollIntoView({block:"nearest"})}hideItemTooltip(){this.highlightedItem?.tooltipFeature?.attemptToHideTooltip()}destroy(){this.hideItemTooltip(),super.destroy()}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}clearHighlighted(){this.highlightedItem?.setHighlighted(!1),this.highlightedItem=null}renderOption(e,t){const i=new X6e(this.cssIdentifier,t,e);i.setParentComponent(this);const n=this.createManagedBean(i);this.listItems.push(n),this.getGui().appendChild(n.getGui())}navigate(e){const t=e===pe.DOWN;let i;const{listItems:n,highlightedItem:s}=this;if(!s)i=t?n[0]:Ni(n);else{let r=n.indexOf(s)+(t?1:-1);r=Math.min(Math.max(r,0),n.length-1),i=n[r]}this.highlightItem(i)}navigateToPage(e){const{listItems:t,highlightedItem:i}=this;if(!i||t.length===0)return;const n=t.indexOf(i),s=this.options.length-1,o=t[0].getHeight(),r=Math.floor(this.getGui().clientHeight/o);let a=-1;e===pe.PAGE_HOME?a=0:e===pe.PAGE_END?a=s:e===pe.PAGE_DOWN?a=Math.min(n+r,s):e===pe.PAGE_UP&&(a=Math.max(n-r,0)),a!==-1&&this.highlightItem(t[a])}refreshAriaRole(){Hm(this.getGui(),this.options.length===0?"presentation":"listbox")}updateIndices(){this.refreshAriaRole();const e=this.listItems,t=e.length;e.forEach((i,n)=>{i.setIndex(n+1,t)})}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},q6e=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.ag-picker-has-focus),&:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:disabled{opacity:.5}}",Q6e={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},J6e=class extends Kle{constructor(e){if(super(e,e?.template||Q6e,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=ot,this.eWrapper=ot,this.eDisplayField=ot,this.eIcon=ot,this.registerCSS(q6e),this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:n,minPickerWidth:s,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!n,i!=null&&this.setPickerMaxHeight(i),s!=null&&this.setPickerMinWidth(s),o!=null&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:n}=this.config;if(i){const s=this.beans.iconSvc.createIconNoSpan(i);s&&this.eIcon.appendChild(s)}n!=null&&this.setInputWidth(n)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),nz(e,!1),this.ariaRole&&Hm(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case pe.UP:case pe.DOWN:case pe.ENTER:case pe.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case pe.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:i,pickerAriaLabelValue:n,modalPicker:s=!0},maxPickerHeight:o,minPickerWidth:r,maxPickerWidth:a,variableWidth:l,beans:c,eWrapper:u}=this,d={modal:s,eChild:e,closeOnEsc:!0,closedCallback:()=>{const v=Gae(c);this.beforeHidePicker(),v&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,n),anchorToElement:u};e.style.position="absolute";const p=c.popupSvc,f=p.addPopup(d);l?(r&&(e.style.minWidth=r),e.style.width=hj(SR(u)),a&&(e.style.maxWidth=a)):wR(e,a??SR(u));const m=o??`${cj(p.getPopupParent())}px`;return e.style.setProperty("max-height",m),this.alignPickerToComponent(),f.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:i,gos:n},eWrapper:s,pickerComponent:o}=this,r=n.get("enableRtl")?"right":"left";i.positionPopupByComponent({type:t,eventSource:s,ePopup:o.getGui(),position:"under",alignSide:r,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();nz(t,e);const i=this.eWrapper.classList;i.toggle("ag-picker-expanded",e),i.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return wR(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},e8e=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}:where(.ag-select){.ag-picker-field-wrapper{cursor:default}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}&:not(.ag-cell-editor,.ag-label-align-top){min-height:var(--ag-list-item-height)}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}:where(.ag-ltr) :where(.ag-select){.ag-picker-field-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding)/2);padding-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-select){.ag-picker-field-wrapper{padding-left:var(--ag-spacing);padding-right:calc(var(--ag-cell-horizontal-padding)/2)}}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none;:where(span){overflow:hidden;text-overflow:ellipsis;white-space:nowrap}}:where(.ag-ltr) .ag-select-list-item{padding-left:calc(var(--ag-cell-horizontal-padding)/2)}:where(.ag-rtl) .ag-select-list-item{padding-right:calc(var(--ag-cell-horizontal-padding)/2)}",kj=class extends J6e{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(e8e)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:iI(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),i&&t==null&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new Z6e("select"));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),i=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",i),DKe(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:n=>{n?.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}beforeHidePicker(){this.listComponent?.hideItemTooltip(),super.beforeHidePicker()}onKeyDown(e){const{key:t}=e;switch(t===pe.TAB&&this.hidePicker(),t){case pe.ENTER:case pe.UP:case pe.DOWN:case pe.PAGE_UP:case pe.PAGE_DOWN:case pe.PAGE_HOME:case pe.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case pe.ESCAPE:super.onKeyDown(e);break;case pe.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this.setValue(void 0,!0),this}setValue(e,t,i){const{listComponent:n,config:{placeholder:s},eDisplayField:o,tooltipFeature:r}=this;if(this.value===e||!n)return this;if(i||n.setValue(e,!0),n.getValue()===this.getValue())return this;let l=n.getDisplayValue();return l==null&&s&&(l=s),o.textContent=l,r?.setTooltipAndRefresh(l??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},t8e={selector:"AG-SELECT",component:kj},i8e=':where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart),:where(.ag-root-wrapper,.ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]){box-sizing:border-box;&:after,&:before{box-sizing:border-box}&:where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}&:where(button){color:inherit}}:where(.ag-root-wrapper,ag-external,.ag-popup,.ag-dnd-ghost,.ag-chart) :where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-popup-child{top:0;z-index:5;&:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled,[disabled]{.ag-icon{opacity:.5}&.ag-icon-grip{opacity:.35}}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}',Tj=typeof window!="object"||!window?.document?.fonts?.forEach,fS=(e,t,i,n,s,o)=>{if(Tj)return;n&&(e=`@layer ${CSS.escape(n)} { ${e} }`);let r=Pb.map.get(t);if(r||(r=[],Pb.map.set(t,r)),r.some(u=>u.css===e))return;const a=document.createElement("style");o&&a.setAttribute("nonce",o),a.dataset.agGlobalCss=i,a.textContent=e;const l={css:e,el:a,priority:s};let c;for(const u of r){if(u.priority>s)break;c=u}if(c){c.el.insertAdjacentElement("afterend",a);const u=r.indexOf(c);r.splice(u+1,0,l)}else t.insertBefore(a,t.querySelector(":not(title, meta)")),r.push(l)},Xle=(e,t,i,n)=>{fS(i8e,e,"shared",t,0,i),n?.forEach((s,o)=>s.forEach(r=>fS(r,e,o,t,0,i)))},n8e=e=>{Pb.grids.add(e)},s8e=e=>{if(Pb.grids.delete(e),Pb.grids.size===0){Pb.map=new WeakMap;for(const t of document.head.querySelectorAll("style[data-ag-global-css]"))t.remove()}},hq,Pb=(hq=typeof window=="object"?window:{}).agStyleInjectionState??(hq.agStyleInjectionState={map:new WeakMap,grids:new Set}),Bu=e=>new Zle(e),Fp="$default",o8e=0,Zle=class{constructor({feature:e,params:t,modeParams:i={},css:n,cssImports:s}){this.feature=e,this.css=n,this.cssImports=s,this.modeParams={[Fp]:{...i[Fp]??{},...t??{}},...i}}use(e,t,i){let n=this._inject;if(n==null){let{css:s}=this;if(s){const o=`ag-theme-${this.feature??"part"}-${++o8e}`;typeof s=="function"&&(s=s()),s=`:where(.${o}) {
${s}
}
`;for(const r of this.cssImports??[])s=`@import url(${JSON.stringify(r)});
${s}`;n={css:s,class:o}}else n=!1;this._inject=n}return n&&e&&fS(n.css,e,n.class,t,1,i),n?n.class:!1}},r8e=e=>e.replace(/[A-Z]/g,t=>`-${t}`).toLowerCase(),qle=e=>`--ag-${r8e(e)}`,_u=e=>`var(${qle(e)})`,a8e=(e,t,i)=>Math.max(t,Math.min(i,e)),l8e=e=>{const t=new Map;return i=>{const n=i;return t.has(n)||t.set(n,e(i)),t.get(n)}},su=e=>({ref:"accentColor",mix:e}),dl=e=>({ref:"foregroundColor",mix:e}),Dl=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),c8e=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),$r={ref:"backgroundColor"},cb={ref:"foregroundColor"},Bd={ref:"accentColor"},OR={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:dl(.15),chromeBackgroundColor:Dl(.02),browserColorScheme:"light"},u8e={...OR,textColor:cb,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:su(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:$r,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:Bd,toggleButtonOffBackgroundColor:Dl(.3),toggleButtonSwitchBackgroundColor:$r,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}}},d8e=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],h8e=l8e(e=>(e=e.toLowerCase(),d8e.find(t=>e.endsWith(t.toLowerCase()))??"length")),J1=e=>typeof e=="object"&&e?.ref?_u(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,Ij=e=>{if(typeof e=="string")return e;if(e&&"ref"in e){const t=_u(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?_u(e.onto):"transparent"}, ${t} ${a8e(e.mix*100,0,100)}%)`}return!1},p8e=J1,ub=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,i=>i[0]==="-"?i:" "+_u(i)+" ")})`:e&&"ref"in e?_u(e.ref):!1,g8e=J1,yz=(e,t)=>typeof e=="string"?e:e===!0?yz({},t):e===!1?t==="columnBorder"?yz({color:"transparent"},t):"none":e&&"ref"in e?_u(e.ref):Qle(e.style??"solid")+" "+ub(e.width??{ref:"borderWidth"})+" "+Ij(e.color??{ref:"borderColor"}),f8e=e=>typeof e=="string"?e:e===!1?"none":e&&"ref"in e?_u(e.ref):[ub(e.offsetX??0),ub(e.offsetY??0),ub(e.radius??0),ub(e.spread??0),Ij(e.color??{ref:"foregroundColor"})].join(" "),Qle=J1,Jle=e=>typeof e=="string"?e.includes(",")?e:pq(e):e&&"googleFont"in e?Jle(e.googleFont):e&&"ref"in e?_u(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),pq(t))).join(", "):!1,pq=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),m8e=J1,ece=e=>typeof e=="string"?e:e&&"url"in e?`url(${JSON.stringify(e.url)})`:e&&"svg"in e?ece({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):e&&"ref"in e?_u(e.ref):!1,y8e=(e,t,i)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&i.warn(104,{value:e,param:t}),`${e}s`):e&&"ref"in e?_u(e.ref):!1,v8e={color:Ij,colorScheme:p8e,length:ub,scale:g8e,border:yz,borderStyle:Qle,shadow:f8e,image:ece,fontFamily:Jle,fontWeight:m8e,duration:y8e},b8e=(e,t,i)=>{const n=h8e(e);return v8e[n](t,e,i)},S8e=e=>new tce(e),tce=class ice{constructor(t,i=[]){this.themeLogger=t,this.parts=i}withPart(t){return typeof t=="function"&&(t=t()),t instanceof Zle?new ice(this.themeLogger,[...this.parts,t]):(this.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(t){return this.withPart(Bu({feature:t}))}withParams(t,i=Fp){return this.withPart(Bu({modeParams:{[i]:t}}))}_startUse({styleContainer:t,cssLayer:i,nonce:n,loadThemeGoogleFonts:s,moduleCss:o}){if(Tj)return;x8e(),Xle(t,i,n,o);const r=C8e(this);if(r.length>0)for(const a of r)s&&w8e(a,n);for(const a of this.parts)a.use(t,i,n)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=gq(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).join(" "))}_getModeParams(){let t=this._paramsCache;if(!t){const i={[Fp]:{...u8e}};for(const n of gq(this.parts))for(const s of Object.keys(n.modeParams)){const o=n.modeParams[s];if(o){const r=i[s]??(i[s]={}),a=new Set;for(const l of Object.keys(o)){const c=o[l];c!==void 0&&(r[l]=c,a.add(l))}if(s===Fp)for(const l of Object.keys(i)){const c=i[l];if(l!==Fp)for(const u of a)delete c[u]}}}this._paramsCache=t=i}return t}_getPerInstanceCss(t){const i="##SELECTOR##";let n=this._paramsCssCache;if(!n){let s="",o="";const r=this._getModeParams();for(const l of Object.keys(r)){const c=r[l];if(l!==Fp){const d=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(l):l}"]) & {
`;s+=d,o+=d}for(const u of Object.keys(c).sort()){const d=c[u],p=b8e(u,d,this.themeLogger);if(p===!1)this.themeLogger.error(107,{key:u,value:d});else{const f=qle(u),m=f.replace("--ag-","--ag-inherited-");s+=`	${f}: var(${m}, ${p});
`,o+=`	${m}: var(${f});
`}}l!==Fp&&(s+=`}
`,o+=`}
`)}let a=`${i} {
${s}}
`;a+=`:has(> ${i}):not(${i}) {
${o}}
`,this._paramsCssCache=n=a}return n.replaceAll(i,`:where(.${t})`)}},gq=e=>{const t=new Map;for(const n of e)t.set(n.feature,n);const i=[];for(const n of e)(!n.feature||t.get(n.feature)===n)&&i.push(n);return i},C8e=e=>{const t=new Set,i=o=>{if(Array.isArray(o))o.forEach(i);else{const r=o?.googleFont;typeof r=="string"&&t.add(r)}};return Object.values(e._getModeParams()).flatMap(o=>Object.values(o)).forEach(i),Array.from(t).sort()},fq=!1,x8e=()=>{if(!fq){fq=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},w8e=async(e,t)=>{const i=`@import url('https://${D8e}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;fS(i,document.head,`googleFont:${e}`,void 0,0,t)},D8e="fonts.googleapis.com",M8e=1,A8e=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=M8e++,e?.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(const t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];for(const t of e.beanClasses){const i=new t;i.beanName?this.beans[i.beanName]=i:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(i)}for(const t of e.derivedBeans??[]){const{beanName:i,bean:n}=t(this);this.beans[i]=n,this.createdBeans.push(n)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){const i=this.beans;for(const n of e)n.preWireBeans?.(i),n.wireBeans?.(i);for(const n of e)n.preConstruct?.();t&&e.forEach(t);for(const n of e)n.postConstruct?.()}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[],this.destroyCallback?.()}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},k8e=0,T8e=class extends Ju{constructor(){super(...arguments),this.beanName="environment",this.paramsClass=`ag-theme-params-${++k8e}`,this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){const{gos:e,eRootDiv:t}=this;e.setInstanceDomData(t),this.eStyleContainer=e.get("themeStyleContainer")??(t.getRootNode()===document?document.head:t),this.cssLayer=e.get("themeCssLayer"),this.styleNonce=e.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.initVariables(),this.addDestroyFunc(()=>s8e(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("themeChanged")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e,t=[]){const{theme:i}=this;let n;i?n=`${this.paramsClass} ${i._getCssClass()}`:n=this.applyLegacyThemeClasses();for(const s of Array.from(e.classList))s.startsWith("ag-theme-")&&e.classList.remove(s);if(n){const s=e.className;e.className=`${s}${s?" ":""}${n}${t?.length?" "+t.join(" "):""}`}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let i=!1;for(const n of Array.from(t.classList))n.startsWith("ag-theme-")&&(i=!0,e=e?`${e} ${n}`:n);i&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?fS(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}handleThemeChange(){const{gos:e,theme:t}=this,i=e.get("theme");let n;if(i==="legacy")n=void 0;else{const s=i??this.getDefaultTheme();s instanceof tce?n=s:this.themeError(s)}n!==t&&this.handleNewTheme(n),this.postProcessThemeChange(n,i)}handleNewTheme(e){const{gos:t,eRootDiv:i,globalCSS:n}=this,s=this.getAdditionalCss();if(e){n8e(this),Xle(this.eStyleContainer,this.cssLayer,this.styleNonce,s);for(const[r,a]of n)fS(r,this.eStyleContainer,a,this.cssLayer,0,this.styleNonce);n.length=0}this.theme=e,e?._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:s});let o=this.eParamsStyle;if(!o){o=this.eParamsStyle=lM({tag:"style"});const r=t.get("styleNonce");r&&o.setAttribute("nonce",r),i.appendChild(o)}Tj||(o.textContent=e?._getPerInstanceCss(this.paramsClass)||""),this.applyThemeClasses(i),this.fireStylesChangedEvent("themeChanged")}},I8e=class extends Ju{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){this.dynamicBeans??(this.dynamicBeans={});for(const t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t,...i){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));const n=this.dynamicBeans[e];if(n==null){if(t)throw new Error(this.getDynamicError(e,!1));return}return new n(...i)}},R8e=class extends Ju{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new Vm}addListener(e,t,i){this.globalSvc.addEventListener(e,t,i)}removeListener(e,t,i){this.globalSvc.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},nce=class extends Ju{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){const i="title",n=this.ctrl.getGui();n&&(e!=null&&(e!=""||t)?n.setAttribute(i,e):n.removeAttribute(i))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){if(this.tooltipManager==null){const e=this.beans.registry.createDynamicBean("tooltipStateManager",!0,this.ctrl,()=>this.tooltip);e&&(this.tooltipManager=this.createBean(e,this.beans.context))}}attemptToShowTooltip(){this.tooltipManager?.prepareToShowTooltip()}attemptToHideTooltip(){this.tooltipManager?.hideTooltip()}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},E8e=1e3,L8e=1e3,mq=100,yq,oT=!1,P8e=class extends Ju{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){return e==="show"?this.tooltipCtrl.getTooltipShowDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipCtrl.getTooltipHideDelayOverride?.()??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!wm()&&(oT?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},mq):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){const t=e.relatedTarget,i=this.tooltipCtrl.getGui(),n=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(t)||this.interactionEnabled&&n?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||oT)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-yq<E8e}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.clearEventHandlers(),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e=this.getTooltipValue(),t=this.tooltipCtrl;if(!We(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}const i=this.gos.addCommon({location:t.getLocation?.()??"UNKNOWN",value:e,hideTooltipCallback:()=>this.hideTooltip(!0),...t.getAdditionalParams?.()});this.state=2,this.tooltipInstanceCount++;const n=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(i,n)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),yq=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}const n=t.getGui();this.tooltipComp=t,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const s=this.getLocaleTextFunc(),o=this.popupSvc?.addPopup({eChild:n,ariaLabel:s("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const r=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:r}),this.setEventHandlers(r)}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Ys(this.beans),{keydown:r=>{n.contains(r?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:n,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){const e=this.tooltipComp?.getGui(),t=Cn(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupSvc?.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=this.tooltipTrigger===0?L8e:0;window.setTimeout(()=>{e(),this.destroyBean(t)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){for(const e of[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener])e&&e();this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){oT=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},mq)}unlockService(){oT=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},N8e=class extends nce{constructor(e,t,i){super(e,i),this.highlightTracker=t,this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct(),this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",({currentValue:e})=>{this.setTooltipMode(e)}),this.setTooltipMode(this.gos.get("tooltipTrigger")),this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(e){this.tooltipMode===1&&(e.highlighted?this.attemptToShowTooltip():this.attemptToHideTooltip())}setTooltipMode(e="focus"){this.tooltipMode=e==="focus"?1:0}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight),super.destroy()}},rT=0,O8e=200,F8e=class extends Ju{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}getPopupParent(){const e=this.gos.get("popupParent");return e||this.getDefaultPopupParent()}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:n,skipObserver:s}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e,e.type,e.ePopup,null,e.mouseEvent)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:s,eventSource:o,alignSide:r="left",position:a="over",type:l}=e,c=o.getBoundingClientRect(),u=this.getParentRect();this.setAlignedTo(o,t);const d=()=>{let p=c.left-u.left;r==="right"&&(p-=t.offsetWidth-c.width);let f;return a==="over"?(f=c.top-u.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,c,u,e.nudgeY||0)==="under"?f=c.top-u.top+c.height:f=c.top-t.offsetHeight-(n||0)*2-u.top),{x:p,y:f}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:s,updatePosition:d,postProcessCallback:()=>this.callPostProcessPopup(e,l,t,o,null)})}shouldRenderUnderOrAbove(e,t,i,n){const s=i.bottom-t.bottom,o=t.top-i.top,r=e.offsetHeight+n;return s>r?"under":o>r||o>s?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const n=this.popupList[i],{alignedToElement:s}=n;if(!s)return;const o=["right","left","over","above","under"];for(const r of o)s.classList.remove(`ag-has-popup-positioned-${r}`),e.classList.remove(`ag-popup-positioned-${r}`);t&&(s.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){const i=this.getPopupIndex(t);if(i!==-1){const n=this.popupList[i];n.alignedToElement=e}}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:n,nudgeY:s,skipObserver:o,updatePosition:r}=e,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:d}=r();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,n&&(u+=n),s&&(d+=s),i&&(u=this.keepXYWithinBounds(t,u,1),d=this.keepXYWithinBounds(t,d,0)),t.style.left=`${u}px`,t.style.top=`${d}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!o){const c=Bh(this.beans,t,()=>l(!0));setTimeout(()=>c(),O8e)}}getParentRect(){const e=Ys(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),qae(t)}keepXYWithinBounds(e,t,i){const n=i===0,s=n?"clientHeight":"clientWidth",o=n?"top":"left",r=n?"height":"width",a=n?"scrollTop":"scrollLeft",l=Ys(this.beans),c=l.documentElement,u=this.getPopupParent(),d=e.getBoundingClientRect(),p=u.getBoundingClientRect(),f=l.documentElement.getBoundingClientRect(),m=u===l.body,v=Math.ceil(d[r]);let C=m?(n?Zae:SR)(c)+c[a]:u[s];m&&(C-=Math.abs(f[o]-p[o]));const x=C-v;return Math.min(Math.max(t,0),Math.max(x,0))}addPopup(e){const{eChild:t,ariaLabel:i,ariaOwns:n,alwaysOnTop:s,positionCallback:o,anchorToElement:r}=e,a=this.getPopupIndex(t);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(t);const l=this.createPopupWrapper(t,!!s,i,n),c=this.addEventListenersToPopup({...e,wrapperEl:l});return o&&o(),this.addPopupToPopupList(t,l,c,r),{hideFunc:c}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();We(e.style.top)||(e.style.top=`${i.top*-1}px`),We(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i,n){const s=this.getPopupParent(),{environment:o,gos:r}=this.beans,a=lM({tag:"div"});return o.applyThemeClasses(a),a.classList.add("ag-popup"),e.classList.add(r.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Hm(e,"dialog"),i?hS(e,i):n&&(e.id||(e.id=`popup-component-${rT}`),ZZ(n,e.id)),a.appendChild(e),s.appendChild(a),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),a}addEventListenersToPopup(e){const t=this.beans,i=Ys(t),{wrapperEl:n,eChild:s,closedCallback:o,afterGuiAttached:r,closeOnEsc:a,modal:l,ariaOwns:c}=e;let u=!1;const d=v=>{if(!n.contains(Cn(t)))return;v.key===pe.ESCAPE&&!this.isStopPropagation(v)&&m({keyboardEvent:v})},p=v=>m({mouseEvent:v}),f=v=>m({touchEvent:v}),m=(v={})=>{const{mouseEvent:b,touchEvent:C,keyboardEvent:x,forceHide:w}=v;!w&&(this.isEventFromCurrentPopup({mouseEvent:b,touchEvent:C},s)||u)||(u=!0,n.remove(),i.removeEventListener("keydown",d),i.removeEventListener("mousedown",p),i.removeEventListener("touchstart",f),i.removeEventListener("contextmenu",p),this.eventSvc.removeListener("dragStarted",p),o&&o(b||C||x),this.removePopupFromPopupList(s,c))};return r&&r({hidePopup:m}),window.setTimeout(()=>{a&&i.addEventListener("keydown",d),l&&(i.addEventListener("mousedown",p),this.eventSvc.addListener("dragStarted",p),i.addEventListener("touchstart",f),i.addEventListener("contextmenu",p))},0),m}addPopupToPopupList(e,t,i,n){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:rT,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n),rT=rT+1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const n=this.popupList[i];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then(o=>o&&o()),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;const s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=s,n.isAnchored=!0,s}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&ZZ(t,null),this.popupList=this.popupList.filter(i=>i.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:n,ePopup:s}=e,o=n.getBoundingClientRect(),r=d=>Number.parseInt(d.substring(0,d.length-1),10),a=(d,p)=>{const f=i[d]-o[d],m=r(s.style[d]);return{initialDiff:f,lastDiff:f,initial:m,last:m,direction:p}},l=a("top",0),c=a("left",1),u=this.beans.frameworkOverrides;return new qt(d=>{u.wrapIncoming(()=>{$Ye(()=>{const p=t.getBoundingClientRect(),f=n.getBoundingClientRect();if(f.top==0&&f.left==0&&f.height==0&&f.width==0){e.hidePopup();return}const v=(b,C)=>{const x=r(s.style[C]);b.last!==x&&(b.initial=x,b.last=x);const w=p[C]-f[C];if(w!=b.lastDiff){const M=this.keepXYWithinBounds(s,b.initial+b.initialDiff-w,b.direction);s.style[C]=`${M}px`,b.last=M}b.lastDiff=w};v(l,"top"),v(c,"left")},200).then(p=>{d(()=>{p!=null&&window.clearInterval(p)})})},"popupPositioning")})}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:n}=e,s=i||n;if(!s)return!1;const o=this.getPopupIndex(t);if(o===-1)return!1;for(let r=o;r<this.popupList.length;r++){const a=this.popupList[r];if(IKe(a.element,s))return!0}return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){const t=Ys(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=i.length,s=this.getWrapper(e);if(!s||n<=1||!t.contains(e))return;const o=[],r=[];for(const p of i)p!==s&&(p.classList.contains("ag-always-on-top")?r.push(p):o.push(p));const a=[],l=r.length,d=s.classList.contains("ag-always-on-top")||!l?[...o,...r,s]:[...o,s,...r];for(let p=0;p<=n;p++){const f=d[p];if(i[p]===d[p]||f===s)continue;const m=f.querySelectorAll("div");for(const v of m)v.scrollTop!==0&&a.push([v,v.scrollTop]);p===0?t.insertAdjacentElement("afterbegin",f):d[p-1].insertAdjacentElement("afterend",f)}for(;a.length;){const p=a.pop();p[0].scrollTop=p[1]}}},B8e=class extends xj{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(e){const{value:t}=e,i=this.getGui();i.textContent=yC(t);const n=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();i.classList.add(`ag-${n}-tooltip`)}},sce=(e,t)=>{if(t!=null&&e?.setPointerCapture)try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch{}return!1},_8e=(e,t)=>{if(typeof PointerEvent>"u"||!(t instanceof PointerEvent))return null;const i=t.pointerId;if(!sce(e,i))return null;const n={eElement:e,pointerId:i,onLost(s){G8e(n,s)}};return e.addEventListener("lostpointercapture",n.onLost),n},z8e=e=>{if(!e)return;oce(e);const{eElement:t,pointerId:i}=e;if(t){try{t.releasePointerCapture(i)}catch{}e.eElement=null}},oce=e=>{const{eElement:t,onLost:i}=e;t&&i&&(t.removeEventListener("lostpointercapture",i),e.onLost=null)},G8e=(e,t)=>{oce(e);const{eElement:i,pointerId:n}=e;i&&t.pointerId===n&&sce(i,n)},Vv,db,xd=e=>{if(!db)db=new WeakSet;else if(db.has(e))return!1;return db.add(e),!0},V8e=class extends Ju{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){return this.drag?.start.target??null}isPointer(){return!!Vv?.has(nu(this.beans))}hasPointerCapture(){const e=this.drag?.pointerCapture;return!!(e&&this.beans.eRootDiv.hasPointerCapture?.(e.pointerId))}destroy(){this.drag&&this.cancelDrag();const e=this.dragSources;for(const t of e)vq(t);e.length=0,super.destroy()}removeDragSource(e){const t=this.dragSources;for(let i=0,n=t.length;i<n;++i){const s=t[i];if(s.params===e){t.splice(i,1),vq(s);break}}}addDragSource(e){if(!this.isAlive())return;const{eElement:t,includeTouch:i}=e,n=[];let s;if(i){const c=t.style;c&&(s=c.touchAction,c.touchAction="none")}const o={handlers:n,params:e,oldTouchAction:s};this.dragSources.push(o),nI(n,[t,"pointerdown",c=>this.onPointerDown(e,c),{passive:!1}],[t,"mousedown",c=>this.onMouseDown(e,c)]);const l=this.gos.get("suppressTouch");i&&!l&&nI(n,[t,"touchstart",u=>this.onTouchStart(e,u),{passive:!1}])}cancelDrag(e){const t=this.drag;e??(e=t?.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),t?.params.onDragCancel?.(),this.destroyDrag()}shouldPreventMouseEvent(e){const t=e.type;return(t==="mousemove"||t==="pointermove")&&e.cancelable&&k0(this.beans,e)&&!Aw(q2(e))}initDrag(e,...t){this.drag=e;const i=this.beans,n=a=>this.onScroll(a),s=a=>this.onKeyDown(a),o=nu(i),r=Ys(i);nI(e.handlers,[o,"contextmenu",Op],[o,"keydown",s],[r,"scroll",n,{capture:!0}],[r.defaultView||window,"scroll",n],...t)}destroyDrag(){this.dragging=!1;const e=this.drag;if(e){const t=e.rootEl;Vv?.get(t)===e&&Vv?.delete(t),this.drag=null,z8e(e.pointerCapture),gj(e.handlers)}}onPointerDown(e,t){if(this.isPointer())return;const i=this.beans;if(db?.has(t))return;const n=t.pointerType;if(n==="touch"&&(i.gos.get("suppressTouch")||!e.includeTouch||(e.stopPropagationForTouch&&t.stopPropagation(),Aw(q2(t))))||!t.isPrimary||n==="mouse"&&t.button!==0)return;this.destroyDrag();const s=nu(i),o=e.eElement,r=t.pointerId,a=new Z2(s,e,t,r);Vv??(Vv=new WeakMap),Vv.set(s,a);const l=d=>{d.pointerId===r&&this.onMouseOrPointerMove(d)},c=d=>{d.pointerId===r&&this.onMouseOrPointerUp(d)},u=d=>{d.pointerId===r&&xd(d)&&this.cancelDrag()};this.initDrag(a,[s,"pointerup",c],[s,"pointercancel",u],[s,"pointermove",l,{passive:!1}],[s,"touchmove",Op,{passive:!1}],[o,"mousemove",Op,{passive:!1}]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):xd(t)}onTouchStart(e,t){if(this.gos.get("suppressTouch")||!e.includeTouch||!xd(t)||Aw(q2(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer()){Op(t);return}this.destroyDrag();const n=this.beans,s=nu(n),o=new Z2(s,e,t.touches[0]),r=c=>this.onTouchMove(c),a=c=>this.onTouchUp(c),l=t.target??e.eElement;this.initDrag(o,[nu(n),"touchmove",Op,{passive:!1}],[l,"touchmove",r,{passive:!0}],[l,"touchend",a,{passive:!0}],[l,"touchcancel",a,{passive:!0}]),e.dragStartPixels===0&&this.onMove(o.start)}onMouseDown(e,t){if(t.button!==0||db?.has(t)||this.isPointer())return;const i=this.beans;this.destroyDrag();const n=new Z2(nu(i),e,t),s=a=>this.onMouseOrPointerMove(a),o=a=>this.onMouseOrPointerUp(a),r=nu(i);this.initDrag(n,[r,"mousemove",s],[r,"mouseup",o]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):xd(t)}onScroll(e){if(!xd(e))return;const t=this.drag,i=t?.lastDrag;i&&this.dragging&&t.params?.onDragging(i)}onMouseOrPointerMove(e){xd(e)&&(Kg()&&Ys(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&Op(e),this.onMove(e))}onTouchMove(e){const t=this.drag;if(!t||!xd(e))return;const i=Tw(t.start,e.touches);i&&(e.preventDefault(),this.onMove(i))}onMove(e){const t=this.drag;if(!t)return;t.lastDrag=e;const i=t.params;if(!this.dragging){const n=t.start,o=i.dragStartPixels??4;if(ile(e,n,o)||(this.dragging=!0,i.capturePointer&&(t.pointerCapture=_8e(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:i.eElement}),i.onDragStart(n),this.drag!==t)||(i.onDragging(n),this.drag!==t))return}i.onDragging(e)}onTouchUp(e){const t=this.drag;t&&xd(e)&&this.onUp(Tw(t.start,e.changedTouches))}onMouseOrPointerUp(e){xd(e)&&this.onUp(e)}onUp(e){const t=this.drag;t&&(e||(e=t.lastDrag),e&&this.dragging&&(this.dragging=!1,t.params.onDragStop(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement})),this.destroyDrag())}onKeyDown(e){e.key===pe.ESCAPE&&this.cancelDrag()}},vq=e=>{gj(e.handlers);const t=e.oldTouchAction;if(t!=null){const i=e.params.eElement.style;i&&(i.touchAction=t)}},Z2=class{constructor(e,t,i,n=null){this.rootEl=e,this.params=t,this.start=i,this.pointerId=n,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},q2=e=>{const t=e.target;return t instanceof Element?t:null},H8e=class extends Ju{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageParent=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.lastDropTarget=null}addDragSource(e,t=!1){const i={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:n=>this.onDragStart(e,n),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(i),this.beans.dragSvc.addDragSource(i)}setDragImageCompIcon(e,t=!1){const i=this.dragImageComp;i&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,i.setIcon(e,t))}removeDragSource(e){const{dragSourceAndParamsList:t,beans:i}=this,n=t.find(s=>s.dragSource===e);n&&(i.dragSvc?.removeDragSource(n),Cc(t,n))}destroy(){const{dragSourceAndParamsList:e,dropTargets:t,beans:i}=this,n=i.dragSvc;for(const s of e)n?.removeDragSource(s);e.length=0,t.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){const e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();const i=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-i.left,this.dragInitialSourcePointerOffsetY=t.clientY-i.top,e.onDragStarted?.(),this.createAndUpdateDragImageComp(e)}onDragStop(e){const{dragSource:t,lastDropTarget:i}=this;if(t?.onDragStopped?.(),i){const n=this.dropTargetEvent(i,e,!1);i.onDragStop?.(n)}this.clearDragAndDropProperties()}onDragCancel(){const{dragSource:e,lastDropTarget:t,lastMouseEvent:i}=this;if(e?.onDragCancelled?.(),t&&i){const n=this.dropTargetEvent(t,i,!1);t.onDragCancel?.(n)}this.clearDragAndDropProperties()}onDragging(e,t=!1){this.positionDragImageComp(e);const i=this.findCurrentDropTarget(e),{lastDropTarget:n,dragSource:s,dragItem:o}=this;let r=!1;if(i!==n){if(r=!0,n){const a=this.dropTargetEvent(n,e,t);n.onDragLeave?.(a)}if(n!==null&&!i?this.handleExit(s,o):n===null&&i&&this.handleEnter(s,o),i){const a=this.dropTargetEvent(i,e,t);i.onDragEnter?.(a)}this.lastDropTarget=i}else if(i){const a=this.dropTargetEvent(i,e,t);i.onDragging?.(a),a?.changed&&(r=!0)}this.lastMouseEvent=e,r&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageParent=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let n=!1;const s=(a,l)=>{for(const c of l){const{width:u,height:d,left:p,right:f,top:m,bottom:v}=c.getBoundingClientRect();if(u===0||d===0)return!1;const b=a.clientX>=p&&a.clientX<f,C=a.clientY>=m&&a.clientY<v;if(!b||!C)return!1}return!0};for(const a of i)if(s(e,a)){n=!0;break}const{eElement:o,type:r}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(o)?!1:n&&t.isInterestedIn(r,o)}findCurrentDropTarget(e){const t=this.dropTargets.filter(o=>this.isMouseOnDropTarget(e,o)),i=t.length;if(i===0)return null;if(i===1)return t[0];const s=nu(this.beans).elementsFromPoint(e.clientX,e.clientY);for(const o of s)for(const r of t)if(this.getAllContainersFromDropTarget(r).flatMap(l=>l).indexOf(o)!==-1)return r;return null}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.find(t=>t.external&&t.getContainer()===e)||null}dropTargetEvent(e,t,i){const{dragSource:n,dragItem:s,lastDraggingEvent:o,lastMouseEvent:r,dragInitialSourcePointerOffsetX:a,dragInitialSourcePointerOffsetY:l}=this,c=e.getContainer(),u=c.getBoundingClientRect(),{clientX:d,clientY:p}=t,f=d-(r?.clientX||0),m=p-(r?.clientY||0),v=this.createEvent({event:t,x:d-u.left,y:p-u.top,vDirection:m>0?"down":m<0?"up":null,hDirection:f<0?"left":f>0?"right":null,initialSourcePointerOffsetX:a,initialSourcePointerOffsetY:l,dragSource:n,fromNudge:i,dragItem:s,dropZoneTarget:c,dropTarget:o?.dropTarget??null,changed:!!o?.changed});return this.lastDraggingEvent=v,v}positionDragImageComp(e){const t=this.dragImageComp?.getGui();t&&NKe(t,e,this.beans)}removeDragImageComp(e){this.dragImageComp===e&&(this.dragImageComp=null),e&&(e.getGui()?.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){const t=this.createDragImageComp(e)??null;this.dragImageCompPromise=t,t?.then(i=>{if(t!==this.dragImageCompPromise||!this.lastMouseEvent||!this.isAlive()){this.destroyBean(i);return}this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;const n=this.dragImageComp;n!==i&&(this.dragImageComp=i,this.removeDragImageComp(n)),i&&(this.appendDragImageComp(i),this.updateDragImageComp())})}appendDragImageComp(e){const t=e.getGui(),i=t.style;i.position="absolute",i.zIndex="9999",this.beans.dragSvc?.hasPointerCapture()&&(i.pointerEvents="none"),this.gos.setInstanceDomData(t),this.beans.environment.applyThemeClasses(t),i.top="20px",i.left="20px";const n=lj(this.beans);this.dragImageParent=n,n?n.appendChild(t):this.warnNoBody()}updateDragImageComp(){const{dragImageComp:e,dragSource:t,lastDropTarget:i,lastDraggingEvent:n,dragImageLastLabel:s}=this;if(!e)return;this.setDragImageCompIcon(i?.getIconName?.(n)??null);let o=t?.dragItemName;typeof o=="function"&&(o=o(n)),o||(o=""),s!==o&&(this.dragImageLastLabel=o,e.setLabel(o))}},W8e=class extends H8e{createEvent(e){return ct(this.gos,e)}createDragImageComp(e){const{gos:t,beans:i}=this;return h6e(i.userCompFactory,ct(t,{dragSource:e}))?.newAgStackInstance()}handleEnter(e,t){e?.onGridEnter?.(t)}handleExit(e,t){e?.onGridExit?.(t)}warnNoBody(){Ee(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){const i={getContainer:e,isInterestedIn:n=>n===1||n===0,getIconName:()=>"notAllowed"};this.addDropTarget(i),t.addDestroyFunc(()=>this.removeDropTarget(i))}};function rce(e,t){return e+"_"+t}function Yn(e){return e instanceof E0}var E0=class extends we{constructor(e,t,i,n){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=i,this.pinned=n,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=Mw(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return rce(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){for(const e of this.displayedChildren)Yn(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=Ni(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(const t of this.displayedChildren??[])e+=t.getActualWidth();return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(const t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(const t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(const t of this.displayedChildren??[])pg(t)?e.push(t):Yn(t)&&t.addDisplayedLeafColumns(e)}addLeafColumns(e){for(const t of this.children??[])pg(t)?e.push(t):Yn(t)&&t.addLeafColumns(e)}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e?.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e?.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}for(const i of this.children??[]){if(Yn(i)&&!i.displayedChildren?.length)continue;switch(i.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},vz="row-group-",Rj="t-",Ej="b-",j8e=0,gg=class{constructor(e){this.master=!1,this.detail=void 0,this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this._leafs=void 0,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=j8e++,this.alreadyRendered=!1,this.hovered=!1,this.__selected=!1,this.beans=e}get allLeafChildren(){const e=this._leafs;return e===void 0?this.beans.groupStage?.loadLeafs?.(this)??null:e}set allLeafChildren(e){this._leafs=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const{valueCache:i,eventSvc:n}=this.beans,s=this.data;this.data=e,i?.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();const o=this.createDataChangedEvent(e,s,t);if(this.__localEventService?.dispatchEvent(o),this.sibling){this.sibling.data=e;const a=this.sibling.createDataChangedEvent(e,s,t);this.sibling.__localEventService?.dispatchEvent(a)}n.dispatchEvent({type:"rowNodeDataChanged",node:this});const r=this.pinnedSibling;r&&(r.data=e,r.__localEventService?.dispatchEvent(r.createDataChangedEvent(e,s,t)),n.dispatchEvent({type:"rowNodeDataChanged",node:r}))}updateDataOnDetailNode(){const e=this.detailNode;e&&(e.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return this.rowIndex==null?(Mi(13),null):this.rowPinned==="top"?Rj+this.rowIndex:this.rowPinned==="bottom"?Ej+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){const{selectionSvc:i}=this.beans,n=i?.createDaemonNode?.(this),s=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),i&&(i.updateRowSelectable(this),i.syncInRowNode(this,n));const o=this.createDataChangedEvent(e,s,!1);this.__localEventService?.dispatchEvent(o)}setId(e){const t=pS(this.beans.gos);if(t)if(this.data){const i=this.parent?.getRoute()??[];this.id=t({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(vz)&&Mi(14,{groupPrefix:vz})}else this.id=void 0;else this.id=e}setRowTop(e){if(this.oldRowTop=this.rowTop,this.rowTop===e)return;this.rowTop=e,this.dispatchRowEvent("topChanged");const t=e!==null;this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,i){this.beans.expansionSvc?.setExpanded(this,e,t,i)}setDataValue(e,t,i){const{colModel:n,valueSvc:s,gos:o,editSvc:r}=this.beans,a=typeof e!="string"?e:n.getCol(e)??n.getColDefCol(e);if(!a)return!1;const l=s.getValueForDisplay(a,this,void 0,void 0,"api").value;if(o.get("readOnlyEdit")){const{beans:{eventSvc:u},data:d,rowIndex:p,rowPinned:f}=this;return u.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:p,rowPinned:f,column:a,colDef:a.colDef,data:d,node:this,oldValue:l,newValue:t,value:t,source:i}),!1}if(r&&!r.committing){const u=r.setDataValue({rowNode:this,column:a},t,i);if(u!=null)return u}const c=s.setValue(this,a,t,i);return this.dispatchCellChangedEvent(a,t,l),c&&this.pinnedSibling?.dispatchCellChangedEvent(a,t,l),c}updateHasChildren(){let e=this.group&&!this.footer||!!this.childrenAfterGroup?.length;const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,i){const n={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};this.__localEventService?.dispatchEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){if(this.footer)return this.sibling.isSelected();const e=this.rowPinned&&this.pinnedSibling;return e?e.isSelected():this.__selected}depthFirstSearch(e){const t=this.childrenAfterGroup;if(t)for(let i=0,n=t.length;i<n;++i)t[i].depthFirstSearch(e);e(this)}dispatchRowEvent(e){this.__localEventService?.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,i="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:i})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){(this.__localEventService??(this.__localEventService=new Vm)).addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){this.beans.validation?.checkRowEvents(e);const i=this.__localEventService??(this.__localEventService=new Vm);this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,i);const n=this.frameworkEventListenerService?.wrap(e,t)??t;i.addEventListener(e,n)}removeEventListener(e,t){const i=this.frameworkEventListenerService?.unwrap(e,t)??t;this.removeLocalListener(e,i)}removeLocalListener(e,t){const i=this.__localEventService;i&&(i.removeEventListener(e,t),i.noRegisteredListenersExist()&&(this.__localEventService=null))}isFullWidthCell(){if(Ee(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const e=[];let t=this;for(;t?.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){const e=this.childStore;return e?e.getFirstNode():this.childrenAfterSort?.[0]??null}};function U8e(e,t,i){return ct(t,{type:i,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var $8e=new Set(["__autoHeights","__checkAutoHeightsDebounced","__localEventService","__objectId","_leafs","childStore","oldRowTop","sticky","treeNodeFlags","treeParent"]),K8e=(e,t)=>{const i=new gg(t);for(const n of Object.keys(e))$8e.has(n)||(i[n]=e[n]);return i.oldRowTop=null,i},ace=e=>{for(;e?.length;){const t=e[0];if(t.data)return t;e=t.childrenAfterGroup}},lce={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},Y8e=new Set(Object.values(lce));function Mp(e,t){const i=e.filterUi;if(!i)return null;if(i.created)return i.promise;if(t)return null;const n=i.create(i.refreshed),s=i;return s.created=!0,s.promise=n,n}function X8e(e,t,i,n,s,o,r){return t.refresh?.({...i,model:n,source:o,additionalEventAttributes:r}),e().then(a=>{if(a){const{filter:l,filterParams:c}=a;cce(l,c,n,s,o,r)}})}function cce(e,t,i,n,s,o){e?.refresh?.({...t,model:i,state:n,source:s,additionalEventAttributes:o})}function uce(e,t,i){const n=e();n?.created&&n.promise.then(s=>{const o=t();cce(s,n.filterParams,o,i()??{model:o},"ui")})}function bq(e,t,i,n,s,o,r){let a,l=!1,c;switch(e){case"apply":{const u=n();c=u?.model??null,r&&(c=r(c)),a={state:u?.state,model:c},l=!0;break}case"clear":{a={model:null};break}case"reset":{a={model:null},l=!0,c=null;break}case"cancel":{a={model:i()};break}}s(a),l?o(c):uce(t,i,n)}function Vs(e,t){return e[t]??null}function br(e){return lM(e)}function Z8e(e){return{tag:"div",cls:e}}var q8e=class extends An{constructor(e){const{className:t="ag-filter-apply-panel"}=e??{};super(Z8e(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){const i=this.buttons;if(this.buttons=e,i===e)return;const n=this.getGui();qr(n);let s;this.destroyListeners();const o=document.createDocumentFragment(),r=this.className,a=({type:c,label:u})=>{const d=C=>{this.dispatchLocalEvent({type:c,event:C})};["apply","clear","reset","cancel"].includes(c)||Ee(75);const p=c==="apply",m=br({tag:"button",attrs:{type:p&&t?"submit":"button"},ref:`${c}FilterButton`,cls:`ag-button ag-standard-button ${r}-button${p?" "+r+"-apply-button":""}`,children:u});this.activateTabIndex([m]),p&&(s=m);const v=C=>{C.key===pe.ENTER&&(C.preventDefault(),d(C))},b=this.listeners;m.addEventListener("click",d),b.push(()=>m.removeEventListener("click",d)),m.addEventListener("keydown",v),b.push(()=>m.removeEventListener("keydown",v)),o.append(m)};for(const c of e)a(c);this.eApply=s;const l=this.validationTooltipFeature;s&&!l?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!s&&l&&(this.validationTooltipFeature=this.destroyBean(l)),n.append(o)}getApplyButton(){return this.eApply}updateValidity(e,t=null){const i=this.eApply;i&&(M0(i,e===!1),this.validationMessage=t??null,this.validationTooltipFeature?.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){for(const e of this.listeners)e();this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},Q8e={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`};function zp(e,t,i){return FKe(e,Q8e,t,i)}function Lj(e,t){const{debounceMs:i}=e;return eP(e)?(i!=null&&Ee(71),0):i??t}function eP(e){return(e.buttons?.indexOf("apply")??-1)>=0}var J8e=class extends An{constructor(e,t,i,n,s,o){super(),this.column=e,this.wrapper=t,this.eventParent=i,this.updateModel=n,this.isGlobalButtons=s,this.enableGlobalButtonCheck=o,this.hidePopup=null,this.applyActive=!1}postConstruct(){const{comp:e,params:t}=this.wrapper,i=t,n=i.useForm,s=n?"form":"div";this.setTemplate({tag:s,cls:"ag-filter-wrapper"}),n&&this.addManagedElementListeners(this.getGui(),{submit:o=>{o?.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=i,this.resetButtonsPanel(i),this.addManagedListeners(this.eventParent,{filterParamsChanged:({column:o,params:r})=>{o===this.column&&this.resetButtonsPanel(r,this.params)},filterStateChanged:({column:o,state:r})=>{o===this.column&&this.eButtons?.updateValidity(r.valid!==!1)},filterAction:({column:o,action:r,event:a})=>{o===this.column&&this.afterAction(r,a)},...this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:o})=>{if(o!==this.isGlobalButtons){this.isGlobalButtons=o;const r=this.params;this.resetButtonsPanel(r,r,!0)}}}:void 0})}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,i){const{buttons:n,readOnly:s}=t??{},{buttons:o,readOnly:r,useForm:a}=e;if(!i&&s===r&&w0(n,o))return;const l=o&&o.length>0&&!e.readOnly&&!this.isGlobalButtons;let c=this.eButtons;if(l){const u=o.map(d=>{const p=`${d}Filter`;return{type:d,label:zp(this,p)}});if(this.applyActive=eP(this.params),!c){c=this.createBean(new q8e),this.appendChild(c.getGui());const d=this.column,p=f=>({event:m})=>{this.updateModel(d,f,{fromButtons:!0}),this.afterAction(f,m)};c?.addManagedListeners(c,{apply:p("apply"),clear:p("clear"),reset:p("reset"),cancel:p("cancel")}),this.eButtons=c}c.updateButtons(u,a)}else this.applyActive=!1,c&&(ug(c.getGui()),this.eButtons=this.destroyBean(c))}close(e){const t=this.hidePopup;if(!t)return;const i=e,n=i?.key;let s;(n===pe.ENTER||n===pe.SPACE)&&(s={keyboardEvent:i}),t(s),this.hidePopup=null}afterAction(e,t){const{params:i,applyActive:n}=this,s=i?.closeOnApply;switch(e){case"apply":{t?.preventDefault(),s&&n&&this.close(t);break}case"reset":{s&&n&&this.close();break}case"cancel":{s&&this.close(t);break}}}handleKeyDown(e){!e.defaultPrevented&&e.key===pe.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply",{fromButtons:!0}),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},e9e={tag:"div",cls:"ag-filter"},t9e=class extends An{constructor(e,t,i){super(e9e),this.column=e,this.source=t,this.enableGlobalButtonCheck=i,this.wrapper=null}postConstruct(){this.beans.colFilter?.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){return this.wrapper?.then(e=>e.comp)??null}afterInit(){return this.wrapper?.then(()=>{})??qt.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.wrapper?.then(t=>{this.comp?.afterGuiAttached(e),t?.comp?.afterGuiAttached?.(e)})}afterGuiDetached(){this.wrapper?.then(e=>{e?.comp?.afterGuiDetached?.()})}createFilter(e){const{column:t,source:i,beans:{colFilter:n}}=this,s=n.getFilterUiForDisplay(t)??null;this.wrapper=s,s?.then(o=>{if(!o)return;const{isHandler:r,comp:a}=o;let l;if(r){const c=!!this.enableGlobalButtonCheck,u=this.createBean(new J8e(t,o,n,n.updateModel.bind(n),c&&n.isGlobalButtons,c));this.comp=u,l=u.getGui()}else l=a.getGui(),We(l)||Ee(69,{guiFromFilter:l});this.appendChild(l),e?this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()}):a.afterGuiAttached?.(this.afterGuiAttachedParams)})}onFilterDestroyed(e){const{source:t,column:i}=e;(t==="api"||t==="paramsUpdated")&&i.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(qr(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){this.beans.colFilter?.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}},Sq={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Cq=["january","february","march","april","may","june","july","august","september","october","november","december"];function i9e(e,t){return e==null?-1:t==null?1:Number.parseFloat(e)-Number.parseFloat(t)}function xq(e){return e instanceof Date&&!isNaN(e.getTime())}var bz={number:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>t===!1,numberOfInputs:0}]}),date:()=>({isValidDate:xq}),dateString:({dataTypeDefinition:e})=>({comparator:(t,i)=>{const n=e.dateParser(i);return i==null||n<t?-1:n>t?1:0},isValidDate:t=>typeof t=="string"&&xq(e.dateParser(t))}),dateTime:e=>bz.date(e),dateTimeString:e=>bz.dateString(e),object:()=>{},text:()=>{}},Sz={number:()=>({comparator:i9e}),boolean:({t:e})=>({valueFormatter:t=>We(t.value)?e(String(t.value),t.value?"True":"False"):e("blanks","(Blanks)")}),date:({formatValue:e,t})=>({valueFormatter:i=>{const n=e(i);return We(n)?n:t("blanks","(Blanks)")},treeList:!0,treeListFormatter:(i,n)=>{if(i==="NaN")return t("invalidDate","Invalid Date");if(n===1&&i!=null){const s=Cq[Number(i)-1];return t(s,Sq[s])}return i??t("blanks","(Blanks)")},treeListPathGetter:i=>sT(i,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:i})=>({valueFormatter:n=>{const s=e(n);return We(s)?s:i("blanks","(Blanks)")},treeList:!0,treeListPathGetter:n=>sT(t.dateParser(n??void 0),!1),treeListFormatter:(n,s)=>{if(s===1&&n!=null){const o=Cq[Number(n)-1];return i(o,Sq[o])}return n??i("blanks","(Blanks)")}}),dateTime:e=>{const t=Sz.date(e);return t.treeListPathGetter=sT,t},dateTimeString(e){const t=e.dataTypeDefinition.dateParser,i=Sz.dateString(e);return i.treeListPathGetter=n=>sT(t(n??void 0)),i},object:({formatValue:e,t})=>({valueFormatter:i=>{const n=e(i);return We(n)?n:t("blanks","(Blanks)")}}),text:()=>{}};function n9e(e,t,i,n,s,o,r){let a=t,l=i;const c=e==="agSetColumnFilter";!l&&n.baseDataType==="object"&&!c&&(l=({column:f,node:m})=>s({column:f,node:m,value:o.valueSvc.getValue(f,m)}));const d=(c?Sz:bz)[n.baseDataType],p=d({dataTypeDefinition:n,formatValue:s,t:r});return a=typeof t=="object"?{...p,...t}:p,{filterParams:a,filterValueGetter:l}}var s9e={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},o9e={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function r9e(e,t=!1){return(t?o9e:s9e)[e??"text"]}var dce="ag-resizer-wrapper",Ap=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),a9e={tag:"div",cls:dce,children:[Ap("eTopLeft","topLeft"),Ap("eTop","top"),Ap("eTopRight","topRight"),Ap("eRight","right"),Ap("eBottomRight","bottomRight"),Ap("eBottom","bottom"),Ap("eBottomLeft","bottomLeft"),Ap("eLeft","left")]},l9e=class extends we{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){const{clientHeight:t,clientWidth:i}=this.offsetParent,n=i/2-this.getWidth()/2,s=t/2-this.getHeight()/2;this.offsetElement(n,s,e)}initialisePosition(e){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:i,minWidth:n,width:s,minHeight:o,height:r,x:a,y:l}=this.config;this.offsetParent||this.setOffsetParent();let c=0,u=0;const d=Fh(this.element);if(d){const p=this.findBoundaryElement(),f=window.getComputedStyle(p);if(f.minWidth!=null){const m=p.offsetWidth-this.element.offsetWidth;u=Number.parseInt(f.minWidth,10)-m}if(f.minHeight!=null){const m=p.offsetHeight-this.element.offsetHeight;c=Number.parseInt(f.minHeight,10)-m}}if(this.minHeight=o||c,this.minWidth=n||u,s&&this.setWidth(s),r&&this.setHeight(r),(!s||!r)&&this.refreshSize(),t)this.center(e);else if(a||l)this.offsetElement(a,l,e);else if(d&&i){let p=this.boundaryEl,f=!0;if(p||(p=this.findBoundaryElement(),f=!1),p){const m=Number.parseFloat(p.style.top),v=Number.parseFloat(p.style.left);f?this.offsetElement(isNaN(v)?0:v,isNaN(m)?0:m,e):this.setPosition(v,m)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragSvc?.addDragSource(i),this.moveElementDragListener=i):(this.dragSvc?.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const n=!!e[t],s=this.getResizerElement(t),o={dragStartPixels:0,eElement:s,onDragStart:r=>this.onResizeStart(r,t),onDragging:this.onResize.bind(this),onDragStop:r=>this.onResizeEnd(r,t)};(n||!this.isAlive()&&!n)&&(n?(this.dragSvc?.addDragSource(o),this.resizeListeners.push(o),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=n)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let n=!1;if(typeof e=="string"&&e.includes("%"))kw(i,e),e=Zae(i),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(n?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?kw(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:Number.parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const n=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:n.top,r=e?0:s.top;let a=0;if(t){const c=this.element.parentElement;if(c){const{bottom:u}=c.getBoundingClientRect();a=u-n.bottom}}return i+r-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let n=!1;if(typeof e=="string"&&e.includes("%"))Tu(t,e),e=SR(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:s}=this.offsetParent,o=i?this.position.x:this.element.getBoundingClientRect().left;s&&e+o>s&&(e=s-o)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Tu(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:Number.parseFloat(e)))}offsetElement(e=0,t=0,i){const{forcePopupParentAsOffsetParent:n}=this.config,s=n?this.boundaryEl:this.element;s&&(this.popupSvc?.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:i}),this.setPosition(Number.parseFloat(s.style.left),Number.parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e&&this.popupSvc?(this.resizeObserverSubscriber?.(),this.resizeObserverSubscriber=Bh(this.beans,this.popupSvc?.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:n,anywhereWithin:s,topBuffer:o}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!i,!!s,r)?0:r,c=this.shouldSkipY(t,!!n,o,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,i,n){const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:s.left;let l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=r.right;return l?!0:(t?l=n<0&&e.clientX>a+o.left||n>0&&e.clientX<a+o.left:i?l=n<0&&e.clientX>r.right||n>0&&e.clientX<a+o.left:l=n<0&&e.clientX>r.right||n>0&&e.clientX<r.right,l)}shouldSkipY(e,t,i=0,n){const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:s.top;let l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=r.bottom;return l?!0:(t?l=n<0&&e.clientY>a+o.top+i||n>0&&e.clientY<a+o.top:l=n<0&&e.clientY>r.bottom||n>0&&e.clientY<r.bottom,l)}createResizeMap(){const e=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(br(a9e)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0,this.element.querySelector(`.${dce}`)?.remove(),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:n}=this.config;!i&&!n&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let n=0;n<e.length;n++){const s=e[n],o=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s===this.element)continue;let r=this.minHeight||0,a=this.minWidth||0;if(o){const l=window.getComputedStyle(s);l.minHeight&&(r=Number.parseInt(l.minHeight,10)),l.minWidth&&(a=Number.parseInt(l.minWidth,10))}else r=s.offsetHeight,a=s.offsetWidth;t+=r,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let n=0;n<i.length;n++){const s=i[n];s!==t&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(t=i[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:n,isRight:s,isBottom:o,isLeft:r}=this.currentResizer,a=s||r,l=o||n,{movementX:c,movementY:u}=this.calculateMouseMovement({e,isLeft:r,isTop:n}),d=this.position.x,p=this.position.y;let f=0,m=0;if(a&&c){const v=r?-1:1,b=this.getWidth(),C=b+c*v;let x=!1;r&&(f=b-C,(d+f<=0||C<=this.minWidth)&&(x=!0,f=0)),x||this.setWidth(C)}if(l&&u){const v=n?-1:1,b=this.getHeight(),C=b+u*v;let x=!1;n?(m=b-C,(p+m<=0||C<=this.minHeight)&&(x=!0,m=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&b<C&&this.getMinSizeOfSiblings().height+C>this.element.parentElement.offsetHeight&&(x=!0),x||this.setHeight(C)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&f||m)&&this.offsetElement(d+f,p+m)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());const{movementX:s,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+s,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragSvc?.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},hce="__ag_Grid_Stop_Propagation";function $m(e){e[hce]=!0}function eh(e){return e[hce]===!0}var c9e="ag-focus-managed",bC=class extends we{constructor(e,t={}){super(),this.eFocusable=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;const n=Ly(this.beans,this.eFocusable,!1,i.shiftKey);n&&(n.focus(),i.preventDefault())},...t}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:i}}=this;e.classList.add(c9e),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),i&&this.addManagedElementListeners(e,{focusout:i})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||eh(t))return;const{callbacks:i}=this;if(i.shouldStopEventPropagation(t)){$m(t);return}t.key===pe.TAB?i.onTabKeyDown(t):i.handleKeyDown&&i.handleKeyDown(t)}})}},u9e=class extends An{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){const e={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new bC(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new l9e(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){const t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}refresh(e){const t=e,i=this.params;this.params=t,t.source==="colDef"&&this.updateParams(t,i);const s=t.state,o=this.state;return this.state=s,(s.model!==o.model||s.state!==o.state)&&this.setModelIntoUi(s.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=eP(e),this.setupApplyDebounced()}doesFilterPass(e){Ee(283);const{getHandler:t,model:i,column:n}=this.params;return t().doesFilterPass({...e,model:i,handlerParams:this.beans.colFilter.getHandlerParams(n)})}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return Ee(284),this.params.model!=null}setupApplyDebounced(){const e=Lj(this.params,this.defaultDebounceMs),t=Co(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return Ee(285),this.params.model}setModel(e){Ee(286);const{beans:t,params:i}=this;return t.colFilter.setModelForColumnLegacy(i.column,e)}applyModel(e="api"){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){const{params:t,state:i}=this,n=!this.areModelsEqual(t.model,i.model);return n&&t.onAction("apply",e),n}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();const i=this.getModelFromUi(),n={model:i,state:this.getState(),valid:this.canApply(i)};this.state=n;const s=this.params;s.onStateChange(n),s.onUiChange(this.getUiChangeEventParams()),this.gos.get("enableFilterHandlers")||this.eventSvc.dispatchEvent({type:"filterModified",column:s.column,filterInstance:this}),e??(e=this.applyActive?void 0:"debounce"),e==="immediately"?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):e==="debounce"&&this.applyDebounced()}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e?.container,this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:i}=this;if(!t)return;const n=e==="floatingFilter"||e==="columnFilter";n?(t.restoreLastSize(),t.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(n)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e){return zp(this,e)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||e==null&&t==null?!0:e==null||t==null?!1:this.areNonNullModelsEqual(e,t)}};function pce(e){return!!e.operator}function d9e(e,t,i){if(t==null)return null;let n=null;const{compName:s,jsComp:o,fwComp:r}=Gle(e,t);return s?n={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[s]:o==null&&r==null&&t.filter===!0&&(n=i()),n}var cI={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},Pj=class extends we{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?cI.AUTO_HEIGHT:t.print?cI.PRINT:cI.NORMAL;this.view.updateLayoutClasses(i,t)}},kp="Viewport",wq="fakeVScrollComp",Q2=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],Dq=100,J2=150,h9e=class extends we{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=Co(this,()=>this.lastScrollSource[1]=null,J2),this.resetLastVScrollDebounced=Co(this,()=>this.lastScrollSource[0]=null,J2)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,i=>{this.centerRowsCtrl=i.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,kp)});for(const e of Q2){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?Co(this,this.onVScroll.bind(this,kp),Dq):this.onVScroll.bind(this,kp),n=t?Co(this,this.onVScroll.bind(this,wq),Dq):this.onVScroll.bind(this,wq);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,n)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Q2,kp]){if(this.lastScrollSource[1]===t)continue;const i=this.getViewportForSource(t);xR(i,e,this.enableRtl)}}getViewportForSource(e){return e===kp?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const n=CR(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(n),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===kp?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:i}=this;i?.setScrollTop(t),this.nextScrollTop=t,e===kp?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,i?.active?i.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},J2)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!wm()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=cj(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const i of Q2)if(this.getViewportForSource(i).scrollLeft!==e){t=!0;break}t&&this.onHScroll(kp)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const n=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:n:e=Math.min(Math.max(e,0),n)),xR(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:i,lastScrollTop:n}=this;return{top:n,bottom:n+i}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:i}=this.beans,n=i.getRowCount();let s=-1;for(let o=0;o<n;o++){const r=i.getRow(o);if(typeof e=="function"){if(r&&e(r)){s=o;break}}else if(e===r||e===r.data){s=o;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t,i=0){if(wo(this.gos,"print"))return;const{rowModel:n}=this.beans,s=n.getRowCount();if(typeof e!="number"||e<0||e>=s){Ee(88,{index:e});return}this.clearRetryListeners();const{frameworkOverrides:o,pageBounds:r,rowContainerHeight:a,rowRenderer:l}=this.beans;o.wrapIncoming(()=>{const c=this.ctrlsSvc.getGridBodyCtrl(),u=n.getRow(e);let d,p,f=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:m,stickyBottomHeight:v}=c,b=u.rowTop,C=u.rowHeight,x=r.getPixelOffset(),w=u.rowTop-x,M=w+u.rowHeight,T=this.getVScrollPosition(),L=a.divStretchOffset,I=T.top+L,R=T.bottom+L,O=R-I,_=a.getScrollPositionForPixel(w),B=a.getScrollPositionForPixel(M-O),V=Math.min((_+B)/2,w),j=I+m>w,K=R-v<M;let Y=null;t==="top"?Y=_-m:t==="bottom"?Y=B+v:t==="middle"?Y=V:j?Y=_-m:K&&(B-_>O?Y=_-m:Y=B+v),Y!==null&&(this.setVerticalScrollPosition(Y),l.redraw({afterScroll:!0})),d=b!==u.rowTop||C!==u.rowHeight,p=m!==c.stickyTopHeight||v!==c.stickyBottomHeight,f++}while((d||p)&&f<10);if(this.animationFrameSvc?.flushAllFrames(),i<10&&(u?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){const m=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const v=this.getVScrollPosition().top;m!==v&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=n.getRowCount())&&this.ensureIndexVisible(e,t,i+1)}})}})}clearRetryListeners(){for(const e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){const{colModel:i,frameworkOverrides:n}=this.beans,s=i.getCol(e);if(!s||s.isPinned()||!this.visibleCols.isColDisplayed(s))return;const o=this.getPositionedHorizontalScroll(s,t);n.wrapIncoming(()=>{o!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:n}=this.isColumnOutsideViewport(e),s=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?i:n)||s,l=r?n:i;t!=="auto"&&(a=t==="start",l=t==="end");const c=t==="middle";if(a||l||c){const{colLeft:u,colMiddle:d,colRight:p}=this.getColumnBounds(e);return c?d-o/2:a?r?p:u:r?u-o:p-o}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:n,colRight:s}=this.getColumnBounds(e),o=this.enableRtl,r=o?t>s:i<s,a=o?i<n:t>n;return{columnBeforeStart:r,columnAfterEnd:a}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleCols.bodyWidth,n=e.getActualWidth(),s=e.getLeft(),o=t?-1:1,r=t?i-s:s,a=r+n*o,l=r+n/2*o;return{colLeft:r,colMiddle:l,colRight:a}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=t,n=e+t;return{start:i,end:n,width:e}}},Nj=class extends we{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=wo(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:i}=this.beans,n=t.bodyWidth,s=t.getColsLeftWidth(),o=t.getDisplayedColumnsRightWidth();let r;e?r=n+s+o:(r=n,this.addSpacer&&(this.gos.get("enableRtl")?s:o)===0&&i.verticalScrollShowing&&(r+=i.getScrollbarWidth())),this.callback(r)}},p9e=class extends we{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:i}=this,n=()=>{_h(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(n),i.registerBodyViewportResizeListener(n)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const i=this.centerContainerCtrl.getCenterWidth();i!==this.centerWidth&&(this.centerWidth=i,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=cj(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,t)}};function uI(e,t,i,n){const s=t.getColDef().cellRendererParams?.suppressMouseEventHandling;return gce(e,t,i,n,s)}function g9e(e,t,i,n){const s=t?.suppressMouseEventHandling;return gce(e,void 0,i,n,s)}function gce(e,t,i,n,s){return s?s(ct(e,{column:t,node:i,event:n})):!1}function fce(e,t,i){let n=t;for(;n;){const s=yle(e,n,i);if(s)return s;n=n.parentElement}return null}var FR="cellCtrl";function Oj(e,t){return fce(e,t,FR)}var BR="renderedRow";function f9e(e,t){return fce(e,t,BR)}function Cz(e,t,i,n,s){const o=n?n.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const r=ct(e,{event:t,editing:s,column:n,node:i,data:i.data,colDef:n.getColDef()});return!!(o&&o(r))}function m9e(e){const{pinnedRowModel:t,rowModel:i}=e,[n,s]=[t?.isEmpty("top")??!0,t?.isEmpty("bottom")??!0],o=n?null:"top";let r,a;s?(r=null,a=i.getRowCount()-1):(r="bottom",a=t?.getPinnedBottomRowCount()??-1);const{visibleCols:l,rangeSvc:c}=e,u=l.allCols;!c||!u?.length||c.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:a,rowEndPinned:r})}var y9e=65,v9e=67,b9e=86,S9e=68,C9e=90,x9e=89;function w9e(e){const{keyCode:t}=e;let i;switch(t){case y9e:i=pe.A;break;case v9e:i=pe.C;break;case b9e:i=pe.V;break;case S9e:i=pe.D;break;case C9e:i=pe.Z;break;case x9e:i=pe.Y;break;default:i=e.code}return i}var D9e=class extends we{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){const t=["dblclick","contextmenu","mouseover","mouseout","click",tle("touchstart")?"touchstart":"mousedown"];for(const i of t){const n=this.processMouseEvent.bind(this,i);this.addManagedElementListeners(this.element,{[i]:n})}}processMouseEvent(e,t){if(!k0(this.beans,t)||eh(t))return;const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(i?.column&&i.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,n,i)):(i&&i.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:Oj(t,e),rowCtrl:f9e(t,e)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):n?.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,i){const n=this.editSvc?.isEditing(e,{withOpenEditor:!0})??!1;!Cz(this.gos,i,e.rowNode,e.column,n)&&t==="keydown"&&(!n&&this.beans.navigation?.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,n),Ule(i)&&e.processCharacter(i)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const{rowNode:n}=e,{focusSvc:s,navigation:o}=this.beans,a=s.getFocusedCell()?.column;if(!Cz(this.gos,i,n,a,!1)){const c=i.key;if(t==="keydown")switch(c){case pe.PAGE_HOME:case pe.PAGE_END:case pe.PAGE_UP:case pe.PAGE_DOWN:o?.handlePageScrollingKey(i,!0);break;case pe.LEFT:case pe.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case pe.UP:case pe.DOWN:e.onKeyboardNavigate(i);break;case pe.TAB:e.onTabKeyDown(i);break}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!k0(this.beans,e))return;const i=w9e(e),{clipboardSvc:n,undoRedo:s}=this.beans;if(i===pe.A)return this.onCtrlAndA(e);if(i===pe.C)return this.onCtrlAndC(n,e);if(i===pe.D)return this.onCtrlAndD(n,e);if(i===pe.V)return this.onCtrlAndV(n,e);if(i===pe.X)return this.onCtrlAndX(n,e);if(i===pe.Y)return this.onCtrlAndY(s);if(i===pe.Z)return this.onCtrlAndZ(s,e)}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:i,selectionSvc:n},gos:s}=this;i&&hg(s)&&!fYe(s)&&t.isRowsToRender()?m9e(this.beans):n&&n.selectAllRowNodes({source:"keyboardSelectAll",selectAll:wle(s)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:i}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(i,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:i}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(i,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){const{cellCtrl:i}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(i,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e?.redo("ui")}},mce=class extends we{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,i=t!=null?`${t}px`:"";this.eContainer.style.height=i,this.eViewport&&(this.eViewport.style.height=i)}},aT=e=>e.topRowCtrls,lT=e=>e.getStickyTopRowCtrls(),cT=e=>e.getStickyBottomRowCtrls(),uT=e=>e.bottomRowCtrls,dT=e=>e.allRowCtrls,eB=e=>e.getCtrls("top"),tB=e=>e.getCtrls("center"),iB=e=>e.getCtrls("bottom"),M9e={center:{type:"center",name:"center-cols",getRowCtrls:dT,getSpannedRowCtrls:tB},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:dT,getSpannedRowCtrls:tB},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:dT,getSpannedRowCtrls:tB},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:dT},topCenter:{type:"center",name:"floating-top",getRowCtrls:aT,getSpannedRowCtrls:eB},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:aT,getSpannedRowCtrls:eB},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:aT,getSpannedRowCtrls:eB},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:aT},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:lT},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:lT},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:lT},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:lT},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:cT},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:cT},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:cT},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:cT},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:uT,getSpannedRowCtrls:iB},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:uT,getSpannedRowCtrls:iB},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:uT,getSpannedRowCtrls:iB},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:uT}};function yce(e){return`ag-${hM(e).name}-viewport`}function dI(e){const t=hM(e);return t.container??`ag-${t.name}-container`}function A9e(e){return`ag-${hM(e).name}-spanned-cells-container`}function hM(e){return M9e[e]}var k9e=["topCenter","topLeft","topRight"],T9e=["bottomCenter","bottomLeft","bottomRight"],I9e=["center","left","right"],R9e=["center","left","right","fullWidth"],E9e=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],L9e=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],P9e=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],vce=["stickyTopCenter","stickyTopLeft","stickyTopRight"],bce=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],N9e=[...vce,"stickyTopFullWidth",...bce,"stickyBottomFullWidth"],O9e=[...k9e,...T9e,...I9e,...vce,...bce],F9e=class extends we{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=hM(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new p9e(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,i,n){this.comp=e,this.eContainer=t,this.eSpannedContainer=i,this.eViewport=n,this.createManagedBean(new D9e(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:s,rangeSvc:o}=this.beans,r=()=>this.onPinnedWidthChanged();this.forContainers(L9e,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(s?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:r})}),this.forContainers(P9e,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(s?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:r})}),this.forContainers(R9e,()=>this.createManagedBean(new mce(this.eContainer,this.name==="center"?n:void 0))),o&&this.forContainers(O9e,()=>this.createManagedBean(o.createDragListenerFeature(this.eContainer))),this.forContainers(E9e,()=>this.createManagedBean(new Nj(a=>this.comp.setContainerWidth(`${a}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i,displayedColumnsWidthChanged:i,displayedRowsChanged:n=>this.onDisplayedRowsChanged(n.afterScroll)}),i(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const n=this.options.getSpannedRowCtrls(e);n&&this.comp.setSpannedRowCtrls(n,!1)}})}listenOnDomOrder(){if(N9e.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const i=this.gos.get("ensureDomOrder"),n=wo(this.gos,"print");this.comp.setDomOrder(i||n)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=i=>{e.dragging&&i.cancelable&&i.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return A0(this.eViewport)}getCenterViewportScrollLeft(){return CR(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=Bh(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return Qae(this.eViewport)}getViewportScrollLeft(){return CR(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||dj(this.eViewport)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){xR(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const i=wo(this.gos,"print"),s=this.gos.get("embedFullWidthRows")||i,o=t.filter(r=>{const a=r.isFullWidth();return this.options.fullWidth?!s&&a:s||!a});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},B9e="ag-force-vertical-scroll",_9e="ag-selectable",z9e="ag-column-moving",G9e=class extends we{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,i,n,s,o,r){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=n,this.eBottom=s,this.eStickyTop=o,this.eStickyBottom=r,this.eCenterColsViewport=i.querySelector(`.${yce("center")}`),this.eFullWidthContainer=i.querySelector(`.${dI("fullWidth")}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${dI("stickyTopFullWidth")}`),this.eStickyBottomFullWidthContainer=r.querySelector(`.${dI("stickyBottomFullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new Pj(this.comp)),this.scrollFeature=this.createManagedBean(new h9e(i)),this.beans.rowDragSvc?.setupRowDrag(i,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,i,s,o,r]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(n),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),i=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:i,rowResizeEnded:i}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const i=t&&e.getScrollbarWidth()||0,n=jle()?16:0,s=`calc(100% + ${i+n}px)`;_h(this.beans,()=>this.comp.setBodyViewportWidth(s)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t}=this;let i=this.gos.get("treeData");if(!i){const n=t.isPivotMode();i=(e?e.columns.length:0)>=(n?2:1)}this.comp.setGridRootRole(i?"treegrid":"grid")}addFocusListeners(e){for(const t of e)this.addManagedElementListeners(t,{focusin:i=>{const{target:n}=i,s=bm(n,"ag-root",t);t.classList.toggle("ag-has-focus",!s)},focusout:i=>{const{target:n,relatedTarget:s}=i,o=t.contains(s),r=bm(s,"ag-root",t);bm(n,"ag-root",t)||(!o||r)&&t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss(z9e,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(_9e,e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){const e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,i=t.isLastRowIndexKnown()?t.getRowCount():-1,n=i===-1?-1:e+i;this.comp.setRowCount(n)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?B9e:null,i=wo(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&Jae(this.eBodyViewport)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let i=t.sizesMeasured;const n=()=>{const s=i&&Ib(this.gos)&&!e.stretching,o=s?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(o,s)};n(),this.addManagedEventListeners({heightScaleChanged:n}),this.addManagedPropertyListener("animateRows",n),this.addManagedEventListeners({gridStylesChanged:()=>{!i&&t.sizesMeasured&&(i=!0,n())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:i,eTop:n,eBottom:s,beans:{popupSvc:o,touchSvc:r}}=this,a=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:a}),r?.mockBodyContextMenu(this,a),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,o)});const l=this.onStickyWheel.bind(this);for(const u of[t,i,n,s])this.addManagedElementListeners(u,{wheel:l});const c=this.onHorizontalWheel.bind(this);for(const u of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(u).eContainer,{wheel:c});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&k0(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:n}=e||t;(n===this.eBodyViewport||n===this.ctrlsSvc.get("center").eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,i=e?.getPinnedTopTotalHeight(),n=e?.getPinnedBottomTotalHeight(),s=t.getPinnedRowBorderWidth(),o=t.getRowBorderWidth(),r=s-o,a=i?r+i:0,l=n?r+n:0;this.comp.setTopHeight(a),this.comp.setBottomHeight(l),this.comp.setTopInvisible(a<=0),this.comp.setBottomInvisible(l<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){const t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),i=this.pinnedRowModel?.getPinnedTopTotalHeight()??0;let n=0;t>0&&(n+=t),i>0&&(n+=i),n>0&&(n+=1),this.comp.setStickyTopTop(`${n}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:i}=this,n=e?.getPinnedBottomTotalHeight()??0,o=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,r=n+o;i.setStickyBottomBottom(`${r}px`)}};function V9e(e,t){return Oj(e,t.target)?.getFocusedCellPosition()??null}function Mq(e,t){const i=wo(e.gos,"normal"),n=t;let s,o;n.clientX!=null||n.clientY!=null?(s=n.clientX,o=n.clientY):(s=n.x,o=n.y);const{pageFirstPixel:r}=e.pageBounds.getCurrentPagePixelRange();if(o+=r,i){const a=e.ctrlsSvc.getScrollFeature(),l=a.getVScrollPosition(),c=a.getHScrollPosition();s+=c.left,o+=l.top}return{x:s,y:o}}var Sce=class extends An{constructor(e,t){super(),this.direction=t,this.eViewport=ot,this.eContainer=ot,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",Hle()||wm())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=jle(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),i=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),_h(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;WKe(this,()=>Fh(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},H9e={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},W9e=class extends Sce{constructor(){super(H9e,"horizontal"),this.eLeftSpacer=ot,this.eRightSpacer=ot,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new Nj(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,n=this.scrollVisibleSvc.getScrollbarWidth();i&&(t+=n),Tu(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=n);let s=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(s+=n),Tu(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=n)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),n=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,o=i?0:n===0&&t?16:n,r=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),kw(this.getGui(),o),kw(this.eViewport,o),kw(this.eContainer,o),o||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(r,100):r()}getScrollPosition(){return CR(this.eViewport,this.enableRtl)}setScrollPosition(e){Fh(this.eViewport)||this.attemptSettingScrollPosition(e),xR(this.eViewport,e,this.enableRtl)}},j9e={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},U9e=class extends Sce{constructor(){super(j9e,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new mce(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,i=this.invisibleScrollbar,n=t&&e.getScrollbarWidth()||0,s=n===0&&i?16:n;this.toggleCss("ag-scrollbar-invisible",i),Tu(this.getGui(),s),Tu(this.eViewport,s),Tu(this.eContainer,s),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const i=e.getGridBodyCtrl().eBodyViewport,n=this.getScrollPosition(),s=i.scrollTop;n!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!Fh(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},$9e="ag-column-first",K9e="ag-column-last";function Cce(e,t,i,n){return tn(e)?[]:X9e(e.headerClass,e,t,i,n)}function xce(e,t,i){e.toggleCss($9e,i.isColAtEdge(t,"first")),e.toggleCss(K9e,i.isColAtEdge(t,"last"))}function Y9e(e,t,i,n){return ct(t,{colDef:e,column:i,columnGroup:n})}function X9e(e,t,i,n,s){if(tn(e))return[];let o;if(typeof e=="function"){const r=Y9e(t,i,n,s);o=e(r)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}function Z9e(e,t,i){t.addManagedElementListeners(i,{keydown:n=>{if(!n.defaultPrevented&&n.key===pe.TAB){const s=n.shiftKey;Ly(e,i,!1,s)||mS(e,s)&&n.preventDefault()}}})}function q9e(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function Dm(e){return e.gos.get("suppressHeaderFocus")||!!e.overlays?.isExclusive()}function tP(e){return e.gos.get("suppressCellFocus")||!!e.overlays?.isExclusive()}function mS(e,t,i=!1){const n=e.ctrlsSvc.get("gridCtrl");return!i&&n.focusNextInnerContainer(t)?!0:((i||!t&&!n.isDetailGrid())&&n.forceFocusOutOfContainer(t),!1)}function Su(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function Fj(e){const t=[],i=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const n of i){if(!n)continue;const s=n.getGroupRowCount()||0;for(let o=0;o<s;o++){const r=n.getGroupRowCtrlAtIndex(o),a=t[o];if(r){const l=Q9e(e,r);(a==null||l>a)&&(t[o]=l)}}}return t}function Q9e(e,t){let n=e.colModel.isPivotMode()?eXe(e):Dce(e);const s=t.getHeaderCellCtrls();for(const o of s){const{column:r}=o,a=r.getAutoHeaderHeight();a!=null&&a>n&&r.isAutoHeaderHeight()&&(n=a)}return n}function Bj(e){let i=e.colModel.isPivotMode()?J9e(e):pM(e);return e.colModel.forAllCols(n=>{const s=n.getAutoHeaderHeight();s!=null&&s>i&&n.isAutoHeaderHeight()&&(i=s)}),i}function pM(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function wce(e){return e.gos.get("floatingFiltersHeight")??pM(e)}function Dce(e){return e.gos.get("groupHeaderHeight")??pM(e)}function J9e(e){return e.gos.get("pivotHeaderHeight")??pM(e)}function eXe(e){return e.gos.get("pivotGroupHeaderHeight")??Dce(e)}function tXe(e,t){return e.headerRowIndex===t.headerRowIndex&&e.column===t.column}var iXe=class extends we{setComp(e,t,i){this.comp=e,this.eGui=t;const{beans:n}=this,{headerNavigation:s,touchSvc:o,ctrlsSvc:r}=n;s&&this.createManagedBean(new bC(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,n),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,n)}),this.onPivotModeChanged(n),this.setupHeaderHeight();const a=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:a}),o?.mockHeaderContextMenu(this,a),r.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>_h(this.beans,()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){const{beans:e}=this;let t=0;const i=Fj(e).reduce((o,r)=>o+r,0),n=Bj(e);if(e.filterManager?.hasFloatingFilters()&&(t+=wce(e)),t+=i,t+=n,this.headerHeight===t)return;this.headerHeight=t;const s=`${t+1}px`;this.comp.setHeightAndMinHeight(s),this.eventSvc.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const i=e.visibleCols.allCols.some(n=>n.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",i)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,n=i!==t?"LEFT":"RIGHT",{beans:s}=this,{headerNavigation:o,focusSvc:r}=s;(o.navigateHorizontally(n,!0,e)||!i&&r.focusOverlay(!1)||mS(s,i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:i}=this.beans;switch(e.key){case pe.LEFT:t="LEFT";case pe.RIGHT:{We(t)||(t="RIGHT"),i.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case pe.UP:t="UP";case pe.DOWN:{We(t)||(t="DOWN"),i.navigateVertically(t,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:i,beans:n}=this;!t&&i.contains(Cn(n))||i.contains(t)||(n.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,i){const{menuSvc:n,ctrlsSvc:s}=this.beans;if(!e&&!i||!n?.isHeaderContextMenuEnabled())return;const{target:o}=e??t;(o===this.eGui||o===s.getHeaderRowContainerCtrl()?.eViewport)&&n.showHeaderContextMenu(void 0,e,i)}},_j=class extends we{constructor(e,t,i,n){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=n,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?Ni(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,i=e.get("suppressColumnMoveAnimation"),n=We(this.columnOrGroup.getOldLeft());t?.isActive()&&n&&!i?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),i=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=i,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===i&&this.setLeft(i)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:i,visibleCols:n}=this.beans;if(!wo(i,"print")||e.getPinned()==="left")return t;const o=n.getColsLeftWidth();if(e.getPinned()==="right"){const r=n.bodyWidth;return o+r+t}return o+t}setLeft(e){if(We(e)&&(this.eCell.style.left=`${e}px`),Yn(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&SKe(this.ariaEl,t.length)}}},nXe=0,Mce="headerCtrl",zj=class extends we{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+nXe++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,i,n,s){t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,i,n,s),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.beans.focusSvc.focusedHeader,n=i.getDefinition(),s=n?.suppressHeaderKeyboardEvent;if(!We(s))return!1;const o=ct(this.gos,{colDef:n,column:i,headerRowIndex:t,event:e});return!!s(o)}getWrapperHasFocus(){return Cn(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let i;if(typeof t=="function"){const n=this.getHeaderClassParams();i=t(n)}else i=t;i&&this.comp.setUserStyles(i)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:i,compBean:n}=e,{beans:s}=this,o=d=>{if(!this.isAlive()||!n.isAlive())return;const{paddingTop:p,paddingBottom:f,borderBottomWidth:m,borderTopWidth:v}=Ty(this.eGui),b=p+f+m+v,x=t.offsetHeight+b;if(d<5){const M=!Ys(s)?.contains(t),T=x==0;if(M||T){sz(()=>o(d+1),"raf",s);return}}this.setColHeaderHeight(this.column,x)};let r=!1,a;const l=()=>{const d=this.column.isAutoHeaderHeight();d&&!r&&c(),!d&&r&&u()},c=()=>{r=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),o(0),a=Bh(this.beans,t,()=>o(0))},u=()=>{r=!1,a&&a(),this.comp.toggleCss("ag-header-cell-auto-height",!1),a=void 0};l(),n.addDestroyFunc(()=>u()),n.addManagedListeners(this.column,{widthChanged:()=>r&&o(0)}),n.addManagedEventListeners({sortChanged:()=>{r&&window.setTimeout(()=>o(0))}}),i&&i(l)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:i,eGui:n}=this;!e||!t||!n||(xce(e,t,i.visibleCols),Kae(n,i.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=Dm(this.beans);this.eGui&&Ca(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=Cn(this.beans),i=e.key===pe.LEFT||e.key===pe.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i))return;const s=e.key===pe.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const o=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(o,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(s)}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:i}=this.beans;return i?i.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:i}=this;let n=e.key===pe.LEFT!==t.get("enableRtl");const s=i.getPinned(),o=t.get("enableRtl");return s&&o!==(s==="right")&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case pe.PAGE_DOWN:case pe.PAGE_UP:case pe.PAGE_HOME:case pe.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=Mce,{eGui:i,gos:n}=this;jm(n,i,t,this),e.addDestroyFunc(()=>jm(n,i,t,null))}focus(e){if(!this.isAlive())return!1;const{eGui:t}=this;return t?(t.focus(),this.lastFocusEvent=e||null):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const n=e??t,{menuSvc:s,gos:o}=this.beans;o.get("preventDefaultOnContextMenu")&&n.preventDefault(),s?.isHeaderContextMenuEnabled(i)&&s.showHeaderContextMenu(i,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:i}=this;e.isColumn?i.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):i.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},sXe=class extends zj{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,i,n,s){this.comp=e;const{rowCtrl:o,column:r,beans:a}=this,{colResize:l,context:c,colHover:u,rangeSvc:d}=a,p=cM(this,c,s);this.setGui(t,p),this.updateState(),this.setupWidth(p),this.setupMovingCss(p),this.setupMenuClass(p),this.setupSortableClass(p),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:n,checkMeasuringCallback:m=>this.setRefreshFunction("measuring",m),compBean:p}),this.addColumnHoverListener(p),this.setupFilterClass(p),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(p),this.setupSelectAll(p),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=p.createManagedBean(l.createResizeFeature(o.pinned,r,i,e,this)):pn(i,!1),u?.createHoverFeature(p,[r],t),d?.createRangeHighlightFeature(p,r,e),p.createManagedBean(new _j(r,t,a)),p.createManagedBean(new bC(t,{shouldStopEventPropagation:m=>this.shouldStopEventPropagation(m),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(p),p.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),p.addManagedListeners(r,{colDefChanged:()=>this.refresh()}),p.addManagedListeners(r,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const f=()=>this.checkDisplayName();p.addManagedEventListeners({columnValueChanged:f,columnRowGroupChanged:f,columnPivotChanged:f,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),p.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return ct(t.gos,{colDef:i,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return p6e(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:i,gos:n}=this.beans;return ct(n,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!i&&(!this.openFilterEnabled||xa(this.gos)),showColumnMenu:(o,r)=>{e?.showColumnMenu({column:this.column,buttonElement:o,positionBy:"button",onClosedCallback:r})},showColumnMenuAfterMouseClick:(o,r)=>{e?.showColumnMenu({column:this.column,mouseEvent:o,positionBy:"mouse",onClosedCallback:r})},showFilter:o=>{e?.showFilterMenu({column:this.column,buttonElement:o,containerType:"columnFilter",positionBy:"button"})},progressSort:o=>{t?.progressSort(this.column,!!o,"uiColumnSorted")},setSort:(o,r)=>{t?.setSortForColumn(this.column,o,!!r,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(o,r)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(o,r)}})}setupSelectAll(e){const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature?.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{const i=t.createSelectAllFeature(this.column);i&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(i),this.selectAllFeature?.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!i&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===pe.SPACE&&this.selectAllFeature?.onSpaceKeyDown(e),e.key===pe.ENTER&&this.onEnterKeyDown(e),e.key===pe.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&this.beans.sortSvc?.progressSort(this.column,e.shiftKey,"uiColumnSorted")}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();Aq(i)&&i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),B6e()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),i=Cce(t,this.gos,this.column,null),n=this.userHeaderClasses;this.userHeaderClasses=new Set(i);for(const s of i)n.has(s)?n.delete(s):this.comp.toggleCss(s,!0);for(const s of n)this.comp.toggleCss(s,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(const e of Object.values(this.refreshFunctions))e()}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const i=this.column.getActualWidth();this.comp.setWidth(`${i}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp?.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const i=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",i),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,i=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:n}=this,s=Fj(this.beans),o=s.reduce((p,f)=>p+f,0)===0;if(i.toggleCss("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.toggleCss("ag-header-span-height",!1),i.toggleCss("ag-header-span-total",!1);return}const{numberOfParents:r,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.toggleCss("ag-header-span-height",r>0);const l=Bj(n);if(r===0){i.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${l}px`);return}i.toggleCss("ag-header-span-total",a);const c=(this.column.getFirstRealParent()?.getLevel()??-1)+1,u=s.length-c;let d=0;for(let p=0;p<u;p++)d+=s[s.length-1-p];e.style.setProperty("top",`${-d}px`),e.style.setProperty("height",`${l+d}px`)}refreshAriaSort(){if(this.sortable){const e=this.getLocaleTextFunc(),t=this.beans.sortSvc?.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(cKe(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!xa(this.gos)){const e=this.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(Cn(this.beans)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,i)=>t==="filter"?-1:i.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnounce?.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=s=>this.handleMouseOverChange(s.type==="mouseenter"),i=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},n=s=>this.handleContextMenuMouseEvent(s,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:i,contextmenu:n})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return Aq(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function Aq(e){return typeof e?.getAnchorElementForMenu=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var oXe=0,nB=class extends we{constructor(e,t,i){super(),this.rowIndex=e,this.pinned=t,this.type=i,this.instanceId=oXe++,this.comp=null,this.allCtrls=[];let n="ag-header-row-column";i==="group"?n="ag-header-row-group":i==="filter"&&(n="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${n}`}setRowIndex(e){this.rowIndex=e,this.comp?.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=wo(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,i=!0){this.comp=e,t=cM(this,this.beans.context,t),i&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),i=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:i,virtualColumnsChanged:n=>this.onVirtualColumnsChanged(n.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",i),e.addManagedPropertyListener("ensureDomOrder",n=>this.isEnsureDomOrder=n.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=wo(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=Fj(this.beans);for(let s=0;s<t.length;s++){if(s===this.rowIndex&&this.type==="group")return{topOffset:e,rowHeight:t[s]};e+=t[s]}const i=Bj(this.beans);if(this.type==="column")return{topOffset:e,rowHeight:i};e+=i;const n=wce(this.beans);return{topOffset:e,rowHeight:n}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const n of t)this.recycleAndCreateHeaderCtrls(n,this.ctrlsById,e);const i=n=>{const{focusSvc:s,visibleCols:o}=this.beans;return s.isHeaderWrapperFocused(n)?o.isVisible(n.column):!1};if(e)for(const[n,s]of e)i(s)?this.ctrlsById.set(n,s):this.destroyBean(s);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,i){if(e.isEmptyGroup())return;const n=e.getUniqueId();let s;if(i&&(s=i.get(n),i.delete(n)),s&&s.column!=e&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":{s=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":s=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:s=this.createBean(new sXe(e,this));break}t.set(n,s)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];for(const t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(e=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const i=this.allCtrls.find(s=>s.column==e);return i?i.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},rXe=class extends we{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:i,ctrlsSvc:n,colModel:s,colMoves:o}=this.beans;this.setupCenterWidth(),i?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(o,this.eViewport);const r=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:r,advancedFilterEnabledChanged:r});const a=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;n.register(a,this),s.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,filterManager:i,visibleCols:n}=this.beans;let s=0;const o=t.getFocusHeaderToUseAfterRefresh(),r=()=>{const d=n.headerGroupRowCount;s=d,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));const p=this.groupsRowCtrls.length;if(p!==d){if(p>d){for(let f=d;f<p;f++)this.destroyBean(this.groupsRowCtrls[f]);this.groupsRowCtrls.length=d;return}for(let f=p;f<d;f++){const m=this.createBean(new nB(f,this.pinned,"group"));this.groupsRowCtrls.push(m)}}},a=()=>{const d=s++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new nB(d,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==d&&this.columnsRowCtrl.setRowIndex(d)},l=()=>{this.includeFloatingFilter=!!i?.hasFloatingFilters()&&!this.hidden;const d=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){d();return}e||d();const p=s++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==p&&this.filtersRowCtrl.setRowIndex(p):this.filtersRowCtrl=this.createBean(new nB(p,this.pinned,"filter"))},c=this.getAllCtrls();r(),a(),l();const u=this.getAllCtrls();this.comp.setCtrls(u),this.restoreFocusOnHeader(t,o),c.length!==u.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=i=>i?.getHeaderCellCtrls().find(n=>n.column===e);if(pg(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let i=0;i<this.groupsRowCtrls.length;i++){const n=t(this.groupsRowCtrls[i]);if(n)return n}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,i){const s=this.getAllCtrls()[e];return s?s.focusHeader(t,i):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const i=e?.createBodyDropTarget(this.pinned,t);i&&this.createManagedBean(i)}restoreFocusOnHeader(e,t){if(!t)return;const{column:i}=t;i.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new Nj(e=>this.comp.setCenterWidth(`${e}px`),!0))}},aXe=class extends we{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(Tq(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory?.showMenuAfterContextMenuEvent(e,t,i)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}hideFilterMenu(){Tq(this.beans)?.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!this.activeMenuFactory?.isMenuEnabled(e)&&(xa(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&pg(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(wm()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!xa(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.beans.filterManager?.isFilterAllowed(e)&&!xa(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return xa(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,i,n){const{positionBy:s,onClosedCallback:o}=t,r=t.column;if(s==="button"){const{buttonElement:a}=t;e?.showMenuAfterButtonClick(r,a,i,o,n)}else if(s==="mouse"){const{mouseEvent:a}=t;e?.showMenuAfterMouseEvent(r,a,i,o,n)}else if(r){const a=this.beans,l=a.ctrlsSvc;l.getScrollFeature().ensureColumnVisible(r,"auto"),_h(a,()=>{const c=l.getHeaderRowContainerCtrl(r.getPinned())?.getHeaderCtrlForColumn(r);c&&e?.showMenuAfterButtonClick(r,c.getAnchorElementForMenu(n),i,o,n)})}}};function kq(e,t,i){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",i))}function Tq(e){const{enterpriseMenuFactory:t,filterMenuFactory:i,gos:n}=e;return t&&xa(n)?t:i}var iP=class extends xj{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.errorMessages=null}},Ace=class extends An{constructor(){super()}},lXe={tag:"span",cls:"ag-overlay-loading-center"},cXe=class extends Ace{init(){const e=qd(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??lXe),!e){const i=this.getLocaleTextFunc()("loadingOoo","Loading...");this.getGui().textContent=i,this.beans.ariaAnnounce.announceValue(i,"overlay")}}},uXe={tag:"span",cls:"ag-overlay-no-rows-center"},dXe=class extends Ace{init(){const e=qd(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??uXe),!e){const i=this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=i,this.beans.ariaAnnounce.announceValue(i,"overlay")}}};function hXe(e,t,i){const n=kl(e,t,i);if(n){const{className:o}=n;if(typeof o=="string"&&o.includes("ag-icon")||typeof o=="object"&&o["ag-icon"])return n}const s=br({tag:"span"});return s.appendChild(n),s}function kl(e,t,i){let n=null;e==="smallDown"?Ee(262):e==="smallLeft"?Ee(263):e==="smallRight"&&Ee(264);const s=i?.getColDef().icons;if(s&&(n=s[e]),t.gos&&!n){const o=t.gos.get("icons");o&&(n=o[e])}if(n){let o;if(typeof n=="function")o=n();else if(typeof n=="string")o=n;else{Ee(38,{iconName:e});return}if(typeof o=="string")return uj(o);if(pj(o))return o;Ee(133,{iconName:e});return}else{const o=t.registry.getIcon(e);return o||t.validation?.validateIcon(e),br({tag:"span",cls:`ag-icon ag-icon-${o??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var pXe=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}",gXe={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},fXe=class extends An{constructor(){super(),this.dragSource=null,this.eIcon=ot,this.eLabel=ot,this.eGhost=ot,this.registerCSS(pXe)}postConstruct(){const e=t=>hXe(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(gXe),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eGhost:i,eIcon:n,dragSource:s,dropIconMap:o,gos:r}=this;qr(n);let a=null;e||(e=s?.getDefaultIconName?s.getDefaultIconName():"notAllowed"),a=o[e],i.classList.toggle("ag-dnd-ghost-not-allowed",e==="notAllowed"),n.classList.toggle("ag-shake-left-to-right",t),!(a===o.hide&&r.get("suppressDragLeaveHidesColumns"))&&a&&n.appendChild(a)}setLabel(e){this.eLabel.textContent=e}},mXe=".ag-checkbox-cell{height:100%}",yXe={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},vXe=class extends An{constructor(){super(yXe,[Mj]),this.eCheckbox=ot,this.registerCSS(mXe)}init(t){this.refresh(t);const{eCheckbox:i,beans:n}=this,s=i.getInputElement();s.setAttribute("tabindex","-1"),jae(s,"polite"),this.addManagedListeners(s,{click:o=>{if($m(o),i.isDisabled())return;const r=i.getValue();this.onCheckboxChanged(r)},dblclick:o=>{$m(o)}}),this.addManagedElementListeners(t.eGridCell,{keydown:o=>{if(o.key===pe.SPACE&&!i.isDisabled()){t.eGridCell===Cn(n)&&i.toggle();const r=i.getValue();this.onCheckboxChanged(r),o.preventDefault()}}})}refresh(t){return this.params=t,this.updateCheckbox(t),!0}updateCheckbox(t){let i,n=!0;const{value:s,column:o,node:r}=t;if(r.group&&o)if(typeof s=="boolean")i=s;else{const p=o.getColId();p.startsWith(q1)?i=s==null||s===""?void 0:s==="true":r.aggData&&r.aggData[p]!==void 0||r.sourceRowIndex>=0?i=s??void 0:n=!1}else i=s??void 0;const{eCheckbox:a}=this;if(!n){a.setDisplayed(!1);return}a.setValue(i);const l=t.disabled??!o?.isCellEditable(r);a.setDisabled(l);const c=this.getLocaleTextFunc(),u=Z1(c,i),d=l?u:`${c("ariaToggleCellValue","Press SPACE to toggle cell value")} (${u})`;a.setInputAriaLabel(d)}onCheckboxChanged(t){const{params:i}=this,{column:n,node:s,value:o}=i;this.beans?.editSvc?.setEditingCells([{column:n,colId:n.getColId(),rowIndex:s.rowIndex,rowPinned:s.rowPinned,state:"changed",oldValue:o,newValue:o}],{update:!0,forceRefreshOfEditCellsOnly:!0});const r=s.setDataValue(n,t,"renderer");this.beans.editSvc?.stopEditing({rowNode:s,column:n},{source:this.beans.editSvc?.isBatchEditing()?"ui":"api"}),r||this.updateCheckbox(i)}},Iq=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){const{all:t,visible:i,order:n}=this;t.has(e)||(t.add(e),i.add(e),n.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),Cc(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(const t of this.visible)if(t.id==e)return t}clear(){const{all:e,visible:t,order:i,queued:n}=this;e.clear(),n.clear(),t.clear(),i.length=0}sort(){const{sortSvc:e,rowNodeSorter:t,gos:i}=this.beans,n=e?.getSortOptions()??[],s=CXe(this.order);if(this.order.sort((r,a)=>(r.pinnedSibling?.rowIndex??0)-(a.pinnedSibling?.rowIndex??0)),this.order=t?.doFullSort(this.order,n)??this.order,!s)return;const o=ble(i);o==="bottom"||o==="pinnedBottom"?this.order.push(s):this.order.unshift(s)}hide(e){const{all:t,visible:i}=this;t.forEach(n=>e(n)?i.delete(n):i.add(n)),this.order=Array.from(i),this.sort()}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function kce(e){if(e.level===-1)return!0;const t=e.parent;return t?.childrenAfterSort?.some(i=>i==e)?kce(t):!1}function sB(e,t){const{gos:i,rowModel:n,filterManager:s}=e;return Ry(i)?!n.getRowNode(t.id):s?.isAnyFilterPresent()?!kce(t):i.get("pivotMode")?!t.group:!1}function bXe(e){return!!e.footer&&e.level===-1}function SXe(e){return!!e.pinnedSibling&&bXe(e.pinnedSibling)}function CXe(e){const t=e.findIndex(SXe);if(t>-1)return e.splice(t,1)?.[0]}var Rq=class extends we{postConstruct(){const{gos:e,beans:t}=this;this.top=new Iq(t,"top"),this.bottom=new Iq(t,"bottom");const i=s=>sB(t,s.pinnedSibling),n=()=>{const s=e.get("isRowPinned");s&&e.get("enableRowPinning")&&t.rowModel.forEachNode(o=>this.pinRow(o,s(o)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:s})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow(),this.forContainers(r=>r.hide(i));const o=this.refreshRowPositions();(!s||o)&&this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(wXe),this.refreshRowPositions()},rowNodeDataChanged:({node:s})=>{(e.get("isRowPinnable")?.(s)??!0)||this.pinRow(s,null)},firstDataRendered:n}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(s=>s.hide(i)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:s})=>{this._grandTotalPinned=s==="pinnedBottom"?"bottom":s==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",n)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(t=>{const i=[];t.forEach(n=>i.push(n)),i.forEach(n=>this.pinRow(n,null)),t.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,i){if(e.footer&&e.level>-1)return;if(e.footer&&e.level===-1){this._grandTotalPinned=t,MXe(this.beans);return}const n=e.rowPinned??e.pinnedSibling?.rowPinned;if(n!=null&&t!=null&&t!=n){const r=e.rowPinned?e:e.pinnedSibling,a=e.rowPinned?e.pinnedSibling:e;this.pinRow(r,null,i),this.pinRow(a,t,i);return}const o=i&&DXe(this.beans,e,i);if(o){o.forEach(r=>this.pinRow(r,t));return}if(t==null){const r=e.rowPinned?e:e.pinnedSibling,a=this.findPinnedRowNode(r);if(!a)return;a.delete(r);const l=r.pinnedSibling;oB(r),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(l)}else{const r=Eq(this.beans,e,t),a=this.getContainer(t);a.add(r),sB(this.beans,e)&&a.hide(l=>sB(this.beans,l.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0;const i=n=>{if(n.rowHeightEstimated){const s=dg(this.beans,n);n.setRowTop(t),n.setRowHeight(s.height),t+=s.height,e=!0}};return this.bottom.forEach(i),t=0,this.top.forEach(i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return Lq(this.top)}getPinnedBottomTotalHeight(){return Lq(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){const e=t=>{const i=[];return this.forEachPinnedRow(t,n=>i.push(n.pinnedSibling.id)),i};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,i)=>{for(const n of e[i]){const s=this.beans.rowModel.getRowNode(n);s?this.pinRow(s,i):t.queue(n)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{const i=new Set;e.forEachQueued(n=>{const s=this.beans.rowModel.getRowNode(n);s&&i.add(s)});for(const n of i)e.unqueue(n.id),this.pinRow(n,t)})}pinGrandTotalRow(){const{gos:e,beans:t,_grandTotalPinned:i}=this,n=t.rowModel;if(!Ln(e))return;const s=n.rootNode?.sibling;if(!s)return;const o=s.pinnedSibling,r=o&&this.findPinnedRowNode(o);if(i){if(r&&r.floating!==i&&(r.delete(o),oB(o)),!r||r.floating!==i){const a=Eq(t,s,i);this.getContainer(i).add(a)}}else{if(!r)return;r.delete(o),oB(o)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(t=>t.forEach(i=>i.setRowHeight(i.rowHeight,!0)))}getContainer(e){return e==="top"?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){const t=n=>xXe(this.beans,n);if(e)return t(this.getContainer(e));let i=!1;return this.forContainers(n=>{const s=t(n);i||(i=s)}),i}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e?.dispatchRowEvent("rowPinned")}};function xXe(e,t){let i=0,n=!1;return t.forEach((s,o)=>{if(n||(n=s.rowTop!==i),s.setRowTop(i),s.rowHeightEstimated||s.rowHeight==null){const r=dg(e,s).height;n||(n=s.rowHeight!==r),s.setRowHeight(r)}s.setRowIndex(o),i+=s.rowHeight}),n}function Eq(e,t,i){if(t.pinnedSibling)return t.pinnedSibling;const n=K8e(t,e);n.setRowTop(null),n.setRowIndex(null),n.rowPinned=i;const s=i==="top"?Rj:Ej;return n.id=`${s}${i}-${t.id}`,n.pinnedSibling=t,t.pinnedSibling=n,n}function oB(e){if(!e.pinnedSibling)return;e.rowPinned=null,e.setRowTop(null),e.setRowIndex(null);const t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function wXe(e){const t=new Set;e.forEach(i=>{i.group&&t.add(i)}),t.forEach(i=>e.delete(i))}function DXe(e,t,i){const{rowSpanSvc:n}=e,s=(i&&n?.isCellSpanning(i,t))??!1;if(i&&s)return n?.getCellSpan(i,t)?.spannedNodes}function Lq(e){const t=e.size();if(t===0)return 0;const i=e.getByIndex(t-1);return i===void 0?0:i.rowTop+i.rowHeight}function MXe({gos:e,rowModel:t}){Ln(e)&&t.refreshModel({step:"map"})}var Pq=class extends we{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){const t=i=>{i.setRowHeight(i.rowHeight,!0)};Hx(this.pinnedBottomRows,t),Hx(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0;const i=n=>{if(n.rowHeightEstimated){const s=dg(this.beans,n);n.setRowTop(t),n.setRowHeight(s.height),t+=s.height,e=!0}};return Hx(this.pinnedBottomRows,i),t=0,Hx(this.pinnedTopRows,i),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i=this.getCache(t);if(e===void 0){i.order.length=0,i.cache={};return}const n=pS(this.gos),s=t==="top"?Rj:Ej,o=new Set(i.order),r=[],a=new Set;let l=0,c=-1;for(const u of e){const d=n?.({data:u,level:0,rowPinned:t})??s+this.nextId++;if(a.has(d)){Ee(96,{id:d,data:u});continue}c++,a.add(d),r.push(d);const p=Ew(i,d);if(p!==void 0)p.data!==u&&p.updateData(u),l+=this.setRowTopAndRowIndex(p,l,c),o.delete(d);else{const f=new gg(this.beans);f.id=d,f.data=u,f.rowPinned=t,l+=this.setRowTopAndRowIndex(f,l,c),i.cache[d]=f,i.order.push(d)}}for(const u of o)Ew(i,u)?.clearRowTopAndRowIndex(),delete i.cache[u];i.order=r}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(dg(this.beans,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return Nq(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return Nq(this.pinnedBottomRows)}getPinnedTopRowCount(){return wz(this.pinnedTopRows)}getPinnedBottomRowCount(){return wz(this.pinnedBottomRows)}getPinnedTopRow(e){return xz(this.pinnedTopRows,e)}getPinnedBottomRow(e){return xz(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return Ew(this.getCache(t),e)}forEachPinnedRow(e,t){return Hx(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function Nq(e){const t=wz(e);if(t===0)return 0;const i=xz(e,t-1);return i===void 0?0:i.rowTop+i.rowHeight}function Ew(e,t){return e.cache[t]}function xz(e,t){return Ew(e,e.order[t])}function Hx(e,t){e.order.forEach((i,n)=>{const s=Ew(e,i);s&&t(s,n)})}function wz(e){return e.order.length}var AXe=class extends we{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){const{gos:e}=this,t=()=>{const i=e.get("enableRowPinning"),n=ble(e),o=!!i||(n==="pinnedBottom"||n==="pinnedTop"),r=o?this.inner instanceof Pq:this.inner instanceof Rq;this.inner&&r&&this.destroyBean(this.inner),(r||!this.inner)&&(this.inner=this.createManagedBean(o?new Rq:new Pq))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,i){return this.inner.pinRow(e,t,i)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}};function gM(e){return!!(e.rowPinned&&e.pinnedSibling)}function hl(e,t,i,n){const s=t==="top";if(!i)return hl(e,t,s?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),n);if(!n){const l=s?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return hl(e,t,i,s?e.getPinnedTopRow(l-1):e.getPinnedBottomRow(l-1))}let o=!1,r=!1;const a=[];return e.forEachPinnedRow(t,l=>{if(l===i&&!o){o=!0,a.push(l);return}if(o&&l===n){r=!0,a.push(l);return}o&&!r&&a.push(l)}),a}var kXe={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},TXe=class extends An{constructor(){super(kXe,[Mj]),this.eCheckbox=ot}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:i}=this,n=t.isSelected(),s=Z1(e,n),[o,r]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],a=e(o,r);i.setValue(n,!0),i.setInputAriaLabel(`${a} (${s})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:$m,click:n=>{$m(n),this.beans.selectionSvc?.handleSelectionEvent(n,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:n,previousValue:s})=>{const o=typeof n=="object"?V2(n):void 0,r=typeof s=="object"?V2(s):void 0;o!==r&&this.onSelectableChanged()}),cz(this.gos)||typeof this.getIsVisible()=="function"){const n=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n}),this.addManagedListeners(this.rowNode,{dataChanged:n,cellChanged:n}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:i,gos:n}=this,s=t.selectable,o=this.getIsVisible();let r;if(typeof o=="function"){const d=i?.callbackParams;if(!e)r=o({...d,node:t,data:t.data});else{const p=e.createColumnFunctionCallbackParams(t);r=o({...d,...p})}}else r=o??!1;const a=s&&!r||!s&&r,l=s||r,c=n.get("rowSelection"),u=c&&typeof c!="string"?!V2(c):!!e?.getColDef().showDisabledCheckboxes;this.setVisible(l&&(a?u:!0)),this.setDisplayed(l&&(a?u:!0)),l&&this.eCheckbox.setDisabled(a),i?.removeHidden&&this.setDisplayed(l)}getIsVisible(){const e=this.overrides;if(e)return e.isVisible;const t=this.gos.get("rowSelection");return t&&typeof t!="string"?Rb(t):this.column?.getColDef()?.checkboxSelection}},IXe=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t;const{rowModel:i,pinnedRowModel:n}=this;return t??(t=i.getRowNode(e)),n?.isManual()&&(t??(t=n.getPinnedRowById(e,"top")),t??(t=n.getPinnedRowById(e,"bottom"))),t}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const i=t[0].id===this.rootId,n=t.findIndex(s=>s.id===e.id);if(n>-1){const s=t.slice(0,n),o=t.slice(n+1);return this.setEndRange(e),i?{keep:s,discard:o}:{keep:o,discard:s}}else return{keep:t,discard:[]}}extend(e,t=!1){const i=this.getRoot();if(i==null){const s=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&s.push(o)),s.push(e),this.setRoot(e),{keep:s,discard:[]}}const n=this.getNodesInRange(i,e);if(!n)return this.setRoot(e),{keep:[e],discard:[]};if(n.find(s=>s.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const s=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:s}}}getNodesInRange(e,t){const{pinnedRowModel:i,rowModel:n}=this;if(!i?.isManual())return n.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&!t.rowPinned)return hl(i,"top",e,void 0).concat(n.getNodesInRangeForSelection(n.getRow(0),t)??[]);if(e.rowPinned==="bottom"&&!t.rowPinned){const s=hl(i,"bottom",void 0,e),o=n.getRowCount(),r=n.getRow(o-1);return(n.getNodesInRangeForSelection(t,r)??[]).concat(s)}if(!e.rowPinned&&!t.rowPinned)return n.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&t.rowPinned==="top")return hl(i,"top",e,t);if(e.rowPinned==="bottom"&&t.rowPinned==="top"){const s=hl(i,"top",t,void 0),o=hl(i,"bottom",void 0,e),r=n.getRow(0),a=n.getRow(n.getRowCount()-1);return s.concat(n.getNodesInRangeForSelection(r,a)??[]).concat(o)}if(!e.rowPinned&&t.rowPinned==="top")return hl(i,"top",t,void 0).concat(n.getNodesInRangeForSelection(n.getRow(0),e)??[]);if(e.rowPinned==="top"&&t.rowPinned==="bottom"){const s=hl(i,"top",e,void 0),o=hl(i,"bottom",void 0,t),r=n.getRow(0),a=n.getRow(n.getRowCount()-1);return s.concat(n.getNodesInRangeForSelection(r,a)??[]).concat(o)}if(e.rowPinned==="bottom"&&t.rowPinned==="bottom")return hl(i,"bottom",e,t);if(!e.rowPinned&&t.rowPinned==="bottom"){const s=hl(i,"bottom",void 0,t),o=n.getRow(n.getRowCount());return(n.getNodesInRangeForSelection(e,o)??[]).concat(s)}return null}},RXe=class extends we{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Cn(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new Dj);this.cbSelectAll=t,t.addCss("ag-header-select-all"),Hm(t.getGui(),"presentation"),this.showOrHideSelectAll();const i=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:i,paginationChanged:i,modelUpdated:i}),this.addManagedPropertyListener("rowSelection",({currentValue:n,previousValue:s})=>{const o=r=>typeof r=="string"||!r||r.mode==="singleRow"?void 0:r.selectAll;o(n)!==o(s)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,i=this.cbSelectAll,n=t.getSelectAllState(e);i.setValue(n);const s=t.hasNodesToSelect(e);i.setDisabled(!s),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){const t=this.getLocaleTextFunc(),{headerCellCtrl:i,cbSelectAll:n,cbSelectAllVisible:s}=this,o=n.getValue(),r=Z1(t,o),a=t("ariaRowSelectAll","Press Space to toggle all rows selection");i.setAriaDescriptionProperty("selectAll",s?`${a} (${r})`:null),n.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||i.announceAriaDescription()}checkSelectionType(e){return TR(this.gos)?!0:(Ee(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:i}=this.beans;return Ln(t)||Ry(t)?!0:(Ee(129,{feature:e,rowModel:i.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let i="uiSelectAll";t==="currentPage"?i="uiSelectAllCurrentPage":t==="filtered"&&(i="uiSelectAllFiltered");const n={source:i,selectAll:t},s=this.beans.selectionSvc;e?s.selectAllRowNodes(n):s.deselectAllRowNodes(n)}isCheckboxSelection(){const{column:e,gos:t,beans:i}=this,o=typeof t.get("rowSelection")=="object"?"headerCheckbox":"headerCheckboxSelection";return Tce(i,e)&&this.checkRightRowModelType(o)&&this.checkSelectionType(o)}getSelectAllMode(){const e=wle(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:i}=this.column.getColDef();return t?"currentPage":i?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function Tce({gos:e,selectionColSvc:t},i){const n=e.get("rowSelection"),s=i.getColDef(),{headerCheckboxSelection:o}=s;let r=!1;if(typeof n=="object"){const l=zh(i),c=Sj(i);(AR(n)==="autoGroupColumn"&&c||l&&t?.isSelectionColumnEnabled())&&(r=oI(n))}else typeof o=="function"?r=o(ct(e,{column:i,colDef:s})):r=!!o;return r}var EXe=class extends we{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new IXe(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const i=cz(e);i!==this.isRowSelectable&&(this.isRowSelectable=i,this.updateSelectable())}),this.isRowSelectable=cz(e),this.addManagedEventListeners({cellValueChanged:i=>this.updateRowSelectable(i.node),rowNodeDataChanged:i=>this.updateRowSelectable(i.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new TXe}createSelectAllFeature(e){if(Tce(this.beans,e))return new RXe(e)}isMultiSelect(){return TR(this.gos)}onRowCtrlSelected(e,t,i){const n=!!e.rowNode.isSelected();e.forEachGui(i,s=>{s.rowComp.toggleCss("ag-row-selected",n);const o=s.element;Yae(o,n),o.contains(Cn(this.beans))&&t(s)})}announceAriaRowSelection(e){if(this.isRowSelectionBlocked(e))return;const t=e.isSelected(),i=this.beans.editSvc?.isEditing({rowNode:e});if(!e.selectable||i)return;const s=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(s,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!gM(e)||!Cm(this.gos)}updateRowSelectable(e,t){const i=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:this.isRowSelectable?.(e)??!0;return this.setRowSelectable(e,i,t),i}setRowSelectable(e,t,i){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),i)return;if(I0(this.gos)){const s=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:s??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){let t=!1,i=!1;if(!e.childrenAfterGroup?.length)return e.selectable?e.__selected:null;for(let n=0;n<e.childrenAfterGroup.length;n++){const s=e.childrenAfterGroup[n];let o=s.isSelected();if(!s.selectable){const r=this.calculateSelectedFromChildren(s);if(r===null)continue;o=r}switch(o){case!0:t=!0;break;case!1:i=!0;break;default:return}}if(!(t&&i))return t?!0:i?!1:e.selectable?e.__selected:null}selectRowNode(e,t,i,n="api"){const s=!e.selectable&&t,o=e.__selected===t;if(s||o)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const r=e.sibling;r&&r.footer&&r.__localEventService&&r.dispatchRowEvent("rowSelected");const a=e.pinnedSibling;return a?.rowPinned&&a.__localEventService&&a.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({...U8e(e,this.gos,"rowSelected"),event:i||null,source:n}),!0}isCellCheckboxSelection(e,t){const i=this.gos.get("rowSelection");if(i&&typeof i!="string"){const n=zh(e)&&Rb(i);return e.isColumnFunc(t,n)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,i,n){const{gos:s,selectionCtx:o}=this,r=e.isSelected(),a=I0(s),l=hYe(s),c=pYe(s),u=this.isMultiSelect(),d=n==="rowClicked";if(d&&!(l||c))return null;if(t&&i&&u){const p=o.getRoot();if(p)if(p.isSelected()){const f=o.isInRange(e)?o.truncate(e):o.extend(e,a);return{deselect:f.discard,select:f.keep,reset:!1}}else{const f=o.extend(e,a);return{select:[],deselect:f.keep,reset:!1}}else return null}else if(t&&u){const p=o.selectAll?this.beans.rowModel.getRow(0):void 0,f=o.getRoot(p),m=o.isInRange(e)?o.truncate(e):o.extend(e,a);return{select:m.keep,deselect:m.discard,reset:o.selectAll||!!(f&&!f.isSelected())}}else if(i){if(d){const p=!r;return p&&!l||!p&&!c?null:(o.setRoot(e),{node:e,newValue:p,clearSelection:!1})}return o.setRoot(e),{node:e,newValue:!r,clearSelection:!u}}else{o.setRoot(e);const p=gYe(s),f=IR(s)==="filteredDescendants",m=d&&(!p||!l);if(f&&r===void 0&&Ln(s))return{node:e,newValue:!1,checkFilteredNodes:!0,clearSelection:!u||m};if(d){const v=r?!p:l;return v===r&&!m||v&&!l||!v&&!c?null:{node:e,newValue:v,clearSelection:!u||m,keepDescendants:e.group&&a}}return{node:e,newValue:!r,clearSelection:!u||m}}}},Nb={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},Ice=class extends we{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:n,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:r,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:d,handleKeyDown:p,isEmpty:f,eFocusableElement:m}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=n,this.providedFocusInnerElement=a,this.eFocusableElement=m,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!r,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=p,this.providedIsEmpty=f}postConstruct(){this.createManagedBean(new bC(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards();for(const e of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():Lb(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){const t=Ys(this.beans),i=Lb(t.body,null,!0),n=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(n===-1)return;let s,o;e?(s=0,o=n):(s=n+1,o=i.length);const r=i.slice(s,o),a=this.gos.get("tabIndex");r.sort((l,c)=>{const u=Number.parseInt(l.getAttribute("tabindex")||"0"),d=Number.parseInt(c.getAttribute("tabindex")||"0");return d===a?1:u===a?-1:u===0?1:d===0?-1:u-d}),r[e?r.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=Lb(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return Ly(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},LXe=class extends we{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:n}=this,s=[t,i],o={setTabIndex:b=>{for(const C of s)b!=null?C.setAttribute("tabindex",b):C.removeAttribute("tabindex")}};this.addTabGuards(t,i);const{focusTrapActive:r=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:p,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:m,isFocusableContainer:v}=e;this.tabGuardCtrl=this.createManagedBean(new Ice({comp:o,focusTrapActive:r,eTopGuard:t,eBottomGuard:i,eFocusableElement:n,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:p,isEmpty:f,forceFocusOutWhenTabGuardsAreEmpty:m,isFocusableContainer:v}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=Ys(this.beans).createElement("div"),i=e==="top"?Nb.TAB_GUARD_TOP:Nb.TAB_GUARD_BOTTOM;return t.classList.add(Nb.TAB_GUARD,i),Hm(t,"presentation"),t}addTabGuards(e,t){const i=this.eFocusableElement;i.insertAdjacentElement("afterbegin",e),i.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];qr(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){pj(t)||(t=t.getGui());const{eBottomGuard:n}=this;n?n.insertAdjacentElement("beforebegin",t):e(t,i)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;ug(e),ug(t),super.destroy()}},PXe=class extends An{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new LXe(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,i){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,i)}},NXe=500,OXe=550,hT,FXe=e=>{if(!hT)hT=new WeakSet;else if(hT.has(e))return!1;return hT.add(e),!0},jf=class{constructor(e,t=!1){this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let i=this.eventSvc;if(!i){if(i===null)return;this.eventSvc=i=new Vm;const n=this.onTouchStart.bind(this);this.startListener=n,this.eElement.addEventListener("touchstart",n,{passive:!0})}i.addEventListener(e,t)}removeEventListener(e,t){this.eventSvc?.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!FXe(e))return;const t=e.touches[0];this.touchStart=t;const i=this.handlers;if(!i.length){const n=this.eElement,s=n.ownerDocument,o=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this),a=this.onTouchCancel.bind(this),l={passive:!0},c={passive:!1};nI(i,[n,"touchmove",o,l],[s,"touchcancel",a,l],[s,"touchend",r,c],[s,"contextmenu",Op,c])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{this.longPressTimer=0,this.touchStart===t&&!this.moved&&(this.moved=!0,this.eventSvc?.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},OXe)}onTouchMove(e){const{moved:t,touchStart:i}=this;if(!t&&i){const n=Tw(i,e.touches);n&&!ile(n,i,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){const t=this.touchStart;!t||!Tw(t,e.changedTouches)||(this.moved||(this.eventSvc?.dispatchEvent({type:"tap",touchStart:t}),this.checkDoubleTap(t)),this.preventClick&&Op(e),this.cancel())}onTouchCancel(e){const t=this.touchStart;!t||!Tw(t,e.changedTouches)||(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){let t=Date.now();const i=this.lastTapTime;i&&t-i>NXe&&(this.eventSvc?.dispatchEvent({type:"doubleTap",touchStart:e}),t=null),this.lastTapTime=t}cancel(){this.clearLongPress(),gj(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){const e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}},BXe=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.includes("x"),this.scrollVertically=e.scrollAxis.includes("y"),this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}get scrolling(){return this.tickingInterval!==null}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const n=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<n.left+s,this.tickRight=e.clientX>n.right-s,this.tickUp=e.clientY<n.top+s&&!i,this.tickDown=e.clientY>n.bottom-s&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},Rce=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${ale}/${this.frameworkName}-data-grid`,tYe(this.baseDocLink)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}};function _Xe(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var zXe=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],Oq=Object.fromEntries(zXe.map((e,t)=>[e,t]));function GXe(e,t){const i=(e.beanName?Oq[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,n=(t.beanName?Oq[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return i-n}function VXe(e,t){return e?.beanName==="gridDestroySvc"?-1:t?.beanName==="gridDestroySvc"?1:0}var HXe=class extends we{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:n,ctrlsSvc:s}=this.beans;n?.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new Pj(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const o=Bh(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>o()),s.register("gridCtrl",this)}isDetailGrid(){return $le(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry?.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(e===!1)t.setCursor(null);else{const i=e===1?"ew-resize":"ns-resize";t.setCursor(i)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:n}=this.getNextFocusableIndex(t,e);if(n<0||n>=t.length)return!1;if(n===0){if(i>0){const{visibleCols:s,focusSvc:o}=this.beans,r=s.allCols,a=Ni(r);if(o.focusGridView({column:a,backwards:!0}))return!0}return!1}return this.focusContainer(t[n],e)}focusInnerElement(e){if(this.gos.getCallback("focusGridInnerElement")?.({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),{focusSvc:n,visibleCols:s}=this.beans,o=s.allCols;if(e){if(i.length>1)return this.focusContainer(Ni(i),e);const r=Ni(o);if(n.focusGridView({column:r,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||Dm(this.beans)){if(n.focusGridView({column:o[0],backwards:e}))return!0;for(let r=1;r<i.length;r++)if(Um(i[r].getGui(),e))return!0;return!1}return n.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:n}=this.getNextFocusableIndex(t,e);if(n===-1||i<0||i>=t.length)return;const s=t[i];s.setAllowFocus?.(!0),setTimeout(()=>{s.setAllowFocus?.(!1)})}isFocusable(){const e=this.beans;return!tP(e)||!Dm(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){const i=Cn(this.beans),n=e.findIndex(o=>o.getGui().contains(i)),s=n+(t?-1:1);return{indexWithFocus:n,nextIndex:s}}focusContainer(e,t){e.setAllowFocus?.(!0);const i=Um(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},vt=(e,t)=>{for(const i of Object.keys(t))t[i]=e;return t},Fq={dispatchEvent:"CommunityCore",...vt("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...vt("GridState",{getState:0,setState:0}),...vt("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...vt("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...vt("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...vt("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...vt("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...vt("ValueCache",{expireValueCache:0}),...vt("CellApi",{getCellValue:0}),...vt("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...vt("Sort",{onSortChanged:0}),...vt("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...vt("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...vt("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...vt("HighlightChanges",{flashCells:0}),...vt("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...vt("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...vt("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...vt("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...vt("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...vt("ColumnResize",{setColumnWidths:0}),...vt("ColumnHover",{isColumnHovered:0}),...vt("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...vt("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...vt("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...vt("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...vt("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...vt("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...vt("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...vt("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...vt("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0}),...vt("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...vt("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0}),...vt("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...vt("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...vt("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...vt("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...vt("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...vt("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...vt("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...vt("ContextMenu",{showContextMenu:0}),...vt("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...vt("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...vt("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...vt("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...vt("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...vt("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0}),...vt("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...vt("StatusBar",{getStatusPanel:0}),...vt("AiToolkit",{getStructuredSchema:0})},rB={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},WXe=(e,t)=>e.eventSvc.dispatchEvent(t),Ece=class{};Reflect.defineProperty(Ece,"name",{value:"GridApi"});var jXe=class extends we{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new Ece,this.fns={...rB,dispatchEvent:WXe},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(Fq))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:i,beans:n}=this;i!==rB&&(i[e]=n?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{const{beans:i,fns:{[e]:n}}=this;return n?n(i,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:n}=this;if(!t)Ee(26,{fnName:e,preDestroyLink:n});else{const s=Fq[e];i.assertModuleRegistered(s,`api.${e}`)&&Ee(27,{fnName:e,module:s})}}destroy(){super.destroy(),this.fns=rB,this.beans=null}};function UXe(e){return e.context.getId()}function $Xe(e){e.gridDestroySvc.destroy()}function KXe(e){return e.gridDestroySvc.destroyCalled}function YXe(e,t){return e.gos.get(t)}function XXe(e,t,i){Lce(e,{[t]:i})}function Lce(e,t){e.gos.updateGridOptions({options:t})}function ZXe(e,t){const i=t.replace(/Module$/,"");return e.gos.isModuleRegistered(i)}var qXe={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},QXe=class extends An{constructor(e,t,i){super(qXe),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(kl("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:i,eCell:n,gos:s}=this,o=i.getColDef().dndSourceOnRowDrag,r=e.dataTransfer;if(r.setDragImage(n,0,0),o){const a=ct(s,{rowNode:t,dragEvent:e});o(a)}else try{const a=JSON.stringify(t.data);r.setData("application/json",a),r.setData("text/plain",a)}catch{}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function JXe(e,t){e.rowDragSvc?.rowDragFeature?.addRowDropZone(t)}function eZe(e,t){const i=e.dragAndDrop?.findExternalZone(t.getContainer());i&&e.dragAndDrop?.removeDropTarget(i)}function tZe(e,t){return e.rowDragSvc?.rowDragFeature?.getRowDropZone(t)}function iZe(e){const t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}}function nZe(e,t){const i=e.rowDropHighlightSvc;if(!i)return;const n=t?.row;let s=t?.dropIndicatorPosition;s!=="above"&&s!=="below"&&s!=="inside"&&(s="none");const o=n?.rowIndex;o==null||s==="none"?i.clear():i.set(n,s)}var sZe=class extends V8e{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}},oZe=class extends we{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:i}=this.beans;return i.addDragSource(t),()=>i.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},rZe={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},aZe=class extends An{constructor(e,t,i,n,s,o=!1){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=n,this.dragStartPixels=s,this.alwaysVisible=o,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){const{beans:e,customGui:t}=this;t?this.setDragElement(t,this.dragStartPixels):(this.setTemplate(rZe),this.getGui().appendChild(kl("rowDrag",e,null)),this.addDragSource()),this.alwaysVisible||this.initCellDrag()}initCellDrag(){const{beans:e,gos:t,rowNode:i}=this,n=this.refreshVisibility.bind(this);this.addManagedPropertyListener("suppressRowDrag",n),this.addManagedListeners(i,{dataChanged:n,cellChanged:n}),this.addManagedListeners(e.eventSvc,t.get("rowDragManaged")?{sortChanged:n,filterChanged:n,columnRowGroupChanged:n,newColumnsLoaded:n}:{newColumnsLoaded:n})}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}refreshVisibility(){if(this.alwaysVisible)return;const e={skipAriaHidden:!0};if(this.isNeverDisplayed()){this.setDisplayed(!1,e);return}const t=this.column;let i=typeof t?.getColDef().rowDrag=="function",n=!t||this.isCustomGui()||t.isRowDrag(this.rowNode);n&&this.rowNode.footer&&this.gos.get("rowDragManaged")&&(n=!1,i=!0),this.setDisplayed(i||n,e),this.setVisible(n,e)}isNeverDisplayed(){const{gos:e,beans:t}=this;return!!(e.get("suppressRowDrag")||e.get("rowDragManaged")&&t.rowDragSvc.rowDragFeature?.shouldPreventRowMove()&&!t.dragAndDrop?.hasExternalDropZones())}getSelectedNodes(){const e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];const i=this.beans.selectionSvc?.getSelectedNodes()??[];return i.indexOf(e)!==-1?i:[e]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:n=>{n?.preventDefault()}})[0]);const i=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:n=>{const s=n?.dragItem||this.getDragItem(),o=(n?.dropTarget?.rows.length??s.rowNodes?.length)||1,r=this.getRowDragText(this.column);return r?r(s,o):o===1?this.cellValueFn():`${o} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},hI=class{constructor(){this.reordered=!1,this.removals=new Set,this.updates=new Set,this.adds=new Set}};function lZe(e){const{rowIndex:t,rowPinned:i,column:n}=e;return`${t}.${i??"null"}.${n.getId()}`}function Pce(e,t){const i=e.column===t.column,n=e.rowPinned===t.rowPinned,s=e.rowIndex===t.rowIndex;return i&&n&&s}function cZe(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(We(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function uZe(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function dZe(e){let t=0,i;const{pinnedRowModel:n,rowModel:s,pageBounds:o}=e;return n?.getPinnedTopRowCount()?i="top":s.getRowCount()?(i=null,t=o.getFirstRow()):n?.getPinnedBottomRowCount()&&(i="bottom"),i===void 0?null:{rowIndex:t,rowPinned:i}}function hZe(e){let t,i=null;const{pinnedRowModel:n,pageBounds:s}=e,o=n?.getPinnedBottomRowCount(),r=n?.getPinnedTopRowCount();return o?(i="bottom",t=o-1):e.rowModel.getRowCount()?t=s.getLastRow():r&&(i="top",t=r-1),t===void 0?null:{rowIndex:t,rowPinned:i}}function dh(e,t){switch(t.rowPinned){case"top":return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case"bottom":return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function hb(e,t){const i=e.spannedRowRenderer?.getCellByPosition(t);if(i)return i;const n=e.rowRenderer.getRowByPosition(t);return n?n.getCellCtrl(t.column):null}function pZe(e,t,i){const{rowModel:n,pinnedRowModel:s}=e;let o;return o??(o=n?.getRowNode(t)),i?o??(o=s?.getPinnedRowById(t,i)):(o??(o=s?.getPinnedRowById(t,"top")),o??(o=s?.getPinnedRowById(t,"bottom"))),o}function _R(e,t,i=!1){const{rowIndex:n,rowPinned:s}=t,{pageBounds:o,pinnedRowModel:r,rowModel:a}=e;if(n===0)return s==="top"?null:s==="bottom"&&a.isRowsToRender()?{rowIndex:o.getLastRow(),rowPinned:null}:r?.isRowsToRender("top")?{rowIndex:r.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(i){const l=s?void 0:a.getRow(n);return Nce(e,l,!0)??{rowIndex:n-1,rowPinned:s}}return{rowIndex:n-1,rowPinned:s}}function Bq(e,t,i=!1){const{rowIndex:n,rowPinned:s}=t,{pageBounds:o,pinnedRowModel:r,rowModel:a}=e;if(gZe(e,t))return s==="bottom"?null:s==="top"&&a.isRowsToRender()?{rowIndex:o.getFirstRow(),rowPinned:null}:r?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(i){const l=s?void 0:a.getRow(n);return Nce(e,l)??{rowIndex:n+1,rowPinned:s}}return{rowIndex:n+1,rowPinned:s}}function Nce(e,t,i=!1){const{gos:n,rowRenderer:s}=e;if(!t?.sticky||!vle(n))return;const o=s.getStickyTopRowCtrls(),r=s.getStickyBottomRowCtrls(),a=!r.some(d=>d.rowNode.rowIndex===t.rowIndex),l=a?o:r,c=(i?-1:1)*(a?-1:1);let u;for(let d=0;d<l.length;d++)if(l[d].rowNode.rowIndex===t.rowIndex){u=l[d+c];break}return u?{rowIndex:u.rowNode.rowIndex,rowPinned:null}:void 0}function gZe(e,t){const{rowPinned:i,rowIndex:n}=t,{pinnedRowModel:s,pageBounds:o}=e;return i==="top"?(s?.getPinnedTopRowCount()??0)-1<=n:i==="bottom"?(s?.getPinnedBottomRowCount()??0)-1<=n:o.getLastRow()<=n}var L0=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:i,children:n}=e;if(n)for(let s=0;s<n.length;++s)this.depthFirstSearchChangedPath(n[s],t);t(i)}depthFirstSearchEverything(e,t,i){const n=e.childrenAfterGroup;if(n)for(let s=0,o=n.length;s<o;++s){const r=n[s];r.childrenAfterGroup?this.depthFirstSearchEverything(r,t,i):i&&t(r)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const n={rowNode:t,children:null};this.mapToItems[t.id]=n,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;){this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={});for(const n of t)this.nodeIdsToColumns[i.id][n.getId()]=!0;i=i.parent}}linkPathItems(e,t){let i=e;for(let n=0;n<t;n++){const s=this.mapToItems[i.id],o=this.mapToItems[i.parent.id];o.children||(o.children=[]),o.children.push(s),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(s=>i[s.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(s=>!i[s.getId()])}},fZe=class{constructor(e,t){this.beans=e,this.groupThrottled=!1,this.scrollChanged=!1,this.scrollChanging=!1,this.oldVScroll=null,this.groupTimer=null,this.groupTarget=null,this.onGroupThrottle=()=>{this.groupTimer=null,this.groupThrottled=!0,this.beans.dragAndDrop?.nudge()};const i=()=>t.scrollFeature.getVScrollPosition().top;this.autoScroll=new BXe({scrollContainer:t.eBodyViewport,scrollAxis:"y",getVerticalPosition:i,setVerticalPosition:n=>t.scrollFeature.setVerticalScrollPosition(n),onScrollCallback:()=>{const n=i();if(this.oldVScroll!==n){this.oldVScroll=n,this.scrollChanging=!0;return}const s=this.scrollChanging;this.scrollChanged=s,this.scrollChanging=!1,s&&(this.beans.dragAndDrop?.nudge(),this.scrollChanged=!1)}})}updateGroup(e,t){this.groupTarget&&this.groupTarget!==e&&this.clearGroup(),e&&(t&&this.groupThrottled&&!e.expanded&&e.childrenAfterSort?.length&&e.isExpandable()&&e.setExpanded(!0,void 0,!0),e.expanded&&e.childrenAfterSort?.length&&(this.groupThrottled=!0,this.groupTarget=e))}startGroup(e){this.groupTarget=e,this.groupTimer===null&&(this.groupTimer=window.setTimeout(this.onGroupThrottle,this.beans.gos.get("rowDragInsertDelay")))}clearGroup(){this.groupThrottled=!1,this.groupTarget=null;const e=this.groupTimer;e!==null&&(this.groupTimer=null,window.clearTimeout(e))}clear(){this.clearGroup(),this.autoScroll.ensureCleared(),this.oldVScroll=null,this.scrollChanged=!1,this.scrollChanging=!1}},mZe=class extends we{constructor(e){super(),this.eContainer=e,this.lastDraggingEvent=null,this.nudger=null}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,t=>{this.nudger=new fZe(e,t.gridBodyCtrl)})}destroy(){super.destroy(),this.nudger?.clear(),this.nudger=null,this.lastDraggingEvent=null,this.eContainer=null}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(e){return e?.dropTarget?.allowed===!1||this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){const{rowGroupColsSvc:e,filterManager:t,sortSvc:i}=this.beans;return!!((e?.columns??[]).length||t?.isAnyFilterPresent()||i?.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const i=this.beans.selectionSvc?.getSelectedNodes();if(i&&i.indexOf(t)>=0)return i.slice().sort(bZe)}return[t]}onDragEnter(e){this.dragging(e,!0)}onDragging(e){this.dragging(e,!1)}dragging(e,t){const{lastDraggingEvent:i,beans:n}=this;if(t){const r=this.getRowNodes(e);e.dragItem.rowNodes=r,Gq(r,!0)}this.lastDraggingEvent=e;const s=e.fromNudge,o=this.makeRowsDrop(i,e,s,!1);n.rowDropHighlightSvc?.fromDrag(e),t&&this.dispatchGridEvent("rowDragEnter",e),this.dispatchGridEvent("rowDragMove",e),o?.rowDragManaged&&o.moved&&o.allowed&&o.sameGrid&&!o.suppressMoveWhenRowDragging&&(!s&&!this.nudger?.autoScroll.scrolling||this.nudger?.scrollChanged)&&this.dropRows(o),this.nudger?.autoScroll.check(e.event)}isFromThisGrid(e){return e.dragSource.dragSourceDomDataKey===this.gos.getDomDataKey()}makeRowsDrop(e,t,i,n){const{beans:s,gos:o}=this,r=this.newRowsDrop(t,n),a=s.rowModel;if(t.dropTarget=r,t.changed=!1,!r)return null;let{sameGrid:l,rootNode:c,source:u,target:d,rows:p}=r;d??(d=a.getRow(a.getRowCount()-1)??null);const f=!!this.beans.groupStage?.treeData&&l;let m=null;if(d?.footer){const w=pI(a,-1,d)??pI(a,1,d);m=d.sibling??c,d=w??null}d?.detail&&(d=d.parent),r.moved&&(r.moved=u!==d);let v=.5;if(d&&(l&&r.moved&&(m||!f)?v=u.rowIndex>d.rowIndex?-.5:.5:v=(r.y-d.rowTop-d.rowHeight/2)/d.rowHeight||0),!f&&l&&d&&r.moved&&Ln(o)){const w=SZe(a,r);w&&(v=u.rowIndex>w.rowIndex?-.5:.5,d=w,r.moved&&(r.moved=u!==d))}const b=this.nudger;b?.updateGroup(d,i),f&&!m&&b&&(!d||v>=.5&&d.rowIndex===s.pageBounds.getLastRow()?m=c:r.moved&&this.targetShouldBeParent(d,v,p)&&(b.groupThrottled&&(m=d),!i&&(!m||d&&!d.expanded&&d.childrenAfterSort?.length)&&b.startGroup(d)),m??(m=d?.parent??c));let C=!1;if(m){if(m===d&&m!==c){const w=m.expanded?pI(a,1,d):null;w?.parent===m?(d=w,v=-.5):C=!0}if(d&&!C){let w=d;for(;w&&w!==c&&w!==m;)d=w,w=w.parent}}r.target=d,r.newParent=m,r.moved&&(r.moved=u!==d);const x=v<0?"above":"below";return r.position=r.moved?C?"inside":x:"none",this.validateRowsDrop(r,f,x,n),t.changed||(t.changed=vZe(e?.dropTarget,r)),r}newRowsDrop(e,t){const{beans:i,gos:n}=this,s=i.rowModel.rootNode,o=Ln(n)?n.get("rowDragManaged"):!1,r=n.get("suppressMoveWhenRowDragging"),a=this.isFromThisGrid(e);let{rowNode:l,rowNodes:c}=e.dragItem;if(c||(c=l?[l]:[]),l||(l=c[0]),!l||!s)return null;const u=this.beans.dragAndDrop.isDropZoneWithinThisGrid(e);let d=!0;o&&(!c.length||this.shouldPreventRowMove()||(r||!a)&&!u)&&(d=!1);const p=Mq(i,e).y,f=this.getOverNode(p);return{api:i.gridApi,context:i.gridOptions.context,draggingEvent:e,rowDragManaged:o,suppressMoveWhenRowDragging:r,sameGrid:a,withinGrid:u,rootNode:s,moved:l!==f,y:p,overNode:f,overIndex:f?.rowIndex??-1,position:"none",source:l,target:f??null,newParent:null,rows:c,allowed:d,highlight:!t&&o&&r&&(u||!a)}}validateRowsDrop(e,t,i,n){const{rowDragManaged:s,suppressMoveWhenRowDragging:o}=e;t||(e.newParent=null),o&&!e.moved&&(e.allowed=!1);const r=(!s||e.allowed)&&this.gos.get("isRowValidDropPosition");if(r){t&&e.newParent&&_q(e.rows,e.newParent)&&(e.newParent=null);const a=r(e);if(!a)e.allowed=!1;else if(typeof a=="object"){a.rows!==void 0&&(e.rows=a.rows??[]),t&&a.newParent!==void 0&&(e.newParent=a.newParent),a.target!==void 0&&(e.target=a.target),a.position&&(e.position=a.position),a.allowed!==void 0?e.allowed=a.allowed:s||(e.allowed=!0);const l=e.draggingEvent;a.changed&&l&&(l.changed=!0),!n&&a.highlight!==void 0&&(e.highlight=a.highlight)}}s&&(e.rows=this.filterRows(e)),t&&e.newParent&&_q(e.rows,e.newParent)&&(e.newParent=null),o&&(!e.rows.length||e.position==="none")&&(e.allowed=!1),(!e.allowed||!e.newParent)&&e.position==="inside"&&(e.position=i)}targetShouldBeParent(e,t,i){const n=e.rowIndex,s=.25;if(t<-.5+s)return!1;if(t<.5-s)return!0;let o,r=n+1;const a=this.beans.rowModel;do o=a.getRow(r++);while(o?.footer);const l=e.childrenAfterGroup;if(o&&o.parent===e&&l?.length){const c=new Set(i);for(const u of l)if(u.rowIndex!==null&&!c.has(u))return!0}return!1}addRowDropZone(e){if(!e.getContainer()){Ee(55);return}const t=this.beans.dragAndDrop;if(t.findExternalZone(e.getContainer())){Ee(56);return}const i=e.fromGrid?e:{getContainer:e.getContainer,onDragEnter:e.onDragEnter&&(s=>e.onDragEnter(this.rowDragEvent("rowDragEnter",s))),onDragLeave:e.onDragLeave&&(s=>e.onDragLeave(this.rowDragEvent("rowDragLeave",s))),onDragging:e.onDragging&&(s=>e.onDragging(this.rowDragEvent("rowDragMove",s))),onDragStop:e.onDragStop&&(s=>e.onDragStop(this.rowDragEvent("rowDragEnd",s))),onDragCancel:e.onDragCancel&&(s=>e.onDragCancel(this.rowDragEvent("rowDragCancel",s)))},n={isInterestedIn:s=>s===2,getIconName:()=>"move",external:!0,...i};t.addDropTarget(n),this.addDestroyFunc(()=>t.removeDropTarget(n))}getRowDropZone(e){return{getContainer:this.getContainer.bind(this),onDragEnter:i=>{this.onDragEnter(i),e?.onDragEnter?.(this.rowDragEvent("rowDragEnter",i))},onDragLeave:i=>{this.onDragLeave(i),e?.onDragLeave?.(this.rowDragEvent("rowDragLeave",i))},onDragging:i=>{this.onDragging(i),e?.onDragging?.(this.rowDragEvent("rowDragMove",i))},onDragStop:i=>{this.onDragStop(i),e?.onDragStop?.(this.rowDragEvent("rowDragEnd",i))},onDragCancel:i=>{this.onDragCancel(i),e?.onDragCancel?.(this.rowDragEvent("rowDragCancel",i))},fromGrid:!0}}getOverNode(e){const{pageBounds:t,rowModel:i}=this.beans,s=e>t.getCurrentPagePixelRange().pageLastPixel?-1:i.getRowIndexAtPixel(e);return s>=0?i.getRow(s):void 0}rowDragEvent(e,t){const i=this.beans,{dragItem:n,dropTarget:s,event:o,vDirection:r}=t,a=s?.rootNode===i.rowModel.rootNode,l=a?s.y:Mq(i,t).y,c=a?s.overNode:this.getOverNode(l),u=a?s.overIndex:c?.rowIndex??-1;return{api:i.gridApi,context:i.gridOptions.context,type:e,event:o,node:n.rowNode,nodes:n.rowNodes,overIndex:u,overNode:c,y:l,vDirection:r,rowsDrop:s}}dispatchGridEvent(e,t){const i=this.rowDragEvent(e,t);this.eventSvc.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e)}onDragStop(e){const t=this.makeRowsDrop(this.lastDraggingEvent,e,!1,!0);this.dispatchGridEvent("rowDragEnd",e),t?.allowed&&t.rowDragManaged&&(t.suppressMoveWhenRowDragging||!t.sameGrid||this.nudger?.autoScroll.scrolling)&&this.dropRows(t),this.stopDragging(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e)}stopDragging(e){this.nudger?.clear(),this.beans.rowDropHighlightSvc?.fromDrag(null),Gq(e.dragItem.rowNodes,!1)}dropRows(e){return e.sameGrid?this.csrmMoveRows(e):this.csrmAddRows(e)}csrmAddRows({position:e,target:t,rows:i}){const n=pS(this.gos),s=this.beans.rowModel,o=i.filter(({data:a,rowPinned:l})=>!s.getRowNode(n?.({data:a,level:0,rowPinned:l})??a.id)).map(({data:a})=>a);if(o.length===0)return!1;const r=t?zq(t)+(e==="above"?0:1):void 0;return s.updateRowData({add:o,addIndex:r}),!0}filterRows({newParent:e,rows:t}){let i;for(let n=0,s=t.length;n<s;++n){let o=!0;const r=t[n];(!r||r.footer||r.rowTop===null&&r!==this.beans.rowModel.getRowNode(r.id)||e&&r.parent!==e&&yZe(r,e)||!Dz(r))&&(o=!1),o?i?.push(r):i??(i=t.slice(0,n))}return i??t}csrmMoveRows({position:e,target:t,rows:i,newParent:n,rootNode:s}){let o=!1;const r=new Set;for(const p of i){n&&p.parent!==n&&(p.treeParent=n,o=!0);const f=Dz(p);f&&r.add(f)}if(!o&&r.size===0)return!1;const a=this.beans.focusSvc,l=a.getFocusedCell(),c=l&&hb(this.beans,l);if(r.size&&this.reorderLeafChildren(r,...this.getMoveRowsBounds(r,t,e==="above"))&&(o=!0),!o)return!1;const u=this.beans.rowModel,d=new hI;return d.reordered=!0,u.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new L0(!1,s),changedRowNodes:d}),c?c.focusCell():a.clearFocusedCell(),!0}getMoveRowsBounds(e,t,i){const n=this.beans.rowModel.rootNode?._leafs?.length??0;let s=t?zq(t):-1;s<0||s>=n?s=n:i||++s;let o=s,r=Math.min(s,n-1);for(const a of e){const l=a.sourceRowIndex;l<o&&(o=l),l>r&&(r=l)}return[o,s,r]}reorderLeafChildren(e,t,i,n){let s=!1;const o=this.beans.rowModel.rootNode?._leafs;if(!e.size||!o)return!1;let r=t;for(let l=t;l<i;++l){const c=o[l];e.has(c)||(c.sourceRowIndex!==r&&(c.sourceRowIndex=r,o[r]=c,s=!0),++r)}let a=n;for(let l=n;l>=i;--l){const c=o[l];e.has(c)||(c.sourceRowIndex!==a&&(c.sourceRowIndex=a,o[a]=c,s=!0),--a)}for(const l of e)l.sourceRowIndex!==r&&(l.sourceRowIndex=r,o[r]=l,s=!0),++r;return s}},pI=(e,t,i)=>{if(i){const n=e.getRowCount();let s=i.rowIndex+t;for(;s>=0&&s<n;){const o=e.getRow(s);if(!o||!o.footer&&!o.detail)return o;s+=t}}},yZe=(e,t)=>{let i=t;for(;i;){if(i===e)return!0;i=i.parent}return!1},_q=(e,t)=>{for(let i=0,n=e.length;i<n;++i)if(e[i].parent!==t)return!1;return!0},zq=e=>{const t=Dz(e);return t!==void 0?t.sourceRowIndex:-1},Dz=e=>e.data?e:ace(e.childrenAfterGroup),vZe=(e,t)=>e!==t&&(!e||e.sameGrid!==t.sameGrid||e.allowed!==t.allowed||e.position!==t.position||e.target!==t.target||e.source!==t.source||e.newParent!==t.newParent||!$g(e.rows,t.rows)),bZe=({rowIndex:e},{rowIndex:t})=>e!==null&&t!==null?e-t:0,Gq=(e,t)=>{for(let i=0,n=e?.length||0;i<n;++i){const s=e[i];s.dragging!==t&&(s.dragging=t,s.dispatchRowEvent("draggingChanged"))}},SZe=(e,t)=>{let i=null,n=t.target;if(n&&t.rows.indexOf(n)<0)return null;const s=t.source;if(!n||!s)return null;let o=n.rowIndex-s.rowIndex;const r=o<0?-1:1;o=t.suppressMoveWhenRowDragging?Math.abs(o):1;const a=new Set(t.rows);do{const l=pI(e,r,n);if(!l)break;a.has(l)||(i=l,--o),n=l}while(o>0);return i},CZe=class extends we{constructor(){super(...arguments),this.beanName="rowDragSvc"}setupRowDrag(e,t){const i=t.createManagedBean(new mZe(e)),n=this.beans.dragAndDrop;n.addDropTarget(i),t.addDestroyFunc(()=>n.removeDropTarget(i)),this.rowDragFeature=i}createRowDragComp(e,t,i,n,s,o){return new aZe(e,t,i,n,s,o)}createRowDragCompForRow(e,t){if(hg(this.gos))return;const i=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${i("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,i,n,s,o){const r=this.gos;return r.get("rowDragManaged")&&(!Ln(r)||r.get("pagination"))?void 0:this.createRowDragComp(i,e,t,n,s,o)}},xZe=class extends we{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.dragging=!1,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){const e=this.row,t=this.dragging;!e||e?.rowIndex===null||this.position==="none"?this.clear():this.set(e,this.position),this.dragging=t}destroy(){this.clear(),super.destroy()}clear(){const e=this.row;this.dragging=!1,e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){const i=e!==this.row,n=e.uiLevel,s=t!==this.position,o=n!==this.uiLevel;this.dragging=!1,(i||s||o)&&(i&&this.clear(),this.uiLevel=n,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}fromDrag(e){const t=e?.dropTarget;if(t){const{highlight:i,target:n,position:s}=t;if(i&&n&&s!=="none"){this.set(n,s),this.dragging=!0;return}}this.dragging&&this.clear()}},Oce={moduleName:"Drag",version:Ge,beans:[sZe]},wZe={moduleName:"DragAndDrop",version:Ge,dynamicBeans:{dndSourceComp:QXe},icons:{rowDrag:"grip"}},Fce={moduleName:"SharedDragAndDrop",version:Ge,beans:[W8e],dependsOn:[Oce],userComponents:{agDragAndDropImage:fXe},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},DZe={moduleName:"RowDrag",version:Ge,beans:[xZe,CZe],apiFunctions:{addRowDropZone:JXe,removeRowDropZone:eZe,getRowDropZoneParams:tZe,getRowDropPositionIndicator:iZe,setRowDropPositionIndicator:nZe},dependsOn:[Fce]},MZe={moduleName:"HorizontalResize",version:Ge,beans:[oZe],dependsOn:[Oce]},AZe=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",kZe=class extends we{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:i,executeLaterFuncs:n}=this;if(i.length===0&&n.length===0){e(),t();return}const s=o=>{for(;o.length;){const r=o.pop();r&&r()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),s(i)},0),window.setTimeout(()=>{t(),s(n)},200)})}};function TZe(e,t,i){e.colMoves?.moveColumnByIndex(t,i,"api")}function IZe(e,t,i){e.colMoves?.moveColumns(t,i,"api")}var RZe=class extends we{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;if(t)for(const i of t)i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:i,pivotColsSvc:n}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&i?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&n?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function EZe(e,t){!t||t.length<=1||t.filter(n=>e.indexOf(n)<0).length>0||t.sort((n,s)=>{const o=e.indexOf(n),r=e.indexOf(s);return o-r})}function LZe(e){const t=[...e];for(const i of e){let n=null,s=i.getParent();for(;s!=null&&s.getDisplayedLeafColumns().length===1;)n=s,s=s.getParent();if(n!=null){const r=!!n.getColGroupDef()?.marryChildren?n.getProvidedColumnGroup().getLeafColumns():n.getLeafColumns();for(const a of r)t.includes(a)||t.push(a)}}return t}function PZe(e,t,i,n){const s=n.allCols;let o=null,r=null;for(let a=0;a<e.length;a++){const l=e[a],c=i.getProposedColumnOrder(t,l);if(!i.doesOrderPassRules(c))continue;const u=c.filter(p=>s.includes(p));if(r===null)r=u;else if(!$g(u,r))break;const d=OZe(c);(o===null||d<o.fragCount)&&(o={move:l,fragCount:d})}return o}function Bce(e){const{isFromHeader:t,fromLeft:i,xPosition:n,fromEnter:s,fakeEvent:o,pinned:r,gos:a,colModel:l,colMoves:c,visibleCols:u}=e;let{allMovingColumns:d}=e;t&&(d=LZe(d));const p=d.slice();EZe(l.getCols(),p);const f=BZe({movingCols:p,draggingRight:i,xPosition:n,pinned:r,gos:a,colModel:l,visibleCols:u}),m=NZe(p,l);if(f.length===0)return;const v=f[0];if(m!==null&&(t||!s)&&!o&&(!i&&v>=m||i&&v<=m))return;const C=PZe(f,p,c,u);if(!C)return;const x=C.move;if(!(x>l.getCols().length-p.length))return{columns:p,toIndex:x}}function _ce(e){const{columns:t,toIndex:i}=Bce(e)||{},{finished:n,colMoves:s}=e;return!t||i==null?null:(s.moveColumns(t,i,"uiColumnMoved",n),n?null:{columns:t,toIndex:i})}function NZe(e,t){const i=t.getCols(),n=e.map(l=>i.indexOf(l)).sort((l,c)=>l-c),s=n[0];return Ni(n)-s!==n.length-1?null:s}function OZe(e){function t(n){const s=[];let o=n.getOriginalParent();for(;o!=null;)s.push(o),o=o.getOriginalParent();return s}let i=0;for(let n=0;n<e.length-1;n++){let s=t(e[n]),o=t(e[n+1]);[s,o]=s.length>o.length?[s,o]:[o,s];for(const r of s)o.indexOf(r)===-1&&i++}return i}function FZe(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function BZe(e){const{movingCols:t,draggingRight:i,xPosition:n,pinned:s,gos:o,colModel:r,visibleCols:a}=e;if(o.get("suppressMovableColumns")||t.some(w=>w.getColDef().suppressMovable))return[];const c=FZe(a,s),u=r.getCols(),d=c.filter(w=>t.includes(w)),p=c.filter(w=>!t.includes(w)),f=u.filter(w=>!t.includes(w));let m=0,v=n;if(i){let w=0;for(const M of d)w+=M.getActualWidth();v-=w}if(v>0){for(let w=0;w<p.length;w++){const M=p[w];if(v-=M.getActualWidth(),v<0)break;m++}i&&m++}let b;if(m>0){const w=p[m-1];b=f.indexOf(w)+1}else b=f.indexOf(p[0]),b===-1&&(b=0);const C=[b],x=(w,M)=>w-M;if(i){let w=b+1;const M=u.length-1;for(;w<=M;)C.push(w),w++;C.sort(x)}else{let w=b;const M=u.length-1;let T=u[w];for(;w<=M&&c.indexOf(T)<0;)w++,C.push(w),T=u[w];w=b-1;const L=0;for(;w>=L;)C.push(w),w--;C.sort(x).reverse()}return C}function Mz(e){const{pinned:t,fromKeyboard:i,gos:n,ctrlsSvc:s,useHeaderRow:o,skipScrollPadding:r}=e;let a=s.getHeaderRowContainerCtrl(t)?.eViewport,{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),n.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!r&&(l+=s.get("center").getCenterViewportScrollLeft()),l):0}function aB(e,t){for(const i of e)i.moving=t,i.dispatchColEvent("movingChanged","uiColumnMoved")}var Vq=7,Az=100,pT=Az/2,_Ze=5,zZe=100,GZe=class extends we{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!We(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,{dragItem:i}=t||{},n=i?.columns??[];for(const s of n){const o=s.getPinned();if(s.getColDef().lockPinned){if(o==e)return"move";continue}const r=i?.containerType;if(r===e||!e)return"move";if(e&&(!o||r!==e))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,i=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(i,!0,"uiColumnDragged");else{const s=t.visibleState,o=(i||[]).filter(r=>s[r.getId()]&&!r.isVisible());this.setColumnsVisible(o,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(i,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,n=!1){const{gos:s,ctrlsSvc:o}=this.beans,r=s.get("suppressMoveWhenColumnDragging");if(n&&!r){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!n&&tn(e.hDirection))return;const a=Mz({x:e.x,pinned:this.pinned,gos:s,ctrlsSvc:o});t||this.checkCenterForScrolling(a),r?this.handleColumnDragWhileSuppressingMovement(e,t,i,a,n):this.handleColumnDragWhileAllowingMovement(e,t,i,a,n)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e?.length)return;const n=e.filter(s=>!s.getColDef().lockVisible);n.length&&this.beans.colModel.setColsVisible(n,t,i)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:i}=e;this.beans.colMoves.moveColumns(t,i,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,i,n,s){const o=this.getAllMovingColumns(e,!0);if(s){const r=this.isAttemptingToPin(o);r&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(o,r)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:l,fromEnter:t,fakeEvent:i,fromLeft:a})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,n)}}handleColumnDragWhileAllowingMovement(e,t,i,n,s){const o=this.getAllMovingColumns(e),r=this.normaliseDirection(e.hDirection)==="right",a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:n,fromLeft:r,fromEnter:t,fakeEvent:i}),c=_ce({...l,finished:s});c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){const i=e.dragSource.getDragItem();let n=null;t?(n=i.columnsInSplit,n||(n=i.columns)):n=i.columns;const s=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return n?n.filter(s):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:n,fromLeft:s,fromEnter:o,fakeEvent:r}=e,{gos:a,colModel:l,colMoves:c,visibleCols:u}=this.beans;return{allMovingColumns:t,isFromHeader:i,fromLeft:s,xPosition:n,pinned:this.pinned,fromEnter:o,fakeEvent:r,gos:a,colModel:l,colMoves:c,visibleCols:u}}highlightHoveredColumn(e,t){const{gos:i,colModel:n}=this.beans,s=i.get("enableRtl"),o=n.getCols().filter(u=>u.isVisible()&&u.getPinned()===this.pinned);let r=null,a=null,l=null;for(const u of o){if(a=u.getActualWidth(),r=this.getNormalisedColumnLeft(u,0,s),r!=null){const d=r+a;if(r<=t&&d>=t){l=u;break}}r=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let u=o.length-1;u>=0;u--){const d=o[u],p=o[u].getParent();if(!p){l=d;break}const f=p?.getDisplayedLeafColumns();if(f.length){l=Ni(f);break}}if(!l)return;r=this.getNormalisedColumnLeft(l,0,s),a=l.getActualWidth()}if(this.lastHighlightedColumn?.column!==l&&this.clearHighlighted(),l==null||r==null||a==null)return;let c;t-r<a/2!==s?c=0:c=1,Hq(l,c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){const{gos:i,visibleCols:n}=this.beans,s=i.get("enableRtl"),{firstMovingCol:o,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,s);if(!o||!r||a==null)return;const l=n.allCols,c=l.indexOf(o),u=l.indexOf(r),d=a===0!==s,p=c<u||c===u&&!d;let f=0;if(d?p&&(f-=1):p||(f+=1),u+f===c)return;const m=l[u+f];if(!m)return;const v=this.getNormalisedColumnLeft(m,20,s);return{fromLeft:p,xPosition:v}}getColumnMoveAndTargetInfo(e,t,i){const n=this.lastHighlightedColumn||{},{firstMovingCol:s,lastMovingCol:o}=VZe(e);if(!s||!o||n.column||!t)return{firstMovingCol:s,...n};const a=this.getPinDirection()==="left";return{firstMovingCol:s,position:a?1:0,column:a!==i?s:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,i){const{gos:n,ctrlsSvc:s}=this.beans,o=e.getLeft();if(o==null)return null;const r=e.getActualWidth();return Mz({x:i?o+r-t:o+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:n,ctrlsSvc:s})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>Vq;return t&&i||e.some(n=>n.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:n,fakeEvent:s,fromLeft:o}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:o,fromEnter:n,fakeEvent:s}),{columns:a,toIndex:l}=Bce(r)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(Hq(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),i=t.getCenterViewportScrollLeft(),n=i+t.getCenterWidth();let s,o;this.gos.get("enableRtl")?(s=e<i+pT,o=e>n-pT):(o=e<i+pT,s=e>n-pT),this.needToMoveRight=s,this.needToMoveLeft=o,o||s?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),zZe),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*_Ze,e>Az&&(e=Az);let t=null;const i=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:n,dragAndDrop:s,gos:o}=this.beans;if(this.failedMoveAttempts<=Vq+1||!n)return;if(s.setDragImageCompIcon("pinned"),!o.get("suppressMoveWhenColumnDragging")){const r=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(r,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,i=!1){const n=(e||[]).filter(r=>!r.getColDef().lockPinned);if(!n.length)return 0;i&&(t=this.getPinDirection());const{pinnedCols:s,dragAndDrop:o}=this.beans;return s?.setColsPinned(n,t,"uiColumnDragged"),i&&o.nudge(),n.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function Hq(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function VZe(e){const t=e.length;let i,n;for(let s=0;s<t;s++){if(!i){const o=e[s];o.getLeft()!=null&&(i=o)}if(!n){const o=e[t-1-s];o.getLeft()!=null&&(n=o)}if(i&&n)break}return{firstMovingCol:i,lastMovingCol:n}}var HZe=class extends we{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,i=this.pinned;e.whenReady(this,n=>{let s;const o=n.gridBodyCtrl.eBodyViewport;switch(i){case"left":s=[[o,n.left.eContainer],[n.bottomLeft.eContainer],[n.topLeft.eContainer]];break;case"right":s=[[o,n.right.eContainer],[n.bottomRight.eContainer],[n.topRight.eContainer]];break;default:s=[[o,n.center.eViewport],[n.bottomCenter.eViewport],[n.topCenter.eViewport]];break}this.eSecondaryContainers=s}),this.moveColumnFeature=this.createManagedBean(new GZe(i)),this.bodyDropPivotTarget=this.createManagedBean(new RZe(i)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},WZe=class extends we{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,i){const n=this.beans.colModel.getCols();if(!n)return;const s=n[e];this.moveColumns([s],t,i)}moveColumns(e,t,i,n=!0){const{colModel:s,colAnimation:o,visibleCols:r,eventSvc:a}=this.beans,l=s.getCols();if(!l)return;if(t>l.length-e.length){Ee(30,{toIndex:t});return}o?.start();const c=s.getColsForKeys(e);this.doesMovePassRules(c,t)&&(rq(s.getCols(),c,t),r.refresh(i),a.dispatchEvent({type:"columnMoved",columns:c,column:c.length===1?c[0]:null,toIndex:t,finished:n,source:i})),o?.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){const{colModel:t,gos:i}=this.beans;return!(!Ele(e,t.getColTree())||!(s=>{const o=c=>c?c==="left"||c===!0?-1:1:0,r=i.get("enableRtl");let a=r?1:-1,l=!0;for(const c of s){const u=o(c.getColDef().lockPosition);r?u>a&&(l=!1):u<a&&(l=!1),a=u}return l})(e))}getProposedColumnOrder(e,t){const n=this.beans.colModel.getCols().slice();return rq(n,e,t),n}createBodyDropTarget(e,t){return new HZe(e,t)}moveHeader(e,t,i,n,s){const{ctrlsSvc:o,gos:r,colModel:a,visibleCols:l,focusSvc:c}=this.beans,u=t.getBoundingClientRect(),d=u.left,p=Yn(i),f=p?u.width:i.getActualWidth(),m=e==="left"!==r.get("enableRtl"),v=Mz({x:m?d-20:d+f+20,pinned:n,fromKeyboard:!0,gos:r,ctrlsSvc:o}),b=c.focusedHeader;_ce({allMovingColumns:p?i.getLeafColumns():[i],isFromHeader:!0,fromLeft:e==="right",xPosition:v,pinned:n,fromEnter:!1,fakeEvent:!1,gos:r,colModel:a,colMoves:this,visibleCols:l,finished:!0});let C;if(p){const x=i.getDisplayedLeafColumns();C=m?x[0]:Ni(x)}else C=i;if(o.getScrollFeature().ensureColumnVisible(C,"auto"),(!s.isAlive()||r.get("ensureDomOrder"))&&b){let x;if(p){const w=i.getGroupId(),M=i.getLeafColumns();if(!M.length)return;const T=M[0].getParent();if(!T)return;x=jZe(T,w)}else x=i;x&&c.focusHeaderPosition({headerPosition:{...b,column:x}})}}setDragSourceForHeader(e,t,i){const{gos:n,colModel:s,dragAndDrop:o,visibleCols:r}=this.beans;let a=!n.get("suppressDragLeaveHidesColumns");const l=Yn(t),c=l?t.getProvidedColumnGroup().getLeafColumns():[t],d={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:l?()=>$Ze(t,r.allCols):()=>UZe(t),dragItemName:i,onDragStarted:()=>{a=!n.get("suppressDragLeaveHidesColumns"),aB(c,!0)},onDragStopped:()=>aB(c,!1),onDragCancelled:()=>aB(c,!1),onGridEnter:p=>{if(a){const{columns:f=[],visibleState:m}=p??{},v=l?C=>!m||m[C.getColId()]:()=>!0,b=f.filter(C=>!C.getColDef().lockVisible&&v(C));s.setColsVisible(b,!0,"uiColumnMoved")}},onGridExit:p=>{if(a){const f=p?.columns?.filter(m=>!m.getColDef().lockVisible)||[];s.setColsVisible(f,!1,"uiColumnMoved")}}};return o.addDragSource(d,!0),d}};function jZe(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function UZe(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function $Ze(e,t){const i=e.getProvidedColumnGroup().getLeafColumns(),n={};for(const a of i)n[a.getId()]=a.isVisible();const s=[];for(const a of t)i.indexOf(a)>=0&&(s.push(a),Cc(i,a));for(const a of i)s.push(a);const o=[],r=e.getLeafColumns();for(const a of s)r.indexOf(a)!==-1&&o.push(a);return{columns:s,columnsInSplit:o,visibleState:n,containerType:o[0]?.pinned}}var KZe={moduleName:"ColumnMove",version:Ge,beans:[WZe,kZe],apiFunctions:{moveColumnByIndex:TZe,moveColumns:IZe},dependsOn:[Fce],css:[AZe]},YZe=class extends we{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const n=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||n.push(i),this.getPreferredWidthForElements(n)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const i=document.createElement("form");i.style.position="fixed";const n=this.centerRowContainerCtrl.eContainer;for(const o of e)this.cloneItemIntoDummy(o,i);n.appendChild(i);const s=i.offsetWidth;return i.remove(),t=t??this.gos.get("autoSizePadding"),s+t}getHeaderCellForColumn(e){let t=null;for(const i of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){const n=i.getHtmlElementForColumnHeader(e);n!=null&&(t=n)}return t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const n=document.createElement("div"),s=n.classList;["ag-header-cell","ag-header-group-cell"].some(a=>i.classList.contains(a))?(s.add("ag-header","ag-header-row"),n.style.position="static"):s.add("ag-row");let r=e.parentElement;for(;r;){if(["ag-header-row","ag-row"].some(l=>r.classList.contains(l))){for(let l=0;l<r.classList.length;l++){const c=r.classList[l];c!="ag-row-position-absolute"&&s.add(c)}break}r=r.parentElement}n.appendChild(i),t.appendChild(n)}},zce={moduleName:"AutoWidth",version:Ge,beans:[YZe]};function XZe(e,t,i=!0,n="api"){e.colResize?.setColumnWidths(t,!1,i,n)}var ZZe=class extends we{constructor(e,t,i,n){super(),this.comp=e,this.eResize=t,this.pinned=i,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:e,gos:t,colAutosize:i}=this.beans,n=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(n),!t.get("suppressAutoSize")&&i&&this.addDestroyFunc(i.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:n,groupAfterColumns:s,groupAfterStartWidth:o,groupAfterRatios:r}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=n,this.resizeTakeFromCols=s,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=r,this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const n=this.normaliseDragChange(t),s=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(s,i,e)}getInitialValues(e){const t=l=>l.reduce((c,u)=>c+u.getActualWidth(),0),i=(l,c)=>l.map(u=>u.getActualWidth()/c),n=this.getColumnsToResize(),s=t(n),o=i(n,s),r={columnsToResize:n,resizeStartWidth:s,resizeRatios:o};let a=null;if(e&&(a=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),a){const l=a.getDisplayedLeafColumns(),c=r.groupAfterColumns=l.filter(d=>d.isResizable()),u=r.groupAfterStartWidth=t(c);r.groupAfterRatios=i(c,u)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;const n={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(n,e,t,i)}resizeColumns(e,t,i,n=!0){const{columnsToResize:s,resizeStartWidth:o,resizeRatios:r,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:s,ratios:r,width:t}),a){const d=t-o;u.push({columns:a,ratios:c,width:l-d})}this.beans.colResize?.resizeColumnSets({resizeSets:u,finished:n,source:i}),n&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},qZe=class extends we{constructor(e,t,i,n,s){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=n,this.ctrl=s}postConstruct(){const e=[];let t,i;const n=()=>{if(pn(this.eResize,t),!t)return;const{horizontalResizeSvc:r,colAutosize:a}=this.beans,l=r.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(l),i&&a&&e.push(a.addColumnAutosizeListeners(this.eResize,this.column))},s=()=>{for(const r of e)r();e.length=0},o=()=>{const r=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(r!==t||a!==i)&&(t=r,i=a,s(),n())};o(),this.addDestroyFunc(s),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:i,lastResizeAmount:n,resizeStartWidth:s,beans:o}=this,r=this.normaliseResizeAmount(t),a=s+r,l=[{key:i,newWidth:a}],{pinnedCols:c,ctrlsSvc:u,colResize:d}=o;if(this.column.getPinned()){const p=c?.leftWidth??0,f=c?.rightWidth??0,m=A0(u.getGridBodyCtrl().eBodyViewport)-50;if(p+f+(r-n)>m)return}this.lastResizeAmount=r,d?.setColumnWidths(l,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i=this.pinned!=="left",n=this.pinned==="right";return this.gos.get("enableRtl")?i&&(t*=-1):n&&(t*=-1),t}},QZe=class extends we{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,i,n){const s=[],{colModel:o,gos:r,visibleCols:a}=this.beans;for(const l of e){const c=o.getColDefCol(l.key)||o.getCol(l.key);if(!c)continue;if(s.push({width:l.newWidth,ratios:[1],columns:[c]}),r.get("colResizeDefault")==="shift"&&(t=!t),t){const d=a.getColAfter(c);if(!d)continue;const p=c.getActualWidth()-l.newWidth,f=d.getActualWidth()+p;s.push({width:f,ratios:[1],columns:[d]})}}s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:i,source:n})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:n}=e;if(!(!t||t.every(u=>JZe(u)))){if(i){const u=t&&t.length>0?t[0].columns:null;gS(this.eventSvc,u,i,n)}return}const o=[],r=[];for(const u of t){const{width:d,columns:p,ratios:f}=u,m={},v={};for(const x of p)r.push(x);let b=!0,C=0;for(;b;){if(C++,C>1e3){Mi(31);break}b=!1;const x=[];let w=0,M=d;p.forEach((L,I)=>{if(v[L.getId()])M-=m[L.getId()];else{x.push(L);const O=f[I];w+=O}});const T=1/w;x.forEach((L,I)=>{const R=I===x.length-1;let O;R?O=M:(O=Math.round(f[I]*d*T),M-=O);const _=L.getMinWidth(),B=L.getMaxWidth();O<_?(O=_,v[L.getId()]=!0,b=!0):B>0&&O>B&&(O=B,v[L.getId()]=!0,b=!0),m[L.getId()]=O})}for(const x of p){const w=m[x.getId()];x.getActualWidth()!==w&&(x.setActualWidth(w,n),o.push(x))}}const a=o.length>0;let l=[];if(a){const{colFlex:u,visibleCols:d,colViewport:p}=this.beans;l=u?.refreshFlexedColumns({resizingCols:r,skipSetLeft:!0})??[],d.setLeftValues(n),d.updateBodyWidths(),p.checkViewportColumns()}const c=r.concat(l);(a||i)&&gS(this.eventSvc,c,i,n,l)}resizeHeader(e,t,i){if(!e.isResizable())return;const n=e.getActualWidth(),s=e.getMinWidth(),o=e.getMaxWidth(),r=Math.min(Math.max(n+t,s),o);this.setColumnWidths([{key:e,newWidth:r}],i,!0,"uiColumnResized")}createResizeFeature(e,t,i,n,s){return new qZe(e,t,i,n,s)}createGroupResizeFeature(e,t,i,n){return new ZZe(e,t,i,n)}};function JZe(e){const{columns:t,width:i}=e;let n=0,s=0,o=!0;for(const l of t){const c=l.getMinWidth();n+=c||0;const u=l.getMaxWidth();u>0?s+=u:o=!1}const r=i>=n,a=!o||i<=s;return r&&a}var eqe={moduleName:"ColumnResize",version:Ge,beans:[QZe],apiFunctions:{setColumnWidths:XZe},dependsOn:[MZe,zce]},tqe=class extends we{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);for(const t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(const e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},iqe=class extends zj{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,i,n,s){const{column:o,beans:r}=this,{context:a,colNames:l,colHover:c,rangeSvc:u,colResize:d}=r;this.comp=e,s=cM(this,a,s),this.setGui(t,s),this.displayName=l.getDisplayNameForColumnGroup(o,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(s),this.setupExpandable(s),this.setupTooltip(),this.setupAutoHeight({wrapperElement:n,compBean:s}),this.setupUserComp(),this.addHeaderMouseListeners(s),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const p=this.rowCtrl.pinned,f=o.getProvidedColumnGroup().getLeafColumns();c?.createHoverFeature(s,f,t),u?.createRangeHighlightFeature(s,o,e),s.createManagedBean(new _j(o,t,r)),s.createManagedBean(new tqe(e,o)),d?this.resizeFeature=s.createManagedBean(d.createGroupResizeFeature(e,i,p,o)):e.setResizableDisplayed(!1),s.createManagedBean(new bC(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(s,f),s.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(s),s.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.getDefinition();return ct(t.gos,{colDef:i,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");i!=null?i===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,n=Ni(t)===e;if(!i&&!n)return;const s=e.getHighlighted(),o=!!this.rowCtrl.getHeaderCellCtrls().find(l=>l.column.isMoving());let r=!1,a=!1;if(o){const l=this.beans.gos.get("enableRtl"),c=s===1,u=s===0;i&&(l?a=c:r=u),n&&(l?r=u:a=c)}this.comp.toggleCss("ag-header-highlight-before",r),this.comp.toggleCss("ag-header-highlight-after",a)}resizeHeader(e,t){const{resizeFeature:i}=this;if(!i)return;const n=i.getInitialValues(t);i.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:i,enterpriseMenuFactory:n}=this.beans,s=this.column,o=s.getProvidedColumnGroup(),r=ct(i,{displayName:this.displayName,columnGroup:s,setExpanded:l=>{e.setColumnGroupOpened(o,l,"gridInitializing")},setTooltip:(l,c)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(l,c)},showColumnMenu:(l,c)=>n?.showMenuAfterButtonClick(o,l,"columnMenu",c),showColumnMenuAfterMouseClick:(l,c)=>n?.showMenuAfterMouseEvent(o,l,"columnMenu",c),eGridHeader:this.eGui}),a=f6e(t,r);a&&this.comp.setUserCompDetails(a)}addHeaderMouseListeners(e){const t=s=>this.handleMouseOverChange(s.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),n=s=>this.handleContextMenuMouseEvent(s,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:i,contextmenu:n})}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),i=Cce(t,this.gos,null,e);e.isPadding()?(i.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&i.push("ag-header-span-height")):(i.push("ag-header-group-cell-with-group"),t?.wrapHeaderText&&i.push("ag-header-cell-wrap-text"));for(const n of i)this.comp.toggleCss(n,!0)}setupMovingCss(e){const{column:t}=this,n=t.getProvidedColumnGroup().getLeafColumns(),s=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(const o of n)e.addManagedListeners(o,{movingChanged:s});s()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||this.focusThis()}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===pe.ENTER){const i=this.column,n=!i.isExpanded();this.beans.colGroupSvc.setColumnGroupOpened(i.getProvidedColumnGroup(),n,"uiColumnExpanded")}}setDragSource(e){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function nqe(e,t,i){e.colGroupSvc?.setColumnGroupOpened(t,i,"api")}function sqe(e,t,i){return e.colGroupSvc?.getColumnGroup(t,i)??null}function oqe(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null}function rqe(e,t,i){return e.colNames.getDisplayNameForColumnGroup(t,i)||""}function aqe(e){return e.colGroupSvc?.getColumnGroupState()??[]}function lqe(e,t){e.colGroupSvc?.setColumnGroupState(t,"api")}function cqe(e){e.colGroupSvc?.resetColumnGroupState("api")}function uqe(e){return e.visibleCols.treeLeft}function dqe(e){return e.visibleCols.treeCenter}function hqe(e){return e.visibleCols.treeRight}function pqe(e){return e.visibleCols.getAllTrees()}function gqe(e,t){for(let i=0;i<t.length;i++){const n=e.indexOf(t[i]);n>=0&&(e[n]=e[e.length-1],e.pop())}}var fqe=class extends we{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colFlex:i,colModel:n,colGroupSvc:s,colViewport:o,selectionColSvc:r}=this.beans;t||this.buildTrees(n,s),s?.updateOpenClosedVisibility(),this.leftCols=lB(this.treeLeft),this.centerCols=lB(this.treeCenter),this.rightCols=lB(this.treeRight),r?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(n),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(a=>a.isAutoHeight()),i?.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(n,this.leftCols,this.rightCols,e),o.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let i=t.getParent();for(;i;){if(!i.isPadding()){const n=i.getProvidedColumnGroup().getLevel()+1;n>e&&(e=n);break}i=i.getParent()}}return e}updateBodyWidths(){const e=Nd(this.centerCols),t=Nd(this.leftCols),i=Nd(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,i,n){let s,o;this.gos.get("enableRtl")?(s=t?t[0]:null,o=i?Ni(i):null):(s=t?Ni(t):null,o=i?i[0]:null);for(const r of e.getCols())r.setLastLeftPinned(r===s,n),r.setFirstRightPinned(r===o,n)}buildTrees(e,t){const i=e.getColsToShow(),n=i.filter(l=>l.getPinned()=="left"),s=i.filter(l=>l.getPinned()=="right"),o=i.filter(l=>l.getPinned()!="left"&&l.getPinned()!="right"),r=new Fle,a=l=>t?t.createColumnGroups(l):l.columns;this.treeLeft=a({columns:n,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=a({columns:s,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=a({columns:o,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),i=[],n=[],s=[];for(const o of t){const r=o.getPinned();r?r===!0||r==="left"?i.push(o):s.push(o):n.push(o)}this.ariaOrderColumns=i.concat(n).concat(s)}getAriaColIndex(e){let t;return Yn(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(const e of[this.treeLeft,this.treeRight,this.treeCenter])for(const t of e)Yn(t)&&t.checkLeft()}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const n=t.getCols().slice(0),s=this.gos.get("enableRtl");for(const o of[this.leftCols,this.rightCols,this.centerCols]){if(s){let r=Nd(o);for(const a of o)r-=a.getActualWidth(),a.setLeft(r,e)}else{let r=0;for(const a of o)a.setLeft(r,e),r+=a.getActualWidth()}gqe(n,o)}for(const o of n)o.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:i}}=this;return i.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,i,n){const s=[];let o=null;for(let r=0;r<t.length;r++){const a=t[r],l=t.length-r,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){const p=c-1;for(let f=1;f<=p;f++)u.push(t[r+f]);r+=p}let d;if(i){d=!1;for(const p of u)i(p)&&(d=!0)}else d=!0;d&&(s.length===0&&o&&(n&&n(a))&&s.push(o),s.push(a)),o=a}return s}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,i=t.indexOf(e);return i>0?t[i-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};Mm(this.treeCenter,!1,e),Mm(this.treeLeft,!1,e),Mm(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const n=this[t[i]];if(n.length)return e?Ni(n):n[0]}return null}getColAfter(e){const t=this.allCols,i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getColsLeftWidth(){return Nd(this.leftCols)}getDisplayedColumnsRightWidth(){return Nd(this.rightCols)}isColAtEdge(e,t){const i=this.allCols;if(!i.length)return!1;const n=t==="first";let s;if(Yn(e)){const o=e.getDisplayedLeafColumns();if(!o.length)return!1;s=n?o[0]:Ni(o)}else s=e;return(n?i[0]:Ni(i))===s}};function Mm(e,t,i){if(e)for(let n=0;n<e.length;n++){const s=e[n];if(Yn(s)){const o=t?s.getDisplayedChildren():s.getChildren();Mm(o,t,i)}i(s)}}function lB(e){const t=[];return Mm(e,!0,i=>{pg(i)&&t.push(i)}),t}var mqe=class extends we{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return Jd(null,t,i=>{Ho(i)&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const i=[];Jd(null,t,n=>{if(Ho(n)){const s=n.getColGroupDef(),o={groupId:n.getGroupId(),open:s?s.openByDefault:void 0};i.push(o)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){const{colModel:i,colAnimation:n,visibleCols:s,eventSvc:o}=this.beans;if(!i.getColTree().length)return;n?.start();const a=[];for(const l of e){const c=l.groupId,u=l.open,d=this.getProvidedColGroup(c);d&&d.isExpanded()!==u&&(d.setExpanded(u),a.push(d))}s.refresh(t,!0),a.length&&o.dispatchEvent({type:"columnGroupOpened",columnGroup:a.length===1?a[0]:void 0,columnGroups:a}),n?.finish()}setColumnGroupOpened(e,t,i){let n;Ho(e)?n=e.getId():n=e||"",this.setColumnGroupState([{groupId:n,open:t}],i)}getProvidedColGroup(e){let t=null;return Jd(null,this.beans.colModel.getColTree(),i=>{Ho(i)&&i.getId()===e&&(t=i)}),t}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),s=t==="After"?Ni(n):n[0],o=`getCol${t}`;for(;;){const r=this.beans.visibleCols[o](s);if(!r)return null;const a=this.getColGroupAtLevel(r,i);if(a!==e)return a}}getColGroupAtLevel(e,t){let i=e.getParent(),n,s;for(;n=i.getProvidedColumnGroup().getLevel(),s=i.getPaddingLevel(),!(n+s<=t);)i=i.getParent();return i}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();Mm(e,!1,t=>{Yn(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(Yn(e))return e;const i=this.beans.visibleCols.getAllTrees(),n=typeof t=="number";let s=null;return Mm(i,!1,o=>{if(Yn(o)){const r=o;let a;n?a=e===r.getGroupId()&&t===r.getPartId():a=e===r.getGroupId(),a&&(s=r)}}),s}createColumnGroups(e){const{columns:t,idCreator:i,pinned:n,oldDisplayedGroups:s,isStandaloneStructure:o}=e,r=this.mapOldGroupsById(s),a=[];let l=t;for(;l.length;){const c=l;l=[];let u=0;const d=p=>{const f=u;u=p;const m=c[f],b=(Yn(m)?m.getProvidedColumnGroup():m).getOriginalParent();if(b==null){for(let x=f;x<p;x++)a.push(c[x]);return}const C=this.createColumnGroup(b,i,r,n,o);for(let x=f;x<p;x++)C.addChild(c[x]);l.push(C)};for(let p=1;p<c.length;p++){const f=c[p],v=(Yn(f)?f.getProvidedColumnGroup():f).getOriginalParent(),b=c[u],x=(Yn(b)?b.getProvidedColumnGroup():b).getOriginalParent();v!==x&&d(p)}u<c.length&&d(c.length)}return o||this.setupParentsIntoCols(a,null),a}createProvidedColumnGroup(e,t,i,n,s,o,r){const a=s.getUniqueKey(t.groupId||null,null),l=oq(this.beans,t,a),c=new aI(l,a,!1,i);this.createBean(c);const u=this.findExistingGroup(t,o);u&&o.splice(u.idx,1);const d=u?.group;d&&c.setExpanded(d.isExpanded());const p=Tle(this.beans,l.children,i+1,e,n,s,o,r);return c.setChildren(p),c}balanceColumnTree(e,t,i,n){const s=[];for(let o=0;o<e.length;o++){const r=e[o];if(Ho(r)){const a=r,l=this.balanceColumnTree(a.getChildren(),t+1,i,n);a.setChildren(l),s.push(a)}else{let a,l;for(let c=t;c<i;c++){const u=n.getUniqueKey(null,null),d=oq(this.beans,null,u),p=new aI(d,u,!0,c);this.createBean(p),l&&l.setChildren([p]),l=p,a||(a=l)}if(a&&l)if(s.push(a),e.some(u=>Ho(u))){l.setChildren([r]);continue}else{l.setChildren(e);break}s.push(r)}}return s}findDepth(e){let t=0,i=e;for(;i?.[0]&&Ho(i[0]);)t++,i=i[0].getChildren();return t}findMaxDepth(e,t){let i=t;for(let n=0;n<e.length;n++){const s=e[n];if(Ho(s)){const o=s,r=this.findMaxDepth(o.getChildren(),t+1);i<r&&(i=r)}}return i}balanceTreeForAutoCols(e,t){const i=[];for(const n of e){let s=n;for(let o=t-1;o>=0;o--){const r=new aI(null,`FAKE_PATH_${n.getId()}}_${o}`,!0,o);this.createBean(r),r.setChildren([s]),s.originalParent=r,s=r}t===0&&(n.originalParent=null),i.push(s)}return i}findExistingGroup(e,t){if(e.groupId!=null)for(let n=0;n<t.length;n++){const s=t[n];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:n,group:s}}}createColumnGroup(e,t,i,n,s){const o=e.getGroupId(),r=t.getInstanceIdForKey(o),a=rce(o,r);let l=i[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),We(l)?l.reset():(l=new E0(e,o,r,n),s||this.createBean(l)),l}mapOldGroupsById(e){const t={},i=n=>{for(const s of n)if(Yn(s)){const o=s;t[s.getUniqueId()]=o,i(o.getChildren())}};return e&&i(e),t}setupParentsIntoCols(e,t){for(const i of e??[])if(i.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),i.parent=t,Yn(i)){const n=i;this.setupParentsIntoCols(n.getChildren(),n)}}},yqe={moduleName:"ColumnGroup",version:Ge,dynamicBeans:{headerGroupCellCtrl:iqe},beans:[mqe],apiFunctions:{getAllDisplayedColumnGroups:pqe,getCenterDisplayedColumnGroups:dqe,getColumnGroup:sqe,getColumnGroupState:aqe,getDisplayNameForColumnGroup:rqe,getLeftDisplayedColumnGroups:uqe,getProvidedColumnGroup:oqe,getRightDisplayedColumnGroups:hqe,resetColumnGroupState:cqe,setColumnGroupOpened:nqe,setColumnGroupState:lqe}},vqe={tag:"div",cls:"ag-skeleton-container"},bqe=class extends An{constructor(){super(vqe)}init(t){const i=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",i),this.addDestroyFunc(()=>D0(t.eParentOfValue)),D0(t.eParentOfValue,i),t.deferRender?this.setupLoading(t):t.node.failedLoad?this.setupFailed():this.setupLoading(t)}setupFailed(){const t=this.getLocaleTextFunc();this.getGui().textContent=t("loadingError","ERR");const i=t("ariaSkeletonCellLoadingFailed","Row failed to load");hS(this.getGui(),i)}setupLoading(t){const i=br({tag:"div",cls:"ag-skeleton-effect"}),n=t.node.rowIndex;if(n!=null){const r=75+25*(n%2===0?Math.sin(n):Math.cos(n));i.style.width=`${r}%`}this.getGui().appendChild(i);const s=this.getLocaleTextFunc(),o=t.deferRender?s("ariaDeferSkeletonCellLoading","Cell is loading"):s("ariaSkeletonCellLoading","Row data is loading");hS(this.getGui(),o)}refresh(t){return!1}},Sqe={moduleName:"CheckboxCellRenderer",version:Ge,userComponents:{agCheckboxCellRenderer:vXe}},Cqe={moduleName:"SkeletonCellRenderer",version:Ge,userComponents:{agSkeletonCellRenderer:bqe}};function xqe(e,t){const i=e.colModel.getColDefCol(t);return i?i.getColDef():null}function wqe(e){return e.colModel.getColumnDefs(!0)}function Dqe(e,t,i){return e.colNames.getDisplayNameForColumn(t,i)||""}function Mqe(e,t){return e.colModel.getColDefCol(t)}function Aqe(e){return e.colModel.getColDefCols()}function kqe(e,t){return dc(e,t,"api")}function Tqe(e){return LR(e)}function Iqe(e){GYe(e,"api")}function Rqe(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function Eqe(e){return e.visibleCols.isPinningLeft()}function Lqe(e){return e.visibleCols.isPinningRight()}function Pqe(e,t){return e.visibleCols.getColAfter(t)}function Nqe(e,t){return e.visibleCols.getColBefore(t)}function Oqe(e,t,i){e.colModel.setColsVisible(t,i,"api")}function Fqe(e,t,i){e.pinnedCols?.setColsPinned(t,i,"api")}function Bqe(e){return e.colModel.getCols()}function _qe(e){return e.visibleCols.leftCols}function zqe(e){return e.visibleCols.centerCols}function Gqe(e){return e.visibleCols.rightCols}function Vqe(e){return e.visibleCols.allCols}function Hqe(e){return e.colViewport.getViewportColumns()}function kz(e,t){if(!e)return;const i=e,n={};for(const s of Object.keys(i)){if(t&&t.indexOf(s)>=0||sle.has(s))continue;const o=i[s];typeof o=="object"&&o!==null&&o.constructor===Object?n[s]=kz(o):n[s]=o}return n}var Wqe=class extends we{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,i,n,s=!1){const o=e.slice();t?o.sort((l,c)=>i.indexOf(l)-i.indexOf(c)):(i||s)&&o.sort((l,c)=>n.indexOf(l)-n.indexOf(c));const r=this.rowGroupColsSvc?.columns,a=this.pivotColsSvc?.columns;return this.buildColumnDefs(o,r,a)}buildColumnDefs(e,t=[],i=[]){const n=[],s={};for(const o of e){const r=this.createDefFromColumn(o,t,i);let a=!0,l=r,c=o.getOriginalParent(),u=null;for(;c;){let d=null;if(c.isPadding()){c=c.getOriginalParent();continue}const p=s[c.getGroupId()];if(p){p.children.push(l),a=!1;break}if(d=this.createDefFromGroup(c),d&&(d.children=[l],s[d.groupId]=d,l=d,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&n.push(l)}return n}createDefFromGroup(e){const t=kz(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const n=kz(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?i.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=e.isVisible()?void 0:!0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,n}},jqe=class extends we{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(e={}){const t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);const i=this.flexViewportWidth,{visibleCols:n,colDelayRenderSvc:s}=this.beans,o=n.centerCols;let r=-1;if(e.resizingCols){const v=new Set(e.resizingCols);for(let b=o.length-1;b>=0;b--)if(v.has(o[b])){r=b;break}}let a=!1;const l=o.map((v,b)=>{const C=v.getFlex(),x=C!=null&&C>0&&b>r;return a||(a=x),{col:v,isFlex:x,flex:Math.max(0,C??0),initialSize:v.getActualWidth(),min:v.getMinWidth(),max:v.getMaxWidth(),targetSize:0}});if(a?(s?.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(s),!i||!a)return[];let c=l.length,u=l.reduce((v,b)=>v+b.flex,0),d=i;const p=(v,b)=>{v.frozenSize=b,v.col.setActualWidth(b,t),d-=b,u-=v.flex,c-=1},f=v=>v.frozenSize!=null;for(const v of l)v.isFlex||p(v,v.initialSize);for(;c>0;){const v=Math.round(u<1?d*u:d);let b,C=0,x=0;for(const T of l){if(f(T))continue;b=T,x+=v*(T.flex/u);const L=x-C,I=Math.round(L);T.targetSize=I,C+=I}b&&(b.targetSize+=v-C);let w=0;for(const T of l){if(f(T))continue;const L=T.targetSize,I=Math.min(Math.max(L,T.min),T.max);w+=I-L,T.violationType=I===L?void 0:I<L?"max":"min",T.targetSize=I}const M=w===0?"all":w>0?"min":"max";for(const T of l)f(T)||(M==="all"||T.violationType===M)&&p(T,T.targetSize)}e.skipSetLeft||n.setLeftValues(t),e.updateBodyWidths&&n.updateBodyWidths();const m=l.filter(v=>v.isFlex&&!v.violationType).map(v=>v.col);if(e.fireResizedEvent){const v=l.filter(C=>C.initialSize!==C.frozenSize).map(C=>C.col),b=l.filter(C=>C.flex).map(C=>C.col);gS(this.eventSvc,v,!0,t,b)}return this.revealColumns(s),m}revealColumns(e){this.columnsHidden&&(e?.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){const{flex:t,initialFlex:i}=e.colDef;t!==void 0?e.flex=t:i!==void 0&&(e.flex=i)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}};function Lw(e,t,i){if(!t||!e)return;if(!i)return e[t];const n=t.split(".");let s=e;for(let o=0;o<n.length;o++){if(s==null)return;s=s[n[o]]}return s}var Uqe=["dateTimeString","dateString","text","number","boolean","date"],$qe=class extends we{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:e=>!!e.colDef.editable&&e.event.key===pe.SPACE}},date({formatValue:e}){return{cellEditor:"agDateCellEditor",keyCreator:e}},dateString({formatValue:e}){return{cellEditor:"agDateStringCellEditor",keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:i}){return{cellEditorParams:{useFormatter:!0},comparator:(n,s)=>{const o=t.getColDefCol(i),r=o?.getColDef();if(!o||!r)return 0;const a=n==null?"":e({column:o,node:null,value:n}),l=s==null?"":e({column:o,node:null,value:s});return a===l?0:a>l?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={},i={},n=u=>d=>{const{column:p,node:f,value:m}=d;let v=p.getColDef().valueFormatter;return v===u.groupSafeValueFormatter&&(v=u.valueFormatter),this.beans.valueSvc.formatValue(p,f,m,v)};for(const u of Object.keys(e)){const d=e[u],p={...d,groupSafeValueFormatter:Uq(d,this.gos)};t[u]=p,i[u]=n(p)}const s=this.gos.get("dataTypeDefinitions")??{},o={};for(const u of Object.keys(s)){const d=s[u],p=this.processDataTypeDefinition(d,s,[u],e);p&&(t[u]=p,d.dataTypeMatcher&&(o[u]=d.dataTypeMatcher),i[u]=n(p))}const{valueParser:r,valueFormatter:a}=e.object,{valueParser:l,valueFormatter:c}=t.object;this.hasObjectValueParser=l!==r,this.hasObjectValueFormatter=c!==a,this.formatValueFuncs=i,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(o,e)}sortKeysInMatchers(e,t){const i={...e};for(const n of Uqe)delete i[n],i[n]=e[n]??t[n].dataTypeMatcher;return i}processDataTypeDefinition(e,t,i,n){let s;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let r=n[o];const a=t[o];if(r&&a&&(r=a),!jq(e,r,o))return;s=Wq(r,e)}else{if(i.includes(o)){Ee(44);return}const r=t[o];if(!jq(e,r,o))return;const a=this.processDataTypeDefinition(r,t,[...i,o],n);if(!a)return;s=Wq(a,e)}return{...s,groupSafeValueFormatter:Uq(s,this.gos)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:n}=t;const{field:s}=t;if(n===void 0&&(n=e.cellDataType),(n==null||n===!0)&&(n=this.canInferCellDataType(e,t)?this.inferCellDataType(s,i):!1),!n){e.cellDataType=!1;return}const o=this.dataTypeDefinitions[n];if(!o){Ee(47,{cellDataType:n});return}return e.cellDataType=n,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,n,o,i),o.columnTypes}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=n=>{t.add(n.key)};e.__addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){const{gos:i}=this;if(!Ln(i))return!1;const n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(cB(t,n))return!1;const s=t.type===null?e.type:t.type;if(s){const o=i.get("columnTypes")??{};if(ER(s).some(a=>{const l=o[a.trim()];return l&&cB(l,n)}))return!1}return!cB(e,n)}inferCellDataType(e,t){if(!e)return;let i;const n=this.getInitialData();if(n){const o=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");i=Lw(n,e,o)}else this.initWaitForRowData(t);return i==null?void 0:Object.keys(this.dataTypeMatchers).find(o=>this.dataTypeMatchers[o](i))??"object"}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const t=this.beans.rowModel.rootNode?._leafs;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:i,eventSvc:n}=this.beans;t&&i&&(i.shouldQueueResizeOperations=!0);const[s]=this.addManagedEventListeners({rowDataUpdateStarted:o=>{const{firstRowData:r}=o;r&&(s?.(),this.isPendingInference=!1,this.processColumnsPendingInference(r,t),this.columnStateUpdatesPendingInference={},t&&i?.processResizeOperations(),n.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const n={},s={};for(const o of Object.keys(this.columnStateUpdatesPendingInference)){const r=this.columnStateUpdatesPendingInference[o],a=this.colModel.getCol(o);if(!a)return;const l=a.getColDef();if(!this.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const c=a.getColDef();if(t&&c.type&&c.type!==l.type){const u=Yqe(a,r);u.rowGroup&&u.rowGroupIndex==null&&(n[o]=u),u.pivot&&u.pivotIndex==null&&(s[o]=u),i.push(u)}}t&&i.push(...this.generateColumnStateForRowGroupAndPivotIndexes(n,s)),i.length&&dc(this.beans,{state:i},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},{rowGroupColsSvc:n,pivotColsSvc:s}=this.beans;return n?.restoreColumnOrder(i,e),s?.restoreColumnOrder(i,t),Object.values(i)}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const n=uz(this.beans,i,e.getColId());return e.setColDef(n,i,t),!0}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e==="dateTime"||e==="dateTimeString"}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;const i=this.getDataTypeDefinition(e)?.dataTypeMatcher;return i?i(t):!0}validateColDef(e){const t=i=>Ee(48,{property:i});if(e.cellDataType==="object"){const{object:i}=this.dataTypeDefinitions;e.valueFormatter===i.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===i.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){const t=e.cellDataType;if(!t||typeof t!="string")return;const{dataTypeDefinitions:i,beans:n,formatValueFuncs:s}=this,o=i[t];o&&n.colFilter?.setColDefPropsForDataType(e,o,s[t])}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,i,n){const s=this.formatValueFuncs[t],o=this.columnDefinitionPropsPerDataType[i.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:i,colId:n,formatValue:s});Object.assign(e,o)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),i=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:n=>Qr(n.newValue&&String(n.newValue)),valueFormatter:n=>n.value==null?"":!(n.value instanceof Date)||isNaN(n.value.getTime())?t("invalidDate","Invalid Date"):Ta(n.value,i)??"",dataTypeMatcher:n=>n instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:i=>Qr(i)??void 0,dateFormatter:i=>Ta(i??null,t)??void 0,valueParser:i=>lI(String(i.newValue))?i.newValue:null,valueFormatter:i=>lI(String(i.value))?String(i.value):"",dataTypeMatcher:i=>typeof i=="string"&&lI(i)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>t.newValue?.trim?.()===""?null:Number(t.newValue),valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:iz(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>t.newValue==null?t.newValue:t.newValue?.trim?.()===""?null:String(t.newValue).toLowerCase()==="true",valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:t=>typeof t=="string"&&L6e(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>iz(t.value)??""}}}destroyColumnStateUpdateListeners(){for(const e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function Wq(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...ER(e.columnTypes),...ER(t.columnTypes)]),i}function jq(e,t,i){return t?t.baseDataType!==e.baseDataType?(Ee(46),!1):!0:(Ee(45,{parentCellDataType:i}),!1)}function Uq(e,t){if(e.valueFormatter)return i=>{if(i.node?.group){const n=(i.colDef.pivotValueColumn??i.column).getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(i);if(e.baseDataType==="number"&&n!=="count"){if(typeof i.value=="number")return e.valueFormatter(i);if(typeof i.value=="object"){if(!i.value)return;if("toNumber"in i.value)return e.valueFormatter({...i,value:i.value.toNumber()});if("value"in i.value)return e.valueFormatter({...i,value:i.value.value})}}return}}else if(t.get("groupHideOpenParents")&&i.column.isRowGroupActive()&&typeof i.value=="string"&&!e.dataTypeMatcher?.(i.value))return;return e.valueFormatter(i)}}function Kqe(e,t,i,n){if(!t[i])return!1;const s=e[i];return s===null?(t[i]=!1,!1):n===void 0?!!s:s===n}function cB(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,n])=>Kqe(e,t,i,n))}function Yqe(e,t){const i=Ole(e);for(const n of t)delete i[n],n==="rowGroup"?delete i.rowGroupIndex:n==="pivot"&&delete i.pivotIndex;return i}var Xqe={moduleName:"DataType",version:Ge,beans:[$qe],dependsOn:[Sqe]},Zqe={moduleName:"ColumnFlex",version:Ge,beans:[jqe]},Gce={moduleName:"ColumnApi",version:Ge,beans:[Wqe],apiFunctions:{getColumnDef:xqe,getDisplayNameForColumn:Dqe,getColumn:Mqe,getColumns:Aqe,applyColumnState:kqe,getColumnState:Tqe,resetColumnState:Iqe,isPinning:Rqe,isPinningLeft:Eqe,isPinningRight:Lqe,getDisplayedColAfter:Pqe,getDisplayedColBefore:Nqe,setColumnsVisible:Oqe,setColumnsPinned:Fqe,getAllGridColumns:Bqe,getDisplayedLeftColumns:_qe,getDisplayedCenterColumns:zqe,getDisplayedRightColumns:Gqe,getAllDisplayedColumns:Vqe,getAllDisplayedVirtualColumns:Hqe,getColumnDefs:wqe}};function qqe(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(s=>s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")).join(" ")}var Qqe=class extends we{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const n=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:s}=this.beans;return i&&s?s.getHeaderName(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,i){const n=t?.getColGroupDef();return n?this.getHeaderName(n,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,n,s){const o=e.headerValueGetter;if(o){const r=ct(this.gos,{colDef:e,column:t,columnGroup:i,providedColumnGroup:n,location:s});return typeof o=="function"?o(r):typeof o=="string"?this.beans.expressionSvc?.evaluate(o,r)??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return qqe(e.field)}return""}},Jqe=class extends we{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){const{visibleCols:n}=this,s=n.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!s)){if(this.scrollWidth=e,this.scrollPosition=t,n.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const r=n.bodyWidth;this.viewportLeft=r-t-e,this.viewportRight=r-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(i)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t];break}return i??[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||e7e(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),n=this.viewportLeft-200,s=this.viewportRight+200,o=t<n&&i<n,r=t>s&&i>s;return!o&&!r}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=o=>{const r=o.getLeft();return We(r)&&r>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:n}=this,s=n.centerCols;return n.getColsForRow(e,s,i,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const i=n=>{const s=new Set,o={};for(const r of n){let a=r.getParent();const l=r.isSpanHeaderHeight();for(;a&&!s.has(a);){if(l&&a.isPadding()){a=a.getParent();continue}const u=a.getProvidedColumnGroup().getLevel();o[u]??(o[u]=[]),o[u].push(a),s.add(a),a=a.getParent()}}return o};this.rowsOfHeadersToRenderLeft=i(e),this.rowsOfHeadersToRenderRight=i(t),this.rowsOfHeadersToRenderCenter=i(this.headerColsWithinViewport)}extractViewport(){const e=n=>`${n.getId()}-${n.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),i=this.colsWithinViewportHash!==t;return i&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),i}};function e7e(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var t7e=class extends we{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class i{refresh(){return!1}getGui(){return this.eGui}init(s){const o=t(s),r=typeof o;if(r==="string"||r==="number"||r==="boolean"){this.eGui=uj("<span>"+o+"</span>");return}if(o==null){this.eGui=br({tag:"span"});return}this.eGui=o}}return i}},i7e={moduleName:"CellRendererFunction",version:Ge,beans:[t7e]},n7e=class extends I8e{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(e!=null)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:i,dynamicBeans:n,selectors:s}=e;if(i){const o=(r,a,l,c)=>{this.agGridDefaults[r]=a,(l||c)&&(this.agGridDefaultOverrides[r]={params:l,processParams:c})};for(const r of Object.keys(i)){let a=i[r];if(k6e(a)&&(a=a.getComp(this.beans)),typeof a=="object"){const{classImp:l,params:c,processParams:u}=a;o(r,l,c,u)}else o(r,a)}}this.registerDynamicBeans(n);for(const o of s??[])this.selectors[o.selector]=o;if(t)for(const o of Object.keys(t))this.icons[o]=t[o]}getUserComponent(e,t){const i=(a,l,c,u)=>({componentFromFramework:l,component:a,params:c,processParams:u}),{frameworkOverrides:n}=this.beans,s=n.frameworkComponent(t,this.gos.get("components"));if(s!=null)return i(s,!0);const o=this.jsComps[t];if(o){const a=n.isFrameworkComponent(o);return i(o,a)}const r=this.agGridDefaults[t];if(r){const a=this.agGridDefaultOverrides[t];return i(r,!1,a?.params,a?.processParams)}return this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){return t?Iu(279,{name:e}):this.beans.validation?.missingDynamicBean(e)??Iu(256)}},s7e=23,o7e=class extends we{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(const e of this.readyCallbacks)e(this.params);this.readyCallbacks.length=0}},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){const e=Object.values(this.params);this.ready=e.length===s7e&&e.every(t=>t?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const i=this.readyCallbacks.indexOf(t);i>=0&&this.readyCallbacks.splice(i,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},r7e='.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-tab-guard{display:block;height:0;position:absolute;width:0}:where(.ag-virtual-list-viewport) .ag-tab-guard{position:sticky}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport,.ag-virtual-list-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important;&::-webkit-scrollbar{display:none!important}}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-virtual-list-viewport{overflow:auto;width:100%}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-right-cols-container,.ag-sticky-bottom-container,.ag-sticky-top-container,.ag-virtual-list-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-virtual-list-container{overflow:hidden}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-scrolling,.ag-scrollbar-active){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block;&:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}}.ag-group{position:relative;width:100%}.ag-group-title-bar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-title{display:inline;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-group-title-bar) .ag-group-title{cursor:default}.ag-group-toolbar{align-items:center;display:flex;padding:var(--ag-spacing)}.ag-group-container{display:flex}.ag-disabled .ag-group-container{pointer-events:none}.ag-disabled-group-container,.ag-disabled-group-title-bar{opacity:.5}.ag-group-container-horizontal{flex-flow:row wrap}.ag-group-container-vertical{flex-direction:column}.ag-group-title-bar-icon{cursor:pointer;flex:none}:where(.ag-ltr) .ag-group-title-bar-icon{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-group-title-bar-icon{margin-left:var(--ag-spacing)}:where(.ag-group-item-alignment-stretch) .ag-group-item{align-items:stretch}:where(.ag-group-item-alignment-start) .ag-group-item{align-items:flex-start}:where(.ag-group-item-alignment-end) .ag-group-item{align-items:flex-end}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-sticky-bottom{border-top:var(--ag-row-border);box-sizing:content-box!important}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-range-selection-border-color);content:"";height:1px;pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-loading-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden),.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)),.ag-header-group-cell{&:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}&:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}&:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}}:where(.ag-header-cell:not(.ag-floating-filter) *,.ag-header-group-cell *){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-accent-color);content:"";height:100%;position:absolute;width:1px}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2;&:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}}:where(.ag-ltr) .ag-header-cell-resize{right:-3px;&:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-rtl) .ag-header-cell-resize{left:-3px;&:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-virtual-list-item{height:var(--ag-list-item-height);position:absolute;width:100%}.ag-list-item-hovered:after{background-color:var(--ag-accent-color);content:"";height:1px;left:0;position:absolute;right:0}.ag-item-highlight-top:after{top:0}.ag-item-highlight-bottom:after{bottom:0}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color);&:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);position:relative;&:after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}:where(.ag-ltr) .ag-filter-active{&:after{right:-1px}}:where(.ag-rtl) .ag-filter-active{&:after{left:-1px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}',a7e={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:$r,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},cellFontFamily:{ref:"fontFamily"},headerFontWeight:500,headerFontSize:{ref:"fontSize"},dataFontSize:{ref:"fontSize"},headerTextColor:{ref:"textColor"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:Bd,rangeSelectionBackgroundColor:su(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:su(.5),rangeHeaderHighlightColor:c8e(.08),rowNumbersSelectedColor:su(.5),rowHoverColor:su(.08),columnHoverColor:su(.05),selectedRowBackgroundColor:su(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:$r,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:dl(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:dl(.1),iconButtonActiveColor:Bd,iconButtonActiveBackgroundColor:su(.28),iconButtonActiveIndicatorColor:Bd,menuBorder:{color:dl(.2)},menuBackgroundColor:Dl(.03),menuTextColor:Dl(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"},setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:dl(.8),dialogShadow:{ref:"popupShadow"},cellEditingBorder:{color:Bd},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},dialogBorder:{color:dl(.2)},panelBackgroundColor:$r,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:dl(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:dl(.13)},selectCellBackgroundColor:dl(.07),selectCellBorder:{color:dl(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:$r,filterPanelApplyButtonBackgroundColor:Bd,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:cb,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:cb,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:dl(.15),statusBarLabelColor:cb,statusBarLabelFontWeight:500,statusBarValueColor:cb,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"}},l7e=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",Vce={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},c7e={...Vce,cellBatchEditTextColor:"#f3d0b3"},u7e=()=>Bu({feature:"batchEditStyle",params:Vce,css:l7e}),d7e=u7e(),h7e=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}",p7e={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},g7e=()=>Bu({feature:"buttonStyle",params:{...p7e,buttonBackgroundColor:$r,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:Bd}},css:h7e}),f7e=g7e(),m7e=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",y7e=()=>Bu({feature:"columnDropStyle",css:m7e}),Hce=y7e(),v7e={warn:(...e)=>{Ee(e[0],e[1])},error:(...e)=>{Mi(e[0],e[1])},preInitErr:(...e)=>{cw(e[0],e[2],e[1])}},b7e=()=>S8e(v7e).withParams(a7e).withPart(f7e).withPart(Hce).withPart(d7e),S7e='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);:where(input){-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}&:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color);&:after{background-color:var(--ag-checkbox-checked-shape-color)}}&:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color);&:after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',C7e=()=>Bu({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:$r,checkboxUncheckedBorderColor:Dl(.3),checkboxCheckedBackgroundColor:Bd,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:$r,checkboxIndeterminateBackgroundColor:Dl(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:$r,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:S7e}),x7e=C7e(),Wce=()=>({...OR,...c7e,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:Dl(.05),rowHoverColor:su(.15),selectedRowBackgroundColor:su(.2),menuBackgroundColor:Dl(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:cb,findMatchColor:$r,findActiveMatchColor:$r,checkboxUncheckedBorderColor:Dl(.4),toggleButtonOffBackgroundColor:Dl(.4),rowBatchEditBackgroundColor:Dl(.1)}),w7e=()=>({...Wce(),backgroundColor:"#1f2836"}),D7e=()=>Bu({feature:"colorScheme",params:OR,modeParams:{light:OR,dark:Wce(),"dark-blue":w7e()}}),M7e=D7e(),jce={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>'},Uce={"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>'},A7e=(e={})=>{let t="";for(const i of[...Object.keys(jce),...Object.keys(Uce)]){const n=k7e(i,e.strokeWidth);t+=`.ag-icon-${i}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(n)}'); }
`}return t},k7e=(e,t=1.5)=>{const i=Uce[e];if(i)return i;const n=jce[e];if(!n)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+n+"</svg>"},T7e=(e={})=>Bu({feature:"iconSet",css:()=>A7e(e)}),I7e=T7e(),R7e=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper,.ag-filter-toolpanel-search,.ag-mini-filter,.ag-filter-filter,.ag-filter-add-select){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',E7e=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}",L7e={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},P7e=()=>Bu({feature:"inputStyle",params:{...L7e,inputBackgroundColor:$r,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:Bd},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:Dl(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>R7e+E7e}),N7e=P7e(),O7e='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative;&:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}&.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}&:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}&.ag-tab-selected:after{opacity:1}}:where(.ag-ltr) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}}}:where(.ag-rtl) .ag-tab{&.ag-tab-selected{&:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}&:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}}}',F7e={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},B7e=()=>Bu({feature:"tabStyle",params:{...F7e,tabBarBorder:!0,tabBarBackgroundColor:dl(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:$r},css:O7e}),_7e=B7e(),z7e=()=>b7e().withPart(x7e).withPart(M7e).withPart(I7e).withPart(_7e).withPart(N7e).withPart(Hce).withParams({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),G7e=z7e(),V7e={cssName:"--ag-cell-horizontal-padding",changeKey:"cellHorizontalPaddingChanged",defaultValue:16},H7e={cssName:"--ag-indentation-level",changeKey:"indentationLevelChanged",defaultValue:0,noWarn:!0,cacheDefault:!0},W7e={cssName:"--ag-row-group-indent-size",changeKey:"rowGroupIndentSizeChanged",defaultValue:0},$q={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},Kq={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},Yq={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},uB={cssName:"--ag-row-border",changeKey:"rowBorderWidthChanged",defaultValue:1,border:!0},Xq={cssName:"--ag-pinned-row-border",changeKey:"pinnedRowBorderWidthChanged",defaultValue:1,border:!0};function j7e(e,t){for(const i of t.sort((n,s)=>n.moduleName.localeCompare(s.moduleName))){const n=i.css;n&&e.set(`module-${i.moduleName}`,n)}}var U7e=class extends T8e{constructor(){super(...arguments),this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1}initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl($q),this.getSizeEl(Kq),this.getSizeEl(Yq),this.getSizeEl(uB),this.getSizeEl(Xq),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(Xq)}getRowBorderWidth(){return this.getCSSVariablePixelValue(uB)}getDefaultRowHeight(){return this.getCSSVariablePixelValue($q)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(Kq)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(V7e)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(H7e),i=this.getCSSVariablePixelValue(W7e);return e-1+i*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(Yq)}refreshRowHeightVariable(){const{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),i=this.gos.get("rowHeight");if(i==null||isNaN(i)||!isFinite(i))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;const n=`${i}px`;return t!=n?(e.style.setProperty("--ag-line-height",n),i):t!=""?Number.parseFloat(t):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const i=this.measureSizeEl(e);return i==="detached"||i==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const i=t.offsetWidth;return i===dB?"no-styles":(this.sizesMeasured=!0,i)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=br({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const i=this.getMeasurementContainer();t=br({tag:"div"});const{border:n,noWarn:s}=e;n?(t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${e.cssName}, solid ${dB}px)`)):t.style.width=`var(${e.cssName}, ${dB}px)`,i.appendChild(t),this.sizeEls.set(e,t);let o=this.measureSizeEl(e);o==="no-styles"&&!s&&Ee(9,{variable:e});const r=Bh(this.beans,t,()=>{const a=this.measureSizeEl(e);a==="detached"||a==="no-styles"||(this.lastKnownValues.set(e,a),a!==o&&(o=a,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}fireStylesChangedEvent(e){e==="rowBorderWidthChanged"&&this.refreshRowBorderWidthVariable(),this.eventSvc.dispatchEvent({type:"gridStylesChanged",[e]:!0})}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(uB);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&Mi(t?106:239)}getAdditionalCss(){const e=new Map;return e.set("core",[r7e]),j7e(e,Array.from(ZKe())),e}getDefaultTheme(){return G7e}themeError(e){Mi(240,{theme:e})}},dB=15538,$7e=class extends R8e{postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}};function $ce(e,t,i){const n=e.visibleCols.headerGroupRowCount;if(i>=n)return{column:t,headerRowIndex:i};let s=t.getParent();for(;s&&s.getProvidedColumnGroup().getLevel()>i;)s=s.getParent();const o=t.isSpanHeaderHeight();return!s||o&&s.isPadding()?{column:t,headerRowIndex:n}:{column:s,headerRowIndex:s.getProvidedColumnGroup().getLevel()}}var K7e=class extends we{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,i=>{this.gridBodyCon=i.gridBodyCtrl});const t=Ys(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let i;const{colModel:n,colGroupSvc:s,ctrlsSvc:o}=this.beans;if(typeof e=="string"?(i=n.getCol(e),i||(i=s?.getColumnGroup(e)??null)):i=e,!i)return null;const a=o.getHeaderRowContainerCtrl()?.getAllCtrls(),l=Ni(a||[]).type==="filter",c=Su(this.beans)-1;let u=-1,d=i;for(;d;)u++,d=d.getParent();let p=u;return t&&l&&p===c-1&&p++,p===-1?null:{headerRowIndex:p,column:i}}navigateVertically(e,t){const{focusSvc:i,visibleCols:n}=this.beans,{focusedHeader:s}=i;if(!s)return!1;const{headerRowIndex:o}=s,r=s.column,a=Su(this.beans),l=this.getHeaderRowType(o),c=n.headerGroupRowCount;let{headerRowIndex:u,column:d,headerRowIndexWithoutSpan:p}=e==="UP"?Y7e(l,r,o):X7e(r,o,c),f=!1;return u<0&&(u=0,d=r,f=!0),u>=a?(u=-1,this.currentHeaderRowWithoutSpan=-1):p!==void 0&&(this.currentHeaderRowWithoutSpan=p),!f&&!d?!1:i.focusHeaderPosition({headerPosition:{headerRowIndex:u,column:d},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,i){const{focusSvc:n,gos:s}=this.beans,o={...n.focusedHeader};let r,a;this.currentHeaderRowWithoutSpan!==-1?o.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=o.headerRowIndex,e==="LEFT"!==s.get("enableRtl")?(a="Before",r=this.findHeader(o,a)):(a="After",r=this.findHeader(o,a));const l=s.getCallback("tabToNextHeader");if(t&&l){const c=n.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:r,direction:a});if(c){const{headerRowIndex:u}=n.focusedHeader||{};u!=null&&u!=o.headerRowIndex&&(this.currentHeaderRowWithoutSpan=u)}return c}return r||!t?n.focusHeaderPosition({headerPosition:r,direction:a,fromTab:t,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(o,a,i)}focusNextHeaderRow(e,t,i){const n=this.beans,s=e.headerRowIndex;let o=null,r;const a=Su(n),l=this.beans.visibleCols.allCols;if(t==="Before"){if(s<=0)return!1;o=Ni(l),r=s-1,this.currentHeaderRowWithoutSpan-=1}else o=l[0],r=s+1,this.currentHeaderRowWithoutSpan<a?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:c,headerRowIndex:u}=$ce(this.beans,o,r);return u>=a&&(u=-1),n.focusSvc.focusHeaderPosition({headerPosition:{column:c,headerRowIndex:u},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(Yn(e)){const n=e.getDisplayedLeafColumns();i=t==="Before"?Ni(n):n[0]}else i=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(i)}findHeader(e,t){const{colGroupSvc:i,visibleCols:n}=this.beans;let s=e.column;if(s instanceof E0){const l=s.getDisplayedLeafColumns();s=t==="Before"?l[0]:l[l.length-1]}const o=t==="Before"?n.getColBefore(s):n.getColAfter(s);if(!o)return;const r=n.headerGroupRowCount;if(e.headerRowIndex>=r)return{headerRowIndex:e.headerRowIndex,column:o};const a=i?.getColGroupAtLevel(o,e.headerRowIndex);return a?a.isPadding()&&o.isSpanHeaderHeight()?{headerRowIndex:n.headerGroupRowCount,column:o}:{headerRowIndex:e.headerRowIndex,column:a??o}:{headerRowIndex:o instanceof Ey&&o.isSpanHeaderHeight()?n.headerGroupRowCount:e.headerRowIndex,column:o}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function Y7e(e,t,i){const n=i-1;if(e!=="filter"){const s=t instanceof Ey&&t.isSpanHeaderHeight();let o=t.getParent();for(;o&&(o.getProvidedColumnGroup().getLevel()>n||s&&o.isPadding());)o=o.getParent();if(o)return s?{column:o,headerRowIndex:o.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:n}:{column:o,headerRowIndex:n,headerRowIndexWithoutSpan:n}}return{column:t,headerRowIndex:n,headerRowIndexWithoutSpan:n}}function X7e(e,t,i){const n=t+1,s={column:e,headerRowIndex:n,headerRowIndexWithoutSpan:n};if(e instanceof E0){if(n>=i)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:i,headerRowIndexWithoutSpan:n};let r=e.getDisplayedChildren()[0];if(r instanceof E0&&r.isPadding()){const l=r.getDisplayedLeafColumns()[0];l.isSpanHeaderHeight()&&(r=l)}s.column=r,r instanceof Ey&&r.isSpanHeaderHeight()&&(s.headerRowIndex=i,s.headerRowIndexWithoutSpan=n)}return s}var Z7e=class extends we{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(F6e(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(Cn(this.beans),Mce)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const e=Cn(this.beans);return this.isDomDataPresentInHierarchy(e,FR)?!0:this.isDomDataPresentInHierarchy(e,BR)}isDomDataPresentInHierarchy(e,t){let i=e;for(;i;){if(yle(this.gos,i,t))return!0;i=i.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:i,column:n}=e,s={rowIndex:t,rowPinned:i,column:n,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i});return o&&(s.isFullWidthCell=o.isFullWidth()),s}clearFocusedCell(){if(this.focusedCell==null)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:i,rowPinned:n,forceBrowserFocus:s=!1,preventScrollOnBrowserFocus:o=!1,sourceEvent:r}=e,a=this.colModel.getCol(t);if(!a){this.focusedCell=null;return}this.focusedCell={rowIndex:i,rowPinned:qd(n),column:a};const l=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...l,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:s,preventScrollOnBrowserFocus:o,sourceEvent:r}),this.previousCellFocusParams=l}isCellFocused(e){return this.focusedCell==null?!1:Pce(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;const{column:t,rowCtrl:{rowIndex:i,pinned:n}}=e,{column:s,headerRowIndex:o}=this.focusedHeader;return t===s&&i===o&&n==s.getPinned()}focusHeaderPosition(e){if(this.setFocusRecovered(),Dm(this.beans))return!1;const{direction:t,fromTab:i,allowUserOverride:n,event:s,fromCell:o,rowWithoutSpanValue:r,scroll:a=!0}=e;let{headerPosition:l}=e;if(o&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(l);if(n){const c=this.focusedHeader,u=Su(this.beans);if(i){const d=this.gos.getCallback("tabToNextHeader");d&&(l=this.getHeaderPositionFromUserFunc({userFunc:d,direction:t,currentPosition:c,headerPosition:l,headerRowCount:u}))}else{const d=this.gos.getCallback("navigateToNextHeader");if(d&&s){const p={key:s.key,previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:u,event:s};l=d(p)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:t,event:s,fromCell:o,rowWithoutSpanValue:r,scroll:a}):!1}focusHeaderPositionFromUserFunc(e){if(Dm(this.beans))return!1;const{userFunc:t,headerPosition:i,direction:n,event:s}=e,o=this.focusedHeader,r=Su(this.beans),a=this.getHeaderPositionFromUserFunc({userFunc:t,direction:n,currentPosition:o,headerPosition:i,headerRowCount:r});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:n,event:s})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:n,headerPosition:s,headerRowCount:o}=e,a=t({backwards:i==="Before",previousHeaderPosition:n,nextHeaderPosition:s,headerRowCount:o});return a===!0?n:a===!1?null:a}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:n,rowWithoutSpanValue:s,event:o,scroll:r=!0}=e,{column:a,headerRowIndex:l}=t,{filterManager:c,ctrlsSvc:u,headerNavigation:d}=this.beans;if(this.focusedHeader&&tXe(e.headerPosition,this.focusedHeader))return!1;if(l===-1)return c?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:a,event:o});r&&d?.scrollToColumn(a,i);const f=u.getHeaderRowContainerCtrl(a.getPinned())?.focusHeader(t.headerRowIndex,a,o)||!1;return d&&f&&(s!=null||n)&&(d.currentHeaderRowWithoutSpan=s??-1),f}focusFirstHeader(){if(this.overlays?.isExclusive()&&this.focusOverlay())return!0;const e=this.visibleCols.allCols[0];if(!e)return!1;const t=$ce(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.isExclusive()&&this.focusOverlay(!0))return!0;const t=Su(this.beans)-1,i=Ni(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===qd(t)}focusOverlay(e){const t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&Um(t,e)}focusGridView(e){const{backwards:t=!1,canFocusOverlay:i=!0,event:n}=e;if(this.overlays?.isExclusive())return i&&this.focusOverlay(t);if(tP(this.beans))return t&&!Dm(this.beans)?this.focusLastHeader():i&&this.focusOverlay(t)?!0:t?!1:mS(this.beans,t);const s=t?hZe(this.beans):dZe(this.beans);if(s){const o=e.column??this.focusedHeader?.column,{rowIndex:r,rowPinned:a}=s,l=dh(this.beans,s);if(!o||!l||r==null)return!1;if(o.isSuppressNavigable(l)){const c=this.gos.get("enableRtl");let u;return!n||n.key===pe.TAB?u=c?pe.LEFT:pe.RIGHT:u=n.key,this.beans.navigation?.navigateToNextCell(null,u,{rowIndex:r,column:o,rowPinned:a||null},!0),!0}return this.navigation?.ensureCellVisible({rowIndex:r,column:o,rowPinned:a}),t&&this.rowRenderer.getRowByPosition(s)?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(s,t)||(this.setFocusedCell({rowIndex:r,column:o,rowPinned:qd(a),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:r,rowPinned:a,column:o})),!0}return!!(i&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){const i=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:Su(this.beans)-1}}):this.focusGridView({column:i})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},q7e=class extends we{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){this.horizontalScrollShowing=this.gos.get("alwaysShowHorizontalScroll")===!0,this.verticalScrollShowing=this.gos.get("alwaysShowVerticalScroll")===!0,this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.updateScrollVisible.bind(this),displayedColumnsWidthChanged:this.updateScrollVisible.bind(this)})}updateScrollVisible(){const{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsSvc.get("center");if(!e||this.colAnimation?.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),i=typeof e=="number"&&e>=0?e:I6e();i!=null&&(this.scrollbarWidth=i,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},Q7e=class extends we{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:i}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:e?.getState()??{}}),this.destroyCalled=!0,t.get("gridCtrl")?.destroyGridUi(),i.destroy(),super.destroy()}},gI=new Set(["gridPreDestroyed","fillStart","pasteStart"]),J7e=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],Gj=J7e.reduce((e,t)=>(e[t]=vYe(t),e),{}),Wx=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),eQe={tag:"span",cls:"ag-sort-indicator-container",children:[Wx("Order","order"),Wx("Asc","ascending-icon"),Wx("Desc","descending-icon"),Wx("Mixed","mixed-icon"),Wx("None","none-icon")]},Vj=class extends An{constructor(e){super(),this.eSortOrder=ot,this.eSortAsc=ot,this.eSortDesc=ot,this.eSortMixed=ot,this.eSortNone=ot,e||this.setTemplate(eQe)}attachCustomElements(e,t,i,n,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=n,this.eSortNone=s}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),n=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:n,columnRowGroupChanged:n}),this.onSortChanged()}addInIcon(e,t,i){if(t==null)return;const n=kl(e,this.beans,i);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortNone:i,column:n,gos:s,beans:o}=this,r=o.sortSvc.getDisplaySortForColumn(n);if(e&&pn(e,r==="asc",{skipAriaHidden:!0}),t&&pn(t,r==="desc",{skipAriaHidden:!0}),i){const a=!n.getColDef().unSortIcon&&!s.get("unSortIcon"),l=r==null;pn(i,!a&&l,{skipAriaHidden:!0})}}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:i}=this;this.addInIcon("sortUnSort",e,t);const n=t.getColDef().showRowGroup;pu(i)&&n&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:i}=this;if(e){const n=t.sortSvc.getDisplaySortForColumn(i)==="mixed";pn(e,n,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:i}}=this;if(!e)return;const n=i.getColumnsWithSortingOrdered(),s=i.getDisplaySortIndexForColumn(t)??-1,o=n.some(a=>i.getDisplaySortIndexForColumn(a)??!1),r=s>=0&&o;pn(e,r,{skipAriaHidden:!0}),s>=0?e.textContent=(s+1).toString():qr(e)}},tQe={selector:"AG-SORT-INDICATOR",component:Vj},P0=["asc","desc",null],iQe=class extends we{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,i){const n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)}progressSortFromEvent(e,t){const n=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,n,"uiColumnSorted")}setSortForColumn(e,t,i,n){t!=="asc"&&t!=="desc"&&(t=null);const{gos:s,showRowGroupCols:o}=this.beans,r=pu(s);let a=[e];if(r&&e.getColDef().showRowGroup){const d=o?.getSourceColumnsForGroupColumn?.(e)?.filter(p=>p.isSortable());d&&(a=[e,...d])}for(const u of a)this.setColSort(u,t,n);const l=(i||s.get("alwaysMultiSort"))&&!s.get("suppressMultiSort"),c=[];if(!l){const u=this.clearSortBarTheseColumns(a,n);c.push(...u)}this.updateSortIndex(e),c.push(...a),this.dispatchSortChangedEvents(n,c)}updateSortIndex(e){const{gos:t,colModel:i,showRowGroupCols:n}=this.beans,s=pu(t),o=n?.getShowRowGroupCol(e.getId()),r=s&&o||e,a=this.getColumnsWithSortingOrdered();i.forAllCols(u=>this.setColSortIndex(u,null));const l=a.filter(u=>s&&u.getColDef().showRowGroup?!1:u!==r);(r.getSort()?[...l,r]:l).forEach((u,d)=>this.setColSortIndex(u,d))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{t.getSort()&&(e=!0)}),e}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventSvc.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.beans.colModel.forAllCols(n=>{e.includes(n)||(n.getSort()&&i.push(n),this.setColSort(n,void 0,t))}),i}getNextSortDirection(e){const t=e.getColDef().sortingOrder??this.gos.get("sortingOrder")??P0,i=t.indexOf(e.getSort()),n=i<0,s=i==t.length-1;return n||s?t[0]:t[i+1]}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:i,rowGroupColsSvc:n}=this.beans;let s=[];if(t.forAllCols(c=>{c.getSort()&&s.push(c)}),t.isPivotMode()){const c=pu(e);s=s.filter(u=>{const d=!!u.getAggFunc(),p=!u.isPrimary(),f=c?i?.getShowRowGroupCol(u.getId()):u.getColDef().showRowGroup;return d||p||f})}const o=n?.columns.filter(c=>!!c.getSort())??[],r={};s.forEach((c,u)=>r[c.getId()]=u),s.sort((c,u)=>{const d=c.getSortIndex(),p=u.getSortIndex();if(d!=null&&p!=null)return d-p;if(d==null&&p==null){const f=r[c.getId()],m=r[u.getId()];return f>m?1:-1}else return p==null?-1:1});const a=pu(e)&&!!o.length;a&&(s=[...new Set(s.map(c=>i?.getShowRowGroupCol(c.getId())??c))]);const l=new Map;if(s.forEach((c,u)=>l.set(c,u)),a)for(const c of o){const u=i.getShowRowGroupCol(c.getId());l.set(c,l.get(u))}return l}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=pu(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();const n=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,s=n[0].getSort();return n.every(r=>r.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t,i){let n=0;e.addManagedListeners(t,{movingChanged:()=>{n=Date.now()}}),i&&e.addManagedElementListeners(i,{click:o=>{const r=t.isMoving(),l=Date.now()-n<50;r||l||this.progressSortFromEvent(t,o)}});const s=()=>{const o=t.getSort();if(e.toggleCss("ag-header-cell-sorted-asc",o==="asc"),e.toggleCss("ag-header-cell-sorted-desc",o==="desc"),e.toggleCss("ag-header-cell-sorted-none",!o),t.getColDef().showRowGroup){const l=!this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t)?.every(c=>t.getSort()==c.getSort());e.toggleCss("ag-header-cell-sorted-mixed",l)}};e.addManagedEventListeners({sortChanged:s,columnRowGroupChanged:s})}initCol(e){const{sort:t,initialSort:i,sortIndex:n,initialSortIndex:s}=e.colDef;t!==void 0?(t==="asc"||t==="desc")&&(e.sort=t):(i==="asc"||i==="desc")&&(e.sort=i),n!==void 0?n!==null&&(e.sortIndex=n):s!==null&&(e.sortIndex=s)}updateColSort(e,t,i){t!==void 0&&(t==="desc"||t==="asc"?this.setColSort(e,t,i):this.setColSort(e,void 0,i))}setColSort(e,t,i){e.sort!==t&&(e.sort=t,e.dispatchColEvent("sortChanged",i)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new Vj(e)}getSortIndicatorSelector(){return tQe}},Ob={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agDateColumnFloatingFilter:"DateFilter",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};function Zq(e){return`"${e}"`}var nQe=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."},rowGroupingHierarchy:{version:"34.3",message:"Use `colDef.groupHierarchy` instead."}}),sQe={aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t})=>t?typeof e=="string"?Ob[e]??"CustomEditor":"CustomEditor":null,cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:Ob[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?Ob[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{const t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(i=>t.includes(i))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},oQe=()=>({autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:i})=>i?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},cellRendererParams:{validate:t=>(t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer")&&"checkbox"in t.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(t,i)=>i.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:i})=>i==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:i})=>i==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:i})=>i==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{const i=t.headerValueGetter;return typeof i=="function"||typeof i=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t.smallDown)return Iu(262);if(t.smallLeft)return Iu(263);if(t.smallRight)return Iu(264)}return null}},sortingOrder:{validate:t=>{const i=t.sortingOrder;if(Array.isArray(i)&&i.length>0){const n=i.filter(s=>!P0.includes(s));if(n.length>0)return`sortingOrder must be an array with elements from [${P0.map(MR).join()}], currently it includes [${n.map(MR).join()}]`}else if(!Array.isArray(i)||i.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${i}`;return null}},type:{validate:t=>{const i=t.type;return i instanceof Array?i.some(s=>typeof s!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof i=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:i})=>i?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:i,cellSelection:n,suppressRowTransform:s,enableCellSpan:o,rowDragEntireRow:r,enableCellTextSelection:a})=>typeof i=="object"&&i?.mode==="singleRow"&&i?.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":n?"colDef.spanRows is not supported with cellSelection.":s?"colDef.spanRows is not supported with suppressRowTransform.":o?r?"colDef.spanRows is not supported with rowDragEntireRow.":a?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."},groupHierarchy:{validate(t,{groupHierarchyConfig:i={}},n){const s=new Set(["year","quarter","month","formattedMonth","day","hour","minute","second"]),o=[];for(const r of t.groupHierarchy??[]){if(typeof r=="object"){n.validation?.validateColDef(r);continue}!s.has(r)&&!(r in i)&&o.push(Zq(r))}if(o.length>0){const r=`The following parts of colDef.groupHierarchy are not recognised: ${o.join(", ")}.`,a=`Choose one of ${[...s].map(Zq).join(", ")}, or define your own parts in gridOptions.groupHierarchyConfig.`;return`${r}
${a}`}return null}}}),rQe={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,headerTooltipValueGetter:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,tooltipComponentSelector:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0,rowGroupingHierarchy:void 0,groupHierarchy:void 0},aQe=()=>Object.keys(rQe),lQe=()=>({objectName:"colDef",allProperties:aQe(),docsUrl:"column-properties/",deprecations:nQe(),validations:oQe()}),cQe=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],uQe=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers","groupHierarchyConfig"],dQe=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],Kce=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],hQe=["theme","rowSelection"],pQe=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],Yce=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows","ssrmExpandAllAffectsAllRows"],gQe=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"],fQe=()=>[...dQe,...uQe,...cQe,...Kce,...gQe,...Yce,...pQe,...hQe],mQe=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}});function eu(e,t,i){return typeof t=="number"||t==null?t==null||t>=i?null:`${e}: value should be greater than or equal to ${i}`:`${e}: value should be a number`}var yQe={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},vQe=()=>{const e={autoSizePadding:{validate({autoSizePadding:i}){return eu("autoSizePadding",i,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:i}){return eu("cacheBlockSize",i,1)}},cacheOverflowSize:{validate({cacheOverflowSize:i}){return eu("cacheOverflowSize",i,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:i=>{const n=i.domLayout,s=["autoHeight","normal","print"];return n&&!s.includes(n)?`domLayout must be one of [${s.join()}], currently it's ${n}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:i,pinnedTopRowData:n,pinnedBottomRowData:s}){return i&&(n||s)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({enableRowPinning:i,isRowPinnable:n,pinnedTopRowData:s,pinnedBottomRowData:o}){return n&&(s||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!i&&n?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate({enableRowPinning:i,isRowPinned:n,pinnedTopRowData:s,pinnedBottomRowData:o}){return n&&(s||o)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!i&&n?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},groupHierarchyConfig:{validate({groupHierarchyConfig:i={}},n,s){for(const o of Object.keys(i))s.validation?.validateColDef(i[o]);return null}},icons:{validate:({icons:i})=>{if(i){if(i.smallDown)return Iu(262);if(i.smallLeft)return Iu(263);if(i.smallRight)return Iu(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:i}){return eu("infiniteInitialRowCount",i,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},ssrmExpandAllAffectsAllRows:{validate:i=>{if(typeof i.ssrmExpandAllAffectsAllRows=="boolean"){if(i.rowModelType!=="serverSide")return"'ssrmExpandAllAffectsAllRows' is only supported with the Server Side Row Model.";if(i.ssrmExpandAllAffectsAllRows&&typeof i.getRowId!="function")return"'getRowId' callback must be provided for Server Side Row Model grouping to work correctly."}return null}},keepDetailRowsCount:{validate({keepDetailRowsCount:i}){return eu("keepDetailRowsCount",i,1)}},paginationPageSize:{validate({paginationPageSize:i}){return eu("paginationPageSize",i,1)}},paginationPageSizeSelector:{validate:i=>{const n=i.paginationPageSizeSelector;return typeof n=="boolean"||n==null||n.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:i}){return eu("rowBuffer",i,0)}},rowClass:{validate:i=>typeof i.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:i}){return i&&typeof i=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':i&&typeof i!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":i&&i.mode!=="multiRow"&&i.mode!=="singleRow"?`Selection mode "${i.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:i=>{const n=i.rowStyle;return n&&typeof n=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:i}){return eu("serverSideInitialRowCount",i,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:i=>{const n=i.sortingOrder;if(Array.isArray(n)&&n.length>0){const s=n.filter(o=>!P0.includes(o));if(s.length>0)return`sortingOrder must be an array with elements from [${P0.map(MR).join()}], currently it includes [${s.map(MR).join()}]`}else if(!Array.isArray(n)||n.length<=0)return`sortingOrder must be an array with at least one element, currently it's ${n}`;return null}},tooltipHideDelay:{validate:i=>i.tooltipHideDelay&&i.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:i=>i.tooltipShowDelay&&i.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:i=>{const n=i.rowModelType??"clientSide";switch(n){case"clientSide":{const{treeDataChildrenField:s,treeDataParentIdField:o,getDataPath:r,getRowId:a}=i;if(!s&&!o&&!r)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(s){if(r)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(o)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(o){if(!a)return"getRowId callback not provided, tree data with parent id cannot be built.";if(r)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const s=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${n} row model.`;return i.isServerSideGroup&&i.getServerSideGroupKey?null:s}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:i}){return eu("viewportRowModelBufferSize",i,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:i}){return eu("viewportRowModelPageSize",i,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:i,showOpenedGroup:n}){return i?.field&&n?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":i?.valueGetter&&n?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:i=>{const n=i.renderingMode,s=["default","legacy"];return n&&!s.includes(n)?`renderingMode must be one of [${s.join()}], currently it's ${n}`:null}},autoSizeStrategy:{validate:({autoSizeStrategy:i})=>{if(!i)return null;const n=["fitCellContents","fitGridWidth","fitProvidedWidth"],s=i.type;return s!=="fitCellContents"&&s!=="fitGridWidth"&&s!=="fitProvidedWidth"?`Invalid Auto-size strategy. \`autoSizeStrategy\` must be one of ${n.map(o=>'"'+o+'"').join(", ")}, currently it's ${s}`:s==="fitProvidedWidth"&&typeof i.width!="number"?`When using the 'fitProvidedWidth' auto-size strategy, must provide a numeric \`width\`. You provided ${i.width}`:null}}},t={};for(const i of Yce)t[i]={expectedType:"boolean"};for(const i of Kce)t[i]={expectedType:"number"};return mr(t,e),t},bQe=()=>({objectName:"gridOptions",allProperties:[...fQe(),...Object.values(Gj)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:mQe(),validations:vQe()}),SQe=0,CQe=0,qq="__ag_grid_instance",xQe=class extends we{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=CQe++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new Vm,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const n=gI.has(t);if(n&&!e||!n&&e||!wQe(t))return;const s=(o,r)=>{const a=Gj[o],l=this.gridOptions[a];typeof l=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>l(r))};if(this.gridReadyFired)s(t,i);else if(t==="gridReady"){s(t,i),this.gridReadyFired=!0;for(const o of this.queueEvents)s(o.eventName,o.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:i})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??rle[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return We(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(i=>e(this.addCommon(i)))}updateGridOptions({options:e,force:t,source:i="api"}){const n={id:SQe++,properties:[]},s=[],{gridOptions:o,validation:r}=this;for(const a of Object.keys(e)){const l=yj.applyGlobalGridOption(a,e[a]);r?.warnOnInitialPropertyUpdate(i,a);const c=t||typeof l=="object"&&i==="api",u=o[a];if(c||u!==l){o[a]=l;const d={type:a,currentValue:l,previousValue:u,changeSet:n,source:i};s.push(d)}}this.validateGridOptions(this.gridOptions),n.properties=s.map(a=>a.type);for(const a of s)Wm(this,`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propEventSvc.dispatchEvent(a)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const i of Object.keys(e)){const n=e[i];if(n==null||n===!1)continue;let s=t[i];typeof s=="function"&&(s=s(e,this.gridOptions,this.beans)),s&&this.assertModuleRegistered(s,i)}}validateGridOptions(e){this.validateOptions(e,yQe),this.validation?.processGridOptions(e)}validateColDef(e,t,i){(i||!this.beans.dataTypeSvc?.isColPendingInference(t))&&(this.validateOptions(e,sQe),this.validation?.validateColDef(e))}assertModuleRegistered(e,t){const i=Array.isArray(e)?e.some(n=>this.isModuleRegistered(n)):this.isModuleRegistered(e);return i||Mi(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),i}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:vj(),rowModelType:this.get("rowModelType"),isUmd:JKe()}}isModuleRegistered(e){return oz(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[qq]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){const i=t[qq];if(We(i))return i===this.instanceId;t=t.parentElement}return!1}};function wQe(e){return!!Gj[e]}function Xce(e){const t={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:t},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:t},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:t},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var DQe=Xce(!0),MQe=Xce(!1),AQe=class extends An{constructor(){super(...arguments),this.eFilter=ot,this.eFilterButton=ot,this.eSortIndicator=ot,this.eMenu=ot,this.eLabel=ot,this.eText=ot,this.eSortOrder=ot,this.eSortAsc=ot,this.eSortDesc=ot,this.eSortMixed=ot,this.eSortNone=ot,this.isLoadingInnerComponent=!1}refresh(e){const t=this.params;if(this.params=e,this.workOutTemplate(e,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){const i={...e};mr(i,e.innerHeaderComponentParams),this.innerHeaderComponent.refresh?.(i)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const i=e.template;return i?i?.trim?i.trim():i:t?DQe:MQe}init(e){this.params=e;const{sortSvc:t,touchSvc:i,rowNumbersSvc:n,userCompFactory:s}=this.beans,o=t?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!o),this.setTemplate(this.currentTemplate,o?[o]:void 0),i?.setupForHeader(this),this.setMenu(),this.setupSort(),n?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(s,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const i=g6e(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(n=>{this.isLoadingInnerComponent=!1,n&&(this.isAlive()?(this.innerHeaderComponent=n,this.eText&&this.eText.appendChild(n.getGui())):this.destroyBean(n))}))}setDisplayName(e){const{displayName:t}=e,i=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||i===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=yC(t))}addInIcon(e,t,i){const n=kl(e,this.beans,i);n&&t.appendChild(n)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){ug(this.eMenu),this.eMenu=void 0;return}const{gos:e,eMenu:t,params:i}=this,n=xa(e);this.addInIcon(n?"menu":"menuAlt",t,i.column),t.classList.toggle("ag-header-menu-icon",!n);const s=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=s,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(s)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:i}=this;t||this.toggleMenuAlwaysShow(!0),i.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){const{params:t,gos:i,beans:n,eMenu:s,eFilterButton:o}=this,r=t.column,a=xa(i);if(e&&!a){if(n.menuSvc?.isFilterMenuInHeaderEnabled(r))return t.showFilter(o??s??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(s??o??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:i}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:n,eSortOrder:s,eSortAsc:o,eSortDesc:r,eSortMixed:a,eSortNone:l}=this;n.attachCustomElements(s,o,r,a,l)}this.eSortIndicator.setupSort(i),this.currentSort&&e.setupHeader(this,i,this.eLabel)}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;const i=()=>{const n=t.column.isFilterActive();pn(e,n,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,i,"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,i,n){if(!e)return ug(t),!1;const s=this.params.column;return this.addInIcon(n,t,s),this.addManagedListeners(s,{filterChanged:i}),i(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:i}=this;return e?t??i??this.getGui():i??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent&&(this.destroyBean(this.innerHeaderComponent),this.innerHeaderComponent=void 0)}},kQe={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},TQe=class extends An{constructor(){super(kQe),this.agOpened=ot,this.agClosed=ot,this.agLabel=ot,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:i}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),i?.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&Ee(89)}workOutInnerHeaderGroupComponent(e,t){const i=m6e(e,t,t);i&&(this.isLoadingInnerComponent=!0,i.newAgStackInstance().then(n=>{this.isLoadingInnerComponent=!1,n&&(this.isAlive()?(this.innerHeaderGroupComponent=n,this.agLabel.appendChild(n.getGui())):this.destroyBean(n))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:i},beans:n}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const s=l=>{if(eh(l))return;const c=!i.isExpanded();n.colGroupSvc.setColumnGroupOpened(i.getProvidedColumnGroup(),c,"uiColumnExpanded")};this.addTouchAndClickListeners(n,t,s),this.addTouchAndClickListeners(n,e,s);const o=l=>{$m(l)};this.addManagedElementListeners(t,{dblclick:o}),this.addManagedElementListeners(e,{dblclick:o}),this.addManagedElementListeners(this.getGui(),{dblclick:s}),this.updateIconVisibility();const r=i.getProvidedColumnGroup(),a=this.updateIconVisibility.bind(this);this.addManagedListeners(r,{expandedChanged:a,expandableChanged:a})}addTouchAndClickListeners(e,t,i){e.touchSvc?.setupForHeaderGroupElement(this,t,i),this.addManagedElementListeners(t,{click:i})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:i}}=this;if(i.isExpandable()){const n=i.isExpanded();pn(e,n),pn(t,!n)}else pn(e,!1),pn(t,!1)}addInIcon(e,t){const i=kl(e,this.beans,null);i&&t.appendChild(i)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:t,agClosed:i}=this;pn(t,!1),pn(i,!1)}}setupLabel(e){const{displayName:t,columnGroup:i}=e,n=this.innerHeaderGroupComponent||this.isLoadingInnerComponent;We(t)&&!n&&(this.agLabel.textContent=yC(t)),this.toggleCss("ag-sticky-label",!i.getColGroupDef()?.suppressStickyLabel)}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},IQe={moduleName:"ColumnHeaderComp",version:Ge,userComponents:{agColumnHeader:AQe},icons:{menu:"menu",menuAlt:"menu-alt"}},RQe={moduleName:"ColumnGroupHeaderComp",version:Ge,userComponents:{agColumnGroupHeader:TQe},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},EQe=class extends we{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&Ee(92)}createTask(e,t,i,n,s=!1){this.verify();let o=i;n&&this.batchFrameworkComps&&(o="f1");const r={task:e,index:t,createOrder:++this.taskCount,deferred:s};this.addTaskToList(this[o],r),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((i,n)=>i.deferred!==n.deferred?i.deferred?-1:1:i.index!==n.index?t*(n.index-i.index):n.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:i,f1:n,destroyTasks:s,beans:o}=this,{ctrlsSvc:r,frameworkOverrides:a}=o,l=t.list,c=i.list,u=n.list,d=Date.now();let p=0;const f=e<=0,m=r.getScrollFeature();for(;f||p<e;){if(!m.scrollGridIfNeeded()){let b;if(l.length)this.sortTaskList(t),b=l.pop().task;else if(c.length)this.sortTaskList(i),b=c.pop().task;else if(u.length)a.wrapOutgoing(()=>{for(;(f||p<e)&&!m.scrollGridIfNeeded();){if(u.length)this.sortTaskList(n),b=u.pop().task,b();else break;p=Date.now()-d}}),b=()=>{};else if(s.length)b=s.pop();else break;b()}p=Date.now()-d}l.length||c.length||u.length||s.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);_h(this.beans,e)}isQueueEmpty(){return!this.ticking}},LQe={moduleName:"AnimationFrame",version:Ge,beans:[EQe]},PQe=class extends we{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return kl(e,this.beans,t?.column)}},NQe=class extends we{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!wm())return;const t=(i,n,s)=>{const{rowCtrl:o,cellCtrl:r}=e.getControlsForEventTarget(s?.target??null);r?.column&&r.dispatchCellContextMenuEvent(s??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,s,o,r)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!wm()||tle("dblclick"))return!1;const n=Date.now(),s=n-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=n,s})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){const{gos:t,sortSvc:i,menuSvc:n}=this.beans;if(t.get("suppressTouch"))return;const{params:s,eMenu:o,eFilterButton:r}=e,a=new jf(e.getGui(),!0);e.addDestroyFunc(()=>a.destroy());const l=e.shouldSuppressMenuHide(),c=l&&We(o)&&s.enableMenu;let u=a;if(c&&(u=new jf(o,!0),e.addDestroyFunc(()=>u.destroy())),s.enableMenu||n?.isHeaderContextMenuEnabled(s.column)){const d=c?"tap":"longTap",p=f=>s.showColumnMenuAfterMouseClick(f.touchStart);e.addManagedListeners(u,{[d]:p}),e.addManagedListeners(a,{longTap:p})}if(s.enableSorting){const d=p=>{const f=p.touchStart.target;l&&(o?.contains(f)||r?.contains(f))||i?.progressSort(s.column,!1,"uiColumnSorted")};e.addManagedListeners(a,{tap:d})}if(s.enableFilterButton&&r){const d=new jf(r,!0);e.addManagedListeners(d,{tap:()=>s.showFilter(r)}),e.addDestroyFunc(()=>d.destroy())}}setupForHeaderGroup(e){const t=e.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){const i=new jf(t.eGridHeader,!0),n=s=>t.showColumnMenuAfterMouseClick(s.touchStart);e.addManagedListeners(i,{longTap:n}),e.addDestroyFunc(()=>i.destroy())}}setupForHeaderGroupElement(e,t,i){const n=new jf(t,!0);e.addManagedListeners(n,{tap:i}),e.addDestroyFunc(()=>n.destroy())}mockContextMenu(e,t,i){if(!wm())return;const n=new jf(t),s=o=>{k0(this.beans,o.touchEvent)&&i(void 0,o.touchStart,o.touchEvent)};e.addManagedListeners(n,{longTap:s}),e.addDestroyFunc(()=>n.destroy())}},OQe={moduleName:"Touch",version:Ge,beans:[NQe]},FQe=class extends we{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===pe.UP,n=e===pe.DOWN,s=e===pe.LEFT;let o,r;const{pageBounds:a,gos:l,visibleCols:c,pinnedRowModel:u}=this.beans,{rowPinned:d}=t;if(i||n)d&&u?i?r=0:r=d==="top"?u.getPinnedTopRowCount()-1:u.getPinnedBottomRowCount()-1:r=i?a.getFirstRow():a.getLastRow(),o=t.column;else{const p=l.get("enableRtl");r=t.rowIndex,o=(s!==p?c.allCols:[...c.allCols].reverse()).find(m=>this.isCellGoodToFocusOn({rowIndex:r,rowPinned:null,column:m}))}return o?{rowIndex:r,rowPinned:d,column:o}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,n=!1;for(;!n;){switch(e){case pe.UP:i=this.getCellAbove(i);break;case pe.DOWN:i=this.getCellBelow(i);break;case pe.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case pe.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,Ee(8,{key:e});break}i?n=this.isCellGoodToFocusOn(i):n=!0}return i}isCellGoodToFocusOn(e){const t=e.column;let i;const{pinnedRowModel:n,rowModel:s}=this.beans;switch(e.rowPinned){case"top":i=n?.getPinnedTopRow(e.rowIndex);break;case"bottom":i=n?.getPinnedBottomRow(e.rowIndex);break;default:i=s.getRow(e.rowIndex);break}return i?!this.isSuppressNavigable(t,i):!1}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){if(!e)return null;const t=this.rowSpanSvc?.getCellEnd(e)??e,i=Bq(this.beans,t,!0);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}getCellAbove(e){if(!e)return null;const t=this.rowSpanSvc?.getCellStart(e)??e,i=_R(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},!0);return i?{rowIndex:i.rowIndex,column:e.column,rowPinned:i.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:i}=this.beans,n=t.allCols;let s=e.rowIndex,o=e.rowPinned,r=t.getColAfter(e.column);if(!r){r=n[0];const a=Bq(this.beans,e,!0);if(tn(a)||!a.rowPinned&&!(i?.isRowInPage(a.rowIndex)??!0))return null;s=a?a.rowIndex:null,o=a?a.rowPinned:null}return{rowIndex:s,column:r,rowPinned:o}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:i,pagination:n}=t,s=i.allCols;let o=e.rowIndex,r=e.rowPinned,a=i.getColBefore(e.column);if(!a){a=Ni(s);const l=_R(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(tn(l)||!l.rowPinned&&!(n?.isRowInPage(l.rowIndex)??!0))return null;o=l?l.rowIndex:null,r=l?l.rowPinned:null}return{rowIndex:o,column:a,rowPinned:r}}isSuppressNavigable(e,t){const{suppressNavigable:i}=e.colDef;if(typeof i=="boolean")return i;if(typeof i=="function"){const n=e.createColumnFunctionCallbackParams(t);return i(n)}return!1}};function BQe(e){return e.focusSvc.getFocusedCell()}function _Qe(e){return e.focusSvc.clearFocusedCell()}function zQe(e,t,i,n){e.focusSvc.setFocusedCell({rowIndex:t,column:i,rowPinned:n,forceBrowserFocus:!0})}function GQe(e,t){return e.navigation?.tabToNextCell(!1,t)??!1}function VQe(e,t){return e.navigation?.tabToNextCell(!0,t)??!1}function HQe(e,t,i=!1){const n=e.headerNavigation?.getHeaderPositionForColumn(t,i);n&&e.focusSvc.focusHeaderPosition({headerPosition:n})}var WQe=class extends we{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new Zce,this.rowValidations=new qce,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;const i=this.getEditRow(e);t?i.delete(t):i.clear(),i.size===0&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||this.edits.size===0)return;const i=e&&this.edits.get(e);if(i)return i;if(t.checkSiblings){const n=e.pinnedSibling;if(n)return this.getEditRow(n)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(!e||this.edits.size===0)return;const i=this.getEditRow(e),n=e.pinnedSibling,s=t&&n&&this.getEditRow(n);if(!i&&!s)return;const o=Object.assign({},e.data),r=(a,l)=>a.forEach(({pendingValue:c},u)=>{c!==zl&&(l[u.getColId()]=c)});return i&&r(i,o),s&&r(s,o),o}getEdit(e,t){const i=this._getEdit(e);return t&&i?{...i}:i}_getEdit(e){if(!this.suspendEdits&&this.edits.size!==0)return e.rowNode&&e.column&&this.getEditRow(e.rowNode)?.get(e.column)}getEditMap(e=!0){if(this.suspendEdits||this.edits.size===0)return new Map;if(!e)return this.edits;const t=new Map;return this.edits.forEach((i,n)=>{const s=new Map;i.forEach(({editorState:o,...r},a)=>s.set(a,{...r})),t.set(n,s)}),t}setEditMap(e){this.edits.clear(),e.forEach((t,i)=>{const n=new Map;t.forEach((s,o)=>n.set(o,{...s})),this.edits.set(i,n)})}setEdit(e,t){(this.edits.size===0||!this.edits.has(e.rowNode))&&this.edits.set(e.rowNode,new Map);const i=this._getEdit(e),n=Object.assign({editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0},...i,...t});return this.getEditRow(e.rowNode).set(e.column,n),n}clearEditValue(e){const{rowNode:t,column:i}=e;if(t)if(i){const n=this._getEdit(e);n&&(n.editorValue=void 0,n.pendingValue=n.sourceValue,n.state="changed")}else this.getEditRow(t)?.forEach(n=>{n.editorValue=void 0,n.pendingValue=n.sourceValue,n.state="changed"})}getState(e){if(!this.suspendEdits)return this.getEdit(e)?.state}getEditPositions(e){if(this.suspendEdits||(e??this.edits).size===0)return[];const t=[];return(e??this.edits).forEach((i,n)=>{for(const s of i.keys()){const{editorState:o,...r}=i.get(s);t.push({rowNode:n,column:s,...r})}}),t}hasRowEdits(e,t){return this.suspendEdits||this.edits.size===0?!1:!!this.getEditRow(e,t)}hasEdits(e={},t={}){if(this.suspendEdits||this.edits.size===0)return!1;const{rowNode:i,column:n}=e,{withOpenEditor:s}=t;if(i){const o=this.getEditRow(i,t);return o?n?s?this.getEdit(e)?.state==="editing":o.has(n)??!1:o.size!==0?s?Array.from(o.values()).some(({state:r})=>r==="editing"):!0:!1:!1}return s?this.getEditPositions().some(({state:o})=>o==="editing"):this.edits.size>0}start(e){const t=this.getEditRow(e.rowNode)??new Map,{rowNode:i,column:n}=e;n&&!t.has(n)&&t.set(n,{editorValue:void 0,pendingValue:zl,sourceValue:this.beans.valueSvc.getValue(n,i,!1,"api"),state:"editing",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}}),this.edits.set(i,t)}stop(e){this.hasEdits(e)&&(e?this.removeEdits(e):this.clear())}clear(){for(const e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},Zce=class{constructor(){this.cellValidations=new Map}getCellValidation(e){const{rowNode:t,column:i}=e||{};return this.cellValidations?.get(t)?.get(i)}hasCellValidation(e){return!e?.rowNode||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){const{rowNode:i,column:n}=e;this.cellValidations.has(i)||this.cellValidations.set(i,new Map),this.cellValidations.get(i).set(n,t)}clearCellValidation(e){const{rowNode:t,column:i}=e;this.cellValidations.get(t)?.delete(i)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},qce=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return e?.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function Hj(e,t={}){const{rowIndex:i,rowId:n,rowCtrl:s,rowPinned:o}=t;if(s)return s;const{rowModel:r,rowRenderer:a}=e;let{rowNode:l}=t;return l||(n?l=pZe(e,n,o):i!=null&&(l=r.getRow(i))),a.getRowCtrls(l?[l]:[])?.[0]}function qi(e,t={}){const{cellCtrl:i,colId:n,columnId:s,column:o}=t;if(i)return i;const r=e.colModel.getCol(n??s??Tz(o)),a=t.rowCtrl??Hj(e,t),l=a?.getCellCtrl(r)??void 0;if(l)return l;const c=t.rowNode??a?.rowNode;if(c)return e.rowRenderer.getCellCtrls([c],[r])?.[0]}function Qq(e){const{editSvc:t}=e;t?.isBatchEditing()?Fb(e):t?.stopEditing(void 0,{source:"api"})}function jQe(e,t,i){const{gos:n,popupSvc:s}=t;if(!n.get("stopEditingWhenCellsLoseFocus"))return;const o=r=>{const a=r.relatedTarget;if(pz(a)===null){Qq(t);return}let l=i.some(c=>c.contains(a))&&n.isElementInThisInstance(a);l||(l=!!s&&(s.getActivePopups().some(c=>c.contains(a))||s.isElementWithinCustomPopup(a))),l||Qq(t)};for(const r of i)e.addManagedElementListeners(r,{focusout:o})}function Tz(e){if(e)return typeof e=="string"?e:e.getColId()}var zl=Symbol("unedited");function Qce(e,t={}){const i=[],n=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns);for(const s of n){const o=s.comp?.getCellEditor();o&&i.push({ctrl:s,editor:R0(o)})}return i}var UQe=(e,t={})=>Qce(e,t).map(i=>i.editor);function $Qe(e,t,i,n,s,o){t.length===0&&i?.rowNode&&i?.column&&yS(e,i,{key:n,event:s,cellStartedEdit:o});const{valueSvc:r,editSvc:a,editModelSvc:l}=e,{rowNode:c,column:u}=i??{};for(const d of t){const{rowNode:p,column:f}=d,m=qi(e,d);if(!m){if(p&&f){const b=r.getValue(f,p,void 0,"api"),w=(i?.rowNode===p&&i?.column===f&&n||void 0)??a?.getCellDataValue(d,!1)??r.getValueForDisplay(f,p)?.value??b??zl;l?.setEdit(d,{pendingValue:w,sourceValue:b,state:"editing"})}continue}const v=o&&c===m.rowNode&&m.column===u;yS(e,{rowNode:c,column:m.column},{key:v?n:null,event:v?s:null,cellStartedEdit:v&&o})}}function Gd({pendingValue:e,sourceValue:t}){return e===zl&&(e=t),e!==t}function yS(e,t,i){const n=e.gos.get("enableGroupEdit"),{key:s,event:o,cellStartedEdit:r,silent:a}=i??{},l=qi(e,t),c=l?.comp?.getCellEditor(),u=eue(e,t,s,r&&!a),d=e.editModelSvc?.getEdit(t);let p=u.value;if(p===void 0&&(p=d?.sourceValue),e.editModelSvc?.setEdit(t,{editorValue:p,state:"editing"}),c){c.refresh?.(u);return}const f=t.column.getColDef(),m=zle(e.userCompFactory,f,u),v=m?.popupFromSelector!=null?m.popupFromSelector:!!f.cellEditorPopup,b=m?.popupPositionFromSelector!=null?m.popupPositionFromSelector:f.cellEditorPopupPosition;if(tue(m.params,o),l){l.editCompDetails=m,l.onEditorAttachedFuncs.push(()=>l.rangeFeature?.unsetComp()),l.comp?.setEditDetails(m,v,b,e.gos.get("reactiveCustomComponents")),l?.rowCtrl?.refreshRow({suppressFlash:!0});const C=e.editModelSvc?.getEdit(t,!0);!a&&!C?.editorState?.cellStartedEditing&&(e.editSvc?.dispatchCellEvent(t,o,"cellEditingStarted",n?{value:p}:{}),e.editModelSvc?.setEdit(t,{editorState:{cellStartedEditing:!0}}))}}function Jce(e,t,i){const n={editorValueExists:!1};if(Wj(e)&&(t.getValidationErrors?.()?.length??0)>0||i?.isCancelling)return n;if(i?.isStopping){const o=t?.isCancelAfterEnd?.();if(o)return{...n,isCancelAfterEnd:o}}return{editorValue:t.getValue(),editorValueExists:!0}}function eue(e,t,i,n){const{valueSvc:s,gos:o,editSvc:r}=e,a=e.gos.get("enableGroupEdit"),l=qi(e,t),c=t.rowNode?.rowIndex??void 0,u=r?.isBatchEditing(),d=e.colModel.getCol(t.column.getId()),{rowNode:p,column:f}=t,m=l.comp?.getCellEditor(),v=r?.getCellDataValue(t,!1),b=v===void 0?m?Jce(e,m)?.editorValue:void 0:v,C=b===zl?s.getValueForDisplay(d,p)?.value:b;return ct(o,{value:a?b:C,eventKey:i??null,column:f,colDef:f.getColDef(),rowIndex:c,node:p,data:p.data,cellStartedEdit:n??!1,onKeyDown:l?.onKeyDown.bind(l),stopEditing:x=>{r.stopEditing(t,{source:u?"ui":"api",suppressNavigateAfterEdit:x}),zR(e,t)},eGridCell:l?.eGui,parseValue:x=>s.parseValue(d,p,x,l?.value),formatValue:l?.formatValue.bind(l),validate:()=>{r?.validateEdit()}})}function Iz(e,t){const{editModelSvc:i}=e;i?.getEditMap().forEach((n,s)=>{n.forEach((o,r)=>{!t&&(o.state==="editing"||o.pendingValue===zl)||!Gd(o)&&(o.state!=="editing"||t)&&i?.removeEdits({rowNode:s,column:r})})})}function KQe(e,t){const i=t.comp?.getCellEditor();if(!i?.refresh)return;const{eventKey:n,cellStartedEdit:s}=t.editCompDetails.params,{column:o}=t,r=eue(e,t,n,s),a=o.getColDef(),l=zle(e.userCompFactory,a,r);i.refresh(tue(l.params,n))}function tue(e,t){return t instanceof KeyboardEvent&&e.column.getColDef().cellEditor==="agNumberCellEditor"?e.suppressPreventDefault=["-","+",".","e"].includes(t?.key??"")||e.suppressPreventDefault:t?.preventDefault?.(),e}function lm(e,t){for(const i of e.editModelSvc?.getEditPositions()??[]){const n=qi(e,i);if(!n)continue;const s=n.comp?.getCellEditor();if(!s)continue;const{editorValue:o,editorValueExists:r,isCancelAfterEnd:a}=Jce(e,s,t);a&&e.editModelSvc?.setEdit(i,{editorState:{isCancelAfterEnd:a}}),fI(e,i,o,void 0,!r,t)}}function fI(e,t,i,n,s,o){const{editModelSvc:r,valueSvc:a}=e;if(!r)return;const{rowNode:l,column:c}=t;if(!(l&&c))return;let u=r.getEdit(t,!0);u?.sourceValue||(u=r.setEdit(t,{sourceValue:a.getValue(c,l,void 0,"api"),pendingValue:u?u.editorValue:zl})),r.setEdit(t,{editorValue:s?u.sourceValue:i}),o?.persist&&YQe(e,t)}function YQe(e,t){const{editModelSvc:i}=e,n=i?.getEdit(t,!0);i?.setEdit(t,{pendingValue:n?.editorValue})}function Fb(e,t,i){t||(t=e.editModelSvc?.getEditPositions());for(const n of t??[])zR(e,n,i)}function zR(e,t,i){const n=e.gos.get("enableGroupEdit"),{editModelSvc:s}=e,o=qi(e,t),r=s?.getEdit(t,!0);if(!o){r&&s?.setEdit(t,{state:"changed"});return}const{comp:a}=o;if(a&&!a.getCellEditor()){if(o?.refreshCell(),r){s?.setEdit(t,{state:"changed"});const c=n?Jq(i,r):{valueChanged:!1,newValue:void 0,oldValue:r.sourceValue};e7(e,t,c,i)}return}if(Wj(e)){const c=a?.getCellEditor()?.getValidationErrors?.(),u=s?.getCellValidationModel();c?.length?u?.setCellValidation(t,{errorMessages:c}):u?.clearCellValidation(t)}s?.setEdit(t,{state:"changed"}),a?.setEditDetails(),a?.refreshEditStyles(!1,!1),o?.refreshCell({force:!0,suppressFlash:!0});const l=s?.getEdit(t);if(l&&l.state==="changed"){const c=n?Jq(i,l):{valueChanged:Gd(l)&&!i?.cancel,newValue:i?.cancel||l.editorState.isCancelAfterEnd?void 0:l?.editorValue??r?.pendingValue,oldValue:l?.sourceValue};e7(e,t,c,i)}}function Jq(e,t){return e?.cancel?{valueChanged:!1,oldValue:t.sourceValue,newValue:void 0,value:t.sourceValue}:{valueChanged:!1,oldValue:t.sourceValue,newValue:t.pendingValue,value:t.sourceValue}}function e7(e,t,i,{silent:n,event:s}={}){const{editSvc:o,editModelSvc:r}=e,a=r?.getEdit(t),{editorState:l}=a||{},{isCancelBeforeStart:c}=l||{};!n&&!c&&(o?.dispatchCellEvent(t,s,"cellEditingStopped",i),r?.setEdit(t,{editorState:{cellStoppedEditing:!0}}))}function Wj(e){const{gos:t,colModel:i}=e,n=!!t.get("getFullRowEditValidationErrors"),s=i.getColumnDefs()?.filter(r=>r.editable).some(({cellEditorParams:r})=>{const{minLength:a,maxLength:l,getValidationErrors:c,min:u,max:d}=r||{};return a!==void 0||l!==void 0||c!==void 0||u!==void 0||d!==void 0}),o=e.gridApi.getCellEditorInstances().some(r=>r.getValidationElement||r.getValidationErrors);return s||n||o}function Km(e,t){if(!(t||Wj(e)))return;const i=Qce(e),n=new Zce,{ariaAnnounce:s,localeSvc:o,editModelSvc:r,gos:a}=e,l=a.get("editType")==="fullRow",u=nle(o)("ariaValidationErrorPrefix","Cell Editor Validation");for(const p of i){const{ctrl:f,editor:m}=p,{rowNode:v,column:b}=f,C=m.getValidationErrors?.()??[],x=m.getValidationElement?.(!1)||!m.isPopup?.()&&f.eGui;if(x){const w=C!=null&&C.length>0,M=w?C.join(". "):"";pKe(x,w),w&&s.announceValue(`${u} ${C}`,"editorValidation"),x instanceof HTMLInputElement?x.setCustomValidity(M):x.classList.toggle("invalid",w)}C?.length>0&&n.setCellValidation({rowNode:v,column:b},{errorMessages:C})}lm(e,{persist:!1}),r?.setCellValidationModel(n);const d=new Set;for(const{ctrl:p}of i)d.add(p.rowCtrl);if(l){const p=XQe(e);r?.setRowValidationModel(p)}for(const p of d.values()){p.rowEditStyleFeature?.applyRowStyles();for(const f of p.getAllCellCtrls())f.tooltipFeature?.refreshTooltip(!0),f.editorTooltipFeature?.refreshTooltip(!0),f.editStyleFeature?.applyCellStyles?.()}}var XQe=e=>{const t=new qce,i=e.gos.get("getFullRowEditValidationErrors"),n=e.editModelSvc?.getEditMap();if(!n)return t;for(const s of n.keys()){const o=n.get(s);if(!o)continue;const r=[],{rowIndex:a,rowPinned:l}=s;for(const u of o.keys()){const d=o.get(u);if(!d)continue;const{editorValue:p,pendingValue:f,sourceValue:m}=d,v=p??(f===zl?void 0:f)??m;r.push({column:u,colId:u.getColId(),rowIndex:a,rowPinned:l,oldValue:m,newValue:v})}const c=i?.({editorsState:r})??[];c.length>0&&t.setRowValidation({rowNode:s},{errorMessages:c})}return t};function ZQe(e){Km(e,!0);const t=e.editModelSvc?.getCellValidationModel().getCellValidationMap();if(!t)return null;const i=[];return t.forEach((n,s)=>{n.forEach(({errorMessages:o},r)=>{i.push({column:r,rowIndex:s.rowIndex,rowPinned:s.rowPinned,messages:o??null})})}),i}function qQe(e,t,i,{rowNode:n,column:s},o){return ct(e.gos,{type:i,node:n,data:n.data,value:o,column:s,colDef:s.getColDef(),rowPinned:n.rowPinned,event:t,rowIndex:n.rowIndex})}function QQe(e,t=!1){return e===pe.DELETE?!0:!t&&e===pe.BACKSPACE?Hle():!1}var JQe=class extends we{constructor(e,t,i,n){super(),this.cellCtrl=e,this.rowNode=i,this.rowCtrl=n,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case pe.ENTER:this.onEnterKeyDown(e);break;case pe.F2:this.onF2KeyDown(e);break;case pe.ESCAPE:this.onEscapeKeyDown(e);break;case pe.TAB:this.onTabKeyDown(e);break;case pe.BACKSPACE:case pe.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case pe.DOWN:case pe.UP:case pe.RIGHT:case pe.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){const{cellCtrl:i,beans:n}=this;if(!n.editSvc?.isEditing(i,{withOpenEditor:!0})){if(e.shiftKey&&i.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const s=i.getFocusedCellPosition();n.navigation?.navigateToNextCell(e,t,s,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:i}=this.beans;if(!t)return;const n=t.extendLatestRangeInDirection(e);n&&(e.key===pe.LEFT||e.key===pe.RIGHT?i?.ensureColumnVisible(n.column):i?.ensureRowVisible(n.rowIndex))}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:n,rowNode:s}=this,{gos:o,rangeSvc:r,eventSvc:a,editSvc:l}=n;if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),QQe(e,o.get("enableCellEditingOnBackspace"))&&!l?.isEditing(i,{withOpenEditor:!0})){if(r&&hg(o))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const{column:c}=i,u=this.beans.valueSvc.getDeleteValue(c,s);s.setDataValue(c,u,"cellClear")}}else l?.isEditing(i,{withOpenEditor:!0})||n.editSvc?.startEditing(i,{startedEdit:!0,event:t});a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){const{cellCtrl:t,beans:i}=this,{editSvc:n,navigation:s}=i,o=n?.isEditing(t,{withOpenEditor:!0}),r=t.rowNode,a=n?.isRowEditing(r,{withOpenEditor:!0}),l=c=>{n?.startEditing(c,{startedEdit:!0,event:e,source:"edit"})&&e.preventDefault()};if(o||a){if(this.isCtrlEnter(e)){n?.applyBulkEdit(t,i?.rangeSvc?.getCellRanges()||[]);return}if(Km(i),n?.checkNavWithValidation(void 0,e)==="block-stop")return;n?.isEditing(t,{withOpenEditor:!0})?n?.stopEditing(t,{event:e,source:"edit"}):a&&!t.isCellEditable()?n?.stopEditing({rowNode:r},{event:e,source:"edit"}):l(t)}else if(i.gos.get("enterNavigatesVertically")){const c=e.shiftKey?pe.UP:pe.DOWN;s?.navigateToNextCell(null,c,t.cellPosition,!1)}else{if(n?.hasValidationErrors())return;n?.hasValidationErrors(t)&&n.revertSingleCellEdit(t,!0),l(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===pe.ENTER}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:i}}=this;i?.isEditing()&&(Km(this.beans),i?.checkNavWithValidation(void 0,e)==="block-stop")||i?.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:i}}=this;i?.checkNavWithValidation(t,e)==="block-stop"&&i.revertSingleCellEdit(t),i?.stopEditing(t,{event:e,cancel:!0})}processCharacter(e){const i=e.target!==this.eGui,{beans:{editSvc:n},cellCtrl:s}=this;if(i||n?.isEditing(s,{withOpenEditor:!0}))return;if(e.key===pe.SPACE)this.onSpaceKeyDown(e);else if(n?.isCellEditable(s,"ui")){if(n?.hasValidationErrors()&&!n?.hasValidationErrors(s))return;n?.startEditing(s,{startedEdit:!0,event:e,source:"api"}),!s.editCompDetails?.params?.suppressPreventDefault&&e.preventDefault()}}onSpaceKeyDown(e){const{gos:t,editSvc:i}=this.beans,{rowNode:n}=this.cellCtrl;!i?.isEditing(this.cellCtrl,{withOpenEditor:!0})&&Cm(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,n,"spaceKey"),e.preventDefault()}},eJe=class extends we{constructor(e,t,i){super(),this.cellCtrl=e,this.column=i,this.beans=t}onMouseEvent(e,t){if(!eh(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:i,editSvc:n,editModelSvc:s,frameworkOverrides:o,gos:r}=this.beans,a=e.ctrlKey||e.metaKey,{cellCtrl:l}=this,{column:c,cellPosition:u,rowNode:d}=l,p=uI(r,c,d,e);i&&a&&!p&&i.getCellRangeCount(u)>1&&i.intersectLastRange(!0);const f=l.createEvent(e,"cellClicked");f.isEventHandlingSuppressed=p,t.dispatchEvent(f);const m=c.getColDef();if(m.onCellClicked&&window.setTimeout(()=>{o.wrapOutgoing(()=>{m.onCellClicked(f)})},0),!p&&s?.getState(l)!=="editing"){const v=n?.isEditing(),b=s?.getCellValidationModel().getCellValidationMap().size??0,C=s?.getRowValidationModel().getRowValidationMap().size??0;if(v&&(b>0||C>0))return;n?.shouldStartEditing(l,e)?n?.startEditing(l,{event:e}):n?.shouldStopEditing(l,e)&&(this.beans.gos.get("editType")==="fullRow"?n?.stopEditing(l,{event:e,source:"edit"}):n?.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:n}=this,{eventSvc:s,frameworkOverrides:o,editSvc:r,editModelSvc:a,gos:l}=i,c=uI(l,n.column,n.rowNode,e),u=t.getColDef(),d=n.createEvent(e,"cellDoubleClicked");if(d.isEventHandlingSuppressed=c,s.dispatchEvent(d),typeof u.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{u.onCellDoubleClicked(d)})},0),!c&&r?.shouldStartEditing(n,e)&&a?.getState(n)!=="editing"){const p=r?.isEditing(),f=a?.getCellValidationModel().getCellValidationMap().size??0,m=a?.getRowValidationModel().getRowValidationMap().size??0;if(p&&(f>0||m>0))return;r?.startEditing(n,{event:e})}}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:n}=e,s=e.target,{cellCtrl:o,beans:r}=this,{eventSvc:a,rangeSvc:l,rowNumbersSvc:c,focusSvc:u,gos:d,editSvc:p}=r,{column:f,rowNode:m,cellPosition:v}=o,b=uI(d,f,m,e),C=()=>{const T=o.createEvent(e,"cellMouseDown");T.isEventHandlingSuppressed=b,a.dispatchEvent(T)};if(b){C();return}if(this.isRightClickInExistingRange(e))return;const x=l&&!l.isEmpty(),w=this.containsWidget(s),M=Qd(f);if(c&&M&&!c.handleMouseDownOnCell(v,e)){l&&e.preventDefault(),e.stopImmediatePropagation();return}if(!n||!x){const T=p?.isEditing(o),I=d.get("enableCellTextSelection")&&e.defaultPrevented,R=(Kg()||I)&&!T&&!Aw(s)&&!w;o.focusCell(R,e)}if(n&&x&&!u.isCellFocused(v)){e.preventDefault();const T=u.getFocusedCell();if(T){const{column:L,rowIndex:I,rowPinned:R}=T;p?.isEditing(T)&&p?.stopEditing(T),u.setFocusedCell({column:L,rowIndex:I,rowPinned:R,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}if(!w){if(l){M&&e.preventDefault();const T=sq(r,e)&&M;if(n)l.extendLatestRangeToCell(v);else if(!T){const L=t||i;l.setRangeToCell(v,L)}}C()}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.cellPosition),n=sq(this.beans,e);if(i&&n)return!0}return!1}containsWidget(e){return bm(e,"ag-selection-checkbox",3)||bm(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),i?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:i}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),i?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,i=t.contains(e.target),n=t.contains(e.relatedTarget);return i&&n}},tJe=class extends we{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();$g(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,i=e.getColSpan(t),n=[];if(i===1)n.push(e);else{let s=e;const o=e.getPinned();for(let r=0;s&&r<i&&(n.push(s),s=this.beans.visibleCols.getColAfter(s),!(!s||tn(s)||o!==s.getPinned()));r++);}return n}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=Ni(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;const{visibleCols:t}=this.beans,i=t.getColsLeftWidth();if(this.column.getPinned()==="right"){const n=t.bodyWidth;return i+n+(e||0)}return i+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;const i=xm(this.beans)*this.rowSpan;this.eContent.style.height=`${i}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},iJe="ag-cell",nJe="ag-cell-auto-height",sJe="ag-cell-normal-height",oJe="ag-cell-focus",rJe="ag-cell-first-right-pinned",aJe="ag-cell-last-left-pinned",lJe="ag-cell-not-inline-editing",cJe="ag-cell-wrap-text",uJe=0,Bb=class extends we{constructor(e,t,i,n){super(),this.column=e,this.rowNode=t,this.rowCtrl=n,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=i,this.gos=i.gos,this.editSvc=i.editSvc,this.hasEdit=!!i.editSvc;const{colId:s}=e;this.instanceId=s+"-"+uJe++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){const{beans:e}=this;this.positionFeature=new tJe(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this,e),this.editStyleFeature=e.editSvc?.createCellStyleFeature(this,e),this.mouseListener=new eJe(this,e,this.column),this.keyboardListener=new JQe(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature();const{rangeSvc:t}=e;t&&hg(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(e,this)),Qd(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(e,this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,e),Km(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,i,n,s,o,r){if(this.comp=e,this.eGui=t,this.printLayout=s,r??(r=this),this.addDomData(r),this.addFeatures(),r.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n,r),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.editStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),this.rowResizeFeature?.refreshRowResizer(),o&&this.isCellEditable()||this.hasEdit&&this.editSvc?.isEditing(this,{withOpenEditor:!0})?this.editSvc?.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0}):this.showValue(!1,!0),this.onCompAttachedFuncs.length){for(const a of this.onCompAttachedFuncs)a();this.onCompAttachedFuncs=[]}}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){const{beans:e,column:t}=this,{userCompFactory:i,ctrlsSvc:n,eventSvc:s}=e,o=t.getColDef(),r=this.createCellRendererParams();r.deferRender=!0;const a=uq(i,o,r);if(n.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let l;const c=new qt(d=>{l=d}),[u]=this.addManagedListeners(s,{bodyScrollEnd:()=>{l(),u()}});return{loadingComp:a,onReady:c}}return{loadingComp:a,onReady:qt.resolve()}}showValue(e,t){const{beans:i,column:n,rowNode:s,rangeFeature:o}=this,{userCompFactory:r}=i;let a=this.getValueToDisplay(),l;const c=s.stub&&s.groupData?.[n.getId()]==null,u=n.getColDef();if(c||this.isCellRenderer()){const d=this.createCellRendererParams();!c||Qd(n)?l=cq(r,u,d):l=uq(r,u,d)}if(!l&&!c&&i.findSvc?.isMatch(s,n)){const d=this.createCellRendererParams();l=cq(r,{...n.getColDef(),cellRenderer:"agFindCellRenderer"},d)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(s,{checkSiblings:!0})){const d=this.editSvc.prepDetailsDuringBatch(this,{compDetails:l,valueToDisplay:a});d&&(d.compDetails?l=d.compDetails:d.valueToDisplay&&(a=d.valueToDisplay))}this.comp.setRenderDetails(l,a,e),this.customRowDragComp?.refreshVisibility(),!t&&o&&_h(i,()=>o?.refreshHandle()),this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){const e="ag-cell-value",t=this.column.getColDef().cellRenderer==="agCheckboxCellRenderer";let i="";return t&&(i=" ag-allow-overflow"),`${e}${i}`}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&gM(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:i}=this.beans.gridOptions,n=AR(t),s=zh(this.column);return i==="custom"&&n!=="selectionColumn"&&s?!1:e.checkboxSelection||s&&typeof t=="object"&&Rb(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),n=this.includeDndSource!=this.isIncludeControl(e.dndSource),s=this.isAutoHeight!=this.column.isAutoHeight();return t||i||n||s}onPopupEditorClosed(){const{editSvc:e}=this.beans;e?.isEditing(this,{withOpenEditor:!0})&&e?.stopEditing(this,{source:e?.isBatchEditing()?"ui":"api"})}stopEditing(e=!1){const{editSvc:t}=this.beans;return t?.stopEditing(this,{cancel:e,source:t?.isBatchEditing()?"ui":"api"})??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:i,rowNode:n,comp:s,eGui:o,beans:{valueSvc:r,gos:a,editSvc:l}}=this;return ct(a,{value:e,valueFormatted:t,getValue:()=>r.getValueForDisplay(i,n).value,setValue:u=>l?.setDataValue({rowNode:n,column:i},u)||n.setDataValue(i,u),formatValue:this.formatValue.bind(this),data:n.data,node:n,pinned:i.getPinned(),colDef:i.getColDef(),column:i,refreshCell:this.refreshCell.bind(this),eGridCell:o,eParentOfValue:s.getParentOfValue(),registerRowDragger:(u,d,p,f)=>this.registerRowDragger(u,d,f),setTooltip:(u,d)=>{a.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(u,d),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){if(this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e),this.hasEdit&&this.editCompDetails){const{editSvc:t,comp:i}=this;!i?.getCellEditor()&&t.isEditing(this,{withOpenEditor:!0})&&t.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:e,suppressFlash:t,newData:i}={}){const{editStyleFeature:n,customStyleFeature:s,rowCtrl:{rowEditStyleFeature:o},beans:{cellFlashSvc:r,filterManager:a},column:l,comp:c,suppressRefreshCell:u,tooltipFeature:d}=this;if(u)return;const{field:p,valueGetter:f,showRowGroup:m,enableCellChangeFlash:v}=l.getColDef(),b=p==null&&f==null&&m==null,C=e||b||i,x=!!c,w=this.updateAndFormatValue(x),M=C||w;if(x){if(M){this.showValue(!!i,!1);const T=a?.isSuppressFlashingCellsBecauseFiltering();!t&&!T&&v&&r?.flashCell(this),n?.applyCellStyles?.(),s?.applyUserStyles(),s?.applyClassesFromColDef(),o?.applyRowStyles()}d?.refreshTooltip(),s?.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted,{value:n,valueFormatted:s}=this.beans.valueSvc.getValueForDisplay(this.column,this.rowNode,!0);return this.value=n,this.valueFormatted=s,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i:!0}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}addDomData(e){const t=this.eGui;jm(this.beans.gos,t,FR,this),e.addDestroyFunc(()=>jm(this.beans.gos,t,FR,null))}createEvent(e,t){const{rowNode:i,column:n,value:s,beans:o}=this;return qQe(o,e,t,{rowNode:i,column:n},s)}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:i}=this;xce(e,t,i.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);Kae(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){const i=this.editSvc?.allowedFocusTargetOnValidation(this);i&&i!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){const{beans:{editSvc:t,focusSvc:i},comp:n}=this;if(!n||t?.isEditing(this)||!this.isCellFocused()||!i.shouldTakeFocus())return;const s=()=>{if(!this.isAlive())return;const o=n.getFocusableElement();this.isCellFocused()&&o.focus({preventScroll:!0})};if(e){setTimeout(s,0);return}s()}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),this.rangeFeature?.onCellSelectionChanged(),this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(Qd(this.column)&&(e=!0),Ca(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss(rJe,e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss(aJe,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){const{beans:t}=this;if(tP(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}const i=this.isCellFocused(),n=t.editSvc?.isEditing(this)??!1;if(this.comp.toggleCss(oJe,i),i&&e?.forceBrowserFocus){let s=this.comp.getFocusableElement();if(n){const o=Lb(s,null,!0);o.length&&(s=o[0])}s.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}i&&e&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:qd(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss(iJe,!0),e.toggleCss(lJe,!0);const t=this.column.isAutoHeight()==!0;e.toggleCss(nJe,t),e.toggleCss(sJe,!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editSvc?.isEditing(this)?this.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.comp.toggleCss(cJe,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu"),{beans:n}=this;n.eventSvc.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout(()=>{n.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(i)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){return this.eGui?.contains(Cn(this.beans))??!1}createSelectionCheckbox(){const e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const n=this.createRowDragComp(e,t,i);n&&(this.customRowDragComp=n,this.addDestroyFunc(()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null}),n.refreshVisibility())}createRowDragComp(e,t,i){const n=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,i);if(n)return this.beans.context.createBean(n),n}cellEditorAttached(){for(const e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function jj(e,t,i,n,s,o){if(i==null&&t==null)return;const r={},a={},l=(c,u)=>{for(const d of c.split(" "))d.trim()!=""&&u(d)};if(i){const c=Object.keys(i);for(let u=0;u<c.length;u++){const d=c[u],p=i[d];let f;typeof p=="string"?f=e?e.evaluate(p,n):!0:typeof p=="function"&&(f=p(n)),l(d,m=>{f?r[m]=!0:a[m]=!0})}}if(t&&o)for(const c of Object.keys(t))l(c,u=>{r[u]||(a[u]=!0)});o&&Object.keys(a).forEach(o),Object.keys(r).forEach(s)}function t7(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var dJe=class extends we{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const i=this.gos,n=r=>{if(typeof r=="string")e.push(r);else if(Array.isArray(r))for(const a of r)e.push(a)},s=i.get("rowClass");s&&n(s);const o=i.getCallback("getRowClass");if(o){const r={data:t.data,node:t,rowIndex:t.rowIndex},a=o(r);n(a)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,i=>{e.push(i)},()=>{})}processRowClassRules(e,t,i){const{gos:n,expressionSvc:s}=this.beans,o=ct(n,{data:e.data,node:e,rowIndex:e.rowIndex});jj(s,void 0,n.get("rowClassRules"),o,t,i)}processStylesFromGridOptions(e){const t=this.gos,i=t.get("rowStyle"),n=t.getCallback("getRowStyle");let s;if(n){const o={data:e.data,node:e,rowIndex:e.rowIndex};s=n(o)}if(s||i)return Object.assign({},i,s)}},hJe=0,GR=class extends we{constructor(e,t,i,n,s){super(),this.rowNode=e,this.useAnimationFrameForCreate=n,this.printLayout=s,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+hJe++,this.rowId=Mw(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=t7(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=t.editSvc?.createRowStyleFeature(this,t),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=Mw(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i,n){const{context:s,focusSvc:o}=this.beans;n=cM(this,s,n);const r={rowComp:e,element:t,containerType:i,compBean:n};this.allRowGuis.push(r),this.updateGui(i,r),this.initialiseRowComp(r);const a=this.rowNode,l=this.rowType==="FullWidthLoading"||a.stub,c=!a.data&&this.beans.rowModel.getType()==="infinite";!l&&!c&&!a.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent();const u=this.fullWidthGui?.element;u&&!this.beans.editSvc?.isEditing(this)&&o.isRowFocused(a.rowIndex,a.rowPinned)&&o.shouldTakeFocus()&&setTimeout(()=>u.focus({preventScroll:!0}),0)}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";for(const i of this.allRowGuis)i.element.style.display=t}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),Cm(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const i=e.rowComp,n=this.getInitialRowClasses(e.containerType);for(const s of n)i.toggleCss(s,!0);this.executeSlideAndFadeAnimations(e),this.rowNode.group&&nz(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),jm(t,e.element,BR,this),e.compBean.addDestroyFunc(()=>jm(t,e.element,BR,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=Mw(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(sz(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(sz(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){const t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const i=this.createBean(t,this.beans.context);this.rowDragComps.push(i),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(n=>n!==i),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(i,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:i,beans:{visibleCols:n}}=this,s=!!e||!n.isPinningLeft(),o=!!t,r=!!i||!n.isPinningRight();return s&&o&&r}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),t=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.colModel.isPivotMode(),s=Cle(this.gos,this.rowNode,n);e?this.rowType="FullWidthLoading":i?this.rowType="FullWidthDetail":t?this.rowType="FullWidth":s?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:i}=this.beans;if(!i?.active||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(i.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){if(!this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode))return new Bb(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){return!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,i=null){const n={list:[],map:{}},s=(c,u,d)=>{d!=null?n.list.splice(d,0,u):n.list.push(u),n.map[c]=u},o=[];for(const c of t){const u=c.getInstanceId();let d=e.map[u];d&&!this.isCorrectCtrlForSpan(d)&&(d.destroy(),d=void 0),d||(d=this.getNewCellCtrl(c)),d&&s(u,d)}for(const c of e.list){const u=c.column.getInstanceId();if(n.map[u]!=null)continue;!this.isCellEligibleToBeRemoved(c,i)?o.push([u,c]):c.destroy()}if(o.length)for(const[c,u]of o){const d=n.list.findIndex(f=>f.column.getLeft()>u.column.getLeft()),p=d===-1?void 0:Math.max(d-1,0);s(c,u,p)}const{focusSvc:r,visibleCols:a}=this.beans,l=r.getFocusedCell();if(l&&l.column.getPinned()==i){const c=l.column.getInstanceId();if(!n.map[c]&&a.allCols.includes(l.column)){const d=this.createFocusedCellCtrl();if(d){const p=n.list.findIndex(m=>m.column.getLeft()>d.column.getLeft()),f=p===-1?void 0:Math.max(p-1,0);s(c,d,f)}}}return n}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,i=e.getFocusedCell();if(!i)return;const n=t?.getCellSpan(i.column,this.rowNode);if(n){if(n.firstNode!==this.rowNode||!n.doesSpanContain(i))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(i.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(const t of this.allRowGuis){const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const n=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const s=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,s,"right")}}isCellEligibleToBeRemoved(e,t){const{column:s}=e;if(s.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;const{visibleCols:o,editSvc:r}=this.beans,a=r?.isEditing(e),l=e.isCellFocused();return a||l?!(o.allCols.indexOf(s)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||wo(this.gos,"print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=We(this.rowNode.oldRowTop),{visibleCols:i}=this.beans,n=i.isPinningLeft(),s=i.isPinningRight();if(t){const{slideInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=n,o.right=s}else{const{fadeInAnimation:o}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){o.fullWidth=!0;return}o.center=!0,o.left=n,o.right=s}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(r,a)=>r?r.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(r.element,a).params):!0,t=e(this.fullWidthGui,null),i=e(this.centerGui,null),n=e(this.leftGui,"left"),s=e(this.rightGui,"right");return t&&i&&n&&s}addListeners(){const{beans:e,gos:t,rowNode:i}=this,{expansionSvc:n,eventSvc:s,context:o,rowSpanSvc:r}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...n?.getRowExpandedListeners(this)??{}}),i.detail&&this.addManagedListeners(i.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(i,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(s,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),r&&this.addManagedListeners(r,{spannedCellsUpdated:({pinned:a})=>{a&&!i.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,o),this.tooltipFeature=this.destroyBean(this.tooltipFeature,o),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,o)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){for(const l of this.allRowGuis)this.addRowDraggerToRow(l);return}this.rowDragComps=this.destroyBeans(this.rowDragComps,o)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(const e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(const t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}for(const i of this.getAllCellCtrls())i.refreshCell(e);for(const i of this.allRowGuis)this.setRowCompRowId(i.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(i.rowComp);this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.rowEditStyleFeature?.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=e?.row===this.rowNode?e.position:"none",i=t==="above",n=t==="inside",s=t==="below",r=this.gos.get("treeData")&&(s||i),a=this.rowNode.uiLevel.toString();for(const l of this.allRowGuis){const c=l.rowComp;c.toggleCss("ag-row-highlight-above",i),c.toggleCss("ag-row-highlight-inside",n),c.toggleCss("ag-row-highlight-below",s),c.toggleCss("ag-row-highlight-indent",r),r?l.element.style.setProperty("--ag-row-highlight-level",a):l.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){const e=this.rowNode.dragging;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:qd(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:i,column:n}=t;if(!(i.element===e.target))return;const r=this.rowNode,{focusSvc:a,navigation:l}=this.beans,c=a.getFocusedCell(),u={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:c?.column??n};l?.navigateToNextCell(e,e.key,u,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||eh(e))return;const t=this.allRowGuis.find(a=>a.element.contains(e.target)),i=t?t.element:null,n=i===e.target,s=Cn(this.beans);let o=!1;i&&s&&(o=i.contains(s)&&s.classList.contains("ag-cell"));let r=null;!n&&!o&&(r=Ly(this.beans,i,!1,e.shiftKey)),(this.isFullWidth()&&n||!r)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const e=this.allRowGuis.find(t=>Fh(t.element))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(const i of this.allRowGuis)Ca(i.element,"tabindex",t)}onFullWidthRowFocused(e){const t=this.rowNode,i=e?this.isFullWidth()&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned:!1;let n;if(this.fullWidthGui)n=this.fullWidthGui.element;else{const o=this.beans.colModel.getCol(e?.column)?.pinned;o?n=o==="right"?this.rightGui?.element:this.leftGui?.element:n=this.centerGui?.element}n&&(n.classList.toggle("ag-full-width-focus",i),i&&e?.forceBrowserFocus&&n.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};for(const n of e.list)n!==t&&(i.list.push(n),i.map[n.column.getInstanceId()]=n);return i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){const{rowNode:i}=this;return ct(this.gos,{type:e,node:i,data:i.data,rowIndex:i.rowIndex,rowPinned:i.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){if(eh(e))return;const t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),i=this.getColumnForFullWidth(t);if(!(!t||!i))return{rowGui:t,column:i}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e?.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=bm(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;const{rangeSvc:t,focusSvc:i}=this.beans;t?.removeAllCellRanges();const n=this.findFullWidthInfoForEvent(e);if(!n)return;const{rowGui:s,column:o}=n,r=s.element,a=e.target,l=this.rowNode;let c=e.defaultPrevented||Kg();r&&r.contains(a)&&Aw(a)&&(c=!1),i.setFocusedCell({rowIndex:l.rowIndex,column:o,rowPinned:l.rowPinned,forceBrowserFocus:c})}isSuppressMouseEvent(e){const{gos:t,rowNode:i}=this;if(this.isFullWidth()){const s=this.findFullWidthRowGui(e.target);return g9e(t,s?.rowComp.getFullWidthCellRendererParams(),i,e)}const n=Oj(t,e.target);return n!=null&&uI(t,n.column,i,e)}onRowClick(e){if(eh(e)||this.lastMouseDownOnDragger)return;const i=this.isSuppressMouseEvent(e),{eventSvc:n,selectionSvc:s}=this.beans,o=this.createRowEventWithSource("rowClicked",e);o.isEventHandlingSuppressed=i,n.dispatchEvent(o),!i&&s?.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){this.rowType==="FullWidthDetail"&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){const{gos:i,rowNode:n}=this,s=ct(i,{fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(r,a,l,c)=>this.addFullWidthRowDragging(r,a,l,c),setTooltip:(r,a)=>{i.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(r,a)}}),o=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return S6e(o,s);case"FullWidthGroup":{const{value:r,valueFormatted:a}=this.beans.valueSvc.getValueForDisplay(void 0,this.rowNode,!0);return s.value=r,s.valueFormatted=a,b6e(o,s)}case"FullWidthLoading":return v6e(o,s);default:return y6e(o,s)}}setupFullWidthRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,i="",n){const{rowDragSvc:s,context:o}=this.beans;if(!s||!this.isFullWidth())return;const r=s.createRowDragComp(()=>i,this.rowNode,void 0,e,t,n);this.createBean(r,o),this.addDestroyFunc(()=>{this.destroyBean(r,o)})}onUiLevelChanged(){const e=t7(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;for(const n of this.allRowGuis)n.rowComp.toggleCss(t,!0),n.rowComp.toggleCss(i,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e){this.firstRowOnPage=e;for(const i of this.allRowGuis)i.rowComp.toggleCss("ag-row-first",e)}if(this.lastRowOnPage!==t){this.lastRowOnPage=t;for(const i of this.allRowGuis)i.rowComp.toggleCss("ag-row-last",t)}}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=[];if(this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),!!e.length)for(const t of e)for(const i of this.allRowGuis)i.rowComp.toggleCss(t,!0)}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!0)},e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,i=>i.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),i=this.isFullWidth(),{rowNode:n,beans:s}=this,o=[];o.push("ag-row"),o.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&o.push("ag-opacity-zero"),o.push(n.rowIndex%2===0?"ag-row-even":"ag-row-odd"),n.isRowPinned()&&(o.push("ag-row-pinned"),s.pinnedRowModel?.isManual()&&o.push("ag-row-pinned-manual")),!n.isRowPinned()&&n.pinnedSibling&&o.push("ag-row-pinned-source"),n.isSelected()&&o.push("ag-row-selected"),n.footer&&o.push("ag-row-footer"),o.push("ag-row-level-"+this.rowLevel),n.stub&&o.push("ag-row-loading"),i&&o.push("ag-full-width-row"),s.expansionSvc?.addExpandedCss(o,n),n.dragging&&o.push("ag-row-dragging");const{rowStyleSvc:r}=s;return r&&(r.processClassesFromGridOptions(o,n),r.preProcessRowClassRules(o,n)),o.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&o.push("ag-row-first"),this.isLastRowOnPage()&&o.push("ag-row-last"),i&&(t==="left"&&o.push("ag-cell-last-left-pinned"),t==="right"&&o.push("ag-cell-first-right-pinned")),o}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,t=>{(t===this.centerGui||t===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:i}=e,{rowNode:n,beans:s,gos:o}=this;i.addManagedListeners(t,{pointerenter:r=>{r.pointerType==="mouse"&&n.dispatchRowEvent("mouseEnter")},pointerleave:r=>{r.pointerType==="mouse"&&n.dispatchRowEvent("mouseLeave")}}),i.addManagedListeners(n,{mouseEnter:()=>{!s.dragSvc?.dragging&&!o.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(i=>i.element);for(const i of t)i.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,n=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),n)}forEachGui(e,t){if(e)t(e);else for(const i of this.allRowGuis)t(i)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),s=mle(this.gos)?dg(this.beans,this.rowNode).height:void 0,o=s?`${Math.min(i,s)-2}px`:void 0;this.forEachGui(e,r=>{r.element.style.height=`${t}px`,o&&r.element.style.setProperty("--ag-line-height",o)})}destroyFirstPass(e=!1){this.active=!1;const{rowNode:t}=this;if(!e&&Ib(this.gos)&&!t.sticky)if(t.rowTop!=null){const s=this.roundRowTopToBounds(t.rowTop);this.setRowTop(s)}else for(const s of this.allRowGuis)s.rowComp.toggleCss("ag-opacity-zero",!0);this.fullWidthGui?.element.contains(Cn(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventSvc.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=t=>{for(const i of t.list)i.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){const e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const i=this.beans.pageBounds.getPixelOffset();return e+i*(t?1:-1)}setRowTop(e){if(!this.printLayout&&We(e)){const t=this.applyPaginationOffset(e),s=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(s)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(t.sticky)i=t.stickyRowTop;else{const n=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,s=this.applyPaginationOffset(n);i=t.isRowPinned()?s:this.beans.rowContainerHeight.getRealPixelPosition(s)}return i+"px"}setRowTopStyle(e){for(const t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)}getCellCtrl(e,t=!1){let i=null;for(const n of this.getAllCellCtrls())n.column==e&&(i=n);if(i!=null||t)return i;for(const n of this.getAllCellCtrls())n?.getColSpanningList().indexOf(e)>=0&&(i=n);return i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){const t=this.rowNode.getRowIndexString();if(t===null)return;const i=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),n=this.rowNode.rowIndex%2===0,s=i+this.rowNode.rowIndex+1;this.forEachGui(e,o=>{o.rowComp.setRowIndex(t),o.rowComp.toggleCss("ag-row-even",n),o.rowComp.toggleCss("ag-row-odd",!n),$ae(o.element,s)})}},pJe=class extends we{constructor(){super(),this.beanName="navigation",this.onPageDown=JZ(this.onPageDown,100),this.onPageUp=JZ(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const i=e.key,n=e.altKey,s=e.ctrlKey||e.metaKey,o=!!this.beans.rangeSvc&&e.shiftKey,r=V9e(this.gos,e);let a=!1;switch(i){case pe.PAGE_HOME:case pe.PAGE_END:!s&&!n&&(this.onHomeOrEndKey(i),a=!0);break;case pe.LEFT:case pe.RIGHT:case pe.UP:case pe.DOWN:if(!r)return!1;s&&!n&&!o&&(this.onCtrlUpDownLeftRight(i,r),a=!0);break;case pe.PAGE_DOWN:case pe.PAGE_UP:!s&&!n&&(a=this.handlePageUpDown(i,r,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===pe.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:i,focusIndex:n,focusColumn:s,isAsync:o,rowPinned:r}){const{scrollFeature:a}=this.gridBodyCon;We(i)&&!i.isPinned()&&a.ensureColumnVisible(i),We(e)&&a.ensureIndexVisible(e,t),o||a.ensureIndexVisible(n);const{focusSvc:l,rangeSvc:c}=this.beans;l.setFocusedCell({rowIndex:n,column:s,rowPinned:r,forceBrowserFocus:!0}),c?.setRangeToCell({rowIndex:n,rowPinned:r,column:s})}onPageDown(e){const t=this.beans,i=hB(t),n=this.getViewportHeight(),{pageBounds:s,rowModel:o,rowAutoHeight:r}=t,a=s.getPixelOffset(),l=i.top+n,c=o.getRowIndexAtPixel(l+a);r?.active?this.navigateToNextPageWithAutoHeight(e,c):this.navigateToNextPage(e,c)}onPageUp(e){const t=this.beans,i=hB(t),{pageBounds:n,rowModel:s,rowAutoHeight:o}=t,r=n.getPixelOffset(),a=i.top,l=s.getRowIndexAtPixel(a+r);o?.active?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,i=!1){const{pageBounds:n,rowModel:s}=this.beans,o=this.getViewportHeight(),r=n.getFirstRow(),a=n.getLastRow(),l=n.getPixelOffset(),c=s.getRow(e.rowIndex),u=i?c?.rowHeight-o-l:o-l,d=c?.rowTop+u;let p=s.getRowIndexAtPixel(d+l);if(p===e.rowIndex){const m=i?-1:1;t=p=e.rowIndex+m}let f;i?(f="bottom",p<r&&(p=r),t<r&&(t=r)):(f="top",p>a&&(p=a),t>a&&(t=a)),this.isRowTallerThanView(s.getRow(p))&&(t=p,f="top"),this.navigateTo({scrollIndex:t,scrollType:f,scrollColumn:null,focusIndex:p,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const n=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const i=t?-1:1,n=this.getViewportHeight(),{pageBounds:s,rowModel:o}=this.beans,r=s.getLastRow();let a=0,l=e.rowIndex;for(;l>=0&&l<=r;){const c=o.getRow(l);if(c){const u=c.rowHeight??0;if(a+u>n)break;a+=u}l+=i}return Math.max(0,Math.min(l,r))}getViewportHeight(){const e=this.beans,t=hB(e),i=this.beans.scrollVisibleSvc.getScrollbarWidth();let n=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(n-=i),n}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),n=this.getNormalisedPosition(i),{rowIndex:s,rowPinned:o,column:r}=n??i,a=r;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:a,focusIndex:s,focusColumn:a,rowPinned:o})}onHomeOrEndKey(e){const t=e===pe.PAGE_HOME,{visibleCols:i,pageBounds:n,rowModel:s}=this.beans,o=i.allCols,r=t?n.getFirstRow():n.getLastRow(),a=s.getRow(r);if(!a)return;const l=(t?o:[...o].reverse()).find(c=>!c.isSuppressNavigable(a));l&&this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:l,focusIndex:r,focusColumn:l})}onTabKeyDown(e,t){const i=t.shiftKey,n=this.tabToNextCellCommon(e,i,t),s=this.beans,{ctrlsSvc:o,pageBounds:r,focusSvc:a,gos:l}=s;if(n!==!1){n?t.preventDefault():n===null&&o.get("gridCtrl").allowFocusForNextCoreContainer(i);return}if(i){const{rowIndex:c,rowPinned:u}=e.getRowPosition();(u?c===0:c===r.getFirstRow())&&(l.get("headerHeight")===0||Dm(s)?mS(s,!0,!0):(t.preventDefault(),a.focusPreviousFromFirstCell(t)))}else e instanceof Bb&&e.focusCell(!0),(a.focusOverlay(!1)||mS(s,i))&&t.preventDefault()}tabToNextCell(e,t){const i=this.beans,{focusSvc:n,rowRenderer:s}=i,o=n.getFocusedCell();if(!o)return!1;let r=hb(i,o);return!r&&(r=s.getRowByPosition(o),!r?.isFullWidth())?!1:!!this.tabToNextCellCommon(r,e,t,"api")}tabToNextCellCommon(e,t,i,n="ui"){const{editSvc:s,focusSvc:o}=this.beans;let r;const a=e instanceof Bb?e:e.getAllCellCtrls()?.[0];return s?.isEditing()?r=s?.moveToNextCell(a,t,i,n):r=this.moveToNextCellNotEditing(e,t,i),r===null?r:r||!!o.focusedHeader}moveToNextCellNotEditing(e,t,i){const n=this.beans.visibleCols.allCols;let s;if(e instanceof GR){if(s={...e.getRowPosition(),column:t?n[0]:Ni(n)},this.gos.get("embedFullWidthRows")&&i){const r=e.findFullWidthInfoForEvent(i);r&&(s.column=r.column)}}else s=e.getFocusedCellPosition();const o=this.findNextCellToFocusOn(s,{backwards:t,startEditing:!1});if(o===!1)return null;if(o instanceof Bb)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o,t);return We(o)}findNextCellToFocusOn(e,{backwards:t,startEditing:i,skipToNextEditableCell:n}){let s=e;const o=this.beans,{cellNavigation:r,gos:a,focusSvc:l,rowRenderer:c,rangeSvc:u}=o;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=r.getNextTabbedCell(s,t);const d=a.getCallback("tabToNextCell");if(We(d)){const v=d({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:s||null});if(v===!0)s=e;else{if(v===!1)return!1;s={rowIndex:v.rowIndex,column:v.column,rowPinned:v.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const m=Su(o);return l.focusHeaderPosition({headerPosition:{headerRowIndex:m+s.rowIndex,column:s.column},fromCell:!0}),null}const p=a.get("editType")==="fullRow";if(i&&(!p||n)&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const f=hb(o,s);if(!f){const m=c.getRowByPosition(s);if(!m||!m.isFullWidth()||i)continue;return{...m.getRowPosition(),column:s?.column}}if(!r.isSuppressNavigable(f.column,f.rowNode))return f.setFocusedCellPosition(s),u?.setRangeToCell(s),f}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:i,rowModel:n}=this.beans;return t==="top"?i?.getPinnedTopRow(e):t==="bottom"?i?.getPinnedBottomRow(e):n.getRow(e)}navigateToNextCell(e,t,i,n){let s=i,o=!1;const r=this.beans,{cellNavigation:a,focusSvc:l,gos:c}=r;for(;s&&(s===i||!this.isValidNavigateCell(s));)c.get("enableRtl")?t===pe.LEFT&&(s=this.getLastCellOfColSpan(s)):t===pe.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=a.getNextCellToFocus(t,s),o=tn(s);if(o&&e&&e.key===pe.UP&&(s={rowIndex:-1,rowPinned:null,column:i.column}),n){const d=c.getCallback("navigateToNextCell");if(We(d)){const f=d({key:t,previousCellPosition:i,nextCellPosition:s||null,event:e});We(f)?s={rowPinned:f.rowPinned,rowIndex:f.rowIndex,column:f.column}:s=null}}if(!s)return;if(s.rowIndex<0){const d=Su(r);l.focusHeaderPosition({headerPosition:{headerRowIndex:d+s.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}const u=this.getNormalisedPosition(s);u?this.focusPosition(u):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){if(!!this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);const i=hb(this.beans,e);return i?(e=i.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:i,rowRenderer:n,focusSvc:s,eventSvc:o}=this.beans,r=i.allCols;if(!n.getRowByPosition(e)?.isFullWidth())return!1;const l=s.getFocusedCell(),c={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Ni(r):r[0])};this.focusPosition(c);const u=t??(l!=null&&cZe(c,l));return o.dispatchEvent({type:"fullWidthRowFocused",rowIndex:c.rowIndex,rowPinned:c.rowPinned,column:c.column,isFullWidthCell:!0,fromBelow:u}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:i}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),i?.setRangeToCell(e)}isValidNavigateCell(e){return!!dh(this.beans,e)}getLastCellOfColSpan(e){const t=hb(this.beans,e);if(!t)return e;const i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:Ni(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=vle(this.gos),i=this.beans.rowModel.getRow(e.rowIndex),n=t&&i?.sticky,{scrollFeature:s}=this.gridBodyCon;!n&&tn(e.rowPinned)&&s.ensureIndexVisible(e.rowIndex),e.column.isPinned()||s.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function hB(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var gJe={moduleName:"KeyboardNavigation",version:Ge,beans:[pJe,FQe,K7e],apiFunctions:{getFocusedCell:BQe,clearFocusedCell:_Qe,setFocusedCell:zQe,setFocusedHeader:HQe,tabToNextCell:GQe,tabToPreviousCell:VQe}},fJe=class extends we{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:i}=this.beans;t?t.calculatePages():e.calculateBounds(0,i.getRowCount()-1)}},mJe=class extends we{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this,i=e?.rowTop??0,n=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:i,pageLastPixel:n}}calculateBounds(e,t){const{rowModel:i}=this.beans,n=i.getRowBounds(e);n&&(n.rowIndex=e),this.topRowBounds=n;const s=i.getRowBounds(t);s&&(s.rowIndex=t),this.bottomRowBounds=s,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},yJe=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",vJe=class extends we{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const i of this.elements)i&&(pn(i,t),Tu(i,e))}},bJe=class extends we{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:i}=this.beans,n=wo(e,"print"),s=n?0:t.getColsLeftWidth(),o=n?0:t.getDisplayedColumnsRightWidth();s!=this.leftWidth&&(this.leftWidth=s,i.dispatchEvent({type:"leftPinnedWidthChanged"})),o!=this.rightWidth&&(this.rightWidth=o,i.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=A0(e);if(t<=50)return;const i=this.getPinnedColumnsOverflowingViewport(t-50),n=this.gos.getCallback("processUnpinnedColumns"),{columns:s,hasLockedPinned:o}=i;let r=s;!r.length&&!o||(n&&(r=n({columns:r,viewportWidth:t})),r?.length&&(r=r.filter(a=>!Qd(a)),this.setColsPinned(r,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new vJe(e,t)}setColsPinned(e,t,i){const{colModel:n,colAnimation:s,visibleCols:o,gos:r}=this.beans;if(!n.cols||!e?.length)return;if(wo(r,"print")){Ee(37);return}s?.start();let a;t===!0||t==="left"?a="left":t==="right"?a="right":a=null;const l=[];for(const c of e){if(!c)continue;const u=n.getCol(c);u&&u.getPinned()!==a&&(this.setColPinned(u,a),l.push(u))}l.length&&(o.refresh(i),Ple(this.eventSvc,l,i)),s?.finish()}initCol(e){const{pinned:t,initialPinned:i}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,i)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;const i=e.pinned==="left",n=e.pinned==="right";e.hidden=!0;const s=()=>{const o=i?this.leftWidth:this.rightWidth;if(o==null)return;const r=o==0,a=e.hidden!==r,l=this.gos.get("enableRtl"),c=t.getScrollbarWidth(),d=t.verticalScrollShowing&&(l&&i||!l&&n)?o+c:o;e.comp.setPinnedContainerWidth(`${d}px`),e.comp.setDisplayed(!r),a&&(e.hidden=r,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:s,rightPinnedWidthChanged:s,scrollVisibilityChanged:s,scrollbarWidthChanged:s})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:n,rightWidth:s}=this,o=A0(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(n+s+e>o)if(o>n+s)e=o-n-s;else return 0}return e}getPinnedColumnsOverflowingViewport(e){const t=this.rightWidth??0,i=this.leftWidth??0,n=t+i;let s=!1;if(n<e)return{columns:[],hasLockedPinned:s};const{visibleCols:o}=this.beans,r=[...o.leftCols],a=[...o.rightCols];let l=0,c=0;const u=0,d=[];let p=n-u-e;for(;(c<r.length||l<a.length)&&p>0;){if(l<a.length){const f=a[l++];if(f.colDef.lockPinned){s=!0;continue}p-=f.getActualWidth(),d.push(f)}if(c<r.length&&p>0){const f=r[c++];if(f.colDef.lockPinned){s=!0;continue}p-=f.getActualWidth(),d.push(f)}}return{columns:d,hasLockedPinned:s}}},SJe={moduleName:"PinnedColumn",version:Ge,beans:[bJe],css:[yJe]},CJe=class extends we{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=Co(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=Ys(e),i=this.descriptionContainer=t.createElement("div");i.classList.add("ag-aria-description-container"),jae(i,"polite"),hKe(i,"additions text"),dKe(i,!0),e.eGridDiv.appendChild(i)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(qr(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},xJe={moduleName:"Aria",version:Ge,beans:[CJe]},wJe=":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}",i7="ag-delay-render",DJe=class extends we{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,t=>{t.gridBodyCtrl.eGridBody.classList.add(i7)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive()||(this.requesters.delete(e),this.requesters.size>0))return;const{renderStatus:t,ctrlsSvc:i}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++,setTimeout(()=>this.revealColumns(e));return}this.timesRetried=0}i.getGridBodyCtrl().eGridBody.classList.remove(i7),this.alreadyRevealed=!0}},MJe={moduleName:"ColumnDelayRender",version:Ge,beans:[DJe],css:[wJe]};function AJe(e){e.overlays?.showLoadingOverlay()}function kJe(e){e.overlays?.showNoRowsOverlay()}function TJe(e){e.overlays?.hideOverlay()}var IJe=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-loading-wrapper{pointer-events:all}.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);padding:var(--ag-spacing)}",RJe={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},iue=class extends An{constructor(){super(RJe),this.eOverlayWrapper=ot,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeCssClass=null,this.elToFocusAfter=null,this.registerCSS(IJe)}handleKeyDown(e){if(e.key!==pe.TAB||e.defaultPrevented||eh(e))return;const t=this.beans;if(Ly(t,this.eOverlayWrapper,!1,e.shiftKey))return;let n=!1;e.shiftKey?n=t.focusSvc.focusGridView({column:Ni(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):n=mS(t,!1),n&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList,{AUTO_HEIGHT:n,NORMAL:s,PRINT:o}=cI;i.toggle(n,t.autoHeight),i.toggle(s,t.normal),i.toggle(o,t.print)}postConstruct(){this.createManagedBean(new Pj(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,n){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.isGridFocused()){const s=Cn(this.beans);s&&!Gae(this.beans)&&(this.elToFocusAfter=s)}e.then(s=>{if(this.activePromise!==e){this.activeOverlay!==s&&(this.destroyBean(s),s=null);return}if(this.activePromise=null,!!s){if(this.activeOverlay!==s&&(this.eOverlayWrapper.appendChild(s.getGui()),this.activeOverlay=s,n)){const o=s;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,({currentValue:r})=>{o.refresh?.(ct(this.gos,{...r??{}}))})}i&&this.isGridFocused()&&Um(this.eOverlayWrapper)}})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),qr(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=Cn(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setOverlayWrapperComp(void 0),super.destroy()}},EJe={selector:"AG-OVERLAY-WRAPPER",component:iue},LJe=class extends we{constructor(){super(...arguments),this.beanName="overlays",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}postConstruct(){this.isClientSide=Ln(this.gos),this.isServerSide=!this.isClientSide&&Ry(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.refreshWrapperPadding.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.eWrapper=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.eWrapper}isExclusive(){return this.state===1&&!!this.eWrapper}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos,t=e.get("loading");!t&&(t!==void 0||e.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;e.get("loading")||e.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){Ee(99);return}this.doHideOverlay()}getOverlayWrapperSelector(){return EJe}getOverlayWrapperCompClass(){return iue}updateOverlayVisibility(){if(!this.eWrapper){this.state=0;return}const{state:e,isClientSide:t,isServerSide:i,beans:{gos:n,colModel:s,rowModel:o}}=this;let r=this.gos.get("loading");r!==void 0&&(this.showInitialOverlay=!1),this.showInitialOverlay&&r===void 0&&!n.get("suppressLoadingOverlay")&&(r=!n.get("columnDefs")||!s.ready||!n.get("rowData")&&t),r?e!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,t&&o.isEmpty()&&!n.get("suppressNoRowsOverlay")?e!==2&&this.doShowNoRowsOverlay():(e===1||!i&&e!==0)&&this.doHideOverlay())}doShowLoadingOverlay(){this.eWrapper&&(this.state=1,this.showOverlay(w6e(this.beans.userCompFactory,ct(this.gos,{})),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.eWrapper&&(this.state=2,this.showOverlay(D6e(this.beans.userCompFactory,ct(this.gos,{})),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.eWrapper&&(this.state=0,this.eWrapper.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){const n=e?.newAgStackInstance()??null;this.eWrapper?.showOverlay(n,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"})}refreshWrapperPadding(){const e=this.eWrapper;if(!e)return;let t=0;this.state===2&&(t=this.beans.ctrlsSvc.get("gridHeaderCtrl")?.headerHeight||0),this.wrapperPadding!==t&&(this.wrapperPadding=t,e.updateOverlayWrapperPaddingTop(t))}},PJe={moduleName:"Overlay",version:Ge,userComponents:{agLoadingOverlay:cXe,agNoRowsOverlay:dXe},apiFunctions:{showLoadingOverlay:AJe,showNoRowsOverlay:kJe,hideOverlay:TJe},beans:[LJe]},NJe=class extends we{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=T6e(),Wm(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;Wm(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}},OJe=400,FJe=class extends we{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{for(const o of this.getAllCellCtrls())o.onCellSelectionChanged()},t=()=>{for(const o of this.getAllCellCtrls())o.updateRangeBordersIfRangeCount()},i=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},n=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>n()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{hg(this.gos)?i():n()}),hg(this.gos)&&i()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",n=>this.onSuppressCellFocusChanged(n.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:n,previousValue:s})=>{(!s&&n||s&&!n)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:i}=this.beans;if(i&&this.addManagedPropertyListener("showOpenedGroup",()=>{const n=i.getShowRowGroupCols();n.length&&this.refreshCells({columns:n,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const n=this.gridBodyCtrl;n.setStickyTopHeight(0),n.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=wo(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new BJe(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),i=this.cachedRowCtrls?.getEntries()??[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}isCellBeingRendered(e,t){const i=this.rowCtrlsByRowIndex[e];return!t||!i?!!i:i.isFullWidth()?!0:!!this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:e,column:t,rowPinned:null})||!!i.getCellCtrl(t)||!i.isRowRendered()}updateCellFocus(e){for(const t of this.getAllCellCtrls())t.onCellFocused(e);for(const t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if(e?.rowIndex!=null&&!e.rowPinned){const t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(const t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(const t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;if(t)for(const i of this.getAllCellCtrls())t.onFlashCells(i,e)},columnHoverChanged:()=>{for(const e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(const e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(const e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(const e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const e=this.colModel.getCols();for(const t of e){const i=l=>{for(const c of this.getAllCellCtrls())c.column===t&&l(c)},n=()=>{i(l=>l.onLeftChanged())},s=()=>{i(l=>l.onWidthChanged())},o=()=>{i(l=>l.onFirstRightPinnedChanged())},r=()=>{i(l=>l.onLastLeftPinnedChanged())},a=()=>{i(l=>l.onColDefChanged())};t.__addEventListener("leftChanged",n),t.__addEventListener("widthChanged",s),t.__addEventListener("firstRightPinnedChanged",o),t.__addEventListener("lastLeftPinnedChanged",r),t.__addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",n),t.__removeEventListener("widthChanged",s),t.__removeEventListener("firstRightPinnedChanged",o),t.__removeEventListener("lastLeftPinnedChanged",r),t.__removeEventListener("colDefChanged",a)})}}onDomLayoutChanged(){const e=wo(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];for(const i of this.getAllRowCtrls()){const n=i.getCellCtrl(e,!0)?.eGui;n&&t.push(n)}return t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,i){const{pinnedRowModel:n,beans:s,printLayout:o}=this,r=Object.fromEntries(e.map(l=>[l.rowNode.id,l]));n?.forEachPinnedRow(t,(l,c)=>{const u=e[c];u&&n.getPinnedRowById(u.rowNode.id,t)===void 0&&(u.destroyFirstPass(),u.destroySecondPass()),l.id in r&&i?(e[c]=r[l.id],delete r[l.id]):e[c]=new GR(l,s,!1,!1,o)});const a=(t==="top"?n?.getPinnedTopRowCount():n?.getPinnedBottomRowCount())??0;e.length=a}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const i=n=>{const s=n[e.rowIndex];s&&s.rowNode===e&&(s.destroyFirstPass(),s.destroySecondPass(),n[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":i(this.topRowCtrls);break;case"bottom":i(this.bottomRowCtrls);break;default:i(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;if(t?.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),e!=null){for(const n of e??[])this.redrawRow(n,!0);this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,n=e.animate&&Ib(this.gos),s=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:o,gos:r}=this;if(o){o.checkStickyRows();const a=o.extraTopHeight+o.extraBottomHeight;a&&this.updateContainerHeights(a)}this.recycleRows(s,n),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(r.get("enableRowPinning")?i:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let i=this.pageBounds.getCurrentPageHeight();i===0&&(i=1),t.setModelHeight(i+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error(Iu(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,i=this.findPositionToFocus(e);if(!i){t.focusHeaderPosition({headerPosition:{headerRowIndex:Su(this.beans)-1,column:e.column}});return}if(e.rowIndex!==i.rowIndex||e.rowPinned!=i.rowPinned){t.setFocusedCell({...i,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(ct(this.gos,{...i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(e){const{pagination:t,pageBounds:i}=this.beans;let n=e;for(n.rowPinned==null&&t&&i&&!t.isRowInPage(n.rowIndex)&&(n={rowPinned:null,rowIndex:i.getFirstRow()});n;){if(n.rowPinned==null&&i)if(n.rowIndex<i.getFirstRow()){if(n=_R(this.beans,{rowPinned:null,rowIndex:0}),!n)return null}else n.rowIndex>i.getLastRow()&&(n={rowPinned:null,rowIndex:i.getLastRow()});const s=this.getRowByPosition(n);if(s?.isAlive())return{...s.getRowPosition(),column:e.column};n=_R(this.beans,n)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let n=0;n<i;n++){const s=t[n].getAllCellCtrls(),o=s.length;for(let r=0;r<o;r++)e.push(s[r])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),i=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...i,...e?.getCtrls("top")??[],...e?.getCtrls("bottom")??[],...e?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,i){const n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,i)}refreshCells({rowNodes:e,columns:t,force:i,suppressFlash:n}={}){const s={force:i,newData:!1,suppressFlash:n};for(const o of this.getCellCtrls(e,t))o.refreshOrDestroyCell(s);this.refreshFullWidth(e)}refreshRows(e={}){for(const t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||(t=!0,this.redrawRow(i.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=Rz(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(n=>{const s=n.rowNode;return Ez(s,t)})}getCellCtrls(e,t){let i;We(t)&&(i={},t.forEach(s=>{const o=this.colModel.getCol(s);We(o)&&(i[o.getId()]=!0)}));const n=[];for(const s of this.getRowCtrls(e))for(const o of s.getAllCellCtrls()){const r=o.column.getId();i&&!i[r]||n.push(o)}return n}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const i of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[i].rowNode.id==null&&e.push(i);this.removeRowCtrls(e);const t={};for(const i of Object.values(this.rowCtrlsByRowIndex)){const n=i.rowNode;t[n.id]=i}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){for(const i of e){const n=this.rowCtrlsByRowIndex[i];n&&(n.destroyFirstPass(t),n.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]}}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{focusSvc:t,animationFrameSvc:i}=this.beans,{afterScroll:n}=e;let s;const o=this.stickyRowFeature;o&&(s=t?.getFocusCellToUseAfterRefresh()||void 0);const r=this.firstRenderedRow,a=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(o){l=o.checkStickyRows();const u=o.extraTopHeight+o.extraBottomHeight;u&&this.updateContainerHeights(u)}const c=this.firstRenderedRow!==r||this.lastRenderedRow!==a;if(!(n&&!l&&!c)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,n),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(n&&!l),s!=null)){const u=t?.getFocusCellToUseAfterRefresh();s!=null&&u==null&&(i?.flushAllFrames(),this.restoreFocusedCell(s))}}removeRowCompsNotToDraw(e,t){const i={};for(const o of e)i[o]=!0;const s=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!i[o]);this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){const t=[];for(let r=this.firstRenderedRow;r<=this.lastRenderedRow;r++)t.push(r);const i=this.beans.pagination,n=this.beans.focusSvc?.getFocusedCell()?.rowIndex;n!=null&&(n<this.firstRenderedRow||n>this.lastRenderedRow)&&(!i||i.isRowInPage(n))&&n<this.rowModel.getRowCount()&&t.push(n);const s=r=>{const a=r.rowNode.rowIndex;a==null||a===n||(a<this.firstRenderedRow||a>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(r)&&t.push(a)};for(const r of Object.values(this.rowCtrlsByRowIndex))s(r);if(e)for(const r of Object.values(e))s(r);t.sort((r,a)=>r-a);const o=[];for(let r=0;r<t.length;r++){const a=t[r],l=this.rowModel.getRow(a);l&&!l.sticky&&o.push(a)}return o}recycleRows(e,t=!1,i=!1){const n=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(n,!t);for(const s of n)this.createOrUpdateRowCtrl(s,e,t,i);if(e){const{animationFrameSvc:s}=this.beans;s?.active&&i&&!this.printLayout?s.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),i=e.isPinningRight();(this.pinningLeft!==t||i!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=i,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];for(const t of this.getFullWidthRowCtrls()){const i=t.rowNode.rowIndex;e.push(i.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=Rz(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const n=i.rowNode;return!(t!=null&&!Ez(n,t))})}createOrUpdateRowCtrl(e,t,i,n){let s,o=this.rowCtrlsByRowIndex[e];if(o||(s=this.rowModel.getRow(e),We(s)&&We(t)&&t[s.id]&&s.alreadyRendered&&(o=t[s.id],t[s.id]=null)),!o)if(s||(s=this.rowModel.getRow(e)),We(s))o=this.createRowCon(s,i,n);else return;s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o}destroyRowCtrls(e,t){const i=[];if(e){for(const n of Object.values(e))if(n){if(this.cachedRowCtrls&&n.isCacheable()){this.cachedRowCtrls.addRow(n);continue}if(n.destroyFirstPass(!t),t){const s=n.instanceId;this.zombieRowCtrls[s]=n,i.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[s]})}else n.destroySecondPass()}}t&&(i.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(const n of i)n()},OJe))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=xm(this.beans);return e*t}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:i}=this;e.updateOffset();let n,s;if(!i.isRowsToRender())n=0,s=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),n=t.getFirstRow(),s=t.getLastRow();else{const u=this.getRowBufferInPixels(),d=this.ctrlsSvc.getScrollFeature(),p=this.gos.get("suppressRowVirtualisation");let f=!1,m,v;do{const M=t.getPixelOffset(),{pageFirstPixel:T,pageLastPixel:L}=t.getCurrentPagePixelRange(),I=e.divStretchOffset,R=d.getVScrollPosition(),O=R.top,_=R.bottom;p?(m=T+I,v=L+I):(m=Math.max(O+M-u,T)+I,v=Math.min(_+M+u,L)+I),this.firstVisibleVPixel=Math.max(O+M,T)+I,this.lastVisibleVPixel=Math.min(_+M,L)+I,f=this.ensureAllRowsInRangeHaveHeightsCalculated(m,v)}while(f);let b=i.getRowIndexAtPixel(m),C=i.getRowIndexAtPixel(v);const x=t.getFirstRow(),w=t.getLastRow();b<x&&(b=x),C>w&&(C=w),n=b,s=C}const o=wo(this.gos,"normal"),r=this.gos.get("suppressMaxRenderedRowRestriction"),a=Math.max(this.getRowBuffer(),500);o&&!r&&s-n>a&&(s=n+a);const l=n!==this.firstRenderedRow,c=s!==this.lastRenderedRow;(l||c)&&(this.firstRenderedRow=n,this.lastRenderedRow=s,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:n,lastRow:s}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,_h(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const i=this.pinnedRowModel?.ensureRowHeightsValid(),n=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:s,rowModel:o}=this,r=o.ensureRowHeightsValid(e,t,s.getFirstRow(),s.getLastRow());return(r||n)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),n||r||i?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){const n=e.rowNode,s=this.focusSvc.isRowFocused(n.rowIndex,n.rowPinned),o=this.editSvc?.isEditing(e),r=n.detail;return s||o||r?!!this.isRowPresent(n):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.beans.pagination?.isRowInPage(e.rowIndex)??!0:!1}createRowCon(e,t,i){const n=this.cachedRowCtrls?.getRow(e)??null;if(n)return n;const s=i&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;return new GR(e,this.beans,t,s,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(n=>n.rowNode),t=this.getStickyTopRowCtrls().map(n=>n.rowNode),i=this.getStickyBottomRowCtrls().map(n=>n.rowNode);return[...t,...e,...i]}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(n=>n.rowNode.rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(n=>n.rowNode.rowIndex===i)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const n=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!n}},BJe=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e?.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],Cc(this.entriesList,i)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],Cc(this.entriesList,e)}getEntries(){return this.entriesList}};function Rz(e){if(!e)return;const t={top:{},bottom:{},normal:{}};for(const i of e){const n=i.id;switch(i.rowPinned){case"top":t.top[n]=i;break;case"bottom":t.bottom[n]=i;break;default:t.normal[n]=i;break}}return t}function Ez(e,t){const i=e.id;switch(e.rowPinned){case"top":return t.top[i]!=null;case"bottom":return t.bottom[i]!=null;default:return t.normal[i]!=null}}var _Je=class extends we{constructor(){super(...arguments),this.beanName="rowNodeSorter"}postConstruct(){const{gos:e}=this;this.isAccentedSort=e.get("accentedSort"),this.primaryColumnsSortGroups=pu(e),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=pu(e))}doFullSort(e,t){const i=e.map((n,s)=>({currentPos:s,rowNode:n}));return i.sort(this.compareRowNodes.bind(this,t)),i.map(n=>n.rowNode)}compareRowNodes(e,t,i){const n=t.rowNode,s=i.rowNode;for(let o=0,r=e.length;o<r;o++){const a=e[o],l=a.sort==="desc",c=this.getValue(n,a.column),u=this.getValue(s,a.column);let d;const p=this.getComparator(a,n);if(p?d=p(c,u,n,s,l):d=sKe(c,u,this.isAccentedSort),!isNaN(d)&&d!==0)return a.sort==="asc"?d:d*-1}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,n=i.getColDef().comparator;if(n!=null)return n;if(!i.getColDef().showRowGroup)return;const s=!t.group&&i.getColDef().field;if(!s)return;const o=this.beans.colModel.getColDefCol(s);if(o)return o.getColDef().comparator}getValue(e,t){const{valueSvc:i,colModel:n,showRowGroupCols:s,gos:o}=this.beans;if(!this.primaryColumnsSortGroups)return i.getValue(t,e,!1);if(e.rowGroupColumn===t){if(Sle(o,n.isPivotActive())){const c=e.data?e:ace(e.childrenAfterGroup);return c&&i.getValue(t,c,!1)}const l=s?.getShowRowGroupCol(t.getId());return l?e.groupData?.[l.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return i.getValue(t,e,!1)}};function zJe(e){e.sortSvc?.onSortChanged("api")}var nue={moduleName:"Sort",version:Ge,beans:[iQe,_Je],apiFunctions:{onSortChanged:zJe},userComponents:{agSortIndicator:Vj},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none"}},GJe=class extends we{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:i}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),i.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),Wm(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,Eb(e.source))}}};function VJe(e){e.valueCache?.expire()}function HJe(e,t){const{colKey:i,rowNode:n,useFormatter:s}=t,o=e.colModel.getColDefCol(i)??e.colModel.getCol(i);if(tn(o))return null;const r=e.valueSvc.getValueForDisplay(o,n,s);return s?r.valueFormatted??yC(r.value):r.value}var WJe="paste",jJe=class extends we{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;Ln(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:i}=this.beans;if(e.source===WJe||t.get("suppressChangeDetection"))return;const n=e.node,s=[n],o=this.clientSideRowModel,r=o?.rootNode;if(r&&!n.isRowPinned()){const a=t.get("aggregateOnlyChangedColumns"),l=new L0(a,r);l.addParentNode(n.parent,[e.column]),o.doAggregate(l),l.forEachChangedNodeDepthFirst(c=>{s.push(c),c.sibling&&s.push(c.sibling)})}i.refreshCells({rowNodes:s})}},UJe=class extends we{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);Mi(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return Mi(16,{expression:e,params:t,e:i}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const i=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",i);return t[e]=n,n}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}},$Je=class extends we{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){if(this.active){const n=this.cacheVersion;e.__cacheVersion!==n&&(e.__cacheVersion=n,e.__cacheData={}),e.__cacheData[t]=i}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},KJe={moduleName:"ValueCache",version:Ge,beans:[$Je],apiFunctions:{expireValueCache:VJe}},YJe={moduleName:"Expression",version:Ge,beans:[UJe]},XJe={moduleName:"ChangeDetection",version:Ge,beans:[jJe]},ZJe={moduleName:"CellApi",version:Ge,apiFunctions:{getCellValue:HJe}},qJe=class extends we{constructor(){super(...arguments),this.beanName="valueSvc",this.hasEditSvc=!1,this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.hasEditSvc=!!e.editSvc}postConstruct(){this.initialised||this.init()}init(){this.executeValueGetter=this.valueCache?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=Ry(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=t=>this.callColumnCellValueChangedHandler(t);this.eventSvc.addListener("cellValueChanged",e,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",e,!0)),this.addManagedPropertyListener("treeData",t=>this.isTreeData=t.currentValue)}getValueForDisplay(e,t,i=!1,n=!1,s="ui"){const{showRowGroupColValueSvc:o}=this.beans,r=!e&&t.group,a=e?.colDef.showRowGroup,l=!this.isTreeData||t.footer;if(o&&l&&(r||a)){const v=o.getGroupValue(t,e);if(v==null)return{value:null,valueFormatted:null};if(!i)return{value:v.value,valueFormatted:null};const b=o.formatAndPrefixGroupColValue(v,e,n);return{value:v.value,valueFormatted:b}}if(!e)return{value:t.key,valueFormatted:null};const c=t.leafGroup&&this.colModel.isPivotMode(),u=t.group&&t.expanded&&!t.footer&&!c,d=this.gos.get("groupSuppressBlankHeader")||!t.sibling,p=u&&!d,f=this.getValue(e,t,p,s),m=i&&!(n&&e.colDef.useValueFormatterForExport===!1);return{value:f,valueFormatted:m?this.formatValue(e,t,f):null}}getValue(e,t,i=!1,n="ui"){if(this.initialised||this.init(),!t)return;const s=e.getColDef(),o=s.field,r=e.getColId(),a=t.data;if(this.hasEditSvc&&n==="ui"){const v=this.editSvc;if(v.isEditing()){const b=v.getCellDataValue({rowNode:t,column:e},!0);if(b!==void 0)return b}}let l;const c=s.showRowGroup;if(typeof c=="string"&&(this.beans.rowGroupColsSvc?.getColumnIndex(c)??-1)>t.level)return null;const u=typeof c!="string"||!t.group,d=t.groupData&&r in t.groupData,p=!i&&t.aggData&&t.aggData[r]!==void 0,f=this.isSsrm&&i&&!!s.aggFunc,m=this.isSsrm&&t.footer&&t.field&&(s.showRowGroup===!0||s.showRowGroup===t.field);if(this.isTreeData&&p)l=t.aggData[r];else if(this.isTreeData&&s.valueGetter)l=this.executeValueGetter(s.valueGetter,a,e,t);else if(this.isTreeData&&o&&a)l=Lw(a,o,e.isFieldContainsDots());else if(d)l=t.groupData[r];else if(p)l=t.aggData[r];else if(s.valueGetter&&!f){if(!u)return l;l=this.executeValueGetter(s.valueGetter,a,e,t)}else if(m)l=Lw(a,t.field,e.isFieldContainsDots());else if(o&&a&&!f){if(!u)return l;l=Lw(a,o,e.isFieldContainsDots())}if(this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){const v=l.substring(1);l=this.executeValueGetter(v,a,e,t)}return l}parseValue(e,t,i,n){const s=e.getColDef(),o=s.valueParser;if(We(o)){const r=ct(this.gos,{node:t,data:t?.data,oldValue:n,newValue:i,colDef:s,column:e});return typeof o=="function"?o(r):this.expressionSvc?.evaluate(o,r)}return i}getDeleteValue(e,t){return We(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t).value)??null:null}formatValue(e,t,i,n,s=!0){const{expressionSvc:o}=this.beans;let r=null,a;const l=e.getColDef();if(n?a=n:s&&(a=l.valueFormatter),a){const c=t?t.data:null,u=ct(this.gos,{value:i,node:t,data:c,colDef:l,column:e});typeof a=="function"?r=a(u):r=o?o.evaluate(a,u):null}else if(l.refData)return l.refData[i]||"";return r==null&&Array.isArray(i)&&(r=i.join(", ")),r}setValue(e,t,i,n){const s=this.colModel.getColDefCol(t);if(!e||!s)return!1;tn(e.data)&&(e.data={});const{field:o,valueSetter:r}=s.getColDef();if(tn(o)&&tn(r))return Ee(17),!1;if(this.dataTypeSvc&&!this.dataTypeSvc.checkType(s,i))return Ee(135),!1;const a=ct(this.gos,{node:e,data:e.data,oldValue:this.getValue(s,e,void 0,n),newValue:i,colDef:s.getColDef(),column:s});a.newValue=i;let l;if(We(r)?typeof r=="function"?l=r(a):l=this.expressionSvc?.evaluate(r,a):l=this.setValueUsingField(e.data,o,i,s.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();const c=this.getValue(s,e);return this.dispatchCellValueChangedEvent(e,a,c,n),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,a,c,n),!0}dispatchCellValueChangedEvent(e,t,i,n){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:i,value:i,source:n})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,n){if(!t)return!1;let s=!1;if(!n)s=e[t]===i,s||(e[t]=i);else{const o=t.split(".");let r=e;for(;o.length>0&&r;){const a=o.shift();o.length===0?(s=r[a]===i,s||(r[a]=i)):r=r[a]}}return!s}executeValueGetterWithValueCache(e,t,i,n){const s=i.getColId(),o=this.valueCache.getValue(n,s);if(o!==void 0)return o;const r=this.executeValueGetterWithoutValueCache(e,t,i,n);return this.valueCache.setValue(n,s,r),r}executeValueGetterWithoutValueCache(e,t,i,n){const s=ct(this.gos,{data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});let o;return typeof e=="function"?o=e(s):o=this.expressionSvc?.evaluate(e,s),o}getValueCallback(e,t){const i=this.colModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),n=e.getColDef().keyCreator;let s=i;if(n){const o=ct(this.gos,{value:i,colDef:e.getColDef(),column:e,node:t,data:t.data});s=n(o)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&Ee(121)),s}},QJe={moduleName:"CommunityCore",version:Ge,beans:[Q7e,jXe,n7e,YYe,NJe,fqe,$7e,xQe,jYe,mJe,fJe,FJe,qJe,Z7e,U7e,q7e,o7e,GJe,Qqe,Jqe,PQe],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:UXe,destroy:$Xe,isDestroyed:KXe,getGridOption:YXe,setGridOption:XXe,updateGridOptions:Lce,isModuleRegistered:ZXe},dependsOn:[Xqe,KZe,eqe,nue,IQe,yqe,RQe,PJe,XJe,LQe,gJe,SJe,xJe,OQe,i7e,Zqe,YJe,Cqe,MJe]},sue={AdvancedFilter:1,AiToolkit:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1},pB=["TextFilter","NumberFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],JJe={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:pB,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],RowModelSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...pB,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...pB,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},eet={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function tet(e,t){const i=[];for(const n of Array.isArray(e)?e:[e]){const s=JJe[n];if(s)for(const o of s){const r=eet[o];(!r||r===t)&&i.push(o)}else i.push(n)}return i}var oue=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,iet=e=>{const t=e.map(n=>`import { ${Pw(n)} } from '${sue[n]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(n=>n==="IntegratedCharts"||n==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(n=>Pw(n,!0)).join(", ")} ]); 

For more info see: ${Tb}/modules/`};function Pw(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function net(e,t){const i=t.filter(o=>o==="IntegratedCharts"||o==="Sparklines");let n="";return!globalThis?.agCharts&&i.length>0?n=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(o=>sue[o])&&(n=n+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),n}function rue({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var n7=({reasonOrId:e,moduleName:t,gridScoped:i,gridId:n,rowModelType:s,additionalText:o,isUmd:r})=>{const a=tet(t,s),l=typeof e=="string"?e:aet[e];if(r)return net(l,a);const c=a.filter(p=>p==="IntegratedCharts"||p==="Sparklines"),u=c.length>0?`${c.map(p=>Pw(p)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${l} as ${a.length>1?"one of "+a.map(p=>Pw(p)).join(", "):Pw(a[0])} is not registered${i?" for gridId: "+n:""}. ${u} Check if you have registered the module:
`}
${iet(a)}`+(o?` 

${o}`:"")},s7=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,set=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,oet={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e?.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:i})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",i],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${set(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:i,pageSizeOptions:n})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${i?"":" the default"} paginationPageSizeSelector=[${n?.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:i,jsComps:n})=>{const s=[],o=[...Object.keys(i??[]).filter(a=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(a)),...Object.keys(n??[]).filter(a=>!!n[a])],r=fz({inputValue:t,allSuggestions:o,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return s.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),r.length>0&&s.push(`         Did you mean: [${r.slice(0,3)}]?
`),s.push("If using a custom component check it has been registered correctly."),s},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${Tb}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({inputValue:e,allSuggestions:t})=>{const i=fz({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,i.length>0?`         Did you mean: [${i.slice(0,3)}]?`:"","If using a custom aggregation function check it has been registered correctly."].join(`
`)},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:i})=>["duplicate group keys for row data, keys should be unique",e,t,...i??[]],187:({rowId:e,firstData:t,secondData:i})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",i],188:e=>`getRowId callback must be provided for Server Side Row Model ${e?.feature||"selection"} to work correctly.`,189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:n7,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${Tb}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,229:({index:e})=>["invalid row index for ensureIndexVisible: ",e],230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e?.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>s7("IntegratedChartsModule"),258:()=>s7("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:i,gridId:n,rowModelType:s})=>n7({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:Ob[t],gridId:n,gridScoped:i,rowModelType:s}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${Tb}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>oue(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children.";break}return t},275:rue,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`,291:()=>"License Key being set multiple times with different values. This can result in an incorrect license key being used,",292:({colId:e})=>`The Multi Filter for column '${e}' has buttons configured against the child filters. When 'enableFilterHandlers=true', buttons must instead be provided against the parent Multi Filter params. The child filter buttons will be ignored.`};function ret(e,t){const i=oet[e];if(!i)return[`Missing error text for error id ${e}!`];const n=i(t),o=`
See ${gle(e,t)}`;return Array.isArray(n)?n.concat(o):[n,o]}var aet={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},o7=new WeakMap,r7=new WeakMap,cet=1,uet=class{create(e,t,i,n,s,o){const r=yj.applyGlobalGridOptions(t),a=r.gridId??String(cet++),l=this.getRegisteredModules(s,a,r.rowModelType),c=this.createBeansList(r.rowModelType,l,a),u=this.createProvidedBeans(e,r,s);if(!c)return;const p={providedBeanInstances:u,beanClasses:c,id:a,beanInitComparator:GXe,beanDestroyComparator:VXe,derivedBeans:[_Xe],destroyCallback:()=>{r7.delete(m),o7.delete(e),YKe(a),o?.()}},f=new A8e(p);this.registerModuleFeatures(f,l),i(f),f.getBean("syncSvc").start(),n?.(f);const m=f.getBean("gridApi");return o7.set(e,m),r7.set(m,e),m}getRegisteredModules(e,t,i){return T0(QJe,void 0,!0),e?.modules?.forEach(n=>T0(n,t)),XKe(t,a7(i))}registerModuleFeatures(e,t){const i=e.getBean("registry"),n=e.getBean("apiFunctionSvc");for(const s of t){i.registerModule(s);const o=s.apiFunctions;if(o){const r=Object.keys(o);for(const a of r)n?.addFunction(a,o[a])}}}createProvidedBeans(e,t,i){let n=i?i.frameworkOverrides:null;tn(n)&&(n=new Rce);const s={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:i?i.globalListener:null,globalSyncListener:i?i.globalSyncListener:null,frameworkOverrides:n};return i?.providedBeanInstances&&Object.assign(s,i.providedBeanInstances),s}createBeansList(e,t,i){const n={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},s=a7(e),o=n[s];if(!o){cw(201,{rowModelType:s},`Unknown rowModelType ${s}.`);return}if(!QKe()){cw(272,void 0,oue());return}if(!e){const a=Object.entries(n).filter(([l,c])=>oz(c,i,l));if(a.length==1){const[l,c]=a[0];if(l!==s){const u={moduleName:c,rowModelType:l};cw(275,u,rue(u));return}}}if(!oz(o,i,s)){cw(200,{reasonOrId:`rowModelType = '${s}'`,moduleName:o,gridScoped:vj(),gridId:i,rowModelType:s},`Missing module ${o}Module for rowModelType ${s}.`);return}const r=new Set;for(const a of t)for(const l of a.beans??[])r.add(l);return Array.from(r)}};function a7(e){return e??"clientSide"}function Yg(e){const t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function nP(e){const t=e.rowModel;return t.getType()==="infinite"?t:void 0}function det(e){const t=e.rowModel;return t.getType()==="serverSide"?t:void 0}var het=class extends we{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");return t?BKe(t):_Ke(e.get("localeText"))}};function pet(e,t=!1){const i=[],n=[],s=[],o=[],r=[],a=[],l=[],c=[],u=[];let d=0;for(let p=0;p<e.length;p++){const{colId:f,sort:m,sortIndex:v,rowGroup:b,rowGroupIndex:C,aggFunc:x,pivot:w,pivotIndex:M,pinned:T,hide:L,width:I,flex:R}=e[p];u.push(f),m&&(i[v??d++]={colId:f,sort:m}),b&&(n[C??0]=f),typeof x=="string"&&s.push({colId:f,aggFunc:x}),w&&(o[M??0]=f),T&&(T==="right"?a:r).push(f),L&&l.push(f),(R!=null||I)&&c.push({colId:f,flex:R??void 0,width:I})}return{sort:i.length?{sortModel:gB(i)}:void 0,rowGroup:n.length?{groupColIds:gB(n)}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:o.length||t?{pivotMode:t,pivotColIds:gB(o)}:void 0,columnPinning:r.length||a.length?{leftColIds:r,rightColIds:a}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:c.length?{columnSizingModel:c}:void 0,columnOrder:u.length?{orderedColIds:u}:void 0}}function gB(e){return e.filter(t=>t!=null)}function get(e){const t=[];for(const{groupId:i,open:n}of e)n&&t.push(i);return t.length?{openColumnGroupIds:t}:void 0}var fet=class{wrap(e,t,i,n){const s=this.createWrapper(e,n);for(const o of t??[])this.createMethod(s,o,!0);for(const o of i??[])this.createMethod(s,o,!1);return s}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&Ee(49,{methodName:t}),null)}}};function fB(e){return e.get("tooltipShowMode")==="whenTruncated"}function met(e,t){if(typeof e!="number")return"";const i=t(),n=i("thousandSeparator",","),s=i("decimalSeparator",".");return e.toString().replace(".",s).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${n}`)}var yet=class extends we{getFileName(e){const t=this.getDefaultFileExtension();return e?.length||(e=this.getDefaultFileName()),e.includes(".")?e:`${e}.${t}`}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},vet=class{constructor(e){const{colModel:t,rowGroupColsSvc:i,colNames:n,valueSvc:s,gos:o,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.colModel=t,this.rowGroupColsSvc=i,this.colNames=n,this.valueSvc=s,this.gos=o,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,n,s){const o=t===0&&Cle(this.gos,s,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||s.group)&&(e.isRowGroupDisplayed(s.rowGroupColumn?.getColId()??"")||o))return{value:this.processRowGroupCallback(ct(this.gos,{column:e,node:s}))??""};if(this.processCellCallback)return{value:this.processCellCallback(ct(this.gos,{accumulatedRowIndex:i,column:e,node:s,value:this.valueSvc.getValueForDisplay(e,s,void 0,void 0).value,type:n,parseValue:p=>this.valueSvc.parseValue(e,s,p,this.valueSvc.getValue(e,s,void 0)),formatValue:p=>this.valueSvc.formatValue(e,s,p)??p}))??""};const r=this.gos.get("treeData"),a=this.valueSvc,l=s.level===-1&&s.footer,c=e.colDef.showRowGroup===!0&&(s.group||r);if(!l&&(o||c)){let p="",f=s;for(;f&&f.level!==-1;){const{value:m,valueFormatted:v}=a.getValueForDisplay(o?void 0:e,f,!0,!0);p=` -> ${v??m??""}${p}`,f=f.parent}return{value:p,valueFormatted:p}}const{value:u,valueFormatted:d}=a.getValueForDisplay(e,s,!0,!0);return{value:u??"",valueFormatted:d}}getHeaderName(e,t){return e?e(ct(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}};function bet(e,t){const i=document.defaultView||window;if(!i){Ee(52);return}const n=document.createElement("a"),s=i.URL.createObjectURL(t);n.setAttribute("href",s),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),n.remove(),i.setTimeout(()=>{i.URL.revokeObjectURL(s)},0)}var Cet={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},_r="clientSide",Go="serverSide",Hv="infinite",xet={onGroupExpandedOrCollapsed:[_r],refreshClientSideRowModel:[_r],isRowDataEmpty:[_r],forEachLeafNode:[_r],forEachNodeAfterFilter:[_r],forEachNodeAfterFilterAndSort:[_r],resetRowHeights:[_r,Go],applyTransaction:[_r],applyTransactionAsync:[_r],flushAsyncTransactions:[_r],getBestCostNodeSelection:[_r],getServerSideSelectionState:[Go],setServerSideSelectionState:[Go],applyServerSideTransaction:[Go],applyServerSideTransactionAsync:[Go],applyServerSideRowData:[Go],retryServerSideLoads:[Go],flushServerSideAsyncTransactions:[Go],refreshServerSide:[Go],getServerSideGroupLevelState:[Go],refreshInfiniteCache:[Hv],purgeInfiniteCache:[Hv],getInfiniteRowCount:[Hv],isLastRowIndexKnown:[Hv,Go],expandAll:[_r,Go],collapseAll:[_r,Go],onRowHeightChanged:[_r,Go],setRowCount:[Hv,Go],getCacheBlockState:[Hv,Go]},wet={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function Det(e,t,i){const n=wet[e];if(n){const{version:o,new:r,old:a,message:l}=n,c=a??e;return(...u)=>{const d=r?`Please use ${r} instead. `:"";return Iw(`Since ${o} api.${c} is deprecated. ${d}${l??""}`),t.apply(t,u)}}const s=xet[e];return s?(...o)=>{const r=i.rowModel.getType();if(!s.includes(r)){kb(`api.${e} can only be called when gridOptions.rowModelType is ${s.join(" or ")}`);return}return t.apply(t,o)}:t}var Met={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",highlightTooltipFeature:"Tooltip",tooltipStateManager:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},Aet={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},ket={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},Tet=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),Iet=class extends we{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,eYe(ret)}warnOnInitialPropertyUpdate(e,t){e==="api"&&Cet[t]&&Ee(22,{key:t})}processGridOptions(e){this.processOptions(e,bQe())}validateApiFunction(e,t){return Det(e,t,this.beans)}missingUserComponent(e,t,i,n){const s=Ob[t];s?this.gos.assertModuleRegistered(s,`AG Grid '${e}' component: ${t}`):Ee(101,{propertyName:e,componentName:t,agGridDefaults:i,jsComps:n})}missingDynamicBean(e){const t=Met[e];return t?Iu(200,{...this.gos.getModuleErrorParams(),moduleName:t,reasonOrId:e}):void 0}checkRowEvents(e){Eet.has(e)&&Ee(10,{eventType:e})}validateIcon(e){if(Tet.has(e)&&Ee(43,{iconName:e}),Aet[e])return;const t=ket[e];if(t){Mi(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:vj(),gridId:this.beans.context.getId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}Ee(134,{iconName:e})}isProvidedUserComp(e){return!!Ob[e]}validateColDef(e){this.processOptions(e,lQe())}processOptions(e,t){const{validations:i,deprecations:n,allProperties:s,propertyExceptions:o,objectName:r,docsUrl:a}=t;s&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(n)],s,r,a);const l=new Set;if(Object.keys(e).forEach(u=>{const d=n[u];if(d){const{message:x,version:w}=d;l.add(`As of v${w}, ${String(u)} is deprecated. ${x??""}`)}const p=e[u];if(p==null||p===!1)return;const f=i[u];if(!f)return;const{dependencies:m,validate:v,supportedRowModels:b,expectedType:C}=f;if(C){const x=typeof p;if(x!==C){l.add(`${String(u)} should be of type '${C}' but received '${x}' (${p}).`);return}}if(b){const x=this.gridOptions.rowModelType??"clientSide";if(!b.includes(x)){l.add(`${String(u)} is not supported with the '${x}' row model. It is only valid with: ${b.join(", ")}.`);return}}if(m){const x=this.checkForRequiredDependencies(u,m,e);if(x){l.add(x);return}}if(v){const x=v(e,this.gridOptions,this.beans);if(x){l.add(x);return}}}),l.size>0)for(const u of l)Iw(u)}checkForRequiredDependencies(e,t,i){const s=Object.entries(t).filter(([o,r])=>{const a=i[o];return!r.required.includes(a)});return s.length===0?null:s.map(([o,r])=>`'${String(e)}' requires '${o}' to be one of [${r.required.map(a=>a===null?"null":a===void 0?"undefined":a).join(", ")}]. ${r.reason??""}`).join(`
           `)}checkProperties(e,t,i,n,s){const o=["__ob__","__v_skip","__metadata__"],r=Ret(Object.getOwnPropertyNames(e),[...o,...t,...i],i),a=Object.keys(r);for(const l of a){const c=r[l];let u=`invalid ${n} property '${l}' did you mean any of these: ${c.slice(0,8).join(", ")}.`;i.includes("context")&&(u+=`
If you are trying to annotate ${n} with application data, use the '${n}.context' property instead.`),Iw(u)}if(a.length>0&&s){const l=this.beans.frameworkOverrides.getDocLink(s);Iw(`to see all the valid ${n} properties please check: ${l}`)}}};function Ret(e,t,i){const n={},s=e.filter(o=>!t.some(r=>r===o));if(s.length>0)for(const o of s)n[o]=fz({inputValue:o,allSuggestions:i}).values;return n}var Eet=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),Let={moduleName:"Validation",version:Ge,beans:[Iet]};function aue(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter)}var Pet=class extends we{constructor(){super(...arguments),this.beanName="filterStage",this.step="filter",this.refreshProps=["excludeChildrenWhenTreeDataFiltering"]}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){const t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const i=(n,s)=>{n.hasChildren()&&e&&!s?n.childrenAfterFilter=n.childrenAfterGroup.filter(o=>{const r=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,a=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return r||a}):n.childrenAfterFilter=n.childrenAfterGroup,aue(n)};if(this.doingTreeDataFiltering()){const n=(o,r)=>{if(o.childrenAfterGroup)for(let a=0;a<o.childrenAfterGroup.length;a++){const l=o.childrenAfterGroup[a],c=r||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?n(o.childrenAfterGroup[a],c):i(l,c)}i(o,r)},s=o=>n(o,!1);t.executeFromRootNode(s)}else{const n=s=>i(s,!1);t.forEachChangedNodeDepthFirst(n,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},Net=class extends zj{constructor(){super(...arguments),this.iconCreated=!1}wireComp(e,t,i,n,s){this.comp=e;const o=cM(this,this.beans.context,s);this.eButtonShowMainFilter=i,this.eFloatingFilterBody=n,this.setGui(t,o),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(o),this.setupLeft(o),this.setupHover(o),this.setupFocus(o),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(o),this.setupUi(),o.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(o);const r=()=>this.onColDefChanged(o);o.addManagedListeners(this.column,{colDefChanged:r}),o.addManagedEventListeners({filterSwitched:({column:a})=>{a===this.column&&r()}}),o.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,i=e.colDef;return ct(t.gos,{colDef:i,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=kl("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new bC(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();hS(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){const{beans:t}=this;if(Cn(t)===this.eGui)return;const s=Ly(t,this.eGui,null,e.shiftKey);if(s){t.headerNavigation?.scrollToColumn(this.column),e.preventDefault(),s.focus();return}const o=this.findNextColumnWithFloatingFilter(e.shiftKey);o&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let i=this.column;do if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case pe.UP:case pe.DOWN:case pe.LEFT:case pe.RIGHT:if(t)return;$m(e);case pe.ENTER:t&&Um(this.eGui)&&e.preventDefault();break;case pe.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),n=!!e.relatedTarget&&bm(e.relatedTarget,"ag-floating-filter");if(i&&n&&e.target===this.eGui){const s=this.lastFocusEvent,o=!!(s&&s.key===pe.TAB);if(s&&o){const r=s.shiftKey;Um(this.eGui,r)}}this.focusThis()}setupHover(e){this.beans.colHover?.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new _j(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!xa(this.gos)}setupUserComp(){if(!this.active)return;const e=this.beans.colFilter?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{beans:{colFilter:t},column:i,gos:n}=this,s=o=>{if(o?.source==="filterDestroyed"&&(!this.isAlive()||!t?.isAlive()))return;const r=this.comp.getFloatingFilterComp();r&&r.then(a=>{if(a){if(n.get("enableFilterHandlers")){const u=o;let d="filter";u?.afterFloatingFilter?d="ui":u?.afterDataChange?d="dataChanged":o?.source==="api"&&(d="api"),this.updateFloatingFilterParams(this.userCompDetails,d);return}const l=t?.getCurrentFloatingFilterParentModel(i),c=o?{...o,columns:o.columns??[],source:o.source==="api"?"api":"columnFilter"}:null;a.onParentModelChanged(l,c)}})};[this.destroySyncListener]=e.addManagedListeners(i,{filterChanged:s}),t?.isFilterActive(i)&&s(null)}setupWidth(e){const t=()=>{const i=`${this.column.getActualWidth()}px`;this.comp.setWidth(i)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const n=this.beans.colFilter,s=this.active?n?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();!o||!s?this.updateCompDetails(e,s,i):o.then(r=>{!r||n?.areFilterCompsDifferent(this.userCompDetails??null,s)?this.updateCompDetails(e,s,i):this.updateFloatingFilterParams(s,"colDef")})}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){if(!e)return;let i=e.params;this.comp.getFloatingFilterComp()?.then(n=>{typeof n?.refresh=="function"&&(this.gos.get("enableFilterHandlers")&&(i={...i,model:Vs(this.beans.colFilter?.model??{},this.column.getColId()),source:t}),n.refresh(i))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function Oet(e,t){const i=e.colModel.getCol(t);if(!i){Mi(12,{colKey:t});return}e.menuSvc?.showColumnMenu({column:i,positionBy:"auto"})}function Fet(e){e.menuSvc?.hidePopupMenu()}var Bet={moduleName:"SharedMenu",version:Ge,beans:[aXe],apiFunctions:{showColumnMenu:Oet,hidePopupMenu:Fet}},_et=class extends F8e{postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getDefaultPopupParent(){return this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i,event:n}=e,s=t.getBoundingClientRect(),o=this.getParentRect();this.setAlignedTo(t,i);let r=!1;const a=()=>{const l=this.keepXYWithinBounds(i,s.top-o.top,0),c=i.clientWidth>0?i.clientWidth:200;r||(i.style.minWidth=`${c}px`,r=!0);const d=o.right-o.left-c;let p;return this.gos.get("enableRtl")?(p=m(),p<0&&(p=f(),this.setAlignedStyles(i,"left")),p>d&&(p=0,this.setAlignedStyles(i,"right"))):(p=f(),p>d&&(p=m(),this.setAlignedStyles(i,"right")),p<0&&(p=0,this.setAlignedStyles(i,"left"))),{x:p,y:l};function f(){return s.right-o.left-2}function m(){return s.left-o.left-c}};this.positionPopup({ePopup:i,keepWithinBounds:!0,updatePosition:a,postProcessCallback:()=>this.callPostProcessPopup(e,"subMenu",i,t,n instanceof MouseEvent?n:void 0)})}callPostProcessPopup(e,t,i,n,s){const o=this.gos.getCallback("postProcessPopup");if(o){const{column:r,rowNode:a}=e;o({column:r,rowNode:a,ePopup:i,type:t,eventSource:n,mouseEvent:s})}}getActivePopups(){return this.popupList.map(e=>e.element)}handleThemeChange(e){if(e.themeChanged){const t=this.beans.environment;for(const i of this.popupList)t.applyThemeClasses(i.wrapper)}}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isStopPropagation(e){return eh(e)}},sP={moduleName:"Popup",version:Ge,beans:[_et]},zet=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;>*{cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper,:where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}:where(.ag-floating-filter-full-body)>div{flex:1 1 auto}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>*{flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:calc(var(--ag-widget-container-vertical-padding) - var(--ag-widget-vertical-spacing));&>*{margin-bottom:var(--ag-widget-vertical-spacing)}:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function Get(e){const t=e.filterManager;return!!t?.isColumnFilterPresent()||!!t?.isAggregateFilterPresent()}function Vet(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function Het(e,t){const i=e.colModel.getColDefCol(t);if(i)return e.colFilter?.destroyFilter(i,"api")}function Wet(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function jet(e){return e.filterManager?.getFilterModel()??{}}function Uet(e,t,i){const{gos:n,colModel:s,colFilter:o}=e;i&&!n.get("enableFilterHandlers")&&(Ee(288),i=!1);const r=s.getColDefCol(t);return r?o?.getModelForColumn(r,i)??null:null}function $et(e,t,i){return e.filterManager?.setColumnFilterModel(t,i)??Promise.resolve()}function Ket(e,t){const i=e.colModel.getCol(t);if(!i){Mi(12,{colKey:t});return}e.menuSvc?.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"})}function Yet(e){e.menuSvc?.hideFilterMenu()}function Xet(e,t){const i=e.colModel.getCol(t);if(!i){Mi(12,{colKey:t});return}return e.colFilter?.getHandler(i,!0)}function Zet(e,t){const{colModel:i,colFilter:n,gos:s}=e;if(!s.get("enableFilterHandlers")){Ee(287);return}const{colId:o,action:r}=t;if(o){const a=i.getColById(o);a&&n?.updateModel(a,r)}else n?.updateAllModels(r)}var qet={filterHandler:()=>({doesFilterPass:()=>!0})},Qet=class extends we{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap={...lce},this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)});const e=this.gos,t={...e.get("initialState")?.filter?.filterModel??{}};this.initialModel=t,this.model={...t},e.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e,t="api",i){const{colModel:n,dataTypeSvc:s,filterManager:o}=this.beans;if(s?.isPendingInference){this.modelUpdates.push({model:e,source:t});return}const r=[],a=this.getModel(!0);if(e){const l=new Set(Object.keys(e));this.allColumnFilters.forEach((c,u)=>{const d=e[u];r.push(this.setModelOnFilterWrapper(c,d)),l.delete(u)}),l.forEach(c=>{const u=n.getColDefCol(c)||n.getCol(c);if(!u){Ee(62,{colId:c});return}if(!u.isFilterAllowed()){Ee(63,{colId:c});return}const d=this.getOrCreateFilterWrapper(u,!0);if(!d){Ee(64,{colId:c});return}r.push(this.setModelOnFilterWrapper(d,e[c],!0))})}else this.model={},this.allColumnFilters.forEach(l=>{r.push(this.setModelOnFilterWrapper(l,null))});qt.all(r).then(()=>{const l=this.getModel(!0),c=[];this.allColumnFilters.forEach((u,d)=>{const p=a?a[d]:null,f=l?l[d]:null;w0(p,f)||c.push(u.column)}),c.length>0?o?.onFilterChanged({columns:c,source:t}):i&&this.updateActive("filterChanged")})}getModel(e){const t={},{allColumnFilters:i,initialModel:n,beans:{colModel:s}}=this;if(i.forEach((o,r)=>{const a=this.getModelFromFilterWrapper(o);We(a)&&(t[r]=a)}),!e)for(const o of Object.keys(n)){const r=n[o];We(r)&&!i.has(o)&&s.getCol(o)?.isFilterAllowed()&&(t[o]=r)}return t}setState(e,t,i="api"){if(this.state.clear(),t)for(const n of Object.keys(t)){const s=t[n];this.state.set(n,{model:Vs(this.model,n),state:s})}this.setModel(e,i,!0)}getState(){const e=this.state;if(!e.size)return;const t={};let i=!1;return e.forEach((n,s)=>{const o=n.state;o!=null&&(i=!0,t[s]=o)}),i?t:void 0}getModelFromFilterWrapper(e){const i=e.column.getColId();if(e.isHandler)return Vs(this.model,i);const n=e.filter;return n?typeof n.getModel!="function"?(Ee(66),null):n.getModel():Vs(this.initialModel,i)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};const{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}updateActiveFilters(){const e=c=>c?c.isFilterActive?c.isFilterActive():(Ee(67),!1):!1,{colModel:t,gos:i}=this.beans,n=!!lz(i),s=c=>{if(!c.isPrimary())return!0;const d=!t.isPivotActive();return!c.isValueActive()||!d?!1:t.isPivotMode()?!0:n},o=[],r=[],a=(c,u,d)=>{u&&(s(c)?o.push(d):r.push(d))},l=[];return this.allColumnFilters.forEach(c=>{const u=c.column,d=u.getColId();if(c.isHandler)l.push(qt.resolve().then(()=>{a(u,this.isHandlerActive(u),{colId:d,isHandler:!0,handler:c.handler,handlerParams:c.handlerParams})}));else{const p=Mp(c);p&&l.push(p.then(f=>{a(u,e(f),{colId:d,isHandler:!1,comp:f})}))}}),qt.all(l).then(()=>{this.activeAggregateFilters=o,this.activeColumnFilters=r})}updateFilterFlagInColumns(e,t){const i=[];return this.allColumnFilters.forEach(n=>{const s=n.column;if(n.isHandler)i.push(qt.resolve().then(()=>{this.setColFilterActive(s,this.isHandlerActive(s),e,t)}));else{const o=Mp(n);o&&i.push(o.then(r=>{this.setColFilterActive(s,r.isFilterActive(),e,t)}))}}),this.beans.groupFilter?.updateFilterFlags(e,t),qt.all(i)}doFiltersPass(e,t,i){const{data:n,aggData:s}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,r=i?s:n,a=this.model;for(let l=0;l<o.length;l++){const c=o[l],{colId:u,isHandler:d}=c;if(u!==t)if(d){const{handler:p,handlerParams:f}=c;if(!p.doesFilterPass({node:e,data:r,model:Vs(a,u),handlerParams:f}))return!1}else{const p=c.comp;if(typeof p.doesFilterPass!="function"){Mi(91);continue}if(!p.doesFilterPass({node:e,data:r}))return!1}}return!0}getHandlerParams(e){const t=this.allColumnFilters.get(e.getColId());return t?.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:i}=this.beans,n=()=>{this.isAlive()&&i?.onFilterChanged(e)};t.isRefreshInProgress()?setTimeout(n,0):n()}updateBeforeFilterChanged(e={}){const{column:t,additionalEventAttributes:i}=e,n=t?.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(s=>{const{column:o,isHandler:r}=s;n!==o.getColId()&&(r&&s.handler.onAnyFilterChanged?.(),Mp(s,r)?.then(a=>{typeof a?.onAnyFilterChanged=="function"&&a.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){const t=[];this.allColumnFilters.forEach(i=>{const n=i.isHandler;n&&i.handler.onNewRowsLoaded?.();const s=Mp(i,n);s&&t.push(s.then(o=>{o.onNewRowsLoaded?.()}))}),qt.all(t).then(()=>this.updateActive(e,{afterDataChange:!0}))}updateActive(e,t){this.updateFilterFlagInColumns(e,t).then(()=>this.updateActiveFilters())}createGetValue(e,t){const{filterValueSvc:i,colModel:n}=this.beans;return(s,o)=>{const r=o?n.getCol(o):e;return r?i.getValue(r,s,t):void 0}}isFilterActive(e){const t=this.cachedFilter(e);if(t?.isHandler)return this.isHandlerActive(e);const i=t?.filter;return i?i.isFilterActive():Vs(this.initialModel,e.getColId())!=null}isHandlerActive(e){const t=We(Vs(this.model,e.getColId()));if(t)return t;const i=this.beans.groupFilter;return i?.isGroupFilter(e)?i.isFilterActive(e):!1}getOrCreateFilterUi(e){const t=this.getOrCreateFilterWrapper(e,!0);return t?Mp(t):null}getFilterUiForDisplay(e){const t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;const i=Mp(t);return i?i.then(n=>({comp:n,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){const i=this.getOrCreateFilterWrapper(e,t);return i?.isHandler?i.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let i=this.cachedFilter(e);return!i&&t&&(i=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,i)),i}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>this.beans.dataTypeSvc?.getBaseDataType(e),t)}getDefaultFilterFromDataType(e,t=!1){return mYe(this.gos)?t?"agSetColumnFloatingFilter":"agSetColumnFilter":r9e(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,i,n,s,o){const r=()=>{const c=this.createFilterCompParams(e,s,o),u=n(c,s);return C6e(this.beans.userCompFactory,t,u,i)},a=r();return a?{compDetails:a,createFilterUi:c=>(c?r():a).newAgStackInstance()}:null}createFilterInstance(e,t,i,n){const s=this.beans.selectableFilter;s?.isSelectable(t)&&(t=s.getFilterDef(e,t));const{handler:o,handlerParams:r,handlerGenerator:a}=this.createHandler(e,t,i)??{},l=this.createFilterComp(e,t,i,n,!!o,"init");if(!l)return{compDetails:null,createFilterUi:null,handler:o,handlerGenerator:a,handlerParams:r};const{compDetails:c,createFilterUi:u}=l;return this.isGlobalButtons&&(c.params?.buttons?.length||Ee(281,{colId:e.getColId()})),{compDetails:c,handler:o,handlerGenerator:a,handlerParams:r,createFilterUi:u}}createBaseFilterParams(e,t){const{filterManager:i,rowModel:n}=this.beans;return ct(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:s=>i?.doesRowPassOtherFilters(e.getColId(),s)??!0,rowModel:n})}createFilterCompParams(e,t,i,n){const s=this.filterChangedCallbackFactory(e),o=this.createBaseFilterParams(e,n);if(o.filterChangedCallback=s,o.filterModifiedCallback=n?()=>{}:r=>this.filterModified(e,r),t){const r=o,a=e.getColId(),l=Vs(this.model,a);r.model=l,r.state=this.state.get(a)??{model:l},r.onModelChange=(c,u)=>{this.updateStoredModel(a,c),this.refreshHandlerAndUi(e,c,"ui",!1,u).then(()=>{s({...u,source:"columnFilter"})})},r.onStateChange=c=>{this.updateState(e,c),this.updateOrRefreshFilterUi(e)},r.onAction=(c,u,d)=>{this.updateModel(e,c,u),this.dispatchLocalEvent({type:"filterAction",column:e,action:c,event:d})},r.getHandler=()=>this.getHandler(e,!0),r.onUiChange=c=>this.filterUiChanged(e,c),r.source=i}return o}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,i){const n=t(),s={created:!0,create:t,filterParams:e.params,compDetails:e,promise:n};return n.then(i),s}createFilterWrapper(e){const{compDetails:t,handler:i,handlerGenerator:n,handlerParams:s,createFilterUi:o}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),a=>a),r=e.getColId();if(i)return delete this.initialModel[r],i.init?.({...s,source:"init",model:Vs(this.model,r)}),{column:e,isHandler:!0,handler:i,handlerGenerator:n,handlerParams:s,filterUi:this.createFilterUiForHandler(t,o)};if(o){const a={column:e,filterUi:null,isHandler:!1};return a.filterUi=this.createFilterUiLegacy(t,o,l=>{a.filter=l??void 0}),a}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t,i){const{gos:n,frameworkOverrides:s,registry:o}=this.beans;let r;const a=f=>{const m=f.filter;if(Ble(m)){const v=m.handler;return v||(r=m.doesFilterPass,r?()=>({doesFilterPass:r}):void 0)}return typeof m=="string"?m:void 0},l=n.get("enableFilterHandlers"),c=l?a(t):void 0,u=f=>()=>this.createBean(o.createDynamicBean(f,!0));let d,p;if(typeof c=="string"){const f=n.get("filterHandlers")?.[c];f!=null?d=f:Y8e.has(c)&&(d=u(c),p=c)}else d=c;if(!d){let f;const{compName:m,jsComp:v,fwComp:b}=Gle(s,t);m?f=m:v==null&&b==null&&t.filter===!0&&(f=i),p=this.handlerMap[f],p&&(d=u(p))}return d?{filterHandler:d,handlerNameOrCallback:r??p}:l?(Ln(n)&&Ee(277,{colId:e.getColId()}),qet):void 0}createHandler(e,t,i){const n=this.createHandlerFunc(e,t,i);if(!n)return;const s=H2(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:o,filterHandler:r}=n,{handler:a,handlerParams:l}=this.createHandlerFromFunc(e,r,s);return{handler:a,handlerParams:l,handlerGenerator:o??r}}createHandlerFromFunc(e,t,i){const n=e.getColDef(),s=t(ct(this.gos,{column:e,colDef:n})),o=this.createHandlerParams(e,i);return{handler:s,handlerParams:o}}createHandlerParams(e,t){const i=e.getColDef(),n=e.getColId(),s=this.filterChangedCallbackFactory(e);return ct(this.gos,{colDef:i,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:o=>this.beans.filterManager?.doesRowPassOtherFilters(n,o)??!0,onModelChange:(o,r)=>{this.updateStoredModel(n,o),this.refreshHandlerAndUi(e,o,"handler",!1,r).then(()=>{s({...r,source:"columnFilter"})})},filterParams:t})}onColumnsChanged(){const e=[],{colModel:t,filterManager:i,groupFilter:n}=this.beans;this.allColumnFilters.forEach((o,r)=>{let a;o.column.isPrimary()?a=t.getColDefCol(r):a=t.getCol(r),!(a&&a===o.column)&&(e.push(o.column),this.disposeFilterWrapper(o,"columnChanged"),this.disposeColumnListener(r))});const s=n&&e.every(o=>n.isGroupFilter(o));e.length>0&&!s&&i?.onFilterChanged({columns:e,source:"api"})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const i=this.beans.groupFilter;return i?.isGroupFilter(e)?i.isFilterAllowed(e):!0}getFloatingFilterCompDetails(e,t){const{userCompFactory:i,frameworkOverrides:n,selectableFilter:s}=this.beans,o=p=>{const f=this.getOrCreateFilterUi(e);f?.then(m=>{p(R0(m))})},r=e.getColDef(),a=s?.isSelectable(r)?s.getFilterDef(e,r):r,l=d9e(n,a,()=>this.getDefaultFloatingFilter(e))??"agReadOnlyFloatingFilter",c=this.gos.get("enableFilterHandlers"),u=H2(i,a,this.createFilterCompParams(e,c,"init",!0)),d=ct(this.gos,{column:e,filterParams:u,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:o,showParentFilter:t});if(c){const p=d,f=e.getColId(),m=this.filterChangedCallbackFactory(e);p.onUiChange=v=>this.floatingFilterUiChanged(e,v),p.model=Vs(this.model,f),p.onModelChange=(v,b)=>{this.updateStoredModel(f,v),this.refreshHandlerAndUi(e,v,"floating",!0,b).then(()=>{m({...b,source:"columnFilter"})})},p.getHandler=()=>this.getHandler(e,!0),p.source="init"}return A6e(i,r,d,l)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,i,n){const s="paramsUpdated";if(e.isHandler){const o=t.getColId();delete this.initialModel[o],this.state.delete(o);const r=e.filterUi,a=this.createFilterUiForHandler(i,n);e.filterUi=a;const l=this.eventSvc;r?.created?r.promise.then(c=>{this.destroyBean(c),l.dispatchEvent({type:"filterDestroyed",source:s,column:t})}):l.dispatchEvent({type:"filterHandlerDestroyed",source:s,column:t})}else this.destroyFilter(t,s)}destroyFilter(e,t="api"){const i=e.getColId(),n=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialModel[i],n&&this.disposeFilterWrapper(n,t).then(s=>{s&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[e],source:"api"})})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let i=!1;const{column:n,isHandler:s,filterUi:o}=e,r=n.getColId();s&&(i=this.isHandlerActive(n),this.destroyBean(e.handler),delete this.model[r],this.state.delete(r));const a=()=>{this.setColFilterActive(n,!1,"filterDestroyed"),this.allColumnFilters.delete(r),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:n})};if(o){if(o.created)return o.promise.then(l=>(i=s?i:!!l?.isFilterActive(),this.destroyBean(l),a(),i));a()}return qt.resolve(i)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:t?.source??"columnFilter"})}}filterParamsChanged(e,t="api"){const i=this.allColumnFilters.get(e);if(!i)return;const n=this.beans,s=i.column,o=s.getColDef(),r=s.isFilterAllowed(),a=this.getDefaultFilter(s),l=n.selectableFilter,c=l?.isSelectable(o)?l.getFilterDef(s,o):o,u=r?this.createHandlerFunc(s,c,this.getDefaultFilter(s)):void 0,d=!!u,p=i.isHandler;if(p!=d){this.destroyFilter(s,"paramsUpdated");return}const{compDetails:f,createFilterUi:m}=(r?this.createFilterComp(s,c,a,b=>b,d,"colDef"):null)??{compDetails:null,createFilterUi:null},v=f?.params??H2(n.userCompFactory,c,this.createFilterCompParams(s,d,"colDef"));if(p){const b=u?.handlerNameOrCallback??u?.filterHandler,C=Vs(this.model,e);if(i.handlerGenerator!=b){const x=i.handler,{handler:w,handlerParams:M}=this.createHandlerFromFunc(s,u.filterHandler,v);i.handler=w,i.handlerParams=M,i.handlerGenerator=b,delete this.model[e],w.init?.({...M,source:"init",model:null}),this.destroyBean(x),C!=null&&this.beans.filterManager?.onFilterChanged({columns:[s],source:t})}else{const x=this.createHandlerParams(s,f?.params);i.handlerParams=x,i.handler.refresh?.({...x,source:"colDef",model:C})}}if(this.areFilterCompsDifferent(i.filterUi?.compDetails??null,f)||!i.filterUi||!f){this.destroyFilterUi(i,s,f,m);return}i.filterUi.filterParams=v,Mp(i,p)?.then(b=>{(b?.refresh?b.refresh(v):!0)===!1?this.destroyFilterUi(i,s,f,m):this.dispatchLocalEvent({type:"filterParamsChanged",column:s,params:v})})}refreshHandlerAndUi(e,t,i,n,s){const o=this.cachedFilter(e);if(!o)return n&&this.getOrCreateFilterWrapper(e,!0),qt.resolve();if(!o.isHandler)return qt.resolve();const{filterUi:r,handler:a,handlerParams:l}=o;return X8e(()=>{if(r){const{created:c,filterParams:u}=r;if(c)return r.promise.then(d=>d?{filter:d,filterParams:u}:void 0);r.refreshed=!0}return qt.resolve(void 0)},a,l,t,this.state.get(e.getColId())??{model:t},i,s)}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:n}=t;return!(i===n||i?.render&&n?.render&&i.render===n.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);const i=this.getOrCreateFilterUi(t);return i?new Promise(n=>{i.then(s=>{n(R0(s))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:i})=>{this.setModelForColumn(e,t).then(()=>i())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){const{state:n,model:s}=this,o=e.getColId(),r=n.get(o);return r?r.model??null:Vs(s,o)}const i=this.cachedFilter(e);return i?this.getModelFromFilterWrapper(i):null}setModelForColumn(e,t){if(this.beans.dataTypeSvc?.isPendingInference){let i=()=>{};const n=new Promise(s=>{i=s});return this.columnModelUpdates.push({key:e,model:t,resolve:i}),n}return new Promise(i=>{this.setModelForColumnLegacy(e,t).then(n=>i(n))})}getStateForColumn(e){return this.state.get(e)??{model:Vs(this.model,e)}}setModelForColumnLegacy(e,t){const i=this.beans.colModel.getColDefCol(e),n=i?this.getOrCreateFilterWrapper(i,!0):null;return n?this.setModelOnFilterWrapper(n,t):qt.resolve()}setColDefPropsForDataType(e,t,i){const n=e.filter,s=n===!0?this.getDefaultFilterFromDataType(()=>t.baseDataType):n;if(typeof s!="string")return;let o,r;const a=this.beans,{filterParams:l,filterValueGetter:c}=e;s==="agMultiColumnFilter"?{filterParams:o,filterValueGetter:r}=a.multiFilter?.getParamsForDataType(l,c,t,i)??{}:{filterParams:o,filterValueGetter:r}=n9e(s,l,c,t,i,a,this.getLocaleTextFunc()),e.filterParams=o,r&&(e.filterValueGetter=r)}setColFilterActive(e,t,i,n){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",i)),e.dispatchColEvent("filterChanged",i,n)}setModelOnFilterWrapper(e,t,i){return new qt(n=>{if(e.isHandler){const o=e.column,r=o.getColId(),a=this.model[r];if(this.updateStoredModel(r,t),i&&t===a){n();return}this.refreshHandlerAndUi(o,t,"api").then(()=>n());return}const s=Mp(e);if(s){s.then(o=>{if(typeof o?.setModel!="function"){Ee(65),n();return}(o.setModel(t)||qt.resolve()).then(()=>n())});return}n()})}updateStoredModel(e,t){We(t)?this.model[e]=t:delete this.model[e];const i=this.state.get(e),n={model:t,state:i?.state};this.state.set(e,n)}filterModified(e,t){this.getOrCreateFilterUi(e)?.then(i=>{this.eventSvc.dispatchEvent({type:"filterModified",column:e,filterInstance:i,...t})})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"filterUiChanged",column:e,...t})}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"floatingFilterUiChanged",column:e,...t})}updateModel(e,t,i){const n=e.getColId(),s=this.cachedFilter(e),o=()=>s?.filterUi;bq(t,o,()=>Vs(this.model,n),()=>this.state.get(n),r=>this.updateState(e,r),r=>o()?.filterParams?.onModelChange(r,i),s?.isHandler?s.handler.processModelToApply?.bind(s.handler):void 0)}updateAllModels(e,t){const i=[];this.allColumnFilters.forEach((n,s)=>{const o=this.beans.colModel.getColDefCol(s);o&&bq(e,()=>n.filterUi,()=>Vs(this.model,s),()=>this.state.get(s),r=>this.updateState(o,r),r=>{this.updateStoredModel(s,r),this.dispatchLocalEvent({type:"filterAction",column:o,action:e}),i.push(this.refreshHandlerAndUi(o,r,"ui"))},n?.isHandler?n.handler.processModelToApply?.bind(n.handler):void 0)}),i.length&&qt.all(i).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){const t=e.getColId();uce(()=>this.cachedFilter(e)?.filterUi,()=>Vs(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){const{state:e,model:t,activeFilterComps:i}=this;for(const s of i)if(s.source==="COLUMN_MENU")return!1;let n=!1;for(const s of e.keys()){const o=e.get(s);if(o.valid===!1)return!1;(o.model??null)!==Vs(t,s)&&(n=!0)}return n}hasUnappliedModel(e){const{model:t,state:i}=this;return(i.get(e)?.model??null)!==Vs(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if(t==="newFiltersToolPanel")return!0;const i=this.beans.filterPanelSvc;return i?.isActive?!!i.getState(e.getColId()):!1}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function Jet(e){return!!e.filterManager?.isAnyFilterPresent()}function ett(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var ttt=class extends we{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:n})=>this.onAdvFilterEnabledChanged(n),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:i}=this;this.alwaysPassFilter=i.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=i.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterState(e,t,i="api"){this.isAdvFilterEnabled()||this.colFilter?.setState(e,t,i)}setFilterModel(e,t="api",i){if(this.isAdvFilterEnabled()){i||this.warnAdvFilters();return}this.colFilter?.setModel(e,t)}getFilterModel(){return this.colFilter?.getModel()??{}}getFilterState(){return this.colFilter?.getState()}isColumnFilterPresent(){return!!this.colFilter?.isFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){e?this.colFilter?.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){lz(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:i,columns:n=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):qt.resolve()).then(()=>{const s={source:t,type:"filterChanged",columns:n};i&&mr(s,i),this.eventSvc.dispatchEvent(s),this.colFilter?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!lz(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){const{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){const{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.isFilterAllowed(e)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){if(this.isAdvFilterEnabled()){if(this.beans.dataTypeSvc?.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getFilterInstance(e)??Promise.resolve(void 0)}warnAdvFilters(){Ee(68)}setupAdvFilterHeaderComp(e){this.advancedFilter?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){for(const e of this.advFilterModelUpdateQueue)this.setAdvFilterModel(e);this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setModelForColumn(e,t)??Promise.resolve()}},itt=class extends we{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(e,t,i,n){e&&!e.isColumn||this.showPopup(e,s=>{this.popupSvc?.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:s})},i,t.target,xa(this.gos),n)}showMenuAfterButtonClick(e,t,i,n){if(e&&!e.isColumn)return;let s=-1,o="left";const r=xa(this.gos);!r&&this.gos.get("enableRtl")&&(s=1,o="right");const a=r?void 0:4*s,l=r?void 0:4;this.showPopup(e,c=>{this.popupSvc?.positionPopupByComponent({type:i,eventSource:t,ePopup:c,nudgeX:a,nudgeY:l,alignSide:o,keepWithinBounds:!0,position:"under",column:e})},i,t,r,n)}showPopup(e,t,i,n,s,o){const r=e?this.createBean(new t9e(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!r?.hasFilter()||!e){Mi(57);return}const a=br({tag:"div",cls:`ag-menu${s?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(a,{keydown:v=>this.trapFocusWithin(v,a)}),a.appendChild(r?.getGui());let l;const c=()=>r?.afterGuiDetached(),u=yYe(this.gos)?n??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,d=v=>{kq(e,!1,"contextMenu");const b=v instanceof KeyboardEvent;this.tabListener&&(this.tabListener=this.tabListener()),b&&n&&Fh(n)&&$le(n)?.focus({preventScroll:!0}),c(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e),o?.()},p=this.getLocaleTextFunc(),f=s&&i!=="columnFilter"?p("ariaLabelColumnMenu","Column Menu"):p("ariaLabelColumnFilter","Column Filter"),m=this.popupSvc?.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:d,positionCallback:()=>t(a),anchorToElement:u,ariaLabel:f});m&&(this.hidePopup=l=m.hideFunc),r.afterInit().then(()=>{t(a),r.afterGuiAttached({container:i,hidePopup:l})}),kq(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==pe.TAB||e.defaultPrevented||Ly(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),Um(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},ntt=class extends we{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,i){if(!t)return;const n=e.getColDef(),{selectableFilter:s,valueSvc:o}=this.beans,r=i??s?.getFilterValueGetter(e.getColId())??n.filterValueGetter;return r?this.executeFilterValueGetter(r,t.data,e,t,n):o.getValue(e,t)}executeFilterValueGetter(e,t,i,n,s){const{expressionSvc:o,valueSvc:r}=this.beans,a=ct(this.gos,{data:t,node:n,column:i,colDef:s,getValue:r.getValueCallback.bind(r,n)});return typeof e=="function"?e(a):o?.evaluate(e,a)}},stt={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},ott=class extends An{constructor(){super(stt,[Q1]),this.eFloatingFilterText=ot}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){const i=e,n=i.getHandler();if(n.getModelAsString){const s=n.getModelAsString(i.model);this.eFloatingFilterText.setValue(s)}}}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}refresh(e){this.init(e)}},Uj=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){const i=e.filterOptions??t;this.filterOptions!==i&&(this.filterOptions=i,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){const{filterOptions:e}=this;if(e)for(const t of e){if(typeof t=="string")continue;const i=[["displayKey"],["displayName"],["predicate","test"]],n=s=>s.some(o=>t[o]!=null)?!0:(Ee(72,{keys:s}),!1);if(!i.every(n)){this.filterOptions=e.filter(s=>s===t)||[];continue}this.customFilterOptions[t.displayKey]=t}}getDefaultItem(e){const{filterOptions:t}=this;if(e)return e;if(t.length>=1){const i=t[0];if(typeof i=="string")return i;if(i.displayKey)return i.displayKey;Ee(73)}else Ee(74)}getCustomOption(e){return this.customFilterOptions[e]}};function Nw(e,t,i){return i==null?e.splice(t):e.splice(t,i)}function VR(e){return e==null||typeof e=="string"&&e.trim().length===0}function rtt(e){return e==="AND"||e==="OR"?e:"AND"}function att(e,t,i){if(e==null)return;const{predicate:n}=e;if(n!=null&&!t.some(s=>s==null))return n(t,i)}function ltt(e,t){let i=e.length;return i>t&&(e.splice(t),Ee(78),i=t),i}function N0(e,t){const i=t.getCustomOption(e);if(i){const{numberOfInputs:s}=i;return s??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}var $j=class extends u9e{constructor(e,t,i){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=i,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);const t=new Uj;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){this.setNumConditions(e),this.defaultJoinOperator=rtt(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions();const t=this.getGui();this.isReadOnly()?t.setAttribute("tabindex","-1"):t.removeAttribute("tabindex")}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{const n=i===0?e:this.optionsFactory.defaultOption;t.setValue(n,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOrs:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areNonNullModelsEqual(e,t){const i=!e.operator,n=!t.operator;if(!i&&n||i&&!n)return!1;let o;if(i){const r=e,a=t;o=this.areSimpleModelsEqual(r,a)}else{const r=e,a=t;o=r.operator===a.operator&&$g(r.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return o}setModelIntoUi(e,t){if(e==null)return this.resetUiToDefaults(t),qt.resolve();if(e.operator){const n=e;let s=n.conditions;s==null&&(s=[],Ee(77));const o=ltt(s,this.maxNumConditions),r=this.getNumConditions();if(o<r)this.removeConditionsAndOperators(o);else if(o>r)for(let l=r;l<o;l++)this.createJoinOperatorPanel(),this.createOption();const a=n.operator==="OR";this.eJoinAnds.forEach(l=>l.setValue(!a,!0)),this.eJoinOrs.forEach(l=>l.setValue(a,!0)),s.forEach((l,c)=>{this.eTypes[c].setValue(l.type,!0),this.setConditionIntoUi(l,c)})}else{const n=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(n.type,!0),this.setConditionIntoUi(n,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),qt.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(Ee(79),t=1),this.maxNumConditions=t;let i=e.numAlwaysVisibleConditions??1;i<1&&(Ee(80),i=1),i>t&&(Ee(81),i=t),this.numAlwaysVisibleConditions=i}createOption(){const e=this.getGui(),t=this.createManagedBean(new kj);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());const i=this.createEValue();this.eConditionBodies.push(i),e.appendChild(i),this.putOptionsIntoDropdown(t),this.resetType(t);const n=this.getNumConditions()-1;this.forEachPositionInput(n,s=>this.resetInput(s)),this.addChangedListeners(t,n)}createJoinOperatorPanel(){const e=br({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);const t=this.createJoinOperator(this.eJoinAnds,e,"and"),i=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);const n=this.eJoinPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(t,n,s),this.resetJoinOperatorOr(i,n,s),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const n=this.createManagedBean(new V6e);e.push(n);const s="ag-filter-condition-operator";return n.addCss(s),n.addCss(`${s}-${i}`),t.appendChild(n.getGui()),n}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;for(const i of t)e.addOption(i);e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const i=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<i){this.removeConditionsAndOperators(i+1);const n=e+1,s=i-n;s>0&&this.removeConditionsAndOperators(n,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((n,s)=>{const o=this.isConditionDisabled(s,e);n.setDisabled(o||this.filterListOptions.length<=1),s===1&&(M0(this.eJoinPanels[0],o),this.eJoinAnds[0].setDisabled(o),this.eJoinOrs[0].setDisabled(o))}),this.eConditionBodies.forEach((n,s)=>{pn(n,this.isConditionBodyVisible(s))});const i=(t??this.getJoinOperator())==="OR";for(const n of this.eJoinAnds)n.setValue(!i,!0);for(const n of this.eJoinOrs)n.setValue(i,!0);this.forEachInput((n,s,o,r)=>{this.setElementDisplayed(n,s<r),this.setElementDisabled(n,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:i,eConditionBodies:n,eJoinPanels:s,eJoinAnds:o,eJoinOrs:r}=this;this.removeComponents(i,e,t),this.removeElements(n,e,t),this.removeEValues(e,t);const a=Math.max(e-1,0);this.removeElements(s,a,t),this.removeComponents(o,a,t),this.removeComponents(r,a,t)}removeElements(e,t,i){const n=Nw(e,t,i);for(const s of n)ug(s)}removeComponents(e,t,i){const n=Nw(e,t,i);for(const s of n)ug(s.getGui()),this.destroyBean(s)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus){let t;if(!this.isReadOnly()){const i=this.getInputs(0)[0];i instanceof am&&this.isConditionBodyVisible(0)?t=i.getInputElement():t=this.eTypes[0]?.getFocusableElement()}(t??this.getGui()).focus({preventScroll:!0})}}afterGuiDetached(){super.afterGuiDetached();const e=this.params;if(this.beans.colFilter?.shouldKeepStateOnDetach(e.column))return;e.onStateChange({model:e.model});let t=-1,i=-1,n=!1;const s=this.getJoinOperator();for(let r=this.getNumConditions()-1;r>=0;r--)if(this.isConditionUiComplete(r))t===-1&&(t=r,i=r);else{const a=r>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(r-1),l=r<t;(a||l)&&(this.removeConditionsAndOperators(r,1),n=!0,l&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,s),n&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getModelAsString(e){return this.params.getHandler()?.getModelAsString?.(e)??""}getPlaceholderText(e,t){let i=this.translate(e);if(typeof this.filterPlaceholder=="function"){const n=this.eTypes[t].getValue(),s=this.translate(n);i=this.filterPlaceholder({filterOptionKey:n,filterOption:s,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.getLocaleTextFunc();this.forEachInput((t,i,n,s)=>{if(!(t instanceof am))return;const o=i===0&&s>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",r=i===0&&s>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,n)),t.setInputAriaLabel(r)})}setElementValue(e,t,i){e instanceof am&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){lq(e)&&pn(e.getGui(),t)}setElementDisabled(e,t){lq(e)&&M0(e.getGui(),t)}attachElementOnChange(e,t){e instanceof am&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const n=N0(t,this.optionsFactory),s=this.getInputs(e);for(let o=0;o<s.length;o++){const r=s[o];r!=null&&i(r,o,e,n)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return N0(t,this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinAnds.forEach((t,i)=>this.resetJoinOperatorAnd(t,i,this.joinOperatorId+i)),this.eJoinOrs.forEach((t,i)=>this.resetJoinOperatorOr(t,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){const i=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),i)}resetJoinOperator(e,t,i,n,s){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(n),t)}updateJoinOperatorsDisabled(){const e=(t,i)=>this.updateJoinOperatorDisabled(t,i);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((n,s,o)=>{o===t&&this.setElementValue(n,i[s]!=null?i[s]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,n)=>{this.setElementValue(t,i===0&&n===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,i=>{this.attachElementOnChange(i,this.listener)}))}hasInvalidInputs(){return!1}isReadOnly(){return!!this.params.readOnly}},lue=class{constructor(e,t,i,n,s,o){this.alive=!0,this.context=e,this.eParent=s;const r=x6e(t,i,n);r&&r.newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}if(this.dateComp=a,!a)return;s.appendChild(a.getGui()),a?.afterGuiAttached?.();const{tempValue:l,disabled:c}=this;l&&a.setDate(l),c!=null&&a.setDisabled?.(c),o?.(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){const t=this.dateComp;t?t.setDisabled?.(e):this.disabled=e}setDisplayed(e){pn(this.eParent,e)}setInputPlaceholder(e){this.dateComp?.setInputPlaceholder?.(e)}setInputAriaLabel(e){this.dateComp?.setInputAriaLabel?.(e)}afterGuiAttached(e){this.dateComp?.afterGuiAttached?.(e)}updateParams(e){this.dateComp?.refresh?.(e)}},Kj=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function cue(e,t){const{dateFrom:i,dateTo:n,type:s}=e||{};return[i&&Qr(i,void 0,!0)||null,n&&Qr(n,void 0,!0)||null].slice(0,N0(s,t))}var l7=1e3,c7=1/0,ctt=class extends $j{constructor(){super("dateFilter",cue,Kj),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=l7,this.maxValidYear=c7,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);const t=(l,c)=>{const u=e[l];if(u!=null)if(isNaN(u))Ee(82,{param:l});else return u==null?c:Number(u);return c},i=t("minValidYear",l7),n=t("maxValidYear",c7);this.minValidYear=i,this.maxValidYear=n,i>n&&Ee(83);const{minValidDate:s,maxValidDate:o}=e,r=s instanceof Date?s:Qr(s);this.minValidDate=r;const a=o instanceof Date?o:Qr(o);this.maxValidDate=a,r&&a&&r>a&&Ee(84)}createDateCompWrapper(e){const{beans:{userCompFactory:t,context:i,gos:n},params:s}=this,o=new lue(i,t,s.colDef,ct(n,{onDateChanged:()=>this.onUiChanged(),filterParams:s,location:"filter"}),e);return this.addDestroyFunc(()=>o.destroy()),o}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){const e=br({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,n){const s=br({tag:"div",cls:`ag-filter-${n} ag-filter-date-${n}`});t.push(s),e.appendChild(s),i.push(this.createDateCompWrapper(s))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),Nw(this.eConditionPanelsFrom,e,t),Nw(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){const n=Nw(e,t,i);for(const s of n)s.destroy()}isValidDateValue(e){if(e===null)return!1;const{minValidDate:t,maxValidDate:i,minValidYear:n,maxValidYear:s}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<n)return!1;if(i){if(e>i)return!1}else if(e.getUTCFullYear()>s)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,n,s,o)=>{s!==e||!t||n>=o||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),i={},n=this.getValues(e),s=this.params.useIsoSeparator?"T":" ";return n.length>0&&(i.dateFrom=Ta(n[0],!0,s)),n.length>1&&(i.dateTo=Ta(n[1],!0,s)),{dateFrom:null,dateTo:null,filterType:this.filterType,type:t,...i}}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(n=>{n.setInputPlaceholder(t),n.setInputAriaLabel(i)})}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,n,s,o)=>{n<o&&t.push(i.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}},uue=class extends we{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){const t=e.filterParams,i=new Uj;this.optionsFactory=i,i.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(i,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if(e.source==="colDef"){const t=e.filterParams,i=this.optionsFactory;i.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:i,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){const t=e.model;if(t==null)return!0;const{operator:i}=t,n=[];if(i){const r=t;n.push(...r.conditions??[])}else n.push(t);const s=i&&i==="OR"?"some":"every",o=this.params.getValue(e.node);return n[s](r=>this.individualConditionPasses(e,r,o))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??""}validateModel(e){const{model:t,filterParams:{filterOptions:i,maxNumConditions:n}}=e;if(t==null)return;let o=pce(t)?t.conditions:[t];const r=i?.map(u=>typeof u=="string"?u:u.displayKey)??this.defaultOptions;if(!(!o||o.every(u=>r.find(d=>d===u.type)!==void 0))){this.params={...e,model:null},e.onModelChange(null);return}let l=!1;const c=this.filterType;if((o&&!o.every(u=>u.filterType===c)||t.filterType!==c)&&(o=o.map(u=>({...u,filterType:c})),l=!0),typeof n=="number"&&o&&o.length>n&&(o=o.slice(0,n),l=!0),l){const u=o.length>1?{...t,filterType:c,conditions:o}:{...o[0],filterType:c};this.params={...e,model:u},e.onModelChange(u)}}individualConditionPasses(e,t,i){const n=this.optionsFactory,s=this.mapValuesFromModel(t,n),o=n.getCustomOption(t.type),r=att(o,s,i);return r??(i==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,i,t,e))}},due=class extends uue{evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:i,includeBlanksInGreaterThan:n,includeBlanksInLessThan:s,includeBlanksInRange:o}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(i)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(n)return!0;break;case"lessThan":case"lessThanOrEqual":if(s)return!0;break;case"inRange":if(o)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const n=i.type;if(!this.isValid(t))return n==="notEqual"||n==="notBlank";const s=this.comparator(),o=e[0]!=null?s(e[0],t):0;switch(n){case"equals":return o===0;case"notEqual":return o!==0;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{const r=s(e[1],t);return this.params.filterParams.inRangeInclusive?o>=0&&r<=0:o>0&&r<0}case"blank":return VR(t);case"notBlank":return!VR(t);default:return Ee(76,{filterModelType:n}),!0}}},hue={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},utt={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},Yj=class extends we{constructor(e,t,i){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=i}getModelAsString(e,t){const i=this.getLocaleTextFunc(),n=t==="filterToolPanel";if(!e)return n?zp(this,"filterSummaryInactive"):null;if(e.operator!=null){const o=e,a=(o.conditions??[]).map(c=>this.getModelAsString(c,t)),l=o.operator==="AND"?"andCondition":"orCondition";return a.join(` ${zp(this,l)} `)}else{if(e.type==="blank"||e.type==="notBlank")return n?zp(this,e.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):i(e.type,e.type);{const o=e,r=this.optionsFactory.getCustomOption(o.type),{displayKey:a,displayName:l,numberOfInputs:c}=r||{};return a&&l&&c===0?i(a,l):this.conditionToString(o,n,o.type==="inRange"||c===2,a,l)}}}updateParams(e){const{optionsFactory:t,filterParams:i}=e;this.optionsFactory=t,this.filterParams=i}conditionForToolPanel(e,t,i,n,s,o){let r;const a=this.getTypeKey(e);return a&&(r=zp(this,a)),s&&o&&(r=this.getLocaleTextFunc()(s,o)),r!=null?t?`${r} ${zp(this,"filterSummaryInRangeValues",[i(),n()])}`:`${r} ${i()}`:null}getTypeKey(e){const t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}},pue=class extends Yj{constructor(e,t){super(e,t,i=>{const{dataTypeSvc:n,valueSvc:s}=this.beans,o=t.column,r=n?.getDateFormatterFunction(o),a=r?r(i??void 0):i;return s.formatValue(o,null,a)}),this.filterTypeKeys=hue}conditionToString(e,t,i,n,s){const{type:o}=e,r=Qr(e.dateFrom),a=Qr(e.dateTo),l=this.filterParams.inRangeFloatingFilterDateFormat,c=t?this.formatValue.bind(this):p=>gz(p,l),u=()=>r!==null?c(r):"null",d=()=>a!==null?c(a):"null";if(t){const p=this.conditionForToolPanel(o,i,u,d,n,s);if(p!=null)return p}return i?`${u()}-${d()}`:r!=null?c(r):`${o}`}};function dtt(e,t){const i=t;return i<e?-1:i>e?1:0}var htt=class extends due{constructor(){super(cue,Kj),this.filterType="date",this.FilterModelFormatterClass=pue}comparator(){return this.params.filterParams.comparator??dtt}isValid(e){const t=this.params.filterParams.isValidDate;return!t||t(e)}},gue=class extends An{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}const t=e.operator;let i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const i=e;return this.isTypeEditable(i.type)}init(e){this.params=e;const t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){const i=e;this.onModelUpdated(i.model)}}setParams(e){const t=new Uj;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const i=this.optionsFactory.defaultOption;t||(this.lastType=i),this.readOnly=!!e.filterParams.readOnly;const n=this.isTypeEditable(i);this.setEditable(n)}refresh(e){this.params=e;const t=e,i=this.reactive;if((!i||t.source==="colDef")&&this.updateParams(e),i){const{source:n,model:s}=t;if(n==="dataChanged"||n==="ui")return;this.onModelUpdated(s)}}updateParams(e){const t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||this.onModelUpdated(e)}hasSingleInput(e){const t=this.optionsFactory.getCustomOption(e)?.numberOfInputs;return t==null||t==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.readOnly&&this.hasSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},ptt={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},gtt=class extends gue{constructor(){super(ptt,[Q1]),this.eReadOnlyText=ot,this.eDateWrapper=ot,this.FilterModelFormatterClass=pue,this.filterType="date",this.defaultOptions=Kj}setParams(e){super.setParams(e),this.createDateComponent();const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const i=e?Qr(e.dateFrom):null;this.dateComp.setDate(i),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){pn(this.eDateWrapper,e),pn(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){const e=this.dateComp.getDate();if(this.reactive){const t=this.params;t.onUiChange();const i=t.model,n=Ta(e),s=n==null?null:{...i??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption},dateFrom:n};t.onModelChange(s,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t?.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){const{filterParams:e}=this.params,t=Lj(e,this.defaultDebounceMs);return ct(this.gos,{onDateChanged:Co(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:i,params:n}=this;this.dateComp=new lue(e,t,n.column.getColDef(),this.getDateComponentParams(),i,s=>{s.setInputAriaLabel(this.getAriaLabel(n))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},ftt={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},mtt=class extends An{constructor(){super(ftt,[Q1]),this.eDateInput=ot,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&Kg();const{minValidYear:n,maxValidYear:s,minValidDate:o,maxValidDate:r,buttons:a,includeTime:l,colDef:c}=e.filterParams||{},u=this.beans.dataTypeSvc,d=l??u?.getDateIncludesTimeFlag?.(c.cellDataType)??!1;if(i?d?(t.type="datetime-local",t.step="1"):t.type="date":t.type="text",o&&n&&Ee(85),r&&s&&Ee(86),o&&r){const[p,f]=[o,r].map(m=>m instanceof Date?m:Qr(m));p&&f&&p.getTime()>f.getTime()&&Ee(87)}o?o instanceof Date?t.min=gz(o):t.min=o:n&&(t.min=`${n}-01-01`),r?r instanceof Date?t.max=gz(r):t.max=r:s&&(t.max=`${s}-12-31`),this.isApply=e.location==="floatingFilter"&&!!a?.includes("apply")}refresh(e){this.params=e,this.setParams(e)}getDate(){return Qr(this.eDateInput.getValue())}setDate(e){const t=this.params.filterParams.colDef.cellDataType,i=this.beans.dataTypeSvc?.getDateIncludesTimeFlag(t)??!1;this.eDateInput.setValue(Ta(e,i))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e?.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){return e?.filterParams?.browserDatePicker??!0}},Xj=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function Lz(e){const{allowedCharPattern:t}=e??{};return t??null}function Pz(e){return e==null||isNaN(e)?null:e}function fue(e,t){const{filter:i,filterTo:n,type:s}=e||{};return[Pz(i),Pz(n)].slice(0,N0(s,t))}var ytt=class extends $j{constructor(){super("numberFilter",fue,Xj),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}setElementValue(e,t,i){const{numberFormatter:n}=this.params,s=!i&&n?n(t??null):t;super.setElementValue(e,s)}createEValue(){const e=Lz(this.params),t=br({tag:"div",cls:"ag-filter-body",role:"presentation"});return this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,n){const s=this.createManagedBean(n?new Py({allowedCharPattern:n}):new Aj);s.addCss(`ag-filter-${i}`),s.addCss("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeEValues(e,t){const i=n=>this.removeComponents(n,e,t);i(this.eValuesFrom),i(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(i,n,s,o)=>{n<o&&t.push(Pz(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}stringToFloat(e){if(typeof e=="number")return e;let t=qd(e);t!=null&&t.trim()===""&&(t=null);const i=this.params.numberParser;return i?i(t):t==null||t.trim()==="-"?null:Number.parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{t.getInputElement().validity.valid||(e=!0)}),e}},mue=class extends Yj{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=hue}conditionToString(e,t,i,n,s){const{filter:o,filterTo:r,type:a}=e,l=this.formatValue.bind(this);if(t){const c=this.conditionForToolPanel(a,i,()=>l(o),()=>l(r),n,s);if(c!=null)return c}return i?`${l(o)}-${l(r)}`:o!=null?l(o):`${a}`}},vtt=class extends due{constructor(){super(fue,Xj),this.filterType="number",this.FilterModelFormatterClass=mue}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}},yue=class extends we{constructor(e){super(),this.params=e,this.eInput=ot,this.onValueChanged=()=>{}}setupGui(e){this.eInput=this.createManagedBean(new Py(this.params?.config));const t=this.eInput.getGui();e.appendChild(t);const i=n=>this.onValueChanged(n);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t}){const{eInput:i}=this;i.setInputAriaLabel(e),t!==void 0&&i.setAutoComplete(t)}};function Nz(e){const t=e?.trim();return t===""?e:t}function vue(e,t){const{filter:i,filterTo:n,type:s}=e||{};return[i||null,n||null].slice(0,N0(s,t))}var btt={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},bue=class extends gue{constructor(){super(...arguments),this.eFloatingFilterInputContainer=ot,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(btt)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){const t=e.browserAutoComplete??!1,{inputSvc:i,defaultDebounceMs:n,readOnly:s}=this;if(i.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=eP(e.filterParams),!s){const o=Lj(e.filterParams,n),r=Co(this,this.syncUpWithParentFilter.bind(this),o);i.setValueChangedListener(r)}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,i=t.getValue();qr(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(i,!0)}syncUpWithParentFilter(e){const t=e.key===pe.ENTER,i=this.reactive;if(i&&this.params.onUiChange(),this.applyActive&&!t)return;const{inputSvc:n,params:s,lastType:o}=this;let r=n.getValue();if(s.filterParams.trimInput&&(r=Nz(r),n.setValue(r,!0)),i){const a=s,l=a.model,c=this.convertValue(r),u=c==null?null:{...l??{filterType:this.filterType,type:o??this.optionsFactory.defaultOption},filter:c};a.onModelChange(u,{afterFloatingFilter:!0})}else s.parentFilterInstance(a=>{a?.onFloatingFilterChanged(o||null,r||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},Stt=class extends we{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new Aj),this.eTextInput=this.createManagedBean(new Py),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),i=this.eTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,n=>this.onValueChanged(n)),this.setupListeners(i,n=>this.onValueChanged(n))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},Ctt=class extends bue{constructor(){super(...arguments),this.FilterModelFormatterClass=mue,this.filterType="number",this.defaultOptions=Xj}updateParams(e){Lz(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=Lz(e.filterParams),this.allowedCharPattern?this.createManagedBean(new yue({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Stt)}convertValue(e){return e?Number(e):null}},Zj=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],xtt=class extends $j{constructor(){super("textFilter",vue,Zj),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){const t=this.getConditionType(e),i={filterType:this.filterType,type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:i}=this;return e>=t.length?[null,null]:[t[e],i[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,n,s,o)=>{n<o&&t.push(qd(i.getValue()))}),t}createEValue(){const e=br({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:i}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,i,"to"),e}createFromToElement(e,t,i){const n=this.createManagedBean(new Py);n.addCss(`ag-filter-${i}`),n.addCss("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeEValues(e,t){const i=o=>this.removeComponents(o,e,t),{eValuesFrom:n,eValuesTo:s}=this;i(n),i(s)}},Sue=class extends Yj{constructor(){super(...arguments),this.filterTypeKeys=utt}conditionToString(e,t,i,n,s){const{filter:o,filterTo:r,type:a}=e;if(t){const l=u=>()=>zp(this,"filterSummaryTextQuote",[u]),c=this.conditionForToolPanel(a,i,l(o),l(r),n,s);if(c!=null)return c}return i?`${o}-${r}`:o!=null?`${o}`:`${a}`}},wtt=({filterOption:e,value:t,filterText:i})=>{if(i==null)return!1;switch(e){case"contains":return t.includes(i);case"notContains":return!t.includes(i);case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return t.indexOf(i)===0;case"endsWith":{const n=t.lastIndexOf(i);return n>=0&&n===t.length-i.length}default:return!1}},Dtt=e=>e,Mtt=e=>e==null?null:e.toString().toLowerCase(),Att=class extends uue{constructor(){super(vue,Zj),this.filterType="text",this.FilterModelFormatterClass=Sue}updateParams(e){super.updateParams(e);const t=e.filterParams;this.matcher=t.textMatcher??wtt,this.formatter=t.textFormatter??(t.caseSensitive?Dtt:Mtt)}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,n){const s=e.map(p=>this.formatter(p))||[],o=this.formatter(t),{api:r,colDef:a,column:l,context:c,filterParams:{textFormatter:u}}=this.params;if(i.type==="blank")return VR(t);if(i.type==="notBlank")return!VR(t);const d={api:r,colDef:a,column:l,context:c,node:n.node,data:n.data,filterOption:i.type,value:o,textFormatter:u};return s.some(p=>this.matcher({...d,filterText:p}))}processModelToApply(e){if(e&&this.params.filterParams.trimInput){const t=i=>{const n={...i},{filter:s,filterTo:o}=i;return s&&(n.filter=Nz(s)??null),o&&(n.filterTo=Nz(o)??null),n};return pce(e)?{...e,conditions:e.conditions.map(t)}:t(e)}return e}},ktt=class extends bue{constructor(){super(...arguments),this.FilterModelFormatterClass=Sue,this.filterType="text",this.defaultOptions=Zj}createFloatingFilterInputService(){return this.createManagedBean(new yue)}};function Ttt(e){return!!e.quickFilter?.isFilterPresent()}function Itt(e){return e.quickFilter?.getText()}function Rtt(e){e.quickFilter?.resetCache()}var Ett=class extends we{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",i=>this.setFilter(i.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){const{autoColSvc:e,colModel:t,gos:i,pivotResultCols:n}=this.beans,s=t.isPivotMode(),o=e?.getColumns(),r=t.getColDefCols();let a=(s&&!i.get("applyQuickFilterBeforePivotOrAgg")?n?.getPivotResultCols()?.list:r)??[];o&&(a=a.concat(o)),this.colsToUse=i.get("includeHiddenColumnsInQuickFilter")?a:a.filter(l=>l.isVisible()||l.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassCache(e,i):this.doesRowPassNoCache(e,i))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return We(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){Ee(70,{newFilter:e});return}const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(i=>{const n=this.getTextForColumn(i,e);return We(n)&&n.includes(t)})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.includes(t)}doesRowPassMatcher(e,t){let i;e?(this.checkGenerateAggText(t),i=t.quickFilterAggregateText):i=this.getAggText(t);const{quickFilterParts:n,matcher:s}=this;return s(n,i)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let i=this.beans.filterValueSvc.getValue(e,t);const n=e.getColDef();if(n.getQuickFilterText){const s=ct(this.gos,{value:i,node:t,data:t.data,column:e,colDef:n});i=n.getQuickFilterText(s)}return We(i)?i.toString().toUpperCase():null}getAggText(e){const t=[];for(const i of this.colsToUse){const n=this.getTextForColumn(i,e);We(n)&&t.push(n)}return t.join(`
`)}},Ltt={moduleName:"ClientSideRowModelFilter",version:Ge,rowModels:["clientSide"],beans:[Pet]},qj={moduleName:"FilterCore",version:Ge,beans:[ttt],apiFunctions:{isAnyFilterPresent:Jet,onFilterChanged:ett},css:[zet],dependsOn:[Ltt]},Cue={moduleName:"FilterValue",version:Ge,beans:[ntt]},oP={moduleName:"ColumnFilter",version:Ge,beans:[Qet,itt],dynamicBeans:{headerFilterCellCtrl:Net},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent:Get,getColumnFilterInstance:Vet,destroyFilter:Het,setFilterModel:Wet,getFilterModel:jet,getColumnFilterModel:Uet,setColumnFilterModel:$et,showColumnFilter:Ket,hideColumnFilter:Yet,getColumnFilterHandler:Xet,doFilterAction:Zet},dependsOn:[qj,sP,Cue,Bet]},Ptt={moduleName:"CustomFilter",version:Ge,userComponents:{agReadOnlyFloatingFilter:ott},dependsOn:[oP]},Ntt={moduleName:"TextFilter",version:Ge,dependsOn:[oP],userComponents:{agTextColumnFilter:{classImp:xtt,params:{useForm:!0}},agTextColumnFloatingFilter:ktt},dynamicBeans:{agTextColumnFilterHandler:Att}},Ott={moduleName:"NumberFilter",version:Ge,dependsOn:[oP],userComponents:{agNumberColumnFilter:{classImp:ytt,params:{useForm:!0}},agNumberColumnFloatingFilter:Ctt},dynamicBeans:{agNumberColumnFilterHandler:vtt}},Ftt={moduleName:"DateFilter",version:Ge,dependsOn:[oP],userComponents:{agDateColumnFilter:{classImp:ctt,params:{useForm:!0}},agDateInput:mtt,agDateColumnFloatingFilter:gtt},dynamicBeans:{agDateColumnFilterHandler:htt}},Btt={moduleName:"QuickFilterCore",version:Ge,rowModels:["clientSide"],beans:[Ett],dependsOn:[qj,Cue]},_tt={moduleName:"QuickFilter",version:Ge,apiFunctions:{isQuickFilterPresent:Ttt,getQuickFilter:Itt,resetQuickFilter:Rtt},dependsOn:[Btt]},ztt={moduleName:"ExternalFilter",version:Ge,dependsOn:[qj]},Gtt=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",mB=(e,t,i)=>{const{editModelSvc:n}=e,s=n?.getCellValidationModel()?.getCellValidation(t)?.errorMessages,o=n?.getRowValidationModel().getRowValidation(t)?.errorMessages,r=s||o;return r?.length?r.join(i("tooltipValidationErrorSeparator",". ")):void 0},Vtt=class extends we{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,i,n){e&&t.destroyBean(e);const s=this.gos,o=fB(s),{column:r,eGui:a}=t,l=r.getColDef();!n&&o&&!l.headerComponent&&(n=iI(()=>a.querySelector(".ag-header-cell-text")));const c="header",d=this.beans.colNames.getDisplayNameForColumn(r,"header",!0),p=i??d,f={getGui:()=>a,getLocation:()=>c,getTooltipValue:()=>i??l?.headerTooltipValueGetter?.(ct(s,{location:c,colDef:l,column:r,value:p,valueFormatted:d}))??l?.headerTooltip,shouldDisplayTooltip:n,getAdditionalParams:()=>({column:r,colDef:r.getColDef()})};let m=this.createTooltipFeature(f);return m&&(m=t.createBean(m),t.setRefreshFunction("tooltip",()=>m.refreshTooltip())),m}setupHeaderGroupTooltip(e,t,i,n){e&&t.destroyBean(e);const s=this.gos,o=fB(s),{column:r,eGui:a}=t,l=r.getColGroupDef();!n&&o&&!l?.headerGroupComponent&&(n=iI(()=>a.querySelector(".ag-header-group-text")));const c="headerGroup",d=this.beans.colNames.getDisplayNameForColumnGroup(r,"header"),p=i??d,f={getGui:()=>a,getLocation:()=>c,getTooltipValue:()=>i??l?.headerTooltipValueGetter?.(ct(s,{location:c,colDef:l,column:r,value:p,valueFormatted:d}))??l?.headerTooltip,shouldDisplayTooltip:n,getAdditionalParams:()=>{const v={column:r};return l&&(v.colDef=l),v}},m=this.createTooltipFeature(f);return m&&t.createBean(m)}enableCellTooltipFeature(e,t,i){const{beans:n}=this,{gos:s,editSvc:o}=n,{column:r,rowNode:a}=e;let l="cell";const c=()=>{const f=!!!o?.isEditing(e)&&mB(n,e,this.getLocaleTextFunc());if(f)return l="cellEditor",f;l="cell";const m=r.getColDef(),v=a.data;if(m.tooltipField&&We(v))return Lw(v,m.tooltipField,r.isTooltipFieldContainsDots());const b=m.tooltipValueGetter;return b?b(ct(s,{location:"cell",colDef:r.getColDef(),column:r,rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,value:e.value,valueFormatted:e.valueFormatted})):null},u=fB(s);i||(u&&!e.isCellRenderer()?i=()=>{const p=!!o?.isEditing(e);if(!p&&mB(n,e,this.getLocaleTextFunc()))return!0;if(!r.isTooltipEnabled())return!1;const v=iI(()=>{const b=e.eGui;return b.children.length===0?b:b.querySelector(".ag-cell-value")});return!p&&v()}:i=()=>!o?.isEditing(e));const d={getGui:()=>e.eGui,getLocation:()=>l,getTooltipValue:t!=null?()=>t:c,shouldDisplayTooltip:i,getAdditionalParams:()=>({column:r,colDef:r.getColDef(),rowIndex:e.cellPosition.rowIndex,node:a,data:a.data,valueFormatted:e.valueFormatted})};return this.createTooltipFeature(d,n)}setupFullWidthRowTooltip(e,t,i,n){const s={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>i,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n},o=this.beans,r=o.context;e&&t.destroyBean(e,r);const a=this.createTooltipFeature(s,o);if(a)return t.createBean(a,r)}setupCellEditorTooltip(e,t){const{beans:i}=this,{context:n}=i,s=t.getValidationElement?.(!0)||!t.isPopup?.()&&e.eGui;if(!s)return;const o={getGui:()=>s,getTooltipValue:()=>mB(i,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{const{editModelSvc:a}=i,l=a?.getRowValidationModel()?.getRowValidationMap(),c=a?.getCellValidationModel()?.getCellValidationMap(),u=!!l&&l.size>0,d=!!c&&c.size>0;return u||d}},r=this.createTooltipFeature(o,i);if(r)return e.createBean(r,n)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=We(t.tooltipField)||We(t.tooltipValueGetter)||We(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},Htt=class extends P8e{createTooltipComp(e,t){M6e(this.beans.userCompFactory,e)?.newAgStackInstance().then(t)}setEventHandlers(e){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:e})}clearEventHandlers(){this.onColumnMovedEventCallback?.(),this.onColumnMovedEventCallback=void 0}},xue={moduleName:"Tooltip",version:Ge,beans:[Vtt],dynamicBeans:{tooltipFeature:nce,highlightTooltipFeature:N8e,tooltipStateManager:Htt},userComponents:{agTooltipComponent:B8e},dependsOn:[sP],css:[Gtt]},nb=class{constructor(e){this.cellValueChanges=e}},yB=class extends nb{constructor(e,t,i,n){super(e),this.initialRange=t,this.finalRange=i,this.ranges=n}},Wtt=10,u7=class{constructor(e){this.actionStack=[],this.maxStackSize=e||Wtt,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},jtt=class extends we{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&Pce(this.activeCellEdit,t),n=this.activeRowEdit!==null&&uZe(this.activeRowEdit,t);if(!(i||n||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:r,column:a,oldValue:l,value:c}=e,u={rowPinned:o,rowIndex:r,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const i=e.get("undoRedoCellEditingLimit");if(i<=0)return;this.undoStack=new u7(i),this.redoStack=new u7(i),this.addListeners();const n=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:s=>{s.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:n,newColumnsLoaded:n,columnGroupOpened:n,columnRowGroupChanged:n,columnMoved:n,columnPinned:n,columnVisible:n,rowDragEnd:n}),t.whenReady(this,s=>{this.gridBodyCtrl=s.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(e){const{eventSvc:t,undoStack:i,redoStack:n}=this;t.dispatchEvent({type:"undoStarted",source:e});const s=this.undoRedo(i,n,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:s})}redo(e){const{eventSvc:t,undoStack:i,redoStack:n}=this;t.dispatchEvent({type:"redoStarted",source:e});const s=this.undoRedo(n,i,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:s})}undoRedo(e,t,i,n,s){if(!e)return!1;const o=e.pop();return o?.cellValueChanges?(this.processAction(o,r=>r[n],s),o instanceof yB?this.processRange(o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),!0):!1}processAction(e,t,i){for(const n of e.cellValueChanges){const{rowIndex:s,rowPinned:o,columnId:r}=n,a={rowIndex:s,rowPinned:o},l=dh(this.beans,a);l.displayed&&l.setDataValue(r,t(n),i)}}processRange(e){let t;const i=this.beans.rangeSvc;i.removeAllCellRanges(!0),e.forEach((n,s)=>{if(!n)return;const o=n.startRow,r=n.endRow;s===e.length-1&&(t={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:n.startColumn.getColId()},this.setLastFocusedCell(t));const a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:n.startColumn,columns:n.columns};i.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:n}=t,s={rowIndex:i,rowPinned:n},o=dh(this.beans,s),r={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r)}setLastFocusedCell(e){const{rowIndex:t,columnId:i,rowPinned:n}=e,{colModel:s,focusSvc:o,rangeSvc:r}=this.beans,a=s.getCol(i);if(!a)return;const{scrollFeature:l}=this.gridBodyCtrl;l.ensureIndexVisible(t),l.ensureColumnVisible(a);const c={rowIndex:t,column:a,rowPinned:n};o.setFocusedCell({...c,forceBrowserFocus:!0}),r?.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new nb(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new nb(this.cellValueChanges);this.pushActionsToUndoStack(i)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new nb(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new yB(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:i}=this.beans;t&&hg(i)?e=new yB(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new nb(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:e})=>this.stopBigChange("batchEditing",e),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:e})=>this.stopBigChange("bulkEditing",e)})}startBigChange(e){this.updateBigChange(e,!0)}updateBigChange(e,t){e==="bulkEditing"?this.bulkEditing=t:this.batchEditing=t}stopBigChange(e,t){if(e==="bulkEditing"&&!this.bulkEditing||e==="batchEditing"&&!this.batchEditing||(this.updateBigChange(e,!1),t?.length===0))return;const i=new nb(t??[]);this.pushActionsToUndoStack(i),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},Utt=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{display:block;height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) textarea{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}",$tt={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},Ktt=class extends iP{constructor(){super($tt,[Mj]),this.eEditor=ot}initialiseEditor(e){const t=e.value??void 0,i=this.eEditor;i.setValue(t),i.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(i,{fieldValueChanged:s=>this.setAriaLabel(s.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),i=Z1(t,e),n=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${n} (${i})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{getValidationErrors:t}=e,i=this.getValue();return t?t({value:i,internalErrors:null,cellEditorParams:e}):null}},rP=class extends iP{constructor(e){super(),this.cellEditorInput=e,this.eEditor=ot}initialiseEditor(e){const{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());const{eEditor:i}=this,{cellStartedEdit:n,eventKey:s,suppressPreventDefault:o}=e;i.getInputElement().setAttribute("title",""),t.init(i,e);let r,a=!0;n?(this.focusAfterAttached=!0,s===pe.BACKSPACE||s===pe.DELETE?r="":s&&s.length===1?o?a=!1:r=s:(r=t.getStartValue(),s!==pe.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,r=t.getStartValue()),a&&r!=null&&i.setStartValue(r),this.addGuiEventListener("keydown",l=>{const{key:c}=l;(c===pe.PAGE_UP||c===pe.PAGE_DOWN)&&l.preventDefault()})}afterGuiAttached(){const e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Kg()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():this.cellEditorInput.setCaret?.()}focusIn(){const{eEditor:e}=this,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},Ytt={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},Xtt=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return Ytt}getAgComponents(){return[Yle]}init(e,t){this.eEditor=e,this.params=t;const{min:i,max:n,step:s,colDef:o}=t;i!=null&&e.setMin(i),n!=null&&e.setMax(n),s!=null&&e.setStep(s),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const t=this.eEditor.getInputElement().valueAsDate,{params:i}=this,{min:n,max:s,getValidationErrors:o}=i;let r=[];const a=this.getLocaleTextFunc();if(t instanceof Date&&!isNaN(t.getTime())){if(n){const l=n instanceof Date?n:new Date(n);if(t<l){const c=l.toLocaleDateString();r.push(a("minDateValidation",`Date must be after ${c}`,[c]))}}if(s){const l=s instanceof Date?s:new Date(s);if(t>l){const c=l.toLocaleDateString();r.push(a("maxDateValidation",`Date must be before ${c}`,[c]))}}}return r.length||(r=null),o?o({value:t,cellEditorParams:i,internalErrors:r}):r}getValue(){const{eEditor:e,params:t}=this,i=e.getDate();return!We(i)&&!We(t.value)?t.value:i??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Ta(e,this.includeTime??!1)}},Ztt=class extends rP{constructor(){super(new Xtt(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},qtt={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},Qtt=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return qtt}getAgComponents(){return[Yle]}init(e,t){this.eEditor=e,this.params=t;const{min:i,max:n,step:s,colDef:o}=t;i!=null&&e.setMin(i),n!=null&&e.setMax(n),s!=null&&e.setStep(s),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(o.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const{eEditor:e,params:t}=this,i=e.getInputElement().value,n=this.formatDate(this.parseDate(i??void 0)),{min:s,max:o,getValidationErrors:r}=t;let a=[];if(n){const l=new Date(n),c=this.getLocaleTextFunc();if(s){const u=new Date(s);if(l<u){const d=u.toLocaleDateString();a.push(c("minDateValidation",`Date must be after ${d}`,[d]))}}if(o){const u=new Date(o);if(l>u){const d=u.toLocaleDateString();a.push(c("maxDateValidation",`Date must be before ${d}`,[d]))}}}return a.length||(a=null),r?r({value:this.getValue(),cellEditorParams:t,internalErrors:a}):a}getValue(){const{params:e,eEditor:t}=this,i=this.formatDate(t.getDate());return!We(i)&&!We(e.value)?e.value:e.parseValue(i??"")}getStartValue(){return Ta(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Qr(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Ta(e??null,this.includeTime??!1)??void 0}},Jtt=class extends rP{constructor(){super(new Qtt(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},eit={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},tit=class extends iP{constructor(){super(eit,[W6e]),this.eEditor=ot}initialiseEditor(e){const{eEditor:t}=this,{cellStartedEdit:i,eventKey:n,maxLength:s,cols:o,rows:r}=e;this.focusAfterAttached=i,t.getInputElement().setAttribute("title",""),t.setMaxLength(s||200).setCols(o||60).setRows(r||10);let a;i?(this.focusAfterAttached=!0,n===pe.BACKSPACE||n===pe.DELETE?a="":n&&n.length===1?a=n:(a=this.getStartValue(e),n!==pe.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,a=this.getStartValue(e)),a!=null&&t.setValue(a,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}getStartValue(e){const{value:t}=e;return t?.toString()??t}onKeyDown(e){const t=e.key;(t===pe.LEFT||t===pe.UP||t===pe.RIGHT||t===pe.DOWN||e.shiftKey&&t===pe.ENTER)&&e.stopPropagation()}afterGuiAttached(){const{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:i}=this,n=this.getLocaleTextFunc();e.setInputAriaLabel(n("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),i&&e.getInputElement().select())}getValue(){const{eEditor:e,params:t}=this,{value:i}=t,n=e.getValue();return!We(n)&&!We(i)?i:t.parseValue(n)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:i}=e,n=this.getLocaleTextFunc(),s=this.getValue();let o=[];return typeof s=="string"&&t!=null&&s.length>t&&o.push(n("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),i?i({value:s,internalErrors:o,cellEditorParams:e}):o}},iit={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},nit=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return iit}getAgComponents(){return[j6e]}init(e,t){this.eEditor=e,this.params=t;const{max:i,min:n,precision:s,step:o}=t;i!=null&&e.setMax(i),n!=null&&e.setMin(n),s!=null&&e.setPrecision(s),o!=null&&e.setStep(o);const r=e.getInputElement();t.preventStepping?e.addManagedElementListeners(r,{keydown:this.preventStepping}):t.showStepperButtons&&r.classList.add("ag-number-field-input-stepper")}getValidationErrors(){const{params:e}=this,{min:t,max:i,getValidationErrors:n}=e,o=this.eEditor.getInputElement().valueAsNumber,r=this.getLocaleTextFunc();let a=[];return typeof o=="number"&&(t!=null&&o<t&&a.push(r("minValueValidation",`Must be greater than or equal to ${t}.`,[String(t)])),i!=null&&o>i&&a.push(r("maxValueValidation",`Must be less than or equal to ${i}.`,[String(i)]))),a.length||(a=null),n?n({value:o,cellEditorParams:e,internalErrors:a}):a}preventStepping(e){(e.key===pe.UP||e.key===pe.DOWN)&&e.preventDefault()}getValue(){const{eEditor:e,params:t}=this,i=e.getValue();if(!We(i)&&!We(t.value))return t.value;let n=t.parseValue(i);if(n==null)return n;if(typeof n=="string"){if(n==="")return null;n=Number(n)}return isNaN(n)?null:n}getStartValue(){return this.params.value}setCaret(){Kg()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},sit=class extends rP{constructor(){super(new nit(()=>this.getLocaleTextFunc()))}},oit={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},rit=class extends iP{constructor(){super(oit,[t8e]),this.eEditor=ot,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;const{eEditor:t,valueSvc:i,gos:n}=this,{values:s,value:o,eventKey:r}=e;if(tn(s)){Ee(58);return}this.startedByEnter=r!=null?r===pe.ENTER:!1;let a=!1;s.forEach(d=>{const p={value:d},f=i.formatValue(e.column,null,d),m=f!=null;p.text=m?f:d,t.addOption(p),a=a||o===d}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),c!=null&&t.setPickerMaxWidth(c),n.get("editType")!=="fullRow"&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:e}=this,{values:t,getValidationErrors:i}=e,n=this.getValue();let s=[];if(t&&!t.includes(n)){const o=this.getLocaleTextFunc();s.push(o("invalidSelectionValidation","Invalid selection."))}else s=null;return i?i({value:n,internalErrors:s,cellEditorParams:e}):s}},ait={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},lit=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return ait}getAgComponents(){return[Q1]}init(e,t){this.eEditor=e,this.params=t;const i=t.maxLength;i!=null&&e.setMaxLength(i)}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:i}=e,n=this.getValue(),s=this.getLocaleTextFunc();let o=[];return t!=null&&typeof n=="string"&&n.length>t&&o.push(s("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),o.length||(o=null),i?i({value:n,cellEditorParams:e,internalErrors:o}):o}getValue(){const{eEditor:e,params:t}=this,i=e.getValue();return!We(i)&&!We(t.value)?t.value:t.parseValue(i)}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){Kg()&&this.eEditor.getInputElement().focus({preventScroll:!0});const e=this.eEditor,t=e.getValue(),i=We(t)&&t.length||0;i&&e.getInputElement().setSelectionRange(i,i)}},d7=class extends rP{constructor(){super(new lit(()=>this.getLocaleTextFunc()))}};function cit(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function uit(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function wue(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function Due(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}function dit(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}function hit(e){e.undoRedo?.undo("api")}function pit(e){e.undoRedo?.redo("api")}function git(e,t){return e.editModelSvc?.getEditRowDataValue(t,{checkSiblings:!0})}function fit(e){const t=e.editModelSvc?.getEditMap(),i=[];return t?.forEach((n,s)=>{const{rowIndex:o,rowPinned:r}=s;n.forEach((a,l)=>{const{editorValue:c,pendingValue:u,sourceValue:d,state:p}=a,f=Gd(a);let m=c??u;m===zl&&(m=void 0);const v={newValue:m,oldValue:d,state:p,column:l,colId:l.getColId(),colKey:l.getColId(),rowIndex:o,rowPinned:r};(p==="editing"||p==="changed"&&f)&&i.push(v)})}),i}function mit(e,t=!1){const{editSvc:i}=e;if(i?.isBatchEditing()){if(t)for(const n of e.editModelSvc?.getEditPositions()??[])n.state==="editing"&&i.revertSingleCellEdit(n);else lm(e,{persist:!0});Fb(e,void 0,{cancel:t})}else i?.stopEditing(void 0,{cancel:t,source:"edit",forceStop:!t,forceCancel:t})}function yit(e,t){const i=qi(e,t);return e.editSvc?.isEditing(i)??!1}function vit(e,t){const{key:i,colKey:n,rowIndex:s,rowPinned:o}=t,{editSvc:r,colModel:a}=e,l=a.getCol(n);if(!l){Ee(12,{colKey:n});return}const u=dh(e,{rowIndex:s,rowPinned:o||null});if(!u){Ee(290,{rowIndex:s,rowPinned:o});return}if(!l.isCellEditable(u))return;o==null&&Due(e,s),wue(e,n),r?.startEditing({rowNode:u,column:l},{event:i?new KeyboardEvent("keydown",{key:i}):void 0,source:"api"})}function bit(e){return e.editSvc?.validateEdit()||null}function Sit(e){return e.undoRedo?.getCurrentUndoStackSize()??0}function Cit(e){return e.undoRedo?.getCurrentRedoStackSize()??0}var xit={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},wit=class extends xj{constructor(e){super(xit),this.params=e}postConstruct(){jm(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,i=n=>{Cz(this.gos,n,t.node,t.column,!0)||t.onKeyDown(n)};this.addManagedElementListeners(e,{keydown:i})}};function Dit(e,{column:t},i,n,s="ui"){if(i instanceof KeyboardEvent&&(i.key===pe.TAB||i.key===pe.ENTER||i.key===pe.F2||i.key===pe.BACKSPACE&&n))return!0;if(i?.shiftKey&&e.rangeSvc?.getCellRanges().length!=0)return!1;const r=t?.getColDef(),a=Mit(e.gos,r),l=i?.type;return l==="click"&&i?.detail===1&&a===1||l==="dblclick"&&i?.detail===2&&a===2?!0:s==="api"?n??!1:!1}function Mit(e,t){return e.get("suppressClickEdit")===!0?0:e.get("singleClickEdit")===!0||t?.singleClickEdit?1:2}function Oz(e,{rowNode:t,column:i},n="ui"){const s=i.getColDef().editable,o=e.editModelSvc;return i.isColumnFunc(t,s)||!!o&&o.hasEdits({rowNode:t,column:i},{withOpenEditor:!0})}function Ait(e,t,i="ui"){const n=Oz(e,t,i);return n===!0||i==="ui"?n:e.colModel.getCols().some(o=>Oz(e,{rowNode:t.rowNode,column:o},i))}var HR=(e,t=!1)=>{if(e!==void 0)return Gd(e)||t&&e.state==="editing"};function Mue(e,t,i=!1){return HR(e.editModelSvc?.getEdit(t),i)}var Aue=(e,t,i)=>{if(e)for(let n=0,s=e.length;n<s;++n){const o=e[n];if(o.data&&(HR(t?.getEdit({rowNode:o,column:i}))||HR(t?.getEdit({rowNode:o.pinnedSibling,column:i})))||Aue(o.childrenAfterGroup,t,i))return!0}};function kue(e,t){const{column:i,rowNode:n}=t;return e.gos.get("groupTotalRow")&&!n?.footer?!1:Aue(n?.childrenAfterGroup,e.editModelSvc,i)}function Tue(e,{rowNode:t,column:i}){if(t=t.pinnedSibling,!!t)return HR(e.editModelSvc?.getEdit({rowNode:t,column:i}))}var kit=class extends we{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){const{cellCtrl:e,editSvc:t,beans:i}=this;if(t?.isBatchEditing()&&t.isEditing()){const s=Mue(i,e)||kue(i,e)||Tue(i,e);this.applyBatchingStyle(s)}else this.applyBatchingStyle(!1);const n=!!this.editModelSvc?.getCellValidationModel().hasCellValidation(this.cellCtrl);this.cellComp.toggleCss("ag-cell-editing-error",n)}applyBatchingStyle(e){this.cellComp.toggleCss("ag-cell-editing",e??!1),this.cellComp.toggleCss("ag-cell-batch-edit",(e&&this.editSvc?.isBatchEditing())??!1)}},Tit=class extends we{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){const{rowCtrl:e,editModelSvc:t,beans:i}=this;let n=e.rowNode,s=t?.getEditRow(n);const o=this.editModelSvc?.getRowValidationModel().hasRowValidation({rowNode:n});if(!s&&n.pinnedSibling&&(n=n.pinnedSibling,s=t?.getEditRow(n)),s){const r=Array.from(s.keys()).some(a=>{const l={rowNode:n,column:a};return Mue(i,l,!0)||kue(i,l)||Tue(i,l)});this.applyStyle(o,r);return}this.applyStyle(o)}applyStyle(e=!1,t=!1){const i=this.editSvc?.isBatchEditing()??!1,n=this.gos.get("editType")==="fullRow";this.rowCtrl?.forEachGui(void 0,({rowComp:s})=>{s.toggleCss("ag-row-editing",n&&t),s.toggleCss("ag-row-batch-edit",n&&t&&i),s.toggleCss("ag-row-inline-editing",t),s.toggleCss("ag-row-not-inline-editing",!t),s.toggleCss("ag-row-editing-invalid",n&&t&&e)})}},Iit=({rowModel:e,pinnedRowModel:t,editModelSvc:i},n)=>{const s=new Set;e.forEachNode(o=>n.has(o)&&s.add(o)),t?.forEachPinnedRow("top",o=>n.has(o)&&s.add(o)),t?.forEachPinnedRow("bottom",o=>n.has(o)&&s.add(o));for(const o of n)s.has(o)||i.removeEdits({rowNode:o});return s},Rit=({editModelSvc:e},t,i)=>{for(const n of t)e?.getEditRow(n)?.forEach((s,o)=>!i.has(o)&&e.removeEdits({rowNode:n,column:o}))},Eit=e=>()=>{const t=new Set(e.colModel.getCols()),i=e.editModelSvc.getEditMap(!0),n=new Set(i.keys());Rit(e,Iit(e,n),t)},Lit=new Set(["undo","redo","paste","bulk","rangeSvc"]),Pit=new Set(["ui","api"]),Iue={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"},Nit=new Set(Object.keys(Iue)),Oit=new Set(["paste","rangeSvc","renderer","cellClear","redo","undo"]),gT={cancel:!0,source:"api"},Fit={cancel:!1,source:"api"},Wv={checkSiblings:!0},jx={force:!0,suppressFlash:!0},Bit=class extends we{constructor(){super(...arguments),this.beanName="editSvc",this.batch=!1,this.stopping=!1,this.committing=!1}postConstruct(){const{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",({currentValue:n})=>{this.stopEditing(void 0,gT),this.createStrategy(n)});const t=Eit(e),i=()=>{const n=this.model.getCellValidationModel().getCellValidationMap().size>0,s=this.model.getRowValidationModel().getRowValidationMap().size>0;return n||s?this.stopEditing(void 0,gT):this.isEditing()&&(this.isBatchEditing()?Fb(e,this.model.getEditPositions()):this.stopEditing(void 0,Fit)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowExpansionStateChanged:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:i,filterChanged:i,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}setBatchEditing(e){e?(this.batch=!0,this.stopEditing(void 0,gT)):(this.stopEditing(void 0,gT),this.batch=!1)}createStrategy(e){const{beans:t,gos:i,strategy:n}=this,s=h7(i,e);if(n){if(n.beanName===s)return n;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(s,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,i,n="ui"){const s=Dit(this.beans,e,t,i,n);return s&&(this.strategy??(this.strategy=this.createStrategy())),s}shouldStopEditing(e,t,i="ui"){return this.strategy?.shouldStop(e,t,i)??null}shouldCancelEditing(e,t,i="ui"){return this.strategy?.shouldCancel(e,t,i)??null}validateEdit(){return ZQe(this.beans)}isEditing(e,t){return this.model.hasEdits(e,t??Wv)}isRowEditing(e,t){return(e&&this.model.hasRowEdits(e,t))??!1}startEditing(e,t){const{startedEdit:i=!0,event:n=null,source:s="ui",ignoreEventKey:o=!1,silent:r}=t;if(this.strategy??(this.strategy=this.createStrategy()),!this.isCellEditable(e,"api"))return;const a=qi(this.beans,e);if(a&&!a.comp){a.onCompAttachedFuncs.push(()=>this.startEditing(e,t));return}const l=this.shouldStartEditing(e,n,i,s);if(l===!1&&s!=="api"){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,s)&&!t.continueEditing&&this.stopEditing(void 0,{source:s}),l&&this.isBatchEditing()&&this.dispatchBatchEvent("batchEditingStarted",new Map),this.strategy.start({position:e,event:n,source:s,ignoreEventKey:o,startedEdit:i,silent:r})}stopEditing(e,t){const{event:i,cancel:n,source:s="ui",forceCancel:o,forceStop:r}=t||{},{beans:a,model:l}=this;if(Nit.has(s)&&this.isBatchEditing())return this.bulkRefresh(e),!1;const c=this.committing?Iue[s]:s;if(!(this.committing||this.isEditing(e)||this.isBatchEditing()&&l.hasEdits(e,Wv))||!this.strategy||this.stopping)return!1;this.stopping=!0;const d=qi(a,e);d&&(d.onEditorAttachedFuncs=[]);let p=l.getEditMap(!0),f=!1;const m=!n&&(!!this.shouldStopEditing(e,i,c)||this.committing&&!this.batch)||(r??!1),v=n&&!!this.shouldCancelEditing(e,i,c)||(o??!1);if(m||v){lm(a,{persist:!0,isCancelling:v||n,isStopping:m});const b=l.getEditMap(),C=this.processEdits(b,n,s);this.strategy?.stop(n,i);for(const x of C)l.clearEditValue(x);this.bulkRefresh(void 0,p);for(const x of l.getEditPositions(b)){const w=qi(a,x),M=Gd(x);w?.refreshCell({force:!0,suppressFlash:!M})}p=b,f||(f=m)}else if(i instanceof KeyboardEvent&&this.batch&&this.strategy?.midBatchInputsAllowed(e)&&this.isEditing(e,{withOpenEditor:!0})){const{key:b}=i,C=b===pe.ENTER,x=b===pe.ESCAPE,w=b===pe.TAB;(C||w||x)&&(C||w?lm(a,{persist:!0}):x&&this.revertSingleCellEdit(d),this.isBatchEditing()?this.strategy?.cleanupEditors():Fb(a,l.getEditPositions(),{event:i,cancel:x}),i.preventDefault(),this.bulkRefresh(e,p,{suppressFlash:!0}),p=l.getEditMap())}else lm(a,{persist:!0}),p=l.getEditMap();return f&&e&&this.model.removeEdits(e),this.navigateAfterEdit(t,d?.cellPosition),Iz(a),this.model.hasEdits()||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap()),this.bulkRefresh(),v&&this.beans.rowRenderer.refreshRows({rowNodes:Array.from(p.keys())}),this.isBatchEditing()&&(this.beans.rowRenderer.refreshRows({suppressFlash:!0,force:!0}),f&&m&&this.dispatchBatchEvent("batchEditingStopped",p)),this.stopping=!1,f}navigateAfterEdit(e,t){if(!e||!t)return;const{event:i,suppressNavigateAfterEdit:n}=e;if(!(i instanceof KeyboardEvent)||n)return;const{key:o,shiftKey:r}=i,a=this.gos.get("enterNavigatesVerticallyAfterEdit");if(o!==pe.ENTER||!a)return;const l=r?pe.UP:pe.DOWN;this.beans.navigation?.navigateToNextCell(null,l,t,!1)}processEdits(e,t=!1,i){const n=Array.from(e.keys()),s=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,o=[];for(const r of n){const a=e.get(r);for(const l of a.keys()){const c=a.get(l),u={rowNode:r,column:l},d=Gd(c);!t&&d&&!s&&(this.setNodeDataValue(r,l,c.pendingValue,void 0,i)||o.push(u))}}return o}setNodeDataValue(e,t,i,n,s="edit"){const{beans:o}=this,r=qi(o,{rowNode:e,column:t}),a=Pit.has(s)?"edit":s;r&&(r.suppressRefreshCell=!0),this.commitNextEdit();const l=e.setDataValue(t,i,a);return r&&(r.suppressRefreshCell=!1),n&&r?.refreshCell(jx),l}setEditMap(e,t){this.strategy??(this.strategy=this.createStrategy()),this.strategy?.setEditMap(e,t),this.bulkRefresh();let i=jx;t?.forceRefreshOfEditCellsOnly&&(i={..._it(e),...jx}),this.beans.rowRenderer.refreshCells(i)}dispatchEditValuesChanged({rowNode:e,column:t},i={}){if(!e||!t||!i)return;const{pendingValue:n,sourceValue:s}=i,{rowIndex:o,rowPinned:r,data:a}=e;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:e,rowIndex:o,rowPinned:r,column:t,source:"api",data:a,newValue:n,oldValue:s,value:n,colDef:t.getColDef()})}bulkRefresh(e={},t,i={}){const{beans:n,gos:s}=this,{editModelSvc:o,rowModel:r}=n;Ln(s)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),i):t&&o?.getEditMap(!1)?.forEach((a,l)=>{for(const c of a.keys())this.refCell({rowNode:l,column:c},a.get(c),i)}))}refCell({rowNode:e,column:t},i,n={}){const{beans:s,gos:o}=this,r=new Set([e]),a=new Set,l=e.pinnedSibling;l&&r.add(l);const c=e.sibling;c&&a.add(c);let u=e.parent;for(;u;)u.sibling?.footer&&o.get("groupTotalRow")||!u.parent&&u.sibling&&o.get("grandTotalRow")?a.add(u.sibling):a.add(u),u=u.parent;for(const d of r)this.dispatchEditValuesChanged({rowNode:d,column:t},i);for(const d of r)qi(s,{rowNode:d,column:t})?.refreshCell(n);for(const d of a)qi(s,{rowNode:d,column:t})?.refreshCell(n)}stopAllEditing(e=!1,t="ui"){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t="ui"){const{rowNode:i}=e,{gos:n,beans:s}=this;if(i.group){if(n.get("treeData")){if(!i.data&&!n.get("enableGroupEdit"))return!1}else if(!n.get("enableGroupEdit"))return!1}const o=h7(n)==="fullRow"?Ait(s,e,t):Oz(s,e,t);return o&&(this.strategy??(this.strategy=this.createStrategy())),o}cellEditingInvalidCommitBlocks(){return this.gos.get("invalidEditValueMode")==="block"}checkNavWithValidation(e,t,i=!0){if(this.hasValidationErrors(e)){const n=qi(this.beans,e);return this.cellEditingInvalidCommitBlocks()?(t?.preventDefault?.(),i&&(!n?.hasBrowserFocus()&&n?.focusCell(),n?.comp?.getCellEditor()?.focusIn?.()),"block-stop"):(n&&this.revertSingleCellEdit(n),"revert-continue")}return"continue"}revertSingleCellEdit(e,t=!1){const i=qi(this.beans,e);i?.comp?.getCellEditor()&&(Fb(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),yS(this.beans,e,{silent:!0}),Km(this.beans),i?.refreshCell(jx),t&&(i?.focusCell(),i?.comp?.getCellEditor()?.focusIn?.()))}hasValidationErrors(e){Km(this.beans);const t=qi(this.beans,e);t&&(t.refreshCell(jx),t.rowCtrl.rowEditStyleFeature?.applyRowStyles());let i=!1;return e?.rowNode?(i||(i=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(i||(i=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(i||(i=this.model.getCellValidationModel().getCellValidationMap().size>0),i||(i=this.model.getRowValidationModel().getRowValidationMap().size>0)),i}moveToNextCell(e,t,i,n="ui"){let s;const o=this.isEditing(),r=o&&this.checkNavWithValidation(void 0,i)==="block-stop";return e instanceof Bb&&o&&(s=this.strategy?.moveToNextEditingCell(e,t,i,n,r)),s===null||(s=s||!!this.beans.focusSvc.focusedHeader,s===!1&&!r&&this.stopEditing()),s}getCellDataValue({rowNode:e,column:t},i=!0){if(!e||!t)return;let n=this.model.getEdit({rowNode:e,column:t});const s=e.pinnedSibling;if(s){const r=this.model.getEdit({rowNode:s,column:t});r&&(n=r)}const o=i?n?.editorValue??n?.pendingValue:n?.pendingValue;return o===zl||!n?n?.sourceValue??this.valueSvc.getValue(t,e,!1,"api"):o}addStopEditingWhenGridLosesFocus(e){jQe(this,this.beans,e)}createPopupEditorWrapper(e){return new wit(e)}commitNextEdit(){this.committing=!0}setDataValue(e,t,i){try{if((!this.isEditing()||this.committing)&&!Oit.has(i))return;const{beans:n}=this;this.strategy??(this.strategy=this.createStrategy());const s=this.isBatchEditing()?"ui":this.committing?i??"api":"api";if(!i||Lit.has(i))return fI(n,e,t,i,void 0,{persist:!0}),this.setNodeDataValue(e.rowNode,e.column,t,!0,i);const o=this.model.getEdit(e);if(o){if(o.pendingValue===t)return!1;if(o.sourceValue!==t)return fI(n,e,t,i,void 0,{persist:!0}),this.stopEditing(e,{source:s,suppressNavigateAfterEdit:!0}),!0;if(o.sourceValue===t)return n.editModelSvc?.removeEdits(e),this.dispatchEditValuesChanged(e,{...o,pendingValue:t}),!0}return fI(n,e,t,i,void 0,{persist:!0}),this.stopEditing(e,{source:s,suppressNavigateAfterEdit:!0}),!0}finally{this.committing=!1}}handleColDefChanged(e){KQe(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){if(!this.batch||!this.model.hasRowEdits(e.rowNode,Wv))return;const{rowNode:n,column:s}=e,{compDetails:o,valueToDisplay:r}=t;if(o){const{params:l}=o;return l.data=this.model.getEditRowDataValue(n,Wv),{compDetails:o}}const a=this.model.getEditRow(e.rowNode,Wv);if(r!==void 0&&a?.has(s))return{valueToDisplay:this.valueSvc.getValue(s,n)}}cleanupEditors(){this.strategy?.cleanupEditors()}dispatchCellEvent(e,t,i,n){this.strategy?.dispatchCellEvent(e,t,i,n)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return ct(this.gos,{type:e,...e==="batchEditingStopped"?{changes:this.toEventChangeList(t)}:{}})}toEventChangeList(e){return this.model.getEditPositions(e).map(t=>({rowIndex:t.rowNode.rowIndex,rowPinned:t.rowNode.rowPinned,columnId:t.column.getColId(),newValue:t.pendingValue,oldValue:t.sourceValue}))}applyBulkEdit({rowNode:e,column:t},i){if(!i||i.length===0)return;const{beans:n,rangeSvc:s,valueSvc:o}=this;lm(n,{persist:!0});const r=this.model.getEditMap(!0),a=r.get(e)?.get(t)?.pendingValue;this.batch||this.eventSvc.dispatchEvent({type:"bulkEditingStarted"}),i.forEach(c=>{if(s?.forEachRowInRange(c,u=>{const d=dh(n,u);if(d===void 0)return;const p=r.get(d)??new Map;for(const f of c.columns)if(f&&this.isCellEditable({rowNode:d,column:f},"api")){const m=o.getValue(f,d,!0,"api");let v=o.parseValue(f,d??null,a,m);Number.isNaN(v)&&(v=null),p.set(f,{editorValue:void 0,pendingValue:v,sourceValue:m,state:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}p.size>0&&r.set(d,p)}),this.setEditMap(r),this.batch){this.cleanupEditors(),Iz(n),this.bulkRefresh();return}this.commitNextEdit(),this.stopEditing(void 0,{source:"bulk"}),this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(r)})}),this.bulkRefresh();const l=qi(n,{rowNode:e,column:t});l&&l.focusCell(!0)}createCellStyleFeature(e,t){return new kit(e,t)}createRowStyleFeature(e,t){return new Tit(e,t)}setEditingCells(e,t){const{beans:i}=this,{colModel:n,valueSvc:s}=i,o=new Map;for(let{colId:r,column:a,colKey:l,rowIndex:c,rowPinned:u,newValue:d,state:p}of e){const f=r?n.getCol(r):l?n.getCol(l):a;if(!f)continue;const m=dh(i,{rowIndex:c,rowPinned:u});if(!m)continue;const v=s.getValue(f,m,!0,"api");if(!t?.forceRefreshOfEditCellsOnly&&!Gd({pendingValue:d,sourceValue:v})&&p!=="editing")continue;let b=o.get(m);b||(b=new Map,o.set(m,b)),d===void 0&&(d=zl),b.set(f,{editorValue:void 0,pendingValue:d,sourceValue:v,state:p??"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}this.setEditMap(o,t)}onCellFocused(e){const t=qi(this.beans,e);if(!t||!this.isEditing(t,Wv))return;const i=this.model.getEdit(t);if(!i||!Gd(i))return;const s=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");this.beans.ariaAnnounce?.announceValue(s,"pendingChange")}allowedFocusTargetOnValidation(e){return qi(this.beans,e)}};function _it(e){return{rowNodes:e?Array.from(e.keys()):void 0,columns:e?[...new Set(Array.from(e.values()).flatMap(t=>Array.from(t.keys())))]:void 0}}function h7(e,t){return t??e.get("editType")??"singleCell"}var Rue=class extends we{postConstruct(){this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:this.onCellFocusChanged?.bind(this),cellFocusCleared:this.onCellFocusChanged?.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t;const i=e.previousParams,{editSvc:n,beans:s}=this,o=e.type==="cellFocused"?e.sourceEvent:null;i&&(t=qi(s,i));const{gos:r,editModelSvc:a}=s,l=e.type==="cellFocusCleared";if(n.isEditing(void 0,{withOpenEditor:!0})){const{column:c,rowIndex:u,rowPinned:d}=e,p={column:c,rowNode:dh(s,{rowIndex:u,rowPinned:d})},f=r.get("invalidEditValueMode")==="block";if(f)return;const m=!f,v=!!a?.getCellValidationModel().hasCellValidation(p),b=m&&v;(i||l?n.stopEditing(void 0,{cancel:b,source:l&&m?"api":void 0,event:o}):!0)||(n.isBatchEditing()?n.cleanupEditors():n.stopEditing(void 0,{source:"api"}))}t?.refreshCell({suppressFlash:!0,force:!0})}stop(e,t){const i=this.model.getEditPositions(),n={all:[],pass:[],fail:[]};for(const s of i){if(n.all.push(s),(this.model.getCellValidationModel().getCellValidation(s)?.errorMessages?.length??0)>0){n.fail.push(s);continue}n.pass.push(s)}if(e)for(const s of i)zR(this.beans,s,{cancel:e}),this.model.stop(s);else{const s=this.processValidationResults(n);if(s.destroy.length>0)for(const o of s.destroy)zR(this.beans,o,{event:t,cancel:e}),this.model.stop(o);if(s.keep.length>0)for(const o of s.keep){const r=qi(this.beans,o);this.editSvc?.cellEditingInvalidCommitBlocks()||r&&this.editSvc.revertSingleCellEdit(r)}}return!0}cleanupEditors({rowNode:e}={},t){lm(this.beans,{persist:!1});const i=this.model.getEditPositions(),n=[];if(e)for(const s of i)s.rowNode!==e&&n.push(s);else for(const s of i)n.push(s);Fb(this.beans,n),Iz(this.beans,t)}setFocusOutOnEditor(e){e.comp?.getCellEditor()?.focusOut?.()}setFocusInOnEditor(e){const t=e.comp,i=t?.getCellEditor();if(i?.focusIn)i.focusIn();else{const n=this.beans.gos.get("editType")==="fullRow";e.focusCell(n),e.onEditorAttachedFuncs.push(()=>t?.getCellEditor()?.focusIn?.())}}setupEditors(e){const{event:t,ignoreEventKey:i=!1,startedEdit:n,position:s,cells:o=this.model.getEditPositions()}=e,r=t instanceof KeyboardEvent&&!i&&t.key||void 0;$Qe(this.beans,o,s,r,t,n)}dispatchCellEvent(e,t,i,n){const s=qi(this.beans,e);s&&this.eventSvc.dispatchEvent({...s.createEvent(t??null,i),...n})}dispatchRowEvent(e,t,i){if(i)return;const n=Hj(this.beans,e);n&&this.eventSvc.dispatchEvent(n.createRowEvent(t))}shouldStop(e,t,i="ui"){const n=this.editSvc.isBatchEditing();return n&&i==="api"?!0:n&&(i==="ui"||i==="edit")?!1:i==="api"?!0:t instanceof KeyboardEvent&&!n?t.key===pe.ENTER:null}shouldCancel(e,t,i="ui"){const n=this.editSvc.isBatchEditing();return!!(t instanceof KeyboardEvent&&!n&&t.key===pe.ESCAPE||n&&i==="api"||i==="api")}setEditMap(e,t){t?.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});const i=[];if(e.forEach((n,s)=>{n.forEach((o,r)=>{o.state==="editing"&&i.push({...o,rowNode:s,column:r})})}),t?.update&&(e=new Map([...this.model.getEditMap(),...e])),this.model?.setEditMap(e),i.length>0){const n=i.at(-1),s=n.pendingValue===zl?void 0:n.pendingValue;this.start({position:n,event:new KeyboardEvent("keydown",{key:s}),source:"api"});const o=qi(this.beans,n);o&&this.setFocusInOnEditor(o)}}destroy(){this.cleanupEditors(),super.destroy()}},zit=class extends Rue{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}shouldStop(e,t,i="ui"){const{rowNode:n}=e||{};if(!Hj(this.beans,{rowNode:this.rowNode}))return!0;const o=super.shouldStop({rowNode:this.rowNode},t,i);return o!==null?o:this.rowNode?n!==this.rowNode:!1}midBatchInputsAllowed({rowNode:e}){return e?this.model.hasEdits({rowNode:e}):!1}clearEdits(e){this.model.clearEditValue(e)}start(e){const{position:t,silent:i,startedEdit:n,event:s,ignoreEventKey:o}=e,{rowNode:r}=t;this.rowNode!==r&&super.cleanupEditors(t);const a=this.beans.visibleCols.allCols,l=[],c=[];for(const u of a)u.isCellEditable(r)&&c.push(u);if(c.length!=0){this.dispatchRowEvent({rowNode:r},"rowEditingStarted",i),this.startedRows.push(r);for(const u of c){const d={rowNode:r,column:u};l.push(d),this.model.hasEdits(d)||this.model.start(d)}this.rowNode=r,this.setupEditors({cells:l,position:t,startedEdit:n,event:s,ignoreEventKey:o})}}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){const{rowNode:i}=this;if(i&&!this.model.hasRowEdits(i))return!1;const n=[];if(e||this.model.getEditMap().forEach((s,o)=>{if(!(!s||s.size===0)){for(const r of s.values())if(Gd(r)){n.push(o);break}}}),Km(this.beans),!e&&this.editSvc?.checkNavWithValidation({rowNode:i})==="block-stop")return!1;super.stop(e,t);for(const s of n)this.dispatchRowEvent({rowNode:s},"rowValueChanged");return this.cleanupEditors({rowNode:i},!0),this.rowNode=void 0,!0}onCellFocusChanged(e){const{rowIndex:t}=e,i=e.previousParams;if(i?.rowIndex===t||e.sourceEvent instanceof KeyboardEvent)return;const n=qi(this.beans,i);this.gos.get("invalidEditValueMode")==="block"&&n&&(this.model.getCellValidationModel().getCellValidation(n)||this.model.getRowValidationModel().getRowValidation(n))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){super.cleanupEditors(e,t);for(const i of this.startedRows)this.dispatchRowEvent({rowNode:i},"rowEditingStopped");this.startedRows.length=0}moveToNextEditingCell(e,t,i,n="ui",s=!1){const o=e.cellPosition;let r;this.model.suspend(!0);try{r=this.beans.navigation?.findNextCellToFocusOn(o,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(r===!1)return null;if(r==null)return!1;const a=r.cellPosition,l=e.isCellEditable(),c=r.isCellEditable(),u=a&&o.rowIndex===a.rowIndex&&o.rowPinned===a.rowPinned;l&&this.setFocusOutOnEditor(e),this.restoreEditors();const d=this.gos.get("suppressStartEditOnTab");return c&&!s?d?r.focusCell(!0,i):(r.comp?.getCellEditor()||yS(this.beans,r,{event:i,cellStartedEdit:!0}),this.setFocusInOnEditor(r),r.focusCell(!1,i)):(c&&s&&this.setFocusInOnEditor(r),r.focusCell(!0,i)),!u&&!s&&(this.editSvc?.stopEditing({rowNode:e.rowNode},{event:i}),this.cleanupEditors(r,!0),d?r.focusCell(!0,i):this.editSvc.startEditing(r,{startedEdit:!0,event:i,source:n,ignoreEventKey:!0})),e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:i},n)=>{if(i!=="editing")return;const s=qi(this.beans,{rowNode:t,column:n});s&&!s.comp?.getCellEditor()&&yS(this.beans,s,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}},Git=class extends Rue{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t,i="ui"){const n=super.shouldStop(e,t,i);if(n!==null)return n;const{rowNode:s,column:o}=e||{};return(!this.rowNode||!this.column)&&s&&o?null:this.rowNode!==s||this.column!==o}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e){const{position:t,startedEdit:i,event:n,ignoreEventKey:s}=e;(this.rowNode!==t.rowNode||this.column!==t.column)&&super.cleanupEditors(),this.rowNode=t.rowNode,this.column=t.column,this.model.start(t),this.setupEditors({cells:[t],position:t,startedEdit:i,event:n,ignoreEventKey:s})}dispatchRowEvent(e,t,i){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stop(e,t){return super.stop(e,t),this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){const{colModel:t,editSvc:i}=this.beans,{rowIndex:n,column:s,rowPinned:o}=e,r=dh(this.beans,{rowIndex:n,rowPinned:o}),a=Tz(s),l=t.getCol(a),c=e.previousParams;if(c){const u=Tz(c.column);if(c?.rowIndex===n&&u===a&&c?.rowPinned===o)return}i?.isEditing({rowNode:r,column:l},{withOpenEditor:!0})&&e.type==="cellFocused"||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,i,n="ui",s=!1){const o=this.beans.focusSvc.getFocusedCell();o&&(e=hb(this.beans,o)??e);const r=e.cellPosition;let a;const l=this.beans.gos.get("editType")==="fullRow";l&&this.model.suspend(!0),s||(e.eGui.focus(),this.editSvc?.stopEditing(e,{source:this.editSvc?.isBatchEditing()?"ui":"api",event:i}));try{a=this.beans.navigation?.findNextCellToFocusOn(r,{backwards:t,startEditing:!0})}finally{l&&this.model.suspend(!1)}if(a===!1)return null;if(a==null)return!1;const c=a.cellPosition,u=e.isCellEditable(),d=a.isCellEditable(),p=c&&r.rowIndex===c.rowIndex&&r.rowPinned===c.rowPinned;u&&!s&&this.setFocusOutOnEditor(e);const f=this.gos.get("suppressStartEditOnTab");if(!p&&!s&&(super.cleanupEditors(a,!0),f?a.focusCell(!0,i):this.editSvc.startEditing(a,{startedEdit:!0,event:i,source:n,ignoreEventKey:!0})),d&&!s){if(a.focusCell(!1,i),f)a.focusCell(!0,i);else if(!a.comp?.getCellEditor()){const m=this.editSvc?.isEditing(a,{withOpenEditor:!0});yS(this.beans,a,{event:i,cellStartedEdit:!0,silent:m}),this.setFocusInOnEditor(a),this.cleanupEditors(a)}}else d&&s&&this.setFocusInOnEditor(a),a.focusCell(!0,i);return e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},Xg={moduleName:"EditCore",version:Ge,beans:[WQe,Bit],apiFunctions:{getEditingCells:fit,getEditRowValues:git,getCellEditorInstances:UQe,startEditingCell:vit,stopEditing:mit,isEditing:yit,validateEdit:bit},dynamicBeans:{singleCell:Git,fullRow:zit},dependsOn:[sP,xue],css:[Utt]},Vit={moduleName:"UndoRedoEdit",version:Ge,beans:[jtt],apiFunctions:{undoCellEditing:hit,redoCellEditing:pit,getCurrentUndoSize:Sit,getCurrentRedoSize:Cit},dependsOn:[Xg]},Hit={moduleName:"TextEditor",version:Ge,userComponents:{agCellEditor:d7,agTextCellEditor:d7},dependsOn:[Xg]},Wit={moduleName:"NumberEditor",version:Ge,userComponents:{agNumberCellEditor:{classImp:sit}},dependsOn:[Xg]},jit={moduleName:"DateEditor",version:Ge,userComponents:{agDateCellEditor:Ztt,agDateStringCellEditor:Jtt},dependsOn:[Xg]},Uit={moduleName:"CheckboxEditor",version:Ge,userComponents:{agCheckboxCellEditor:Ktt},dependsOn:[Xg]},$it={moduleName:"SelectEditor",version:Ge,userComponents:{agSelectCellEditor:rit},dependsOn:[Xg]},Kit={moduleName:"LargeTextEditor",version:Ge,userComponents:{agLargeTextCellEditor:tit},dependsOn:[Xg]},Yit={moduleName:"CustomEditor",version:Ge,dependsOn:[Xg]},Xit=class extends we{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,Eb(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),kYe(e))}createColumns(e,t){const i=()=>{RR(this.beans,this.columns?.tree),this.columns=null},n=e.treeDepth,o=(this.columns?.treeDepth??-1)==n,r=this.generateSelectionCols();if(AYe(r,this.columns?.list??[])&&o)return;i();const{colGroupSvc:l}=this.beans,c=l?.findDepth(e.tree)??0,u=l?.balanceTreeForAutoCols(r,c)??[];this.columns={list:r,tree:u,treeDepth:c,map:{}},t(p=>{if(!p)return null;const f=p.filter(m=>!zh(m));return[...r,...f]})}updateColumns(e){const t=Eb(e.source);for(const i of this.columns?.list??[]){const n=this.createSelectionColDef(e.currentValue);i.setColDef(n,null,t),dc(this.beans,{state:[{...n,colId:i.getColId()}]},t)}}getColumn(e){return this.columns?.list.find(t=>Rw(t,e))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){const{gos:e,beans:t}=this,i=e.get("rowSelection");if(typeof i!="object"||!Cm(e))return!1;const n=(t.autoColSvc?.getColumns()?.length??0)>0;if(i.checkboxLocation==="autoGroupColumn"&&n)return!1;const s=!!Rb(i),o=oI(i);return s||o}createSelectionColDef(e){const{gos:t}=this,i=e??t.get("selectionColumnDef"),n=t.get("enableRtl"),{rowSpan:s,spanRows:o,...r}=i??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:n?"right":"left",comparator(a,l,c,u){const d=c.isSelected(),p=u.isSelected();return d===p?0:d?1:-1},editable:!1,suppressFillHandle:!0,pinned:null,...r,colId:Mle,chartDataType:"excluded"}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);const i=new Ey(e,null,t,!1);return this.createBean(i),[i]}onSelectionOptionsChanged(e,t,i){const n=t&&typeof t!="string"?Rb(t):void 0,s=e&&typeof e!="string"?Rb(e):void 0,o=n!==s,r=t&&typeof t!="string"?oI(t):void 0,a=e&&typeof e!="string"?oI(e):void 0,l=r!==a,c=AR(e),u=AR(t);(o||l||c!==u)&&this.beans.colModel.refreshAll(i)}destroy(){RR(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(e,t,i){if(!this.columns?.list.length)return;const n=e.length+t.length+i.length;if(n===0)return;const s=this.columns.list[0];if(!s.isVisible())return;const o=()=>{let l;switch(s.pinned){case"left":case!0:l=e;break;case"right":l=i;break;default:l=t}l&&Cc(l,s)};(this.beans.rowNumbersSvc?.getColumn(Ale)?2:1)===n&&o()}};function Zit(e,t){if(!t.nodes.every(r=>r.rowPinned&&!gM(r)?(Ee(59),!1):r.id===void 0?(Ee(60),!1):!0))return;const{nodes:n,source:s,newValue:o}=t;e.selectionSvc?.setNodesSelected({nodes:n,source:s??"api",newValue:o})}function qit(e,t,i="apiSelectAll"){e.selectionSvc?.selectAllRowNodes({source:i,selectAll:t})}function Qit(e,t,i="apiSelectAll"){e.selectionSvc?.deselectAllRowNodes({source:i,selectAll:t})}function Jit(e,t="apiSelectAllFiltered"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"filtered"})}function ent(e,t="apiSelectAllFiltered"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"filtered"})}function tnt(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"currentPage"})}function int(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function nnt(e){return e.selectionSvc?.getSelectedNodes()??[]}function snt(e){return e.selectionSvc?.getSelectedRows()??[]}var ont=class extends EXe{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=kR(e),this.groupSelectsDescendants=I0(e),this.groupSelectsFiltered=IR(e)==="filteredDescendants",this.masterSelectsDetail=nq(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const t=I0(e),i=kR(e),n=IR(e)==="filteredDescendants";this.masterSelectsDetail=nq(e)==="detail",(t!==this.groupSelectsDescendants||n!==this.groupSelectsFiltered||i!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=n,this.mode=i)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,i){if(this.isRowSelectionBlocked(t))return 0;const n=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,i);if(n==null)return 0;if(this.selectionCtx.selectAll=!1,"select"in n)return n.reset?this.resetNodes():this.selectRange(n.deselect,!1,i),this.selectRange(n.select,!0,i);{const s=n.checkFilteredNodes?Lue(n.node):n.newValue;return this.setNodesSelected({nodes:[n.node],newValue:s,clearSelection:n.clearSelection,keepDescendants:n.keepDescendants,event:e,source:i})}}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:i,nodes:n,event:s,source:o,keepDescendants:r=!1}){if(n.length===0)return 0;const{gos:a}=this;if(!Cm(a)&&e)return Ee(132),0;if(n.length>1&&!this.isMultiSelect())return Ee(130),0;let l=0;for(let c=0;c<n.length;c++){const u=n[c],d=jv(u);if(d.rowPinned&&!gM(d)){Ee(59);continue}if(d.id===void 0){Ee(60);continue}this.groupSelectsFiltered&&d.group&&!a.get("treeData")||this.selectRowNode(d,e,s,o)&&(this.detailSelection.delete(d.id),l++),this.groupSelectsDescendants&&d.childrenAfterGroup?.length&&(l+=this.selectChildren(d,e,o))}return i||(n.length===1&&o==="api"&&this.selectionCtx.setRoot(jv(n[0])),e&&(t||!this.isMultiSelect())&&(l+=this.clearOtherNodes(jv(n[0]),r,o)),l>0&&(this.updateGroupsFromChildrenSelections(o),this.dispatchSelectionChanged(o))),l}selectRange(e,t,i){let n=0;return e.forEach(s=>{const o=jv(s);if(o.group&&this.groupSelectsDescendants)return;this.selectRowNode(o,t,void 0,i)&&n++}),n>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),n}selectChildren(e,t,i){const n=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return n?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:i,nodes:n}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,n)=>{e(i)&&t.set(n,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:i,rowModel:n}=this.beans;if(!Ln(i))return!1;const s=n.rootNode;if(!s)return!1;t||(t=new L0(!0,s),t.active=!1);let o=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==s){const a=this.calculateSelectedFromChildren(r);o=this.selectRowNode(r,a===null?!1:a,void 0,e)||o}}),o}clearOtherNodes(e,t,i){const n=new Map;let s=0;return this.selectedNodes.forEach(o=>{const r=o.id==e.id;if((t?!ant(e,o):!0)&&!r){const l=this.selectedNodes.get(o.id);s+=this.setNodesSelected({nodes:[l],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:i}),this.groupSelectsDescendants&&o.parent&&n.set(o.parent.id,o.parent)}}),n.forEach(o=>{const r=this.calculateSelectedFromChildren(o);this.selectRowNode(o,r===null?!1:r,void 0,i)}),s}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new gg(this.beans);return t.id=e.id,t.data=e.data,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!Ln(e))return;const i=t.getTopLevelNodes();if(i===null)return;const n=[];function s(o){for(let r=0,a=o.length;r<a;r++){const l=o[r];l.isSelected()?n.push(l):l.group&&l.childrenAfterGroup&&s(l.childrenAfterGroup)}}return s(i),n}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){const i=Ln(this.gos);let n=!1;const s=o=>{const r=this.selectRowNode(jv(o),!1,void 0,e);n||(n=r)};if(t==="currentPage"||t==="filtered"){if(!i){Mi(102);return}this.getNodesToSelect(t).forEach(s)}else this.selectedNodes.forEach(s),this.reset(e);if(this.selectionCtx.selectAll=!1,i&&this.groupSelectsDescendants){const o=this.updateGroupsFromChildrenSelections(e);n||(n=o)}n&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,i=0;return this.getNodesToSelect(e).forEach(n=>{this.groupSelectsDescendants&&n.group||(n.isSelected()?t++:n.selectable&&i++)}),{selectedCount:t,notSelectedCount:i}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:i}=this.getSelectedCounts(e);return Eue(t,i)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[],i=s=>t.push(s);if(e==="currentPage")return this.forEachNodeOnPage(s=>{if(!s.group){i(s);return}if(!s.expanded&&!s.footer){const o=r=>{i(r),r.childrenAfterFilter?.forEach(o)};o(s);return}this.groupSelectsDescendants||i(s)}),t;const n=this.beans.rowModel;return e==="filtered"?(n.forEachNodeAfterFilter(i),t):(n.forEachNode(i),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:i}=this.beans,n=t.getFirstRow(),s=t.getLastRow();for(let o=n;o<=s;o++){const r=i.getRow(o);r&&e(r)}}selectAllRowNodes(e){const{gos:t,selectionCtx:i}=this;if(!Cm(t)){Ee(132);return}if(dYe(t)&&!TR(t)){Ee(130);return}if(!this.canSelectAll())return;const{source:n,selectAll:s}=e;let o=!1;if(this.getNodesToSelect(s).forEach(r=>{const a=this.selectRowNode(jv(r),!0,void 0,n);o||(o=a)}),i.selectAll=!0,Ln(t)&&this.groupSelectsDescendants){const r=this.updateGroupsFromChildrenSelections(n);o||(o=r)}o&&this.dispatchSelectionChanged(n)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,i){if(e||(e=[]),!Array.isArray(e)){Mi(103);return}const n=new Set(e),s=[];this.beans.rowModel.forEachNode(o=>{n.has(o.id)&&s.push(o)}),i&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:s,source:t})}canSelectAll(){return Ln(this.beans.gos)}updateSelectable(e){const{gos:t,rowModel:i}=this.beans;if(!Cm(t))return;const n="selectableChanged",s=e!==void 0,o=Ln(t)&&this.groupSelectsDescendants,r=[],a=l=>{if(s&&!l.group)return;if(o&&l.group){const u=l.childrenAfterGroup?.some(d=>d.selectable)??!1;this.setRowSelectable(l,u,!0);return}!this.updateRowSelectable(l,!0)&&l.isSelected()&&r.push(l)};if(o){if(e===void 0){const l=i.rootNode;e=l?new L0(!1,l):void 0}e?.forEachChangedNodeDepthFirst(a,!s,!s)}else i.forEachNode(a);r.length&&this.setNodesSelected({nodes:r,newValue:!1,source:n}),!s&&o&&this.updateGroupsFromChildrenSelections?.(n)}updateSelectableAfterGrouping(e){this.updateSelectable(e),this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections?.("rowGroupChanged",e)&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){if(!this.masterSelectsDetail)return;const i=e.detailNode?.detailGridInfo?.api;if(!i)return;const n=rnt(i);if(e.isSelected()!==n&&this.selectRowNode(e,n,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),!n){const o=this.detailSelection.get(e.id)??new Set;for(const r of i.getSelectedNodes())o.add(r.id);this.detailSelection.set(e.id,o)}}setDetailSelectionState(e,t,i){if(this.masterSelectsDetail){if(!TR(t)){Ee(269);return}switch(e.isSelected()){case!0:{i.selectAll();break}case!1:{i.deselectAll();break}case void 0:{const n=this.detailSelection.get(e.id);if(n){const s=[];for(const o of n){const r=i.getRowNode(o);r&&s.push(r)}i.setNodesSelected({nodes:s,newValue:!0,source:"masterDetail"})}break}}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function jv(e){return gM(e)?e.pinnedSibling:e.footer?e.sibling:e}function rnt(e){let t=0,i=0;return e.forEachNode(n=>{n.isSelected()?t++:n.selectable&&i++}),Eue(t,i)}function Eue(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function ant(e,t){let i=t.parent;for(;i;){if(i===e)return!0;i=i.parent}return!1}function Lue(e){const t=e.isSelected()===!1,i=e.childrenAfterFilter?.some(Lue)??!1;return t||i}var lnt={moduleName:"SharedRowSelection",version:Ge,beans:[Xit],apiFunctions:{setNodesSelected:Zit,selectAll:qit,deselectAll:Qit,selectAllFiltered:Jit,deselectAllFiltered:ent,selectAllOnCurrentPage:tnt,deselectAllOnCurrentPage:int,getSelectedNodes:nnt,getSelectedRows:snt}},cnt={moduleName:"RowSelection",version:Ge,rowModels:["clientSide","infinite","viewport"],beans:[ont],dependsOn:[lnt]};function unt(e){e.expansionSvc?.expandAll(!0)}function dnt(e){e.expansionSvc?.expandAll(!1)}function Pue(e){e.rowModel?.onRowHeightChanged()}function Nue(e){if(e.rowAutoHeight?.active){Ee(3);return}e.rowModel?.resetRowHeights()}function hnt(e,t,i){const n=det(e);if(n){if(e.rowGroupColsSvc?.columns.length===0){if(t<0){Mi(238);return}n.setRowCount(t,i);return}Mi(28);return}nP(e)?.setRowCount(t,i)}function pnt(e){return Ry(e.gos)?e.rowModel.getBlockStates():e.rowNodeBlockLoader?.getBlockState()??{}}function gnt(e){return e.rowModel.isLastRowIndexKnown()}var fnt={moduleName:"CsrmSsrmSharedApi",version:Ge,apiFunctions:{expandAll:unt,collapseAll:dnt}},mnt={moduleName:"RowModelSharedApi",version:Ge,apiFunctions:{onRowHeightChanged:Pue,resetRowHeights:Nue}},ynt={moduleName:"SsrmInfiniteSharedApi",version:Ge,apiFunctions:{setRowCount:hnt,getCacheBlockState:pnt,isLastRowIndexKnown:gnt}},vnt=class extends we{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(n=>{if(!n){Mi(18),t||Mi(20);return}if(this.isGridApi(n))return n;const s=n;return"current"in s?s.current?.api:(s.api||Mi(19),s.api)}).filter(n=>!!n&&!n.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){if(!this.consuming)for(const t of this.getAlignedGridApis())t.isDestroyed()||t.dispatchEvent(e)}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach(n=>{i.push(t(n))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":Ee(21);break}})}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;if(t)for(const i of e.columnGroups){let n=null;i&&(n=t.getProvidedColGroup(i.getGroupId())),!(i&&!n)&&t.setColumnGroupOpened(n,i.isExpanded(),"alignedGridChanged")}}processColumnEvent(e){const t=e.column;let i=null;const n=this.beans,{colResize:s,ctrlsSvc:o,colModel:r}=n;if(t&&(i=r.getColDefCol(t.getColId())),t&&!i)return;const a=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const d=e.api.getColumnState().map(p=>({colId:p.colId}));dc(n,{state:d,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const d=e.api.getColumnState().map(p=>({colId:p.colId,hide:p.hide}));dc(n,{state:d},"alignedGridChanged")}break;case"columnPinned":{const d=e.api.getColumnState().map(p=>({colId:p.colId,pinned:p.pinned}));dc(n,{state:d},"alignedGridChanged")}break;case"columnResized":{const u=e,d={};for(const p of a)d[p.getId()]={key:p.getColId(),newWidth:p.getActualWidth()};for(const p of u.flexColumns??[])d[p.getId()]&&delete d[p.getId()];s?.setColumnWidths(Object.values(d),!1,u.finished,"alignedGridChanged");break}}const c=o.getGridBodyCtrl().isVerticalScrollShowing();for(const u of this.getAlignedGridApis())u.setGridOption("alwaysShowVerticalScroll",c)}},bnt={moduleName:"AlignedGrids",version:Ge,beans:[vnt],dependsOn:[Gce]},Snt=class extends we{constructor(e){super(),this.rootNode=e,this.nextId=0,this.allNodesMap={},p7(e)}getRowNode(e){return this.allNodesMap[e]}setNewRowData(e){const{selectionSvc:t,pinnedRowModel:i,groupStage:n}=this.beans;t?.reset("rowDataChanged"),i?.isManual()&&i.reset(),this.dispatchRowDataUpdateStarted(e),this.allNodesMap=Object.create(null),this.nextId=0;const s=p7(this.rootNode),o=new Array(e.length);s._leafs=o;let r=0;const a=n?.getNestedDataGetter(),l=a?new Set:null,c=(u,d)=>{const p=u.level+1;for(let f=0,m=d.length;f<m;++f){const v=d[f];if(!v)continue;const b=this.createRowNode(v,p);if(b.sourceRowIndex=r,o[r++]=b,l&&!l.has(v)){l.add(v),b.treeParent=u;const C=a(v);C&&c(b,C)}}};c(s,e),o.length=r}setImmutableRowData(e,t){const{rootNode:i,gos:n}=this;this.dispatchRowDataUpdateStarted(t);const s=pS(n),o=e.changedRowNodes,{adds:r,updates:a}=o,l=new Set,c=[],u=this.beans.groupStage?.getNestedDataGetter();let d=n.get("suppressMaintainUnsortedOrder")?void 0:!1,p=-1,f=!1;const m=(C,x)=>{if(!d&&d!==void 0){const w=C.sourceRowIndex;d=w<=p,p=w}C.data!==x&&(C.updateData(x),r.has(C)||a.add(C),!C.selectable&&C.isSelected()&&c.push(C))},v=(C,x,w)=>{for(let M=0,T=x.length;M<T;++M){const L=x[M];if(!L)continue;let I=this.getRowNode(s({data:L,level:w}));if(I?(m(I,L),f||(f=!!u&&I.treeParent!==C)):(I=this.createRowNode(L,w),r.add(I)),!u||l.has(I)){l.add(I);continue}l.add(I),I.treeParent=C;const R=u(L);R&&v(I,R,w+1)}};v(i,t,0);const b=this.deleteUnusedNodes(l,o,c)||d||r.size>0;if(b){const C=i._leafs??(i._leafs=[]);d===void 0?Mnt(C,l,o):Dnt(C,l)&&(o.reordered=!0)}(b||f||a.size)&&(e.rowDataUpdated=!0,this.deselect(c))}deleteUnusedNodes(e,{removals:t},i){const n=this.rootNode._leafs;for(let s=0,o=n.length;s<o;s++){const r=n[s];e.has(r)||(t.add(r),r.isSelected()&&i.push(r),this.deleteNode(r))}return t.size>0}updateRowData(e,t){if(this.dispatchRowDataUpdateStarted(e.add),this.beans.groupStage?.getNestedDataGetter())return Ee(268),{remove:[],update:[],add:[]};const i=[],n=pS(this.gos),s=this.executeRemove(n,e,t,i),o=this.executeUpdate(n,e,t,i),r=this.executeAdd(e,t);return this.deselect(i),{remove:s,update:o,add:r}}executeRemove(e,{remove:t},{adds:i,updates:n,removals:s},o){const r=this.rootNode._leafs,a=r?.length,l=t?.length;if(!l||!a)return[];let c=0,u=a,d=0,p;const f=new Array(l);for(let m=0;m<l;++m){const v=this.lookupNode(e,t[m]);if(!v)continue;const b=v.sourceRowIndex;b<u&&(u=b),b>d&&(d=b),v.isSelected()&&o.push(v),this.deleteNode(v),i.delete(v)?(p??(p=new Set),p.add(v)):(n.delete(v),s.add(v)),f[c++]=v}return f.length=c,c&&wnt(r,u,d,s,p),f}executeUpdate(e,{update:t},{adds:i,updates:n},s){const o=t?.length;if(!o)return[];const r=new Array(o);let a=0;for(let l=0;l<o;l++){const c=t[l],u=this.lookupNode(e,c);u&&(u.updateData(c),!u.selectable&&u.isSelected()&&s.push(u),r[a++]=u,i.has(u)||n.add(u))}return r.length=a,r}executeAdd(e,t){var i;const n=(i=this.rootNode)._leafs??(i._leafs=[]),s=n.length,o=e.add,r=o?.length;if(!r)return[];const a=s+r;let l=this.sanitizeAddIndex(n,e.addIndex);if(l<s){for(let d=s-1,p=a-1;d>=l;--d){const f=n[d];f.sourceRowIndex=p,n[p--]=f}t.reordered=!0}n.length=a;const c=new Array(r),u=t.adds;for(let d=0;d<r;d++){const p=this.createRowNode(o[d],0);u.add(p),p.sourceRowIndex=l,n[l]=p,c[d]=p,l++}return c}dispatchRowDataUpdateStarted(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}deselect(e){const t="rowDataChanged",i=this.beans.selectionSvc;e.length&&i?.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),i?.updateGroupsFromChildrenSelections?.(t),e.length&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:i?.getSelectedNodes()??null,serverSideState:null})}createRowNode(e,t){const i=new gg(this.beans);i.parent=this.rootNode,i.level=t,i.group=!1,i.expanded=!1,i.setDataAndId(e,String(this.nextId++));const n=i.id,s=this.allNodesMap;return s[n]&&Ee(2,{nodeId:n}),s[n]=i,i}deleteNode(e){e.clearRowTopAndRowIndex();const t=e.id,i=this.allNodesMap;i[t]===e&&delete i[t];const n=e.pinnedSibling;n&&this.beans.pinnedRowModel?.pinRow(n,null)}lookupNode(e,t){if(!e)return xnt(this.rootNode._leafs,t);const i=e({data:t,level:0}),n=this.allNodesMap[i];return n||(Mi(4,{id:i}),null)}sanitizeAddIndex(e,t){const i=e.length;if(typeof t!="number"||t<0||t>=i||Number.isNaN(t))return i;t=Math.ceil(t);const n=this.gos;return t>0&&n.get("treeData")&&n.get("getDataPath")&&(t=Cnt(e,t)),t}},Cnt=(e,t)=>{for(let i=0,n=e.length;i<n;i++)if(e[i]?.rowIndex==t-1)return i+1;return t},p7=e=>{e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",e._leafs?.length!==0&&(e._leafs=[]);const t=[],i=[],n=[],s=[];e.childrenAfterGroup=t,e.childrenAfterSort=i,e.childrenAfterAggFilter=n,e.childrenAfterFilter=s;const o=e.sibling;return o&&(o.childrenAfterGroup=t,o.childrenAfterSort=i,o.childrenAfterAggFilter=n,o.childrenAfterFilter=s,o.childrenMapped=e.childrenMapped),e.updateHasChildren(),e},xnt=(e,t)=>{if(e)for(let i=0,n=e.length;i<n;i++){const s=e[i];if(s.data===t)return s}return Mi(5,{data:t}),null},wnt=(e,t,i,n,s)=>{t=Math.max(0,t);for(let o=t,r=e.length;o<r;++o){const a=e[o];o<=i&&(n.has(a)||s?.has(a))||(a.sourceRowIndex=t,e[t++]=a)}e.length=t},Dnt=(e,t)=>{const i=t.size;e.length=i;let n=0,s=!1,o=!1;for(const r of t){const a=r.sourceRowIndex;a===n?o||(o=s):(a>=0?o=!0:s=!0,r.sourceRowIndex=n,e[n]=r),++n}return o},Mnt=(e,t,{removals:i,adds:n})=>{const s=e.length;e.length=t.size;let o=0;for(let r=0;r<s;++r){const a=e[r];i.has(a)||(o!==r&&(a.sourceRowIndex=o,e[o]=a),++o)}for(const r of n)r.sourceRowIndex<0&&(r.sourceRowIndex=o,e[o++]=r);e.length=o},Oue=e=>{const t=e.childrenAfterSort,i=e.sibling;if(i&&(i.childrenAfterSort=t),!!t)for(let n=0,s=t.length-1;n<=s;n++){const o=t[n],r=n===0,a=n===s;o.firstChild!==r&&(o.firstChild=r,o.dispatchRowEvent("firstChildChanged")),o.lastChild!==a&&(o.lastChild=a,o.dispatchRowEvent("lastChildChanged")),o.childIndex!==n&&(o.childIndex=n,o.dispatchRowEvent("childIndexChanged"))}},Ant=class extends we{constructor(){super(...arguments),this.beanName="sortStage",this.step="sort",this.refreshProps=["postSortRows","groupDisplayType","accentedSort"]}execute(e){const t=this.beans.sortSvc.getSortOptions(),i=t.length>0&&!!e.changedRowNodes&&this.gos.get("deltaSort");this.sort(t,i,e.changedRowNodes,e.changedPath)}sort(e,t,i,n){const{gos:s,colModel:o,rowGroupColsSvc:r,rowNodeSorter:a,rowRenderer:l,showRowGroupCols:c}=this.beans,u=s.get("groupMaintainOrder"),d=o.getCols().some(x=>x.isRowGroupActive()),p=r?.columns,f=o.isPivotMode(),m=s.getCallback("postSortRows");let v=!1,b;const C=x=>{const w=f&&x.leafGroup;let M=u&&d&&!x.leafGroup;M&&(b??(b=this.shouldSortContainsGroupCols(e)),M&&(M=!b));let T=null;if(M){let L=!1;if(p){const I=x.level+1;I<p.length&&(L=p[I].getSort()===null)}L||(T=Int(x))}else!e.length||w||(t&&i?T=knt(a,x,i,n,e):T=a.doFullSort(x.childrenAfterAggFilter,e));if(T||(T=x.childrenAfterAggFilter?.slice(0)??[]),v||(v=x.childrenAfterSort?.[0]!==T[0]),x.childrenAfterSort=T,Oue(x),m){const L={nodes:x.childrenAfterSort};m(L)}};if(n?.forEachChangedNodeDepthFirst(C),v&&s.get("groupHideOpenParents")){const x=c?.getShowRowGroupCols();x?.length&&l.refreshCells({columns:x,force:!0})}}shouldSortContainsGroupCols(e){const t=e.length;if(!t)return!1;if(pu(this.gos)){for(let i=0;i<t;++i){const n=e[i].column;if(n.isPrimary()&&n.isRowGroupActive())return!0}return!1}for(let i=0;i<t;++i)if(e[i].column.getColDef().showRowGroup)return!0;return!1}},knt=(e,t,i,n,s)=>{const o=t.childrenAfterAggFilter,r=t.childrenAfterSort;if(!r)return e.doFullSort(o,s);const a=new Set,l=[],{updates:c,adds:u}=i;for(let p=0,f=o.length;p<f;++p){const m=o[p];c.has(m)||u.has(m)||n&&!n.canSkip(m)?l.push({currentPos:l.length,rowNode:m}):a.add(m)}const d=r.filter(p=>a.has(p)).map((p,f)=>({currentPos:f,rowNode:p}));return l.sort((p,f)=>e.compareRowNodes(s,p,f)),Tnt(e,s,l,d)},Tnt=(e,t,i,n)=>{let s=0,o=0;const r=i.length,a=n.length,l=new Array(r+a);let c=0;for(;s<r&&o<a;){const u=i[s],d=n[o];e.compareRowNodes(t,u,d)<0?(l[c++]=u.rowNode,++s):(l[c++]=d.rowNode,++o)}for(;s<r;)l[c++]=i[s++].rowNode;for(;o<a;)l[c++]=n[o++].rowNode;return l},Int=e=>{const t=e.childrenAfterSort,i=e.childrenAfterAggFilter,n=t?.length,s=i?.length;if(!n||!s)return null;const o=new Array(s),r=new Set;for(let l=0;l<s;++l)r.add(i[l]);let a=0;for(let l=0;l<n;++l){const c=t[l];r.delete(c)&&(o[a++]=c)}if(r.size===0&&a===n)return t;for(const l of r)o[a++]=l;return o.length=a,o},Rnt=class extends we{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowCountReady=!1,this.nodeManager=void 0,this.rowsToDisplay=[],this.rowDataUpdatedPending=!1,this.asyncTransactions=null,this.asyncTransactionsTimer=0,this.started=!1,this.refreshingModel=!1,this.rowNodesCountReady=!1,this.stages=[],this.stagesRefreshProps=new Map,this.onRowHeightChanged_debounced=Co(this,this.onRowHeightChanged.bind(this),100)}postConstruct(){const e=this.beans,t=new gg(e);this.rootNode=t,this.nodeManager=this.createBean(new Snt(t));const i=this.refreshModel.bind(this,{step:"group"}),n=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")});this.addManagedEventListeners({newColumnsLoaded:n,columnRowGroupChanged:i,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:i,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)}),this.addPropertyListeners()}addPropertyListeners(){const{beans:e,stagesRefreshProps:t}=this,i=[e.groupStage,e.filterStage,e.pivotStage,e.aggStage,e.sortStage,e.filterAggStage,e.flattenStage].filter(n=>!!n);this.stages=i;for(let n=i.length-1;n>=0;--n)for(const s of i[n].refreshProps)t.set(s,n);this.addManagedPropertyListeners([...t.keys()],n=>{const s=n.changeSet?.properties;s&&this.onPropChange(s)}),this.addManagedPropertyListener("rowData",()=>this.onPropChange(["rowData"])),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,i,n){let s,o=!1;do{s=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(r,i),c=Math.min(a,n);for(let u=l;u<=c;u++){const d=this.getRow(u);if(d.rowHeightEstimated){const p=dg(this.beans,d);d.setRowHeight(p.height),s=!0,o=!0}}s&&this.setRowTopAndRowIndex()}while(s);return o}onPropChange(e){const{nodeManager:t,gos:i,beans:n}=this,s=n.groupStage;if(!t)return;const o=new Set(e),r=s?.onPropChange(o);let a;o.has("rowData")?a=i.get("rowData"):r&&(a=s?.extractData()),a&&!Array.isArray(a)&&(a=null,Ee(1));const l={step:"nothing",changedProps:o};a&&(!r&&!this.isEmpty()&&a.length>0&&i.exists("getRowId")&&!i.get("resetRowDataOnUpdate")?(l.keepRenderedRows=!0,l.animate=!i.get("suppressAnimationFrame"),l.changedRowNodes=new hI,t.setImmutableRowData(l,a)):(l.rowDataUpdated=!0,l.newData=!0,t.setNewRowData(a),this.rowNodesCountReady=!0));const c=l.rowDataUpdated?"group":this.getRefreshedStage(e);c&&(l.step=c,this.refreshModel(l))}getRefreshedStage(e){const{stages:t,stagesRefreshProps:i}=this,n=t.length;let s=n;for(let o=0,r=e.length;o<r&&s;++o)s=Math.min(s,i.get(e[o])??s);return s<n?t[s].step:null}setRowTopAndRowIndex(e){const{beans:t,rowsToDisplay:i}=this,n=t.environment.getDefaultRowHeight();let s=0;const o=wo(this.gos,"normal");for(let r=0,a=i.length;r<a;++r){const l=i[r],c=l.id;if(c!=null&&e?.add(c),l.rowHeight==null){const u=dg(t,l,o,n);l.setRowHeight(u.height,u.estimated)}l.setRowTop(s),l.setRowIndex(r),s+=l.rowHeight}}clearRowTopAndRowIndex(e,t){const i=e.active,n=r=>{r?.id!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},s=r=>{n(r),n(r.detailNode),n(r.sibling);const a=r.childrenAfterGroup;if(!r.hasChildren()||!a)return;const l=r.level==-1;if(!(i&&!l&&!r.expanded))for(let u=0,d=a.length;u<d;++u)s(a[u])},o=this.rootNode;o&&s(o)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay.length}getTopLevelRowCount(){const{rootNode:e,rowsToDisplay:t}=this;if(!e||!t.length)return 0;if(t[0]===e)return 1;const n=e.sibling?.displayed?1:0;return(e.childrenAfterSort?.length??0)+n}getTopLevelRowDisplayedIndex(e){const{beans:t,rootNode:i,rowsToDisplay:n}=this;if(!i||!n.length||n[0]===i)return e;const o=i.childrenAfterSort,r=l=>{let c=o[l];if(this.gos.get("groupHideOpenParents"))for(;c.expanded&&c.childrenAfterSort&&c.childrenAfterSort.length>0;)c=c.childrenAfterSort[0];return c.rowIndex},a=t.footerSvc;return a?a?.getTopDisplayIndex(n,e,o,r):r(e)}getTopLevelIndexFromDisplayedIndex(e){const{rootNode:t,rowsToDisplay:i}=this;if(!t||!i.length||i[0]===t)return e;let s=this.getRow(e);s.footer&&(s=s.sibling);let o=s.parent;for(;o&&o!==t;)s=o,o=s.parent;const r=t.childrenAfterSort?.indexOf(s)??-1;return r>=0?r:e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){this.refreshModel({step:"map",keepRenderedRows:!0,animate:Ib(this.gos)})}onFilterChanged({afterDataChange:e,columns:t}){if(!e){const n=t.length===0||t.some(s=>s.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:n,keepRenderedRows:!0,animate:Ib(this.gos)})}}onSortChanged(){this.refreshModel({step:"sort",keepRenderedRows:!0,animate:Ib(this.gos)})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.beans.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new L0(!1,this.rootNode);return t.active=e,t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:i,rowDataUpdated:n}=e;return!(!t||i||!n||t.removals.size||t.adds.size)}refreshModel(e){const{nodeManager:t,beans:i,eventSvc:n,started:s,refreshingModel:o}=this;if(!t)return;const r=!!e.rowDataUpdated,a=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&r));if(s&&r&&n.dispatchEvent({type:"rowDataUpdated"}),!s||o||i.colModel.changeEventsDispatching||this.isSuppressModelUpdateAfterUpdateTransaction(e)){this.rowDataUpdatedPending||(this.rowDataUpdatedPending=r);return}switch(this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.step="group"),this.refreshingModel=!0,i.masterDetailSvc?.refreshModel(e),r&&e.step!=="group"&&i.colFilter?.refreshModel(),e.step){case"group":this.doGrouping(e);case"filter":this.doFilter(a);case"pivot":this.doPivot(a);case"aggregate":this.doAggregate(a);case"filter_aggregates":this.doFilterAggregates(a);case"sort":this.doSort(e.changedRowNodes,a);case"map":this.doRowsToDisplay()}const l=new Set;this.setRowTopAndRowIndex(l),this.clearRowTopAndRowIndex(a,l),this.refreshingModel=!1,n.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}isEmpty(){return!this.rootNode?._leafs?.length||!this.beans.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,n=!1;const s=[],o=I0(this.gos);return this.forEachNodeAfterFilterAndSort(r=>{if(n)return;if(i&&(r===t||r===e)&&(n=!0,o&&r.group)){Fue(s,r);return}if(!i){if(r!==t&&r!==e)return;i=!0,t===e&&(n=!0)}(!r.group||!o)&&s.push(r)}),s}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay,i=t.length;if(this.isEmpty()||i===0)return-1;let n=0,s=i-1;if(e<=0)return 0;if(t[s].rowTop<=e)return s;let r=-1,a=-1;for(;;){const l=Math.floor((n+s)/2),c=t[l];if(this.isRowInPixel(c,e)||(c.rowTop<e?n=l+1:c.rowTop>e&&(s=l-1),r===n&&a===s))return l;r=n,a=s}}isRowInPixel(e,t){const i=e.rowTop,n=i+e.rowHeight;return i<=t&&n>t}forEachLeafNode(e){const t=this.rootNode?._leafs;if(t)for(let i=0,n=t.length;i<n;++i)e(t[i],i)}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){const t=this.rowsToDisplay;for(let i=0,n=t.length;i<n;++i)e(t[i],i)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,i=>i.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,i=>i.childrenAfterSort)}forEachPivotNode(e,t,i){const{colModel:n,rowGroupColsSvc:s}=this.beans;if(!n.isPivotMode())return;if(!s?.columns.length){e(this.rootNode,0);return}const o=i?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,r=>r.leafGroup?null:r[o])}depthFirstSearchRowNodes(e,t=!1,i=o=>o.childrenAfterGroup,n=this.rootNode,s=0){let o=s;if(!n)return o;const r=n===this.rootNode;if(r||e(n,o++),n.hasChildren()&&!n.footer){const a=i(n);if(a){const l=this.beans.footerSvc;o=l?.addTotalRows(o,n,e,t,r,"top")??o;for(const c of a)o=this.depthFirstSearchRowNodes(e,t,i,c,o);return l?.addTotalRows(o,n,e,t,r,"bottom")??o}}return o}doAggregate(e){const t=this.rootNode;t&&this.beans.aggStage?.execute({rowNode:t,changedPath:e})}doFilterAggregates(e){const t=this.rootNode,i=this.beans.filterAggStage;if(i){i.execute({rowNode:t,changedPath:e});return}t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){const i=this.beans.sortStage;if(i){i.execute({rowNode:this.rootNode,changedRowNodes:e,changedPath:t});return}t.forEachChangedNodeDepthFirst(n=>{n.childrenAfterSort=n.childrenAfterAggFilter.slice(0),Oue(n)})}doGrouping(e){const t=this.rootNode,n=this.beans.groupStage?.execute({rowNode:t,changedRowNodes:e.changedRowNodes,changedPath:e.changedPath,afterColumnsChanged:!!e.afterColumnsChanged});if(n===void 0){const s=t._leafs;t.childrenAfterGroup=s,t.updateHasChildren();const o=t.sibling;o&&(o.childrenAfterGroup=s)}(n||e.rowDataUpdated)&&this.beans.colFilter?.refreshModel(),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){const t=this.beans.filterStage;if(t){t.execute({rowNode:this.rootNode,changedPath:e});return}e.forEachChangedNodeDepthFirst(i=>{i.childrenAfterFilter=i.childrenAfterGroup,aue(i)},!0)}doPivot(e){this.beans.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getRowNode(e){const t=this.nodeManager?.getRowNode(e);return typeof t=="object"?t:typeof e=="string"&&e.indexOf(vz)===0?this.beans.groupStage?.getNode(e):void 0}batchUpdateRowData(e,t){if(!this.asyncTransactionsTimer){this.asyncTransactions=[];const i=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimer=setTimeout(()=>this.executeBatchUpdateRowData(),i)}this.asyncTransactions.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){const e=this.asyncTransactionsTimer;e&&(clearTimeout(e),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){const{nodeManager:e,beans:t,eventSvc:i,asyncTransactions:n}=this;if(!e)return;t.valueCache?.onDataChanged();const s=[],o=[],r=new hI;for(const{rowDataTransaction:a,callback:l}of n??[]){this.rowNodesCountReady=!0;const c=e.updateRowData(a,r);s.push(c),l&&o.push(l.bind(null,c))}this.commitTransactions(r),o.length>0&&setTimeout(()=>{for(let a=0,l=o.length;a<l;a++)o[a]()},0),s.length>0&&i.dispatchEvent({type:"asyncTransactionsFlushed",results:s}),this.asyncTransactionsTimer=0,this.asyncTransactions=null}updateRowData(e){const t=this.nodeManager;if(!t)return null;this.beans.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;const i=new hI,n=t.updateRowData(e,i);return this.commitTransactions(i),n}commitTransactions(e){this.refreshModel({step:"group",rowDataUpdated:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedRowNodes:e,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{beans:e,rootNode:t}=this,i=e.flattenStage;if(i){this.rowsToDisplay=i.execute({rowNode:t});return}const n=this.rootNode.childrenAfterSort??[];for(const s of n)s.setUiLevel(0);this.rowsToDisplay=n}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0);const i=e.sibling;i?.setRowHeight(i.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i?.setRowHeight(i.rowHeight,!0);const n=t.sibling;n?.setRowHeight(n.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){e.rowHeightChanged&&!this.beans.rowAutoHeight?.active&&this.resetRowHeights()}onGridReady(){this.started||this.setInitialData()}destroy(){super.destroy(),this.nodeManager=this.destroyBean(this.nodeManager),this.started=!1,this.rootNode=null,this.rowsToDisplay=[],this.asyncTransactions=null,clearTimeout(this.asyncTransactionsTimer)}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},Fue=(e,t)=>{const i=t.childrenAfterGroup;if(i)for(let n=0,s=i.length;n<s;++n){const o=i[n];o.data&&e.push(o),o.group&&Fue(e,o)}};function Ent(e){e.expansionSvc?.onGroupExpandedOrCollapsed()}function Lnt(e,t){const i=Yg(e);i&&((!t||t==="everything")&&(t="group"),i.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function Pnt(e){return Yg(e)?.isEmpty()??!0}function Nnt(e,t){Yg(e)?.forEachLeafNode(t)}function Ont(e,t){Yg(e)?.forEachNodeAfterFilter(t)}function Fnt(e,t){Yg(e)?.forEachNodeAfterFilterAndSort(t)}function Bnt(e,t){return e.frameworkOverrides.wrapIncoming(()=>Yg(e)?.updateRowData(t))}function _nt(e,t,i){e.frameworkOverrides.wrapIncoming(()=>Yg(e)?.batchUpdateRowData(t,i))}function znt(e){e.frameworkOverrides.wrapIncoming(()=>Yg(e)?.flushAsyncTransactions())}function Gnt(e){return e.selectionSvc?.getBestCostNodeSelection()}var Vnt={moduleName:"ClientSideRowModel",version:Ge,rowModels:["clientSide"],beans:[Rnt,Ant],dependsOn:[nue]},Hnt={moduleName:"ClientSideRowModelApi",version:Ge,apiFunctions:{onGroupExpandedOrCollapsed:Ent,refreshClientSideRowModel:Lnt,isRowDataEmpty:Pnt,forEachLeafNode:Nnt,forEachNodeAfterFilter:Ont,forEachNodeAfterFilterAndSort:Fnt,applyTransaction:Bnt,applyTransactionAsync:_nt,flushAsyncTransactions:znt,getBestCostNodeSelection:Gnt,resetRowHeights:Nue,onRowHeightChanged:Pue},dependsOn:[fnt,mnt]},Wnt=class extends we{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:i,columnKeys:n,skipRowGroups:s,exportRowNumbers:o}=t,r=this.getColumnsToExport({allColumns:i,skipRowGroups:s,columnKeys:n,exportRowNumbers:o});return[this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t)].reduce((a,l)=>l(a),e).parse()}processRow(e,t,i,n){const s=t.shouldRowBeSkipped||(()=>!1),r=t.rowPositions!=null||!!t.onlySelected,a=this.gos.get("groupHideOpenParents")&&!r,l=this.colModel.isPivotMode()?n.leafGroup:!n.group,c=!!n.footer,u=n.allChildrenCount===1&&n.childrenAfterGroup?.length===1&&cYe(this.gos,n);if(!l&&!c&&(t.skipRowGroups||u||a)||t.onlySelected&&!n.isSelected()||t.skipPinnedTop&&n.rowPinned==="top"||t.skipPinnedBottom&&n.rowPinned==="bottom"||n.stub||n.level===-1&&!l&&!c||s(ct(this.gos,{node:n})))return;const f=e.onNewBodyRow(n);if(i.forEach((m,v)=>{f.onColumn(m,v,n)}),t.getCustomContentBelowRow){const m=t.getCustomContentBelowRow(ct(this.gos,{node:n}));m&&e.addCustomContent(m)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const n=new Fle,{colGroupSvc:s}=this.beans,o=s?s.createColumnGroups({columns:t,idCreator:n,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(o,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const n=i.onNewHeaderRow();t.forEach((s,o)=>{n.onColumn(s,o,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{const n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="top").sort((s,o)=>s.rowIndex-o.rowIndex).map(s=>this.pinnedRowModel?.getPinnedTopRow(s.rowIndex)).forEach(n):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("top",n),i}}processRows(e,t){return i=>{const n=this.rowModel,s=Ln(this.gos),o=Ry(this.gos),r=!s&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(c=>c.rowPinned==null).sort((c,u)=>c.rowIndex-u.rowIndex).map(c=>n.getRow(c.rowIndex)).forEach(a);else if(this.colModel.isPivotMode())s?n.forEachPivotNode(a,!0,l==="filteredAndSorted"):o?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a);else if(e.onlySelectedAllPages||r){const c=this.beans.selectionSvc?.getSelectedNodes()??[];this.replicateSortedOrder(c),c.forEach(a)}else l==="all"?n.forEachNode(a):s||o?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a);return i}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:i}=this.beans;if(!t||!i)return;const n=t.getSortOptions(),s=(o,r)=>o.rowIndex!=null&&r.rowIndex!=null?o.rowIndex-r.rowIndex:o.level===r.level?o.parent?.id===r.parent?.id?i.compareRowNodes(n,{rowNode:o,currentPos:o.rowIndex??-1},{rowNode:r,currentPos:r.rowIndex??-1}):s(o.parent,r.parent):o.level>r.level?s(o.parent,r):s(o,r.parent);e.sort(s)}processPinnedBottomRows(e,t){return i=>{const n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="bottom").sort((s,o)=>s.rowIndex-o.rowIndex).map(s=>this.pinnedRowModel?.getPinnedBottomRow(s.rowIndex)).forEach(n):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("bottom",n),i}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:i=!1,exportRowNumbers:n=!1,columnKeys:s}=e,{colModel:o,gos:r,visibleCols:a}=this,l=o.isPivotMode(),c=p=>zh(p)?!1:!Qd(p)||n;if(s?.length)return o.getColsForKeys(s).filter(c);const u=r.get("treeData");let d=[];return t&&!l?d=o.getCols():d=a.allCols,d=d.filter(p=>c(p)&&(i&&!u?!Sj(p):!0)),d}recursivelyAddHeaderGroups(e,t,i){const n=[];for(const s of e){const o=s;if(o.getChildren)for(const r of o.getChildren()??[])n.push(r)}e.length>0&&Yn(e[0])&&this.doAddHeaderHeader(t,e,i),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,t,i)}doAddHeaderHeader(e,t,i){const n=e.onNewHeaderGroupingRow();let s=0;for(const o of t){const r=o;let a;i?a=i(ct(this.gos,{columnGroup:r})):a=this.beans.colNames.getDisplayNameForColumnGroup(r,"header");const c=(r.isExpandable()?r.getLeafColumns():[]).reduce((u,d,p,f)=>{let m=Ni(u);return d.getColumnGroupShow()==="open"?(!m||m[1]!=null)&&(m=[p],u.push(m)):m&&m[1]==null&&(m[1]=p-1),p===f.length-1&&m&&m[1]==null&&(m[1]=p),u},[]);n.onColumn(r,a||"",s++,r.getLeafColumns().length-1,c)}}},jnt={moduleName:"SharedExport",version:Ge,beans:[Wnt]},g7=`\r
`,Unt=class extends vet{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,g7),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,n)=>{n!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,n){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(n)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){t!=0&&(this.result+=this.columnSeparator);const n=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(n.valueFormatted??n.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(Ee(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=g7),this.isFirstLine=!1}},$nt=class extends yet{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.colModel=e.colModel,this.colNames=e.colNames,this.rowGroupColsSvc=e.rowGroupColsSvc,this.valueSvc=e.valueSvc}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){Ee(51);return}const t=this.getMergedParams(e),i=this.getData(t),n=new Blob(["\uFEFF",i],{type:"text/plain"}),s=typeof t.fileName=="function"?t.fileName(ct(this.gos,{})):t.fileName;bet(this.getFileName(s),n)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:i,rowGroupColsSvc:n,valueSvc:s,gos:o}=this,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:d}=e;return new Unt({colModel:t,colNames:i,valueSvc:s,gos:o,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:d||",",rowGroupColsSvc:n})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function Knt(e,t){return e.csvCreator?.getDataAsCsv(t)}function Ynt(e,t){e.csvCreator?.exportDataAsCsv(t)}var Xnt={moduleName:"CsvExport",version:Ge,beans:[$nt],apiFunctions:{getDataAsCsv:Knt,exportDataAsCsv:Ynt},dependsOn:[jnt]},Znt=class extends we{constructor(e,t,i){super(),this.id=e,this.parentCache=t,this.params=i,this.state="needsLoading",this.version=0,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:i,beans:n,rowNodes:s}=this;for(let o=0;o<e;o++){const r=i+o,a=new gg(n);a.setRowHeight(t),a.uiLevel=0,a.setRowIndex(r),a.setRowTop(t*r),s.push(a)}}getBlockStateJson(){const{id:e,startRow:t,endRow:i,state:n}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:i,pageStatus:n}}}setDataAndId(e,t,i){We(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(tn(this.params.datasource.getRows)){Ee(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){const{startRow:e,endRow:t,version:i,params:{sortModel:n,filterModel:s},gos:o}=this;return{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,i),failCallback:this.pageLoadFailed.bind(this,i),sortModel:n,filterModel:s,context:ct(o,{}).context}}forEachNode(e,t,i){this.rowNodes.forEach((n,s)=>{this.startRow+s<i&&e(n,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);const i=e-this.startRow;return this.rowNodes[i]}processServerResult(e){const{rowNodes:t,beans:i}=this;t.forEach((s,o)=>{const r=e.rowData?e.rowData[o]:void 0;!s.id&&s.alreadyRendered&&r&&(t[o]=new gg(i),t[o].setRowIndex(s.rowIndex),t[o].setRowTop(s.rowTop),t[o].setRowHeight(s.rowHeight),s.clearRowTopAndRowIndex()),this.setDataAndId(t[o],r,this.startRow+o)});const n=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,n)}destroy(){for(const e of this.rowNodes)e.clearRowTopAndRowIndex();super.destroy()}},qnt=2,Qnt=class extends we{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let n=this.blocks[i];if(!n){if(t)return;n=this.createBlock(i)}return n.getRow(e)}createBlock(e){const t=this.params,i=this.createBean(new Znt(e,this,t));return this.blocks[i.id]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),t.rowNodeBlockLoader.addBlock(i),i}refreshCache(){if(this.blockCount==0){this.purgeCache();return}for(const t of this.getBlocksInOrder())t.setStateWaitingToLoad();this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){for(const e of this.getBlocksInOrder())this.destroyBlock(e);super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(Wm(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(r=>r!=e),i=(r,a)=>a.lastAccessed-r.lastAccessed;t.sort(i);const n=this.params.maxBlocksInCache>0,s=n?this.params.maxBlocksInCache-1:null,o=qnt-1;t.forEach((r,a)=>{const l=r.state==="needsLoading"&&a>=o,c=n?a>=s:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(r)||this.isBlockFocused(r))return;this.removeBlockFromCache(r)}})}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const{startRow:i,endRow:n}=e;return t.rowIndex>=i&&t.rowIndex<n}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:i}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,i-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:i,overflowSize:n}=this.params,o=(e.id+1)*i+n;this.rowCount<o&&(this.rowCount=o)}}setRowCount(e,t){this.rowCount=e,We(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};for(const i of this.getBlocksInOrder())i.forEachNode(e,t,this.rowCount)}getBlocksInOrder(){const e=(i,n)=>i.id-n.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];for(const t of this.getBlocksInOrder())t.id*this.params.blockSize>=this.rowCount&&e.push(t);if(e.length>0)for(const t of e)this.destroyBlock(t)}purgeCache(){for(const e of this.getBlocksInOrder())this.removeBlockFromCache(e);this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let n=-1,s=!1;const o={value:0};let r=!1;for(const l of this.getBlocksInOrder())if(!r){if(s&&n+1!==l.id){r=!0;continue}n=l.id,l.forEachNode(c=>{const u=c===e||c===t;(s||u)&&i.push(c),u&&(s=!s)},o,this.rowCount)}return r||s?[]:i}},Jnt=class extends we{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){if(this.gos.get("rowModelType")!=="infinite")return;const e=this.beans,t=new gg(e);this.rootNode=t,t.level=-1,this.rowHeight=xm(e),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache())}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy(),this.rootNode=null}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=xm(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){let e;this.cacheParams?e=!w0(this.cacheParams.sortModel,this.beans.sortSvc?.getSortModel()??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?.getRowNodesInRange(e,t)??[]}reset(){if(!this.datasource)return;pS(this.gos)!=null||this.beans.selectionSvc?.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const e=this.beans,{filterManager:t,sortSvc:i,rowNodeBlockLoader:n,eventSvc:s,gos:o}=e;this.cacheParams={datasource:this.datasource,filterModel:t?.getFilterModel()??{},sortModel:i?.getSortModel()??[],rowNodeBlockLoader:n,initialRowCount:o.get("infiniteInitialRowCount"),maxBlocksInCache:o.get("maxBlocksInCache"),rowHeight:xm(e),overflowSize:o.get("cacheOverflowSize"),blockSize:o.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new Qnt(this.cacheParams)),s.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache?.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache?.refreshCache()}purgeCache(){this.infiniteCache?.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?.isLastRowIndexKnown()??!1}setRowCount(e,t){this.infiniteCache?.setRowCount(e,t)}resetRowHeights(){}onRowHeightChanged(){}};function est(e){nP(e)?.refreshCache()}function tst(e){nP(e)?.purgeCache()}function ist(e){return nP(e)?.getRowCount()}var nst=class extends we{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=uYe(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Co(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Cc(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){Wm(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(i=>i.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length;for(const i of t)i.load();this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach(t=>{const{id:i,state:n}=t.getBlockStateJson();e[i]=n}),e}printCacheStatus(){Wm(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},sst={moduleName:"InfiniteRowModelCore",version:Ge,rowModels:["infinite"],beans:[Jnt,nst]},ost={moduleName:"InfiniteRowModel",version:Ge,apiFunctions:{refreshInfiniteCache:est,purgeInfiniteCache:tst,getInfiniteRowCount:ist},dependsOn:[sst,ynt]},rst="",ast="",lst={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},cst=class extends An{constructor(){super(lst),this.eValue=ot,this.eDelta=ot,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),n=e.formatValue(i),s=We(n)?n:i,o=t>=0,r=this.eDelta;o?r.textContent=rst+s:r.textContent=ast+s,r.classList.toggle("ag-value-change-delta-up",o),r.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),qr(this.eDelta)}refresh(e,t=!1){const{value:i,valueFormatted:n}=e,{eValue:s,lastValue:o,beans:r}=this;if(i===o||(We(n)?s.textContent=n:We(i)?s.textContent=i:qr(s),r.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;const a=i&&typeof i=="object"&&"toNumber"in i?i.toNumber():i,l=o&&typeof o=="object"&&"toNumber"in o?o.toNumber():o;if(a===l)return!1;if(typeof a=="number"&&typeof l=="number"){const c=a-l;this.showDelta(e,c)}return o&&s.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},ust=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",dst={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},hst=class extends An{constructor(){super(dst),this.eCurrent=ot,this.refreshCount=0,this.registerCSS(ust)}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious?.remove();const{beans:t,eCurrent:i}=this,n=br({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=n,n.textContent=i.textContent,this.getGui().insertBefore(n,i),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.ePrevious?.remove(),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let i=e.value;if(tn(i)&&(i=""),i===this.lastValue||this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=i;const n=this.eCurrent;return We(e.valueFormatted)?n.textContent=e.valueFormatted:We(e.value)?n.textContent=i:qr(n),!0}},pst=class extends we{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,i=this.beans.gos.get("cellFlashDuration"),n=this.beans.gos.get("cellFadeDuration")){const s=this.animations[t];s.delete(e);const o=Date.now(),r=o+i,a=o+i+n,l={phase:"flash",flashEndTime:r,fadeEndTime:a};s.set(e,l);const c=`ag-cell-${t}`,u=`${c}-animation`,{comp:d,eGui:{style:p}}=e;d.toggleCss(c,!0),d.toggleCss(u,!1),p.removeProperty("transition"),p.removeProperty("transition-delay"),this.nextAnimationTime&&r+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),i)}),this.nextAnimationTime=r)}advanceAnimations(){const e=Date.now();let t=null;for(const i of Object.keys(this.animations)){const n=this.animations[i],s=`ag-cell-${i}`,o=`${s}-animation`;for(const[r,a]of n){if(!r.isAlive()||!r.comp){n.delete(r);continue}const{phase:l,flashEndTime:c,fadeEndTime:u}=a,d=l==="flash"?c:u;if(!(e+15>=d)){t=Math.min(d,t??1/0);continue}const{comp:f,eGui:{style:m}}=r;switch(l){case"flash":f.toggleCss(s,!1),f.toggleCss(o,!0),m.transition=`background-color ${u-c}ms`,m.transitionDelay=`${c-e}ms`,t=Math.min(u,t??1/0),a.phase="fade";break;case"fade":f.toggleCss(s,!1),f.toggleCss(o,!1),m.removeProperty("transition"),m.removeProperty("transition-delay"),n.delete(r);break}}}t==null?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;const i=lZe(e.cellPosition);t.cells[i]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t?.flashDuration,t?.fadeDuration)}destroy(){for(const e of Object.keys(this.animations))this.animations[e].clear()}};function gst(e,t={}){const{cellFlashSvc:i}=e;i&&e.frameworkOverrides.wrapIncoming(()=>{for(const n of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns))i.flashCell(n,t)})}var fst={moduleName:"HighlightChanges",version:Ge,beans:[pst],userComponents:{agAnimateShowChangeCellRenderer:cst,agAnimateSlideCellRenderer:hst},apiFunctions:{flashCells:gst}};function mst(e){return e.stateSvc?.getState()??{}}function yst(e,t,i){return e.stateSvc?.setState(t,i)}function f7(e){return e={...e},e.version||(e.version="32.1.0"),e.version==="32.1.0"&&(e=vst(e)),e.version=Ge,e}function vst(e){return e.cellSelection=bst(e,"rangeSelection"),e}function bst(e,t){if(e&&typeof e=="object")return e[t]}var Sst=class extends we{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Co(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Co(this,()=>{this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(this.updateCachedState("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowGroupExpansion",void 0)):(this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("ssrmRowGroupExpansion",void 0))},0),this.onRowSelectedDebounced=Co(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){const{gos:e,ctrlsSvc:t,colDelayRenderSvc:i}=this.beans;this.isClientSideRowModel=Ln(e);const n=f7(e.get("initialState")??{}),s=n.partialColumnState;delete n.partialColumnState,this.cachedState=n;const o=this.suppressEventsAndDispatchInitEvent.bind(this);t.whenReady(this,()=>o(()=>this.setupStateOnGridReady(n))),(n.columnOrder||n.columnVisibility||n.columnSizing||n.columnPinning||n.columnGroup)&&i?.hideColumns("columnState");const[r,a,l]=this.addManagedEventListeners({newColumnsLoaded:({source:c})=>{c==="gridInitializing"&&(r(),o(()=>{this.setupStateOnColumnsInitialised(n,!!s),i?.revealColumns("columnState")}))},rowCountReady:()=>{a?.(),o(()=>this.setupStateOnRowCountReady(n))},firstDataRendered:()=>{l?.(),o(()=>this.setupStateOnFirstDataRendered(n))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){const i=f7(e);delete i.partialColumnState,this.cachedState=i,this.startSuppressEvents();const n="api",s=t?new Set(t):void 0;this.setGridReadyState(i,n,s),this.setColumnsInitialisedState(i,n,!!s,s),this.setRowCountState(i,n,s),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(i,n,s),this.stopSuppressEvents(n)})}setGridReadyState(e,t,i){t==="api"&&!i?.has("sideBar")&&this.beans.sideBar?.comp?.setState(e.sideBar),this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");const t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,i,n){this.setColumnState(e,t,i,n),this.setColumnGroupState(e,t,n),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);const i=n=>()=>this.updateColumnState([n]);this.addManagedEventListeners({columnValueChanged:i("aggregation"),columnMoved:i("columnOrder"),columnPinned:i("columnPinning"),columnResized:i("columnSizing"),columnVisible:i("columnVisibility"),columnPivotChanged:i("pivot"),columnPivotModeChanged:i("pivot"),columnRowGroupChanged:i("rowGroup"),sortChanged:i("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,i){const{filter:n,rowGroupExpansion:s,ssrmRowGroupExpansion:o,rowSelection:r,pagination:a}=e,l=(u,d)=>!i?.has(u)&&(d||t==="api");l("filter",n)&&this.setFilterState(n),l("rowGroupExpansion",s)&&this.setRowGroupExpansionState(o,s,t),l("rowSelection",r)&&this.setRowSelectionState(r,t),l("pagination",a)&&this.setPaginationState(a,t);const c=this.updateCachedState.bind(this);c("filter",this.getFilterState()),this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(c("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),c("rowGroupExpansion",void 0)):(c("rowGroupExpansion",this.getRowGroupExpansionState()),c("ssrmRowGroupExpansion",void 0)),c("rowSelection",this.getRowSelectionState()),c("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");const t=this.updateCachedState.bind(this),i=()=>{this.updateRowGroupExpansionStateTimer=0,this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(t("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),t("rowGroupExpansion",void 0)):(t("rowGroupExpansion",this.getRowGroupExpansionState()),t("ssrmRowGroupExpansion",void 0))},n=()=>t("filter",this.getFilterState()),{gos:s,colFilter:o}=this.beans;this.addManagedEventListeners({filterChanged:n,rowExpansionStateChanged:this.onRowGroupOpenedDebounced,expandOrCollapseAll:i,columnRowGroupChanged:i,rowDataUpdated:()=>{(s.get("groupDefaultExpanded")!==0||s.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(i)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:r=>{(r.newPage||r.newPageSize)&&t("pagination",this.getPaginationState())}}),o&&this.addManagedListeners(o,{filterStateChanged:n})}setFirstDataRenderedState(e,t,i){const{scroll:n,cellSelection:s,focusedCell:o,columnOrder:r,rowPinning:a}=e,l=(d,p)=>!i?.has(d)&&(p||t==="api");l("focusedCell",o)&&this.setFocusedCellState(o),l("cellSelection",s)&&this.setCellSelectionState(s),l("scroll",n)&&this.setScrollState(n),l("rowPinning",a)&&this.setRowPinningState(a),this.setColumnPivotState(!!r?.orderedColIds,t);const c=this.updateCachedState.bind(this);c("sideBar",this.getSideBarState()),c("focusedCell",this.getFocusedCellState());const u=this.getRangeSelectionState();c("rangeSelection",u),c("cellSelection",u),c("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");const t=this.updateCachedState.bind(this),i=()=>t("focusedCell",this.getFocusedCellState());this.addManagedEventListeners({cellFocused:i,cellFocusCleared:i,cellSelectionChanged:n=>{if(n.finished){const s=this.getRangeSelectionState();t("rangeSelection",s),t("cellSelection",s)}},bodyScrollEnd:()=>t("scroll",this.getScrollState()),pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())})}getColumnState(){const e=this.beans;return pet(LR(e),e.colModel.isPivotMode())}setColumnState(e,t,i,n){const{sort:s,rowGroup:o,aggregation:r,pivot:a,columnPinning:l,columnVisibility:c,columnSizing:u,columnOrder:d}=e;let p=!1;const f=(B,V)=>{const j=!n?.has(B)&&!!(V||t==="api");return p||(p=j),j},m={},v=B=>{let V=m[B];return V||(V={colId:B},m[B]=V,V)},b={},C=f("sort",s);C&&s?.sortModel.forEach(({colId:B,sort:V},j)=>{const K=v(B);K.sort=V,K.sortIndex=j}),(C||!i)&&(b.sort=null,b.sortIndex=null);const x=f("rowGroup",o);x&&o?.groupColIds.forEach((B,V)=>{const j=v(B);j.rowGroup=!0,j.rowGroupIndex=V}),(x||!i)&&(b.rowGroup=null,b.rowGroupIndex=null);const w=f("aggregation",r);w&&r?.aggregationModel.forEach(({colId:B,aggFunc:V})=>{v(B).aggFunc=V}),(w||!i)&&(b.aggFunc=null);const M=f("pivot",a);M&&(a?.pivotColIds.forEach((B,V)=>{const j=v(B);j.pivot=!0,j.pivotIndex=V}),this.gos.updateGridOptions({options:{pivotMode:!!a?.pivotMode},source:t})),(M||!i)&&(b.pivot=null,b.pivotIndex=null);const T=f("columnPinning",l);if(T){for(const B of l?.leftColIds??[])v(B).pinned="left";for(const B of l?.rightColIds??[])v(B).pinned="right"}(T||!i)&&(b.pinned=null);const L=f("columnVisibility",c);if(L)for(const B of c?.hiddenColIds??[])v(B).hide=!0;(L||!i)&&(b.hide=null);const I=f("columnSizing",u);if(I)for(const{colId:B,flex:V,width:j}of u?.columnSizingModel??[]){const K=v(B);K.flex=V??null,K.width=j}(I||!i)&&(b.flex=null);const R=d?.orderedColIds,O=!!R?.length&&!n?.has("columnOrder"),_=O?R.map(B=>v(B)):Object.values(m);(_.length||p)&&(this.columnStates=_,dc(this.beans,{state:_,applyOrder:O,defaultState:b},t))}setColumnPivotState(e,t){const i=this.columnStates;this.columnStates=void 0;const n=this.columnGroupStates;this.columnGroupStates=void 0;const s=this.beans,{pivotResultCols:o,colGroupSvc:r}=s;if(o?.isPivotResultColsPresent()){if(i){const a=[];for(const l of i)o.getPivotResultCol(l.colId)&&a.push(l);dc(s,{state:a,applyOrder:e},t)}n&&r?.setColumnGroupState(n,t)}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState();return get(t)}setColumnGroupState(e,t,i){const n=this.beans.colGroupSvc;if(!n||i?.has("columnGroup")||t!=="api"&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const s=new Set(e.columnGroup?.openColumnGroupIds),r=n.getColumnGroupState().map(({groupId:a})=>{const l=s.has(a);return l&&s.delete(a),{groupId:a,open:l}});for(const a of s)r.push({groupId:a,open:!0});r.length&&(this.columnGroupStates=r),n.setColumnGroupState(r,t)}getFilterState(){const e=this.beans.filterManager;let t=e?.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);const i=e?.getFilterState(),n=e?.getAdvFilterModel()??void 0;return t||n||i?{filterModel:t,columnFilterState:i,advancedFilterModel:n}:void 0}setFilterState(e){const t=this.beans.filterManager,{filterModel:i,columnFilterState:n,advancedFilterModel:s}=e??{filterModel:null,columnFilterState:null,advancedFilterModel:null};(i!==void 0||n!==void 0)&&t?.setFilterState(i??null,n??null,"columnFilter"),s!==void 0&&t?.setAdvFilterModel(s??null,"advancedFilter")}getRangeSelectionState(){const e=this.beans.rangeSvc?.getCellRanges().map(t=>{const{id:i,type:n,startRow:s,endRow:o,columns:r,startColumn:a}=t;return{id:i,type:n,startRow:s,endRow:o,colIds:r.map(l=>l.getColId()),startColId:a.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:i,colModel:n,visibleCols:s}=this.beans;if(!hg(t)||!i)return;const o=[];for(const r of e?.cellRanges??[]){const a=[];for(const c of r.colIds){const u=n.getCol(c);u&&a.push(u)}if(!a.length)continue;let l=n.getCol(r.startColId);if(!l){const c=s.allCols,u=new Set(a);l=c.find(d=>u.has(d))}o.push({...r,columns:a,startColumn:l})}i.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:i}=e?.getVScrollPosition()??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:i}=e??{top:0,left:0},{frameworkOverrides:n,rowRenderer:s,animationFrameSvc:o,ctrlsSvc:r}=this.beans;n.wrapIncoming(()=>{r.get("center").setCenterViewportScrollLeft(i),r.getScrollFeature()?.setVerticalScrollPosition(t),s.redraw({afterScroll:!0}),o?.flushAllFrames()})}getSideBarState(){return this.beans.sideBar?.comp?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:n}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:n}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{focusSvc:t,colModel:i}=this.beans;if(!e){t.clearFocusedCell();return}const{colId:n,rowIndex:s,rowPinned:o}=e;t.setFocusedCell({column:i.getCol(n),rowIndex:s,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const i=e.getCurrentPage(),n=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!i&&!n))return{page:i,pageSize:n}}setPaginationState(e,t){const{pagination:i,gos:n}=this.beans;if(!i)return;const{pageSize:s,page:o}=e??{page:0,pageSize:n.get("paginationPageSize")},r=t==="gridInitializing";s&&!n.get("paginationAutoPageSize")&&i.setPageSize(s,r?"initialState":"pageSizeSelector"),typeof o=="number"&&(r?i.setPage(o):i.goToPage(o))}getRowSelectionState(){const e=this.beans.selectionSvc;if(!e)return;const t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!t?.toggledNodes?.length?void 0:t}setRowSelectionState(e,t){this.beans.selectionSvc?.setSelectionState(e,t,t==="api")}getRowGroupExpansionState(){const{expansionSvc:e}=this.beans;if(e)return e.getExpansionState()}getRowPinningState(){return this.beans.pinnedRowModel?.getPinnedState()}setRowPinningState(e){const t=this.beans.pinnedRowModel;e?t?.setPinnedState(e):t?.reset()}setRowGroupExpansionState(e,t,i){const n=this.beans.expansionSvc;if(!n)return;const s=t??{expandedRowGroupIds:[],collapsedRowGroupIds:[]};n.setExpansionState(s,i)}updateColumnState(e){const t=this.getColumnState();let i=!1;const n=this.cachedState;for(const s of Object.keys(t)){const o=t[s];w0(o,n[s])||(i=!0)}this.cachedState={...n,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),w0(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){const e=this.staleStateKeys;for(const t of e)t==="rowSelection"&&this.setCachedStateValue(t,this.getRowSelectionState());e.clear()}dispatchStateUpdateEvent(e){if(!this.suppressEvents){for(const t of e)this.queuedUpdateSources.add(t);this.dispatchStateUpdateEventDebounced()}}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){this.suppressEvents=!0,this.beans.colAnimation?.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.beans.colAnimation?.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}},Cst={moduleName:"GridState",version:Ge,beans:[Sst],apiFunctions:{getState:mst,setState:yst}};function xst(e){return e.rowModel.isLastRowIndexKnown()}function wst(e){return e.pagination?.getPageSize()??100}function Dst(e){return e.pagination?.getCurrentPage()??0}function Mst(e){return e.pagination?.getTotalPages()??1}function Ast(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function kst(e){e.pagination?.goToNextPage()}function Tst(e){e.pagination?.goToPreviousPage()}function Ist(e){e.pagination?.goToFirstPage()}function Rst(e){e.pagination?.goToLastPage()}function Est(e,t){e.pagination?.goToPage(t)}var Lst=class extends we{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,i=()=>{const n=Math.max(xm(t),1),s=Math.floor(e/n);t.pagination.setPageSize(s,"autoCalculated")};this.isBodyRendered?Co(this,i,50)():(i(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},Ux="paginationPageSizeSelector",Pst={tag:"span",cls:"ag-paging-page-size"},Nst=class extends An{constructor(){super(Pst),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(Ux,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){qr(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Ux)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),i=!t||!e.includes(t);if(i){const s=this.gos.exists("paginationPageSize"),o=this.gos.get(Ux)!==!0;Ee(94,{pageSizeSet:s,pageSizesSet:o,pageSizeOptions:e,paginationPageSizeOption:t}),o||Ee(95,{paginationPageSizeOption:t,paginationPageSizeSelector:Ux}),e.unshift("")}const n=String(i?"":t);this.selectPageSizeComp?($g(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(n,!0)):this.createPageSizeSelectorComp(e,n),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const i=this.getLocaleTextFunc(),n=i("pageSizeSelectorLabel","Page Size:"),s=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new kj).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(s).setLabel(n).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(Ux);return!Array.isArray(t)||!t?.length?e:[...t].sort((i,n)=>i-n)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},Ost={selector:"AG-PAGE-SIZE-SELECTOR",component:Nst},Fst=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;gap:calc(var(--ag-spacing)*4);height:var(--ag-pagination-panel-height);justify-content:flex-end;padding:0 var(--ag-cell-horizontal-padding)}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}",Bst=class extends PXe{constructor(){super(),this.btFirst=ot,this.btPrevious=ot,this.btNext=ot,this.btLast=ot,this.lbRecordCount=ot,this.lbFirstRowOnPage=ot,this.lbLastRowOnPage=ot,this.lbCurrent=ot,this.lbTotal=ot,this.pageSizeComp=ot,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(Fst)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[Ost]);const{btFirst:t,btPrevious:i,btNext:n,btLast:s}=this;this.activateTabIndex([t,i,n,s]),t.insertAdjacentElement("afterbegin",kl(e?"last":"first",this.beans)),i.insertAdjacentElement("afterbegin",kl(e?"next":"previous",this.beans)),n.insertAdjacentElement("afterbegin",kl(e?"previous":"next",this.beans)),s.insertAdjacentElement("afterbegin",kl(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):q9e(this.beans,o),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){if(!this.areListenersSetup){this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)});for(const e of[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}]){const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:n=>{(n.key===pe.ENTER||n.key===pe.SPACE)&&(n.preventDefault(),i())}})}Z9e(this.beans,this,this.getGui()),this.areListenersSetup=!0}}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):met(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const n=this.isZeroPagesToDisplay(),s=e===i-1;this.nextButtonDisabled=s||n,this.lastButtonDisabled=!t||n||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){gKe(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),i=this.pagination.getMasterRowCount(),n=e?i:null,s=this.pagination.getCurrentPage(),o=this.pagination.getPageSize();let r,a;this.isZeroPagesToDisplay()?r=a=0:(r=o*s+1,a=r+o-1,e&&a>n&&(a=n));const l=r+o-1,c=!e&&i<l,u=this.formatNumber(r);this.lbFirstRowOnPage.textContent=u;let d;const p=this.getLocaleTextFunc();c?d=p("pageLastRowUnknown","?"):d=this.formatNumber(a),this.lbLastRowOnPage.textContent=d;const m=t>0?s+1:0,v=this.formatNumber(m);this.lbCurrent.textContent=v;let b,C;if(e)b=this.formatNumber(t),C=this.formatNumber(n);else{const x=p("more","more");b=x,C=x}this.lbTotal.textContent=b,this.lbRecordCount.textContent=C,this.announceAriaStatus(u,d,C,v,b)}announceAriaStatus(e,t,i,n,s){const o=this.getLocaleTextFunc(),r=o("page","Page"),a=o("to","to"),l=o("of","of"),c=`${e} ${a} ${t} ${l} ${i}`,u=`${r} ${n} ${l} ${s}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnounce?.announceValue(c,"paginationRow")),u!==this.ariaPageStatus&&(this.ariaPageStatus=u,this.ariaAnnounce?.announceValue(u,"paginationPage"))}},_st={selector:"AG-PAGINATION",component:Bst},zst=class extends we{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return _st}isPaginateChildRows(){const e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;if(!this.active||t===e||typeof t!="number")return;const{editSvc:i}=this.beans;i?.isEditing()&&(i.isBatchEditing()?i.cleanupEditors():i.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){if(!this.active)return;let t=e;this.paginateChildRows||(t=this.beans.rowModel.getTopLevelIndexFromDisplayedIndex?.(e)??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return this.active?e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return We(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:We(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:We(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:We(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}const i=this.pageSize,n=t-1;this.totalPages=Math.floor(n/i)+1,this.adjustCurrentPageIfInvalid();const s=this.currentPage,o=i*s;let r=i*(s+1)-1;if(r>n&&(r=n),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(o),r===n)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const a=e.getTopLevelRowDisplayedIndex(r+1);this.bottomDisplayedRowIndex=a-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}const{pageSize:t,currentPage:i}=this,n=e-1;this.totalPages=Math.floor(n/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*i,this.bottomDisplayedRowIndex=t*(i+1)-1,this.bottomDisplayedRowIndex>n&&(this.bottomDisplayedRowIndex=n)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:n=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:n,keepRenderedRows:t})}},Gst={moduleName:"Pagination",version:Ge,beans:[zst,Lst],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound:xst,paginationGetPageSize:wst,paginationGetCurrentPage:Dst,paginationGetTotalPages:Mst,paginationGetRowCount:Ast,paginationGoToNextPage:kst,paginationGoToPreviousPage:Tst,paginationGoToFirstPage:Ist,paginationGoToLastPage:Rst,paginationGoToPage:Est},dependsOn:[sP]};function Vst(e,t={}){const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))}function Bue(e,t,i,n,s){t&&(n&&t.parent&&t.parent.level!==-1&&Bue(e,t.parent,i,n,s),t.setExpanded(i,void 0,s))}function Hst(e,t){return e.rowModel.getRowNode(t)}function Wst(e,t,i,n){e.rowRenderer.addRenderedRowListener(t,i,n)}function jst(e){return e.rowRenderer.getRenderedNodes()}function Ust(e,t,i){e.rowModel.forEachNode(t,i)}function $st(e){return e.rowRenderer.firstRenderedRow}function Kst(e){return e.rowRenderer.lastRenderedRow}function Yst(e,t){return e.rowModel.getRow(t)}function Xst(e){return e.rowModel.getRowCount()}var Zst={moduleName:"RowApi",version:Ge,apiFunctions:{redrawRows:Vst,setRowNodeExpanded:Bue,getRowNode:Hst,addRenderedRowListener:Wst,getRenderedNodes:jst,forEachNode:Ust,getFirstDisplayedRowIndex:$st,getLastDisplayedRowIndex:Kst,getDisplayedRowAtIndex:Yst,getDisplayedRowCount:Xst}},qst={moduleName:"ScrollApi",version:Ge,apiFunctions:{getVerticalPixelRange:cit,getHorizontalPixelRange:uit,ensureColumnVisible:wue,ensureIndexVisible:Due,ensureNodeVisible:dit}};function Qst(e,t,i){if(!t)return;const n=e.ctrlsSvc.getGridBodyCtrl().eGridBody,s=`aria-${t}`;i===null?n.removeAttribute(s):n.setAttribute(s,i)}function Jst(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function eot(e){e.frameworkOverrides.wrapIncoming(()=>{for(const t of e.ctrlsSvc.getHeaderRowContainerCtrls())t.refresh()})}function tot(e){return e.animationFrameSvc?.isQueueEmpty()??!0}function iot(e){e.animationFrameSvc?.flushAllFrames()}function not(e){return{rowHeight:xm(e),headerHeight:pM(e)}}function sot(e,t={}){const i=[];for(const o of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns)){const r=o.getCellRenderer();r!=null&&i.push(R0(r))}if(t.columns?.length)return i;const n=[],s=Rz(t.rowNodes);for(const o of e.rowRenderer.getAllRowCtrls()){if(s&&!Ez(o.rowNode,s)||!o.isFullWidth())continue;const r=o.getFullWidthCellRenderers();for(let a=0;a<r.length;a++){const l=r[a];l!=null&&n.push(R0(l))}}return[...n,...i]}var oot={moduleName:"RenderApi",version:Ge,apiFunctions:{setGridAriaProperty:Qst,refreshCells:Jst,refreshHeader:eot,isAnimationFrameQueueEmpty:tot,flushAllAnimationFrames:iot,getSizesForCurrentTheme:not,getCellRendererInstances:sot}};function rot(e,t){typeof t=="number"?e.colAutosize?.sizeColumnsToFit(t,"api"):e.colAutosize?.sizeColumnsToFitGridBody(t)}function _ue({colAutosize:e,visibleCols:t},i,n){Array.isArray(i)?e?.autoSizeCols({colKeys:i,skipHeader:n,source:"api"}):e?.autoSizeCols({...i,colKeys:i.colIds??t.allCols,source:"api"})}function aot(e,t){t&&typeof t=="object"?_ue(e,t):e.colAutosize?.autoSizeAllColumns({source:"api",skipHeader:t})}var lot=class extends we{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){const{gos:e}=this,t=e.get("autoSizeStrategy");if(t){let i=!1;const n=t.type;if(n==="fitGridWidth"||n==="fitProvidedWidth")i=!0;else if(n==="fitCellContents"){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered(t)});const s=e.get("rowData");i=s!=null&&s.length>0&&Ln(e)}i&&this.beans.colDelayRenderSvc?.hideColumns(n)}}autoSizeCols(e){const{eventSvc:t,visibleCols:i}=this.beans;this.innerAutoSizeCols(e).then(n=>{const s=c=>gS(t,Array.from(c),!0,"autosizeColumns");if(!e.scaleUpToFitGridWidth)return s(n);const o=m7(this.beans),r=c=>i.leftCols.some(u=>Rw(u,c)),a=c=>i.rightCols.some(u=>Rw(u,c)),l=e.colKeys.filter(c=>!zh(c)&&!Qd(c)&&!r(c)&&!a(c));this.sizeColumnsToFit(o,e.source,!0,{defaultMaxWidth:e.defaultMaxWidth,defaultMinWidth:e.defaultMinWidth,columnLimits:e.columnLimits?.map(c=>({...c,key:c.colId})),colKeys:l,onlyScaleUp:!0}),s(n)})}innerAutoSizeCols(e){return new Promise((t,i)=>{if(this.shouldQueueResizeOperations)return this.pushResizeOperation(()=>this.innerAutoSizeCols(e).then(t,i));const{colKeys:n,skipHeader:s,skipHeaderGroups:o,stopAtGroup:r,defaultMaxWidth:a,defaultMinWidth:l,columnLimits:c=[],source:u="api"}=e,{animationFrameSvc:d,renderStatus:p,colModel:f,autoWidthCalc:m,visibleCols:v}=this.beans;if(d?.flushAllFrames(),this.timesDelayed<5&&p&&(!p.areHeaderCellsRendered()||!p.areCellsRendered())){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.innerAutoSizeCols(e).then(t,i)});return}this.timesDelayed=0;const b=new Set;let C=-1;const x=Object.fromEntries(c.map(({colId:T,...L})=>[T,L])),w=s??this.gos.get("skipHeaderOnAutoSize"),M=o??w;for(;C!==0;){C=0;const T=[];for(const L of n){if(!L||MYe(L))continue;const I=f.getCol(L);if(!I||b.has(I))continue;const R=m.getPreferredWidthForColumn(I,w);if(R>0){const O=x[I.colId]??{};O.minWidth??(O.minWidth=l),O.maxWidth??(O.maxWidth=a);const _=cot(I,R,O);I.setActualWidth(_,u),b.add(I),C++}T.push(I)}T.length&&v.refresh(u)}M||this.autoSizeColumnGroupsByColumns(n,u,r),t(b)})}autoSizeColumn(e,t,i){this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const{colModel:n,ctrlsSvc:s}=this.beans,o=new Set,r=n.getColsForKeys(e);for(const l of r){let c=l.getParent();for(;c&&c!=i;)c.isPadding()||o.add(c),c=c.getParent()}let a;for(const l of o){for(const c of s.getHeaderRowContainerCtrls())if(a=c.getHeaderCtrlForColumn(l),a)break;a?.resizeLeafColumnsToFit(t)}}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e));return}this.autoSizeCols({colKeys:this.beans.visibleCols.allCols,...e})}addColumnAutosizeListeners(e,t){const i=this.gos.get("skipHeaderOnAutoSize"),n=()=>{this.autoSizeColumn(t,"uiColumnResized",i)};e.addEventListener("dblclick",n);const s=new jf(e);return s.addEventListener("doubleTap",n),()=>{e.removeEventListener("dblclick",n),s.destroy()}}addColumnGroupResize(e,t,i){const n=this.gos.get("skipHeaderOnAutoSize"),s=()=>{const o=[],r=t.getDisplayedLeafColumns();for(const a of r)a.getColDef().suppressAutoSize||o.push(a.getColId());o.length>0&&this.autoSizeCols({colKeys:o,skipHeader:n,stopAtGroup:t,source:"uiColumnResized"}),i()};return e.addEventListener("dblclick",s),()=>e.removeEventListener("dblclick",s)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const i=m7(this.beans);if(i>0){this.sizeColumnsToFit(i,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):Ee(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",i,n){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,n));return}const s={};for(const{key:m,...v}of n?.columnLimits??[])s[typeof m=="string"?m:m.getColId()]=v;const o=this.beans.visibleCols.allCols;if(e<=0||!o.length)return;const r=Nd(o);if(n?.onlyScaleUp&&r>e||e===r&&o.every(v=>{if(v.colDef.suppressSizeToFit)return!0;const b=s?.[v.getId()],C=b?.minWidth??n?.defaultMinWidth,x=b?.maxWidth??n?.defaultMaxWidth,w=v.getActualWidth();return(C==null||w>=C)&&(x==null||w<=x)}))return;const l=[],c=[];for(const m of o){const v=n?.colKeys?.some(b=>Rw(m,b))??!0;m.getColDef().suppressSizeToFit||!v?c.push(m):l.push(m)}const u=l.slice(0);let d=!1;const p=m=>{Cc(l,m),c.push(m)};for(const m of l){m.resetActualWidth(t);const v=s?.[m.getId()],b=v?.minWidth??n?.defaultMinWidth,C=v?.maxWidth??n?.defaultMaxWidth,x=m.getActualWidth();typeof b=="number"&&x<b?m.setActualWidth(b,t,!0):typeof C=="number"&&x>C&&m.setActualWidth(C,t,!0)}for(;!d;){d=!0;const m=e-Nd(c);if(m<=0)for(const v of l){const b=s?.[v.getId()]?.minWidth??n?.defaultMinWidth??v.minWidth;v.setActualWidth(b,t,!0)}else{const v=m/Nd(l);let b=m;for(let C=l.length-1;C>=0;C--){const x=l[C],w=s?.[x.getId()],M=w?.minWidth??n?.defaultMinWidth,T=w?.maxWidth??n?.defaultMaxWidth,L=x.getMinWidth(),I=x.getMaxWidth(),R=typeof M=="number"&&M>L?M:L,O=typeof T=="number"&&T<I?T:I;let _=Math.round(x.getActualWidth()*v);_<R?(_=R,p(x),d=!1):_>O?(_=O,p(x),d=!1):C===0&&(_=b),x.setActualWidth(_,t,!0),b-=_}}}for(const m of u)m.fireColumnWidthChangedEvent(t);const f=this.beans.visibleCols;f.setLeftValues(t),f.updateBodyWidths(),!i&&gS(this.eventSvc,u,!0,t)}applyAutosizeStrategy(){const{gos:e,colDelayRenderSvc:t}=this.beans,i=e.get("autoSizeStrategy");i?.type!=="fitGridWidth"&&i?.type!=="fitProvidedWidth"||setTimeout(()=>{if(!this.isAlive())return;const n=i.type;if(n==="fitGridWidth"){const{columnLimits:s,defaultMinWidth:o,defaultMaxWidth:r}=i,a=s?.map(({colId:l,minWidth:c,maxWidth:u})=>({key:l,minWidth:c,maxWidth:u}));this.sizeColumnsToFitGridBody({defaultMinWidth:o,defaultMaxWidth:r,columnLimits:a})}else n==="fitProvidedWidth"&&this.sizeColumnsToFit(i.width,"sizeColumnsToFit");t?.revealColumns(n)})}onFirstDataRendered({colIds:e,...t}){setTimeout(()=>{if(!this.isAlive())return;const i="autosizeColumns";e?this.autoSizeCols({...t,source:i,colKeys:e}):this.autoSizeAllColumns({...t,source:i}),this.beans.colDelayRenderSvc?.revealColumns(t.type)})}processResizeOperations(){this.shouldQueueResizeOperations=!1;for(const e of this.resizeOperationQueue)e();this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function cot(e,t,i={}){const n=i.minWidth??e.getMinWidth();t<n&&(t=n);const s=i.maxWidth??e.getMaxWidth();return t>s&&(t=s),t}function m7({ctrlsSvc:e,scrollVisibleSvc:t}){const i=e.getGridBodyCtrl(),s=i.isVerticalScrollShowing()?t.getScrollbarWidth():0;return A0(i.eGridBody)-s}var uot={moduleName:"ColumnAutoSize",version:Ge,beans:[lot],apiFunctions:{sizeColumnsToFit:rot,autoSizeColumns:_ue,autoSizeAllColumns:aot},dependsOn:[zce]},dot=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function hot(e){return e.pinnedRowModel?.getPinnedTopRowCount()??0}function pot(e){return e.pinnedRowModel?.getPinnedBottomRowCount()??0}function got(e,t){return e.pinnedRowModel?.getPinnedTopRow(t)}function fot(e,t){return e.pinnedRowModel?.getPinnedBottomRow(t)}function mot(e,t,i){return e.pinnedRowModel?.forEachPinnedRow(t,i)}var yot={moduleName:"PinnedRow",version:Ge,beans:[AXe],css:[dot],apiFunctions:{getPinnedTopRowCount:hot,getPinnedBottomRowCount:pot,getPinnedTopRow:got,getPinnedBottomRow:fot,forEachPinnedRow:mot},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},vot=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){const e=this.firstNode.__autoHeights?.[this.col.getColId()];if(e==null)return;let t=0;for(const i of this.spannedNodes)i!==this.lastNode&&(t+=i.rowHeight);return e-t}},bot=class extends we{constructor(e){super(),this.column=e}buildCache(e){const{column:t,beans:{gos:i,pinnedRowModel:n,rowModel:s,valueSvc:o,pagination:r}}=this,{colDef:a}=t,l=this.getNodeMap(e),c=new Map,u=i.getCallback("isFullWidthRow"),d=a.equals,p=a.spanRows,f=typeof p=="function";let m=null,v=null,b;const C=(w,M)=>{m=w,v=null,b=M},x=w=>{const M=!w.isExpandable()&&!w.group&&!w.detail&&(u?!u({rowNode:w}):!0);if(w.rowIndex==null||!M){C(null,null);return}if(m==null||w.level!==m.level||w.footer||v&&w.rowIndex-1!==v?.getLastNode().rowIndex){C(w,o.getValue(t,w));return}const T=o.getValue(t,w);if(f){const L=ct(i,{valueA:b,nodeA:m,valueB:T,nodeB:w,column:t,colDef:a});if(!p(L)){C(w,T);return}}else if(d?!d(b,T):b!==T){C(w,T);return}if(!v){const L=l?.get(m);L?.firstNode===m?(L.reset(),v=L):v=new vot(t,m),c.set(m,v)}v.addSpannedNode(w),c.set(w,v)};switch(e){case"center":s.forEachDisplayedNode?.(w=>{(!r||r.isRowInPage(w.rowIndex))&&x(w)}),this.centerValueNodeMap=c;break;case"top":n?.forEachPinnedRow("top",x),this.topValueNodeMap=c;break;case"bottom":n?.forEachPinnedRow("bottom",x),this.bottomValueNodeMap=c;break}}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this.getNodeMap(e.rowPinned).get(e)}getNodeMap(e){switch(e){case"top":return this.topValueNodeMap;case"bottom":return this.bottomValueNodeMap;default:return this.centerValueNodeMap}}},Sot=class extends we{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=Co(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=Co(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;const i=this.createManagedBean(new bot(e));this.spanningColumns.set(e,i),i.buildCache("top"),i.buildCache("bottom"),i.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){const{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t?.createCtrls("top"),t?.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t?.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){const i=this.spanningColumns.get(e);return i?i.isCellSpanning(t):!1}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:i}=this.beans,n=e.column,s=e.rowIndex,o=this.spanningColumns.get(n);if(!o)return;let r;switch(e.rowPinned){case"top":r=t?.getPinnedTopRow(s);break;case"bottom":r=t?.getPinnedBottomRow(s);break;default:r=i.getRow(s)}if(r)return o.getCellSpan(r)}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){const i=this.spanningColumns.get(e);if(i)return i.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[i,n]of this.spanningColumns)if(n.isCellSpanning(e)){const s=n.getCellSpan(e);t(i,s)}}destroy(){super.destroy(),this.spanningColumns.clear()}},Cot=class extends Bb{constructor(e,t,i){super(e.col,e.firstNode,i,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,i,n,s,o,r){this.eWrapper=i,super.setComp(e,t,i,n,s,o,r),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){const{eGui:e,rowNode:t}=this;!e||t.rowIndex==null||$ae(e,t.rowIndex)}setAriaRowSpan(){vKe(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if(tP(t)){this.focusedCellPosition=void 0;return}const i=this.isCellFocused();i||(this.focusedCellPosition=void 0),e&&i&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},xot=class extends GR{onRowIndexChanged(){super.onRowIndexChanged();for(const e of this.getAllCellCtrls())e.refreshAriaRowIndex()}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){const t=this.beans.rowSpanSvc?.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new Cot(t,this,this.beans)}isCorrectCtrlForSpan(e){const t=this.beans.rowSpanSvc?.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!1:e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},wot=class extends we{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,i=this.getCtrlsMap(e),n=i.size,s=this.getAllRelevantRowControls(e),o=new Map;let r=!1;for(const l of s)l.isAlive()&&t?.forEachSpannedColumn(l.rowNode,(c,u)=>{if(o.has(u.firstNode))return;const d=i.get(u.firstNode);if(d){o.set(u.firstNode,d),i.delete(u.firstNode);return}r=!0;const p=new xot(u.firstNode,this.beans,!1,!1,!1);o.set(u.firstNode,p)});this.setCtrlsMap(e,o);const a=o.size===n;if(!(!r&&a)){for(const l of i.values())l.destroyFirstPass(!0),l.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:t}=this.beans,i=t?.getCellSpanByPosition(e);if(!i)return;const n=this.getCtrlsMap(e.rowPinned).get(i.firstNode);if(n)return n.getAllCellCtrls().find(s=>s.column===e.column)}getCtrls(e){return[...this.getCtrlsMap(e).values()]}destroyRowCtrls(e){for(const t of this.getCtrlsMap(e).values())t.destroyFirstPass(!0),t.destroySecondPass();this.setCtrlsMap(e,new Map)}getCtrlsMap(e){switch(e){case"top":return this.topCtrls;case"bottom":return this.bottomCtrls;default:return this.centerCtrls}}setCtrlsMap(e,t){switch(e){case"top":this.topCtrls=t;break;case"bottom":this.bottomCtrls=t;break;default:this.centerCtrls=t;break}}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},Dot={moduleName:"CellSpan",version:Ge,beans:[Sot,wot]},Mot=class extends we{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,i=e.colDef,n=i.cellClassRules,s=this.getCellClassParams(e,i);jj(this.beans.expressionSvc,n===this.cellClassRules?void 0:this.cellClassRules,n,s,o=>t.toggleCss(o,!0),o=>t.toggleCss(o,!1)),this.cellClassRules=n}applyUserStyles(){const e=this.column,t=e.colDef,i=t.cellStyle;if(!i)return;let n;if(typeof i=="function"){const s=this.getCellClassParams(e,t);n=i(s)}else n=i;n&&this.cellComp.setUserStyles(n)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,i=e.colDef,n=this.getCellClassParams(e,i);for(const o of this.staticClasses)t.toggleCss(o,!1);const s=this.beans.cellStyles.getStaticCellClasses(i,n);this.staticClasses=s;for(const o of s)t.toggleCss(o,!0)}getCellClassParams(e,t){const{value:i,rowNode:n}=this.cellCtrl;return ct(this.beans.gos,{value:i,data:n.data,node:n,colDef:t,column:e,rowIndex:n.rowIndex})}},Aot=class extends we{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,i,n){jj(this.beans.expressionSvc,void 0,e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let n;return typeof i=="function"?n=i(t):n=i,typeof n=="string"&&(n=[n]),n||[]}createCellCustomStyleFeature(e,t){return new Mot(e,t)}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(s=>{i(s)})}},kot={moduleName:"CellStyle",version:Ge,beans:[Aot]},Tot={moduleName:"RowStyle",version:Ge,beans:[dJe]};function Iot(e,t){return!!e.colHover?.isHovered(t)}var Rot=class extends we{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=i=>{const{beans:n,gos:s,element:o,columns:r}=this,a=n.colHover;if(i??!!s.get("columnHoverHighlight"))this.destroyManagedListeners=this.addManagedElementListeners(o,{mouseover:a.setMouseOver.bind(a,r),mouseout:a.clearMouseOver.bind(a)});else{for(const c of this.destroyManagedListeners)c();this.destroyManagedListeners=[]}}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},Eot="ag-column-hover",Lot=class extends we{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,i){const n=()=>{const s=this.isHovered(i);t.toggleCss("ag-column-hover",s)};e.addManagedEventListeners({columnHoverChanged:n}),n()}onCellColumnHover(e,t){if(!t)return;const i=this.isHovered(e);t.toggleCss(Eot,i)}addHeaderFilterColumnHoverListener(e,t,i,n){this.createHoverFeature(e,[i],n);const s=()=>{const o=this.isHovered(i);t.toggleCss("ag-column-hover",o)};e.addManagedEventListeners({columnHoverChanged:s}),s()}createHoverFeature(e,t,i){e.createManagedBean(new Rot(t,i))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},Pot={moduleName:"ColumnHover",version:Ge,beans:[Lot],apiFunctions:{isColumnHovered:Iot}},Not=class extends we{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addListener(e,t){const i=this.wrapSvc?.wrap(e,t)??t,n=!gI.has(e),s=n?this.asyncListeners:this.syncListeners;s.has(e)||s.set(e,new Set),s.get(e).add(i),this.eventSvc.addListener(e,i,n)}removeListener(e,t){const i=this.wrapSvc?.unwrap(e,t)??t,s=!!this.asyncListeners.get(e)?.delete(i);s||this.syncListeners.get(e)?.delete(i),this.eventSvc.removeListener(e,i,s)}addGlobalListener(e){const t=this.wrapSvc?.wrapGlobal(e)??e,i=(o,r)=>{gI.has(o)&&t(o,r)},n=(o,r)=>{gI.has(o)||t(o,r)};this.globalListenerPairs.set(e,{syncListener:i,asyncListener:n});const s=this.eventSvc;s.addGlobalListener(i,!1),s.addGlobalListener(n,!0)}removeGlobalListener(e){const{eventSvc:t,wrapSvc:i,globalListenerPairs:n}=this,s=i?.unwrapGlobal(e)??e;if(n.has(s)){const{syncListener:r,asyncListener:a}=n.get(s);t.removeGlobalListener(r,!1),t.removeGlobalListener(a,!0),n.delete(e)}else this.syncGlobalListeners.delete(s),t.removeGlobalListener(s,!1)}destroyEventListeners(e,t){e.forEach((i,n)=>{i.forEach(s=>this.eventSvc.removeListener(n,s,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){for(const i of e)this.eventSvc.removeGlobalListener(i,t);e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:i,asyncListener:n})=>{t.removeGlobalListener(i,!1),t.removeGlobalListener(n,!0)}),e.clear()}};function Oot(e,t,i){e.apiEventSvc?.addListener(t,i)}function Fot(e,t,i){e.apiEventSvc?.removeListener(t,i)}function Bot(e,t){e.apiEventSvc?.addGlobalListener(t)}function _ot(e,t){e.apiEventSvc?.removeGlobalListener(t)}var zot={moduleName:"EventApi",version:Ge,apiFunctions:{addEventListener:Oot,addGlobalListener:Bot,removeEventListener:Fot,removeGlobalListener:_ot},beans:[Not]},Got={moduleName:"Locale",version:Ge,beans:[het]},Vot=class extends we{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=Co(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){const{visibleCols:e,rowModel:t,rowSpanSvc:i,pinnedRowModel:n}=this.beans,s=e.autoHeightCols;let o=!1;const r=a=>{const l=a.__autoHeights;let c=dg(this.beans,a).height;for(const u of s){let d=l?.[u.getColId()];const p=i?.getCellSpan(u,a);if(p){if(p.getLastNode()!==a)continue;if(d=i?.getCellSpan(u,a)?.getLastNodeAutoHeight(),!d)return}if(d==null){if(this.colSpanSkipCell(u,a))continue;return}c=Math.max(d,c)}c!==a.rowHeight&&(a.setRowHeight(c),o=!0)};n?.forEachPinnedRow?.("top",r),n?.forEachPinnedRow?.("bottom",r),t.forEachDisplayedNode?.(r),o&&t.onRowHeightChanged?.()}setRowAutoHeight(e,t,i){if(e.__autoHeights??(e.__autoHeights={}),t==null){delete e.__autoHeights[i.getId()];return}const n=e.__autoHeights[i.getId()];e.__autoHeights[i.getId()]=t,n!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){const{colModel:i,colViewport:n,visibleCols:s}=this.beans;if(!i.colSpanActive)return!1;let o=[];switch(e.getPinned()){case"left":o=s.getLeftColsForRow(t);break;case"right":o=s.getRightColsForRow(t);break;case null:o=n.getColsWithinViewport(t);break}return!o.includes(e)}setupCellAutoHeight(e,t,i){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const n=t.parentElement,{rowNode:s,column:o}=e,r=this.beans,a=u=>{if(this.beans.editSvc?.isEditing(e)||!e.isAlive()||!i.isAlive())return;const{paddingTop:d,paddingBottom:p,borderBottomWidth:f,borderTopWidth:m}=Ty(n),v=d+p+f+m,C=t.offsetHeight+v;if(u<5){const w=!Ys(r)?.contains(t),M=C==0;if(w||M){window.setTimeout(()=>a(u+1),0);return}}this.setRowAutoHeight(s,C,o)},l=()=>a(0);l();const c=Bh(r,t,l);return i.addDestroyFunc(()=>{c(),this.setRowAutoHeight(s,void 0,o)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;const e=this.beans.rowRenderer.getAllRowCtrls();let t=null;for(const{rowNode:i}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(i).filter(s=>s.isAutoHeight())),t.length!==0){if(!i.__autoHeights)return!1;for(const n of t){const s=i.__autoHeights[n.getColId()];if(!s||i.rowHeight<s)return!1}}return!0}},Hot={moduleName:"RowAutoHeight",version:Ge,beans:[Vot]},Ny={moduleName:"AllCommunity",version:Ge,dependsOn:[Vnt,Xnt,ost,Let,Hit,Wit,jit,Uit,$it,Kit,Yit,Vit,Ntt,Ott,Ftt,Ptt,_tt,ztt,Cst,bnt,Gst,Gce,Zst,qst,oot,uot,DZe,yot,cnt,KJe,kot,Pot,Tot,zot,ZJe,fst,xue,Got,Hot,wZe,Hnt,Dot]},ar=se.createContext({}),zue=se.createContext("default"),fM=(e,t,i,n)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const o=e.newAgStackInstance();let r,a,l=!1;return o.then(c=>{if(l){t.destroyBean(c);return}r=c,a=r.getGui(),i.appendChild(a),y7(n,r)}),()=>{l=!0,r&&(a?.remove(),t.destroyBean(r),n&&y7(n,void 0))}},y7=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const i=e;i.current=t}},ml=(...e)=>e.filter(i=>i!=null&&i!=="").join(" "),Tl=class Gue{constructor(...t){this.classesMap={};for(const i of t)this.classesMap[i]=!0}setClass(t,i){if(!!this.classesMap[t]==i)return this;const s=new Gue;return s.classesMap={...this.classesMap},s.classesMap[t]=i,s}toString(){return Object.keys(this.classesMap).filter(i=>this.classesMap[i]).join(" ")}},SC=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,i=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===i()},Fz=se.version?.split(".")[0],Vue=Fz==="16"||Fz==="17";function Wot(){return Fz==="19"}var mI=!1;function jot(e){return mI||setTimeout(()=>mI=!1,0),mI=!0,e()}var O0=(e,t)=>{!Vue&&e&&!mI?j7.flushSync(t):t()},Uot=e=>{Vue?e():se.startTransition(e)};function $ot(e,t,i){return se.useSyncExternalStore?se.useSyncExternalStore(e,t):i}function WR(e,t,i){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(i||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const n=[],s=[],o=new Map,r=new Map;for(let a=0;a<t.length;a++){const l=t[a];r.set(l.instanceId,l)}for(let a=0;a<e.length;a++){const l=e[a];o.set(l.instanceId,l),r.has(l.instanceId)&&n.push(l)}for(let a=0;a<t.length;a++){const l=t[a],c=l.instanceId;o.has(c)||s.push(l)}return n.length===e.length&&s.length===0?e:n.length===0&&s.length===t.length?t:n.length===0?s:s.length===0?n:[...n,...s]}var Hue=P.forwardRef((e,t)=>{const{registry:i,context:n}=P.useContext(ar),s=P.useRef(null),o=P.useRef(null),r=P.useRef(null),a=P.useRef(null),l=P.useRef(null),c=P.useRef(),[u,d]=P.useState(),[p,f]=P.useState(),[m,v]=P.useState(),[b,C]=P.useState(()=>new Tl),[x,w]=P.useState(()=>new Tl("ag-hidden")),[M,T]=P.useState(()=>new Tl("ag-hidden")),[L,I]=P.useState(()=>new Tl("ag-invisible"));P.useImperativeHandle(t,()=>({refresh(){return!1}})),P.useLayoutEffect(()=>fM(u,n,o.current),[u]);const R=P.useCallback($=>{if(s.current=$,!$||n.isDestroyed()){c.current=n.destroyBean(c.current);return}const W={setInnerRenderer:(q,H)=>{d(q),v(H)},setChildCount:q=>f(q),toggleCss:(q,H)=>C(U=>U.setClass(q,H)),setContractedDisplayed:q=>T(H=>H.setClass("ag-hidden",!q)),setExpandedDisplayed:q=>w(H=>H.setClass("ag-hidden",!q)),setCheckboxVisible:q=>I(H=>H.setClass("ag-invisible",!q)),setCheckboxSpacing:q=>I(H=>H.setClass("ag-group-checkbox-spacing",q))},Q=i.createDynamicBean("groupCellRendererCtrl",!0);Q&&(c.current=n.createBean(Q),c.current.init(W,$,r.current,a.current,l.current,Hue,e))},[]),O=P.useMemo(()=>`ag-cell-wrapper ${b.toString()}`,[b]),_=P.useMemo(()=>`ag-group-expanded ${x.toString()}`,[x]),B=P.useMemo(()=>`ag-group-contracted ${M.toString()}`,[M]),V=P.useMemo(()=>`ag-group-checkbox ${L.toString()}`,[L]),j=u?.componentFromFramework,K=j?u.componentClass:void 0,Y=u==null&&m!=null,G=yC(m);return se.createElement("span",{className:O,ref:R,...e.colDef?{}:{role:c.current?.getCellAriaRole()}},se.createElement("span",{className:_,ref:a}),se.createElement("span",{className:B,ref:l}),se.createElement("span",{className:V,ref:r}),se.createElement("span",{className:"ag-group-value",ref:o},Y?G:j?se.createElement(K,{...u.params}):null),se.createElement("span",{className:"ag-group-child-count"},p))}),v7=Hue,Qj=P.createContext({setMethods:()=>{}}),Kot=e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:n,setMethods:s}=e,[{key:o,...r},a]=P.useState(t);return P.useEffect(()=>{i(l=>a(l))},[]),se.createElement(Qj.Provider,{value:{setMethods:s}},se.createElement(n,{key:o,...r}))},Yot=P.memo(Kot),Xot=0;function b7(){return`agPortalKey_${++Xot}`}var Wue=class{constructor(e,t,i,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=b7(),this.portalKey=b7(),this.instanceCreated=this.isStatelessComponent()?qt.resolve(!1):new qt(s=>{this.resolveInstanceCreated=s})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i){setTimeout(()=>this.callMethod(e,t));return}const n=i[e];if(n)return n.apply(i,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new qt(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{this.componentInstance=t,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=KR.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return P.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this[`${e}Component`];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function aP(e,t,i){for(const n of e){const s=t[n];s&&(i[n]=s)}}var Ha=class extends Wue{constructor(){super(...arguments),this.awaitUpdateCallback=new qt(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Yot}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:i=>this.setMethods(i),addUpdateCallback:i=>{this.updateCallback=()=>(i(this.getProps()),new qt(n=>{setTimeout(()=>{n()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,aP(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new qt(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Zot=class extends Ha{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},qot=class extends Ha{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Qot=class extends Ha{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:n}=this;return e.label=t,e.icon=i,e.shake=n,e}},Jot=class extends Ha{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new qt(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const t=new qt(i=>{this.resolveFilterPassCallback=i});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},ert=class extends Ha{constructor(){super(...arguments),this.awaitSetMethodsCallback=new qt(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function jue(e,t){e.parentFilterInstance(i=>{(i.setModel(t)||qt.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var trt=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=i=>this.updateModel(i)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){aP(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),jue(this.floatingFilterParams,e)}},irt=class extends Ha{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),jue(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},nrt=class extends Ha{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},srt=class extends Ha{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ort=class extends Ha{refresh(e){this.sourceParams=e,this.refreshProps()}},rrt=class extends Ha{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},art=class extends Ha{refresh(e){this.sourceParams=e,this.refreshProps()}},lrt=class extends Ha{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},crt=class extends Ha{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Jj(){Ee(231)}var urt=1e3,drt=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||urt}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,i=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){O0(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,i)})}}},hrt=({ctrl:e})=>{const t=e.isAlive(),{context:i}=P.useContext(ar),[n,s]=P.useState(),[o,r]=P.useState(),a=P.useRef(),l=P.useRef(null),c=P.useRef(null),u=P.useRef(null),d=P.useRef(),p=P.useRef();t&&!p.current&&(p.current=new uM(()=>l.current));const f=P.useCallback(C=>{if(l.current=C,!C||!e.isAlive()||i.isDestroyed()){a.current=i.destroyBean(a.current);return}a.current=i.createBean(new vC);const x=()=>{const M=e.getSelectAllGui();M&&(c.current?.insertAdjacentElement("afterend",M),a.current.addDestroyFunc(()=>M.remove()))},w={setWidth:M=>{l.current&&(l.current.style.width=M)},toggleCss:(M,T)=>p.current.toggleCss(M,T),setUserStyles:M=>r(M),setAriaSort:M=>{l.current&&(M?CKe(l.current,M):xKe(l.current))},setUserCompDetails:M=>s(M),getUserCompInstance:()=>d.current||void 0,refreshSelectAllGui:x,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(w,C,c.current,u.current,a.current),x()},[]);P.useLayoutEffect(()=>fM(n,i,u.current,d),[n]),P.useEffect(()=>{e.setDragSource(l.current)},[n]);const m=P.useMemo(()=>!!(n?.componentFromFramework&&SC(n.componentClass)),[n]),v=n?.componentFromFramework,b=n?.componentClass;return se.createElement("div",{ref:f,style:o,className:"ag-header-cell",role:"columnheader"},se.createElement("div",{ref:c,className:"ag-header-cell-resize",role:"presentation"}),se.createElement("div",{ref:u,className:"ag-header-cell-comp-wrapper",role:"presentation"},v?m?se.createElement(b,{...n.params}):se.createElement(b,{...n.params,ref:d}):null))},prt=P.memo(hrt),grt=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){aP(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},frt=({ctrl:e})=>{const{context:t,gos:i}=P.useContext(ar),[n,s]=P.useState(),[o,r]=P.useState(()=>new Tl("ag-header-cell","ag-floating-filter")),[a,l]=P.useState(()=>new Tl),[c,u]=P.useState(()=>new Tl("ag-floating-filter-button","ag-hidden")),[d,p]=P.useState("false"),[f,m]=P.useState(),[,v]=P.useState(1),b=P.useRef(),C=P.useRef(null),x=P.useRef(null),w=P.useRef(null),M=P.useRef(null),T=P.useRef(),L=P.useRef(),I=q=>{q!=null&&T.current&&T.current(q)},R=P.useCallback(q=>{if(C.current=q,!q||!e.isAlive()||t.isDestroyed()){b.current=t.destroyBean(b.current);return}b.current=t.createBean(new vC),L.current=new qt(U=>{T.current=U});const H={toggleCss:(U,ee)=>r(ie=>ie.setClass(U,ee)),setUserStyles:U=>s(U),addOrRemoveBodyCssClass:(U,ee)=>l(ie=>ie.setClass(U,ee)),setButtonWrapperDisplayed:U=>{u(ee=>ee.setClass("ag-hidden",!U)),p(U?"false":"true")},setWidth:U=>{C.current&&(C.current.style.width=U)},setCompDetails:U=>m(U),getFloatingFilterComp:()=>L.current?L.current:null,setMenuIcon:U=>M.current?.appendChild(U)};e.setComp(H,q,M.current,x.current,b.current)},[]);P.useLayoutEffect(()=>fM(f,t,x.current,I),[f]);const O=P.useMemo(()=>o.toString(),[o]),_=P.useMemo(()=>a.toString(),[a]),B=P.useMemo(()=>c.toString(),[c]),V=P.useMemo(()=>!!(f&&f.componentFromFramework&&SC(f.componentClass)),[f]),j=P.useMemo(()=>i.get("reactiveCustomComponents"),[]),K=P.useMemo(()=>i.get("enableFilterHandlers"),[]),[Y,G]=P.useState();P.useEffect(()=>{if(f?.componentFromFramework)if(j){const q=K?grt:trt,H=new q(f.params,()=>v(U=>U+1));I(H),G(H)}else Jj()},[f]);const $=Y?.getProps(),W=f?.componentFromFramework,Q=f?.componentClass;return se.createElement("div",{ref:R,style:n,className:O,role:"gridcell"},se.createElement("div",{ref:x,className:_,role:"presentation"},W?j?$&&se.createElement(Qj.Provider,{value:{setMethods:q=>Y.setMethods(q)}},se.createElement(Q,{...$})):se.createElement(Q,{...f.params,ref:V?()=>{}:I}):null),se.createElement("div",{ref:w,"aria-hidden":d,className:B,role:"presentation"},se.createElement("button",{ref:M,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},mrt=P.memo(frt),yrt=({ctrl:e})=>{const{context:t}=P.useContext(ar),[i,n]=P.useState(),[s,o]=P.useState(()=>new Tl),[r,a]=P.useState(()=>new Tl),[l,c]=P.useState("false"),[u,d]=P.useState(),[p,f]=P.useState(),m=P.useRef(),v=P.useRef(null),b=P.useRef(null),C=P.useRef(null),x=P.useRef(),w=P.useCallback(O=>{if(v.current=O,!O||!e.isAlive()||t.isDestroyed()){m.current=t.destroyBean(m.current);return}m.current=t.createBean(new vC);const _={setWidth:B=>{v.current&&(v.current.style.width=B)},toggleCss:(B,V)=>o(j=>j.setClass(B,V)),setUserStyles:B=>n(B),setHeaderWrapperHidden:B=>{const V=C.current;V&&(B?V.style.setProperty("display","none"):V.style.removeProperty("display"))},setHeaderWrapperMaxHeight:B=>{const V=C.current;V&&(B!=null?V.style.setProperty("max-height",`${B}px`):V.style.removeProperty("max-height"),V.classList.toggle("ag-header-cell-comp-wrapper-limited-height",B!=null))},setUserCompDetails:B=>f(B),setResizableDisplayed:B=>{a(V=>V.setClass("ag-hidden",!B)),c(B?"false":"true")},setAriaExpanded:B=>d(B),getUserCompInstance:()=>x.current||void 0};e.setComp(_,O,b.current,C.current,m.current)},[]);P.useLayoutEffect(()=>fM(p,t,C.current),[p]),P.useEffect(()=>{v.current&&e.setDragSource(v.current)},[p]);const M=P.useMemo(()=>!!(p?.componentFromFramework&&SC(p.componentClass)),[p]),T=P.useMemo(()=>"ag-header-group-cell "+s.toString(),[s]),L=P.useMemo(()=>"ag-header-cell-resize "+r.toString(),[r]),I=p?.componentFromFramework,R=p?.componentClass;return se.createElement("div",{ref:w,style:i,className:T,role:"columnheader","aria-expanded":u},se.createElement("div",{ref:C,className:"ag-header-cell-comp-wrapper",role:"presentation"},I?M?se.createElement(R,{...p.params}):se.createElement(R,{...p.params,ref:x}):null),se.createElement("div",{ref:b,"aria-hidden":l,className:L}))},vrt=P.memo(yrt),brt=({ctrl:e})=>{const{gos:t,context:i}=P.useContext(ar),{topOffset:n,rowHeight:s}=P.useMemo(()=>e.getTopAndHeight(),[]),o=P.useMemo(()=>t.get("tabIndex"),[]),[r,a]=P.useState(()=>e.getAriaRowIndex()),l=e.headerRowClass,[c,u]=P.useState(()=>s+"px"),[d,p]=P.useState(()=>n+"px"),f=P.useRef(null),[m,v]=P.useState(()=>e.getUpdatedHeaderCtrls()),b=P.useRef(),C=P.useRef(null),x=P.useCallback(T=>{if(C.current=T,!T||!e.isAlive()||i.isDestroyed()){b.current=i.destroyBean(b.current);return}b.current=i.createBean(new vC);const L={setHeight:I=>u(I),setTop:I=>p(I),setHeaderCtrls:(I,R,O)=>{const _=f.current,B=WR(_,I,R);B!==_&&(f.current=B,O0(O,()=>v(B)))},setWidth:I=>{C.current&&(C.current.style.width=I)},setRowIndex:I=>{a(I)}};e.setComp(L,b.current,!1)},[]),w=P.useMemo(()=>({height:c,top:d}),[c,d]),M=P.useCallback(T=>{switch(e.type){case"group":return se.createElement(vrt,{ctrl:T,key:T.instanceId});case"filter":return se.createElement(mrt,{ctrl:T,key:T.instanceId});default:return se.createElement(prt,{ctrl:T,key:T.instanceId})}},[]);return se.createElement("div",{ref:x,className:l,role:"row",style:w,tabIndex:o,"aria-rowindex":r},m.map(M))},Srt=P.memo(brt),Crt=({pinned:e})=>{const[t,i]=P.useState(!0),[n,s]=P.useState([]),{context:o}=P.useContext(ar),r=P.useRef(null),a=P.useRef(null),l=P.useRef(),c=e==="left",u=e==="right",d=!c&&!u,p=P.useCallback(v=>{if(r.current=v,!v||o.isDestroyed()){l.current=o.destroyBean(l.current);return}l.current=o.createBean(new rXe(e));const b={setDisplayed:i,setCtrls:C=>s(C),setCenterWidth:C=>{a.current&&(a.current.style.width=C)},setViewportScrollLeft:C=>{r.current&&(r.current.scrollLeft=C)},setPinnedContainerWidth:C=>{r.current&&(r.current.style.width=C,r.current.style.minWidth=C,r.current.style.maxWidth=C)}};l.current.setComp(b,r.current)},[]),f=t?"":"ag-hidden",m=()=>n.map(v=>se.createElement(Srt,{ctrl:v,key:v.instanceId}));return c?se.createElement("div",{ref:p,className:"ag-pinned-left-header "+f,"aria-hidden":!t,role:"rowgroup"},m()):u?se.createElement("div",{ref:p,className:"ag-pinned-right-header "+f,"aria-hidden":!t,role:"rowgroup"},m()):d?se.createElement("div",{ref:p,className:"ag-header-viewport "+f,role:"rowgroup",tabIndex:-1},se.createElement("div",{ref:a,className:"ag-header-container",role:"presentation"},m())):null},vB=P.memo(Crt),xrt=()=>{const[e,t]=P.useState(()=>new Tl),[i,n]=P.useState(),{context:s}=P.useContext(ar),o=P.useRef(null),r=P.useRef(),a=P.useCallback(u=>{if(o.current=u,!u||s.isDestroyed()){r.current=s.destroyBean(r.current);return}r.current=s.createBean(new iXe);const d={toggleCss:(p,f)=>t(m=>m.setClass(p,f)),setHeightAndMinHeight:p=>n(p)};r.current.setComp(d,u,u)},[]),l=P.useMemo(()=>"ag-header "+e.toString(),[e]),c=P.useMemo(()=>({height:i,minHeight:i}),[i]);return se.createElement("div",{ref:a,className:l,style:c,role:"presentation"},se.createElement(vB,{pinned:"left"}),se.createElement(vB,{pinned:null}),se.createElement(vB,{pinned:"right"}))},wrt=P.memo(xrt),Drt=(e,t)=>{P.useEffect(()=>{const i=t.current;if(i){const n=i.parentElement;if(n){const s=document.createComment(e);return n.insertBefore(s,i),()=>{s.remove()}}}},[e])},$f=Drt,Mrt=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new qt(i=>{this.resolveInstanceCreated=i}),this.onValueChange=i=>this.updateValue(i),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){aP(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},Art=e=>{const t=P.useRef(e),i=P.useRef(),n=P.useRef(!1),s=P.useRef(!1),[,o]=P.useState(0);n.current&&(s.current=!0),P.useEffect(()=>(n.current||(i.current=t.current(),n.current=!0),o(r=>r+1),()=>{s.current&&i.current?.()}),[])},krt=e=>{const[t,i]=P.useState(),n=P.useContext(ar),{context:s,popupSvc:o,gos:r,editSvc:a}=n,{editDetails:l,cellCtrl:c,eParentCell:u}=e;return Art(()=>{const{compDetails:d}=l,p=r.get("stopEditingWhenCellsLoseFocus");let f,m;if(!s.isDestroyed()){m=s.createBean(a.createPopupEditorWrapper(d.params));const v=m.getGui();if(e.jsChildComp){const T=e.jsChildComp.getGui();T&&v.appendChild(T)}const{column:b,rowNode:C}=c,x={column:b,rowNode:C,type:"popupCellEditor",eventSource:u,ePopup:v,position:l.popupPosition,keepWithinBounds:!0},w=o?.positionPopupByComponent.bind(o,x),M=o?.addPopup({modal:p,eChild:v,closeOnEsc:!0,closedCallback:()=>{c.onPopupEditorClosed()},anchorToElement:u,positionCallback:w,ariaOwns:u});f=M?M.hideFunc:void 0,i(m),e.jsChildComp?.afterGuiAttached?.()}return()=>{f?.(),s.destroyBean(m)}}),P.useLayoutEffect(()=>()=>{c.isCellFocused()&&t?.getGui().contains(Cn(n))&&u.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?KR.createPortal(e.wrappedContent,t.getGui()):null},S7=P.memo(krt),Trt=(e,t,i)=>{const{compProxy:n}=e;i(n);const s=n.getProps(),o=SC(t);return se.createElement(Qj.Provider,{value:{setMethods:r=>n.setMethods(r)}},o?se.createElement(t,{...s}):se.createElement(t,{...s,ref:r=>n.setRef(r)}))},C7=(e,t,i)=>e.compProxy?Trt(e,t,i):se.createElement(t,{...e.compDetails.params,ref:i}),Irt=(e,t,i,n,s)=>{const o=e.compDetails,r=o.componentClass,a=o.componentFromFramework&&!e.popup,l=o.componentFromFramework&&e.popup,c=!o.componentFromFramework&&e.popup;return a?C7(e,r,t):l?se.createElement(S7,{editDetails:e,cellCtrl:n,eParentCell:i,wrappedContent:C7(e,r,t)}):c&&s?se.createElement(S7,{editDetails:e,cellCtrl:n,eParentCell:i,jsChildComp:s}):null},Rrt=(e,t,i,n,s,o)=>{const{context:r}=P.useContext(ar),a=P.useCallback(()=>{const l=s.current;if(!l)return;const c=l.getGui();c&&c.parentElement&&c.remove(),r.destroyBean(l),s.current=void 0},[]);P.useEffect(()=>{const l=e!=null,c=e?.compDetails&&!e.compDetails.componentFromFramework,u=t&&i==null;if(!(l&&c&&!u)){a();return}const p=e.compDetails;if(s.current){const m=s.current,b=m.refresh!=null&&e.force==!1?m.refresh(p.params):!1;if(b===!0||b===void 0)return;a()}p.newAgStackInstance().then(m=>{if(!m)return;const v=m.getGui();if(!v)return;(t?i:o.current).appendChild(v),s.current=m})},[e,t,n]),P.useEffect(()=>a,[])},Uue=Rrt,Ert=({cellCtrl:e,parent:t})=>{const i=P.useRef(),n=P.useMemo(()=>{const{loadingComp:s}=e.getDeferLoadingCellRenderer();return s?{value:void 0,compDetails:s,force:!1}:void 0},[e]);if(Uue(n,!1,void 0,1,i,t),n?.compDetails?.componentFromFramework){const s=n.compDetails.componentClass;return se.createElement(s,{...n.compDetails.params})}return se.createElement(se.Fragment,null)},Lrt=({cellCtrl:e,printLayout:t,editingCell:i})=>{const n=P.useContext(ar),{context:s}=n,{column:{colIdSanitised:o},instanceId:r}=e,a=P.useRef(),[l,c]=P.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[u,d]=P.useState(),[p,f]=P.useState(1),[m,v]=P.useState(),[b,C]=P.useState(!1),[x,w]=P.useState(!1),[M,T]=P.useState(!1),[L,I]=P.useState(),R=P.useMemo(()=>e.isForceWrapper(),[e]),O=P.useMemo(()=>e.getCellAriaRole(),[e]),_=P.useRef(null),B=P.useRef(null),V=P.useRef(null),j=P.useRef(),K=P.useRef(),Y=P.useRef(),G=P.useRef([]),$=P.useRef(),W=P.useRef(),[Q,q]=P.useState(0),H=P.useCallback(Ae=>{W.current=Ae,q(Ve=>Ve+1)},[]),U=l!=null&&(b||M||x)&&(u==null||!!u.popup),ee=R||U,ie=P.useMemo(()=>e.getCellValueClass(),[e]),oe=P.useCallback(Ae=>{if(K.current=Ae,Ae){const Ve=Ae.isCancelBeforeStart&&Ae.isCancelBeforeStart();setTimeout(()=>{Ve?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(Ae))})}},[e]),ae=P.useRef();ae.current||(ae.current=new uM(()=>_.current)),Uue(l,ee,W.current,Q,j,_);const me=P.useRef();P.useLayoutEffect(()=>{const Ae=me.current,Ve=l;if(me.current=l,Ae==null||Ae.compDetails==null||Ve==null||Ve.compDetails==null)return;$.current?.refreshVisibility();const $e=Ae.compDetails,Qe=Ve.compDetails;if($e.componentClass!=Qe.componentClass||V.current?.refresh==null)return;V.current.refresh(Qe.params)!=!0&&f(Ze=>Ze+1)},[l]),P.useLayoutEffect(()=>{if(!(u&&!u.compDetails.componentFromFramework)||s.isDestroyed())return;const Ve=u.compDetails,$e=u.popup===!0,Qe=Ve.newAgStackInstance();return Qe.then(Oe=>{if(!Oe)return;const Ze=Oe.getGui();oe(Oe),$e||((R?Y:_).current?.appendChild(Ze),Oe.afterGuiAttached?.()),I(Oe)}),()=>{Qe.then(Oe=>{const Ze=Oe.getGui();e.disableEditorTooltipFeature(),s.destroyBean(Oe),oe(void 0),I(void 0),Ze?.remove()})}},[u]);const xe=P.useCallback(Ae=>{if(Y.current=Ae,!Ae||s.isDestroyed()||!e.isAlive()){const Qe=G.current;G.current=[];for(const Oe of Qe)Oe();return}let Ve;const $e=Qe=>{Qe&&(Ae.insertAdjacentElement("afterbegin",Qe.getGui()),G.current.push(()=>{ug(Qe.getGui()),s.destroyBean(Qe),$.current===Ve&&($.current=void 0)}))};b&&$e(e.createSelectionCheckbox()),M&&$e(e.createDndSource()),x&&(Ve=e.createRowDragComp(),$.current=Ve,Ve&&($e(Ve),Ve.refreshVisibility()))},[e,s,M,x,b]),be=P.useCallback(()=>{const Ae=!e.isCellSpanning()||B.current,Ve=_.current;if(!Ve||!Ae||!e||!e.isAlive()||s.isDestroyed()){a.current=s.destroyBean(a.current);return}a.current=s.createBean(new vC);const $e={toggleCss:(Oe,Ze)=>ae.current.toggleCss(Oe,Ze),setUserStyles:Oe=>v(Oe),getFocusableElement:()=>_.current,setIncludeSelection:Oe=>C(Oe),setIncludeRowDrag:Oe=>w(Oe),setIncludeDndSource:Oe=>T(Oe),getCellEditor:()=>K.current??null,getCellRenderer:()=>V.current??j.current,getParentOfValue:()=>W.current??Y.current??_.current,setRenderDetails:(Oe,Ze,dt)=>{const Tt=()=>{c(gt=>gt?.compDetails!==Oe||gt?.value!==Ze||gt?.force!==dt?{value:Ze,compDetails:Oe,force:dt}:gt)};if(Oe?.params?.deferRender&&!e.rowNode.group){const{loadingComp:gt,onReady:Lt}=e.getDeferLoadingCellRenderer();if(gt){c({value:void 0,compDetails:gt,force:!1}),Lt.then(()=>Uot(Tt));return}}Tt()},setEditDetails:(Oe,Ze,dt,Tt)=>{if(Oe){let gt;Oe.componentFromFramework&&(Tt?gt=new Mrt(Oe.params,()=>f(Lt=>Lt+1)):Jj()),d({compDetails:Oe,popup:Ze,popupPosition:dt,compProxy:gt}),Ze||c(void 0)}else e.hasBrowserFocus()&&$e.getFocusableElement().focus({preventScroll:!0}),K.current=void 0,d(void 0)},refreshEditStyles:(Oe,Ze)=>{if(!_.current)return;const{current:dt}=ae;dt.toggleCss("ag-cell-value",!ee),dt.toggleCss("ag-cell-inline-editing",!!Oe&&!Ze),dt.toggleCss("ag-cell-popup-editing",!!Oe&&!!Ze),dt.toggleCss("ag-cell-not-inline-editing",!Oe||!!Ze)}},Qe=Y.current||void 0;e.setComp($e,Ve,B.current??void 0,Qe,t,i,a.current)},[]),ge=P.useCallback(Ae=>{_.current=Ae,be()},[]),Re=P.useCallback(Ae=>{B.current=Ae,be()},[]),Ne=P.useMemo(()=>!!(l?.compDetails?.componentFromFramework&&SC(l.compDetails.componentClass)),[l]);P.useLayoutEffect(()=>{if(!_.current)return;const{current:Ae}=ae;Ae.toggleCss("ag-cell-value",!ee),Ae.toggleCss("ag-cell-inline-editing",!!u&&!u.popup),Ae.toggleCss("ag-cell-popup-editing",!!u&&!!u.popup),Ae.toggleCss("ag-cell-not-inline-editing",!u||!!u.popup)});const Pe=()=>{const{compDetails:Ae,value:Ve}=l;if(!Ae)return Ve?.toString?.()??Ve;if(Ae.componentFromFramework){const $e=Ae.componentClass;return se.createElement(P.Suspense,{fallback:se.createElement(Ert,{cellCtrl:e,parent:_})},Ne?se.createElement($e,{...Ae.params,key:p}):se.createElement($e,{...Ae.params,key:p,ref:V}))}},Be=()=>{const Ae=()=>l==null?null:ee?se.createElement("span",{role:"presentation",id:`cell-${r}`,className:ie,ref:H},Pe()):Pe(),Ve=$e=>Irt($e,oe,_.current,e,L);return u!=null?u.popup?se.createElement(se.Fragment,null,Ae(),Ve(u)):Ve(u):Ae()},Ue=()=>se.createElement("div",{ref:ge,style:m,role:O,"col-id":o},ee?se.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:xe},Be()):Be());return e.isCellSpanning()?se.createElement("div",{ref:Re,className:"ag-spanned-cell-wrapper",role:"presentation"},Ue()):Ue()},Prt=P.memo(Lrt),Nrt=({rowCtrl:e,containerType:t})=>{const{context:i,gos:n,editSvc:s}=P.useContext(ar),o=P.useContext(zue)==="default",r=P.useRef(),a=P.useRef(e.getDomOrder()),l=e.isFullWidth(),c=e.rowNode.displayed,[u,d]=P.useState(()=>c?e.rowNode.getRowIndexString():null),[p,f]=P.useState(()=>e.rowId),[m,v]=P.useState(()=>e.businessKey),[b,C]=P.useState(()=>e.rowStyles),x=P.useRef(null),[w,M]=P.useState(()=>null),[T,L]=P.useState(),[I,R]=P.useState(()=>c?e.getInitialRowTop(t):void 0),[O,_]=P.useState(()=>c?e.getInitialTransform(t):void 0),B=P.useRef(null),V=P.useRef(),j=P.useRef(),K=P.useRef(!1),[Y,G]=P.useState(0);P.useEffect(()=>{if(K.current||!T||Y>10)return;const ge=B.current?.firstChild;ge?(e.setupDetailRowAutoHeight(ge),K.current=!0):G(Re=>Re+1)},[T,Y]);const $=P.useRef();$.current||($.current=new uM(()=>B.current));const W=P.useRef(()=>{}),Q=P.useCallback(ge=>(W.current=ge,()=>{W.current=()=>{}}),[]),q=$ot(Q,()=>x.current,[]),H=o?q:w,U=P.useCallback(ge=>{if(B.current=ge,r.current=ge?i.createBean(new vC):i.destroyBean(r.current),!ge){e.unsetComp(t);return}if(!e.isAlive()||i.isDestroyed())return;const Re={setTop:R,setTransform:_,toggleCss:(Ne,Pe)=>$.current.toggleCss(Ne,Pe),setDomOrder:Ne=>a.current=Ne,setRowIndex:d,setRowId:f,setRowBusinessKey:v,setUserStyles:C,setCellCtrls:(Ne,Pe)=>{const Be=x.current,Ue=WR(Be,Ne,a.current);Ue!==Be&&(x.current=Ue,o?W.current():O0(Pe,()=>M(Ue)))},showFullWidth:Ne=>{j.current=Ne.params,L(Ne)},getFullWidthCellRenderer:()=>V.current,getFullWidthCellRendererParams:()=>j.current,refreshFullWidth:Ne=>{const Pe=Ne();return j.current=Pe,me.current?(L(Be=>({...Be,params:Pe})),!0):!V.current||!V.current.refresh?!1:V.current.refresh(Pe)}};e.setComp(Re,ge,t,r.current)},[]);P.useLayoutEffect(()=>fM(T,i,B.current,V),[T]);const ee=P.useMemo(()=>{const ge={top:I,transform:O};return Object.assign(ge,b),ge},[I,O,b]),ie=l&&T?.componentFromFramework,oe=!l&&H!=null,ae=P.useMemo(()=>!!(T?.componentFromFramework&&SC(T.componentClass)),[T]),me=P.useRef(!1);P.useEffect(()=>{me.current=ae&&!!T&&!!n.get("reactiveCustomComponents")},[ae,T]);const xe=()=>H?.map(ge=>se.createElement(Prt,{cellCtrl:ge,editingCell:s?.isEditing(ge,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:ge.instanceId})),be=()=>{const ge=T.componentClass;return ae?se.createElement(ge,{...T.params}):se.createElement(ge,{...T.params,ref:V})};return se.createElement("div",{ref:U,role:"row",style:ee,"row-index":u,"row-id":p,"row-business-key":m},oe?xe():ie?be():null)},x7=P.memo(Nrt),Ort=({name:e})=>{const{context:t,gos:i}=P.useContext(ar),n=P.useMemo(()=>hM(e),[e]),s=P.useRef(null),o=P.useRef(null),r=P.useRef(null),a=P.useRef([]),l=P.useRef([]),[c,u]=P.useState(()=>[]),d=!!i.get("enableCellSpan")&&!!n.getSpannedRowCtrls,p=P.useRef([]),f=P.useRef([]),[m,v]=P.useState(()=>[]),b=P.useRef(!1),C=P.useRef(),x=P.useMemo(()=>ml("ag-viewport",yce(e)),[e]),w=P.useMemo(()=>ml(dI(e)),[e]),M=P.useMemo(()=>ml("ag-spanning-container",A9e(e)),[e]),T=n.type==="center"||d,L=T?s:o;$f(" AG Row Container "+e+" ",L);const I=P.useCallback(()=>{const Y=!T||s.current!=null,G=o.current!=null,$=!d||r.current!=null;return Y&&G&&$},[]),R=P.useCallback(()=>s.current==null&&o.current==null&&r.current==null,[]),O=P.useCallback(()=>{if(R()&&(C.current=t.destroyBean(C.current)),!t.isDestroyed()&&I()){const Y=W=>{const Q=WR(l.current,a.current,b.current);Q!==l.current&&(l.current=Q,O0(W,()=>u(Q)))},G=W=>{const Q=WR(f.current,p.current,b.current);Q!==f.current&&(f.current=Q,O0(W,()=>v(Q)))},$={setHorizontalScroll:W=>{s.current&&(s.current.scrollLeft=W)},setViewportHeight:W=>{s.current&&(s.current.style.height=W)},setRowCtrls:({rowCtrls:W,useFlushSync:Q})=>{const q=!!Q&&a.current.length>0&&W.length>0;a.current=W,Y(q)},setSpannedRowCtrls:(W,Q)=>{const q=!!Q&&p.current.length>0&&W.length>0;p.current=W,G(q)},setDomOrder:W=>{b.current!=W&&(b.current=W,Y(!1))},setContainerWidth:W=>{o.current&&(o.current.style.width=W)},setOffsetTop:W=>{o.current&&(o.current.style.transform=`translateY(${W})`)}};C.current=t.createBean(new F9e(e)),C.current.setComp($,o.current,r.current??void 0,s.current)}},[I,R]),_=P.useCallback(Y=>{o.current=Y,O()},[O]),B=P.useCallback(Y=>{r.current=Y,O()},[O]),V=P.useCallback(Y=>{s.current=Y,O()},[O]),j=()=>se.createElement("div",{className:w,ref:_,role:T?"presentation":"rowgroup"},c.map(Y=>se.createElement(x7,{rowCtrl:Y,containerType:n.type,key:Y.instanceId})));if(!T)return j();const K=()=>se.createElement("div",{className:M,ref:B,role:"presentation"},m.map(Y=>se.createElement(x7,{rowCtrl:Y,containerType:n.type,key:Y.instanceId})));return se.createElement("div",{className:x,ref:V,role:"rowgroup"},j(),d?K():null)},Frt=P.memo(Ort),Brt=()=>{const e=P.useContext(ar),{context:t,overlays:i}=e,[n,s]=P.useState(""),[o,r]=P.useState(0),[a,l]=P.useState(0),[c,u]=P.useState("0px"),[d,p]=P.useState("0px"),[f,m]=P.useState("100%"),[v,b]=P.useState("0px"),[C,x]=P.useState("0px"),[w,M]=P.useState("100%"),[T,L]=P.useState(!0),[I,R]=P.useState(!0),[O,_]=P.useState(null),[B,V]=P.useState(""),[j,K]=P.useState(null),[Y,G]=P.useState("ag-layout-normal"),$=P.useRef();$.current||($.current=new uM(()=>W.current));const W=P.useRef(null),Q=P.useRef(null),q=P.useRef(null),H=P.useRef(null),U=P.useRef(null),ee=P.useRef(null),ie=P.useRef(null),oe=P.useRef([]),ae=P.useRef([]);$f(" AG Grid Body ",W),$f(" AG Pinned Top ",Q),$f(" AG Sticky Top ",q),$f(" AG Middle ",ee),$f(" AG Pinned Bottom ",ie);const me=P.useCallback(Ze=>{if(W.current=Ze,!Ze||t.isDestroyed()){oe.current=t.destroyBeans(oe.current);for(const Ht of ae.current)Ht();ae.current=[];return}const dt=(Ht,Hi)=>{Ht.appendChild(Hi),ae.current.push(()=>Hi.remove())},Tt=Ht=>{const Hi=t.createBean(new Ht);return oe.current.push(Hi),Hi},gt=(Ht,Hi,zc)=>{dt(Ht,document.createComment(zc)),dt(Ht,Tt(Hi).getGui())};gt(Ze,W9e," AG Fake Horizontal Scroll ");const Lt=i?.getOverlayWrapperCompClass();Lt&&gt(Ze,Lt," AG Overlay Wrapper "),U.current&&gt(U.current,U9e," AG Fake Vertical Scroll ");const Gi={setRowAnimationCssOnBodyViewport:s,setColumnCount:Ht=>{W.current&&bKe(W.current,Ht)},setRowCount:Ht=>{W.current&&yKe(W.current,Ht)},setTopHeight:r,setBottomHeight:l,setStickyTopHeight:u,setStickyTopTop:p,setStickyTopWidth:m,setTopInvisible:L,setBottomInvisible:R,setColumnMovingCss:(Ht,Hi)=>$.current.toggleCss(Ht,Hi),updateLayoutClasses:G,setAlwaysVerticalScrollClass:_,setPinnedTopBottomOverflowY:V,setCellSelectableCss:(Ht,Hi)=>K(Hi?Ht:null),setBodyViewportWidth:Ht=>{ee.current&&(ee.current.style.width=Ht)},registerBodyViewportResizeListener:Ht=>{if(ee.current){const Hi=Bh(e,ee.current,Ht);ae.current.push(()=>Hi())}},setStickyBottomHeight:b,setStickyBottomBottom:x,setStickyBottomWidth:M,setGridRootRole:Ht=>Ze.setAttribute("role",Ht)},Ti=t.createBean(new G9e);oe.current.push(Ti),Ti.setComp(Gi,Ze,ee.current,Q.current,ie.current,q.current,H.current)},[]),xe=P.useMemo(()=>ml("ag-root","ag-unselectable",Y),[Y]),be=P.useMemo(()=>ml("ag-body-viewport",n,Y,O,j),[n,Y,O,j]),ge=P.useMemo(()=>ml("ag-body",Y),[Y]),Re=P.useMemo(()=>ml("ag-floating-top",T?"ag-invisible":null,j),[j,T]),Ne=P.useMemo(()=>ml("ag-sticky-top",j),[j]),Pe=P.useMemo(()=>ml("ag-sticky-bottom",v==="0px"?"ag-invisible":null,j),[j,v]),Be=P.useMemo(()=>ml("ag-floating-bottom",I?"ag-invisible":null,j),[j,I]),Ue=P.useMemo(()=>({height:o,minHeight:o,overflowY:B}),[o,B]),Ae=P.useMemo(()=>({height:c,top:d,width:f}),[c,d,f]),Ve=P.useMemo(()=>({height:v,bottom:C,width:w}),[v,C,w]),$e=P.useMemo(()=>({height:a,minHeight:a,overflowY:B}),[a,B]),Qe=Ze=>se.createElement(Frt,{name:Ze,key:`${Ze}-container`}),Oe=({section:Ze,children:dt,className:Tt,style:gt})=>se.createElement("div",{ref:Ze,className:Tt,role:"presentation",style:gt},dt.map(Qe));return se.createElement("div",{ref:me,className:xe},se.createElement(wrt,null),Oe({section:Q,className:Re,style:Ue,children:["topLeft","topCenter","topRight","topFullWidth"]}),se.createElement("div",{className:ge,ref:U,role:"presentation"},Oe({section:ee,className:be,children:["left","center","right","fullWidth"]})),Oe({section:q,className:Ne,style:Ae,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Oe({section:H,className:Pe,style:Ve,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Oe({section:ie,className:Be,style:$e,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},_rt=P.memo(Brt),zrt=(e,t)=>{const{children:i,eFocusableElement:n,onTabKeyDown:s,gridCtrl:o,forceFocusOutWhenTabGuardsAreEmpty:r,isEmpty:a}=e,{context:l}=P.useContext(ar),c=P.useRef(null),u=P.useRef(null),d=P.useRef(),p=C=>{const x=C==null?void 0:parseInt(C,10).toString();for(const w of[c,u])x===void 0?w.current?.removeAttribute("tabindex"):w.current?.setAttribute("tabindex",x)};P.useImperativeHandle(t,()=>({forceFocusOutOfContainer(C){d.current?.forceFocusOutOfContainer(C)}}));const f=P.useCallback(()=>{const C=c.current,x=u.current;if(!C&&!x||l.isDestroyed()){d.current=l.destroyBean(d.current);return}if(C&&x){const w={setTabIndex:p};d.current=l.createBean(new Ice({comp:w,eTopGuard:C,eBottomGuard:x,eFocusableElement:n,onTabKeyDown:s,forceFocusOutWhenTabGuardsAreEmpty:r,focusInnerElement:M=>o.focusInnerElement(M),isEmpty:a}))}},[]),m=P.useCallback(C=>{c.current=C,f()},[f]),v=P.useCallback(C=>{u.current=C,f()},[f]),b=C=>{const x=C==="top"?Nb.TAB_GUARD_TOP:Nb.TAB_GUARD_BOTTOM;return se.createElement("div",{className:`${Nb.TAB_GUARD} ${x}`,role:"presentation",ref:C==="top"?m:v})};return se.createElement(se.Fragment,null,b("top"),i,b("bottom"))},Grt=P.forwardRef(zrt),Vrt=P.memo(Grt),Hrt=({context:e})=>{const[t,i]=P.useState(""),[n,s]=P.useState(""),[o,r]=P.useState(null),[a,l]=P.useState(null),[c,u]=P.useState(!1),[d,p]=P.useState(),f=P.useRef(),m=P.useRef(null),v=P.useRef(),[b,C]=P.useState(null),x=P.useRef(()=>{}),w=P.useRef(),M=P.useRef([]),T=P.useCallback(()=>{},[]);$f(" AG Grid ",m);const L=P.useCallback(V=>{if(m.current=V,f.current=V?e.createBean(new HXe):e.destroyBean(f.current),!V||e.isDestroyed())return;const j=f.current;x.current=j.focusInnerElement.bind(j);const K={destroyGridUi:()=>{},setRtlClass:i,forceFocusOutOfContainer:Y=>{if(!Y&&w.current?.isDisplayed()){w.current.forceFocusOutOfContainer(Y);return}v.current?.forceFocusOutOfContainer(Y)},updateLayoutClasses:s,getFocusableContainers:()=>{const Y=[],G=m.current?.querySelector(".ag-root");G&&Y.push({getGui:()=>G});for(const $ of M.current)$.isDisplayed()&&Y.push($);return Y},setCursor:r,setUserSelect:l};j.setComp(K,V,V),u(!0)},[]);P.useEffect(()=>{const V=f.current,j=m.current;if(!d||!V||!b||!j||e.isDestroyed())return;const K=[],{watermarkSelector:Y,paginationSelector:G,sideBarSelector:$,statusBarSelector:W,gridHeaderDropZonesSelector:Q}=V.getOptionalSelectors(),q=[];if(Q){const U=e.createBean(new Q.component),ee=U.getGui();j.insertAdjacentElement("afterbegin",ee),q.push(ee),K.push(U)}if($){const U=e.createBean(new $.component),ee=U.getGui(),ie=b.querySelector(".ag-tab-guard-bottom");ie&&(ie.insertAdjacentElement("beforebegin",ee),q.push(ee)),K.push(U),M.current.push(U)}const H=U=>{const ee=e.createBean(new U),ie=ee.getGui();return j.insertAdjacentElement("beforeend",ie),q.push(ie),K.push(ee),ee};if(W&&H(W.component),G){const U=H(G.component);w.current=U,M.current.push(U)}return Y&&H(Y.component),()=>{e.destroyBeans(K);for(const U of q)U.remove()}},[d,b,e]);const I=P.useMemo(()=>ml("ag-root-wrapper",t,n),[t,n]),R=P.useMemo(()=>ml("ag-root-wrapper-body","ag-focus-managed",n),[n]),O=P.useMemo(()=>({userSelect:a??"",WebkitUserSelect:a??"",cursor:o??""}),[a,o]),_=P.useCallback(V=>{v.current=V,p(V!==null)},[]),B=P.useCallback(()=>!f.current?.isFocusable(),[]);return se.createElement("div",{ref:L,className:I,style:O,role:"presentation"},se.createElement("div",{className:R,ref:C,role:"presentation"},c&&b&&!e.isDestroyed()&&se.createElement(ar.Provider,{value:e.getBeans()},se.createElement(Vrt,{ref:_,eFocusableElement:b,onTabKeyDown:T,gridCtrl:f.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:B},se.createElement(_rt,null)))))},Wrt=P.memo(Hrt),jrt=class extends we{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(t=>!!t.eGui))}},$ue={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},Urt={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...$ue},Kue=new Set(Object.keys(Urt)),$rt=new Set(Object.keys($ue)),Yue=e=>{const t=P.useRef(),i=P.useRef(null),n=P.useRef(null),s=P.useRef([]),o=P.useRef([]),r=P.useRef(e),a=P.useRef(),l=P.useRef(),c=P.useRef(!1),[u,d]=P.useState(void 0),[,p]=P.useState(0),f=P.useCallback(C=>{if(i.current=C,!C){for(const B of s.current)B();s.current.length=0;return}const x=e.modules||[];n.current||(n.current=new drt(()=>p(B=>B+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),s.current.push(()=>{n.current?.destroy(),n.current=null}));const w=bYe(e.gridOptions,e,Object.keys(e).filter(B=>!Kue.has(B))),M=()=>{if(c.current){const B=()=>a.current?.shouldQueueUpdates()?void 0:o.current.shift();let V=B();for(;V;)V(),V=B()}},T=new Zrt(M);a.current=T;const L=new jrt,I={providedBeanInstances:{frameworkCompWrapper:new Yrt(n.current,w),renderStatus:L},modules:x,frameworkOverrides:T,setThemeOnGridDiv:!0},R=B=>{d(B),B.createBean(L),s.current.push(()=>{B.destroy()}),B.getBean("ctrlsSvc").whenReady({addDestroyFunc:V=>{s.current.push(V)}},()=>{if(B.isDestroyed())return;const V=t.current;V&&e.passGridApi?.(V)})},O=B=>{B.getBean("ctrlsSvc").whenReady({addDestroyFunc:V=>{s.current.push(V)}},()=>{for(const V of o.current)V();o.current.length=0,c.current=!0})},_=new uet;w.gridId??(w.gridId=l.current),t.current=_.create(C,w,R,O,I),s.current.push(()=>{t.current=void 0}),t.current&&(l.current=t.current.getGridId())},[]),m=P.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),v=P.useCallback(C=>{c.current&&!a.current?.shouldQueueUpdates()?C():o.current.push(C)},[]);P.useEffect(()=>{const C=Krt(r.current,e);r.current=e,v(()=>{t.current&&SYe(C,t.current)})},[e]);const b=!se.useSyncExternalStore||rI(e,"renderingMode")==="legacy"?"legacy":"default";return se.createElement("div",{style:m,className:e.className,ref:f},se.createElement(zue.Provider,{value:b},u&&!u.isDestroyed()?se.createElement(Wrt,{key:u.instanceId,context:u}):null,n.current?.getPortals()??null))};function Krt(e,t){const i={};for(const n of Object.keys(t)){if(Kue.has(n)){$rt.has(n)&&Ee(274,{prop:n});continue}const s=t[n];e[n]!==s&&(i[n]=s)}return i}var Yrt=class extends fet{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const i=this.gridOptions;if(rI(i,"reactiveCustomComponents")){const r=(a=>{switch(a){case"filter":return rI(i,"enableFilterHandlers")?ert:Jot;case"floatingFilterComponent":return rI(i,"enableFilterHandlers")?nrt:irt;case"dateComponent":return qot;case"dragAndDropImageComponent":return Qot;case"loadingOverlayComponent":return ort;case"noRowsOverlayComponent":return art;case"statusPanel":return lrt;case"toolPanel":return crt;case"menuItem":return rrt;case"cellRenderer":return Zot;case"innerHeaderComponent":return srt}})(t.name);if(r)return new r(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Jj();break}const s=!t.cellRenderer&&t.name!=="toolPanel";return new Wue(e,this.parent,t,s)}},Xrt=P.forwardRef((e,t)=>{const i=P.useContext(ar),{registry:n,context:s,gos:o,rowModel:r}=i,[a,l]=P.useState(()=>new Tl),[c,u]=P.useState(()=>new Tl),[d,p]=P.useState(),[f,m]=P.useState(),v=P.useRef(),b=P.useRef(null),C=P.useRef(),x=P.useMemo(()=>qKe(e.api.getGridId(),d?.rowModelType??"clientSide"),[e]),w=P.useMemo(()=>a.toString()+" ag-details-row",[a]),M=P.useMemo(()=>c.toString()+" ag-details-grid",[c]);t&&P.useImperativeHandle(t,()=>({refresh(){return v.current?.refresh()??!1}})),e.template&&Ee(230);const T=P.useCallback(I=>{if(b.current=I,!I||s.isDestroyed()){v.current=s.destroyBean(v.current),C.current?.();return}const R={toggleCss:(_,B)=>l(V=>V.setClass(_,B)),toggleDetailGridCss:(_,B)=>u(V=>V.setClass(_,B)),setDetailGrid:_=>p(_),setRowData:_=>m(_),getGui:()=>b.current},O=n.createDynamicBean("detailCellRendererCtrl",!0);if(O&&(s.createBean(O),O.init(R,e),v.current=O,o.get("detailRowAutoHeight"))){const _=()=>{if(b.current==null)return;const B=b.current.clientHeight;B!=null&&B>0&&setTimeout(()=>{e.node.setRowHeight(B),(Ln(o)||Ry(o))&&r.onRowHeightChanged()},0)};C.current=Bh(i,I,_),_()}},[]),L=P.useCallback(I=>{v.current?.registerDetailWithMaster(I)},[]);return se.createElement("div",{className:w,ref:T},d&&se.createElement(Yue,{className:M,...d,modules:x,rowData:f,passGridApi:L}))}),Zrt=class extends Rce{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:v7,agGroupRowRenderer:v7,agDetailCellRenderer:Xrt},this.wrapIncoming=(t,i)=>i==="ensureVisible"?jot(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return Wot()}},Oy=class extends P.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return se.createElement(Yue,{...this.props,passGridApi:this.setGridApi})}};Iy.registerModules([Ny]);const qrt=()=>{const[e,t]=P.useState(!1),[i,n]=P.useState(""),[s,o]=P.useState(""),[r,a]=P.useState(""),[l,c]=P.useState(""),[u,d]=P.useState(""),[p,f]=P.useState([]),[m,v]=P.useState([]),b=P.useRef(null),{getClassesAndSubjects:C,addTeacher:x,isLoading:w,getAllTeachers:M,deleteTeacher:T,updateTeacher:L}=K0(),[I,R]=P.useState([{headerName:"id",valueGetter:U=>U.node.rowIndex+1},{field:"firstName",filter:!0},{field:"secondName",filter:!0},{field:"email",filter:!0},{field:"role",filter:!0},{headerName:"Action",cellRenderer:U=>{const ee=U.data;return X.jsxs("div",{className:"flex items-center gap-3 justify-center h-full",children:[X.jsx("button",{onClick:()=>Q(ee.email),className:"text-red-500 hover:text-red-700",children:X.jsx(Zz,{size:18})}),X.jsx("button",{onClick:()=>q(ee),className:"text-[#6c62ff] hover:text-[#5b52ff]",children:X.jsx(Xz,{size:18})})]})},width:120}]),[O,_]=P.useState([]);P.useEffect(()=>{e?b.current.showModal():b.current.close()},[e]),P.useEffect(()=>{(async()=>{try{const ee=await C();console.log("Fetched:",ee),f(ee.classes||[])}catch(ee){console.error("Error fetching classes:",ee)}})()},[C]);const B=()=>{v([...m,{class_Id:"",assignedSubjects:[]}])},V=(U,ee)=>{const ie=[...m];ie[U].class_Id=ee,ie[U].assignedSubjects=[],v(ie)},j=(U,ee)=>{const ie=[...m],oe=ie[U].assignedSubjects;oe.includes(ee)?ie[U].assignedSubjects=oe.filter(ae=>ae!==ee):ie[U].assignedSubjects.push(ee),v(ie)},K=U=>{v(m.filter((ee,ie)=>ie!==U))},[Y,G]=P.useState(!1),[$,W]=P.useState(null),Q=async U=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{const ee=await T(U);if(ee.success){un.success("Teacher deleted successfully");const ie=await M();_(ie.teachers||[])}else un.error(ee.message||"Failed to delete teacher")}catch(ee){console.error(ee),un.error("Failed to delete teacher")}},q=U=>{G(!0),W(U.email),n(U.email),o(U.firstName||""),a(U.secondName||"");const ee=U.classes||[],ie=U.subjectIds||[],oe=ee.map(ae=>{const me=p.find(ge=>ge._id.toString()===ae.toString()),xe=me?me.subjectIds.map(ge=>ge._id.toString()):[],be=ie.filter(ge=>xe.includes(ge.toString()));return{class_Id:ae.toString(),assignedSubjects:be}});v(oe),t(!0)},H=async U=>{U.preventDefault();const ee=m.map(ae=>ae.class_Id).filter(ae=>ae.trim()!==""),ie=m.flatMap(ae=>ae.assignedSubjects);if(Y){const ae={email:$,firstName:s,secondName:r,classes:ee,subjectIds:ie};try{const me=await L(ae);if(me.success){un.success("Teacher updated successfully"),t(!1),G(!1),W(null),n(""),o(""),a(""),c(""),v([]);const xe=await M();_(xe.teachers||[])}else un.error(me.message||"Failed to update teacher")}catch(me){console.error(me),un.error("Failed to update teacher")}return}const oe={email:i,firstName:s,secondName:r,password:l,classes:ee,subjectIds:ie};try{if((await x(oe)).success===!0){un.success("Teacher added successfully"),t(!1),n(""),o(""),a(""),c(""),v([]);const me=await M();_(me.teachers||[])}}catch(ae){console.log("Error adding teacher:",ae),un.error(ae.message)}};return P.useEffect(()=>{(async()=>{try{const ee=await M();_(ee.teachers||[])}catch(ee){console.log("Error fetching teachers:",ee),un.error("Error fetching teachers")}})()},[M]),X.jsxs("div",{children:[X.jsx(aj,{setState:t,name:"Teacher"}),X.jsxs("dialog",{ref:b,className:"p-6 rounded-lg w-[650px] overflow-y-auto max-h-[90vh]",children:[X.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Add Teacher"}),X.jsxs("form",{className:"space-y-4",onSubmit:H,children:[X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium",children:"Email"}),X.jsx("input",{type:"email",value:i,onChange:U=>n(U.target.value),placeholder:"Enter email",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg",required:!0})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium",children:"First Name"}),X.jsx("input",{type:"text",value:s,onChange:U=>o(U.target.value),placeholder:"Enter first name",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg",required:!0})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium",children:"Second Name"}),X.jsx("input",{type:"text",value:r,onChange:U=>a(U.target.value),placeholder:"Enter second name",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg",required:!0})]}),X.jsxs("div",{children:[X.jsx("label",{className:"block text-sm font-medium",children:"Password"}),X.jsx("input",{type:"password",value:l,onChange:U=>c(U.target.value),placeholder:"Enter password",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg",required:!Y})]}),X.jsxs("div",{className:"border-t pt-4",children:[X.jsxs("div",{className:"flex justify-between items-center mb-2",children:[X.jsx("h3",{className:"text-lg font-medium",children:"Assign Classes & Subjects"}),X.jsx("button",{type:"button",onClick:B,className:"bg-indigo-500 text-white px-3 py-2 rounded-lg",children:"+ Add Class"})]}),m.map((U,ee)=>{const ie=p.find(oe=>oe._id.toString()===U.class_Id);return X.jsxs("div",{className:"border p-3 mb-3 rounded-lg bg-gray-50",children:[X.jsxs("div",{className:"flex justify-between items-center mb-2",children:[X.jsx("label",{className:"font-semibold",children:"Class"}),X.jsx("button",{type:"button",onClick:()=>K(ee),className:"text-red-500 text-sm",children:"Remove"})]}),X.jsxs("select",{value:U.class_Id,onChange:oe=>V(ee,oe.target.value),className:"w-full p-2 border rounded mb-2",children:[X.jsx("option",{value:"",children:"Select Class"}),p.map(oe=>X.jsx("option",{value:oe._id,children:oe.name},oe._id))]}),ie&&X.jsxs("div",{className:"ml-2 mb-3",children:[X.jsx("label",{className:"font-semibold block mb-1",children:"Available Subjects"}),X.jsx("div",{className:"flex flex-wrap gap-3",children:ie.subjectIds.map(oe=>X.jsxs("label",{className:"flex items-center gap-1 text-sm",children:[X.jsx("input",{type:"checkbox",checked:U.assignedSubjects.includes(oe._id),onChange:()=>j(ee,oe._id)}),oe.name]},oe._id))})]})]},ee)})]}),X.jsxs("div",{className:"flex justify-end space-x-4 mt-4",children:[X.jsx("button",{disabled:w,type:"button",onClick:()=>{t(!1),G(!1),W(null),n(""),o(""),a(""),c(""),v([])},className:"bg-red-500 text-white px-4 py-2 rounded-lg",children:"Close"}),X.jsx("button",{type:"submit",className:"bg-[#6c62ff] text-white px-6 py-2 rounded-lg",children:w?"Submitting...":Y?"Update":"Submit"})]})]})]}),X.jsxs("div",{className:"w-96 flex gap-4 p-2 items-center",children:[X.jsx(eE,{}),X.jsx("input",{type:"text",onChange:U=>d(U.target.value),className:"py-2 px-8 outline-none border rounded focus:border-gray-400",placeholder:"Search..."})]}),X.jsx("div",{className:"",style:{height:490},children:w?X.jsxs("div",{className:"w-full h-full flex justify-center items-center",children:[" ",X.jsx(Do,{className:"animate-spin text-[#6c62ff]"})]}):X.jsx(Oy,{rowData:O,columnDefs:I,pagination:!0,paginationPageSize:20,quickFilterText:u})})]})};Iy.registerModules([Ny]);const Qrt=()=>{const[e,t]=P.useState(!1),[i,n]=P.useState(null),s=async j=>{if(window.confirm("Are you sure you want to delete this class?"))try{await R(j),bt.success("Class deleted successfully")}catch(K){bt.error(K.message)}},o=j=>{n(j._id),t(!0),d(j.name),c(j.subjectIds.map(K=>K.name)),a(!0)},[r,a]=P.useState(!1),[l,c]=P.useState([]),[u,d]=P.useState(""),[p,f]=P.useState(""),m=P.useRef(null),[v,b]=P.useState(""),[C,x]=P.useState([]),[w,M]=P.useState([{headerName:"id",valueGetter:j=>j.node.rowIndex+1},{field:"name",filter:!0},{field:"createdAt",headerName:"Created At",valueGetter:j=>new Date(j.data.createdAt).toLocaleDateString()},{field:"updatedAt",headerName:"updatedAt",valueGetter:j=>new Date(j.data.createdAt).toLocaleDateString()},{headerName:"Subjects",field:"subjectIds",valueGetter:j=>j.data.subjectIds.map(K=>K.name).join(", ")},{headerName:"Action",cellRenderer:j=>{const K=j.data;return X.jsxs("div",{className:"flex items-center gap-3 justify-center  h-full",children:[X.jsx("button",{onClick:()=>s(K._id),className:"text-red-500 hover:text-red-700",children:X.jsx(Zz,{size:18})}),X.jsx("button",{onClick:()=>o(K),className:"text-[#6c62ff] hover:text-[#5b52ff]",children:X.jsx(Xz,{size:18})})]})},width:120}]),{isLoading:T,addClass:L,getClasses:I,deleteClass:R,updateClass:O}=K0();P.useEffect(()=>{r?m.current.showModal():m.current.close()},[r]),P.useEffect(()=>{(async()=>{try{const K=await I();x(K.classes)}catch(K){console.log("Error fetching classes:",K),bt.error(K.message)}})()},[I]);const _=async j=>{if(j.preventDefault(),l.length===0)return bt.error("All fields are required");const K={name:u.toUpperCase(),subjectIds:l};try{let Y;e&&i?(Y=await O({id:i,...K}),Y.success&&(bt.success("Class updated successfully"),I().then(G=>x(G.classes)),t(!1),n(null))):(Y=await L(K),Y.success&&(bt.success("Class added successfully"),x(G=>[...G,Y.class]))),Y.success||bt.error(Y.message||"Operation failed")}catch(Y){bt.error(Y.message||"Something went wrong")}finally{a(!1),f(""),c([]),d("")}},B=j=>{if(j.key==="Enter"){j.preventDefault();const K=p.trim();K&&!l.includes(K)&&(c([...l,K]),f(""))}},V=j=>{c(l.filter(K=>K!==j))};return X.jsxs("div",{children:[X.jsx(aj,{setState:a,name:"Class"}),X.jsxs("dialog",{ref:m,className:"p-6 rounded-lg w-[600px] overflow-y-hidden",children:[X.jsx("h2",{className:"text-2xl font-semibold mb-4",children:e?"Edit Class":"Add Class"}),X.jsxs("form",{className:"space-y-4",onSubmit:_,children:[X.jsxs("div",{children:[X.jsx("label",{htmlFor:"secondName",className:"block text-sm font-medium text-gray-700",children:"Name"}),X.jsx("input",{type:"text",value:u,onChange:j=>d(j.target.value),placeholder:"Enter class name",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),X.jsxs("div",{children:[X.jsx("label",{htmlFor:"subjectsInput",className:"block text-sm font-medium text-gray-700",children:"Subjects"}),X.jsxs("div",{className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus-within:ring-2 focus-within:ring-indigo-500 flex flex-wrap items-center gap-2",children:[l.map(j=>X.jsxs("div",{className:"inline-flex items-center bg-indigo-100 text-indigo-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:[j,X.jsx("button",{type:"button",onClick:()=>V(j),className:"ml-1 -mr-0.5 inline-flex items-center justify-center p-0.5 rounded-full hover:bg-indigo-200","aria-label":`Remove ${j}`,children:X.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:X.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},j)),X.jsx("input",{type:"text",id:"subjectsInput",placeholder:"Type a subject and press Enter",className:"flex-grow p-0 border-none outline-none focus:ring-0",value:p,onChange:j=>f(j.target.value),onKeyDown:B})]})]}),X.jsxs("div",{className:"flex justify-end space-x-4 mt-4",children:[X.jsx("button",{type:"button",onClick:()=>a(!1),className:"bg-red-500 text-white px-4 py-2 rounded-lg",children:"Close"}),X.jsx("button",{disabled:T,type:"submit",className:"bg-[#6c62ff] text-white px-6 py-2 rounded-lg",children:T?"Submitting...":e?"Update":"Submit"})]})]})]}),X.jsxs("div",{className:"w-96 flex gap-4 p-2 items-center",children:[X.jsx(eE,{}),X.jsx("input",{type:"text",onChange:j=>b(j.target.value),className:"py-2 px-8 outline-none border rounded focus:border-gray-400",placeholder:"Search..."})]}),X.jsx("div",{className:"",style:{height:490},children:T?X.jsxs("div",{className:"w-full h-full flex justify-center items-center",children:[" ",X.jsx(Do,{className:"animate-spin text-[#6c62ff]"})]}):X.jsx(Oy,{rowData:C,columnDefs:w,pagination:!0,paginationPageSize:20,quickFilterText:v})})]})};Iy.registerModules([Ny]);const Jrt=()=>{const[e,t]=P.useState(!1),[i,n]=P.useState(null),[s,o]=P.useState([{headerName:"ID",valueGetter:q=>q.node.rowIndex+1},{field:"firstName",filter:!0},{field:"secondName",filter:!0},{field:"email",filter:!0},{field:"role",filter:!0},{headerName:"Action",cellRenderer:q=>{const H=q.data;return X.jsxs("div",{className:"flex items-center gap-3 justify-center h-full",children:[X.jsx("button",{onClick:async()=>Q(H._id),className:"text-red-500 hover:text-red-700",children:X.jsx(Zz,{size:16})}),X.jsx("button",{onClick:()=>W(H),className:"text-[#6c62ff] hover:text-[#5b52ff]",children:X.jsx(Xz,{size:16})})]})}}]),[r,a]=P.useState([]),[l,c]=P.useState(!1),[u,d]=P.useState(""),[p,f]=P.useState(""),[m,v]=P.useState(""),[b,C]=P.useState(""),[x,w]=P.useState(""),[M,T]=P.useState([]),[L,I]=P.useState(""),[R,O]=P.useState(""),{addStudent:_,getAllClasses:B,isLoading:V,getStudentsByClass:j,updateStudent:K,deleteStudent:Y}=K0(),G=P.useRef(null);P.useEffect(()=>{l?G.current.showModal():G.current.close()},[l]),P.useEffect(()=>{(async()=>{try{const H=await B();console.log(H),T(H.classes),H.classes.length>0&&O(H.classes[0]._id)}catch(H){console.log("Error fetching classes:",H),bt.error(H.message)}})()},[B]),P.useEffect(()=>{R?(async()=>{try{const H=await j(R);H.success?a(H.students||[]):(bt.error(H.message||"Error fetching students"),a([]))}catch(H){console.log("Error fetching students:",H),bt.error("Failed to load students"),a([])}})():a([])},[j,R]);const $=async q=>{if(q.preventDefault(),!u||!p||!x||!e&&(!m||!b))return bt.error("Please fill in all required fields.");try{if(e&&i){const H={id:i,email:m,firstName:u,secondName:p,classId:x};b&&(H.password=b);const U=await K(H);U.success?(bt.success("Student updated successfully"),a(ee=>ee.map(ie=>ie._id===i?{...ie,firstName:u,secondName:p,email:m,classId:x}:ie)),t(!1),n(null)):bt.error(U.message||"Failed to update student")}else{const U=await _({email:m,firstName:u,secondName:p,password:b,classId:x});U.success===!0?bt.success("Student Added!"):bt.error(U.message||"Error adding student.")}}catch(H){console.error("Error adding/updating student",H),bt.error("Error processing request")}finally{d(""),f(""),v(""),C(""),w(""),c(!1)}},W=q=>{t(!0),n(q._id),d(q.firstName||""),f(q.secondName||""),v(q.email||""),w(q.classId||R||""),c(!0)},Q=async q=>{if(window.confirm("Are you sure you want to delete this student?"))try{const H=await Y(q);H.success?(a(U=>U.filter(ee=>ee._id!==q)),bt.success("Student deleted")):bt.error(H.message||"Failed to delete student")}catch{bt.error("Error deleting student")}};return X.jsxs("div",{children:[X.jsx(aj,{setState:c,name:"Student"}),X.jsxs("dialog",{ref:G,className:"p-6 rounded-lg w-[600px] overflow-y-hidden",children:[X.jsx("h2",{className:"text-2xl font-semibold mb-4",children:e?"Edit Student":"Add Student"}),X.jsxs("form",{className:"space-y-4",onSubmit:$,children:[X.jsxs("div",{children:[X.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),X.jsx("input",{type:"email",id:"email",value:m,onChange:q=>v(q.target.value),placeholder:"Enter email",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),X.jsxs("div",{children:[X.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),X.jsx("input",{type:"text",id:"firstName",value:u,onChange:q=>d(q.target.value),placeholder:"Enter first name",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),X.jsxs("div",{children:[X.jsx("label",{htmlFor:"secondName",className:"block text-sm font-medium text-gray-700",children:"Second Name"}),X.jsx("input",{type:"text",id:"secondName",value:p,onChange:q=>f(q.target.value),placeholder:"Enter second name",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0})]}),X.jsxs("div",{children:[X.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),X.jsx("input",{type:"password",id:"password",value:b,onChange:q=>C(q.target.value),placeholder:e?"Enter new password (optional)":"Enter password",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!e})]}),X.jsxs("div",{children:[X.jsx("label",{htmlFor:"classId",className:"block text-sm font-medium text-gray-700",children:"Classes"}),X.jsxs("select",{id:"classId",value:x,onChange:q=>w(q.target.value),className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",required:!0,children:[X.jsx("option",{value:"",children:"Select a class"}),M.map(q=>X.jsx("option",{value:q._id,children:q.name},q._id))]})]}),X.jsxs("div",{className:"flex justify-end space-x-4 mt-4",children:[X.jsx("button",{type:"button",onClick:()=>c(!1),className:"bg-red-500 text-white px-4 py-2 rounded-lg",children:"Close"}),X.jsx("button",{type:"submit",className:"bg-[#6c62ff] text-white px-6 py-2 rounded-lg",disabled:V,children:V?"Submitting...":e?"Update":"Submit"})]})]})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsxs("div",{className:"w-96 flex gap-4 p-2 items-center",children:[X.jsx(eE,{}),X.jsx("input",{type:"text",onChange:q=>I(q.target.value),className:"py-2 px-8 outline-none border rounded focus:border-gray-400",placeholder:"Search..."})]}),X.jsxs("div",{className:"flex items-center",children:[X.jsx("p",{className:"text-nowrap mr-3 text-gray-700",children:"Filter by class"}),X.jsx("select",{name:"class",id:"class",value:R,onChange:q=>O(q.target.value),className:"mt-1 w-full p-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 hover:bg-indigo-50",children:M.map(q=>X.jsx("option",{value:q._id,className:"text-gray-900",children:q.name},q._id))})]})]}),X.jsx("div",{className:"",style:{height:490},children:V?X.jsxs("div",{className:"w-full h-full flex justify-center items-center",children:[" ",X.jsx(Do,{className:"animate-spin text-[#6c62ff]"})]}):X.jsx(Oy,{rowData:r,columnDefs:s,pagination:!0,paginationPageSize:20,quickFilterText:L})})]})},eat=e=>X.jsx("div",{children:"Attendance"}),lP=({name:e})=>X.jsxs("header",{className:"ml-4",children:[X.jsx("h2",{className:"text-3xl font-semibold",children:e}),X.jsxs("p",{className:"text-gray-600 mt-2",children:["View search, and manage all your ",e.toLowerCase()," here."]})]}),$x="http://localhost:4000/api/teacher",cP=YR(e=>({isLoadingClasses:!1,isLoading:!1,isLoadingAttendance:!1,getClasses:async()=>{const{user:t}=jr.getState();e({isLoadingClasses:!0});try{const{data:i}=await wt.post($x+"/classes",{id:t._id});return i}catch(i){return console.error("Error to get  classes: ",i),{success:!1,message:i.response?.data?.message||"Failed to get classes"}}finally{e({isLoadingClasses:!1})}},getAllClassesAndSubjects:async()=>{const{user:t}=jr.getState();e({isLoading:!0});try{const{data:i}=await wt.post($x+"/getAllClassesAndSubjects",{id:t._id});return i}catch(i){return console.error("Error to get  classes: ",i),{success:!1,message:i.response?.data?.message||"Failed to get classes"}}finally{e({isLoading:!1})}},getStudentsAttendanceForDay:async(t,i,n)=>{const{user:s}=jr.getState();e({isLoadingAttendance:!0});try{const{data:o}=await wt.post($x+"/getAttendance",{takenByTeacherId:s._id,date:t,classId:i,subjectId:n});return o}catch(o){return console.error("Error to get  attendance: ",o),{success:!1,message:o.response?.data?.message||"Failed to get attendance"}}finally{e({isLoadingAttendance:!1})}},submitAttendance:async(t,i,n,s)=>{const{user:o}=jr.getState();e({isLoadingAttendance:!0});try{const{data:r}=await wt.post($x+"/submitAttendance",{date:t,classId:i,subjectId:n,takenByTeacherId:o._id,attendanceData:s});return r}catch(r){return console.error("Error to submit attendance: ",r),{success:!1,message:r.response?.data?.message||"Failed to submit attendance"}}finally{e({isLoadingAttendance:!1})}},getTeacherOverview:async()=>{const{user:t}=jr.getState();e({isLoading:!0});try{const{data:i}=await wt.post($x+"/getTeacherCount",{id:t._id});return i}catch(i){return console.error("Error to get  teacher overview: ",i),{success:!1,message:i.response?.data?.message||"Failed to get teacher overview"}}finally{e({isLoading:!1})}}}));Iy.registerModules([Ny]);const w7=se.memo(e=>{const{value:t,data:i,colDef:n}=e,[s,o]=P.useState(t);P.useEffect(()=>{o(t)},[t]);const r=()=>{const a=!s;o(a),e.api.applyTransaction({update:[{...e.data,isPresent:a}]})};return X.jsx("div",{className:"flex justify-center items-center h-full",children:X.jsx("input",{type:"checkbox",checked:s,onChange:r,className:"cursor-pointer h-4 w-4 text-[#6c62ff] border-gray-300 rounded focus:ring-[#6c62ff]"})})}),D7="p-2 bg-gray-100 text-gray-700 rounded-md border-2 border-[#6c62ff] focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto transition duration-150",tat=()=>{const[e,t]=P.useState([]),[i,n]=P.useState(""),[s,o]=P.useState(""),[r,a]=P.useState([]),[l,c]=P.useState([{headerName:"#",valueGetter:I=>I.node.rowIndex+1,width:70},{field:"firstName",headerName:"First Name",filter:!0,width:150},{field:"secondName",headerName:"Second Name",filter:!0,width:150},{headerName:"Present",field:"isPresent",cellRenderer:w7,editable:!1,sortable:!1,filter:!1,width:100}]),{isLoading:u,isLoadingAttendance:d,getAllClassesAndSubjects:p,getStudentsAttendanceForDay:f,submitAttendance:m}=cP(),v=I=>I?Array.isArray(I)?I.map(R=>({_id:R._id,name:R.name})):typeof I=="string"?I.split(",").map(R=>R.trim()):[]:[];P.useEffect(()=>{(async()=>{try{const R=await p();if(R.classes.length===0){un.error("No classes found");return}let O=[];if(Array.isArray(R)?O=R:R?.classes?.classes&&(O=R.classes.classes),O.length>0){t(O),n(O[0]._id||"");const _=v(O[0].subjectIds);o(_[0]?._id||"")}else un.error("No classes found")}catch(R){console.error(R),un.error(R.message||"Failed to load classes")}})()},[p]);const b=P.useMemo(()=>e.find(I=>I._id===i),[e,i]),C=P.useMemo(()=>v(b?.subjectIds),[b]),x=I=>{const R=I.target.value;n(R);const O=e.find(B=>B._id===R),_=v(O?.subjectIds);o(_[0]?._id||"")},w=I=>o(I.target.value),M=async I=>{if(I.preventDefault(),!i||!s){un.error("Please select both Class and Subject.");return}const R=new Date().toISOString().split("T")[0];try{if(d)return;const O=await f(R,i,s);console.log(O),O?.success&&O.attendanceList?(a(O.attendanceList),un.success("Attendance data retrieved successfully.")):(un.error(O?.message||"Failed to load attendance data."),a([]))}catch(O){console.error(O),un.error(O.message||"Failed to load attendance")}},T=async()=>{if(r.length===0){un.error("No attendance data to submit.");return}const I=new Date().toISOString().split("T")[0],R=r.map(O=>({studentId:O.studentId,isPresent:O.isPresent}));try{const O=await m(I,i,s,R);O.success?un.success("Attendance submitted successfully."):un.error(O.message||"Failed to submit attendance.")}catch{un.error("Error submitting attendance.")}},L=I=>{const R=r.map(O=>({...O,isPresent:I}));a(R)};return X.jsxs("div",{className:"p-4 sm:p-3",children:[X.jsx(lP,{name:"Attendance"}),X.jsxs("div",{className:"bg-white shadow-sm p-4 w-full mt-4 rounded-lg",children:[X.jsx("form",{onSubmit:M,children:X.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[X.jsxs("div",{children:[X.jsx("h2",{className:"text-lg font-bold",children:"Select Class & Subject"}),X.jsx("select",{className:D7,onChange:x,value:i,children:e.map(I=>X.jsx("option",{value:I._id,children:I.name},I._id))})]}),X.jsxs("div",{children:[X.jsx("h2",{className:"text-lg font-bold",children:"Select Subject"}),X.jsx("select",{className:D7,onChange:w,value:s,children:C.map(I=>X.jsx("option",{value:I._id,children:I.name},I._id))})]}),X.jsx("div",{className:"flex gap-4 mt-4 md:mt-0",children:X.jsx("button",{type:"submit",className:"bg-[#6c62ff] text-white px-4 py-2 rounded-md shadow-md hover:bg-[#6c62ff] focus:outline-none",children:d?X.jsx(Do,{className:"animate-spin h-5 w-5"}):"Load Students"})})]})}),r.length>0&&X.jsxs("div",{className:"mt-4 flex gap-4",children:[X.jsx("button",{onClick:()=>L(!0),className:"bg-green-500 text-white px-4 py-2 rounded-md shadow-md hover:bg-green-600 focus:outline-none",children:"Select All Present"}),X.jsx("button",{onClick:()=>L(!1),className:"bg-red-500 text-white px-4 py-2 rounded-md shadow-md hover:bg-red-600 focus:outline-none",children:"Select All Absent"}),X.jsx("button",{onClick:T,className:"bg-blue-500 text-white px-4 py-2 rounded-md shadow-md hover:bg-blue-600 focus:outline-none",children:d?X.jsx(Do,{className:"animate-spin h-5 w-5"}):"Submit Attendance"})]})]}),X.jsx("div",{className:"mt-6",children:X.jsx("div",{className:"ag-theme-alpine",style:{height:400},children:X.jsx(Oy,{columnDefs:l,rowData:r,pagination:!0,frameworkComponents:{checkboxCellRenderer:w7},rowSelection:"multiple"})})})]})},iat=YR(e=>({isLoading:!1,isLoadingSubjects:!1,getAttendace:async(t,i,n,s)=>{e({isLoading:!0});try{const{data:o}=await wt.post("http://localhost:4000/api/student/fetch-attendance",{studentId:t,month:i,year:n,subjectId:s});return o}catch(o){return console.error("Error to get  attendance: ",o),{success:!1,message:o.response?.data?.message||"Failed to get attendance"}}finally{e({isLoading:!1})}},getSubjects:async t=>{e({isLoadingSubjects:!0});try{const{data:i}=await wt.post("http://localhost:4000/api/student/fetch-subjects",{studentId:t});return e({subjects:i.subjects||[]}),i}catch(i){return console.error("Error to get  subjects: ",i),{success:!1,message:i.response?.data?.message||"Failed to get subjects"}}finally{e({isLoadingSubjects:!1})}}}));Iy.registerModules([Ny]);const nat=()=>{const{getAttendace:e,isLoading:t,getSubjects:i,isLoadingSubjects:n}=iat(),{user:s}=jr(),[o,r]=P.useState(""),[a,l]=P.useState([]),[c,u]=P.useState(new Date),[d,p]=P.useState([{headerName:"Date",field:"date",sortable:!0,filter:!0,flex:1},{headerName:"Status",field:"status",sortable:!0,filter:!0,flex:1}]),[f,m]=P.useState([]),v="p-2 bg-gray-100 text-gray-700 rounded-md border-2 border-[#6c62ff] focus:outline-none focus:ring-2 focus:ring-blue-500 w-full md:w-auto transition duration-150",b=w=>r(w.target.value),C=w=>u(w),x=async w=>{w.preventDefault();const M=c.getMonth()+1,T=c.getFullYear(),L=await e(s._id,M,T,o);if(L.success){if(L.attendance.length===0){m([]),bt.error("No attendance records found for the selected month and subject");return}const I=L.attendance.length,R=[{headerName:"#",valueGetter:B=>B.node.rowIndex+1,width:70,sortable:!1,filter:!1,pinned:"left"},{field:"date",headerName:"Date",filter:!0,width:150,pinned:"left"}],O=Array.from({length:I},(B,V)=>({headerName:`${new Date(T,M-1,V+1).toLocaleDateString("en-US",{weekday:"short"}).toLowerCase()}, ${V+1}`,field:`day_${V+1}`,editable:!1,sortable:!1,filter:!1,width:80,dayIndex:V,cellRendererFramework:Y=>X.jsx("input",{type:"checkbox",disabled:!0,checked:!!Y.value,"aria-label":`day-${V+1}`})}));p([...R,...O]);const _={date:`${M}/${T}`,month:M};L.attendance.forEach((B,V)=>{_[`day_${V+1}`]=B}),m([_]),bt.success("Attendance fetched successfully")}else bt.error(L.message||"Failed to fetch attendance")};return P.useEffect(()=>{(async()=>{const M=await i(s._id);M.success&&(console.log(M),l(M.subjects),M.subjects.length>0&&r(M.subjects[0]._id))})()},[i,s._id]),X.jsxs("div",{children:[X.jsx(lP,{name:"Attendance"}),n?X.jsx("div",{className:"w-full h-[400px] flex items-center justify-center",children:X.jsx(Do,{className:"animate-spin text-[#6c62ff]"})}):X.jsxs("div",{children:[X.jsx("form",{onSubmit:x,children:X.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mt-3 bg-white p-4 rounded-md shadow-sm",children:[X.jsxs("div",{children:[X.jsx("h2",{className:"text-lg font-semibold",children:"Select Subject"}),X.jsx("select",{className:v,onChange:b,value:o,children:a.map(w=>X.jsx("option",{value:w._id,children:w.name},w._id))})]}),X.jsxs("div",{children:[X.jsx("h2",{className:"text-lg font-semibold",children:"Select Date & Year"}),X.jsx(uJ,{selected:c,onChange:C,dateFormat:"yyyy/MM",showMonthYearPicker:!0,className:v})]}),X.jsx("button",{type:"submit",className:"bg-[#6c62ff] text-white px-4 py-2 rounded-md shadow-md hover:bg-[#6c62ff] focus:outline-none mt-4 md:mt-0",children:t?X.jsx(Do,{className:"animate-spin h-5 w-5"}):"Search"})]})}),X.jsx("div",{className:"mt-6",children:X.jsx("div",{className:"ag-theme-alpine",style:{height:400},children:X.jsx(Oy,{columnDefs:d,rowData:f,pagination:!0,rowSelection:"multiple"})})})]})]})},sat=()=>{const[e,t]=P.useState({totalClasses:0,totalStudents:0,totalSubjects:0}),{getTeacherOverview:i,isLoading:n}=cP();return P.useEffect(()=>{(async()=>{const{count:o}=await i();console.log(o),t({totalClasses:o.totalClasses,totalStudents:o.totalStudents,totalSubjects:o.totalSubjects})})()},[i]),X.jsx("div",{children:n?X.jsx("div",{className:"flex justify-center items-center h-64",children:X.jsx(Do,{className:"animate-spin text-4xl text-[#6c62ff]"})}):X.jsxs("div",{className:"flex gap-8 w-full items-center",children:[X.jsx(Yf,{name:"Total Classes",count:e.totalClasses,icon:X.jsx(dw,{className:" text-xl text-yellow-400 "})}),X.jsx(Yf,{name:"Total Students",count:e.totalStudents,icon:X.jsx(Yz,{className:" text-xl text-blue-500 "})}),X.jsx(Yf,{name:"Total Subjects",count:e.totalSubjects,icon:X.jsx(vQ,{className:" text-xl text-green-600 "})})]})})},Xue=({setSearchInput:e})=>X.jsxs("div",{className:"flex gap-2 items-center mt-2 flex-1",children:[X.jsx(eE,{}),X.jsx("input",{className:"py-2 px-8 outline-none border rounded focus:border-gray-400 w-full",type:"text",onChange:t=>e(t.target.value),placeholder:"Search..."})]}),oat=({classes:e,setclassToDisplayStudents:t,classToDisplayStudents:i})=>X.jsxs("div",{className:"flex items-center",children:[X.jsx("p",{className:"text-nowrap mr-3 text-gray-700",children:"Filter by class"}),X.jsx("select",{name:"class",id:"class",value:i,onChange:n=>t(n.target.value),className:"mt-1 w-full p-1 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 hover:bg-indigo-50",children:e.map((n,s)=>X.jsx("option",{value:n._id,children:n.name},s))})]});Iy.registerModules([Ny]);const rat=()=>{const[e,t]=P.useState([]),[i,n]=P.useState([]),[s,o]=P.useState(""),[r,a]=P.useState(""),[l,c]=P.useState([{headerName:"ID",valueGetter:m=>m.node.rowIndex+1},{field:"firstName",filter:!0,flex:1},{field:"secondName",filter:!0,flex:1},{field:"email",filter:!0,flex:1}]),{getStudentsByClass:u,isLoading:d}=K0(),{getClasses:p,isLoadingClasses:f}=cP();return P.useEffect(()=>{(async()=>{try{const v=await p();v.classes.length===0&&bt.error("No classes found for the teacher"),t(v.classes.classes),a(v.classes.classes[0]?._id||"")}catch(v){console.log(v),bt.error(v.message)}})()},[p,a]),P.useEffect(()=>{r?(async()=>{try{const v=await u(r);console.log(v),v.success?(v.students.length===0&&bt.error("No students found for the selected class"),n(v.students)):(bt.error(v.message||"Error fetching students"),n([]))}catch(v){console.log("Error fetching students:",v),bt.error("Failed to load students"),n([])}})():n([])},[u,r]),X.jsx(X.Fragment,{children:f?X.jsxs("div",{className:"w-full flex items-center justify-center h-full",children:["      ",X.jsx(Do,{className:"animate-spin text-[#6c62ff]"})]}):X.jsxs(X.Fragment,{children:[X.jsx(lP,{name:"Students"}),X.jsxs("div",{className:"w-full justify-between flex gap-5",children:[X.jsx(Xue,{setSearchInput:o}),X.jsx(oat,{classes:e,setclassToDisplayStudents:a})]}),X.jsx("div",{className:"mt-2",style:{height:490},children:d?X.jsxs("div",{className:"w-full h-full flex justify-center items-center",children:[" ",X.jsx(Do,{className:"animate-spin text-[#6c62ff]"})]}):X.jsx(Oy,{rowData:i,columnDefs:l,pagination:!0,paginationPageSize:20,quickFilterText:s})})]})})};Iy.registerModules([Ny]);const aat=()=>{const[e,t]=P.useState(""),{isLoading:i,getAllClassesAndSubjects:n}=cP(),[s,o]=P.useState([]),[r,a]=P.useState([{headerName:"ID",valueGetter:l=>l.node.rowIndex+1},{field:"name",filter:!0,flex:1},{field:"subjectIds",filter:!0,flex:1}]);return P.useEffect(()=>{(async()=>{try{const c=await n();if(c?.classes?.classes){const u=c.classes.classes.map(d=>({...d,subjectIds:d.subjectIds.map(p=>p.name).join(", ")}));o(u)}}catch(c){console.error(c),un.error(c.message)}})()},[n]),X.jsxs("div",{children:[X.jsx(lP,{name:"Classes"}),X.jsx("div",{className:"w-[80%] justify-between flex gap-5",children:X.jsx(Xue,{setSearchInput:t})}),X.jsx("div",{className:"mt-2",style:{height:490},children:i?X.jsxs("div",{className:"w-full h-full flex justify-center items-center",children:[" ",X.jsx(Do,{className:"animate-spin text-[#6c62ff]"})]}):X.jsx(Oy,{rowData:s,columnDefs:r,pagination:!0,paginationPageSize:20,quickFilterText:e})})]})},lat=()=>X.jsx("div",{children:"StudentDashboard"}),tc=({children:e})=>{const{isAuthorized:t,isCheckingAuth:i}=jr();return i?X.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:X.jsx(Do,{className:"animate-spin text-[#6c62ff]"})}):t?e:X.jsx(sb,{to:"/signin",replace:!0})},cat=({children:e})=>{const{isAuthorized:t,isCheckingAuth:i}=jr();return i?X.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:X.jsx(Do,{className:"animate-spin text-[#6c62ff]"})}):t?X.jsx(sb,{to:"/",replace:!0}):e};function uat(){const{checkAuth:e}=jr(),[t,i]=P.useState(!1);P.useEffect(()=>{e()},[e]);const{isCheckingAuth:n,isAuthorized:s,user:o}=jr();return n?X.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:X.jsx(Do,{className:"animate-spin text-[#6c62ff]"})}):X.jsxs(X.Fragment,{children:[X.jsx(Tye,{}),s?X.jsxs("div",{className:"flex bg-gray-50 min-h-screen",children:[X.jsx(nKe,{isOpen:t}),X.jsxs("div",{className:"flex flex-col flex-1",children:[X.jsx(iKe,{setIsOpen:i}),X.jsxs("main",{className:"flex-1 p-3",children:[o?.role.toLowerCase()==="admin"&&X.jsxs(LA,{children:[X.jsx(lo,{path:"/",element:X.jsx(tc,{children:X.jsx(tKe,{})})}),X.jsx(lo,{path:"/teachers",element:X.jsx(tc,{children:X.jsx(qrt,{})})}),X.jsx(lo,{path:"/classes",element:X.jsx(tc,{children:X.jsx(Qrt,{})})}),X.jsx(lo,{path:"/students",element:X.jsx(tc,{children:X.jsx(Jrt,{})})}),X.jsx(lo,{path:"/attendance",element:X.jsx(tc,{children:X.jsx(eat,{})})}),X.jsx(lo,{path:"*",element:X.jsx(sb,{to:"/",replace:!0})})]}),o?.role.toLowerCase()==="teacher"&&X.jsxs(LA,{children:[X.jsx(lo,{path:"/teacher",element:X.jsx(tc,{children:X.jsx(sat,{})})}),X.jsx(lo,{path:"/teacher/attendance",element:X.jsx(tc,{children:X.jsx(tat,{})})}),X.jsx(lo,{path:"/teacher/students",element:X.jsx(tc,{children:X.jsx(rat,{})})}),X.jsx(lo,{path:"/teacher/classes",element:X.jsx(tc,{children:X.jsx(aat,{})})}),X.jsx(lo,{path:"*",element:X.jsx(sb,{to:"/teacher",replace:!0})})]}),o?.role.toLowerCase()==="student"&&X.jsxs(LA,{children:[X.jsx(lo,{path:"/student",element:X.jsx(tc,{children:X.jsx(lat,{})})}),X.jsx(lo,{path:"/student/attendance",element:X.jsx(tc,{children:X.jsx(nat,{})})}),X.jsx(lo,{path:"*",element:X.jsx(sb,{to:"/student",replace:!0})})]})]})]})]}):X.jsxs(LA,{children:[X.jsx(lo,{path:"/signin",element:X.jsx(cat,{children:X.jsx(Iye,{})})}),X.jsx(lo,{path:"*",element:X.jsx(sb,{to:"/signin",replace:!0})})]})]})}Cpe.createRoot(document.getElementById("root")).render(X.jsx(Pge,{children:X.jsx(uat,{})}));
